function cE(e,r){for(var i=0;i<r.length;i++){const o=r[i];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in e)){const N=Object.getOwnPropertyDescriptor(o,h);N&&Object.defineProperty(e,h,N.get?N:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const N of h)if(N.type==="childList")for(const B of N.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&o(B)}).observe(document,{childList:!0,subtree:!0});function i(h){const N={};return h.integrity&&(N.integrity=h.integrity),h.referrerPolicy&&(N.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?N.credentials="include":h.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function o(h){if(h.ep)return;h.ep=!0;const N=i(h);fetch(h.href,N)}})();function Ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zh={exports:{}},ea={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function lE(){if(p0)return ea;p0=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),B=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),_=Symbol.iterator;function b(J){return J===null||typeof J!="object"?null:(J=_&&J[_]||J["@@iterator"],typeof J=="function"?J:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,f={};function R(J,Ee,Ce){this.props=J,this.context=Ee,this.refs=f,this.updater=Ce||T}R.prototype.isReactComponent={},R.prototype.setState=function(J,Ee){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,Ee,"setState")},R.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function g(){}g.prototype=R.prototype;function F(J,Ee,Ce){this.props=J,this.context=Ee,this.refs=f,this.updater=Ce||T}var m=F.prototype=new g;m.constructor=F,v(m,R.prototype),m.isPureReactComponent=!0;var P=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function x(J,Ee,Ce,Re,ye,Te){return Ce=Te.ref,{$$typeof:e,type:J,key:Ee,ref:Ce!==void 0?Ce:null,props:Te}}function y(J,Ee){return x(J.type,Ee,void 0,void 0,void 0,J.props)}function w(J){return typeof J=="object"&&J!==null&&J.$$typeof===e}function p(J){var Ee={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Ce){return Ee[Ce]})}var C=/\/+/g;function A(J,Ee){return typeof J=="object"&&J!==null&&J.key!=null?p(""+J.key):Ee.toString(36)}function M(){}function j(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(M,M):(J.status="pending",J.then(function(Ee){J.status==="pending"&&(J.status="fulfilled",J.value=Ee)},function(Ee){J.status==="pending"&&(J.status="rejected",J.reason=Ee)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function U(J,Ee,Ce,Re,ye){var Te=typeof J;(Te==="undefined"||Te==="boolean")&&(J=null);var He=!1;if(J===null)He=!0;else switch(Te){case"bigint":case"string":case"number":He=!0;break;case"object":switch(J.$$typeof){case e:case r:He=!0;break;case E:return He=J._init,U(He(J._payload),Ee,Ce,Re,ye)}}if(He)return ye=ye(J),He=Re===""?"."+A(J,0):Re,P(ye)?(Ce="",He!=null&&(Ce=He.replace(C,"$&/")+"/"),U(ye,Ee,Ce,"",function(Be){return Be})):ye!=null&&(w(ye)&&(ye=y(ye,Ce+(ye.key==null||J&&J.key===ye.key?"":(""+ye.key).replace(C,"$&/")+"/")+He)),Ee.push(ye)),1;He=0;var we=Re===""?".":Re+":";if(P(J))for(var Je=0;Je<J.length;Je++)Re=J[Je],Te=we+A(Re,Je),He+=U(Re,Ee,Ce,Te,ye);else if(Je=b(J),typeof Je=="function")for(J=Je.call(J),Je=0;!(Re=J.next()).done;)Re=Re.value,Te=we+A(Re,Je++),He+=U(Re,Ee,Ce,Te,ye);else if(Te==="object"){if(typeof J.then=="function")return U(j(J),Ee,Ce,Re,ye);throw Ee=String(J),Error("Objects are not valid as a React child (found: "+(Ee==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":Ee)+"). If you meant to render a collection of children, use an array instead.")}return He}function z(J,Ee,Ce){if(J==null)return J;var Re=[],ye=0;return U(J,Re,"","",function(Te){return Ee.call(Ce,Te,ye++)}),Re}function W(J){if(J._status===-1){var Ee=J._result;Ee=Ee(),Ee.then(function(Ce){(J._status===0||J._status===-1)&&(J._status=1,J._result=Ce)},function(Ce){(J._status===0||J._status===-1)&&(J._status=2,J._result=Ce)}),J._status===-1&&(J._status=0,J._result=Ee)}if(J._status===1)return J._result.default;throw J._result}var Z=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(Ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function ce(){}return ea.Children={map:z,forEach:function(J,Ee,Ce){z(J,function(){Ee.apply(this,arguments)},Ce)},count:function(J){var Ee=0;return z(J,function(){Ee++}),Ee},toArray:function(J){return z(J,function(Ee){return Ee})||[]},only:function(J){if(!w(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},ea.Component=R,ea.Fragment=i,ea.Profiler=h,ea.PureComponent=F,ea.StrictMode=o,ea.Suspense=k,ea.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,ea.__COMPILER_RUNTIME={__proto__:null,c:function(J){return S.H.useMemoCache(J)}},ea.cache=function(J){return function(){return J.apply(null,arguments)}},ea.cloneElement=function(J,Ee,Ce){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Re=v({},J.props),ye=J.key,Te=void 0;if(Ee!=null)for(He in Ee.ref!==void 0&&(Te=void 0),Ee.key!==void 0&&(ye=""+Ee.key),Ee)!H.call(Ee,He)||He==="key"||He==="__self"||He==="__source"||He==="ref"&&Ee.ref===void 0||(Re[He]=Ee[He]);var He=arguments.length-2;if(He===1)Re.children=Ce;else if(1<He){for(var we=Array(He),Je=0;Je<He;Je++)we[Je]=arguments[Je+2];Re.children=we}return x(J.type,ye,void 0,void 0,Te,Re)},ea.createContext=function(J){return J={$$typeof:B,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:N,_context:J},J},ea.createElement=function(J,Ee,Ce){var Re,ye={},Te=null;if(Ee!=null)for(Re in Ee.key!==void 0&&(Te=""+Ee.key),Ee)H.call(Ee,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(ye[Re]=Ee[Re]);var He=arguments.length-2;if(He===1)ye.children=Ce;else if(1<He){for(var we=Array(He),Je=0;Je<He;Je++)we[Je]=arguments[Je+2];ye.children=we}if(J&&J.defaultProps)for(Re in He=J.defaultProps,He)ye[Re]===void 0&&(ye[Re]=He[Re]);return x(J,Te,void 0,void 0,null,ye)},ea.createRef=function(){return{current:null}},ea.forwardRef=function(J){return{$$typeof:I,render:J}},ea.isValidElement=w,ea.lazy=function(J){return{$$typeof:E,_payload:{_status:-1,_result:J},_init:W}},ea.memo=function(J,Ee){return{$$typeof:d,type:J,compare:Ee===void 0?null:Ee}},ea.startTransition=function(J){var Ee=S.T,Ce={};S.T=Ce;try{var Re=J(),ye=S.S;ye!==null&&ye(Ce,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(ce,Z)}catch(Te){Z(Te)}finally{S.T=Ee}},ea.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},ea.use=function(J){return S.H.use(J)},ea.useActionState=function(J,Ee,Ce){return S.H.useActionState(J,Ee,Ce)},ea.useCallback=function(J,Ee){return S.H.useCallback(J,Ee)},ea.useContext=function(J){return S.H.useContext(J)},ea.useDebugValue=function(){},ea.useDeferredValue=function(J,Ee){return S.H.useDeferredValue(J,Ee)},ea.useEffect=function(J,Ee,Ce){var Re=S.H;if(typeof Ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Re.useEffect(J,Ee)},ea.useId=function(){return S.H.useId()},ea.useImperativeHandle=function(J,Ee,Ce){return S.H.useImperativeHandle(J,Ee,Ce)},ea.useInsertionEffect=function(J,Ee){return S.H.useInsertionEffect(J,Ee)},ea.useLayoutEffect=function(J,Ee){return S.H.useLayoutEffect(J,Ee)},ea.useMemo=function(J,Ee){return S.H.useMemo(J,Ee)},ea.useOptimistic=function(J,Ee){return S.H.useOptimistic(J,Ee)},ea.useReducer=function(J,Ee,Ce){return S.H.useReducer(J,Ee,Ce)},ea.useRef=function(J){return S.H.useRef(J)},ea.useState=function(J){return S.H.useState(J)},ea.useSyncExternalStore=function(J,Ee,Ce){return S.H.useSyncExternalStore(J,Ee,Ce)},ea.useTransition=function(){return S.H.useTransition()},ea.version="19.1.0",ea}var m0;function qf(){return m0||(m0=1,Zh.exports=lE()),Zh.exports}var ne=qf();const c=Ff(ne),l_=cE({__proto__:null,default:c},[ne]);var $h={exports:{}},Dd={},Wh={exports:{}},Gh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function uE(){return h0||(h0=1,function(e){function r(z,W){var Z=z.length;z.push(W);e:for(;0<Z;){var ce=Z-1>>>1,J=z[ce];if(0<h(J,W))z[ce]=W,z[Z]=J,Z=ce;else break e}}function i(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var W=z[0],Z=z.pop();if(Z!==W){z[0]=Z;e:for(var ce=0,J=z.length,Ee=J>>>1;ce<Ee;){var Ce=2*(ce+1)-1,Re=z[Ce],ye=Ce+1,Te=z[ye];if(0>h(Re,Z))ye<J&&0>h(Te,Re)?(z[ce]=Te,z[ye]=Z,ce=ye):(z[ce]=Re,z[Ce]=Z,ce=Ce);else if(ye<J&&0>h(Te,Z))z[ce]=Te,z[ye]=Z,ce=ye;else break e}}return W}function h(z,W){var Z=z.sortIndex-W.sortIndex;return Z!==0?Z:z.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var N=performance;e.unstable_now=function(){return N.now()}}else{var B=Date,I=B.now();e.unstable_now=function(){return B.now()-I}}var k=[],d=[],E=1,_=null,b=3,T=!1,v=!1,f=!1,R=!1,g=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;function P(z){for(var W=i(d);W!==null;){if(W.callback===null)o(d);else if(W.startTime<=z)o(d),W.sortIndex=W.expirationTime,r(k,W);else break;W=i(d)}}function S(z){if(f=!1,P(z),!v)if(i(k)!==null)v=!0,H||(H=!0,A());else{var W=i(d);W!==null&&U(S,W.startTime-z)}}var H=!1,x=-1,y=5,w=-1;function p(){return R?!0:!(e.unstable_now()-w<y)}function C(){if(R=!1,H){var z=e.unstable_now();w=z;var W=!0;try{e:{v=!1,f&&(f=!1,F(x),x=-1),T=!0;var Z=b;try{t:{for(P(z),_=i(k);_!==null&&!(_.expirationTime>z&&p());){var ce=_.callback;if(typeof ce=="function"){_.callback=null,b=_.priorityLevel;var J=ce(_.expirationTime<=z);if(z=e.unstable_now(),typeof J=="function"){_.callback=J,P(z),W=!0;break t}_===i(k)&&o(k),P(z)}else o(k);_=i(k)}if(_!==null)W=!0;else{var Ee=i(d);Ee!==null&&U(S,Ee.startTime-z),W=!1}}break e}finally{_=null,b=Z,T=!1}W=void 0}}finally{W?A():H=!1}}}var A;if(typeof m=="function")A=function(){m(C)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,j=M.port2;M.port1.onmessage=C,A=function(){j.postMessage(null)}}else A=function(){g(C,0)};function U(z,W){x=g(function(){z(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(z){switch(b){case 1:case 2:case 3:var W=3;break;default:W=b}var Z=b;b=W;try{return z()}finally{b=Z}},e.unstable_requestPaint=function(){R=!0},e.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=b;b=z;try{return W()}finally{b=Z}},e.unstable_scheduleCallback=function(z,W,Z){var ce=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ce+Z:ce):Z=ce,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=Z+J,z={id:E++,callback:W,priorityLevel:z,startTime:Z,expirationTime:J,sortIndex:-1},Z>ce?(z.sortIndex=Z,r(d,z),i(k)===null&&z===i(d)&&(f?(F(x),x=-1):f=!0,U(S,Z-ce))):(z.sortIndex=J,r(k,z),v||T||(v=!0,H||(H=!0,A()))),z},e.unstable_shouldYield=p,e.unstable_wrapCallback=function(z){var W=b;return function(){var Z=b;b=W;try{return z.apply(this,arguments)}finally{b=Z}}}}(Gh)),Gh}var f0;function dE(){return f0||(f0=1,Wh.exports=uE()),Wh.exports}var Kh={exports:{}},Vs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function pE(){if(g0)return Vs;g0=1;var e=qf();function r(k){var d="https://react.dev/errors/"+k;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)d+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+k+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},h=Symbol.for("react.portal");function N(k,d,E){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:_==null?null:""+_,children:k,containerInfo:d,implementation:E}}var B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function I(k,d){if(k==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Vs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Vs.createPortal=function(k,d){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(r(299));return N(k,d,null,E)},Vs.flushSync=function(k){var d=B.T,E=o.p;try{if(B.T=null,o.p=2,k)return k()}finally{B.T=d,o.p=E,o.d.f()}},Vs.preconnect=function(k,d){typeof k=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,o.d.C(k,d))},Vs.prefetchDNS=function(k){typeof k=="string"&&o.d.D(k)},Vs.preinit=function(k,d){if(typeof k=="string"&&d&&typeof d.as=="string"){var E=d.as,_=I(E,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,T=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;E==="style"?o.d.S(k,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:T}):E==="script"&&o.d.X(k,{crossOrigin:_,integrity:b,fetchPriority:T,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Vs.preinitModule=function(k,d){if(typeof k=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var E=I(d.as,d.crossOrigin);o.d.M(k,{crossOrigin:E,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&o.d.M(k)},Vs.preload=function(k,d){if(typeof k=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var E=d.as,_=I(E,d.crossOrigin);o.d.L(k,E,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Vs.preloadModule=function(k,d){if(typeof k=="string")if(d){var E=I(d.as,d.crossOrigin);o.d.m(k,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:E,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else o.d.m(k)},Vs.requestFormReset=function(k){o.d.r(k)},Vs.unstable_batchedUpdates=function(k,d){return k(d)},Vs.useFormState=function(k,d,E){return B.H.useFormState(k,d,E)},Vs.useFormStatus=function(){return B.H.useHostTransitionStatus()},Vs.version="19.1.0",Vs}var v0;function u_(){if(v0)return Kh.exports;v0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Kh.exports=pE(),Kh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function mE(){if(y0)return Dd;y0=1;var e=dE(),r=qf(),i=u_();function o(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function N(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function B(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function I(t){if(N(t)!==t)throw Error(o(188))}function k(t){var n=t.alternate;if(!n){if(n=N(t),n===null)throw Error(o(188));return n!==t?null:t}for(var s=t,u=n;;){var D=s.return;if(D===null)break;var q=D.alternate;if(q===null){if(u=D.return,u!==null){s=u;continue}break}if(D.child===q.child){for(q=D.child;q;){if(q===s)return I(D),t;if(q===u)return I(D),n;q=q.sibling}throw Error(o(188))}if(s.return!==u.return)s=D,u=q;else{for(var se=!1,ve=D.child;ve;){if(ve===s){se=!0,s=D,u=q;break}if(ve===u){se=!0,u=D,s=q;break}ve=ve.sibling}if(!se){for(ve=q.child;ve;){if(ve===s){se=!0,s=q,u=D;break}if(ve===u){se=!0,u=q,s=D;break}ve=ve.sibling}if(!se)throw Error(o(189))}}if(s.alternate!==u)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?t:n}function d(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=d(t),n!==null)return n;t=t.sibling}return null}var E=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),m=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),p=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function A(t){return t===null||typeof t!="object"?null:(t=C&&t[C]||t["@@iterator"],typeof t=="function"?t:null)}var M=Symbol.for("react.client.reference");function j(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===M?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case v:return"Fragment";case R:return"Profiler";case f:return"StrictMode";case S:return"Suspense";case H:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case m:return(t.displayName||"Context")+".Provider";case F:return(t._context.displayName||"Context")+".Consumer";case P:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return n=t.displayName||null,n!==null?n:j(t.type)||"Memo";case y:n=t._payload,t=t._init;try{return j(t(n))}catch{}}return null}var U=Array.isArray,z=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ce=[],J=-1;function Ee(t){return{current:t}}function Ce(t){0>J||(t.current=ce[J],ce[J]=null,J--)}function Re(t,n){J++,ce[J]=t.current,t.current=n}var ye=Ee(null),Te=Ee(null),He=Ee(null),we=Ee(null);function Je(t,n){switch(Re(He,n),Re(Te,t),Re(ye,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Uv(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Uv(n),t=Hv(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ce(ye),Re(ye,t)}function Be(){Ce(ye),Ce(Te),Ce(He)}function nt(t){t.memoizedState!==null&&Re(we,t);var n=ye.current,s=Hv(n,t.type);n!==s&&(Re(Te,t),Re(ye,s))}function Qe(t){Te.current===t&&(Ce(ye),Ce(Te)),we.current===t&&(Ce(we),Td._currentValue=Z)}var Ze=Object.prototype.hasOwnProperty,Ht=e.unstable_scheduleCallback,or=e.unstable_cancelCallback,Nr=e.unstable_shouldYield,jn=e.unstable_requestPaint,cr=e.unstable_now,Gn=e.unstable_getCurrentPriorityLevel,Un=e.unstable_ImmediatePriority,Le=e.unstable_UserBlockingPriority,je=e.unstable_NormalPriority,Ge=e.unstable_LowPriority,Qt=e.unstable_IdlePriority,Ft=e.log,xt=e.unstable_setDisableYieldValue,pn=null,Ln=null;function Bt(t){if(typeof Ft=="function"&&xt(t),Ln&&typeof Ln.setStrictMode=="function")try{Ln.setStrictMode(pn,t)}catch{}}var lr=Math.clz32?Math.clz32:Vr,Fr=Math.log,kr=Math.LN2;function Vr(t){return t>>>=0,t===0?32:31-(Fr(t)/kr|0)|0}var Hr=256,Or=4194304;function Gr(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ga(t,n,s){var u=t.pendingLanes;if(u===0)return 0;var D=0,q=t.suspendedLanes,se=t.pingedLanes;t=t.warmLanes;var ve=u&134217727;return ve!==0?(u=ve&~q,u!==0?D=Gr(u):(se&=ve,se!==0?D=Gr(se):s||(s=ve&~t,s!==0&&(D=Gr(s))))):(ve=u&~q,ve!==0?D=Gr(ve):se!==0?D=Gr(se):s||(s=u&~t,s!==0&&(D=Gr(s)))),D===0?0:n!==0&&n!==D&&(n&q)===0&&(q=D&-D,s=n&-n,q>=s||q===32&&(s&4194048)!==0)?n:D}function ta(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function oa(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nn(){var t=Hr;return Hr<<=1,(Hr&4194048)===0&&(Hr=256),t}function Ha(){var t=Or;return Or<<=1,(Or&62914560)===0&&(Or=4194304),t}function Ca(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function Kr(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function hr(t,n,s,u,D,q){var se=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var ve=t.entanglements,Fe=t.expirationTimes,lt=t.hiddenUpdates;for(s=se&~s;0<s;){var It=31-lr(s),Yt=1<<It;ve[It]=0,Fe[It]=-1;var pt=lt[It];if(pt!==null)for(lt[It]=null,It=0;It<pt.length;It++){var gt=pt[It];gt!==null&&(gt.lane&=-536870913)}s&=~Yt}u!==0&&at(t,u,0),q!==0&&D===0&&t.tag!==0&&(t.suspendedLanes|=q&~(se&~n))}function at(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var u=31-lr(n);t.entangledLanes|=n,t.entanglements[u]=t.entanglements[u]|1073741824|s&4194090}function ut(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var u=31-lr(s),D=1<<u;D&n|t[u]&n&&(t[u]|=n),s&=~D}}function $t(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Tt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function tn(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:s0(t.type))}function Xt(t,n){var s=W.p;try{return W.p=t,n()}finally{W.p=s}}var Xe=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Xe,Rn="__reactProps$"+Xe,Zn="__reactContainer$"+Xe,ur="__reactEvents$"+Xe,Wt="__reactListeners$"+Xe,bt="__reactHandles$"+Xe,Pn="__reactResources$"+Xe,kn="__reactMarker$"+Xe;function bn(t){delete t[Sn],delete t[Rn],delete t[ur],delete t[Wt],delete t[bt]}function Ar(t){var n=t[Sn];if(n)return n;for(var s=t.parentNode;s;){if(n=s[Zn]||s[Sn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Zv(t);t!==null;){if(s=t[Sn])return s;t=Zv(t)}return n}t=s,s=t.parentNode}return null}function Sr(t){if(t=t[Sn]||t[Zn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Dr(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(o(33))}function Xn(t){var n=t[Pn];return n||(n=t[Pn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function qn(t){t[kn]=!0}var ma=new Set,ca={};function Ta(t,n){Da(t,n),Da(t+"Capture",n)}function Da(t,n){for(ca[t]=n,t=0;t<n.length;t++)ma.add(n[t])}var ss=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ai={},Ui={};function os(t){return Ze.call(Ui,t)?!0:Ze.call(ai,t)?!1:ss.test(t)?Ui[t]=!0:(ai[t]=!0,!1)}function Ei(t,n,s){if(os(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var u=n.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function Qi(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function Zr(t,n,s,u){if(u===null)t.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+u)}}var Si,Ai;function sn(t){if(Si===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Si=n&&n[1]||"",Ai=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Si+t+Ai}var $n=!1;function Bn(t,n){if(!t||$n)return"";$n=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(n){var Yt=function(){throw Error()};if(Object.defineProperty(Yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Yt,[])}catch(gt){var pt=gt}Reflect.construct(t,[],Yt)}else{try{Yt.call()}catch(gt){pt=gt}t.call(Yt.prototype)}}else{try{throw Error()}catch(gt){pt=gt}(Yt=t())&&typeof Yt.catch=="function"&&Yt.catch(function(){})}}catch(gt){if(gt&&pt&&typeof gt.stack=="string")return[gt.stack,pt.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=u.DetermineComponentFrameRoot(),se=q[0],ve=q[1];if(se&&ve){var Fe=se.split(`
`),lt=ve.split(`
`);for(D=u=0;u<Fe.length&&!Fe[u].includes("DetermineComponentFrameRoot");)u++;for(;D<lt.length&&!lt[D].includes("DetermineComponentFrameRoot");)D++;if(u===Fe.length||D===lt.length)for(u=Fe.length-1,D=lt.length-1;1<=u&&0<=D&&Fe[u]!==lt[D];)D--;for(;1<=u&&0<=D;u--,D--)if(Fe[u]!==lt[D]){if(u!==1||D!==1)do if(u--,D--,0>D||Fe[u]!==lt[D]){var It=`
`+Fe[u].replace(" at new "," at ");return t.displayName&&It.includes("<anonymous>")&&(It=It.replace("<anonymous>",t.displayName)),It}while(1<=u&&0<=D);break}}}finally{$n=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?sn(s):""}function nr(t){switch(t.tag){case 26:case 27:case 5:return sn(t.type);case 16:return sn("Lazy");case 13:return sn("Suspense");case 19:return sn("SuspenseList");case 0:case 15:return Bn(t.type,!1);case 11:return Bn(t.type.render,!1);case 1:return Bn(t.type,!0);case 31:return sn("Activity");default:return""}}function wn(t){try{var n="";do n+=nr(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function On(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jr(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function vr(t){var n=jr(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),u=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var D=s.get,q=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return D.call(this)},set:function(se){u=""+se,q.call(this,se)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(se){u=""+se},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function yr(t){t._valueTracker||(t._valueTracker=vr(t))}function An(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),u="";return t&&(u=jr(t)?t.checked?"true":"false":t.value),t=u,t!==s?(n.setValue(t),!0):!1}function Br(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ea=/[\n"\\]/g;function ua(t){return t.replace(Ea,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ya(t,n,s,u,D,q,se,ve){t.name="",se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?t.type=se:t.removeAttribute("type"),n!=null?se==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+On(n)):t.value!==""+On(n)&&(t.value=""+On(n)):se!=="submit"&&se!=="reset"||t.removeAttribute("value"),n!=null?Ba(t,se,On(n)):s!=null?Ba(t,se,On(s)):u!=null&&t.removeAttribute("value"),D==null&&q!=null&&(t.defaultChecked=!!q),D!=null&&(t.checked=D&&typeof D!="function"&&typeof D!="symbol"),ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"?t.name=""+On(ve):t.removeAttribute("name")}function ja(t,n,s,u,D,q,se,ve){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(t.type=q),n!=null||s!=null){if(!(q!=="submit"&&q!=="reset"||n!=null))return;s=s!=null?""+On(s):"",n=n!=null?""+On(n):s,ve||n===t.value||(t.value=n),t.defaultValue=n}u=u??D,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=ve?t.checked:!!u,t.defaultChecked=!!u,se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(t.name=se)}function Ba(t,n,s){n==="number"&&Br(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Wa(t,n,s,u){if(t=t.options,n){n={};for(var D=0;D<s.length;D++)n["$"+s[D]]=!0;for(s=0;s<t.length;s++)D=n.hasOwnProperty("$"+t[s].value),t[s].selected!==D&&(t[s].selected=D),D&&u&&(t[s].defaultSelected=!0)}else{for(s=""+On(s),n=null,D=0;D<t.length;D++){if(t[D].value===s){t[D].selected=!0,u&&(t[D].defaultSelected=!0);return}n!==null||t[D].disabled||(n=t[D])}n!==null&&(n.selected=!0)}}function Sa(t,n,s){if(n!=null&&(n=""+On(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+On(s):""}function Qa(t,n,s,u){if(n==null){if(u!=null){if(s!=null)throw Error(o(92));if(U(u)){if(1<u.length)throw Error(o(93));u=u[0]}s=u}s==null&&(s=""),n=s}s=On(n),t.defaultValue=s,u=t.textContent,u===s&&u!==""&&u!==null&&(t.value=u)}function pi(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Is=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ji(t,n,s){var u=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":u?t.setProperty(n,s):typeof s!="number"||s===0||Is.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function cs(t,n,s){if(n!=null&&typeof n!="object")throw Error(o(62));if(t=t.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||n!=null&&n.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var D in n)u=n[D],n.hasOwnProperty(D)&&s[D]!==u&&Ji(t,D,u)}else for(var q in n)n.hasOwnProperty(q)&&Ji(t,q,n[q])}function mi(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var no=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$s=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ws(t){return $s.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var js=null;function ls(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xi=null,us=null;function zo(t){var n=Sr(t);if(n&&(t=n.stateNode)){var s=t[Rn]||null;e:switch(t=n.stateNode,n.type){case"input":if(ya(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ua(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var u=s[n];if(u!==t&&u.form===t.form){var D=u[Rn]||null;if(!D)throw Error(o(90));ya(u,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(n=0;n<s.length;n++)u=s[n],u.form===t.form&&An(u)}break e;case"textarea":Sa(t,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Wa(t,!!s.multiple,n,!1)}}}var _r=!1;function xi(t,n,s){if(_r)return t(n,s);_r=!0;try{var u=t(n);return u}finally{if(_r=!1,(Xi!==null||us!==null)&&(Rp(),Xi&&(n=Xi,t=us,us=Xi=null,zo(n),t)))for(n=0;n<t.length;n++)zo(t[n])}}function na(t,n){var s=t.stateNode;if(s===null)return null;var u=s[Rn]||null;if(u===null)return null;s=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bs=!1;if(Hi)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Bs=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Bs=!1}var Oi=null,Fi=null,qi=null;function pr(){if(qi)return qi;var t,n=Fi,s=n.length,u,D="value"in Oi?Oi.value:Oi.textContent,q=D.length;for(t=0;t<s&&n[t]===D[t];t++);var se=s-t;for(u=1;u<=se&&n[s-u]===D[q-u];u++);return qi=D.slice(t,1<u?1-u:void 0)}function Ma(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Di(){return!0}function Ro(){return!1}function ti(t){function n(s,u,D,q,se){this._reactName=s,this._targetInst=D,this.type=u,this.nativeEvent=q,this.target=se,this.currentTarget=null;for(var ve in t)t.hasOwnProperty(ve)&&(s=t[ve],this[ve]=s?s(q):q[ve]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Di:Ro,this.isPropagationStopped=Ro,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),n}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=ti(Es),Fa=E({},Es,{view:0,detail:0}),nc=ti(Fa),Mi,Mr,Vi,ni=E({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vi&&(Vi&&t.type==="mousemove"?(Mi=t.screenX-Vi.screenX,Mr=t.screenY-Vi.screenY):Mr=Mi=0,Vi=t),Mi)},movementY:function(t){return"movementY"in t?t.movementY:Mr}}),Ss=ti(ni),ko=E({},ni,{dataTransfer:0}),Co=ti(ko),zs=E({},Fa,{relatedTarget:0}),on=ti(zs),ge=E({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),Pt=ti(ge),Kn=E({},Es,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aa=ti(Kn),qa=E({},Es,{data:0}),ii=ti(qa),Lc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ic={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Cr[t])?!!n[t]:!1}function Uo(){return jc}var ro=E({},Fa,{key:function(t){if(t.key){var n=Lc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ma(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ic[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uo,charCode:function(t){return t.type==="keypress"?Ma(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ma(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gs=ti(ro),xs=E({},ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ks=ti(xs),Sc=E({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uo}),Bc=ti(Sc),rc=E({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ri=ti(rc),sl=E({},ni,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ac=ti(sl),ic=E({},Es,{newState:0,oldState:0}),ao=ti(ic),ol=[9,13,27,32],xa=Hi&&"CompositionEvent"in window,La=null;Hi&&"documentMode"in document&&(La=document.documentMode);var zc=Hi&&"TextEvent"in window&&!La,Uc=Hi&&(!xa||La&&8<La&&11>=La),ft=" ",io=!1;function er(t,n){switch(t){case"keyup":return ol.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var so=!1;function hi(t,n){switch(t){case"compositionend":return sc(n);case"keypress":return n.which!==32?null:(io=!0,ft);case"textInput":return t=n.data,t===ft&&io?null:t;default:return null}}function he(t,n){if(so)return t==="compositionend"||!xa&&er(t,n)?(t=pr(),qi=Fi=Oi=null,so=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Uc&&n.locale!=="ko"?null:n.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Cn[t.type]:n==="textarea"}function Ho(t,n,s,u){Xi?us?us.push(u):us=[u]:Xi=u,n=Ap(n,"onChange"),0<n.length&&(s=new Ws("onChange","change",null,s,u),t.push({event:s,listeners:n}))}var Ra=null,te=null;function G(t){Lv(t,0)}function Y(t){var n=Dr(t);if(An(n))return t}function oe(t,n){if(t==="change")return n}var Oe=!1;if(Hi){var rt;if(Hi){var St="oninput"in document;if(!St){var Dt=document.createElement("div");Dt.setAttribute("oninput","return;"),St=typeof Dt.oninput=="function"}rt=St}else rt=!1;Oe=rt&&(!document.documentMode||9<document.documentMode)}function _t(){Ra&&(Ra.detachEvent("onpropertychange",Tn),te=Ra=null)}function Tn(t){if(t.propertyName==="value"&&Y(te)){var n=[];Ho(n,te,t,ls(t)),xi(G,n)}}function qt(t,n,s){t==="focusin"?(_t(),Ra=n,te=s,Ra.attachEvent("onpropertychange",Tn)):t==="focusout"&&_t()}function Hn(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Y(te)}function vn(t,n){if(t==="click")return Y(n)}function Qr(t,n){if(t==="input"||t==="change")return Y(n)}function qr(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var ia=typeof Object.is=="function"?Object.is:qr;function Jr(t,n){if(ia(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),u=Object.keys(n);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var D=s[u];if(!Ze.call(n,D)||!ia(t[D],n[D]))return!1}return!0}function Rs(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ks(t,n){var s=Rs(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=n&&u>=n)return{node:s,offset:n-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Rs(s)}}function es(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?es(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Ys(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Br(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Br(t.document)}return n}function Qs(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var oo=Hi&&"documentMode"in document&&11>=document.documentMode,Li=null,Zi=null,co=null,oc=!1;function Fo(t,n,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;oc||Li==null||Li!==Br(u)||(u=Li,"selectionStart"in u&&Qs(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),co&&Jr(co,u)||(co=u,u=Ap(Zi,"onSelect"),0<u.length&&(n=new Ws("onSelect","select",null,n,s),t.push({event:n,listeners:u}),n.target=Li)))}function $i(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Us={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},To={},cc={};Hi&&(cc=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Cs(t){if(To[t])return To[t];if(!Us[t])return t;var n=Us[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in cc)return To[t]=n[s];return t}var qo=Cs("animationend"),Wi=Cs("animationiteration"),Ts=Cs("animationstart"),xc=Cs("transitionrun"),Po=Cs("transitionstart"),Vo=Cs("transitioncancel"),lo=Cs("transitionend"),No=new Map,ki="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ki.push("scrollEnd");function fi(t,n){No.set(t,n),Ta(n,[t])}var ds=new WeakMap;function ri(t,n){if(typeof t=="object"&&t!==null){var s=ds.get(t);return s!==void 0?s:(n={value:t,source:n,stack:wn(n)},ds.set(t,n),n)}return{value:t,source:n,stack:wn(n)}}var gi=[],Js=0,Gi=0;function uo(){for(var t=Js,n=Gi=Js=0;n<t;){var s=gi[n];gi[n++]=null;var u=gi[n];gi[n++]=null;var D=gi[n];gi[n++]=null;var q=gi[n];if(gi[n++]=null,u!==null&&D!==null){var se=u.pending;se===null?D.next=D:(D.next=se.next,se.next=D),u.pending=D}q!==0&&Ao(s,D,q)}}function vi(t,n,s,u){gi[Js++]=t,gi[Js++]=n,gi[Js++]=s,gi[Js++]=u,Gi|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function Xs(t,n,s,u){return vi(t,n,s,u),ps(t)}function Hs(t,n){return vi(t,null,null,n),ps(t)}function Ao(t,n,s){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s);for(var D=!1,q=t.return;q!==null;)q.childLanes|=s,u=q.alternate,u!==null&&(u.childLanes|=s),q.tag===22&&(t=q.stateNode,t===null||t._visibility&1||(D=!0)),t=q,q=q.return;return t.tag===3?(q=t.stateNode,D&&n!==null&&(D=31-lr(s),t=q.hiddenUpdates,u=t[D],u===null?t[D]=[n]:u.push(n),n.lane=s|536870912),q):null}function ps(t){if(50<bd)throw bd=0,fh=null,Error(o(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var po={};function Hc(t,n,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(t,n,s,u){return new Hc(t,n,s,u)}function Oo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ps(t,n){var s=t.alternate;return s===null?(s=_a(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function lc(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Zo(t,n,s,u,D,q){var se=0;if(u=t,typeof t=="function")Oo(t)&&(se=1);else if(typeof t=="string")se=Kw(t,s,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case w:return t=_a(31,s,n,D),t.elementType=w,t.lanes=q,t;case v:return ts(s.children,D,q,n);case f:se=8,D|=24;break;case R:return t=_a(12,s,n,D|2),t.elementType=R,t.lanes=q,t;case S:return t=_a(13,s,n,D),t.elementType=S,t.lanes=q,t;case H:return t=_a(19,s,n,D),t.elementType=H,t.lanes=q,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case g:case m:se=10;break e;case F:se=9;break e;case P:se=11;break e;case x:se=14;break e;case y:se=16,u=null;break e}se=29,s=Error(o(130,t===null?"null":typeof t,"")),u=null}return n=_a(se,s,n,D),n.elementType=t,n.type=u,n.lanes=q,n}function ts(t,n,s,u){return t=_a(7,t,u,n),t.lanes=s,t}function Do(t,n,s){return t=_a(6,t,null,n),t.lanes=s,t}function mo(t,n,s){return n=_a(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var ns=[],Ns=0,a=null,l=0,O=[],V=0,ee=null,pe=1,Ie="";function st(t,n){ns[Ns++]=l,ns[Ns++]=a,a=t,l=n}function dt(t,n,s){O[V++]=pe,O[V++]=Ie,O[V++]=ee,ee=t;var u=pe;t=Ie;var D=32-lr(u)-1;u&=~(1<<D),s+=1;var q=32-lr(n)+D;if(30<q){var se=D-D%5;q=(u&(1<<se)-1).toString(32),u>>=se,D-=se,pe=1<<32-lr(n)+D|s<<D|u,Ie=q+t}else pe=1<<q|s<<D|u,Ie=t}function Gt(t){t.return!==null&&(st(t,1),dt(t,1,0))}function Mn(t){for(;t===a;)a=ns[--Ns],ns[Ns]=null,l=ns[--Ns],ns[Ns]=null;for(;t===ee;)ee=O[--V],O[V]=null,Ie=O[--V],O[V]=null,pe=O[--V],O[V]=null}var Fn=null,Qn=null,xr=!1,va=null,Na=!1,Ja=Error(o(519));function yi(t){var n=Error(o(418,""));throw ms(ri(n,t)),Ja}function $o(t){var n=t.stateNode,s=t.type,u=t.memoizedProps;switch(n[Sn]=t,n[Rn]=u,s){case"dialog":pa("cancel",n),pa("close",n);break;case"iframe":case"object":case"embed":pa("load",n);break;case"video":case"audio":for(s=0;s<Ed.length;s++)pa(Ed[s],n);break;case"source":pa("error",n);break;case"img":case"image":case"link":pa("error",n),pa("load",n);break;case"details":pa("toggle",n);break;case"input":pa("invalid",n),ja(n,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),yr(n);break;case"select":pa("invalid",n);break;case"textarea":pa("invalid",n),Qa(n,u.value,u.defaultValue,u.children),yr(n)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||u.suppressHydrationWarning===!0||zv(n.textContent,s)?(u.popover!=null&&(pa("beforetoggle",n),pa("toggle",n)),u.onScroll!=null&&pa("scroll",n),u.onScrollEnd!=null&&pa("scrollend",n),u.onClick!=null&&(n.onclick=Op),n=!0):n=!1,n||yi(t)}function Fc(t){for(Fn=t.return;Fn;)switch(Fn.tag){case 5:case 13:Na=!1;return;case 27:case 3:Na=!0;return;default:Fn=Fn.return}}function ho(t){if(t!==Fn)return!1;if(!xr)return Fc(t),xr=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Ah(t.type,t.memoizedProps)),s=!s),s&&Qn&&yi(t),Fc(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){Qn=hc(t.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}Qn=null}}else n===27?(n=Qn,wl(t.type)?(t=Lh,Lh=null,Qn=t):Qn=n):Qn=Fn?hc(t.stateNode.nextSibling):null;return!0}function Fs(){Qn=Fn=null,xr=!1}function uc(){var t=va;return t!==null&&(vo===null?vo=t:vo.push.apply(vo,t),va=null),t}function ms(t){va===null?va=[t]:va.push(t)}var Ia=Ee(null),rs=null,qs=null;function eo(t,n,s){Re(Ia,n._currentValue),n._currentValue=s}function Va(t){t._currentValue=Ia.current,Ce(Ia)}function Wo(t,n,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),t===s)break;t=t.return}}function dc(t,n,s,u){var D=t.child;for(D!==null&&(D.return=t);D!==null;){var q=D.dependencies;if(q!==null){var se=D.child;q=q.firstContext;e:for(;q!==null;){var ve=q;q=D;for(var Fe=0;Fe<n.length;Fe++)if(ve.context===n[Fe]){q.lanes|=s,ve=q.alternate,ve!==null&&(ve.lanes|=s),Wo(q.return,s,t),u||(se=null);break e}q=ve.next}}else if(D.tag===18){if(se=D.return,se===null)throw Error(o(341));se.lanes|=s,q=se.alternate,q!==null&&(q.lanes|=s),Wo(se,s,t),se=null}else se=D.child;if(se!==null)se.return=D;else for(se=D;se!==null;){if(se===t){se=null;break}if(D=se.sibling,D!==null){D.return=se.return,se=D;break}se=se.return}D=se}}function fo(t,n,s,u){t=null;for(var D=n,q=!1;D!==null;){if(!q){if((D.flags&524288)!==0)q=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var se=D.alternate;if(se===null)throw Error(o(387));if(se=se.memoizedProps,se!==null){var ve=D.type;ia(D.pendingProps.value,se.value)||(t!==null?t.push(ve):t=[ve])}}else if(D===we.current){if(se=D.alternate,se===null)throw Error(o(387));se.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(t!==null?t.push(Td):t=[Td])}D=D.return}t!==null&&dc(n,t,s,u),n.flags|=262144}function Rc(t){for(t=t.firstContext;t!==null;){if(!ia(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function hs(t){rs=t,qs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function si(t){return Ll(rs,t)}function qc(t,n){return rs===null&&hs(t),Ll(t,n)}function Ll(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},qs===null){if(t===null)throw Error(o(308));qs=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else qs=qs.next=n;return s}var Il=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,u){t.push(u)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},jl=e.unstable_scheduleCallback,Vc=e.unstable_NormalPriority,oi={$$typeof:m,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Go(){return{controller:new Il,data:new Map,refCount:0}}function Ko(t){t.refCount--,t.refCount===0&&jl(Vc,function(){t.controller.abort()})}var Yo=null,Ga=0,Qo=0,pc=null;function Bl(t,n){if(Yo===null){var s=Yo=[];Ga=0,Qo=Eh(),pc={status:"pending",value:void 0,then:function(u){s.push(u)}}}return Ga++,n.then(zl,zl),n}function zl(){if(--Ga===0&&Yo!==null){pc!==null&&(pc.status="fulfilled");var t=Yo;Yo=null,Qo=0,pc=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function cu(t,n){var s=[],u={status:"pending",value:null,reason:null,then:function(D){s.push(D)}};return t.then(function(){u.status="fulfilled",u.value=n;for(var D=0;D<s.length;D++)(0,s[D])(n)},function(D){for(u.status="rejected",u.reason=D,D=0;D<s.length;D++)(0,s[D])(void 0)}),u}var Zc=z.S;z.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&Bl(t,n),Zc!==null&&Zc(t,n)};var fe=Ee(null);function X(){var t=fe.current;return t!==null?t:Xa.pooledCache}function re(t,n){n===null?Re(fe,fe.current):Re(fe,n.pool)}function ae(){var t=X();return t===null?null:{parent:oi._currentValue,pool:t}}var ie=Error(o(460)),le=Error(o(474)),Pe=Error(o(542)),De={then:function(){}};function ze(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Et(){}function kt(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(Et,Et),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,jt(t),t;default:if(typeof n.status=="string")n.then(Et,Et);else{if(t=Xa,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=n,t.status="pending",t.then(function(u){if(n.status==="pending"){var D=n;D.status="fulfilled",D.value=u}},function(u){if(n.status==="pending"){var D=n;D.status="rejected",D.reason=u}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,jt(t),t}throw zt=n,ie}}var zt=null;function mn(){if(zt===null)throw Error(o(459));var t=zt;return zt=null,t}function jt(t){if(t===ie||t===Pe)throw Error(o(483))}var an=!1;function hn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ke(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function mt(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Nt(t,n,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(za&2)!==0){var D=u.pending;return D===null?n.next=n:(n.next=D.next,D.next=n),u.pending=n,n=ps(t),Ao(t,null,s),n}return vi(t,u,n,s),ps(t)}function ht(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var u=n.lanes;u&=t.pendingLanes,s|=u,n.lanes=s,ut(t,s)}}function At(t,n){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var D=null,q=null;if(s=s.firstBaseUpdate,s!==null){do{var se={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};q===null?D=q=se:q=q.next=se,s=s.next}while(s!==null);q===null?D=q=n:q=q.next=n}else D=q=n;s={baseState:u.baseState,firstBaseUpdate:D,lastBaseUpdate:q,shared:u.shared,callbacks:u.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var We=!1;function Mt(){if(We){var t=pc;if(t!==null)throw t}}function rn(t,n,s,u){We=!1;var D=t.updateQueue;an=!1;var q=D.firstBaseUpdate,se=D.lastBaseUpdate,ve=D.shared.pending;if(ve!==null){D.shared.pending=null;var Fe=ve,lt=Fe.next;Fe.next=null,se===null?q=lt:se.next=lt,se=Fe;var It=t.alternate;It!==null&&(It=It.updateQueue,ve=It.lastBaseUpdate,ve!==se&&(ve===null?It.firstBaseUpdate=lt:ve.next=lt,It.lastBaseUpdate=Fe))}if(q!==null){var Yt=D.baseState;se=0,It=lt=Fe=null,ve=q;do{var pt=ve.lane&-536870913,gt=pt!==ve.lane;if(gt?(ba&pt)===pt:(u&pt)===pt){pt!==0&&pt===Qo&&(We=!0),It!==null&&(It=It.next={lane:0,tag:ve.tag,payload:ve.payload,callback:null,next:null});e:{var Ir=t,Tr=ve;pt=n;var $a=s;switch(Tr.tag){case 1:if(Ir=Tr.payload,typeof Ir=="function"){Yt=Ir.call($a,Yt,pt);break e}Yt=Ir;break e;case 3:Ir.flags=Ir.flags&-65537|128;case 0:if(Ir=Tr.payload,pt=typeof Ir=="function"?Ir.call($a,Yt,pt):Ir,pt==null)break e;Yt=E({},Yt,pt);break e;case 2:an=!0}}pt=ve.callback,pt!==null&&(t.flags|=64,gt&&(t.flags|=8192),gt=D.callbacks,gt===null?D.callbacks=[pt]:gt.push(pt))}else gt={lane:pt,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},It===null?(lt=It=gt,Fe=Yt):It=It.next=gt,se|=pt;if(ve=ve.next,ve===null){if(ve=D.shared.pending,ve===null)break;gt=ve,ve=gt.next,gt.next=null,D.lastBaseUpdate=gt,D.shared.pending=null}}while(!0);It===null&&(Fe=Yt),D.baseState=Fe,D.firstBaseUpdate=lt,D.lastBaseUpdate=It,q===null&&(D.shared.lanes=0),vl|=se,t.lanes=se,t.memoizedState=Yt}}function Vt(t,n){if(typeof t!="function")throw Error(o(191,t));t.call(n)}function ln(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Vt(s[t],n)}var en=Ee(null),yn=Ee(0);function cn(t,n){t=Jc,Re(yn,t),Re(en,n),Jc=t|n.baseLanes}function Kt(){Re(yn,Jc),Re(en,en.current)}function dr(){Jc=yn.current,Ce(en),Ce(yn)}var tr=0,Ct=null,En=null,br=null,$r=!1,Xr=!1,ka=!1,Aa=0,zr=0,$=null,K=0;function Q(){throw Error(o(321))}function de(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!ia(t[s],n[s]))return!1;return!0}function Se(t,n,s,u,D,q){return tr=q,Ct=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,z.H=t===null||t.memoizedState===null?_g:bg,ka=!1,q=s(u,D),ka=!1,Xr&&(q=be(n,s,u,D)),_e(t),q}function _e(t){z.H=pp;var n=En!==null&&En.next!==null;if(tr=0,br=En=Ct=null,$r=!1,zr=0,$=null,n)throw Error(o(300));t===null||gs||(t=t.dependencies,t!==null&&Rc(t)&&(gs=!0))}function be(t,n,s,u){Ct=t;var D=0;do{if(Xr&&($=null),zr=0,Xr=!1,25<=D)throw Error(o(301));if(D+=1,br=En=null,t.updateQueue!=null){var q=t.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}z.H=sw,q=n(s,u)}while(Xr);return q}function Ve(){var t=z.H,n=t.useState()[0];return n=typeof n.then=="function"?ue(n):n,t=t.useState()[0],(En!==null?En.memoizedState:null)!==t&&(Ct.flags|=1024),n}function xe(){var t=Aa!==0;return Aa=0,t}function Ae(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Ke(t){if($r){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}$r=!1}tr=0,br=En=Ct=null,Xr=!1,zr=Aa=0,$=null}function $e(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Ct.memoizedState=br=t:br=br.next=t,br}function Ne(){if(En===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=En.next;var n=br===null?Ct.memoizedState:br.next;if(n!==null)br=n,En=t;else{if(t===null)throw Ct.alternate===null?Error(o(467)):Error(o(310));En=t,t={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},br===null?Ct.memoizedState=br=t:br=br.next=t}return br}function et(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ue(t){var n=zr;return zr+=1,$===null&&($=[]),t=kt($,t,n),n=Ct,(br===null?n.memoizedState:br.next)===null&&(n=n.alternate,z.H=n===null||n.memoizedState===null?_g:bg),t}function me(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ue(t);if(t.$$typeof===m)return si(t)}throw Error(o(438,String(t)))}function Me(t){var n=null,s=Ct.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var u=Ct.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(n={data:u.data.map(function(D){return D.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=et(),Ct.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),u=0;u<t;u++)s[u]=p;return n.index++,s}function qe(t,n){return typeof n=="function"?n(t):n}function tt(t){var n=Ne();return Jt(n,En,t)}function Jt(t,n,s){var u=t.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=s;var D=t.baseQueue,q=u.pending;if(q!==null){if(D!==null){var se=D.next;D.next=q.next,q.next=se}n.baseQueue=D=q,u.pending=null}if(q=t.baseState,D===null)t.memoizedState=q;else{n=D.next;var ve=se=null,Fe=null,lt=n,It=!1;do{var Yt=lt.lane&-536870913;if(Yt!==lt.lane?(ba&Yt)===Yt:(tr&Yt)===Yt){var pt=lt.revertLane;if(pt===0)Fe!==null&&(Fe=Fe.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Yt===Qo&&(It=!0);else if((tr&pt)===pt){lt=lt.next,pt===Qo&&(It=!0);continue}else Yt={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Fe===null?(ve=Fe=Yt,se=q):Fe=Fe.next=Yt,Ct.lanes|=pt,vl|=pt;Yt=lt.action,ka&&s(q,Yt),q=lt.hasEagerState?lt.eagerState:s(q,Yt)}else pt={lane:Yt,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Fe===null?(ve=Fe=pt,se=q):Fe=Fe.next=pt,Ct.lanes|=Yt,vl|=Yt;lt=lt.next}while(lt!==null&&lt!==n);if(Fe===null?se=q:Fe.next=ve,!ia(q,t.memoizedState)&&(gs=!0,It&&(s=pc,s!==null)))throw s;t.memoizedState=q,t.baseState=se,t.baseQueue=Fe,u.lastRenderedState=q}return D===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function vt(t){var n=Ne(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=t;var u=s.dispatch,D=s.pending,q=n.memoizedState;if(D!==null){s.pending=null;var se=D=D.next;do q=t(q,se.action),se=se.next;while(se!==D);ia(q,n.memoizedState)||(gs=!0),n.memoizedState=q,n.baseQueue===null&&(n.baseState=q),s.lastRenderedState=q}return[q,u]}function Rt(t,n,s){var u=Ct,D=Ne(),q=xr;if(q){if(s===void 0)throw Error(o(407));s=s()}else s=n();var se=!ia((En||D).memoizedState,s);se&&(D.memoizedState=s,gs=!0),D=D.queue;var ve=Ue.bind(null,u,D,t);if($c(2048,8,ve,[t]),D.getSnapshot!==n||se||br!==null&&br.memoizedState.tag&1){if(u.flags|=2048,fs(9,cl(),ct.bind(null,u,D,s,n),null),Xa===null)throw Error(o(349));q||(tr&124)!==0||xn(u,n,s)}return s}function xn(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Ct.updateQueue,n===null?(n=et(),Ct.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function ct(t,n,s,u){n.value=s,n.getSnapshot=u,yt(n)&&fn(t)}function Ue(t,n,s){return s(function(){yt(n)&&fn(t)})}function yt(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!ia(t,s)}catch{return!0}}function fn(t){var n=Hs(t,2);n!==null&&Bo(n,t,2)}function nn(t){var n=$e();if(typeof t=="function"){var s=t;if(t=s(),ka){Bt(!0);try{s()}finally{Bt(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:t},n}function un(t,n,s,u){return t.baseState=s,Jt(t,En,typeof u=="function"?u:qe)}function Jn(t,n,s,u,D){if(fr(t))throw Error(o(485));if(t=n.action,t!==null){var q={payload:D,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(se){q.listeners.push(se)}};z.T!==null?s(!0):q.isTransition=!1,u(q),s=n.pending,s===null?(q.next=n.pending=q,Rr(n,q)):(q.next=s.next,n.pending=s.next=q)}}function Rr(t,n){var s=n.action,u=n.payload,D=t.state;if(n.isTransition){var q=z.T,se={};z.T=se;try{var ve=s(D,u),Fe=z.S;Fe!==null&&Fe(se,ve),_n(t,n,ve)}catch(lt){wr(t,n,lt)}finally{z.T=q}}else try{q=s(D,u),_n(t,n,q)}catch(lt){wr(t,n,lt)}}function _n(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){dn(t,n,u)},function(u){return wr(t,n,u)}):dn(t,n,s)}function dn(t,n,s){n.status="fulfilled",n.value=s,mr(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,Rr(t,s)))}function wr(t,n,s){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do n.status="rejected",n.reason=s,mr(n),n=n.next;while(n!==u)}t.action=null}function mr(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Yn(t,n){return n}function In(t,n){if(xr){var s=Xa.formState;if(s!==null){e:{var u=Ct;if(xr){if(Qn){t:{for(var D=Qn,q=Na;D.nodeType!==8;){if(!q){D=null;break t}if(D=hc(D.nextSibling),D===null){D=null;break t}}q=D.data,D=q==="F!"||q==="F"?D:null}if(D){Qn=hc(D.nextSibling),u=D.data==="F!";break e}}yi(u)}u=!1}u&&(n=s[0])}}return s=$e(),s.memoizedState=s.baseState=n,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:n},s.queue=u,s=ud.bind(null,Ct,u),u.dispatch=s,u=nn(!1),q=yu.bind(null,Ct,!1,u.queue),u=$e(),D={state:n,dispatch:null,action:t,pending:null},u.queue=D,s=Jn.bind(null,Ct,D,q,s),D.dispatch=s,u.memoizedState=t,[n,s,!1]}function gn(t){var n=Ne();return Lr(n,En,t)}function Lr(t,n,s){if(n=Jt(t,n,Yn)[0],t=tt(qe)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var u=ue(n)}catch(se){throw se===ie?Pe:se}else u=n;n=Ne();var D=n.queue,q=D.dispatch;return s!==n.memoizedState&&(Ct.flags|=2048,fs(9,cl(),ha.bind(null,D,s),null)),[u,q,t]}function ha(t,n){t.action=n}function Ci(t){var n=Ne(),s=En;if(s!==null)return Lr(n,s,t);Ne(),n=n.memoizedState,s=Ne();var u=s.queue.dispatch;return s.memoizedState=t,[n,u,!1]}function fs(t,n,s,u){return t={tag:t,create:s,deps:u,inst:n,next:null},n=Ct.updateQueue,n===null&&(n=et(),Ct.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,n.lastEffect=t),t}function cl(){return{destroy:void 0,resource:void 0}}function lu(){return Ne().memoizedState}function Ul(t,n,s,u){var D=$e();u=u===void 0?null:u,Ct.flags|=t,D.memoizedState=fs(1|n,cl(),s,u)}function $c(t,n,s,u){var D=Ne();u=u===void 0?null:u;var q=D.memoizedState.inst;En!==null&&u!==null&&de(u,En.memoizedState.deps)?D.memoizedState=fs(n,q,s,u):(Ct.flags|=t,D.memoizedState=fs(1|n,q,s,u))}function uu(t,n){Ul(8390656,8,t,n)}function du(t,n){$c(2048,8,t,n)}function nd(t,n){return $c(4,2,t,n)}function pu(t,n){return $c(4,4,t,n)}function rd(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function ad(t,n,s){s=s!=null?s.concat([t]):null,$c(4,4,rd.bind(null,n,t),s)}function Hl(){}function id(t,n){var s=Ne();n=n===void 0?null:n;var u=s.memoizedState;return n!==null&&de(n,u[1])?u[0]:(s.memoizedState=[t,n],t)}function mu(t,n){var s=Ne();n=n===void 0?null:n;var u=s.memoizedState;if(n!==null&&de(n,u[1]))return u[0];if(u=t(),ka){Bt(!0);try{t()}finally{Bt(!1)}}return s.memoizedState=[u,n],u}function Fl(t,n,s){return s===void 0||(tr&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=pv(),Ct.lanes|=t,vl|=t,s)}function hu(t,n,s,u){return ia(s,n)?s:en.current!==null?(t=Fl(t,s,u),ia(t,n)||(gs=!0),t):(tr&42)===0?(gs=!0,t.memoizedState=s):(t=pv(),Ct.lanes|=t,vl|=t,n)}function fu(t,n,s,u,D){var q=W.p;W.p=q!==0&&8>q?q:8;var se=z.T,ve={};z.T=ve,yu(t,!1,n,s);try{var Fe=D(),lt=z.S;if(lt!==null&&lt(ve,Fe),Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var It=cu(Fe,u);ll(t,n,It,jo(t))}else ll(t,n,u,jo(t))}catch(Yt){ll(t,n,{then:function(){},status:"rejected",reason:Yt},jo())}finally{W.p=q,z.T=se}}function lp(){}function gu(t,n,s,u){if(t.tag!==5)throw Error(o(476));var D=sd(t).queue;fu(t,D,n,Z,s===null?lp:function(){return od(t),s(u)})}function sd(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:Z},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function od(t){var n=sd(t).next.queue;ll(t,n,{},jo())}function vu(){return si(Td)}function cd(){return Ne().memoizedState}function ld(){return Ne().memoizedState}function up(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=jo();t=mt(s);var u=Nt(n,t,s);u!==null&&(Bo(u,n,s),ht(u,n,s)),n={cache:Go()},t.payload=n;return}n=n.return}}function dp(t,n,s){var u=jo();s={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},fr(t)?Vn(n,s):(s=Xs(t,n,s,u),s!==null&&(Bo(s,t,u),ul(s,n,u)))}function ud(t,n,s){var u=jo();ll(t,n,s,u)}function ll(t,n,s,u){var D={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(fr(t))Vn(n,D);else{var q=t.alternate;if(t.lanes===0&&(q===null||q.lanes===0)&&(q=n.lastRenderedReducer,q!==null))try{var se=n.lastRenderedState,ve=q(se,s);if(D.hasEagerState=!0,D.eagerState=ve,ia(ve,se))return vi(t,n,D,0),Xa===null&&uo(),!1}catch{}finally{}if(s=Xs(t,n,D,u),s!==null)return Bo(s,t,u),ul(s,n,u),!0}return!1}function yu(t,n,s,u){if(u={lane:2,revertLane:Eh(),action:u,hasEagerState:!1,eagerState:null,next:null},fr(t)){if(n)throw Error(o(479))}else n=Xs(t,s,u,2),n!==null&&Bo(n,t,2)}function fr(t){var n=t.alternate;return t===Ct||n!==null&&n===Ct}function Vn(t,n){Xr=$r=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function ul(t,n,s){if((s&4194048)!==0){var u=n.lanes;u&=t.pendingLanes,s|=u,n.lanes=s,ut(t,s)}}var pp={readContext:si,use:me,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useLayoutEffect:Q,useInsertionEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useSyncExternalStore:Q,useId:Q,useHostTransitionStatus:Q,useFormState:Q,useActionState:Q,useOptimistic:Q,useMemoCache:Q,useCacheRefresh:Q},_g={readContext:si,use:me,useCallback:function(t,n){return $e().memoizedState=[t,n===void 0?null:n],t},useContext:si,useEffect:uu,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,Ul(4194308,4,rd.bind(null,n,t),s)},useLayoutEffect:function(t,n){return Ul(4194308,4,t,n)},useInsertionEffect:function(t,n){Ul(4,2,t,n)},useMemo:function(t,n){var s=$e();n=n===void 0?null:n;var u=t();if(ka){Bt(!0);try{t()}finally{Bt(!1)}}return s.memoizedState=[u,n],u},useReducer:function(t,n,s){var u=$e();if(s!==void 0){var D=s(n);if(ka){Bt(!0);try{s(n)}finally{Bt(!1)}}}else D=n;return u.memoizedState=u.baseState=D,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:D},u.queue=t,t=t.dispatch=dp.bind(null,Ct,t),[u.memoizedState,t]},useRef:function(t){var n=$e();return t={current:t},n.memoizedState=t},useState:function(t){t=nn(t);var n=t.queue,s=ud.bind(null,Ct,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:Hl,useDeferredValue:function(t,n){var s=$e();return Fl(s,t,n)},useTransition:function(){var t=nn(!1);return t=fu.bind(null,Ct,t.queue,!0,!1),$e().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var u=Ct,D=$e();if(xr){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),Xa===null)throw Error(o(349));(ba&124)!==0||xn(u,n,s)}D.memoizedState=s;var q={value:s,getSnapshot:n};return D.queue=q,uu(Ue.bind(null,u,q,t),[t]),u.flags|=2048,fs(9,cl(),ct.bind(null,u,q,s,n),null),s},useId:function(){var t=$e(),n=Xa.identifierPrefix;if(xr){var s=Ie,u=pe;s=(u&~(1<<32-lr(u)-1)).toString(32)+s,n="«"+n+"R"+s,s=Aa++,0<s&&(n+="H"+s.toString(32)),n+="»"}else s=K++,n="«"+n+"r"+s.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:vu,useFormState:In,useActionState:In,useOptimistic:function(t){var n=$e();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=yu.bind(null,Ct,!0,s),s.dispatch=n,[t,n]},useMemoCache:Me,useCacheRefresh:function(){return $e().memoizedState=up.bind(null,Ct)}},bg={readContext:si,use:me,useCallback:id,useContext:si,useEffect:du,useImperativeHandle:ad,useInsertionEffect:nd,useLayoutEffect:pu,useMemo:mu,useReducer:tt,useRef:lu,useState:function(){return tt(qe)},useDebugValue:Hl,useDeferredValue:function(t,n){var s=Ne();return hu(s,En.memoizedState,t,n)},useTransition:function(){var t=tt(qe)[0],n=Ne().memoizedState;return[typeof t=="boolean"?t:ue(t),n]},useSyncExternalStore:Rt,useId:cd,useHostTransitionStatus:vu,useFormState:gn,useActionState:gn,useOptimistic:function(t,n){var s=Ne();return un(s,En,t,n)},useMemoCache:Me,useCacheRefresh:ld},sw={readContext:si,use:me,useCallback:id,useContext:si,useEffect:du,useImperativeHandle:ad,useInsertionEffect:nd,useLayoutEffect:pu,useMemo:mu,useReducer:vt,useRef:lu,useState:function(){return vt(qe)},useDebugValue:Hl,useDeferredValue:function(t,n){var s=Ne();return En===null?Fl(s,t,n):hu(s,En.memoizedState,t,n)},useTransition:function(){var t=vt(qe)[0],n=Ne().memoizedState;return[typeof t=="boolean"?t:ue(t),n]},useSyncExternalStore:Rt,useId:cd,useHostTransitionStatus:vu,useFormState:Ci,useActionState:Ci,useOptimistic:function(t,n){var s=Ne();return En!==null?un(s,En,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Me,useCacheRefresh:ld},_u=null,dd=0;function mp(t){var n=dd;return dd+=1,_u===null&&(_u=[]),kt(_u,t,n)}function pd(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function hp(t,n){throw n.$$typeof===_?Error(o(525)):(t=Object.prototype.toString.call(n),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function wg(t){var n=t._init;return n(t._payload)}function Eg(t){function n(it,Ye){if(t){var ot=it.deletions;ot===null?(it.deletions=[Ye],it.flags|=16):ot.push(Ye)}}function s(it,Ye){if(!t)return null;for(;Ye!==null;)n(it,Ye),Ye=Ye.sibling;return null}function u(it){for(var Ye=new Map;it!==null;)it.key!==null?Ye.set(it.key,it):Ye.set(it.index,it),it=it.sibling;return Ye}function D(it,Ye){return it=Ps(it,Ye),it.index=0,it.sibling=null,it}function q(it,Ye,ot){return it.index=ot,t?(ot=it.alternate,ot!==null?(ot=ot.index,ot<Ye?(it.flags|=67108866,Ye):ot):(it.flags|=67108866,Ye)):(it.flags|=1048576,Ye)}function se(it){return t&&it.alternate===null&&(it.flags|=67108866),it}function ve(it,Ye,ot,Ut){return Ye===null||Ye.tag!==6?(Ye=Do(ot,it.mode,Ut),Ye.return=it,Ye):(Ye=D(Ye,ot),Ye.return=it,Ye)}function Fe(it,Ye,ot,Ut){var rr=ot.type;return rr===v?It(it,Ye,ot.props.children,Ut,ot.key):Ye!==null&&(Ye.elementType===rr||typeof rr=="object"&&rr!==null&&rr.$$typeof===y&&wg(rr)===Ye.type)?(Ye=D(Ye,ot.props),pd(Ye,ot),Ye.return=it,Ye):(Ye=Zo(ot.type,ot.key,ot.props,null,it.mode,Ut),pd(Ye,ot),Ye.return=it,Ye)}function lt(it,Ye,ot,Ut){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==ot.containerInfo||Ye.stateNode.implementation!==ot.implementation?(Ye=mo(ot,it.mode,Ut),Ye.return=it,Ye):(Ye=D(Ye,ot.children||[]),Ye.return=it,Ye)}function It(it,Ye,ot,Ut,rr){return Ye===null||Ye.tag!==7?(Ye=ts(ot,it.mode,Ut,rr),Ye.return=it,Ye):(Ye=D(Ye,ot),Ye.return=it,Ye)}function Yt(it,Ye,ot){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=Do(""+Ye,it.mode,ot),Ye.return=it,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case b:return ot=Zo(Ye.type,Ye.key,Ye.props,null,it.mode,ot),pd(ot,Ye),ot.return=it,ot;case T:return Ye=mo(Ye,it.mode,ot),Ye.return=it,Ye;case y:var Ut=Ye._init;return Ye=Ut(Ye._payload),Yt(it,Ye,ot)}if(U(Ye)||A(Ye))return Ye=ts(Ye,it.mode,ot,null),Ye.return=it,Ye;if(typeof Ye.then=="function")return Yt(it,mp(Ye),ot);if(Ye.$$typeof===m)return Yt(it,qc(it,Ye),ot);hp(it,Ye)}return null}function pt(it,Ye,ot,Ut){var rr=Ye!==null?Ye.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return rr!==null?null:ve(it,Ye,""+ot,Ut);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case b:return ot.key===rr?Fe(it,Ye,ot,Ut):null;case T:return ot.key===rr?lt(it,Ye,ot,Ut):null;case y:return rr=ot._init,ot=rr(ot._payload),pt(it,Ye,ot,Ut)}if(U(ot)||A(ot))return rr!==null?null:It(it,Ye,ot,Ut,null);if(typeof ot.then=="function")return pt(it,Ye,mp(ot),Ut);if(ot.$$typeof===m)return pt(it,Ye,qc(it,ot),Ut);hp(it,ot)}return null}function gt(it,Ye,ot,Ut,rr){if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint")return it=it.get(ot)||null,ve(Ye,it,""+Ut,rr);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case b:return it=it.get(Ut.key===null?ot:Ut.key)||null,Fe(Ye,it,Ut,rr);case T:return it=it.get(Ut.key===null?ot:Ut.key)||null,lt(Ye,it,Ut,rr);case y:var la=Ut._init;return Ut=la(Ut._payload),gt(it,Ye,ot,Ut,rr)}if(U(Ut)||A(Ut))return it=it.get(ot)||null,It(Ye,it,Ut,rr,null);if(typeof Ut.then=="function")return gt(it,Ye,ot,mp(Ut),rr);if(Ut.$$typeof===m)return gt(it,Ye,ot,qc(Ye,Ut),rr);hp(Ye,Ut)}return null}function Ir(it,Ye,ot,Ut){for(var rr=null,la=null,gr=Ye,Pr=Ye=0,ys=null;gr!==null&&Pr<ot.length;Pr++){gr.index>Pr?(ys=gr,gr=null):ys=gr.sibling;var Pa=pt(it,gr,ot[Pr],Ut);if(Pa===null){gr===null&&(gr=ys);break}t&&gr&&Pa.alternate===null&&n(it,gr),Ye=q(Pa,Ye,Pr),la===null?rr=Pa:la.sibling=Pa,la=Pa,gr=ys}if(Pr===ot.length)return s(it,gr),xr&&st(it,Pr),rr;if(gr===null){for(;Pr<ot.length;Pr++)gr=Yt(it,ot[Pr],Ut),gr!==null&&(Ye=q(gr,Ye,Pr),la===null?rr=gr:la.sibling=gr,la=gr);return xr&&st(it,Pr),rr}for(gr=u(gr);Pr<ot.length;Pr++)ys=gt(gr,it,Pr,ot[Pr],Ut),ys!==null&&(t&&ys.alternate!==null&&gr.delete(ys.key===null?Pr:ys.key),Ye=q(ys,Ye,Pr),la===null?rr=ys:la.sibling=ys,la=ys);return t&&gr.forEach(function(kl){return n(it,kl)}),xr&&st(it,Pr),rr}function Tr(it,Ye,ot,Ut){if(ot==null)throw Error(o(151));for(var rr=null,la=null,gr=Ye,Pr=Ye=0,ys=null,Pa=ot.next();gr!==null&&!Pa.done;Pr++,Pa=ot.next()){gr.index>Pr?(ys=gr,gr=null):ys=gr.sibling;var kl=pt(it,gr,Pa.value,Ut);if(kl===null){gr===null&&(gr=ys);break}t&&gr&&kl.alternate===null&&n(it,gr),Ye=q(kl,Ye,Pr),la===null?rr=kl:la.sibling=kl,la=kl,gr=ys}if(Pa.done)return s(it,gr),xr&&st(it,Pr),rr;if(gr===null){for(;!Pa.done;Pr++,Pa=ot.next())Pa=Yt(it,Pa.value,Ut),Pa!==null&&(Ye=q(Pa,Ye,Pr),la===null?rr=Pa:la.sibling=Pa,la=Pa);return xr&&st(it,Pr),rr}for(gr=u(gr);!Pa.done;Pr++,Pa=ot.next())Pa=gt(gr,it,Pr,Pa.value,Ut),Pa!==null&&(t&&Pa.alternate!==null&&gr.delete(Pa.key===null?Pr:Pa.key),Ye=q(Pa,Ye,Pr),la===null?rr=Pa:la.sibling=Pa,la=Pa);return t&&gr.forEach(function(oE){return n(it,oE)}),xr&&st(it,Pr),rr}function $a(it,Ye,ot,Ut){if(typeof ot=="object"&&ot!==null&&ot.type===v&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case b:e:{for(var rr=ot.key;Ye!==null;){if(Ye.key===rr){if(rr=ot.type,rr===v){if(Ye.tag===7){s(it,Ye.sibling),Ut=D(Ye,ot.props.children),Ut.return=it,it=Ut;break e}}else if(Ye.elementType===rr||typeof rr=="object"&&rr!==null&&rr.$$typeof===y&&wg(rr)===Ye.type){s(it,Ye.sibling),Ut=D(Ye,ot.props),pd(Ut,ot),Ut.return=it,it=Ut;break e}s(it,Ye);break}else n(it,Ye);Ye=Ye.sibling}ot.type===v?(Ut=ts(ot.props.children,it.mode,Ut,ot.key),Ut.return=it,it=Ut):(Ut=Zo(ot.type,ot.key,ot.props,null,it.mode,Ut),pd(Ut,ot),Ut.return=it,it=Ut)}return se(it);case T:e:{for(rr=ot.key;Ye!==null;){if(Ye.key===rr)if(Ye.tag===4&&Ye.stateNode.containerInfo===ot.containerInfo&&Ye.stateNode.implementation===ot.implementation){s(it,Ye.sibling),Ut=D(Ye,ot.children||[]),Ut.return=it,it=Ut;break e}else{s(it,Ye);break}else n(it,Ye);Ye=Ye.sibling}Ut=mo(ot,it.mode,Ut),Ut.return=it,it=Ut}return se(it);case y:return rr=ot._init,ot=rr(ot._payload),$a(it,Ye,ot,Ut)}if(U(ot))return Ir(it,Ye,ot,Ut);if(A(ot)){if(rr=A(ot),typeof rr!="function")throw Error(o(150));return ot=rr.call(ot),Tr(it,Ye,ot,Ut)}if(typeof ot.then=="function")return $a(it,Ye,mp(ot),Ut);if(ot.$$typeof===m)return $a(it,Ye,qc(it,ot),Ut);hp(it,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint"?(ot=""+ot,Ye!==null&&Ye.tag===6?(s(it,Ye.sibling),Ut=D(Ye,ot),Ut.return=it,it=Ut):(s(it,Ye),Ut=Do(ot,it.mode,Ut),Ut.return=it,it=Ut),se(it)):s(it,Ye)}return function(it,Ye,ot,Ut){try{dd=0;var rr=$a(it,Ye,ot,Ut);return _u=null,rr}catch(gr){if(gr===ie||gr===Pe)throw gr;var la=_a(29,gr,null,it.mode);return la.lanes=Ut,la.return=it,la}finally{}}}var bu=Eg(!0),Sg=Eg(!1),Jo=Ee(null),kc=null;function dl(t){var n=t.alternate;Re(as,as.current&1),Re(Jo,t),kc===null&&(n===null||en.current!==null||n.memoizedState!==null)&&(kc=t)}function xg(t){if(t.tag===22){if(Re(as,as.current),Re(Jo,t),kc===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(kc=t)}}else pl()}function pl(){Re(as,as.current),Re(Jo,Jo.current)}function Wc(t){Ce(Jo),kc===t&&(kc=null),Ce(as)}var as=Ee(0);function fp(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Mh(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Zm(t,n,s,u){n=t.memoizedState,s=s(u,n),s=s==null?n:E({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var $m={enqueueSetState:function(t,n,s){t=t._reactInternals;var u=jo(),D=mt(u);D.payload=n,s!=null&&(D.callback=s),n=Nt(t,D,u),n!==null&&(Bo(n,t,u),ht(n,t,u))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var u=jo(),D=mt(u);D.tag=1,D.payload=n,s!=null&&(D.callback=s),n=Nt(t,D,u),n!==null&&(Bo(n,t,u),ht(n,t,u))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=jo(),u=mt(s);u.tag=2,n!=null&&(u.callback=n),n=Nt(t,u,s),n!==null&&(Bo(n,t,s),ht(n,t,s))}};function Rg(t,n,s,u,D,q,se){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,q,se):n.prototype&&n.prototype.isPureReactComponent?!Jr(s,u)||!Jr(D,q):!0}function kg(t,n,s,u){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,u),n.state!==t&&$m.enqueueReplaceState(n,n.state,null)}function ql(t,n){var s=n;if("ref"in n){s={};for(var u in n)u!=="ref"&&(s[u]=n[u])}if(t=t.defaultProps){s===n&&(s=E({},s));for(var D in t)s[D]===void 0&&(s[D]=t[D])}return s}var gp=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Cg(t){gp(t)}function Tg(t){console.error(t)}function Pg(t){gp(t)}function vp(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(u){setTimeout(function(){throw u})}}function Ng(t,n,s){try{var u=t.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function Wm(t,n,s){return s=mt(s),s.tag=3,s.payload={element:null},s.callback=function(){vp(t,n)},s}function Ag(t){return t=mt(t),t.tag=3,t}function Og(t,n,s,u){var D=s.type.getDerivedStateFromError;if(typeof D=="function"){var q=u.value;t.payload=function(){return D(q)},t.callback=function(){Ng(n,s,u)}}var se=s.stateNode;se!==null&&typeof se.componentDidCatch=="function"&&(t.callback=function(){Ng(n,s,u),typeof D!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var ve=u.stack;this.componentDidCatch(u.value,{componentStack:ve!==null?ve:""})})}function ow(t,n,s,u,D){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(n=s.alternate,n!==null&&fo(n,s,D,!0),s=Jo.current,s!==null){switch(s.tag){case 13:return kc===null?vh():s.alternate===null&&Ti===0&&(Ti=3),s.flags&=-257,s.flags|=65536,s.lanes=D,u===De?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([u]):n.add(u),_h(t,u,D)),!1;case 22:return s.flags|=65536,u===De?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([u]):s.add(u)),_h(t,u,D)),!1}throw Error(o(435,s.tag))}return _h(t,u,D),vh(),!1}if(xr)return n=Jo.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=D,u!==Ja&&(t=Error(o(422),{cause:u}),ms(ri(t,s)))):(u!==Ja&&(n=Error(o(423),{cause:u}),ms(ri(n,s))),t=t.current.alternate,t.flags|=65536,D&=-D,t.lanes|=D,u=ri(u,s),D=Wm(t.stateNode,u,D),At(t,D),Ti!==4&&(Ti=2)),!1;var q=Error(o(520),{cause:u});if(q=ri(q,s),_d===null?_d=[q]:_d.push(q),Ti!==4&&(Ti=2),n===null)return!0;u=ri(u,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=D&-D,s.lanes|=t,t=Wm(s.stateNode,u,t),At(s,t),!1;case 1:if(n=s.type,q=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(yl===null||!yl.has(q))))return s.flags|=65536,D&=-D,s.lanes|=D,D=Ag(D),Og(D,t,s,u),At(s,D),!1}s=s.return}while(s!==null);return!1}var Dg=Error(o(461)),gs=!1;function As(t,n,s,u){n.child=t===null?Sg(n,null,s,u):bu(n,t.child,s,u)}function Mg(t,n,s,u,D){s=s.render;var q=n.ref;if("ref"in u){var se={};for(var ve in u)ve!=="ref"&&(se[ve]=u[ve])}else se=u;return hs(n),u=Se(t,n,s,se,q,D),ve=xe(),t!==null&&!gs?(Ae(t,n,D),Gc(t,n,D)):(xr&&ve&&Gt(n),n.flags|=1,As(t,n,u,D),n.child)}function Lg(t,n,s,u,D){if(t===null){var q=s.type;return typeof q=="function"&&!Oo(q)&&q.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=q,Ig(t,n,q,u,D)):(t=Zo(s.type,null,u,n,n.mode,D),t.ref=n.ref,t.return=n,n.child=t)}if(q=t.child,!th(t,D)){var se=q.memoizedProps;if(s=s.compare,s=s!==null?s:Jr,s(se,u)&&t.ref===n.ref)return Gc(t,n,D)}return n.flags|=1,t=Ps(q,u),t.ref=n.ref,t.return=n,n.child=t}function Ig(t,n,s,u,D){if(t!==null){var q=t.memoizedProps;if(Jr(q,u)&&t.ref===n.ref)if(gs=!1,n.pendingProps=u=q,th(t,D))(t.flags&131072)!==0&&(gs=!0);else return n.lanes=t.lanes,Gc(t,n,D)}return Gm(t,n,s,u,D)}function jg(t,n,s){var u=n.pendingProps,D=u.children,q=t!==null?t.memoizedState:null;if(u.mode==="hidden"){if((n.flags&128)!==0){if(u=q!==null?q.baseLanes|s:s,t!==null){for(D=n.child=t.child,q=0;D!==null;)q=q|D.lanes|D.childLanes,D=D.sibling;n.childLanes=q&~u}else n.childLanes=0,n.child=null;return Bg(t,n,u,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&re(n,q!==null?q.cachePool:null),q!==null?cn(n,q):Kt(),xg(n);else return n.lanes=n.childLanes=536870912,Bg(t,n,q!==null?q.baseLanes|s:s,s)}else q!==null?(re(n,q.cachePool),cn(n,q),pl(),n.memoizedState=null):(t!==null&&re(n,null),Kt(),pl());return As(t,n,D,s),n.child}function Bg(t,n,s,u){var D=X();return D=D===null?null:{parent:oi._currentValue,pool:D},n.memoizedState={baseLanes:s,cachePool:D},t!==null&&re(n,null),Kt(),xg(n),t!==null&&fo(t,n,u,!0),null}function yp(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function Gm(t,n,s,u,D){return hs(n),s=Se(t,n,s,u,void 0,D),u=xe(),t!==null&&!gs?(Ae(t,n,D),Gc(t,n,D)):(xr&&u&&Gt(n),n.flags|=1,As(t,n,s,D),n.child)}function zg(t,n,s,u,D,q){return hs(n),n.updateQueue=null,s=be(n,u,s,D),_e(t),u=xe(),t!==null&&!gs?(Ae(t,n,q),Gc(t,n,q)):(xr&&u&&Gt(n),n.flags|=1,As(t,n,s,q),n.child)}function Ug(t,n,s,u,D){if(hs(n),n.stateNode===null){var q=po,se=s.contextType;typeof se=="object"&&se!==null&&(q=si(se)),q=new s(u,q),n.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=$m,n.stateNode=q,q._reactInternals=n,q=n.stateNode,q.props=u,q.state=n.memoizedState,q.refs={},hn(n),se=s.contextType,q.context=typeof se=="object"&&se!==null?si(se):po,q.state=n.memoizedState,se=s.getDerivedStateFromProps,typeof se=="function"&&(Zm(n,s,se,u),q.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(se=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),se!==q.state&&$m.enqueueReplaceState(q,q.state,null),rn(n,u,q,D),Mt(),q.state=n.memoizedState),typeof q.componentDidMount=="function"&&(n.flags|=4194308),u=!0}else if(t===null){q=n.stateNode;var ve=n.memoizedProps,Fe=ql(s,ve);q.props=Fe;var lt=q.context,It=s.contextType;se=po,typeof It=="object"&&It!==null&&(se=si(It));var Yt=s.getDerivedStateFromProps;It=typeof Yt=="function"||typeof q.getSnapshotBeforeUpdate=="function",ve=n.pendingProps!==ve,It||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ve||lt!==se)&&kg(n,q,u,se),an=!1;var pt=n.memoizedState;q.state=pt,rn(n,u,q,D),Mt(),lt=n.memoizedState,ve||pt!==lt||an?(typeof Yt=="function"&&(Zm(n,s,Yt,u),lt=n.memoizedState),(Fe=an||Rg(n,s,Fe,u,pt,lt,se))?(It||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(n.flags|=4194308)):(typeof q.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=lt),q.props=u,q.state=lt,q.context=se,u=Fe):(typeof q.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{q=n.stateNode,ke(t,n),se=n.memoizedProps,It=ql(s,se),q.props=It,Yt=n.pendingProps,pt=q.context,lt=s.contextType,Fe=po,typeof lt=="object"&&lt!==null&&(Fe=si(lt)),ve=s.getDerivedStateFromProps,(lt=typeof ve=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(se!==Yt||pt!==Fe)&&kg(n,q,u,Fe),an=!1,pt=n.memoizedState,q.state=pt,rn(n,u,q,D),Mt();var gt=n.memoizedState;se!==Yt||pt!==gt||an||t!==null&&t.dependencies!==null&&Rc(t.dependencies)?(typeof ve=="function"&&(Zm(n,s,ve,u),gt=n.memoizedState),(It=an||Rg(n,s,It,u,pt,gt,Fe)||t!==null&&t.dependencies!==null&&Rc(t.dependencies))?(lt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(u,gt,Fe),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(u,gt,Fe)),typeof q.componentDidUpdate=="function"&&(n.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof q.componentDidUpdate!="function"||se===t.memoizedProps&&pt===t.memoizedState||(n.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||se===t.memoizedProps&&pt===t.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=gt),q.props=u,q.state=gt,q.context=Fe,u=It):(typeof q.componentDidUpdate!="function"||se===t.memoizedProps&&pt===t.memoizedState||(n.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||se===t.memoizedProps&&pt===t.memoizedState||(n.flags|=1024),u=!1)}return q=u,yp(t,n),u=(n.flags&128)!==0,q||u?(q=n.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:q.render(),n.flags|=1,t!==null&&u?(n.child=bu(n,t.child,null,D),n.child=bu(n,null,s,D)):As(t,n,s,D),n.memoizedState=q.state,t=n.child):t=Gc(t,n,D),t}function Hg(t,n,s,u){return Fs(),n.flags|=256,As(t,n,s,u),n.child}var Km={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ym(t){return{baseLanes:t,cachePool:ae()}}function Qm(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=Xo),t}function Fg(t,n,s){var u=n.pendingProps,D=!1,q=(n.flags&128)!==0,se;if((se=q)||(se=t!==null&&t.memoizedState===null?!1:(as.current&2)!==0),se&&(D=!0,n.flags&=-129),se=(n.flags&32)!==0,n.flags&=-33,t===null){if(xr){if(D?dl(n):pl(),xr){var ve=Qn,Fe;if(Fe=ve){e:{for(Fe=ve,ve=Na;Fe.nodeType!==8;){if(!ve){ve=null;break e}if(Fe=hc(Fe.nextSibling),Fe===null){ve=null;break e}}ve=Fe}ve!==null?(n.memoizedState={dehydrated:ve,treeContext:ee!==null?{id:pe,overflow:Ie}:null,retryLane:536870912,hydrationErrors:null},Fe=_a(18,null,null,0),Fe.stateNode=ve,Fe.return=n,n.child=Fe,Fn=n,Qn=null,Fe=!0):Fe=!1}Fe||yi(n)}if(ve=n.memoizedState,ve!==null&&(ve=ve.dehydrated,ve!==null))return Mh(ve)?n.lanes=32:n.lanes=536870912,null;Wc(n)}return ve=u.children,u=u.fallback,D?(pl(),D=n.mode,ve=_p({mode:"hidden",children:ve},D),u=ts(u,D,s,null),ve.return=n,u.return=n,ve.sibling=u,n.child=ve,D=n.child,D.memoizedState=Ym(s),D.childLanes=Qm(t,se,s),n.memoizedState=Km,u):(dl(n),Jm(n,ve))}if(Fe=t.memoizedState,Fe!==null&&(ve=Fe.dehydrated,ve!==null)){if(q)n.flags&256?(dl(n),n.flags&=-257,n=Xm(t,n,s)):n.memoizedState!==null?(pl(),n.child=t.child,n.flags|=128,n=null):(pl(),D=u.fallback,ve=n.mode,u=_p({mode:"visible",children:u.children},ve),D=ts(D,ve,s,null),D.flags|=2,u.return=n,D.return=n,u.sibling=D,n.child=u,bu(n,t.child,null,s),u=n.child,u.memoizedState=Ym(s),u.childLanes=Qm(t,se,s),n.memoizedState=Km,n=D);else if(dl(n),Mh(ve)){if(se=ve.nextSibling&&ve.nextSibling.dataset,se)var lt=se.dgst;se=lt,u=Error(o(419)),u.stack="",u.digest=se,ms({value:u,source:null,stack:null}),n=Xm(t,n,s)}else if(gs||fo(t,n,s,!1),se=(s&t.childLanes)!==0,gs||se){if(se=Xa,se!==null&&(u=s&-s,u=(u&42)!==0?1:$t(u),u=(u&(se.suspendedLanes|s))!==0?0:u,u!==0&&u!==Fe.retryLane))throw Fe.retryLane=u,Hs(t,u),Bo(se,t,u),Dg;ve.data==="$?"||vh(),n=Xm(t,n,s)}else ve.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=Fe.treeContext,Qn=hc(ve.nextSibling),Fn=n,xr=!0,va=null,Na=!1,t!==null&&(O[V++]=pe,O[V++]=Ie,O[V++]=ee,pe=t.id,Ie=t.overflow,ee=n),n=Jm(n,u.children),n.flags|=4096);return n}return D?(pl(),D=u.fallback,ve=n.mode,Fe=t.child,lt=Fe.sibling,u=Ps(Fe,{mode:"hidden",children:u.children}),u.subtreeFlags=Fe.subtreeFlags&65011712,lt!==null?D=Ps(lt,D):(D=ts(D,ve,s,null),D.flags|=2),D.return=n,u.return=n,u.sibling=D,n.child=u,u=D,D=n.child,ve=t.child.memoizedState,ve===null?ve=Ym(s):(Fe=ve.cachePool,Fe!==null?(lt=oi._currentValue,Fe=Fe.parent!==lt?{parent:lt,pool:lt}:Fe):Fe=ae(),ve={baseLanes:ve.baseLanes|s,cachePool:Fe}),D.memoizedState=ve,D.childLanes=Qm(t,se,s),n.memoizedState=Km,u):(dl(n),s=t.child,t=s.sibling,s=Ps(s,{mode:"visible",children:u.children}),s.return=n,s.sibling=null,t!==null&&(se=n.deletions,se===null?(n.deletions=[t],n.flags|=16):se.push(t)),n.child=s,n.memoizedState=null,s)}function Jm(t,n){return n=_p({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function _p(t,n){return t=_a(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Xm(t,n,s){return bu(n,t.child,null,s),t=Jm(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function qg(t,n,s){t.lanes|=n;var u=t.alternate;u!==null&&(u.lanes|=n),Wo(t.return,n,s)}function eh(t,n,s,u,D){var q=t.memoizedState;q===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:D}:(q.isBackwards=n,q.rendering=null,q.renderingStartTime=0,q.last=u,q.tail=s,q.tailMode=D)}function Vg(t,n,s){var u=n.pendingProps,D=u.revealOrder,q=u.tail;if(As(t,n,u.children,s),u=as.current,(u&2)!==0)u=u&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qg(t,s,n);else if(t.tag===19)qg(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}switch(Re(as,u),D){case"forwards":for(s=n.child,D=null;s!==null;)t=s.alternate,t!==null&&fp(t)===null&&(D=s),s=s.sibling;s=D,s===null?(D=n.child,n.child=null):(D=s.sibling,s.sibling=null),eh(n,!1,D,s,q);break;case"backwards":for(s=null,D=n.child,n.child=null;D!==null;){if(t=D.alternate,t!==null&&fp(t)===null){n.child=D;break}t=D.sibling,D.sibling=s,s=D,D=t}eh(n,!0,s,null,q);break;case"together":eh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Gc(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),vl|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(fo(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(o(153));if(n.child!==null){for(t=n.child,s=Ps(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Ps(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function th(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Rc(t)))}function cw(t,n,s){switch(n.tag){case 3:Je(n,n.stateNode.containerInfo),eo(n,oi,t.memoizedState.cache),Fs();break;case 27:case 5:nt(n);break;case 4:Je(n,n.stateNode.containerInfo);break;case 10:eo(n,n.type,n.memoizedProps.value);break;case 13:var u=n.memoizedState;if(u!==null)return u.dehydrated!==null?(dl(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Fg(t,n,s):(dl(n),t=Gc(t,n,s),t!==null?t.sibling:null);dl(n);break;case 19:var D=(t.flags&128)!==0;if(u=(s&n.childLanes)!==0,u||(fo(t,n,s,!1),u=(s&n.childLanes)!==0),D){if(u)return Vg(t,n,s);n.flags|=128}if(D=n.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),Re(as,as.current),u)break;return null;case 22:case 23:return n.lanes=0,jg(t,n,s);case 24:eo(n,oi,t.memoizedState.cache)}return Gc(t,n,s)}function Zg(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)gs=!0;else{if(!th(t,s)&&(n.flags&128)===0)return gs=!1,cw(t,n,s);gs=(t.flags&131072)!==0}else gs=!1,xr&&(n.flags&1048576)!==0&&dt(n,l,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var u=n.elementType,D=u._init;if(u=D(u._payload),n.type=u,typeof u=="function")Oo(u)?(t=ql(u,t),n.tag=1,n=Ug(null,n,u,t,s)):(n.tag=0,n=Gm(null,n,u,t,s));else{if(u!=null){if(D=u.$$typeof,D===P){n.tag=11,n=Mg(null,n,u,t,s);break e}else if(D===x){n.tag=14,n=Lg(null,n,u,t,s);break e}}throw n=j(u)||u,Error(o(306,n,""))}}return n;case 0:return Gm(t,n,n.type,n.pendingProps,s);case 1:return u=n.type,D=ql(u,n.pendingProps),Ug(t,n,u,D,s);case 3:e:{if(Je(n,n.stateNode.containerInfo),t===null)throw Error(o(387));u=n.pendingProps;var q=n.memoizedState;D=q.element,ke(t,n),rn(n,u,null,s);var se=n.memoizedState;if(u=se.cache,eo(n,oi,u),u!==q.cache&&dc(n,[oi],s,!0),Mt(),u=se.element,q.isDehydrated)if(q={element:u,isDehydrated:!1,cache:se.cache},n.updateQueue.baseState=q,n.memoizedState=q,n.flags&256){n=Hg(t,n,u,s);break e}else if(u!==D){D=ri(Error(o(424)),n),ms(D),n=Hg(t,n,u,s);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Qn=hc(t.firstChild),Fn=n,xr=!0,va=null,Na=!0,s=Sg(n,null,u,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Fs(),u===D){n=Gc(t,n,s);break e}As(t,n,u,s)}n=n.child}return n;case 26:return yp(t,n),t===null?(s=Kv(n.type,null,n.pendingProps,null))?n.memoizedState=s:xr||(s=n.type,t=n.pendingProps,u=Dp(He.current).createElement(s),u[Sn]=n,u[Rn]=t,Ds(u,s,t),qn(u),n.stateNode=u):n.memoizedState=Kv(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return nt(n),t===null&&xr&&(u=n.stateNode=$v(n.type,n.pendingProps,He.current),Fn=n,Na=!0,D=Qn,wl(n.type)?(Lh=D,Qn=hc(u.firstChild)):Qn=D),As(t,n,n.pendingProps.children,s),yp(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&xr&&((D=u=Qn)&&(u=Iw(u,n.type,n.pendingProps,Na),u!==null?(n.stateNode=u,Fn=n,Qn=hc(u.firstChild),Na=!1,D=!0):D=!1),D||yi(n)),nt(n),D=n.type,q=n.pendingProps,se=t!==null?t.memoizedProps:null,u=q.children,Ah(D,q)?u=null:se!==null&&Ah(D,se)&&(n.flags|=32),n.memoizedState!==null&&(D=Se(t,n,Ve,null,null,s),Td._currentValue=D),yp(t,n),As(t,n,u,s),n.child;case 6:return t===null&&xr&&((t=s=Qn)&&(s=jw(s,n.pendingProps,Na),s!==null?(n.stateNode=s,Fn=n,Qn=null,t=!0):t=!1),t||yi(n)),null;case 13:return Fg(t,n,s);case 4:return Je(n,n.stateNode.containerInfo),u=n.pendingProps,t===null?n.child=bu(n,null,u,s):As(t,n,u,s),n.child;case 11:return Mg(t,n,n.type,n.pendingProps,s);case 7:return As(t,n,n.pendingProps,s),n.child;case 8:return As(t,n,n.pendingProps.children,s),n.child;case 12:return As(t,n,n.pendingProps.children,s),n.child;case 10:return u=n.pendingProps,eo(n,n.type,u.value),As(t,n,u.children,s),n.child;case 9:return D=n.type._context,u=n.pendingProps.children,hs(n),D=si(D),u=u(D),n.flags|=1,As(t,n,u,s),n.child;case 14:return Lg(t,n,n.type,n.pendingProps,s);case 15:return Ig(t,n,n.type,n.pendingProps,s);case 19:return Vg(t,n,s);case 31:return u=n.pendingProps,s=n.mode,u={mode:u.mode,children:u.children},t===null?(s=_p(u,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=Ps(t.child,u),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return jg(t,n,s);case 24:return hs(n),u=si(oi),t===null?(D=X(),D===null&&(D=Xa,q=Go(),D.pooledCache=q,q.refCount++,q!==null&&(D.pooledCacheLanes|=s),D=q),n.memoizedState={parent:u,cache:D},hn(n),eo(n,oi,D)):((t.lanes&s)!==0&&(ke(t,n),rn(n,null,null,s),Mt()),D=t.memoizedState,q=n.memoizedState,D.parent!==u?(D={parent:u,cache:u},n.memoizedState=D,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=D),eo(n,oi,u)):(u=q.cache,eo(n,oi,u),u!==D.cache&&dc(n,[oi],s,!0))),As(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(o(156,n.tag))}function Kc(t){t.flags|=4}function $g(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!e0(n)){if(n=Jo.current,n!==null&&((ba&4194048)===ba?kc!==null:(ba&62914560)!==ba&&(ba&536870912)===0||n!==kc))throw zt=De,le;t.flags|=8192}}function bp(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Ha():536870912,t.lanes|=n,xu|=n)}function md(t,n){if(!xr)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function _i(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(n)for(var D=t.child;D!==null;)s|=D.lanes|D.childLanes,u|=D.subtreeFlags&65011712,u|=D.flags&65011712,D.return=t,D=D.sibling;else for(D=t.child;D!==null;)s|=D.lanes|D.childLanes,u|=D.subtreeFlags,u|=D.flags,D.return=t,D=D.sibling;return t.subtreeFlags|=u,t.childLanes=s,n}function lw(t,n,s){var u=n.pendingProps;switch(Mn(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _i(n),null;case 1:return _i(n),null;case 3:return s=n.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),n.memoizedState.cache!==u&&(n.flags|=2048),Va(oi),Be(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ho(n)?Kc(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,uc())),_i(n),null;case 26:return s=n.memoizedState,t===null?(Kc(n),s!==null?(_i(n),$g(n,s)):(_i(n),n.flags&=-16777217)):s?s!==t.memoizedState?(Kc(n),_i(n),$g(n,s)):(_i(n),n.flags&=-16777217):(t.memoizedProps!==u&&Kc(n),_i(n),n.flags&=-16777217),null;case 27:Qe(n),s=He.current;var D=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==u&&Kc(n);else{if(!u){if(n.stateNode===null)throw Error(o(166));return _i(n),null}t=ye.current,ho(n)?$o(n):(t=$v(D,u,s),n.stateNode=t,Kc(n))}return _i(n),null;case 5:if(Qe(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==u&&Kc(n);else{if(!u){if(n.stateNode===null)throw Error(o(166));return _i(n),null}if(t=ye.current,ho(n))$o(n);else{switch(D=Dp(He.current),t){case 1:t=D.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=D.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=D.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=D.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=D.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof u.is=="string"?D.createElement("select",{is:u.is}):D.createElement("select"),u.multiple?t.multiple=!0:u.size&&(t.size=u.size);break;default:t=typeof u.is=="string"?D.createElement(s,{is:u.is}):D.createElement(s)}}t[Sn]=n,t[Rn]=u;e:for(D=n.child;D!==null;){if(D.tag===5||D.tag===6)t.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===n)break e;for(;D.sibling===null;){if(D.return===null||D.return===n)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}n.stateNode=t;e:switch(Ds(t,s,u),s){case"button":case"input":case"select":case"textarea":t=!!u.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Kc(n)}}return _i(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==u&&Kc(n);else{if(typeof u!="string"&&n.stateNode===null)throw Error(o(166));if(t=He.current,ho(n)){if(t=n.stateNode,s=n.memoizedProps,u=null,D=Fn,D!==null)switch(D.tag){case 27:case 5:u=D.memoizedProps}t[Sn]=n,t=!!(t.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||zv(t.nodeValue,s)),t||yi(n)}else t=Dp(t).createTextNode(u),t[Sn]=n,n.stateNode=t}return _i(n),null;case 13:if(u=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(D=ho(n),u!==null&&u.dehydrated!==null){if(t===null){if(!D)throw Error(o(318));if(D=n.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(o(317));D[Sn]=n}else Fs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;_i(n),D=!1}else D=uc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=D),D=!0;if(!D)return n.flags&256?(Wc(n),n):(Wc(n),null)}if(Wc(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=u!==null,t=t!==null&&t.memoizedState!==null,s){u=n.child,D=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(D=u.alternate.memoizedState.cachePool.pool);var q=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(q=u.memoizedState.cachePool.pool),q!==D&&(u.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),bp(n,n.updateQueue),_i(n),null;case 4:return Be(),t===null&&kh(n.stateNode.containerInfo),_i(n),null;case 10:return Va(n.type),_i(n),null;case 19:if(Ce(as),D=n.memoizedState,D===null)return _i(n),null;if(u=(n.flags&128)!==0,q=D.rendering,q===null)if(u)md(D,!1);else{if(Ti!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(q=fp(t),q!==null){for(n.flags|=128,md(D,!1),t=q.updateQueue,n.updateQueue=t,bp(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)lc(s,t),s=s.sibling;return Re(as,as.current&1|2),n.child}t=t.sibling}D.tail!==null&&cr()>Sp&&(n.flags|=128,u=!0,md(D,!1),n.lanes=4194304)}else{if(!u)if(t=fp(q),t!==null){if(n.flags|=128,u=!0,t=t.updateQueue,n.updateQueue=t,bp(n,t),md(D,!0),D.tail===null&&D.tailMode==="hidden"&&!q.alternate&&!xr)return _i(n),null}else 2*cr()-D.renderingStartTime>Sp&&s!==536870912&&(n.flags|=128,u=!0,md(D,!1),n.lanes=4194304);D.isBackwards?(q.sibling=n.child,n.child=q):(t=D.last,t!==null?t.sibling=q:n.child=q,D.last=q)}return D.tail!==null?(n=D.tail,D.rendering=n,D.tail=n.sibling,D.renderingStartTime=cr(),n.sibling=null,t=as.current,Re(as,u?t&1|2:t&1),n):(_i(n),null);case 22:case 23:return Wc(n),dr(),u=n.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(n.flags|=8192):u&&(n.flags|=8192),u?(s&536870912)!==0&&(n.flags&128)===0&&(_i(n),n.subtreeFlags&6&&(n.flags|=8192)):_i(n),s=n.updateQueue,s!==null&&bp(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),u=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),u!==s&&(n.flags|=2048),t!==null&&Ce(fe),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Va(oi),_i(n),null;case 25:return null;case 30:return null}throw Error(o(156,n.tag))}function uw(t,n){switch(Mn(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Va(oi),Be(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Qe(n),null;case 13:if(Wc(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Fs()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Ce(as),null;case 4:return Be(),null;case 10:return Va(n.type),null;case 22:case 23:return Wc(n),dr(),t!==null&&Ce(fe),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Va(oi),null;case 25:return null;default:return null}}function Wg(t,n){switch(Mn(n),n.tag){case 3:Va(oi),Be();break;case 26:case 27:case 5:Qe(n);break;case 4:Be();break;case 13:Wc(n);break;case 19:Ce(as);break;case 10:Va(n.type);break;case 22:case 23:Wc(n),dr(),t!==null&&Ce(fe);break;case 24:Va(oi)}}function hd(t,n){try{var s=n.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var D=u.next;s=D;do{if((s.tag&t)===t){u=void 0;var q=s.create,se=s.inst;u=q(),se.destroy=u}s=s.next}while(s!==D)}}catch(ve){Ka(n,n.return,ve)}}function ml(t,n,s){try{var u=n.updateQueue,D=u!==null?u.lastEffect:null;if(D!==null){var q=D.next;u=q;do{if((u.tag&t)===t){var se=u.inst,ve=se.destroy;if(ve!==void 0){se.destroy=void 0,D=n;var Fe=s,lt=ve;try{lt()}catch(It){Ka(D,Fe,It)}}}u=u.next}while(u!==q)}}catch(It){Ka(n,n.return,It)}}function Gg(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{ln(n,s)}catch(u){Ka(t,t.return,u)}}}function Kg(t,n,s){s.props=ql(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(u){Ka(t,n,u)}}function fd(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof s=="function"?t.refCleanup=s(u):s.current=u}}catch(D){Ka(t,n,D)}}function Cc(t,n){var s=t.ref,u=t.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(D){Ka(t,n,D)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(D){Ka(t,n,D)}else s.current=null}function Yg(t){var n=t.type,s=t.memoizedProps,u=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(D){Ka(t,t.return,D)}}function nh(t,n,s){try{var u=t.stateNode;Aw(u,t.type,s,n),u[Rn]=n}catch(D){Ka(t,t.return,D)}}function Qg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&wl(t.type)||t.tag===4}function rh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&wl(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ah(t,n,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Op));else if(u!==4&&(u===27&&wl(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(ah(t,n,s),t=t.sibling;t!==null;)ah(t,n,s),t=t.sibling}function wp(t,n,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(u!==4&&(u===27&&wl(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(wp(t,n,s),t=t.sibling;t!==null;)wp(t,n,s),t=t.sibling}function Jg(t){var n=t.stateNode,s=t.memoizedProps;try{for(var u=t.type,D=n.attributes;D.length;)n.removeAttributeNode(D[0]);Ds(n,u,s),n[Sn]=t,n[Rn]=s}catch(q){Ka(t,t.return,q)}}var Yc=!1,Ii=!1,ih=!1,Xg=typeof WeakSet=="function"?WeakSet:Set,vs=null;function dw(t,n){if(t=t.containerInfo,Ph=zp,t=Ys(t),Qs(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var D=u.anchorOffset,q=u.focusNode;u=u.focusOffset;try{s.nodeType,q.nodeType}catch{s=null;break e}var se=0,ve=-1,Fe=-1,lt=0,It=0,Yt=t,pt=null;t:for(;;){for(var gt;Yt!==s||D!==0&&Yt.nodeType!==3||(ve=se+D),Yt!==q||u!==0&&Yt.nodeType!==3||(Fe=se+u),Yt.nodeType===3&&(se+=Yt.nodeValue.length),(gt=Yt.firstChild)!==null;)pt=Yt,Yt=gt;for(;;){if(Yt===t)break t;if(pt===s&&++lt===D&&(ve=se),pt===q&&++It===u&&(Fe=se),(gt=Yt.nextSibling)!==null)break;Yt=pt,pt=Yt.parentNode}Yt=gt}s=ve===-1||Fe===-1?null:{start:ve,end:Fe}}else s=null}s=s||{start:0,end:0}}else s=null;for(Nh={focusedElem:t,selectionRange:s},zp=!1,vs=n;vs!==null;)if(n=vs,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,vs=t;else for(;vs!==null;){switch(n=vs,q=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&q!==null){t=void 0,s=n,D=q.memoizedProps,q=q.memoizedState,u=s.stateNode;try{var Ir=ql(s.type,D,s.elementType===s.type);t=u.getSnapshotBeforeUpdate(Ir,q),u.__reactInternalSnapshotBeforeUpdate=t}catch(Tr){Ka(s,s.return,Tr)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)Dh(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Dh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=n.sibling,t!==null){t.return=n.return,vs=t;break}vs=n.return}}function ev(t,n,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:hl(t,s),u&4&&hd(5,s);break;case 1:if(hl(t,s),u&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(se){Ka(s,s.return,se)}else{var D=ql(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(D,n,t.__reactInternalSnapshotBeforeUpdate)}catch(se){Ka(s,s.return,se)}}u&64&&Gg(s),u&512&&fd(s,s.return);break;case 3:if(hl(t,s),u&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{ln(t,n)}catch(se){Ka(s,s.return,se)}}break;case 27:n===null&&u&4&&Jg(s);case 26:case 5:hl(t,s),n===null&&u&4&&Yg(s),u&512&&fd(s,s.return);break;case 12:hl(t,s);break;case 13:hl(t,s),u&4&&rv(t,s),u&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=bw.bind(null,s),Bw(t,s))));break;case 22:if(u=s.memoizedState!==null||Yc,!u){n=n!==null&&n.memoizedState!==null||Ii,D=Yc;var q=Ii;Yc=u,(Ii=n)&&!q?fl(t,s,(s.subtreeFlags&8772)!==0):hl(t,s),Yc=D,Ii=q}break;case 30:break;default:hl(t,s)}}function tv(t){var n=t.alternate;n!==null&&(t.alternate=null,tv(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&bn(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ci=null,go=!1;function Qc(t,n,s){for(s=s.child;s!==null;)nv(t,n,s),s=s.sibling}function nv(t,n,s){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(pn,s)}catch{}switch(s.tag){case 26:Ii||Cc(s,n),Qc(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Ii||Cc(s,n);var u=ci,D=go;wl(s.type)&&(ci=s.stateNode,go=!1),Qc(t,n,s),xd(s.stateNode),ci=u,go=D;break;case 5:Ii||Cc(s,n);case 6:if(u=ci,D=go,ci=null,Qc(t,n,s),ci=u,go=D,ci!==null)if(go)try{(ci.nodeType===9?ci.body:ci.nodeName==="HTML"?ci.ownerDocument.body:ci).removeChild(s.stateNode)}catch(q){Ka(s,n,q)}else try{ci.removeChild(s.stateNode)}catch(q){Ka(s,n,q)}break;case 18:ci!==null&&(go?(t=ci,Vv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Od(t)):Vv(ci,s.stateNode));break;case 4:u=ci,D=go,ci=s.stateNode.containerInfo,go=!0,Qc(t,n,s),ci=u,go=D;break;case 0:case 11:case 14:case 15:Ii||ml(2,s,n),Ii||ml(4,s,n),Qc(t,n,s);break;case 1:Ii||(Cc(s,n),u=s.stateNode,typeof u.componentWillUnmount=="function"&&Kg(s,n,u)),Qc(t,n,s);break;case 21:Qc(t,n,s);break;case 22:Ii=(u=Ii)||s.memoizedState!==null,Qc(t,n,s),Ii=u;break;default:Qc(t,n,s)}}function rv(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Od(t)}catch(s){Ka(n,n.return,s)}}function pw(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Xg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Xg),n;default:throw Error(o(435,t.tag))}}function sh(t,n){var s=pw(t);n.forEach(function(u){var D=ww.bind(null,t,u);s.has(u)||(s.add(u),u.then(D,D))})}function Mo(t,n){var s=n.deletions;if(s!==null)for(var u=0;u<s.length;u++){var D=s[u],q=t,se=n,ve=se;e:for(;ve!==null;){switch(ve.tag){case 27:if(wl(ve.type)){ci=ve.stateNode,go=!1;break e}break;case 5:ci=ve.stateNode,go=!1;break e;case 3:case 4:ci=ve.stateNode.containerInfo,go=!0;break e}ve=ve.return}if(ci===null)throw Error(o(160));nv(q,se,D),ci=null,go=!1,q=D.alternate,q!==null&&(q.return=null),D.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)av(n,t),n=n.sibling}var mc=null;function av(t,n){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Mo(n,t),Lo(t),u&4&&(ml(3,t,t.return),hd(3,t),ml(5,t,t.return));break;case 1:Mo(n,t),Lo(t),u&512&&(Ii||s===null||Cc(s,s.return)),u&64&&Yc&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var D=mc;if(Mo(n,t),Lo(t),u&512&&(Ii||s===null||Cc(s,s.return)),u&4){var q=s!==null?s.memoizedState:null;if(u=t.memoizedState,s===null)if(u===null)if(t.stateNode===null){e:{u=t.type,s=t.memoizedProps,D=D.ownerDocument||D;t:switch(u){case"title":q=D.getElementsByTagName("title")[0],(!q||q[kn]||q[Sn]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=D.createElement(u),D.head.insertBefore(q,D.querySelector("head > title"))),Ds(q,u,s),q[Sn]=t,qn(q),u=q;break e;case"link":var se=Jv("link","href",D).get(u+(s.href||""));if(se){for(var ve=0;ve<se.length;ve++)if(q=se[ve],q.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&q.getAttribute("rel")===(s.rel==null?null:s.rel)&&q.getAttribute("title")===(s.title==null?null:s.title)&&q.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){se.splice(ve,1);break t}}q=D.createElement(u),Ds(q,u,s),D.head.appendChild(q);break;case"meta":if(se=Jv("meta","content",D).get(u+(s.content||""))){for(ve=0;ve<se.length;ve++)if(q=se[ve],q.getAttribute("content")===(s.content==null?null:""+s.content)&&q.getAttribute("name")===(s.name==null?null:s.name)&&q.getAttribute("property")===(s.property==null?null:s.property)&&q.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&q.getAttribute("charset")===(s.charSet==null?null:s.charSet)){se.splice(ve,1);break t}}q=D.createElement(u),Ds(q,u,s),D.head.appendChild(q);break;default:throw Error(o(468,u))}q[Sn]=t,qn(q),u=q}t.stateNode=u}else Xv(D,t.type,t.stateNode);else t.stateNode=Qv(D,u,t.memoizedProps);else q!==u?(q===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):q.count--,u===null?Xv(D,t.type,t.stateNode):Qv(D,u,t.memoizedProps)):u===null&&t.stateNode!==null&&nh(t,t.memoizedProps,s.memoizedProps)}break;case 27:Mo(n,t),Lo(t),u&512&&(Ii||s===null||Cc(s,s.return)),s!==null&&u&4&&nh(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Mo(n,t),Lo(t),u&512&&(Ii||s===null||Cc(s,s.return)),t.flags&32){D=t.stateNode;try{pi(D,"")}catch(gt){Ka(t,t.return,gt)}}u&4&&t.stateNode!=null&&(D=t.memoizedProps,nh(t,D,s!==null?s.memoizedProps:D)),u&1024&&(ih=!0);break;case 6:if(Mo(n,t),Lo(t),u&4){if(t.stateNode===null)throw Error(o(162));u=t.memoizedProps,s=t.stateNode;try{s.nodeValue=u}catch(gt){Ka(t,t.return,gt)}}break;case 3:if(Ip=null,D=mc,mc=Mp(n.containerInfo),Mo(n,t),mc=D,Lo(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{Od(n.containerInfo)}catch(gt){Ka(t,t.return,gt)}ih&&(ih=!1,iv(t));break;case 4:u=mc,mc=Mp(t.stateNode.containerInfo),Mo(n,t),Lo(t),mc=u;break;case 12:Mo(n,t),Lo(t);break;case 13:Mo(n,t),Lo(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ph=cr()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,sh(t,u)));break;case 22:D=t.memoizedState!==null;var Fe=s!==null&&s.memoizedState!==null,lt=Yc,It=Ii;if(Yc=lt||D,Ii=It||Fe,Mo(n,t),Ii=It,Yc=lt,Lo(t),u&8192)e:for(n=t.stateNode,n._visibility=D?n._visibility&-2:n._visibility|1,D&&(s===null||Fe||Yc||Ii||Vl(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){Fe=s=n;try{if(q=Fe.stateNode,D)se=q.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none";else{ve=Fe.stateNode;var Yt=Fe.memoizedProps.style,pt=Yt!=null&&Yt.hasOwnProperty("display")?Yt.display:null;ve.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(gt){Ka(Fe,Fe.return,gt)}}}else if(n.tag===6){if(s===null){Fe=n;try{Fe.stateNode.nodeValue=D?"":Fe.memoizedProps}catch(gt){Ka(Fe,Fe.return,gt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}u&4&&(u=t.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,sh(t,s))));break;case 19:Mo(n,t),Lo(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,sh(t,u)));break;case 30:break;case 21:break;default:Mo(n,t),Lo(t)}}function Lo(t){var n=t.flags;if(n&2){try{for(var s,u=t.return;u!==null;){if(Qg(u)){s=u;break}u=u.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var D=s.stateNode,q=rh(t);wp(t,q,D);break;case 5:var se=s.stateNode;s.flags&32&&(pi(se,""),s.flags&=-33);var ve=rh(t);wp(t,ve,se);break;case 3:case 4:var Fe=s.stateNode.containerInfo,lt=rh(t);ah(t,lt,Fe);break;default:throw Error(o(161))}}catch(It){Ka(t,t.return,It)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function iv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;iv(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function hl(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)ev(t,n.alternate,n),n=n.sibling}function Vl(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:ml(4,n,n.return),Vl(n);break;case 1:Cc(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Kg(n,n.return,s),Vl(n);break;case 27:xd(n.stateNode);case 26:case 5:Cc(n,n.return),Vl(n);break;case 22:n.memoizedState===null&&Vl(n);break;case 30:Vl(n);break;default:Vl(n)}t=t.sibling}}function fl(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var u=n.alternate,D=t,q=n,se=q.flags;switch(q.tag){case 0:case 11:case 15:fl(D,q,s),hd(4,q);break;case 1:if(fl(D,q,s),u=q,D=u.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(lt){Ka(u,u.return,lt)}if(u=q,D=u.updateQueue,D!==null){var ve=u.stateNode;try{var Fe=D.shared.hiddenCallbacks;if(Fe!==null)for(D.shared.hiddenCallbacks=null,D=0;D<Fe.length;D++)Vt(Fe[D],ve)}catch(lt){Ka(u,u.return,lt)}}s&&se&64&&Gg(q),fd(q,q.return);break;case 27:Jg(q);case 26:case 5:fl(D,q,s),s&&u===null&&se&4&&Yg(q),fd(q,q.return);break;case 12:fl(D,q,s);break;case 13:fl(D,q,s),s&&se&4&&rv(D,q);break;case 22:q.memoizedState===null&&fl(D,q,s),fd(q,q.return);break;case 30:break;default:fl(D,q,s)}n=n.sibling}}function oh(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Ko(s))}function ch(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ko(t))}function Tc(t,n,s,u){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)sv(t,n,s,u),n=n.sibling}function sv(t,n,s,u){var D=n.flags;switch(n.tag){case 0:case 11:case 15:Tc(t,n,s,u),D&2048&&hd(9,n);break;case 1:Tc(t,n,s,u);break;case 3:Tc(t,n,s,u),D&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ko(t)));break;case 12:if(D&2048){Tc(t,n,s,u),t=n.stateNode;try{var q=n.memoizedProps,se=q.id,ve=q.onPostCommit;typeof ve=="function"&&ve(se,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Fe){Ka(n,n.return,Fe)}}else Tc(t,n,s,u);break;case 13:Tc(t,n,s,u);break;case 23:break;case 22:q=n.stateNode,se=n.alternate,n.memoizedState!==null?q._visibility&2?Tc(t,n,s,u):gd(t,n):q._visibility&2?Tc(t,n,s,u):(q._visibility|=2,wu(t,n,s,u,(n.subtreeFlags&10256)!==0)),D&2048&&oh(se,n);break;case 24:Tc(t,n,s,u),D&2048&&ch(n.alternate,n);break;default:Tc(t,n,s,u)}}function wu(t,n,s,u,D){for(D=D&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var q=t,se=n,ve=s,Fe=u,lt=se.flags;switch(se.tag){case 0:case 11:case 15:wu(q,se,ve,Fe,D),hd(8,se);break;case 23:break;case 22:var It=se.stateNode;se.memoizedState!==null?It._visibility&2?wu(q,se,ve,Fe,D):gd(q,se):(It._visibility|=2,wu(q,se,ve,Fe,D)),D&&lt&2048&&oh(se.alternate,se);break;case 24:wu(q,se,ve,Fe,D),D&&lt&2048&&ch(se.alternate,se);break;default:wu(q,se,ve,Fe,D)}n=n.sibling}}function gd(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,u=n,D=u.flags;switch(u.tag){case 22:gd(s,u),D&2048&&oh(u.alternate,u);break;case 24:gd(s,u),D&2048&&ch(u.alternate,u);break;default:gd(s,u)}n=n.sibling}}var vd=8192;function Eu(t){if(t.subtreeFlags&vd)for(t=t.child;t!==null;)ov(t),t=t.sibling}function ov(t){switch(t.tag){case 26:Eu(t),t.flags&vd&&t.memoizedState!==null&&Qw(mc,t.memoizedState,t.memoizedProps);break;case 5:Eu(t);break;case 3:case 4:var n=mc;mc=Mp(t.stateNode.containerInfo),Eu(t),mc=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=vd,vd=16777216,Eu(t),vd=n):Eu(t));break;default:Eu(t)}}function cv(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function yd(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var u=n[s];vs=u,uv(u,t)}cv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lv(t),t=t.sibling}function lv(t){switch(t.tag){case 0:case 11:case 15:yd(t),t.flags&2048&&ml(9,t,t.return);break;case 3:yd(t);break;case 12:yd(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Ep(t)):yd(t);break;default:yd(t)}}function Ep(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var u=n[s];vs=u,uv(u,t)}cv(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:ml(8,n,n.return),Ep(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Ep(n));break;default:Ep(n)}t=t.sibling}}function uv(t,n){for(;vs!==null;){var s=vs;switch(s.tag){case 0:case 11:case 15:ml(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ko(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,vs=u;else e:for(s=t;vs!==null;){u=vs;var D=u.sibling,q=u.return;if(tv(u),u===s){vs=null;break e}if(D!==null){D.return=q,vs=D;break e}vs=q}}}var mw={getCacheForType:function(t){var n=si(oi),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},hw=typeof WeakMap=="function"?WeakMap:Map,za=0,Xa=null,da=null,ba=0,Ua=0,Io=null,gl=!1,Su=!1,lh=!1,Jc=0,Ti=0,vl=0,Zl=0,uh=0,Xo=0,xu=0,_d=null,vo=null,dh=!1,ph=0,Sp=1/0,xp=null,yl=null,Os=0,_l=null,Ru=null,ku=0,mh=0,hh=null,dv=null,bd=0,fh=null;function jo(){if((za&2)!==0&&ba!==0)return ba&-ba;if(z.T!==null){var t=Qo;return t!==0?t:Eh()}return tn()}function pv(){Xo===0&&(Xo=(ba&536870912)===0||xr?Nn():536870912);var t=Jo.current;return t!==null&&(t.flags|=32),Xo}function Bo(t,n,s){(t===Xa&&(Ua===2||Ua===9)||t.cancelPendingCommit!==null)&&(Cu(t,0),bl(t,ba,Xo,!1)),Kr(t,s),((za&2)===0||t!==Xa)&&(t===Xa&&((za&2)===0&&(Zl|=s),Ti===4&&bl(t,ba,Xo,!1)),Pc(t))}function mv(t,n,s){if((za&6)!==0)throw Error(o(327));var u=!s&&(n&124)===0&&(n&t.expiredLanes)===0||ta(t,n),D=u?vw(t,n):yh(t,n,!0),q=u;do{if(D===0){Su&&!u&&bl(t,n,0,!1);break}else{if(s=t.current.alternate,q&&!fw(s)){D=yh(t,n,!1),q=!1;continue}if(D===2){if(q=n,t.errorRecoveryDisabledLanes&q)var se=0;else se=t.pendingLanes&-536870913,se=se!==0?se:se&536870912?536870912:0;if(se!==0){n=se;e:{var ve=t;D=_d;var Fe=ve.current.memoizedState.isDehydrated;if(Fe&&(Cu(ve,se).flags|=256),se=yh(ve,se,!1),se!==2){if(lh&&!Fe){ve.errorRecoveryDisabledLanes|=q,Zl|=q,D=4;break e}q=vo,vo=D,q!==null&&(vo===null?vo=q:vo.push.apply(vo,q))}D=se}if(q=!1,D!==2)continue}}if(D===1){Cu(t,0),bl(t,n,0,!0);break}e:{switch(u=t,q=D,q){case 0:case 1:throw Error(o(345));case 4:if((n&4194048)!==n)break;case 6:bl(u,n,Xo,!gl);break e;case 2:vo=null;break;case 3:case 5:break;default:throw Error(o(329))}if((n&62914560)===n&&(D=ph+300-cr(),10<D)){if(bl(u,n,Xo,!gl),ga(u,0,!0)!==0)break e;u.timeoutHandle=Fv(hv.bind(null,u,s,vo,xp,dh,n,Xo,Zl,xu,gl,q,2,-0,0),D);break e}hv(u,s,vo,xp,dh,n,Xo,Zl,xu,gl,q,0,-0,0)}}break}while(!0);Pc(t)}function hv(t,n,s,u,D,q,se,ve,Fe,lt,It,Yt,pt,gt){if(t.timeoutHandle=-1,Yt=n.subtreeFlags,(Yt&8192||(Yt&16785408)===16785408)&&(Cd={stylesheets:null,count:0,unsuspend:Yw},ov(n),Yt=Jw(),Yt!==null)){t.cancelPendingCommit=Yt(wv.bind(null,t,n,q,s,u,D,se,ve,Fe,It,1,pt,gt)),bl(t,q,se,!lt);return}wv(t,n,q,s,u,D,se,ve,Fe)}function fw(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var D=s[u],q=D.getSnapshot;D=D.value;try{if(!ia(q(),D))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function bl(t,n,s,u){n&=~uh,n&=~Zl,t.suspendedLanes|=n,t.pingedLanes&=~n,u&&(t.warmLanes|=n),u=t.expirationTimes;for(var D=n;0<D;){var q=31-lr(D),se=1<<q;u[q]=-1,D&=~se}s!==0&&at(t,s,n)}function Rp(){return(za&6)===0?(wd(0),!1):!0}function gh(){if(da!==null){if(Ua===0)var t=da.return;else t=da,qs=rs=null,Ke(t),_u=null,dd=0,t=da;for(;t!==null;)Wg(t.alternate,t),t=t.return;da=null}}function Cu(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Dw(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),gh(),Xa=t,da=s=Ps(t.current,null),ba=n,Ua=0,Io=null,gl=!1,Su=ta(t,n),lh=!1,xu=Xo=uh=Zl=vl=Ti=0,vo=_d=null,dh=!1,(n&8)!==0&&(n|=n&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=n;0<u;){var D=31-lr(u),q=1<<D;n|=t[D],u&=~q}return Jc=n,uo(),s}function fv(t,n){Ct=null,z.H=pp,n===ie||n===Pe?(n=mn(),Ua=3):n===le?(n=mn(),Ua=4):Ua=n===Dg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Io=n,da===null&&(Ti=1,vp(t,ri(n,t.current)))}function gv(){var t=z.H;return z.H=pp,t===null?pp:t}function vv(){var t=z.A;return z.A=mw,t}function vh(){Ti=4,gl||(ba&4194048)!==ba&&Jo.current!==null||(Su=!0),(vl&134217727)===0&&(Zl&134217727)===0||Xa===null||bl(Xa,ba,Xo,!1)}function yh(t,n,s){var u=za;za|=2;var D=gv(),q=vv();(Xa!==t||ba!==n)&&(xp=null,Cu(t,n)),n=!1;var se=Ti;e:do try{if(Ua!==0&&da!==null){var ve=da,Fe=Io;switch(Ua){case 8:gh(),se=6;break e;case 3:case 2:case 9:case 6:Jo.current===null&&(n=!0);var lt=Ua;if(Ua=0,Io=null,Tu(t,ve,Fe,lt),s&&Su){se=0;break e}break;default:lt=Ua,Ua=0,Io=null,Tu(t,ve,Fe,lt)}}gw(),se=Ti;break}catch(It){fv(t,It)}while(!0);return n&&t.shellSuspendCounter++,qs=rs=null,za=u,z.H=D,z.A=q,da===null&&(Xa=null,ba=0,uo()),se}function gw(){for(;da!==null;)yv(da)}function vw(t,n){var s=za;za|=2;var u=gv(),D=vv();Xa!==t||ba!==n?(xp=null,Sp=cr()+500,Cu(t,n)):Su=ta(t,n);e:do try{if(Ua!==0&&da!==null){n=da;var q=Io;t:switch(Ua){case 1:Ua=0,Io=null,Tu(t,n,q,1);break;case 2:case 9:if(ze(q)){Ua=0,Io=null,_v(n);break}n=function(){Ua!==2&&Ua!==9||Xa!==t||(Ua=7),Pc(t)},q.then(n,n);break e;case 3:Ua=7;break e;case 4:Ua=5;break e;case 7:ze(q)?(Ua=0,Io=null,_v(n)):(Ua=0,Io=null,Tu(t,n,q,7));break;case 5:var se=null;switch(da.tag){case 26:se=da.memoizedState;case 5:case 27:var ve=da;if(!se||e0(se)){Ua=0,Io=null;var Fe=ve.sibling;if(Fe!==null)da=Fe;else{var lt=ve.return;lt!==null?(da=lt,kp(lt)):da=null}break t}}Ua=0,Io=null,Tu(t,n,q,5);break;case 6:Ua=0,Io=null,Tu(t,n,q,6);break;case 8:gh(),Ti=6;break e;default:throw Error(o(462))}}yw();break}catch(It){fv(t,It)}while(!0);return qs=rs=null,z.H=u,z.A=D,za=s,da!==null?0:(Xa=null,ba=0,uo(),Ti)}function yw(){for(;da!==null&&!Nr();)yv(da)}function yv(t){var n=Zg(t.alternate,t,Jc);t.memoizedProps=t.pendingProps,n===null?kp(t):da=n}function _v(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=zg(s,n,n.pendingProps,n.type,void 0,ba);break;case 11:n=zg(s,n,n.pendingProps,n.type.render,n.ref,ba);break;case 5:Ke(n);default:Wg(s,n),n=da=lc(n,Jc),n=Zg(s,n,Jc)}t.memoizedProps=t.pendingProps,n===null?kp(t):da=n}function Tu(t,n,s,u){qs=rs=null,Ke(n),_u=null,dd=0;var D=n.return;try{if(ow(t,D,n,s,ba)){Ti=1,vp(t,ri(s,t.current)),da=null;return}}catch(q){if(D!==null)throw da=D,q;Ti=1,vp(t,ri(s,t.current)),da=null;return}n.flags&32768?(xr||u===1?t=!0:Su||(ba&536870912)!==0?t=!1:(gl=t=!0,(u===2||u===9||u===3||u===6)&&(u=Jo.current,u!==null&&u.tag===13&&(u.flags|=16384))),bv(n,t)):kp(n)}function kp(t){var n=t;do{if((n.flags&32768)!==0){bv(n,gl);return}t=n.return;var s=lw(n.alternate,n,Jc);if(s!==null){da=s;return}if(n=n.sibling,n!==null){da=n;return}da=n=t}while(n!==null);Ti===0&&(Ti=5)}function bv(t,n){do{var s=uw(t.alternate,t);if(s!==null){s.flags&=32767,da=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){da=t;return}da=t=s}while(t!==null);Ti=6,da=null}function wv(t,n,s,u,D,q,se,ve,Fe){t.cancelPendingCommit=null;do Cp();while(Os!==0);if((za&6)!==0)throw Error(o(327));if(n!==null){if(n===t.current)throw Error(o(177));if(q=n.lanes|n.childLanes,q|=Gi,hr(t,s,q,se,ve,Fe),t===Xa&&(da=Xa=null,ba=0),Ru=n,_l=t,ku=s,mh=q,hh=D,dv=u,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Ew(je,function(){return kv(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||u){u=z.T,z.T=null,D=W.p,W.p=2,se=za,za|=4;try{dw(t,n,s)}finally{za=se,W.p=D,z.T=u}}Os=1,Ev(),Sv(),xv()}}function Ev(){if(Os===1){Os=0;var t=_l,n=Ru,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=z.T,z.T=null;var u=W.p;W.p=2;var D=za;za|=4;try{av(n,t);var q=Nh,se=Ys(t.containerInfo),ve=q.focusedElem,Fe=q.selectionRange;if(se!==ve&&ve&&ve.ownerDocument&&es(ve.ownerDocument.documentElement,ve)){if(Fe!==null&&Qs(ve)){var lt=Fe.start,It=Fe.end;if(It===void 0&&(It=lt),"selectionStart"in ve)ve.selectionStart=lt,ve.selectionEnd=Math.min(It,ve.value.length);else{var Yt=ve.ownerDocument||document,pt=Yt&&Yt.defaultView||window;if(pt.getSelection){var gt=pt.getSelection(),Ir=ve.textContent.length,Tr=Math.min(Fe.start,Ir),$a=Fe.end===void 0?Tr:Math.min(Fe.end,Ir);!gt.extend&&Tr>$a&&(se=$a,$a=Tr,Tr=se);var it=ks(ve,Tr),Ye=ks(ve,$a);if(it&&Ye&&(gt.rangeCount!==1||gt.anchorNode!==it.node||gt.anchorOffset!==it.offset||gt.focusNode!==Ye.node||gt.focusOffset!==Ye.offset)){var ot=Yt.createRange();ot.setStart(it.node,it.offset),gt.removeAllRanges(),Tr>$a?(gt.addRange(ot),gt.extend(Ye.node,Ye.offset)):(ot.setEnd(Ye.node,Ye.offset),gt.addRange(ot))}}}}for(Yt=[],gt=ve;gt=gt.parentNode;)gt.nodeType===1&&Yt.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof ve.focus=="function"&&ve.focus(),ve=0;ve<Yt.length;ve++){var Ut=Yt[ve];Ut.element.scrollLeft=Ut.left,Ut.element.scrollTop=Ut.top}}zp=!!Ph,Nh=Ph=null}finally{za=D,W.p=u,z.T=s}}t.current=n,Os=2}}function Sv(){if(Os===2){Os=0;var t=_l,n=Ru,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=z.T,z.T=null;var u=W.p;W.p=2;var D=za;za|=4;try{ev(t,n.alternate,n)}finally{za=D,W.p=u,z.T=s}}Os=3}}function xv(){if(Os===4||Os===3){Os=0,jn();var t=_l,n=Ru,s=ku,u=dv;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Os=5:(Os=0,Ru=_l=null,Rv(t,t.pendingLanes));var D=t.pendingLanes;if(D===0&&(yl=null),Tt(s),n=n.stateNode,Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(pn,n,void 0,(n.current.flags&128)===128)}catch{}if(u!==null){n=z.T,D=W.p,W.p=2,z.T=null;try{for(var q=t.onRecoverableError,se=0;se<u.length;se++){var ve=u[se];q(ve.value,{componentStack:ve.stack})}}finally{z.T=n,W.p=D}}(ku&3)!==0&&Cp(),Pc(t),D=t.pendingLanes,(s&4194090)!==0&&(D&42)!==0?t===fh?bd++:(bd=0,fh=t):bd=0,wd(0)}}function Rv(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Ko(n)))}function Cp(t){return Ev(),Sv(),xv(),kv()}function kv(){if(Os!==5)return!1;var t=_l,n=mh;mh=0;var s=Tt(ku),u=z.T,D=W.p;try{W.p=32>s?32:s,z.T=null,s=hh,hh=null;var q=_l,se=ku;if(Os=0,Ru=_l=null,ku=0,(za&6)!==0)throw Error(o(331));var ve=za;if(za|=4,lv(q.current),sv(q,q.current,se,s),za=ve,wd(0,!1),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(pn,q)}catch{}return!0}finally{W.p=D,z.T=u,Rv(t,n)}}function Cv(t,n,s){n=ri(s,n),n=Wm(t.stateNode,n,2),t=Nt(t,n,2),t!==null&&(Kr(t,2),Pc(t))}function Ka(t,n,s){if(t.tag===3)Cv(t,t,s);else for(;n!==null;){if(n.tag===3){Cv(n,t,s);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(yl===null||!yl.has(u))){t=ri(s,t),s=Ag(2),u=Nt(n,s,2),u!==null&&(Og(s,u,n,t),Kr(u,2),Pc(u));break}}n=n.return}}function _h(t,n,s){var u=t.pingCache;if(u===null){u=t.pingCache=new hw;var D=new Set;u.set(n,D)}else D=u.get(n),D===void 0&&(D=new Set,u.set(n,D));D.has(s)||(lh=!0,D.add(s),t=_w.bind(null,t,n,s),n.then(t,t))}function _w(t,n,s){var u=t.pingCache;u!==null&&u.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Xa===t&&(ba&s)===s&&(Ti===4||Ti===3&&(ba&62914560)===ba&&300>cr()-ph?(za&2)===0&&Cu(t,0):uh|=s,xu===ba&&(xu=0)),Pc(t)}function Tv(t,n){n===0&&(n=Ha()),t=Hs(t,n),t!==null&&(Kr(t,n),Pc(t))}function bw(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Tv(t,s)}function ww(t,n){var s=0;switch(t.tag){case 13:var u=t.stateNode,D=t.memoizedState;D!==null&&(s=D.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(n),Tv(t,s)}function Ew(t,n){return Ht(t,n)}var Tp=null,Pu=null,bh=!1,Pp=!1,wh=!1,$l=0;function Pc(t){t!==Pu&&t.next===null&&(Pu===null?Tp=Pu=t:Pu=Pu.next=t),Pp=!0,bh||(bh=!0,xw())}function wd(t,n){if(!wh&&Pp){wh=!0;do for(var s=!1,u=Tp;u!==null;){if(t!==0){var D=u.pendingLanes;if(D===0)var q=0;else{var se=u.suspendedLanes,ve=u.pingedLanes;q=(1<<31-lr(42|t)+1)-1,q&=D&~(se&~ve),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(s=!0,Ov(u,q))}else q=ba,q=ga(u,u===Xa?q:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(q&3)===0||ta(u,q)||(s=!0,Ov(u,q));u=u.next}while(s);wh=!1}}function Sw(){Pv()}function Pv(){Pp=bh=!1;var t=0;$l!==0&&(Ow()&&(t=$l),$l=0);for(var n=cr(),s=null,u=Tp;u!==null;){var D=u.next,q=Nv(u,n);q===0?(u.next=null,s===null?Tp=D:s.next=D,D===null&&(Pu=s)):(s=u,(t!==0||(q&3)!==0)&&(Pp=!0)),u=D}wd(t)}function Nv(t,n){for(var s=t.suspendedLanes,u=t.pingedLanes,D=t.expirationTimes,q=t.pendingLanes&-62914561;0<q;){var se=31-lr(q),ve=1<<se,Fe=D[se];Fe===-1?((ve&s)===0||(ve&u)!==0)&&(D[se]=oa(ve,n)):Fe<=n&&(t.expiredLanes|=ve),q&=~ve}if(n=Xa,s=ba,s=ga(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,s===0||t===n&&(Ua===2||Ua===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&or(u),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||ta(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(u!==null&&or(u),Tt(s)){case 2:case 8:s=Le;break;case 32:s=je;break;case 268435456:s=Qt;break;default:s=je}return u=Av.bind(null,t),s=Ht(s,u),t.callbackPriority=n,t.callbackNode=s,n}return u!==null&&u!==null&&or(u),t.callbackPriority=2,t.callbackNode=null,2}function Av(t,n){if(Os!==0&&Os!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Cp()&&t.callbackNode!==s)return null;var u=ba;return u=ga(t,t===Xa?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(mv(t,u,n),Nv(t,cr()),t.callbackNode!=null&&t.callbackNode===s?Av.bind(null,t):null)}function Ov(t,n){if(Cp())return null;mv(t,n,!0)}function xw(){Mw(function(){(za&6)!==0?Ht(Un,Sw):Pv()})}function Eh(){return $l===0&&($l=Nn()),$l}function Dv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ws(""+t)}function Mv(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function Rw(t,n,s,u,D){if(n==="submit"&&s&&s.stateNode===D){var q=Dv((D[Rn]||null).action),se=u.submitter;se&&(n=(n=se[Rn]||null)?Dv(n.formAction):se.getAttribute("formAction"),n!==null&&(q=n,se=null));var ve=new Ws("action","action",null,u,D);t.push({event:ve,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($l!==0){var Fe=se?Mv(D,se):new FormData(D);gu(s,{pending:!0,data:Fe,method:D.method,action:q},null,Fe)}}else typeof q=="function"&&(ve.preventDefault(),Fe=se?Mv(D,se):new FormData(D),gu(s,{pending:!0,data:Fe,method:D.method,action:q},q,Fe))},currentTarget:D}]})}}for(var Sh=0;Sh<ki.length;Sh++){var xh=ki[Sh],kw=xh.toLowerCase(),Cw=xh[0].toUpperCase()+xh.slice(1);fi(kw,"on"+Cw)}fi(qo,"onAnimationEnd"),fi(Wi,"onAnimationIteration"),fi(Ts,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(xc,"onTransitionRun"),fi(Po,"onTransitionStart"),fi(Vo,"onTransitionCancel"),fi(lo,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ed));function Lv(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],D=u.event;u=u.listeners;e:{var q=void 0;if(n)for(var se=u.length-1;0<=se;se--){var ve=u[se],Fe=ve.instance,lt=ve.currentTarget;if(ve=ve.listener,Fe!==q&&D.isPropagationStopped())break e;q=ve,D.currentTarget=lt;try{q(D)}catch(It){gp(It)}D.currentTarget=null,q=Fe}else for(se=0;se<u.length;se++){if(ve=u[se],Fe=ve.instance,lt=ve.currentTarget,ve=ve.listener,Fe!==q&&D.isPropagationStopped())break e;q=ve,D.currentTarget=lt;try{q(D)}catch(It){gp(It)}D.currentTarget=null,q=Fe}}}}function pa(t,n){var s=n[ur];s===void 0&&(s=n[ur]=new Set);var u=t+"__bubble";s.has(u)||(Iv(n,t,2,!1),s.add(u))}function Rh(t,n,s){var u=0;n&&(u|=4),Iv(s,t,u,n)}var Np="_reactListening"+Math.random().toString(36).slice(2);function kh(t){if(!t[Np]){t[Np]=!0,ma.forEach(function(s){s!=="selectionchange"&&(Tw.has(s)||Rh(s,!1,t),Rh(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Np]||(n[Np]=!0,Rh("selectionchange",!1,n))}}function Iv(t,n,s,u){switch(s0(n)){case 2:var D=tE;break;case 8:D=nE;break;default:D=Uh}s=D.bind(null,n,s,t),D=void 0,!Bs||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(D=!0),u?D!==void 0?t.addEventListener(n,s,{capture:!0,passive:D}):t.addEventListener(n,s,!0):D!==void 0?t.addEventListener(n,s,{passive:D}):t.addEventListener(n,s,!1)}function Ch(t,n,s,u,D){var q=u;if((n&1)===0&&(n&2)===0&&u!==null)e:for(;;){if(u===null)return;var se=u.tag;if(se===3||se===4){var ve=u.stateNode.containerInfo;if(ve===D)break;if(se===4)for(se=u.return;se!==null;){var Fe=se.tag;if((Fe===3||Fe===4)&&se.stateNode.containerInfo===D)return;se=se.return}for(;ve!==null;){if(se=Ar(ve),se===null)return;if(Fe=se.tag,Fe===5||Fe===6||Fe===26||Fe===27){u=q=se;continue e}ve=ve.parentNode}}u=u.return}xi(function(){var lt=q,It=ls(s),Yt=[];e:{var pt=No.get(t);if(pt!==void 0){var gt=Ws,Ir=t;switch(t){case"keypress":if(Ma(s)===0)break e;case"keydown":case"keyup":gt=Gs;break;case"focusin":Ir="focus",gt=on;break;case"focusout":Ir="blur",gt=on;break;case"beforeblur":case"afterblur":gt=on;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=Ss;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=Co;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Bc;break;case qo:case Wi:case Ts:gt=Pt;break;case lo:gt=Ri;break;case"scroll":case"scrollend":gt=nc;break;case"wheel":gt=ac;break;case"copy":case"cut":case"paste":gt=aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=Ks;break;case"toggle":case"beforetoggle":gt=ao}var Tr=(n&4)!==0,$a=!Tr&&(t==="scroll"||t==="scrollend"),it=Tr?pt!==null?pt+"Capture":null:pt;Tr=[];for(var Ye=lt,ot;Ye!==null;){var Ut=Ye;if(ot=Ut.stateNode,Ut=Ut.tag,Ut!==5&&Ut!==26&&Ut!==27||ot===null||it===null||(Ut=na(Ye,it),Ut!=null&&Tr.push(Sd(Ye,Ut,ot))),$a)break;Ye=Ye.return}0<Tr.length&&(pt=new gt(pt,Ir,null,s,It),Yt.push({event:pt,listeners:Tr}))}}if((n&7)===0){e:{if(pt=t==="mouseover"||t==="pointerover",gt=t==="mouseout"||t==="pointerout",pt&&s!==js&&(Ir=s.relatedTarget||s.fromElement)&&(Ar(Ir)||Ir[Zn]))break e;if((gt||pt)&&(pt=It.window===It?It:(pt=It.ownerDocument)?pt.defaultView||pt.parentWindow:window,gt?(Ir=s.relatedTarget||s.toElement,gt=lt,Ir=Ir?Ar(Ir):null,Ir!==null&&($a=N(Ir),Tr=Ir.tag,Ir!==$a||Tr!==5&&Tr!==27&&Tr!==6)&&(Ir=null)):(gt=null,Ir=lt),gt!==Ir)){if(Tr=Ss,Ut="onMouseLeave",it="onMouseEnter",Ye="mouse",(t==="pointerout"||t==="pointerover")&&(Tr=Ks,Ut="onPointerLeave",it="onPointerEnter",Ye="pointer"),$a=gt==null?pt:Dr(gt),ot=Ir==null?pt:Dr(Ir),pt=new Tr(Ut,Ye+"leave",gt,s,It),pt.target=$a,pt.relatedTarget=ot,Ut=null,Ar(It)===lt&&(Tr=new Tr(it,Ye+"enter",Ir,s,It),Tr.target=ot,Tr.relatedTarget=$a,Ut=Tr),$a=Ut,gt&&Ir)t:{for(Tr=gt,it=Ir,Ye=0,ot=Tr;ot;ot=Nu(ot))Ye++;for(ot=0,Ut=it;Ut;Ut=Nu(Ut))ot++;for(;0<Ye-ot;)Tr=Nu(Tr),Ye--;for(;0<ot-Ye;)it=Nu(it),ot--;for(;Ye--;){if(Tr===it||it!==null&&Tr===it.alternate)break t;Tr=Nu(Tr),it=Nu(it)}Tr=null}else Tr=null;gt!==null&&jv(Yt,pt,gt,Tr,!1),Ir!==null&&$a!==null&&jv(Yt,$a,Ir,Tr,!0)}}e:{if(pt=lt?Dr(lt):window,gt=pt.nodeName&&pt.nodeName.toLowerCase(),gt==="select"||gt==="input"&&pt.type==="file")var rr=oe;else if(Dn(pt))if(Oe)rr=Qr;else{rr=Hn;var la=qt}else gt=pt.nodeName,!gt||gt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?lt&&mi(lt.elementType)&&(rr=oe):rr=vn;if(rr&&(rr=rr(t,lt))){Ho(Yt,rr,s,It);break e}la&&la(t,pt,lt),t==="focusout"&&lt&&pt.type==="number"&&lt.memoizedProps.value!=null&&Ba(pt,"number",pt.value)}switch(la=lt?Dr(lt):window,t){case"focusin":(Dn(la)||la.contentEditable==="true")&&(Li=la,Zi=lt,co=null);break;case"focusout":co=Zi=Li=null;break;case"mousedown":oc=!0;break;case"contextmenu":case"mouseup":case"dragend":oc=!1,Fo(Yt,s,It);break;case"selectionchange":if(oo)break;case"keydown":case"keyup":Fo(Yt,s,It)}var gr;if(xa)e:{switch(t){case"compositionstart":var Pr="onCompositionStart";break e;case"compositionend":Pr="onCompositionEnd";break e;case"compositionupdate":Pr="onCompositionUpdate";break e}Pr=void 0}else so?er(t,s)&&(Pr="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Pr="onCompositionStart");Pr&&(Uc&&s.locale!=="ko"&&(so||Pr!=="onCompositionStart"?Pr==="onCompositionEnd"&&so&&(gr=pr()):(Oi=It,Fi="value"in Oi?Oi.value:Oi.textContent,so=!0)),la=Ap(lt,Pr),0<la.length&&(Pr=new ii(Pr,t,null,s,It),Yt.push({event:Pr,listeners:la}),gr?Pr.data=gr:(gr=sc(s),gr!==null&&(Pr.data=gr)))),(gr=zc?hi(t,s):he(t,s))&&(Pr=Ap(lt,"onBeforeInput"),0<Pr.length&&(la=new ii("onBeforeInput","beforeinput",null,s,It),Yt.push({event:la,listeners:Pr}),la.data=gr)),Rw(Yt,t,lt,s,It)}Lv(Yt,n)})}function Sd(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Ap(t,n){for(var s=n+"Capture",u=[];t!==null;){var D=t,q=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||q===null||(D=na(t,s),D!=null&&u.unshift(Sd(t,D,q)),D=na(t,n),D!=null&&u.push(Sd(t,D,q))),t.tag===3)return u;t=t.return}return[]}function Nu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function jv(t,n,s,u,D){for(var q=n._reactName,se=[];s!==null&&s!==u;){var ve=s,Fe=ve.alternate,lt=ve.stateNode;if(ve=ve.tag,Fe!==null&&Fe===u)break;ve!==5&&ve!==26&&ve!==27||lt===null||(Fe=lt,D?(lt=na(s,q),lt!=null&&se.unshift(Sd(s,lt,Fe))):D||(lt=na(s,q),lt!=null&&se.push(Sd(s,lt,Fe)))),s=s.return}se.length!==0&&t.push({event:n,listeners:se})}var Pw=/\r\n?/g,Nw=/\u0000|\uFFFD/g;function Bv(t){return(typeof t=="string"?t:""+t).replace(Pw,`
`).replace(Nw,"")}function zv(t,n){return n=Bv(n),Bv(t)===n}function Op(){}function Za(t,n,s,u,D,q){switch(s){case"children":typeof u=="string"?n==="body"||n==="textarea"&&u===""||pi(t,u):(typeof u=="number"||typeof u=="bigint")&&n!=="body"&&pi(t,""+u);break;case"className":Qi(t,"class",u);break;case"tabIndex":Qi(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Qi(t,s,u);break;case"style":cs(t,u,q);break;case"data":if(n!=="object"){Qi(t,"data",u);break}case"src":case"href":if(u===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(s);break}u=ws(""+u),t.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(s==="formAction"?(n!=="input"&&Za(t,n,"name",D.name,D,null),Za(t,n,"formEncType",D.formEncType,D,null),Za(t,n,"formMethod",D.formMethod,D,null),Za(t,n,"formTarget",D.formTarget,D,null)):(Za(t,n,"encType",D.encType,D,null),Za(t,n,"method",D.method,D,null),Za(t,n,"target",D.target,D,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(s);break}u=ws(""+u),t.setAttribute(s,u);break;case"onClick":u!=null&&(t.onclick=Op);break;case"onScroll":u!=null&&pa("scroll",t);break;case"onScrollEnd":u!=null&&pa("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(s=u.__html,s!=null){if(D.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}s=ws(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,""+u):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":u===!0?t.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,u):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(s,u):t.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(s):t.setAttribute(s,u);break;case"popover":pa("beforetoggle",t),pa("toggle",t),Ei(t,"popover",u);break;case"xlinkActuate":Zr(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Zr(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Zr(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Zr(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Zr(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Zr(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Zr(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Zr(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Zr(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ei(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=no.get(s)||s,Ei(t,s,u))}}function Th(t,n,s,u,D,q){switch(s){case"style":cs(t,u,q);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(s=u.__html,s!=null){if(D.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"children":typeof u=="string"?pi(t,u):(typeof u=="number"||typeof u=="bigint")&&pi(t,""+u);break;case"onScroll":u!=null&&pa("scroll",t);break;case"onScrollEnd":u!=null&&pa("scrollend",t);break;case"onClick":u!=null&&(t.onclick=Op);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ca.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(D=s.endsWith("Capture"),n=s.slice(2,D?s.length-7:void 0),q=t[Rn]||null,q=q!=null?q[s]:null,typeof q=="function"&&t.removeEventListener(n,q,D),typeof u=="function")){typeof q!="function"&&q!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,u,D);break e}s in t?t[s]=u:u===!0?t.setAttribute(s,""):Ei(t,s,u)}}}function Ds(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pa("error",t),pa("load",t);var u=!1,D=!1,q;for(q in s)if(s.hasOwnProperty(q)){var se=s[q];if(se!=null)switch(q){case"src":u=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:Za(t,n,q,se,s,null)}}D&&Za(t,n,"srcSet",s.srcSet,s,null),u&&Za(t,n,"src",s.src,s,null);return;case"input":pa("invalid",t);var ve=q=se=D=null,Fe=null,lt=null;for(u in s)if(s.hasOwnProperty(u)){var It=s[u];if(It!=null)switch(u){case"name":D=It;break;case"type":se=It;break;case"checked":Fe=It;break;case"defaultChecked":lt=It;break;case"value":q=It;break;case"defaultValue":ve=It;break;case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(o(137,n));break;default:Za(t,n,u,It,s,null)}}ja(t,q,ve,Fe,lt,se,D,!1),yr(t);return;case"select":pa("invalid",t),u=se=q=null;for(D in s)if(s.hasOwnProperty(D)&&(ve=s[D],ve!=null))switch(D){case"value":q=ve;break;case"defaultValue":se=ve;break;case"multiple":u=ve;default:Za(t,n,D,ve,s,null)}n=q,s=se,t.multiple=!!u,n!=null?Wa(t,!!u,n,!1):s!=null&&Wa(t,!!u,s,!0);return;case"textarea":pa("invalid",t),q=D=u=null;for(se in s)if(s.hasOwnProperty(se)&&(ve=s[se],ve!=null))switch(se){case"value":u=ve;break;case"defaultValue":D=ve;break;case"children":q=ve;break;case"dangerouslySetInnerHTML":if(ve!=null)throw Error(o(91));break;default:Za(t,n,se,ve,s,null)}Qa(t,u,D,q),yr(t);return;case"option":for(Fe in s)if(s.hasOwnProperty(Fe)&&(u=s[Fe],u!=null))switch(Fe){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Za(t,n,Fe,u,s,null)}return;case"dialog":pa("beforetoggle",t),pa("toggle",t),pa("cancel",t),pa("close",t);break;case"iframe":case"object":pa("load",t);break;case"video":case"audio":for(u=0;u<Ed.length;u++)pa(Ed[u],t);break;case"image":pa("error",t),pa("load",t);break;case"details":pa("toggle",t);break;case"embed":case"source":case"link":pa("error",t),pa("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in s)if(s.hasOwnProperty(lt)&&(u=s[lt],u!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:Za(t,n,lt,u,s,null)}return;default:if(mi(n)){for(It in s)s.hasOwnProperty(It)&&(u=s[It],u!==void 0&&Th(t,n,It,u,s,void 0));return}}for(ve in s)s.hasOwnProperty(ve)&&(u=s[ve],u!=null&&Za(t,n,ve,u,s,null))}function Aw(t,n,s,u){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,q=null,se=null,ve=null,Fe=null,lt=null,It=null;for(gt in s){var Yt=s[gt];if(s.hasOwnProperty(gt)&&Yt!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":Fe=Yt;default:u.hasOwnProperty(gt)||Za(t,n,gt,null,u,Yt)}}for(var pt in u){var gt=u[pt];if(Yt=s[pt],u.hasOwnProperty(pt)&&(gt!=null||Yt!=null))switch(pt){case"type":q=gt;break;case"name":D=gt;break;case"checked":lt=gt;break;case"defaultChecked":It=gt;break;case"value":se=gt;break;case"defaultValue":ve=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(o(137,n));break;default:gt!==Yt&&Za(t,n,pt,gt,u,Yt)}}ya(t,se,ve,Fe,lt,It,q,D);return;case"select":gt=se=ve=pt=null;for(q in s)if(Fe=s[q],s.hasOwnProperty(q)&&Fe!=null)switch(q){case"value":break;case"multiple":gt=Fe;default:u.hasOwnProperty(q)||Za(t,n,q,null,u,Fe)}for(D in u)if(q=u[D],Fe=s[D],u.hasOwnProperty(D)&&(q!=null||Fe!=null))switch(D){case"value":pt=q;break;case"defaultValue":ve=q;break;case"multiple":se=q;default:q!==Fe&&Za(t,n,D,q,u,Fe)}n=ve,s=se,u=gt,pt!=null?Wa(t,!!s,pt,!1):!!u!=!!s&&(n!=null?Wa(t,!!s,n,!0):Wa(t,!!s,s?[]:"",!1));return;case"textarea":gt=pt=null;for(ve in s)if(D=s[ve],s.hasOwnProperty(ve)&&D!=null&&!u.hasOwnProperty(ve))switch(ve){case"value":break;case"children":break;default:Za(t,n,ve,null,u,D)}for(se in u)if(D=u[se],q=s[se],u.hasOwnProperty(se)&&(D!=null||q!=null))switch(se){case"value":pt=D;break;case"defaultValue":gt=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(o(91));break;default:D!==q&&Za(t,n,se,D,u,q)}Sa(t,pt,gt);return;case"option":for(var Ir in s)if(pt=s[Ir],s.hasOwnProperty(Ir)&&pt!=null&&!u.hasOwnProperty(Ir))switch(Ir){case"selected":t.selected=!1;break;default:Za(t,n,Ir,null,u,pt)}for(Fe in u)if(pt=u[Fe],gt=s[Fe],u.hasOwnProperty(Fe)&&pt!==gt&&(pt!=null||gt!=null))switch(Fe){case"selected":t.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:Za(t,n,Fe,pt,u,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tr in s)pt=s[Tr],s.hasOwnProperty(Tr)&&pt!=null&&!u.hasOwnProperty(Tr)&&Za(t,n,Tr,null,u,pt);for(lt in u)if(pt=u[lt],gt=s[lt],u.hasOwnProperty(lt)&&pt!==gt&&(pt!=null||gt!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(o(137,n));break;default:Za(t,n,lt,pt,u,gt)}return;default:if(mi(n)){for(var $a in s)pt=s[$a],s.hasOwnProperty($a)&&pt!==void 0&&!u.hasOwnProperty($a)&&Th(t,n,$a,void 0,u,pt);for(It in u)pt=u[It],gt=s[It],!u.hasOwnProperty(It)||pt===gt||pt===void 0&&gt===void 0||Th(t,n,It,pt,u,gt);return}}for(var it in s)pt=s[it],s.hasOwnProperty(it)&&pt!=null&&!u.hasOwnProperty(it)&&Za(t,n,it,null,u,pt);for(Yt in u)pt=u[Yt],gt=s[Yt],!u.hasOwnProperty(Yt)||pt===gt||pt==null&&gt==null||Za(t,n,Yt,pt,u,gt)}var Ph=null,Nh=null;function Dp(t){return t.nodeType===9?t:t.ownerDocument}function Uv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hv(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Ah(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Oh=null;function Ow(){var t=window.event;return t&&t.type==="popstate"?t===Oh?!1:(Oh=t,!0):(Oh=null,!1)}var Fv=typeof setTimeout=="function"?setTimeout:void 0,Dw=typeof clearTimeout=="function"?clearTimeout:void 0,qv=typeof Promise=="function"?Promise:void 0,Mw=typeof queueMicrotask=="function"?queueMicrotask:typeof qv<"u"?function(t){return qv.resolve(null).then(t).catch(Lw)}:Fv;function Lw(t){setTimeout(function(){throw t})}function wl(t){return t==="head"}function Vv(t,n){var s=n,u=0,D=0;do{var q=s.nextSibling;if(t.removeChild(s),q&&q.nodeType===8)if(s=q.data,s==="/$"){if(0<u&&8>u){s=u;var se=t.ownerDocument;if(s&1&&xd(se.documentElement),s&2&&xd(se.body),s&4)for(s=se.head,xd(s),se=s.firstChild;se;){var ve=se.nextSibling,Fe=se.nodeName;se[kn]||Fe==="SCRIPT"||Fe==="STYLE"||Fe==="LINK"&&se.rel.toLowerCase()==="stylesheet"||s.removeChild(se),se=ve}}if(D===0){t.removeChild(q),Od(n);return}D--}else s==="$"||s==="$?"||s==="$!"?D++:u=s.charCodeAt(0)-48;else u=0;s=q}while(s);Od(n)}function Dh(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Dh(s),bn(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Iw(t,n,s,u){for(;t.nodeType===1;){var D=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[kn])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(q=t.getAttribute("rel"),q==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(q!==D.rel||t.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||t.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||t.getAttribute("title")!==(D.title==null?null:D.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(q=t.getAttribute("src"),(q!==(D.src==null?null:D.src)||t.getAttribute("type")!==(D.type==null?null:D.type)||t.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&q&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var q=D.name==null?null:""+D.name;if(D.type==="hidden"&&t.getAttribute("name")===q)return t}else return t;if(t=hc(t.nextSibling),t===null)break}return null}function jw(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=hc(t.nextSibling),t===null))return null;return t}function Mh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Bw(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var u=function(){n(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function hc(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Lh=null;function Zv(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function $v(t,n,s){switch(n=Dp(s),t){case"html":if(t=n.documentElement,!t)throw Error(o(452));return t;case"head":if(t=n.head,!t)throw Error(o(453));return t;case"body":if(t=n.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function xd(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);bn(t)}var ec=new Map,Wv=new Set;function Mp(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xc=W.d;W.d={f:zw,r:Uw,D:Hw,C:Fw,L:qw,m:Vw,X:$w,S:Zw,M:Ww};function zw(){var t=Xc.f(),n=Rp();return t||n}function Uw(t){var n=Sr(t);n!==null&&n.tag===5&&n.type==="form"?od(n):Xc.r(t)}var Au=typeof document>"u"?null:document;function Gv(t,n,s){var u=Au;if(u&&typeof n=="string"&&n){var D=ua(n);D='link[rel="'+t+'"][href="'+D+'"]',typeof s=="string"&&(D+='[crossorigin="'+s+'"]'),Wv.has(D)||(Wv.add(D),t={rel:t,crossOrigin:s,href:n},u.querySelector(D)===null&&(n=u.createElement("link"),Ds(n,"link",t),qn(n),u.head.appendChild(n)))}}function Hw(t){Xc.D(t),Gv("dns-prefetch",t,null)}function Fw(t,n){Xc.C(t,n),Gv("preconnect",t,n)}function qw(t,n,s){Xc.L(t,n,s);var u=Au;if(u&&t&&n){var D='link[rel="preload"][as="'+ua(n)+'"]';n==="image"&&s&&s.imageSrcSet?(D+='[imagesrcset="'+ua(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(D+='[imagesizes="'+ua(s.imageSizes)+'"]')):D+='[href="'+ua(t)+'"]';var q=D;switch(n){case"style":q=Ou(t);break;case"script":q=Du(t)}ec.has(q)||(t=E({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),ec.set(q,t),u.querySelector(D)!==null||n==="style"&&u.querySelector(Rd(q))||n==="script"&&u.querySelector(kd(q))||(n=u.createElement("link"),Ds(n,"link",t),qn(n),u.head.appendChild(n)))}}function Vw(t,n){Xc.m(t,n);var s=Au;if(s&&t){var u=n&&typeof n.as=="string"?n.as:"script",D='link[rel="modulepreload"][as="'+ua(u)+'"][href="'+ua(t)+'"]',q=D;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=Du(t)}if(!ec.has(q)&&(t=E({rel:"modulepreload",href:t},n),ec.set(q,t),s.querySelector(D)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(kd(q)))return}u=s.createElement("link"),Ds(u,"link",t),qn(u),s.head.appendChild(u)}}}function Zw(t,n,s){Xc.S(t,n,s);var u=Au;if(u&&t){var D=Xn(u).hoistableStyles,q=Ou(t);n=n||"default";var se=D.get(q);if(!se){var ve={loading:0,preload:null};if(se=u.querySelector(Rd(q)))ve.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":n},s),(s=ec.get(q))&&Ih(t,s);var Fe=se=u.createElement("link");qn(Fe),Ds(Fe,"link",t),Fe._p=new Promise(function(lt,It){Fe.onload=lt,Fe.onerror=It}),Fe.addEventListener("load",function(){ve.loading|=1}),Fe.addEventListener("error",function(){ve.loading|=2}),ve.loading|=4,Lp(se,n,u)}se={type:"stylesheet",instance:se,count:1,state:ve},D.set(q,se)}}}function $w(t,n){Xc.X(t,n);var s=Au;if(s&&t){var u=Xn(s).hoistableScripts,D=Du(t),q=u.get(D);q||(q=s.querySelector(kd(D)),q||(t=E({src:t,async:!0},n),(n=ec.get(D))&&jh(t,n),q=s.createElement("script"),qn(q),Ds(q,"link",t),s.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},u.set(D,q))}}function Ww(t,n){Xc.M(t,n);var s=Au;if(s&&t){var u=Xn(s).hoistableScripts,D=Du(t),q=u.get(D);q||(q=s.querySelector(kd(D)),q||(t=E({src:t,async:!0,type:"module"},n),(n=ec.get(D))&&jh(t,n),q=s.createElement("script"),qn(q),Ds(q,"link",t),s.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},u.set(D,q))}}function Kv(t,n,s,u){var D=(D=He.current)?Mp(D):null;if(!D)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Ou(s.href),s=Xn(D).hoistableStyles,u=s.get(n),u||(u={type:"style",instance:null,count:0,state:null},s.set(n,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ou(s.href);var q=Xn(D).hoistableStyles,se=q.get(t);if(se||(D=D.ownerDocument||D,se={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(t,se),(q=D.querySelector(Rd(t)))&&!q._p&&(se.instance=q,se.state.loading=5),ec.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ec.set(t,s),q||Gw(D,t,s,se.state))),n&&u===null)throw Error(o(528,""));return se}if(n&&u!==null)throw Error(o(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Du(s),s=Xn(D).hoistableScripts,u=s.get(n),u||(u={type:"script",instance:null,count:0,state:null},s.set(n,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Ou(t){return'href="'+ua(t)+'"'}function Rd(t){return'link[rel="stylesheet"]['+t+"]"}function Yv(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Gw(t,n,s,u){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?u.loading=1:(n=t.createElement("link"),u.preload=n,n.addEventListener("load",function(){return u.loading|=1}),n.addEventListener("error",function(){return u.loading|=2}),Ds(n,"link",s),qn(n),t.head.appendChild(n))}function Du(t){return'[src="'+ua(t)+'"]'}function kd(t){return"script[async]"+t}function Qv(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var u=t.querySelector('style[data-href~="'+ua(s.href)+'"]');if(u)return n.instance=u,qn(u),u;var D=E({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),qn(u),Ds(u,"style",D),Lp(u,s.precedence,t),n.instance=u;case"stylesheet":D=Ou(s.href);var q=t.querySelector(Rd(D));if(q)return n.state.loading|=4,n.instance=q,qn(q),q;u=Yv(s),(D=ec.get(D))&&Ih(u,D),q=(t.ownerDocument||t).createElement("link"),qn(q);var se=q;return se._p=new Promise(function(ve,Fe){se.onload=ve,se.onerror=Fe}),Ds(q,"link",u),n.state.loading|=4,Lp(q,s.precedence,t),n.instance=q;case"script":return q=Du(s.src),(D=t.querySelector(kd(q)))?(n.instance=D,qn(D),D):(u=s,(D=ec.get(q))&&(u=E({},s),jh(u,D)),t=t.ownerDocument||t,D=t.createElement("script"),qn(D),Ds(D,"link",u),t.head.appendChild(D),n.instance=D);case"void":return null;default:throw Error(o(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(u=n.instance,n.state.loading|=4,Lp(u,s.precedence,t));return n.instance}function Lp(t,n,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=u.length?u[u.length-1]:null,q=D,se=0;se<u.length;se++){var ve=u[se];if(ve.dataset.precedence===n)q=ve;else if(q!==D)break}q?q.parentNode.insertBefore(t,q.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function Ih(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function jh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Ip=null;function Jv(t,n,s){if(Ip===null){var u=new Map,D=Ip=new Map;D.set(s,u)}else D=Ip,u=D.get(s),u||(u=new Map,D.set(s,u));if(u.has(t))return u;for(u.set(t,null),s=s.getElementsByTagName(t),D=0;D<s.length;D++){var q=s[D];if(!(q[kn]||q[Sn]||t==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var se=q.getAttribute(n)||"";se=t+se;var ve=u.get(se);ve?ve.push(q):u.set(se,[q])}}return u}function Xv(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function Kw(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function e0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Cd=null;function Yw(){}function Qw(t,n,s){if(Cd===null)throw Error(o(475));var u=Cd;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var D=Ou(s.href),q=t.querySelector(Rd(D));if(q){t=q._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(u.count++,u=jp.bind(u),t.then(u,u)),n.state.loading|=4,n.instance=q,qn(q);return}q=t.ownerDocument||t,s=Yv(s),(D=ec.get(D))&&Ih(s,D),q=q.createElement("link"),qn(q);var se=q;se._p=new Promise(function(ve,Fe){se.onload=ve,se.onerror=Fe}),Ds(q,"link",s),n.instance=q}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(u.count++,n=jp.bind(u),t.addEventListener("load",n),t.addEventListener("error",n))}}function Jw(){if(Cd===null)throw Error(o(475));var t=Cd;return t.stylesheets&&t.count===0&&Bh(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&Bh(t,t.stylesheets),t.unsuspend){var u=t.unsuspend;t.unsuspend=null,u()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function jp(){if(this.count--,this.count===0){if(this.stylesheets)Bh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Bp=null;function Bh(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Bp=new Map,n.forEach(Xw,t),Bp=null,jp.call(t))}function Xw(t,n){if(!(n.state.loading&4)){var s=Bp.get(t);if(s)var u=s.get(null);else{s=new Map,Bp.set(t,s);for(var D=t.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<D.length;q++){var se=D[q];(se.nodeName==="LINK"||se.getAttribute("media")!=="not all")&&(s.set(se.dataset.precedence,se),u=se)}u&&s.set(null,u)}D=n.instance,se=D.getAttribute("data-precedence"),q=s.get(se)||u,q===u&&s.set(null,D),s.set(se,D),this.count++,u=jp.bind(this),D.addEventListener("load",u),D.addEventListener("error",u),q?q.parentNode.insertBefore(D,q.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(D,t.firstChild)),n.state.loading|=4}}var Td={$$typeof:m,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function eE(t,n,s,u,D,q,se,ve){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ca(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ca(0),this.hiddenUpdates=Ca(null),this.identifierPrefix=u,this.onUncaughtError=D,this.onCaughtError=q,this.onRecoverableError=se,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ve,this.incompleteTransitions=new Map}function t0(t,n,s,u,D,q,se,ve,Fe,lt,It,Yt){return t=new eE(t,n,s,se,ve,Fe,lt,Yt),n=1,q===!0&&(n|=24),q=_a(3,null,null,n),t.current=q,q.stateNode=t,n=Go(),n.refCount++,t.pooledCache=n,n.refCount++,q.memoizedState={element:u,isDehydrated:s,cache:n},hn(q),t}function n0(t){return t?(t=po,t):po}function r0(t,n,s,u,D,q){D=n0(D),u.context===null?u.context=D:u.pendingContext=D,u=mt(n),u.payload={element:s},q=q===void 0?null:q,q!==null&&(u.callback=q),s=Nt(t,u,n),s!==null&&(Bo(s,t,n),ht(s,t,n))}function a0(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function zh(t,n){a0(t,n),(t=t.alternate)&&a0(t,n)}function i0(t){if(t.tag===13){var n=Hs(t,67108864);n!==null&&Bo(n,t,67108864),zh(t,67108864)}}var zp=!0;function tE(t,n,s,u){var D=z.T;z.T=null;var q=W.p;try{W.p=2,Uh(t,n,s,u)}finally{W.p=q,z.T=D}}function nE(t,n,s,u){var D=z.T;z.T=null;var q=W.p;try{W.p=8,Uh(t,n,s,u)}finally{W.p=q,z.T=D}}function Uh(t,n,s,u){if(zp){var D=Hh(u);if(D===null)Ch(t,n,u,Up,s),o0(t,u);else if(aE(D,t,n,s,u))u.stopPropagation();else if(o0(t,u),n&4&&-1<rE.indexOf(t)){for(;D!==null;){var q=Sr(D);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var se=Gr(q.pendingLanes);if(se!==0){var ve=q;for(ve.pendingLanes|=2,ve.entangledLanes|=2;se;){var Fe=1<<31-lr(se);ve.entanglements[1]|=Fe,se&=~Fe}Pc(q),(za&6)===0&&(Sp=cr()+500,wd(0))}}break;case 13:ve=Hs(q,2),ve!==null&&Bo(ve,q,2),Rp(),zh(q,2)}if(q=Hh(u),q===null&&Ch(t,n,u,Up,s),q===D)break;D=q}D!==null&&u.stopPropagation()}else Ch(t,n,u,null,s)}}function Hh(t){return t=ls(t),Fh(t)}var Up=null;function Fh(t){if(Up=null,t=Ar(t),t!==null){var n=N(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=B(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Up=t,null}function s0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gn()){case Un:return 2;case Le:return 8;case je:case Ge:return 32;case Qt:return 268435456;default:return 32}default:return 32}}var qh=!1,El=null,Sl=null,xl=null,Pd=new Map,Nd=new Map,Rl=[],rE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o0(t,n){switch(t){case"focusin":case"focusout":El=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":xl=null;break;case"pointerover":case"pointerout":Pd.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nd.delete(n.pointerId)}}function Ad(t,n,s,u,D,q){return t===null||t.nativeEvent!==q?(t={blockedOn:n,domEventName:s,eventSystemFlags:u,nativeEvent:q,targetContainers:[D]},n!==null&&(n=Sr(n),n!==null&&i0(n)),t):(t.eventSystemFlags|=u,n=t.targetContainers,D!==null&&n.indexOf(D)===-1&&n.push(D),t)}function aE(t,n,s,u,D){switch(n){case"focusin":return El=Ad(El,t,n,s,u,D),!0;case"dragenter":return Sl=Ad(Sl,t,n,s,u,D),!0;case"mouseover":return xl=Ad(xl,t,n,s,u,D),!0;case"pointerover":var q=D.pointerId;return Pd.set(q,Ad(Pd.get(q)||null,t,n,s,u,D)),!0;case"gotpointercapture":return q=D.pointerId,Nd.set(q,Ad(Nd.get(q)||null,t,n,s,u,D)),!0}return!1}function c0(t){var n=Ar(t.target);if(n!==null){var s=N(n);if(s!==null){if(n=s.tag,n===13){if(n=B(s),n!==null){t.blockedOn=n,Xt(t.priority,function(){if(s.tag===13){var u=jo();u=$t(u);var D=Hs(s,u);D!==null&&Bo(D,s,u),zh(s,u)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hp(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=Hh(t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);js=u,s.target.dispatchEvent(u),js=null}else return n=Sr(s),n!==null&&i0(n),t.blockedOn=s,!1;n.shift()}return!0}function l0(t,n,s){Hp(t)&&s.delete(n)}function iE(){qh=!1,El!==null&&Hp(El)&&(El=null),Sl!==null&&Hp(Sl)&&(Sl=null),xl!==null&&Hp(xl)&&(xl=null),Pd.forEach(l0),Nd.forEach(l0)}function Fp(t,n){t.blockedOn===n&&(t.blockedOn=null,qh||(qh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iE)))}var qp=null;function u0(t){qp!==t&&(qp=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){qp===t&&(qp=null);for(var n=0;n<t.length;n+=3){var s=t[n],u=t[n+1],D=t[n+2];if(typeof u!="function"){if(Fh(u||s)===null)continue;break}var q=Sr(s);q!==null&&(t.splice(n,3),n-=3,gu(q,{pending:!0,data:D,method:s.method,action:u},u,D))}}))}function Od(t){function n(Fe){return Fp(Fe,t)}El!==null&&Fp(El,t),Sl!==null&&Fp(Sl,t),xl!==null&&Fp(xl,t),Pd.forEach(n),Nd.forEach(n);for(var s=0;s<Rl.length;s++){var u=Rl[s];u.blockedOn===t&&(u.blockedOn=null)}for(;0<Rl.length&&(s=Rl[0],s.blockedOn===null);)c0(s),s.blockedOn===null&&Rl.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var D=s[u],q=s[u+1],se=D[Rn]||null;if(typeof q=="function")se||u0(s);else if(se){var ve=null;if(q&&q.hasAttribute("formAction")){if(D=q,se=q[Rn]||null)ve=se.formAction;else if(Fh(D)!==null)continue}else ve=se.action;typeof ve=="function"?s[u+1]=ve:(s.splice(u,3),u-=3),u0(s)}}}function Vh(t){this._internalRoot=t}Vp.prototype.render=Vh.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(o(409));var s=n.current,u=jo();r0(s,u,t,n,null,null)},Vp.prototype.unmount=Vh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;r0(t.current,2,null,t,null,null),Rp(),n[Zn]=null}};function Vp(t){this._internalRoot=t}Vp.prototype.unstable_scheduleHydration=function(t){if(t){var n=tn();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Rl.length&&n!==0&&n<Rl[s].priority;s++);Rl.splice(s,0,t),s===0&&c0(t)}};var d0=r.version;if(d0!=="19.1.0")throw Error(o(527,d0,"19.1.0"));W.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=k(n),t=t!==null?d(t):null,t=t===null?null:t.stateNode,t};var sE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zp.isDisabled&&Zp.supportsFiber)try{pn=Zp.inject(sE),Ln=Zp}catch{}}return Dd.createRoot=function(t,n){if(!h(t))throw Error(o(299));var s=!1,u="",D=Cg,q=Tg,se=Pg,ve=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onUncaughtError!==void 0&&(D=n.onUncaughtError),n.onCaughtError!==void 0&&(q=n.onCaughtError),n.onRecoverableError!==void 0&&(se=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(ve=n.unstable_transitionCallbacks)),n=t0(t,1,!1,null,null,s,u,D,q,se,ve,null),t[Zn]=n.current,kh(t),new Vh(n)},Dd.hydrateRoot=function(t,n,s){if(!h(t))throw Error(o(299));var u=!1,D="",q=Cg,se=Tg,ve=Pg,Fe=null,lt=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(D=s.identifierPrefix),s.onUncaughtError!==void 0&&(q=s.onUncaughtError),s.onCaughtError!==void 0&&(se=s.onCaughtError),s.onRecoverableError!==void 0&&(ve=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(Fe=s.unstable_transitionCallbacks),s.formState!==void 0&&(lt=s.formState)),n=t0(t,1,!0,n,s??null,u,D,q,se,ve,Fe,lt),n.context=n0(null),s=n.current,u=jo(),u=$t(u),D=mt(u),D.callback=null,Nt(s,D,u),s=u,n.current.lanes=s,Kr(n,s),Pc(n),t[Zn]=n.current,kh(t),new Vp(n)},Dd.version="19.1.0",Dd}var _0;function hE(){if(_0)return $h.exports;_0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),$h.exports=mE(),$h.exports}var fE=hE();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var b0="popstate";function gE(e={}){function r(o,h){let{pathname:N,search:B,hash:I}=o.location;return bf("",{pathname:N,search:B,hash:I},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function i(o,h){return typeof h=="string"?h:Wd(h)}return yE(r,i,null,e)}function li(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function vc(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function vE(){return Math.random().toString(36).substring(2,10)}function w0(e,r){return{usr:e.state,key:e.key,idx:r}}function bf(e,r,i=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?Gu(r):r,state:i,key:r&&r.key||o||vE()}}function Wd({pathname:e="/",search:r="",hash:i=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Gu(e){let r={};if(e){let i=e.indexOf("#");i>=0&&(r.hash=e.substring(i),e=e.substring(0,i));let o=e.indexOf("?");o>=0&&(r.search=e.substring(o),e=e.substring(0,o)),e&&(r.pathname=e)}return r}function yE(e,r,i,o={}){let{window:h=document.defaultView,v5Compat:N=!1}=o,B=h.history,I="POP",k=null,d=E();d==null&&(d=0,B.replaceState({...B.state,idx:d},""));function E(){return(B.state||{idx:null}).idx}function _(){I="POP";let R=E(),g=R==null?null:R-d;d=R,k&&k({action:I,location:f.location,delta:g})}function b(R,g){I="PUSH";let F=bf(f.location,R,g);d=E()+1;let m=w0(F,d),P=f.createHref(F);try{B.pushState(m,"",P)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;h.location.assign(P)}N&&k&&k({action:I,location:f.location,delta:1})}function T(R,g){I="REPLACE";let F=bf(f.location,R,g);d=E();let m=w0(F,d),P=f.createHref(F);B.replaceState(m,"",P),N&&k&&k({action:I,location:f.location,delta:0})}function v(R){return _E(R)}let f={get action(){return I},get location(){return e(h,B)},listen(R){if(k)throw new Error("A history only accepts one active listener");return h.addEventListener(b0,_),k=R,()=>{h.removeEventListener(b0,_),k=null}},createHref(R){return r(h,R)},createURL:v,encodeLocation(R){let g=v(R);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:b,replace:T,go(R){return B.go(R)}};return f}function _E(e,r=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),li(i,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:Wd(e);return o=o.replace(/ $/,"%20"),!r&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function d_(e,r,i="/"){return bE(e,r,i,!1)}function bE(e,r,i,o){let h=typeof r=="string"?Gu(r):r,N=rl(h.pathname||"/",i);if(N==null)return null;let B=p_(e);wE(B);let I=null;for(let k=0;I==null&&k<B.length;++k){let d=OE(N);I=NE(B[k],d,o)}return I}function p_(e,r=[],i=[],o=""){let h=(N,B,I)=>{let k={relativePath:I===void 0?N.path||"":I,caseSensitive:N.caseSensitive===!0,childrenIndex:B,route:N};k.relativePath.startsWith("/")&&(li(k.relativePath.startsWith(o),`Absolute route path "${k.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),k.relativePath=k.relativePath.slice(o.length));let d=nl([o,k.relativePath]),E=i.concat(k);N.children&&N.children.length>0&&(li(N.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),p_(N.children,r,E,d)),!(N.path==null&&!N.index)&&r.push({path:d,score:TE(d,N.index),routesMeta:E})};return e.forEach((N,B)=>{if(N.path===""||!N.path?.includes("?"))h(N,B);else for(let I of m_(N.path))h(N,B,I)}),r}function m_(e){let r=e.split("/");if(r.length===0)return[];let[i,...o]=r,h=i.endsWith("?"),N=i.replace(/\?$/,"");if(o.length===0)return h?[N,""]:[N];let B=m_(o.join("/")),I=[];return I.push(...B.map(k=>k===""?N:[N,k].join("/"))),h&&I.push(...B),I.map(k=>e.startsWith("/")&&k===""?"/":k)}function wE(e){e.sort((r,i)=>r.score!==i.score?i.score-r.score:PE(r.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var EE=/^:[\w-]+$/,SE=3,xE=2,RE=1,kE=10,CE=-2,E0=e=>e==="*";function TE(e,r){let i=e.split("/"),o=i.length;return i.some(E0)&&(o+=CE),r&&(o+=xE),i.filter(h=>!E0(h)).reduce((h,N)=>h+(EE.test(N)?SE:N===""?RE:kE),o)}function PE(e,r){return e.length===r.length&&e.slice(0,-1).every((o,h)=>o===r[h])?e[e.length-1]-r[r.length-1]:0}function NE(e,r,i=!1){let{routesMeta:o}=e,h={},N="/",B=[];for(let I=0;I<o.length;++I){let k=o[I],d=I===o.length-1,E=N==="/"?r:r.slice(N.length)||"/",_=hm({path:k.relativePath,caseSensitive:k.caseSensitive,end:d},E),b=k.route;if(!_&&d&&i&&!o[o.length-1].route.index&&(_=hm({path:k.relativePath,caseSensitive:k.caseSensitive,end:!1},E)),!_)return null;Object.assign(h,_.params),B.push({params:h,pathname:nl([N,_.pathname]),pathnameBase:IE(nl([N,_.pathnameBase])),route:b}),_.pathnameBase!=="/"&&(N=nl([N,_.pathnameBase]))}return B}function hm(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,o]=AE(e.path,e.caseSensitive,e.end),h=r.match(i);if(!h)return null;let N=h[0],B=N.replace(/(.)\/+$/,"$1"),I=h.slice(1);return{params:o.reduce((d,{paramName:E,isOptional:_},b)=>{if(E==="*"){let v=I[b]||"";B=N.slice(0,N.length-v.length).replace(/(.)\/+$/,"$1")}const T=I[b];return _&&!T?d[E]=void 0:d[E]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:N,pathnameBase:B,pattern:e}}function AE(e,r=!1,i=!0){vc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(B,I,k)=>(o.push({paramName:I,isOptional:k!=null}),k?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,r?void 0:"i"),o]}function OE(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return vc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function rl(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,o=e.charAt(i);return o&&o!=="/"?null:e.slice(i)||"/"}function DE(e,r="/"){let{pathname:i,search:o="",hash:h=""}=typeof e=="string"?Gu(e):e;return{pathname:i?i.startsWith("/")?i:ME(i,r):r,search:jE(o),hash:BE(h)}}function ME(e,r){let i=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(h=>{h===".."?i.length>1&&i.pop():h!=="."&&i.push(h)}),i.length>1?i.join("/"):"/"}function Yh(e,r,i,o){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LE(e){return e.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function Vf(e){let r=LE(e);return r.map((i,o)=>o===r.length-1?i.pathname:i.pathnameBase)}function Zf(e,r,i,o=!1){let h;typeof e=="string"?h=Gu(e):(h={...e},li(!h.pathname||!h.pathname.includes("?"),Yh("?","pathname","search",h)),li(!h.pathname||!h.pathname.includes("#"),Yh("#","pathname","hash",h)),li(!h.search||!h.search.includes("#"),Yh("#","search","hash",h)));let N=e===""||h.pathname==="",B=N?"/":h.pathname,I;if(B==null)I=i;else{let _=r.length-1;if(!o&&B.startsWith("..")){let b=B.split("/");for(;b[0]==="..";)b.shift(),_-=1;h.pathname=b.join("/")}I=_>=0?r[_]:"/"}let k=DE(h,I),d=B&&B!=="/"&&B.endsWith("/"),E=(N||B===".")&&i.endsWith("/");return!k.pathname.endsWith("/")&&(d||E)&&(k.pathname+="/"),k}var nl=e=>e.join("/").replace(/\/\/+/g,"/"),IE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,BE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var h_=["POST","PUT","PATCH","DELETE"];new Set(h_);var UE=["GET",...h_];new Set(UE);var Ku=ne.createContext(null);Ku.displayName="DataRouter";var Cm=ne.createContext(null);Cm.displayName="DataRouterState";ne.createContext(!1);var f_=ne.createContext({isTransitioning:!1});f_.displayName="ViewTransition";var HE=ne.createContext(new Map);HE.displayName="Fetchers";var FE=ne.createContext(null);FE.displayName="Await";var yc=ne.createContext(null);yc.displayName="Navigation";var Xd=ne.createContext(null);Xd.displayName="Location";var tc=ne.createContext({outlet:null,matches:[],isDataRoute:!1});tc.displayName="Route";var $f=ne.createContext(null);$f.displayName="RouteError";function qE(e,{relative:r}={}){li(Yu(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=ne.useContext(yc),{hash:h,pathname:N,search:B}=ep(e,{relative:r}),I=N;return i!=="/"&&(I=N==="/"?i:nl([i,N])),o.createHref({pathname:I,search:B,hash:h})}function Yu(){return ne.useContext(Xd)!=null}function Ml(){return li(Yu(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(Xd).location}var g_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function v_(e){ne.useContext(yc).static||ne.useLayoutEffect(e)}function bs(){let{isDataRoute:e}=ne.useContext(tc);return e?aS():VE()}function VE(){li(Yu(),"useNavigate() may be used only in the context of a <Router> component.");let e=ne.useContext(Ku),{basename:r,navigator:i}=ne.useContext(yc),{matches:o}=ne.useContext(tc),{pathname:h}=Ml(),N=JSON.stringify(Vf(o)),B=ne.useRef(!1);return v_(()=>{B.current=!0}),ne.useCallback((k,d={})=>{if(vc(B.current,g_),!B.current)return;if(typeof k=="number"){i.go(k);return}let E=Zf(k,JSON.parse(N),h,d.relative==="path");e==null&&r!=="/"&&(E.pathname=E.pathname==="/"?r:nl([r,E.pathname])),(d.replace?i.replace:i.push)(E,d.state,d)},[r,i,N,h,e])}var ZE=ne.createContext(null);function $E(e){let r=ne.useContext(tc).outlet;return r&&ne.createElement(ZE.Provider,{value:e},r)}function _c(){let{matches:e}=ne.useContext(tc),r=e[e.length-1];return r?r.params:{}}function ep(e,{relative:r}={}){let{matches:i}=ne.useContext(tc),{pathname:o}=Ml(),h=JSON.stringify(Vf(i));return ne.useMemo(()=>Zf(e,JSON.parse(h),o,r==="path"),[e,h,o,r])}function WE(e,r){return y_(e,r)}function y_(e,r,i,o){li(Yu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=ne.useContext(yc),{matches:N}=ne.useContext(tc),B=N[N.length-1],I=B?B.params:{},k=B?B.pathname:"/",d=B?B.pathnameBase:"/",E=B&&B.route;{let g=E&&E.path||"";__(k,!E||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${k}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let _=Ml(),b;if(r){let g=typeof r=="string"?Gu(r):r;li(d==="/"||g.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${g.pathname}" was given in the \`location\` prop.`),b=g}else b=_;let T=b.pathname||"/",v=T;if(d!=="/"){let g=d.replace(/^\//,"").split("/");v="/"+T.replace(/^\//,"").split("/").slice(g.length).join("/")}let f=d_(e,{pathname:v});vc(E||f!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),vc(f==null||f[f.length-1].route.element!==void 0||f[f.length-1].route.Component!==void 0||f[f.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=JE(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},I,g.params),pathname:nl([d,h.encodeLocation?h.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?d:nl([d,h.encodeLocation?h.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),N,i,o);return r&&R?ne.createElement(Xd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},R):R}function GE(){let e=rS(),r=zE(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",h={padding:"0.5rem",backgroundColor:o},N={padding:"2px 4px",backgroundColor:o},B=null;return console.error("Error handled by React Router default ErrorBoundary:",e),B=ne.createElement(ne.Fragment,null,ne.createElement("p",null,"💿 Hey developer 👋"),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:N},"ErrorBoundary")," or"," ",ne.createElement("code",{style:N},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},r),i?ne.createElement("pre",{style:h},i):null,B)}var KE=ne.createElement(GE,null),YE=class extends ne.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?ne.createElement(tc.Provider,{value:this.props.routeContext},ne.createElement($f.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QE({routeContext:e,match:r,children:i}){let o=ne.useContext(Ku);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),ne.createElement(tc.Provider,{value:e},i)}function JE(e,r=[],i=null,o=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(r.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let h=e,N=i?.errors;if(N!=null){let k=h.findIndex(d=>d.route.id&&N?.[d.route.id]!==void 0);li(k>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(N).join(",")}`),h=h.slice(0,Math.min(h.length,k+1))}let B=!1,I=-1;if(i)for(let k=0;k<h.length;k++){let d=h[k];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(I=k),d.route.id){let{loaderData:E,errors:_}=i,b=d.route.loader&&!E.hasOwnProperty(d.route.id)&&(!_||_[d.route.id]===void 0);if(d.route.lazy||b){B=!0,I>=0?h=h.slice(0,I+1):h=[h[0]];break}}}return h.reduceRight((k,d,E)=>{let _,b=!1,T=null,v=null;i&&(_=N&&d.route.id?N[d.route.id]:void 0,T=d.route.errorElement||KE,B&&(I<0&&E===0?(__("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):I===E&&(b=!0,v=d.route.hydrateFallbackElement||null)));let f=r.concat(h.slice(0,E+1)),R=()=>{let g;return _?g=T:b?g=v:d.route.Component?g=ne.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=k,ne.createElement(QE,{match:d,routeContext:{outlet:k,matches:f,isDataRoute:i!=null},children:g})};return i&&(d.route.ErrorBoundary||d.route.errorElement||E===0)?ne.createElement(YE,{location:i.location,revalidation:i.revalidation,component:T,error:_,children:R(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):R()},null)}function Wf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XE(e){let r=ne.useContext(Ku);return li(r,Wf(e)),r}function eS(e){let r=ne.useContext(Cm);return li(r,Wf(e)),r}function tS(e){let r=ne.useContext(tc);return li(r,Wf(e)),r}function Gf(e){let r=tS(e),i=r.matches[r.matches.length-1];return li(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function nS(){return Gf("useRouteId")}function rS(){let e=ne.useContext($f),r=eS("useRouteError"),i=Gf("useRouteError");return e!==void 0?e:r.errors?.[i]}function aS(){let{router:e}=XE("useNavigate"),r=Gf("useNavigate"),i=ne.useRef(!1);return v_(()=>{i.current=!0}),ne.useCallback(async(h,N={})=>{vc(i.current,g_),i.current&&(typeof h=="number"?e.navigate(h):await e.navigate(h,{fromRouteId:r,...N}))},[e,r])}var S0={};function __(e,r,i){!r&&!S0[e]&&(S0[e]=!0,vc(!1,i))}ne.memo(iS);function iS({routes:e,future:r,state:i}){return y_(e,void 0,i,r)}function sS({to:e,replace:r,state:i,relative:o}){li(Yu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:h}=ne.useContext(yc);vc(!h,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:N}=ne.useContext(tc),{pathname:B}=Ml(),I=bs(),k=Zf(e,Vf(N),B,o==="path"),d=JSON.stringify(k);return ne.useEffect(()=>{I(JSON.parse(d),{replace:r,state:i,relative:o})},[I,d,o,r,i]),null}function b_(e){return $E(e.context)}function Oa(e){li(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oS({basename:e="/",children:r=null,location:i,navigationType:o="POP",navigator:h,static:N=!1}){li(!Yu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let B=e.replace(/^\/*/,"/"),I=ne.useMemo(()=>({basename:B,navigator:h,static:N,future:{}}),[B,h,N]);typeof i=="string"&&(i=Gu(i));let{pathname:k="/",search:d="",hash:E="",state:_=null,key:b="default"}=i,T=ne.useMemo(()=>{let v=rl(k,B);return v==null?null:{location:{pathname:v,search:d,hash:E,state:_,key:b},navigationType:o}},[B,k,d,E,_,b,o]);return vc(T!=null,`<Router basename="${B}"> is not able to match the URL "${k}${d}${E}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:ne.createElement(yc.Provider,{value:I},ne.createElement(Xd.Provider,{children:r,value:T}))}function cS({children:e,location:r}){return WE(wf(e),r)}function wf(e,r=[]){let i=[];return ne.Children.forEach(e,(o,h)=>{if(!ne.isValidElement(o))return;let N=[...r,h];if(o.type===ne.Fragment){i.push.apply(i,wf(o.props.children,N));return}li(o.type===Oa,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),li(!o.props.index||!o.props.children,"An index route cannot have child routes.");let B={id:o.props.id||N.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(B.children=wf(o.props.children,N)),i.push(B)}),i}var sm="get",om="application/x-www-form-urlencoded";function Tm(e){return e!=null&&typeof e.tagName=="string"}function lS(e){return Tm(e)&&e.tagName.toLowerCase()==="button"}function uS(e){return Tm(e)&&e.tagName.toLowerCase()==="form"}function dS(e){return Tm(e)&&e.tagName.toLowerCase()==="input"}function pS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mS(e,r){return e.button===0&&(!r||r==="_self")&&!pS(e)}var $p=null;function hS(){if($p===null)try{new FormData(document.createElement("form"),0),$p=!1}catch{$p=!0}return $p}var fS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qh(e){return e!=null&&!fS.has(e)?(vc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${om}"`),null):e}function gS(e,r){let i,o,h,N,B;if(uS(e)){let I=e.getAttribute("action");o=I?rl(I,r):null,i=e.getAttribute("method")||sm,h=Qh(e.getAttribute("enctype"))||om,N=new FormData(e)}else if(lS(e)||dS(e)&&(e.type==="submit"||e.type==="image")){let I=e.form;if(I==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let k=e.getAttribute("formaction")||I.getAttribute("action");if(o=k?rl(k,r):null,i=e.getAttribute("formmethod")||I.getAttribute("method")||sm,h=Qh(e.getAttribute("formenctype"))||Qh(I.getAttribute("enctype"))||om,N=new FormData(I,e),!hS()){let{name:d,type:E,value:_}=e;if(E==="image"){let b=d?`${d}.`:"";N.append(`${b}x`,"0"),N.append(`${b}y`,"0")}else d&&N.append(d,_)}}else{if(Tm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=sm,o=null,h=om,B=e}return N&&h==="text/plain"&&(B=N,N=void 0),{action:o,method:i.toLowerCase(),encType:h,formData:N,body:B}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Kf(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function vS(e,r,i){let o=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return o.pathname==="/"?o.pathname=`_root.${i}`:r&&rl(o.pathname,r)==="/"?o.pathname=`${r.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function yS(e,r){if(e.id in r)return r[e.id];try{let i=await import(e.module);return r[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _S(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function bS(e,r,i){let o=await Promise.all(e.map(async h=>{let N=r.routes[h.route.id];if(N){let B=await yS(N,i);return B.links?B.links():[]}return[]}));return xS(o.flat(1).filter(_S).filter(h=>h.rel==="stylesheet"||h.rel==="preload").map(h=>h.rel==="stylesheet"?{...h,rel:"prefetch",as:"style"}:{...h,rel:"prefetch"}))}function x0(e,r,i,o,h,N){let B=(k,d)=>i[d]?k.route.id!==i[d].route.id:!0,I=(k,d)=>i[d].pathname!==k.pathname||i[d].route.path?.endsWith("*")&&i[d].params["*"]!==k.params["*"];return N==="assets"?r.filter((k,d)=>B(k,d)||I(k,d)):N==="data"?r.filter((k,d)=>{let E=o.routes[k.route.id];if(!E||!E.hasLoader)return!1;if(B(k,d)||I(k,d))return!0;if(k.route.shouldRevalidate){let _=k.route.shouldRevalidate({currentUrl:new URL(h.pathname+h.search+h.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:k.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function wS(e,r,{includeHydrateFallback:i}={}){return ES(e.map(o=>{let h=r.routes[o.route.id];if(!h)return[];let N=[h.module];return h.clientActionModule&&(N=N.concat(h.clientActionModule)),h.clientLoaderModule&&(N=N.concat(h.clientLoaderModule)),i&&h.hydrateFallbackModule&&(N=N.concat(h.hydrateFallbackModule)),h.imports&&(N=N.concat(h.imports)),N}).flat(1))}function ES(e){return[...new Set(e)]}function SS(e){let r={},i=Object.keys(e).sort();for(let o of i)r[o]=e[o];return r}function xS(e,r){let i=new Set;return new Set(r),e.reduce((o,h)=>{let N=JSON.stringify(SS(h));return i.has(N)||(i.add(N),o.push({key:N,link:h})),o},[])}function w_(){let e=ne.useContext(Ku);return Kf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function RS(){let e=ne.useContext(Cm);return Kf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Yf=ne.createContext(void 0);Yf.displayName="FrameworkContext";function E_(){let e=ne.useContext(Yf);return Kf(e,"You must render this element inside a <HydratedRouter> element"),e}function kS(e,r){let i=ne.useContext(Yf),[o,h]=ne.useState(!1),[N,B]=ne.useState(!1),{onFocus:I,onBlur:k,onMouseEnter:d,onMouseLeave:E,onTouchStart:_}=r,b=ne.useRef(null);ne.useEffect(()=>{if(e==="render"&&B(!0),e==="viewport"){let f=g=>{g.forEach(F=>{B(F.isIntersecting)})},R=new IntersectionObserver(f,{threshold:.5});return b.current&&R.observe(b.current),()=>{R.disconnect()}}},[e]),ne.useEffect(()=>{if(o){let f=setTimeout(()=>{B(!0)},100);return()=>{clearTimeout(f)}}},[o]);let T=()=>{h(!0)},v=()=>{h(!1),B(!1)};return i?e!=="intent"?[N,b,{}]:[N,b,{onFocus:Md(I,T),onBlur:Md(k,v),onMouseEnter:Md(d,T),onMouseLeave:Md(E,v),onTouchStart:Md(_,T)}]:[!1,b,{}]}function Md(e,r){return i=>{e&&e(i),i.defaultPrevented||r(i)}}function CS({page:e,...r}){let{router:i}=w_(),o=ne.useMemo(()=>d_(i.routes,e,i.basename),[i.routes,e,i.basename]);return o?ne.createElement(PS,{page:e,matches:o,...r}):null}function TS(e){let{manifest:r,routeModules:i}=E_(),[o,h]=ne.useState([]);return ne.useEffect(()=>{let N=!1;return bS(e,r,i).then(B=>{N||h(B)}),()=>{N=!0}},[e,r,i]),o}function PS({page:e,matches:r,...i}){let o=Ml(),{manifest:h,routeModules:N}=E_(),{basename:B}=w_(),{loaderData:I,matches:k}=RS(),d=ne.useMemo(()=>x0(e,r,k,h,o,"data"),[e,r,k,h,o]),E=ne.useMemo(()=>x0(e,r,k,h,o,"assets"),[e,r,k,h,o]),_=ne.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let v=new Set,f=!1;if(r.forEach(g=>{let F=h.routes[g.route.id];!F||!F.hasLoader||(!d.some(m=>m.route.id===g.route.id)&&g.route.id in I&&N[g.route.id]?.shouldRevalidate||F.hasClientLoader?f=!0:v.add(g.route.id))}),v.size===0)return[];let R=vS(e,B,"data");return f&&v.size>0&&R.searchParams.set("_routes",r.filter(g=>v.has(g.route.id)).map(g=>g.route.id).join(",")),[R.pathname+R.search]},[B,I,o,h,d,r,e,N]),b=ne.useMemo(()=>wS(E,h),[E,h]),T=TS(E);return ne.createElement(ne.Fragment,null,_.map(v=>ne.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...i})),b.map(v=>ne.createElement("link",{key:v,rel:"modulepreload",href:v,...i})),T.map(({key:v,link:f})=>ne.createElement("link",{key:v,...f})))}function NS(...e){return r=>{e.forEach(i=>{typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var S_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{S_&&(window.__reactRouterVersion="7.7.0")}catch{}function AS({basename:e,children:r,window:i}){let o=ne.useRef();o.current==null&&(o.current=gE({window:i,v5Compat:!0}));let h=o.current,[N,B]=ne.useState({action:h.action,location:h.location}),I=ne.useCallback(k=>{ne.startTransition(()=>B(k))},[B]);return ne.useLayoutEffect(()=>h.listen(I),[h,I]),ne.createElement(oS,{basename:e,children:r,location:N.location,navigationType:N.action,navigator:h})}var x_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bi=ne.forwardRef(function({onClick:r,discover:i="render",prefetch:o="none",relative:h,reloadDocument:N,replace:B,state:I,target:k,to:d,preventScrollReset:E,viewTransition:_,...b},T){let{basename:v}=ne.useContext(yc),f=typeof d=="string"&&x_.test(d),R,g=!1;if(typeof d=="string"&&f&&(R=d,S_))try{let w=new URL(window.location.href),p=d.startsWith("//")?new URL(w.protocol+d):new URL(d),C=rl(p.pathname,v);p.origin===w.origin&&C!=null?d=C+p.search+p.hash:g=!0}catch{vc(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=qE(d,{relative:h}),[m,P,S]=kS(o,b),H=LS(d,{replace:B,state:I,target:k,preventScrollReset:E,relative:h,viewTransition:_});function x(w){r&&r(w),w.defaultPrevented||H(w)}let y=ne.createElement("a",{...b,...S,href:R||F,onClick:g||N?r:x,ref:NS(T,P),target:k,"data-discover":!f&&i==="render"?"true":void 0});return m&&!f?ne.createElement(ne.Fragment,null,y,ne.createElement(CS,{page:F})):y});Bi.displayName="Link";var OS=ne.forwardRef(function({"aria-current":r="page",caseSensitive:i=!1,className:o="",end:h=!1,style:N,to:B,viewTransition:I,children:k,...d},E){let _=ep(B,{relative:d.relative}),b=Ml(),T=ne.useContext(Cm),{navigator:v,basename:f}=ne.useContext(yc),R=T!=null&&US(_)&&I===!0,g=v.encodeLocation?v.encodeLocation(_).pathname:_.pathname,F=b.pathname,m=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;i||(F=F.toLowerCase(),m=m?m.toLowerCase():null,g=g.toLowerCase()),m&&f&&(m=rl(m,f)||m);const P=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let S=F===g||!h&&F.startsWith(g)&&F.charAt(P)==="/",H=m!=null&&(m===g||!h&&m.startsWith(g)&&m.charAt(g.length)==="/"),x={isActive:S,isPending:H,isTransitioning:R},y=S?r:void 0,w;typeof o=="function"?w=o(x):w=[o,S?"active":null,H?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let p=typeof N=="function"?N(x):N;return ne.createElement(Bi,{...d,"aria-current":y,className:w,ref:E,style:p,to:B,viewTransition:I},typeof k=="function"?k(x):k)});OS.displayName="NavLink";var DS=ne.forwardRef(({discover:e="render",fetcherKey:r,navigate:i,reloadDocument:o,replace:h,state:N,method:B=sm,action:I,onSubmit:k,relative:d,preventScrollReset:E,viewTransition:_,...b},T)=>{let v=BS(),f=zS(I,{relative:d}),R=B.toLowerCase()==="get"?"get":"post",g=typeof I=="string"&&x_.test(I),F=m=>{if(k&&k(m),m.defaultPrevented)return;m.preventDefault();let P=m.nativeEvent.submitter,S=P?.getAttribute("formmethod")||B;v(P||m.currentTarget,{fetcherKey:r,method:S,navigate:i,replace:h,state:N,relative:d,preventScrollReset:E,viewTransition:_})};return ne.createElement("form",{ref:T,method:R,action:f,onSubmit:o?k:F,...b,"data-discover":!g&&e==="render"?"true":void 0})});DS.displayName="Form";function MS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R_(e){let r=ne.useContext(Ku);return li(r,MS(e)),r}function LS(e,{target:r,replace:i,state:o,preventScrollReset:h,relative:N,viewTransition:B}={}){let I=bs(),k=Ml(),d=ep(e,{relative:N});return ne.useCallback(E=>{if(mS(E,r)){E.preventDefault();let _=i!==void 0?i:Wd(k)===Wd(d);I(e,{replace:_,state:o,preventScrollReset:h,relative:N,viewTransition:B})}},[k,I,d,i,o,r,e,h,N,B])}var IS=0,jS=()=>`__${String(++IS)}__`;function BS(){let{router:e}=R_("useSubmit"),{basename:r}=ne.useContext(yc),i=nS();return ne.useCallback(async(o,h={})=>{let{action:N,method:B,encType:I,formData:k,body:d}=gS(o,r);if(h.navigate===!1){let E=h.fetcherKey||jS();await e.fetch(E,i,h.action||N,{preventScrollReset:h.preventScrollReset,formData:k,body:d,formMethod:h.method||B,formEncType:h.encType||I,flushSync:h.flushSync})}else await e.navigate(h.action||N,{preventScrollReset:h.preventScrollReset,formData:k,body:d,formMethod:h.method||B,formEncType:h.encType||I,replace:h.replace,state:h.state,fromRouteId:i,flushSync:h.flushSync,viewTransition:h.viewTransition})},[e,r,i])}function zS(e,{relative:r}={}){let{basename:i}=ne.useContext(yc),o=ne.useContext(tc);li(o,"useFormAction must be used inside a RouteContext");let[h]=o.matches.slice(-1),N={...ep(e||".",{relative:r})},B=Ml();if(e==null){N.search=B.search;let I=new URLSearchParams(N.search),k=I.getAll("index");if(k.some(E=>E==="")){I.delete("index"),k.filter(_=>_).forEach(_=>I.append("index",_));let E=I.toString();N.search=E?`?${E}`:""}}return(!e||e===".")&&h.route.index&&(N.search=N.search?N.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(N.pathname=N.pathname==="/"?i:nl([i,N.pathname])),Wd(N)}function US(e,r={}){let i=ne.useContext(f_);li(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=R_("useViewTransitionState"),h=ep(e,{relative:r.relative});if(!i.isTransitioning)return!1;let N=rl(i.currentLocation.pathname,o)||i.currentLocation.pathname,B=rl(i.nextLocation.pathname,o)||i.nextLocation.pathname;return hm(h.pathname,B)!=null||hm(h.pathname,N)!=null}var k_=u_();const C_=Ff(k_);function T_(e,r){return function(){return e.apply(r,arguments)}}const{toString:HS}=Object.prototype,{getPrototypeOf:Qf}=Object,{iterator:Pm,toStringTag:P_}=Symbol,Nm=(e=>r=>{const i=HS.call(r);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),bc=e=>(e=e.toLowerCase(),r=>Nm(r)===e),Am=e=>r=>typeof r===e,{isArray:Qu}=Array,Gd=Am("undefined");function tp(e){return e!==null&&!Gd(e)&&e.constructor!==null&&!Gd(e.constructor)&&wo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const N_=bc("ArrayBuffer");function FS(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&N_(e.buffer),r}const qS=Am("string"),wo=Am("function"),A_=Am("number"),np=e=>e!==null&&typeof e=="object",VS=e=>e===!0||e===!1,cm=e=>{if(Nm(e)!=="object")return!1;const r=Qf(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(P_ in e)&&!(Pm in e)},ZS=e=>{if(!np(e)||tp(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},$S=bc("Date"),WS=bc("File"),GS=bc("Blob"),KS=bc("FileList"),YS=e=>np(e)&&wo(e.pipe),QS=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||wo(e.append)&&((r=Nm(e))==="formdata"||r==="object"&&wo(e.toString)&&e.toString()==="[object FormData]"))},JS=bc("URLSearchParams"),[XS,e2,t2,n2]=["ReadableStream","Request","Response","Headers"].map(bc),r2=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rp(e,r,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let o,h;if(typeof e!="object"&&(e=[e]),Qu(e))for(o=0,h=e.length;o<h;o++)r.call(null,e[o],o,e);else{if(tp(e))return;const N=i?Object.getOwnPropertyNames(e):Object.keys(e),B=N.length;let I;for(o=0;o<B;o++)I=N[o],r.call(null,e[I],I,e)}}function O_(e,r){if(tp(e))return null;r=r.toLowerCase();const i=Object.keys(e);let o=i.length,h;for(;o-- >0;)if(h=i[o],r===h.toLowerCase())return h;return null}const Kl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,D_=e=>!Gd(e)&&e!==Kl;function Ef(){const{caseless:e}=D_(this)&&this||{},r={},i=(o,h)=>{const N=e&&O_(r,h)||h;cm(r[N])&&cm(o)?r[N]=Ef(r[N],o):cm(o)?r[N]=Ef({},o):Qu(o)?r[N]=o.slice():r[N]=o};for(let o=0,h=arguments.length;o<h;o++)arguments[o]&&rp(arguments[o],i);return r}const a2=(e,r,i,{allOwnKeys:o}={})=>(rp(r,(h,N)=>{i&&wo(h)?e[N]=T_(h,i):e[N]=h},{allOwnKeys:o}),e),i2=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),s2=(e,r,i,o)=>{e.prototype=Object.create(r.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),i&&Object.assign(e.prototype,i)},o2=(e,r,i,o)=>{let h,N,B;const I={};if(r=r||{},e==null)return r;do{for(h=Object.getOwnPropertyNames(e),N=h.length;N-- >0;)B=h[N],(!o||o(B,e,r))&&!I[B]&&(r[B]=e[B],I[B]=!0);e=i!==!1&&Qf(e)}while(e&&(!i||i(e,r))&&e!==Object.prototype);return r},c2=(e,r,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=r.length;const o=e.indexOf(r,i);return o!==-1&&o===i},l2=e=>{if(!e)return null;if(Qu(e))return e;let r=e.length;if(!A_(r))return null;const i=new Array(r);for(;r-- >0;)i[r]=e[r];return i},u2=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&Qf(Uint8Array)),d2=(e,r)=>{const o=(e&&e[Pm]).call(e);let h;for(;(h=o.next())&&!h.done;){const N=h.value;r.call(e,N[0],N[1])}},p2=(e,r)=>{let i;const o=[];for(;(i=e.exec(r))!==null;)o.push(i);return o},m2=bc("HTMLFormElement"),h2=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,o,h){return o.toUpperCase()+h}),R0=(({hasOwnProperty:e})=>(r,i)=>e.call(r,i))(Object.prototype),f2=bc("RegExp"),M_=(e,r)=>{const i=Object.getOwnPropertyDescriptors(e),o={};rp(i,(h,N)=>{let B;(B=r(h,N,e))!==!1&&(o[N]=B||h)}),Object.defineProperties(e,o)},g2=e=>{M_(e,(r,i)=>{if(wo(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const o=e[i];if(wo(o)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},v2=(e,r)=>{const i={},o=h=>{h.forEach(N=>{i[N]=!0})};return Qu(e)?o(e):o(String(e).split(r)),i},y2=()=>{},_2=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r;function b2(e){return!!(e&&wo(e.append)&&e[P_]==="FormData"&&e[Pm])}const w2=e=>{const r=new Array(10),i=(o,h)=>{if(np(o)){if(r.indexOf(o)>=0)return;if(tp(o))return o;if(!("toJSON"in o)){r[h]=o;const N=Qu(o)?[]:{};return rp(o,(B,I)=>{const k=i(B,h+1);!Gd(k)&&(N[I]=k)}),r[h]=void 0,N}}return o};return i(e,0)},E2=bc("AsyncFunction"),S2=e=>e&&(np(e)||wo(e))&&wo(e.then)&&wo(e.catch),L_=((e,r)=>e?setImmediate:r?((i,o)=>(Kl.addEventListener("message",({source:h,data:N})=>{h===Kl&&N===i&&o.length&&o.shift()()},!1),h=>{o.push(h),Kl.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",wo(Kl.postMessage)),x2=typeof queueMicrotask<"u"?queueMicrotask.bind(Kl):typeof process<"u"&&process.nextTick||L_,R2=e=>e!=null&&wo(e[Pm]),wt={isArray:Qu,isArrayBuffer:N_,isBuffer:tp,isFormData:QS,isArrayBufferView:FS,isString:qS,isNumber:A_,isBoolean:VS,isObject:np,isPlainObject:cm,isEmptyObject:ZS,isReadableStream:XS,isRequest:e2,isResponse:t2,isHeaders:n2,isUndefined:Gd,isDate:$S,isFile:WS,isBlob:GS,isRegExp:f2,isFunction:wo,isStream:YS,isURLSearchParams:JS,isTypedArray:u2,isFileList:KS,forEach:rp,merge:Ef,extend:a2,trim:r2,stripBOM:i2,inherits:s2,toFlatObject:o2,kindOf:Nm,kindOfTest:bc,endsWith:c2,toArray:l2,forEachEntry:d2,matchAll:p2,isHTMLForm:m2,hasOwnProperty:R0,hasOwnProp:R0,reduceDescriptors:M_,freezeMethods:g2,toObjectSet:v2,toCamelCase:h2,noop:y2,toFiniteNumber:_2,findKey:O_,global:Kl,isContextDefined:D_,isSpecCompliantForm:b2,toJSONObject:w2,isAsyncFn:E2,isThenable:S2,setImmediate:L_,asap:x2,isIterable:R2};function Yr(e,r,i,o,h){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),i&&(this.config=i),o&&(this.request=o),h&&(this.response=h,this.status=h.status?h.status:null)}wt.inherits(Yr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const I_=Yr.prototype,j_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{j_[e]={value:e}});Object.defineProperties(Yr,j_);Object.defineProperty(I_,"isAxiosError",{value:!0});Yr.from=(e,r,i,o,h,N)=>{const B=Object.create(I_);return wt.toFlatObject(e,B,function(k){return k!==Error.prototype},I=>I!=="isAxiosError"),Yr.call(B,e.message,r,i,o,h),B.cause=e,B.name=e.name,N&&Object.assign(B,N),B};const k2=null;function Sf(e){return wt.isPlainObject(e)||wt.isArray(e)}function B_(e){return wt.endsWith(e,"[]")?e.slice(0,-2):e}function k0(e,r,i){return e?e.concat(r).map(function(h,N){return h=B_(h),!i&&N?"["+h+"]":h}).join(i?".":""):r}function C2(e){return wt.isArray(e)&&!e.some(Sf)}const T2=wt.toFlatObject(wt,{},null,function(r){return/^is[A-Z]/.test(r)});function Om(e,r,i){if(!wt.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,i=wt.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,R){return!wt.isUndefined(R[f])});const o=i.metaTokens,h=i.visitor||E,N=i.dots,B=i.indexes,k=(i.Blob||typeof Blob<"u"&&Blob)&&wt.isSpecCompliantForm(r);if(!wt.isFunction(h))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(wt.isDate(v))return v.toISOString();if(wt.isBoolean(v))return v.toString();if(!k&&wt.isBlob(v))throw new Yr("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(v)||wt.isTypedArray(v)?k&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function E(v,f,R){let g=v;if(v&&!R&&typeof v=="object"){if(wt.endsWith(f,"{}"))f=o?f:f.slice(0,-2),v=JSON.stringify(v);else if(wt.isArray(v)&&C2(v)||(wt.isFileList(v)||wt.endsWith(f,"[]"))&&(g=wt.toArray(v)))return f=B_(f),g.forEach(function(m,P){!(wt.isUndefined(m)||m===null)&&r.append(B===!0?k0([f],P,N):B===null?f:f+"[]",d(m))}),!1}return Sf(v)?!0:(r.append(k0(R,f,N),d(v)),!1)}const _=[],b=Object.assign(T2,{defaultVisitor:E,convertValue:d,isVisitable:Sf});function T(v,f){if(!wt.isUndefined(v)){if(_.indexOf(v)!==-1)throw Error("Circular reference detected in "+f.join("."));_.push(v),wt.forEach(v,function(g,F){(!(wt.isUndefined(g)||g===null)&&h.call(r,g,wt.isString(F)?F.trim():F,f,b))===!0&&T(g,f?f.concat(F):[F])}),_.pop()}}if(!wt.isObject(e))throw new TypeError("data must be an object");return T(e),r}function C0(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return r[o]})}function Jf(e,r){this._pairs=[],e&&Om(e,this,r)}const z_=Jf.prototype;z_.append=function(r,i){this._pairs.push([r,i])};z_.toString=function(r){const i=r?function(o){return r.call(this,o,C0)}:C0;return this._pairs.map(function(h){return i(h[0])+"="+i(h[1])},"").join("&")};function P2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function U_(e,r,i){if(!r)return e;const o=i&&i.encode||P2;wt.isFunction(i)&&(i={serialize:i});const h=i&&i.serialize;let N;if(h?N=h(r,i):N=wt.isURLSearchParams(r)?r.toString():new Jf(r,i).toString(o),N){const B=e.indexOf("#");B!==-1&&(e=e.slice(0,B)),e+=(e.indexOf("?")===-1?"?":"&")+N}return e}class T0{constructor(){this.handlers=[]}use(r,i,o){return this.handlers.push({fulfilled:r,rejected:i,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){wt.forEach(this.handlers,function(o){o!==null&&r(o)})}}const H_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},N2=typeof URLSearchParams<"u"?URLSearchParams:Jf,A2=typeof FormData<"u"?FormData:null,O2=typeof Blob<"u"?Blob:null,D2={isBrowser:!0,classes:{URLSearchParams:N2,FormData:A2,Blob:O2},protocols:["http","https","file","blob","url","data"]},Xf=typeof window<"u"&&typeof document<"u",xf=typeof navigator=="object"&&navigator||void 0,M2=Xf&&(!xf||["ReactNative","NativeScript","NS"].indexOf(xf.product)<0),L2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",I2=Xf&&window.location.href||"http://localhost",j2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xf,hasStandardBrowserEnv:M2,hasStandardBrowserWebWorkerEnv:L2,navigator:xf,origin:I2},Symbol.toStringTag,{value:"Module"})),Zs={...j2,...D2};function B2(e,r){return Om(e,new Zs.classes.URLSearchParams,{visitor:function(i,o,h,N){return Zs.isNode&&wt.isBuffer(i)?(this.append(o,i.toString("base64")),!1):N.defaultVisitor.apply(this,arguments)},...r})}function z2(e){return wt.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function U2(e){const r={},i=Object.keys(e);let o;const h=i.length;let N;for(o=0;o<h;o++)N=i[o],r[N]=e[N];return r}function F_(e){function r(i,o,h,N){let B=i[N++];if(B==="__proto__")return!0;const I=Number.isFinite(+B),k=N>=i.length;return B=!B&&wt.isArray(h)?h.length:B,k?(wt.hasOwnProp(h,B)?h[B]=[h[B],o]:h[B]=o,!I):((!h[B]||!wt.isObject(h[B]))&&(h[B]=[]),r(i,o,h[B],N)&&wt.isArray(h[B])&&(h[B]=U2(h[B])),!I)}if(wt.isFormData(e)&&wt.isFunction(e.entries)){const i={};return wt.forEachEntry(e,(o,h)=>{r(z2(o),h,i,0)}),i}return null}function H2(e,r,i){if(wt.isString(e))try{return(r||JSON.parse)(e),wt.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(i||JSON.stringify)(e)}const ap={transitional:H_,adapter:["xhr","http","fetch"],transformRequest:[function(r,i){const o=i.getContentType()||"",h=o.indexOf("application/json")>-1,N=wt.isObject(r);if(N&&wt.isHTMLForm(r)&&(r=new FormData(r)),wt.isFormData(r))return h?JSON.stringify(F_(r)):r;if(wt.isArrayBuffer(r)||wt.isBuffer(r)||wt.isStream(r)||wt.isFile(r)||wt.isBlob(r)||wt.isReadableStream(r))return r;if(wt.isArrayBufferView(r))return r.buffer;if(wt.isURLSearchParams(r))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let I;if(N){if(o.indexOf("application/x-www-form-urlencoded")>-1)return B2(r,this.formSerializer).toString();if((I=wt.isFileList(r))||o.indexOf("multipart/form-data")>-1){const k=this.env&&this.env.FormData;return Om(I?{"files[]":r}:r,k&&new k,this.formSerializer)}}return N||h?(i.setContentType("application/json",!1),H2(r)):r}],transformResponse:[function(r){const i=this.transitional||ap.transitional,o=i&&i.forcedJSONParsing,h=this.responseType==="json";if(wt.isResponse(r)||wt.isReadableStream(r))return r;if(r&&wt.isString(r)&&(o&&!this.responseType||h)){const B=!(i&&i.silentJSONParsing)&&h;try{return JSON.parse(r)}catch(I){if(B)throw I.name==="SyntaxError"?Yr.from(I,Yr.ERR_BAD_RESPONSE,this,null,this.response):I}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zs.classes.FormData,Blob:Zs.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],e=>{ap.headers[e]={}});const F2=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),q2=e=>{const r={};let i,o,h;return e&&e.split(`
`).forEach(function(B){h=B.indexOf(":"),i=B.substring(0,h).trim().toLowerCase(),o=B.substring(h+1).trim(),!(!i||r[i]&&F2[i])&&(i==="set-cookie"?r[i]?r[i].push(o):r[i]=[o]:r[i]=r[i]?r[i]+", "+o:o)}),r},P0=Symbol("internals");function Ld(e){return e&&String(e).trim().toLowerCase()}function lm(e){return e===!1||e==null?e:wt.isArray(e)?e.map(lm):String(e)}function V2(e){const r=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=i.exec(e);)r[o[1]]=o[2];return r}const Z2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Jh(e,r,i,o,h){if(wt.isFunction(o))return o.call(this,r,i);if(h&&(r=i),!!wt.isString(r)){if(wt.isString(o))return r.indexOf(o)!==-1;if(wt.isRegExp(o))return o.test(r)}}function $2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,i,o)=>i.toUpperCase()+o)}function W2(e,r){const i=wt.toCamelCase(" "+r);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+i,{value:function(h,N,B){return this[o].call(this,r,h,N,B)},configurable:!0})})}let Eo=class{constructor(r){r&&this.set(r)}set(r,i,o){const h=this;function N(I,k,d){const E=Ld(k);if(!E)throw new Error("header name must be a non-empty string");const _=wt.findKey(h,E);(!_||h[_]===void 0||d===!0||d===void 0&&h[_]!==!1)&&(h[_||k]=lm(I))}const B=(I,k)=>wt.forEach(I,(d,E)=>N(d,E,k));if(wt.isPlainObject(r)||r instanceof this.constructor)B(r,i);else if(wt.isString(r)&&(r=r.trim())&&!Z2(r))B(q2(r),i);else if(wt.isObject(r)&&wt.isIterable(r)){let I={},k,d;for(const E of r){if(!wt.isArray(E))throw TypeError("Object iterator must return a key-value pair");I[d=E[0]]=(k=I[d])?wt.isArray(k)?[...k,E[1]]:[k,E[1]]:E[1]}B(I,i)}else r!=null&&N(i,r,o);return this}get(r,i){if(r=Ld(r),r){const o=wt.findKey(this,r);if(o){const h=this[o];if(!i)return h;if(i===!0)return V2(h);if(wt.isFunction(i))return i.call(this,h,o);if(wt.isRegExp(i))return i.exec(h);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,i){if(r=Ld(r),r){const o=wt.findKey(this,r);return!!(o&&this[o]!==void 0&&(!i||Jh(this,this[o],o,i)))}return!1}delete(r,i){const o=this;let h=!1;function N(B){if(B=Ld(B),B){const I=wt.findKey(o,B);I&&(!i||Jh(o,o[I],I,i))&&(delete o[I],h=!0)}}return wt.isArray(r)?r.forEach(N):N(r),h}clear(r){const i=Object.keys(this);let o=i.length,h=!1;for(;o--;){const N=i[o];(!r||Jh(this,this[N],N,r,!0))&&(delete this[N],h=!0)}return h}normalize(r){const i=this,o={};return wt.forEach(this,(h,N)=>{const B=wt.findKey(o,N);if(B){i[B]=lm(h),delete i[N];return}const I=r?$2(N):String(N).trim();I!==N&&delete i[N],i[I]=lm(h),o[I]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const i=Object.create(null);return wt.forEach(this,(o,h)=>{o!=null&&o!==!1&&(i[h]=r&&wt.isArray(o)?o.join(", "):o)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,i])=>r+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...i){const o=new this(r);return i.forEach(h=>o.set(h)),o}static accessor(r){const o=(this[P0]=this[P0]={accessors:{}}).accessors,h=this.prototype;function N(B){const I=Ld(B);o[I]||(W2(h,B),o[I]=!0)}return wt.isArray(r)?r.forEach(N):N(r),this}};Eo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);wt.reduceDescriptors(Eo.prototype,({value:e},r)=>{let i=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(o){this[i]=o}}});wt.freezeMethods(Eo);function Xh(e,r){const i=this||ap,o=r||i,h=Eo.from(o.headers);let N=o.data;return wt.forEach(e,function(I){N=I.call(i,N,h.normalize(),r?r.status:void 0)}),h.normalize(),N}function q_(e){return!!(e&&e.__CANCEL__)}function Ju(e,r,i){Yr.call(this,e??"canceled",Yr.ERR_CANCELED,r,i),this.name="CanceledError"}wt.inherits(Ju,Yr,{__CANCEL__:!0});function V_(e,r,i){const o=i.config.validateStatus;!i.status||!o||o(i.status)?e(i):r(new Yr("Request failed with status code "+i.status,[Yr.ERR_BAD_REQUEST,Yr.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function G2(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function K2(e,r){e=e||10;const i=new Array(e),o=new Array(e);let h=0,N=0,B;return r=r!==void 0?r:1e3,function(k){const d=Date.now(),E=o[N];B||(B=d),i[h]=k,o[h]=d;let _=N,b=0;for(;_!==h;)b+=i[_++],_=_%e;if(h=(h+1)%e,h===N&&(N=(N+1)%e),d-B<r)return;const T=E&&d-E;return T?Math.round(b*1e3/T):void 0}}function Y2(e,r){let i=0,o=1e3/r,h,N;const B=(d,E=Date.now())=>{i=E,h=null,N&&(clearTimeout(N),N=null),e(...d)};return[(...d)=>{const E=Date.now(),_=E-i;_>=o?B(d,E):(h=d,N||(N=setTimeout(()=>{N=null,B(h)},o-_)))},()=>h&&B(h)]}const fm=(e,r,i=3)=>{let o=0;const h=K2(50,250);return Y2(N=>{const B=N.loaded,I=N.lengthComputable?N.total:void 0,k=B-o,d=h(k),E=B<=I;o=B;const _={loaded:B,total:I,progress:I?B/I:void 0,bytes:k,rate:d||void 0,estimated:d&&I&&E?(I-B)/d:void 0,event:N,lengthComputable:I!=null,[r?"download":"upload"]:!0};e(_)},i)},N0=(e,r)=>{const i=e!=null;return[o=>r[0]({lengthComputable:i,total:e,loaded:o}),r[1]]},A0=e=>(...r)=>wt.asap(()=>e(...r)),Q2=Zs.hasStandardBrowserEnv?((e,r)=>i=>(i=new URL(i,Zs.origin),e.protocol===i.protocol&&e.host===i.host&&(r||e.port===i.port)))(new URL(Zs.origin),Zs.navigator&&/(msie|trident)/i.test(Zs.navigator.userAgent)):()=>!0,J2=Zs.hasStandardBrowserEnv?{write(e,r,i,o,h,N){const B=[e+"="+encodeURIComponent(r)];wt.isNumber(i)&&B.push("expires="+new Date(i).toGMTString()),wt.isString(o)&&B.push("path="+o),wt.isString(h)&&B.push("domain="+h),N===!0&&B.push("secure"),document.cookie=B.join("; ")},read(e){const r=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function X2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ex(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function Z_(e,r,i){let o=!X2(r);return e&&(o||i==!1)?ex(e,r):r}const O0=e=>e instanceof Eo?{...e}:e;function Jl(e,r){r=r||{};const i={};function o(d,E,_,b){return wt.isPlainObject(d)&&wt.isPlainObject(E)?wt.merge.call({caseless:b},d,E):wt.isPlainObject(E)?wt.merge({},E):wt.isArray(E)?E.slice():E}function h(d,E,_,b){if(wt.isUndefined(E)){if(!wt.isUndefined(d))return o(void 0,d,_,b)}else return o(d,E,_,b)}function N(d,E){if(!wt.isUndefined(E))return o(void 0,E)}function B(d,E){if(wt.isUndefined(E)){if(!wt.isUndefined(d))return o(void 0,d)}else return o(void 0,E)}function I(d,E,_){if(_ in r)return o(d,E);if(_ in e)return o(void 0,d)}const k={url:N,method:N,data:N,baseURL:B,transformRequest:B,transformResponse:B,paramsSerializer:B,timeout:B,timeoutMessage:B,withCredentials:B,withXSRFToken:B,adapter:B,responseType:B,xsrfCookieName:B,xsrfHeaderName:B,onUploadProgress:B,onDownloadProgress:B,decompress:B,maxContentLength:B,maxBodyLength:B,beforeRedirect:B,transport:B,httpAgent:B,httpsAgent:B,cancelToken:B,socketPath:B,responseEncoding:B,validateStatus:I,headers:(d,E,_)=>h(O0(d),O0(E),_,!0)};return wt.forEach(Object.keys({...e,...r}),function(E){const _=k[E]||h,b=_(e[E],r[E],E);wt.isUndefined(b)&&_!==I||(i[E]=b)}),i}const $_=e=>{const r=Jl({},e);let{data:i,withXSRFToken:o,xsrfHeaderName:h,xsrfCookieName:N,headers:B,auth:I}=r;r.headers=B=Eo.from(B),r.url=U_(Z_(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),I&&B.set("Authorization","Basic "+btoa((I.username||"")+":"+(I.password?unescape(encodeURIComponent(I.password)):"")));let k;if(wt.isFormData(i)){if(Zs.hasStandardBrowserEnv||Zs.hasStandardBrowserWebWorkerEnv)B.setContentType(void 0);else if((k=B.getContentType())!==!1){const[d,...E]=k?k.split(";").map(_=>_.trim()).filter(Boolean):[];B.setContentType([d||"multipart/form-data",...E].join("; "))}}if(Zs.hasStandardBrowserEnv&&(o&&wt.isFunction(o)&&(o=o(r)),o||o!==!1&&Q2(r.url))){const d=h&&N&&J2.read(N);d&&B.set(h,d)}return r},tx=typeof XMLHttpRequest<"u",nx=tx&&function(e){return new Promise(function(i,o){const h=$_(e);let N=h.data;const B=Eo.from(h.headers).normalize();let{responseType:I,onUploadProgress:k,onDownloadProgress:d}=h,E,_,b,T,v;function f(){T&&T(),v&&v(),h.cancelToken&&h.cancelToken.unsubscribe(E),h.signal&&h.signal.removeEventListener("abort",E)}let R=new XMLHttpRequest;R.open(h.method.toUpperCase(),h.url,!0),R.timeout=h.timeout;function g(){if(!R)return;const m=Eo.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),S={data:!I||I==="text"||I==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:m,config:e,request:R};V_(function(x){i(x),f()},function(x){o(x),f()},S),R=null}"onloadend"in R?R.onloadend=g:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(g)},R.onabort=function(){R&&(o(new Yr("Request aborted",Yr.ECONNABORTED,e,R)),R=null)},R.onerror=function(){o(new Yr("Network Error",Yr.ERR_NETWORK,e,R)),R=null},R.ontimeout=function(){let P=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded";const S=h.transitional||H_;h.timeoutErrorMessage&&(P=h.timeoutErrorMessage),o(new Yr(P,S.clarifyTimeoutError?Yr.ETIMEDOUT:Yr.ECONNABORTED,e,R)),R=null},N===void 0&&B.setContentType(null),"setRequestHeader"in R&&wt.forEach(B.toJSON(),function(P,S){R.setRequestHeader(S,P)}),wt.isUndefined(h.withCredentials)||(R.withCredentials=!!h.withCredentials),I&&I!=="json"&&(R.responseType=h.responseType),d&&([b,v]=fm(d,!0),R.addEventListener("progress",b)),k&&R.upload&&([_,T]=fm(k),R.upload.addEventListener("progress",_),R.upload.addEventListener("loadend",T)),(h.cancelToken||h.signal)&&(E=m=>{R&&(o(!m||m.type?new Ju(null,e,R):m),R.abort(),R=null)},h.cancelToken&&h.cancelToken.subscribe(E),h.signal&&(h.signal.aborted?E():h.signal.addEventListener("abort",E)));const F=G2(h.url);if(F&&Zs.protocols.indexOf(F)===-1){o(new Yr("Unsupported protocol "+F+":",Yr.ERR_BAD_REQUEST,e));return}R.send(N||null)})},rx=(e,r)=>{const{length:i}=e=e?e.filter(Boolean):[];if(r||i){let o=new AbortController,h;const N=function(d){if(!h){h=!0,I();const E=d instanceof Error?d:this.reason;o.abort(E instanceof Yr?E:new Ju(E instanceof Error?E.message:E))}};let B=r&&setTimeout(()=>{B=null,N(new Yr(`timeout ${r} of ms exceeded`,Yr.ETIMEDOUT))},r);const I=()=>{e&&(B&&clearTimeout(B),B=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(N):d.removeEventListener("abort",N)}),e=null)};e.forEach(d=>d.addEventListener("abort",N));const{signal:k}=o;return k.unsubscribe=()=>wt.asap(I),k}},ax=function*(e,r){let i=e.byteLength;if(i<r){yield e;return}let o=0,h;for(;o<i;)h=o+r,yield e.slice(o,h),o=h},ix=async function*(e,r){for await(const i of sx(e))yield*ax(i,r)},sx=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:i,value:o}=await r.read();if(i)break;yield o}}finally{await r.cancel()}},D0=(e,r,i,o)=>{const h=ix(e,r);let N=0,B,I=k=>{B||(B=!0,o&&o(k))};return new ReadableStream({async pull(k){try{const{done:d,value:E}=await h.next();if(d){I(),k.close();return}let _=E.byteLength;if(i){let b=N+=_;i(b)}k.enqueue(new Uint8Array(E))}catch(d){throw I(d),d}},cancel(k){return I(k),h.return()}},{highWaterMark:2})},Dm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",W_=Dm&&typeof ReadableStream=="function",ox=Dm&&(typeof TextEncoder=="function"?(e=>r=>e.encode(r))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),G_=(e,...r)=>{try{return!!e(...r)}catch{return!1}},cx=W_&&G_(()=>{let e=!1;const r=new Request(Zs.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!r}),M0=64*1024,Rf=W_&&G_(()=>wt.isReadableStream(new Response("").body)),gm={stream:Rf&&(e=>e.body)};Dm&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!gm[r]&&(gm[r]=wt.isFunction(e[r])?i=>i[r]():(i,o)=>{throw new Yr(`Response type '${r}' is not supported`,Yr.ERR_NOT_SUPPORT,o)})})})(new Response);const lx=async e=>{if(e==null)return 0;if(wt.isBlob(e))return e.size;if(wt.isSpecCompliantForm(e))return(await new Request(Zs.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(wt.isArrayBufferView(e)||wt.isArrayBuffer(e))return e.byteLength;if(wt.isURLSearchParams(e)&&(e=e+""),wt.isString(e))return(await ox(e)).byteLength},ux=async(e,r)=>{const i=wt.toFiniteNumber(e.getContentLength());return i??lx(r)},dx=Dm&&(async e=>{let{url:r,method:i,data:o,signal:h,cancelToken:N,timeout:B,onDownloadProgress:I,onUploadProgress:k,responseType:d,headers:E,withCredentials:_="same-origin",fetchOptions:b}=$_(e);d=d?(d+"").toLowerCase():"text";let T=rx([h,N&&N.toAbortSignal()],B),v;const f=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let R;try{if(k&&cx&&i!=="get"&&i!=="head"&&(R=await ux(E,o))!==0){let S=new Request(r,{method:"POST",body:o,duplex:"half"}),H;if(wt.isFormData(o)&&(H=S.headers.get("content-type"))&&E.setContentType(H),S.body){const[x,y]=N0(R,fm(A0(k)));o=D0(S.body,M0,x,y)}}wt.isString(_)||(_=_?"include":"omit");const g="credentials"in Request.prototype;v=new Request(r,{...b,signal:T,method:i.toUpperCase(),headers:E.normalize().toJSON(),body:o,duplex:"half",credentials:g?_:void 0});let F=await fetch(v,b);const m=Rf&&(d==="stream"||d==="response");if(Rf&&(I||m&&f)){const S={};["status","statusText","headers"].forEach(w=>{S[w]=F[w]});const H=wt.toFiniteNumber(F.headers.get("content-length")),[x,y]=I&&N0(H,fm(A0(I),!0))||[];F=new Response(D0(F.body,M0,x,()=>{y&&y(),f&&f()}),S)}d=d||"text";let P=await gm[wt.findKey(gm,d)||"text"](F,e);return!m&&f&&f(),await new Promise((S,H)=>{V_(S,H,{data:P,headers:Eo.from(F.headers),status:F.status,statusText:F.statusText,config:e,request:v})})}catch(g){throw f&&f(),g&&g.name==="TypeError"&&/Load failed|fetch/i.test(g.message)?Object.assign(new Yr("Network Error",Yr.ERR_NETWORK,e,v),{cause:g.cause||g}):Yr.from(g,g&&g.code,e,v)}}),kf={http:k2,xhr:nx,fetch:dx};wt.forEach(kf,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const L0=e=>`- ${e}`,px=e=>wt.isFunction(e)||e===null||e===!1,K_={getAdapter:e=>{e=wt.isArray(e)?e:[e];const{length:r}=e;let i,o;const h={};for(let N=0;N<r;N++){i=e[N];let B;if(o=i,!px(i)&&(o=kf[(B=String(i)).toLowerCase()],o===void 0))throw new Yr(`Unknown adapter '${B}'`);if(o)break;h[B||"#"+N]=o}if(!o){const N=Object.entries(h).map(([I,k])=>`adapter ${I} `+(k===!1?"is not supported by the environment":"is not available in the build"));let B=r?N.length>1?`since :
`+N.map(L0).join(`
`):" "+L0(N[0]):"as no adapter specified";throw new Yr("There is no suitable adapter to dispatch the request "+B,"ERR_NOT_SUPPORT")}return o},adapters:kf};function ef(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ju(null,e)}function I0(e){return ef(e),e.headers=Eo.from(e.headers),e.data=Xh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),K_.getAdapter(e.adapter||ap.adapter)(e).then(function(o){return ef(e),o.data=Xh.call(e,e.transformResponse,o),o.headers=Eo.from(o.headers),o},function(o){return q_(o)||(ef(e),o&&o.response&&(o.response.data=Xh.call(e,e.transformResponse,o.response),o.response.headers=Eo.from(o.response.headers))),Promise.reject(o)})}const Y_="1.11.0",Mm={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{Mm[e]=function(o){return typeof o===e||"a"+(r<1?"n ":" ")+e}});const j0={};Mm.transitional=function(r,i,o){function h(N,B){return"[Axios v"+Y_+"] Transitional option '"+N+"'"+B+(o?". "+o:"")}return(N,B,I)=>{if(r===!1)throw new Yr(h(B," has been removed"+(i?" in "+i:"")),Yr.ERR_DEPRECATED);return i&&!j0[B]&&(j0[B]=!0,console.warn(h(B," has been deprecated since v"+i+" and will be removed in the near future"))),r?r(N,B,I):!0}};Mm.spelling=function(r){return(i,o)=>(console.warn(`${o} is likely a misspelling of ${r}`),!0)};function mx(e,r,i){if(typeof e!="object")throw new Yr("options must be an object",Yr.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let h=o.length;for(;h-- >0;){const N=o[h],B=r[N];if(B){const I=e[N],k=I===void 0||B(I,N,e);if(k!==!0)throw new Yr("option "+N+" must be "+k,Yr.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Yr("Unknown option "+N,Yr.ERR_BAD_OPTION)}}const um={assertOptions:mx,validators:Mm},Nc=um.validators;let Ql=class{constructor(r){this.defaults=r||{},this.interceptors={request:new T0,response:new T0}}async request(r,i){try{return await this._request(r,i)}catch(o){if(o instanceof Error){let h={};Error.captureStackTrace?Error.captureStackTrace(h):h=new Error;const N=h.stack?h.stack.replace(/^.+\n/,""):"";try{o.stack?N&&!String(o.stack).endsWith(N.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+N):o.stack=N}catch{}}throw o}}_request(r,i){typeof r=="string"?(i=i||{},i.url=r):i=r||{},i=Jl(this.defaults,i);const{transitional:o,paramsSerializer:h,headers:N}=i;o!==void 0&&um.assertOptions(o,{silentJSONParsing:Nc.transitional(Nc.boolean),forcedJSONParsing:Nc.transitional(Nc.boolean),clarifyTimeoutError:Nc.transitional(Nc.boolean)},!1),h!=null&&(wt.isFunction(h)?i.paramsSerializer={serialize:h}:um.assertOptions(h,{encode:Nc.function,serialize:Nc.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),um.assertOptions(i,{baseUrl:Nc.spelling("baseURL"),withXsrfToken:Nc.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let B=N&&wt.merge(N.common,N[i.method]);N&&wt.forEach(["delete","get","head","post","put","patch","common"],v=>{delete N[v]}),i.headers=Eo.concat(B,N);const I=[];let k=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(i)===!1||(k=k&&f.synchronous,I.unshift(f.fulfilled,f.rejected))});const d=[];this.interceptors.response.forEach(function(f){d.push(f.fulfilled,f.rejected)});let E,_=0,b;if(!k){const v=[I0.bind(this),void 0];for(v.unshift(...I),v.push(...d),b=v.length,E=Promise.resolve(i);_<b;)E=E.then(v[_++],v[_++]);return E}b=I.length;let T=i;for(_=0;_<b;){const v=I[_++],f=I[_++];try{T=v(T)}catch(R){f.call(this,R);break}}try{E=I0.call(this,T)}catch(v){return Promise.reject(v)}for(_=0,b=d.length;_<b;)E=E.then(d[_++],d[_++]);return E}getUri(r){r=Jl(this.defaults,r);const i=Z_(r.baseURL,r.url,r.allowAbsoluteUrls);return U_(i,r.params,r.paramsSerializer)}};wt.forEach(["delete","get","head","options"],function(r){Ql.prototype[r]=function(i,o){return this.request(Jl(o||{},{method:r,url:i,data:(o||{}).data}))}});wt.forEach(["post","put","patch"],function(r){function i(o){return function(N,B,I){return this.request(Jl(I||{},{method:r,headers:o?{"Content-Type":"multipart/form-data"}:{},url:N,data:B}))}}Ql.prototype[r]=i(),Ql.prototype[r+"Form"]=i(!0)});let hx=class Q_{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(N){i=N});const o=this;this.promise.then(h=>{if(!o._listeners)return;let N=o._listeners.length;for(;N-- >0;)o._listeners[N](h);o._listeners=null}),this.promise.then=h=>{let N;const B=new Promise(I=>{o.subscribe(I),N=I}).then(h);return B.cancel=function(){o.unsubscribe(N)},B},r(function(N,B,I){o.reason||(o.reason=new Ju(N,B,I),i(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const r=new AbortController,i=o=>{r.abort(o)};return this.subscribe(i),r.signal.unsubscribe=()=>this.unsubscribe(i),r.signal}static source(){let r;return{token:new Q_(function(h){r=h}),cancel:r}}};function fx(e){return function(i){return e.apply(null,i)}}function gx(e){return wt.isObject(e)&&e.isAxiosError===!0}const Cf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cf).forEach(([e,r])=>{Cf[r]=e});function J_(e){const r=new Ql(e),i=T_(Ql.prototype.request,r);return wt.extend(i,Ql.prototype,r,{allOwnKeys:!0}),wt.extend(i,r,null,{allOwnKeys:!0}),i.create=function(h){return J_(Jl(e,h))},i}const bi=J_(ap);bi.Axios=Ql;bi.CanceledError=Ju;bi.CancelToken=hx;bi.isCancel=q_;bi.VERSION=Y_;bi.toFormData=Om;bi.AxiosError=Yr;bi.Cancel=bi.CanceledError;bi.all=function(r){return Promise.all(r)};bi.spread=fx;bi.isAxiosError=gx;bi.mergeConfig=Jl;bi.AxiosHeaders=Eo;bi.formToJSON=e=>F_(wt.isHTMLForm(e)?new FormData(e):e);bi.getAdapter=K_.getAdapter;bi.HttpStatusCode=Cf;bi.default=bi;const{Axios:XA,AxiosError:eO,CanceledError:tO,isCancel:nO,CancelToken:rO,VERSION:aO,all:iO,Cancel:sO,isAxiosError:oO,spread:cO,toFormData:lO,AxiosHeaders:uO,HttpStatusCode:dO,formToJSON:pO,getAdapter:mO,mergeConfig:hO}=bi,Ur=bi.create({baseURL:"https://quickmedpk-87e7d3c6e100.herokuapp.com",headers:{"Content-Type":"application/json"}});if(typeof window<"u"){const e=localStorage.getItem("token");e&&(Ur.defaults.headers.Authorization=`${e}`)}const Mu={validateToken:()=>Ur.get("/auth/me"),signInRequest:e=>Ur.post("/auth/login",e),signUpRequest:e=>Ur.post("/auth/signup",e),forgotPassword:e=>Ur.post("/auth/forgot-password",e),resetPassword:e=>Ur.post("/auth/reset-password",e),singleUser:e=>Ur.get(`/auth/${e}`)},Lu={validateToken:()=>Mu.validateToken(),signInRequest:e=>Mu.signInRequest(e),signUpRequest:e=>Mu.signUpRequest(e),forgotPassword:e=>Mu.forgotPassword(e),resetPassword:e=>Mu.resetPassword(e),singleUser:e=>Mu.singleUser(e)},eg=e=>{if(!e)return;const r=e;localStorage.setItem("token",e),Ur.defaults.headers.common.Authorization=r},tg=()=>localStorage.removeItem("token");function vx(e){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}const yx=e=>{switch(e){case"success":return wx;case"info":return Sx;case"warning":return Ex;case"error":return xx;default:return null}},_x=Array(12).fill(0),bx=({visible:e,className:r})=>c.createElement("div",{className:["sonner-loading-wrapper",r].filter(Boolean).join(" "),"data-visible":e},c.createElement("div",{className:"sonner-spinner"},_x.map((i,o)=>c.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),wx=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Ex=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Sx=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),xx=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Rx=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},c.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),kx=()=>{const[e,r]=c.useState(document.hidden);return c.useEffect(()=>{const i=()=>{r(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),e};let Tf=1;class Cx{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{const i=this.subscribers.indexOf(r);this.subscribers.splice(i,1)}),this.publish=r=>{this.subscribers.forEach(i=>i(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var i;const{message:o,...h}=r,N=typeof r?.id=="number"||((i=r.id)==null?void 0:i.length)>0?r.id:Tf++,B=this.toasts.find(k=>k.id===N),I=r.dismissible===void 0?!0:r.dismissible;return this.dismissedToasts.has(N)&&this.dismissedToasts.delete(N),B?this.toasts=this.toasts.map(k=>k.id===N?(this.publish({...k,...r,id:N,title:o}),{...k,...r,id:N,dismissible:I,title:o}):k):this.addToast({title:o,...h,dismissible:I,id:N}),N},this.dismiss=r=>(r?(this.dismissedToasts.add(r),requestAnimationFrame(()=>this.subscribers.forEach(i=>i({id:r,dismiss:!0})))):this.toasts.forEach(i=>{this.subscribers.forEach(o=>o({id:i.id,dismiss:!0}))}),r),this.message=(r,i)=>this.create({...i,message:r}),this.error=(r,i)=>this.create({...i,message:r,type:"error"}),this.success=(r,i)=>this.create({...i,type:"success",message:r}),this.info=(r,i)=>this.create({...i,type:"info",message:r}),this.warning=(r,i)=>this.create({...i,type:"warning",message:r}),this.loading=(r,i)=>this.create({...i,type:"loading",message:r}),this.promise=(r,i)=>{if(!i)return;let o;i.loading!==void 0&&(o=this.create({...i,promise:r,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));const h=Promise.resolve(r instanceof Function?r():r);let N=o!==void 0,B;const I=h.then(async d=>{if(B=["resolve",d],c.isValidElement(d))N=!1,this.create({id:o,type:"default",message:d});else if(Px(d)&&!d.ok){N=!1;const _=typeof i.error=="function"?await i.error(`HTTP error! status: ${d.status}`):i.error,b=typeof i.description=="function"?await i.description(`HTTP error! status: ${d.status}`):i.description,v=typeof _=="object"&&!c.isValidElement(_)?_:{message:_};this.create({id:o,type:"error",description:b,...v})}else if(d instanceof Error){N=!1;const _=typeof i.error=="function"?await i.error(d):i.error,b=typeof i.description=="function"?await i.description(d):i.description,v=typeof _=="object"&&!c.isValidElement(_)?_:{message:_};this.create({id:o,type:"error",description:b,...v})}else if(i.success!==void 0){N=!1;const _=typeof i.success=="function"?await i.success(d):i.success,b=typeof i.description=="function"?await i.description(d):i.description,v=typeof _=="object"&&!c.isValidElement(_)?_:{message:_};this.create({id:o,type:"success",description:b,...v})}}).catch(async d=>{if(B=["reject",d],i.error!==void 0){N=!1;const E=typeof i.error=="function"?await i.error(d):i.error,_=typeof i.description=="function"?await i.description(d):i.description,T=typeof E=="object"&&!c.isValidElement(E)?E:{message:E};this.create({id:o,type:"error",description:_,...T})}}).finally(()=>{N&&(this.dismiss(o),o=void 0),i.finally==null||i.finally.call(i)}),k=()=>new Promise((d,E)=>I.then(()=>B[0]==="reject"?E(B[1]):d(B[1])).catch(E));return typeof o!="string"&&typeof o!="number"?{unwrap:k}:Object.assign(o,{unwrap:k})},this.custom=(r,i)=>{const o=i?.id||Tf++;return this.create({jsx:r(o),id:o,...i}),o},this.getActiveToasts=()=>this.toasts.filter(r=>!this.dismissedToasts.has(r.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const bo=new Cx,Tx=(e,r)=>{const i=r?.id||Tf++;return bo.addToast({title:e,...r,id:i}),i},Px=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Nx=Tx,Ax=()=>bo.toasts,Ox=()=>bo.getActiveToasts(),zn=Object.assign(Nx,{success:bo.success,info:bo.info,warning:bo.warning,error:bo.error,custom:bo.custom,message:bo.message,promise:bo.promise,dismiss:bo.dismiss,loading:bo.loading},{getHistory:Ax,getToasts:Ox});vx("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Wp(e){return e.label!==void 0}const Dx=3,Mx="24px",Lx="16px",B0=4e3,Ix=356,jx=14,Bx=45,zx=200;function Ac(...e){return e.filter(Boolean).join(" ")}function Ux(e){const[r,i]=e.split("-"),o=[];return r&&o.push(r),i&&o.push(i),o}const Hx=e=>{var r,i,o,h,N,B,I,k,d;const{invert:E,toast:_,unstyled:b,interacting:T,setHeights:v,visibleToasts:f,heights:R,index:g,toasts:F,expanded:m,removeToast:P,defaultRichColors:S,closeButton:H,style:x,cancelButtonStyle:y,actionButtonStyle:w,className:p="",descriptionClassName:C="",duration:A,position:M,gap:j,expandByDefault:U,classNames:z,icons:W,closeButtonAriaLabel:Z="Close toast"}=e,[ce,J]=c.useState(null),[Ee,Ce]=c.useState(null),[Re,ye]=c.useState(!1),[Te,He]=c.useState(!1),[we,Je]=c.useState(!1),[Be,nt]=c.useState(!1),[Qe,Ze]=c.useState(!1),[Ht,or]=c.useState(0),[Nr,jn]=c.useState(0),cr=c.useRef(_.duration||A||B0),Gn=c.useRef(null),Un=c.useRef(null),Le=g===0,je=g+1<=f,Ge=_.type,Qt=_.dismissible!==!1,Ft=_.className||"",xt=_.descriptionClassName||"",pn=c.useMemo(()=>R.findIndex(at=>at.toastId===_.id)||0,[R,_.id]),Ln=c.useMemo(()=>{var at;return(at=_.closeButton)!=null?at:H},[_.closeButton,H]),Bt=c.useMemo(()=>_.duration||A||B0,[_.duration,A]),lr=c.useRef(0),Fr=c.useRef(0),kr=c.useRef(0),Vr=c.useRef(null),[Hr,Or]=M.split("-"),Gr=c.useMemo(()=>R.reduce((at,ut,$t)=>$t>=pn?at:at+ut.height,0),[R,pn]),ga=kx(),ta=_.invert||E,oa=Ge==="loading";Fr.current=c.useMemo(()=>pn*j+Gr,[pn,Gr]),c.useEffect(()=>{cr.current=Bt},[Bt]),c.useEffect(()=>{ye(!0)},[]),c.useEffect(()=>{const at=Un.current;if(at){const ut=at.getBoundingClientRect().height;return jn(ut),v($t=>[{toastId:_.id,height:ut,position:_.position},...$t]),()=>v($t=>$t.filter(Tt=>Tt.toastId!==_.id))}},[v,_.id]),c.useLayoutEffect(()=>{if(!Re)return;const at=Un.current,ut=at.style.height;at.style.height="auto";const $t=at.getBoundingClientRect().height;at.style.height=ut,jn($t),v(Tt=>Tt.find(Xt=>Xt.toastId===_.id)?Tt.map(Xt=>Xt.toastId===_.id?{...Xt,height:$t}:Xt):[{toastId:_.id,height:$t,position:_.position},...Tt])},[Re,_.title,_.description,v,_.id,_.jsx,_.action,_.cancel]);const Nn=c.useCallback(()=>{He(!0),or(Fr.current),v(at=>at.filter(ut=>ut.toastId!==_.id)),setTimeout(()=>{P(_)},zx)},[_,P,v,Fr]);c.useEffect(()=>{if(_.promise&&Ge==="loading"||_.duration===1/0||_.type==="loading")return;let at;return m||T||ga?(()=>{if(kr.current<lr.current){const Tt=new Date().getTime()-lr.current;cr.current=cr.current-Tt}kr.current=new Date().getTime()})():(()=>{cr.current!==1/0&&(lr.current=new Date().getTime(),at=setTimeout(()=>{_.onAutoClose==null||_.onAutoClose.call(_,_),Nn()},cr.current))})(),()=>clearTimeout(at)},[m,T,_,Ge,ga,Nn]),c.useEffect(()=>{_.delete&&(Nn(),_.onDismiss==null||_.onDismiss.call(_,_))},[Nn,_.delete]);function Ha(){var at;if(W?.loading){var ut;return c.createElement("div",{className:Ac(z?.loader,_==null||(ut=_.classNames)==null?void 0:ut.loader,"sonner-loader"),"data-visible":Ge==="loading"},W.loading)}return c.createElement(bx,{className:Ac(z?.loader,_==null||(at=_.classNames)==null?void 0:at.loader),visible:Ge==="loading"})}const Ca=_.icon||W?.[Ge]||yx(Ge);var Kr,hr;return c.createElement("li",{tabIndex:0,ref:Un,className:Ac(p,Ft,z?.toast,_==null||(r=_.classNames)==null?void 0:r.toast,z?.default,z?.[Ge],_==null||(i=_.classNames)==null?void 0:i[Ge]),"data-sonner-toast":"","data-rich-colors":(Kr=_.richColors)!=null?Kr:S,"data-styled":!(_.jsx||_.unstyled||b),"data-mounted":Re,"data-promise":!!_.promise,"data-swiped":Qe,"data-removed":Te,"data-visible":je,"data-y-position":Hr,"data-x-position":Or,"data-index":g,"data-front":Le,"data-swiping":we,"data-dismissible":Qt,"data-type":Ge,"data-invert":ta,"data-swipe-out":Be,"data-swipe-direction":Ee,"data-expanded":!!(m||U&&Re),"data-testid":_.testId,style:{"--index":g,"--toasts-before":g,"--z-index":F.length-g,"--offset":`${Te?Ht:Fr.current}px`,"--initial-height":U?"auto":`${Nr}px`,...x,..._.style},onDragEnd:()=>{Je(!1),J(null),Vr.current=null},onPointerDown:at=>{at.button!==2&&(oa||!Qt||(Gn.current=new Date,or(Fr.current),at.target.setPointerCapture(at.pointerId),at.target.tagName!=="BUTTON"&&(Je(!0),Vr.current={x:at.clientX,y:at.clientY})))},onPointerUp:()=>{var at,ut,$t;if(Be||!Qt)return;Vr.current=null;const Tt=Number(((at=Un.current)==null?void 0:at.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),tn=Number(((ut=Un.current)==null?void 0:ut.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Xt=new Date().getTime()-(($t=Gn.current)==null?void 0:$t.getTime()),Xe=ce==="x"?Tt:tn,Sn=Math.abs(Xe)/Xt;if(Math.abs(Xe)>=Bx||Sn>.11){or(Fr.current),_.onDismiss==null||_.onDismiss.call(_,_),Ce(ce==="x"?Tt>0?"right":"left":tn>0?"down":"up"),Nn(),nt(!0);return}else{var Rn,Zn;(Rn=Un.current)==null||Rn.style.setProperty("--swipe-amount-x","0px"),(Zn=Un.current)==null||Zn.style.setProperty("--swipe-amount-y","0px")}Ze(!1),Je(!1),J(null)},onPointerMove:at=>{var ut,$t,Tt;if(!Vr.current||!Qt||((ut=window.getSelection())==null?void 0:ut.toString().length)>0)return;const Xt=at.clientY-Vr.current.y,Xe=at.clientX-Vr.current.x;var Sn;const Rn=(Sn=e.swipeDirections)!=null?Sn:Ux(M);!ce&&(Math.abs(Xe)>1||Math.abs(Xt)>1)&&J(Math.abs(Xe)>Math.abs(Xt)?"x":"y");let Zn={x:0,y:0};const ur=Wt=>1/(1.5+Math.abs(Wt)/20);if(ce==="y"){if(Rn.includes("top")||Rn.includes("bottom"))if(Rn.includes("top")&&Xt<0||Rn.includes("bottom")&&Xt>0)Zn.y=Xt;else{const Wt=Xt*ur(Xt);Zn.y=Math.abs(Wt)<Math.abs(Xt)?Wt:Xt}}else if(ce==="x"&&(Rn.includes("left")||Rn.includes("right")))if(Rn.includes("left")&&Xe<0||Rn.includes("right")&&Xe>0)Zn.x=Xe;else{const Wt=Xe*ur(Xe);Zn.x=Math.abs(Wt)<Math.abs(Xe)?Wt:Xe}(Math.abs(Zn.x)>0||Math.abs(Zn.y)>0)&&Ze(!0),($t=Un.current)==null||$t.style.setProperty("--swipe-amount-x",`${Zn.x}px`),(Tt=Un.current)==null||Tt.style.setProperty("--swipe-amount-y",`${Zn.y}px`)}},Ln&&!_.jsx&&Ge!=="loading"?c.createElement("button",{"aria-label":Z,"data-disabled":oa,"data-close-button":!0,onClick:oa||!Qt?()=>{}:()=>{Nn(),_.onDismiss==null||_.onDismiss.call(_,_)},className:Ac(z?.closeButton,_==null||(o=_.classNames)==null?void 0:o.closeButton)},(hr=W?.close)!=null?hr:Rx):null,(Ge||_.icon||_.promise)&&_.icon!==null&&(W?.[Ge]!==null||_.icon)?c.createElement("div",{"data-icon":"",className:Ac(z?.icon,_==null||(h=_.classNames)==null?void 0:h.icon)},_.promise||_.type==="loading"&&!_.icon?_.icon||Ha():null,_.type!=="loading"?Ca:null):null,c.createElement("div",{"data-content":"",className:Ac(z?.content,_==null||(N=_.classNames)==null?void 0:N.content)},c.createElement("div",{"data-title":"",className:Ac(z?.title,_==null||(B=_.classNames)==null?void 0:B.title)},_.jsx?_.jsx:typeof _.title=="function"?_.title():_.title),_.description?c.createElement("div",{"data-description":"",className:Ac(C,xt,z?.description,_==null||(I=_.classNames)==null?void 0:I.description)},typeof _.description=="function"?_.description():_.description):null),c.isValidElement(_.cancel)?_.cancel:_.cancel&&Wp(_.cancel)?c.createElement("button",{"data-button":!0,"data-cancel":!0,style:_.cancelButtonStyle||y,onClick:at=>{Wp(_.cancel)&&Qt&&(_.cancel.onClick==null||_.cancel.onClick.call(_.cancel,at),Nn())},className:Ac(z?.cancelButton,_==null||(k=_.classNames)==null?void 0:k.cancelButton)},_.cancel.label):null,c.isValidElement(_.action)?_.action:_.action&&Wp(_.action)?c.createElement("button",{"data-button":!0,"data-action":!0,style:_.actionButtonStyle||w,onClick:at=>{Wp(_.action)&&(_.action.onClick==null||_.action.onClick.call(_.action,at),!at.defaultPrevented&&Nn())},className:Ac(z?.actionButton,_==null||(d=_.classNames)==null?void 0:d.actionButton)},_.action.label):null)};function z0(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Fx(e,r){const i={};return[e,r].forEach((o,h)=>{const N=h===1,B=N?"--mobile-offset":"--offset",I=N?Lx:Mx;function k(d){["top","right","bottom","left"].forEach(E=>{i[`${B}-${E}`]=typeof d=="number"?`${d}px`:d})}typeof o=="number"||typeof o=="string"?k(o):typeof o=="object"?["top","right","bottom","left"].forEach(d=>{o[d]===void 0?i[`${B}-${d}`]=I:i[`${B}-${d}`]=typeof o[d]=="number"?`${o[d]}px`:o[d]}):k(I)}),i}const qx=c.forwardRef(function(r,i){const{id:o,invert:h,position:N="bottom-right",hotkey:B=["altKey","KeyT"],expand:I,closeButton:k,className:d,offset:E,mobileOffset:_,theme:b="light",richColors:T,duration:v,style:f,visibleToasts:R=Dx,toastOptions:g,dir:F=z0(),gap:m=jx,icons:P,containerAriaLabel:S="Notifications"}=r,[H,x]=c.useState([]),y=c.useMemo(()=>o?H.filter(Re=>Re.toasterId===o):H.filter(Re=>!Re.toasterId),[H,o]),w=c.useMemo(()=>Array.from(new Set([N].concat(y.filter(Re=>Re.position).map(Re=>Re.position)))),[y,N]),[p,C]=c.useState([]),[A,M]=c.useState(!1),[j,U]=c.useState(!1),[z,W]=c.useState(b!=="system"?b:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=c.useRef(null),ce=B.join("+").replace(/Key/g,"").replace(/Digit/g,""),J=c.useRef(null),Ee=c.useRef(!1),Ce=c.useCallback(Re=>{x(ye=>{var Te;return(Te=ye.find(He=>He.id===Re.id))!=null&&Te.delete||bo.dismiss(Re.id),ye.filter(({id:He})=>He!==Re.id)})},[]);return c.useEffect(()=>bo.subscribe(Re=>{if(Re.dismiss){requestAnimationFrame(()=>{x(ye=>ye.map(Te=>Te.id===Re.id?{...Te,delete:!0}:Te))});return}setTimeout(()=>{C_.flushSync(()=>{x(ye=>{const Te=ye.findIndex(He=>He.id===Re.id);return Te!==-1?[...ye.slice(0,Te),{...ye[Te],...Re},...ye.slice(Te+1)]:[Re,...ye]})})})}),[H]),c.useEffect(()=>{if(b!=="system"){W(b);return}if(b==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;const Re=window.matchMedia("(prefers-color-scheme: dark)");try{Re.addEventListener("change",({matches:ye})=>{W(ye?"dark":"light")})}catch{Re.addListener(({matches:Te})=>{try{W(Te?"dark":"light")}catch(He){console.error(He)}})}},[b]),c.useEffect(()=>{H.length<=1&&M(!1)},[H]),c.useEffect(()=>{const Re=ye=>{var Te;if(B.every(Je=>ye[Je]||ye.code===Je)){var we;M(!0),(we=Z.current)==null||we.focus()}ye.code==="Escape"&&(document.activeElement===Z.current||(Te=Z.current)!=null&&Te.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",Re),()=>document.removeEventListener("keydown",Re)},[B]),c.useEffect(()=>{if(Z.current)return()=>{J.current&&(J.current.focus({preventScroll:!0}),J.current=null,Ee.current=!1)}},[Z.current]),c.createElement("section",{ref:i,"aria-label":`${S} ${ce}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},w.map((Re,ye)=>{var Te;const[He,we]=Re.split("-");return y.length?c.createElement("ol",{key:Re,dir:F==="auto"?z0():F,tabIndex:-1,ref:Z,className:d,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":He,"data-x-position":we,style:{"--front-toast-height":`${((Te=p[0])==null?void 0:Te.height)||0}px`,"--width":`${Ix}px`,"--gap":`${m}px`,...f,...Fx(E,_)},onBlur:Je=>{Ee.current&&!Je.currentTarget.contains(Je.relatedTarget)&&(Ee.current=!1,J.current&&(J.current.focus({preventScroll:!0}),J.current=null))},onFocus:Je=>{Je.target instanceof HTMLElement&&Je.target.dataset.dismissible==="false"||Ee.current||(Ee.current=!0,J.current=Je.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{j||M(!1)},onDragEnd:()=>M(!1),onPointerDown:Je=>{Je.target instanceof HTMLElement&&Je.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},y.filter(Je=>!Je.position&&ye===0||Je.position===Re).map((Je,Be)=>{var nt,Qe;return c.createElement(Hx,{key:Je.id,icons:P,index:Be,toast:Je,defaultRichColors:T,duration:(nt=g?.duration)!=null?nt:v,className:g?.className,descriptionClassName:g?.descriptionClassName,invert:h,visibleToasts:R,closeButton:(Qe=g?.closeButton)!=null?Qe:k,interacting:j,position:Re,style:g?.style,unstyled:g?.unstyled,classNames:g?.classNames,cancelButtonStyle:g?.cancelButtonStyle,actionButtonStyle:g?.actionButtonStyle,closeButtonAriaLabel:g?.closeButtonAriaLabel,removeToast:Ce,toasts:y.filter(Ze=>Ze.position==Je.position),heights:p.filter(Ze=>Ze.position==Je.position),setHeights:C,expandByDefault:I,gap:m,expanded:A,swipeDirections:r.swipeDirections})})):null}))}),X_=ne.createContext(),Vx=({children:e})=>{const[r,i]=ne.useState(null),[o,h]=ne.useState([]),[N,B]=ne.useState(!1),[I,k]=ne.useState(!1),[d,E]=ne.useState(!0),[_,b]=ne.useState([]),[T,v]=ne.useState(null);console.log(r);const f=async()=>{try{const{data:H}=await Lu.validateToken();i(H.data),B(!0)}catch(H){console.log(H)}finally{E(!1)}};ne.useEffect(()=>{f()},[]);const R=async(H,x)=>{k(!0);try{const{data:y}=await Lu.signInRequest(H);eg(y.data.token),i(y?.data?.user),B(!0),zn.success("Login successful"),x&&x("/")}catch(y){zn.error(y.response?.data?.message||"Login failed"),v(y)}finally{k(!1)}},g=async(H,x)=>{console.log(H),k(!0);try{const{data:y}=await Lu.signUpRequest(H);i(y.data.user),B(!0),zn.success("Signup successful"),x&&x("/login")}catch(y){zn.error(y.response?.data?.message||"Signup failed"),v(y)}finally{k(!1)}},F=async(H,x)=>{k(!0);try{const{data:y}=await Lu.forgotPassword(H);zn.success("Password reset email sent"),x&&x("/reset-password")}catch(y){zn.error(y.response?.data?.message||"Failed to send reset email"),v(y)}finally{k(!1)}},m=async(H,x)=>{k(!0);try{const{data:y}=await Lu.resetPassword(H);zn.success("Password reset successful"),x&&x("/login")}catch(y){zn.error(y.response?.data?.message||"Password reset failed"),v(y)}finally{k(!1)}},P=async H=>{k(!0);try{tg(),i(null),B(!1),zn.success("Logged out successfully"),H&&H("/")}catch(x){console.error("Sign Out Error:",x)}finally{k(!1)}},S=async H=>{k(!0);try{const{data:x}=await Lu.singleUser(H);return h(x.data.user),x.data.user}catch(x){zn.error(x.response?.data?.message||"Failed to fetch user"),v(x)}finally{k(!1)}};return c.createElement(X_.Provider,{value:{setUser:i,user:r,isAuthenticated:N,signIn:R,signUpFun:g,signOut:P,loading:I,error:T,ForgotPassword:F,ResetPassword:m,isAuthLoading:d,validateSession:f,singleUser:S}},e)},So=()=>ne.useContext(X_),U0=[{label:"Find Doctors",dropdown:[{label:"All Specialities",href:"/doctors"},{label:"Allergy & Immunology",href:"doctor/allergy-immunology"},{label:"Anesthesiology & Critical Care",href:"doctor/anesthesiology-critical-care"},{label:"Cardiology",href:"doctor/cardiology"},{label:"Cardiothoracic Surgery",href:"doctor/cardiothoracic-surgery"},{label:"Clinical Biochemical Genetics",href:"doctor/clinical-biochemical-genetics"},{label:"Dermatology",href:"doctor/dermatology"},{label:"Emergency Medicine",href:"doctor/emergency-medicine"},{label:"Endocrinology",href:"doctor/endocrinology"},{label:"Family Medicine",href:"doctor/family-medicine"},{label:"Forensic Pathology",href:"doctor/forensic-pathology"},{label:"Gastroenterology & Hepatology",href:"doctor/gastroenterology-hepatology"},{label:"Geriatric Medicine",href:"doctor/geriatric-medicine"},{label:"Hematology / Medical Oncology",href:"doctor/hematology-oncology"},{label:"Infectious Diseases",href:"doctor/infectious-diseases"},{label:"Internal Medicine",href:"doctor/internal-medicine"},{label:"Interventional Cardiology",href:"doctor/interventional-cardiology"},{label:"Neonatology (Pediatric Subspecialty)",href:"doctor/neonatology"},{label:"Nephrology",href:"doctor/nephrology"},{label:"Neurology",href:"doctor/neurology"},{label:"Neurosurgery",href:"doctor/neurosurgery"},{label:"Nuclear Medicine",href:"doctor/nuclear-medicine"},{label:"Obstetrics & Gynecology (OB/GYN)",href:"doctor/obstetrics-gynecology"},{label:"Ophthalmology",href:"doctor/ophthalmology"},{label:"Oral & Maxillofacial Surgery",href:"doctor/oral-maxillofacial-surgery"},{label:"Otorhinolaryngology (ENT)",href:"doctor/otorhinolaryngology"},{label:"Orthopedic Surgery",href:"doctor/orthopedic-surgery"},{label:"Palliative Medicine",href:"doctor/palliative-medicine"},{label:"Pathology (Anatomical & Clinical)",href:"doctor/pathology"},{label:"Physical Medicine & Rehabilitation (PM&R)",href:"doctor/physical-medicine-rehabilitation"},{label:"Plastic, Reconstructive & Aesthetic Surgery",href:"doctor/plastic-surgery"},{label:"Preventive & Lifestyle Medicine",href:"doctor/preventive-lifestyle-medicine"},{label:"Psychiatry & Child-Adolescent Psychiatry",href:"doctor/psychiatry"},{label:"Public Health & Occupational Medicine",href:"doctor/public-health-occupational-medicine"},{label:"Pulmonology / Respiratory Medicine",href:"doctor/pulmonology"},{label:"Radiation Oncology",href:"doctor/radiation-oncology"},{label:"Radiology & Interventional Radiology",href:"doctor/radiology"},{label:"Rheumatology",href:"doctor/rheumatology"},{label:"Sleep Medicine",href:"doctor/sleep-medicine"},{label:"Sports Medicine",href:"doctor/sports-medicine"},{label:"Thoracic Surgery",href:"doctor/thoracic-surgery"},{label:"Toxicology",href:"doctor/toxicology"},{label:"Transfusion Medicine",href:"doctor/transfusion-medicine"},{label:"Urology",href:"doctor/urology"},{label:"Vascular Surgery & Interventional Radiologists",href:"doctor/vascular-surgery"},{label:"Research Physicians",href:"doctor/research-physicians"}]},{label:"Hospitals",dropdown:[]},{label:"Medicines",dropdown:[{label:"All Medicines",href:"/medicines"},{label:"Medicine Delivery",href:"/medicine/delivery"}]},{}],Zx=[{name:"Dr. Ahmed Hassan",slug:"dermatologist",specialty:"Cardiologist",experience:"15 years",rating:4.8,reviews:245,hospital:"Aga Khan Hospital",location:"Karachi",image:"/quickMed/images/doctor1.jpg",consultationFee:2500,availability:"Available Today"},{name:"Dr. Fatima Khan",slug:"gynecologist",specialty:"Dermatologist",experience:"12 years",rating:4.9,reviews:189,hospital:"Shaukat Khanum Hospital",location:"Lahore",image:"/quickMed//images/doctor2.jpg",consultationFee:3e3,availability:"Available Tomorrow"},{name:"Dr. Muhammad Ali",slug:"neurologist",specialty:"Neurologist",experience:"18 years",rating:4.7,reviews:321,hospital:"PIMS Hospital",location:"Islamabad",image:"/quickMed//images/doctor3.jpg",consultationFee:2800,availability:"Available Today"},{name:"Dr. Sara Ahmed",slug:"pediatrician",specialty:"Pediatrician",experience:"10 years",rating:4.8,reviews:156,hospital:"Civil Hospital",location:"Karachi",image:"/quickMed//images/doctor4.jpg",consultationFee:2200,availability:"Available Today"}],$x=[{icon:"👨‍⚕️",title:"PMC Verified Doctors",description:"All doctors are verified by Pakistan Medical Commission",stat:"PMC Verified"},{icon:"🏥",title:"16,000+ Doctors Available",description:"Largest network of qualified doctors across Pakistan",stat:"16,000+"},{icon:"📞",title:"24/7 Customer Support",description:"Well trained & supportive team available round the clock",stat:"24/7"},{icon:"🔒",title:"Secure Online Payments",description:"SSL-encrypted secure payment gateway for your safety",stat:"SSL Encrypted"}],Wx=[{title:"For Patients",links:[{name:"Find Doctors",href:"#"},{name:"Book Appointment",href:"#"},{name:"Online Consultation",href:"#"},{name:"Lab Tests",href:"#"},{name:"Medicines",href:"#"}]},{title:"For Doctors",links:[{name:"Join as Doctor",href:"#"},{name:"Doctor Login",href:"#"},{name:"List Your Practice",href:"#"},{name:"Doctor Resources",href:"#"}]},{title:"Pages",links:[{name:"About Us",href:"#"},{name:"Careers",href:"#"},{name:"Press",href:"#"},{name:"Blog",href:"#"},{name:"Contact Us",href:"#"}]}],Gx=[{name:"Facebook",href:"#",icon:"📘"},{name:"Twitter",href:"#",icon:"🐦"},{name:"Instagram",href:"#",icon:"📸"},{name:"LinkedIn",href:"#",icon:"💼"}],Kx=[{title:"Fever",icon:"🌡️",description:"Find doctors for fever treatment",href:"#"},{title:"Heart Attack",icon:"💓",description:"Emergency cardiac care",href:"#"},{title:"Pregnancy",icon:"👶",description:"Prenatal and maternity care",href:"#"},{title:"High Blood Pressure",icon:"🩺",description:"Hypertension management",href:"#"},{title:"Breathlessness",icon:"🫁",description:"Respiratory care",href:"#"},{title:"Diarrhea",icon:"🏥",description:"Digestive health",href:"#"},{title:"Hairfall",icon:"💇",description:"Hair and scalp treatment",href:"#"},{title:"Anxiety/Depression",icon:"🧠",description:"Mental health support",href:"#"},{title:"Dengue Fever",icon:"🦟",description:"Dengue prevention and treatment",href:"#"},{title:"Typhoid Fever",icon:"🌡️",description:"Typhoid care",href:"#"},{title:"Piles",icon:"🏥",description:"Hemorrhoid treatment",href:"#"},{title:"Gastritis",icon:"🍽️",description:"Stomach care",href:"#"}],Yx=[{number:"16,000+",label:"Verified Doctors",description:"PMC verified doctors across Pakistan"},{number:"1M+",label:"Happy Patients",description:"Patients served nationwide"},{number:"500+",label:"Hospitals",description:"Partner hospitals and clinics"},{number:"24/7",label:"Support",description:"Round the clock customer support"}],Qx=["Allergy & Immunology - الرجی اور مدافعت کے امراض کے ماہر","Anesthesiology & Critical Care - بے ہوشی اور تنقیدی نگہداشت","Cardiology - ماہر امراض قلب","Cardiothoracic Surgery - کارڈیو تھوراسک سرجری","Clinical Biochemical Genetics - کلینیکل بائیوکیمیکل جینیات","Dermatology - جلد کے امراض کے ماہر","Emergency Medicine - ایمرجنسی میڈیسن","Endocrinology - غدود داخلیہ کے امراض","Family Medicine - فیملی میڈیسن (خاندان ڈاکٹر)","Forensic Pathology - قانونی تشخیصی علم","Gastroenterology & Hepatology - معدہ، آنتوں اور جگر کے امراض","Geriatric Medicine - بزرگوں کے امراض کے ماہر","Hematology / Medical Oncology - خون اور کینسر کے امراض کے ماہر","Infectious Diseases - متعدی بیماریوں کے ماہر","Internal Medicine - داخلیہ کے امراض کے ماہر","Interventional Cardiology - مداخلتی قلبی امراض","Neonatology (Pediatric Subspecialty) - نوزائیدہ بچوں کے امراض","Nephrology - گردے کے امراض کے ماہر","Neurology - اعصابی نظام کے امراض کے ماہر","Neurosurgery - نیوروسرجری (دماغ و ریڑھ کی ہڈی)","Nuclear Medicine - جوہری ادویات کے طبی استعمال","Obstetrics & Gynecology (OB/GYN) - زچہ و حمل و نسواں کے امراض","Ophthalmology - چشم کے امراض کے ماہر","Oral & Maxillofacial Surgery - منہ و چہرے کی سرجری","Otorhinolaryngology (ENT) - کان، ناک، گلا کے ماہر","Orthopedic Surgery - ہڈیوں اور جوڑوں کے سرجن","Palliative Medicine - آرام افزا علاج","Pathology (Anatomical & Clinical) - تشخیصی علم","Physical Medicine & Rehabilitation (PM&R) - بحالی معالجے کے ماہر","Plastic, Reconstructive & Aesthetic Surgery - پلاسٹک و جمالیاتی سرجری","Preventive & Lifestyle Medicine - روک تھام اور طرز زندگی طب","Psychiatry & Child-Adolescent Psychiatry - ماہر نفسیات","Public Health & Occupational Medicine - عوامی صحت اور پیشہ ورانہ طب","Pulmonology / Respiratory Medicine - پھیپھڑوں کے امراض کے ماہر","Radiation Oncology - شعاعی علاج برائے کینسر","Radiology & Interventional Radiology - تشخیصی اور مداخلتی ریڈیالوجی","Rheumatology - ریمیٹائیڈ اور مشترکہ امراض کے ماہر","Sleep Medicine - نیند کے امراض کے ماہر","Sports Medicine - کھیلوں اور چوٹوں کے ماہر","Thoracic Surgery - چھاتی کے داخلی اور پھیپھڑوں کی سرجری","Toxicology - زہریلے مادوں اور زہریلے امراض کے ماہر","Transfusion Medicine - خون کی منتقلی سے متعلق طب","Urology - نظام اخراج اور تولیدی نظام کے امراض کے ماہر","Vascular Surgery & Interventional Radiologists - خون کی نالیوں کے سرجن","Research Physicians - طبی تحقیق کرنے والے ڈاکٹر"],eb=["Allergy & Immunology","Anesthesiology & Critical Care","Cardiology","Cardiothoracic Surgery","Clinical Biochemical Genetics","Dermatology","Emergency Medicine","Endocrinology","Family Medicine","Forensic Pathology","Gastroenterology & Hepatology","Geriatric Medicine","Hematology / Medical Oncology","Infectious Diseases","Internal Medicine","Interventional Cardiology","Neonatology (Pediatric Subspecialty)","Nephrology","Neurology","Neurosurgery","Nuclear Medicine","Obstetrics & Gynecology (OB/GYN)","Ophthalmology","Oral & Maxillofacial Surgery","Otorhinolaryngology (ENT)","Orthopedic Surgery","Palliative Medicine","Pathology (Anatomical & Clinical)","Physical Medicine & Rehabilitation (PM&R)","Plastic, Reconstructive & Aesthetic Surgery","Preventive & Lifestyle Medicine","Psychiatry & Child-Adolescent Psychiatry","Public Health & Occupational Medicine","Pulmonology / Respiratory Medicine","Radiation Oncology","Radiology & Interventional Radiology","Rheumatology","Sleep Medicine","Sports Medicine","Thoracic Surgery","Toxicology","Transfusion Medicine","Urology","Vascular Surgery & Interventional Radiologists","Research Physicians"],tb=[{name:"Aga Khan Hospital",slug:"lahore",city:"Karachi",address:"Stadium Road, Karachi",contact:"021-111-911-911",beds:500,image:"/quickMed//images/hospital1.jpeg"},{name:"Shaukat Khanum Hospital",slug:"lahore",city:"Lahore",address:"Johar Town, Lahore",contact:"042-3590-5000",beds:300,image:"/quickMed//images/hospital2.jpeg"}],nb=[{name:"Paracetamol",slug:"paracetamol",type:"Tablet",description:"Pain reliever and fever reducer.",price:50,image:"/quickMed//images/medicine1.jpg"},{name:"Amoxicillin",slug:"amoxicillin",type:"Capsule",description:"Antibiotic for bacterial infections.",price:120,image:"/quickMed//images/medicine2.jpg"}],rb=[{name:"Chughtai Lab",slug:"chughtai-lab",city:"Lahore",address:"Main Boulevard, Lahore",contact:"042-111-456-789",tests:120,image:"/quickMed//images/lab1.jpg"},{name:"Excel Labs",slug:"excel-labs",city:"Islamabad",address:"Blue Area, Islamabad",contact:"051-111-222-333",tests:80,image:"/quickMed//images/lab2.jpg"}],Jx=["Public","Private","Semi-Private","Military","Charity"],Xx=["General","Specialized","Teaching","Research","Emergency"],eR=["Male","Female","Other"],tR=["MBBS","BDS"],nR={Karachi:[24.86,67.01],Lahore:[31.56,74.35],Faisalabad:[31.41,73.11],Rawalpindi:[33.6,73.04],Gujranwala:[32.16,74.18],Multan:[30.2,71.45],Hyderabad:[25.38,68.37],Peshawar:[34.01,71.54],Quetta:[30.21,67.02],Islamabad:[33.72,73.06],Sargodha:[32.08,72.67],Sialkot:[32.52,74.55],Bahawalpur:[29.39,71.67],Sukkur:[27.7,68.85],Jhang:[31.28,72.32],Sheikhupura:[31.72,73.98],Larkana:[27.56,68.21],Gujrat:[32.58,74.07],Mardan:[34.2,72.04],Kasur:[31.12,74.45],RahimYarKhan:[28.42,70.3],Sahiwal:[30.67,73.11],Okara:[30.81,73.45],WahCantonment:[33.77,72.75],DeraGhaziKhan:[30.06,70.64],MirpurKhas:[25.53,69.01],Nawabshah:[26.24,68.4],Mingora:[34.78,72.36],Chiniot:[31.72,72.98],Kamoke:[31.98,74.21],Burewala:[30.16,72.67],Jhelum:[32.94,73.72],Sadiqabad:[28.3,70.13],Jacobabad:[28.28,68.43],Shikarpur:[27.96,68.64],Khanewal:[30.31,71.82],Hafizabad:[32.07,73.68],Kohat:[33.6,71.44],Muzaffargarh:[30.07,71.18],Khanpur:[28.65,70.65],Gojra:[31.15,72.69],Bahawalnagar:[30,73.25],Muridke:[31.81,74.25],Pakpattan:[30.35,73.38],Abbottabad:[34.15,73.2],TandoAdam:[25.76,68.66],Khairpur:[27.53,68.74],Chishtian:[29.79,72.84],Daska:[32.33,74.36],Dadu:[26.73,67.77],MandiBahauddin:[32.59,73.48],AhmadpurEast:[29.15,71.26],Kamalia:[30.73,72.64],Khuzdar:[27.8,66.6],Vehari:[30.05,72.34],DeraIsmailKhan:[31.83,70.9],Wazirabad:[32.45,74.1],Nowshera:[34.01,71.99],Khushab:[32.3,72.34],Swabi:[34.1167,72.4667],Layyah:[30.9647,70.9399],Bhakkar:[31.6333,71.0667],TobaTekSingh:[30.9777,72.4861],Jaranwala:[31.3454,73.4298],Thatta:[24.7497,67.9116],Badin:[24.6552,68.8402],Umerkot:[25.3655,69.7401],Shahdadkot:[27.9,67.93],Ghotki:[28,69.34],Kotri:[25.43,68.32],TandoAllahyar:[25.462,68.7198],Moro:[26.7286,68.0234],Taxila:[33.7475,72.8073],Turbat:[26.0028,63.0506],Zhob:[31.3397,69.4477],UchSharif:[29.2389,71.0615],Benazirabad:[26.65,68],Kotli:[33.15,73.75],Bhimber:[32.9667,74.0833],Mansehra:[34.3333,73.2],Chakwal:[32.93,72.86],Mianwali:[32.5833,71.5333],Samundri:[30.4728,72.97],Sambrial:[32.5167,74.4667],Narowal:[32.1,74.8833],Mirpur:[33.15,73.75],KotAddu:[30.5333,70.95],Lodhran:[29.53,71.64],ShakarGarh:[32.3,74.52],SeraiAlamgir:[32.9,73.73],TaunsaSharif:[30.4333,70.6347],Hasilpur:[29.69,73.69],Hub:[25.0675,66.5814],DeraMuradJamali:[28.0347,67.9179],Dalbandin:[28.9,64.4333],Chaman:[30.9211,66.4506],Loralai:[29.3667,68.4167],Pasni:[25.2828,63.3328],Sibi:[29.5444,67.8778],Pishin:[30.5833,67.9997],Qalat:[29.0167,66.9],Kharian:[32.8167,73.85],Muree:[33.9011,73.3944]},tf=["Karachi","Lahore","Islamabad","Multan","Peshawar","Faisalabad","Rawalpindi","Gujranwala","Hyderabad","Quetta","Sargodha","Sialkot","Bahawalpur","Sukkur","Jhang","Sheikhupura","Larkana","Gujrat","Mardan","Kasur","RahimYarKhan","Sahiwal","Okara","WahCantonment","DeraGhaziKhan","MirpurKhas","Nawabshah","Mingora","Chiniot","Kamoke","Burewala","Jhelum","Sadiqabad","Jacobabad","Shikarpur","Khanewal","Hafizabad","Kohat","Muzaffargarh","Khanpur","Gojra","Bahawalnagar","Muridke","Pakpattan","Abbottabad","TandoAdam","Khairpur","Chishtian","Daska","Dadu","MandiBahauddin","AhmadpurEast","Kamalia","Khuzdar","Vehari","DeraIsmailKhan","Wazirabad","Nowshera","Khushab","Swabi","Layyah","Bhakkar","TobaTekSingh","Jaranwala","Thatta","Badin","Umerkot","Shahdadkot","Ghotki","Kotri","TandoAllahyar","Moro","Taxila","Turbat","Zhob","UchSharif","Benazirabad","Kotli","Bhimber","Mansehra","Chakwal","Mianwali","Samundri","Sambrial","Narowal","Mirpur","KotAddu","Lodhran","ShakarGarh","SeraiAlamgir","TaunsaSharif","Hasilpur","Hub","DeraMuradJamali","Dalbandin","Chaman","Loralai","Pasni","Sibi","Pishin","Qalat","Kharian","Muree"],rR=["Aga Khan University Hospital","Shaukat Khanum Memorial Cancer Hospital","Lahore General Hospital","Services Hospital Lahore","Mayo Hospital Lahore","Jinnah Hospital Lahore","Combined Military Hospital (CMH)","National Institute of Cardiovascular Disease","Pakistan Institute of Medical Sciences (PIMS)","Ziauddin Hospital"],aR=(e,r)=>[{title:"Total Doctors",count:e?.total,icon:"👨‍⚕️",bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Pending Doctors Reviews",count:e?.pending,icon:"⏳",bgColor:"bg-yellow-100",textColor:"text-yellow-600"},{title:"Approved Doctors",count:e?.verified,icon:"✅",bgColor:"bg-green-100",textColor:"text-green-600"},{title:"Rejected Doctors",count:e?.rejected,icon:"❌",bgColor:"bg-red-100",textColor:"text-red-600"},{title:"Total Hospitals",count:r?.total,icon:"🏥",bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Pending Hospitals Reviews",count:r?.pending,icon:"⏳",bgColor:"bg-yellow-100",textColor:"text-yellow-600"},{title:"Approved Hospitals",count:r?.verified,icon:"✅",bgColor:"bg-green-100",textColor:"text-green-600"},{title:"Rejected Hospitals",count:r?.rejected,icon:"❌",bgColor:"bg-red-100",textColor:"text-red-600"}],iR=e=>[{key:"name",label:"Name",value:e.name},{key:"email",label:"Email",value:e.email},{key:"phone",label:"Phone",value:e.phone},{key:"cnic",label:"CNIC",value:e.cnic},{key:"gender",label:"Gender",value:e.gender},{key:"address",label:"Address",value:e.fullAddress}],sR=e=>[{key:"degree",label:"Main Degree",value:e.mainDegree},{key:"speciality",label:"Speciality",value:Array.isArray(e.speciality)?e.speciality.join(", "):e.speciality},{key:"experience",label:"Experience",value:e.experience?`${e.experience} years`:"Not specified"},{key:"fee",label:"Fee",value:e.fee?`Rs. ${e.fee}`:"Not set"},{key:"hospital",label:"Hospital",value:e.hospital},{key:"pmdc",label:"PMDC Number",value:e.pmdcNumber}],ab=()=>c.createElement("svg",{className:"ml-1",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",viewBox:"0 0 16 16"},c.createElement("path",{fillRule:"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"})),oR=()=>c.createElement("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})),cR=()=>c.createElement("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h2l.4 2M7 7h10l1 2m-1 8v2a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-2m12-8V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v2"})),lR=()=>c.createElement("svg",{className:"ml-0",width:"14.01",height:"17.513",viewBox:"0 0 18 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("path",{d:"M9 0C6.61392 0.00270323 4.32637 0.914156 2.63915 2.53442C0.951939 4.15468 0.0028245 6.35146 9.57508e-06 8.64286C-0.00284824 10.5154 0.634084 12.3371 1.8131 13.8286C1.8131 13.8286 2.05855 14.1389 2.09864 14.1837L9 22L15.9046 14.1798C15.9406 14.1381 16.1869 13.8286 16.1869 13.8286L16.1877 13.8262C17.3661 12.3354 18.0028 10.5145 18 8.64286C17.9972 6.35146 17.0481 4.15468 15.3608 2.53442C13.6736 0.914156 11.3861 0.00270323 9 0V0ZM9 11.7857C8.35272 11.7857 7.71997 11.6014 7.18177 11.256C6.64358 10.9107 6.2241 10.4199 5.9764 9.84558C5.72869 9.27129 5.66388 8.63937 5.79016 8.02972C5.91644 7.42006 6.22814 6.86006 6.68583 6.42052C7.14353 5.98098 7.72668 5.68166 8.36152 5.56039C8.99637 5.43912 9.6544 5.50136 10.2524 5.73924C10.8504 5.97711 11.3616 6.37994 11.7212 6.89678C12.0808 7.41362 12.2727 8.02126 12.2727 8.64286C12.2716 9.47608 11.9265 10.2749 11.313 10.864C10.6994 11.4532 9.86765 11.7847 9 11.7857V11.7857Z",fill:"#014E78"})),uR=()=>c.createElement("svg",{width:"19",height:"19",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("path",{d:"M19.8499 19.0004C21.7248 16.9042 22.7082 14.1594 22.5908 11.3495C22.4735 8.53962 21.2647 5.88632 19.2215 3.95379C17.1784 2.02125 14.4619 0.961924 11.6499 1.00105C8.8378 1.04017 6.1519 2.17466 4.16328 4.16328C2.17466 6.1519 1.04017 8.8378 1.00105 11.6499C0.961924 14.4619 2.02125 17.1784 3.95379 19.2215C5.88632 21.2647 8.53962 22.4735 11.3495 22.5908C14.1594 22.7082 16.9042 21.7248 19.0004 19.8499L23.9764 24.8258C24.0892 24.9377 24.2417 25.0003 24.4006 25C24.5595 24.9997 24.7117 24.9364 24.8241 24.8241C24.9364 24.7117 24.9997 24.5595 25 24.4006C25.0003 24.2417 24.9377 24.0892 24.8258 23.9764L19.8499 19.0004ZM4.99921 18.5876C4.09652 17.7009 3.37786 16.6447 2.88446 15.4795C2.39106 14.3143 2.13265 13.0632 2.12407 11.7979C2.11548 10.5326 2.35688 9.27802 2.83442 8.10625C3.31195 6.93448 4.01621 5.86857 4.90678 4.96969C5.79734 4.07082 6.85667 3.35669 8.02396 2.8683C9.19124 2.3799 10.4435 2.12686 11.7088 2.1237C12.9742 2.12054 14.2277 2.36732 15.3974 2.84988C16.5671 3.33243 17.63 4.04126 18.525 4.93567L18.5885 4.99921C19.4808 5.89149 20.1885 6.95078 20.6714 8.11659C21.1542 9.2824 21.4027 10.5319 21.4027 11.7937C21.4026 13.0556 21.154 14.3051 20.6711 15.4708C20.1882 16.6366 19.4804 17.6959 18.5881 18.5881C17.6958 19.4803 16.6365 20.1881 15.4707 20.6709C14.3049 21.1538 13.0554 21.4023 11.7936 21.4022C9.24515 21.4021 6.80115 20.3897 4.99921 18.5876Z",fill:"#014E78",stroke:"#014E78"})),dR=()=>c.createElement("svg",{className:"w-4 h-4 text-emerald-600 group-hover:text-emerald-800 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})),pR=()=>c.createElement("svg",{className:"animate-spin h-16 w-16 text-emerald-600 drop-shadow-lg",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},c.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})),mR=()=>c.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})),hR=()=>c.createElement("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})),fR=()=>c.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})),gR=()=>c.createElement("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})),vR=()=>c.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})),yR=()=>c.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{d:"M13 7a3 3 0 11-6 0 3 3 0 016 0zm-6 8a6 6 0 1112 0H7z"})),H0=()=>c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})),_R=()=>c.createElement("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2H7a2 2 0 01-2-2v-1.586a1 1 0 01.293-.707l9.414-9.414a1 1 0 011.414 0l1.586 1.586a1 1 0 010 1.414l-9.414 9.414A1 1 0 017 19v-1.586z"})),bR=()=>c.createElement("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),wR=()=>c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),F0=({link:e,idx:r,openDropdown:i,setOpenDropdown:o,isMobile:h,onLinkClick:N})=>{const B=i===r,I=()=>{window.scrollTo({top:0,behavior:"smooth"}),N?.()},k=()=>o(B?null:r);return c.createElement("div",{className:`relative ${h?"mb-2":"group"}`,onMouseEnter:h?void 0:()=>o(r),onMouseLeave:h?void 0:()=>o(null)},c.createElement("button",{onClick:h?k:void 0,className:"flex items-center w-full px-3 py-2 xl:text-[15px] text-[14px] font-medium text-[#014e78] bg-white hover:bg-[#014e78] hover:text-white rounded transition-colors duration-150"},c.createElement("span",null,e.label),c.createElement(ab,null)),c.createElement("div",{className:`${h?B?"block":"hidden":B?"absolute left-0 w-64 min-w-fit z-20":"hidden"} bg-[#f9f9f9] mt-1 shadow-lg rounded transition-all duration-200 ${e.label==="Find Doctors"?"max-h-96 overflow-y-auto":""}`},e.dropdown.map((d,E)=>c.createElement(Bi,{key:d.label,to:d.href,onClick:I,className:`block px-4 py-2.5 text-[#014e78] hover:bg-[#f1f1f1] font-medium whitespace-nowrap ${e.label==="Find Doctors"?"text-sm":"text-[15px]"} ${E===0?"border-b border-gray-200":""}`},d.label))))},yo=({href:e,label:r,onClick:i,className:o})=>{const h=()=>{window.scrollTo({top:0,behavior:"smooth"}),i&&i()};return c.createElement(Bi,{onClick:h,to:e,className:`${o} px-3 py-2 text-[15px] font-medium text-[#014e78] hover:bg-[#f7f7f7] rounded transition-colors duration-150`},r)},Iu={validateToken:()=>Ur.post("/hospital/me",formData),signUp:e=>Ur.post("/hospital/signup",e,{headers:{"Content-Type":"multipart/form-data"}}),login:e=>(console.log(e,"sssssssssssssssss"),Ur.post("/hospital/login",e)),updateProfile:(e,r)=>Ur.put(`/hospital/profile/${e}`,r),getProfile:e=>Ur.get(`/hospital/profile/${e}`),getAllPublicHospital:()=>Ur.get("/auth/hospitals")},Id={validateToken:()=>Iu.validateToken(),signUp:e=>Iu.signUp(e),login:e=>Iu.login(e),updateProfile:(e,r)=>{const i=localStorage.getItem("token");return Iu.updateProfile(e,r,i)},getProfile:e=>{const r=localStorage.getItem("token");return Iu.getProfile(e,r)},getAllPublicHospital:()=>Iu.getAllPublicHospital()},ib=ne.createContext(),ER=({children:e})=>{const[r,i]=ne.useState(null),[o,h]=ne.useState([]),[N,B]=ne.useState(!1),[I,k]=ne.useState(null);console.log(o);const d=async()=>{B(!0);try{const{data:v}=await Id.validateToken();console.log(v,"data"),i(v.data)}catch{}finally{B(!1)}};ne.useEffect(()=>{d(),T()},[]);const E=async(v,f)=>{B(!0);try{const{data:R}=await Id.login(v);return localStorage.setItem("token",R.data.token),i(R.data.hospital),zn.success("Login Successfully"),f("/"),R.data.message}catch(R){zn.error(R.response.data.data||"Login failed"),k(R)}finally{B(!1)}},_=async(v,f)=>{B(!0),k(null);try{await Id.signUp(v),zn.success("Form Submitted Successfully"),f("/hospital/login")}catch(R){console.log("err",R.response.data.data),zn.error(R.response.data.data)}finally{B(!1)}},b=async(v,f)=>{try{const R=await Id.updateProfile(v,f);return zn.success("Profile updated successfully"),R.data}catch(R){zn.error(R.response?.data?.message||"Update failed"),k(R)}finally{B(!1)}},T=async()=>{try{const v=await Id.getAllPublicHospital();h(v.data.data.hospitals)}catch(v){console.log(v)}finally{B(!1)}};return c.createElement(ib.Provider,{value:{hospital:r,allPublicHospital:o,loading:N,error:I,HospitalLogin:E,HospitalSignUp:_,HospitalProfile:b}},e)},nu=()=>ne.useContext(ib),SR=(e="")=>e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-"),q0=({idx:e=0,openDropdown:r,setOpenDropdown:i,isMobile:o=!1,onLinkClick:h})=>{const N=r===e,{allPublicHospital:B=[]}=nu(),I=()=>{window.scrollTo({top:0,behavior:"smooth"}),h?.()},k=ne.useMemo(()=>{const b={};return B.forEach(T=>{const v=T.city&&String(T.city).trim()||T.location&&T.location.city&&String(T.location.city).trim()||"Unknown";b[v]||(b[v]=0),b[v]+=1}),b},[B]),d=ne.useMemo(()=>Object.keys(k).sort(),[k]),E=b=>`/hospitals/${SR(b)}`,_=()=>i(N?null:e);return c.createElement("div",{className:`relative ${o?"mb-2":"group"}`,onMouseEnter:o?void 0:()=>i(e),onMouseLeave:o?void 0:()=>i(null)},c.createElement("button",{onClick:o?_:void 0,className:"flex items-center w-full px-3 py-2 xl:text-[15px] text-[14px] font-medium text-[#014e78] bg-white hover:bg-[#014e78] hover:text-white rounded transition-colors duration-150","aria-expanded":N,"aria-haspopup":"true"},c.createElement("span",null,"Hospitals"),c.createElement(ab,null)),c.createElement("div",{className:`${o?N?"block":"hidden":N?"absolute left-0 w-64 min-w-fit z-20":"hidden"} bg-[#f9f9f9] mt-1 shadow-lg rounded transition-all duration-200 ${Object.keys(k).length>6?"max-h-96 overflow-y-auto":""}`},c.createElement(Bi,{to:"/hospitals",onClick:I,className:"block px-4 py-2.5 text-[#014e78] hover:bg-[#f1f1f1] font-medium whitespace-nowrap text-[15px] border-b border-gray-200"},"All Hospitals (City wise)"),d.length===0?c.createElement("div",{className:"px-4 py-3 text-sm text-gray-600"},"No hospitals found."):c.createElement("div",{className:"pt-0"},d.map(b=>c.createElement(Bi,{key:b,to:E(b),onClick:I,className:"block px-4 py-2.5 text-[#014e78] hover:bg-[#f1f1f1] font-medium whitespace-nowrap text-[15px]"},b)))))},Pi={validateToken:()=>Ur.get("/admin/me"),login:e=>Ur.post("/admin/login",e),getAllDoctor:()=>Ur.get("/admin/doctors"),getPendingDoctors:()=>Ur.get("/admin/doctors/pending"),getPendingHospitals:()=>Ur.get("/admin/hospitals/pending"),getApprovedDoctors:()=>Ur.get("/admin/doctors/verified"),getApprovedHospitals:()=>Ur.get("/admin/hospitals/verified"),getRejectedDoctors:()=>Ur.get("/admin/doctors/rejected"),getRejectedHospitals:()=>Ur.get("/admin/hospitals/rejected"),getDoctorsStatistics:()=>Ur.get("/admin/doctors/stats"),getHospitalStatistics:()=>Ur.get("/admin/hospitals/stats"),approveDoctor:e=>Ur.post(`/admin/doctors/verification/${e}`,{status:"verified"}),rejectDoctor:e=>Ur.post(`/admin/doctors/verification/${e}`,{status:"rejected"}),approveHospital:e=>Ur.post(`/admin/hospitals/verification/${e}`,{status:"verified"}),rejectHospital:(e,r)=>Ur.post(`/admin/hospitals/verification/${e}`,{status:"rejected",reason:r}),doctorAction:(e,r)=>Ur.post(`/admin/doctors/action/${e}`,{action:r}),hospitalAction:(e,r)=>Ur.post(`/admin/hospitals/action/${e}`,{action:r}),uploadDocuments:(e,r)=>Ur.post(`/admin/doctor/documents/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}}),uploadHospitalsDocuments:(e,r)=>Ur.post(`/admin/hospitals/documents/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}}),doctorProfilePicture:(e,r)=>Ur.post(`/admin/doctor/picture/${e}`,r,{headers:{"Content-Type":"multipart/form-data"}}),hospitalProfilePicture:(e,r)=>Ur.post(`/admin/hospital/picture/${e}`,r,{headers:{"Content-Type":"multipart/form-data"}}),updateDoctorDetails:(e,r)=>Ur.put(`/admin/doctor/${e}`,r)},ji={validateToken:()=>Pi.validateToken(),login:e=>Pi.login(e),getAllDoctor:()=>Pi.getAllDoctor(),getPendingDoctors:()=>Pi.getPendingDoctors(),getPendingHospitals:()=>Pi.getPendingHospitals(),getApprovedDoctors:()=>Pi.getApprovedDoctors(),getApprovedHospitals:()=>Pi.getApprovedHospitals(),getRejectedDoctors:()=>Pi.getRejectedDoctors(),getDoctorsStatistics:()=>Pi.getDoctorsStatistics(),getHospitalStatistics:()=>Pi.getHospitalStatistics(),getRejectedHospitals:()=>Pi.getRejectedHospitals(),approveDoctor:e=>Pi.approveDoctor(e),rejectDoctor:e=>Pi.rejectDoctor(e),approveHospital:e=>Pi.approveHospital(e),rejectHospital:(e,r)=>Pi.rejectHospital(e,r),doctorAction:(e,r)=>Pi.doctorAction(e,r),hospitalAction:(e,r)=>Pi.hospitalAction(e,r),uploadDocuments:(e,r)=>Pi.uploadDocuments(e,r),uploadHospitalsDocuments:(e,r)=>Pi.uploadHospitalsDocuments(e,r),doctorProfilePicture:(e,r)=>Pi.doctorProfilePicture(e,r),hospitalProfilePicture:(e,r)=>Pi.hospitalProfilePicture(e,r),updateDoctorDetails:(e,r)=>Pi.updateDoctorDetails(e,r)},sb=ne.createContext(),xR=({children:e})=>{const[r,i]=ne.useState(null),[o,h]=ne.useState([]),[N,B]=ne.useState([]),[I,k]=ne.useState([]),[d,E]=ne.useState([]),[_,b]=ne.useState([]),[T,v]=ne.useState([]),[f,R]=ne.useState(null),[g,F]=ne.useState(null);console.log(f,"sssssssssss"),console.log(g,"ssssssssssssss");const[m,P]=ne.useState({}),[S,H]=ne.useState({}),x=(Ze,Ht)=>P(or=>({...or,[Ze]:Ht})),y=(Ze,Ht)=>H(or=>({...or,[Ze]:Ht})),w=async()=>{x("session",!0);try{const{data:Ze}=await ji.validateToken(),Ht=Ze?.data;console.log(Ht),i(Ht),Ht?.role==="admin"&&await J()}catch(Ze){y("session",Ze)}finally{x("session",!1)}},p=async(Ze,Ht)=>{x("login",!0);try{const or=await ji.login(Ze),Nr=or?.data?.data?.token;eg(Nr);const jn=or?.data?.data?.user;return i(jn),zn.success("Admin login successfully"),await J(),Ht("/admin/dashboard"),or}catch(or){throw y("login",or),or}finally{x("login",!1)}},C=()=>{tg(),i(null)},A=async()=>{x("pendingDoctors",!0);try{const Ze=await ji.getPendingDoctors();h(Ze.data.data.doctors),y("pendingDoctors",null)}catch(Ze){y("pendingDoctors",Ze)}finally{x("pendingDoctors",!1)}},M=async()=>{x("approvedDoctors",!0);try{const Ze=await ji.getApprovedDoctors();B(Ze.data.data.doctors),y("approvedDoctors",null)}catch(Ze){y("approvedDoctors",Ze)}finally{x("approvedDoctors",!1)}},j=async()=>{x("rejectedDoctors",!0);try{const Ze=await ji.getRejectedDoctors();k(Ze.data.data.doctors),y("rejectedDoctors",null)}catch(Ze){y("rejectedDoctors",Ze)}finally{x("rejectedDoctors",!1)}},U=async()=>{x("pendingHospitals",!0);try{const Ze=await ji.getPendingHospitals();E(Ze.data.data.hospitals),y("pendingHospitals",null)}catch(Ze){y("pendingHospitals",Ze)}finally{x("pendingHospitals",!1)}},z=async()=>{x("approvedHospitals",!0);try{const Ze=await ji.getApprovedHospitals();b(Ze.data.data.hospitals),y("approvedHospitals",null)}catch(Ze){y("approvedHospitals",Ze)}finally{x("approvedHospitals",!1)}},W=async()=>{x("rejectedHospitals",!0);try{const Ze=await ji.getRejectedHospitals();v(Ze.data.data.hospitals),y("rejectedHospitals",null)}catch(Ze){y("rejectedHospitals",Ze)}finally{x("rejectedHospitals",!1)}},Z=async()=>{x("statistics",!0);try{const Ze=await ji.getDoctorsStatistics();R(Ze.data.data.statistics),y("statistics",null)}catch(Ze){y("statistics",Ze)}finally{x("statistics",!1)}},ce=async()=>{x("hospitalStatistics",!0);try{const Ze=await ji.getHospitalStatistics();F(Ze.data.data.statistics),y("hospitalStatistics",null)}catch(Ze){y("hospitalStatistics",Ze)}finally{x("hospitalStatistics",!1)}},J=async()=>{await Promise.all([Z(),ce(),A(),M(),j(),U(),z(),W()])},Ee=async Ze=>{await ji.approveDoctor(Ze),zn.success("Doctor approved successfully"),await J()},Ce=async Ze=>{await ji.approveHospital(Ze),zn.success("Hospital approved successfully"),await J()},Re=async Ze=>{await ji.rejectDoctor(Ze),zn.success("Doctor rejected successfully"),await J()},ye=async(Ze,Ht)=>{await ji.rejectHospital(Ze,Ht),zn.success("Hospital rejected successfully"),await J()},Te=async(Ze,Ht)=>{await ji.doctorAction(Ze,Ht),zn.success("Doctor action updated successfully")},He=async(Ze,Ht)=>{await ji.hospitalAction(Ze,Ht),zn.success("Hospital action updated successfully")},we=async(Ze,Ht)=>{const or=await ji.uploadDocuments(Ze,Ht);return zn.success("Doctor documents uploaded"),or},Je=async(Ze,Ht)=>{const or=await ji.uploadHospitalsDocuments(Ze,Ht);return zn.success("Hospital documents uploaded"),or},Be=async(Ze,Ht)=>{await ji.doctorProfilePicture(Ze,Ht),zn.success("Doctor profile picture updated")},nt=async(Ze,Ht)=>{await ji.hospitalProfilePicture(Ze,Ht),zn.success("Hospital profile picture updated")},Qe=async(Ze,Ht)=>{const Nr=(await ji.updateDoctorDetails(Ze,Ht))?.data?.data?.doctor||{},jn=cr=>({...cr,...Ht,...Nr});h(cr=>cr.map(Gn=>Gn._id===Ze?jn(Gn):Gn)),B(cr=>cr.map(Gn=>Gn._id===Ze?jn(Gn):Gn)),k(cr=>cr.map(Gn=>Gn._id===Ze?jn(Gn):Gn)),zn.success("Doctor details updated")};return ne.useEffect(()=>{w()},[]),c.createElement(sb.Provider,{value:{admin:r,login:p,logout:C,loading:m,error:S,pendingDoctors:o,approvedDoctors:N,rejectedDoctors:I,pendingHospitals:d,approvedHospitals:_,rejectedHospitals:T,statistics:f,hospitalStatistics:g,fetchPendingDoctors:A,fetchApprovedDoctors:M,fetchRejectedDoctors:j,fetchPendingHospitals:U,fetchApprovedHospitals:z,fetchRejectedHospitals:W,DoctorsStatistics:Z,HospitalStatistics:ce,approveDoctor:Ee,approveHospital:Ce,rejectDoctor:Re,rejectHospital:ye,doctorAction:Te,HospitalAction:He,DoctorDocumentUpload:we,HospitalDocumentUpload:Je,doctorProfilePicture:Be,hospitalProfilePicture:nt,updateDoctorDetails:Qe}},e)},wc=()=>ne.useContext(sb),Cl={validateToken:()=>Ur.get("/doctor/me"),signUp:e=>Ur.post("/doctor/signup",e),login:e=>Ur.post("/doctor/login",e),updateProfile:e=>Ur.post("/doctor/picture",e,{headers:{"Content-Type":"multipart/form-data"}}),uploadDocuments:e=>Ur.post("/doctor/documents",e,{headers:{"Content-Type":"multipart/form-data"}}),updateDoctorProfile:e=>Ur.put("/doctor",e),getAllPublicDoctors:()=>Ur.get("/auth/doctors"),recommendationsApiSearch:e=>Ur.post("")},Tl={validateToken:()=>Cl.validateToken(),signUp:e=>Cl.signUp(e),login:e=>Cl.login(e),updateProfile:e=>Cl.updateProfile(e),uploadDocuments:e=>Cl.uploadDocuments(e),updateDoctorProfile:e=>Cl.updateDoctorProfile(e),getAllPublicDoctors:()=>Cl.getAllPublicDoctors(),recommendationsApiSearch:e=>Cl.recommendationsApiSearch()},ob=ne.createContext(),RR=({children:e})=>{const[r,i]=ne.useState(null),[o,h]=ne.useState(!1),[N,B]=ne.useState(null),[I,k]=ne.useState(null),[d,E]=ne.useState([]),_=async()=>{h(!0);try{const{data:P}=await Tl.validateToken();i(P.data)}catch(P){console.log(P)}finally{h(!1)}};ne.useEffect(()=>{_(),g()},[]);const b=async(P,S)=>{h(!0),B(null);try{const H=await Tl.login(P);return i(H.data.data.user),eg(H.data.data.token),H.data.data.user.hasDocuments?S("/"):S("/doctor/upload-documents"),zn.success("Login Successfully"),H.response.data.message}catch(H){zn.error(H.response.data.data)}finally{h(!1)}},T=async(P,S)=>{h(!0),B(null);try{await Tl.signUp(P),zn.success("Form Submitted Successfully"),S("/doctor/login")}catch(H){console.log(H),zn.error(H.response.data.data)}finally{h(!1)}},v=async P=>{try{const S=await Tl.updateProfile(P);return zn.success(S.data.data.message),S}catch(S){console.log(S,"profile err"),zn.error(S?.message||"Update failed")}},f=async(P,S)=>{console.log("formdata",P),h(!0);try{const H=await Tl.uploadDocuments(P);return console.log("document",H),console.log(H.data.data.documents[0].documentUrl),S(""),zn.success("Documents Uploaded"),H}catch(H){zn.error(H?.data||"Upload failed")}finally{h(!1)}},R=async P=>{console.log(P);try{const S=await Tl.updateDoctorProfile(P);return console.log(S),zn.success(S.data.data.message),S}catch(S){console.log(S,"profile err"),zn.error(S?.message||"Update failed")}},g=async()=>{try{const P=await Tl.getAllPublicDoctors();return E(P.data.data.doctors),P}catch(P){console.log(P)}},F=async P=>{try{const S=await Tl.recommendationsApiSearch(P)}catch(S){console.log(S)}finally{h(!1)}},m=P=>{P("/doctor/login"),tg(),i(null)};return c.createElement(ob.Provider,{value:{doctor:r,loading:o,error:N,DoctorLogin:b,DoctorSignUp:T,UpdateProfilePic:v,DoctorProfileUpdate:R,DoctorDocumentUpload:f,logout:m,allDoctors:d,DoctorRecommendationsApiSearch:F}},e)},Ms=()=>ne.useContext(ob),kR={getDoctorRecommendations:e=>(console.log("syptoms",e),Ur.post("/ai/doctor-recommendations",{symptoms:e}))},CR={getDoctorRecommendations:e=>kR.getDoctorRecommendations(e)};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PR=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,i,o)=>o?o.toUpperCase():i.toLowerCase()),V0=e=>{const r=PR(e);return r.charAt(0).toUpperCase()+r.slice(1)},cb=(...e)=>e.filter((r,i,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===i).join(" ").trim(),NR=e=>{for(const r in e)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=ne.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:h="",children:N,iconNode:B,...I},k)=>ne.createElement("svg",{ref:k,...AR,width:r,height:r,stroke:e,strokeWidth:o?Number(i)*24/Number(r):i,className:cb("lucide",h),...!N&&!NR(I)&&{"aria-hidden":"true"},...I},[...B.map(([d,E])=>ne.createElement(d,E)),...Array.isArray(N)?N:[N]]));/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=(e,r)=>{const i=ne.forwardRef(({className:o,...h},N)=>ne.createElement(OR,{ref:N,iconNode:r,className:cb(`lucide-${TR(V0(e))}`,`lucide-${e}`,o),...h}));return i.displayName=V0(e),i};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Z0=Ls("activity",DR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$0=Ls("circle-alert",MR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],IR=Ls("circle-check-big",LR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],BR=Ls("circle-user",jR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],UR=Ls("clock",zR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],lb=Ls("cloud-upload",HR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qR=Ls("file-text",FR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ZR=Ls("heart",VR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],WR=Ls("image",$R);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],KR=Ls("send",GR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],QR=Ls("shield",YR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],vm=Ls("sparkles",JR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],qu=Ls("stethoscope",XR);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],tk=Ls("trending-up",ek);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],rk=Ls("user",nk);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ik=Ls("users",ak);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ng=Ls("x",sk),W0=({isOpen:e,onClose:r})=>{const[i,o]=ne.useState([]),[h,N]=ne.useState(""),[B,I]=ne.useState(!1),k=ne.useRef(null),d=ne.useRef(null),E=11,_=h.trim().length>=E;ne.useEffect(()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},[i]),ne.useEffect(()=>{e&&i.length===0&&o([{id:1,type:"bot",content:"Hello! I'm Dr. AI, your virtual health assistant. I'm here to help you find the right doctor based on your symptoms. Please describe what you're experiencing in detail (minimum 11 characters).",timestamp:new Date}])},[e]),ne.useEffect(()=>{const g=F=>{e&&d.current&&!d.current.contains(F.target)&&v()};return e&&document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[e,i]);const b=async()=>{if(!h.trim()||B||!_)return;const g={id:Date.now(),type:"user",content:h,timestamp:new Date};o(F=>[...F,g]),N(""),I(!0);try{const F=await CR.getDoctorRecommendations(h);console.log("Full API response:",F);const m=F?.data?.data;console.log("aiRecommendationService",F),console.log("API Response data:",F?.data),console.log("Total doctors analyzed:",F?.data?.totalDoctorsAnalyzed),console.log("Recommendations data:",m);const P={id:Date.now()+1,type:"bot",content:"Based on your symptoms, here's my detailed medical analysis and recommendations:",timestamp:new Date,recommendations:m,apiResponse:F?.data};o(S=>[...S,P])}catch(F){console.error("Error getting recommendations:",F);const m={id:Date.now()+1,type:"bot",content:"I apologize, but I'm having trouble processing your request right now. Please try again in a moment.",timestamp:new Date,isError:!0};o(P=>[...P,m]),zn.error("Failed to get recommendations. Please try again.")}finally{I(!1)}},T=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),_?b():zn.error(`Please enter at least ${E} characters to describe your symptoms.`))},v=()=>{o([]),N(""),r()},f=g=>{new URLSearchParams({specialty:g,source:"ai-recommendation"}),v();const F=g.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");window.location.href=`/quickMed/doctor/${F}`,zn.success(`Searching for ${g} specialists...`)},R=g=>{v();const m=`/quickMed/doctor/profile/${g.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${g.doctorId}`;window.location.href=m,zn.success(`Viewing ${g.name}'s profile...`)};return e?c.createElement("div",{className:"fixed inset-0 z-50 pointer-events-none flex justify-end"},c.createElement("div",{ref:d,className:"pointer-events-auto relative w-full max-w-sm h-full bg-white shadow-xl flex flex-col",role:"dialog","aria-modal":"true","aria-label":"Quick help chat"},c.createElement("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-emerald-600 to-blue-600 text-white"},c.createElement("div",{className:"flex items-center gap-3"},c.createElement("div",{className:"relative"},c.createElement(qu,{className:"w-6 h-6"}),c.createElement(vm,{className:"absolute -top-1 -right-1 w-3 h-3 text-yellow-300 animate-pulse"})),c.createElement("div",null,c.createElement("h3",{className:"font-semibold text-sm"},"Dr. AI Assistant"),c.createElement("p",{className:"text-xs opacity-90"},"Virtual Health Consultation"))),c.createElement("button",{onClick:v,className:"p-2 hover:bg-white/20 rounded-full transition-colors","aria-label":"Close quick help"},c.createElement(ng,{className:"w-5 h-5"}))),c.createElement("div",{ref:k,className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gradient-to-b from-blue-50/30 to-white"},i.map(g=>{const F=g.type==="user";return c.createElement("div",{key:g.id,className:`flex ${F?"justify-end":"justify-start"} mb-3`},c.createElement("div",{className:`flex items-start gap-3 max-w-[88%] ${F?"flex-row-reverse":"flex-row"}`},c.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${F?"bg-gradient-to-br from-emerald-500 to-emerald-600 shadow-lg":"bg-gradient-to-br from-blue-500 to-blue-600 shadow-lg"}`},F?c.createElement(rk,{className:"w-5 h-5 text-white"}):c.createElement("div",{className:"relative"},c.createElement(qu,{className:"w-5 h-5 text-white"}),c.createElement(vm,{className:"absolute -top-1 -right-1 w-2 h-2 text-yellow-300"}))),c.createElement("div",{className:`rounded-2xl px-4 py-3 shadow-sm ${F?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white":g.isError?"bg-red-50 border border-red-200 text-red-800":"bg-white border border-gray-200 text-gray-800 shadow-md"}`},c.createElement("p",{className:"text-sm whitespace-pre-wrap leading-relaxed"},g.content),g.apiResponse&&c.createElement("div",{className:"mt-4 space-y-3"},c.createElement("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-xl border border-purple-200"},c.createElement("div",{className:"flex items-center gap-2 mb-3"},c.createElement(tk,{className:"w-4 h-4 text-purple-600"}),c.createElement("h4",{className:"font-semibold text-purple-800 text-sm"},"Analysis Summary")),c.createElement("div",{className:"grid grid-cols-2 gap-3 text-xs"},c.createElement("div",{className:"flex items-center gap-2"},c.createElement(ik,{className:"w-3 h-3 text-purple-600"}),c.createElement("span",{className:"text-purple-700"},`${g.apiResponse?.totalDoctorsAnalyzed||g.apiResponse?.data?.totalDoctorsAnalyzed||g.recommendations?.totalDoctorsAnalyzed||g.recommendations?.analysis?.totalDoctorsAnalyzed||0} doctors analyzed`)),c.createElement("div",{className:"flex items-center gap-2"},c.createElement(UR,{className:"w-3 h-3 text-purple-600"}),c.createElement("span",{className:"text-purple-700"},(()=>{const m=g.apiResponse?.timestamp||g.recommendations?.timestamp||new Date;return new Date(m).toLocaleTimeString()})())))),g.recommendations?.analysis?.symptomAnalysis&&c.createElement("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-xl border border-blue-200"},c.createElement("div",{className:"flex items-center gap-2 mb-2"},c.createElement(Z0,{className:"w-4 h-4 text-blue-600"}),c.createElement("h4",{className:"font-semibold text-blue-800 text-sm"},"Symptom Analysis")),c.createElement("p",{className:"text-blue-700 text-xs leading-relaxed"},g.recommendations.analysis.symptomAnalysis)),g.recommendations?.analysis?.generalAdvice&&c.createElement("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 p-4 rounded-xl border border-yellow-200"},c.createElement("div",{className:"flex items-center gap-2 mb-2"},c.createElement(ZR,{className:"w-4 h-4 text-yellow-600"}),c.createElement("h4",{className:"font-semibold text-yellow-800 text-sm"},"Health Advice")),c.createElement("p",{className:"text-yellow-700 text-xs leading-relaxed"},g.recommendations.analysis.generalAdvice)),g.recommendations?.analysis?.recommendedSpecialities&&c.createElement("div",{className:"bg-gradient-to-r from-emerald-50 to-emerald-100 p-4 rounded-xl border border-emerald-200"},c.createElement("div",{className:"flex items-center gap-2 mb-3"},c.createElement(QR,{className:"w-4 h-4 text-emerald-600"}),c.createElement("h4",{className:"font-semibold text-emerald-800 text-sm"},"Recommended Specialties")),c.createElement("div",{className:"flex flex-wrap gap-2"},g.recommendations.analysis.recommendedSpecialities.map((m,P)=>c.createElement("button",{key:P,onClick:()=>f(m),className:"inline-block bg-emerald-200 text-emerald-800 text-xs px-3 py-1.5 rounded-full font-medium border border-emerald-300 hover:bg-emerald-300 hover:border-emerald-400 transition-all duration-200 cursor-pointer"},m)))),g.recommendations?.analysis?.recommendations&&c.createElement("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm"},c.createElement("div",{className:"flex items-center gap-2 mb-3"},c.createElement(qu,{className:"w-4 h-4 text-gray-600"}),c.createElement("h4",{className:"font-semibold text-gray-800 text-sm"},"Top Doctors (",g.recommendations.analysis.recommendations.length,")")),c.createElement("div",{className:"space-y-3 max-h-48 overflow-y-auto"},g.recommendations.analysis.recommendations.slice(0,3).map((m,P)=>c.createElement("div",{key:P,className:"border border-gray-200 rounded-lg p-3 bg-gradient-to-r from-gray-50 to-white hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>R(m)},c.createElement("div",{className:"flex justify-between items-start mb-2"},c.createElement("h5",{className:"font-semibold text-gray-800 text-sm"},m.name),c.createElement("span",{className:"text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full"},m.relevanceScore,"/10")),c.createElement("div",{className:"flex flex-wrap gap-1 mb-2"},m.speciality.slice(0,2).map((S,H)=>c.createElement("span",{key:H,className:"inline-block bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-md font-medium"},S))),c.createElement("div",{className:"flex items-center gap-4 text-xs text-gray-600"},c.createElement("span",{className:"flex items-center gap-1"},c.createElement(Z0,{className:"w-3 h-3"}),m.experience," years"),c.createElement("span",null,"•"),c.createElement("span",null,m.city||"Location N/A")),c.createElement("div",{className:"mt-2 text-xs text-gray-500"},m.reasoning)))))),c.createElement("span",{className:"text-xs opacity-70 mt-2 block"},g.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})))))}),B&&c.createElement("div",{className:"flex justify-start mb-3"},c.createElement("div",{className:"flex items-start gap-3"},c.createElement("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg"},c.createElement(qu,{className:"w-5 h-5 text-white"})),c.createElement("div",{className:"bg-white border border-gray-200 rounded-2xl px-4 py-3 shadow-md"},c.createElement("div",{className:"flex items-center gap-2"},c.createElement("div",{className:"flex space-x-1"},c.createElement("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),c.createElement("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),c.createElement("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})),c.createElement("span",{className:"text-sm text-gray-600 ml-2"},"Analyzing symptoms...")))))),c.createElement("div",{className:"p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-white"},c.createElement("div",{className:"flex space-x-3"},c.createElement("div",{className:"flex-1 relative"},c.createElement("textarea",{value:h,onChange:g=>N(g.target.value),onKeyDown:T,placeholder:`Describe your symptoms in detail (minimum ${E} characters)...`,className:`w-full px-4 py-3 text-sm border rounded-xl focus:outline-none focus:ring-2 resize-none shadow-sm transition-all duration-200 ${h.length>0&&!_?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-emerald-500 focus:border-transparent"}`,rows:1,maxLength:500,disabled:B}),c.createElement("div",{className:"absolute right-3 bottom-2 flex items-center gap-2"},h.length>0&&!_&&c.createElement($0,{className:"w-4 h-4 text-red-400"}),c.createElement("div",{className:`text-xs ${h.length>0&&!_?"text-red-400":h.length>=E?"text-emerald-500":"text-gray-400"}`},h.length,"/",E))),c.createElement("button",{onClick:b,disabled:!h.trim()||B||!_,className:`px-4 py-3 rounded-xl transition-all duration-200 flex items-center justify-center shadow-lg transform hover:scale-105 ${_&&h.trim()?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white hover:from-emerald-600 hover:to-emerald-700 hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-label":"Send message"},c.createElement(KR,{className:"w-4 h-4"}))),h.length>0&&!_&&c.createElement("div",{className:"mt-2 flex items-center gap-2 text-xs text-red-500"},c.createElement($0,{className:"w-3 h-3"}),c.createElement("span",null,"Please enter at least ",E," characters to describe your symptoms"))))):null},ub=({className:e="",variant:r="default"})=>{const[i,o]=ne.useState(!1),h=()=>o(!0),N=()=>o(!1);return r==="floating"?c.createElement(c.Fragment,null,c.createElement("button",{onClick:h,className:"fixed bottom-6 right-6 z-40 bg-emerald-600 hover:bg-emerald-700 text-white p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-110 group",title:"Quick Help - Get AI Doctor Recommendations"},c.createElement("div",{className:"relative"},c.createElement(qu,{className:"w-6 h-6"}),c.createElement(vm,{className:"absolute -top-1 -right-1 w-4 h-4 text-yellow-300 animate-pulse"}))),c.createElement(W0,{isOpen:i,onClose:N})):c.createElement(c.Fragment,null,c.createElement("button",{onClick:h,className:`inline-flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors duration-200 font-medium ${e}`},c.createElement(qu,{className:"w-4 h-4"}),c.createElement("span",null,"Quick Help"),c.createElement(vm,{className:"w-4 h-4 text-yellow-300"})),c.createElement(W0,{isOpen:i,onClose:N}))},G0=({onClick:e,className:r="",disabled:i})=>c.createElement(Bi,{to:i?"#":"/login",onClick:i?o=>o.preventDefault():e,className:`px-4 py-2 border-2 border-[#004d71] text-[#004d71] bg-white rounded font-bold hover:bg-[#f7f7f7] transition-colors duration-150 ${i?"pointer-events-none opacity-50":""} ${r}`},"Login"),db=()=>{const[e,r]=ne.useState(!1),[i,o]=ne.useState(null),{admin:h}=wc(),N=ne.useRef(null),{doctor:B}=Ms(),{hospital:I,allPublicHospital:k}=nu(),{user:d}=So(),E=h||B||I||d,_=()=>window.scrollTo({top:0,behavior:"smooth"}),b=()=>r(g=>!g),T=()=>{r(!1),o(null)};ne.useEffect(()=>{const g=F=>{N.current&&!N.current.contains(F.target)&&T()};return e&&document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[e]);const v=(g=!1)=>h?c.createElement(yo,{href:"/admin/dashboard",label:"Admin Dashboard",onClick:g?T:void 0}):c.createElement(yo,{href:E?"#":"/admin/login",label:"Admin",onClick:g?T:void 0,className:E?"pointer-events-none opacity-50":""}),f=()=>c.createElement("nav",{className:"hidden lg:flex items-center space-x-4 ml-4 xl:ml-8 flex-1"},U0.map((g,F)=>g.label==="Hospitals"?c.createElement(q0,{key:g.label,idx:F,openDropdown:i,setOpenDropdown:o,isMobile:!1,onLinkClick:T}):g.dropdown?c.createElement(F0,{key:g.label,link:g,idx:F,openDropdown:i,setOpenDropdown:o}):c.createElement(yo,{key:`${g.label}-${F}`,href:g.href,label:g.label})),c.createElement("div",{className:"flex justify-end space-x-3 w-fit ms-auto"},c.createElement(G0,{className:"ml-2",disabled:E}),c.createElement(yo,{href:E?"#":"/doctor/login",label:"Doctor",className:E?"pointer-events-none opacity-50":""}),c.createElement(yo,{href:E?"#":"/hospital/login",label:"Hospital",className:E?"pointer-events-none opacity-50":""}),v(!1),B&&c.createElement(yo,{href:"/doctor/profile",label:"My Profile"}),I&&c.createElement(yo,{href:"/doctor/profile",label:"My Hospital Profile"}),d&&c.createElement(yo,{href:"/profile",label:"My Profile"}))),R=()=>e&&c.createElement("nav",{ref:N,className:"absolute top-full left-0 w-full bg-white shadow-lg z-40 flex flex-col py-4 px-4 lg:hidden animate-fade-in max-h-[80vh] overflow-y-auto"},U0.map((g,F)=>g.label==="Hospitals"?c.createElement(q0,{key:g.label,idx:F,openDropdown:i,setOpenDropdown:o,isMobile:!0,onLinkClick:T}):g.dropdown?c.createElement(F0,{key:g.label,link:g,idx:F,openDropdown:i,setOpenDropdown:o,isMobile:!0,onLinkClick:T}):c.createElement(yo,{key:g.label,href:g.href,label:g.label,onClick:T})),c.createElement(G0,{onClick:T,className:"mt-2",disabled:E}),c.createElement(yo,{href:E?"#":"/doctor/login",label:"Doctor",onClick:T,className:E?"pointer-events-none opacity-50":""}),c.createElement(yo,{href:E?"#":"/register/hospital",label:"Register Hospital",className:`flex items-center gap-2 px-4 py-2 bg-[#004d71] text-white rounded border border-[#004d71] font-medium hover:bg-[#014e78] transition-colors duration-150 ${E?"pointer-events-none opacity-50":""}`}),v(!0),B&&c.createElement(yo,{href:"/doctor/profile",label:"My Profile"}),I&&c.createElement(yo,{href:"/doctor/profile",label:"My Hospital Profile"}),d&&c.createElement(yo,{href:"/profile",label:"My Profile"}));return c.createElement("header",{className:"bg-white shadow-md sticky top-0 z-50 w-full"},c.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"flex items-center justify-between h-20 relative"},c.createElement(Bi,{to:"/","aria-label":"quickMed Logo",className:"flex items-center",onClick:_},c.createElement("img",{src:"/quickMed//images/logo.png",alt:"logo",className:"w-[120px] h-auto"})),c.createElement(f,null),c.createElement("button",{onClick:b,className:"lg:hidden inline-flex items-center justify-center p-2 rounded-md text-[#014e78] hover:text-white hover:bg-[#014e78]"},c.createElement(oR,null)),c.createElement(R,null),c.createElement("a",{target:"_self",href:"https://wa.me/923488597922","aria-label":"Sadeeq Helpline",className:"lg:hidden absolute right-16 top-1/2 -translate-y-1/2 text-[#014e78] hover:text-[#004d71]"}))))},ok=()=>c.createElement("footer",{className:"bg-emerald-900 text-emerald-100"},c.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},Wx.map((e,r)=>c.createElement("div",{key:r,className:"rounded-xl bg-emerald-800 bg-opacity-60 p-6 mb-4"},c.createElement("h3",{className:"text-lg font-semibold mb-4 text-emerald-50"},e.title),c.createElement("ul",{className:"space-y-2"},e.links.map((i,o)=>c.createElement("li",{key:o},i.href.startsWith("/")?c.createElement(Bi,{to:i.href,className:"text-emerald-200 hover:text-white transition-colors duration-200"},i.name):c.createElement("a",{href:i.href,className:"text-emerald-200 hover:text-white transition-colors duration-200"},i.name))))))),c.createElement("div",{className:"border-t border-emerald-700 mt-12 pt-8"},c.createElement("div",{className:"flex flex-col md:flex-row justify-between items-center"},c.createElement("div",{className:"mb-4 md:mb-0"},c.createElement("div",{className:"flex items-center"},c.createElement("svg",{className:"h-8 w-8 text-emerald-100 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2H4a1 1 0 01-1-1V4z",clipRule:"evenodd"})),c.createElement("span",{className:"text-xl font-bold text-emerald-50"},"quickMed")),c.createElement("p",{className:"text-emerald-200 mt-2"},"Pakistan's most trusted healthcare platform")),c.createElement("div",{className:"flex space-x-4"},Gx.map((e,r)=>c.createElement("a",{key:r,href:e.href,className:"text-2xl hover:text-emerald-200 transition-colors duration-200",title:e.name},e.icon)))),c.createElement("div",{className:"text-center mt-8 pt-8 border-t border-emerald-700"},c.createElement("p",{className:"text-emerald-200 text-sm"},"© 2024 Sadeeq and Haider. All rights reserved. |",c.createElement(Bi,{to:"#",className:"hover:text-white ml-1"},"Privacy Policy")," ","|",c.createElement(Bi,{to:"#",className:"hover:text-white ml-1"},"Terms of Service")))))),pb=()=>c.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80"},c.createElement("div",{className:"flex flex-col items-center"},c.createElement(pR,null),c.createElement("span",{className:"mt-4 text-lg font-semibold text-emerald-700 animate-pulse"},"Loading..."))),ck=()=>{const{loading:e}=wc();return e.session?c.createElement(pb,null):c.createElement("div",{className:"min-h-screen bg-gray-50"},c.createElement(db,null),c.createElement("main",{className:"flex-1"},c.createElement(b_,null)),c.createElement(ok,null),c.createElement(ub,{variant:"floating"}))},lk=()=>{const{loading:e}=wc(),{loading:r}=Ms(),{user:i}=So();return e.session?c.createElement(pb,null):c.createElement(c.Fragment,null,c.createElement(db,null),c.createElement("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50"},c.createElement(b_,null)))},$u=({options:e=[],value:r="",onChange:i=()=>{},placeholder:o="Select",icon:h,showUrdu:N=!1,inputStyle:B="",placeholderStyle:I="",urduTextStyle:k="",englishTextStyle:d="",disabled:E=!1})=>{const[_,b]=ne.useState(!1),T=ne.useRef(null);ne.useEffect(()=>{const R=g=>{T.current&&!T.current.contains(g.target)&&b(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const v=R=>{i(R),b(!1)},f=()=>{if(N&&r.includes(" - ")){const[R,g]=r.split(" - ");return c.createElement(c.Fragment,null,R,c.createElement("span",{className:"font-JameelNoori font-bold ml-2"},g))}return r||o};return c.createElement("div",{className:"relative w-full",ref:T},c.createElement("button",{type:"button",className:`w-full flex items-center h-11 border border-gray-300 rounded-md px-3 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500 ${E?"bg-gray-100 text-gray-400 cursor-not-allowed":"text-gray-700 bg-white hover:border-gray-400"}`,onClick:()=>!E&&b(R=>!R),disabled:E},c.createElement("span",{className:`flex-1 text-left ${r?B:I}`},f()),h&&c.createElement(h,null)),_&&c.createElement("div",{className:"absolute left-0 mt-1 w-full bg-white h-36 overflow-y-auto border border-gray-200 rounded shadow z-10"},e.map(R=>{const g=N&&typeof R=="string"&&R.includes(" - "),[F,m]=g?R.split(" - "):[R];return c.createElement("div",{key:R,className:"px-4 py-2 hover:bg-emerald-100 text-gray-700 cursor-pointer font-medium flex items-center gap-2",onClick:()=>v(R)},c.createElement("span",{className:d},F),g&&c.createElement("span",{className:`font-JameelNoori font-bold text-xl ${k}`},m))})))},uk=({onCitySelect:e})=>{const[r,i]=ne.useState(""),[o,h]=ne.useState(""),[N,B]=ne.useState([]),I=ne.useRef(null);ne.useEffect(()=>{const _=b=>{I.current&&!I.current.contains(b.target)&&B([])};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const k=_=>{const b=_.target.value;i(b),B(b?tf.filter(T=>T.toLowerCase().includes(b.toLowerCase())):[])},d=_=>{i(_),B([]);const b=nR[_]||[24.8607,67.0011];e?.(_,b)},E=_=>{if(_.key==="Enter"){const b=N[0]||tf.includes(r)&&r;b&&d(b)}};return c.createElement("div",{className:"p-6 max-w-4xl mx-auto mb-6 mt-10"},c.createElement("div",{className:"flex flex-col md:flex-row justify-center gap-4"},c.createElement("div",{className:"relative w-full md:w-1/2",ref:I},c.createElement("input",{type:"text",value:r,placeholder:"Enter City",onChange:k,onFocus:()=>B(tf),onKeyDown:E,autoComplete:"off",className:"w-full h-11 border bg-white px-3 pr-12 py-2 rounded-md text-gray-700 font-medium border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),c.createElement("div",{className:"absolute right-0 top-0 h-full w-10 flex items-center justify-center bg-[#f2fafe] border-l border-gray-300 rounded-e-md"},c.createElement(lR,null)),N.length>0&&c.createElement("div",{className:"absolute left-0 mt-1 w-full max-h-32 overflow-y-auto bg-white border border-gray-200 rounded shadow z-50"},N.map(_=>c.createElement("div",{key:_,onMouseDown:()=>d(_),className:"px-4 py-2 cursor-pointer hover:bg-blue-100 text-gray-700 font-medium"},_)))),c.createElement("div",{className:"relative w-full md:w-[500px]"},c.createElement($u,{options:Qx,value:o,onChange:h,placeholder:"Search by Doctors",showUrdu:!0,inputStyle:"text-[12px]",placeholderStyle:"text-[16px]"}),c.createElement("div",{className:"absolute right-0 top-0 h-full w-10 flex items-center justify-center bg-[#f2fafe] border-l border-gray-300 rounded-e-md pointer-events-none"},c.createElement(uR,null)))))};function dk(e,r){const i=ne.useRef(r);ne.useEffect(function(){r!==i.current&&e.attributionControl!=null&&(i.current!=null&&e.attributionControl.removeAttribution(i.current),r!=null&&e.attributionControl.addAttribution(r)),i.current=r},[e,r])}const pk=1;function mk(e){return Object.freeze({__version:pk,map:e})}const mb=ne.createContext(null);function hb(){const e=ne.use(mb);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function hk(e){function r(i,o){const{instance:h}=e(i).current;return ne.useImperativeHandle(o,()=>h),null}return ne.forwardRef(r)}function fk(e,r){const i=ne.useRef(void 0);ne.useEffect(function(){return r!=null&&e.instance.on(r),i.current=r,function(){i.current!=null&&e.instance.off(i.current),i.current=null}},[e,r])}function fb(e,r){const i=e.pane??r.pane;return i?{...e,pane:i}:e}var Fd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var gk=Fd.exports,K0;function vk(){return K0||(K0=1,function(e,r){(function(i,o){o(r)})(gk,function(i){var o="1.9.4";function h(a){var l,O,V,ee;for(O=1,V=arguments.length;O<V;O++){ee=arguments[O];for(l in ee)a[l]=ee[l]}return a}var N=Object.create||function(){function a(){}return function(l){return a.prototype=l,new a}}();function B(a,l){var O=Array.prototype.slice;if(a.bind)return a.bind.apply(a,O.call(arguments,1));var V=O.call(arguments,2);return function(){return a.apply(l,V.length?V.concat(O.call(arguments)):arguments)}}var I=0;function k(a){return"_leaflet_id"in a||(a._leaflet_id=++I),a._leaflet_id}function d(a,l,O){var V,ee,pe,Ie;return Ie=function(){V=!1,ee&&(pe.apply(O,ee),ee=!1)},pe=function(){V?ee=arguments:(a.apply(O,arguments),setTimeout(Ie,l),V=!0)},pe}function E(a,l,O){var V=l[1],ee=l[0],pe=V-ee;return a===V&&O?a:((a-ee)%pe+pe)%pe+ee}function _(){return!1}function b(a,l){if(l===!1)return a;var O=Math.pow(10,l===void 0?6:l);return Math.round(a*O)/O}function T(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function v(a){return T(a).split(/\s+/)}function f(a,l){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?N(a.options):{});for(var O in l)a.options[O]=l[O];return a.options}function R(a,l,O){var V=[];for(var ee in a)V.push(encodeURIComponent(O?ee.toUpperCase():ee)+"="+encodeURIComponent(a[ee]));return(!l||l.indexOf("?")===-1?"?":"&")+V.join("&")}var g=/\{ *([\w_ -]+) *\}/g;function F(a,l){return a.replace(g,function(O,V){var ee=l[V];if(ee===void 0)throw new Error("No value provided for variable "+O);return typeof ee=="function"&&(ee=ee(l)),ee})}var m=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function P(a,l){for(var O=0;O<a.length;O++)if(a[O]===l)return O;return-1}var S="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var x=0;function y(a){var l=+new Date,O=Math.max(0,16-(l-x));return x=l+O,window.setTimeout(a,O)}var w=window.requestAnimationFrame||H("RequestAnimationFrame")||y,p=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function C(a,l,O){if(O&&w===y)a.call(l);else return w.call(window,B(a,l))}function A(a){a&&p.call(window,a)}var M={__proto__:null,extend:h,create:N,bind:B,get lastId(){return I},stamp:k,throttle:d,wrapNum:E,falseFn:_,formatNum:b,trim:T,splitWords:v,setOptions:f,getParamString:R,template:F,isArray:m,indexOf:P,emptyImageUrl:S,requestFn:w,cancelFn:p,requestAnimFrame:C,cancelAnimFrame:A};function j(){}j.extend=function(a){var l=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},O=l.__super__=this.prototype,V=N(O);V.constructor=l,l.prototype=V;for(var ee in this)Object.prototype.hasOwnProperty.call(this,ee)&&ee!=="prototype"&&ee!=="__super__"&&(l[ee]=this[ee]);return a.statics&&h(l,a.statics),a.includes&&(U(a.includes),h.apply(null,[V].concat(a.includes))),h(V,a),delete V.statics,delete V.includes,V.options&&(V.options=O.options?N(O.options):{},h(V.options,a.options)),V._initHooks=[],V.callInitHooks=function(){if(!this._initHooksCalled){O.callInitHooks&&O.callInitHooks.call(this),this._initHooksCalled=!0;for(var pe=0,Ie=V._initHooks.length;pe<Ie;pe++)V._initHooks[pe].call(this)}},l},j.include=function(a){var l=this.prototype.options;return h(this.prototype,a),a.options&&(this.prototype.options=l,this.mergeOptions(a.options)),this},j.mergeOptions=function(a){return h(this.prototype.options,a),this},j.addInitHook=function(a){var l=Array.prototype.slice.call(arguments,1),O=typeof a=="function"?a:function(){this[a].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(O),this};function U(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=m(a)?a:[a];for(var l=0;l<a.length;l++)a[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var z={on:function(a,l,O){if(typeof a=="object")for(var V in a)this._on(V,a[V],l);else{a=v(a);for(var ee=0,pe=a.length;ee<pe;ee++)this._on(a[ee],l,O)}return this},off:function(a,l,O){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var V in a)this._off(V,a[V],l);else{a=v(a);for(var ee=arguments.length===1,pe=0,Ie=a.length;pe<Ie;pe++)ee?this._off(a[pe]):this._off(a[pe],l,O)}return this},_on:function(a,l,O,V){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(a,l,O)===!1){O===this&&(O=void 0);var ee={fn:l,ctx:O};V&&(ee.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(ee)}},_off:function(a,l,O){var V,ee,pe;if(this._events&&(V=this._events[a],!!V)){if(arguments.length===1){if(this._firingCount)for(ee=0,pe=V.length;ee<pe;ee++)V[ee].fn=_;delete this._events[a];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var Ie=this._listens(a,l,O);if(Ie!==!1){var st=V[Ie];this._firingCount&&(st.fn=_,this._events[a]=V=V.slice()),V.splice(Ie,1)}}},fire:function(a,l,O){if(!this.listens(a,O))return this;var V=h({},l,{type:a,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var ee=this._events[a];if(ee){this._firingCount=this._firingCount+1||1;for(var pe=0,Ie=ee.length;pe<Ie;pe++){var st=ee[pe],dt=st.fn;st.once&&this.off(a,dt,st.ctx),dt.call(st.ctx||this,V)}this._firingCount--}}return O&&this._propagateEvent(V),this},listens:function(a,l,O,V){typeof a!="string"&&console.warn('"string" type argument expected');var ee=l;typeof l!="function"&&(V=!!l,ee=void 0,O=void 0);var pe=this._events&&this._events[a];if(pe&&pe.length&&this._listens(a,ee,O)!==!1)return!0;if(V){for(var Ie in this._eventParents)if(this._eventParents[Ie].listens(a,l,O,V))return!0}return!1},_listens:function(a,l,O){if(!this._events)return!1;var V=this._events[a]||[];if(!l)return!!V.length;O===this&&(O=void 0);for(var ee=0,pe=V.length;ee<pe;ee++)if(V[ee].fn===l&&V[ee].ctx===O)return ee;return!1},once:function(a,l,O){if(typeof a=="object")for(var V in a)this._on(V,a[V],l,!0);else{a=v(a);for(var ee=0,pe=a.length;ee<pe;ee++)this._on(a[ee],l,O,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[k(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[k(a)],this},_propagateEvent:function(a){for(var l in this._eventParents)this._eventParents[l].fire(a.type,h({layer:a.target,propagatedFrom:a.target},a),!0)}};z.addEventListener=z.on,z.removeEventListener=z.clearAllEventListeners=z.off,z.addOneTimeEventListener=z.once,z.fireEvent=z.fire,z.hasEventListeners=z.listens;var W=j.extend(z);function Z(a,l,O){this.x=O?Math.round(a):a,this.y=O?Math.round(l):l}var ce=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(a){return this.clone()._add(J(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(J(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Z(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Z(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(a){a=J(a);var l=a.x-this.x,O=a.y-this.y;return Math.sqrt(l*l+O*O)},equals:function(a){return a=J(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=J(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function J(a,l,O){return a instanceof Z?a:m(a)?new Z(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new Z(a.x,a.y):new Z(a,l,O)}function Ee(a,l){if(a)for(var O=l?[a,l]:a,V=0,ee=O.length;V<ee;V++)this.extend(O[V])}Ee.prototype={extend:function(a){var l,O;if(!a)return this;if(a instanceof Z||typeof a[0]=="number"||"x"in a)l=O=J(a);else if(a=Ce(a),l=a.min,O=a.max,!l||!O)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=O.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(O.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(O.y,this.max.y)),this},getCenter:function(a){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var l,O;return typeof a[0]=="number"||a instanceof Z?a=J(a):a=Ce(a),a instanceof Ee?(l=a.min,O=a.max):l=O=a,l.x>=this.min.x&&O.x<=this.max.x&&l.y>=this.min.y&&O.y<=this.max.y},intersects:function(a){a=Ce(a);var l=this.min,O=this.max,V=a.min,ee=a.max,pe=ee.x>=l.x&&V.x<=O.x,Ie=ee.y>=l.y&&V.y<=O.y;return pe&&Ie},overlaps:function(a){a=Ce(a);var l=this.min,O=this.max,V=a.min,ee=a.max,pe=ee.x>l.x&&V.x<O.x,Ie=ee.y>l.y&&V.y<O.y;return pe&&Ie},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var l=this.min,O=this.max,V=Math.abs(l.x-O.x)*a,ee=Math.abs(l.y-O.y)*a;return Ce(J(l.x-V,l.y-ee),J(O.x+V,O.y+ee))},equals:function(a){return a?(a=Ce(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Ce(a,l){return!a||a instanceof Ee?a:new Ee(a,l)}function Re(a,l){if(a)for(var O=l?[a,l]:a,V=0,ee=O.length;V<ee;V++)this.extend(O[V])}Re.prototype={extend:function(a){var l=this._southWest,O=this._northEast,V,ee;if(a instanceof Te)V=a,ee=a;else if(a instanceof Re){if(V=a._southWest,ee=a._northEast,!V||!ee)return this}else return a?this.extend(He(a)||ye(a)):this;return!l&&!O?(this._southWest=new Te(V.lat,V.lng),this._northEast=new Te(ee.lat,ee.lng)):(l.lat=Math.min(V.lat,l.lat),l.lng=Math.min(V.lng,l.lng),O.lat=Math.max(ee.lat,O.lat),O.lng=Math.max(ee.lng,O.lng)),this},pad:function(a){var l=this._southWest,O=this._northEast,V=Math.abs(l.lat-O.lat)*a,ee=Math.abs(l.lng-O.lng)*a;return new Re(new Te(l.lat-V,l.lng-ee),new Te(O.lat+V,O.lng+ee))},getCenter:function(){return new Te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Te(this.getNorth(),this.getWest())},getSouthEast:function(){return new Te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Te||"lat"in a?a=He(a):a=ye(a);var l=this._southWest,O=this._northEast,V,ee;return a instanceof Re?(V=a.getSouthWest(),ee=a.getNorthEast()):V=ee=a,V.lat>=l.lat&&ee.lat<=O.lat&&V.lng>=l.lng&&ee.lng<=O.lng},intersects:function(a){a=ye(a);var l=this._southWest,O=this._northEast,V=a.getSouthWest(),ee=a.getNorthEast(),pe=ee.lat>=l.lat&&V.lat<=O.lat,Ie=ee.lng>=l.lng&&V.lng<=O.lng;return pe&&Ie},overlaps:function(a){a=ye(a);var l=this._southWest,O=this._northEast,V=a.getSouthWest(),ee=a.getNorthEast(),pe=ee.lat>l.lat&&V.lat<O.lat,Ie=ee.lng>l.lng&&V.lng<O.lng;return pe&&Ie},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,l){return a?(a=ye(a),this._southWest.equals(a.getSouthWest(),l)&&this._northEast.equals(a.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(a,l){return a instanceof Re?a:new Re(a,l)}function Te(a,l,O){if(isNaN(a)||isNaN(l))throw new Error("Invalid LatLng object: ("+a+", "+l+")");this.lat=+a,this.lng=+l,O!==void 0&&(this.alt=+O)}Te.prototype={equals:function(a,l){if(!a)return!1;a=He(a);var O=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return O<=(l===void 0?1e-9:l)},toString:function(a){return"LatLng("+b(this.lat,a)+", "+b(this.lng,a)+")"},distanceTo:function(a){return Je.distance(this,He(a))},wrap:function(){return Je.wrapLatLng(this)},toBounds:function(a){var l=180*a/40075017,O=l/Math.cos(Math.PI/180*this.lat);return ye([this.lat-l,this.lng-O],[this.lat+l,this.lng+O])},clone:function(){return new Te(this.lat,this.lng,this.alt)}};function He(a,l,O){return a instanceof Te?a:m(a)&&typeof a[0]!="object"?a.length===3?new Te(a[0],a[1],a[2]):a.length===2?new Te(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Te(a.lat,"lng"in a?a.lng:a.lon,a.alt):l===void 0?null:new Te(a,l,O)}var we={latLngToPoint:function(a,l){var O=this.projection.project(a),V=this.scale(l);return this.transformation._transform(O,V)},pointToLatLng:function(a,l){var O=this.scale(l),V=this.transformation.untransform(a,O);return this.projection.unproject(V)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var l=this.projection.bounds,O=this.scale(a),V=this.transformation.transform(l.min,O),ee=this.transformation.transform(l.max,O);return new Ee(V,ee)},infinite:!1,wrapLatLng:function(a){var l=this.wrapLng?E(a.lng,this.wrapLng,!0):a.lng,O=this.wrapLat?E(a.lat,this.wrapLat,!0):a.lat,V=a.alt;return new Te(O,l,V)},wrapLatLngBounds:function(a){var l=a.getCenter(),O=this.wrapLatLng(l),V=l.lat-O.lat,ee=l.lng-O.lng;if(V===0&&ee===0)return a;var pe=a.getSouthWest(),Ie=a.getNorthEast(),st=new Te(pe.lat-V,pe.lng-ee),dt=new Te(Ie.lat-V,Ie.lng-ee);return new Re(st,dt)}},Je=h({},we,{wrapLng:[-180,180],R:6371e3,distance:function(a,l){var O=Math.PI/180,V=a.lat*O,ee=l.lat*O,pe=Math.sin((l.lat-a.lat)*O/2),Ie=Math.sin((l.lng-a.lng)*O/2),st=pe*pe+Math.cos(V)*Math.cos(ee)*Ie*Ie,dt=2*Math.atan2(Math.sqrt(st),Math.sqrt(1-st));return this.R*dt}}),Be=6378137,nt={R:Be,MAX_LATITUDE:85.0511287798,project:function(a){var l=Math.PI/180,O=this.MAX_LATITUDE,V=Math.max(Math.min(O,a.lat),-O),ee=Math.sin(V*l);return new Z(this.R*a.lng*l,this.R*Math.log((1+ee)/(1-ee))/2)},unproject:function(a){var l=180/Math.PI;return new Te((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*l,a.x*l/this.R)},bounds:function(){var a=Be*Math.PI;return new Ee([-a,-a],[a,a])}()};function Qe(a,l,O,V){if(m(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=l,this._c=O,this._d=V}Qe.prototype={transform:function(a,l){return this._transform(a.clone(),l)},_transform:function(a,l){return l=l||1,a.x=l*(this._a*a.x+this._b),a.y=l*(this._c*a.y+this._d),a},untransform:function(a,l){return l=l||1,new Z((a.x/l-this._b)/this._a,(a.y/l-this._d)/this._c)}};function Ze(a,l,O,V){return new Qe(a,l,O,V)}var Ht=h({},Je,{code:"EPSG:3857",projection:nt,transformation:function(){var a=.5/(Math.PI*nt.R);return Ze(a,.5,-a,.5)}()}),or=h({},Ht,{code:"EPSG:900913"});function Nr(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function jn(a,l){var O="",V,ee,pe,Ie,st,dt;for(V=0,pe=a.length;V<pe;V++){for(st=a[V],ee=0,Ie=st.length;ee<Ie;ee++)dt=st[ee],O+=(ee?"L":"M")+dt.x+" "+dt.y;O+=l?Wt.svg?"z":"x":""}return O||"M0 0"}var cr=document.documentElement.style,Gn="ActiveXObject"in window,Un=Gn&&!document.addEventListener,Le="msLaunchUri"in navigator&&!("documentMode"in document),je=ur("webkit"),Ge=ur("android"),Qt=ur("android 2")||ur("android 3"),Ft=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xt=Ge&&ur("Google")&&Ft<537&&!("AudioNode"in window),pn=!!window.opera,Ln=!Le&&ur("chrome"),Bt=ur("gecko")&&!je&&!pn&&!Gn,lr=!Ln&&ur("safari"),Fr=ur("phantom"),kr="OTransition"in cr,Vr=navigator.platform.indexOf("Win")===0,Hr=Gn&&"transition"in cr,Or="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Qt,Gr="MozPerspective"in cr,ga=!window.L_DISABLE_3D&&(Hr||Or||Gr)&&!kr&&!Fr,ta=typeof orientation<"u"||ur("mobile"),oa=ta&&je,Nn=ta&&Or,Ha=!window.PointerEvent&&window.MSPointerEvent,Ca=!!(window.PointerEvent||Ha),Kr="ontouchstart"in window||!!window.TouchEvent,hr=!window.L_NO_TOUCH&&(Kr||Ca),at=ta&&pn,ut=ta&&Bt,$t=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var a=!1;try{var l=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",_,l),window.removeEventListener("testPassiveEventSupport",_,l)}catch{}return a}(),tn=function(){return!!document.createElement("canvas").getContext}(),Xt=!!(document.createElementNS&&Nr("svg").createSVGRect),Xe=!!Xt&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Sn=!Xt&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var l=a.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Rn=navigator.platform.indexOf("Mac")===0,Zn=navigator.platform.indexOf("Linux")===0;function ur(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Wt={ie:Gn,ielt9:Un,edge:Le,webkit:je,android:Ge,android23:Qt,androidStock:xt,opera:pn,chrome:Ln,gecko:Bt,safari:lr,phantom:Fr,opera12:kr,win:Vr,ie3d:Hr,webkit3d:Or,gecko3d:Gr,any3d:ga,mobile:ta,mobileWebkit:oa,mobileWebkit3d:Nn,msPointer:Ha,pointer:Ca,touch:hr,touchNative:Kr,mobileOpera:at,mobileGecko:ut,retina:$t,passiveEvents:Tt,canvas:tn,svg:Xt,vml:Sn,inlineSvg:Xe,mac:Rn,linux:Zn},bt=Wt.msPointer?"MSPointerDown":"pointerdown",Pn=Wt.msPointer?"MSPointerMove":"pointermove",kn=Wt.msPointer?"MSPointerUp":"pointerup",bn=Wt.msPointer?"MSPointerCancel":"pointercancel",Ar={touchstart:bt,touchmove:Pn,touchend:kn,touchcancel:bn},Sr={touchstart:Ui,touchmove:ai,touchend:ai,touchcancel:ai},Dr={},Xn=!1;function qn(a,l,O){return l==="touchstart"&&ss(),Sr[l]?(O=Sr[l].bind(this,O),a.addEventListener(Ar[l],O,!1),O):(console.warn("wrong event specified:",l),_)}function ma(a,l,O){if(!Ar[l]){console.warn("wrong event specified:",l);return}a.removeEventListener(Ar[l],O,!1)}function ca(a){Dr[a.pointerId]=a}function Ta(a){Dr[a.pointerId]&&(Dr[a.pointerId]=a)}function Da(a){delete Dr[a.pointerId]}function ss(){Xn||(document.addEventListener(bt,ca,!0),document.addEventListener(Pn,Ta,!0),document.addEventListener(kn,Da,!0),document.addEventListener(bn,Da,!0),Xn=!0)}function ai(a,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var O in Dr)l.touches.push(Dr[O]);l.changedTouches=[l],a(l)}}function Ui(a,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Ma(l),ai(a,l)}function os(a){var l={},O,V;for(V in a)O=a[V],l[V]=O&&O.bind?O.bind(a):O;return a=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Ei=200;function Qi(a,l){a.addEventListener("dblclick",l);var O=0,V;function ee(pe){if(pe.detail!==1){V=pe.detail;return}if(!(pe.pointerType==="mouse"||pe.sourceCapabilities&&!pe.sourceCapabilities.firesTouchEvents)){var Ie=Ro(pe);if(!(Ie.some(function(dt){return dt instanceof HTMLLabelElement&&dt.attributes.for})&&!Ie.some(function(dt){return dt instanceof HTMLInputElement||dt instanceof HTMLSelectElement}))){var st=Date.now();st-O<=Ei?(V++,V===2&&l(os(pe))):V=1,O=st}}}return a.addEventListener("click",ee),{dblclick:l,simDblclick:ee}}function Zr(a,l){a.removeEventListener("dblclick",l.dblclick),a.removeEventListener("click",l.simDblclick)}var Si=Ba(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ai=Ba(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),sn=Ai==="webkitTransition"||Ai==="OTransition"?Ai+"End":"transitionend";function $n(a){return typeof a=="string"?document.getElementById(a):a}function Bn(a,l){var O=a.style[l]||a.currentStyle&&a.currentStyle[l];if((!O||O==="auto")&&document.defaultView){var V=document.defaultView.getComputedStyle(a,null);O=V?V[l]:null}return O==="auto"?null:O}function nr(a,l,O){var V=document.createElement(a);return V.className=l||"",O&&O.appendChild(V),V}function wn(a){var l=a.parentNode;l&&l.removeChild(a)}function On(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function jr(a){var l=a.parentNode;l&&l.lastChild!==a&&l.appendChild(a)}function vr(a){var l=a.parentNode;l&&l.firstChild!==a&&l.insertBefore(a,l.firstChild)}function yr(a,l){if(a.classList!==void 0)return a.classList.contains(l);var O=ua(a);return O.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(O)}function An(a,l){if(a.classList!==void 0)for(var O=v(l),V=0,ee=O.length;V<ee;V++)a.classList.add(O[V]);else if(!yr(a,l)){var pe=ua(a);Ea(a,(pe?pe+" ":"")+l)}}function Br(a,l){a.classList!==void 0?a.classList.remove(l):Ea(a,T((" "+ua(a)+" ").replace(" "+l+" "," ")))}function Ea(a,l){a.className.baseVal===void 0?a.className=l:a.className.baseVal=l}function ua(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function ya(a,l){"opacity"in a.style?a.style.opacity=l:"filter"in a.style&&ja(a,l)}function ja(a,l){var O=!1,V="DXImageTransform.Microsoft.Alpha";try{O=a.filters.item(V)}catch{if(l===1)return}l=Math.round(l*100),O?(O.Enabled=l!==100,O.Opacity=l):a.style.filter+=" progid:"+V+"(opacity="+l+")"}function Ba(a){for(var l=document.documentElement.style,O=0;O<a.length;O++)if(a[O]in l)return a[O];return!1}function Wa(a,l,O){var V=l||new Z(0,0);a.style[Si]=(Wt.ie3d?"translate("+V.x+"px,"+V.y+"px)":"translate3d("+V.x+"px,"+V.y+"px,0)")+(O?" scale("+O+")":"")}function Sa(a,l){a._leaflet_pos=l,Wt.any3d?Wa(a,l):(a.style.left=l.x+"px",a.style.top=l.y+"px")}function Qa(a){return a._leaflet_pos||new Z(0,0)}var pi,Is,Ji;if("onselectstart"in document)pi=function(){_r(window,"selectstart",Ma)},Is=function(){na(window,"selectstart",Ma)};else{var cs=Ba(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);pi=function(){if(cs){var a=document.documentElement.style;Ji=a[cs],a[cs]="none"}},Is=function(){cs&&(document.documentElement.style[cs]=Ji,Ji=void 0)}}function mi(){_r(window,"dragstart",Ma)}function no(){na(window,"dragstart",Ma)}var $s,ws;function js(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(ls(),$s=a,ws=a.style.outlineStyle,a.style.outlineStyle="none",_r(window,"keydown",ls))}function ls(){$s&&($s.style.outlineStyle=ws,$s=void 0,ws=void 0,na(window,"keydown",ls))}function Xi(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function us(a){var l=a.getBoundingClientRect();return{x:l.width/a.offsetWidth||1,y:l.height/a.offsetHeight||1,boundingClientRect:l}}var zo={__proto__:null,TRANSFORM:Si,TRANSITION:Ai,TRANSITION_END:sn,get:$n,getStyle:Bn,create:nr,remove:wn,empty:On,toFront:jr,toBack:vr,hasClass:yr,addClass:An,removeClass:Br,setClass:Ea,getClass:ua,setOpacity:ya,testProp:Ba,setTransform:Wa,setPosition:Sa,getPosition:Qa,get disableTextSelection(){return pi},get enableTextSelection(){return Is},disableImageDrag:mi,enableImageDrag:no,preventOutline:js,restoreOutline:ls,getSizedParentNode:Xi,getScale:us};function _r(a,l,O,V){if(l&&typeof l=="object")for(var ee in l)Wn(a,ee,l[ee],O);else{l=v(l);for(var pe=0,Ie=l.length;pe<Ie;pe++)Wn(a,l[pe],O,V)}return this}var xi="_leaflet_events";function na(a,l,O,V){if(arguments.length===1)Hi(a),delete a[xi];else if(l&&typeof l=="object")for(var ee in l)Oi(a,ee,l[ee],O);else if(l=v(l),arguments.length===2)Hi(a,function(st){return P(l,st)!==-1});else for(var pe=0,Ie=l.length;pe<Ie;pe++)Oi(a,l[pe],O,V);return this}function Hi(a,l){for(var O in a[xi]){var V=O.split(/\d/)[0];(!l||l(V))&&Oi(a,V,null,null,O)}}var Bs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Wn(a,l,O,V){var ee=l+k(O)+(V?"_"+k(V):"");if(a[xi]&&a[xi][ee])return this;var pe=function(st){return O.call(V||a,st||window.event)},Ie=pe;!Wt.touchNative&&Wt.pointer&&l.indexOf("touch")===0?pe=qn(a,l,pe):Wt.touch&&l==="dblclick"?pe=Qi(a,pe):"addEventListener"in a?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?a.addEventListener(Bs[l]||l,pe,Wt.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(pe=function(st){st=st||window.event,Fa(a,st)&&Ie(st)},a.addEventListener(Bs[l],pe,!1)):a.addEventListener(l,Ie,!1):a.attachEvent("on"+l,pe),a[xi]=a[xi]||{},a[xi][ee]=pe}function Oi(a,l,O,V,ee){ee=ee||l+k(O)+(V?"_"+k(V):"");var pe=a[xi]&&a[xi][ee];if(!pe)return this;!Wt.touchNative&&Wt.pointer&&l.indexOf("touch")===0?ma(a,l,pe):Wt.touch&&l==="dblclick"?Zr(a,pe):"removeEventListener"in a?a.removeEventListener(Bs[l]||l,pe,!1):a.detachEvent("on"+l,pe),a[xi][ee]=null}function Fi(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function qi(a){return Wn(a,"wheel",Fi),this}function pr(a){return _r(a,"mousedown touchstart dblclick contextmenu",Fi),a._leaflet_disable_click=!0,this}function Ma(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Di(a){return Ma(a),Fi(a),this}function Ro(a){if(a.composedPath)return a.composedPath();for(var l=[],O=a.target;O;)l.push(O),O=O.parentNode;return l}function ti(a,l){if(!l)return new Z(a.clientX,a.clientY);var O=us(l),V=O.boundingClientRect;return new Z((a.clientX-V.left)/O.x-l.clientLeft,(a.clientY-V.top)/O.y-l.clientTop)}var Es=Wt.linux&&Wt.chrome?window.devicePixelRatio:Wt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ws(a){return Wt.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Es:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Fa(a,l){var O=l.relatedTarget;if(!O)return!0;try{for(;O&&O!==a;)O=O.parentNode}catch{return!1}return O!==a}var nc={__proto__:null,on:_r,off:na,stopPropagation:Fi,disableScrollPropagation:qi,disableClickPropagation:pr,preventDefault:Ma,stop:Di,getPropagationPath:Ro,getMousePosition:ti,getWheelDelta:Ws,isExternalTarget:Fa,addListener:_r,removeListener:na},Mi=W.extend({run:function(a,l,O,V){this.stop(),this._el=a,this._inProgress=!0,this._duration=O||.25,this._easeOutPower=1/Math.max(V||.5,.2),this._startPos=Qa(a),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(a){var l=+new Date-this._startTime,O=this._duration*1e3;l<O?this._runFrame(this._easeOut(l/O),a):(this._runFrame(1),this._complete())},_runFrame:function(a,l){var O=this._startPos.add(this._offset.multiplyBy(a));l&&O._round(),Sa(this._el,O),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Mr=W.extend({options:{crs:Ht,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,l){l=f(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=B(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(He(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ai&&Wt.any3d&&!Wt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_r(this._proxy,sn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,l,O){if(l=l===void 0?this._zoom:this._limitZoom(l),a=this._limitCenter(He(a),l,this.options.maxBounds),O=O||{},this._stop(),this._loaded&&!O.reset&&O!==!0){O.animate!==void 0&&(O.zoom=h({animate:O.animate},O.zoom),O.pan=h({animate:O.animate,duration:O.duration},O.pan));var V=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,l,O.zoom):this._tryAnimatedPan(a,O.pan);if(V)return clearTimeout(this._sizeTimer),this}return this._resetView(a,l,O.pan&&O.pan.noMoveStart),this},setZoom:function(a,l){return this._loaded?this.setView(this.getCenter(),a,{zoom:l}):(this._zoom=a,this)},zoomIn:function(a,l){return a=a||(Wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,l)},zoomOut:function(a,l){return a=a||(Wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,l)},setZoomAround:function(a,l,O){var V=this.getZoomScale(l),ee=this.getSize().divideBy(2),pe=a instanceof Z?a:this.latLngToContainerPoint(a),Ie=pe.subtract(ee).multiplyBy(1-1/V),st=this.containerPointToLatLng(ee.add(Ie));return this.setView(st,l,{zoom:O})},_getBoundsCenterZoom:function(a,l){l=l||{},a=a.getBounds?a.getBounds():ye(a);var O=J(l.paddingTopLeft||l.padding||[0,0]),V=J(l.paddingBottomRight||l.padding||[0,0]),ee=this.getBoundsZoom(a,!1,O.add(V));if(ee=typeof l.maxZoom=="number"?Math.min(l.maxZoom,ee):ee,ee===1/0)return{center:a.getCenter(),zoom:ee};var pe=V.subtract(O).divideBy(2),Ie=this.project(a.getSouthWest(),ee),st=this.project(a.getNorthEast(),ee),dt=this.unproject(Ie.add(st).divideBy(2).add(pe),ee);return{center:dt,zoom:ee}},fitBounds:function(a,l){if(a=ye(a),!a.isValid())throw new Error("Bounds are not valid.");var O=this._getBoundsCenterZoom(a,l);return this.setView(O.center,O.zoom,l)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,l){return this.setView(a,this._zoom,{pan:l})},panBy:function(a,l){if(a=J(a).round(),l=l||{},!a.x&&!a.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Mi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){An(this._mapPane,"leaflet-pan-anim");var O=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,O,l.duration||.25,l.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,l,O){if(O=O||{},O.animate===!1||!Wt.any3d)return this.setView(a,l,O);this._stop();var V=this.project(this.getCenter()),ee=this.project(a),pe=this.getSize(),Ie=this._zoom;a=He(a),l=l===void 0?Ie:l;var st=Math.max(pe.x,pe.y),dt=st*this.getZoomScale(Ie,l),Gt=ee.distanceTo(V)||1,Mn=1.42,Fn=Mn*Mn;function Qn(Ia){var rs=Ia?-1:1,qs=Ia?dt:st,eo=dt*dt-st*st+rs*Fn*Fn*Gt*Gt,Va=2*qs*Fn*Gt,Wo=eo/Va,dc=Math.sqrt(Wo*Wo+1)-Wo,fo=dc<1e-9?-18:Math.log(dc);return fo}function xr(Ia){return(Math.exp(Ia)-Math.exp(-Ia))/2}function va(Ia){return(Math.exp(Ia)+Math.exp(-Ia))/2}function Na(Ia){return xr(Ia)/va(Ia)}var Ja=Qn(0);function yi(Ia){return st*(va(Ja)/va(Ja+Mn*Ia))}function $o(Ia){return st*(va(Ja)*Na(Ja+Mn*Ia)-xr(Ja))/Fn}function Fc(Ia){return 1-Math.pow(1-Ia,1.5)}var ho=Date.now(),Fs=(Qn(1)-Ja)/Mn,uc=O.duration?1e3*O.duration:1e3*Fs*.8;function ms(){var Ia=(Date.now()-ho)/uc,rs=Fc(Ia)*Fs;Ia<=1?(this._flyToFrame=C(ms,this),this._move(this.unproject(V.add(ee.subtract(V).multiplyBy($o(rs)/Gt)),Ie),this.getScaleZoom(st/yi(rs),Ie),{flyTo:!0})):this._move(a,l)._moveEnd(!0)}return this._moveStart(!0,O.noMoveStart),ms.call(this),this},flyToBounds:function(a,l){var O=this._getBoundsCenterZoom(a,l);return this.flyTo(O.center,O.zoom,l)},setMaxBounds:function(a){return a=ye(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var l=this.options.minZoom;return this.options.minZoom=a,this._loaded&&l!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var l=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&l!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,l){this._enforcingBounds=!0;var O=this.getCenter(),V=this._limitCenter(O,this._zoom,ye(a));return O.equals(V)||this.panTo(V,l),this._enforcingBounds=!1,this},panInside:function(a,l){l=l||{};var O=J(l.paddingTopLeft||l.padding||[0,0]),V=J(l.paddingBottomRight||l.padding||[0,0]),ee=this.project(this.getCenter()),pe=this.project(a),Ie=this.getPixelBounds(),st=Ce([Ie.min.add(O),Ie.max.subtract(V)]),dt=st.getSize();if(!st.contains(pe)){this._enforcingBounds=!0;var Gt=pe.subtract(st.getCenter()),Mn=st.extend(pe).getSize().subtract(dt);ee.x+=Gt.x<0?-Mn.x:Mn.x,ee.y+=Gt.y<0?-Mn.y:Mn.y,this.panTo(this.unproject(ee),l),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=h({animate:!1,pan:!0},a===!0?{animate:!0}:a);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var O=this.getSize(),V=l.divideBy(2).round(),ee=O.divideBy(2).round(),pe=V.subtract(ee);return!pe.x&&!pe.y?this:(a.animate&&a.pan?this.panBy(pe):(a.pan&&this._rawPanBy(pe),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(B(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:O}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=h({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=B(this._handleGeolocationResponse,this),O=B(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,O,a):navigator.geolocation.getCurrentPosition(l,O,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var l=a.code,O=a.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+O+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var l=a.coords.latitude,O=a.coords.longitude,V=new Te(l,O),ee=V.toBounds(a.coords.accuracy*2),pe=this._locateOptions;if(pe.setView){var Ie=this.getBoundsZoom(ee);this.setView(V,pe.maxZoom?Math.min(Ie,pe.maxZoom):Ie)}var st={latlng:V,bounds:ee,timestamp:a.timestamp};for(var dt in a.coords)typeof a.coords[dt]=="number"&&(st[dt]=a.coords[dt]);this.fire("locationfound",st)}},addHandler:function(a,l){if(!l)return this;var O=this[a]=new l(this);return this._handlers.push(O),this.options[a]&&O.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)wn(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,l){var O="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),V=nr("div",O,l||this._mapPane);return a&&(this._panes[a]=V),V},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),l=this.unproject(a.getBottomLeft()),O=this.unproject(a.getTopRight());return new Re(l,O)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,l,O){a=ye(a),O=J(O||[0,0]);var V=this.getZoom()||0,ee=this.getMinZoom(),pe=this.getMaxZoom(),Ie=a.getNorthWest(),st=a.getSouthEast(),dt=this.getSize().subtract(O),Gt=Ce(this.project(st,V),this.project(Ie,V)).getSize(),Mn=Wt.any3d?this.options.zoomSnap:1,Fn=dt.x/Gt.x,Qn=dt.y/Gt.y,xr=l?Math.max(Fn,Qn):Math.min(Fn,Qn);return V=this.getScaleZoom(xr,V),Mn&&(V=Math.round(V/(Mn/100))*(Mn/100),V=l?Math.ceil(V/Mn)*Mn:Math.floor(V/Mn)*Mn),Math.max(ee,Math.min(pe,V))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,l){var O=this._getTopLeftPoint(a,l);return new Ee(O,O.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,l){var O=this.options.crs;return l=l===void 0?this._zoom:l,O.scale(a)/O.scale(l)},getScaleZoom:function(a,l){var O=this.options.crs;l=l===void 0?this._zoom:l;var V=O.zoom(a*O.scale(l));return isNaN(V)?1/0:V},project:function(a,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(He(a),l)},unproject:function(a,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(a),l)},layerPointToLatLng:function(a){var l=J(a).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(a){var l=this.project(He(a))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(He(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(ye(a))},distance:function(a,l){return this.options.crs.distance(He(a),He(l))},containerPointToLayerPoint:function(a){return J(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return J(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var l=this.containerPointToLayerPoint(J(a));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(He(a)))},mouseEventToContainerPoint:function(a){return ti(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var l=this._container=$n(a);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_r(l,"scroll",this._onScroll,this),this._containerId=k(l)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Wt.any3d,An(a,"leaflet-container"+(Wt.touch?" leaflet-touch":"")+(Wt.retina?" leaflet-retina":"")+(Wt.ielt9?" leaflet-oldie":"")+(Wt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Bn(a,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Sa(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(An(a.markerPane,"leaflet-zoom-hide"),An(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,l,O){Sa(this._mapPane,new Z(0,0));var V=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var ee=this._zoom!==l;this._moveStart(ee,O)._move(a,l)._moveEnd(ee),this.fire("viewreset"),V&&this.fire("load")},_moveStart:function(a,l){return a&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(a,l,O,V){l===void 0&&(l=this._zoom);var ee=this._zoom!==l;return this._zoom=l,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),V?O&&O.pinch&&this.fire("zoom",O):((ee||O&&O.pinch)&&this.fire("zoom",O),this.fire("move",O)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Sa(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[k(this._container)]=this;var l=a?na:_r;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Wt.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,l){for(var O=[],V,ee=l==="mouseout"||l==="mouseover",pe=a.target||a.srcElement,Ie=!1;pe;){if(V=this._targets[k(pe)],V&&(l==="click"||l==="preclick")&&this._draggableMoved(V)){Ie=!0;break}if(V&&V.listens(l,!0)&&(ee&&!Fa(pe,a)||(O.push(V),ee))||pe===this._container)break;pe=pe.parentNode}return!O.length&&!Ie&&!ee&&this.listens(l,!0)&&(O=[this]),O},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var l=a.target||a.srcElement;if(!(!this._loaded||l._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(l))){var O=a.type;O==="mousedown"&&js(l),this._fireDOMEvent(a,O)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,l,O){if(a.type==="click"){var V=h({},a);V.type="preclick",this._fireDOMEvent(V,V.type,O)}var ee=this._findEventTargets(a,l);if(O){for(var pe=[],Ie=0;Ie<O.length;Ie++)O[Ie].listens(l,!0)&&pe.push(O[Ie]);ee=pe.concat(ee)}if(ee.length){l==="contextmenu"&&Ma(a);var st=ee[0],dt={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Gt=st.getLatLng&&(!st._radius||st._radius<=10);dt.containerPoint=Gt?this.latLngToContainerPoint(st.getLatLng()):this.mouseEventToContainerPoint(a),dt.layerPoint=this.containerPointToLayerPoint(dt.containerPoint),dt.latlng=Gt?st.getLatLng():this.layerPointToLatLng(dt.layerPoint)}for(Ie=0;Ie<ee.length;Ie++)if(ee[Ie].fire(l,dt,!0),dt.originalEvent._stopped||ee[Ie].options.bubblingMouseEvents===!1&&P(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,l=this._handlers.length;a<l;a++)this._handlers[a].disable()},whenReady:function(a,l){return this._loaded?a.call(l||this,{target:this}):this.on("load",a,l),this},_getMapPanePos:function(){return Qa(this._mapPane)||new Z(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,l){var O=a&&l!==void 0?this._getNewPixelOrigin(a,l):this.getPixelOrigin();return O.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,l){var O=this.getSize()._divideBy(2);return this.project(a,l)._subtract(O)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,l,O){var V=this._getNewPixelOrigin(O,l);return this.project(a,l)._subtract(V)},_latLngBoundsToNewLayerBounds:function(a,l,O){var V=this._getNewPixelOrigin(O,l);return Ce([this.project(a.getSouthWest(),l)._subtract(V),this.project(a.getNorthWest(),l)._subtract(V),this.project(a.getSouthEast(),l)._subtract(V),this.project(a.getNorthEast(),l)._subtract(V)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,l,O){if(!O)return a;var V=this.project(a,l),ee=this.getSize().divideBy(2),pe=new Ee(V.subtract(ee),V.add(ee)),Ie=this._getBoundsOffset(pe,O,l);return Math.abs(Ie.x)<=1&&Math.abs(Ie.y)<=1?a:this.unproject(V.add(Ie),l)},_limitOffset:function(a,l){if(!l)return a;var O=this.getPixelBounds(),V=new Ee(O.min.add(a),O.max.add(a));return a.add(this._getBoundsOffset(V,l))},_getBoundsOffset:function(a,l,O){var V=Ce(this.project(l.getNorthEast(),O),this.project(l.getSouthWest(),O)),ee=V.min.subtract(a.min),pe=V.max.subtract(a.max),Ie=this._rebound(ee.x,-pe.x),st=this._rebound(ee.y,-pe.y);return new Z(Ie,st)},_rebound:function(a,l){return a+l>0?Math.round(a-l)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(l))},_limitZoom:function(a){var l=this.getMinZoom(),O=this.getMaxZoom(),V=Wt.any3d?this.options.zoomSnap:1;return V&&(a=Math.round(a/V)*V),Math.max(l,Math.min(O,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Br(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,l){var O=this._getCenterOffset(a)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(O)?!1:(this.panBy(O,l),!0)},_createAnimProxy:function(){var a=this._proxy=nr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(l){var O=Si,V=this._proxy.style[O];Wa(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),V===this._proxy.style[O]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),l=this.getZoom();Wa(this._proxy,this.project(a,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,l,O){if(this._animatingZoom)return!0;if(O=O||{},!this._zoomAnimated||O.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var V=this.getZoomScale(l),ee=this._getCenterOffset(a)._divideBy(1-1/V);return O.animate!==!0&&!this.getSize().contains(ee)?!1:(C(function(){this._moveStart(!0,O.noMoveStart||!1)._animateZoom(a,l,!0)},this),!0)},_animateZoom:function(a,l,O,V){this._mapPane&&(O&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=l,An(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:l,noUpdate:V}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(B(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Br(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vi(a,l){return new Mr(a,l)}var ni=j.extend({options:{position:"topright"},initialize:function(a){f(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var l=this._map;return l&&l.removeControl(this),this.options.position=a,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var l=this._container=this.onAdd(a),O=this.getPosition(),V=a._controlCorners[O];return An(l,"leaflet-control"),O.indexOf("bottom")!==-1?V.insertBefore(l,V.firstChild):V.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Ss=function(a){return new ni(a)};Mr.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},l="leaflet-",O=this._controlContainer=nr("div",l+"control-container",this._container);function V(ee,pe){var Ie=l+ee+" "+l+pe;a[ee+pe]=nr("div",Ie,O)}V("top","left"),V("top","right"),V("bottom","left"),V("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)wn(this._controlCorners[a]);wn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ko=ni.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,l,O,V){return O<V?-1:V<O?1:0}},initialize:function(a,l,O){f(this,O),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var V in a)this._addLayer(a[V],V);for(V in l)this._addLayer(l[V],V,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ni.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,l){return this._addLayer(a,l),this._map?this._update():this},addOverlay:function(a,l){return this._addLayer(a,l,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var l=this._getLayer(k(a));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){An(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(An(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Br(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Br(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",l=this._container=nr("div",a),O=this.options.collapsed;l.setAttribute("aria-haspopup",!0),pr(l),qi(l);var V=this._section=nr("section",a+"-list");O&&(this._map.on("click",this.collapse,this),_r(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ee=this._layersLink=nr("a",a+"-toggle",l);ee.href="#",ee.title="Layers",ee.setAttribute("role","button"),_r(ee,{keydown:function(pe){pe.keyCode===13&&this._expandSafely()},click:function(pe){Ma(pe),this._expandSafely()}},this),O||this.expand(),this._baseLayersList=nr("div",a+"-base",V),this._separator=nr("div",a+"-separator",V),this._overlaysList=nr("div",a+"-overlays",V),l.appendChild(V)},_getLayer:function(a){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&k(this._layers[l].layer)===a)return this._layers[l]},_addLayer:function(a,l,O){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:l,overlay:O}),this.options.sortLayers&&this._layers.sort(B(function(V,ee){return this.options.sortFunction(V.layer,ee.layer,V.name,ee.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;On(this._baseLayersList),On(this._overlaysList),this._layerControlInputs=[];var a,l,O,V,ee=0;for(O=0;O<this._layers.length;O++)V=this._layers[O],this._addItem(V),l=l||V.overlay,a=a||!V.overlay,ee+=V.overlay?0:1;return this.options.hideSingleBase&&(a=a&&ee>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=l&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var l=this._getLayer(k(a.target)),O=l.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;O&&this._map.fire(O,l)},_createRadioElement:function(a,l){var O='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(l?' checked="checked"':"")+"/>",V=document.createElement("div");return V.innerHTML=O,V.firstChild},_addItem:function(a){var l=document.createElement("label"),O=this._map.hasLayer(a.layer),V;a.overlay?(V=document.createElement("input"),V.type="checkbox",V.className="leaflet-control-layers-selector",V.defaultChecked=O):V=this._createRadioElement("leaflet-base-layers_"+k(this),O),this._layerControlInputs.push(V),V.layerId=k(a.layer),_r(V,"click",this._onInputClick,this);var ee=document.createElement("span");ee.innerHTML=" "+a.name;var pe=document.createElement("span");l.appendChild(pe),pe.appendChild(V),pe.appendChild(ee);var Ie=a.overlay?this._overlaysList:this._baseLayersList;return Ie.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,l,O,V=[],ee=[];this._handlingClick=!0;for(var pe=a.length-1;pe>=0;pe--)l=a[pe],O=this._getLayer(l.layerId).layer,l.checked?V.push(O):l.checked||ee.push(O);for(pe=0;pe<ee.length;pe++)this._map.hasLayer(ee[pe])&&this._map.removeLayer(ee[pe]);for(pe=0;pe<V.length;pe++)this._map.hasLayer(V[pe])||this._map.addLayer(V[pe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,l,O,V=this._map.getZoom(),ee=a.length-1;ee>=0;ee--)l=a[ee],O=this._getLayer(l.layerId).layer,l.disabled=O.options.minZoom!==void 0&&V<O.options.minZoom||O.options.maxZoom!==void 0&&V>O.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,_r(a,"click",Ma),this.expand();var l=this;setTimeout(function(){na(a,"click",Ma),l._preventClick=!1})}}),Co=function(a,l,O){return new ko(a,l,O)},zs=ni.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var l="leaflet-control-zoom",O=nr("div",l+" leaflet-bar"),V=this.options;return this._zoomInButton=this._createButton(V.zoomInText,V.zoomInTitle,l+"-in",O,this._zoomIn),this._zoomOutButton=this._createButton(V.zoomOutText,V.zoomOutTitle,l+"-out",O,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),O},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,l,O,V,ee){var pe=nr("a",O,V);return pe.innerHTML=a,pe.href="#",pe.title=l,pe.setAttribute("role","button"),pe.setAttribute("aria-label",l),pr(pe),_r(pe,"click",Di),_r(pe,"click",ee,this),_r(pe,"click",this._refocusOnMap,this),pe},_updateDisabled:function(){var a=this._map,l="leaflet-disabled";Br(this._zoomInButton,l),Br(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(An(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(An(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Mr.mergeOptions({zoomControl:!0}),Mr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zs,this.addControl(this.zoomControl))});var on=function(a){return new zs(a)},ge=ni.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var l="leaflet-control-scale",O=nr("div",l),V=this.options;return this._addScales(V,l+"-line",O),a.on(V.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),O},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,l,O){a.metric&&(this._mScale=nr("div",l,O)),a.imperial&&(this._iScale=nr("div",l,O))},_update:function(){var a=this._map,l=a.getSize().y/2,O=a.distance(a.containerPointToLatLng([0,l]),a.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(O)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var l=this._getRoundNum(a),O=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,O,l/a)},_updateImperial:function(a){var l=a*3.2808399,O,V,ee;l>5280?(O=l/5280,V=this._getRoundNum(O),this._updateScale(this._iScale,V+" mi",V/O)):(ee=this._getRoundNum(l),this._updateScale(this._iScale,ee+" ft",ee/l))},_updateScale:function(a,l,O){a.style.width=Math.round(this.options.maxWidth*O)+"px",a.innerHTML=l},_getRoundNum:function(a){var l=Math.pow(10,(Math.floor(a)+"").length-1),O=a/l;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:1,l*O}}),Pt=function(a){return new ge(a)},Kn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',aa=ni.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Wt.inlineSvg?Kn+" ":"")+"Leaflet</a>"},initialize:function(a){f(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=nr("div","leaflet-control-attribution"),pr(this._container);for(var l in a._layers)a._layers[l].getAttribution&&this.addAttribution(a._layers[l].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var l in this._attributions)this._attributions[l]&&a.push(l);var O=[];this.options.prefix&&O.push(this.options.prefix),a.length&&O.push(a.join(", ")),this._container.innerHTML=O.join(' <span aria-hidden="true">|</span> ')}}});Mr.mergeOptions({attributionControl:!0}),Mr.addInitHook(function(){this.options.attributionControl&&new aa().addTo(this)});var qa=function(a){return new aa(a)};ni.Layers=ko,ni.Zoom=zs,ni.Scale=ge,ni.Attribution=aa,Ss.layers=Co,Ss.zoom=on,Ss.scale=Pt,Ss.attribution=qa;var ii=j.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ii.addTo=function(a,l){return a.addHandler(l,this),this};var Lc={Events:z},Ic=Wt.touch?"touchstart mousedown":"mousedown",Cr=W.extend({options:{clickTolerance:3},initialize:function(a,l,O,V){f(this,V),this._element=a,this._dragStartTarget=l||a,this._preventOutline=O},enable:function(){this._enabled||(_r(this._dragStartTarget,Ic,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Cr._dragging===this&&this.finishDrag(!0),na(this._dragStartTarget,Ic,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!yr(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Cr._dragging===this&&this.finishDrag();return}if(!(Cr._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Cr._dragging=this,this._preventOutline&&js(this._element),mi(),pi(),!this._moving)){this.fire("down");var l=a.touches?a.touches[0]:a,O=Xi(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=Qa(this._element),this._parentScale=us(O);var V=a.type==="mousedown";_r(document,V?"mousemove":"touchmove",this._onMove,this),_r(document,V?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var l=a.touches&&a.touches.length===1?a.touches[0]:a,O=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!O.x&&!O.y||Math.abs(O.x)+Math.abs(O.y)<this.options.clickTolerance||(O.x/=this._parentScale.x,O.y/=this._parentScale.y,Ma(a),this._moved||(this.fire("dragstart"),this._moved=!0,An(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),An(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(O),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Sa(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Br(document.body,"leaflet-dragging"),this._lastTarget&&(Br(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),na(document,"mousemove touchmove",this._onMove,this),na(document,"mouseup touchend touchcancel",this._onUp,this),no(),Is();var l=this._moved&&this._moving;this._moving=!1,Cr._dragging=!1,l&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function jc(a,l,O){var V,ee=[1,4,2,8],pe,Ie,st,dt,Gt,Mn,Fn,Qn;for(pe=0,Mn=a.length;pe<Mn;pe++)a[pe]._code=ao(a[pe],l);for(st=0;st<4;st++){for(Fn=ee[st],V=[],pe=0,Mn=a.length,Ie=Mn-1;pe<Mn;Ie=pe++)dt=a[pe],Gt=a[Ie],dt._code&Fn?Gt._code&Fn||(Qn=ic(Gt,dt,Fn,l,O),Qn._code=ao(Qn,l),V.push(Qn)):(Gt._code&Fn&&(Qn=ic(Gt,dt,Fn,l,O),Qn._code=ao(Qn,l),V.push(Qn)),V.push(dt));a=V}return a}function Uo(a,l){var O,V,ee,pe,Ie,st,dt,Gt,Mn;if(!a||a.length===0)throw new Error("latlngs not passed");La(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Fn=He([0,0]),Qn=ye(a),xr=Qn.getNorthWest().distanceTo(Qn.getSouthWest())*Qn.getNorthEast().distanceTo(Qn.getNorthWest());xr<1700&&(Fn=ro(a));var va=a.length,Na=[];for(O=0;O<va;O++){var Ja=He(a[O]);Na.push(l.project(He([Ja.lat-Fn.lat,Ja.lng-Fn.lng])))}for(st=dt=Gt=0,O=0,V=va-1;O<va;V=O++)ee=Na[O],pe=Na[V],Ie=ee.y*pe.x-pe.y*ee.x,dt+=(ee.x+pe.x)*Ie,Gt+=(ee.y+pe.y)*Ie,st+=Ie*3;st===0?Mn=Na[0]:Mn=[dt/st,Gt/st];var yi=l.unproject(J(Mn));return He([yi.lat+Fn.lat,yi.lng+Fn.lng])}function ro(a){for(var l=0,O=0,V=0,ee=0;ee<a.length;ee++){var pe=He(a[ee]);l+=pe.lat,O+=pe.lng,V++}return He([l/V,O/V])}var Gs={__proto__:null,clipPolygon:jc,polygonCenter:Uo,centroid:ro};function xs(a,l){if(!l||!a.length)return a.slice();var O=l*l;return a=Ri(a,O),a=Bc(a,O),a}function Ks(a,l,O){return Math.sqrt(xa(a,l,O,!0))}function Sc(a,l,O){return xa(a,l,O)}function Bc(a,l){var O=a.length,V=typeof Uint8Array<"u"?Uint8Array:Array,ee=new V(O);ee[0]=ee[O-1]=1,rc(a,ee,l,0,O-1);var pe,Ie=[];for(pe=0;pe<O;pe++)ee[pe]&&Ie.push(a[pe]);return Ie}function rc(a,l,O,V,ee){var pe=0,Ie,st,dt;for(st=V+1;st<=ee-1;st++)dt=xa(a[st],a[V],a[ee],!0),dt>pe&&(Ie=st,pe=dt);pe>O&&(l[Ie]=1,rc(a,l,O,V,Ie),rc(a,l,O,Ie,ee))}function Ri(a,l){for(var O=[a[0]],V=1,ee=0,pe=a.length;V<pe;V++)ol(a[V],a[ee])>l&&(O.push(a[V]),ee=V);return ee<pe-1&&O.push(a[pe-1]),O}var sl;function ac(a,l,O,V,ee){var pe=V?sl:ao(a,O),Ie=ao(l,O),st,dt,Gt;for(sl=Ie;;){if(!(pe|Ie))return[a,l];if(pe&Ie)return!1;st=pe||Ie,dt=ic(a,l,st,O,ee),Gt=ao(dt,O),st===pe?(a=dt,pe=Gt):(l=dt,Ie=Gt)}}function ic(a,l,O,V,ee){var pe=l.x-a.x,Ie=l.y-a.y,st=V.min,dt=V.max,Gt,Mn;return O&8?(Gt=a.x+pe*(dt.y-a.y)/Ie,Mn=dt.y):O&4?(Gt=a.x+pe*(st.y-a.y)/Ie,Mn=st.y):O&2?(Gt=dt.x,Mn=a.y+Ie*(dt.x-a.x)/pe):O&1&&(Gt=st.x,Mn=a.y+Ie*(st.x-a.x)/pe),new Z(Gt,Mn,ee)}function ao(a,l){var O=0;return a.x<l.min.x?O|=1:a.x>l.max.x&&(O|=2),a.y<l.min.y?O|=4:a.y>l.max.y&&(O|=8),O}function ol(a,l){var O=l.x-a.x,V=l.y-a.y;return O*O+V*V}function xa(a,l,O,V){var ee=l.x,pe=l.y,Ie=O.x-ee,st=O.y-pe,dt=Ie*Ie+st*st,Gt;return dt>0&&(Gt=((a.x-ee)*Ie+(a.y-pe)*st)/dt,Gt>1?(ee=O.x,pe=O.y):Gt>0&&(ee+=Ie*Gt,pe+=st*Gt)),Ie=a.x-ee,st=a.y-pe,V?Ie*Ie+st*st:new Z(ee,pe)}function La(a){return!m(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function zc(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),La(a)}function Uc(a,l){var O,V,ee,pe,Ie,st,dt,Gt;if(!a||a.length===0)throw new Error("latlngs not passed");La(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Mn=He([0,0]),Fn=ye(a),Qn=Fn.getNorthWest().distanceTo(Fn.getSouthWest())*Fn.getNorthEast().distanceTo(Fn.getNorthWest());Qn<1700&&(Mn=ro(a));var xr=a.length,va=[];for(O=0;O<xr;O++){var Na=He(a[O]);va.push(l.project(He([Na.lat-Mn.lat,Na.lng-Mn.lng])))}for(O=0,V=0;O<xr-1;O++)V+=va[O].distanceTo(va[O+1])/2;if(V===0)Gt=va[0];else for(O=0,pe=0;O<xr-1;O++)if(Ie=va[O],st=va[O+1],ee=Ie.distanceTo(st),pe+=ee,pe>V){dt=(pe-V)/ee,Gt=[st.x-dt*(st.x-Ie.x),st.y-dt*(st.y-Ie.y)];break}var Ja=l.unproject(J(Gt));return He([Ja.lat+Mn.lat,Ja.lng+Mn.lng])}var ft={__proto__:null,simplify:xs,pointToSegmentDistance:Ks,closestPointOnSegment:Sc,clipSegment:ac,_getEdgeIntersection:ic,_getBitCode:ao,_sqClosestPointOnSegment:xa,isFlat:La,_flat:zc,polylineCenter:Uc},io={project:function(a){return new Z(a.lng,a.lat)},unproject:function(a){return new Te(a.y,a.x)},bounds:new Ee([-180,-90],[180,90])},er={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var l=Math.PI/180,O=this.R,V=a.lat*l,ee=this.R_MINOR/O,pe=Math.sqrt(1-ee*ee),Ie=pe*Math.sin(V),st=Math.tan(Math.PI/4-V/2)/Math.pow((1-Ie)/(1+Ie),pe/2);return V=-O*Math.log(Math.max(st,1e-10)),new Z(a.lng*l*O,V)},unproject:function(a){for(var l=180/Math.PI,O=this.R,V=this.R_MINOR/O,ee=Math.sqrt(1-V*V),pe=Math.exp(-a.y/O),Ie=Math.PI/2-2*Math.atan(pe),st=0,dt=.1,Gt;st<15&&Math.abs(dt)>1e-7;st++)Gt=ee*Math.sin(Ie),Gt=Math.pow((1-Gt)/(1+Gt),ee/2),dt=Math.PI/2-2*Math.atan(pe*Gt)-Ie,Ie+=dt;return new Te(Ie*l,a.x*l/O)}},sc={__proto__:null,LonLat:io,Mercator:er,SphericalMercator:nt},so=h({},Je,{code:"EPSG:3395",projection:er,transformation:function(){var a=.5/(Math.PI*er.R);return Ze(a,.5,-a,.5)}()}),hi=h({},Je,{code:"EPSG:4326",projection:io,transformation:Ze(1/180,1,-1/180,.5)}),he=h({},we,{projection:io,transformation:Ze(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,l){var O=l.lng-a.lng,V=l.lat-a.lat;return Math.sqrt(O*O+V*V)},infinite:!0});we.Earth=Je,we.EPSG3395=so,we.EPSG3857=Ht,we.EPSG900913=or,we.EPSG4326=hi,we.Simple=he;var Cn=W.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[k(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[k(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var l=a.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var O=this.getEvents();l.on(O,this),this.once("remove",function(){l.off(O,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Mr.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var l=k(a);return this._layers[l]?this:(this._layers[l]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var l=k(a);return this._layers[l]?(this._loaded&&a.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return k(a)in this._layers},eachLayer:function(a,l){for(var O in this._layers)a.call(l,this._layers[O]);return this},_addLayers:function(a){a=a?m(a)?a:[a]:[];for(var l=0,O=a.length;l<O;l++)this.addLayer(a[l])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[k(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var l=k(a);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,l=-1/0,O=this._getZoomSpan();for(var V in this._zoomBoundLayers){var ee=this._zoomBoundLayers[V].options;a=ee.minZoom===void 0?a:Math.min(a,ee.minZoom),l=ee.maxZoom===void 0?l:Math.max(l,ee.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=a===1/0?void 0:a,O!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Dn=Cn.extend({initialize:function(a,l){f(this,l),this._layers={};var O,V;if(a)for(O=0,V=a.length;O<V;O++)this.addLayer(a[O])},addLayer:function(a){var l=this.getLayerId(a);return this._layers[l]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var l=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(a){var l=typeof a=="number"?a:this.getLayerId(a);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var l=Array.prototype.slice.call(arguments,1),O,V;for(O in this._layers)V=this._layers[O],V[a]&&V[a].apply(V,l);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,l){for(var O in this._layers)a.call(l,this._layers[O]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return k(a)}}),Ho=function(a,l){return new Dn(a,l)},Ra=Dn.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Dn.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Dn.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Re;for(var l in this._layers){var O=this._layers[l];a.extend(O.getBounds?O.getBounds():O.getLatLng())}return a}}),te=function(a,l){return new Ra(a,l)},G=j.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){f(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,l){var O=this._getIconUrl(a);if(!O){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var V=this._createImg(O,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(V,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(V.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),V},_setIconStyles:function(a,l){var O=this.options,V=O[l+"Size"];typeof V=="number"&&(V=[V,V]);var ee=J(V),pe=J(l==="shadow"&&O.shadowAnchor||O.iconAnchor||ee&&ee.divideBy(2,!0));a.className="leaflet-marker-"+l+" "+(O.className||""),pe&&(a.style.marginLeft=-pe.x+"px",a.style.marginTop=-pe.y+"px"),ee&&(a.style.width=ee.x+"px",a.style.height=ee.y+"px")},_createImg:function(a,l){return l=l||document.createElement("img"),l.src=a,l},_getIconUrl:function(a){return Wt.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Y(a){return new G(a)}var oe=G.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof oe.imagePath!="string"&&(oe.imagePath=this._detectIconPath()),(this.options.imagePath||oe.imagePath)+G.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var l=function(O,V,ee){var pe=V.exec(O);return pe&&pe[ee]};return a=l(a,/^url\((['"])?(.+)\1\)$/,2),a&&l(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=nr("div","leaflet-default-icon-path",document.body),l=Bn(a,"background-image")||Bn(a,"backgroundImage");if(document.body.removeChild(a),l=this._stripUrl(l),l)return l;var O=document.querySelector('link[href$="leaflet.css"]');return O?O.href.substring(0,O.href.length-11-1):""}}),Oe=ii.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Cr(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),An(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Br(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var l=this._marker,O=l._map,V=this._marker.options.autoPanSpeed,ee=this._marker.options.autoPanPadding,pe=Qa(l._icon),Ie=O.getPixelBounds(),st=O.getPixelOrigin(),dt=Ce(Ie.min._subtract(st).add(ee),Ie.max._subtract(st).subtract(ee));if(!dt.contains(pe)){var Gt=J((Math.max(dt.max.x,pe.x)-dt.max.x)/(Ie.max.x-dt.max.x)-(Math.min(dt.min.x,pe.x)-dt.min.x)/(Ie.min.x-dt.min.x),(Math.max(dt.max.y,pe.y)-dt.max.y)/(Ie.max.y-dt.max.y)-(Math.min(dt.min.y,pe.y)-dt.min.y)/(Ie.min.y-dt.min.y)).multiplyBy(V);O.panBy(Gt,{animate:!1}),this._draggable._newPos._add(Gt),this._draggable._startPos._add(Gt),Sa(l._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=C(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,a)))},_onDrag:function(a){var l=this._marker,O=l._shadow,V=Qa(l._icon),ee=l._map.layerPointToLatLng(V);O&&Sa(O,V),l._latlng=ee,a.latlng=ee,a.oldLatLng=this._oldLatLng,l.fire("move",a).fire("drag",a)},_onDragEnd:function(a){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),rt=Cn.extend({options:{icon:new oe,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,l){f(this,l),this._latlng=He(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var l=this._latlng;return this._latlng=He(a),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),O=a.icon.createIcon(this._icon),V=!1;O!==this._icon&&(this._icon&&this._removeIcon(),V=!0,a.title&&(O.title=a.title),O.tagName==="IMG"&&(O.alt=a.alt||"")),An(O,l),a.keyboard&&(O.tabIndex="0",O.setAttribute("role","button")),this._icon=O,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_r(O,"focus",this._panOnFocus,this);var ee=a.icon.createShadow(this._shadow),pe=!1;ee!==this._shadow&&(this._removeShadow(),pe=!0),ee&&(An(ee,l),ee.alt=""),this._shadow=ee,a.opacity<1&&this._updateOpacity(),V&&this.getPane().appendChild(this._icon),this._initInteraction(),ee&&pe&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&na(this._icon,"focus",this._panOnFocus,this),wn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wn(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Sa(this._icon,a),this._shadow&&Sa(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(An(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Oe)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Oe(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&ya(this._icon,a),this._shadow&&ya(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var l=this.options.icon.options,O=l.iconSize?J(l.iconSize):J(0,0),V=l.iconAnchor?J(l.iconAnchor):J(0,0);a.panInside(this._latlng,{paddingTopLeft:V,paddingBottomRight:O.subtract(V)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function St(a,l){return new rt(a,l)}var Dt=Cn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return f(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_t=Dt.extend({options:{fill:!0,radius:10},initialize:function(a,l){f(this,l),this._latlng=He(a),this._radius=this.options.radius},setLatLng:function(a){var l=this._latlng;return this._latlng=He(a),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var l=a&&a.radius||this._radius;return Dt.prototype.setStyle.call(this,a),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,l=this._radiusY||a,O=this._clickTolerance(),V=[a+O,l+O];this._pxBounds=new Ee(this._point.subtract(V),this._point.add(V))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Tn(a,l){return new _t(a,l)}var qt=_t.extend({initialize:function(a,l,O){if(typeof l=="number"&&(l=h({},O,{radius:l})),f(this,l),this._latlng=He(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Re(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Dt.prototype.setStyle,_project:function(){var a=this._latlng.lng,l=this._latlng.lat,O=this._map,V=O.options.crs;if(V.distance===Je.distance){var ee=Math.PI/180,pe=this._mRadius/Je.R/ee,Ie=O.project([l+pe,a]),st=O.project([l-pe,a]),dt=Ie.add(st).divideBy(2),Gt=O.unproject(dt).lat,Mn=Math.acos((Math.cos(pe*ee)-Math.sin(l*ee)*Math.sin(Gt*ee))/(Math.cos(l*ee)*Math.cos(Gt*ee)))/ee;(isNaN(Mn)||Mn===0)&&(Mn=pe/Math.cos(Math.PI/180*l)),this._point=dt.subtract(O.getPixelOrigin()),this._radius=isNaN(Mn)?0:dt.x-O.project([Gt,a-Mn]).x,this._radiusY=dt.y-Ie.y}else{var Fn=V.unproject(V.project(this._latlng).subtract([this._mRadius,0]));this._point=O.latLngToLayerPoint(this._latlng),this._radius=this._point.x-O.latLngToLayerPoint(Fn).x}this._updateBounds()}});function Hn(a,l,O){return new qt(a,l,O)}var vn=Dt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,l){f(this,l),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var l=1/0,O=null,V=xa,ee,pe,Ie=0,st=this._parts.length;Ie<st;Ie++)for(var dt=this._parts[Ie],Gt=1,Mn=dt.length;Gt<Mn;Gt++){ee=dt[Gt-1],pe=dt[Gt];var Fn=V(a,ee,pe,!0);Fn<l&&(l=Fn,O=V(a,ee,pe))}return O&&(O.distance=Math.sqrt(l)),O},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Uc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,l){return l=l||this._defaultShape(),a=He(a),l.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Re,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return La(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var l=[],O=La(a),V=0,ee=a.length;V<ee;V++)O?(l[V]=He(a[V]),this._bounds.extend(l[V])):l[V]=this._convertLatLngs(a[V]);return l},_project:function(){var a=new Ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),l=new Z(a,a);this._rawPxBounds&&(this._pxBounds=new Ee([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(a,l,O){var V=a[0]instanceof Te,ee=a.length,pe,Ie;if(V){for(Ie=[],pe=0;pe<ee;pe++)Ie[pe]=this._map.latLngToLayerPoint(a[pe]),O.extend(Ie[pe]);l.push(Ie)}else for(pe=0;pe<ee;pe++)this._projectLatlngs(a[pe],l,O)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,O,V,ee,pe,Ie,st,dt;for(O=0,ee=0,pe=this._rings.length;O<pe;O++)for(dt=this._rings[O],V=0,Ie=dt.length;V<Ie-1;V++)st=ac(dt[V],dt[V+1],a,V,!0),st&&(l[ee]=l[ee]||[],l[ee].push(st[0]),(st[1]!==dt[V+1]||V===Ie-2)&&(l[ee].push(st[1]),ee++))}},_simplifyPoints:function(){for(var a=this._parts,l=this.options.smoothFactor,O=0,V=a.length;O<V;O++)a[O]=xs(a[O],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,l){var O,V,ee,pe,Ie,st,dt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(O=0,pe=this._parts.length;O<pe;O++)for(st=this._parts[O],V=0,Ie=st.length,ee=Ie-1;V<Ie;ee=V++)if(!(!l&&V===0)&&Ks(a,st[ee],st[V])<=dt)return!0;return!1}});function Qr(a,l){return new vn(a,l)}vn._flat=zc;var qr=vn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Uo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var l=vn.prototype._convertLatLngs.call(this,a),O=l.length;return O>=2&&l[0]instanceof Te&&l[0].equals(l[O-1])&&l.pop(),l},_setLatLngs:function(a){vn.prototype._setLatLngs.call(this,a),La(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return La(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,l=this.options.weight,O=new Z(l,l);if(a=new Ee(a.min.subtract(O),a.max.add(O)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var V=0,ee=this._rings.length,pe;V<ee;V++)pe=jc(this._rings[V],a,!0),pe.length&&this._parts.push(pe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var l=!1,O,V,ee,pe,Ie,st,dt,Gt;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(pe=0,dt=this._parts.length;pe<dt;pe++)for(O=this._parts[pe],Ie=0,Gt=O.length,st=Gt-1;Ie<Gt;st=Ie++)V=O[Ie],ee=O[st],V.y>a.y!=ee.y>a.y&&a.x<(ee.x-V.x)*(a.y-V.y)/(ee.y-V.y)+V.x&&(l=!l);return l||vn.prototype._containsPoint.call(this,a,!0)}});function ia(a,l){return new qr(a,l)}var Jr=Ra.extend({initialize:function(a,l){f(this,l),this._layers={},a&&this.addData(a)},addData:function(a){var l=m(a)?a:a.features,O,V,ee;if(l){for(O=0,V=l.length;O<V;O++)ee=l[O],(ee.geometries||ee.geometry||ee.features||ee.coordinates)&&this.addData(ee);return this}var pe=this.options;if(pe.filter&&!pe.filter(a))return this;var Ie=Rs(a,pe);return Ie?(Ie.feature=Zi(a),Ie.defaultOptions=Ie.options,this.resetStyle(Ie),pe.onEachFeature&&pe.onEachFeature(a,Ie),this.addLayer(Ie)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=h({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(l){this._setLayerStyle(l,a)},this)},_setLayerStyle:function(a,l){a.setStyle&&(typeof l=="function"&&(l=l(a.feature)),a.setStyle(l))}});function Rs(a,l){var O=a.type==="Feature"?a.geometry:a,V=O?O.coordinates:null,ee=[],pe=l&&l.pointToLayer,Ie=l&&l.coordsToLatLng||es,st,dt,Gt,Mn;if(!V&&!O)return null;switch(O.type){case"Point":return st=Ie(V),ks(pe,a,st,l);case"MultiPoint":for(Gt=0,Mn=V.length;Gt<Mn;Gt++)st=Ie(V[Gt]),ee.push(ks(pe,a,st,l));return new Ra(ee);case"LineString":case"MultiLineString":return dt=Ys(V,O.type==="LineString"?0:1,Ie),new vn(dt,l);case"Polygon":case"MultiPolygon":return dt=Ys(V,O.type==="Polygon"?1:2,Ie),new qr(dt,l);case"GeometryCollection":for(Gt=0,Mn=O.geometries.length;Gt<Mn;Gt++){var Fn=Rs({geometry:O.geometries[Gt],type:"Feature",properties:a.properties},l);Fn&&ee.push(Fn)}return new Ra(ee);case"FeatureCollection":for(Gt=0,Mn=O.features.length;Gt<Mn;Gt++){var Qn=Rs(O.features[Gt],l);Qn&&ee.push(Qn)}return new Ra(ee);default:throw new Error("Invalid GeoJSON object.")}}function ks(a,l,O,V){return a?a(l,O):new rt(O,V&&V.markersInheritOptions&&V)}function es(a){return new Te(a[1],a[0],a[2])}function Ys(a,l,O){for(var V=[],ee=0,pe=a.length,Ie;ee<pe;ee++)Ie=l?Ys(a[ee],l-1,O):(O||es)(a[ee]),V.push(Ie);return V}function Qs(a,l){return a=He(a),a.alt!==void 0?[b(a.lng,l),b(a.lat,l),b(a.alt,l)]:[b(a.lng,l),b(a.lat,l)]}function oo(a,l,O,V){for(var ee=[],pe=0,Ie=a.length;pe<Ie;pe++)ee.push(l?oo(a[pe],La(a[pe])?0:l-1,O,V):Qs(a[pe],V));return!l&&O&&ee.length>0&&ee.push(ee[0].slice()),ee}function Li(a,l){return a.feature?h({},a.feature,{geometry:l}):Zi(l)}function Zi(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var co={toGeoJSON:function(a){return Li(this,{type:"Point",coordinates:Qs(this.getLatLng(),a)})}};rt.include(co),qt.include(co),_t.include(co),vn.include({toGeoJSON:function(a){var l=!La(this._latlngs),O=oo(this._latlngs,l?1:0,!1,a);return Li(this,{type:(l?"Multi":"")+"LineString",coordinates:O})}}),qr.include({toGeoJSON:function(a){var l=!La(this._latlngs),O=l&&!La(this._latlngs[0]),V=oo(this._latlngs,O?2:l?1:0,!0,a);return l||(V=[V]),Li(this,{type:(O?"Multi":"")+"Polygon",coordinates:V})}}),Dn.include({toMultiPoint:function(a){var l=[];return this.eachLayer(function(O){l.push(O.toGeoJSON(a).geometry.coordinates)}),Li(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(a){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(a);var O=l==="GeometryCollection",V=[];return this.eachLayer(function(ee){if(ee.toGeoJSON){var pe=ee.toGeoJSON(a);if(O)V.push(pe.geometry);else{var Ie=Zi(pe);Ie.type==="FeatureCollection"?V.push.apply(V,Ie.features):V.push(Ie)}}}),O?Li(this,{geometries:V,type:"GeometryCollection"}):{type:"FeatureCollection",features:V}}});function oc(a,l){return new Jr(a,l)}var Fo=oc,$i=Cn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,l,O){this._url=a,this._bounds=ye(l),f(this,O)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(An(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&jr(this._image),this},bringToBack:function(){return this._map&&vr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=ye(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",l=this._image=a?this._url:nr("img");if(An(l,"leaflet-image-layer"),this._zoomAnimated&&An(l,"leaflet-zoom-animated"),this.options.className&&An(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onload=B(this.fire,this,"load"),l.onerror=B(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(a){var l=this._map.getZoomScale(a.zoom),O=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Wa(this._image,O,l)},_reset:function(){var a=this._image,l=new Ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),O=l.getSize();Sa(a,l.min),a.style.width=O.x+"px",a.style.height=O.y+"px"},_updateOpacity:function(){ya(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Us=function(a,l,O){return new $i(a,l,O)},To=$i.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",l=this._image=a?this._url:nr("video");if(An(l,"leaflet-image-layer"),this._zoomAnimated&&An(l,"leaflet-zoom-animated"),this.options.className&&An(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onloadeddata=B(this.fire,this,"load"),a){for(var O=l.getElementsByTagName("source"),V=[],ee=0;ee<O.length;ee++)V.push(O[ee].src);this._url=O.length>0?V:[l.src];return}m(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var pe=0;pe<this._url.length;pe++){var Ie=nr("source");Ie.src=this._url[pe],l.appendChild(Ie)}}});function cc(a,l,O){return new To(a,l,O)}var Cs=$i.extend({_initImage:function(){var a=this._image=this._url;An(a,"leaflet-image-layer"),this._zoomAnimated&&An(a,"leaflet-zoom-animated"),this.options.className&&An(a,this.options.className),a.onselectstart=_,a.onmousemove=_}});function qo(a,l,O){return new Cs(a,l,O)}var Wi=Cn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,l){a&&(a instanceof Te||m(a))?(this._latlng=He(a),f(this,l)):(f(this,a),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&ya(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&ya(this._container,1),this.bringToFront(),this.options.interactive&&(An(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(ya(this._container,0),this._removeTimeout=setTimeout(B(wn,void 0,this._container),200)):wn(this._container),this.options.interactive&&(Br(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=He(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jr(this._container),this},bringToBack:function(){return this._map&&vr(this._container),this},_prepareOpen:function(a){var l=this._source;if(!l._map)return!1;if(l instanceof Ra){l=null;var O=this._source._layers;for(var V in O)if(O[V]._map){l=O[V];break}if(!l)return!1;this._source=l}if(!a)if(l.getCenter)a=l.getCenter();else if(l.getLatLng)a=l.getLatLng();else if(l.getBounds)a=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")a.innerHTML=l;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),O=this._getAnchor();this._zoomAnimated?Sa(this._container,a.add(O)):l=l.add(a).add(O);var V=this._containerBottom=-l.y,ee=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=V+"px",this._container.style.left=ee+"px"}},_getAnchor:function(){return[0,0]}});Mr.include({_initOverlay:function(a,l,O,V){var ee=l;return ee instanceof a||(ee=new a(V).setContent(l)),O&&ee.setLatLng(O),ee}}),Cn.include({_initOverlay:function(a,l,O,V){var ee=O;return ee instanceof a?(f(ee,V),ee._source=this):(ee=l&&!V?l:new a(V,this),ee.setContent(O)),ee}});var Ts=Wi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Wi.prototype.openOn.call(this,a)},onAdd:function(a){Wi.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Dt||this._source.on("preclick",Fi))},onRemove:function(a){Wi.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Dt||this._source.off("preclick",Fi))},getEvents:function(){var a=Wi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",l=this._container=nr("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),O=this._wrapper=nr("div",a+"-content-wrapper",l);if(this._contentNode=nr("div",a+"-content",O),pr(l),qi(this._contentNode),_r(l,"contextmenu",Fi),this._tipContainer=nr("div",a+"-tip-container",l),this._tip=nr("div",a+"-tip",this._tipContainer),this.options.closeButton){var V=this._closeButton=nr("a",a+"-close-button",l);V.setAttribute("role","button"),V.setAttribute("aria-label","Close popup"),V.href="#close",V.innerHTML='<span aria-hidden="true">&#215;</span>',_r(V,"click",function(ee){Ma(ee),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,l=a.style;l.width="",l.whiteSpace="nowrap";var O=a.offsetWidth;O=Math.min(O,this.options.maxWidth),O=Math.max(O,this.options.minWidth),l.width=O+1+"px",l.whiteSpace="",l.height="";var V=a.offsetHeight,ee=this.options.maxHeight,pe="leaflet-popup-scrolled";ee&&V>ee?(l.height=ee+"px",An(a,pe)):Br(a,pe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),O=this._getAnchor();Sa(this._container,l.add(O))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,l=parseInt(Bn(this._container,"marginBottom"),10)||0,O=this._container.offsetHeight+l,V=this._containerWidth,ee=new Z(this._containerLeft,-O-this._containerBottom);ee._add(Qa(this._container));var pe=a.layerPointToContainerPoint(ee),Ie=J(this.options.autoPanPadding),st=J(this.options.autoPanPaddingTopLeft||Ie),dt=J(this.options.autoPanPaddingBottomRight||Ie),Gt=a.getSize(),Mn=0,Fn=0;pe.x+V+dt.x>Gt.x&&(Mn=pe.x+V-Gt.x+dt.x),pe.x-Mn-st.x<0&&(Mn=pe.x-st.x),pe.y+O+dt.y>Gt.y&&(Fn=pe.y+O-Gt.y+dt.y),pe.y-Fn-st.y<0&&(Fn=pe.y-st.y),(Mn||Fn)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Mn,Fn]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xc=function(a,l){return new Ts(a,l)};Mr.mergeOptions({closePopupOnClick:!0}),Mr.include({openPopup:function(a,l,O){return this._initOverlay(Ts,a,l,O).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Cn.include({bindPopup:function(a,l){return this._popup=this._initOverlay(Ts,this._popup,a,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Ra||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Di(a);var l=a.layer||a.target;if(this._popup._source===l&&!(l instanceof Dt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=l,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Po=Wi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Wi.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Wi.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Wi.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",l=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=nr("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+k(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var l,O,V=this._map,ee=this._container,pe=V.latLngToContainerPoint(V.getCenter()),Ie=V.layerPointToContainerPoint(a),st=this.options.direction,dt=ee.offsetWidth,Gt=ee.offsetHeight,Mn=J(this.options.offset),Fn=this._getAnchor();st==="top"?(l=dt/2,O=Gt):st==="bottom"?(l=dt/2,O=0):st==="center"?(l=dt/2,O=Gt/2):st==="right"?(l=0,O=Gt/2):st==="left"?(l=dt,O=Gt/2):Ie.x<pe.x?(st="right",l=0,O=Gt/2):(st="left",l=dt+(Mn.x+Fn.x)*2,O=Gt/2),a=a.subtract(J(l,O,!0)).add(Mn).add(Fn),Br(ee,"leaflet-tooltip-right"),Br(ee,"leaflet-tooltip-left"),Br(ee,"leaflet-tooltip-top"),Br(ee,"leaflet-tooltip-bottom"),An(ee,"leaflet-tooltip-"+st),Sa(ee,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&ya(this._container,a)},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Vo=function(a,l){return new Po(a,l)};Mr.include({openTooltip:function(a,l,O){return this._initOverlay(Po,a,l,O).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Cn.include({bindTooltip:function(a,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Po,this._tooltip,a,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var l=a?"off":"on",O={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?O.add=this._openTooltip:(O.mouseover=this._openTooltip,O.mouseout=this.closeTooltip,O.click=this._openTooltip,this._map?this._addFocusListeners():O.add=this._addFocusListeners),this._tooltip.options.sticky&&(O.mousemove=this._moveTooltip),this[l](O),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Ra||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var l=typeof a.getElement=="function"&&a.getElement();l&&(_r(l,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),_r(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var l=typeof a.getElement=="function"&&a.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var l=a.latlng,O,V;this._tooltip.options.sticky&&a.originalEvent&&(O=this._map.mouseEventToContainerPoint(a.originalEvent),V=this._map.containerPointToLayerPoint(O),l=this._map.layerPointToLatLng(V)),this._tooltip.setLatLng(l)}});var lo=G.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var l=a&&a.tagName==="DIV"?a:document.createElement("div"),O=this.options;if(O.html instanceof Element?(On(l),l.appendChild(O.html)):l.innerHTML=O.html!==!1?O.html:"",O.bgPos){var V=J(O.bgPos);l.style.backgroundPosition=-V.x+"px "+-V.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function No(a){return new lo(a)}G.Default=oe;var ki=Cn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Wt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){f(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),wn(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Z?a:new Z(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var l=this.getPane().children,O=-a(-1/0,1/0),V=0,ee=l.length,pe;V<ee;V++)pe=l[V].style.zIndex,l[V]!==this._container&&pe&&(O=a(O,+pe));isFinite(O)&&(this.options.zIndex=O+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Wt.ielt9){ya(this._container,this.options.opacity);var a=+new Date,l=!1,O=!1;for(var V in this._tiles){var ee=this._tiles[V];if(!(!ee.current||!ee.loaded)){var pe=Math.min(1,(a-ee.loaded)/200);ya(ee.el,pe),pe<1?l=!0:(ee.active?O=!0:this._onOpaqueTile(ee),ee.active=!0)}}O&&!this._noPrune&&this._pruneTiles(),l&&(A(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=nr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,l=this.options.maxZoom;if(a!==void 0){for(var O in this._levels)O=Number(O),this._levels[O].el.children.length||O===a?(this._levels[O].el.style.zIndex=l-Math.abs(a-O),this._onUpdateLevel(O)):(wn(this._levels[O].el),this._removeTilesAtZoom(O),this._onRemoveLevel(O),delete this._levels[O]);var V=this._levels[a],ee=this._map;return V||(V=this._levels[a]={},V.el=nr("div","leaflet-tile-container leaflet-zoom-animated",this._container),V.el.style.zIndex=l,V.origin=ee.project(ee.unproject(ee.getPixelOrigin()),a).round(),V.zoom=a,this._setZoomTransform(V,ee.getCenter(),ee.getZoom()),_(V.el.offsetWidth),this._onCreateLevel(V)),this._level=V,V}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var a,l,O=this._map.getZoom();if(O>this.options.maxZoom||O<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)l=this._tiles[a],l.retain=l.current;for(a in this._tiles)if(l=this._tiles[a],l.current&&!l.active){var V=l.coords;this._retainParent(V.x,V.y,V.z,V.z-5)||this._retainChildren(V.x,V.y,V.z,V.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var l in this._tiles)this._tiles[l].coords.z===a&&this._removeTile(l)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)wn(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,l,O,V){var ee=Math.floor(a/2),pe=Math.floor(l/2),Ie=O-1,st=new Z(+ee,+pe);st.z=+Ie;var dt=this._tileCoordsToKey(st),Gt=this._tiles[dt];return Gt&&Gt.active?(Gt.retain=!0,!0):(Gt&&Gt.loaded&&(Gt.retain=!0),Ie>V?this._retainParent(ee,pe,Ie,V):!1)},_retainChildren:function(a,l,O,V){for(var ee=2*a;ee<2*a+2;ee++)for(var pe=2*l;pe<2*l+2;pe++){var Ie=new Z(ee,pe);Ie.z=O+1;var st=this._tileCoordsToKey(Ie),dt=this._tiles[st];if(dt&&dt.active){dt.retain=!0;continue}else dt&&dt.loaded&&(dt.retain=!0);O+1<V&&this._retainChildren(ee,pe,O+1,V)}},_resetView:function(a){var l=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var l=this.options;return l.minNativeZoom!==void 0&&a<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<a?l.maxNativeZoom:a},_setView:function(a,l,O,V){var ee=Math.round(l);this.options.maxZoom!==void 0&&ee>this.options.maxZoom||this.options.minZoom!==void 0&&ee<this.options.minZoom?ee=void 0:ee=this._clampZoom(ee);var pe=this.options.updateWhenZooming&&ee!==this._tileZoom;(!V||pe)&&(this._tileZoom=ee,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ee!==void 0&&this._update(a),O||this._pruneTiles(),this._noPrune=!!O),this._setZoomTransforms(a,l)},_setZoomTransforms:function(a,l){for(var O in this._levels)this._setZoomTransform(this._levels[O],a,l)},_setZoomTransform:function(a,l,O){var V=this._map.getZoomScale(O,a.zoom),ee=a.origin.multiplyBy(V).subtract(this._map._getNewPixelOrigin(l,O)).round();Wt.any3d?Wa(a.el,ee,V):Sa(a.el,ee)},_resetGrid:function(){var a=this._map,l=a.options.crs,O=this._tileSize=this.getTileSize(),V=this._tileZoom,ee=this._map.getPixelWorldBounds(this._tileZoom);ee&&(this._globalTileRange=this._pxBoundsToTileRange(ee)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,l.wrapLng[0]],V).x/O.x),Math.ceil(a.project([0,l.wrapLng[1]],V).x/O.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([l.wrapLat[0],0],V).y/O.x),Math.ceil(a.project([l.wrapLat[1],0],V).y/O.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var l=this._map,O=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),V=l.getZoomScale(O,this._tileZoom),ee=l.project(a,this._tileZoom).floor(),pe=l.getSize().divideBy(V*2);return new Ee(ee.subtract(pe),ee.add(pe))},_update:function(a){var l=this._map;if(l){var O=this._clampZoom(l.getZoom());if(a===void 0&&(a=l.getCenter()),this._tileZoom!==void 0){var V=this._getTiledPixelBounds(a),ee=this._pxBoundsToTileRange(V),pe=ee.getCenter(),Ie=[],st=this.options.keepBuffer,dt=new Ee(ee.getBottomLeft().subtract([st,-st]),ee.getTopRight().add([st,-st]));if(!(isFinite(ee.min.x)&&isFinite(ee.min.y)&&isFinite(ee.max.x)&&isFinite(ee.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Gt in this._tiles){var Mn=this._tiles[Gt].coords;(Mn.z!==this._tileZoom||!dt.contains(new Z(Mn.x,Mn.y)))&&(this._tiles[Gt].current=!1)}if(Math.abs(O-this._tileZoom)>1){this._setView(a,O);return}for(var Fn=ee.min.y;Fn<=ee.max.y;Fn++)for(var Qn=ee.min.x;Qn<=ee.max.x;Qn++){var xr=new Z(Qn,Fn);if(xr.z=this._tileZoom,!!this._isValidTile(xr)){var va=this._tiles[this._tileCoordsToKey(xr)];va?va.current=!0:Ie.push(xr)}}if(Ie.sort(function(Ja,yi){return Ja.distanceTo(pe)-yi.distanceTo(pe)}),Ie.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Na=document.createDocumentFragment();for(Qn=0;Qn<Ie.length;Qn++)this._addTile(Ie[Qn],Na);this._level.el.appendChild(Na)}}}},_isValidTile:function(a){var l=this._map.options.crs;if(!l.infinite){var O=this._globalTileRange;if(!l.wrapLng&&(a.x<O.min.x||a.x>O.max.x)||!l.wrapLat&&(a.y<O.min.y||a.y>O.max.y))return!1}if(!this.options.bounds)return!0;var V=this._tileCoordsToBounds(a);return ye(this.options.bounds).overlaps(V)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var l=this._map,O=this.getTileSize(),V=a.scaleBy(O),ee=V.add(O),pe=l.unproject(V,a.z),Ie=l.unproject(ee,a.z);return[pe,Ie]},_tileCoordsToBounds:function(a){var l=this._tileCoordsToNwSe(a),O=new Re(l[0],l[1]);return this.options.noWrap||(O=this._map.wrapLatLngBounds(O)),O},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var l=a.split(":"),O=new Z(+l[0],+l[1]);return O.z=+l[2],O},_removeTile:function(a){var l=this._tiles[a];l&&(wn(l.el),delete this._tiles[a],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){An(a,"leaflet-tile");var l=this.getTileSize();a.style.width=l.x+"px",a.style.height=l.y+"px",a.onselectstart=_,a.onmousemove=_,Wt.ielt9&&this.options.opacity<1&&ya(a,this.options.opacity)},_addTile:function(a,l){var O=this._getTilePos(a),V=this._tileCoordsToKey(a),ee=this.createTile(this._wrapCoords(a),B(this._tileReady,this,a));this._initTile(ee),this.createTile.length<2&&C(B(this._tileReady,this,a,null,ee)),Sa(ee,O),this._tiles[V]={el:ee,coords:a,current:!0},l.appendChild(ee),this.fire("tileloadstart",{tile:ee,coords:a})},_tileReady:function(a,l,O){l&&this.fire("tileerror",{error:l,tile:O,coords:a});var V=this._tileCoordsToKey(a);O=this._tiles[V],O&&(O.loaded=+new Date,this._map._fadeAnimated?(ya(O.el,0),A(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(O.active=!0,this._pruneTiles()),l||(An(O.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:O.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Wt.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(B(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var l=new Z(this._wrapX?E(a.x,this._wrapX):a.x,this._wrapY?E(a.y,this._wrapY):a.y);return l.z=a.z,l},_pxBoundsToTileRange:function(a){var l=this.getTileSize();return new Ee(a.min.unscaleBy(l).floor(),a.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function fi(a){return new ki(a)}var ds=ki.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,l){this._url=a,l=f(this,l),l.detectRetina&&Wt.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,l){return this._url===a&&l===void 0&&(l=!0),this._url=a,l||this.redraw(),this},createTile:function(a,l){var O=document.createElement("img");return _r(O,"load",B(this._tileOnLoad,this,l,O)),_r(O,"error",B(this._tileOnError,this,l,O)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(O.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(O.referrerPolicy=this.options.referrerPolicy),O.alt="",O.src=this.getTileUrl(a),O},getTileUrl:function(a){var l={r:Wt.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var O=this._globalTileRange.max.y-a.y;this.options.tms&&(l.y=O),l["-y"]=O}return F(this._url,h(l,this.options))},_tileOnLoad:function(a,l){Wt.ielt9?setTimeout(B(a,this,null,l),0):a(null,l)},_tileOnError:function(a,l,O){var V=this.options.errorTileUrl;V&&l.getAttribute("src")!==V&&(l.src=V),a(O,l)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,l=this.options.maxZoom,O=this.options.zoomReverse,V=this.options.zoomOffset;return O&&(a=l-a),a+V},_getSubdomain:function(a){var l=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var a,l;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(l=this._tiles[a].el,l.onload=_,l.onerror=_,!l.complete)){l.src=S;var O=this._tiles[a].coords;wn(l),delete this._tiles[a],this.fire("tileabort",{tile:l,coords:O})}},_removeTile:function(a){var l=this._tiles[a];if(l)return l.el.setAttribute("src",S),ki.prototype._removeTile.call(this,a)},_tileReady:function(a,l,O){if(!(!this._map||O&&O.getAttribute("src")===S))return ki.prototype._tileReady.call(this,a,l,O)}});function ri(a,l){return new ds(a,l)}var gi=ds.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,l){this._url=a;var O=h({},this.defaultWmsParams);for(var V in l)V in this.options||(O[V]=l[V]);l=f(this,l);var ee=l.detectRetina&&Wt.retina?2:1,pe=this.getTileSize();O.width=pe.x*ee,O.height=pe.y*ee,this.wmsParams=O},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ds.prototype.onAdd.call(this,a)},getTileUrl:function(a){var l=this._tileCoordsToNwSe(a),O=this._crs,V=Ce(O.project(l[0]),O.project(l[1])),ee=V.min,pe=V.max,Ie=(this._wmsVersion>=1.3&&this._crs===hi?[ee.y,ee.x,pe.y,pe.x]:[ee.x,ee.y,pe.x,pe.y]).join(","),st=ds.prototype.getTileUrl.call(this,a);return st+R(this.wmsParams,st,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ie},setParams:function(a,l){return h(this.wmsParams,a),l||this.redraw(),this}});function Js(a,l){return new gi(a,l)}ds.WMS=gi,ri.wms=Js;var Gi=Cn.extend({options:{padding:.1},initialize:function(a){f(this,a),k(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),An(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,l){var O=this._map.getZoomScale(l,this._zoom),V=this._map.getSize().multiplyBy(.5+this.options.padding),ee=this._map.project(this._center,l),pe=V.multiplyBy(-O).add(ee).subtract(this._map._getNewPixelOrigin(a,l));Wt.any3d?Wa(this._container,pe,O):Sa(this._container,pe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,l=this._map.getSize(),O=this._map.containerPointToLayerPoint(l.multiplyBy(-a)).round();this._bounds=new Ee(O,O.add(l.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),uo=Gi.extend({options:{tolerance:0},getEvents:function(){var a=Gi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Gi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");_r(a,"mousemove",this._onMouseMove,this),_r(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_r(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,wn(this._container),na(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var l in this._layers)a=this._layers[l],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Gi.prototype._update.call(this);var a=this._bounds,l=this._container,O=a.getSize(),V=Wt.retina?2:1;Sa(l,a.min),l.width=V*O.x,l.height=V*O.y,l.style.width=O.x+"px",l.style.height=O.y+"px",Wt.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Gi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[k(a)]=a;var l=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var l=a._order,O=l.next,V=l.prev;O?O.prev=V:this._drawLast=V,V?V.next=O:this._drawFirst=O,delete a._order,delete this._layers[k(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var l=a.options.dashArray.split(/[, ]+/),O=[],V,ee;for(ee=0;ee<l.length;ee++){if(V=Number(l[ee]),isNaN(V))return;O.push(V)}a.options._dashArray=O}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var l=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ee,this._redrawBounds.extend(a._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(a._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var l=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,l=this._redrawBounds;if(this._ctx.save(),l){var O=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,O.x,O.y),this._ctx.clip()}this._drawing=!0;for(var V=this._drawFirst;V;V=V.next)a=V.layer,(!l||a._pxBounds&&a._pxBounds.intersects(l))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,l){if(this._drawing){var O,V,ee,pe,Ie=a._parts,st=Ie.length,dt=this._ctx;if(st){for(dt.beginPath(),O=0;O<st;O++){for(V=0,ee=Ie[O].length;V<ee;V++)pe=Ie[O][V],dt[V?"lineTo":"moveTo"](pe.x,pe.y);l&&dt.closePath()}this._fillStroke(dt,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var l=a._point,O=this._ctx,V=Math.max(Math.round(a._radius),1),ee=(Math.max(Math.round(a._radiusY),1)||V)/V;ee!==1&&(O.save(),O.scale(1,ee)),O.beginPath(),O.arc(l.x,l.y/ee,V,0,Math.PI*2,!1),ee!==1&&O.restore(),this._fillStroke(O,a)}},_fillStroke:function(a,l){var O=l.options;O.fill&&(a.globalAlpha=O.fillOpacity,a.fillStyle=O.fillColor||O.color,a.fill(O.fillRule||"evenodd")),O.stroke&&O.weight!==0&&(a.setLineDash&&a.setLineDash(l.options&&l.options._dashArray||[]),a.globalAlpha=O.opacity,a.lineWidth=O.weight,a.strokeStyle=O.color,a.lineCap=O.lineCap,a.lineJoin=O.lineJoin,a.stroke())},_onClick:function(a){for(var l=this._map.mouseEventToLayerPoint(a),O,V,ee=this._drawFirst;ee;ee=ee.next)O=ee.layer,O.options.interactive&&O._containsPoint(l)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(O))&&(V=O);this._fireEvent(V?[V]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,l)}},_handleMouseOut:function(a){var l=this._hoveredLayer;l&&(Br(this._container,"leaflet-interactive"),this._fireEvent([l],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,l){if(!this._mouseHoverThrottled){for(var O,V,ee=this._drawFirst;ee;ee=ee.next)O=ee.layer,O.options.interactive&&O._containsPoint(l)&&(V=O);V!==this._hoveredLayer&&(this._handleMouseOut(a),V&&(An(this._container,"leaflet-interactive"),this._fireEvent([V],a,"mouseover"),this._hoveredLayer=V)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(B(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,l,O){this._map._fireDOMEvent(l,O||l.type,a)},_bringToFront:function(a){var l=a._order;if(l){var O=l.next,V=l.prev;if(O)O.prev=V;else return;V?V.next=O:O&&(this._drawFirst=O),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(a)}},_bringToBack:function(a){var l=a._order;if(l){var O=l.next,V=l.prev;if(V)V.next=O;else return;O?O.prev=V:V&&(this._drawLast=V),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(a)}}});function vi(a){return Wt.canvas?new uo(a):null}var Xs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Hs={_initContainer:function(){this._container=nr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Gi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var l=a._container=Xs("shape");An(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",a._path=Xs("path"),l.appendChild(a._path),this._updateStyle(a),this._layers[k(a)]=a},_addPath:function(a){var l=a._container;this._container.appendChild(l),a.options.interactive&&a.addInteractiveTarget(l)},_removePath:function(a){var l=a._container;wn(l),a.removeInteractiveTarget(l),delete this._layers[k(a)]},_updateStyle:function(a){var l=a._stroke,O=a._fill,V=a.options,ee=a._container;ee.stroked=!!V.stroke,ee.filled=!!V.fill,V.stroke?(l||(l=a._stroke=Xs("stroke")),ee.appendChild(l),l.weight=V.weight+"px",l.color=V.color,l.opacity=V.opacity,V.dashArray?l.dashStyle=m(V.dashArray)?V.dashArray.join(" "):V.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=V.lineCap.replace("butt","flat"),l.joinstyle=V.lineJoin):l&&(ee.removeChild(l),a._stroke=null),V.fill?(O||(O=a._fill=Xs("fill")),ee.appendChild(O),O.color=V.fillColor||V.color,O.opacity=V.fillOpacity):O&&(ee.removeChild(O),a._fill=null)},_updateCircle:function(a){var l=a._point.round(),O=Math.round(a._radius),V=Math.round(a._radiusY||O);this._setPath(a,a._empty()?"M0 0":"AL "+l.x+","+l.y+" "+O+","+V+" 0,"+65535*360)},_setPath:function(a,l){a._path.v=l},_bringToFront:function(a){jr(a._container)},_bringToBack:function(a){vr(a._container)}},Ao=Wt.vml?Xs:Nr,ps=Gi.extend({_initContainer:function(){this._container=Ao("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ao("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wn(this._container),na(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Gi.prototype._update.call(this);var a=this._bounds,l=a.getSize(),O=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,O.setAttribute("width",l.x),O.setAttribute("height",l.y)),Sa(O,a.min),O.setAttribute("viewBox",[a.min.x,a.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(a){var l=a._path=Ao("path");a.options.className&&An(l,a.options.className),a.options.interactive&&An(l,"leaflet-interactive"),this._updateStyle(a),this._layers[k(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){wn(a._path),a.removeInteractiveTarget(a._path),delete this._layers[k(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var l=a._path,O=a.options;l&&(O.stroke?(l.setAttribute("stroke",O.color),l.setAttribute("stroke-opacity",O.opacity),l.setAttribute("stroke-width",O.weight),l.setAttribute("stroke-linecap",O.lineCap),l.setAttribute("stroke-linejoin",O.lineJoin),O.dashArray?l.setAttribute("stroke-dasharray",O.dashArray):l.removeAttribute("stroke-dasharray"),O.dashOffset?l.setAttribute("stroke-dashoffset",O.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),O.fill?(l.setAttribute("fill",O.fillColor||O.color),l.setAttribute("fill-opacity",O.fillOpacity),l.setAttribute("fill-rule",O.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(a,l){this._setPath(a,jn(a._parts,l))},_updateCircle:function(a){var l=a._point,O=Math.max(Math.round(a._radius),1),V=Math.max(Math.round(a._radiusY),1)||O,ee="a"+O+","+V+" 0 1,0 ",pe=a._empty()?"M0 0":"M"+(l.x-O)+","+l.y+ee+O*2+",0 "+ee+-O*2+",0 ";this._setPath(a,pe)},_setPath:function(a,l){a._path.setAttribute("d",l)},_bringToFront:function(a){jr(a._path)},_bringToBack:function(a){vr(a._path)}});Wt.vml&&ps.include(Hs);function po(a){return Wt.svg||Wt.vml?new ps(a):null}Mr.include({getRenderer:function(a){var l=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var l=this._paneRenderers[a];return l===void 0&&(l=this._createRenderer({pane:a}),this._paneRenderers[a]=l),l},_createRenderer:function(a){return this.options.preferCanvas&&vi(a)||po(a)}});var Hc=qr.extend({initialize:function(a,l){qr.prototype.initialize.call(this,this._boundsToLatLngs(a),l)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=ye(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function _a(a,l){return new Hc(a,l)}ps.create=Ao,ps.pointsToPath=jn,Jr.geometryToLayer=Rs,Jr.coordsToLatLng=es,Jr.coordsToLatLngs=Ys,Jr.latLngToCoords=Qs,Jr.latLngsToCoords=oo,Jr.getFeature=Li,Jr.asFeature=Zi,Mr.mergeOptions({boxZoom:!0});var Oo=ii.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){_r(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){na(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),pi(),mi(),this._startPoint=this._map.mouseEventToContainerPoint(a),_r(document,{contextmenu:Di,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=nr("div","leaflet-zoom-box",this._container),An(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var l=new Ee(this._point,this._startPoint),O=l.getSize();Sa(this._box,l.min),this._box.style.width=O.x+"px",this._box.style.height=O.y+"px"},_finish:function(){this._moved&&(wn(this._box),Br(this._container,"leaflet-crosshair")),Is(),no(),na(document,{contextmenu:Di,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(B(this._resetState,this),0);var l=new Re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Mr.addInitHook("addHandler","boxZoom",Oo),Mr.mergeOptions({doubleClickZoom:!0});var Ps=ii.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var l=this._map,O=l.getZoom(),V=l.options.zoomDelta,ee=a.originalEvent.shiftKey?O-V:O+V;l.options.doubleClickZoom==="center"?l.setZoom(ee):l.setZoomAround(a.containerPoint,ee)}});Mr.addInitHook("addHandler","doubleClickZoom",Ps),Mr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var lc=ii.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Cr(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}An(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Br(this._map._container,"leaflet-grab"),Br(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ye(this._map.options.maxBounds);this._offsetLimit=Ce(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var l=this._lastTime=+new Date,O=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(O),this._times.push(l),this._prunePositions(l)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,l){return a-(a-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;a.x<l.min.x&&(a.x=this._viscousLimit(a.x,l.min.x)),a.y<l.min.y&&(a.y=this._viscousLimit(a.y,l.min.y)),a.x>l.max.x&&(a.x=this._viscousLimit(a.x,l.max.x)),a.y>l.max.y&&(a.y=this._viscousLimit(a.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,l=Math.round(a/2),O=this._initialWorldOffset,V=this._draggable._newPos.x,ee=(V-l+O)%a+l-O,pe=(V+l+O)%a-l-O,Ie=Math.abs(ee+O)<Math.abs(pe+O)?ee:pe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ie},_onDragEnd:function(a){var l=this._map,O=l.options,V=!O.inertia||a.noInertia||this._times.length<2;if(l.fire("dragend",a),V)l.fire("moveend");else{this._prunePositions(+new Date);var ee=this._lastPos.subtract(this._positions[0]),pe=(this._lastTime-this._times[0])/1e3,Ie=O.easeLinearity,st=ee.multiplyBy(Ie/pe),dt=st.distanceTo([0,0]),Gt=Math.min(O.inertiaMaxSpeed,dt),Mn=st.multiplyBy(Gt/dt),Fn=Gt/(O.inertiaDeceleration*Ie),Qn=Mn.multiplyBy(-Fn/2).round();!Qn.x&&!Qn.y?l.fire("moveend"):(Qn=l._limitOffset(Qn,l.options.maxBounds),C(function(){l.panBy(Qn,{duration:Fn,easeLinearity:Ie,noMoveStart:!0,animate:!0})}))}}});Mr.addInitHook("addHandler","dragging",lc),Mr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zo=ii.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),_r(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),na(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,l=document.documentElement,O=a.scrollTop||l.scrollTop,V=a.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(V,O)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var l=this._panKeys={},O=this.keyCodes,V,ee;for(V=0,ee=O.left.length;V<ee;V++)l[O.left[V]]=[-1*a,0];for(V=0,ee=O.right.length;V<ee;V++)l[O.right[V]]=[a,0];for(V=0,ee=O.down.length;V<ee;V++)l[O.down[V]]=[0,a];for(V=0,ee=O.up.length;V<ee;V++)l[O.up[V]]=[0,-1*a]},_setZoomDelta:function(a){var l=this._zoomKeys={},O=this.keyCodes,V,ee;for(V=0,ee=O.zoomIn.length;V<ee;V++)l[O.zoomIn[V]]=a;for(V=0,ee=O.zoomOut.length;V<ee;V++)l[O.zoomOut[V]]=-a},_addHooks:function(){_r(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){na(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var l=a.keyCode,O=this._map,V;if(l in this._panKeys){if(!O._panAnim||!O._panAnim._inProgress)if(V=this._panKeys[l],a.shiftKey&&(V=J(V).multiplyBy(3)),O.options.maxBounds&&(V=O._limitOffset(J(V),O.options.maxBounds)),O.options.worldCopyJump){var ee=O.wrapLatLng(O.unproject(O.project(O.getCenter()).add(V)));O.panTo(ee)}else O.panBy(V)}else if(l in this._zoomKeys)O.setZoom(O.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&O._popup&&O._popup.options.closeOnEscapeKey)O.closePopup();else return;Di(a)}}});Mr.addInitHook("addHandler","keyboard",Zo),Mr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ts=ii.extend({addHooks:function(){_r(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){na(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var l=Ws(a),O=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var V=Math.max(O-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(B(this._performZoom,this),V),Di(a)},_performZoom:function(){var a=this._map,l=a.getZoom(),O=this._map.options.zoomSnap||0;a._stop();var V=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ee=4*Math.log(2/(1+Math.exp(-Math.abs(V))))/Math.LN2,pe=O?Math.ceil(ee/O)*O:ee,Ie=a._limitZoom(l+(this._delta>0?pe:-pe))-l;this._delta=0,this._startTime=null,Ie&&(a.options.scrollWheelZoom==="center"?a.setZoom(l+Ie):a.setZoomAround(this._lastMousePos,l+Ie))}});Mr.addInitHook("addHandler","scrollWheelZoom",ts);var Do=600;Mr.mergeOptions({tapHold:Wt.touchNative&&Wt.safari&&Wt.mobile,tapTolerance:15});var mo=ii.extend({addHooks:function(){_r(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){na(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var l=a.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(B(function(){this._cancel(),this._isTapValid()&&(_r(document,"touchend",Ma),_r(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Do),_r(document,"touchend touchcancel contextmenu",this._cancel,this),_r(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){na(document,"touchend",Ma),na(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),na(document,"touchend touchcancel contextmenu",this._cancel,this),na(document,"touchmove",this._onMove,this)},_onMove:function(a){var l=a.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,l){var O=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});O._simulated=!0,l.target.dispatchEvent(O)}});Mr.addInitHook("addHandler","tapHold",mo),Mr.mergeOptions({touchZoom:Wt.touch,bounceAtZoomLimits:!0});var ns=ii.extend({addHooks:function(){An(this._map._container,"leaflet-touch-zoom"),_r(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Br(this._map._container,"leaflet-touch-zoom"),na(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var l=this._map;if(!(!a.touches||a.touches.length!==2||l._animatingZoom||this._zooming)){var O=l.mouseEventToContainerPoint(a.touches[0]),V=l.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(O.add(V)._divideBy(2))),this._startDist=O.distanceTo(V),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),_r(document,"touchmove",this._onTouchMove,this),_r(document,"touchend touchcancel",this._onTouchEnd,this),Ma(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var l=this._map,O=l.mouseEventToContainerPoint(a.touches[0]),V=l.mouseEventToContainerPoint(a.touches[1]),ee=O.distanceTo(V)/this._startDist;if(this._zoom=l.getScaleZoom(ee,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&ee<1||this._zoom>l.getMaxZoom()&&ee>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,ee===1)return}else{var pe=O._add(V)._divideBy(2)._subtract(this._centerPoint);if(ee===1&&pe.x===0&&pe.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(pe),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var Ie=B(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=C(Ie,this,!0),Ma(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),na(document,"touchmove",this._onTouchMove,this),na(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Mr.addInitHook("addHandler","touchZoom",ns),Mr.BoxZoom=Oo,Mr.DoubleClickZoom=Ps,Mr.Drag=lc,Mr.Keyboard=Zo,Mr.ScrollWheelZoom=ts,Mr.TapHold=mo,Mr.TouchZoom=ns,i.Bounds=Ee,i.Browser=Wt,i.CRS=we,i.Canvas=uo,i.Circle=qt,i.CircleMarker=_t,i.Class=j,i.Control=ni,i.DivIcon=lo,i.DivOverlay=Wi,i.DomEvent=nc,i.DomUtil=zo,i.Draggable=Cr,i.Evented=W,i.FeatureGroup=Ra,i.GeoJSON=Jr,i.GridLayer=ki,i.Handler=ii,i.Icon=G,i.ImageOverlay=$i,i.LatLng=Te,i.LatLngBounds=Re,i.Layer=Cn,i.LayerGroup=Dn,i.LineUtil=ft,i.Map=Mr,i.Marker=rt,i.Mixin=Lc,i.Path=Dt,i.Point=Z,i.PolyUtil=Gs,i.Polygon=qr,i.Polyline=vn,i.Popup=Ts,i.PosAnimation=Mi,i.Projection=sc,i.Rectangle=Hc,i.Renderer=Gi,i.SVG=ps,i.SVGOverlay=Cs,i.TileLayer=ds,i.Tooltip=Po,i.Transformation=Qe,i.Util=M,i.VideoOverlay=To,i.bind=B,i.bounds=Ce,i.canvas=vi,i.circle=Hn,i.circleMarker=Tn,i.control=Ss,i.divIcon=No,i.extend=h,i.featureGroup=te,i.geoJSON=oc,i.geoJson=Fo,i.gridLayer=fi,i.icon=Y,i.imageOverlay=Us,i.latLng=He,i.latLngBounds=ye,i.layerGroup=Ho,i.map=Vi,i.marker=St,i.point=J,i.polygon=ia,i.polyline=Qr,i.popup=xc,i.rectangle=_a,i.setOptions=f,i.stamp=k,i.svg=po,i.svgOverlay=qo,i.tileLayer=ri,i.tooltip=Vo,i.transformation=Ze,i.version=o,i.videoOverlay=cc;var Ns=window.L;i.noConflict=function(){return window.L=Ns,this},window.L=i})}(Fd,Fd.exports)),Fd.exports}var gb=vk();function yk(e,r,i){return Object.freeze({instance:e,context:r,container:i})}function _k(e,r){return r==null?function(o,h){const N=ne.useRef(void 0);return N.current||(N.current=e(o,h)),N}:function(o,h){const N=ne.useRef(void 0);N.current||(N.current=e(o,h));const B=ne.useRef(o),{instance:I}=N.current;return ne.useEffect(function(){B.current!==o&&(r(I,o,B.current),B.current=o)},[I,o,r]),N}}function bk(e,r){ne.useEffect(function(){return(r.layerContainer??r.map).addLayer(e.instance),function(){r.layerContainer?.removeLayer(e.instance),r.map.removeLayer(e.instance)}},[r,e])}function wk(e){return function(i){const o=hb(),h=e(fb(i,o),o);return dk(o.map,i.attribution),fk(h.current,i.eventHandlers),bk(h.current,o),h}}function Ek(e,r){const i=_k(e,r),o=wk(i);return hk(o)}function Sk(e,r,i){const{opacity:o,zIndex:h}=r;o!=null&&o!==i.opacity&&e.setOpacity(o),h!=null&&h!==i.zIndex&&e.setZIndex(h)}function xk(){return hb().map}function Rk({bounds:e,boundsOptions:r,center:i,children:o,className:h,id:N,placeholder:B,style:I,whenReady:k,zoom:d,...E},_){const[b]=ne.useState({className:h,id:N,style:I}),[T,v]=ne.useState(null),f=ne.useRef(void 0);ne.useImperativeHandle(_,()=>T?.map??null,[T]);const R=ne.useCallback(F=>{if(F!==null&&!f.current){const m=new gb.Map(F,E);f.current=m,i!=null&&d!=null?m.setView(i,d):e!=null&&m.fitBounds(e,r),k!=null&&m.whenReady(k),v(mk(m))}},[]);ne.useEffect(()=>()=>{T?.map.remove()},[T]);const g=T?c.createElement(mb,{value:T},o):B??null;return c.createElement("div",{...b,ref:R},g)}const kk=ne.forwardRef(Rk),Ck=Ek(function({url:r,...i},o){const h=new gb.TileLayer(r,fb(i,o));return yk(h,o)},function(r,i,o){Sk(r,i,o);const{url:h}=i;h!=null&&h!==o.url&&r.setUrl(h)});var vb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Y0=c.createContext&&c.createContext(vb),Tk=["attr","size","title"];function Pk(e,r){if(e==null)return{};var i=Nk(e,r),o,h;if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(e);for(h=0;h<N.length;h++)o=N[h],!(r.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function Nk(e,r){if(e==null)return{};var i={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(r.indexOf(o)>=0)continue;i[o]=e[o]}return i}function ym(){return ym=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ym.apply(this,arguments)}function Q0(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),i.push.apply(i,o)}return i}function _m(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Q0(Object(i),!0).forEach(function(o){Ak(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Q0(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function Ak(e,r,i){return r=Ok(r),r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function Ok(e){var r=Dk(e,"string");return typeof r=="symbol"?r:r+""}function Dk(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,r);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function yb(e){return e&&e.map((r,i)=>c.createElement(r.tag,_m({key:i},r.attr),yb(r.child)))}function Mk(e){return r=>c.createElement(Lk,ym({attr:_m({},e.attr)},r),yb(e.child))}function Lk(e){var r=i=>{var{attr:o,size:h,title:N}=e,B=Pk(e,Tk),I=h||i.size||"1em",k;return i.className&&(k=i.className),e.className&&(k=(k?k+" ":"")+e.className),c.createElement("svg",ym({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},i.attr,o,B,{className:k,style:_m(_m({color:e.color||i.color},i.style),e.style),height:I,width:I,xmlns:"http://www.w3.org/2000/svg"}),N&&c.createElement("title",null,N),e.children)};return Y0!==void 0?c.createElement(Y0.Consumer,null,i=>r(i)):r(vb)}function Ik(e){return Mk({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(e)}function jk({coords:e}){const r=xk();return c.useEffect(()=>{e&&r.flyTo(e,12,{duration:1.5})},[e,r]),null}const J0=[24.8607,67.0011],Bk=()=>{const[e,r]=ne.useState(""),[i,o]=ne.useState(null),[h,N]=ne.useState(!1),{user:B}=So(),{doctor:I}=Ms(),{admin:k}=wc(),d=(v,f)=>{N(!0),r(v),setTimeout(()=>{o(f),N(!1)},1200)},E=B&&B.name||I&&I.name||k&&"Admin"||"Guest",_=B&&"User"||I&&"Doctor"||k&&"Admin"||"Guest",T=((v="")=>{if(!v||typeof v!="string")return"G";const f=v.trim().split(/\s+/).filter(Boolean);if(f.length>=2){const R=f[0][0]||"",g=f[f.length-1][0]||"";return(R+g).toUpperCase().slice(0,3)}return v.slice(0,2).toUpperCase()})(E);return c.createElement(c.Fragment,null,c.createElement("div",{className:"w-full flex flex-col items-center justify-center py-4 px-4 bg-gradient-to-r from-[#014e78] via-[#009688] to-[#43cea2] text-white shadow-lg mb-2 relative overflow-hidden"},c.createElement("div",{className:"absolute left-4 top-4 opacity-12 text-[96px] pointer-events-none select-none text-white/60"},c.createElement(Ik,null)),c.createElement("div",{className:"flex items-center gap-4 mb-2 z-10"},c.createElement("div",{className:"relative",title:E,"aria-label":`${_} avatar for ${E}`},c.createElement("div",{className:`
                w-14 h-14 rounded-full
                bg-gradient-to-tr from-emerald-500 to-cyan-400
                flex items-center justify-center
                text-white text-lg font-extrabold
                shadow-2xl
                transform transition-all duration-200
                ring-4 ring-white/80
                hover:scale-105
                `},c.createElement("span",{className:"select-none"},T))),c.createElement("p",{className:"text-lg sm:text-xl font-semibold z-10"},"Hello, ",E)),c.createElement("h2",{className:"text-xl sm:text-3xl font-extrabold tracking-tight text-center z-10 drop-shadow-lg"},"Find the ",c.createElement("span",{className:"text-[#ffe082]"},"Best Doctor")," Near You")),c.createElement("section",{className:"relative w-full min-h-[400px] mt-0 overflow-hidden"},h&&c.createElement("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-white/80 backdrop-blur-sm"},c.createElement("div",{className:"w-12 h-12 border-4 border-t-transparent border-blue-500 rounded-full animate-spin"})),c.createElement("div",{className:"absolute inset-0 z-0"},c.createElement(kk,{center:i||J0,zoom:12,style:{height:"100%",width:"100%"},zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,attributionControl:!1},c.createElement(Ck,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),c.createElement(jk,{coords:i||J0})),c.createElement("div",{className:"absolute inset-0 bg-white/70 backdrop-blur-sm z-10"})),c.createElement("div",{className:"relative h-[400px] z-20 flex flex-col items-center justify-center max-w-2xl mx-auto py-12 px-6"},c.createElement(uk,{onCitySelect:d}))),!e&&c.createElement("div",{className:"w-full flex flex-col items-center mt-6 space-y-4"},c.createElement("h2",{className:"text-lg font-bold"},"How can we help you today?"),c.createElement(ub,{className:"text-sm px-6 py-3"})))},zk=()=>c.createElement("section",{className:"py-16 bg-gray-50"},c.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"},"Common Health Conditions"),c.createElement("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto"},"Find expert doctors for the most common health conditions and symptoms")),c.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4"},Kx.map((e,r)=>c.createElement(Bi,{key:r,to:e.href,className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 p-6 text-center group"},c.createElement("div",{className:"text-3xl mb-3"},e.icon),c.createElement("h3",{className:"text-sm font-medium text-gray-900 mb-2 group-hover:text-blue-600"},e.title),c.createElement("p",{className:"text-xs text-gray-500"},e.description)))))),Uk=()=>c.createElement("section",{className:"py-16 bg-white"},c.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"},"Why Choose QuickMed?"),c.createElement("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto"},"Pakistan's most trusted healthcare platform with verified doctors and secure services")),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"},$x.map((e,r)=>c.createElement("div",{key:r,className:"text-center"},c.createElement("div",{className:"text-4xl mb-4"},e.icon),c.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},e.title),c.createElement("p",{className:"text-gray-600 mb-3"},e.description),c.createElement("div",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},e.stat)))))),Hk=()=>c.createElement("section",{className:"py-16 bg-emerald-700 text-white"},c.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold mb-4"},"Trusted by Millions"),c.createElement("p",{className:"text-xl text-emerald-100"},"Join Pakistan's largest healthcare community")),c.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8"},Yx.map((e,r)=>c.createElement("div",{key:r,className:"bg-emerald-800 bg-opacity-80 rounded-xl shadow-md p-8 flex flex-col items-center transition-transform duration-200 hover:scale-105"},c.createElement("div",{className:"text-4xl md:text-5xl font-bold mb-2 text-emerald-200 drop-shadow"},e.number),c.createElement("h3",{className:"text-lg md:text-xl font-semibold mb-2 text-white"},e.label),c.createElement("p",{className:"text-emerald-100 text-sm md:text-base text-center"},e.description)))))),Wl={getPlatformRatings:()=>Ur.get("/auth/platform-rating"),addDoctorRating:(e,r)=>Ur.post(`/auth/doctor-rating/${r}`,e)},nf={getPlatformRatings:()=>Wl.getPlatformRatings(),addDoctorRating:(e,r)=>Wl.addDoctorRating(e,r),addPlatformRating:e=>Wl.addPlatformRating(e),updateDoctorRating:(e,r)=>Wl.updateProfile(e,r),updatePlatformRating:e=>Wl.updatePlatformRating(e),deleteDoctorRating:e=>Wl.updatePlatformRating(e),deletePlatformRating:e=>Wl.updatePlatformRating(e)},_b=ne.createContext(),Fk=({children:e})=>{const[r,i]=ne.useState([]),o=async()=>{try{const B=await nf.getPlatformRatings();console.log(B.data.data),i(B.data.data)}catch{zn.error("Failed to fetch ratings")}},h=async(B,I)=>{console.log(B,I);try{const k=await nf.addDoctorRating(B,I);zn.success("Rating added!")}catch(k){console.log(k),zn.error("Failed to add rating")}},N=async B=>{try{const I=await nf.addPlatformRating(B);zn.success("Rating added!")}catch{zn.error("Failed to add rating")}};return ne.useEffect(()=>{o()},[]),c.createElement(_b.Provider,{value:{ratings:r,addDoctorRating:h,addPlatformRating:N}},e)},bb=()=>ne.useContext(_b),qk=({level:e})=>{const r={excellent:"bg-emerald-100 text-emerald-800",good:"bg-amber-100 text-amber-800",fair:"bg-sky-100 text-sky-800",poor:"bg-rose-100 text-rose-800",default:"bg-gray-100 text-gray-800"};return c.createElement("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium shadow-sm ${r[(e||"").toLowerCase()||"default"]}`,"aria-label":`Satisfaction: ${e}`},c.createElement("span",{className:"w-2 h-2 rounded-full bg-current opacity-80"}),e)},Vk=({filled:e})=>c.createElement("svg",{viewBox:"0 0 20 20",className:`w-4 h-4 ${e?"text-yellow-400":"text-gray-300"}`,fill:"currentColor","aria-hidden":"true"},c.createElement("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})),Zk=({testimonial:e})=>{const{name:r="Anonymous",rating:i=5,description:o="",avatar:h,satisfactionLevel:N="Excellent"}=e||{};return c.createElement("article",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-lg hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-300 max-w-md mx-auto flex flex-col","aria-label":`Testimonial from ${r}`},c.createElement("div",{className:"flex items-start justify-between mb-4"},c.createElement("div",{className:"flex items-center gap-4"},h?c.createElement("img",{src:h,alt:`${r} avatar`,className:"w-14 h-14 rounded-full object-cover border-2 border-white shadow-sm",loading:"lazy"}):c.createElement("div",null),c.createElement("div",null,c.createElement("h3",{className:"text-sm sm:text-base font-semibold text-emerald-900"},r),c.createElement("div",{className:"flex items-center gap-2 mt-1"},c.createElement("div",{className:"flex -space-x-1"},[...Array(5)].map((B,I)=>c.createElement(Vk,{key:I,filled:I<Math.round(i)}))),c.createElement("span",{className:"text-xs text-gray-500 font-medium"},i.toFixed(1)))))),c.createElement("blockquote",{className:"relative text-gray-800 italic text-sm sm:text-base mb-6"},c.createElement("span",{className:"absolute -top-4 -left-3 text-4xl text-emerald-100","aria-hidden":"true"},"“"),c.createElement("p",{className:"pl-4"},o)),c.createElement("div",null,c.createElement(qk,{level:N})))},$k=()=>{const{ratings:e}=bb();return console.log(e,"ratings"),c.createElement("section",{className:"py-16 bg-emerald-50"},c.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-emerald-900 mb-4"},"What Our Patients Say"),c.createElement("p",{className:"text-lg text-emerald-700 max-w-2xl mx-auto"},"Read reviews from thousands of satisfied patients across Pakistan"),c.createElement("div",{className:"flex items-center justify-center mt-4"},c.createElement("div",{className:"flex items-center"},c.createElement("span",{className:"text-yellow-500 text-2xl"},"★★★★★"),c.createElement("span",{className:"ml-2 text-lg font-semibold text-emerald-900"},"4.5"),c.createElement("span",{className:"ml-1 text-emerald-700"},"out of 5")))),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8"},e.map((r,i)=>c.createElement(Zk,{testimonial:r,key:i})))))};function Dl(e,r,{checkForDefaultPrevented:i=!0}={}){return function(h){if(e?.(h),i===!1||!h.defaultPrevented)return r?.(h)}}function X0(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function wb(...e){return r=>{let i=!1;const o=e.map(h=>{const N=X0(h,r);return!i&&typeof N=="function"&&(i=!0),N});if(i)return()=>{for(let h=0;h<o.length;h++){const N=o[h];typeof N=="function"?N():X0(e[h],null)}}}}function ru(...e){return ne.useCallback(wb(...e),e)}var rf={exports:{}},jd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function Wk(){if(ey)return jd;ey=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(o,h,N){var B=null;if(N!==void 0&&(B=""+N),h.key!==void 0&&(B=""+h.key),"key"in h){N={};for(var I in h)I!=="key"&&(N[I]=h[I])}else N=h;return h=N.ref,{$$typeof:e,type:o,key:B,ref:h!==void 0?h:null,props:N}}return jd.Fragment=r,jd.jsx=i,jd.jsxs=i,jd}var ty;function Gk(){return ty||(ty=1,rf.exports=Wk()),rf.exports}var wa=Gk();function Kk(e,r){const i=ne.createContext(r),o=N=>{const{children:B,...I}=N,k=ne.useMemo(()=>I,Object.values(I));return wa.jsx(i.Provider,{value:k,children:B})};o.displayName=e+"Provider";function h(N){const B=ne.useContext(i);if(B)return B;if(r!==void 0)return r;throw new Error(`\`${N}\` must be used within \`${e}\``)}return[o,h]}function Yk(e,r=[]){let i=[];function o(N,B){const I=ne.createContext(B),k=i.length;i=[...i,B];const d=_=>{const{scope:b,children:T,...v}=_,f=b?.[e]?.[k]||I,R=ne.useMemo(()=>v,Object.values(v));return wa.jsx(f.Provider,{value:R,children:T})};d.displayName=N+"Provider";function E(_,b){const T=b?.[e]?.[k]||I,v=ne.useContext(T);if(v)return v;if(B!==void 0)return B;throw new Error(`\`${_}\` must be used within \`${N}\``)}return[d,E]}const h=()=>{const N=i.map(B=>ne.createContext(B));return function(I){const k=I?.[e]||N;return ne.useMemo(()=>({[`__scope${e}`]:{...I,[e]:k}}),[I,k])}};return h.scopeName=e,[o,Qk(h,...r)]}function Qk(...e){const r=e[0];if(e.length===1)return r;const i=()=>{const o=e.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(N){const B=o.reduce((I,{useScope:k,scopeName:d})=>{const _=k(N)[`__scope${d}`];return{...I,..._}},{});return ne.useMemo(()=>({[`__scope${r.scopeName}`]:B}),[B])}};return i.scopeName=r.scopeName,i}var Kd=globalThis?.document?ne.useLayoutEffect:()=>{},Jk=l_[" useId ".trim().toString()]||(()=>{}),Xk=0;function af(e){const[r,i]=ne.useState(Jk());return Kd(()=>{i(o=>o??String(Xk++))},[e]),e||(r?`radix-${r}`:"")}var eC=l_[" useInsertionEffect ".trim().toString()]||Kd;function tC({prop:e,defaultProp:r,onChange:i=()=>{},caller:o}){const[h,N,B]=nC({defaultProp:r,onChange:i}),I=e!==void 0,k=I?e:h;{const E=ne.useRef(e!==void 0);ne.useEffect(()=>{const _=E.current;_!==I&&console.warn(`${o} is changing from ${_?"controlled":"uncontrolled"} to ${I?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),E.current=I},[I,o])}const d=ne.useCallback(E=>{if(I){const _=rC(E)?E(e):E;_!==e&&B.current?.(_)}else N(E)},[I,e,N,B]);return[k,d]}function nC({defaultProp:e,onChange:r}){const[i,o]=ne.useState(e),h=ne.useRef(i),N=ne.useRef(r);return eC(()=>{N.current=r},[r]),ne.useEffect(()=>{h.current!==i&&(N.current?.(i),h.current=i)},[i,h]),[i,o,N]}function rC(e){return typeof e=="function"}function Eb(e){const r=aC(e),i=ne.forwardRef((o,h)=>{const{children:N,...B}=o,I=ne.Children.toArray(N),k=I.find(sC);if(k){const d=k.props.children,E=I.map(_=>_===k?ne.Children.count(d)>1?ne.Children.only(null):ne.isValidElement(d)?d.props.children:null:_);return wa.jsx(r,{...B,ref:h,children:ne.isValidElement(d)?ne.cloneElement(d,void 0,E):null})}return wa.jsx(r,{...B,ref:h,children:N})});return i.displayName=`${e}.Slot`,i}function aC(e){const r=ne.forwardRef((i,o)=>{const{children:h,...N}=i;if(ne.isValidElement(h)){const B=cC(h),I=oC(N,h.props);return h.type!==ne.Fragment&&(I.ref=o?wb(o,B):B),ne.cloneElement(h,I)}return ne.Children.count(h)>1?ne.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var iC=Symbol("radix.slottable");function sC(e){return ne.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===iC}function oC(e,r){const i={...r};for(const o in r){const h=e[o],N=r[o];/^on[A-Z]/.test(o)?h&&N?i[o]=(...I)=>{const k=N(...I);return h(...I),k}:h&&(i[o]=h):o==="style"?i[o]={...h,...N}:o==="className"&&(i[o]=[h,N].filter(Boolean).join(" "))}return{...e,...i}}function cC(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var lC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],il=lC.reduce((e,r)=>{const i=Eb(`Primitive.${r}`),o=ne.forwardRef((h,N)=>{const{asChild:B,...I}=h,k=B?i:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),wa.jsx(k,{...I,ref:N})});return o.displayName=`Primitive.${r}`,{...e,[r]:o}},{});function uC(e,r){e&&k_.flushSync(()=>e.dispatchEvent(r))}function Yd(e){const r=ne.useRef(e);return ne.useEffect(()=>{r.current=e}),ne.useMemo(()=>(...i)=>r.current?.(...i),[])}function dC(e,r=globalThis?.document){const i=Yd(e);ne.useEffect(()=>{const o=h=>{h.key==="Escape"&&i(h)};return r.addEventListener("keydown",o,{capture:!0}),()=>r.removeEventListener("keydown",o,{capture:!0})},[i,r])}var pC="DismissableLayer",Pf="dismissableLayer.update",mC="dismissableLayer.pointerDownOutside",hC="dismissableLayer.focusOutside",ny,Sb=ne.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xb=ne.forwardRef((e,r)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:o,onPointerDownOutside:h,onFocusOutside:N,onInteractOutside:B,onDismiss:I,...k}=e,d=ne.useContext(Sb),[E,_]=ne.useState(null),b=E?.ownerDocument??globalThis?.document,[,T]=ne.useState({}),v=ru(r,x=>_(x)),f=Array.from(d.layers),[R]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=f.indexOf(R),F=E?f.indexOf(E):-1,m=d.layersWithOutsidePointerEventsDisabled.size>0,P=F>=g,S=vC(x=>{const y=x.target,w=[...d.branches].some(p=>p.contains(y));!P||w||(h?.(x),B?.(x),x.defaultPrevented||I?.())},b),H=yC(x=>{const y=x.target;[...d.branches].some(p=>p.contains(y))||(N?.(x),B?.(x),x.defaultPrevented||I?.())},b);return dC(x=>{F===d.layers.size-1&&(o?.(x),!x.defaultPrevented&&I&&(x.preventDefault(),I()))},b),ne.useEffect(()=>{if(E)return i&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ny=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(E)),d.layers.add(E),ry(),()=>{i&&d.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=ny)}},[E,b,i,d]),ne.useEffect(()=>()=>{E&&(d.layers.delete(E),d.layersWithOutsidePointerEventsDisabled.delete(E),ry())},[E,d]),ne.useEffect(()=>{const x=()=>T({});return document.addEventListener(Pf,x),()=>document.removeEventListener(Pf,x)},[]),wa.jsx(il.div,{...k,ref:v,style:{pointerEvents:m?P?"auto":"none":void 0,...e.style},onFocusCapture:Dl(e.onFocusCapture,H.onFocusCapture),onBlurCapture:Dl(e.onBlurCapture,H.onBlurCapture),onPointerDownCapture:Dl(e.onPointerDownCapture,S.onPointerDownCapture)})});xb.displayName=pC;var fC="DismissableLayerBranch",gC=ne.forwardRef((e,r)=>{const i=ne.useContext(Sb),o=ne.useRef(null),h=ru(r,o);return ne.useEffect(()=>{const N=o.current;if(N)return i.branches.add(N),()=>{i.branches.delete(N)}},[i.branches]),wa.jsx(il.div,{...e,ref:h})});gC.displayName=fC;function vC(e,r=globalThis?.document){const i=Yd(e),o=ne.useRef(!1),h=ne.useRef(()=>{});return ne.useEffect(()=>{const N=I=>{if(I.target&&!o.current){let k=function(){Rb(mC,i,d,{discrete:!0})};const d={originalEvent:I};I.pointerType==="touch"?(r.removeEventListener("click",h.current),h.current=k,r.addEventListener("click",h.current,{once:!0})):k()}else r.removeEventListener("click",h.current);o.current=!1},B=window.setTimeout(()=>{r.addEventListener("pointerdown",N)},0);return()=>{window.clearTimeout(B),r.removeEventListener("pointerdown",N),r.removeEventListener("click",h.current)}},[r,i]),{onPointerDownCapture:()=>o.current=!0}}function yC(e,r=globalThis?.document){const i=Yd(e),o=ne.useRef(!1);return ne.useEffect(()=>{const h=N=>{N.target&&!o.current&&Rb(hC,i,{originalEvent:N},{discrete:!1})};return r.addEventListener("focusin",h),()=>r.removeEventListener("focusin",h)},[r,i]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function ry(){const e=new CustomEvent(Pf);document.dispatchEvent(e)}function Rb(e,r,i,{discrete:o}){const h=i.originalEvent.target,N=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});r&&h.addEventListener(e,r,{once:!0}),o?uC(h,N):h.dispatchEvent(N)}var sf="focusScope.autoFocusOnMount",of="focusScope.autoFocusOnUnmount",ay={bubbles:!1,cancelable:!0},_C="FocusScope",kb=ne.forwardRef((e,r)=>{const{loop:i=!1,trapped:o=!1,onMountAutoFocus:h,onUnmountAutoFocus:N,...B}=e,[I,k]=ne.useState(null),d=Yd(h),E=Yd(N),_=ne.useRef(null),b=ru(r,f=>k(f)),T=ne.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ne.useEffect(()=>{if(o){let f=function(m){if(T.paused||!I)return;const P=m.target;I.contains(P)?_.current=P:Nl(_.current,{select:!0})},R=function(m){if(T.paused||!I)return;const P=m.relatedTarget;P!==null&&(I.contains(P)||Nl(_.current,{select:!0}))},g=function(m){if(document.activeElement===document.body)for(const S of m)S.removedNodes.length>0&&Nl(I)};document.addEventListener("focusin",f),document.addEventListener("focusout",R);const F=new MutationObserver(g);return I&&F.observe(I,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",R),F.disconnect()}}},[o,I,T.paused]),ne.useEffect(()=>{if(I){sy.add(T);const f=document.activeElement;if(!I.contains(f)){const g=new CustomEvent(sf,ay);I.addEventListener(sf,d),I.dispatchEvent(g),g.defaultPrevented||(bC(RC(Cb(I)),{select:!0}),document.activeElement===f&&Nl(I))}return()=>{I.removeEventListener(sf,d),setTimeout(()=>{const g=new CustomEvent(of,ay);I.addEventListener(of,E),I.dispatchEvent(g),g.defaultPrevented||Nl(f??document.body,{select:!0}),I.removeEventListener(of,E),sy.remove(T)},0)}}},[I,d,E,T]);const v=ne.useCallback(f=>{if(!i&&!o||T.paused)return;const R=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,g=document.activeElement;if(R&&g){const F=f.currentTarget,[m,P]=wC(F);m&&P?!f.shiftKey&&g===P?(f.preventDefault(),i&&Nl(m,{select:!0})):f.shiftKey&&g===m&&(f.preventDefault(),i&&Nl(P,{select:!0})):g===F&&f.preventDefault()}},[i,o,T.paused]);return wa.jsx(il.div,{tabIndex:-1,...B,ref:b,onKeyDown:v})});kb.displayName=_C;function bC(e,{select:r=!1}={}){const i=document.activeElement;for(const o of e)if(Nl(o,{select:r}),document.activeElement!==i)return}function wC(e){const r=Cb(e),i=iy(r,e),o=iy(r.reverse(),e);return[i,o]}function Cb(e){const r=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const h=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||h?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)r.push(i.currentNode);return r}function iy(e,r){for(const i of e)if(!EC(i,{upTo:r}))return i}function EC(e,{upTo:r}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(r!==void 0&&e===r)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function SC(e){return e instanceof HTMLInputElement&&"select"in e}function Nl(e,{select:r=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&SC(e)&&r&&e.select()}}var sy=xC();function xC(){let e=[];return{add(r){const i=e[0];r!==i&&i?.pause(),e=oy(e,r),e.unshift(r)},remove(r){e=oy(e,r),e[0]?.resume()}}}function oy(e,r){const i=[...e],o=i.indexOf(r);return o!==-1&&i.splice(o,1),i}function RC(e){return e.filter(r=>r.tagName!=="A")}var kC="Portal",Tb=ne.forwardRef((e,r)=>{const{container:i,...o}=e,[h,N]=ne.useState(!1);Kd(()=>N(!0),[]);const B=i||h&&globalThis?.document?.body;return B?C_.createPortal(wa.jsx(il.div,{...o,ref:r}),B):null});Tb.displayName=kC;function CC(e,r){return ne.useReducer((i,o)=>r[i][o]??i,e)}var Lm=e=>{const{present:r,children:i}=e,o=TC(r),h=typeof i=="function"?i({present:o.isPresent}):ne.Children.only(i),N=ru(o.ref,PC(h));return typeof i=="function"||o.isPresent?ne.cloneElement(h,{ref:N}):null};Lm.displayName="Presence";function TC(e){const[r,i]=ne.useState(),o=ne.useRef(null),h=ne.useRef(e),N=ne.useRef("none"),B=e?"mounted":"unmounted",[I,k]=CC(B,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ne.useEffect(()=>{const d=Gp(o.current);N.current=I==="mounted"?d:"none"},[I]),Kd(()=>{const d=o.current,E=h.current;if(E!==e){const b=N.current,T=Gp(d);e?k("MOUNT"):T==="none"||d?.display==="none"?k("UNMOUNT"):k(E&&b!==T?"ANIMATION_OUT":"UNMOUNT"),h.current=e}},[e,k]),Kd(()=>{if(r){let d;const E=r.ownerDocument.defaultView??window,_=T=>{const f=Gp(o.current).includes(T.animationName);if(T.target===r&&f&&(k("ANIMATION_END"),!h.current)){const R=r.style.animationFillMode;r.style.animationFillMode="forwards",d=E.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=R)})}},b=T=>{T.target===r&&(N.current=Gp(o.current))};return r.addEventListener("animationstart",b),r.addEventListener("animationcancel",_),r.addEventListener("animationend",_),()=>{E.clearTimeout(d),r.removeEventListener("animationstart",b),r.removeEventListener("animationcancel",_),r.removeEventListener("animationend",_)}}else k("ANIMATION_END")},[r,k]),{isPresent:["mounted","unmountSuspended"].includes(I),ref:ne.useCallback(d=>{o.current=d?getComputedStyle(d):null,i(d)},[])}}function Gp(e){return e?.animationName||"none"}function PC(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var cf=0;function NC(){ne.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??cy()),document.body.insertAdjacentElement("beforeend",e[1]??cy()),cf++,()=>{cf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),cf--}},[])}function cy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Dc=function(){return Dc=Object.assign||function(r){for(var i,o=1,h=arguments.length;o<h;o++){i=arguments[o];for(var N in i)Object.prototype.hasOwnProperty.call(i,N)&&(r[N]=i[N])}return r},Dc.apply(this,arguments)};function Pb(e,r){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,o=Object.getOwnPropertySymbols(e);h<o.length;h++)r.indexOf(o[h])<0&&Object.prototype.propertyIsEnumerable.call(e,o[h])&&(i[o[h]]=e[o[h]]);return i}function AC(e,r,i){if(i||arguments.length===2)for(var o=0,h=r.length,N;o<h;o++)(N||!(o in r))&&(N||(N=Array.prototype.slice.call(r,0,o)),N[o]=r[o]);return e.concat(N||Array.prototype.slice.call(r))}var dm="right-scroll-bar-position",pm="width-before-scroll-bar",OC="with-scroll-bars-hidden",DC="--removed-body-scroll-bar-size";function lf(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function MC(e,r){var i=ne.useState(function(){return{value:e,callback:r,facade:{get current(){return i.value},set current(o){var h=i.value;h!==o&&(i.value=o,i.callback(o,h))}}}})[0];return i.callback=r,i.facade}var LC=typeof window<"u"?ne.useLayoutEffect:ne.useEffect,ly=new WeakMap;function IC(e,r){var i=MC(null,function(o){return e.forEach(function(h){return lf(h,o)})});return LC(function(){var o=ly.get(i);if(o){var h=new Set(o),N=new Set(e),B=i.current;h.forEach(function(I){N.has(I)||lf(I,null)}),N.forEach(function(I){h.has(I)||lf(I,B)})}ly.set(i,e)},[e]),i}function jC(e){return e}function BC(e,r){r===void 0&&(r=jC);var i=[],o=!1,h={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(N){var B=r(N,o);return i.push(B),function(){i=i.filter(function(I){return I!==B})}},assignSyncMedium:function(N){for(o=!0;i.length;){var B=i;i=[],B.forEach(N)}i={push:function(I){return N(I)},filter:function(){return i}}},assignMedium:function(N){o=!0;var B=[];if(i.length){var I=i;i=[],I.forEach(N),B=i}var k=function(){var E=B;B=[],E.forEach(N)},d=function(){return Promise.resolve().then(k)};d(),i={push:function(E){B.push(E),d()},filter:function(E){return B=B.filter(E),i}}}};return h}function zC(e){e===void 0&&(e={});var r=BC(null);return r.options=Dc({async:!0,ssr:!1},e),r}var Nb=function(e){var r=e.sideCar,i=Pb(e,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=r.read();if(!o)throw new Error("Sidecar medium not found");return ne.createElement(o,Dc({},i))};Nb.isSideCarExport=!0;function UC(e,r){return e.useMedium(r),Nb}var Ab=zC(),uf=function(){},Im=ne.forwardRef(function(e,r){var i=ne.useRef(null),o=ne.useState({onScrollCapture:uf,onWheelCapture:uf,onTouchMoveCapture:uf}),h=o[0],N=o[1],B=e.forwardProps,I=e.children,k=e.className,d=e.removeScrollBar,E=e.enabled,_=e.shards,b=e.sideCar,T=e.noRelative,v=e.noIsolation,f=e.inert,R=e.allowPinchZoom,g=e.as,F=g===void 0?"div":g,m=e.gapMode,P=Pb(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=b,H=IC([i,r]),x=Dc(Dc({},P),h);return ne.createElement(ne.Fragment,null,E&&ne.createElement(S,{sideCar:Ab,removeScrollBar:d,shards:_,noRelative:T,noIsolation:v,inert:f,setCallbacks:N,allowPinchZoom:!!R,lockRef:i,gapMode:m}),B?ne.cloneElement(ne.Children.only(I),Dc(Dc({},x),{ref:H})):ne.createElement(F,Dc({},x,{className:k,ref:H}),I))});Im.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Im.classNames={fullWidth:pm,zeroRight:dm};var HC=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function FC(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var r=HC();return r&&e.setAttribute("nonce",r),e}function qC(e,r){e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r))}function VC(e){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(e)}var ZC=function(){var e=0,r=null;return{add:function(i){e==0&&(r=FC())&&(qC(r,i),VC(r)),e++},remove:function(){e--,!e&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},$C=function(){var e=ZC();return function(r,i){ne.useEffect(function(){return e.add(r),function(){e.remove()}},[r&&i])}},Ob=function(){var e=$C(),r=function(i){var o=i.styles,h=i.dynamic;return e(o,h),null};return r},WC={left:0,top:0,right:0,gap:0},df=function(e){return parseInt(e||"",10)||0},GC=function(e){var r=window.getComputedStyle(document.body),i=r[e==="padding"?"paddingLeft":"marginLeft"],o=r[e==="padding"?"paddingTop":"marginTop"],h=r[e==="padding"?"paddingRight":"marginRight"];return[df(i),df(o),df(h)]},KC=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return WC;var r=GC(e),i=document.documentElement.clientWidth,o=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,o-i+r[2]-r[0])}},YC=Ob(),Zu="data-scroll-locked",QC=function(e,r,i,o){var h=e.left,N=e.top,B=e.right,I=e.gap;return i===void 0&&(i="margin"),`
  .`.concat(OC,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(I,"px ").concat(o,`;
  }
  body[`).concat(Zu,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(o,";"),i==="margin"&&`
    padding-left: `.concat(h,`px;
    padding-top: `).concat(N,`px;
    padding-right: `).concat(B,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(I,"px ").concat(o,`;
    `),i==="padding"&&"padding-right: ".concat(I,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dm,` {
    right: `).concat(I,"px ").concat(o,`;
  }
  
  .`).concat(pm,` {
    margin-right: `).concat(I,"px ").concat(o,`;
  }
  
  .`).concat(dm," .").concat(dm,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(pm," .").concat(pm,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(Zu,`] {
    `).concat(DC,": ").concat(I,`px;
  }
`)},uy=function(){var e=parseInt(document.body.getAttribute(Zu)||"0",10);return isFinite(e)?e:0},JC=function(){ne.useEffect(function(){return document.body.setAttribute(Zu,(uy()+1).toString()),function(){var e=uy()-1;e<=0?document.body.removeAttribute(Zu):document.body.setAttribute(Zu,e.toString())}},[])},XC=function(e){var r=e.noRelative,i=e.noImportant,o=e.gapMode,h=o===void 0?"margin":o;JC();var N=ne.useMemo(function(){return KC(h)},[h]);return ne.createElement(YC,{styles:QC(N,!r,h,i?"":"!important")})},Nf=!1;if(typeof window<"u")try{var Kp=Object.defineProperty({},"passive",{get:function(){return Nf=!0,!0}});window.addEventListener("test",Kp,Kp),window.removeEventListener("test",Kp,Kp)}catch{Nf=!1}var ju=Nf?{passive:!1}:!1,eT=function(e){return e.tagName==="TEXTAREA"},Db=function(e,r){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[r]!=="hidden"&&!(i.overflowY===i.overflowX&&!eT(e)&&i[r]==="visible")},tT=function(e){return Db(e,"overflowY")},nT=function(e){return Db(e,"overflowX")},dy=function(e,r){var i=r.ownerDocument,o=r;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var h=Mb(e,o);if(h){var N=Lb(e,o),B=N[1],I=N[2];if(B>I)return!0}o=o.parentNode}while(o&&o!==i.body);return!1},rT=function(e){var r=e.scrollTop,i=e.scrollHeight,o=e.clientHeight;return[r,i,o]},aT=function(e){var r=e.scrollLeft,i=e.scrollWidth,o=e.clientWidth;return[r,i,o]},Mb=function(e,r){return e==="v"?tT(r):nT(r)},Lb=function(e,r){return e==="v"?rT(r):aT(r)},iT=function(e,r){return e==="h"&&r==="rtl"?-1:1},sT=function(e,r,i,o,h){var N=iT(e,window.getComputedStyle(r).direction),B=N*o,I=i.target,k=r.contains(I),d=!1,E=B>0,_=0,b=0;do{if(!I)break;var T=Lb(e,I),v=T[0],f=T[1],R=T[2],g=f-R-N*v;(v||g)&&Mb(e,I)&&(_+=g,b+=v);var F=I.parentNode;I=F&&F.nodeType===Node.DOCUMENT_FRAGMENT_NODE?F.host:F}while(!k&&I!==document.body||k&&(r.contains(I)||r===I));return(E&&Math.abs(_)<1||!E&&Math.abs(b)<1)&&(d=!0),d},Yp=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},py=function(e){return[e.deltaX,e.deltaY]},my=function(e){return e&&"current"in e?e.current:e},oT=function(e,r){return e[0]===r[0]&&e[1]===r[1]},cT=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lT=0,Bu=[];function uT(e){var r=ne.useRef([]),i=ne.useRef([0,0]),o=ne.useRef(),h=ne.useState(lT++)[0],N=ne.useState(Ob)[0],B=ne.useRef(e);ne.useEffect(function(){B.current=e},[e]),ne.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(h));var f=AC([e.lockRef.current],(e.shards||[]).map(my),!0).filter(Boolean);return f.forEach(function(R){return R.classList.add("allow-interactivity-".concat(h))}),function(){document.body.classList.remove("block-interactivity-".concat(h)),f.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(h))})}}},[e.inert,e.lockRef.current,e.shards]);var I=ne.useCallback(function(f,R){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!B.current.allowPinchZoom;var g=Yp(f),F=i.current,m="deltaX"in f?f.deltaX:F[0]-g[0],P="deltaY"in f?f.deltaY:F[1]-g[1],S,H=f.target,x=Math.abs(m)>Math.abs(P)?"h":"v";if("touches"in f&&x==="h"&&H.type==="range")return!1;var y=dy(x,H);if(!y)return!0;if(y?S=x:(S=x==="v"?"h":"v",y=dy(x,H)),!y)return!1;if(!o.current&&"changedTouches"in f&&(m||P)&&(o.current=S),!S)return!0;var w=o.current||S;return sT(w,R,f,w==="h"?m:P)},[]),k=ne.useCallback(function(f){var R=f;if(!(!Bu.length||Bu[Bu.length-1]!==N)){var g="deltaY"in R?py(R):Yp(R),F=r.current.filter(function(S){return S.name===R.type&&(S.target===R.target||R.target===S.shadowParent)&&oT(S.delta,g)})[0];if(F&&F.should){R.cancelable&&R.preventDefault();return}if(!F){var m=(B.current.shards||[]).map(my).filter(Boolean).filter(function(S){return S.contains(R.target)}),P=m.length>0?I(R,m[0]):!B.current.noIsolation;P&&R.cancelable&&R.preventDefault()}}},[]),d=ne.useCallback(function(f,R,g,F){var m={name:f,delta:R,target:g,should:F,shadowParent:dT(g)};r.current.push(m),setTimeout(function(){r.current=r.current.filter(function(P){return P!==m})},1)},[]),E=ne.useCallback(function(f){i.current=Yp(f),o.current=void 0},[]),_=ne.useCallback(function(f){d(f.type,py(f),f.target,I(f,e.lockRef.current))},[]),b=ne.useCallback(function(f){d(f.type,Yp(f),f.target,I(f,e.lockRef.current))},[]);ne.useEffect(function(){return Bu.push(N),e.setCallbacks({onScrollCapture:_,onWheelCapture:_,onTouchMoveCapture:b}),document.addEventListener("wheel",k,ju),document.addEventListener("touchmove",k,ju),document.addEventListener("touchstart",E,ju),function(){Bu=Bu.filter(function(f){return f!==N}),document.removeEventListener("wheel",k,ju),document.removeEventListener("touchmove",k,ju),document.removeEventListener("touchstart",E,ju)}},[]);var T=e.removeScrollBar,v=e.inert;return ne.createElement(ne.Fragment,null,v?ne.createElement(N,{styles:cT(h)}):null,T?ne.createElement(XC,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function dT(e){for(var r=null;e!==null;)e instanceof ShadowRoot&&(r=e.host,e=e.host),e=e.parentNode;return r}const pT=UC(Ab,uT);var Ib=ne.forwardRef(function(e,r){return ne.createElement(Im,Dc({},e,{ref:r,sideCar:pT}))});Ib.classNames=Im.classNames;var mT=function(e){if(typeof document>"u")return null;var r=Array.isArray(e)?e[0]:e;return r.ownerDocument.body},zu=new WeakMap,Qp=new WeakMap,Jp={},pf=0,jb=function(e){return e&&(e.host||jb(e.parentNode))},hT=function(e,r){return r.map(function(i){if(e.contains(i))return i;var o=jb(i);return o&&e.contains(o)?o:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},fT=function(e,r,i,o){var h=hT(r,Array.isArray(e)?e:[e]);Jp[i]||(Jp[i]=new WeakMap);var N=Jp[i],B=[],I=new Set,k=new Set(h),d=function(_){!_||I.has(_)||(I.add(_),d(_.parentNode))};h.forEach(d);var E=function(_){!_||k.has(_)||Array.prototype.forEach.call(_.children,function(b){if(I.has(b))E(b);else try{var T=b.getAttribute(o),v=T!==null&&T!=="false",f=(zu.get(b)||0)+1,R=(N.get(b)||0)+1;zu.set(b,f),N.set(b,R),B.push(b),f===1&&v&&Qp.set(b,!0),R===1&&b.setAttribute(i,"true"),v||b.setAttribute(o,"true")}catch(g){console.error("aria-hidden: cannot operate on ",b,g)}})};return E(r),I.clear(),pf++,function(){B.forEach(function(_){var b=zu.get(_)-1,T=N.get(_)-1;zu.set(_,b),N.set(_,T),b||(Qp.has(_)||_.removeAttribute(o),Qp.delete(_)),T||_.removeAttribute(i)}),pf--,pf||(zu=new WeakMap,zu=new WeakMap,Qp=new WeakMap,Jp={})}},gT=function(e,r,i){i===void 0&&(i="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),h=mT(e);return h?(o.push.apply(o,Array.from(h.querySelectorAll("[aria-live], script"))),fT(o,h,i,"aria-hidden")):function(){return null}},jm="Dialog",[Bb,fO]=Yk(jm),[vT,Ec]=Bb(jm),zb=e=>{const{__scopeDialog:r,children:i,open:o,defaultOpen:h,onOpenChange:N,modal:B=!0}=e,I=ne.useRef(null),k=ne.useRef(null),[d,E]=tC({prop:o,defaultProp:h??!1,onChange:N,caller:jm});return wa.jsx(vT,{scope:r,triggerRef:I,contentRef:k,contentId:af(),titleId:af(),descriptionId:af(),open:d,onOpenChange:E,onOpenToggle:ne.useCallback(()=>E(_=>!_),[E]),modal:B,children:i})};zb.displayName=jm;var Ub="DialogTrigger",Hb=ne.forwardRef((e,r)=>{const{__scopeDialog:i,...o}=e,h=Ec(Ub,i),N=ru(r,h.triggerRef);return wa.jsx(il.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":ig(h.open),...o,ref:N,onClick:Dl(e.onClick,h.onOpenToggle)})});Hb.displayName=Ub;var rg="DialogPortal",[yT,Fb]=Bb(rg,{forceMount:void 0}),qb=e=>{const{__scopeDialog:r,forceMount:i,children:o,container:h}=e,N=Ec(rg,r);return wa.jsx(yT,{scope:r,forceMount:i,children:ne.Children.map(o,B=>wa.jsx(Lm,{present:i||N.open,children:wa.jsx(Tb,{asChild:!0,container:h,children:B})}))})};qb.displayName=rg;var bm="DialogOverlay",Vb=ne.forwardRef((e,r)=>{const i=Fb(bm,e.__scopeDialog),{forceMount:o=i.forceMount,...h}=e,N=Ec(bm,e.__scopeDialog);return N.modal?wa.jsx(Lm,{present:o||N.open,children:wa.jsx(bT,{...h,ref:r})}):null});Vb.displayName=bm;var _T=Eb("DialogOverlay.RemoveScroll"),bT=ne.forwardRef((e,r)=>{const{__scopeDialog:i,...o}=e,h=Ec(bm,i);return wa.jsx(Ib,{as:_T,allowPinchZoom:!0,shards:[h.contentRef],children:wa.jsx(il.div,{"data-state":ig(h.open),...o,ref:r,style:{pointerEvents:"auto",...o.style}})})}),Xl="DialogContent",Zb=ne.forwardRef((e,r)=>{const i=Fb(Xl,e.__scopeDialog),{forceMount:o=i.forceMount,...h}=e,N=Ec(Xl,e.__scopeDialog);return wa.jsx(Lm,{present:o||N.open,children:N.modal?wa.jsx(wT,{...h,ref:r}):wa.jsx(ET,{...h,ref:r})})});Zb.displayName=Xl;var wT=ne.forwardRef((e,r)=>{const i=Ec(Xl,e.__scopeDialog),o=ne.useRef(null),h=ru(r,i.contentRef,o);return ne.useEffect(()=>{const N=o.current;if(N)return gT(N)},[]),wa.jsx($b,{...e,ref:h,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Dl(e.onCloseAutoFocus,N=>{N.preventDefault(),i.triggerRef.current?.focus()}),onPointerDownOutside:Dl(e.onPointerDownOutside,N=>{const B=N.detail.originalEvent,I=B.button===0&&B.ctrlKey===!0;(B.button===2||I)&&N.preventDefault()}),onFocusOutside:Dl(e.onFocusOutside,N=>N.preventDefault())})}),ET=ne.forwardRef((e,r)=>{const i=Ec(Xl,e.__scopeDialog),o=ne.useRef(!1),h=ne.useRef(!1);return wa.jsx($b,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:N=>{e.onCloseAutoFocus?.(N),N.defaultPrevented||(o.current||i.triggerRef.current?.focus(),N.preventDefault()),o.current=!1,h.current=!1},onInteractOutside:N=>{e.onInteractOutside?.(N),N.defaultPrevented||(o.current=!0,N.detail.originalEvent.type==="pointerdown"&&(h.current=!0));const B=N.target;i.triggerRef.current?.contains(B)&&N.preventDefault(),N.detail.originalEvent.type==="focusin"&&h.current&&N.preventDefault()}})}),$b=ne.forwardRef((e,r)=>{const{__scopeDialog:i,trapFocus:o,onOpenAutoFocus:h,onCloseAutoFocus:N,...B}=e,I=Ec(Xl,i),k=ne.useRef(null),d=ru(r,k);return NC(),wa.jsxs(wa.Fragment,{children:[wa.jsx(kb,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:h,onUnmountAutoFocus:N,children:wa.jsx(xb,{role:"dialog",id:I.contentId,"aria-describedby":I.descriptionId,"aria-labelledby":I.titleId,"data-state":ig(I.open),...B,ref:d,onDismiss:()=>I.onOpenChange(!1)})}),wa.jsxs(wa.Fragment,{children:[wa.jsx(ST,{titleId:I.titleId}),wa.jsx(RT,{contentRef:k,descriptionId:I.descriptionId})]})]})}),ag="DialogTitle",Wb=ne.forwardRef((e,r)=>{const{__scopeDialog:i,...o}=e,h=Ec(ag,i);return wa.jsx(il.h2,{id:h.titleId,...o,ref:r})});Wb.displayName=ag;var Gb="DialogDescription",Kb=ne.forwardRef((e,r)=>{const{__scopeDialog:i,...o}=e,h=Ec(Gb,i);return wa.jsx(il.p,{id:h.descriptionId,...o,ref:r})});Kb.displayName=Gb;var Yb="DialogClose",Qb=ne.forwardRef((e,r)=>{const{__scopeDialog:i,...o}=e,h=Ec(Yb,i);return wa.jsx(il.button,{type:"button",...o,ref:r,onClick:Dl(e.onClick,()=>h.onOpenChange(!1))})});Qb.displayName=Yb;function ig(e){return e?"open":"closed"}var Jb="DialogTitleWarning",[gO,Xb]=Kk(Jb,{contentName:Xl,titleName:ag,docsSlug:"dialog"}),ST=({titleId:e})=>{const r=Xb(Jb),i=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return ne.useEffect(()=>{e&&(document.getElementById(e)||console.error(i))},[i,e]),null},xT="DialogDescriptionWarning",RT=({contentRef:e,descriptionId:r})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Xb(xT).contentName}}.`;return ne.useEffect(()=>{const h=e.current?.getAttribute("aria-describedby");r&&h&&(document.getElementById(r)||console.warn(o))},[o,e,r]),null},kT=zb,CT=Hb,TT=qb,PT=Vb,NT=Zb,AT=Wb,OT=Kb,DT=Qb;function e1(e){var r,i,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(r=0;r<h;r++)e[r]&&(i=e1(e[r]))&&(o&&(o+=" "),o+=i)}else for(i in e)e[i]&&(o&&(o+=" "),o+=i);return o}function MT(){for(var e,r,i=0,o="",h=arguments.length;i<h;i++)(e=arguments[i])&&(r=e1(e))&&(o&&(o+=" "),o+=r);return o}const sg="-",LT=e=>{const r=jT(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:B=>{const I=B.split(sg);return I[0]===""&&I.length!==1&&I.shift(),t1(I,r)||IT(B)},getConflictingClassGroupIds:(B,I)=>{const k=i[B]||[];return I&&o[B]?[...k,...o[B]]:k}}},t1=(e,r)=>{if(e.length===0)return r.classGroupId;const i=e[0],o=r.nextPart.get(i),h=o?t1(e.slice(1),o):void 0;if(h)return h;if(r.validators.length===0)return;const N=e.join(sg);return r.validators.find(({validator:B})=>B(N))?.classGroupId},hy=/^\[(.+)\]$/,IT=e=>{if(hy.test(e)){const r=hy.exec(e)[1],i=r?.substring(0,r.indexOf(":"));if(i)return"arbitrary.."+i}},jT=e=>{const{theme:r,classGroups:i}=e,o={nextPart:new Map,validators:[]};for(const h in i)Af(i[h],o,h,r);return o},Af=(e,r,i,o)=>{e.forEach(h=>{if(typeof h=="string"){const N=h===""?r:fy(r,h);N.classGroupId=i;return}if(typeof h=="function"){if(BT(h)){Af(h(o),r,i,o);return}r.validators.push({validator:h,classGroupId:i});return}Object.entries(h).forEach(([N,B])=>{Af(B,fy(r,N),i,o)})})},fy=(e,r)=>{let i=e;return r.split(sg).forEach(o=>{i.nextPart.has(o)||i.nextPart.set(o,{nextPart:new Map,validators:[]}),i=i.nextPart.get(o)}),i},BT=e=>e.isThemeGetter,zT=e=>{if(e<1)return{get:()=>{},set:()=>{}};let r=0,i=new Map,o=new Map;const h=(N,B)=>{i.set(N,B),r++,r>e&&(r=0,o=i,i=new Map)};return{get(N){let B=i.get(N);if(B!==void 0)return B;if((B=o.get(N))!==void 0)return h(N,B),B},set(N,B){i.has(N)?i.set(N,B):h(N,B)}}},Of="!",Df=":",UT=Df.length,HT=e=>{const{prefix:r,experimentalParseClassName:i}=e;let o=h=>{const N=[];let B=0,I=0,k=0,d;for(let v=0;v<h.length;v++){let f=h[v];if(B===0&&I===0){if(f===Df){N.push(h.slice(k,v)),k=v+UT;continue}if(f==="/"){d=v;continue}}f==="["?B++:f==="]"?B--:f==="("?I++:f===")"&&I--}const E=N.length===0?h:h.substring(k),_=FT(E),b=_!==E,T=d&&d>k?d-k:void 0;return{modifiers:N,hasImportantModifier:b,baseClassName:_,maybePostfixModifierPosition:T}};if(r){const h=r+Df,N=o;o=B=>B.startsWith(h)?N(B.substring(h.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:B,maybePostfixModifierPosition:void 0}}if(i){const h=o;o=N=>i({className:N,parseClassName:h})}return o},FT=e=>e.endsWith(Of)?e.substring(0,e.length-1):e.startsWith(Of)?e.substring(1):e,qT=e=>{const r=Object.fromEntries(e.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const h=[];let N=[];return o.forEach(B=>{B[0]==="["||r[B]?(h.push(...N.sort(),B),N=[]):N.push(B)}),h.push(...N.sort()),h}},VT=e=>({cache:zT(e.cacheSize),parseClassName:HT(e),sortModifiers:qT(e),...LT(e)}),ZT=/\s+/,$T=(e,r)=>{const{parseClassName:i,getClassGroupId:o,getConflictingClassGroupIds:h,sortModifiers:N}=r,B=[],I=e.trim().split(ZT);let k="";for(let d=I.length-1;d>=0;d-=1){const E=I[d],{isExternal:_,modifiers:b,hasImportantModifier:T,baseClassName:v,maybePostfixModifierPosition:f}=i(E);if(_){k=E+(k.length>0?" "+k:k);continue}let R=!!f,g=o(R?v.substring(0,f):v);if(!g){if(!R){k=E+(k.length>0?" "+k:k);continue}if(g=o(v),!g){k=E+(k.length>0?" "+k:k);continue}R=!1}const F=N(b).join(":"),m=T?F+Of:F,P=m+g;if(B.includes(P))continue;B.push(P);const S=h(g,R);for(let H=0;H<S.length;++H){const x=S[H];B.push(m+x)}k=E+(k.length>0?" "+k:k)}return k};function WT(){let e=0,r,i,o="";for(;e<arguments.length;)(r=arguments[e++])&&(i=n1(r))&&(o&&(o+=" "),o+=i);return o}const n1=e=>{if(typeof e=="string")return e;let r,i="";for(let o=0;o<e.length;o++)e[o]&&(r=n1(e[o]))&&(i&&(i+=" "),i+=r);return i};function GT(e,...r){let i,o,h,N=B;function B(k){const d=r.reduce((E,_)=>_(E),e());return i=VT(d),o=i.cache.get,h=i.cache.set,N=I,I(k)}function I(k){const d=o(k);if(d)return d;const E=$T(k,i);return h(k,E),E}return function(){return N(WT.apply(null,arguments))}}const is=e=>{const r=i=>i[e]||[];return r.isThemeGetter=!0,r},r1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,a1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,KT=/^\d+\/\d+$/,YT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,QT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,JT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,XT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,e4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Uu=e=>KT.test(e),sa=e=>!!e&&!Number.isNaN(Number(e)),Pl=e=>!!e&&Number.isInteger(Number(e)),mf=e=>e.endsWith("%")&&sa(e.slice(0,-1)),el=e=>YT.test(e),t4=()=>!0,n4=e=>QT.test(e)&&!JT.test(e),i1=()=>!1,r4=e=>XT.test(e),a4=e=>e4.test(e),i4=e=>!ar(e)&&!ir(e),s4=e=>Xu(e,c1,i1),ar=e=>r1.test(e),Gl=e=>Xu(e,l1,n4),hf=e=>Xu(e,d4,sa),gy=e=>Xu(e,s1,i1),o4=e=>Xu(e,o1,a4),Xp=e=>Xu(e,u1,r4),ir=e=>a1.test(e),Bd=e=>ed(e,l1),c4=e=>ed(e,p4),vy=e=>ed(e,s1),l4=e=>ed(e,c1),u4=e=>ed(e,o1),em=e=>ed(e,u1,!0),Xu=(e,r,i)=>{const o=r1.exec(e);return o?o[1]?r(o[1]):i(o[2]):!1},ed=(e,r,i=!1)=>{const o=a1.exec(e);return o?o[1]?r(o[1]):i:!1},s1=e=>e==="position"||e==="percentage",o1=e=>e==="image"||e==="url",c1=e=>e==="length"||e==="size"||e==="bg-size",l1=e=>e==="length",d4=e=>e==="number",p4=e=>e==="family-name",u1=e=>e==="shadow",m4=()=>{const e=is("color"),r=is("font"),i=is("text"),o=is("font-weight"),h=is("tracking"),N=is("leading"),B=is("breakpoint"),I=is("container"),k=is("spacing"),d=is("radius"),E=is("shadow"),_=is("inset-shadow"),b=is("text-shadow"),T=is("drop-shadow"),v=is("blur"),f=is("perspective"),R=is("aspect"),g=is("ease"),F=is("animate"),m=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...P(),ir,ar],H=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],y=()=>[ir,ar,k],w=()=>[Uu,"full","auto",...y()],p=()=>[Pl,"none","subgrid",ir,ar],C=()=>["auto",{span:["full",Pl,ir,ar]},Pl,ir,ar],A=()=>[Pl,"auto",ir,ar],M=()=>["auto","min","max","fr",ir,ar],j=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],U=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...y()],W=()=>[Uu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],Z=()=>[e,ir,ar],ce=()=>[...P(),vy,gy,{position:[ir,ar]}],J=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Ee=()=>["auto","cover","contain",l4,s4,{size:[ir,ar]}],Ce=()=>[mf,Bd,Gl],Re=()=>["","none","full",d,ir,ar],ye=()=>["",sa,Bd,Gl],Te=()=>["solid","dashed","dotted","double"],He=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],we=()=>[sa,mf,vy,gy],Je=()=>["","none",v,ir,ar],Be=()=>["none",sa,ir,ar],nt=()=>["none",sa,ir,ar],Qe=()=>[sa,ir,ar],Ze=()=>[Uu,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[el],breakpoint:[el],color:[t4],container:[el],"drop-shadow":[el],ease:["in","out","in-out"],font:[i4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[el],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[el],shadow:[el],spacing:["px",sa],text:[el],"text-shadow":[el],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Uu,ar,ir,R]}],container:["container"],columns:[{columns:[sa,ar,ir,I]}],"break-after":[{"break-after":m()}],"break-before":[{"break-before":m()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[Pl,"auto",ir,ar]}],basis:[{basis:[Uu,"full","auto",I,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[sa,Uu,"auto","initial","none",ar]}],grow:[{grow:["",sa,ir,ar]}],shrink:[{shrink:["",sa,ir,ar]}],order:[{order:[Pl,"first","last","none",ir,ar]}],"grid-cols":[{"grid-cols":p()}],"col-start-end":[{col:C()}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":p()}],"row-start-end":[{row:C()}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:[...j(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...j()]}],"align-items":[{items:[...U(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...U(),{baseline:["","last"]}]}],"place-content":[{"place-content":j()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[I,"screen",...W()]}],"min-w":[{"min-w":[I,"screen","none",...W()]}],"max-w":[{"max-w":[I,"screen","none","prose",{screen:[B]},...W()]}],h:[{h:["screen","lh",...W()]}],"min-h":[{"min-h":["screen","lh","none",...W()]}],"max-h":[{"max-h":["screen","lh",...W()]}],"font-size":[{text:["base",i,Bd,Gl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,ir,hf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",mf,ar]}],"font-family":[{font:[c4,ar,r]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[h,ir,ar]}],"line-clamp":[{"line-clamp":[sa,"none",ir,hf]}],leading:[{leading:[N,...y()]}],"list-image":[{"list-image":["none",ir,ar]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ir,ar]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:[sa,"from-font","auto",ir,Gl]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[sa,"auto",ir,ar]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ir,ar]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ir,ar]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ce()}],"bg-repeat":[{bg:J()}],"bg-size":[{bg:Ee()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Pl,ir,ar],radial:["",ir,ar],conic:[Pl,ir,ar]},u4,o4]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:Ce()}],"gradient-via-pos":[{via:Ce()}],"gradient-to-pos":[{to:Ce()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:Re()}],"rounded-s":[{"rounded-s":Re()}],"rounded-e":[{"rounded-e":Re()}],"rounded-t":[{"rounded-t":Re()}],"rounded-r":[{"rounded-r":Re()}],"rounded-b":[{"rounded-b":Re()}],"rounded-l":[{"rounded-l":Re()}],"rounded-ss":[{"rounded-ss":Re()}],"rounded-se":[{"rounded-se":Re()}],"rounded-ee":[{"rounded-ee":Re()}],"rounded-es":[{"rounded-es":Re()}],"rounded-tl":[{"rounded-tl":Re()}],"rounded-tr":[{"rounded-tr":Re()}],"rounded-br":[{"rounded-br":Re()}],"rounded-bl":[{"rounded-bl":Re()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Te(),"hidden","none"]}],"divide-style":[{divide:[...Te(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...Te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[sa,ir,ar]}],"outline-w":[{outline:["",sa,Bd,Gl]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",E,em,Xp]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",_,em,Xp]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[sa,Gl]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",b,em,Xp]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[sa,ir,ar]}],"mix-blend":[{"mix-blend":[...He(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":He()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[sa]}],"mask-image-linear-from-pos":[{"mask-linear-from":we()}],"mask-image-linear-to-pos":[{"mask-linear-to":we()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":we()}],"mask-image-t-to-pos":[{"mask-t-to":we()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":we()}],"mask-image-r-to-pos":[{"mask-r-to":we()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":we()}],"mask-image-b-to-pos":[{"mask-b-to":we()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":we()}],"mask-image-l-to-pos":[{"mask-l-to":we()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":we()}],"mask-image-x-to-pos":[{"mask-x-to":we()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":we()}],"mask-image-y-to-pos":[{"mask-y-to":we()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[ir,ar]}],"mask-image-radial-from-pos":[{"mask-radial-from":we()}],"mask-image-radial-to-pos":[{"mask-radial-to":we()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[sa]}],"mask-image-conic-from-pos":[{"mask-conic-from":we()}],"mask-image-conic-to-pos":[{"mask-conic-to":we()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ce()}],"mask-repeat":[{mask:J()}],"mask-size":[{mask:Ee()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ir,ar]}],filter:[{filter:["","none",ir,ar]}],blur:[{blur:Je()}],brightness:[{brightness:[sa,ir,ar]}],contrast:[{contrast:[sa,ir,ar]}],"drop-shadow":[{"drop-shadow":["","none",T,em,Xp]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",sa,ir,ar]}],"hue-rotate":[{"hue-rotate":[sa,ir,ar]}],invert:[{invert:["",sa,ir,ar]}],saturate:[{saturate:[sa,ir,ar]}],sepia:[{sepia:["",sa,ir,ar]}],"backdrop-filter":[{"backdrop-filter":["","none",ir,ar]}],"backdrop-blur":[{"backdrop-blur":Je()}],"backdrop-brightness":[{"backdrop-brightness":[sa,ir,ar]}],"backdrop-contrast":[{"backdrop-contrast":[sa,ir,ar]}],"backdrop-grayscale":[{"backdrop-grayscale":["",sa,ir,ar]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[sa,ir,ar]}],"backdrop-invert":[{"backdrop-invert":["",sa,ir,ar]}],"backdrop-opacity":[{"backdrop-opacity":[sa,ir,ar]}],"backdrop-saturate":[{"backdrop-saturate":[sa,ir,ar]}],"backdrop-sepia":[{"backdrop-sepia":["",sa,ir,ar]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ir,ar]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[sa,"initial",ir,ar]}],ease:[{ease:["linear","initial",g,ir,ar]}],delay:[{delay:[sa,ir,ar]}],animate:[{animate:["none",F,ir,ar]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,ir,ar]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:Be()}],"rotate-x":[{"rotate-x":Be()}],"rotate-y":[{"rotate-y":Be()}],"rotate-z":[{"rotate-z":Be()}],scale:[{scale:nt()}],"scale-x":[{"scale-x":nt()}],"scale-y":[{"scale-y":nt()}],"scale-z":[{"scale-z":nt()}],"scale-3d":["scale-3d"],skew:[{skew:Qe()}],"skew-x":[{"skew-x":Qe()}],"skew-y":[{"skew-y":Qe()}],transform:[{transform:[ir,ar,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ze()}],"translate-x":[{"translate-x":Ze()}],"translate-y":[{"translate-y":Ze()}],"translate-z":[{"translate-z":Ze()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ir,ar]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ir,ar]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[sa,Bd,Gl,hf]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},h4=GT(m4);function ip(...e){return h4(MT(e))}function d1({...e}){return ne.createElement(kT,{"data-slot":"dialog",...e})}function p1({...e}){return ne.createElement(CT,{"data-slot":"dialog-trigger",...e})}function f4({...e}){return ne.createElement(TT,{"data-slot":"dialog-portal",...e})}function g4({className:e,...r}){return ne.createElement(PT,{"data-slot":"dialog-overlay",className:ip("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function m1({className:e,children:r,showCloseButton:i=!0,...o}){return ne.createElement(f4,{"data-slot":"dialog-portal"},ne.createElement(g4,null),ne.createElement(NT,{"data-slot":"dialog-content",className:ip("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...o},r,i&&ne.createElement(DT,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},ne.createElement(ng,null),ne.createElement("span",{className:"sr-only"},"Close"))))}function h1({className:e,...r}){return ne.createElement("div",{"data-slot":"dialog-header",className:ip("flex flex-col gap-2 text-center sm:text-left",e),...r})}function f1({className:e,...r}){return ne.createElement(AT,{"data-slot":"dialog-title",className:ip("text-lg leading-none font-semibold",e),...r})}function g1({className:e,...r}){return ne.createElement(OT,{"data-slot":"dialog-description",className:ip("text-muted-foreground text-sm",e),...r})}const sp=({triggerText:e="",title:r,description:i,children:o,open:h,onOpenChange:N})=>c.createElement(d1,{open:h,onOpenChange:N},e&&c.createElement(p1,null,e),c.createElement(m1,null,c.createElement(h1,null,r&&c.createElement(f1,null,r),i&&c.createElement(g1,null,i)),o)),Bm=({doctor:e})=>{const[r,i]=ne.useState(!1),{user:o}=So(),{doctor:h}=Ms(),{admin:N}=wc(),B=bs(),I=e?._id===h?._id,d=((E,_)=>`${E.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${_}`)(e.name,e._id);return c.createElement("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl hover:scale-105 border-t-4 border-emerald-500 transition-all duration-300 p-6 flex flex-col justify-between"},c.createElement("div",{className:"text-center mb-4"},c.createElement("img",{src:e.profilePicture||"https://ui-avatars.com/api/?name="+encodeURIComponent(e.name)+"&background=random",alt:e.name,className:"w-20 h-20 rounded-full mx-auto mb-3 object-cover border-4 border-emerald-100 shadow"}),c.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-1"},e.name),c.createElement("p",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-2 py-1 rounded-full mb-1"},e.speciality),c.createElement("p",{className:"text-sm text-gray-500"},e.experience||0," years experience")),c.createElement("div",{className:"space-y-2 mb-4"},c.createElement("div",{className:"flex items-center justify-between text-sm"},c.createElement("span",{className:"text-gray-600"},"Rating:"),c.createElement("div",{className:"flex items-center gap-1 text-yellow-500"},c.createElement("span",null,"★"),c.createElement("span",{className:"font-medium"},e.rating.average),c.createElement("span",{className:"text-gray-400 ml-1"},"(",e.rating.count,")"))),c.createElement("div",{className:"flex items-center justify-between text-sm"},c.createElement("span",{className:"text-gray-600"},"Hospital:"),c.createElement("div",{className:"flex items-center gap-1 text-gray-500 text-xs"},"🏥 ",e.hospital||"Not specified")),c.createElement("div",{className:"flex items-center justify-between text-sm"},c.createElement("span",{className:"text-gray-600"},"Location:"),c.createElement("div",{className:"flex items-center gap-1 text-gray-500 text-xs"},"📍"," ",e.fullAddress?e.fullAddress.split(",").slice(-2).join(", "):"Not specified")),c.createElement("div",{className:"flex items-center justify-between text-sm"},c.createElement("span",{className:"text-gray-600"},"Fee:"),c.createElement("span",{className:"font-medium text-green-600"},"Rs. ",e.fee||"Not specified")),e.mainDegree&&c.createElement("div",{className:"flex items-center justify-between text-sm"},c.createElement("span",{className:"text-gray-600"},"Degree:"),c.createElement("span",{className:"text-gray-500"},e.mainDegree))),c.createElement("div",{className:"space-y-2"},c.createElement("div",{className:"text-xs text-center"},c.createElement("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${e.availability?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},e.availability?"Available":"Not Available")),c.createElement("div",{className:"grid grid-cols-2 gap-2"},c.createElement(Bi,{to:`/doctor/profile/${d}`,className:"px-3 py-2 text-sm border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 text-center"},"View Profile"),c.createElement("button",{onClick:()=>{o||N||h?B(`/doctor/book/${d}`):i(!0)},disabled:I,className:"px-3 py-2 text-sm bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 text-center"},I?"Not allowed":"Book Now"))),c.createElement(sp,{title:"Login Required",description:"Only logged in users can book appointments.",open:r,onOpenChange:i},c.createElement("div",{className:"mt-4 flex justify-end gap-2"},c.createElement("button",{onClick:()=>i(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Cancel"),c.createElement("button",{onClick:()=>{i(!1),B("/login")},className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700"},"Go to Login"))))},v4=()=>{const{allDoctors:e,loading:r}=Ms();return r?c.createElement("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"},"Top Rated Doctors"),c.createElement("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto"},"Consult with Pakistan's best doctors from the comfort of your home")),c.createElement("div",{className:"flex justify-center"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"}))):!e||e.length===0?c.createElement("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"},"Top Rated Doctors"),c.createElement("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto"},"Consult with Pakistan's best doctors from the comfort of your home")),c.createElement("div",{className:"text-center text-gray-500"},c.createElement("p",null,"No doctors available at the moment."))):c.createElement("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"},"Top Rated Doctors"),c.createElement("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto"},"Consult with Pakistan's best doctors from the comfort of your home")),c.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},e.map(i=>c.createElement(Bm,{key:i._id,doctor:i}))))},y4=()=>c.createElement("main",null,c.createElement(Bk,null),c.createElement(zk,null),c.createElement(Uk,null),c.createElement(v4,null),c.createElement(Hk,null),c.createElement($k,null)),_4=(e,r=!1)=>{const i=["Backspace","ArrowLeft","ArrowRight","Delete","Tab"],o=/^[0-9]$/.test(e.key),h=r&&e.key==="-";return o||h||i.includes(e.key)},ra=({label:e,type:r="text",name:i,error:o,className:h="",onlyNumbers:N=!1,allowDashes:B=!1,checked:I,required:k=!1,onBlur:d,...E})=>{const _=b=>{N&&!_4(b,B)&&b.preventDefault()};return c.createElement("div",null,e&&c.createElement("label",{htmlFor:i,className:"block text-emerald-700 font-medium mb-1"},e),c.createElement("input",{id:i,name:i,type:r,required:k,onKeyDown:_,className:`w-full px-3 py-2 border ${o?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500 ${h}`,inputMode:N?"numeric":void 0,pattern:N?B?"[0-9-]*":"[0-9]*":void 0,...E}),o&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},o))};var op=e=>e.type==="checkbox",Yl=e=>e instanceof Date,to=e=>e==null;const v1=e=>typeof e=="object";var zi=e=>!to(e)&&!Array.isArray(e)&&v1(e)&&!Yl(e),b4=e=>zi(e)&&e.target?op(e.target)?e.target.checked:e.target.value:e,w4=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,E4=(e,r)=>e.has(w4(r)),S4=e=>{const r=e.constructor&&e.constructor.prototype;return zi(r)&&r.hasOwnProperty("isPrototypeOf")},og=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function _s(e){let r;const i=Array.isArray(e),o=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(!(og&&(e instanceof Blob||o))&&(i||zi(e)))if(r=i?[]:Object.create(Object.getPrototypeOf(e)),!i&&!S4(e))r=e;else for(const h in e)e.hasOwnProperty(h)&&(r[h]=_s(e[h]));else return e;return r}var zm=e=>/^\w*$/.test(e),Yi=e=>e===void 0,cg=e=>Array.isArray(e)?e.filter(Boolean):[],lg=e=>cg(e.replace(/["|']|\]/g,"").split(/\.|\[/)),sr=(e,r,i)=>{if(!r||!zi(e))return i;const o=(zm(r)?[r]:lg(r)).reduce((h,N)=>to(h)?h:h[N],e);return Yi(o)||o===e?Yi(e[r])?i:e[r]:o},Oc=e=>typeof e=="boolean",Ya=(e,r,i)=>{let o=-1;const h=zm(r)?[r]:lg(r),N=h.length,B=N-1;for(;++o<N;){const I=h[o];let k=i;if(o!==B){const d=e[I];k=zi(d)||Array.isArray(d)?d:isNaN(+h[o+1])?{}:[]}if(I==="__proto__"||I==="constructor"||I==="prototype")return;e[I]=k,e=e[I]}};const yy={BLUR:"blur",FOCUS_OUT:"focusout"},fc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},tl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},x4=c.createContext(null);x4.displayName="HookFormContext";var R4=(e,r,i,o=!0)=>{const h={defaultValues:r._defaultValues};for(const N in e)Object.defineProperty(h,N,{get:()=>{const B=N;return r._proxyFormState[B]!==fc.all&&(r._proxyFormState[B]=!o||fc.all),e[B]}});return h};const k4=typeof window<"u"?c.useLayoutEffect:c.useEffect;var Mc=e=>typeof e=="string",C4=(e,r,i,o,h)=>Mc(e)?(o&&r.watch.add(e),sr(i,e,h)):Array.isArray(e)?e.map(N=>(o&&r.watch.add(N),sr(i,N))):(o&&(r.watchAll=!0),i),Mf=e=>to(e)||!v1(e);function Ol(e,r,i=new WeakSet){if(Mf(e)||Mf(r))return e===r;if(Yl(e)&&Yl(r))return e.getTime()===r.getTime();const o=Object.keys(e),h=Object.keys(r);if(o.length!==h.length)return!1;if(i.has(e)||i.has(r))return!0;i.add(e),i.add(r);for(const N of o){const B=e[N];if(!h.includes(N))return!1;if(N!=="ref"){const I=r[N];if(Yl(B)&&Yl(I)||zi(B)&&zi(I)||Array.isArray(B)&&Array.isArray(I)?!Ol(B,I,i):B!==I)return!1}}return!0}var ug=(e,r,i,o,h)=>r?{...i[e],types:{...i[e]&&i[e].types?i[e].types:{},[o]:h||!0}}:{},qd=e=>Array.isArray(e)?e:[e],_y=()=>{let e=[];return{get observers(){return e},next:h=>{for(const N of e)N.next&&N.next(h)},subscribe:h=>(e.push(h),{unsubscribe:()=>{e=e.filter(N=>N!==h)}}),unsubscribe:()=>{e=[]}}},_o=e=>zi(e)&&!Object.keys(e).length,dg=e=>e.type==="file",gc=e=>typeof e=="function",wm=e=>{if(!og)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},y1=e=>e.type==="select-multiple",pg=e=>e.type==="radio",T4=e=>pg(e)||op(e),ff=e=>wm(e)&&e.isConnected;function P4(e,r){const i=r.slice(0,-1).length;let o=0;for(;o<i;)e=Yi(e)?o++:e[r[o++]];return e}function N4(e){for(const r in e)if(e.hasOwnProperty(r)&&!Yi(e[r]))return!1;return!0}function Ki(e,r){const i=Array.isArray(r)?r:zm(r)?[r]:lg(r),o=i.length===1?e:P4(e,i),h=i.length-1,N=i[h];return o&&delete o[N],h!==0&&(zi(o)&&_o(o)||Array.isArray(o)&&N4(o))&&Ki(e,i.slice(0,-1)),e}var _1=e=>{for(const r in e)if(gc(e[r]))return!0;return!1};function Em(e,r={}){const i=Array.isArray(e);if(zi(e)||i)for(const o in e)Array.isArray(e[o])||zi(e[o])&&!_1(e[o])?(r[o]=Array.isArray(e[o])?[]:{},Em(e[o],r[o])):to(e[o])||(r[o]=!0);return r}function b1(e,r,i){const o=Array.isArray(e);if(zi(e)||o)for(const h in e)Array.isArray(e[h])||zi(e[h])&&!_1(e[h])?Yi(r)||Mf(i[h])?i[h]=Array.isArray(e[h])?Em(e[h],[]):{...Em(e[h])}:b1(e[h],to(r)?{}:r[h],i[h]):i[h]=!Ol(e[h],r[h]);return i}var zd=(e,r)=>b1(e,r,Em(r));const by={value:!1,isValid:!1},wy={value:!0,isValid:!0};var w1=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(i=>i&&i.checked&&!i.disabled).map(i=>i.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Yi(e[0].attributes.value)?Yi(e[0].value)||e[0].value===""?wy:{value:e[0].value,isValid:!0}:wy:by}return by},E1=(e,{valueAsNumber:r,valueAsDate:i,setValueAs:o})=>Yi(e)?e:r?e===""?NaN:e&&+e:i&&Mc(e)?new Date(e):o?o(e):e;const Ey={isValid:!1,value:null};var S1=e=>Array.isArray(e)?e.reduce((r,i)=>i&&i.checked&&!i.disabled?{isValid:!0,value:i.value}:r,Ey):Ey;function Sy(e){const r=e.ref;return dg(r)?r.files:pg(r)?S1(e.refs).value:y1(r)?[...r.selectedOptions].map(({value:i})=>i):op(r)?w1(e.refs).value:E1(Yi(r.value)?e.ref.value:r.value,e)}var A4=(e,r,i,o)=>{const h={};for(const N of e){const B=sr(r,N);B&&Ya(h,N,B._f)}return{criteriaMode:i,names:[...e],fields:h,shouldUseNativeValidation:o}},Sm=e=>e instanceof RegExp,Ud=e=>Yi(e)?e:Sm(e)?e.source:zi(e)?Sm(e.value)?e.value.source:e.value:e,xy=e=>({isOnSubmit:!e||e===fc.onSubmit,isOnBlur:e===fc.onBlur,isOnChange:e===fc.onChange,isOnAll:e===fc.all,isOnTouch:e===fc.onTouched});const Ry="AsyncFunction";var O4=e=>!!e&&!!e.validate&&!!(gc(e.validate)&&e.validate.constructor.name===Ry||zi(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===Ry)),D4=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ky=(e,r,i)=>!i&&(r.watchAll||r.watch.has(e)||[...r.watch].some(o=>e.startsWith(o)&&/^\.\w+/.test(e.slice(o.length))));const Vd=(e,r,i,o)=>{for(const h of i||Object.keys(e)){const N=sr(e,h);if(N){const{_f:B,...I}=N;if(B){if(B.refs&&B.refs[0]&&r(B.refs[0],h)&&!o)return!0;if(B.ref&&r(B.ref,B.name)&&!o)return!0;if(Vd(I,r))break}else if(zi(I)&&Vd(I,r))break}}};function Cy(e,r,i){const o=sr(e,i);if(o||zm(i))return{error:o,name:i};const h=i.split(".");for(;h.length;){const N=h.join("."),B=sr(r,N),I=sr(e,N);if(B&&!Array.isArray(B)&&i!==N)return{name:i};if(I&&I.type)return{name:N,error:I};if(I&&I.root&&I.root.type)return{name:`${N}.root`,error:I.root};h.pop()}return{name:i}}var M4=(e,r,i,o)=>{i(e);const{name:h,...N}=e;return _o(N)||Object.keys(N).length>=Object.keys(r).length||Object.keys(N).find(B=>r[B]===(!o||fc.all))},L4=(e,r,i)=>!e||!r||e===r||qd(e).some(o=>o&&(i?o===r:o.startsWith(r)||r.startsWith(o))),I4=(e,r,i,o,h)=>h.isOnAll?!1:!i&&h.isOnTouch?!(r||e):(i?o.isOnBlur:h.isOnBlur)?!e:(i?o.isOnChange:h.isOnChange)?e:!0,j4=(e,r)=>!cg(sr(e,r)).length&&Ki(e,r),B4=(e,r,i)=>{const o=qd(sr(e,i));return Ya(o,"root",r[i]),Ya(e,i,o),e},mm=e=>Mc(e);function Ty(e,r,i="validate"){if(mm(e)||Array.isArray(e)&&e.every(mm)||Oc(e)&&!e)return{type:i,message:mm(e)?e:"",ref:r}}var Hu=e=>zi(e)&&!Sm(e)?e:{value:e,message:""},Py=async(e,r,i,o,h,N)=>{const{ref:B,refs:I,required:k,maxLength:d,minLength:E,min:_,max:b,pattern:T,validate:v,name:f,valueAsNumber:R,mount:g}=e._f,F=sr(i,f);if(!g||r.has(f))return{};const m=I?I[0]:B,P=A=>{h&&m.reportValidity&&(m.setCustomValidity(Oc(A)?"":A||""),m.reportValidity())},S={},H=pg(B),x=op(B),y=H||x,w=(R||dg(B))&&Yi(B.value)&&Yi(F)||wm(B)&&B.value===""||F===""||Array.isArray(F)&&!F.length,p=ug.bind(null,f,o,S),C=(A,M,j,U=tl.maxLength,z=tl.minLength)=>{const W=A?M:j;S[f]={type:A?U:z,message:W,ref:B,...p(A?U:z,W)}};if(N?!Array.isArray(F)||!F.length:k&&(!y&&(w||to(F))||Oc(F)&&!F||x&&!w1(I).isValid||H&&!S1(I).isValid)){const{value:A,message:M}=mm(k)?{value:!!k,message:k}:Hu(k);if(A&&(S[f]={type:tl.required,message:M,ref:m,...p(tl.required,M)},!o))return P(M),S}if(!w&&(!to(_)||!to(b))){let A,M;const j=Hu(b),U=Hu(_);if(!to(F)&&!isNaN(F)){const z=B.valueAsNumber||F&&+F;to(j.value)||(A=z>j.value),to(U.value)||(M=z<U.value)}else{const z=B.valueAsDate||new Date(F),W=J=>new Date(new Date().toDateString()+" "+J),Z=B.type=="time",ce=B.type=="week";Mc(j.value)&&F&&(A=Z?W(F)>W(j.value):ce?F>j.value:z>new Date(j.value)),Mc(U.value)&&F&&(M=Z?W(F)<W(U.value):ce?F<U.value:z<new Date(U.value))}if((A||M)&&(C(!!A,j.message,U.message,tl.max,tl.min),!o))return P(S[f].message),S}if((d||E)&&!w&&(Mc(F)||N&&Array.isArray(F))){const A=Hu(d),M=Hu(E),j=!to(A.value)&&F.length>+A.value,U=!to(M.value)&&F.length<+M.value;if((j||U)&&(C(j,A.message,M.message),!o))return P(S[f].message),S}if(T&&!w&&Mc(F)){const{value:A,message:M}=Hu(T);if(Sm(A)&&!F.match(A)&&(S[f]={type:tl.pattern,message:M,ref:B,...p(tl.pattern,M)},!o))return P(M),S}if(v){if(gc(v)){const A=await v(F,i),M=Ty(A,m);if(M&&(S[f]={...M,...p(tl.validate,M.message)},!o))return P(M.message),S}else if(zi(v)){let A={};for(const M in v){if(!_o(A)&&!o)break;const j=Ty(await v[M](F,i),m,M);j&&(A={...j,...p(M,j.message)},P(j.message),o&&(S[f]=A))}if(!_o(A)&&(S[f]={ref:m,...A},!o))return S}}return P(!0),S};const z4={mode:fc.onSubmit,reValidateMode:fc.onChange,shouldFocusError:!0};function U4(e={}){let r={...z4,...e},i={submitCount:0,isDirty:!1,isReady:!1,isLoading:gc(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},o={},h=zi(r.defaultValues)||zi(r.values)?_s(r.defaultValues||r.values)||{}:{},N=r.shouldUnregister?{}:_s(h),B={action:!1,mount:!1,watch:!1},I={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},k,d=0;const E={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let _={...E};const b={array:_y(),state:_y()},T=r.criteriaMode===fc.all,v=Le=>je=>{clearTimeout(d),d=setTimeout(Le,je)},f=async Le=>{if(!r.disabled&&(E.isValid||_.isValid||Le)){const je=r.resolver?_o((await x()).errors):await w(o,!0);je!==i.isValid&&b.state.next({isValid:je})}},R=(Le,je)=>{!r.disabled&&(E.isValidating||E.validatingFields||_.isValidating||_.validatingFields)&&((Le||Array.from(I.mount)).forEach(Ge=>{Ge&&(je?Ya(i.validatingFields,Ge,je):Ki(i.validatingFields,Ge))}),b.state.next({validatingFields:i.validatingFields,isValidating:!_o(i.validatingFields)}))},g=(Le,je=[],Ge,Qt,Ft=!0,xt=!0)=>{if(Qt&&Ge&&!r.disabled){if(B.action=!0,xt&&Array.isArray(sr(o,Le))){const pn=Ge(sr(o,Le),Qt.argA,Qt.argB);Ft&&Ya(o,Le,pn)}if(xt&&Array.isArray(sr(i.errors,Le))){const pn=Ge(sr(i.errors,Le),Qt.argA,Qt.argB);Ft&&Ya(i.errors,Le,pn),j4(i.errors,Le)}if((E.touchedFields||_.touchedFields)&&xt&&Array.isArray(sr(i.touchedFields,Le))){const pn=Ge(sr(i.touchedFields,Le),Qt.argA,Qt.argB);Ft&&Ya(i.touchedFields,Le,pn)}(E.dirtyFields||_.dirtyFields)&&(i.dirtyFields=zd(h,N)),b.state.next({name:Le,isDirty:C(Le,je),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else Ya(N,Le,je)},F=(Le,je)=>{Ya(i.errors,Le,je),b.state.next({errors:i.errors})},m=Le=>{i.errors=Le,b.state.next({errors:i.errors,isValid:!1})},P=(Le,je,Ge,Qt)=>{const Ft=sr(o,Le);if(Ft){const xt=sr(N,Le,Yi(Ge)?sr(h,Le):Ge);Yi(xt)||Qt&&Qt.defaultChecked||je?Ya(N,Le,je?xt:Sy(Ft._f)):j(Le,xt),B.mount&&f()}},S=(Le,je,Ge,Qt,Ft)=>{let xt=!1,pn=!1;const Ln={name:Le};if(!r.disabled){if(!Ge||Qt){(E.isDirty||_.isDirty)&&(pn=i.isDirty,i.isDirty=Ln.isDirty=C(),xt=pn!==Ln.isDirty);const Bt=Ol(sr(h,Le),je);pn=!!sr(i.dirtyFields,Le),Bt?Ki(i.dirtyFields,Le):Ya(i.dirtyFields,Le,!0),Ln.dirtyFields=i.dirtyFields,xt=xt||(E.dirtyFields||_.dirtyFields)&&pn!==!Bt}if(Ge){const Bt=sr(i.touchedFields,Le);Bt||(Ya(i.touchedFields,Le,Ge),Ln.touchedFields=i.touchedFields,xt=xt||(E.touchedFields||_.touchedFields)&&Bt!==Ge)}xt&&Ft&&b.state.next(Ln)}return xt?Ln:{}},H=(Le,je,Ge,Qt)=>{const Ft=sr(i.errors,Le),xt=(E.isValid||_.isValid)&&Oc(je)&&i.isValid!==je;if(r.delayError&&Ge?(k=v(()=>F(Le,Ge)),k(r.delayError)):(clearTimeout(d),k=null,Ge?Ya(i.errors,Le,Ge):Ki(i.errors,Le)),(Ge?!Ol(Ft,Ge):Ft)||!_o(Qt)||xt){const pn={...Qt,...xt&&Oc(je)?{isValid:je}:{},errors:i.errors,name:Le};i={...i,...pn},b.state.next(pn)}},x=async Le=>{R(Le,!0);const je=await r.resolver(N,r.context,A4(Le||I.mount,o,r.criteriaMode,r.shouldUseNativeValidation));return R(Le),je},y=async Le=>{const{errors:je}=await x(Le);if(Le)for(const Ge of Le){const Qt=sr(je,Ge);Qt?Ya(i.errors,Ge,Qt):Ki(i.errors,Ge)}else i.errors=je;return je},w=async(Le,je,Ge={valid:!0})=>{for(const Qt in Le){const Ft=Le[Qt];if(Ft){const{_f:xt,...pn}=Ft;if(xt){const Ln=I.array.has(xt.name),Bt=Ft._f&&O4(Ft._f);Bt&&E.validatingFields&&R([Qt],!0);const lr=await Py(Ft,I.disabled,N,T,r.shouldUseNativeValidation&&!je,Ln);if(Bt&&E.validatingFields&&R([Qt]),lr[xt.name]&&(Ge.valid=!1,je))break;!je&&(sr(lr,xt.name)?Ln?B4(i.errors,lr,xt.name):Ya(i.errors,xt.name,lr[xt.name]):Ki(i.errors,xt.name))}!_o(pn)&&await w(pn,je,Ge)}}return Ge.valid},p=()=>{for(const Le of I.unMount){const je=sr(o,Le);je&&(je._f.refs?je._f.refs.every(Ge=>!ff(Ge)):!ff(je._f.ref))&&we(Le)}I.unMount=new Set},C=(Le,je)=>!r.disabled&&(Le&&je&&Ya(N,Le,je),!Ol(J(),h)),A=(Le,je,Ge)=>C4(Le,I,{...B.mount?N:Yi(je)?h:Mc(Le)?{[Le]:je}:je},Ge,je),M=Le=>cg(sr(B.mount?N:h,Le,r.shouldUnregister?sr(h,Le,[]):[])),j=(Le,je,Ge={})=>{const Qt=sr(o,Le);let Ft=je;if(Qt){const xt=Qt._f;xt&&(!xt.disabled&&Ya(N,Le,E1(je,xt)),Ft=wm(xt.ref)&&to(je)?"":je,y1(xt.ref)?[...xt.ref.options].forEach(pn=>pn.selected=Ft.includes(pn.value)):xt.refs?op(xt.ref)?xt.refs.forEach(pn=>{(!pn.defaultChecked||!pn.disabled)&&(Array.isArray(Ft)?pn.checked=!!Ft.find(Ln=>Ln===pn.value):pn.checked=Ft===pn.value||!!Ft)}):xt.refs.forEach(pn=>pn.checked=pn.value===Ft):dg(xt.ref)?xt.ref.value="":(xt.ref.value=Ft,xt.ref.type||b.state.next({name:Le,values:_s(N)})))}(Ge.shouldDirty||Ge.shouldTouch)&&S(Le,Ft,Ge.shouldTouch,Ge.shouldDirty,!0),Ge.shouldValidate&&ce(Le)},U=(Le,je,Ge)=>{for(const Qt in je){if(!je.hasOwnProperty(Qt))return;const Ft=je[Qt],xt=Le+"."+Qt,pn=sr(o,xt);(I.array.has(Le)||zi(Ft)||pn&&!pn._f)&&!Yl(Ft)?U(xt,Ft,Ge):j(xt,Ft,Ge)}},z=(Le,je,Ge={})=>{const Qt=sr(o,Le),Ft=I.array.has(Le),xt=_s(je);Ya(N,Le,xt),Ft?(b.array.next({name:Le,values:_s(N)}),(E.isDirty||E.dirtyFields||_.isDirty||_.dirtyFields)&&Ge.shouldDirty&&b.state.next({name:Le,dirtyFields:zd(h,N),isDirty:C(Le,xt)})):Qt&&!Qt._f&&!to(xt)?U(Le,xt,Ge):j(Le,xt,Ge),ky(Le,I)&&b.state.next({...i,name:Le}),b.state.next({name:B.mount?Le:void 0,values:_s(N)})},W=async Le=>{B.mount=!0;const je=Le.target;let Ge=je.name,Qt=!0;const Ft=sr(o,Ge),xt=Bt=>{Qt=Number.isNaN(Bt)||Yl(Bt)&&isNaN(Bt.getTime())||Ol(Bt,sr(N,Ge,Bt))},pn=xy(r.mode),Ln=xy(r.reValidateMode);if(Ft){let Bt,lr;const Fr=je.type?Sy(Ft._f):b4(Le),kr=Le.type===yy.BLUR||Le.type===yy.FOCUS_OUT,Vr=!D4(Ft._f)&&!r.resolver&&!sr(i.errors,Ge)&&!Ft._f.deps||I4(kr,sr(i.touchedFields,Ge),i.isSubmitted,Ln,pn),Hr=ky(Ge,I,kr);Ya(N,Ge,Fr),kr?(!je||!je.readOnly)&&(Ft._f.onBlur&&Ft._f.onBlur(Le),k&&k(0)):Ft._f.onChange&&Ft._f.onChange(Le);const Or=S(Ge,Fr,kr),Gr=!_o(Or)||Hr;if(!kr&&b.state.next({name:Ge,type:Le.type,values:_s(N)}),Vr)return(E.isValid||_.isValid)&&(r.mode==="onBlur"?kr&&f():kr||f()),Gr&&b.state.next({name:Ge,...Hr?{}:Or});if(!kr&&Hr&&b.state.next({...i}),r.resolver){const{errors:ga}=await x([Ge]);if(xt(Fr),Qt){const ta=Cy(i.errors,o,Ge),oa=Cy(ga,o,ta.name||Ge);Bt=oa.error,Ge=oa.name,lr=_o(ga)}}else R([Ge],!0),Bt=(await Py(Ft,I.disabled,N,T,r.shouldUseNativeValidation))[Ge],R([Ge]),xt(Fr),Qt&&(Bt?lr=!1:(E.isValid||_.isValid)&&(lr=await w(o,!0)));Qt&&(Ft._f.deps&&ce(Ft._f.deps),H(Ge,lr,Bt,Or))}},Z=(Le,je)=>{if(sr(i.errors,je)&&Le.focus)return Le.focus(),1},ce=async(Le,je={})=>{let Ge,Qt;const Ft=qd(Le);if(r.resolver){const xt=await y(Yi(Le)?Le:Ft);Ge=_o(xt),Qt=Le?!Ft.some(pn=>sr(xt,pn)):Ge}else Le?(Qt=(await Promise.all(Ft.map(async xt=>{const pn=sr(o,xt);return await w(pn&&pn._f?{[xt]:pn}:pn)}))).every(Boolean),!(!Qt&&!i.isValid)&&f()):Qt=Ge=await w(o);return b.state.next({...!Mc(Le)||(E.isValid||_.isValid)&&Ge!==i.isValid?{}:{name:Le},...r.resolver||!Le?{isValid:Ge}:{},errors:i.errors}),je.shouldFocus&&!Qt&&Vd(o,Z,Le?Ft:I.mount),Qt},J=Le=>{const je={...B.mount?N:h};return Yi(Le)?je:Mc(Le)?sr(je,Le):Le.map(Ge=>sr(je,Ge))},Ee=(Le,je)=>({invalid:!!sr((je||i).errors,Le),isDirty:!!sr((je||i).dirtyFields,Le),error:sr((je||i).errors,Le),isValidating:!!sr(i.validatingFields,Le),isTouched:!!sr((je||i).touchedFields,Le)}),Ce=Le=>{Le&&qd(Le).forEach(je=>Ki(i.errors,je)),b.state.next({errors:Le?i.errors:{}})},Re=(Le,je,Ge)=>{const Qt=(sr(o,Le,{_f:{}})._f||{}).ref,Ft=sr(i.errors,Le)||{},{ref:xt,message:pn,type:Ln,...Bt}=Ft;Ya(i.errors,Le,{...Bt,...je,ref:Qt}),b.state.next({name:Le,errors:i.errors,isValid:!1}),Ge&&Ge.shouldFocus&&Qt&&Qt.focus&&Qt.focus()},ye=(Le,je)=>gc(Le)?b.state.subscribe({next:Ge=>"values"in Ge&&Le(A(void 0,je),Ge)}):A(Le,je,!0),Te=Le=>b.state.subscribe({next:je=>{L4(Le.name,je.name,Le.exact)&&M4(je,Le.formState||E,cr,Le.reRenderRoot)&&Le.callback({values:{...N},...i,...je,defaultValues:h})}}).unsubscribe,He=Le=>(B.mount=!0,_={..._,...Le.formState},Te({...Le,formState:_})),we=(Le,je={})=>{for(const Ge of Le?qd(Le):I.mount)I.mount.delete(Ge),I.array.delete(Ge),je.keepValue||(Ki(o,Ge),Ki(N,Ge)),!je.keepError&&Ki(i.errors,Ge),!je.keepDirty&&Ki(i.dirtyFields,Ge),!je.keepTouched&&Ki(i.touchedFields,Ge),!je.keepIsValidating&&Ki(i.validatingFields,Ge),!r.shouldUnregister&&!je.keepDefaultValue&&Ki(h,Ge);b.state.next({values:_s(N)}),b.state.next({...i,...je.keepDirty?{isDirty:C()}:{}}),!je.keepIsValid&&f()},Je=({disabled:Le,name:je})=>{(Oc(Le)&&B.mount||Le||I.disabled.has(je))&&(Le?I.disabled.add(je):I.disabled.delete(je))},Be=(Le,je={})=>{let Ge=sr(o,Le);const Qt=Oc(je.disabled)||Oc(r.disabled);return Ya(o,Le,{...Ge||{},_f:{...Ge&&Ge._f?Ge._f:{ref:{name:Le}},name:Le,mount:!0,...je}}),I.mount.add(Le),Ge?Je({disabled:Oc(je.disabled)?je.disabled:r.disabled,name:Le}):P(Le,!0,je.value),{...Qt?{disabled:je.disabled||r.disabled}:{},...r.progressive?{required:!!je.required,min:Ud(je.min),max:Ud(je.max),minLength:Ud(je.minLength),maxLength:Ud(je.maxLength),pattern:Ud(je.pattern)}:{},name:Le,onChange:W,onBlur:W,ref:Ft=>{if(Ft){Be(Le,je),Ge=sr(o,Le);const xt=Yi(Ft.value)&&Ft.querySelectorAll&&Ft.querySelectorAll("input,select,textarea")[0]||Ft,pn=T4(xt),Ln=Ge._f.refs||[];if(pn?Ln.find(Bt=>Bt===xt):xt===Ge._f.ref)return;Ya(o,Le,{_f:{...Ge._f,...pn?{refs:[...Ln.filter(ff),xt,...Array.isArray(sr(h,Le))?[{}]:[]],ref:{type:xt.type,name:Le}}:{ref:xt}}}),P(Le,!1,void 0,xt)}else Ge=sr(o,Le,{}),Ge._f&&(Ge._f.mount=!1),(r.shouldUnregister||je.shouldUnregister)&&!(E4(I.array,Le)&&B.action)&&I.unMount.add(Le)}}},nt=()=>r.shouldFocusError&&Vd(o,Z,I.mount),Qe=Le=>{Oc(Le)&&(b.state.next({disabled:Le}),Vd(o,(je,Ge)=>{const Qt=sr(o,Ge);Qt&&(je.disabled=Qt._f.disabled||Le,Array.isArray(Qt._f.refs)&&Qt._f.refs.forEach(Ft=>{Ft.disabled=Qt._f.disabled||Le}))},0,!1))},Ze=(Le,je)=>async Ge=>{let Qt;Ge&&(Ge.preventDefault&&Ge.preventDefault(),Ge.persist&&Ge.persist());let Ft=_s(N);if(b.state.next({isSubmitting:!0}),r.resolver){const{errors:xt,values:pn}=await x();i.errors=xt,Ft=_s(pn)}else await w(o);if(I.disabled.size)for(const xt of I.disabled)Ki(Ft,xt);if(Ki(i.errors,"root"),_o(i.errors)){b.state.next({errors:{}});try{await Le(Ft,Ge)}catch(xt){Qt=xt}}else je&&await je({...i.errors},Ge),nt(),setTimeout(nt);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:_o(i.errors)&&!Qt,submitCount:i.submitCount+1,errors:i.errors}),Qt)throw Qt},Ht=(Le,je={})=>{sr(o,Le)&&(Yi(je.defaultValue)?z(Le,_s(sr(h,Le))):(z(Le,je.defaultValue),Ya(h,Le,_s(je.defaultValue))),je.keepTouched||Ki(i.touchedFields,Le),je.keepDirty||(Ki(i.dirtyFields,Le),i.isDirty=je.defaultValue?C(Le,_s(sr(h,Le))):C()),je.keepError||(Ki(i.errors,Le),E.isValid&&f()),b.state.next({...i}))},or=(Le,je={})=>{const Ge=Le?_s(Le):h,Qt=_s(Ge),Ft=_o(Le),xt=Ft?h:Qt;if(je.keepDefaultValues||(h=Ge),!je.keepValues){if(je.keepDirtyValues){const pn=new Set([...I.mount,...Object.keys(zd(h,N))]);for(const Ln of Array.from(pn))sr(i.dirtyFields,Ln)?Ya(xt,Ln,sr(N,Ln)):z(Ln,sr(xt,Ln))}else{if(og&&Yi(Le))for(const pn of I.mount){const Ln=sr(o,pn);if(Ln&&Ln._f){const Bt=Array.isArray(Ln._f.refs)?Ln._f.refs[0]:Ln._f.ref;if(wm(Bt)){const lr=Bt.closest("form");if(lr){lr.reset();break}}}}if(je.keepFieldsRef)for(const pn of I.mount)z(pn,sr(xt,pn));else o={}}N=r.shouldUnregister?je.keepDefaultValues?_s(h):{}:_s(xt),b.array.next({values:{...xt}}),b.state.next({values:{...xt}})}I={mount:je.keepDirtyValues?I.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},B.mount=!E.isValid||!!je.keepIsValid||!!je.keepDirtyValues,B.watch=!!r.shouldUnregister,b.state.next({submitCount:je.keepSubmitCount?i.submitCount:0,isDirty:Ft?!1:je.keepDirty?i.isDirty:!!(je.keepDefaultValues&&!Ol(Le,h)),isSubmitted:je.keepIsSubmitted?i.isSubmitted:!1,dirtyFields:Ft?{}:je.keepDirtyValues?je.keepDefaultValues&&N?zd(h,N):i.dirtyFields:je.keepDefaultValues&&Le?zd(h,Le):je.keepDirty?i.dirtyFields:{},touchedFields:je.keepTouched?i.touchedFields:{},errors:je.keepErrors?i.errors:{},isSubmitSuccessful:je.keepIsSubmitSuccessful?i.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:h})},Nr=(Le,je)=>or(gc(Le)?Le(N):Le,je),jn=(Le,je={})=>{const Ge=sr(o,Le),Qt=Ge&&Ge._f;if(Qt){const Ft=Qt.refs?Qt.refs[0]:Qt.ref;Ft.focus&&(Ft.focus(),je.shouldSelect&&gc(Ft.select)&&Ft.select())}},cr=Le=>{i={...i,...Le}},Un={control:{register:Be,unregister:we,getFieldState:Ee,handleSubmit:Ze,setError:Re,_subscribe:Te,_runSchema:x,_focusError:nt,_getWatch:A,_getDirty:C,_setValid:f,_setFieldArray:g,_setDisabledField:Je,_setErrors:m,_getFieldArray:M,_reset:or,_resetDefaultValues:()=>gc(r.defaultValues)&&r.defaultValues().then(Le=>{Nr(Le,r.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:p,_disableForm:Qe,_subjects:b,_proxyFormState:E,get _fields(){return o},get _formValues(){return N},get _state(){return B},set _state(Le){B=Le},get _defaultValues(){return h},get _names(){return I},set _names(Le){I=Le},get _formState(){return i},get _options(){return r},set _options(Le){r={...r,...Le}}},subscribe:He,trigger:ce,register:Be,handleSubmit:Ze,watch:ye,setValue:z,getValues:J,reset:Nr,resetField:Ht,clearErrors:Ce,unregister:we,setError:Re,setFocus:jn,getFieldState:Ee};return{...Un,formControl:Un}}function au(e={}){const r=c.useRef(void 0),i=c.useRef(void 0),[o,h]=c.useState({isDirty:!1,isValidating:!1,isLoading:gc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:gc(e.defaultValues)?void 0:e.defaultValues});if(!r.current)if(e.formControl)r.current={...e.formControl,formState:o},e.defaultValues&&!gc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:B,...I}=U4(e);r.current={...I,formState:o}}const N=r.current.control;return N._options=e,k4(()=>{const B=N._subscribe({formState:N._proxyFormState,callback:()=>h({...N._formState}),reRenderRoot:!0});return h(I=>({...I,isReady:!0})),N._formState.isReady=!0,B},[N]),c.useEffect(()=>N._disableForm(e.disabled),[N,e.disabled]),c.useEffect(()=>{e.mode&&(N._options.mode=e.mode),e.reValidateMode&&(N._options.reValidateMode=e.reValidateMode)},[N,e.mode,e.reValidateMode]),c.useEffect(()=>{e.errors&&(N._setErrors(e.errors),N._focusError())},[N,e.errors]),c.useEffect(()=>{e.shouldUnregister&&N._subjects.state.next({values:N._getWatch()})},[N,e.shouldUnregister]),c.useEffect(()=>{if(N._proxyFormState.isDirty){const B=N._getDirty();B!==o.isDirty&&N._subjects.state.next({isDirty:B})}},[N,o.isDirty]),c.useEffect(()=>{e.values&&!Ol(e.values,i.current)?(N._reset(e.values,{keepFieldsRef:!0,...N._options.resetOptions}),i.current=e.values,h(B=>({...B}))):N._resetDefaultValues()},[N,e.values]),c.useEffect(()=>{N._state.mount||(N._setValid(),N._state.mount=!0),N._state.watch&&(N._state.watch=!1,N._subjects.state.next({...N._formState})),N._removeUnmounted()}),r.current.formState=R4(o,N),r.current}const Ny=(e,r,i)=>{if(e&&"reportValidity"in e){const o=sr(i,r);e.setCustomValidity(o&&o.message||""),e.reportValidity()}},Lf=(e,r)=>{for(const i in r.fields){const o=r.fields[i];o&&o.ref&&"reportValidity"in o.ref?Ny(o.ref,i,e):o&&o.refs&&o.refs.forEach(h=>Ny(h,i,e))}},Ay=(e,r)=>{r.shouldUseNativeValidation&&Lf(e,r);const i={};for(const o in e){const h=sr(r.fields,o),N=Object.assign(e[o]||{},{ref:h&&h.ref});if(H4(r.names||Object.keys(e),o)){const B=Object.assign({},sr(i,o));Ya(B,"root",N),Ya(i,o,B)}else Ya(i,o,N)}return i},H4=(e,r)=>{const i=Oy(r);return e.some(o=>Oy(o).match(`^${i}\\.\\d+`))};function Oy(e){return e.replace(/\]|\[/g,"")}function Zt(e,r,i){function o(I,k){var d;Object.defineProperty(I,"_zod",{value:I._zod??{},enumerable:!1}),(d=I._zod).traits??(d.traits=new Set),I._zod.traits.add(e),r(I,k);for(const E in B.prototype)E in I||Object.defineProperty(I,E,{value:B.prototype[E].bind(I)});I._zod.constr=B,I._zod.def=k}const h=i?.Parent??Object;class N extends h{}Object.defineProperty(N,"name",{value:e});function B(I){var k;const d=i?.Parent?new N:this;o(d,I),(k=d._zod).deferred??(k.deferred=[]);for(const E of d._zod.deferred)E();return d}return Object.defineProperty(B,"init",{value:o}),Object.defineProperty(B,Symbol.hasInstance,{value:I=>i?.Parent&&I instanceof i.Parent?!0:I?._zod?.traits?.has(e)}),Object.defineProperty(B,"name",{value:e}),B}class Qd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const x1={};function eu(e){return x1}function F4(e){const r=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,h])=>r.indexOf(+o)===-1).map(([o,h])=>h)}function If(e,r){return typeof r=="bigint"?r.toString():r}function R1(e){return{get value(){{const r=e();return Object.defineProperty(this,"value",{value:r}),r}}}}function mg(e){return e==null}function hg(e){const r=e.startsWith("^")?1:0,i=e.endsWith("$")?e.length-1:e.length;return e.slice(r,i)}function q4(e,r){const i=(e.toString().split(".")[1]||"").length,o=r.toString();let h=(o.split(".")[1]||"").length;if(h===0&&/\d?e-\d?/.test(o)){const k=o.match(/\d?e-(\d?)/);k?.[1]&&(h=Number.parseInt(k[1]))}const N=i>h?i:h,B=Number.parseInt(e.toFixed(N).replace(".","")),I=Number.parseInt(r.toFixed(N).replace(".",""));return B%I/10**N}const Dy=Symbol("evaluating");function ei(e,r,i){let o;Object.defineProperty(e,r,{get(){if(o!==Dy)return o===void 0&&(o=Dy,o=i()),o},set(h){Object.defineProperty(e,r,{value:h})},configurable:!0})}function V4(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function iu(e,r,i){Object.defineProperty(e,r,{value:i,writable:!0,enumerable:!0,configurable:!0})}function td(...e){const r={};for(const i of e){const o=Object.getOwnPropertyDescriptors(i);Object.assign(r,o)}return Object.defineProperties({},r)}function My(e){return JSON.stringify(e)}const k1="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function jf(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Z4=R1(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Bf(e){if(jf(e)===!1)return!1;const r=e.constructor;if(r===void 0)return!0;const i=r.prototype;return!(jf(i)===!1||Object.prototype.hasOwnProperty.call(i,"isPrototypeOf")===!1)}const $4=new Set(["string","number","symbol"]);function Wu(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function su(e,r,i){const o=new e._zod.constr(r??e._zod.def);return(!r||i?.parent)&&(o._zod.parent=e),o}function Er(e){const r=e;if(!r)return{};if(typeof r=="string")return{error:()=>r};if(r?.message!==void 0){if(r?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");r.error=r.message}return delete r.message,typeof r.error=="string"?{...r,error:()=>r.error}:r}function W4(e){return Object.keys(e).filter(r=>e[r]._zod.optin==="optional"&&e[r]._zod.optout==="optional")}const G4={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function K4(e,r){const i=e._zod.def,o=td(e._zod.def,{get shape(){const h={};for(const N in r){if(!(N in i.shape))throw new Error(`Unrecognized key: "${N}"`);r[N]&&(h[N]=i.shape[N])}return iu(this,"shape",h),h},checks:[]});return su(e,o)}function Y4(e,r){const i=e._zod.def,o=td(e._zod.def,{get shape(){const h={...e._zod.def.shape};for(const N in r){if(!(N in i.shape))throw new Error(`Unrecognized key: "${N}"`);r[N]&&delete h[N]}return iu(this,"shape",h),h},checks:[]});return su(e,o)}function Q4(e,r){if(!Bf(r))throw new Error("Invalid input to extend: expected a plain object");const i=td(e._zod.def,{get shape(){const o={...e._zod.def.shape,...r};return iu(this,"shape",o),o},checks:[]});return su(e,i)}function J4(e,r){const i=td(e._zod.def,{get shape(){const o={...e._zod.def.shape,...r._zod.def.shape};return iu(this,"shape",o),o},get catchall(){return r._zod.def.catchall},checks:[]});return su(e,i)}function X4(e,r,i){const o=td(r._zod.def,{get shape(){const h=r._zod.def.shape,N={...h};if(i)for(const B in i){if(!(B in h))throw new Error(`Unrecognized key: "${B}"`);i[B]&&(N[B]=e?new e({type:"optional",innerType:h[B]}):h[B])}else for(const B in h)N[B]=e?new e({type:"optional",innerType:h[B]}):h[B];return iu(this,"shape",N),N},checks:[]});return su(r,o)}function e6(e,r,i){const o=td(r._zod.def,{get shape(){const h=r._zod.def.shape,N={...h};if(i)for(const B in i){if(!(B in N))throw new Error(`Unrecognized key: "${B}"`);i[B]&&(N[B]=new e({type:"nonoptional",innerType:h[B]}))}else for(const B in h)N[B]=new e({type:"nonoptional",innerType:h[B]});return iu(this,"shape",N),N},checks:[]});return su(r,o)}function Zd(e,r=0){for(let i=r;i<e.issues.length;i++)if(e.issues[i]?.continue!==!0)return!0;return!1}function C1(e,r){return r.map(i=>{var o;return(o=i).path??(o.path=[]),i.path.unshift(e),i})}function tm(e){return typeof e=="string"?e:e?.message}function tu(e,r,i){const o={...e,path:e.path??[]};if(!e.message){const h=tm(e.inst?._zod.def?.error?.(e))??tm(r?.error?.(e))??tm(i.customError?.(e))??tm(i.localeError?.(e))??"Invalid input";o.message=h}return delete o.inst,delete o.continue,r?.reportInput||delete o.input,o}function fg(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Jd(...e){const[r,i,o]=e;return typeof r=="string"?{message:r,code:"custom",input:i,inst:o}:{...r}}const T1=(e,r)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:r,enumerable:!1}),e.message=JSON.stringify(r,If,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},gg=Zt("$ZodError",T1),Um=Zt("$ZodError",T1,{Parent:Error});function t6(e,r=i=>i.message){const i={},o=[];for(const h of e.issues)h.path.length>0?(i[h.path[0]]=i[h.path[0]]||[],i[h.path[0]].push(r(h))):o.push(r(h));return{formErrors:o,fieldErrors:i}}function n6(e,r){const i=r||function(N){return N.message},o={_errors:[]},h=N=>{for(const B of N.issues)if(B.code==="invalid_union"&&B.errors.length)B.errors.map(I=>h({issues:I}));else if(B.code==="invalid_key")h({issues:B.issues});else if(B.code==="invalid_element")h({issues:B.issues});else if(B.path.length===0)o._errors.push(i(B));else{let I=o,k=0;for(;k<B.path.length;){const d=B.path[k];k===B.path.length-1?(I[d]=I[d]||{_errors:[]},I[d]._errors.push(i(B))):I[d]=I[d]||{_errors:[]},I=I[d],k++}}};return h(e),o}const P1=e=>(r,i,o,h)=>{const N=o?Object.assign(o,{async:!1}):{async:!1},B=r._zod.run({value:i,issues:[]},N);if(B instanceof Promise)throw new Qd;if(B.issues.length){const I=new(h?.Err??e)(B.issues.map(k=>tu(k,N,eu())));throw k1(I,h?.callee),I}return B.value},r6=P1(Um),N1=e=>async(r,i,o,h)=>{const N=o?Object.assign(o,{async:!0}):{async:!0};let B=r._zod.run({value:i,issues:[]},N);if(B instanceof Promise&&(B=await B),B.issues.length){const I=new(h?.Err??e)(B.issues.map(k=>tu(k,N,eu())));throw k1(I,h?.callee),I}return B.value},a6=N1(Um),A1=e=>(r,i,o)=>{const h=o?{...o,async:!1}:{async:!1},N=r._zod.run({value:i,issues:[]},h);if(N instanceof Promise)throw new Qd;return N.issues.length?{success:!1,error:new(e??gg)(N.issues.map(B=>tu(B,h,eu())))}:{success:!0,data:N.value}},i6=A1(Um),O1=e=>async(r,i,o)=>{const h=o?Object.assign(o,{async:!0}):{async:!0};let N=r._zod.run({value:i,issues:[]},h);return N instanceof Promise&&(N=await N),N.issues.length?{success:!1,error:new e(N.issues.map(B=>tu(B,h,eu())))}:{success:!0,data:N.value}},s6=O1(Um),o6=/^[cC][^\s-]{8,}$/,c6=/^[0-9a-z]+$/,l6=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,u6=/^[0-9a-vA-V]{20}$/,d6=/^[A-Za-z0-9]{27}$/,p6=/^[a-zA-Z0-9_-]{21}$/,m6=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,h6=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ly=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,f6=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,g6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function v6(){return new RegExp(g6,"u")}const y6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,b6=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,w6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,E6=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,D1=/^[A-Za-z0-9_-]*$/,S6=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,x6=/^\+(?:[0-9]){6,14}[0-9]$/,M1="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",R6=new RegExp(`^${M1}$`);function L1(e){const r="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${r}`:e.precision===0?`${r}:[0-5]\\d`:`${r}:[0-5]\\d\\.\\d{${e.precision}}`:`${r}(?::[0-5]\\d(?:\\.\\d+)?)?`}function k6(e){return new RegExp(`^${L1(e)}$`)}function C6(e){const r=L1({precision:e.precision}),i=["Z"];e.local&&i.push(""),e.offset&&i.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${r}(?:${i.join("|")})`;return new RegExp(`^${M1}T(?:${o})$`)}const T6=e=>{const r=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${r}$`)},P6=/^\d+$/,N6=/^-?\d+(?:\.\d+)?/i,A6=/true|false/i,O6=/^[^A-Z]*$/,D6=/^[^a-z]*$/,xo=Zt("$ZodCheck",(e,r)=>{var i;e._zod??(e._zod={}),e._zod.def=r,(i=e._zod).onattach??(i.onattach=[])}),I1={number:"number",bigint:"bigint",object:"date"},j1=Zt("$ZodCheckLessThan",(e,r)=>{xo.init(e,r);const i=I1[typeof r.value];e._zod.onattach.push(o=>{const h=o._zod.bag,N=(r.inclusive?h.maximum:h.exclusiveMaximum)??Number.POSITIVE_INFINITY;r.value<N&&(r.inclusive?h.maximum=r.value:h.exclusiveMaximum=r.value)}),e._zod.check=o=>{(r.inclusive?o.value<=r.value:o.value<r.value)||o.issues.push({origin:i,code:"too_big",maximum:r.value,input:o.value,inclusive:r.inclusive,inst:e,continue:!r.abort})}}),B1=Zt("$ZodCheckGreaterThan",(e,r)=>{xo.init(e,r);const i=I1[typeof r.value];e._zod.onattach.push(o=>{const h=o._zod.bag,N=(r.inclusive?h.minimum:h.exclusiveMinimum)??Number.NEGATIVE_INFINITY;r.value>N&&(r.inclusive?h.minimum=r.value:h.exclusiveMinimum=r.value)}),e._zod.check=o=>{(r.inclusive?o.value>=r.value:o.value>r.value)||o.issues.push({origin:i,code:"too_small",minimum:r.value,input:o.value,inclusive:r.inclusive,inst:e,continue:!r.abort})}}),M6=Zt("$ZodCheckMultipleOf",(e,r)=>{xo.init(e,r),e._zod.onattach.push(i=>{var o;(o=i._zod.bag).multipleOf??(o.multipleOf=r.value)}),e._zod.check=i=>{if(typeof i.value!=typeof r.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof i.value=="bigint"?i.value%r.value===BigInt(0):q4(i.value,r.value)===0)||i.issues.push({origin:typeof i.value,code:"not_multiple_of",divisor:r.value,input:i.value,inst:e,continue:!r.abort})}}),L6=Zt("$ZodCheckNumberFormat",(e,r)=>{xo.init(e,r),r.format=r.format||"float64";const i=r.format?.includes("int"),o=i?"int":"number",[h,N]=G4[r.format];e._zod.onattach.push(B=>{const I=B._zod.bag;I.format=r.format,I.minimum=h,I.maximum=N,i&&(I.pattern=P6)}),e._zod.check=B=>{const I=B.value;if(i){if(!Number.isInteger(I)){B.issues.push({expected:o,format:r.format,code:"invalid_type",continue:!1,input:I,inst:e});return}if(!Number.isSafeInteger(I)){I>0?B.issues.push({input:I,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!r.abort}):B.issues.push({input:I,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!r.abort});return}}I<h&&B.issues.push({origin:"number",input:I,code:"too_small",minimum:h,inclusive:!0,inst:e,continue:!r.abort}),I>N&&B.issues.push({origin:"number",input:I,code:"too_big",maximum:N,inst:e})}}),I6=Zt("$ZodCheckMaxLength",(e,r)=>{var i;xo.init(e,r),(i=e._zod.def).when??(i.when=o=>{const h=o.value;return!mg(h)&&h.length!==void 0}),e._zod.onattach.push(o=>{const h=o._zod.bag.maximum??Number.POSITIVE_INFINITY;r.maximum<h&&(o._zod.bag.maximum=r.maximum)}),e._zod.check=o=>{const h=o.value;if(h.length<=r.maximum)return;const B=fg(h);o.issues.push({origin:B,code:"too_big",maximum:r.maximum,inclusive:!0,input:h,inst:e,continue:!r.abort})}}),j6=Zt("$ZodCheckMinLength",(e,r)=>{var i;xo.init(e,r),(i=e._zod.def).when??(i.when=o=>{const h=o.value;return!mg(h)&&h.length!==void 0}),e._zod.onattach.push(o=>{const h=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;r.minimum>h&&(o._zod.bag.minimum=r.minimum)}),e._zod.check=o=>{const h=o.value;if(h.length>=r.minimum)return;const B=fg(h);o.issues.push({origin:B,code:"too_small",minimum:r.minimum,inclusive:!0,input:h,inst:e,continue:!r.abort})}}),B6=Zt("$ZodCheckLengthEquals",(e,r)=>{var i;xo.init(e,r),(i=e._zod.def).when??(i.when=o=>{const h=o.value;return!mg(h)&&h.length!==void 0}),e._zod.onattach.push(o=>{const h=o._zod.bag;h.minimum=r.length,h.maximum=r.length,h.length=r.length}),e._zod.check=o=>{const h=o.value,N=h.length;if(N===r.length)return;const B=fg(h),I=N>r.length;o.issues.push({origin:B,...I?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!r.abort})}}),Hm=Zt("$ZodCheckStringFormat",(e,r)=>{var i,o;xo.init(e,r),e._zod.onattach.push(h=>{const N=h._zod.bag;N.format=r.format,r.pattern&&(N.patterns??(N.patterns=new Set),N.patterns.add(r.pattern))}),r.pattern?(i=e._zod).check??(i.check=h=>{r.pattern.lastIndex=0,!r.pattern.test(h.value)&&h.issues.push({origin:"string",code:"invalid_format",format:r.format,input:h.value,...r.pattern?{pattern:r.pattern.toString()}:{},inst:e,continue:!r.abort})}):(o=e._zod).check??(o.check=()=>{})}),z6=Zt("$ZodCheckRegex",(e,r)=>{Hm.init(e,r),e._zod.check=i=>{r.pattern.lastIndex=0,!r.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:"regex",input:i.value,pattern:r.pattern.toString(),inst:e,continue:!r.abort})}}),U6=Zt("$ZodCheckLowerCase",(e,r)=>{r.pattern??(r.pattern=O6),Hm.init(e,r)}),H6=Zt("$ZodCheckUpperCase",(e,r)=>{r.pattern??(r.pattern=D6),Hm.init(e,r)}),F6=Zt("$ZodCheckIncludes",(e,r)=>{xo.init(e,r);const i=Wu(r.includes),o=new RegExp(typeof r.position=="number"?`^.{${r.position}}${i}`:i);r.pattern=o,e._zod.onattach.push(h=>{const N=h._zod.bag;N.patterns??(N.patterns=new Set),N.patterns.add(o)}),e._zod.check=h=>{h.value.includes(r.includes,r.position)||h.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:r.includes,input:h.value,inst:e,continue:!r.abort})}}),q6=Zt("$ZodCheckStartsWith",(e,r)=>{xo.init(e,r);const i=new RegExp(`^${Wu(r.prefix)}.*`);r.pattern??(r.pattern=i),e._zod.onattach.push(o=>{const h=o._zod.bag;h.patterns??(h.patterns=new Set),h.patterns.add(i)}),e._zod.check=o=>{o.value.startsWith(r.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:r.prefix,input:o.value,inst:e,continue:!r.abort})}}),V6=Zt("$ZodCheckEndsWith",(e,r)=>{xo.init(e,r);const i=new RegExp(`.*${Wu(r.suffix)}$`);r.pattern??(r.pattern=i),e._zod.onattach.push(o=>{const h=o._zod.bag;h.patterns??(h.patterns=new Set),h.patterns.add(i)}),e._zod.check=o=>{o.value.endsWith(r.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:r.suffix,input:o.value,inst:e,continue:!r.abort})}}),Z6=Zt("$ZodCheckOverwrite",(e,r)=>{xo.init(e,r),e._zod.check=i=>{i.value=r.tx(i.value)}});class $6{constructor(r=[]){this.content=[],this.indent=0,this&&(this.args=r)}indented(r){this.indent+=1,r(this),this.indent-=1}write(r){if(typeof r=="function"){r(this,{execution:"sync"}),r(this,{execution:"async"});return}const o=r.split(`
`).filter(B=>B),h=Math.min(...o.map(B=>B.length-B.trimStart().length)),N=o.map(B=>B.slice(h)).map(B=>" ".repeat(this.indent*2)+B);for(const B of N)this.content.push(B)}compile(){const r=Function,i=this?.args,h=[...(this?.content??[""]).map(N=>`  ${N}`)];return new r(...i,h.join(`
`))}}const W6={major:4,minor:0,patch:15},ui=Zt("$ZodType",(e,r)=>{var i;e??(e={}),e._zod.def=r,e._zod.bag=e._zod.bag||{},e._zod.version=W6;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const h of o)for(const N of h._zod.onattach)N(e);if(o.length===0)(i=e._zod).deferred??(i.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const h=(N,B,I)=>{let k=Zd(N),d;for(const E of B){if(E._zod.def.when){if(!E._zod.def.when(N))continue}else if(k)continue;const _=N.issues.length,b=E._zod.check(N);if(b instanceof Promise&&I?.async===!1)throw new Qd;if(d||b instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await b,N.issues.length!==_&&(k||(k=Zd(N,_)))});else{if(N.issues.length===_)continue;k||(k=Zd(N,_))}}return d?d.then(()=>N):N};e._zod.run=(N,B)=>{const I=e._zod.parse(N,B);if(I instanceof Promise){if(B.async===!1)throw new Qd;return I.then(k=>h(k,o,B))}return h(I,o,B)}}e["~standard"]={validate:h=>{try{const N=i6(e,h);return N.success?{value:N.data}:{issues:N.error?.issues}}catch{return s6(e,h).then(B=>B.success?{value:B.data}:{issues:B.error?.issues})}},vendor:"zod",version:1}}),vg=Zt("$ZodString",(e,r)=>{ui.init(e,r),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??T6(e._zod.bag),e._zod.parse=(i,o)=>{if(r.coerce)try{i.value=String(i.value)}catch{}return typeof i.value=="string"||i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:e}),i}}),di=Zt("$ZodStringFormat",(e,r)=>{Hm.init(e,r),vg.init(e,r)}),G6=Zt("$ZodGUID",(e,r)=>{r.pattern??(r.pattern=h6),di.init(e,r)}),K6=Zt("$ZodUUID",(e,r)=>{if(r.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[r.version];if(o===void 0)throw new Error(`Invalid UUID version: "${r.version}"`);r.pattern??(r.pattern=Ly(o))}else r.pattern??(r.pattern=Ly());di.init(e,r)}),Y6=Zt("$ZodEmail",(e,r)=>{r.pattern??(r.pattern=f6),di.init(e,r)}),Q6=Zt("$ZodURL",(e,r)=>{di.init(e,r),e._zod.check=i=>{try{const o=i.value.trim(),h=new URL(o);r.hostname&&(r.hostname.lastIndex=0,r.hostname.test(h.hostname)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:S6.source,input:i.value,inst:e,continue:!r.abort})),r.protocol&&(r.protocol.lastIndex=0,r.protocol.test(h.protocol.endsWith(":")?h.protocol.slice(0,-1):h.protocol)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:r.protocol.source,input:i.value,inst:e,continue:!r.abort})),r.normalize?i.value=h.href:i.value=o;return}catch{i.issues.push({code:"invalid_format",format:"url",input:i.value,inst:e,continue:!r.abort})}}}),J6=Zt("$ZodEmoji",(e,r)=>{r.pattern??(r.pattern=v6()),di.init(e,r)}),X6=Zt("$ZodNanoID",(e,r)=>{r.pattern??(r.pattern=p6),di.init(e,r)}),e3=Zt("$ZodCUID",(e,r)=>{r.pattern??(r.pattern=o6),di.init(e,r)}),t3=Zt("$ZodCUID2",(e,r)=>{r.pattern??(r.pattern=c6),di.init(e,r)}),n3=Zt("$ZodULID",(e,r)=>{r.pattern??(r.pattern=l6),di.init(e,r)}),r3=Zt("$ZodXID",(e,r)=>{r.pattern??(r.pattern=u6),di.init(e,r)}),a3=Zt("$ZodKSUID",(e,r)=>{r.pattern??(r.pattern=d6),di.init(e,r)}),i3=Zt("$ZodISODateTime",(e,r)=>{r.pattern??(r.pattern=C6(r)),di.init(e,r)}),s3=Zt("$ZodISODate",(e,r)=>{r.pattern??(r.pattern=R6),di.init(e,r)}),o3=Zt("$ZodISOTime",(e,r)=>{r.pattern??(r.pattern=k6(r)),di.init(e,r)}),c3=Zt("$ZodISODuration",(e,r)=>{r.pattern??(r.pattern=m6),di.init(e,r)}),l3=Zt("$ZodIPv4",(e,r)=>{r.pattern??(r.pattern=y6),di.init(e,r),e._zod.onattach.push(i=>{const o=i._zod.bag;o.format="ipv4"})}),u3=Zt("$ZodIPv6",(e,r)=>{r.pattern??(r.pattern=_6),di.init(e,r),e._zod.onattach.push(i=>{const o=i._zod.bag;o.format="ipv6"}),e._zod.check=i=>{try{new URL(`http://[${i.value}]`)}catch{i.issues.push({code:"invalid_format",format:"ipv6",input:i.value,inst:e,continue:!r.abort})}}}),d3=Zt("$ZodCIDRv4",(e,r)=>{r.pattern??(r.pattern=b6),di.init(e,r)}),p3=Zt("$ZodCIDRv6",(e,r)=>{r.pattern??(r.pattern=w6),di.init(e,r),e._zod.check=i=>{const[o,h]=i.value.split("/");try{if(!h)throw new Error;const N=Number(h);if(`${N}`!==h)throw new Error;if(N<0||N>128)throw new Error;new URL(`http://[${o}]`)}catch{i.issues.push({code:"invalid_format",format:"cidrv6",input:i.value,inst:e,continue:!r.abort})}}});function z1(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const m3=Zt("$ZodBase64",(e,r)=>{r.pattern??(r.pattern=E6),di.init(e,r),e._zod.onattach.push(i=>{i._zod.bag.contentEncoding="base64"}),e._zod.check=i=>{z1(i.value)||i.issues.push({code:"invalid_format",format:"base64",input:i.value,inst:e,continue:!r.abort})}});function h3(e){if(!D1.test(e))return!1;const r=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),i=r.padEnd(Math.ceil(r.length/4)*4,"=");return z1(i)}const f3=Zt("$ZodBase64URL",(e,r)=>{r.pattern??(r.pattern=D1),di.init(e,r),e._zod.onattach.push(i=>{i._zod.bag.contentEncoding="base64url"}),e._zod.check=i=>{h3(i.value)||i.issues.push({code:"invalid_format",format:"base64url",input:i.value,inst:e,continue:!r.abort})}}),g3=Zt("$ZodE164",(e,r)=>{r.pattern??(r.pattern=x6),di.init(e,r)});function v3(e,r=null){try{const i=e.split(".");if(i.length!==3)return!1;const[o]=i;if(!o)return!1;const h=JSON.parse(atob(o));return!("typ"in h&&h?.typ!=="JWT"||!h.alg||r&&(!("alg"in h)||h.alg!==r))}catch{return!1}}const y3=Zt("$ZodJWT",(e,r)=>{di.init(e,r),e._zod.check=i=>{v3(i.value,r.alg)||i.issues.push({code:"invalid_format",format:"jwt",input:i.value,inst:e,continue:!r.abort})}}),U1=Zt("$ZodNumber",(e,r)=>{ui.init(e,r),e._zod.pattern=e._zod.bag.pattern??N6,e._zod.parse=(i,o)=>{if(r.coerce)try{i.value=Number(i.value)}catch{}const h=i.value;if(typeof h=="number"&&!Number.isNaN(h)&&Number.isFinite(h))return i;const N=typeof h=="number"?Number.isNaN(h)?"NaN":Number.isFinite(h)?void 0:"Infinity":void 0;return i.issues.push({expected:"number",code:"invalid_type",input:h,inst:e,...N?{received:N}:{}}),i}}),_3=Zt("$ZodNumber",(e,r)=>{L6.init(e,r),U1.init(e,r)}),b3=Zt("$ZodBoolean",(e,r)=>{ui.init(e,r),e._zod.pattern=A6,e._zod.parse=(i,o)=>{if(r.coerce)try{i.value=!!i.value}catch{}const h=i.value;return typeof h=="boolean"||i.issues.push({expected:"boolean",code:"invalid_type",input:h,inst:e}),i}}),w3=Zt("$ZodAny",(e,r)=>{ui.init(e,r),e._zod.parse=i=>i}),E3=Zt("$ZodUnknown",(e,r)=>{ui.init(e,r),e._zod.parse=i=>i}),S3=Zt("$ZodNever",(e,r)=>{ui.init(e,r),e._zod.parse=(i,o)=>(i.issues.push({expected:"never",code:"invalid_type",input:i.value,inst:e}),i)});function Iy(e,r,i){e.issues.length&&r.issues.push(...C1(i,e.issues)),r.value[i]=e.value}const x3=Zt("$ZodArray",(e,r)=>{ui.init(e,r),e._zod.parse=(i,o)=>{const h=i.value;if(!Array.isArray(h))return i.issues.push({expected:"array",code:"invalid_type",input:h,inst:e}),i;i.value=Array(h.length);const N=[];for(let B=0;B<h.length;B++){const I=h[B],k=r.element._zod.run({value:I,issues:[]},o);k instanceof Promise?N.push(k.then(d=>Iy(d,i,B))):Iy(k,i,B)}return N.length?Promise.all(N).then(()=>i):i}});function nm(e,r,i,o){e.issues.length&&r.issues.push(...C1(i,e.issues)),e.value===void 0?i in o&&(r.value[i]=void 0):r.value[i]=e.value}const R3=Zt("$ZodObject",(e,r)=>{ui.init(e,r);const i=R1(()=>{const _=Object.keys(r.shape);for(const T of _)if(!(r.shape[T]instanceof ui))throw new Error(`Invalid element at key "${T}": expected a Zod schema`);const b=W4(r.shape);return{shape:r.shape,keys:_,keySet:new Set(_),numKeys:_.length,optionalKeys:new Set(b)}});ei(e._zod,"propValues",()=>{const _=r.shape,b={};for(const T in _){const v=_[T]._zod;if(v.values){b[T]??(b[T]=new Set);for(const f of v.values)b[T].add(f)}}return b});const o=_=>{const b=new $6(["shape","payload","ctx"]),T=i.value,v=F=>{const m=My(F);return`shape[${m}]._zod.run({ value: input[${m}], issues: [] }, ctx)`};b.write("const input = payload.value;");const f=Object.create(null);let R=0;for(const F of T.keys)f[F]=`key_${R++}`;b.write("const newResult = {}");for(const F of T.keys){const m=f[F],P=My(F);b.write(`const ${m} = ${v(F)};`),b.write(`
        if (${m}.issues.length) {
          payload.issues = payload.issues.concat(${m}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${P}, ...iss.path] : [${P}]
          })));
        }
        
        if (${m}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${m}.value;
        }
      `)}b.write("payload.value = newResult;"),b.write("return payload;");const g=b.compile();return(F,m)=>g(_,F,m)};let h;const N=jf,B=!x1.jitless,k=B&&Z4.value,d=r.catchall;let E;e._zod.parse=(_,b)=>{E??(E=i.value);const T=_.value;if(!N(T))return _.issues.push({expected:"object",code:"invalid_type",input:T,inst:e}),_;const v=[];if(B&&k&&b?.async===!1&&b.jitless!==!0)h||(h=o(r.shape)),_=h(_,b);else{_.value={};const m=E.shape;for(const P of E.keys){const H=m[P]._zod.run({value:T[P],issues:[]},b);H instanceof Promise?v.push(H.then(x=>nm(x,_,P,T))):nm(H,_,P,T)}}if(!d)return v.length?Promise.all(v).then(()=>_):_;const f=[],R=E.keySet,g=d._zod,F=g.def.type;for(const m of Object.keys(T)){if(R.has(m))continue;if(F==="never"){f.push(m);continue}const P=g.run({value:T[m],issues:[]},b);P instanceof Promise?v.push(P.then(S=>nm(S,_,m,T))):nm(P,_,m,T)}return f.length&&_.issues.push({code:"unrecognized_keys",keys:f,input:T,inst:e}),v.length?Promise.all(v).then(()=>_):_}});function jy(e,r,i,o){for(const N of e)if(N.issues.length===0)return r.value=N.value,r;const h=e.filter(N=>!Zd(N));return h.length===1?(r.value=h[0].value,h[0]):(r.issues.push({code:"invalid_union",input:r.value,inst:i,errors:e.map(N=>N.issues.map(B=>tu(B,o,eu())))}),r)}const k3=Zt("$ZodUnion",(e,r)=>{ui.init(e,r),ei(e._zod,"optin",()=>r.options.some(h=>h._zod.optin==="optional")?"optional":void 0),ei(e._zod,"optout",()=>r.options.some(h=>h._zod.optout==="optional")?"optional":void 0),ei(e._zod,"values",()=>{if(r.options.every(h=>h._zod.values))return new Set(r.options.flatMap(h=>Array.from(h._zod.values)))}),ei(e._zod,"pattern",()=>{if(r.options.every(h=>h._zod.pattern)){const h=r.options.map(N=>N._zod.pattern);return new RegExp(`^(${h.map(N=>hg(N.source)).join("|")})$`)}});const i=r.options.length===1,o=r.options[0]._zod.run;e._zod.parse=(h,N)=>{if(i)return o(h,N);let B=!1;const I=[];for(const k of r.options){const d=k._zod.run({value:h.value,issues:[]},N);if(d instanceof Promise)I.push(d),B=!0;else{if(d.issues.length===0)return d;I.push(d)}}return B?Promise.all(I).then(k=>jy(k,h,e,N)):jy(I,h,e,N)}}),C3=Zt("$ZodIntersection",(e,r)=>{ui.init(e,r),e._zod.parse=(i,o)=>{const h=i.value,N=r.left._zod.run({value:h,issues:[]},o),B=r.right._zod.run({value:h,issues:[]},o);return N instanceof Promise||B instanceof Promise?Promise.all([N,B]).then(([k,d])=>By(i,k,d)):By(i,N,B)}});function zf(e,r){if(e===r)return{valid:!0,data:e};if(e instanceof Date&&r instanceof Date&&+e==+r)return{valid:!0,data:e};if(Bf(e)&&Bf(r)){const i=Object.keys(r),o=Object.keys(e).filter(N=>i.indexOf(N)!==-1),h={...e,...r};for(const N of o){const B=zf(e[N],r[N]);if(!B.valid)return{valid:!1,mergeErrorPath:[N,...B.mergeErrorPath]};h[N]=B.data}return{valid:!0,data:h}}if(Array.isArray(e)&&Array.isArray(r)){if(e.length!==r.length)return{valid:!1,mergeErrorPath:[]};const i=[];for(let o=0;o<e.length;o++){const h=e[o],N=r[o],B=zf(h,N);if(!B.valid)return{valid:!1,mergeErrorPath:[o,...B.mergeErrorPath]};i.push(B.data)}return{valid:!0,data:i}}return{valid:!1,mergeErrorPath:[]}}function By(e,r,i){if(r.issues.length&&e.issues.push(...r.issues),i.issues.length&&e.issues.push(...i.issues),Zd(e))return e;const o=zf(r.value,i.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}const T3=Zt("$ZodEnum",(e,r)=>{ui.init(e,r);const i=F4(r.entries),o=new Set(i);e._zod.values=o,e._zod.pattern=new RegExp(`^(${i.filter(h=>$4.has(typeof h)).map(h=>typeof h=="string"?Wu(h):h.toString()).join("|")})$`),e._zod.parse=(h,N)=>{const B=h.value;return o.has(B)||h.issues.push({code:"invalid_value",values:i,input:B,inst:e}),h}}),P3=Zt("$ZodLiteral",(e,r)=>{if(ui.init(e,r),r.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(r.values),e._zod.pattern=new RegExp(`^(${r.values.map(i=>typeof i=="string"?Wu(i):i?Wu(i.toString()):String(i)).join("|")})$`),e._zod.parse=(i,o)=>{const h=i.value;return e._zod.values.has(h)||i.issues.push({code:"invalid_value",values:r.values,input:h,inst:e}),i}}),N3=Zt("$ZodTransform",(e,r)=>{ui.init(e,r),e._zod.parse=(i,o)=>{const h=r.transform(i.value,i);if(o.async)return(h instanceof Promise?h:Promise.resolve(h)).then(B=>(i.value=B,i));if(h instanceof Promise)throw new Qd;return i.value=h,i}});function zy(e,r){return e.issues.length&&r===void 0?{issues:[],value:void 0}:e}const A3=Zt("$ZodOptional",(e,r)=>{ui.init(e,r),e._zod.optin="optional",e._zod.optout="optional",ei(e._zod,"values",()=>r.innerType._zod.values?new Set([...r.innerType._zod.values,void 0]):void 0),ei(e._zod,"pattern",()=>{const i=r.innerType._zod.pattern;return i?new RegExp(`^(${hg(i.source)})?$`):void 0}),e._zod.parse=(i,o)=>{if(r.innerType._zod.optin==="optional"){const h=r.innerType._zod.run(i,o);return h instanceof Promise?h.then(N=>zy(N,i.value)):zy(h,i.value)}return i.value===void 0?i:r.innerType._zod.run(i,o)}}),O3=Zt("$ZodNullable",(e,r)=>{ui.init(e,r),ei(e._zod,"optin",()=>r.innerType._zod.optin),ei(e._zod,"optout",()=>r.innerType._zod.optout),ei(e._zod,"pattern",()=>{const i=r.innerType._zod.pattern;return i?new RegExp(`^(${hg(i.source)}|null)$`):void 0}),ei(e._zod,"values",()=>r.innerType._zod.values?new Set([...r.innerType._zod.values,null]):void 0),e._zod.parse=(i,o)=>i.value===null?i:r.innerType._zod.run(i,o)}),D3=Zt("$ZodDefault",(e,r)=>{ui.init(e,r),e._zod.optin="optional",ei(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(i,o)=>{if(i.value===void 0)return i.value=r.defaultValue,i;const h=r.innerType._zod.run(i,o);return h instanceof Promise?h.then(N=>Uy(N,r)):Uy(h,r)}});function Uy(e,r){return e.value===void 0&&(e.value=r.defaultValue),e}const M3=Zt("$ZodPrefault",(e,r)=>{ui.init(e,r),e._zod.optin="optional",ei(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(i,o)=>(i.value===void 0&&(i.value=r.defaultValue),r.innerType._zod.run(i,o))}),L3=Zt("$ZodNonOptional",(e,r)=>{ui.init(e,r),ei(e._zod,"values",()=>{const i=r.innerType._zod.values;return i?new Set([...i].filter(o=>o!==void 0)):void 0}),e._zod.parse=(i,o)=>{const h=r.innerType._zod.run(i,o);return h instanceof Promise?h.then(N=>Hy(N,e)):Hy(h,e)}});function Hy(e,r){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:r}),e}const I3=Zt("$ZodCatch",(e,r)=>{ui.init(e,r),ei(e._zod,"optin",()=>r.innerType._zod.optin),ei(e._zod,"optout",()=>r.innerType._zod.optout),ei(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(i,o)=>{const h=r.innerType._zod.run(i,o);return h instanceof Promise?h.then(N=>(i.value=N.value,N.issues.length&&(i.value=r.catchValue({...i,error:{issues:N.issues.map(B=>tu(B,o,eu()))},input:i.value}),i.issues=[]),i)):(i.value=h.value,h.issues.length&&(i.value=r.catchValue({...i,error:{issues:h.issues.map(N=>tu(N,o,eu()))},input:i.value}),i.issues=[]),i)}}),j3=Zt("$ZodPipe",(e,r)=>{ui.init(e,r),ei(e._zod,"values",()=>r.in._zod.values),ei(e._zod,"optin",()=>r.in._zod.optin),ei(e._zod,"optout",()=>r.out._zod.optout),ei(e._zod,"propValues",()=>r.in._zod.propValues),e._zod.parse=(i,o)=>{const h=r.in._zod.run(i,o);return h instanceof Promise?h.then(N=>Fy(N,r,o)):Fy(h,r,o)}});function Fy(e,r,i){return e.issues.length?e:r.out._zod.run({value:e.value,issues:e.issues},i)}const B3=Zt("$ZodReadonly",(e,r)=>{ui.init(e,r),ei(e._zod,"propValues",()=>r.innerType._zod.propValues),ei(e._zod,"values",()=>r.innerType._zod.values),ei(e._zod,"optin",()=>r.innerType._zod.optin),ei(e._zod,"optout",()=>r.innerType._zod.optout),e._zod.parse=(i,o)=>{const h=r.innerType._zod.run(i,o);return h instanceof Promise?h.then(qy):qy(h)}});function qy(e){return e.value=Object.freeze(e.value),e}const z3=Zt("$ZodCustom",(e,r)=>{xo.init(e,r),ui.init(e,r),e._zod.parse=(i,o)=>i,e._zod.check=i=>{const o=i.value,h=r.fn(o);if(h instanceof Promise)return h.then(N=>Vy(N,i,o,e));Vy(h,i,o,e)}});function Vy(e,r,i,o){if(!e){const h={code:"custom",input:i,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(h.params=o._zod.def.params),r.issues.push(Jd(h))}}class U3{constructor(){this._map=new Map,this._idmap=new Map}add(r,...i){const o=i[0];if(this._map.set(r,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,r)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(r){const i=this._map.get(r);return i&&typeof i=="object"&&"id"in i&&this._idmap.delete(i.id),this._map.delete(r),this}get(r){const i=r._zod.parent;if(i){const o={...this.get(i)??{}};delete o.id;const h={...o,...this._map.get(r)};return Object.keys(h).length?h:void 0}return this._map.get(r)}has(r){return this._map.has(r)}}function H3(){return new U3}const rm=H3();function F3(e,r){return new e({type:"string",...Er(r)})}function q3(e,r){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Er(r)})}function Zy(e,r){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Er(r)})}function V3(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Er(r)})}function Z3(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Er(r)})}function $3(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Er(r)})}function W3(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Er(r)})}function G3(e,r){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Er(r)})}function K3(e,r){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Er(r)})}function Y3(e,r){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Er(r)})}function Q3(e,r){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Er(r)})}function J3(e,r){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Er(r)})}function X3(e,r){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Er(r)})}function eP(e,r){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Er(r)})}function tP(e,r){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Er(r)})}function nP(e,r){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Er(r)})}function rP(e,r){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Er(r)})}function aP(e,r){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Er(r)})}function iP(e,r){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Er(r)})}function sP(e,r){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Er(r)})}function oP(e,r){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Er(r)})}function cP(e,r){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Er(r)})}function lP(e,r){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Er(r)})}function uP(e,r){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Er(r)})}function dP(e,r){return new e({type:"string",format:"date",check:"string_format",...Er(r)})}function pP(e,r){return new e({type:"string",format:"time",check:"string_format",precision:null,...Er(r)})}function mP(e,r){return new e({type:"string",format:"duration",check:"string_format",...Er(r)})}function hP(e,r){return new e({type:"number",coerce:!0,checks:[],...Er(r)})}function fP(e,r){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Er(r)})}function gP(e,r){return new e({type:"boolean",...Er(r)})}function vP(e){return new e({type:"any"})}function yP(e){return new e({type:"unknown"})}function _P(e,r){return new e({type:"never",...Er(r)})}function $y(e,r){return new j1({check:"less_than",...Er(r),value:e,inclusive:!1})}function gf(e,r){return new j1({check:"less_than",...Er(r),value:e,inclusive:!0})}function Wy(e,r){return new B1({check:"greater_than",...Er(r),value:e,inclusive:!1})}function vf(e,r){return new B1({check:"greater_than",...Er(r),value:e,inclusive:!0})}function Gy(e,r){return new M6({check:"multiple_of",...Er(r),value:e})}function H1(e,r){return new I6({check:"max_length",...Er(r),maximum:e})}function xm(e,r){return new j6({check:"min_length",...Er(r),minimum:e})}function F1(e,r){return new B6({check:"length_equals",...Er(r),length:e})}function bP(e,r){return new z6({check:"string_format",format:"regex",...Er(r),pattern:e})}function wP(e){return new U6({check:"string_format",format:"lowercase",...Er(e)})}function EP(e){return new H6({check:"string_format",format:"uppercase",...Er(e)})}function SP(e,r){return new F6({check:"string_format",format:"includes",...Er(r),includes:e})}function xP(e,r){return new q6({check:"string_format",format:"starts_with",...Er(r),prefix:e})}function RP(e,r){return new V6({check:"string_format",format:"ends_with",...Er(r),suffix:e})}function cp(e){return new Z6({check:"overwrite",tx:e})}function kP(e){return cp(r=>r.normalize(e))}function CP(){return cp(e=>e.trim())}function TP(){return cp(e=>e.toLowerCase())}function PP(){return cp(e=>e.toUpperCase())}function NP(e,r,i){return new e({type:"array",element:r,...Er(i)})}function AP(e,r,i){return new e({type:"custom",check:"custom",fn:r,...Er(i)})}function OP(e){const r=DP(i=>(i.addIssue=o=>{if(typeof o=="string")i.issues.push(Jd(o,i.value,r._zod.def));else{const h=o;h.fatal&&(h.continue=!1),h.code??(h.code="custom"),h.input??(h.input=i.value),h.inst??(h.inst=r),h.continue??(h.continue=!r._zod.def.abort),i.issues.push(Jd(h))}},e(i.value,i)));return r}function DP(e,r){const i=new xo({check:"custom",...Er(r)});return i._zod.check=e,i}function Ky(e,r){try{var i=e()}catch(o){return r(o)}return i&&i.then?i.then(void 0,r):i}function MP(e,r){for(var i={};e.length;){var o=e[0],h=o.code,N=o.message,B=o.path.join(".");if(!i[B])if("unionErrors"in o){var I=o.unionErrors[0].errors[0];i[B]={message:I.message,type:I.code}}else i[B]={message:N,type:h};if("unionErrors"in o&&o.unionErrors.forEach(function(E){return E.errors.forEach(function(_){return e.push(_)})}),r){var k=i[B].types,d=k&&k[o.code];i[B]=ug(B,r,i,h,d?[].concat(d,o.message):o.message)}e.shift()}return i}function LP(e,r){for(var i={};e.length;){var o=e[0],h=o.code,N=o.message,B=o.path.join(".");if(!i[B])if(o.code==="invalid_union"&&o.errors.length>0){var I=o.errors[0][0];i[B]={message:I.message,type:I.code}}else i[B]={message:N,type:h};if(o.code==="invalid_union"&&o.errors.forEach(function(E){return E.forEach(function(_){return e.push(_)})}),r){var k=i[B].types,d=k&&k[o.code];i[B]=ug(B,r,i,h,d?[].concat(d,o.message):o.message)}e.shift()}return i}function ou(e,r,i){if(i===void 0&&(i={}),function(o){return"_def"in o&&typeof o._def=="object"&&"typeName"in o._def}(e))return function(o,h,N){try{return Promise.resolve(Ky(function(){return Promise.resolve(e[i.mode==="sync"?"parse":"parseAsync"](o,r)).then(function(B){return N.shouldUseNativeValidation&&Lf({},N),{errors:{},values:i.raw?Object.assign({},o):B}})},function(B){if(function(I){return Array.isArray(I?.issues)}(B))return{values:{},errors:Ay(MP(B.errors,!N.shouldUseNativeValidation&&N.criteriaMode==="all"),N)};throw B}))}catch(B){return Promise.reject(B)}};if(function(o){return"_zod"in o&&typeof o._zod=="object"}(e))return function(o,h,N){try{return Promise.resolve(Ky(function(){return Promise.resolve((i.mode==="sync"?r6:a6)(e,o,r)).then(function(B){return N.shouldUseNativeValidation&&Lf({},N),{errors:{},values:i.raw?Object.assign({},o):B}})},function(B){if(function(I){return I instanceof gg}(B))return{values:{},errors:Ay(LP(B.issues,!N.shouldUseNativeValidation&&N.criteriaMode==="all"),N)};throw B}))}catch(B){return Promise.reject(B)}};throw new Error("Invalid input: not a Zod schema")}const IP=Zt("ZodISODateTime",(e,r)=>{i3.init(e,r),wi.init(e,r)});function jP(e){return uP(IP,e)}const BP=Zt("ZodISODate",(e,r)=>{s3.init(e,r),wi.init(e,r)});function zP(e){return dP(BP,e)}const UP=Zt("ZodISOTime",(e,r)=>{o3.init(e,r),wi.init(e,r)});function HP(e){return pP(UP,e)}const FP=Zt("ZodISODuration",(e,r)=>{c3.init(e,r),wi.init(e,r)});function qP(e){return mP(FP,e)}const VP=(e,r)=>{gg.init(e,r),e.name="ZodError",Object.defineProperties(e,{format:{value:i=>n6(e,i)},flatten:{value:i=>t6(e,i)},addIssue:{value:i=>{e.issues.push(i),e.message=JSON.stringify(e.issues,If,2)}},addIssues:{value:i=>{e.issues.push(...i),e.message=JSON.stringify(e.issues,If,2)}},isEmpty:{get(){return e.issues.length===0}}})},Fm=Zt("ZodError",VP,{Parent:Error}),ZP=P1(Fm),$P=N1(Fm),WP=A1(Fm),GP=O1(Fm),Ni=Zt("ZodType",(e,r)=>(ui.init(e,r),e.def=r,Object.defineProperty(e,"_def",{value:r}),e.check=(...i)=>e.clone({...r,checks:[...r.checks??[],...i.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]}),e.clone=(i,o)=>su(e,i,o),e.brand=()=>e,e.register=(i,o)=>(i.add(e,o),e),e.parse=(i,o)=>ZP(e,i,o,{callee:e.parse}),e.safeParse=(i,o)=>WP(e,i,o),e.parseAsync=async(i,o)=>$P(e,i,o,{callee:e.parseAsync}),e.safeParseAsync=async(i,o)=>GP(e,i,o),e.spa=e.safeParseAsync,e.refine=(i,o)=>e.check(UN(i,o)),e.superRefine=i=>e.check(HN(i)),e.overwrite=i=>e.check(cp(i)),e.optional=()=>e_(e),e.nullable=()=>t_(e),e.nullish=()=>e_(t_(e)),e.nonoptional=i=>DN(e,i),e.array=()=>Z1(e),e.or=i=>EN([e,i]),e.and=i=>xN(e,i),e.transform=i=>n_(e,CN(i)),e.default=i=>NN(e,i),e.prefault=i=>ON(e,i),e.catch=i=>LN(e,i),e.pipe=i=>n_(e,i),e.readonly=()=>BN(e),e.describe=i=>{const o=e.clone();return rm.add(o,{description:i}),o},Object.defineProperty(e,"description",{get(){return rm.get(e)?.description},configurable:!0}),e.meta=(...i)=>{if(i.length===0)return rm.get(e);const o=e.clone();return rm.add(o,i[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),q1=Zt("_ZodString",(e,r)=>{vg.init(e,r),Ni.init(e,r);const i=e._zod.bag;e.format=i.format??null,e.minLength=i.minimum??null,e.maxLength=i.maximum??null,e.regex=(...o)=>e.check(bP(...o)),e.includes=(...o)=>e.check(SP(...o)),e.startsWith=(...o)=>e.check(xP(...o)),e.endsWith=(...o)=>e.check(RP(...o)),e.min=(...o)=>e.check(xm(...o)),e.max=(...o)=>e.check(H1(...o)),e.length=(...o)=>e.check(F1(...o)),e.nonempty=(...o)=>e.check(xm(1,...o)),e.lowercase=o=>e.check(wP(o)),e.uppercase=o=>e.check(EP(o)),e.trim=()=>e.check(CP()),e.normalize=(...o)=>e.check(kP(...o)),e.toLowerCase=()=>e.check(TP()),e.toUpperCase=()=>e.check(PP())}),KP=Zt("ZodString",(e,r)=>{vg.init(e,r),q1.init(e,r),e.email=i=>e.check(q3(YP,i)),e.url=i=>e.check(G3(QP,i)),e.jwt=i=>e.check(lP(pN,i)),e.emoji=i=>e.check(K3(JP,i)),e.guid=i=>e.check(Zy(Yy,i)),e.uuid=i=>e.check(V3(am,i)),e.uuidv4=i=>e.check(Z3(am,i)),e.uuidv6=i=>e.check($3(am,i)),e.uuidv7=i=>e.check(W3(am,i)),e.nanoid=i=>e.check(Y3(XP,i)),e.guid=i=>e.check(Zy(Yy,i)),e.cuid=i=>e.check(Q3(eN,i)),e.cuid2=i=>e.check(J3(tN,i)),e.ulid=i=>e.check(X3(nN,i)),e.base64=i=>e.check(sP(lN,i)),e.base64url=i=>e.check(oP(uN,i)),e.xid=i=>e.check(eP(rN,i)),e.ksuid=i=>e.check(tP(aN,i)),e.ipv4=i=>e.check(nP(iN,i)),e.ipv6=i=>e.check(rP(sN,i)),e.cidrv4=i=>e.check(aP(oN,i)),e.cidrv6=i=>e.check(iP(cN,i)),e.e164=i=>e.check(cP(dN,i)),e.datetime=i=>e.check(jP(i)),e.date=i=>e.check(zP(i)),e.time=i=>e.check(HP(i)),e.duration=i=>e.check(qP(i))});function fa(e){return F3(KP,e)}const wi=Zt("ZodStringFormat",(e,r)=>{di.init(e,r),q1.init(e,r)}),YP=Zt("ZodEmail",(e,r)=>{Y6.init(e,r),wi.init(e,r)}),Yy=Zt("ZodGUID",(e,r)=>{G6.init(e,r),wi.init(e,r)}),am=Zt("ZodUUID",(e,r)=>{K6.init(e,r),wi.init(e,r)}),QP=Zt("ZodURL",(e,r)=>{Q6.init(e,r),wi.init(e,r)}),JP=Zt("ZodEmoji",(e,r)=>{J6.init(e,r),wi.init(e,r)}),XP=Zt("ZodNanoID",(e,r)=>{X6.init(e,r),wi.init(e,r)}),eN=Zt("ZodCUID",(e,r)=>{e3.init(e,r),wi.init(e,r)}),tN=Zt("ZodCUID2",(e,r)=>{t3.init(e,r),wi.init(e,r)}),nN=Zt("ZodULID",(e,r)=>{n3.init(e,r),wi.init(e,r)}),rN=Zt("ZodXID",(e,r)=>{r3.init(e,r),wi.init(e,r)}),aN=Zt("ZodKSUID",(e,r)=>{a3.init(e,r),wi.init(e,r)}),iN=Zt("ZodIPv4",(e,r)=>{l3.init(e,r),wi.init(e,r)}),sN=Zt("ZodIPv6",(e,r)=>{u3.init(e,r),wi.init(e,r)}),oN=Zt("ZodCIDRv4",(e,r)=>{d3.init(e,r),wi.init(e,r)}),cN=Zt("ZodCIDRv6",(e,r)=>{p3.init(e,r),wi.init(e,r)}),lN=Zt("ZodBase64",(e,r)=>{m3.init(e,r),wi.init(e,r)}),uN=Zt("ZodBase64URL",(e,r)=>{f3.init(e,r),wi.init(e,r)}),dN=Zt("ZodE164",(e,r)=>{g3.init(e,r),wi.init(e,r)}),pN=Zt("ZodJWT",(e,r)=>{y3.init(e,r),wi.init(e,r)}),V1=Zt("ZodNumber",(e,r)=>{U1.init(e,r),Ni.init(e,r),e.gt=(o,h)=>e.check(Wy(o,h)),e.gte=(o,h)=>e.check(vf(o,h)),e.min=(o,h)=>e.check(vf(o,h)),e.lt=(o,h)=>e.check($y(o,h)),e.lte=(o,h)=>e.check(gf(o,h)),e.max=(o,h)=>e.check(gf(o,h)),e.int=o=>e.check(Qy(o)),e.safe=o=>e.check(Qy(o)),e.positive=o=>e.check(Wy(0,o)),e.nonnegative=o=>e.check(vf(0,o)),e.negative=o=>e.check($y(0,o)),e.nonpositive=o=>e.check(gf(0,o)),e.multipleOf=(o,h)=>e.check(Gy(o,h)),e.step=(o,h)=>e.check(Gy(o,h)),e.finite=()=>e;const i=e._zod.bag;e.minValue=Math.max(i.minimum??Number.NEGATIVE_INFINITY,i.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(i.maximum??Number.POSITIVE_INFINITY,i.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(i.format??"").includes("int")||Number.isSafeInteger(i.multipleOf??.5),e.isFinite=!0,e.format=i.format??null}),mN=Zt("ZodNumberFormat",(e,r)=>{_3.init(e,r),V1.init(e,r)});function Qy(e){return fP(mN,e)}const hN=Zt("ZodBoolean",(e,r)=>{b3.init(e,r),Ni.init(e,r)});function Vu(e){return gP(hN,e)}const fN=Zt("ZodAny",(e,r)=>{w3.init(e,r),Ni.init(e,r)});function Jy(){return vP(fN)}const gN=Zt("ZodUnknown",(e,r)=>{E3.init(e,r),Ni.init(e,r)});function Xy(){return yP(gN)}const vN=Zt("ZodNever",(e,r)=>{S3.init(e,r),Ni.init(e,r)});function yN(e){return _P(vN,e)}const _N=Zt("ZodArray",(e,r)=>{x3.init(e,r),Ni.init(e,r),e.element=r.element,e.min=(i,o)=>e.check(xm(i,o)),e.nonempty=i=>e.check(xm(1,i)),e.max=(i,o)=>e.check(H1(i,o)),e.length=(i,o)=>e.check(F1(i,o)),e.unwrap=()=>e.element});function Z1(e,r){return NP(_N,e,r)}const bN=Zt("ZodObject",(e,r)=>{R3.init(e,r),Ni.init(e,r),ei(e,"shape",()=>r.shape),e.keyof=()=>Rm(Object.keys(e._zod.def.shape)),e.catchall=i=>e.clone({...e._zod.def,catchall:i}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Xy()}),e.loose=()=>e.clone({...e._zod.def,catchall:Xy()}),e.strict=()=>e.clone({...e._zod.def,catchall:yN()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=i=>Q4(e,i),e.merge=i=>J4(e,i),e.pick=i=>K4(e,i),e.omit=i=>Y4(e,i),e.partial=(...i)=>X4(W1,e,i[0]),e.required=(...i)=>e6(G1,e,i[0])});function al(e,r){const i={type:"object",get shape(){return iu(this,"shape",e?V4(e):{}),this.shape},...Er(r)};return new bN(i)}const wN=Zt("ZodUnion",(e,r)=>{k3.init(e,r),Ni.init(e,r),e.options=r.options});function EN(e,r){return new wN({type:"union",options:e,...Er(r)})}const SN=Zt("ZodIntersection",(e,r)=>{C3.init(e,r),Ni.init(e,r)});function xN(e,r){return new SN({type:"intersection",left:e,right:r})}const Uf=Zt("ZodEnum",(e,r)=>{T3.init(e,r),Ni.init(e,r),e.enum=r.entries,e.options=Object.values(r.entries);const i=new Set(Object.keys(r.entries));e.extract=(o,h)=>{const N={};for(const B of o)if(i.has(B))N[B]=r.entries[B];else throw new Error(`Key ${B} not found in enum`);return new Uf({...r,checks:[],...Er(h),entries:N})},e.exclude=(o,h)=>{const N={...r.entries};for(const B of o)if(i.has(B))delete N[B];else throw new Error(`Key ${B} not found in enum`);return new Uf({...r,checks:[],...Er(h),entries:N})}});function Rm(e,r){const i=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Uf({type:"enum",entries:i,...Er(r)})}const RN=Zt("ZodLiteral",(e,r)=>{P3.init(e,r),Ni.init(e,r),e.values=new Set(r.values),Object.defineProperty(e,"value",{get(){if(r.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return r.values[0]}})});function $1(e,r){return new RN({type:"literal",values:Array.isArray(e)?e:[e],...Er(r)})}const kN=Zt("ZodTransform",(e,r)=>{N3.init(e,r),Ni.init(e,r),e._zod.parse=(i,o)=>{i.addIssue=N=>{if(typeof N=="string")i.issues.push(Jd(N,i.value,r));else{const B=N;B.fatal&&(B.continue=!1),B.code??(B.code="custom"),B.input??(B.input=i.value),B.inst??(B.inst=e),i.issues.push(Jd(B))}};const h=r.transform(i.value,i);return h instanceof Promise?h.then(N=>(i.value=N,i)):(i.value=h,i)}});function CN(e){return new kN({type:"transform",transform:e})}const W1=Zt("ZodOptional",(e,r)=>{A3.init(e,r),Ni.init(e,r),e.unwrap=()=>e._zod.def.innerType});function e_(e){return new W1({type:"optional",innerType:e})}const TN=Zt("ZodNullable",(e,r)=>{O3.init(e,r),Ni.init(e,r),e.unwrap=()=>e._zod.def.innerType});function t_(e){return new TN({type:"nullable",innerType:e})}const PN=Zt("ZodDefault",(e,r)=>{D3.init(e,r),Ni.init(e,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function NN(e,r){return new PN({type:"default",innerType:e,get defaultValue(){return typeof r=="function"?r():r}})}const AN=Zt("ZodPrefault",(e,r)=>{M3.init(e,r),Ni.init(e,r),e.unwrap=()=>e._zod.def.innerType});function ON(e,r){return new AN({type:"prefault",innerType:e,get defaultValue(){return typeof r=="function"?r():r}})}const G1=Zt("ZodNonOptional",(e,r)=>{L3.init(e,r),Ni.init(e,r),e.unwrap=()=>e._zod.def.innerType});function DN(e,r){return new G1({type:"nonoptional",innerType:e,...Er(r)})}const MN=Zt("ZodCatch",(e,r)=>{I3.init(e,r),Ni.init(e,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function LN(e,r){return new MN({type:"catch",innerType:e,catchValue:typeof r=="function"?r:()=>r})}const IN=Zt("ZodPipe",(e,r)=>{j3.init(e,r),Ni.init(e,r),e.in=r.in,e.out=r.out});function n_(e,r){return new IN({type:"pipe",in:e,out:r})}const jN=Zt("ZodReadonly",(e,r)=>{B3.init(e,r),Ni.init(e,r),e.unwrap=()=>e._zod.def.innerType});function BN(e){return new jN({type:"readonly",innerType:e})}const zN=Zt("ZodCustom",(e,r)=>{z3.init(e,r),Ni.init(e,r)});function UN(e,r={}){return AP(zN,e,r)}function HN(e){return OP(e)}function $d(e){return hP(V1,e)}const K1=al({identifier:fa().min(1,"Email or PMDC is required").trim(),password:fa().min(6,"Password must be at least 6 characters long")}),FN=()=>{const[e,r]=ne.useState("email"),{signIn:i,loading:o}=So(),[h,N]=ne.useState(!1),[B,I]=ne.useState(""),k=bs(),{register:d,handleSubmit:E,formState:{errors:_},reset:b}=au({resolver:ou(K1),mode:"onChange"}),T=async v=>{const f=await i({identifier:v.identifier,password:v.password},k);f&&(console.log(f),N(!0),I(f)),b()};return c.createElement("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md"},c.createElement("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900"},"Sign In to your account"),c.createElement("div",{className:"mb-6"},c.createElement("div",{className:"flex bg-gray-100 rounded-lg p-1"},c.createElement("button",{onClick:()=>r("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="email"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`},"Email Login"),c.createElement("button",{onClick:()=>r("pmdc"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="pmdc"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`},"PMDC Login"))),c.createElement("form",{className:"space-y-6",onSubmit:E(T)},c.createElement(ra,{label:e==="email"?"Email Address":"PMDC Number",type:"text",name:"identifier",...d("identifier"),error:_.identifier?.message,placeholder:e==="email"?"Enter email":"Enter PMDC number",autoComplete:"username"}),c.createElement(ra,{label:"Password",type:"password",name:"password",...d("password"),error:_.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),c.createElement("button",{type:"submit",disabled:o,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50"},o?"Signing In...":`Sign In with ${e==="email"?"Email":"PMDC"}`)),c.createElement("div",{className:"mt-6 text-center"},c.createElement("span",{className:"text-sm text-emerald-700"},"Don't have an account?"),c.createElement(Bi,{to:"/register",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"})},"Register"))),c.createElement(sp,{open:h,onOpenChange:N,title:"Login Status",description:B},c.createElement("button",{className:"mt-4 w-full rounded-lg bg-emerald-600 px-6 py-2 text-white font-semibold shadow-md hover:bg-emerald-700 transition duration-300 ease-in-out active:scale-95",onClick:()=>k("/doctor/upload-documents")},"Upload Documents")))},qm=e=>{let r=e.replace(/\D/g,"");return r=r.slice(0,13),r.length<=5?r:r.length<=12?r.slice(0,5)+"-"+r.slice(5):r.slice(0,5)+"-"+r.slice(5,12)+"-"+r.slice(12)},Y1=e=>/^\d{5}-\d{7}-\d{1}$/.test(e),qN=al({name:fa().min(3,"Name must be at least 3 characters"),email:fa().email("Invalid email address"),cnic:fa().refine(e=>/^\d{5}-\d{7}-\d{1}$/.test(e),{message:"CNIC must be in xxxxx-xxxxxxx-x format"}),password:fa().min(6,"Password must be at least 6 characters")});al({email:fa().email("Invalid email address"),password:fa().min(1,"Password is required")});al({cnic:fa().refine(e=>/^\d{5}-\d{7}-\d{1}$/.test(e),{message:"CNIC must be in xxxxx-xxxxxxx-x format"}),password:fa().min(1,"Password is required")});const VN=()=>{const e=bs(),{signUpFun:r,loading:i}=So(),{register:o,handleSubmit:h,setValue:N,formState:{errors:B}}=au({resolver:ou(qN),defaultValues:{name:"",email:"",cnic:"",password:""}}),I=d=>{N("cnic",qm(d.target.value))},k=async d=>{try{await r(d,e)}catch(E){console.error("Registration error:",E)}};return c.createElement("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md"},c.createElement("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900"},"Create your account"),c.createElement("form",{className:"space-y-6",onSubmit:h(k)},c.createElement(ra,{label:"Name",type:"text",...o("name"),error:B.name?.message,required:!0}),c.createElement(ra,{label:"Email address",type:"email",...o("email"),error:B.email?.message,required:!0}),c.createElement(ra,{label:"CNIC",...o("cnic"),error:B.cnic?.message,onChange:I,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15}),c.createElement(ra,{label:"Password",type:"password",...o("password"),error:B.password?.message,required:!0}),c.createElement("div",null,c.createElement("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md bg-emerald-600 text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},i?"Creating Account...":"Register"))),c.createElement("div",{className:"mt-6 text-center"},c.createElement("span",{className:"text-sm text-emerald-700"},"Already have an account?"),c.createElement(Bi,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},to:"/login",className:"ml-1 text-emerald-600 hover:underline font-medium"},"Login"))))},ZN=()=>{const[e,r]=ne.useState("email"),{DoctorLogin:i,loading:o}=Ms(),[h,N]=ne.useState(!1),[B,I]=ne.useState(""),k=bs(),{register:d,handleSubmit:E,formState:{errors:_},reset:b}=au({resolver:ou(K1),mode:"onChange"}),T=async v=>{const f=await i({identifier:v.identifier,password:v.password},k);f&&(console.log(f),N(!0),I(f)),b()};return c.createElement("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md"},c.createElement("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900"},"Login as a Doctor"),c.createElement("div",{className:"mb-6"},c.createElement("div",{className:"flex bg-gray-100 rounded-lg p-1"},c.createElement("button",{onClick:()=>r("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="email"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`},"Email Login"),c.createElement("button",{onClick:()=>r("pmdc"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="pmdc"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`},"PMDC Login"))),c.createElement("form",{className:"space-y-6",onSubmit:E(T)},c.createElement(ra,{label:e==="email"?"Email Address":"PMDC Number",type:"text",name:"identifier",...d("identifier"),error:_.identifier?.message,placeholder:e==="email"?"Enter email":"Enter PMDC number",autoComplete:"username"}),c.createElement(ra,{label:"Password",type:"password",name:"password",...d("password"),error:_.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),c.createElement("button",{type:"submit",disabled:o,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50"},o?"Signing In...":`Sign In with ${e==="email"?"Email":"PMDC"}`)),c.createElement("div",{className:"mt-6 text-center"},c.createElement("span",{className:"text-sm text-emerald-700"},"Don't have an account?"),c.createElement(Bi,{to:"/register/doctor",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"})},"Register"))),c.createElement(sp,{open:h,onOpenChange:N,title:"Login Status",description:B},c.createElement("button",{className:"mt-4 w-full rounded-lg bg-emerald-600 px-6 py-2 text-white font-semibold shadow-md hover:bg-emerald-700 transition duration-300 ease-in-out active:scale-95",onClick:()=>k("/doctor/upload-documents")},"Upload Documents")))},$N=({selectedSpecialties:e=[],onSpecialtiesChange:r,placeholder:i="Select specialties...",maxSelections:o=5,className:h=""})=>{const N=I=>{e.includes(I)?r(e.filter(k=>k!==I)):e.length<o&&r([...e,I])},B=I=>{r(e.filter(k=>k!==I))};return c.createElement("div",{className:`relative ${h}`},c.createElement("label",{className:"block text-emerald-700 font-medium mb-2"},"Specialties"," ",e.length>0&&c.createElement("span",{className:"text-sm text-gray-500 font-normal"},"(",e.length,"/",o,")")),e.length>0&&c.createElement("div",{className:"flex flex-wrap gap-2 mb-3"},e.map((I,k)=>c.createElement("div",{key:k,onClick:()=>B(I),className:"group flex items-center gap-1 bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full text-sm font-medium hover:bg-emerald-200 cursor-pointer"},c.createElement("span",{className:"truncate max-w-[200px]"},I),c.createElement(dR,null)))),c.createElement($u,{options:eb,value:i,onChange:N,placeholder:i,disabled:e.length>=o}),e.length>=o&&c.createElement("div",{className:"mt-2 text-xs text-amber-600 bg-amber-50 border border-amber-200 rounded px-3 py-2"},"Maximum ",o," specialties allowed"))},WN=({options:e=[],value:r="",onChange:i=()=>{},placeholder:o="Select or add...",icon:h,disabled:N=!1,allowAddNew:B=!1,onVerificationChange:I=()=>{},registeredOptions:k=[]})=>{const[d,E]=ne.useState(!1),[_,b]=ne.useState(""),[T,v]=ne.useState([]),f=ne.useRef(null);ne.useEffect(()=>{const S=e.filter(H=>H.toLowerCase().includes(_.toLowerCase()));v(S)},[_,e]),ne.useEffect(()=>{const S=H=>{f.current&&!f.current.contains(H.target)&&(E(!1),b(""))};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const R=S=>{const H=S.target.value;if(b(H),E(!0),B){i(H);const x=k.includes(H);I(x)}},g=S=>{if(b(""),E(!1),i(S),B){const H=k.includes(S);I(H)}},F=()=>{_.trim()&&(E(!1),i(_.trim()),I(!1),b(""))},m=B&&_.trim()&&!T.some(S=>S.toLowerCase()===_.toLowerCase()),P=r||o;return c.createElement("div",{className:"relative w-full",ref:f},d?c.createElement("input",{type:"text",value:_,onChange:R,onBlur:()=>{setTimeout(()=>E(!1),150)},placeholder:o,className:"w-full px-3 py-2 border border-emerald-200 rounded focus:outline-none focus:ring-2 focus:ring-emerald-500",autoFocus:!0}):c.createElement("button",{type:"button",className:`w-full flex items-center h-11 border border-emerald-200 rounded-md px-3 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500 ${N?"bg-gray-100 text-gray-400 cursor-not-allowed":"text-gray-700 bg-white hover:border-emerald-400"}`,onClick:()=>!N&&E(!0),disabled:N},c.createElement("span",{className:`flex-1 text-left ${r?"":"text-gray-500"}`},P),h&&c.createElement(h,null)),d&&c.createElement("div",{className:"absolute left-0 mt-1 w-full bg-white max-h-60 overflow-y-auto border border-gray-200 rounded shadow z-10"},T.map(S=>c.createElement("div",{key:S,className:"px-4 py-2 hover:bg-emerald-100 text-gray-700 cursor-pointer font-medium flex items-center justify-between",onClick:()=>g(S)},c.createElement("span",null,S),B&&k.includes(S)&&c.createElement("span",{className:"text-xs text-emerald-600 bg-emerald-100 px-2 py-1 rounded"},"✓ Verified"))),m&&c.createElement("div",{onClick:F,className:"px-4 py-2 hover:bg-gray-50 cursor-pointer flex items-center justify-between border-t border-gray-100"},c.createElement("span",null,'Add "',_,'"'),c.createElement("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},"+ New")),T.length===0&&!m&&_&&c.createElement("div",{className:"px-4 py-2 text-gray-500 text-sm"},"No options found")))},Q1=({values:e={},errors:r={},onInputChange:i,onDropdownChange:o,onSpecialtyChange:h,onHospitalChange:N,onHospitalVerification:B,onCnicChange:I,options:k={},include:d={}})=>{const E={degreeOptions:k.degreeOptions||tR,genders:k.genders||eR,hospitals:k.hospitals||rR},_={password:d.password!==!1,confirmPassword:d.confirmPassword!==!1,agreement:d.agreement!==!1,city:d.city!==!1,hospital:d.hospital!==!1};return c.createElement(c.Fragment,null,c.createElement(ra,{label:"Full Name",name:"name",value:e.name||"",onChange:i?.("name"),error:r.name?.message||r.name,required:!0}),c.createElement(ra,{label:"Email",type:"email",name:"email",value:e.email||"",onChange:i?.("email"),error:r.email?.message||r.email,required:!0,autoComplete:"email"}),c.createElement("div",{className:"md:col-span-2"},c.createElement($N,{selectedSpecialties:e.speciality||[],onSpecialtiesChange:b=>h?.(b),placeholder:"Search and select your specialties...",maxSelections:5}),r.speciality&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.speciality?.message||r.speciality)),c.createElement(ra,{label:"Phone",type:"tel",name:"phone",value:e.phone||"",onChange:i?.("phone"),error:r.phone?.message||r.phone,required:!0,placeholder:"03XXXXXXXXX",onlyNumbers:!0}),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Gender"),c.createElement($u,{options:E.genders,value:e.gender||"",onChange:b=>o?.("gender",b),placeholder:"Select Gender"}),r.gender&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.gender?.message||r.gender)),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Main Degree"),c.createElement($u,{options:E.degreeOptions,value:e.mainDegree||"",onChange:b=>o?.("mainDegree",b),placeholder:"Select Main Degree"}),r.mainDegree&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.mainDegree?.message||r.mainDegree)),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Full Address"),c.createElement("textarea",{name:"fullAddress",value:e.fullAddress||"",onChange:i?.("fullAddress"),required:!0,rows:1,className:`w-full px-3 py-2 border ${r.fullAddress?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`}),r.fullAddress&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.fullAddress?.message||r.fullAddress)),_.hospital&&c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Hospital",e.hospital&&c.createElement("span",{className:"ml-2 text-xs text-emerald-600 bg-emerald-100 px-2 py-1 rounded"},"✓ Verified"),e.hospital&&!e.hospital&&c.createElement("span",{className:"ml-2 text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded"},"⚠ New Hospital")),c.createElement(WN,{options:E.hospitals,value:e.hospital||"",onChange:b=>N?.(b),onVerificationChange:b=>B?.(b),registeredOptions:E.hospitals,placeholder:"Search hospitals or add new one...",allowAddNew:!0}),r.hospital&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.hospital?.message||r.hospital)),_.city&&c.createElement(ra,{label:"City",name:"city",value:e.city||"",onChange:i?.("city"),error:r.city?.message||r.city,placeholder:"Enter City Name"}),c.createElement(ra,{label:"Experience (years)",type:"number",name:"experience",value:e.experience||"",onChange:i?.("experience"),error:r.experience?.message||r.experience,required:!0,min:0}),c.createElement(ra,{label:"CNIC",name:"cnic",value:e.cnic||"",onChange:I,error:r.cnic?.message||r.cnic,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,onlyNumbers:!0,allowDashes:!0}),c.createElement(ra,{label:"Fee",type:"number",name:"fee",value:e.fee||"",onChange:i?.("fee"),error:r.fee?.message||r.fee,required:!0,min:0,onlyNumbers:!0}),c.createElement(ra,{label:"PMDC Number",name:"pmdcNumber",value:e.pmdcNumber||"",onChange:i?.("pmdcNumber"),error:r.pmdcNumber?.message||r.pmdcNumber,required:!0,placeholder:"Enter PMDC Number"}),_.password&&c.createElement(ra,{label:"Password",type:"password",name:"password",value:e.password||"",onChange:i?.("password"),error:r.password?.message||r.password,required:!0}),_.confirmPassword&&c.createElement(ra,{label:"Confirm Password",type:"password",name:"confirmPassword",value:e.confirmPassword||"",onChange:i?.("confirmPassword"),error:r.confirmPassword?.message||r.confirmPassword,required:!0}),_.agreement&&c.createElement(c.Fragment,null,c.createElement("div",{className:"flex items-center space-x-2 mt-4 md:col-span-2"},c.createElement("input",{type:"checkbox",id:"agreement",name:"agreement",checked:e.agreement||!1,onChange:i?.("agreement"),className:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300"}),c.createElement("label",{htmlFor:"agreement",className:"text-emerald-800 font-semibold text-base"},"🔒 Please make sure all fields are filled correctly before submitting.")),r.agreement&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.agreement?.message||r.agreement)))},GN=fa().refine(e=>Y1(e),{message:"CNIC must be in format: 12345-1234567-1"}),KN=/^[0-9+-\s()]+$/,YN=/^[A-Z0-9]+$/,QN=al({name:fa().min(1,"Name is required").min(2,"Name must be at least 2 characters long").max(100,"Name cannot exceed 100 characters").trim(),email:fa().min(1,"Email is required").email("Please provide a valid email address").trim(),speciality:Z1(fa()).min(1,"At least one specialty is required").max(5,"Maximum 5 specialties allowed"),phone:fa().min(1,"Phone number is required").regex(KN,"Please provide a valid phone number").length(11,"Phone number must be exactly 11 digits"),gender:Rm(["Male","Female"],{required_error:"Gender is required",invalid_type_error:"Gender must be either Male or Female"}),pmdcNumber:fa().min(1,"PMDC number is required").regex(YN,"PMDC number must contain only uppercase letters and numbers").min(5,"PMDC number must be at least 5 characters long").max(20,"PMDC number cannot exceed 20 characters").trim(),mainDegree:fa().min(1,"Main degree is required").min(2,"Main degree must be at least 2 characters long").max(100,"Main degree cannot exceed 100 characters").trim(),fullAddress:fa().min(1,"Full address is required").min(10,"Full address must be at least 10 characters long").max(500,"Full address cannot exceed 500 characters").trim(),city:fa().max(100,"City name cannot exceed 100 characters").optional().or($1("")),hospital:fa().min(1,"Hospital is required").min(2,"Hospital must be at least 2 characters long").max(200,"Hospital cannot exceed 200 characters").trim(),experience:$d({required_error:"Experience is required",invalid_type_error:"Experience must be a number"}).int("Experience must be a whole number").min(0,"Experience cannot be negative").max(50,"Experience cannot exceed 50 years"),fee:$d({required_error:"Fee is required",invalid_type_error:"Fee must be a number"}).min(0,"Fee cannot be negative").max(1e5,"Fee cannot exceed 100,000"),cnic:GN,password:fa().min(1,"Password is required").min(6,"Password must be at least 6 characters long"),confirmPassword:fa().min(1,"Confirm password is required"),agreement:Vu().refine(e=>e===!0,"You must confirm before submitting"),hospitalVerified:Vu().default(!1)}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),JN={name:"",email:"",speciality:[],phone:"",gender:void 0,pmdcNumber:"",mainDegree:"",fullAddress:"",city:"",hospital:"",experience:void 0,cnic:"",password:"",confirmPassword:"",agreement:!1,hospitalVerified:!1,fee:void 0},XN=()=>{const[e,r]=ne.useState(!1),{DoctorSignUp:i,loading:o,error:h}=Ms(),N=bs(),B=au({resolver:ou(QN),defaultValues:JN,mode:"onChange",criteriaMode:"all"}),{register:I,handleSubmit:k,formState:{errors:d,isValid:E},setValue:_,getValues:b,reset:T,clearErrors:v,watch:f,control:R}=B,g=f(),F=A=>{const M=qm(A.target.value);_("cnic",M,{shouldValidate:!0})},m=A=>{_("speciality",A,{shouldValidate:!0})},P=A=>{_("hospital",A,{shouldValidate:!0})},S=A=>{_("hospitalVerified",A)},H=(A,M)=>{_(A,M,{shouldValidate:!0}),v(A)},x=A=>M=>{const j=M.target.type==="checkbox"?M.target.checked:M.target.value;_(A,j,{shouldValidate:!0})},y=A=>{const{confirmPassword:M,agreement:j,...U}=A;return{...U,name:U.name?.trim(),email:U.email?.trim(),phone:U.phone?.trim(),religion:U.religion?.trim(),pmdcNumber:U.pmdcNumber?.trim(),mainDegree:U.mainDegree?.trim(),fullAddress:U.fullAddress?.trim(),city:U.city?.trim()||"",hospital:U.hospital?.trim(),cnic:U.cnic?.trim(),experience:Number(U.experience),fee:Number(U.fee)}},w=async A=>{try{const M=y(A);(await i(M,N))?.success&&(r(!0),T())}catch{}},p=()=>{T(),r(!1)};return{register:I,handleSubmit:k(w,A=>{const M=Object.keys(A)[0];M&&document.querySelector(`[name="${M}"]`)?.focus()}),formState:{errors:d,isValid:E},formValues:g,control:R,handleCnicChange:F,handleSpecialtyChange:m,handleHospitalChange:P,handleHospitalVerification:S,handleDropdownChange:H,handleInputChange:x,resetForm:p,prepareSubmissionData:y,showSuccess:e,setShowSuccess:r,loading:o,error:h}},eA=()=>{const{handleSubmit:e,formState:{errors:r},formValues:i,handleCnicChange:o,handleSpecialtyChange:h,handleHospitalChange:N,handleHospitalVerification:B,handleDropdownChange:I,handleInputChange:k,resetForm:d,showSuccess:E,setShowSuccess:_,loading:b}=XN();return c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-2xl w-full"},E?c.createElement("div",{className:"text-center"},c.createElement("div",{className:"text-6xl mb-4"},"🎉"),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"Application Submitted Successfully!"),c.createElement("p",{className:"text-gray-600 mb-6"},"Thank you for your interest in joining our platform. Your application has been submitted and is currently under review by our admin team."),c.createElement("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6"},c.createElement("h3",{className:"font-semibold text-emerald-800 mb-2"},"What happens next?"),c.createElement("ul",{className:"text-sm text-emerald-700 space-y-1"},c.createElement("li",null,"• Our admin team will review your application"),c.createElement("li",null,"• We'll verify your credentials and documents"),c.createElement("li",null,"• You'll receive an email notification once approved"),c.createElement("li",null,"• After approval, you can complete your profile setup"))),c.createElement("button",{onClick:()=>{_(!1),d()},className:"bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors"},"Submit Another Application")):c.createElement(c.Fragment,null,c.createElement("div",{className:"flex flex-col items-center mb-4"},c.createElement("span",{className:"text-emerald-600 text-4xl mb-2"},"🩺"),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-2 text-center"},"Join as a Doctor")),c.createElement("form",{className:"space-y-4",onSubmit:e},c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},c.createElement(Q1,{values:i,errors:r,onInputChange:T=>k(T),onDropdownChange:I,onSpecialtyChange:h,onHospitalChange:N,onHospitalVerification:B,onCnicChange:o})),c.createElement("button",{type:"submit",disabled:b,className:"w-full py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 font-medium transition-colors duration-200 mt-2 disabled:opacity-50 disabled:cursor-not-allowed"},b?"Submitting...":"Submit"),c.createElement("div",{className:"w-full text-center"},c.createElement("span",{className:"text-sm font-semibold text-emerald-700"},"Already have an account?"),c.createElement(Bi,{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),to:"/doctor/login",className:"ml-1 text-emerald-600 hover:underline font-medium"},"Login"))))))},tA=fa().refine(e=>Y1(e),{message:"CNIC must be in format: 12345-1234567-1"}),nA=/^03\d{9}$/,rA=al({name:fa().min(1,"Hospital name is required").min(2,"Hospital name must be at least 2 characters long").max(100,"Hospital name cannot exceed 100 characters").trim(),email:fa().min(1,"Email is required").email("Please provide a valid email address").trim(),description:fa().min(10,"Description must be at least 10 characters long").max(500,"Description cannot exceed 500 characters").optional().or($1("")),hospitalType:Rm(["Public","Private","Semi-Private","Military","Charity"],{required_error:"Hospital type is required",invalid_type_error:"Please select a valid hospital type"}),category:Rm(["General","Specialized","Teaching","Research","Emergency"],{required_error:"Category is required",invalid_type_error:"Please select a valid category"}),licenseNumber:fa().min(1,"License number is required").min(5,"License number must be at least 5 characters long").max(50,"License number cannot exceed 50 characters").trim(),establishedYear:$d({required_error:"Established year is required",invalid_type_error:"Established year must be a number"}).int("Established year must be a whole number").min(1900,"Established year cannot be before 1900").max(new Date().getFullYear(),"Established year cannot be in the future"),phone:fa().min(1,"Phone number is required").regex(nA,"Phone number must be in format 03XXXXXXXXX").trim(),address:fa().min(1,"Address is required").min(10,"Address must be at least 10 characters long").max(500,"Address cannot exceed 500 characters").trim(),city:fa().min(1,"City is required").min(2,"City name must be at least 2 characters long").max(50,"City name cannot exceed 50 characters").trim(),totalBeds:$d({required_error:"Total beds is required",invalid_type_error:"Total beds must be a number"}).int("Total beds must be a whole number").min(1,"Total beds must be at least 1"),operationTheaters:$d({required_error:"Operation theaters is required",invalid_type_error:"Operation theaters must be a number"}).int("Operation theaters must be a whole number").min(0,"Operation theaters cannot be negative"),cnic:tA,password:fa().min(1,"Password is required").min(6,"Password must be at least 6 characters long").max(50,"Password cannot exceed 50 characters"),confirmPassword:fa().min(1,"Confirm password is required"),services:al({emergencyServices:Vu().default(!1),ambulanceServices:Vu().default(!1),icuServices:Vu().default(!1)}).default({emergencyServices:!1,ambulanceServices:!1,icuServices:!1}),image:Jy().refine(e=>e instanceof File,"Hospital image is required").refine(e=>e&&e.size<=5e6,"Image size should be less than 5MB").refine(e=>e&&["image/jpeg","image/png","image/jpg"].includes(e.type),"Only JPEG, PNG and JPG images are allowed"),image:Jy().refine(e=>e instanceof File,"Hospital documents is required").refine(e=>e&&e.size<=5e6,"Image size should be less than 5MB").refine(e=>e&&["image/jpeg","image/png","image/jpg"].includes(e.type),"Only JPEG, PNG and JPG images are allowed"),agreement:Vu().refine(e=>e===!0,"You must confirm before submitting")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),aA={name:"",email:"",description:"",hospitalType:void 0,category:void 0,licenseNumber:"",establishedYear:void 0,phone:"",address:"",city:"",totalBeds:void 0,operationTheaters:void 0,cnic:"",password:"",confirmPassword:"",image:null,documents:null},iA=()=>{const[e,r]=ne.useState(!1),[i,o]=ne.useState(null),h=bs(),{HospitalSignUp:N,loading:B}=nu(),I=au({resolver:ou(rA),defaultValues:aA,mode:"onChange",criteriaMode:"all"}),{register:k,handleSubmit:d,formState:{errors:E,isValid:_},setValue:b,getValues:T,reset:v,clearErrors:f,watch:R,control:g}=I,F=R();return{register:k,handleSubmit:d,formState:{errors:E,isValid:_},setValue:b,getValues:T,reset:v,clearErrors:f,watch:R,control:g,formValues:F,handleCnicChange:M=>{const j=qm(M.target.value);b("cnic",j,{shouldValidate:!0})},handleDropdownChange:(M,j)=>{b(M,j,{shouldValidate:!0}),f(M)},handleServiceChange:(M,j)=>{const U=T("services")||{};b("services",{...U,[M]:j},{shouldValidate:!0})},handleImageChange:M=>{const j=M?.target?.files?M.target.files[0]:M;j instanceof File&&(b("image",j,{shouldValidate:!0}),f("image"))},handleDocumentChange:M=>{const j=M?.target?.files?M.target.files[0]:M;j instanceof File&&(b("document",j,{shouldValidate:!0}),f("image"))},removeDocument:M=>{const U=(T("documents")||[]).filter((z,W)=>W!==M);b("documents",U,{shouldValidate:!0})},handleInputChange:M=>j=>{const U=j.target.type==="checkbox"?j.target.checked:j.target.value;b(M,U,{shouldValidate:!0})},onSubmit:async M=>{const{confirmPassword:j,documents:U,agreement:z,...W}=M;await N(W,h)},handleInvalidSubmit:M=>{const j=Object.keys(M)[0];j&&document.querySelector(`[name="${j}"]`)?.focus()},showSuccess:e,setShowSuccess:r,loading:B,error:i,setError:o,resetForm:()=>{v(),r(!1),o(null)}}},r_=({label:e,name:r,onChange:i,error:o,accept:h="*/*",multiple:N=!1,maxSize:B=5e6,preview:I=!1,required:k=!1})=>{const[d,E]=ne.useState(!1),[_,b]=ne.useState([]),T=P=>{P.preventDefault(),P.stopPropagation(),P.type==="dragenter"||P.type==="dragover"?E(!0):P.type==="dragleave"&&E(!1)},v=P=>{P.preventDefault(),P.stopPropagation(),E(!1);const S=Array.from(P.dataTransfer.files);f(S)},f=P=>{const S=P.filter(H=>H.size>B?(alert(`File ${H.name} is too large. Maximum size is ${B/1e6}MB`),!1):!0);N?(b(H=>[...H,...S]),i(S)):(b(S),i(S[0]))},R=P=>{const S=Array.from(P.target.files);f(S)},g=P=>{if(N){const S=_.filter((H,x)=>x!==P);b(S),i(S)}else b([]),i(null)},F=P=>{if(P===0)return"0 Bytes";const S=1024,H=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(P)/Math.log(S));return parseFloat((P/Math.pow(S,x)).toFixed(2))+" "+H[x]},m=P=>P.type.startsWith("image/")?c.createElement(WR,{className:"w-4 h-4"}):c.createElement(qR,{className:"w-4 h-4"});return c.createElement("div",{className:"space-y-2"},c.createElement("label",{className:"block text-sm font-medium text-gray-700"},e,k&&c.createElement("span",{className:"text-red-500 ml-1"},"*")),c.createElement("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ${d?"border-emerald-400 bg-emerald-50":"border-gray-300 hover:border-gray-400"} ${o?"border-red-300 bg-red-50":""}`,onDragEnter:T,onDragLeave:T,onDragOver:T,onDrop:v},c.createElement("input",{type:"file",name:r,onChange:R,accept:h,multiple:N,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.createElement("div",{className:"space-y-2"},c.createElement(lb,{className:"mx-auto h-12 w-12 text-gray-400"}),c.createElement("div",{className:"text-sm text-gray-600"},c.createElement("span",{className:"font-medium text-emerald-600 hover:text-emerald-500"},"Click to upload")," ","or drag and drop"),c.createElement("p",{className:"text-xs text-gray-500"},h!=="*/*"&&`Accepted formats: ${h}`,c.createElement("br",null),"Max size: ",B/1e6,"MB"))),o&&c.createElement("p",{className:"text-sm text-red-600"},o),_.length>0&&c.createElement("div",{className:"space-y-2"},c.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Selected Files:"),c.createElement("div",{className:"space-y-2"},_.map((P,S)=>c.createElement("div",{key:S,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},c.createElement("div",{className:"flex items-center space-x-3"},m(P),c.createElement("div",null,c.createElement("p",{className:"text-sm font-medium text-gray-900"},P.name),c.createElement("p",{className:"text-xs text-gray-500"},F(P.size)))),c.createElement("button",{type:"button",onClick:()=>g(S),className:"text-red-500 hover:text-red-700"},c.createElement(ng,{className:"w-4 h-4"})))))))},sA=()=>{const{register:e,handleSubmit:r,formState:{errors:i,isValid:o},formValues:h,handleDropdownChange:N,handleImageChange:B,handleDocumentChange:I,onSubmit:k,showSuccess:d,setShowSuccess:E,loading:_,error:b,handleCnicChange:T}=iA();return c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-4xl w-full"},d?c.createElement("div",{className:"text-center"},c.createElement("div",{className:"text-6xl mb-4"},"🏥"),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"Application Submitted Successfully!"),c.createElement("p",{className:"text-gray-600 mb-6"},"Thank you for your interest in joining our platform. Your hospital application has been submitted and is currently under review by our admin team."),c.createElement("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6"},c.createElement("h3",{className:"font-semibold text-emerald-800 mb-2"},"What happens next?"),c.createElement("ul",{className:"text-sm text-emerald-700 space-y-1"},c.createElement("li",null,"• Our admin team will review your application"),c.createElement("li",null,"• We'll verify your hospital license and documents"),c.createElement("li",null,"• You'll receive an email notification once approved"),c.createElement("li",null,"• After approval, you can complete your hospital profile setup"))),c.createElement("button",{onClick:()=>E(!1),className:"bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors"},"Submit Another Application")):c.createElement(c.Fragment,null,c.createElement("div",{className:"flex flex-col items-center mb-4"},c.createElement("span",{className:"text-emerald-600 text-4xl mb-2"},"🏥"),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-2 text-center"},"Join as a Hospital")),c.createElement("form",{className:"space-y-4 grid grid-cols-1 md:grid-cols-2 gap-2",onSubmit:r(k)},c.createElement(ra,{label:"Hospital Name",name:"name",...e("name"),error:i.name?.message,required:!0,placeholder:"Enter hospital name"}),c.createElement(ra,{label:"Email",type:"email",name:"email",...e("email"),error:i.email?.message,required:!0,placeholder:"hospital@example.com",autoComplete:"email"}),c.createElement("div",{className:"md:col-span-2"},c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Description"),c.createElement("textarea",{...e("description"),rows:3,className:`w-full px-3 py-2 border ${i.description?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`,placeholder:"Brief description of your hospital..."}),i.description?.message&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},i.description.message)),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Hospital Type"),c.createElement($u,{options:Jx,value:h.hospitalType||"",onChange:v=>N("hospitalType",v),placeholder:"Select Hospital Type"}),i.hospitalType?.message&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},i.hospitalType.message)),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Category"),c.createElement($u,{options:Xx,value:h.category||"",onChange:v=>N("category",v),placeholder:"Select Category"}),i.category?.message&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},i.category.message)),c.createElement(ra,{label:"Phone",type:"tel",name:"phone",...e("phone"),error:i.phone?.message,required:!0,placeholder:"03XXXXXXXXX",onlyNumbers:!0}),c.createElement(ra,{label:"License Number",name:"licenseNumber",...e("licenseNumber"),error:i.licenseNumber?.message,required:!0,placeholder:"Enter hospital license number"}),c.createElement(ra,{label:"Established Year",name:"establishedYear",type:"number",...e("establishedYear"),error:i.establishedYear?.message,required:!0,min:1900,max:new Date().getFullYear(),placeholder:"e.g., 1995"}),c.createElement(ra,{label:"Total Beds",name:"totalBeds",type:"number",...e("totalBeds"),error:i.totalBeds?.message,required:!0,min:1,placeholder:"Number of beds"}),c.createElement(ra,{label:"Operation Theaters",name:"operationTheaters",type:"number",...e("operationTheaters"),error:i.operationTheaters?.message,required:!0,min:0,placeholder:"Number of OTs"}),c.createElement(ra,{label:"CNIC",name:"cnic",value:h.cnic||"",onChange:T,error:i.cnic?.message,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,onlyNumbers:!0,allowDashes:!0}),c.createElement("div",{className:"md:col-span-2"},c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Address"),c.createElement("textarea",{...e("address"),required:!0,rows:2,className:`w-full px-3 py-2 border ${i.address?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`,placeholder:"Full hospital address..."}),i.address?.message&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},i.address.message)),c.createElement(ra,{label:"City",name:"city",...e("city"),error:i.city?.message,required:!0,placeholder:"Enter city name"}),c.createElement("div",{className:"md:col-span-2"},c.createElement("label",{className:"block text-emerald-700 font-medium mb-2"},"Available Services"),c.createElement("div",{className:"space-y-2"},c.createElement("div",{className:"flex items-center"},c.createElement("input",{type:"checkbox",id:"emergencyServices",...e("services.emergencyServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"emergencyServices",className:"ml-2 text-sm text-gray-700"},"Emergency Services Available")),c.createElement("div",{className:"flex items-center"},c.createElement("input",{type:"checkbox",id:"ambulanceServices",...e("services.ambulanceServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"ambulanceServices",className:"ml-2 text-sm text-gray-700"},"Ambulance Services Available")),c.createElement("div",{className:"flex items-center"},c.createElement("input",{type:"checkbox",id:"icuServices",...e("services.icuServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"icuServices",className:"ml-2 text-sm text-gray-700"},"ICU Services Available")))),c.createElement("div",{className:"md:col-span-2"},c.createElement(r_,{label:"Hospital Image",name:"image",onChange:B,error:i.image?.message,accept:"image/jpeg,image/png,image/jpg",maxSize:5e6,required:!0})),c.createElement("div",{className:"md:col-span-2"},c.createElement(r_,{label:"Hospital Documents",name:"documents",onChange:I,error:i.documents?.message,accept:"image/jpeg,image/png,image/jpg",maxSize:5e6,required:!0})),c.createElement(ra,{label:"Password",type:"password",name:"password",...e("password"),error:i.password?.message,required:!0}),c.createElement(ra,{label:"Confirm Password",type:"password",name:"confirmPassword",...e("confirmPassword"),error:i.confirmPassword?.message,required:!0}),c.createElement("div",{className:"flex items-center space-x-2 mt-4 md:col-span-2"},c.createElement("input",{type:"checkbox",id:"agreement",...e("agreement"),className:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300",required:!0}),c.createElement("label",{htmlFor:"agreement",className:"text-emerald-800 font-semibold text-base"},"🔒 Please make sure all fields are filled correctly before submitting.")),i.agreement?.message&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},i.agreement.message),b&&c.createElement("div",{className:"md:col-span-2 bg-red-50 border border-red-200 rounded-lg p-4"},c.createElement("p",{className:"text-red-600 text-sm"},b)),c.createElement("button",{type:"submit",disabled:!o||_,className:"w-full md:col-span-2 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 font-medium transition-colors duration-200 mt-4 disabled:opacity-50 disabled:cursor-not-allowed"},_?"Submitting...":"Submit"),c.createElement("div",{className:"w-full text-center md:col-span-2"},c.createElement("span",{className:"text-sm font-semibold text-emerald-700"},"Already have an account?"),c.createElement(Bi,{to:"/hospital/login",className:"ml-1 text-emerald-600 hover:underline font-medium"},"Login"))))))},oA=al({email:fa().min(1,"Email is required").email("Enter a valid email").trim(),password:fa().min(6,"Password must be at least 6 characters long")}),cA=()=>{const e=bs(),{HospitalLogin:r,loading:i}=nu(),[o,h]=ne.useState(""),{register:N,handleSubmit:B,formState:{errors:I},reset:k}=au({resolver:ou(oA),mode:"onChange"}),d=async E=>{h("");try{await r({email:E.email,password:E.password},e),k()}catch{h("Login failed. Please try again.")}};return c.createElement("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md"},c.createElement("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900"},"Login as a Hospital"),c.createElement("form",{className:"space-y-6",onSubmit:B(d)},c.createElement(ra,{label:"Email Address",type:"email",name:"email",...N("email"),error:I.email?.message,placeholder:"Enter your email",autoComplete:"username"}),c.createElement(ra,{label:"Password",type:"password",name:"password",...N("password"),error:I.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),o&&c.createElement("p",{className:"text-red-500 text-sm"},o),c.createElement("button",{type:"submit",disabled:i,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50"},i?"Signing In...":"Sign In")),c.createElement("div",{className:"mt-6 text-center"},c.createElement("span",{className:"text-sm text-emerald-700"},"Don't have an account?"),c.createElement(Bi,{to:"/register/hospital",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"})},"Register"))))},yg={API_KEY:"dac164d6-2dd7-4232-b6b1-05cd1a0edb83",SECRET_KEY:"fc6ce9fe05e735a33e7f3f234e1afe1ec8481389c54a94482d3b6685133a3ef3",API_BASE_URL:"https://api.videosdk.live/v2",TEMP_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiJkYWMxNjRkNi0yZGQ3LTQyMzItYjZiMS0wNWNkMWEwZWRiODMiLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTc1NDk5MjEyMSwiZXhwIjoxNzU3NTg0MTIxfQ.kplefvdyD8APGCFxaIMWvMItwhqgVKiALU3f4EulMtg"},J1=async(e,r,i=["allow_join"],o="user")=>{try{return console.log("✅ Using development token for:",o,r),yg.TEMP_TOKEN}catch(h){throw console.error("Error generating auth token:",h),new Error("Failed to generate authentication token")}},Hf=async(e,r={})=>{try{const i={region:"sg001",...r},o=await bi.post(`${yg.API_BASE_URL}/rooms`,i,{headers:{Authorization:e,"Content-Type":"application/json"},timeout:15e3});return{roomId:o.data.roomId,meetingId:o.data.roomId,region:i.region,createdAt:new Date().toISOString()}}catch(i){throw console.error("Error creating meeting:",i),i.response?.status===401?new Error("Invalid authentication token"):i.response?.status===429?new Error("Rate limit exceeded. Please try again later"):new Error("Failed to create meeting room")}},a_=async(e,r)=>{try{const i=await bi.get(`${yg.API_BASE_URL}/rooms/${r}`,{headers:{Authorization:e,"Content-Type":"application/json"},timeout:1e4});return{isValid:!0,meetingId:i.data.roomId,region:i.data.region,createdAt:i.data.createdAt}}catch(i){return i.response?.status===404?{isValid:!1,error:"Meeting not found"}:{isValid:!1,error:"Unable to validate meeting"}}},X1=({doctorId:e,doctorName:r,isDoctor:i=!1})=>{const o=bs(),{user:h,isAuthenticated:N}=So(),[B,I]=ne.useState(!1),[k,d]=ne.useState(!1),[E,_]=ne.useState(""),b=async()=>{if(!N){zn.error("Please login to start consultation"),o("/login");return}if(!i){zn.error("Only doctors can create meetings. Please ask the doctor for a meeting code.");return}try{I(!0);const v=await J1(h._id,h.name),f=await Hf(v);if(f&&f.roomId){const R=f.roomId;o(`/doctor/consultation/${R}/${h._id}`),zn.success("Consultation started successfully!")}else throw new Error("Failed to create meeting")}catch(v){console.error("Failed to start consultation:",v),zn.error("Failed to start consultation. Please try again.")}finally{I(!1)}},T=async()=>{if(!N){zn.error("Please login to join consultation"),o("/login");return}if(!E.trim()){zn.error("Please enter a consultation code");return}try{d(!0),o(i?`/doctor/consultation/${E}/patient_waiting`:`/consultation/${E}/${e}`),zn.success("Joining consultation...")}catch(v){console.error("Failed to join consultation:",v),zn.error("Failed to join consultation")}finally{d(!1)}};return c.createElement("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200"},c.createElement("h4",{className:"font-semibold text-blue-800 mb-2"},"Video Consultation"),c.createElement("p",{className:"text-blue-700 text-sm mb-4"},"Connect with ",r," via video call. Make sure you have a stable internet connection and allow camera/microphone access."),c.createElement("div",{className:"space-y-3"},i?c.createElement("button",{onClick:b,disabled:B,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},B?"Creating Meeting...":"Start Video Consultation"):c.createElement("div",{className:"text-center p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},c.createElement("p",{className:"text-yellow-800 text-sm mb-2"},c.createElement("strong",null,"Note:")," Only doctors can create meetings"),c.createElement("p",{className:"text-yellow-700 text-xs"},"Please ask the doctor to start the consultation and provide you with a meeting code.")),c.createElement("div",{className:"flex gap-2"},c.createElement("input",{type:"text",value:E,onChange:v=>_(v.target.value),placeholder:i?"Enter meeting code to join":"Enter meeting code from doctor",className:"flex-1 px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),c.createElement("button",{onClick:T,disabled:k||!E.trim(),className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},k?"Joining...":"Join"))),c.createElement("div",{className:"mt-4 text-xs text-blue-600"},c.createElement("p",null,"• Ensure stable internet connection"),c.createElement("p",null,"• Allow camera and microphone access"),c.createElement("p",null,"• Find a quiet, private space"),c.createElement("p",null,"• Meeting codes are generated automatically when starting a consultation")))},lA=({mode:e="rating-and-review",trigger:r=null,open:i,onOpenChange:o,initialRating:h=0,initialReview:N="",onSubmit:B=()=>{},title:I="Leave a Review",description:k="",submitLabel:d="Submit"})=>{const[E,_]=ne.useState(!1),b=i??E,T=y=>{o?o(y):_(y)},[v,f]=ne.useState(h||0),[R,g]=ne.useState(0),[F,m]=ne.useState(N||""),[P,S]=ne.useState(!1);ne.useEffect(()=>{f(h||0)},[h,b]),ne.useEffect(()=>{m(N||"")},[N,b]);const H=async()=>{B({rating:v,review:F.trim()})},x=({index:y})=>{const w=y<=(R||v);return c.createElement("button",{type:"button","aria-label":`${y} star${y>1?"s":""}`,onClick:()=>f(y),onMouseEnter:()=>g(y),onMouseLeave:()=>g(0),className:`w-9 h-9 flex items-center justify-center rounded-md transition ${w?"bg-yellow-50 text-yellow-500":"bg-gray-100 text-gray-300"} focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-amber-300`},c.createElement("svg",{viewBox:"0 0 20 20",className:"w-5 h-5",fill:"currentColor","aria-hidden":!0},c.createElement("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})))};return c.createElement(d1,{open:b,onOpenChange:T},r&&c.createElement(p1,{asChild:!0},r),c.createElement(m1,{className:"max-w-md"},c.createElement(h1,null,I&&c.createElement(f1,{className:"text-lg font-semibold"},I),k&&c.createElement(g1,{className:"text-sm text-gray-500"},k)),c.createElement("div",{className:"mt-4"},c.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Your Rating"),c.createElement("div",{className:"flex gap-2"},[1,2,3,4,5].map(y=>c.createElement(x,{key:y,index:y}))),c.createElement("div",{className:"mt-2 text-xs text-gray-500"},v?`${v} / 5`:"Select a rating")),e==="rating-and-review"&&c.createElement("div",{className:"mt-4"},c.createElement("label",{htmlFor:"review",className:"block text-sm font-medium text-gray-700 mb-2"},"Your Review"),c.createElement("textarea",{id:"review",rows:4,value:F,onChange:y=>m(y.target.value),placeholder:"Tell other customers about your experience...",className:"w-full rounded-md border border-gray-200 p-3 text-sm focus:ring-2 focus:ring-emerald-300 focus:outline-none"}),c.createElement("div",{className:"mt-2 text-xs text-gray-400"},F.trim().length," characters")),c.createElement("div",{className:"mt-6 flex items-center justify-end gap-3"},c.createElement("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 rounded-md text-sm bg-gray-100 hover:bg-gray-200 transition",disabled:P},"Cancel"),c.createElement("button",{type:"button",onClick:H,disabled:!v||P,className:`px-4 py-2 rounded-md text-sm text-white transition ${!v||P?"bg-emerald-300 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700"}`},P?"Sending...":d))))},uA=()=>{const{slug:e}=_c(),r=bs(),{user:i,isAuthenticated:o}=So(),{allDoctors:h,loading:N}=Ms(),[B,I]=ne.useState(null),[k,d]=ne.useState("video"),{addDoctorRating:E}=bb();ne.useEffect(()=>{window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},[e]),ne.useEffect(()=>{if(h&&h.length>0){const R=e.split("-").pop(),g=h.find(F=>F._id===R);g&&I(g)}},[h,e]);const _=()=>{r(`/doctor/book/${e}`)},b=({rating:R})=>{E({rating:R},B._id)};if(N)return c.createElement("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"text-center"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),c.createElement("p",{className:"text-emerald-700"},"Loading doctor profile...")));if(!B)return c.createElement("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"text-center"},c.createElement("p",{className:"text-emerald-700 text-lg"},"Doctor not found."),c.createElement("button",{onClick:()=>r("/"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors"},"Go Home")));const T=R=>Array.isArray(R)?R.join(", "):R||"General Medicine",v=R=>R&&typeof R=="object"?R.average||0:R||0,f=R=>R&&typeof R=="object"&&R.count||0;return c.createElement("div",{className:"min-h-screen bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"max-w-6xl mx-auto"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8"},c.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},c.createElement("div",{className:"text-center lg:text-left"},c.createElement("img",{src:B.profilePicture||`https://ui-avatars.com/api/?name=${encodeURIComponent(B.name)}&background=random`,alt:B.name,className:"w-32 h-32 rounded-full object-cover border-4 border-emerald-100 shadow-lg mx-auto lg:mx-0 mb-4"}),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-2"},B.name),c.createElement("p",{className:"text-emerald-700 text-lg mb-2"},T(B.speciality)),c.createElement("p",{className:"text-gray-600 mb-2"},B.mainDegree),c.createElement("div",{className:"flex items-center justify-center lg:justify-start space-x-2"},c.createElement("span",{className:"text-yellow-500"},"★"),c.createElement("span",{className:"font-medium"},v(B.rating)),c.createElement("span",{className:"text-gray-500"},"(",f(B.rating)," reviews)")),c.createElement(lA,{trigger:c.createElement("button",{className:"px-3 mt-2 py-2 bg-yellow-500 text-white rounded"},"Add Rating"),mode:"rating-only",onSubmit:b,title:"Rate this Service",description:"Tap the stars to leave a quick rating",submitLabel:"Send Rating"})),c.createElement("div",{className:"space-y-4"},c.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},c.createElement("h3",{className:"font-semibold text-emerald-700 mb-3"},"Professional Information"),c.createElement("div",{className:"space-y-2 text-sm"},c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"Experience:"),c.createElement("span",{className:"font-medium"},B.experience||0," years")),c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"PMDC Number:"),c.createElement("span",{className:"font-medium"},B.pmdcNumber||"Not specified")),c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"Status:"),c.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${B.status==="verified"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},B.status||"Pending")))),c.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},c.createElement("h3",{className:"font-semibold text-emerald-700 mb-3"},"Contact Information"),c.createElement("div",{className:"space-y-2 text-sm"},c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("span",{className:"text-gray-600"},"📧"),c.createElement("span",null,B.email)),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("span",{className:"text-gray-600"},"📱"),c.createElement("span",null,B.phone)),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("span",{className:"text-gray-600"},"🏥"),c.createElement("span",null,B.hospital||"Not specified"))))),c.createElement("div",{className:"space-y-4"},c.createElement("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200"},c.createElement("h3",{className:"font-semibold text-blue-800 mb-3"},"Consultation Fee"),c.createElement("p",{className:"text-2xl font-bold text-blue-600 mb-2"},"Rs. ",B.fee||"Not specified"),c.createElement("div",{className:"text-sm text-blue-700"},c.createElement("p",null,"• Video consultation available"),c.createElement("p",null,"• In-person appointments"),c.createElement("p",null,"• Professional medical advice"))),c.createElement("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200"},c.createElement("h3",{className:"font-semibold text-emerald-800 mb-3"},"Availability"),c.createElement("div",{className:"flex items-center space-x-2 mb-2"},c.createElement("span",{className:`w-3 h-3 rounded-full ${B.availability?"bg-green-500":"bg-red-500"}`}),c.createElement("span",{className:B.availability?"text-green-700":"text-red-700"},B.availability?"Available for consultations":"Currently unavailable")),B.availability&&c.createElement("button",{onClick:_,className:"w-full bg-emerald-600 text-white py-2 px-4 rounded-lg hover:bg-emerald-700 transition-colors"},"Book Appointment"))))),B.availability&&c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8"},c.createElement("h2",{className:"text-2xl font-bold text-emerald-800 mb-6 text-center"},"Start Video Consultation"),c.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700"},"Why Choose Video Consultation?"),c.createElement("ul",{className:"space-y-2 text-gray-600"},c.createElement("li",{className:"flex items-start space-x-2"},c.createElement("span",{className:"text-emerald-500 mt-1"},"✓"),c.createElement("span",null,"Consult from the comfort of your home")),c.createElement("li",{className:"flex items-start space-x-2"},c.createElement("span",{className:"text-emerald-500 mt-1"},"✓"),c.createElement("span",null,"No travel time or waiting in queues")),c.createElement("li",{className:"flex items-start space-x-2"},c.createElement("span",{className:"text-emerald-500 mt-1"},"✓"),c.createElement("span",null,"Secure and private consultation")),c.createElement("li",{className:"flex items-start space-x-2"},c.createElement("span",{className:"text-emerald-500 mt-1"},"✓"),c.createElement("span",null,"Easy follow-up appointments"))),c.createElement("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200"},c.createElement("h4",{className:"font-semibold text-yellow-800 mb-2"},"Before Your Consultation"),c.createElement("ul",{className:"text-sm text-yellow-700 space-y-1"},c.createElement("li",null,"• Ensure stable internet connection"),c.createElement("li",null,"• Find a quiet, private space"),c.createElement("li",null,"• Have your medical history ready"),c.createElement("li",null,"• Test your camera and microphone")))),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700"},"Ready to Start?"),o?c.createElement("div",{className:"space-y-3"},c.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},c.createElement("p",{className:"text-yellow-800 text-sm"},c.createElement("strong",null,"Note:")," The doctor will start the video consultation and provide you with a meeting code to join.")),c.createElement(X1,{doctorId:B._id,doctorName:B.name,isDoctor:!1})):c.createElement("div",{className:"bg-gray-50 p-6 rounded-lg text-center"},c.createElement("p",{className:"text-gray-600 mb-4"},"Please login to start a video consultation"),c.createElement("button",{onClick:()=>r("/login"),className:"bg-emerald-600 text-white py-2 px-6 rounded-lg hover:bg-emerald-700 transition-colors"},"Login Now"))))),c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8"},c.createElement("h2",{className:"text-2xl font-bold text-emerald-800 mb-6"},"Additional Information"),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 border-b border-emerald-200 pb-2"},"Personal Details"),c.createElement("div",{className:"space-y-3 text-sm"},c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"Gender:"),c.createElement("span",{className:"font-medium"},B.gender||"Not specified")),c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"Religion:"),c.createElement("span",{className:"font-medium"},B.religion||"Not specified")),c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"CNIC:"),c.createElement("span",{className:"font-medium"},B.cnic||"Not specified")))),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 border-b border-emerald-200 pb-2"},"Address"),c.createElement("div",{className:"text-sm"},c.createElement("p",{className:"text-gray-600 mb-2"},"Full Address:"),c.createElement("p",{className:"text-gray-800"},B.fullAddress||"Address not specified")))),c.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 mb-4"},"Verification Status"),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("span",{className:`w-4 h-4 rounded-full ${B.pmdcVerified?"bg-green-500":"bg-red-500"}`}),c.createElement("span",{className:"text-sm"},"PMDC Verification:"," ",B.pmdcVerified?"Verified":"Not Verified")),c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("span",{className:`w-4 h-4 rounded-full ${B.hospitalVerified?"bg-green-500":"bg-red-500"}`}),c.createElement("span",{className:"text-sm"},"Hospital Verification:"," ",B.hospitalVerified?"Verified":"Not Verified")))))))},dA=()=>{const{allDoctors:e}=Ms(),{slug:r}=_c(),h=(()=>{const B={};return eb.forEach(I=>{const k=I.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/\//g,"-").replace(/&/g,"and");B[k]=I}),B})()[r],N=e?.filter(B=>h?Array.isArray(B.speciality)?B.speciality.some(I=>I&&I.toLowerCase()===h.toLowerCase()):typeof B.speciality=="string"?B.speciality.toLowerCase()===h.toLowerCase():!1:!1)||[];return console.log("Filtered Doctors:",N),h?N.length===0?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"No Doctors Found"),c.createElement("p",{className:"text-emerald-700 text-lg"},"No doctors found for ",h,"."),c.createElement("p",{className:"text-emerald-600 text-sm mt-2"},"Please check back later or contact us for assistance."))):c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center"},h," Doctors"),c.createElement("p",{className:"text-center text-emerald-600 mb-8"},"Found ",N.length," doctor",N.length!==1?"s":""," in ",h),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},N.map((B,I)=>c.createElement(Bm,{key:B._id||I,doctor:B})))):c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"Invalid Specialty"),c.createElement("p",{className:"text-emerald-700 text-lg"},'The requested specialty "',r.replace(/-/g," "),'" was not found.')))},pA=()=>{const{allDoctors:e}=Ms();return c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center"},"All Doctors"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},e.map((r,i)=>c.createElement(Bm,{key:i,doctor:r}))))},ew=({hospital:e})=>{const i=((o,h)=>`${o.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${h}`)(e.name,e._id);return c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center"},c.createElement("img",{src:e.image||e.profilePicture||"https://ui-avatars.com/api/?name=Hospital&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),c.createElement("h2",{className:"text-xl font-bold text-emerald-800 mb-1"},e.name),c.createElement("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2"},e.city),c.createElement("div",{className:"text-gray-700 text-sm mb-1"},c.createElement("span",{className:"font-semibold"},"Address:")," ",e.address),c.createElement("div",{className:"text-gray-700 text-sm mb-1"},c.createElement("span",{className:"font-semibold"},"Contact:")," ",e.contact||e.phone),c.createElement("div",{className:"text-gray-700 text-sm mb-2"},c.createElement("span",{className:"font-semibold"},"Beds:")," ",e.beds??e.totalBeds),c.createElement(Bi,{to:`/hospital/profile/${i}`,className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full text-center"},"View Hospital"))},mA=()=>{const{allPublicHospital:e,loading:r}=nu();return r?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})):!e||e.length===0?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"No Public Hospitals"),c.createElement("p",{className:"text-emerald-700 text-lg"},"No public hospitals available at the moment."))):c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center"},"All Public Hospitals"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},e.map(i=>c.createElement(ew,{key:i._id,hospital:i}))))},tw=({lab:e})=>c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center"},c.createElement("img",{src:e.image||"https://ui-avatars.com/api/?name=Lab&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),c.createElement("h2",{className:"text-xl font-bold text-emerald-800 mb-1"},e.name),c.createElement("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2"},e.city),c.createElement("div",{className:"text-gray-700 text-sm mb-1"},c.createElement("span",{className:"font-semibold"},"Address:")," ",e.address),c.createElement("div",{className:"text-gray-700 text-sm mb-1"},c.createElement("span",{className:"font-semibold"},"Contact:")," ",e.contact),c.createElement("div",{className:"text-gray-700 text-sm mb-2"},c.createElement("span",{className:"font-semibold"},"Tests Available:")," ",e.tests),c.createElement("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 font-medium w-full mb-2"},"Book Test"),c.createElement("button",{className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full"},"View Reports")),hA=()=>c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center"},"All Labs"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},rb.map((e,r)=>c.createElement(tw,{key:r,lab:e})))),nw=({medicine:e})=>c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center"},c.createElement("img",{src:e.image||"https://ui-avatars.com/api/?name=Medicine&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),c.createElement("h2",{className:"text-xl font-bold text-emerald-800 mb-1"},e.name),c.createElement("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2"},e.type),c.createElement("div",{className:"text-gray-700 text-sm mb-1"},c.createElement("span",{className:"font-semibold"},"Description:")," ",e.description),c.createElement("div",{className:"text-emerald-700 font-bold mb-2"},"Price: Rs. ",e.price),c.createElement("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 font-medium w-full mb-2"},"Add to Cart"),c.createElement("button",{className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full"},"Buy Now")),fA=()=>c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center"},"All Medicines"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},nb.map((e,r)=>c.createElement(nw,{key:r,medicine:e})))),gA=()=>{const{allPublicHospital:e}=nu(),{slug:r}=_c(),i=e.filter(o=>o.city?.toLowerCase().replace(/\s+/g,"-")===r);return ne.useEffect(()=>{window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},[r]),i?c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center"},"All Public Hospitals"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},i.map(o=>c.createElement(ew,{key:o._id,hospital:o})))):c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"Hospital Not Found"),c.createElement("p",{className:"text-emerald-700 text-lg"},"The hospital profile you are looking for does not exist.")))},vA=()=>{const{slug:e}=_c(),r=tb.find(o=>o.slug===e),i=Zx.filter(o=>o.hospital===(r&&r.name));return r?c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize"},"Doctors at ",r.name),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},i.length===0?c.createElement("div",{className:"col-span-full text-center text-gray-500"},"No doctors found for this hospital."):i.map((o,h)=>c.createElement(Bm,{key:h,doctor:o})))):c.createElement("div",{className:"p-8 text-center"},"Hospital not found.")},yA=()=>{const{slug:e}=_c(),r=rb.filter(i=>i.slug?i.slug===e:i.city.toLowerCase().replace(/\s+/g,"-")===e||i.name.toLowerCase().replace(/\s+/g,"-")===e);return r.length===0?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"No Labs Found"),c.createElement("p",{className:"text-emerald-700 text-lg"},"No labs found for this area."))):c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize"},e.replace(/-/g," ")," Labs"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},r.map((i,o)=>c.createElement(tw,{key:o,lab:i}))))},_A=()=>{const{slug:e}=_c(),r=nb.filter(i=>(i.slug?i.slug===e:i.name.toLowerCase().replace(/\s+/g,"-")===e)||i.type.toLowerCase().replace(/\s+/g,"-")===e);return r.length===0?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"No Medicines Found"),c.createElement("p",{className:"text-emerald-700 text-lg"},"No medicines found for this type."))):c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize"},e.replace(/-/g," ")," Medicines"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},r.map((i,o)=>c.createElement(nw,{key:o,medicine:i}))))},bA=()=>{const{slug:e}=_c(),r=bs(),{user:i,isAuthenticated:o}=So(),{allDoctors:h,loading:N}=Ms(),[B,I]=ne.useState({name:"",date:"",time:""}),[k,d]=ne.useState(!1),[E,_]=ne.useState("in-person"),[b,T]=ne.useState(null),{doctor:v}=Ms();ne.useEffect(()=>{if(h&&h.length>0){const g=e.split("-").pop(),F=h.find(m=>m._id===g);F&&T(F)}},[h,e]),ne.useEffect(()=>{window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},[e]);const f=g=>{I({...B,[g.target.name]:g.target.value})},R=g=>{if(g.preventDefault(),!o){zn.error("Please login to book an appointment"),r("/login");return}d(!0)};return N?c.createElement("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"text-center"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),c.createElement("p",{className:"text-emerald-700"},"Loading doctor information..."))):b?c.createElement("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-4xl w-full"},c.createElement("h2",{className:"text-2xl font-bold text-emerald-800 mb-6 text-center"},"Book Appointment with ",b.name),c.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},c.createElement("div",{className:"flex flex-col items-center mb-6"},c.createElement("img",{src:b.profilePicture||`https://ui-avatars.com/api/?name=${encodeURIComponent(b.name)}&background=random`,alt:b.name,className:"w-24 h-24 rounded-full object-cover border-4 border-emerald-100 shadow mb-4"}),c.createElement("h3",{className:"text-xl font-semibold text-emerald-800 mb-2"},b.name),c.createElement("p",{className:"text-emerald-700 text-sm mb-2"},Array.isArray(b.speciality)?b.speciality.join(", "):b.speciality),c.createElement("p",{className:"text-gray-600 text-sm mb-2"},b.experience||0," years experience"),c.createElement("p",{className:"text-green-600 font-semibold"},"Rs. ",b.fee||"Not specified"),b.mainDegree&&c.createElement("p",{className:"text-gray-600 text-sm"},b.mainDegree)),c.createElement("div",{className:"space-y-6"},c.createElement("div",null,c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 mb-4"},"Choose Consultation Type"),c.createElement("div",{className:"space-y-3"},c.createElement("label",{className:"flex items-center space-x-3 cursor-pointer"},c.createElement("input",{type:"radio",name:"consultationType",value:"in-person",checked:E==="in-person",onChange:g=>_(g.target.value),className:"text-emerald-600 focus:ring-emerald-500"}),c.createElement("span",{className:"text-gray-700"},"In-Person Consultation")),c.createElement("label",{className:"flex items-center space-x-3 cursor-pointer"},c.createElement("input",{type:"radio",name:"consultationType",value:"video",checked:E==="video",onChange:g=>_(g.target.value),className:"text-emerald-600 focus:ring-emerald-500"}),c.createElement("span",{className:"text-gray-700"},"Video Consultation")))),E==="video"?c.createElement("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200"},c.createElement("h4",{className:"font-semibold text-blue-800 mb-2"},"Video Consultation"),c.createElement("p",{className:"text-blue-700 text-sm mb-4"},"Connect with ",b.name," via video call. Make sure you have a stable internet connection and allow camera/microphone access."),o||v?c.createElement("div",{className:"space-y-3"},c.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},c.createElement("p",{className:"text-yellow-800 text-sm"},c.createElement("strong",null,"Note:")," The doctor will start the video consultation and provide you with a meeting code to join.")),c.createElement(X1,{doctorId:b._id,doctorName:b.name,isDoctor:!1})):c.createElement("button",{onClick:()=>r("/login"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors"},"Login to Join Video Consultation")):c.createElement("div",null,c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 mb-4"},"Book In-Person Appointment"),k?c.createElement("div",{className:"text-green-700 text-center font-semibold p-4 bg-green-50 rounded-lg"},"Appointment booked successfully!"):c.createElement("form",{onSubmit:R,className:"space-y-4"},c.createElement("input",{name:"name",value:B.name,onChange:f,required:!0,placeholder:"Your Name",className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),c.createElement("input",{name:"date",type:"date",value:B.date,onChange:f,required:!0,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),c.createElement("input",{name:"time",type:"time",value:B.time,onChange:f,required:!0,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),c.createElement("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-2 rounded hover:bg-emerald-700 transition-colors"},"Book Appointment"))))),c.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 mb-3"},"Important Information"),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600"},c.createElement("div",null,c.createElement("h4",{className:"font-medium text-emerald-700 mb-2"},"For Video Consultations:"),c.createElement("ul",{className:"space-y-1"},c.createElement("li",null,"• Ensure stable internet connection"),c.createElement("li",null,"• Find a quiet, private space"),c.createElement("li",null,"• Have your medical history ready"),c.createElement("li",null,"• Test your camera and microphone"))),c.createElement("div",null,c.createElement("h4",{className:"font-medium text-emerald-700 mb-2"},"For In-Person Appointments:"),c.createElement("ul",{className:"space-y-1"},c.createElement("li",null,"• Arrive 10 minutes early"),c.createElement("li",null,"• Bring your ID and medical records"),c.createElement("li",null,"• Wear a mask if required"),c.createElement("li",null,"• Follow clinic safety protocols"))))))):c.createElement("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"text-center"},c.createElement("p",{className:"text-emerald-700 text-lg"},"Doctor not found."),c.createElement("button",{onClick:()=>r("/"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors"},"Go Home")))},wA=()=>{const{slug:e}=_c(),r=tb.find(k=>k.slug===e),[i,o]=ne.useState({name:"",date:"",time:""}),[h,N]=ne.useState(!1);if(!r)return c.createElement("div",{className:"p-8 text-center"},"Hospital not found.");const B=k=>{o({...i,[k.target.name]:k.target.value})},I=k=>{k.preventDefault(),N(!0)};return c.createElement("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-md w-full"},c.createElement("h2",{className:"text-2xl font-bold text-emerald-800 mb-4 text-center"},"Book Appointment at ",r.name),c.createElement("div",{className:"flex flex-col items-center mb-4"},c.createElement("img",{src:r.image,alt:r.name,className:"w-20 h-20 rounded object-cover border-4 border-emerald-100 shadow mb-2"}),c.createElement("p",{className:"text-emerald-700 text-sm"},r.address)),h?c.createElement("div",{className:"text-green-700 text-center font-semibold"},"Appointment booked successfully!"):c.createElement("form",{onSubmit:I,className:"space-y-4"},c.createElement("input",{name:"name",value:i.name,onChange:B,required:!0,placeholder:"Your Name",className:"w-full border rounded px-3 py-2"}),c.createElement("input",{name:"date",type:"date",value:i.date,onChange:B,required:!0,className:"w-full border rounded px-3 py-2"}),c.createElement("input",{name:"time",type:"time",value:i.time,onChange:B,required:!0,className:"w-full border rounded px-3 py-2"}),c.createElement("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-2 rounded hover:bg-emerald-700 transition"},"Book Now"))))},EA=()=>{const{user:e,loading:r,signOut:i}=So(),[o,h]=ne.useState(!1),[N,B]=ne.useState({name:e?.name||"",email:e?.email||"",cnic:e?.cnic||""}),I=_=>{const{name:b,value:T}=_.target;B(b==="cnic"?v=>({...v,[b]:qm(T)}):v=>({...v,[b]:T}))},k=async()=>{try{zn.success("Profile updated successfully!"),h(!1)}catch{zn.error("Failed to update profile")}},d=()=>{B({name:e?.name||"",email:e?.email||"",cnic:e?.cnic||""}),h(!1)},E=()=>{i()};return e?c.createElement("div",{className:"min-h-screen bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"max-w-4xl mx-auto"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8"},c.createElement("div",{className:"flex items-center justify-between mb-8"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800"},"User Profile"),c.createElement("div",{className:"flex space-x-3"},o?c.createElement(c.Fragment,null,c.createElement("button",{onClick:k,disabled:r,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50"},r?"Saving...":"Save Changes"),c.createElement("button",{onClick:d,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"},"Cancel")):c.createElement("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors"},"Edit Profile"),c.createElement("button",{onClick:E,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"},"Logout"))),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},c.createElement("div",{className:"space-y-6"},c.createElement("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2"},"Personal Information"),c.createElement("div",{className:"space-y-4"},c.createElement(ra,{label:"Full Name",name:"name",value:N.name,onChange:I,disabled:!o,required:!0}),c.createElement(ra,{label:"Email Address",type:"email",name:"email",value:N.email,onChange:I,disabled:!o,required:!0}),c.createElement(ra,{label:"CNIC",name:"cnic",value:N.cnic,onChange:I,disabled:!o,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,required:!0}))),c.createElement("div",{className:"space-y-6"},c.createElement("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2"},"Account Information"),c.createElement("div",{className:"space-y-4"},c.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},c.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"User ID"),c.createElement("p",{className:"text-gray-900 font-mono text-sm"},e._id)),c.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},c.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Role"),c.createElement("p",{className:"text-gray-900 capitalize"},e.role)),c.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},c.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Member Since"),c.createElement("p",{className:"text-gray-900"},new Date(e.createdAt).toLocaleDateString()))))),c.createElement("div",{className:"mt-12"},c.createElement("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2 mb-6"},"Consultation History"),c.createElement("div",{className:"bg-gray-50 p-6 rounded-lg text-center"},c.createElement("p",{className:"text-gray-600 mb-4"},"Your consultation history will appear here"),c.createElement("p",{className:"text-sm text-gray-500"},"Start your first consultation by booking an appointment with a doctor")))))):c.createElement("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"text-center"},c.createElement("p",{className:"text-lg text-emerald-700"},"Please login to view your profile")))};var im={exports:{}},i_;function SA(){if(i_)return im.exports;i_=1;var e=typeof Reflect=="object"?Reflect:null,r=e&&typeof e.apply=="function"?e.apply:function(S,H,x){return Function.prototype.apply.call(S,H,x)},i;e&&typeof e.ownKeys=="function"?i=e.ownKeys:Object.getOwnPropertySymbols?i=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:i=function(S){return Object.getOwnPropertyNames(S)};function o(P){console&&console.warn&&console.warn(P)}var h=Number.isNaN||function(S){return S!==S};function N(){N.init.call(this)}im.exports=N,im.exports.once=g,N.EventEmitter=N,N.prototype._events=void 0,N.prototype._eventsCount=0,N.prototype._maxListeners=void 0;var B=10;function I(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(N,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(P){if(typeof P!="number"||P<0||h(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");B=P}}),N.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},N.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||h(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function k(P){return P._maxListeners===void 0?N.defaultMaxListeners:P._maxListeners}N.prototype.getMaxListeners=function(){return k(this)},N.prototype.emit=function(S){for(var H=[],x=1;x<arguments.length;x++)H.push(arguments[x]);var y=S==="error",w=this._events;if(w!==void 0)y=y&&w.error===void 0;else if(!y)return!1;if(y){var p;if(H.length>0&&(p=H[0]),p instanceof Error)throw p;var C=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw C.context=p,C}var A=w[S];if(A===void 0)return!1;if(typeof A=="function")r(A,this,H);else for(var M=A.length,j=v(A,M),x=0;x<M;++x)r(j[x],this,H);return!0};function d(P,S,H,x){var y,w,p;if(I(H),w=P._events,w===void 0?(w=P._events=Object.create(null),P._eventsCount=0):(w.newListener!==void 0&&(P.emit("newListener",S,H.listener?H.listener:H),w=P._events),p=w[S]),p===void 0)p=w[S]=H,++P._eventsCount;else if(typeof p=="function"?p=w[S]=x?[H,p]:[p,H]:x?p.unshift(H):p.push(H),y=k(P),y>0&&p.length>y&&!p.warned){p.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=P,C.type=S,C.count=p.length,o(C)}return P}N.prototype.addListener=function(S,H){return d(this,S,H,!1)},N.prototype.on=N.prototype.addListener,N.prototype.prependListener=function(S,H){return d(this,S,H,!0)};function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(P,S,H){var x={fired:!1,wrapFn:void 0,target:P,type:S,listener:H},y=E.bind(x);return y.listener=H,x.wrapFn=y,y}N.prototype.once=function(S,H){return I(H),this.on(S,_(this,S,H)),this},N.prototype.prependOnceListener=function(S,H){return I(H),this.prependListener(S,_(this,S,H)),this},N.prototype.removeListener=function(S,H){var x,y,w,p,C;if(I(H),y=this._events,y===void 0)return this;if(x=y[S],x===void 0)return this;if(x===H||x.listener===H)--this._eventsCount===0?this._events=Object.create(null):(delete y[S],y.removeListener&&this.emit("removeListener",S,x.listener||H));else if(typeof x!="function"){for(w=-1,p=x.length-1;p>=0;p--)if(x[p]===H||x[p].listener===H){C=x[p].listener,w=p;break}if(w<0)return this;w===0?x.shift():f(x,w),x.length===1&&(y[S]=x[0]),y.removeListener!==void 0&&this.emit("removeListener",S,C||H)}return this},N.prototype.off=N.prototype.removeListener,N.prototype.removeAllListeners=function(S){var H,x,y;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[S]),this;if(arguments.length===0){var w=Object.keys(x),p;for(y=0;y<w.length;++y)p=w[y],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(H=x[S],typeof H=="function")this.removeListener(S,H);else if(H!==void 0)for(y=H.length-1;y>=0;y--)this.removeListener(S,H[y]);return this};function b(P,S,H){var x=P._events;if(x===void 0)return[];var y=x[S];return y===void 0?[]:typeof y=="function"?H?[y.listener||y]:[y]:H?R(y):v(y,y.length)}N.prototype.listeners=function(S){return b(this,S,!0)},N.prototype.rawListeners=function(S){return b(this,S,!1)},N.listenerCount=function(P,S){return typeof P.listenerCount=="function"?P.listenerCount(S):T.call(P,S)},N.prototype.listenerCount=T;function T(P){var S=this._events;if(S!==void 0){var H=S[P];if(typeof H=="function")return 1;if(H!==void 0)return H.length}return 0}N.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function v(P,S){for(var H=new Array(S),x=0;x<S;++x)H[x]=P[x];return H}function f(P,S){for(;S+1<P.length;S++)P[S]=P[S+1];P.pop()}function R(P){for(var S=new Array(P.length),H=0;H<S.length;++H)S[H]=P[H].listener||P[H];return S}function g(P,S){return new Promise(function(H,x){function y(p){P.removeListener(S,w),x(p)}function w(){typeof P.removeListener=="function"&&P.removeListener("error",y),H([].slice.call(arguments))}m(P,S,w,{once:!0}),S!=="error"&&F(P,y,{once:!0})})}function F(P,S,H){typeof P.on=="function"&&m(P,"error",S,H)}function m(P,S,H,x){if(typeof P.on=="function")x.once?P.once(S,H):P.on(S,H);else if(typeof P.addEventListener=="function")P.addEventListener(S,function y(w){x.once&&P.removeEventListener(S,y),H(w)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P)}return im.exports}var xA=SA();const RA=Ff(xA);var yf={exports:{}},s_;function kA(){return s_||(s_=1,function(e,r){var i={};/*! For license information please see videosdk.js.LICENSE.txt */(function(o,h){e.exports=h()})(self,()=>(()=>{var o={11:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Chrome74=void 0;const E=d(7363),_=d(2994),b=d(1765),T=d(8046),v=d(5544),f=d(5938),R=d(4256),g=d(4893),F=d(521),m=d(1305),P=d(3303),S=new _.Logger("Chrome74"),H={OS:1024,MIS:1024};class x extends F.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new x}constructor(){super()}get name(){return"Chrome74"}close(){if(S.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const w=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{w.addTransceiver("audio"),w.addTransceiver("video");const p=await w.createOffer();try{w.close()}catch{}const C=E.parse(p.sdp),A=v.extractRtpCapabilities({sdpObject:C});return R.addNackSupportForOpus(A),A}catch(p){try{w.close()}catch{}throw p}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:H}}run({direction:w,iceParameters:p,iceCandidates:C,dtlsParameters:A,sctpParameters:M,iceServers:j,iceTransportPolicy:U,additionalSettings:z,proprietaryConstraints:W,extendedRtpCapabilities:Z}){S.debug("run()"),this._direction=w,this._remoteSdp=new m.RemoteSdp({iceParameters:p,iceCandidates:C,dtlsParameters:A,sctpParameters:M}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",Z),video:T.getSendingRtpParameters("video",Z)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",Z),video:T.getSendingRemoteRtpParameters("video",Z)},A.role&&A.role!=="auto"&&(this._forcedLocalDtlsRole=A.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:j??[],iceTransportPolicy:U??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...z},W),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ce=>{this.emit("@icecandidateerror",ce)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(w){this.assertNotClosed(),S.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=w,this._pc.setConfiguration(p)}async restartIce(w){if(this.assertNotClosed(),S.debug("restartIce()"),this._remoteSdp.updateIceParameters(w),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const C={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:w,encodings:p,codecOptions:C,codec:A}){this.assertNotClosed(),this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",w.kind,w.id),p&&p.length>1&&p.forEach((ye,Te)=>{ye.rid=`r${Te}`});const M=b.clone(this._sendingRtpParametersByKind[w.kind]);M.codecs=T.reduceCodecs(M.codecs,A);const j=b.clone(this._sendingRemoteRtpParametersByKind[w.kind]);j.codecs=T.reduceCodecs(j.codecs,A);const U=this._remoteSdp.getNextMediaSectionIdx(),z=this._pc.addTransceiver(w,{direction:"sendonly",streams:[this._sendStream],sendEncodings:p});let W,Z=await this._pc.createOffer(),ce=E.parse(Z.sdp);ce.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ce});let J=!1;const Ee=(0,P.parse)((p??[{}])[0].scalabilityMode);p&&p.length===1&&Ee.spatialLayers>1&&M.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(S.debug("send() | enabling legacy simulcast for VP9 SVC"),J=!0,ce=E.parse(Z.sdp),W=ce.media[U.idx],f.addLegacySimulcast({offerMediaObject:W,numStreams:Ee.spatialLayers}),Z={type:"offer",sdp:E.write(ce)}),S.debug("send() | calling pc.setLocalDescription() [offer:%o]",Z),await this._pc.setLocalDescription(Z);const Ce=z.mid;if(M.mid=Ce,ce=E.parse(this._pc.localDescription.sdp),W=ce.media[U.idx],M.rtcp.cname=v.getCname({offerMediaObject:W}),p)if(p.length===1){let ye=f.getRtpEncodings({offerMediaObject:W});Object.assign(ye[0],p[0]),J&&(ye=[ye[0]]),M.encodings=ye}else M.encodings=p;else M.encodings=f.getRtpEncodings({offerMediaObject:W});if(M.encodings.length>1&&(M.codecs[0].mimeType.toLowerCase()==="video/vp8"||M.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ye of M.encodings)ye.scalabilityMode?ye.scalabilityMode=`L1T${Ee.temporalLayers}`:ye.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:W,reuseMid:U.reuseMid,offerRtpParameters:M,answerRtpParameters:j,codecOptions:C});const Re={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Re),await this._pc.setRemoteDescription(Re),this._mapMidTransceiver.set(Ce,z),{localId:Ce,rtpParameters:M,rtpSender:z.sender}}async stopSending(w){if(this.assertSendDirection(),S.debug("stopSending() [localId:%s]",w),this._closed)return;const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const C=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._mapMidTransceiver.delete(w)}async pauseSending(w){this.assertNotClosed(),this.assertSendDirection(),S.debug("pauseSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(w);const C=await this._pc.createOffer();S.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async resumeSending(w){this.assertNotClosed(),this.assertSendDirection(),S.debug("resumeSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(this._remoteSdp.resumeSendingMediaSection(w),!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly";const C=await this._pc.createOffer();S.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async replaceTrack(w,p){this.assertNotClosed(),this.assertSendDirection(),p?S.debug("replaceTrack() [localId:%s, track.id:%s]",w,p.id):S.debug("replaceTrack() [localId:%s, no track]",w);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");await C.sender.replaceTrack(p)}async setMaxSpatialLayer(w,p){this.assertNotClosed(),this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",w,p);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");const A=C.sender.getParameters();A.encodings.forEach((U,z)=>{U.active=z<=p}),await C.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const M=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const j={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async setRtpEncodingParameters(w,p){this.assertNotClosed(),this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",w,p);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");const A=C.sender.getParameters();A.encodings.forEach((U,z)=>{A.encodings[z]={...U,...p}}),await C.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const M=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const j={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async getSenderStats(w){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:w,maxPacketLifeTime:p,maxRetransmits:C,label:A,protocol:M}){this.assertNotClosed(),this.assertSendDirection();const j={negotiated:!0,id:this._nextSendSctpStreamId,ordered:w,maxPacketLifeTime:p,maxRetransmits:C,protocol:M};S.debug("sendDataChannel() [options:%o]",j);const U=this._pc.createDataChannel(A,j);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%H.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),W=E.parse(z.sdp),Z=W.media.find(J=>J.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:Z});const ce={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setRemoteDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:U,sctpStreamParameters:{streamId:j.id,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits}}}async receive(w){this.assertNotClosed(),this.assertRecvDirection();const p=[],C=new Map;for(const U of w){const{trackId:z,kind:W,rtpParameters:Z,streamId:ce}=U;S.debug("receive() [trackId:%s, kind:%s]",z,W);const J=Z.mid??String(this._mapMidTransceiver.size);C.set(z,J),this._remoteSdp.receive({mid:J,kind:W,offerRtpParameters:Z,streamId:ce??Z.rtcp.cname,trackId:z})}const A={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",A),await this._pc.setRemoteDescription(A);let M=await this._pc.createAnswer();const j=E.parse(M.sdp);for(const U of w){const{trackId:z,rtpParameters:W}=U,Z=C.get(z),ce=j.media.find(J=>String(J.mid)===Z);v.applyCodecParameters({offerRtpParameters:W,answerMediaObject:ce})}M={type:"answer",sdp:E.write(j)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",M),await this._pc.setLocalDescription(M);for(const U of w){const{trackId:z}=U,W=C.get(z),Z=this._pc.getTransceivers().find(ce=>ce.mid===W);if(!Z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(W,Z),p.push({localId:W,track:Z.receiver.track,rtpReceiver:Z.receiver})}return p}async stopReceiving(w){if(this.assertRecvDirection(),this._closed)return;for(const A of w){S.debug("stopReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(M.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C);for(const A of w)this._mapMidTransceiver.delete(A)}async pauseReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){S.debug("pauseReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="inactive",this._remoteSdp.pauseMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}async resumeReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){S.debug("resumeReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}async getReceiverStats(w){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:w,label:p,protocol:C}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:A,ordered:M,maxPacketLifeTime:j,maxRetransmits:U}=w,z={negotiated:!0,id:A,ordered:M,maxPacketLifeTime:j,maxRetransmits:U,protocol:C};S.debug("receiveDataChannel() [options:%o]",z);const W=this._pc.createDataChannel(p,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Z={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Z),await this._pc.setRemoteDescription(Z);const ce=await this._pc.createAnswer();if(!this._transportReady){const J=E.parse(ce.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setLocalDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:W}}async setupTransport({localDtlsRole:w,localSdpObject:p}){p||(p=E.parse(this._pc.localDescription.sdp));const C=v.extractDtlsParameters({sdpObject:p});C.role=w,this._remoteSdp.updateDtlsRole(w==="client"?"server":"client"),await new Promise((A,M)=>{this.safeEmit("@connect",{dtlsParameters:C},A,M)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.Chrome74=x},19:function(I,k,d){var E,_,b,T,v,f,R,g,F;I.exports=(F=d(9021),d(3009),d(1025),_=(E=F).lib,b=_.Base,T=_.WordArray,v=E.algo,f=v.SHA256,R=v.HMAC,g=v.PBKDF2=b.extend({cfg:b.extend({keySize:4,hasher:f,iterations:25e4}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,P){for(var S=this.cfg,H=R.create(S.hasher,m),x=T.create(),y=T.create([1]),w=x.words,p=y.words,C=S.keySize,A=S.iterations;w.length<C;){var M=H.update(P).finalize(y);H.reset();for(var j=M.words,U=j.length,z=M,W=1;W<A;W++){z=H.finalize(z),H.reset();for(var Z=z.words,ce=0;ce<U;ce++)j[ce]^=Z[ce]}x.concat(M),p[0]++}return x.sigBytes=4*C,x}}),E.PBKDF2=function(m,P,S){return g.create(S).compute(m,P)},F.PBKDF2)},25:function(I,k,d){var E,_,b,T;I.exports=(T=d(9021),d(7165),_=(E=T).lib.CipherParams,b=E.enc.Hex,E.format.Hex={stringify:function(v){return v.ciphertext.toString(b)},parse:function(v){var f=b.parse(v);return _.create({ciphertext:f})}},T.format.Hex)},76:(I,k,d)=>{k.s$=k.pF=void 0,d(7833).default,d(8057);var E=d(6004);Object.defineProperty(k,"pF",{enumerable:!0,get:function(){return E.Device}});var _=d(3303);Object.defineProperty(k,"s$",{enumerable:!0,get:function(){return _.parse}}),d(8046),d(2731),d(5248)},182:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.version=k.validate=k.v7=k.v6ToV1=k.v6=k.v5=k.v4=k.v3=k.v1ToV6=k.v1=k.stringify=k.parse=k.NIL=k.MAX=void 0;var E=d(2196);Object.defineProperty(k,"MAX",{enumerable:!0,get:function(){return E.default}});var _=d(3465);Object.defineProperty(k,"NIL",{enumerable:!0,get:function(){return _.default}});var b=d(1797);Object.defineProperty(k,"parse",{enumerable:!0,get:function(){return b.default}});var T=d(6011);Object.defineProperty(k,"stringify",{enumerable:!0,get:function(){return T.default}});var v=d(1425);Object.defineProperty(k,"v1",{enumerable:!0,get:function(){return v.default}});var f=d(6568);Object.defineProperty(k,"v1ToV6",{enumerable:!0,get:function(){return f.default}});var R=d(591);Object.defineProperty(k,"v3",{enumerable:!0,get:function(){return R.default}});var g=d(8286);Object.defineProperty(k,"v4",{enumerable:!0,get:function(){return g.default}});var F=d(4557);Object.defineProperty(k,"v5",{enumerable:!0,get:function(){return F.default}});var m=d(6356);Object.defineProperty(k,"v6",{enumerable:!0,get:function(){return m.default}});var P=d(268);Object.defineProperty(k,"v6ToV1",{enumerable:!0,get:function(){return P.default}});var S=d(4299);Object.defineProperty(k,"v7",{enumerable:!0,get:function(){return S.default}});var H=d(9746);Object.defineProperty(k,"validate",{enumerable:!0,get:function(){return H.default}});var x=d(2770);Object.defineProperty(k,"version",{enumerable:!0,get:function(){return x.default}})},268:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0});const E=d(1797),_=d(6011);k.default=function(b){const T=function(v){return Uint8Array.of((15&v[3])<<4|v[4]>>4&15,(15&v[4])<<4|(240&v[5])>>4,(15&v[5])<<4|15&v[6],v[7],(15&v[1])<<4|(240&v[2])>>4,(15&v[2])<<4|(240&v[3])>>4,16|(240&v[0])>>4,(15&v[0])<<4|(240&v[1])>>4,v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])}(typeof b=="string"?(0,E.default)(b):b);return typeof b=="string"?(0,_.unsafeStringify)(T):T}},296:(I,k,d)=>{d.d(k,{A:()=>_});var E=d(7800);function _(b,T){return function(v){if(Array.isArray(v))return v}(b)||function(v,f){var R=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(R!=null){var g,F,m,P,S=[],H=!0,x=!1;try{if(m=(R=R.call(v)).next,f===0){if(Object(R)!==R)return;H=!1}else for(;!(H=(g=m.call(R)).done)&&(S.push(g.value),S.length!==f);H=!0);}catch(y){x=!0,F=y}finally{try{if(!H&&R.return!=null&&(P=R.return(),Object(P)!==P))return}finally{if(x)throw F}}return S}}(b,T)||(0,E.A)(b,T)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},328:(I,k,d)=>{d(8624),I.exports=self.fetch.bind(self)},338:(I,k)=>{function d(R){return 14+(R+64>>>9<<4)+1}function E(R,g){const F=(65535&R)+(65535&g);return(R>>16)+(g>>16)+(F>>16)<<16|65535&F}function _(R,g,F,m,P,S){return E((H=E(E(g,R),E(m,S)))<<(x=P)|H>>>32-x,F);var H,x}function b(R,g,F,m,P,S,H){return _(g&F|~g&m,R,g,P,S,H)}function T(R,g,F,m,P,S,H){return _(g&m|F&~m,R,g,P,S,H)}function v(R,g,F,m,P,S,H){return _(g^F^m,R,g,P,S,H)}function f(R,g,F,m,P,S,H){return _(F^(g|~m),R,g,P,S,H)}Object.defineProperty(k,"__esModule",{value:!0}),k.default=function(R){return function(g){const F=new Uint8Array(4*g.length);for(let m=0;m<4*g.length;m++)F[m]=g[m>>2]>>>m%4*8&255;return F}(function(g,F){const m=new Uint32Array(d(F)).fill(0);m.set(g),m[F>>5]|=128<<F%32,m[m.length-1]=F,g=m;let P=1732584193,S=-271733879,H=-1732584194,x=271733878;for(let y=0;y<g.length;y+=16){const w=P,p=S,C=H,A=x;P=b(P,S,H,x,g[y],7,-680876936),x=b(x,P,S,H,g[y+1],12,-389564586),H=b(H,x,P,S,g[y+2],17,606105819),S=b(S,H,x,P,g[y+3],22,-1044525330),P=b(P,S,H,x,g[y+4],7,-176418897),x=b(x,P,S,H,g[y+5],12,1200080426),H=b(H,x,P,S,g[y+6],17,-1473231341),S=b(S,H,x,P,g[y+7],22,-45705983),P=b(P,S,H,x,g[y+8],7,1770035416),x=b(x,P,S,H,g[y+9],12,-1958414417),H=b(H,x,P,S,g[y+10],17,-42063),S=b(S,H,x,P,g[y+11],22,-1990404162),P=b(P,S,H,x,g[y+12],7,1804603682),x=b(x,P,S,H,g[y+13],12,-40341101),H=b(H,x,P,S,g[y+14],17,-1502002290),S=b(S,H,x,P,g[y+15],22,1236535329),P=T(P,S,H,x,g[y+1],5,-165796510),x=T(x,P,S,H,g[y+6],9,-1069501632),H=T(H,x,P,S,g[y+11],14,643717713),S=T(S,H,x,P,g[y],20,-373897302),P=T(P,S,H,x,g[y+5],5,-701558691),x=T(x,P,S,H,g[y+10],9,38016083),H=T(H,x,P,S,g[y+15],14,-660478335),S=T(S,H,x,P,g[y+4],20,-405537848),P=T(P,S,H,x,g[y+9],5,568446438),x=T(x,P,S,H,g[y+14],9,-1019803690),H=T(H,x,P,S,g[y+3],14,-187363961),S=T(S,H,x,P,g[y+8],20,1163531501),P=T(P,S,H,x,g[y+13],5,-1444681467),x=T(x,P,S,H,g[y+2],9,-51403784),H=T(H,x,P,S,g[y+7],14,1735328473),S=T(S,H,x,P,g[y+12],20,-1926607734),P=v(P,S,H,x,g[y+5],4,-378558),x=v(x,P,S,H,g[y+8],11,-2022574463),H=v(H,x,P,S,g[y+11],16,1839030562),S=v(S,H,x,P,g[y+14],23,-35309556),P=v(P,S,H,x,g[y+1],4,-1530992060),x=v(x,P,S,H,g[y+4],11,1272893353),H=v(H,x,P,S,g[y+7],16,-155497632),S=v(S,H,x,P,g[y+10],23,-1094730640),P=v(P,S,H,x,g[y+13],4,681279174),x=v(x,P,S,H,g[y],11,-358537222),H=v(H,x,P,S,g[y+3],16,-722521979),S=v(S,H,x,P,g[y+6],23,76029189),P=v(P,S,H,x,g[y+9],4,-640364487),x=v(x,P,S,H,g[y+12],11,-421815835),H=v(H,x,P,S,g[y+15],16,530742520),S=v(S,H,x,P,g[y+2],23,-995338651),P=f(P,S,H,x,g[y],6,-198630844),x=f(x,P,S,H,g[y+7],10,1126891415),H=f(H,x,P,S,g[y+14],15,-1416354905),S=f(S,H,x,P,g[y+5],21,-57434055),P=f(P,S,H,x,g[y+12],6,1700485571),x=f(x,P,S,H,g[y+3],10,-1894986606),H=f(H,x,P,S,g[y+10],15,-1051523),S=f(S,H,x,P,g[y+1],21,-2054922799),P=f(P,S,H,x,g[y+8],6,1873313359),x=f(x,P,S,H,g[y+15],10,-30611744),H=f(H,x,P,S,g[y+6],15,-1560198380),S=f(S,H,x,P,g[y+13],21,1309151649),P=f(P,S,H,x,g[y+4],6,-145523070),x=f(x,P,S,H,g[y+11],10,-1120210379),H=f(H,x,P,S,g[y+2],15,718787259),S=f(S,H,x,P,g[y+9],21,-343485551),P=E(P,w),S=E(S,p),H=E(H,C),x=E(x,A)}return Uint32Array.of(P,S,H,x)}(function(g){if(g.length===0)return new Uint32Array;const F=new Uint32Array(d(8*g.length)).fill(0);for(let m=0;m<g.length;m++)F[m>>2]|=(255&g[m])<<m%4*8;return F}(R),8*R.length))}},388:(I,k,d)=>{d.d(k,{A:()=>_});var E=d(2284);function _(b,T){if(T&&((0,E.A)(T)=="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}(b)}},467:(I,k,d)=>{function E(b,T,v,f,R,g,F){try{var m=b[g](F),P=m.value}catch(S){return void v(S)}m.done?T(P):Promise.resolve(P).then(f,R)}function _(b){return function(){var T=this,v=arguments;return new Promise(function(f,R){var g=b.apply(T,v);function F(P){E(g,f,R,F,m,"next",P)}function m(P){E(g,f,R,F,m,"throw",P)}F(void 0)})}}d.d(k,{A:()=>_})},477:()=>{},482:function(I,k,d){var E;I.exports=(E=d(9021),d(7165),E.pad.Iso97971={pad:function(_,b){_.concat(E.lib.WordArray.create([2147483648],1)),E.pad.ZeroPadding.pad(_,b)},unpad:function(_){E.pad.ZeroPadding.unpad(_),_.sigBytes--}},E.pad.Iso97971)},521:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.HandlerInterface=void 0;const E=d(3953);class _ extends E.EnhancedEventEmitter{constructor(){super()}}k.HandlerInterface=_},579:(I,k,d)=>{var E=d(3738).default;I.exports=function(_){if(_!=null){var b=_[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],T=0;if(b)return b.call(_);if(typeof _.next=="function")return _;if(!isNaN(_.length))return{next:function(){return _&&T>=_.length&&(_=void 0),{value:_&&_[T++],done:!_}}}}throw new TypeError(E(_)+" is not iterable")},I.exports.__esModule=!0,I.exports.default=I.exports},591:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.URL=k.DNS=void 0;const E=d(338),_=d(2988);var b=d(2988);function T(v,f,R,g){return(0,_.default)(48,E.default,v,f,R,g)}Object.defineProperty(k,"DNS",{enumerable:!0,get:function(){return b.DNS}}),Object.defineProperty(k,"URL",{enumerable:!0,get:function(){return b.URL}}),T.DNS=_.DNS,T.URL=_.URL,k.default=T},736:(I,k,d)=>{I.exports=function(E){function _(v){let f,R,g,F=null;function m(...P){if(!m.enabled)return;const S=m,H=Number(new Date),x=H-(f||H);S.diff=x,S.prev=f,S.curr=H,f=H,P[0]=_.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let y=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(w,p)=>{if(w==="%%")return"%";y++;const C=_.formatters[p];if(typeof C=="function"){const A=P[y];w=C.call(S,A),P.splice(y,1),y--}return w}),_.formatArgs.call(S,P),(S.log||_.log).apply(S,P)}return m.namespace=v,m.useColors=_.useColors(),m.color=_.selectColor(v),m.extend=b,m.destroy=_.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>F!==null?F:(R!==_.namespaces&&(R=_.namespaces,g=_.enabled(v)),g),set:P=>{F=P}}),typeof _.init=="function"&&_.init(m),m}function b(v,f){const R=_(this.namespace+(f===void 0?":":f)+v);return R.log=this.log,R}function T(v,f){let R=0,g=0,F=-1,m=0;for(;R<v.length;)if(g<f.length&&(f[g]===v[R]||f[g]==="*"))f[g]==="*"?(F=g,m=R,g++):(R++,g++);else{if(F===-1)return!1;g=F+1,m++,R=m}for(;g<f.length&&f[g]==="*";)g++;return g===f.length}return _.debug=_,_.default=_,_.coerce=function(v){return v instanceof Error?v.stack||v.message:v},_.disable=function(){const v=[..._.names,..._.skips.map(f=>"-"+f)].join(",");return _.enable(""),v},_.enable=function(v){_.save(v),_.namespaces=v,_.names=[],_.skips=[];const f=(typeof v=="string"?v:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const R of f)R[0]==="-"?_.skips.push(R.slice(1)):_.names.push(R)},_.enabled=function(v){for(const f of _.skips)if(T(v,f))return!1;for(const f of _.names)if(T(v,f))return!0;return!1},_.humanize=d(6585),_.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(E).forEach(v=>{_[v]=E[v]}),_.names=[],_.skips=[],_.formatters={},_.selectColor=function(v){let f=0;for(let R=0;R<v.length;R++)f=(f<<5)-f+v.charCodeAt(R),f|=0;return _.colors[Math.abs(f)%_.colors.length]},_.enable(_.load()),_}},754:function(I,k,d){var E;I.exports=(E=d(9021),function(){var _=E,b=_.lib.WordArray;function T(v,f,R){for(var g=[],F=0,m=0;m<f;m++)if(m%4){var P=R[v.charCodeAt(m-1)]<<m%4*2|R[v.charCodeAt(m)]>>>6-m%4*2;g[F>>>2]|=P<<24-F%4*8,F++}return b.create(g,F)}_.enc.Base64={stringify:function(v){var f=v.words,R=v.sigBytes,g=this._map;v.clamp();for(var F=[],m=0;m<R;m+=3)for(var P=(f[m>>>2]>>>24-m%4*8&255)<<16|(f[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|f[m+2>>>2]>>>24-(m+2)%4*8&255,S=0;S<4&&m+.75*S<R;S++)F.push(g.charAt(P>>>6*(3-S)&63));var H=g.charAt(64);if(H)for(;F.length%4;)F.push(H);return F.join("")},parse:function(v){var f=v.length,R=this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var F=0;F<R.length;F++)g[R.charCodeAt(F)]=F}var m=R.charAt(64);if(m){var P=v.indexOf(m);P!==-1&&(f=P)}return T(v,f,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),E.enc.Base64)},816:(I,k,d)=>{d.d(k,{A:()=>_});var E=d(2284);function _(b){var T=function(v,f){if((0,E.A)(v)!="object"||!v)return v;var R=v[Symbol.toPrimitive];if(R!==void 0){var g=R.call(v,f);if((0,E.A)(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(v)}(b,"string");return(0,E.A)(T)=="symbol"?T:T+""}},887:(I,k,d)=>{var E=d(6993),_=d(1791);I.exports=function(b,T,v,f,R){return new _(E().w(b,T,v,f),R||Promise)},I.exports.__esModule=!0,I.exports.default=I.exports},955:function(I,k,d){var E;I.exports=(E=d(9021),d(754),d(4636),d(9506),d(7165),function(){var _=E,b=_.lib.BlockCipher,T=_.algo,v=[],f=[],R=[],g=[],F=[],m=[],P=[],S=[],H=[],x=[];(function(){for(var p=[],C=0;C<256;C++)p[C]=C<128?C<<1:C<<1^283;var A=0,M=0;for(C=0;C<256;C++){var j=M^M<<1^M<<2^M<<3^M<<4;j=j>>>8^255&j^99,v[A]=j,f[j]=A;var U=p[A],z=p[U],W=p[z],Z=257*p[j]^16843008*j;R[A]=Z<<24|Z>>>8,g[A]=Z<<16|Z>>>16,F[A]=Z<<8|Z>>>24,m[A]=Z,Z=16843009*W^65537*z^257*U^16843008*A,P[j]=Z<<24|Z>>>8,S[j]=Z<<16|Z>>>16,H[j]=Z<<8|Z>>>24,x[j]=Z,A?(A=U^p[p[p[W^U]]],M^=p[p[M]]):A=M=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],w=T.AES=b.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var p=this._keyPriorReset=this._key,C=p.words,A=p.sigBytes/4,M=4*((this._nRounds=A+6)+1),j=this._keySchedule=[],U=0;U<M;U++)U<A?j[U]=C[U]:(Z=j[U-1],U%A?A>6&&U%A==4&&(Z=v[Z>>>24]<<24|v[Z>>>16&255]<<16|v[Z>>>8&255]<<8|v[255&Z]):(Z=v[(Z=Z<<8|Z>>>24)>>>24]<<24|v[Z>>>16&255]<<16|v[Z>>>8&255]<<8|v[255&Z],Z^=y[U/A|0]<<24),j[U]=j[U-A]^Z);for(var z=this._invKeySchedule=[],W=0;W<M;W++){if(U=M-W,W%4)var Z=j[U];else Z=j[U-4];z[W]=W<4||U<=4?Z:P[v[Z>>>24]]^S[v[Z>>>16&255]]^H[v[Z>>>8&255]]^x[v[255&Z]]}}},encryptBlock:function(p,C){this._doCryptBlock(p,C,this._keySchedule,R,g,F,m,v)},decryptBlock:function(p,C){var A=p[C+1];p[C+1]=p[C+3],p[C+3]=A,this._doCryptBlock(p,C,this._invKeySchedule,P,S,H,x,f),A=p[C+1],p[C+1]=p[C+3],p[C+3]=A},_doCryptBlock:function(p,C,A,M,j,U,z,W){for(var Z=this._nRounds,ce=p[C]^A[0],J=p[C+1]^A[1],Ee=p[C+2]^A[2],Ce=p[C+3]^A[3],Re=4,ye=1;ye<Z;ye++){var Te=M[ce>>>24]^j[J>>>16&255]^U[Ee>>>8&255]^z[255&Ce]^A[Re++],He=M[J>>>24]^j[Ee>>>16&255]^U[Ce>>>8&255]^z[255&ce]^A[Re++],we=M[Ee>>>24]^j[Ce>>>16&255]^U[ce>>>8&255]^z[255&J]^A[Re++],Je=M[Ce>>>24]^j[ce>>>16&255]^U[J>>>8&255]^z[255&Ee]^A[Re++];ce=Te,J=He,Ee=we,Ce=Je}Te=(W[ce>>>24]<<24|W[J>>>16&255]<<16|W[Ee>>>8&255]<<8|W[255&Ce])^A[Re++],He=(W[J>>>24]<<24|W[Ee>>>16&255]<<16|W[Ce>>>8&255]<<8|W[255&ce])^A[Re++],we=(W[Ee>>>24]<<24|W[Ce>>>16&255]<<16|W[ce>>>8&255]<<8|W[255&J])^A[Re++],Je=(W[Ce>>>24]<<24|W[ce>>>16&255]<<16|W[J>>>8&255]<<8|W[255&Ee])^A[Re++],p[C]=Te,p[C+1]=He,p[C+2]=we,p[C+3]=Je},keySize:8});_.AES=b._createHelper(w)}(),E.AES)},1025:function(I,k,d){var E,_,b,T;I.exports=(E=d(9021),b=(_=E).lib.Base,T=_.enc.Utf8,void(_.algo.HMAC=b.extend({init:function(v,f){v=this._hasher=new v.init,typeof f=="string"&&(f=T.parse(f));var R=v.blockSize,g=4*R;f.sigBytes>g&&(f=v.finalize(f)),f.clamp();for(var F=this._oKey=f.clone(),m=this._iKey=f.clone(),P=F.words,S=m.words,H=0;H<R;H++)P[H]^=1549556828,S[H]^=909522486;F.sigBytes=m.sigBytes=g,this.reset()},reset:function(){var v=this._hasher;v.reset(),v.update(this._iKey)},update:function(v){return this._hasher.update(v),this},finalize:function(v){var f=this._hasher,R=f.finalize(v);return f.reset(),f.finalize(this._oKey.clone().concat(R))}})))},1305:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.RemoteSdp=void 0;const E=d(7363),_=d(2994),b=d(3471),T=new _.Logger("RemoteSdp");k.RemoteSdp=class{_iceParameters;_iceCandidates;_dtlsParameters;_sctpParameters;_plainRtpParameters;_planB;_mediaSections=[];_midToIndex=new Map;_firstMid;_sdpObject;constructor({iceParameters:v,iceCandidates:f,dtlsParameters:R,sctpParameters:g,plainRtpParameters:F,planB:m=!1}){if(this._iceParameters=v,this._iceCandidates=f,this._dtlsParameters=R,this._sctpParameters=g,this._plainRtpParameters=F,this._planB=m,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},v?.iceLite&&(this._sdpObject.icelite="ice-lite"),R){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const P=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:R.fingerprints[P-1].algorithm,hash:R.fingerprints[P-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}F&&(this._sdpObject.origin.address=F.ip,this._sdpObject.origin.ipVer=F.ipVersion)}updateIceParameters(v){T.debug("updateIceParameters() [iceParameters:%o]",v),this._iceParameters=v,this._sdpObject.icelite=v.iceLite?"ice-lite":void 0;for(const f of this._mediaSections)f.setIceParameters(v)}updateDtlsRole(v){T.debug("updateDtlsRole() [role:%s]",v),this._dtlsParameters.role=v;for(const f of this._mediaSections)f.setDtlsRole(v)}setSessionExtmapAllowMixed(){T.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let v=0;v<this._mediaSections.length;++v){const f=this._mediaSections[v];if(f.closed)return{idx:v,reuseMid:f.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:v,reuseMid:f,offerRtpParameters:R,answerRtpParameters:g,codecOptions:F}){const m=new b.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:v,offerRtpParameters:R,answerRtpParameters:g,codecOptions:F});f?this._replaceMediaSection(m,f):this._midToIndex.has(m.mid)?this._replaceMediaSection(m):this._addMediaSection(m)}receive({mid:v,kind:f,offerRtpParameters:R,streamId:g,trackId:F}){const m=this._midToIndex.get(v);let P;if(m!==void 0&&(P=this._mediaSections[m]),this.setSessionExtmapAllowMixed(),P)P.planBReceive({offerRtpParameters:R,streamId:g,trackId:F}),this._replaceMediaSection(P);else{P=new b.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:v,kind:f,offerRtpParameters:R,streamId:g,trackId:F});const S=this._mediaSections.find(H=>H.closed);S?this._replaceMediaSection(P,S.mid):this._addMediaSection(P)}}pauseMediaSection(v){this._findMediaSection(v).pause()}resumeSendingMediaSection(v){this._findMediaSection(v).resume()}resumeReceivingMediaSection(v){this._findMediaSection(v).resume()}disableMediaSection(v){this._findMediaSection(v).disable()}closeMediaSection(v){const f=this._findMediaSection(v);return v===this._firstMid?(T.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",v),this.disableMediaSection(v),!1):(f.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(v,f){const R=this._findMediaSection(v);R.muxSimulcastStreams(f),this._replaceMediaSection(R)}planBStopReceiving({mid:v,offerRtpParameters:f}){const R=this._findMediaSection(v);R.planBStopReceiving({offerRtpParameters:f}),this._replaceMediaSection(R)}sendSctpAssociation({offerMediaObject:v}){const f=new b.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:v});this._addMediaSection(f)}receiveSctpAssociation({oldDataChannelSpec:v=!1}={}){const f=new b.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:v});this._addMediaSection(f)}getSdp(){return this._sdpObject.origin.sessionVersion++,E.write(this._sdpObject)}_addMediaSection(v){this._firstMid||(this._firstMid=v.mid),this._mediaSections.push(v),this._midToIndex.set(v.mid,this._mediaSections.length-1),this._sdpObject.media.push(v.getObject()),this._regenerateBundleMids()}_replaceMediaSection(v,f){if(typeof f=="string"){const R=this._midToIndex.get(f);if(R===void 0)throw new Error(`no media section found for reuseMid '${f}'`);const g=this._mediaSections[R];this._mediaSections[R]=v,this._midToIndex.delete(g.mid),this._midToIndex.set(v.mid,R),this._sdpObject.media[R]=v.getObject(),this._regenerateBundleMids()}else{const R=this._midToIndex.get(v.mid);if(R===void 0)throw new Error(`no media section found with mid '${v.mid}'`);this._mediaSections[R]=v,this._sdpObject.media[R]=v.getObject()}}_findMediaSection(v){const f=this._midToIndex.get(v);if(f===void 0)throw new Error(`no media section found with mid '${v}'`);return this._mediaSections[f]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(v=>!v.closed).map(v=>v.mid).join(" "))}}},1380:function(I,k,d){var E;I.exports=(E=d(9021),d(3240),function(){var _=E,b=_.lib.Hasher,T=_.x64,v=T.Word,f=T.WordArray,R=_.algo;function g(){return v.create.apply(v,arguments)}var F=[g(1116352408,3609767458),g(1899447441,602891725),g(3049323471,3964484399),g(3921009573,2173295548),g(961987163,4081628472),g(1508970993,3053834265),g(2453635748,2937671579),g(2870763221,3664609560),g(3624381080,2734883394),g(310598401,1164996542),g(607225278,1323610764),g(1426881987,3590304994),g(1925078388,4068182383),g(2162078206,991336113),g(2614888103,633803317),g(3248222580,3479774868),g(3835390401,2666613458),g(4022224774,944711139),g(264347078,2341262773),g(604807628,2007800933),g(770255983,1495990901),g(1249150122,1856431235),g(1555081692,3175218132),g(1996064986,2198950837),g(2554220882,3999719339),g(2821834349,766784016),g(2952996808,2566594879),g(3210313671,3203337956),g(3336571891,1034457026),g(3584528711,2466948901),g(113926993,3758326383),g(338241895,168717936),g(666307205,1188179964),g(773529912,1546045734),g(1294757372,1522805485),g(1396182291,2643833823),g(1695183700,2343527390),g(1986661051,1014477480),g(2177026350,1206759142),g(2456956037,344077627),g(2730485921,1290863460),g(2820302411,3158454273),g(3259730800,3505952657),g(3345764771,106217008),g(3516065817,3606008344),g(3600352804,1432725776),g(4094571909,1467031594),g(275423344,851169720),g(430227734,3100823752),g(506948616,1363258195),g(659060556,3750685593),g(883997877,3785050280),g(958139571,3318307427),g(1322822218,3812723403),g(1537002063,2003034995),g(1747873779,3602036899),g(1955562222,1575990012),g(2024104815,1125592928),g(2227730452,2716904306),g(2361852424,442776044),g(2428436474,593698344),g(2756734187,3733110249),g(3204031479,2999351573),g(3329325298,3815920427),g(3391569614,3928383900),g(3515267271,566280711),g(3940187606,3454069534),g(4118630271,4000239992),g(116418474,1914138554),g(174292421,2731055270),g(289380356,3203993006),g(460393269,320620315),g(685471733,587496836),g(852142971,1086792851),g(1017036298,365543100),g(1126000580,2618297676),g(1288033470,3409855158),g(1501505948,4234509866),g(1607167915,987167468),g(1816402316,1246189591)],m=[];(function(){for(var S=0;S<80;S++)m[S]=g()})();var P=R.SHA512=b.extend({_doReset:function(){this._hash=new f.init([new v.init(1779033703,4089235720),new v.init(3144134277,2227873595),new v.init(1013904242,4271175723),new v.init(2773480762,1595750129),new v.init(1359893119,2917565137),new v.init(2600822924,725511199),new v.init(528734635,4215389547),new v.init(1541459225,327033209)])},_doProcessBlock:function(S,H){for(var x=this._hash.words,y=x[0],w=x[1],p=x[2],C=x[3],A=x[4],M=x[5],j=x[6],U=x[7],z=y.high,W=y.low,Z=w.high,ce=w.low,J=p.high,Ee=p.low,Ce=C.high,Re=C.low,ye=A.high,Te=A.low,He=M.high,we=M.low,Je=j.high,Be=j.low,nt=U.high,Qe=U.low,Ze=z,Ht=W,or=Z,Nr=ce,jn=J,cr=Ee,Gn=Ce,Un=Re,Le=ye,je=Te,Ge=He,Qt=we,Ft=Je,xt=Be,pn=nt,Ln=Qe,Bt=0;Bt<80;Bt++){var lr,Fr,kr=m[Bt];if(Bt<16)Fr=kr.high=0|S[H+2*Bt],lr=kr.low=0|S[H+2*Bt+1];else{var Vr=m[Bt-15],Hr=Vr.high,Or=Vr.low,Gr=(Hr>>>1|Or<<31)^(Hr>>>8|Or<<24)^Hr>>>7,ga=(Or>>>1|Hr<<31)^(Or>>>8|Hr<<24)^(Or>>>7|Hr<<25),ta=m[Bt-2],oa=ta.high,Nn=ta.low,Ha=(oa>>>19|Nn<<13)^(oa<<3|Nn>>>29)^oa>>>6,Ca=(Nn>>>19|oa<<13)^(Nn<<3|oa>>>29)^(Nn>>>6|oa<<26),Kr=m[Bt-7],hr=Kr.high,at=Kr.low,ut=m[Bt-16],$t=ut.high,Tt=ut.low;Fr=(Fr=(Fr=Gr+hr+((lr=ga+at)>>>0<ga>>>0?1:0))+Ha+((lr+=Ca)>>>0<Ca>>>0?1:0))+$t+((lr+=Tt)>>>0<Tt>>>0?1:0),kr.high=Fr,kr.low=lr}var tn,Xt=Le&Ge^~Le&Ft,Xe=je&Qt^~je&xt,Sn=Ze&or^Ze&jn^or&jn,Rn=Ht&Nr^Ht&cr^Nr&cr,Zn=(Ze>>>28|Ht<<4)^(Ze<<30|Ht>>>2)^(Ze<<25|Ht>>>7),ur=(Ht>>>28|Ze<<4)^(Ht<<30|Ze>>>2)^(Ht<<25|Ze>>>7),Wt=(Le>>>14|je<<18)^(Le>>>18|je<<14)^(Le<<23|je>>>9),bt=(je>>>14|Le<<18)^(je>>>18|Le<<14)^(je<<23|Le>>>9),Pn=F[Bt],kn=Pn.high,bn=Pn.low,Ar=pn+Wt+((tn=Ln+bt)>>>0<Ln>>>0?1:0),Sr=ur+Rn;pn=Ft,Ln=xt,Ft=Ge,xt=Qt,Ge=Le,Qt=je,Le=Gn+(Ar=(Ar=(Ar=Ar+Xt+((tn+=Xe)>>>0<Xe>>>0?1:0))+kn+((tn+=bn)>>>0<bn>>>0?1:0))+Fr+((tn+=lr)>>>0<lr>>>0?1:0))+((je=Un+tn|0)>>>0<Un>>>0?1:0)|0,Gn=jn,Un=cr,jn=or,cr=Nr,or=Ze,Nr=Ht,Ze=Ar+(Zn+Sn+(Sr>>>0<ur>>>0?1:0))+((Ht=tn+Sr|0)>>>0<tn>>>0?1:0)|0}W=y.low=W+Ht,y.high=z+Ze+(W>>>0<Ht>>>0?1:0),ce=w.low=ce+Nr,w.high=Z+or+(ce>>>0<Nr>>>0?1:0),Ee=p.low=Ee+cr,p.high=J+jn+(Ee>>>0<cr>>>0?1:0),Re=C.low=Re+Un,C.high=Ce+Gn+(Re>>>0<Un>>>0?1:0),Te=A.low=Te+je,A.high=ye+Le+(Te>>>0<je>>>0?1:0),we=M.low=we+Qt,M.high=He+Ge+(we>>>0<Qt>>>0?1:0),Be=j.low=Be+xt,j.high=Je+Ft+(Be>>>0<xt>>>0?1:0),Qe=U.low=Qe+Ln,U.high=nt+pn+(Qe>>>0<Ln>>>0?1:0)},_doFinalize:function(){var S=this._data,H=S.words,x=8*this._nDataBytes,y=8*S.sigBytes;return H[y>>>5]|=128<<24-y%32,H[30+(y+128>>>10<<5)]=Math.floor(x/4294967296),H[31+(y+128>>>10<<5)]=x,S.sigBytes=4*H.length,this._process(),this._hash.toX32()},clone:function(){var S=b.clone.call(this);return S._hash=this._hash.clone(),S},blockSize:32});_.SHA512=b._createHelper(P),_.HmacSHA512=b._createHmacHelper(P)}(),E.SHA512)},1396:function(I,k,d){var E;I.exports=(E=d(9021),d(3240),d(6440),d(5503),d(754),d(4725),d(4636),d(5471),d(3009),d(6308),d(1380),d(9557),d(5953),d(8056),d(1025),d(19),d(9506),d(7165),d(2169),d(6939),d(6372),d(3797),d(8454),d(2073),d(4905),d(482),d(2155),d(8124),d(25),d(955),d(7628),d(7193),d(6298),d(2696),d(3128),E)},1425:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.updateV1State=void 0;const E=d(2291),_=d(6011),b={};function T(f,R,g){return f.msecs??=-1/0,f.nsecs??=0,R===f.msecs?(f.nsecs++,f.nsecs>=1e4&&(f.node=void 0,f.nsecs=0)):R>f.msecs?f.nsecs=0:R<f.msecs&&(f.node=void 0),f.node||(f.node=g.slice(10,16),f.node[0]|=1,f.clockseq=16383&(g[8]<<8|g[9])),f.msecs=R,f}function v(f,R,g,F,m,P,S=0){if(f.length<16)throw new Error("Random bytes length must be >= 16");if(P){if(S<0||S+16>P.length)throw new RangeError(`UUID byte range ${S}:${S+15} is out of buffer bounds`)}else P=new Uint8Array(16),S=0;R??=Date.now(),g??=0,F??=16383&(f[8]<<8|f[9]),m??=f.slice(10,16);const H=(1e4*(268435455&(R+=122192928e5))+g)%4294967296;P[S++]=H>>>24&255,P[S++]=H>>>16&255,P[S++]=H>>>8&255,P[S++]=255&H;const x=R/4294967296*1e4&268435455;P[S++]=x>>>8&255,P[S++]=255&x,P[S++]=x>>>24&15|16,P[S++]=x>>>16&255,P[S++]=F>>>8|128,P[S++]=255&F;for(let y=0;y<6;++y)P[S++]=m[y];return P}k.updateV1State=T,k.default=function(f,R,g){let F;const m=f?._v6??!1;if(f){const P=Object.keys(f);P.length===1&&P[0]==="_v6"&&(f=void 0)}if(f)F=v(f.random??f.rng?.()??(0,E.default)(),f.msecs,f.nsecs,f.clockseq,f.node,R,g);else{const P=Date.now(),S=(0,E.default)();T(b,P,S),F=v(S,b.msecs,b.nsecs,m?void 0:b.clockseq,m?void 0:b.node,R,g)}return R??(0,_.unsafeStringify)(F)}},1765:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.clone=function(d){return d===void 0?void 0:Number.isNaN(d)?NaN:typeof structuredClone=="function"?structuredClone(d):JSON.parse(JSON.stringify(d))},k.generateRandomNumber=function(){return Math.round(1e7*Math.random())},k.deepFreeze=function d(E){const _=Reflect.ownKeys(E);for(const b of _){const T=E[b];(T&&typeof T=="object"||typeof T=="function")&&d(T)}return Object.freeze(E)}},1767:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Firefox60=void 0;const E=d(7363),_=d(2994),b=d(4893),T=d(1765),v=d(8046),f=d(5544),R=d(5938),g=d(521),F=d(1305),m=d(3303),P=new _.Logger("Firefox60"),S={OS:16,MIS:2048};class H extends g.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new H}constructor(){super()}get name(){return"Firefox60"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const y=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),w=document.createElement("canvas");w.getContext("2d");const p=w.captureStream().getVideoTracks()[0];try{y.addTransceiver("audio",{direction:"sendrecv"});const C=y.addTransceiver(p,{direction:"sendrecv"}),A=C.sender.getParameters(),M=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];A.encodings=M,await C.sender.setParameters(A);const j=await y.createOffer();try{w.remove()}catch{}try{p.stop()}catch{}try{y.close()}catch{}const U=E.parse(j.sdp);return f.extractRtpCapabilities({sdpObject:U})}catch(C){try{w.remove()}catch{}try{p.stop()}catch{}try{y.close()}catch{}throw C}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:y,iceParameters:w,iceCandidates:p,dtlsParameters:C,sctpParameters:A,iceServers:M,iceTransportPolicy:j,additionalSettings:U,proprietaryConstraints:z,extendedRtpCapabilities:W}){this.assertNotClosed(),P.debug("run()"),this._direction=y,this._remoteSdp=new F.RemoteSdp({iceParameters:w,iceCandidates:p,dtlsParameters:C,sctpParameters:A}),this._sendingRtpParametersByKind={audio:v.getSendingRtpParameters("audio",W),video:v.getSendingRtpParameters("video",W)},this._sendingRemoteRtpParametersByKind={audio:v.getSendingRemoteRtpParameters("audio",W),video:v.getSendingRemoteRtpParameters("video",W)},this._pc=new RTCPeerConnection({iceServers:M??[],iceTransportPolicy:j??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...U},z),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",Z=>{this.emit("@icecandidateerror",Z)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(y){throw this.assertNotClosed(),new b.UnsupportedError("not supported")}async restartIce(y){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(y),this._transportReady)if(this._direction==="send"){const w=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",w),await this._pc.setLocalDescription(w);const p={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}else{const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:y,encodings:w,codecOptions:p,codec:C}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",y.kind,y.id),w&&((w=T.clone(w)).forEach((Ee,Ce)=>{Ee.rid=`r${Ce}`}),w.reverse());const A=T.clone(this._sendingRtpParametersByKind[y.kind]);A.codecs=v.reduceCodecs(A.codecs,C);const M=T.clone(this._sendingRemoteRtpParametersByKind[y.kind]);M.codecs=v.reduceCodecs(M.codecs,C);const j=this._pc.addTransceiver(y,{direction:"sendonly",streams:[this._sendStream]});if(w){const Ee=j.sender.getParameters();Ee.encodings=w,await j.sender.setParameters(Ee)}const U=await this._pc.createOffer();let z=E.parse(U.sdp);z.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:z});const W=(0,m.parse)((w??[{}])[0].scalabilityMode);P.debug("send() | calling pc.setLocalDescription() [offer:%o]",U),await this._pc.setLocalDescription(U);const Z=j.mid;A.mid=Z,z=E.parse(this._pc.localDescription.sdp);const ce=z.media[z.media.length-1];if(A.rtcp.cname=f.getCname({offerMediaObject:ce}),w)if(w.length===1){const Ee=R.getRtpEncodings({offerMediaObject:ce});Object.assign(Ee[0],w[0]),A.encodings=Ee}else A.encodings=w.reverse();else A.encodings=R.getRtpEncodings({offerMediaObject:ce});if(A.encodings.length>1&&(A.codecs[0].mimeType.toLowerCase()==="video/vp8"||A.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Ee of A.encodings)Ee.scalabilityMode?Ee.scalabilityMode=`L1T${W.temporalLayers}`:Ee.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:ce,offerRtpParameters:A,answerRtpParameters:M,codecOptions:p});const J={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setRemoteDescription(J),this._mapMidTransceiver.set(Z,j),{localId:Z,rtpParameters:A,rtpSender:j.sender}}async stopSending(y){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",y),this._closed)return;const w=this._mapMidTransceiver.get(y);if(!w)throw new Error("associated transceiver not found");w.sender.replaceTrack(null),this._pc.removeTrack(w.sender),this._remoteSdp.disableMediaSection(w.mid);const p=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const C={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C),this._mapMidTransceiver.delete(y)}async pauseSending(y){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",y);const w=this._mapMidTransceiver.get(y);if(!w)throw new Error("associated RTCRtpTransceiver not found");w.direction="inactive",this._remoteSdp.pauseMediaSection(y);const p=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const C={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C)}async resumeSending(y){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",y);const w=this._mapMidTransceiver.get(y);if(!w)throw new Error("associated RTCRtpTransceiver not found");w.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(y);const p=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const C={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C)}async replaceTrack(y,w){this.assertNotClosed(),this.assertSendDirection(),w?P.debug("replaceTrack() [localId:%s, track.id:%s]",y,w.id):P.debug("replaceTrack() [localId:%s, no track]",y);const p=this._mapMidTransceiver.get(y);if(!p)throw new Error("associated RTCRtpTransceiver not found");await p.sender.replaceTrack(w)}async setMaxSpatialLayer(y,w){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",y,w);const p=this._mapMidTransceiver.get(y);if(!p)throw new Error("associated transceiver not found");const C=p.sender.getParameters();w=C.encodings.length-1-w,C.encodings.forEach((j,U)=>{j.active=U>=w}),await p.sender.setParameters(C),this._remoteSdp.muxMediaSectionSimulcast(y,C.encodings);const A=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A);const M={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async setRtpEncodingParameters(y,w){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",y,w);const p=this._mapMidTransceiver.get(y);if(!p)throw new Error("associated RTCRtpTransceiver not found");const C=p.sender.getParameters();C.encodings.forEach((j,U)=>{C.encodings[U]={...j,...w}}),await p.sender.setParameters(C),this._remoteSdp.muxMediaSectionSimulcast(y,C.encodings);const A=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A);const M={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async getSenderStats(y){this.assertNotClosed(),this.assertSendDirection();const w=this._mapMidTransceiver.get(y);if(!w)throw new Error("associated RTCRtpTransceiver not found");return w.sender.getStats()}async sendDataChannel({ordered:y,maxPacketLifeTime:w,maxRetransmits:p,label:C,protocol:A}){this.assertNotClosed(),this.assertSendDirection();const M={negotiated:!0,id:this._nextSendSctpStreamId,ordered:y,maxPacketLifeTime:w,maxRetransmits:p,protocol:A};P.debug("sendDataChannel() [options:%o]",M);const j=this._pc.createDataChannel(C,M);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const U=await this._pc.createOffer(),z=E.parse(U.sdp),W=z.media.find(ce=>ce.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:z}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",U),await this._pc.setLocalDescription(U),this._remoteSdp.sendSctpAssociation({offerMediaObject:W});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:j,sctpStreamParameters:{streamId:M.id,ordered:M.ordered,maxPacketLifeTime:M.maxPacketLifeTime,maxRetransmits:M.maxRetransmits}}}async receive(y){this.assertNotClosed(),this.assertRecvDirection();const w=[],p=new Map;for(const j of y){const{trackId:U,kind:z,rtpParameters:W,streamId:Z}=j;P.debug("receive() [trackId:%s, kind:%s]",U,z);const ce=W.mid??String(this._mapMidTransceiver.size);p.set(U,ce),this._remoteSdp.receive({mid:ce,kind:z,offerRtpParameters:W,streamId:Z??W.rtcp.cname,trackId:U})}const C={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);let A=await this._pc.createAnswer();const M=E.parse(A.sdp);for(const j of y){const{trackId:U,rtpParameters:z}=j,W=p.get(U),Z=M.media.find(ce=>String(ce.mid)===W);f.applyCodecParameters({offerRtpParameters:z,answerMediaObject:Z}),A={type:"answer",sdp:E.write(M)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:M}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",A),await this._pc.setLocalDescription(A);for(const j of y){const{trackId:U}=j,z=p.get(U),W=this._pc.getTransceivers().find(Z=>Z.mid===z);if(!W)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(z,W),w.push({localId:z,track:W.receiver.track,rtpReceiver:W.receiver})}return w}async stopReceiving(y){if(this.assertRecvDirection(),this._closed)return;for(const C of y){P.debug("stopReceiving() [localId:%s]",C);const A=this._mapMidTransceiver.get(C);if(!A)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(A.mid)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const C of y)this._mapMidTransceiver.delete(C)}async pauseReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const C of y){P.debug("pauseReceiving() [localId:%s]",C);const A=this._mapMidTransceiver.get(C);if(!A)throw new Error("associated RTCRtpTransceiver not found");A.direction="inactive",this._remoteSdp.pauseMediaSection(C)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async resumeReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const C of y){P.debug("resumeReceiving() [localId:%s]",C);const A=this._mapMidTransceiver.get(C);if(!A)throw new Error("associated RTCRtpTransceiver not found");A.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(C)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async getReceiverStats(y){this.assertRecvDirection();const w=this._mapMidTransceiver.get(y);if(!w)throw new Error("associated RTCRtpTransceiver not found");return w.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:y,label:w,protocol:p}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:C,ordered:A,maxPacketLifeTime:M,maxRetransmits:j}=y,U={negotiated:!0,id:C,ordered:A,maxPacketLifeTime:M,maxRetransmits:j,protocol:p};P.debug("receiveDataChannel() [options:%o]",U);const z=this._pc.createDataChannel(w,U);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const W={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",W),await this._pc.setRemoteDescription(W);const Z=await this._pc.createAnswer();if(!this._transportReady){const ce=E.parse(Z.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:ce})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:z}}async setupTransport({localDtlsRole:y,localSdpObject:w}){w||(w=E.parse(this._pc.localDescription.sdp));const p=f.extractDtlsParameters({sdpObject:w});p.role=y,this._remoteSdp.updateDtlsRole(y==="client"?"server":"client"),await new Promise((C,A)=>{this.safeEmit("@connect",{dtlsParameters:p},C,A)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new b.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.Firefox60=H},1791:(I,k,d)=>{var E=d(5172),_=d(5546);I.exports=function b(T,v){function f(g,F,m,P){try{var S=T[g](F),H=S.value;return H instanceof E?v.resolve(H.v).then(function(x){f("next",x,m,P)},function(x){f("throw",x,m,P)}):v.resolve(H).then(function(x){S.value=x,m(S)},function(x){return f("throw",x,m,P)})}catch(x){P(x)}}var R;this.next||(_(b.prototype),_(b.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),_(this,"_invoke",function(g,F,m){function P(){return new v(function(S,H){f(g,m,S,H)})}return R=R?R.then(P,P):P()},!0)},I.exports.__esModule=!0,I.exports.default=I.exports},1797:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0});const E=d(9746);k.default=function(_){if(!(0,E.default)(_))throw TypeError("Invalid UUID");let b;return Uint8Array.of((b=parseInt(_.slice(0,8),16))>>>24,b>>>16&255,b>>>8&255,255&b,(b=parseInt(_.slice(9,13),16))>>>8,255&b,(b=parseInt(_.slice(14,18),16))>>>8,255&b,(b=parseInt(_.slice(19,23),16))>>>8,255&b,(b=parseInt(_.slice(24,36),16))/1099511627776&255,b/4294967296&255,b>>>24&255,b>>>16&255,b>>>8&255,255&b)}},1803:(I,k,d)=>{d.d(k,{ed:()=>A,sg:()=>M,v7:()=>w});var E=d(4467),_=d(296),b=d(9027);function T(j,U){var z=Object.keys(j);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(j);U&&(W=W.filter(function(Z){return Object.getOwnPropertyDescriptor(j,Z).enumerable})),z.push.apply(z,W)}return z}var v={},f={},R={};for(var g in b.$.videoProfiles)b.$.videoProfiles[g].aspectRatio=="oneSixNine"&&(v[g]=b.$.videoProfiles[g],v[g].encoding={maxBitrate:v[g].bitRate,maxFramerate:v[g].frameRate}),b.$.videoProfiles[g].aspectRatio=="fourThree"&&(f[g]=b.$.videoProfiles[g],f[g].encoding={maxBitrate:f[g].bitRate,maxFramerate:f[g].frameRate});for(var g in b.$.screenShareProfiles)R[g]=b.$.screenShareProfiles[g],R[g].encoding={maxBitrate:R[g].bitRate,maxFramerate:R[g].frameRate};var F=Object.values(v),m=Object.values(f),P=Object.values(R),S=[v.h180p_w320p,v.h360p_w640p],H=[f.h180p_w240p,f.h360p_w480p],x=function(j){return[{scaleResolutionDownBy:2,fps:3}].map(function(U){var z;return{width:Math.floor(j.width/U.scaleResolutionDownBy),height:Math.floor(j.height/U.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(j.encoding.maxBitrate/(Math.pow(U.scaleResolutionDownBy,2)*(((z=j.encoding.maxFramerate)!==null&&z!==void 0?z:30)/U.fps)))),maxFramerate:U.fps}}})},y=["q","h","f"];function w(j,U,z,W,Z){var ce=W&&W.videoEncoding;j&&(ce=W&&W.screenShareEncoding);var J=W?.simulcast;if(ce||(ce=function(we,Je,Be){for(var nt=function(Nr,jn,cr){if(Nr)return P;var Gn=jn>cr?jn/cr:cr/jn;return Math.abs(Gn-1.7777777777777777)<Math.abs(Gn-1.3333333333333333)?F:m}(we,Je,Be),Qe=nt[0].encoding,Ze=Math.max(Je,Be),Ht=0;Ht<nt.length;Ht+=1){var or=nt[Ht];if(Qe=or.encoding,or.width>=Ze)break}return Qe}(j,U,z)),!J)return[ce];var Ee,Ce={width:U,height:z,encoding:{maxBitrate:ce.maxBitrate,maxFramerate:ce.maxFramerate}},Re=[],ye=(Re=p(j,Ce))[0];if(Re.length>1){var Te=Re;Ee=(0,_.A)(Te,2)[1]}var He=Math.max(U,z);return C(U,z,He>=960&&Ee?[ye,Ee,Ce]:He>=480?[ye,Ce]:[Ce],Z)}function p(j,U){j&&x(U);var z=U.width,W=U.height,Z=z>W?z/W:W/z;return Math.abs(Z-1.7777777777777777)<Math.abs(Z-1.3333333333333333)?S:H}function C(j,U,z,W){var Z=[];return z.forEach(function(ce,J){if(!(J>=y.length)){var Ee=W?null:{maxFramerate:ce.encoding.maxFramerate},Ce=Math.min(j,U),Re=function(ye){for(var Te=1;Te<arguments.length;Te++){var He=arguments[Te]!=null?arguments[Te]:{};Te%2?T(Object(He),!0).forEach(function(we){(0,E.A)(ye,we,He[we])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(He)):T(Object(He)).forEach(function(we){Object.defineProperty(ye,we,Object.getOwnPropertyDescriptor(He,we))})}return ye}({rid:y[J],scaleResolutionDownBy:Ce/Math.min(ce.width,ce.height),maxBitrate:ce.encoding.maxBitrate},Ee);Z.push(Re)}}),Z}function A(j,U,z){if(!j)return{};var W=j.id,Z=j.appData,ce=Z.width,J=Z.height,Ee=Z.encodings;try{var Ce=function(Je){var Be=[];if(Je&&Je.length!=0){if(Je.length===1){for(var nt=0;nt<3;nt++)Be.push(Math.pow(2,3-nt-1));return Be}var Qe=!1;return Je.forEach(function(Ze){Ze.scaleResolutionDownBy!==void 0?(Qe=!0,Be.push(Math.max(1,Ze.scaleResolutionDownBy))):Be.push(1)}),Qe||Je.forEach(function(Ze,Ht){Be[Ht]=Math.pow(2,Je.length-Ht-1)}),Be}}(Ee);if(!Ce)return{};var Re=Ce.map(function(Je){return{width:ce/Je,height:J/Je}}).sort(function(Je,Be){return Je.width-Be.width}),ye=Re.findIndex(function(Je){return Je.width>=U&&Je.height>=z});ye===-1&&(ye=Re.length-1);var Te=j.temporalLayers?j.temporalLayers:2;if(ye===0&&Te>0){var He=ce/Ce[0],we=J/Ce[0];U<.5*He&&z<.5*we&&(Te-=1),Te>0&&U<.25*He&&z<.25*we&&(Te-=1)}return{consumerId:W,newPreferredSpatialLayer:Math.max(0,ye),newPreferredTemporalLayer:Math.max(0,Te)}}catch{return{}}}function M(j,U){var z;return function(){for(var W=this,Z=arguments.length,ce=new Array(Z),J=0;J<Z;J++)ce[J]=arguments[J];clearTimeout(z),z=setTimeout(function(){return j.apply(W,ce)},U)}}},1806:(I,k,d)=>{d.d(k,{$Q:()=>E,T4:()=>_,Ts:()=>T,ue:()=>b});var E="vk_e2ee",_={sharedKey:!1,ratchetSalt:"VideoSDKEncryptionRatchetSalt",ratchetWindowSize:0,failureTolerance:10,keyringSize:16,discardFrameWhenCryptorNotReady:!1},b=["vp8","vp9","h264","av1"],T=["opus"]},1919:(I,k,d)=>{d.r(k),d.d(k,{default:()=>Dn});var E={};d.r(E),d.d(E,{Decoder:()=>Rn,Encoder:()=>Xe,PacketType:()=>Xt,protocol:()=>tn});var _=d(296),b=d(5458),T=d(2284),v=d(467),f=d(3029),R=d(2901),g=d(4467),F=d(4756),m=d.n(F);const P=Object.create(null);P.open="0",P.close="1",P.ping="2",P.pong="3",P.message="4",P.upgrade="5",P.noop="6";const S=Object.create(null);Object.keys(P).forEach(te=>{S[P[te]]=te});const H={type:"error",data:"parser error"},x=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",y=typeof ArrayBuffer=="function",w=te=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(te):te&&te.buffer instanceof ArrayBuffer,p=({type:te,data:G},Y,oe)=>x&&G instanceof Blob?Y?oe(G):C(G,oe):y&&(G instanceof ArrayBuffer||w(G))?Y?oe(G):C(new Blob([G]),oe):oe(P[te]+(G||"")),C=(te,G)=>{const Y=new FileReader;return Y.onload=function(){const oe=Y.result.split(",")[1];G("b"+(oe||""))},Y.readAsDataURL(te)};function A(te){return te instanceof Uint8Array?te:te instanceof ArrayBuffer?new Uint8Array(te):new Uint8Array(te.buffer,te.byteOffset,te.byteLength)}let M;const j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let te=0;te<64;te++)U[j.charCodeAt(te)]=te;const z=typeof ArrayBuffer=="function",W=(te,G)=>{if(typeof te!="string")return{type:"message",data:ce(te,G)};const Y=te.charAt(0);return Y==="b"?{type:"message",data:Z(te.substring(1),G)}:S[Y]?te.length>1?{type:S[Y],data:te.substring(1)}:{type:S[Y]}:H},Z=(te,G)=>{if(z){const Y=(oe=>{let Oe,rt,St,Dt,_t,Tn=.75*oe.length,qt=oe.length,Hn=0;oe[oe.length-1]==="="&&(Tn--,oe[oe.length-2]==="="&&Tn--);const vn=new ArrayBuffer(Tn),Qr=new Uint8Array(vn);for(Oe=0;Oe<qt;Oe+=4)rt=U[oe.charCodeAt(Oe)],St=U[oe.charCodeAt(Oe+1)],Dt=U[oe.charCodeAt(Oe+2)],_t=U[oe.charCodeAt(Oe+3)],Qr[Hn++]=rt<<2|St>>4,Qr[Hn++]=(15&St)<<4|Dt>>2,Qr[Hn++]=(3&Dt)<<6|63&_t;return vn})(te);return ce(Y,G)}return{base64:!0,data:te}},ce=(te,G)=>G==="blob"?te instanceof Blob?te:new Blob([te]):te instanceof ArrayBuffer?te:te.buffer,J="";function Ee(){return new TransformStream({transform(te,G){(function(Y,oe){x&&Y.data instanceof Blob?Y.data.arrayBuffer().then(A).then(oe):y&&(Y.data instanceof ArrayBuffer||w(Y.data))?oe(A(Y.data)):p(Y,!1,Oe=>{M||(M=new TextEncoder),oe(M.encode(Oe))})})(te,Y=>{const oe=Y.length;let Oe;if(oe<126)Oe=new Uint8Array(1),new DataView(Oe.buffer).setUint8(0,oe);else if(oe<65536){Oe=new Uint8Array(3);const rt=new DataView(Oe.buffer);rt.setUint8(0,126),rt.setUint16(1,oe)}else{Oe=new Uint8Array(9);const rt=new DataView(Oe.buffer);rt.setUint8(0,127),rt.setBigUint64(1,BigInt(oe))}te.data&&typeof te.data!="string"&&(Oe[0]|=128),G.enqueue(Oe),G.enqueue(Y)})}})}let Ce;function Re(te){return te.reduce((G,Y)=>G+Y.length,0)}function ye(te,G){if(te[0].length===G)return te.shift();const Y=new Uint8Array(G);let oe=0;for(let Oe=0;Oe<G;Oe++)Y[Oe]=te[0][oe++],oe===te[0].length&&(te.shift(),oe=0);return te.length&&oe<te[0].length&&(te[0]=te[0].slice(oe)),Y}function Te(te){if(te)return function(G){for(var Y in Te.prototype)G[Y]=Te.prototype[Y];return G}(te)}Te.prototype.on=Te.prototype.addEventListener=function(te,G){return this._callbacks=this._callbacks||{},(this._callbacks["$"+te]=this._callbacks["$"+te]||[]).push(G),this},Te.prototype.once=function(te,G){function Y(){this.off(te,Y),G.apply(this,arguments)}return Y.fn=G,this.on(te,Y),this},Te.prototype.off=Te.prototype.removeListener=Te.prototype.removeAllListeners=Te.prototype.removeEventListener=function(te,G){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var Y,oe=this._callbacks["$"+te];if(!oe)return this;if(arguments.length==1)return delete this._callbacks["$"+te],this;for(var Oe=0;Oe<oe.length;Oe++)if((Y=oe[Oe])===G||Y.fn===G){oe.splice(Oe,1);break}return oe.length===0&&delete this._callbacks["$"+te],this},Te.prototype.emit=function(te){this._callbacks=this._callbacks||{};for(var G=new Array(arguments.length-1),Y=this._callbacks["$"+te],oe=1;oe<arguments.length;oe++)G[oe-1]=arguments[oe];if(Y){oe=0;for(var Oe=(Y=Y.slice(0)).length;oe<Oe;++oe)Y[oe].apply(this,G)}return this},Te.prototype.emitReserved=Te.prototype.emit,Te.prototype.listeners=function(te){return this._callbacks=this._callbacks||{},this._callbacks["$"+te]||[]},Te.prototype.hasListeners=function(te){return!!this.listeners(te).length};const He=typeof Promise=="function"&&typeof Promise.resolve=="function"?te=>Promise.resolve().then(te):(te,G)=>G(te,0),we=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Je(te,...G){return G.reduce((Y,oe)=>(te.hasOwnProperty(oe)&&(Y[oe]=te[oe]),Y),{})}const Be=we.setTimeout,nt=we.clearTimeout;function Qe(te,G){G.useNativeTimers?(te.setTimeoutFn=Be.bind(we),te.clearTimeoutFn=nt.bind(we)):(te.setTimeoutFn=we.setTimeout.bind(we),te.clearTimeoutFn=we.clearTimeout.bind(we))}function Ze(te){return typeof te=="string"?function(G){let Y=0,oe=0;for(let Oe=0,rt=G.length;Oe<rt;Oe++)Y=G.charCodeAt(Oe),Y<128?oe+=1:Y<2048?oe+=2:Y<55296||Y>=57344?oe+=3:(Oe++,oe+=4);return oe}(te):Math.ceil(1.33*(te.byteLength||te.size))}function Ht(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class or extends Error{constructor(G,Y,oe){super(G),this.description=Y,this.context=oe,this.type="TransportError"}}class Nr extends Te{constructor(G){super(),this.writable=!1,Qe(this,G),this.opts=G,this.query=G.query,this.socket=G.socket,this.supportsBinary=!G.forceBase64}onError(G,Y,oe){return super.emitReserved("error",new or(G,Y,oe)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this}send(G){this.readyState==="open"&&this.write(G)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(G){const Y=W(G,this.socket.binaryType);this.onPacket(Y)}onPacket(G){super.emitReserved("packet",G)}onClose(G){this.readyState="closed",super.emitReserved("close",G)}pause(G){}createUri(G,Y={}){return G+"://"+this._hostname()+this._port()+this.opts.path+this._query(Y)}_hostname(){const G=this.opts.hostname;return G.indexOf(":")===-1?G:"["+G+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(G){const Y=function(oe){let Oe="";for(let rt in oe)oe.hasOwnProperty(rt)&&(Oe.length&&(Oe+="&"),Oe+=encodeURIComponent(rt)+"="+encodeURIComponent(oe[rt]));return Oe}(G);return Y.length?"?"+Y:""}}class jn extends Nr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(G){this.readyState="pausing";const Y=()=>{this.readyState="paused",G()};if(this._polling||!this.writable){let oe=0;this._polling&&(oe++,this.once("pollComplete",function(){--oe||Y()})),this.writable||(oe++,this.once("drain",function(){--oe||Y()}))}else Y()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(G){((Y,oe)=>{const Oe=Y.split(J),rt=[];for(let St=0;St<Oe.length;St++){const Dt=W(Oe[St],oe);if(rt.push(Dt),Dt.type==="error")break}return rt})(G,this.socket.binaryType).forEach(Y=>{if(this.readyState==="opening"&&Y.type==="open"&&this.onOpen(),Y.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(Y)}),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const G=()=>{this.write([{type:"close"}])};this.readyState==="open"?G():this.once("open",G)}write(G){this.writable=!1,((Y,oe)=>{const Oe=Y.length,rt=new Array(Oe);let St=0;Y.forEach((Dt,_t)=>{p(Dt,!1,Tn=>{rt[_t]=Tn,++St===Oe&&oe(rt.join(J))})})})(G,Y=>{this.doWrite(Y,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const G=this.opts.secure?"https":"http",Y=this.query||{};return this.opts.timestampRequests!==!1&&(Y[this.opts.timestampParam]=Ht()),this.supportsBinary||Y.sid||(Y.b64=1),this.createUri(G,Y)}}let cr=!1;try{cr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Gn=cr;function Un(){}class Le extends jn{constructor(G){if(super(G),typeof location<"u"){const Y=location.protocol==="https:";let oe=location.port;oe||(oe=Y?"443":"80"),this.xd=typeof location<"u"&&G.hostname!==location.hostname||oe!==G.port}}doWrite(G,Y){const oe=this.request({method:"POST",data:G});oe.on("success",Y),oe.on("error",(Oe,rt)=>{this.onError("xhr post error",Oe,rt)})}doPoll(){const G=this.request();G.on("data",this.onData.bind(this)),G.on("error",(Y,oe)=>{this.onError("xhr poll error",Y,oe)}),this.pollXhr=G}}class je extends Te{constructor(G,Y,oe){super(),this.createRequest=G,Qe(this,oe),this._opts=oe,this._method=oe.method||"GET",this._uri=Y,this._data=oe.data!==void 0?oe.data:null,this._create()}_create(){var G;const Y=Je(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");Y.xdomain=!!this._opts.xd;const oe=this._xhr=this.createRequest(Y);try{oe.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){oe.setDisableHeaderCheck&&oe.setDisableHeaderCheck(!0);for(let Oe in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(Oe)&&oe.setRequestHeader(Oe,this._opts.extraHeaders[Oe])}}catch{}if(this._method==="POST")try{oe.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{oe.setRequestHeader("Accept","*/*")}catch{}(G=this._opts.cookieJar)===null||G===void 0||G.addCookies(oe),"withCredentials"in oe&&(oe.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(oe.timeout=this._opts.requestTimeout),oe.onreadystatechange=()=>{var Oe;oe.readyState===3&&((Oe=this._opts.cookieJar)===null||Oe===void 0||Oe.parseCookies(oe.getResponseHeader("set-cookie"))),oe.readyState===4&&(oe.status===200||oe.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof oe.status=="number"?oe.status:0)},0))},oe.send(this._data)}catch(Oe){return void this.setTimeoutFn(()=>{this._onError(Oe)},0)}typeof document<"u"&&(this._index=je.requestsCount++,je.requests[this._index]=this)}_onError(G){this.emitReserved("error",G,this._xhr),this._cleanup(!0)}_cleanup(G){if(this._xhr!==void 0&&this._xhr!==null){if(this._xhr.onreadystatechange=Un,G)try{this._xhr.abort()}catch{}typeof document<"u"&&delete je.requests[this._index],this._xhr=null}}_onLoad(){const G=this._xhr.responseText;G!==null&&(this.emitReserved("data",G),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}je.requestsCount=0,je.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",Ge):typeof addEventListener=="function"&&addEventListener("onpagehide"in we?"pagehide":"unload",Ge,!1));function Ge(){for(let te in je.requests)je.requests.hasOwnProperty(te)&&je.requests[te].abort()}const Qt=function(){const te=Ft({xdomain:!1});return te&&te.responseType!==null}();function Ft(te){const G=te.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!G||Gn))return new XMLHttpRequest}catch{}if(!G)try{return new we[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const xt=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pn extends Nr{get name(){return"websocket"}doOpen(){const G=this.uri(),Y=this.opts.protocols,oe=xt?{}:Je(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(oe.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(G,Y,oe)}catch(Oe){return this.emitReserved("error",Oe)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=G=>this.onClose({description:"websocket connection closed",context:G}),this.ws.onmessage=G=>this.onData(G.data),this.ws.onerror=G=>this.onError("websocket error",G)}write(G){this.writable=!1;for(let Y=0;Y<G.length;Y++){const oe=G[Y],Oe=Y===G.length-1;p(oe,this.supportsBinary,rt=>{try{this.doWrite(oe,rt)}catch{}Oe&&He(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const G=this.opts.secure?"wss":"ws",Y=this.query||{};return this.opts.timestampRequests&&(Y[this.opts.timestampParam]=Ht()),this.supportsBinary||(Y.b64=1),this.createUri(G,Y)}}const Ln=we.WebSocket||we.MozWebSocket,Bt={websocket:class extends pn{createSocket(te,G,Y){return xt?new Ln(te,G,Y):G?new Ln(te,G):new Ln(te)}doWrite(te,G){this.ws.send(G)}},webtransport:class extends Nr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(te){return this.emitReserved("error",te)}this._transport.closed.then(()=>{this.onClose()}).catch(te=>{this.onError("webtransport error",te)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(te=>{const G=function(St,Dt){Ce||(Ce=new TextDecoder);const _t=[];let Tn=0,qt=-1,Hn=!1;return new TransformStream({transform(vn,Qr){for(_t.push(vn);;){if(Tn===0){if(Re(_t)<1)break;const qr=ye(_t,1);Hn=!(128&~qr[0]),qt=127&qr[0],Tn=qt<126?3:qt===126?1:2}else if(Tn===1){if(Re(_t)<2)break;const qr=ye(_t,2);qt=new DataView(qr.buffer,qr.byteOffset,qr.length).getUint16(0),Tn=3}else if(Tn===2){if(Re(_t)<8)break;const qr=ye(_t,8),ia=new DataView(qr.buffer,qr.byteOffset,qr.length),Jr=ia.getUint32(0);if(Jr>Math.pow(2,21)-1){Qr.enqueue(H);break}qt=Jr*Math.pow(2,32)+ia.getUint32(4),Tn=3}else{if(Re(_t)<qt)break;const qr=ye(_t,qt);Qr.enqueue(W(Hn?qr:Ce.decode(qr),Dt)),Tn=0}if(qt===0||qt>St){Qr.enqueue(H);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),Y=te.readable.pipeThrough(G).getReader(),oe=Ee();oe.readable.pipeTo(te.writable),this._writer=oe.writable.getWriter();const Oe=()=>{Y.read().then(({done:St,value:Dt})=>{St||(this.onPacket(Dt),Oe())}).catch(St=>{})};Oe();const rt={type:"open"};this.query.sid&&(rt.data=`{"sid":"${this.query.sid}"}`),this._writer.write(rt).then(()=>this.onOpen())})})}write(te){this.writable=!1;for(let G=0;G<te.length;G++){const Y=te[G],oe=G===te.length-1;this._writer.write(Y).then(()=>{oe&&He(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var te;(te=this._transport)===null||te===void 0||te.close()}},polling:class extends Le{constructor(te){super(te);const G=te&&te.forceBase64;this.supportsBinary=Qt&&!G}request(te={}){return Object.assign(te,{xd:this.xd},this.opts),new je(Ft,this.uri(),te)}}},lr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Fr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function kr(te){if(te.length>8e3)throw"URI too long";const G=te,Y=te.indexOf("["),oe=te.indexOf("]");Y!=-1&&oe!=-1&&(te=te.substring(0,Y)+te.substring(Y,oe).replace(/:/g,";")+te.substring(oe,te.length));let Oe=lr.exec(te||""),rt={},St=14;for(;St--;)rt[Fr[St]]=Oe[St]||"";return Y!=-1&&oe!=-1&&(rt.source=G,rt.host=rt.host.substring(1,rt.host.length-1).replace(/;/g,":"),rt.authority=rt.authority.replace("[","").replace("]","").replace(/;/g,":"),rt.ipv6uri=!0),rt.pathNames=function(Dt,_t){const Tn=/\/{2,9}/g,qt=_t.replace(Tn,"/").split("/");return _t.slice(0,1)!="/"&&_t.length!==0||qt.splice(0,1),_t.slice(-1)=="/"&&qt.splice(qt.length-1,1),qt}(0,rt.path),rt.queryKey=function(Dt,_t){const Tn={};return _t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(qt,Hn,vn){Hn&&(Tn[Hn]=vn)}),Tn}(0,rt.query),rt}const Vr=typeof addEventListener=="function"&&typeof removeEventListener=="function",Hr=[];Vr&&addEventListener("offline",()=>{Hr.forEach(te=>te())},!1);class Or extends Te{constructor(G,Y){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,G&&typeof G=="object"&&(Y=G,G=null),G){const oe=kr(G);Y.hostname=oe.host,Y.secure=oe.protocol==="https"||oe.protocol==="wss",Y.port=oe.port,oe.query&&(Y.query=oe.query)}else Y.host&&(Y.hostname=kr(Y.host).host);Qe(this,Y),this.secure=Y.secure!=null?Y.secure:typeof location<"u"&&location.protocol==="https:",Y.hostname&&!Y.port&&(Y.port=this.secure?"443":"80"),this.hostname=Y.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=Y.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},Y.transports.forEach(oe=>{const Oe=oe.prototype.name;this.transports.push(Oe),this._transportsByName[Oe]=oe}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},Y),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=function(oe){let Oe={},rt=oe.split("&");for(let St=0,Dt=rt.length;St<Dt;St++){let _t=rt[St].split("=");Oe[decodeURIComponent(_t[0])]=decodeURIComponent(_t[1])}return Oe}(this.opts.query)),Vr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Hr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(G){const Y=Object.assign({},this.opts.query);Y.EIO=4,Y.transport=G,this.id&&(Y.sid=this.id);const oe=Object.assign({},this.opts,{query:Y,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[G]);return new this._transportsByName[G](oe)}_open(){if(this.transports.length===0)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const G=this.opts.rememberUpgrade&&Or.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const Y=this.createTransport(G);Y.open(),this.setTransport(Y)}setTransport(G){this.transport&&this.transport.removeAllListeners(),this.transport=G,G.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",Y=>this._onClose("transport close",Y))}onOpen(){this.readyState="open",Or.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(G){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",G),this.emitReserved("heartbeat"),G.type){case"open":this.onHandshake(JSON.parse(G.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const Y=new Error("server error");Y.code=G.data,this._onError(Y);break;case"message":this.emitReserved("data",G.data),this.emitReserved("message",G.data)}}onHandshake(G){this.emitReserved("handshake",G),this.id=G.sid,this.transport.query.sid=G.sid,this._pingInterval=G.pingInterval,this._pingTimeout=G.pingTimeout,this._maxPayload=G.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const G=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+G,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},G),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const G=this._getWritablePackets();this.transport.send(G),this._prevBufferLen=G.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let G=1;for(let Y=0;Y<this.writeBuffer.length;Y++){const oe=this.writeBuffer[Y].data;if(oe&&(G+=Ze(oe)),Y>0&&G>this._maxPayload)return this.writeBuffer.slice(0,Y);G+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const G=Date.now()>this._pingTimeoutTime;return G&&(this._pingTimeoutTime=0,He(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),G}write(G,Y,oe){return this._sendPacket("message",G,Y,oe),this}send(G,Y,oe){return this._sendPacket("message",G,Y,oe),this}_sendPacket(G,Y,oe,Oe){if(typeof Y=="function"&&(Oe=Y,Y=void 0),typeof oe=="function"&&(Oe=oe,oe=null),this.readyState==="closing"||this.readyState==="closed")return;(oe=oe||{}).compress=oe.compress!==!1;const rt={type:G,data:Y,options:oe};this.emitReserved("packetCreate",rt),this.writeBuffer.push(rt),Oe&&this.once("flush",Oe),this.flush()}close(){const G=()=>{this._onClose("forced close"),this.transport.close()},Y=()=>{this.off("upgrade",Y),this.off("upgradeError",Y),G()},oe=()=>{this.once("upgrade",Y),this.once("upgradeError",Y)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?oe():G()}):this.upgrading?oe():G()),this}_onError(G){if(Or.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",G),this._onClose("transport error",G)}_onClose(G,Y){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Vr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const oe=Hr.indexOf(this._offlineEventListener);oe!==-1&&Hr.splice(oe,1)}this.readyState="closed",this.id=null,this.emitReserved("close",G,Y),this.writeBuffer=[],this._prevBufferLen=0}}}Or.protocol=4;class Gr extends Or{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let G=0;G<this._upgrades.length;G++)this._probe(this._upgrades[G])}_probe(G){let Y=this.createTransport(G),oe=!1;Or.priorWebsocketSuccess=!1;const Oe=()=>{oe||(Y.send([{type:"ping",data:"probe"}]),Y.once("packet",Hn=>{if(!oe)if(Hn.type==="pong"&&Hn.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",Y),!Y)return;Or.priorWebsocketSuccess=Y.name==="websocket",this.transport.pause(()=>{oe||this.readyState!=="closed"&&(qt(),this.setTransport(Y),Y.send([{type:"upgrade"}]),this.emitReserved("upgrade",Y),Y=null,this.upgrading=!1,this.flush())})}else{const vn=new Error("probe error");vn.transport=Y.name,this.emitReserved("upgradeError",vn)}}))};function rt(){oe||(oe=!0,qt(),Y.close(),Y=null)}const St=Hn=>{const vn=new Error("probe error: "+Hn);vn.transport=Y.name,rt(),this.emitReserved("upgradeError",vn)};function Dt(){St("transport closed")}function _t(){St("socket closed")}function Tn(Hn){Y&&Hn.name!==Y.name&&rt()}const qt=()=>{Y.removeListener("open",Oe),Y.removeListener("error",St),Y.removeListener("close",Dt),this.off("close",_t),this.off("upgrading",Tn)};Y.once("open",Oe),Y.once("error",St),Y.once("close",Dt),this.once("close",_t),this.once("upgrading",Tn),this._upgrades.indexOf("webtransport")!==-1&&G!=="webtransport"?this.setTimeoutFn(()=>{oe||Y.open()},200):Y.open()}onHandshake(G){this._upgrades=this._filterUpgrades(G.upgrades),super.onHandshake(G)}_filterUpgrades(G){const Y=[];for(let oe=0;oe<G.length;oe++)~this.transports.indexOf(G[oe])&&Y.push(G[oe]);return Y}}class ga extends Gr{constructor(G,Y={}){const oe=typeof G=="object"?G:Y;(!oe.transports||oe.transports&&typeof oe.transports[0]=="string")&&(oe.transports=(oe.transports||["polling","websocket","webtransport"]).map(Oe=>Bt[Oe]).filter(Oe=>!!Oe)),super(G,oe)}}const ta=typeof ArrayBuffer=="function",oa=Object.prototype.toString,Nn=typeof Blob=="function"||typeof Blob<"u"&&oa.call(Blob)==="[object BlobConstructor]",Ha=typeof File=="function"||typeof File<"u"&&oa.call(File)==="[object FileConstructor]";function Ca(te){return ta&&(te instanceof ArrayBuffer||(G=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(G):G.buffer instanceof ArrayBuffer)(te))||Nn&&te instanceof Blob||Ha&&te instanceof File}function Kr(te,G){if(!te||typeof te!="object")return!1;if(Array.isArray(te)){for(let Y=0,oe=te.length;Y<oe;Y++)if(Kr(te[Y]))return!0;return!1}if(Ca(te))return!0;if(te.toJSON&&typeof te.toJSON=="function"&&arguments.length===1)return Kr(te.toJSON(),!0);for(const Y in te)if(Object.prototype.hasOwnProperty.call(te,Y)&&Kr(te[Y]))return!0;return!1}function hr(te){const G=[],Y=te.data,oe=te;return oe.data=at(Y,G),oe.attachments=G.length,{packet:oe,buffers:G}}function at(te,G){if(!te)return te;if(Ca(te)){const Y={_placeholder:!0,num:G.length};return G.push(te),Y}if(Array.isArray(te)){const Y=new Array(te.length);for(let oe=0;oe<te.length;oe++)Y[oe]=at(te[oe],G);return Y}if(typeof te=="object"&&!(te instanceof Date)){const Y={};for(const oe in te)Object.prototype.hasOwnProperty.call(te,oe)&&(Y[oe]=at(te[oe],G));return Y}return te}function ut(te,G){return te.data=$t(te.data,G),delete te.attachments,te}function $t(te,G){if(!te)return te;if(te&&te._placeholder===!0){if(typeof te.num=="number"&&te.num>=0&&te.num<G.length)return G[te.num];throw new Error("illegal attachments")}if(Array.isArray(te))for(let Y=0;Y<te.length;Y++)te[Y]=$t(te[Y],G);else if(typeof te=="object")for(const Y in te)Object.prototype.hasOwnProperty.call(te,Y)&&(te[Y]=$t(te[Y],G));return te}const Tt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],tn=5;var Xt;(function(te){te[te.CONNECT=0]="CONNECT",te[te.DISCONNECT=1]="DISCONNECT",te[te.EVENT=2]="EVENT",te[te.ACK=3]="ACK",te[te.CONNECT_ERROR=4]="CONNECT_ERROR",te[te.BINARY_EVENT=5]="BINARY_EVENT",te[te.BINARY_ACK=6]="BINARY_ACK"})(Xt||(Xt={}));class Xe{constructor(G){this.replacer=G}encode(G){return G.type!==Xt.EVENT&&G.type!==Xt.ACK||!Kr(G)?[this.encodeAsString(G)]:this.encodeAsBinary({type:G.type===Xt.EVENT?Xt.BINARY_EVENT:Xt.BINARY_ACK,nsp:G.nsp,data:G.data,id:G.id})}encodeAsString(G){let Y=""+G.type;return G.type!==Xt.BINARY_EVENT&&G.type!==Xt.BINARY_ACK||(Y+=G.attachments+"-"),G.nsp&&G.nsp!=="/"&&(Y+=G.nsp+","),G.id!=null&&(Y+=G.id),G.data!=null&&(Y+=JSON.stringify(G.data,this.replacer)),Y}encodeAsBinary(G){const Y=hr(G),oe=this.encodeAsString(Y.packet),Oe=Y.buffers;return Oe.unshift(oe),Oe}}function Sn(te){return Object.prototype.toString.call(te)==="[object Object]"}class Rn extends Te{constructor(G){super(),this.reviver=G}add(G){let Y;if(typeof G=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");Y=this.decodeString(G);const oe=Y.type===Xt.BINARY_EVENT;oe||Y.type===Xt.BINARY_ACK?(Y.type=oe?Xt.EVENT:Xt.ACK,this.reconstructor=new Zn(Y),Y.attachments===0&&super.emitReserved("decoded",Y)):super.emitReserved("decoded",Y)}else{if(!Ca(G)&&!G.base64)throw new Error("Unknown type: "+G);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");Y=this.reconstructor.takeBinaryData(G),Y&&(this.reconstructor=null,super.emitReserved("decoded",Y))}}decodeString(G){let Y=0;const oe={type:Number(G.charAt(0))};if(Xt[oe.type]===void 0)throw new Error("unknown packet type "+oe.type);if(oe.type===Xt.BINARY_EVENT||oe.type===Xt.BINARY_ACK){const rt=Y+1;for(;G.charAt(++Y)!=="-"&&Y!=G.length;);const St=G.substring(rt,Y);if(St!=Number(St)||G.charAt(Y)!=="-")throw new Error("Illegal attachments");oe.attachments=Number(St)}if(G.charAt(Y+1)==="/"){const rt=Y+1;for(;++Y&&!(G.charAt(Y)===","||Y===G.length););oe.nsp=G.substring(rt,Y)}else oe.nsp="/";const Oe=G.charAt(Y+1);if(Oe!==""&&Number(Oe)==Oe){const rt=Y+1;for(;++Y;){const St=G.charAt(Y);if(St==null||Number(St)!=St){--Y;break}if(Y===G.length)break}oe.id=Number(G.substring(rt,Y+1))}if(G.charAt(++Y)){const rt=this.tryParse(G.substr(Y));if(!Rn.isPayloadValid(oe.type,rt))throw new Error("invalid payload");oe.data=rt}return oe}tryParse(G){try{return JSON.parse(G,this.reviver)}catch{return!1}}static isPayloadValid(G,Y){switch(G){case Xt.CONNECT:return Sn(Y);case Xt.DISCONNECT:return Y===void 0;case Xt.CONNECT_ERROR:return typeof Y=="string"||Sn(Y);case Xt.EVENT:case Xt.BINARY_EVENT:return Array.isArray(Y)&&(typeof Y[0]=="number"||typeof Y[0]=="string"&&Tt.indexOf(Y[0])===-1);case Xt.ACK:case Xt.BINARY_ACK:return Array.isArray(Y)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Zn{constructor(G){this.packet=G,this.buffers=[],this.reconPack=G}takeBinaryData(G){if(this.buffers.push(G),this.buffers.length===this.reconPack.attachments){const Y=ut(this.reconPack,this.buffers);return this.finishedReconstruction(),Y}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ur(te,G,Y){return te.on(G,Y),function(){te.off(G,Y)}}const Wt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class bt extends Te{constructor(G,Y,oe){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=G,this.nsp=Y,oe&&oe.auth&&(this.auth=oe.auth),this._opts=Object.assign({},oe),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const G=this.io;this.subs=[ur(G,"open",this.onopen.bind(this)),ur(G,"packet",this.onpacket.bind(this)),ur(G,"error",this.onerror.bind(this)),ur(G,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this}open(){return this.connect()}send(...G){return G.unshift("message"),this.emit.apply(this,G),this}emit(G,...Y){var oe,Oe,rt;if(Wt.hasOwnProperty(G))throw new Error('"'+G.toString()+'" is a reserved event name');if(Y.unshift(G),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(Y),this;const St={type:Xt.EVENT,data:Y,options:{}};if(St.options.compress=this.flags.compress!==!1,typeof Y[Y.length-1]=="function"){const Tn=this.ids++,qt=Y.pop();this._registerAckCallback(Tn,qt),St.id=Tn}const Dt=(Oe=(oe=this.io.engine)===null||oe===void 0?void 0:oe.transport)===null||Oe===void 0?void 0:Oe.writable,_t=this.connected&&!(!((rt=this.io.engine)===null||rt===void 0)&&rt._hasPingExpired());return this.flags.volatile&&!Dt||(_t?(this.notifyOutgoingListeners(St),this.packet(St)):this.sendBuffer.push(St)),this.flags={},this}_registerAckCallback(G,Y){var oe;const Oe=(oe=this.flags.timeout)!==null&&oe!==void 0?oe:this._opts.ackTimeout;if(Oe===void 0)return void(this.acks[G]=Y);const rt=this.io.setTimeoutFn(()=>{delete this.acks[G];for(let Dt=0;Dt<this.sendBuffer.length;Dt++)this.sendBuffer[Dt].id===G&&this.sendBuffer.splice(Dt,1);Y.call(this,new Error("operation has timed out"))},Oe),St=(...Dt)=>{this.io.clearTimeoutFn(rt),Y.apply(this,Dt)};St.withError=!0,this.acks[G]=St}emitWithAck(G,...Y){return new Promise((oe,Oe)=>{const rt=(St,Dt)=>St?Oe(St):oe(Dt);rt.withError=!0,Y.push(rt),this.emit(G,...Y)})}_addToQueue(G){let Y;typeof G[G.length-1]=="function"&&(Y=G.pop());const oe={id:this._queueSeq++,tryCount:0,pending:!1,args:G,flags:Object.assign({fromQueue:!0},this.flags)};G.push((Oe,...rt)=>{if(oe===this._queue[0])return Oe!==null?oe.tryCount>this._opts.retries&&(this._queue.shift(),Y&&Y(Oe)):(this._queue.shift(),Y&&Y(null,...rt)),oe.pending=!1,this._drainQueue()}),this._queue.push(oe),this._drainQueue()}_drainQueue(G=!1){if(!this.connected||this._queue.length===0)return;const Y=this._queue[0];Y.pending&&!G||(Y.pending=!0,Y.tryCount++,this.flags=Y.flags,this.emit.apply(this,Y.args))}packet(G){G.nsp=this.nsp,this.io._packet(G)}onopen(){typeof this.auth=="function"?this.auth(G=>{this._sendConnectPacket(G)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(G){this.packet({type:Xt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},G):G})}onerror(G){this.connected||this.emitReserved("connect_error",G)}onclose(G,Y){this.connected=!1,delete this.id,this.emitReserved("disconnect",G,Y),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(G=>{if(!this.sendBuffer.some(Y=>String(Y.id)===G)){const Y=this.acks[G];delete this.acks[G],Y.withError&&Y.call(this,new Error("socket has been disconnected"))}})}onpacket(G){if(G.nsp===this.nsp)switch(G.type){case Xt.CONNECT:G.data&&G.data.sid?this.onconnect(G.data.sid,G.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Xt.EVENT:case Xt.BINARY_EVENT:this.onevent(G);break;case Xt.ACK:case Xt.BINARY_ACK:this.onack(G);break;case Xt.DISCONNECT:this.ondisconnect();break;case Xt.CONNECT_ERROR:this.destroy();const Y=new Error(G.data.message);Y.data=G.data.data,this.emitReserved("connect_error",Y)}}onevent(G){const Y=G.data||[];G.id!=null&&Y.push(this.ack(G.id)),this.connected?this.emitEvent(Y):this.receiveBuffer.push(Object.freeze(Y))}emitEvent(G){if(this._anyListeners&&this._anyListeners.length){const Y=this._anyListeners.slice();for(const oe of Y)oe.apply(this,G)}super.emit.apply(this,G),this._pid&&G.length&&typeof G[G.length-1]=="string"&&(this._lastOffset=G[G.length-1])}ack(G){const Y=this;let oe=!1;return function(...Oe){oe||(oe=!0,Y.packet({type:Xt.ACK,id:G,data:Oe}))}}onack(G){const Y=this.acks[G.id];typeof Y=="function"&&(delete this.acks[G.id],Y.withError&&G.data.unshift(null),Y.apply(this,G.data))}onconnect(G,Y){this.id=G,this.recovered=Y&&this._pid===Y,this._pid=Y,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(G=>this.emitEvent(G)),this.receiveBuffer=[],this.sendBuffer.forEach(G=>{this.notifyOutgoingListeners(G),this.packet(G)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(G=>G()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Xt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(G){return this.flags.compress=G,this}get volatile(){return this.flags.volatile=!0,this}timeout(G){return this.flags.timeout=G,this}onAny(G){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(G),this}prependAny(G){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(G),this}offAny(G){if(!this._anyListeners)return this;if(G){const Y=this._anyListeners;for(let oe=0;oe<Y.length;oe++)if(G===Y[oe])return Y.splice(oe,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(G){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(G),this}prependAnyOutgoing(G){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(G),this}offAnyOutgoing(G){if(!this._anyOutgoingListeners)return this;if(G){const Y=this._anyOutgoingListeners;for(let oe=0;oe<Y.length;oe++)if(G===Y[oe])return Y.splice(oe,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(G){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const Y=this._anyOutgoingListeners.slice();for(const oe of Y)oe.apply(this,G.data)}}}function Pn(te){te=te||{},this.ms=te.min||100,this.max=te.max||1e4,this.factor=te.factor||2,this.jitter=te.jitter>0&&te.jitter<=1?te.jitter:0,this.attempts=0}Pn.prototype.duration=function(){var te=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var G=Math.random(),Y=Math.floor(G*this.jitter*te);te=1&Math.floor(10*G)?te+Y:te-Y}return 0|Math.min(te,this.max)},Pn.prototype.reset=function(){this.attempts=0},Pn.prototype.setMin=function(te){this.ms=te},Pn.prototype.setMax=function(te){this.max=te},Pn.prototype.setJitter=function(te){this.jitter=te};class kn extends Te{constructor(G,Y){var oe;super(),this.nsps={},this.subs=[],G&&typeof G=="object"&&(Y=G,G=void 0),(Y=Y||{}).path=Y.path||"/socket.io",this.opts=Y,Qe(this,Y),this.reconnection(Y.reconnection!==!1),this.reconnectionAttempts(Y.reconnectionAttempts||1/0),this.reconnectionDelay(Y.reconnectionDelay||1e3),this.reconnectionDelayMax(Y.reconnectionDelayMax||5e3),this.randomizationFactor((oe=Y.randomizationFactor)!==null&&oe!==void 0?oe:.5),this.backoff=new Pn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(Y.timeout==null?2e4:Y.timeout),this._readyState="closed",this.uri=G;const Oe=Y.parser||E;this.encoder=new Oe.Encoder,this.decoder=new Oe.Decoder,this._autoConnect=Y.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(G){return arguments.length?(this._reconnection=!!G,G||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(G){return G===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=G,this)}reconnectionDelay(G){var Y;return G===void 0?this._reconnectionDelay:(this._reconnectionDelay=G,(Y=this.backoff)===null||Y===void 0||Y.setMin(G),this)}randomizationFactor(G){var Y;return G===void 0?this._randomizationFactor:(this._randomizationFactor=G,(Y=this.backoff)===null||Y===void 0||Y.setJitter(G),this)}reconnectionDelayMax(G){var Y;return G===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=G,(Y=this.backoff)===null||Y===void 0||Y.setMax(G),this)}timeout(G){return arguments.length?(this._timeout=G,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(G){if(~this._readyState.indexOf("open"))return this;this.engine=new ga(this.uri,this.opts);const Y=this.engine,oe=this;this._readyState="opening",this.skipReconnect=!1;const Oe=ur(Y,"open",function(){oe.onopen(),G&&G()}),rt=Dt=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",Dt),G?G(Dt):this.maybeReconnectOnOpen()},St=ur(Y,"error",rt);if(this._timeout!==!1){const Dt=this._timeout,_t=this.setTimeoutFn(()=>{Oe(),rt(new Error("timeout")),Y.close()},Dt);this.opts.autoUnref&&_t.unref(),this.subs.push(()=>{this.clearTimeoutFn(_t)})}return this.subs.push(Oe),this.subs.push(St),this}connect(G){return this.open(G)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const G=this.engine;this.subs.push(ur(G,"ping",this.onping.bind(this)),ur(G,"data",this.ondata.bind(this)),ur(G,"error",this.onerror.bind(this)),ur(G,"close",this.onclose.bind(this)),ur(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(G){try{this.decoder.add(G)}catch(Y){this.onclose("parse error",Y)}}ondecoded(G){He(()=>{this.emitReserved("packet",G)},this.setTimeoutFn)}onerror(G){this.emitReserved("error",G)}socket(G,Y){let oe=this.nsps[G];return oe?this._autoConnect&&!oe.active&&oe.connect():(oe=new bt(this,G,Y),this.nsps[G]=oe),oe}_destroy(G){const Y=Object.keys(this.nsps);for(const oe of Y)if(this.nsps[oe].active)return;this._close()}_packet(G){const Y=this.encoder.encode(G);for(let oe=0;oe<Y.length;oe++)this.engine.write(Y[oe],G.options)}cleanup(){this.subs.forEach(G=>G()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(G,Y){var oe;this.cleanup(),(oe=this.engine)===null||oe===void 0||oe.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",G,Y),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const G=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const Y=this.backoff.duration();this._reconnecting=!0;const oe=this.setTimeoutFn(()=>{G.skipReconnect||(this.emitReserved("reconnect_attempt",G.backoff.attempts),G.skipReconnect||G.open(Oe=>{Oe?(G._reconnecting=!1,G.reconnect(),this.emitReserved("reconnect_error",Oe)):G.onreconnect()}))},Y);this.opts.autoUnref&&oe.unref(),this.subs.push(()=>{this.clearTimeoutFn(oe)})}}onreconnect(){const G=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",G)}}const bn={};function Ar(te,G){typeof te=="object"&&(G=te,te=void 0);const Y=function(_t,Tn="",qt){let Hn=_t;qt=qt||typeof location<"u"&&location,_t==null&&(_t=qt.protocol+"//"+qt.host),typeof _t=="string"&&(_t.charAt(0)==="/"&&(_t=_t.charAt(1)==="/"?qt.protocol+_t:qt.host+_t),/^(https?|wss?):\/\//.test(_t)||(_t=qt!==void 0?qt.protocol+"//"+_t:"https://"+_t),Hn=kr(_t)),Hn.port||(/^(http|ws)$/.test(Hn.protocol)?Hn.port="80":/^(http|ws)s$/.test(Hn.protocol)&&(Hn.port="443")),Hn.path=Hn.path||"/";const vn=Hn.host.indexOf(":")!==-1?"["+Hn.host+"]":Hn.host;return Hn.id=Hn.protocol+"://"+vn+":"+Hn.port+Tn,Hn.href=Hn.protocol+"://"+vn+(qt&&qt.port===Hn.port?"":":"+Hn.port),Hn}(te,(G=G||{}).path||"/socket.io"),oe=Y.source,Oe=Y.id,rt=Y.path,St=bn[Oe]&&rt in bn[Oe].nsps;let Dt;return G.forceNew||G["force new connection"]||G.multiplex===!1||St?Dt=new kn(oe,G):(bn[Oe]||(bn[Oe]=new kn(oe,G)),Dt=bn[Oe]),Y.query&&!G.query&&(G.query=Y.queryKey),Dt.socket(Y.path,G)}Object.assign(Ar,{Manager:kn,Socket:bt,io:Ar,connect:Ar});var Sr=d(76),Dr=d(7833),Xn=d.n(Dr),qn="mediasoup-demo",ma=function(){return(0,R.A)(function te(G){(0,f.A)(this,te),G?(this._debug=Xn()("".concat(qn,":").concat(G)),this._warn=Xn()("".concat(qn,":WARN:").concat(G)),this._error=Xn()("".concat(qn,":ERROR:").concat(G))):(this._debug=Xn()(qn),this._warn=Xn()("".concat(qn,":WARN")),this._error=Xn()("".concat(qn,":ERROR"))),Xn().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)},[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])}();function ca(te,G){var Y=Object.keys(te);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(te);G&&(oe=oe.filter(function(Oe){return Object.getOwnPropertyDescriptor(te,Oe).enumerable})),Y.push.apply(Y,oe)}return Y}function Ta(te){for(var G=1;G<arguments.length;G++){var Y=arguments[G]!=null?arguments[G]:{};G%2?ca(Object(Y),!0).forEach(function(oe){(0,g.A)(te,oe,Y[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(Y)):ca(Object(Y)).forEach(function(oe){Object.defineProperty(te,oe,Object.getOwnPropertyDescriptor(Y,oe))})}return te}var Da=d(1396),ss=Da.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),ai=Da.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function Ui(te){return os.apply(this,arguments)}function os(){return os=(0,v.A)(m().mark(function te(G){var Y,oe,Oe,rt,St,Dt,_t,Tn,qt,Hn,vn,Qr,qr,ia,Jr,Rs,ks;return m().wrap(function(es){for(;;)switch(es.prev=es.next){case 0:return Y=G.roomId,oe=G.secret,Oe=G.signalingBaseUrl,rt="call-api.videosdk.live",St=[],Dt=null,_t={},Tn={},qt={},Hn=null,vn=null,Qr=null,es.next=1,fetch("https://".concat(Oe,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:oe,"Content-Type":"application/json"},body:JSON.stringify({roomId:Y})}).then(function(){var Ys=(0,v.A)(m().mark(function Qs(oo){var Li;return m().wrap(function(Zi){for(;;)switch(Zi.prev=Zi.next){case 0:return Zi.next=1,oo.json();case 1:return Li=Zi.sent,Zi.abrupt("return",Ta({success:oo.status==200},Li));case 2:case"end":return Zi.stop()}},Qs)}));return function(Qs){return Ys.apply(this,arguments)}}()).catch(function(Ys){return{success:!1}});case 1:if(qr=es.sent,ia=qr.data,Jr=qr.success,Rs=qr.error,Jr){es.next=2;break}throw Error(Rs??"Error getting server configurations");case 2:return ia&&(rt=ia.baseUrl,ks=ia.observability,St=Ei(ia.iceServers),Dt=ks.jwt,_t=ks.traces,Tn=ks.logs,qt=ks.metaData,Hn=ia.signalingUrl,Qr=ia.socketPath,vn=ia.socketUrl),es.abrupt("return",{baseUrl:rt,iceServers:St,observabilityJwt:Dt,traces:_t,logs:Tn,metaData:qt,signalingUrl:Hn,socketPath:Qr,socketUrl:vn});case 3:case"end":return es.stop()}},te)})),os.apply(this,arguments)}function Ei(te){try{var G=Da.AES.decrypt(te,ss,{iv:ai,mode:Da.mode.CBC,padding:Da.pad.ZeroPadding}).toString(Da.enc.Utf8);return JSON.parse(G)}catch{return[]}}var Qi=d(2215),Zr=d.n(Qi),Si="mediasoup-demo.user",Ai="mediasoup-demo.devices";function sn(te){var G=te.displayName;Zr().set(Si,{displayName:G})}function $n(){return Zr().getJSON(Ai)}var Bn=d(2211),nr=d.n(Bn),wn=function(te){return{type:"SET_ROOM_STATE",payload:{state:te}}},On=function(te){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:te}}},jr=function(te){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:te}}},vr=function(te){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:te.canSendMic,canSendWebcam:te.canSendWebcam}}},yr=function(te){return{type:"SET_CAN_CHANGE_WEBCAM",payload:te}},An=function(te){return{type:"SET_DISPLAY_NAME",payload:{displayName:te}}},Br=function(te){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:te}}},Ea=function(te){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:te}}},ua=function(te){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:te}}},ya=function(te){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:te}}},ja=function(te){return{type:"ADD_PRODUCER",payload:{producer:te}}},Ba=function(te){return{type:"REMOVE_PRODUCER",payload:{producerId:te}}},Wa=function(te){return{type:"SET_PRODUCER_PAUSED",payload:{producerId:te}}},Sa=function(te){return{type:"SET_PRODUCER_RESUMED",payload:{producerId:te}}},Qa=function(te,G){return{type:"SET_PRODUCER_TRACK",payload:{producerId:te,track:G}}},pi=function(te,G){return{type:"SET_PRODUCER_SCORE",payload:{producerId:te,score:G}}},Is=function(te){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:te}}},Ji=function(te){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:te}}},cs=function(te){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:te}}},mi=function(te){return{type:"ADD_PEER",payload:{peer:te}}},no=function(te){return{type:"REMOVE_PEER",payload:{peerId:te}}},$s=function(te,G){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:te,peerId:G}}},ws=function(te,G){return{type:"ADD_CONSUMER",payload:{consumer:te,peerId:G}}},js=function(te,G){return{type:"REMOVE_CONSUMER",payload:{consumerId:te,peerId:G}}},ls=function(te,G){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:te,originator:G}}},Xi=function(te,G){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:te,originator:G}}},us=function(te,G,Y){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:te,spatialLayer:G,temporalLayer:Y}}},zo=function(te,G,Y){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:te,spatialLayer:G,temporalLayer:Y}}},_r=function(te,G){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:te,priority:G}}},xi=function(te,G){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:te,score:G}}},na=function(te,G){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:te,peerId:G}}},Hi=function(te,G){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:te,peerId:G}}},Bs=function(){return{type:"REMOVE_ALL_NOTIFICATIONS"}},Wn=function(te){var G=te.type,Y=G===void 0?"info":G,oe=te.text,Oe=te.title,rt=te.timeout;if(!rt)switch(Y){case"info":rt=3e3;break;case"error":rt=5e3}var St={id:nr()({length:6}).toLowerCase(),type:Y,title:Oe,text:oe,timeout:rt};return function(Dt){Dt(function(_t){return{type:"ADD_NOTIFICATION",payload:{notification:_t}}}(St)),setTimeout(function(){Dt({type:"REMOVE_NOTIFICATION",payload:{notificationId:St.id}})},rt)}},Oi=d(7007),Fi=d(1803),qi=d(9027),pr=d(7080),Ma="CONNECTING",Di="CONNECTED",Ro="RECONNECTING",ti="FAILED",Es="DISCONNECTED",Ws=d(5414),Fa=d(2107),nc=d(5071),Mi=Array(32);function Mr(){for(var te=0;te<16;te++)Mi[te]=Math.floor(16*Math.random())+48,Mi[te]>=58&&(Mi[te]+=39);return String.fromCharCode.apply(null,Mi.slice(0,16))}function Vi(){var te=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(te)}function ni(te,G){var Y=Object.keys(te);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(te);G&&(oe=oe.filter(function(Oe){return Object.getOwnPropertyDescriptor(te,Oe).enumerable})),Y.push.apply(Y,oe)}return Y}function Ss(te){for(var G=1;G<arguments.length;G++){var Y=arguments[G]!=null?arguments[G]:{};G%2?ni(Object(Y),!0).forEach(function(oe){(0,g.A)(te,oe,Y[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(Y)):ni(Object(Y)).forEach(function(oe){Object.defineProperty(te,oe,Object.getOwnPropertyDescriptor(Y,oe))})}return te}var ko=function(){return(0,R.A)(function te(G){var Y=this,oe=G.roomId,Oe=G.peerId,rt=G.sdkName,St=G.observabilityJwt,Dt=G.metaData,_t=G.traces;(0,f.A)(this,te),this._traceId=function(){for(var qt=0;qt<32;qt++)Mi[qt]=Math.floor(16*Math.random())+48,Mi[qt]>=58&&(Mi[qt]+=39);return String.fromCharCode.apply(null,Mi.slice(0,32))}(),this._rootSpanId=Mr(),this._observabilityJwt=St,this._tracesEnabled=_t.enabled,this._tracesEndpoint=_t.endPoint;var Tn=function(qt){for(var Hn="0123456789abcdefghijklmnopqrstuvwxyz",vn="",Qr=qt;Qr>0;Qr--)vn+=Hn[Math.floor(36*Math.random())];return vn}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.2.14"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:Tn},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(oe,Oe,rt,Dt),setInterval(function(){Y.processQueue()},4e3))},[{key:"addRootSpan",value:function(te,G,Y,oe){var Oe={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(te,"_peer_").concat(G,"_sdk_").concat(Y),kind:1,startTimeUnixNano:Vi(),endTimeUnixNano:Vi(),attributes:[{key:"roomId",value:{stringValue:te}},{key:"peerId",value:{stringValue:G}},{key:"sdkName",value:{stringValue:Y}},{key:"userId",value:{stringValue:oe.userId}},{key:"email",value:{stringValue:oe.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(Oe)}},{key:"addSpanToTrace",value:function(te){this._spans.push(te)}},{key:"trace",value:function(te){var G=te.spanName,Y=te.attributes,oe=Y===void 0?{}:Y,Oe=te.span,rt=Oe===void 0?void 0:Oe;if(this._tracesEnabled){var St=Mr(),Dt=Vi(),_t={traceId:this._traceId,spanId:St,parentSpanId:rt||this._rootSpanId,name:G,kind:1,startTimeUnixNano:Dt,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(oe).length>0&&(_t.attributes=Object.entries(oe).map(function(Tn){var qt=(0,_.A)(Tn,2);return{key:qt[0],value:{stringValue:qt[1]}}})),this.addSpanToTrace(_t),St}}},{key:"traceAutoComplete",value:function(te){var G=te.spanName,Y=te.attributes,oe=Y===void 0?{}:Y,Oe=te.status,rt=Oe===void 0?1:Oe,St=te.span,Dt=St===void 0?void 0:St,_t=te.message,Tn=_t===void 0?"SUCCESS":_t;if(this._tracesEnabled){var qt=Mr(),Hn=Vi(),vn=Vi(),Qr={traceId:this._traceId,spanId:qt,parentSpanId:Dt||this._rootSpanId,name:G,kind:1,startTimeUnixNano:Hn,endTimeUnixNano:vn,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:rt,message:Tn}};Object.keys(oe).length>0&&(Qr.attributes=Object.entries(oe).map(function(qr){var ia=(0,_.A)(qr,2);return{key:ia[0],value:{stringValue:ia[1]}}})),this.addSpanToTrace(Qr)}}},{key:"completeSpan",value:function(te){var G=te.span,Y=te.status,oe=te.message,Oe=te.attributes,rt=Oe===void 0?{}:Oe;if(this._tracesEnabled){var St=Vi();this._spans=this._spans.map(function(Dt){if(Dt.spanId!==G)return Dt;var _t=Object.entries(rt).map(function(Tn){var qt=(0,_.A)(Tn,2);return{key:qt[0],value:{stringValue:qt[1]}}});return Dt.attributes=Dt.attributes?[].concat((0,b.A)(Dt.attributes),(0,b.A)(_t)):_t,Ss(Ss({},Dt),{},{status:{code:Y,message:oe},endTimeUnixNano:St})})}}},{key:"processQueue",value:function(){var te=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var G={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,G).then(function(){var Y=(0,v.A)(m().mark(function oe(Oe){return m().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return te._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],rt.next=1,Oe.text();case 1:return rt.abrupt("return",rt.sent);case 2:case"end":return rt.stop()}},oe)}));return function(oe){return Y.apply(this,arguments)}}()).then(function(Y){}).catch(function(Y){te._spans=te._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",Y)})}}}])}();function Co(te,G){var Y=Object.keys(te);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(te);G&&(oe=oe.filter(function(Oe){return Object.getOwnPropertyDescriptor(te,Oe).enumerable})),Y.push.apply(Y,oe)}return Y}function zs(te){for(var G=1;G<arguments.length;G++){var Y=arguments[G]!=null?arguments[G]:{};G%2?Co(Object(Y),!0).forEach(function(oe){(0,g.A)(te,oe,Y[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(Y)):Co(Object(Y)).forEach(function(oe){Object.defineProperty(te,oe,Object.getOwnPropertyDescriptor(Y,oe))})}return te}var on=function(){return(0,R.A)(function G(Y){var oe=Y.roomId,Oe=Y.peerId,rt=Y.logs,St=Y.observabilityJwt,Dt=Y.deviceInfo,_t=Y.sessionId,Tn=Y.debugMode;(0,f.A)(this,G);var qt=Dt.browserUserAgent,Hn=Dt.deviceUserAgent,vn=Dt.platform;this._peerId=Oe,this._roomId=oe,this._logs=rt,this._observabilityJwt=St,this._deviceInfo=Dt,this._sessionId=_t,this._debugMode=Tn,this.browserOrDeviceInfo=qt?{browserName:qt.browser.name,browserVersion:qt.browser.version,osName:qt.os.name,osVersion:qt.os.version,platform:vn}:Hn?zs({platform:vn},Hn):null},[{key:"pushLogs",value:(te=(0,v.A)(m().mark(function G(Y){var oe,Oe,rt,St,Dt,_t,Tn,qt;return m().wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:if(oe=Y.logType,Oe=Y.logText,rt=Y.attributes,St=Y.dashboardLog,Dt=St!==void 0&&St,_t=this._logs,Tn=_t.enabled,qt=_t.endPoint,!Tn){Hn.next=2;break}return Hn.next=1,fetch(qt,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:oe,logText:Oe,attributes:zs(zs({},rt),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),debugMode:this._debugMode,dashboardLog:Dt})}).then(function(vn){return vn.json()}).catch(function(vn){return console.log("error",vn),{}});case 1:return Hn.abrupt("return",Hn.sent);case 2:return Hn.abrupt("return",null);case 3:case"end":return Hn.stop()}},G,this)})),function(G){return te.apply(this,arguments)})}]);var te}(),ge=d(4973),Pt=d(388),Kn=d(3954),aa=d(5501),qa=d(3662);function ii(){try{var te=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ii=function(){return!!te})()}function Lc(te){var G=typeof Map=="function"?new Map:void 0;return Lc=function(Y){if(Y===null||!function(Oe){try{return Function.toString.call(Oe).indexOf("[native code]")!==-1}catch{return typeof Oe=="function"}}(Y))return Y;if(typeof Y!="function")throw new TypeError("Super expression must either be null or a function");if(G!==void 0){if(G.has(Y))return G.get(Y);G.set(Y,oe)}function oe(){return function(Oe,rt,St){if(ii())return Reflect.construct.apply(null,arguments);var Dt=[null];Dt.push.apply(Dt,rt);var _t=new(Oe.bind.apply(Oe,Dt));return St&&(0,qa.A)(_t,St.prototype),_t}(Y,arguments,(0,Kn.A)(this).constructor)}return oe.prototype=Object.create(Y.prototype,{constructor:{value:oe,enumerable:!1,writable:!0,configurable:!0}}),(0,qa.A)(oe,Y)},Lc(te)}function Ic(te,G,Y){return G=(0,Kn.A)(G),(0,Pt.A)(te,Cr()?Reflect.construct(G,Y||[],(0,Kn.A)(te).constructor):G.apply(te,Y))}function Cr(){try{var te=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cr=function(){return!!te})()}var jc,Uo=function(te){function G(Y,oe){var Oe;return(0,f.A)(this,G),Oe=Ic(this,G,[oe||"an error has occured"]),(0,g.A)(Oe,"code",void 0),Oe.name="VideoSdkError",Oe.code=Y,Oe}return(0,aa.A)(G,te),(0,R.A)(G)}(Lc(Error));(function(te){te[te.InvalidKey=0]="InvalidKey",te[te.MissingKey=1]="MissingKey",te[te.InternalError=2]="InternalError"})(jc||(jc={}));var ro=function(te){function G(Y){var oe;return(0,f.A)(this,G),(oe=Ic(this,G,[21,Y??"device is unsupported"])).name="DeviceUnsupportedError",oe}return(0,aa.A)(G,te),(0,R.A)(G)}(Uo),Gs=d(1806),xs=d(6746),Ks=d(8278);function Sc(te,G){return te?G=="audio"?"shareAudio":"share":G}function Bc(te,G){var Y=typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(!Y){if(Array.isArray(te)||(Y=function(_t,Tn){if(_t){if(typeof _t=="string")return rc(_t,Tn);var qt={}.toString.call(_t).slice(8,-1);return qt==="Object"&&_t.constructor&&(qt=_t.constructor.name),qt==="Map"||qt==="Set"?Array.from(_t):qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt)?rc(_t,Tn):void 0}}(te))||G){Y&&(te=Y);var oe=0,Oe=function(){};return{s:Oe,n:function(){return oe>=te.length?{done:!0}:{done:!1,value:te[oe++]}},e:function(_t){throw _t},f:Oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rt,St=!0,Dt=!1;return{s:function(){Y=Y.call(te)},n:function(){var _t=Y.next();return St=_t.done,_t},e:function(_t){Dt=!0,rt=_t},f:function(){try{St||Y.return==null||Y.return()}finally{if(Dt)throw rt}}}}function rc(te,G){(G==null||G>te.length)&&(G=te.length);for(var Y=0,oe=Array(G);Y<G;Y++)oe[Y]=te[Y];return oe}function Ri(){try{var te=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ri=function(){return!!te})()}var sl=function(te){function G(oe){var Oe,rt,St,Dt;return(0,f.A)(this,G),rt=this,St=G,St=(0,Kn.A)(St),(Oe=(0,Pt.A)(rt,Ri()?Reflect.construct(St,[],(0,Kn.A)(rt).constructor):St.apply(rt,Dt))).onWorkerMessage=function(_t){var Tn,qt=_t.data,Hn=qt.kind,vn=qt.data;switch(Hn){case"error":console.error(vn.error.message),Oe.emit(xs.KS.EncryptionError,vn.error);break;case"initAck":vn.enabled&&Oe.keyProvider.getKeys().forEach(function(qr){Oe.postKey(qr)});break;case"enable":if(vn.enabled&&Oe.keyProvider.getKeys().forEach(function(qr){Oe.postKey(qr)}),Oe.encryptionEnabled!==vn.enabled&&vn.participantIdentity===Oe.room._peerId)Oe.emit(xs.KS.ParticipantEncryptionStatusChanged,vn.enabled,Oe.room.localParticipant),Oe.encryptionEnabled=vn.enabled;else if(vn.participantIdentity){var Qr=(Tn=Oe.room)===null||Tn===void 0?void 0:Tn.getParticipantByIdentity(vn.participantIdentity);if(!Qr)throw TypeError("couldn't set encryption status, participant not found".concat(vn.participantIdentity));Oe.emit(xs.KS.ParticipantEncryptionStatusChanged,vn.enabled,Qr)}break;case"ratchetKey":Oe.keyProvider.emit(xs.fo.KeyRatcheted,vn.material,vn.keyIndex);break;case"e2eeStateChange":Oe.emit(xs.KS.E2EEStateChange,vn);break;default:console.log("unknown message kind",_t)}},Oe.onWorkerError=function(_t){var Tn;console.error("Worker encountered an error:",_t),console.error("Error message:",_t.message),console.error("Error filename:",_t.filename),console.error("Error line number:",_t.lineno),console.error("Error stack:",(Tn=_t.error)===null||Tn===void 0?void 0:Tn.stack)},Oe.keyProvider=oe.keyProvider,Oe.worker=oe.worker,Oe.encryptionEnabled=!1,Oe}return(0,aa.A)(G,te),(0,R.A)(G,[{key:"setup",value:function(oe){if(!(0,Ks.Ag)())throw new ro("tried to setup end-to-end encryption on an unsupported browser");if(console.info("setting up e2ee"),oe!==this.room){this.room=oe,this.setupEventListeners(oe,this.keyProvider),this.handleE2EEManagerEvents();var Oe={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};console.log("msg",Oe),this.worker&&(console.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(Oe))}}},{key:"setParticipantCryptorEnabled",value:function(oe,Oe){console.debug("set e2ee to ".concat(oe," for participant ").concat(Oe)),this.postEnable(oe,Oe)}},{key:"setSifTrailer",value:function(oe){oe&&oe.length!==0?this.postSifTrailer(oe):console.warn("ignoring server sent trailer as it's empty")}},{key:"setupEventListeners",value:function(oe,Oe){var rt=this;Oe.on(xs.fo.SetKey,function(St){console.log("### keyInfo",St),rt.postKey(St)}).on(xs.fo.RatchetRequest,function(St,Dt){return rt.postRatchetRequest(St,Dt)})}},{key:"postRatchetRequest",value:function(oe,Oe){if(!this.worker)throw Error("could not ratchet key, worker is missing");var rt={kind:"ratchetRequest",data:{participantIdentity:oe,keyIndex:Oe}};this.worker.postMessage(rt)}},{key:"postKey",value:function(oe){var Oe=oe.key,rt=oe.participantIdentity,St=oe.keyIndex;if(!this.worker)throw Error("could not set key, worker is missing");var Dt={kind:"setKey",data:{participantIdentity:rt,isPublisher:rt===this.room._peerId,key:Oe,keyIndex:St}};this.worker.postMessage(Dt)}},{key:"postEnable",value:function(oe,Oe){if(!this.worker)throw new ReferenceError("failed to enable e2ee, worker is not ready");var rt={kind:"enable",data:{enabled:oe,participantIdentity:Oe}};this.worker.postMessage(rt)}},{key:"postRTPMap",value:function(oe){var Oe;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((Oe=this.room)===null||Oe===void 0)&&Oe._peerId))throw TypeError("could not post rtp map, local participant identity is missing");var rt={kind:"setRTPMap",data:{map:oe,participantIdentity:this.room._peerId}};this.worker.postMessage(rt)}},{key:"postSifTrailer",value:function(oe){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");var Oe={kind:"setSifTrailer",data:{trailer:oe}};this.worker.postMessage(Oe)}},{key:"setupE2EEReceiver",value:function(oe,Oe){var rt;this.handleReceiver(oe,oe.rtpReceiver,oe.track.id,Oe,this.extractCodec(oe.rtpParameters.codecs),Sc((rt=oe.appData)===null||rt===void 0?void 0:rt.share,oe.kind))}},{key:"setupE2EESender",value:function(oe){var Oe;oe?this.handleSender(oe.rtpSender,oe.track.id,this.extractCodec(oe.rtpParameters.codecs),Sc((Oe=oe.appData)===null||Oe===void 0?void 0:Oe.share,oe.kind),this.room._peerId):console.error("Producer is required to setup E2EE sender")}},{key:"handleReceiver",value:(Y=(0,v.A)(m().mark(function oe(Oe,rt,St,Dt,_t,Tn){var qt,Hn,vn,Qr,qr,ia;return m().wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:if(this.worker){Jr.next=1;break}return Jr.abrupt("return");case 1:if(!(0,Ks.Wm)()){Jr.next=2;break}qt={kind:"decode",participantIdentity:Dt,trackId:Oe.track.id,codec:_t},rt.transform=new RTCRtpScriptTransform(this.worker,qt),Jr.next=5;break;case 2:if(!(Gs.$Q in rt)||!_t){Jr.next=3;break}return vn={kind:"updateCodec",data:{trackId:St,codec:_t,participantIdentity:Dt}},this.worker.postMessage(vn),Jr.abrupt("return");case 3:if(Qr=rt.writableStream,qr=rt.readableStream,Qr&&qr){Jr.next=4;break}return console.error("no writable or readable stream"),Jr.abrupt("return");case 4:ia={kind:"decode",data:{readableStream:qr,writableStream:Qr,trackId:St,codec:_t,participantIdentity:Dt,mediaKind:Tn,peerId:(Hn=Oe.appData)===null||Hn===void 0?void 0:Hn.peerId}},this.worker.postMessage(ia,[qr,Qr]);case 5:rt[Gs.$Q]=!0;case 6:case"end":return Jr.stop()}},oe,this)})),function(oe,Oe,rt,St,Dt,_t){return Y.apply(this,arguments)})},{key:"handleSender",value:function(oe,Oe,rt,St,Dt){var _t;if(!(Gs.$Q in oe)&&this.worker){if(!(!((_t=this.room)===null||_t===void 0)&&_t._peerId)||this.room._peerId==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if((0,Ks.Wm)()){console.info("### initialize script transform");var Tn={kind:"encode",participantIdentity:this.room._peerId,trackId:Oe,codec:rt,mediaKind:St,peerId:Dt};oe.transform=new RTCRtpScriptTransform(this.worker,Tn)}else try{var qt=oe.senderStreams;if(qt){var Hn={kind:"encode",data:{readableStream:qt.readable,writableStream:qt.writable,codec:rt,trackId:Oe,participantIdentity:this.room._peerId,mediaKind:St,peerId:Dt}};this.worker.postMessage(Hn,[qt.readable,qt.writable])}else console.error("Error no sender streams found")}catch(vn){console.log("Error in handle sender ",vn)}oe[Gs.$Q]=!0}else console.error("### sender already set up")}},{key:"handleE2EEManagerEvents",value:function(){var oe=this;this.on("NEW_CONSUMER",function(Oe){var rt=Oe.consumer,St=Oe.peerId;console.log("NEW_CONSUMER",rt),oe.setupE2EEReceiver(rt,St)}),this.on("NEW_PRODUCER",function(Oe){oe.setupE2EESender(Oe)})}},{key:"extractCodec",value:function(oe){var Oe,rt=Bc(oe);try{for(rt.s();!(Oe=rt.n()).done;){var St=Oe.value,Dt=St.mimeType.split("/")[1].toLowerCase();if(this.kind==="audio"){if(Gs.Ts.includes(Dt)){St=Dt;break}}else if(Gs.ue.includes(Dt)){St=Dt;break}}}catch(_t){rt.e(_t)}finally{rt.f()}return""}}]);var Y}(Oi.EventEmitter);function ac(){return ic.apply(this,arguments)}function ic(){return(ic=(0,v.A)(m().mark(function te(){var G,Y,oe,Oe;return m().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return rt.next=1,fetch("https://cdn.videosdk.live/e2ee/0.0.1/bundle.js");case 1:if((G=rt.sent).ok){rt.next=2;break}throw new Error("Failed to load worker script: ".concat(G.statusText));case 2:return rt.next=3,G.text();case 3:return Y=rt.sent,oe=new Blob([Y],{type:"application/javascript"}),Oe=URL.createObjectURL(oe),rt.abrupt("return",new Worker(Oe));case 4:case"end":return rt.stop()}},te)}))).apply(this,arguments)}var ao=d(9633);function ol(te,G){var Y=Object.keys(te);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(te);G&&(oe=oe.filter(function(Oe){return Object.getOwnPropertyDescriptor(te,Oe).enumerable})),Y.push.apply(Y,oe)}return Y}function xa(te){for(var G=1;G<arguments.length;G++){var Y=arguments[G]!=null?arguments[G]:{};G%2?ol(Object(Y),!0).forEach(function(oe){(0,g.A)(te,oe,Y[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(Y)):ol(Object(Y)).forEach(function(oe){Object.defineProperty(te,oe,Object.getOwnPropertyDescriptor(Y,oe))})}return te}function La(te,G){var Y=typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(!Y){if(Array.isArray(te)||(Y=function(_t,Tn){if(_t){if(typeof _t=="string")return zc(_t,Tn);var qt={}.toString.call(_t).slice(8,-1);return qt==="Object"&&_t.constructor&&(qt=_t.constructor.name),qt==="Map"||qt==="Set"?Array.from(_t):qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt)?zc(_t,Tn):void 0}}(te))||G){Y&&(te=Y);var oe=0,Oe=function(){};return{s:Oe,n:function(){return oe>=te.length?{done:!0}:{done:!1,value:te[oe++]}},e:function(_t){throw _t},f:Oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rt,St=!0,Dt=!1;return{s:function(){Y=Y.call(te)},n:function(){var _t=Y.next();return St=_t.done,_t},e:function(_t){Dt=!0,rt=_t},f:function(){try{St||Y.return==null||Y.return()}finally{if(Dt)throw rt}}}}function zc(te,G){(G==null||G>te.length)&&(G=te.length);for(var Y=0,oe=Array(G);Y<G;Y++)oe[Y]=te[Y];return oe}function Uc(te,G){(function(Y,oe){if(oe.has(Y))throw new TypeError("Cannot initialize the same private elements twice on an object")})(te,G),G.add(te)}var ft,io={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},er={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},sc={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},so=[{scalabilityMode:"S3T3_KEY"}],hi=[{dtx:!0,maxFramerate:30}],he=new ma("RoomClient"),Cn=new WeakSet,Dn=function(){return(0,R.A)(function fe(X){var re,ae,ie=X.roomId,le=X.peerId,Pe=X.secret,De=X.displayName,ze=X.device,Et=X.handlerName,kt=X.useSimulcast,zt=X.forceTcp,mn=X.mode,jt=X.forceH264,an=X.forceVP9,hn=X.svc,ke=X.datachannel,mt=X.externalVideo,Nt=X.micEnabled,ht=X.webcamEnabled,At=X.maxResolution,We=X.useSpartialLayerAnalytics,Mt=X._deviceInfo,rn=X.customCameraVideoTrack,Vt=X.customMicrophoneAudioTrack,ln=X.autoConsume,en=X.preferredProtocol,yn=X.signalingBaseUrl,cn=X.metaData,Kt=X.defaultCameraIndex,dr=X.debugMode,tr=X.keyProvider;switch((0,f.A)(this,fe),Uc(this,Cn),(0,g.A)(this,"e2eeManager",null),he.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',ie,le,De,ze.flag),this.useSpartialLayerAnalytics=We||!1,this._deviceInfo=Mt,this._eventEmitter=new Oi.EventEmitter,this._closed=!1,this._displayName=De,this._device=ze,this._forceTcp=zt,this._preferredProtocol=en,mn){case Fa.nI.CONFERENCE:case Fa.nI.SEND_AND_RECV:re=!0,ae=!0;break;case Fa.nI.RECV_ONLY:re=!1,ae=!0;break;default:re=!1,ae=!1}if(this._mode=mn,this._produce=re,this._consume=ae,this._useDataChannel=ke,this._forceH264=!!jt,this._forceVP9=!!an,this._micEnabled=!!Nt,this._webcamEnabled=!!ht,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,mt&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=mt,this._externalVideo.play().catch(function(Ct){return he.warn("externalVideo.play() failed:%o",Ct)})),this._handlerName=Et,this._useSimulcast=kt,this._socketUrl="",this._secret=Pe,this._peerId=le,this._roomId=ie,this._baseUrl="",this._webSocket=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:At||"hd"},this._pinnedParticipants=new Map,hn&&(so[0].scalabilityMode="".concat(hn,"_KEY")),this.customCameraVideoTrack=rn,this.customMicrophoneAudioTrack=Vt,this._autoConsume=ln,this._iceServers=[],this._metrics=new Ws.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=yn||"api.videosdk.live",this._metaData=cn,this._defaultCameraIndex=Kt,this._debugMode=!!dr,this._meetingConnectionState=null,this._sendTransportInternal=null,tr){if(!(tr instanceof ao.l))throw new Error("keyProvider should be an instance of ExternalE2EEKeyProvider");(function(Ct,En,br){if(typeof Ct=="function"?Ct===En:Ct.has(En))return arguments.length<3?En:br;throw new TypeError("Private element is not present on this object")})(Cn,this,Ho).call(this,tr)}},[{key:"on",value:function(fe,X){this._eventEmitter.on(fe,X)}},{key:"softClose",value:function(){var fe,X=(fe=this._openTelemetry)===null||fe===void 0?void 0:fe.trace({name:"softClose() Start "});try{var re,ae,ie;this._eventEmitter.emit("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING");var le,Pe=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"Consumer Cleanup",parentSpan:X,attributes:{"videosdk.consumers.count":this._consumers.size||0}}),De=La(this._consumers.values());try{for(De.s();!(le=De.n()).done;)le.value.close()}catch(Et){De.e(Et)}finally{De.f()}(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:Pe,status:1,message:"Closed ".concat(this._consumers.size," consumers successfully")}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:X,status:1,message:"Soft close completed successfully"})}catch(Et){var ze;(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:X,status:2,message:"Soft close failed: ".concat(Et.message)}),console.error(Et)}}},{key:"close",value:function(fe){var X,re,ae,ie,le,Pe,De,ze=fe.sendLeft,Et=ze===void 0||ze;if(Et&&((Pe=this._openTelemetry)===null||Pe===void 0||Pe.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Meeting is in CLOSING State",logType:"INFO"})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._sendTransportInternal&&clearInterval(this._sendTransportInternal),this._sendTransportInternal=null,this._webSocket.close(),this._metrics.running&&this._metrics.stopAllProbes(),he.debug("close()");var kt=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:kt,status:1,message:"Closed Trasnport"}),ft.dispatch(wn("closed")),Et&&this.emitMeetingStateChange(Es),(ae=this._openTelemetry)===null||ae===void 0||ae.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Meeting is in CLOSED State",logType:"INFO"}),Et&&this._eventEmitter.emit("MEETING_LEFT"),(le=this._openTelemetry)===null||le===void 0||le.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(Zc=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke=this;return m().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.prev=0,mt.next=1,Ui({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 1:ie=mt.sent,le=ie.baseUrl,Pe=ie.iceServers,De=ie.logs,ze=ie.observabilityJwt,Et=ie.traces,kt=ie.metaData,zt=ie.signalingUrl,mn=ie.socketPath,jt=ie.socketUrl,this._baseUrl=le,this._socketUrl="wss://".concat(jt||this._baseUrl,"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode,"&lib=socket"),this._iceServers=Pe,this._tracesEnabled=Et.enabled,this._openTelemetry=new ko((0,g.A)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:Et,logs:De,observabilityJwt:ze,metaData:kt},"traces",Et)),this._joinSpan=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:zt||"signalingUrl not specify"}}),this._webSocket=Ar(this._socketUrl,{transports:["websocket"],reconnectionAttempts:10,reconnectionDelay:5e3,reconnection:!0,path:"".concat(mn??"","/socket.io")}),this.emitMeetingStateChange(Ma),ft.dispatch(wn("connecting")),(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Meeting is in CONNECTING State",logType:"INFO"}),this._webSocket.on("connect",function(){}),this._webSocket.on("connectionSuccess",function(){var Nt,ht;ke._isWebsocketAlive=!0,ke._closed=!1,ke._mode===(Fa.nI.RECV_ONLY||Fa.nI.SIGNALLING_ONLY)&&ke.emitMeetingStateChange(Di),(Nt=ke._openTelemetry)===null||Nt===void 0||Nt.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:ke._joinSpan,status:1}),(ht=ke._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Meeting is in CONNECTED State",logType:"INFO"}),ke.requestEntry()}),this._webSocket.on("disconnect",function(Nt){var ht,At,We,Mt,rn;(ht=ke._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Meeting is in Websocket Disconnect State",logType:"INFO",attributes:{reason:Nt},dashboardLog:!0}),(Nt==="transport close"||Nt==="transport error")&&(ke.customMicrophoneAudioTrack&&((At=ke.customMicrophoneAudioTrack)===null||At===void 0||At.getTracks().forEach(function(Vt){Vt.stop()}),ke.customMicrophoneAudioTrack=null),ke.customCameraVideoTrack&&((We=ke.customCameraVideoTrack)===null||We===void 0||We.getTracks().forEach(function(Vt){Vt.stop()}),ke.customCameraVideoTrack=null),ke._sendTransport&&((Mt=ke._sendTransport)===null||Mt===void 0||Mt.close(),ke._sendTransport=null),ke._recvTransport&&((rn=ke._recvTransport)===null||rn===void 0||rn.close(),ke._recvTransport=null))}),this._webSocket.io.on("reconnect_failed",function(){ke._closed||ke.close({sendLeft:!0})}),this._webSocket.on("connect_error",function(Nt){var ht,At,We,Mt,rn,Vt;ke._webSocket.active&&ke._webSocket.io._reconnecting?((ht=ke._openTelemetry)===null||ht===void 0||ht.traceAutoComplete({spanName:"Meeting is in RECONNECTING State",span:ke._joinSpan,status:1}),(At=ke._videosdkLogs)===null||At===void 0||At.pushLogs({logText:"Meeting is in RECONNECTING State",logType:"INFO",attributes:{error:Nt.message}}),ft.dispatch(Wn({type:"error",text:"WebSocket Reconnecting"})),ke.emitMeetingStateChange(Ro),ke._sendTransport&&((rn=ke._sendTransport)===null||rn===void 0||rn.close(),ke._sendTransport=null),ke._recvTransport&&((Vt=ke._recvTransport)===null||Vt===void 0||Vt.close(),ke._recvTransport=null),(We=ke.customMicrophoneAudioTrack)===null||We===void 0||We.getTracks().forEach(function(ln){ln.stop()}),ke.customMicrophoneAudioTrack=null,(Mt=ke.customCameraVideoTrack)===null||Mt===void 0||Mt.getTracks().forEach(function(ln){ln.stop()}),ke.customCameraVideoTrack=null):console.log("Error while trying to reconnect",Nt.message)}),this._webSocket.on("close",function(){console.log("MEETING close"),ke._closed||ke.close({sendLeft:!0})}),this._webSocket.on("newConsumer",function(){var Nt=(0,v.A)(m().mark(function ht(At,We){var Mt,rn,Vt,ln,en,yn,cn,Kt,dr,tr,Ct,En,br,$r,Xr,ka,Aa,zr,$,K,Q,de,Se,_e,be,Ve,xe;return m().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(Vt=(Mt=ke._openTelemetry)===null||Mt===void 0?void 0:Mt.trace({spanName:"Websocket REQ: newConsumer",attributes:{request:JSON.stringify(At)}}),ke._consume){Ae.next=1;break}return We({errorCode:403,message:"I do not want to consume",method:"newConsumer"}),(ln=ke._openTelemetry)===null||ln===void 0||ln.completeSpan({span:Vt,status:2,message:"I do not want to consume"}),Ae.abrupt("return");case 1:return en=At.peerId,yn=At.producerId,cn=At.id,Kt=At.kind,dr=At.rtpParameters,tr=At.type,Ct=At.appData,En=At.producerPaused,br=(rn=ke._openTelemetry)===null||rn===void 0?void 0:rn.trace({spanName:"Creating Consumer",span:Vt}),Ae.prev=2,Ae.next=3,ke._recvTransport.consume({id:cn,producerId:yn,kind:Kt,rtpParameters:dr,appData:xa(xa({},Ct),{},{peerId:en}),onRtpReceiver:function(Ke){if(ke.e2eeManager){var $e=Ke.writableStream,Ne=Ke.readableStream;if(!$e||!Ne){var et=Ke.createEncodedStreams();Ke.writableStream=et.writable,$e=et.writable,Ke.readableStream=et.readable,Ne=et.readable}}}});case 3:zr=Ae.sent,$=Sr.s$(zr.rtpParameters.encodings[0].scalabilityMode),K=$.spatialLayers,Q=$.temporalLayers,zr.spatialLayers=K,zr.temporalLayers=Q,zr.currentSpatialLayers=K-1,zr.currentTemporalLayers=Q-1,ke._consumers.set(zr.id,zr),zr.on("transportclose",function(){ke._consumers.delete(zr.id);var Ke=js(zr.id,en);ft.dispatch(Ke),ke._eventEmitter.emit(Ke.type,Ke.payload)}),($r=ke._openTelemetry)===null||$r===void 0||$r.completeSpan({span:br,status:1,message:"Consumer Created"}),br=(Xr=ke._openTelemetry)===null||Xr===void 0?void 0:Xr.trace({spanName:"Sending Stream Enabled Event",span:Vt}),de=ws({id:zr.id,type:tr,locallyPaused:!1,remotelyPaused:En,rtpParameters:zr.rtpParameters,spatialLayers:K,temporalLayers:Q,currentSpatialLayer:K-1,currentTemporalLayer:Q-1,preferredSpatialLayer:K-1,preferredTemporalLayer:Q-1,priority:1,codec:zr.rtpParameters.codecs[0].mimeType.split("/")[1],track:zr.track,appData:Ct,instance:zr},en),ft.dispatch(de),ke._eventEmitter.emit(de.type,de.payload),We(),zr.kind==="video"&&ft.getState().me.audioOnly&&ke._pauseConsumer(zr),(ka=ke._openTelemetry)===null||ka===void 0||ka.completeSpan({span:br,status:1,message:"Event Send Successfully"}),(Aa=ke._openTelemetry)===null||Aa===void 0||Aa.completeSpan({span:Vt,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":zr.id}}),zr.kind=="video"&&zr.appData.share&&((Se=ke._openTelemetry)===null||Se===void 0||Se.traceAutoComplete({spanName:"Presenter Changed",span:Vt,attributes:{"peer.id":en}})),ke.e2eeManager&&ke.e2eeManager.emit("NEW_CONSUMER",{consumer:zr,peerId:ke._peerId}),Ae.next=5;break;case 4:throw Ae.prev=4,xe=Ae.catch(2),(_e=ke._openTelemetry)===null||_e===void 0||_e.completeSpan({span:br,status:2,message:"Error creating a Consumer: ".concat(xe)}),(be=ke._openTelemetry)===null||be===void 0||be.completeSpan({span:Vt,status:2,message:"Error creating a Consumer: ".concat(xe)}),ft.dispatch(Wn({type:"error",text:"Error creating a Consumer: ".concat(xe)})),(Ve=ke._videosdkLogs)===null||Ve===void 0||Ve.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:xe.message}}),xe;case 5:case"end":return Ae.stop()}},ht,null,[[2,4]])}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("newDataConsumer",function(){var Nt=(0,v.A)(m().mark(function ht(At,We){var Mt,rn,Vt,ln,en,yn,cn,Kt,dr;return m().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:if(ke._consume){tr.next=1;break}return We({errorCode:403,message:"I do not want to data consume",method:"newConsumer"}),tr.abrupt("return");case 1:if(ke._useDataChannel){tr.next=2;break}return We({errorCode:403,message:"I do not want DataChannels",method:"newConsumer"}),tr.abrupt("return");case 2:return Mt=At.peerId,rn=At.dataProducerId,Vt=At.id,ln=At.sctpStreamParameters,en=At.label,yn=At.protocol,cn=At.appData,tr.prev=3,tr.next=4,ke._recvTransport.consumeData({id:Vt,dataProducerId:rn,sctpStreamParameters:ln,label:en,protocol:yn,appData:xa(xa({},cn),{},{peerId:Mt})});case 4:Kt=tr.sent,ke._dataConsumers.set(Kt.id,Kt),Kt.on("transportclose",function(){ke._dataConsumers.delete(Kt.id)}),Kt.on("open",function(){he.debug('DataConsumer "open" event')}),Kt.on("close",function(){he.warn('DataConsumer "close" event'),ke._dataConsumers.delete(Kt.id),ft.dispatch(Wn({type:"error",text:"DataConsumer closed"}))}),Kt.on("error",function(Ct){he.error('DataConsumer "error" event:%o',Ct),ft.dispatch(Wn({type:"error",text:"DataConsumer error: ".concat(Ct)}))}),Kt.on("message",function(Ct){if(he.debug('DataConsumer "message" event [streamId:%d]',Kt.sctpStreamParameters.streamId),Ct instanceof ArrayBuffer){var En=new DataView(Ct).getUint32();return En==Math.pow(2,32)-1?(he.warn("dataChannelTest finished!"),void(ke._nextDataChannelTestNumber=0)):(En>ke._nextDataChannelTestNumber&&he.warn("dataChannelTest: %s packets missing",En-ke._nextDataChannelTestNumber),void(ke._nextDataChannelTestNumber=En+1))}if(typeof Ct=="string")switch(Kt.label){case"chat":var br=ft.getState().peers,$r=Object.keys(br).map(function(Xr){return br[Xr]}).find(function(Xr){return Xr.dataConsumers.includes(Kt.id)});if(!$r){he.warn('DataConsumer "message" from unknown peer');break}ft.dispatch(Wn({title:"".concat($r.displayName," says:"),text:Ct,timeout:5e3})),ke._eventEmitter.emit("CHAT_MESSAGE",{text:Ct,senderId:$r.id,timestamp:new Date().getTime()});break;case"bot":ft.dispatch(Wn({title:"Message from Bot:",text:Ct,timeout:5e3}))}else he.warn('ignoring DataConsumer "message" (not a string)')}),ft.dispatch(na({id:Kt.id,sctpStreamParameters:Kt.sctpStreamParameters,label:Kt.label,protocol:Kt.protocol},Mt)),We(),tr.next=6;break;case 5:tr.prev=5,dr=tr.catch(3),he.error('"newDataConsumer" request failed:%o',dr),ft.dispatch(Wn({type:"error",text:"Error creating a DataConsumer: ".concat(dr)}));case 6:case"end":return tr.stop()}},ht,null,[[3,5]])}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("enableMic",function(){var Nt=(0,v.A)(m().mark(function ht(At,We){var Mt,rn,Vt;return m().wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:try{rn=At.peerId,(Mt=ke._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Websocket REQ: enableMic for ".concat(rn),status:1}),ke._eventEmitter.emit("MIC_REQUESTED",{peerId:rn}),We()}catch(en){he.error('"enableMic" request failed:%o',en),(Vt=ke._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:en.message}}),ke._emitError({code:3027,message:en.message})}case 1:case"end":return ln.stop()}},ht)}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("disableMic",function(){var Nt=(0,v.A)(m().mark(function ht(At,We){var Mt,rn,Vt,ln,en,yn;return m().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return cn.prev=0,Mt=(rn=ke._openTelemetry)===null||rn===void 0?void 0:rn.trace({spanName:"Websocket REQ: disableMic"}),cn.next=1,ke.disableMic(!1,Mt);case 1:(Vt=ke._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:Mt,status:1,message:"Request Completed"}),We(),cn.next=3;break;case 2:cn.prev=2,yn=cn.catch(0),(ln=ke._openTelemetry)===null||ln===void 0||ln.completeSpan({span:Mt,status:2,message:"disableMic request failed ".concat(yn)}),(en=ke._videosdkLogs)===null||en===void 0||en.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:yn.message}}),ke._emitError({code:3028,message:yn.message});case 3:case"end":return cn.stop()}},ht,null,[[0,2]])}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("enableWebcam",function(){var Nt=(0,v.A)(m().mark(function ht(At,We){var Mt,rn,Vt;return m().wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:try{rn=At.peerId,(Mt=ke._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Websocket REQ: enableWebcam for ".concat(rn),status:1}),ke._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:rn}),We()}catch(en){he.error('"enableWebcam" request failed:%o',en),(Vt=ke._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:en.message}}),ke._emitError({code:3029,message:en.message})}case 1:case"end":return ln.stop()}},ht)}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("disableWebcam",function(){var Nt=(0,v.A)(m().mark(function ht(At,We){var Mt,rn,Vt,ln,en,yn;return m().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return cn.prev=0,Mt=(rn=ke._openTelemetry)===null||rn===void 0?void 0:rn.trace({spanName:"Websocket REQ: disableWebcam"}),cn.next=1,ke.disableWebcam(Mt);case 1:(Vt=ke._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:Mt,status:1,message:"Request Completed"}),We(),cn.next=3;break;case 2:cn.prev=2,yn=cn.catch(0),(ln=ke._openTelemetry)===null||ln===void 0||ln.completeSpan({span:Mt,status:2,message:"disableWebcam request failed ".concat(yn)}),(en=ke._videosdkLogs)===null||en===void 0||en.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:yn.message}}),ke._emitError({code:3030,message:yn.message});case 3:case"end":return cn.stop()}},ht,null,[[0,2]])}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("pinStateChanged",function(){var Nt=(0,v.A)(m().mark(function ht(At,We){var Mt,rn,Vt,ln,en,yn,cn,Kt,dr,tr;return m().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:Ct.prev=0,ln=At.peerId,en=At.state,yn=At.pinnedBy,Mt=(rn=ke._openTelemetry)===null||rn===void 0?void 0:rn.trace({spanName:"Websocket REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:ln,state:en,pinnedBy:yn})}}),ke._pinnedParticipants.has(ln)||ke._pinnedParticipants.set(ln,{cam:!1,share:!1}),cn=ke._pinnedParticipants.get(ln),en.cam!=null&&(cn.cam=en.cam),en.share!=null&&(cn.share=en.share),ke._pinnedParticipants.set(ln,cn),ke._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:ln,state:en,pinnedBy:yn}),cn.share==0&&cn.cam==0&&ke._pinnedParticipants.delete(ln),(Vt=ke._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:Mt,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(ke._pinnedParticipants)}}),We(),Ct.next=2;break;case 1:throw Ct.prev=1,tr=Ct.catch(0),(Kt=ke._openTelemetry)===null||Kt===void 0||Kt.completeSpan({span:Mt,status:2,message:"pinStateChanged request failed"}),(dr=ke._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:tr.message}}),tr;case 2:case"end":return Ct.stop()}},ht,null,[[0,1]])}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("switchRoom",function(){var Nt=(0,v.A)(m().mark(function ht(At,We){return m().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:ke._eventEmitter.emit("SWITCH_ROOM",At),We();case 1:case"end":return Mt.stop()}},ht)}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("statsData",function(){var Nt=(0,v.A)(m().mark(function ht(At,We){return m().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:We({peerId:ke._peerId,statsData:ke._stats}),ke._stats={};case 1:case"end":return Mt.stop()}},ht)}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("notification",function(){var Nt=(0,v.A)(m().mark(function ht(At){var We,Mt,rn,Vt,ln,en,yn,cn,Kt,dr,tr,Ct,En,br,$r,Xr,ka,Aa,zr,$,K,Q,de,Se,_e,be,Ve,xe,Ae,Ke,$e,Ne,et,ue,me,Me,qe,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn,nn,un,Jn,Rr,_n,dn,wr,mr,Yn,In,gn,Lr,ha,Ci,fs,cl,lu,Ul,$c,uu,du,nd,pu,rd,ad,Hl,id,mu,Fl,hu,fu,lp,gu,sd,od,vu,cd,ld,up,dp,ud,ll,yu,fr;return m().wrap(function(Vn){for(;;)switch(Vn.prev=Vn.next){case 0:We=At,he.debug('proto "notification" event [method:%s, data:%o]',At.method,We),fr=At.method,Vn.next=fr==="error"?1:fr==="participantMediaStateChanged"?2:fr==="producerScore"?3:fr==="entryRequested"?4:fr==="entryResponded"?5:fr==="newPeer"?8:fr==="peerClosed"?9:fr==="peerDisplayNameChanged"?10:fr==="consumerClosed"?11:fr==="consumerPaused"?13:fr==="consumerResumed"?15:fr==="consumerLayersChanged"?17:fr==="consumerScore"?19:fr==="dataConsumerClosed"?20:fr==="activeSpeaker"?22:fr==="consumerResumedSubManager"?23:fr==="consumerPausedSubManager"?24:fr==="transcriptionStateChanged"?25:fr==="transcriptionText"?26:fr==="recordingStateChanged"?27:fr==="recordingStarted"?28:fr==="recordingStopped"?29:fr==="livestreamStateChanged"?30:fr==="livestreamStarted"?31:fr==="livestreamStopped"?32:fr==="hlsStateChanged"?33:fr==="hlsPlayableStateChanged"?34:fr==="hlsStarted"?35:fr==="hlsStopped"?36:fr==="whiteboardStarted"?37:fr==="whiteboardStopped"?38:fr==="addCharacter"?39:fr==="removeCharacter"?40:fr==="characterStateChanged"?41:fr==="characterMessage"?42:fr==="userMessage"?43:fr==="characterData"?44:fr==="characterError"?45:fr==="videoStatusChanged"?46:fr==="videoSeeked"?47:fr==="connectionOpen"?48:fr==="connectionClose"?49:fr==="connectionChatMessage"?50:fr==="connectionParticipantJoined"?51:fr==="connectionParticipantLeft"?52:fr==="pubsubMessage"?53:fr==="peerModeChanged"?54:fr==="restartIce"?55:fr==="mediaRelayStarted"?56:fr==="mediaRelayStopped"?57:fr==="mediaRelayError"?58:fr==="mediaRelayRequestResponse"?59:fr==="mediaRelayRequestReceived"?60:61;break;case 1:return Vt=We,ke._eventEmitter.emit("ERROR",Vt),(Mt=ke._videosdkLogs)===null||Mt===void 0||Mt.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:Vt.message}}),(rn=ke._openTelemetry)===null||rn===void 0||rn.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:Vt.message},status:2}),Vn.abrupt("continue",62);case 2:try{ln=We.peerId,en=We.kind,yn=We.newState,ke._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:ln,kind:en,newState:yn}),en=="video"&&((cn=ke._openTelemetry)===null||cn===void 0||cn.traceAutoComplete({spanName:"".concat(ln," has ").concat(yn?"enable":"disable"," ").concat(en),status:1}))}catch(ul){he.error('"newProducer" request failed:%o',ul),(Kt=ke._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:ul.message}})}case 3:return dr=We.producerId,tr=We.score,ft.dispatch(pi(dr,tr)),Vn.abrupt("continue",62);case 4:return En=We.id,br=We.name,$r=(Ct=ke._openTelemetry)===null||Ct===void 0?void 0:Ct.trace({spanName:"Websocket Noti: entryRequested",span:ke._joinSpan,attributes:{data:JSON.stringify({id:En,name:br})}}),En!==ke._peerId?(ke._eventEmitter.emit("ENTRY_REQUESTED",{id:En,name:br}),(Xr=ke._openTelemetry)===null||Xr===void 0||Xr.completeSpan({span:$r,status:1,message:"EntryResponded Recieved"})):(ka=ke._openTelemetry)===null||ka===void 0||ka.completeSpan({span:$r,status:2,message:"Entry Request Failed"}),Vn.abrupt("continue",62);case 5:if($=We.id,K=We.decision,Q=We.sessionId,de=We.switchingRoomId,Se=(Aa=ke._openTelemetry)===null||Aa===void 0?void 0:Aa.trace({name:"Entry Response Handling",attributes:{"peer.id":$,"entry.decision":K,switching_room:!!de}}),$===ke._peerId&&K==="allowed"){Vn.next=6;break}return(_e=ke._openTelemetry)===null||_e===void 0||_e.completeSpan({span:ke._joinSpan,status:2,message:"Join Request Denied"}),(be=ke._openTelemetry)===null||be===void 0||be.completeSpan({span:Se,status:2,message:"Entry denied for peer"}),Vn.abrupt("continue",62);case 6:if(ke._eventEmitter.emit("ENTRY_RESPONDED",{id:$,decision:K}),!de){Vn.next=7;break}return(Ve=ke._openTelemetry)===null||Ve===void 0||Ve.completeSpan({span:Se,status:1,message:"Switching room initiated"}),ke.softClose(),ke.switchingRoom(de),Vn.abrupt("continue",62);case 7:return ke._videosdkLogs=new on({roomId:ke._roomId,peerId:ke._peerId,logs:De,observabilityJwt:ze,deviceInfo:ke._deviceInfo,sessionId:Q,debugMode:ke._debugMode}),ke.joinRoom(),(zr=ke._openTelemetry)===null||zr===void 0||zr.completeSpan({span:Se,status:1,message:"Entry response handled successfully"}),Vn.abrupt("continue",62);case 8:Ae=mi(xa(xa({},xe=We),{},{consumers:[],dataConsumers:[]})),ft.dispatch(Ae),ke._eventEmitter.emit(Ae.type,Ae.payload),ft.dispatch(Wn({text:"".concat(xe.displayName," has joined the room")}));try{(Ke=ke._openTelemetry)===null||Ke===void 0||Ke.traceAutoComplete({spanName:"Websocket Noti: newPeer ".concat(xe.displayName),attributes:{peerData:JSON.stringify(xe)}})}catch(ul){($e=ke._videosdkLogs)===null||$e===void 0||$e.pushLogs({logText:"Error Websocket Noti: newPeer",logType:"ERROR",attributes:{error:ul.message}}),console.error(ul)}return Vn.abrupt("continue",62);case 9:return et=We.peerId,ue=no(et),ft.dispatch(ue),ke._eventEmitter.emit(ue.type,ue.payload),(Ne=ke._openTelemetry)===null||Ne===void 0||Ne.traceAutoComplete({spanName:"Websocket Noti: peerClosed for ".concat(et)}),Vn.abrupt("continue",62);case 10:return me=We.peerId,Me=We.displayName,qe=We.oldDisplayName,ft.dispatch($s(Me,me)),ft.dispatch(Wn({text:"".concat(qe," is now ").concat(Me)})),Vn.abrupt("continue",62);case 11:if(Jt=We.consumerId,vt=ke._consumers.get(Jt)){Vn.next=12;break}return Vn.abrupt("continue",62);case 12:return vt.close(),ke._consumers.delete(Jt),Rt=vt.appData.peerId,xn=js(Jt,Rt),ke._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"ended",peerId:Rt,streamId:vt._track.id}),ft.dispatch(xn),ke._eventEmitter.emit(xn.type,xn.payload),(tt=ke._openTelemetry)===null||tt===void 0||tt.traceAutoComplete({spanName:"Websocket Noti: consumerClosed for id ".concat(Jt),attributes:{consumerData:JSON.stringify(vt)}}),Vn.abrupt("continue",62);case 13:if(ct=We.consumerId,Ue=ke._consumers.get(ct)){Vn.next=14;break}return Vn.abrupt("continue",62);case 14:return Ue.pause(),ft.dispatch(ls(ct,"remote")),ke._eventEmitter.emit("CONSUMER_PAUSED",{consumerId:ct,peerId:Ue.appData.peerId}),Vn.abrupt("continue",62);case 15:if(yt=We.consumerId,fn=ke._consumers.get(yt),ke._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"active",peerId:fn.appData.peerId,streamId:fn._track.id}),fn){Vn.next=16;break}return Vn.abrupt("continue",62);case 16:return fn.resume(),ft.dispatch(Xi(yt,"remote")),ke._eventEmitter.emit("CONSUMER_RESUMED",{consumerId:yt,peerId:fn.appData.peerId}),Vn.abrupt("continue",62);case 17:if(un=We.consumerId,Jn=We.spatialLayer,Rr=We.temporalLayer,(_n=ke._consumers.get(un)).currentSpatialLayer=Jn,_n.currentTemporalLayer=Rr,_n){Vn.next=18;break}return Vn.abrupt("continue",62);case 18:return((nn=_n.appData)===null||nn===void 0||(nn=nn.encodings)===null||nn===void 0?void 0:nn.length)>1&&ke._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:_n.appData.peerId,prevQuality:_n.spatialLayers-1-_n.currentSpatialLayer==0?"HIGH":_n.spatialLayers-1-_n.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:_n.spatialLayers-1-Jn==0?"HIGH":_n.spatialLayers-1-Jn==1?"MEDIUM":"LOW"}),_n.currentSpatialLayer=Jn,_n.currentTemporalLayer=Rr,ft.dispatch(us(un,Jn,Rr)),Vn.abrupt("continue",62);case 19:return dn=We.consumerId,wr=We.score,ft.dispatch(xi(dn,wr)),Vn.abrupt("continue",62);case 20:if(mr=We.dataConsumerId,Yn=ke._dataConsumers.get(mr)){Vn.next=21;break}return Vn.abrupt("continue",62);case 21:return Yn.close(),ke._dataConsumers.delete(mr),In=Yn.appData.peerId,ft.dispatch(Hi(mr,In)),Vn.abrupt("continue",62);case 22:return gn=We.peerId,Lr=On(gn),ft.dispatch(Lr),ke._eventEmitter.emit(Lr.type,Lr.payload),Vn.abrupt("continue",62);case 23:return ke._eventEmitter.emit("SUB_MANAGER_RESUMED",We),Vn.abrupt("continue",62);case 24:return ke._eventEmitter.emit("SUB_MANAGER_PAUSED",We),Vn.abrupt("continue",62);case 25:return ke._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",We),(ha=ke._openTelemetry)===null||ha===void 0||ha.traceAutoComplete({spanName:"Emitted TRANSCRIPTION_STATE_CHANGED, status : ".concat(We.status),attributes:{data:JSON.stringify(We)},status:1}),Vn.abrupt("continue",62);case 26:return ke._eventEmitter.emit("TRANSCRIPTION_TEXT",We),Vn.abrupt("continue",62);case 27:return ke._eventEmitter.emit("RECORDING_STATE_CHANGED",We),(Ci=ke._openTelemetry)===null||Ci===void 0||Ci.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(We.status),attributes:{data:JSON.stringify(We)},status:1}),Vn.abrupt("continue",62);case 28:return ke._eventEmitter.emit("RECORDING_STARTED",{}),Vn.abrupt("continue",62);case 29:return ke._eventEmitter.emit("RECORDING_STOPPED",{}),Vn.abrupt("continue",62);case 30:return ke._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",We),(fs=ke._openTelemetry)===null||fs===void 0||fs.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(We.status),attributes:{data:JSON.stringify(We)},status:1}),Vn.abrupt("continue",62);case 31:return ke._eventEmitter.emit("LIVESTREAM_STARTED",{}),Vn.abrupt("continue",62);case 32:return ke._eventEmitter.emit("LIVESTREAM_STOPPED",{}),Vn.abrupt("continue",62);case 33:return ke._eventEmitter.emit("HLS_STATE_CHANGED",We),(cl=ke._openTelemetry)===null||cl===void 0||cl.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(We.status),attributes:{data:JSON.stringify(We)},status:1}),Vn.abrupt("continue",62);case 34:return We.isPlayable&&(ke._eventEmitter.emit("HLS_STATE_CHANGED",xa(xa({},We),{},{status:nc.V.HLS_PLAYABLE})),(lu=ke._openTelemetry)===null||lu===void 0||lu.traceAutoComplete({spanName:"Websocket Noti: hlsPlayableStateChanged",status:1})),Vn.abrupt("continue",62);case 35:return Ul=We.downstreamUrl,ke._eventEmitter.emit("HLS_STARTED",Ul),Vn.abrupt("continue",62);case 36:return ke._eventEmitter.emit("HLS_STOPPED",{}),Vn.abrupt("continue",62);case 37:return $c=We.state,uu=We.url,$c?ke._eventEmitter.emit("WHITEBOARD_STARTED",{state:$c}):uu&&ke._eventEmitter.emit("WHITEBOARD_STARTED",{url:uu}),Vn.abrupt("continue",62);case 38:return ke._eventEmitter.emit("WHITEBOARD_STOPPED",{}),Vn.abrupt("continue",62);case 39:return nd=mi(xa(xa({},We),{},{consumers:[],dataConsumers:[]})),ft.dispatch(nd),ke._eventEmitter.emit("ADD_CHARACTER",We),(du=ke._openTelemetry)===null||du===void 0||du.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(We),attributes:{data:JSON.stringify(We)},status:1}),Vn.abrupt("continue",62);case 40:return rd=We.id,ad=no(rd),ft.dispatch(ad),ke._eventEmitter.emit("REMOVE_CHARACTER",We),(pu=ke._openTelemetry)===null||pu===void 0||pu.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(We),attributes:{data:JSON.stringify(We)},status:1}),Vn.abrupt("continue",62);case 41:return ke._eventEmitter.emit("CHARACTER_STATE_CHANGED",We),(Hl=ke._openTelemetry)===null||Hl===void 0||Hl.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(We.status),attributes:{data:JSON.stringify(We)},status:1}),Vn.abrupt("continue",62);case 42:return ke._eventEmitter.emit("CHARACTER_MESSAGE",We),Vn.abrupt("continue",62);case 43:return ke._eventEmitter.emit("USER_MESSAGE",We),Vn.abrupt("continue",62);case 44:return ke._eventEmitter.emit("CHARACTER_DATA",We),Vn.abrupt("continue",62);case 45:return ke._eventEmitter.emit("CHARACTER_ERROR",We),Vn.abrupt("continue",62);case 46:return ke._eventEmitter.emit("VIDEO_STATE_CHANGED",We),Vn.abrupt("continue",62);case 47:return id=We.currentTime,ke._eventEmitter.emit("VIDEO_SEEKED",{currentTime:id}),Vn.abrupt("continue",62);case 48:return ke._eventEmitter.emit("CONNECTION_OPEN",We),Vn.abrupt("continue",62);case 49:return ke._eventEmitter.emit("CONNECTION_CLOSE",We),Vn.abrupt("continue",62);case 50:return ke._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",We),Vn.abrupt("continue",62);case 51:return ke._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",We),Vn.abrupt("continue",62);case 52:return ke._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",We),Vn.abrupt("continue",62);case 53:return ke._eventEmitter.emit("PUBSUB_MESSAGE",We),Vn.abrupt("continue",62);case 54:return ke._eventEmitter.emit("PEER_MODE_CHANGED",We),(mu=ke._openTelemetry)===null||mu===void 0||mu.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(We)},status:1}),Vn.abrupt("continue",62);case 55:return hu=We.transportId,fu=We.iceParameters,lp=(Fl=ke._openTelemetry)===null||Fl===void 0?void 0:Fl.trace({spanName:"Websocket Noti: restartIce for transportId :".concat(hu),attributes:{iceParameters:JSON.stringify(fu)}}),ke.handleRemoteRestartIce({transportId:hu,iceParameters:fu,internalSpan:lp}),Vn.abrupt("continue",62);case 56:return gu=At.meetingId,ke._eventEmitter.emit("MEDIA_RELAY_STARTED",{meetingId:gu}),Vn.abrupt("continue",62);case 57:return sd=At.meetingId,od=At.reason,ke._eventEmitter.emit("MEDIA_RELAY_STOPPED",{meetingId:sd,reason:od}),Vn.abrupt("continue",62);case 58:return vu=At.meetingId,cd=At.reason,ke._eventEmitter.emit("MEDIA_RELAY_ERROR",{meetingId:vu,reason:cd}),Vn.abrupt("continue",62);case 59:return ld=At.decision,up=At.decidedBy,dp=At.meetingId,ke._eventEmitter.emit("MEDIA_RELAY_REQUEST_RESPONSE",{decision:ld,decidedBy:up,meetingId:dp}),Vn.abrupt("continue",62);case 60:return ud=At.peerId,ll=At.meetingId,yu=At.displayName,ke._eventEmitter.emit("MEDIA_RELAY_REQUEST_RECEIVED",{peerId:ud,meetingId:ll,displayName:yu}),Vn.abrupt("continue",62);case 61:he.error('unknown Websocket notification.method "%s"',At.method);case 62:case"end":return Vn.stop()}},ht)}));return function(ht){return Nt.apply(this,arguments)}}()),mt.next=3;break;case 2:mt.prev=2,hn=mt.catch(0),(an=this._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error initializing the meeting :: ".concat(hn),logType:"ERROR",attributes:{error:hn}}),this.emitMeetingStateChange(ti);case 3:case"end":return mt.stop()}},fe,this,[[0,2]])})),function(){return Zc.apply(this,arguments)})},{key:"requestEntry",value:(cu=(0,v.A)(m().mark(function fe(){var X,re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ae=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"Requesting Entry",span:this._joinSpan}),ie.next=1,this._socketRequest("requestEntry",{name:this._displayName});case 1:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"Entry Requested Successfully"});case 2:case"end":return ie.stop()}},fe,this)})),function(){return cu.apply(this,arguments)})},{key:"respondEntry",value:(zl=(0,v.A)(m().mark(function fe(X,re){var ae,ie,le;return m().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return le=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"Responding Entry",attributes:{peerId:X,decision:re},span:this._joinSpan}),Pe.next=1,this._socketRequest("respondEntry",{id:X,decision:re});case 1:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({message:"Entry Responded Successfully",span:le,status:1});case 2:case"end":return Pe.stop()}},fe,this)})),function(fe,X){return zl.apply(this,arguments)})},{key:"startTranscription",value:(Bl=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De;return m().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return he.debug("startTranscription()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"startTranscription() Start",attributes:{config:X?JSON.stringify(X):"config Not Specify"}}),ze.prev=1,ze.next=2,this._socketRequest("startTranscription",{config:X});case 2:ze.next=4;break;case 3:ze.prev=3,De=ze.catch(1),he.error("startTranscription() | failed:%o",De),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"startTranscription() failed"}),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:De.message}}),this._emitError({code:4031,message:De.message});case 4:(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"startTranscription() End"});case 5:case"end":return ze.stop()}},fe,this,[[1,3]])})),function(fe){return Bl.apply(this,arguments)})},{key:"stopTranscription",value:(pc=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe;return m().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return he.debug("stopTranscription()"),ae=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"stopTranscription() Start"}),De.prev=1,De.next=2,this._socketRequest("stopTranscription",{});case 2:De.next=4;break;case 3:De.prev=3,Pe=De.catch(1),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"stopTranscription() failed"}),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:Pe.message}}),this._emitError({code:4032,message:Pe.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopTranscription() End"});case 5:case"end":return De.stop()}},fe,this,[[1,3]])})),function(){return pc.apply(this,arguments)})},{key:"pauseAllConsumers",value:(Qo=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn;return m().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"pauseAllConsumers() Start",attributes:{kind:X||"Kind not specified"}}),jt.prev=1,jt.next=2,this._socketRequest("pauseAllConsumers",{kind:X===void 0?"all":X});case 2:if(Pe=jt.sent,De=!1,!((Pe==null||(le=Pe.consumersWithIssues)===null||le===void 0?void 0:le.length)>0)){jt.next=4;break}return jt.next=3,this._socketRequest("pauseAllConsumers",{kind:X===void 0?"all":X});case 3:((Et=jt.sent)==null||(ze=Et.consumersWithIssues)===null||ze===void 0?void 0:ze.length)===0&&(De=!0),jt.next=5;break;case 4:De=!0;case 5:De&&this._eventEmitter.emit("ALL_CONSUMERS_PAUSED",{kind:X}),jt.next=7;break;case 6:jt.prev=6,mn=jt.catch(1),he.error("pauseAllConsumers() | failed:%o",mn),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:ie,status:2,message:"pauseAllConsumers() failed"}),(zt=this._videosdkLogs)===null||zt===void 0||zt.pushLogs({logText:"Error pauseAllConsumers() failed",logType:"ERROR",attributes:{error:mn.message}});case 7:(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"pauseAllConsumers() End"});case 8:case"end":return jt.stop()}},fe,this,[[1,6]])})),function(fe){return Qo.apply(this,arguments)})},{key:"resumeAllConsumers",value:(Ga=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn;return m().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"resumeAllConsumers() Start",attributes:{kind:X||"Kind not specified"}}),jt.prev=1,jt.next=2,this._socketRequest("resumeAllConsumers",{kind:X===void 0?"all":X});case 2:if(Pe=jt.sent,De=!1,!((Pe==null||(le=Pe.consumersWithIssues)===null||le===void 0?void 0:le.length)>0)){jt.next=4;break}return jt.next=3,this._socketRequest("resumeAllConsumers",{kind:X===void 0?"all":X});case 3:((Et=jt.sent)==null||(ze=Et.consumersWithIssues)===null||ze===void 0?void 0:ze.length)===0&&(De=!0),jt.next=5;break;case 4:De=!0;case 5:De&&this._eventEmitter.emit("ALL_CONSUMERS_RESUMED",{kind:X}),jt.next=7;break;case 6:jt.prev=6,mn=jt.catch(1),he.error("resumeAllConsumers() | failed:%o",mn),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:ie,status:2,message:"resumeAllConsumers() failed"}),(zt=this._videosdkLogs)===null||zt===void 0||zt.pushLogs({logText:"Error resumeAllConsumers() failed",logType:"ERROR",attributes:{error:mn.message}});case 7:(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"resumeAllConsumers() End"});case 8:case"end":return jt.stop()}},fe,this,[[1,6]])})),function(fe){return Ga.apply(this,arguments)})},{key:"startRecording",value:(Yo=(0,v.A)(m().mark(function fe(X,re,ae,ie){var le,Pe,De,ze,Et,kt;return m().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return he.debug("startRecording()"),De=(le=this._openTelemetry)===null||le===void 0?void 0:le.trace({spanName:"startRecording() Start",attributes:{webhookUrl:X||"webhookUrl Not Specify",awsDirPath:re||"awsDirPath Not Specify",config:ae?JSON.stringify(ae):"config Not Specify",transcription:ie?JSON.stringify(ie):"transcription Not Specify"}}),zt.prev=1,zt.next=2,this._socketRequest("startRecording",{webhookUrl:X,awsDirPath:re,config:ae,transcription:ie});case 2:zt.next=4;break;case 3:zt.prev=3,kt=zt.catch(1),he.error("startRecording() | failed:%o",kt),(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:De,status:2,message:"startRecording() failed"}),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:kt.message}}),this._emitError({code:4011,message:kt.message});case 4:(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:De,status:1,message:"startRecording() End"});case 5:case"end":return zt.stop()}},fe,this,[[1,3]])})),function(fe,X,re,ae){return Yo.apply(this,arguments)})},{key:"stopRecording",value:(Ko=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe;return m().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(!this._closed){De.next=1;break}return De.abrupt("return");case 1:return he.debug("stopRecording()"),ae=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"stopRecording() Start"}),De.prev=2,De.next=3,this._socketRequest("stopRecording",{});case 3:De.next=5;break;case 4:De.prev=4,Pe=De.catch(2),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"stopRecording() failed"}),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:Pe.message}}),this._emitError({code:4012,message:Pe.message});case 5:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopRecording() End"});case 6:case"end":return De.stop()}},fe,this,[[2,4]])})),function(){return Ko.apply(this,arguments)})},{key:"startLivestream",value:(Go=(0,v.A)(m().mark(function fe(X,re){var ae,ie,le,Pe,De,ze;return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return he.debug("startLivestream()"),le=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"startLivestream() Start",attributes:{outputs:X?JSON.stringify(X):"outputs Not Specify",config:re?JSON.stringify(re):"config Not Specify"}}),Et.prev=1,Et.next=2,this._socketRequest("startLivestream",{outputs:X,config:re});case 2:Et.next=4;break;case 3:Et.prev=3,ze=Et.catch(1),(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:le,status:1,message:"startLivestream() End"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:ze.message}}),this._emitError({code:4013,message:ze.message});case 4:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:le,status:1,message:"startLivestream() End"});case 5:case"end":return Et.stop()}},fe,this,[[1,3]])})),function(fe,X){return Go.apply(this,arguments)})},{key:"stopLivestream",value:(oi=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe;return m().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return he.debug("stopLivestream()"),ae=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"stopLivestream() Start"}),De.prev=1,De.next=2,this._socketRequest("stopLivestream",{});case 2:De.next=4;break;case 3:De.prev=3,Pe=De.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:Pe.message}}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:4014,message:Pe.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopLivestream() End"});case 5:case"end":return De.stop()}},fe,this,[[1,3]])})),function(){return oi.apply(this,arguments)})},{key:"startHls",value:(Vc=(0,v.A)(m().mark(function fe(X,re){var ae,ie,le,Pe,De,ze;return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return X=X||{},re=re||{},he.debug("startHls()"),le=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"startHls() Start",attributes:{config:X?JSON.stringify(X):"config Not Specify",transcription:re?JSON.stringify(re):"transcription Not Specify"}}),Et.prev=1,Et.next=2,this._socketRequest("startHls",{config:X,transcription:re});case 2:Et.next=4;break;case 3:Et.prev=3,ze=Et.catch(1),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:ze.message}}),(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:le,status:2,message:"Error startHls() failed"}),this._emitError({code:4016,message:ze.message}),he.error("startHls() | failed:%o",ze);case 4:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:le,status:1,message:"startHlsSpan() End"});case 5:case"end":return Et.stop()}},fe,this,[[1,3]])})),function(fe,X){return Vc.apply(this,arguments)})},{key:"stopHls",value:(jl=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe;return m().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return he.debug("stopHls()"),ae=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"stopHls() Start"}),De.prev=1,De.next=2,this._socketRequest("stopHls",{});case 2:De.next=4;break;case 3:De.prev=3,Pe=De.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:Pe.message}}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"Error stopHls() failed"}),this._emitError({code:4017,message:Pe.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopHls() End"});case 5:case"end":return De.stop()}},fe,this,[[1,3]])})),function(){return jl.apply(this,arguments)})},{key:"startWhiteboard",value:(Il=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le;return m().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return he.debug("startWhiteboard()"),ae=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"startWhiteboard() Start"}),Pe.prev=1,Pe.next=2,this._socketRequest("startWhiteboard",{version:"v2"});case 2:Pe.next=4;break;case 3:Pe.prev=3,le=Pe.catch(1),he.error("startWhiteboard() | failed:%o",le),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"Error startWhiteboard() failed"}),this._emitError({code:3021,message:le.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"startWhiteboard() End"});case 5:case"end":return Pe.stop()}},fe,this,[[1,3]])})),function(){return Il.apply(this,arguments)})},{key:"stopWhiteboard",value:(Ll=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le;return m().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return he.debug("stopWhiteboard()"),ae=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"stopWhiteboard() Start"}),Pe.prev=1,Pe.next=2,this._socketRequest("stopWhiteboard",{});case 2:Pe.next=4;break;case 3:Pe.prev=3,le=Pe.catch(1),he.error("stopWhiteboard() | failed:%o",le),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"Error stopWhiteboard() failed"}),this._emitError({code:3022,message:le.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopWhiteboard() End"});case 5:case"end":return Pe.stop()}},fe,this,[[1,3]])})),function(){return Ll.apply(this,arguments)})},{key:"joinCharacter",value:(qc=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De;return m().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return he.debug("joinCharacter()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"joinCharacter() Start",attributes:{config:X?JSON.stringify(X):"config Not Specify"}}),ze.prev=1,ze.next=2,this._socketRequest("joinCharacter",{config:X});case 2:return ze.abrupt("return",ze.sent);case 3:return ze.prev=3,De=ze.catch(1),he.error("joinCharacter() | failed:%o",De),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"joinCharacter() failed"}),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:De.message}}),this._emitError({code:4033,message:De.message}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"joinCharacter() End"}),ze.abrupt("return",!1);case 4:case"end":return ze.stop()}},fe,this,[[1,3]])})),function(fe){return qc.apply(this,arguments)})},{key:"switchTo",value:(si=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De,ze,Et,kt;return m().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return ae=X.meetingId,ie=X.participantId,le=X.token,Pe=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"switchTo() Start",attributes:{"peer.id":ie,meetingId:ae}}),zt.prev=1,zt.next=2,this._socketRequest("switchToMeeting",{meetingId:ae,participantId:ie,secret:le||this._secret});case 2:(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:Pe,status:1,message:"switchTo() Success"}),zt.next=4;break;case 3:zt.prev=3,kt=zt.catch(1),(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:Pe,status:2,message:"switchTo() failed"}),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error switchTo() failed",logType:"ERROR",attributes:{error:kt.message}});case 4:case"end":return zt.stop()}},fe,this,[[1,3]])})),function(fe){return si.apply(this,arguments)})},{key:"removeCharacter",value:(hs=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De;return m().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return he.debug("removeCharacter()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"removeCharacter() Start"}),ze.prev=1,ze.next=2,this._socketRequest("leaveCharacter",{config:X});case 2:ze.next=4;break;case 3:return ze.prev=3,De=ze.catch(1),he.error("removeCharacter() | failed:%o",De),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"removeCharacter() failed"}),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:De.message}}),this._emitError({code:4034,message:De.message}),ze.abrupt("return",!1);case 4:return(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"removeCharacter() End"}),ze.abrupt("return",!0);case 5:case"end":return ze.stop()}},fe,this,[[1,3]])})),function(fe){return hs.apply(this,arguments)})},{key:"sendCharacterMessage",value:(Rc=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return re=X.interactionId,ae=X.text,he.debug("sendCharacterMessage()"),le.prev=1,le.next=2,this._socketRequest("sendCharacterMessage",{interactionId:re,text:ae});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),he.error("sendCharacterMessage() | failed:%o",ie),this._emitError({code:4035,message:ie.message});case 4:case"end":return le.stop()}},fe,this,[[1,3]])})),function(fe){return Rc.apply(this,arguments)})},{key:"interruptCharacter",value:(fo=(0,v.A)(m().mark(function fe(X){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=X.interactionId,he.debug("interruptCharacter()"),ie.prev=1,ie.next=2,this._socketRequest("interruptCharacter",{interactionId:re});case 2:ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),he.error("interruptCharacter() | failed:%o",ae),this._emitError({code:4036,message:ae.message});case 4:case"end":return ie.stop()}},fe,this,[[1,3]])})),function(fe){return fo.apply(this,arguments)})},{key:"pinStateChange",value:(dc=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe;return m().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return ae=X.peerId,ie=X.state,(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Pin state Change for ".concat(ae),attributes:{state:ie?JSON.stringify(ie):null},status:1}),De.prev=1,De.next=2,this._socketRequest("pinStateChanged",{peerId:ae,state:ie});case 2:De.next=4;break;case 3:De.prev=3,Pe=De.catch(1),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:Pe.message}}),he.error("pinStateChange() | failed");case 4:case"end":return De.stop()}},fe,this,[[1,3]])})),function(fe){return dc.apply(this,arguments)})},{key:"startVideo",value:(Wo=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le;return m().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return ae=X.link,he.debug("startVideo()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),Pe.prev=1,Pe.next=2,this._socketRequest("startVideo",{link:ae});case 2:Pe.next=4;break;case 3:Pe.prev=3,le=Pe.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:le.message}}),he.error("startVideo() | failed:%o",le),this._emitError({code:3023,message:le.message});case 4:case"end":return Pe.stop()}},fe,this,[[1,3]])})),function(fe){return Wo.apply(this,arguments)})},{key:"stopVideo",value:(Va=(0,v.A)(m().mark(function fe(){var X,re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return he.debug("stopVideo()"),(X=this._videosdkLogs)===null||X===void 0||X.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),ie.prev=1,ie.next=2,this._socketRequest("stopVideo",{});case 2:ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:ae.message}}),he.error("stopVideo() | failed:%o",ae),this._emitError({code:3024,message:ae.message});case 4:case"end":return ie.stop()}},fe,this,[[1,3]])})),function(){return Va.apply(this,arguments)})},{key:"pauseVideo",value:(eo=(0,v.A)(m().mark(function fe(X){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return he.debug("pauseVideo()"),ae.prev=1,ae.next=2,this._socketRequest("pauseVideo",{currentTime:X});case 2:ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),he.error("pauseVideo() | failed:%o",re),this._emitError({code:3025,message:re.message});case 4:case"end":return ae.stop()}},fe,this,[[1,3]])})),function(fe){return eo.apply(this,arguments)})},{key:"resumeVideo",value:(qs=(0,v.A)(m().mark(function fe(){var X;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return he.debug("resumeVideo()"),re.prev=1,re.next=2,this._socketRequest("resumeVideo",{});case 2:re.next=4;break;case 3:re.prev=3,X=re.catch(1),he.error("resumeVideo() | failed:%o",X),this._emitError({code:3026,message:X.message});case 4:case"end":return re.stop()}},fe,this,[[1,3]])})),function(){return qs.apply(this,arguments)})},{key:"seekVideo",value:(rs=(0,v.A)(m().mark(function fe(X){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return he.debug("seekVideo()"),ae.prev=1,ae.next=2,this._socketRequest("seekVideo",{currentTime:X});case 2:ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),he.error("seekVideo() | failed:%o",re),this._emitError({code:3031,message:re.message});case 4:case"end":return ae.stop()}},fe,this,[[1,3]])})),function(fe){return rs.apply(this,arguments)})},{key:"enablePeerMic",value:(Ia=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Enabling peer ".concat(X," Mic"),status:1}),he.debug("enablePeerMic()"),le.prev=1,le.next=2,this._socketRequest("enablePeerMic",{peerId:X});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:ie.message}}),he.error("enablePeerMic() | failed:%o",ie);case 4:case"end":return le.stop()}},fe,this,[[1,3]])})),function(fe){return Ia.apply(this,arguments)})},{key:"requestMediaRelay",value:(ms=(0,v.A)(m().mark(function fe(X,re,ae){var ie,le;return m().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.prev=0,Pe.next=1,this._socketRequest("mediaRelayRequestSent",{meetingId:X,secret:re??this._secret,kinds:ae??["audio","video","share","share_audio"]});case 1:Pe.next=3;break;case 2:Pe.prev=2,le=Pe.catch(0),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error relayRequest() failed",logType:"ERROR",attributes:{error:le.message}});case 3:case"end":return Pe.stop()}},fe,this,[[0,2]])})),function(fe,X,re){return ms.apply(this,arguments)})},{key:"handleRelayRequestResponse",value:(uc=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe;return m().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return re=X.decision,ae=X.peerId,ie=X.meetingId,De.prev=1,De.next=2,this._socketRequest("respondToMediaRelayRequest",{decision:re,decidedBy:this._peerId,peerId:ae,meetingId:ie});case 2:De.next=4;break;case 3:De.prev=3,Pe=De.catch(1),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error respondToMediaRelayRequest() failed",logType:"ERROR",attributes:{error:Pe.message}});case 4:case"end":return De.stop()}},fe,this,[[1,3]])})),function(fe){return uc.apply(this,arguments)})},{key:"stopMediaRelay",value:(Fs=(0,v.A)(m().mark(function fe(X){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=1,this._socketRequest("mediaRelayRequestStop",{meetingId:X});case 1:ie.next=3;break;case 2:ie.prev=2,ae=ie.catch(0),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopMediaRelay() failed",logType:"ERROR",attributes:{error:ae.message}});case 3:case"end":return ie.stop()}},fe,this,[[0,2]])})),function(fe){return Fs.apply(this,arguments)})},{key:"enableRelayMedia",value:(ho=(0,v.A)(m().mark(function fe(X,re){var ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.prev=0,le.next=1,this._socketRequest("enableRelayMedia",{meetingId:X,kind:re});case 1:le.next=3;break;case 2:le.prev=2,ie=le.catch(0),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error enableRelayMedia() failed",logType:"ERROR",attributes:{error:ie.message}});case 3:case"end":return le.stop()}},fe,this,[[0,2]])})),function(fe,X){return ho.apply(this,arguments)})},{key:"disableRelayMedia",value:(Fc=(0,v.A)(m().mark(function fe(X,re){var ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.prev=0,le.next=1,this._socketRequest("disableRelayMedia",{meetingId:X,kind:re});case 1:le.next=3;break;case 2:le.prev=2,ie=le.catch(0),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error disableRelayMedia() failed",logType:"ERROR",attributes:{error:ie.message}});case 3:case"end":return le.stop()}},fe,this,[[0,2]])})),function(fe,X){return Fc.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:($o=(0,v.A)(m().mark(function fe(){var X,re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.prev=0,ae.next=1,this._socketRequest("enableAdaptiveSubscription");case 1:ae.next=3;break;case 2:ae.prev=2,re=ae.catch(0),(X=this._videosdkLogs)===null||X===void 0||X.pushLogs({logText:"Error enableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:re.message}});case 3:case"end":return ae.stop()}},fe,this,[[0,2]])})),function(){return $o.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(yi=(0,v.A)(m().mark(function fe(){var X,re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.prev=0,ae.next=1,this._socketRequest("disableAdaptiveSubscription");case 1:ae.next=3;break;case 2:ae.prev=2,re=ae.catch(0),(X=this._videosdkLogs)===null||X===void 0||X.pushLogs({logText:"Error disableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:re.message}});case 3:case"end":return ae.stop()}},fe,this,[[0,2]])})),function(){return yi.apply(this,arguments)})},{key:"disablePeerMic",value:(Ja=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Disabling peer ".concat(X," Mic"),status:1}),he.debug("disablePeerMic()"),le.prev=1,le.next=2,this._socketRequest("disablePeerMic",{peerId:X});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:ie.message}}),he.error("disablePeerMic() | failed:%o",ie);case 4:case"end":return le.stop()}},fe,this,[[1,3]])})),function(fe){return Ja.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(Na=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return he.debug("consumeWebcamStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:X}}),le.prev=2,le.next=3,this._socketRequest("consumeVideoStreams",{peerId:X});case 3:le.next=5;break;case 4:le.prev=4,ie=le.catch(2),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),he.error("consumeWebcamStreams() | failed:%o",ie);case 5:case"end":return le.stop()}},fe,this,[[2,4]])})),function(fe){return Na.apply(this,arguments)})},{key:"consumeMicStreams",value:(va=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return he.debug("consumeMicStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:X}}),le.prev=1,le.next=2,this._socketRequest("consumeAudioStreams",{peerId:X});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),he.error("consumeMicStreams() | failed:%o",ie);case 4:case"end":return le.stop()}},fe,this,[[1,3]])})),function(fe){return va.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(xr=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return he.debug("stopConsumingAudioStreams()"),le.prev=2,le.next=3,this._socketRequest("stopConsumingAudioStreams",{peerId:X});case 3:(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:X}}),le.next=5;break;case 4:le.prev=4,ie=le.catch(2),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),he.error("stopConsumingMicStreams() | failed:%o",ie);case 5:case"end":return le.stop()}},fe,this,[[2,4]])})),function(fe){return xr.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(Qn=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return he.debug("stopConsumingWebcamStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:X}}),le.prev=1,le.next=2,this._socketRequest("stopConsumingVideoStreams",{peerId:X});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),he.error("stopConsumingWebcamStreams() | failed:%o",ie);case 4:case"end":return le.stop()}},fe,this,[[1,3]])})),function(fe){return Qn.apply(this,arguments)})},{key:"changeMode",value:(Fn=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt,Nt,ht,At=this;return m().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeMode() Calling with mode: ".concat(X)}),ie=this._mode,We.prev=1,ie!==X){We.next=2;break}throw(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"changeMode() Ending"}),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:"You are already in ".concat(X," mode"),logType:"INFO"}),new Error("You are already in ".concat(X," mode"));case 2:if(De=function(){var Mt=(0,v.A)(m().mark(function rn(Vt,ln){return m().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:return en.next=1,At._socketRequest("createWebRtcTransport",{preferredProtocol:At._preferredProtocol,producing:Vt,consuming:ln,sctpCapabilities:At._useDataChannel?At._mediasoupDevice.sctpCapabilities:void 0});case 1:return en.abrupt("return",en.sent);case 2:case"end":return en.stop()}},rn)}));return function(rn,Vt){return Mt.apply(this,arguments)}}(),!(0,Fa.kR)(X)){We.next=10;break}return this._consume=!0,this._produce=!0,this._mode=X,this._mediasoupDevice=new Sr.pF({handlerName:this._handlerName}),We.next=3,this._socketRequest("getRouterRtpCapabilities");case 3:return Et=We.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(Et.headerExtensions=(kt=Et.headerExtensions)===null||kt===void 0?void 0:kt.filter(function(Mt){return Mt.uri!="urn:3gpp:video-orientation"})),We.next=4,this._mediasoupDevice.load({routerRtpCapabilities:Et});case 4:if(!this._produce){We.next=6;break}return We.next=5,De(!0,!1);case 5:zt=We.sent,this.createProducerTransport(zt,ae);case 6:if(ie===Fa.nI.RECV_ONLY||!this._consume){We.next=8;break}return We.next=7,De(!1,!0);case 7:mn=We.sent,this.createConsumerTransport(mn,ae);case 8:return(ze=this._openTelemetry)===null||ze===void 0||ze.traceAutoComplete({spanName:"Sending changeMode request to server",span:ae,status:1}),We.next=9,this._socketRequest("changeMode",{mode:X});case 9:this._produce&&(ft.dispatch(vr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),this._webcamEnabled&&this.enableWebcam(this.customCameraVideoTrack,ae)),window.SHOW_INFO&&(jt=ft.getState(),an=jt.me,ft.dispatch(jr(an.id))),We.next=17;break;case 10:if(!(0,Fa.kR)(ie)||X!==Fa.nI.RECV_ONLY){We.next=12;break}return this._produce=!1,this._mode=X,this._closeProducersAndTransport(),We.next=11,this._socketRequest("changeMode",{mode:X});case 11:We.next=17;break;case 12:if(!(0,Fa.wZ)(ie)||X!==Fa.nI.RECV_ONLY){We.next=15;break}return this._consume=!0,this._mode=X,We.next=13,this._setupWebrtcTransport(ae);case 13:return We.next=14,this._socketRequest("changeMode",{mode:X});case 14:window.SHOW_INFO&&(hn=ft.getState(),ke=hn.me,ft.dispatch(jr(ke.id))),We.next=17;break;case 15:if(!(0,Fa.wZ)(X)){We.next=17;break}return We.next=16,this._socketRequest("changeMode",{mode:X});case 16:this._consume=!1,this._produce=!1,this._mode=X,this._dataConsumers.clear(),this._closeTransports();case 17:We.next=19;break;case 18:We.prev=18,ht=We.catch(1),(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:"Error changeMode(".concat(X,") | failed"),logType:"ERROR",attributes:{error:ht.message}}),(Nt=this._openTelemetry)===null||Nt===void 0||Nt.completeSpan({span:ae,status:2,message:"changeMode(".concat(X,") | failed")});case 19:case"end":return We.stop()}},fe,this,[[1,18]])})),function(fe){return Fn.apply(this,arguments)})},{key:"_closeProducersAndTransport",value:function(){var fe;this._webcamProducer&&(this._webcamProducer.close(),this._webcamProducer=null),this._micProducer&&(this._micProducer.close(),this._micProducer=null),this._shareProducer&&(this._shareProducer.close(),this._shareProducer=null),this._shareAudioProducer&&(this._shareAudioProducer.close(),this._shareAudioProducer=null),(fe=this._sendTransport)===null||fe===void 0||fe.close(),this._sendTransport=null}},{key:"_closeTransports",value:function(){var fe,X;this._sendTransport&&((fe=this._sendTransport)===null||fe===void 0||fe.close(),this._sendTransport=null),this._recvTransport&&((X=this._recvTransport)===null||X===void 0||X.close(),this._recvTransport=null)}},{key:"_setupWebrtcTransport",value:(Mn=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return this._mediasoupDevice=new Sr.pF({handlerName:this._handlerName}),le.next=1,this._socketRequest("getRouterRtpCapabilities");case 1:return re=le.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(re.headerExtensions=(ae=re.headerExtensions)===null||ae===void 0?void 0:ae.filter(function(Pe){return Pe.uri!="urn:3gpp:video-orientation"})),le.next=2,this._mediasoupDevice.load({routerRtpCapabilities:re});case 2:return le.next=3,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 3:ie=le.sent,this.createConsumerTransport(ie,X);case 4:case"end":return le.stop()}},fe,this)})),function(fe){return Mn.apply(this,arguments)})},{key:"enablePeerWebcam",value:(Gt=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Enabling peer ".concat(X," Webcam"),status:1}),he.debug("enablePeerWebcam()"),le.prev=1,le.next=2,this._socketRequest("enablePeerWebcam",{peerId:X});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:ie.message}}),he.error("enablePeerWebcam() | failed:%o",ie);case 4:case"end":return le.stop()}},fe,this,[[1,3]])})),function(fe){return Gt.apply(this,arguments)})},{key:"disablePeerWebcam",value:(dt=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Disabling peer ".concat(X," Webcam"),status:1}),he.debug("disablePeerWebcam()"),le.prev=1,le.next=2,this._socketRequest("disablePeerWebcam",{peerId:X});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:ie.message}});case 4:case"end":return le.stop()}},fe,this,[[1,3]])})),function(fe){return dt.apply(this,arguments)})},{key:"getMicStats",value:function(fe){var X=this;if(this._micProducer){var re=0;fe.onStatsCollected=function(ae){var ie;X._stats.producerStats||(X._stats.producerStats={}),X._stats.producerStats.audio||(X._stats.producerStats.audio=[]),X._micProducer&&(X._latestStats[(ie=X._micProducer)===null||ie===void 0?void 0:ie.id]=[]),ae.audio.forEach(function(le){var Pe;X._micProducer&&X._latestStats[(Pe=X._micProducer)===null||Pe===void 0?void 0:Pe.id].push(le)}),re%5==0&&X._micProducer!=null&&X._stats.producerStats.audio.push(xa({timestamp:new Date},X._latestStats[X._micProducer.id]?X._latestStats[X._micProducer.id][0]:{})),re++}}}},{key:"enableMic",value:(st=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt,Nt,ht,At,We,Mt,rn,Vt,ln,en,yn,cn,Kt,dr,tr,Ct,En,br,$r,Xr,ka,Aa,zr,$,K,Q,de,Se,_e,be,Ve,xe,Ae,Ke,$e,Ne,et,ue,me,Me,qe,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn,nn,un,Jn,Rr,_n,dn,wr,mr,Yn=this,In=arguments;return m().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:if(Pe=In.length>0&&In[0]!==void 0?In[0]:void 0,De=In.length>1&&In[1]!==void 0?In[1]:void 0,ze=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"enableMic() Calling ".concat(Pe?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:Pe?JSON.stringify(Pe):"Not Specify Custom Track"},span:De||null}),he.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){gn.next=4;break}if(zt=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Mic Producer found",span:ze}),Pe&&((mn=this._openTelemetry)===null||mn===void 0||mn.traceAutoComplete({spanName:"Stopping customAudioTrack",span:ze,status:1}),Pe.getTracks().forEach(function(Lr){Lr.stop()})),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:zt,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),jt=this._micProducer,!this._sendTransport){gn.next=2;break}return gn.next=1,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions,appData:{isEncrypted:this.isE2EEEnabled},onRtpSender:function(Lr){Yn.e2eeManager&&(Lr.senderStreams=Lr.createEncodedStreams())}});case 1:this._micProducer=gn.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),this._micProducer?(hn=ja({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:jt._appData.encodings,codecOptions:jt._appData.codecOptions,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),ft.dispatch(hn),this._eventEmitter.emit(hn.type,hn.payload),(an=this._openTelemetry)===null||an===void 0||an.completeSpan({span:ze,status:1,message:"Enable Mic Successful"})):(ke=this._openTelemetry)===null||ke===void 0||ke.completeSpan({span:ze,status:2,message:"Error in enableMic() :: micProducer null"}),gn.next=3;break;case 2:return(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:pr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(pr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),gn.abrupt("return");case 3:return Nt=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this._micProducer.observer.on("pause",function(){Nt?.stop(),Yn._latestStats[Yn._micProducer.id]=[],Yn._metrics.removeExistingProbe(Nt)}),this._micProducer.observer.on("close",function(){Nt?.stop(),Yn._latestStats[Yn._micProducer.id]=[],Yn._metrics.removeExistingProbe(Nt)}),this.getMicStats(Nt),Nt.start(),gn.abrupt("return");case 4:if(!this._mediasoupDevice){gn.next=6;break}if(this._mediasoupDevice.canProduce("audio")){gn.next=5;break}return We=this._deviceInfo.sdkType=="react-native"?pr.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:pr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:We,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),he.error("enableMic() | cannot produce audio"),(At=this._openTelemetry)===null||At===void 0||At.completeSpan({span:ze,status:2,message:"Error in enableMic() :: ".concat(We)}),gn.abrupt("return");case 5:gn.next=7;break;case 6:return(Mt=this._videosdkLogs)===null||Mt===void 0||Mt.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:ze,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),gn.abrupt("return");case 7:if(gn.prev=7,this._externalVideo){gn.next=24;break}return he.debug("enableMic() | calling getUserMedia()"),gn.next=8,this._updateMics(ze);case 8:if(this._mic.device){gn.next=9;break}throw new Error("Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).");case 9:try{Pe&&(Vt=Pe.getAudioTracks()[0]).readyState=="ended"&&(Vt=null,Ct=pr.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(tr=this._videosdkLogs)===null||tr===void 0||tr.pushLogs({logText:Ct.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Ct))}catch(Lr){br=pr.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(En=this._videosdkLogs)===null||En===void 0||En.pushLogs({logText:br.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(br),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(Lr))}if(Vt){gn.next=23;break}return ka=($r=this._openTelemetry)===null||$r===void 0?void 0:$r.trace({spanName:"Creating Track",span:ze}),gn.prev=10,gn.next=11,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 11:Aa=gn.sent,gn.next=22;break;case 12:if(gn.prev=12,dn=gn.catch(10),(zr=this._openTelemetry)===null||zr===void 0||zr.completeSpan({message:"Error in enableMic() :: ".concat(dn.message),span:ka,status:2}),dn.name!=="SecurityError"){gn.next=13;break}Q=pr.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,de=Q.message,this._emitError(Q),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:de,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(de),span:ze,status:2}),gn.next=21;break;case 13:if(dn.name!=="DOMException"){gn.next=14;break}be=pr.q.ERROR_RN_MIC_NOT_FOUND,Ve=be.message,this._emitError(be),(Se=this._videosdkLogs)===null||Se===void 0||Se.pushLogs({logText:Ve,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(_e=this._openTelemetry)===null||_e===void 0||_e.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(Ve),span:ze,status:2}),gn.next=21;break;case 14:if(!(dn instanceof DOMException)){gn.next=20;break}wr=dn.name,gn.next=wr==="NotAllowedError"?15:wr==="NotReadableError"?16:wr==="NotFoundError"?17:18;break;case 15:return xe=this.handleNotAllowedError(dn,this._openTelemetry,this._videosdkLogs,ze,"audio"),this._emitError(xe),gn.abrupt("continue",19);case 16:return Ae=this.handleNotReadableError(dn,this._openTelemetry,this._videosdkLogs,ze,"audio"),this._emitError(Ae),gn.abrupt("continue",19);case 17:return Ke=pr.q.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Ke=pr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),$e=Ke.message,this._emitError(Ke),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:$e,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat($e),span:ze,status:2}),gn.abrupt("continue",19);case 18:return Ne="An error occurred in creating audio track, ".concat(dn.message),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:dn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ne)},dashboardLog:!0}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Error in enableMic() :: ".concat(Ne),span:ze,status:2}),gn.abrupt("continue",19);case 19:gn.next=21;break;case 20:me="An error occurred in creating audio track, ".concat(dn.message),(et=this._videosdkLogs)===null||et===void 0||et.pushLogs({logText:dn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(me)},dashboardLog:!0}),(ue=this._openTelemetry)===null||ue===void 0||ue.completeSpan({message:"Error in enableMic() :: ".concat(me),span:ze,status:2});case 21:return gn.abrupt("return");case 22:Vt=Aa.getAudioTracks()[0],(Xr=this._openTelemetry)===null||Xr===void 0||Xr.completeSpan({message:"Audio Track Generated",span:ka,status:1});case 23:gn.next=26;break;case 24:return gn.next=25,this._getExternalVideoStream();case 25:Me=gn.sent,Vt=Me.getAudioTracks()[0].clone();case 26:if(ln=(en=this._openTelemetry)===null||en===void 0?void 0:en.trace({spanName:"Generating Producer Configuration",span:ze}),qe={opusStereo:1,opusDtx:1},Pe&&(tt=Pe.encoderConfig?qi.$.audioProfiles[Pe.encoderConfig]:qi.$.audioProfiles.speech_standard,qe={opusStereo:tt.stereo?1:0,opusFec:tt.fec?1:0,opusDtx:tt.dtx?1:0,opusMaxPlaybackRate:tt.maxPlaybackRate,opusPtime:tt.packetTime}),vt={encodings:Jt=[{networkPriority:"high"}],codecOptions:qe},(yn=this._openTelemetry)===null||yn===void 0||yn.traceAutoComplete({spanName:"Generated AppData",span:ln,attributes:{appData:JSON.stringify(vt)},status:1}),(cn=this._openTelemetry)===null||cn===void 0||cn.completeSpan({span:ln,status:1,message:"Producer Configuration Generated"}),ln=(Kt=this._openTelemetry)===null||Kt===void 0?void 0:Kt.trace({spanName:"Creating Mic Producer",span:ze}),(dr=Vt)===null||dr===void 0||dr.addEventListener("ended",function(){console.log("Track Ended Error");try{var Lr,ha,Ci=Yn._deviceInfo.sdkType=="react-native"?pr.q.ERROR_RN_MIC_TRACK_ENDED:pr.q.ERROR_MICROPHONE_TRACK_ENDED;(Lr=Yn._videosdkLogs)===null||Lr===void 0||Lr.pushLogs({logText:Ci.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(Ci.message)},dashboardLog:!0}),(ha=Yn._openTelemetry)===null||ha===void 0||ha.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:ze,message:Ci.message,status:2}),ft.dispatch(Wn({type:"error",text:"Microphone disconnected!"})),Yn.disableMic(!0,ze).catch(function(){})}catch(fs){console.error(fs)}}),!this._sendTransport){gn.next=28;break}return gn.next=27,this._sendTransport.produce({track:Vt,encodings:Jt,codecOptions:qe,appData:xa(xa({},vt),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(Lr){Yn.e2eeManager&&(Lr.senderStreams=Lr.createEncodedStreams())}});case 27:this._micProducer=gn.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),gn.next=29;break;case 28:return(Rt=this._videosdkLogs)===null||Rt===void 0||Rt.pushLogs({logText:pr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(pr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),gn.abrupt("return");case 29:this._micProducer?(Vt.getConstraints().deviceId&&(this._mic.device=this._mics.get(Vt.getConstraints().deviceId)),Ue=ja({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Jt,codecOptions:qe,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),ft.dispatch(Ue),this._eventEmitter.emit(Ue.type,Ue.payload),(yt=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"})).start(),this.getMicStats(yt),this._micProducer.on("transportclose",function(){var Lr,ha=Ba(Yn._micProducer.id);ft.dispatch(ha),Yn._eventEmitter.emit(ha.type,ha.payload),(Lr=Yn._micProducer)===null||Lr===void 0||Lr.close(),Yn._micProducer=null}),this._micProducer.observer.on("pause",function(){yt?.stop(),Yn._latestStats[Yn._micProducer.id]=[],Yn._metrics.removeExistingProbe(yt)}),this._micProducer.observer.on("close",function(){yt?.stop(),Yn._latestStats[Yn._micProducer.id]=[],Yn._metrics.removeExistingProbe(yt)}),this._micProducer.on("trackended",function(){var Lr,ha,Ci=Yn._deviceInfo.sdkType=="react-native"?pr.q.ERROR_RN_MIC_TRACK_ENDED:pr.q.ERROR_MICROPHONE_TRACK_ENDED;(Lr=Yn._videosdkLogs)===null||Lr===void 0||Lr.pushLogs({logText:Ci.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ci.message)},dashboardLog:!0}),(ha=Yn._openTelemetry)===null||ha===void 0||ha.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:ze,message:Ci.message,status:2}),ft.dispatch(Wn({type:"error",text:"Microphone disconnected!"})),Yn.disableMic(!0,ze).catch(function(){})}),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:ln,status:1,message:"Mic Producer Created"}),(ct=this._openTelemetry)===null||ct===void 0||ct.completeSpan({span:ze,status:1,message:"Enable Mic Successful"})):((fn=this._videosdkLogs)===null||fn===void 0||fn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:ln,status:2,message:"Error in enableMic() :: micProducer null"}),(un=this._openTelemetry)===null||un===void 0||un.completeSpan({span:ze,status:2,message:"Error in enableMic() :: micProducer null"})),gn.next=32;break;case 30:return gn.prev=30,mr=gn.catch(7),(Jn=this._openTelemetry)===null||Jn===void 0||Jn.completeSpan({span:ln,status:2,message:"Error in enableMic() :: occurred in creating mic producer, ".concat(mr.message)}),(Rr=this._openTelemetry)===null||Rr===void 0||Rr.completeSpan({span:ze,status:2,message:"Error in enableMic :: ".concat(mr.message)}),(_n=this._videosdkLogs)===null||_n===void 0||_n.pushLogs({logText:mr.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(mr.message)},dashboardLog:!0}),he.error("enableMic() | failed:%o",mr),ft.dispatch(Wn({type:"error",text:"Error enabling microphone: ".concat(mr)})),gn.next=31,this._socketRequest("produceError",{mediaType:"audio",message:mr.message});case 31:Vt&&Vt.stop();case 32:case"end":return gn.stop()}},fe,this,[[7,30],[10,12]])})),function(){return st.apply(this,arguments)})},{key:"disableMic",value:(Ie=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt,Nt,ht,At,We,Mt,rn,Vt,ln,en,yn,cn=arguments;return m().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:if(ae=cn.length>0&&cn[0]!==void 0&&cn[0],ie=cn.length>1&&cn[1]!==void 0?cn[1]:void 0,he.debug("disableMic()"),le=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"disableMic() Calling",status:1,span:ie||null}),this._micProducer){Kt.next=1;break}return(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:le,status:2,message:"Error in disableMic() :: Mic Producer Not found"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),Kt.abrupt("return");case 1:if(ze=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Mic Producer",span:le,status:1}),this._micEnabled=!1,!this._micProducer||ae){Kt.next=6;break}return mn=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Pausing Mic Producer",span:ze,status:1}),this._micProducer.pause(),jt=Ba(this._micProducer.id),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:mn,status:1,message:"Pause Mic Successfully"}),ft.dispatch(jt),this._eventEmitter.emit(jt.type,jt.payload),Kt.prev=2,Kt.next=3,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 3:(an=this._openTelemetry)===null||an===void 0||an.completeSpan({span:ze,status:1,message:"Requested Server to Close Producer"}),Kt.next=5;break;case 4:Kt.prev=4,en=Kt.catch(2),ft.dispatch(Wn({type:"error",text:"Error closing server-side mic Producer: ".concat(en)})),Nt="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(ae),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ze,status:2,message:"Error in disableMic() :: ".concat(en.message)}),(ke=this._openTelemetry)===null||ke===void 0||ke.completeSpan({span:le,status:2,message:Nt}),(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:Nt,logType:"ERROR",attributes:{error:en.message},dashboardLog:!0});case 5:return(zt=this._openTelemetry)===null||zt===void 0||zt.completeSpan({span:le,status:1,message:"Mic Disabled Successfully"}),Kt.abrupt("return");case 6:return this._micProducer.close(),ht=Ba(this._micProducer.id),ft.dispatch(ht),this._eventEmitter.emit(ht.type,ht.payload),Kt.prev=7,Kt.next=8,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 8:(At=this._openTelemetry)===null||At===void 0||At.completeSpan({span:ze,status:1,message:"Requested Server to Close Producer"}),(We=this._openTelemetry)===null||We===void 0||We.completeSpan({span:le,status:1,message:"Mic Disabled Successfully"}),Kt.next=10;break;case 9:Kt.prev=9,yn=Kt.catch(7),ft.dispatch(Wn({type:"error",text:"Error closing server-side mic Producer: ".concat(yn)})),ln="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(ae),(Mt=this._openTelemetry)===null||Mt===void 0||Mt.completeSpan({span:ze,status:2,message:"Error in disableMic() :: ".concat(yn.message)}),(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:le,status:2,message:ln}),(Vt=this._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:ln,logType:"ERROR",attributes:{error:yn.message},dashboardLog:!0});case 10:this._micProducer=null;case 11:case"end":return Kt.stop()}},fe,this,[[2,4],[7,9]])})),function(){return Ie.apply(this,arguments)})},{key:"muteMic",value:(pe=(0,v.A)(m().mark(function fe(){var X,re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return he.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),ae.prev=1,ae.next=2,this._socketRequest("pauseProducer",{producerId:this._micProducer.id});case 2:ft.dispatch(Wa(this._micProducer.id)),ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),he.error("muteMic() | failed: %o",re),(X=this._videosdkLogs)===null||X===void 0||X.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:re.message}}),ft.dispatch(Wn({type:"error",text:"Error pausing server-side mic Producer: ".concat(re)}));case 4:case"end":return ae.stop()}},fe,this,[[1,3]])})),function(){return pe.apply(this,arguments)})},{key:"unmuteMic",value:(ee=(0,v.A)(m().mark(function fe(){var X,re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return he.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),ae.prev=1,ae.next=2,this._socketRequest("resumeProducer",{producerId:this._micProducer.id});case 2:ft.dispatch(Sa(this._micProducer.id)),ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),he.error("unmuteMic() | failed: %o",re),(X=this._videosdkLogs)===null||X===void 0||X.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:re.message}}),ft.dispatch(Wn({type:"error",text:"Error resuming server-side mic Producer: ".concat(re)}));case 4:case"end":return ae.stop()}},fe,this,[[1,3]])})),function(){return ee.apply(this,arguments)})},{key:"enableWebcam",value:(V=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt,Nt,ht,At,We,Mt,rn,Vt,ln,en,yn,cn,Kt,dr,tr,Ct,En,br,$r,Xr,ka,Aa,zr,$,K,Q,de,Se,_e,be,Ve,xe,Ae,Ke,$e,Ne,et,ue,me,Me,qe,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn,nn,un,Jn,Rr,_n,dn,wr,mr=this,Yn=arguments;return m().wrap(function(In){for(;;)switch(In.prev=In.next){case 0:if(Pe=Yn.length>0&&Yn[0]!==void 0?Yn[0]:void 0,De=Yn.length>1&&Yn[1]!==void 0?Yn[1]:void 0,ze=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"enableWebcam() Calling ".concat(Pe?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:Pe?JSON.stringify(Pe):"Not Specify Custom Track"},span:De||null}),he.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){In.next=1;break}return(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:ze,status:2,message:"Error in enableWebcam() :: Webcam Producer found"}),(kt=this._videosdkLogs)===null||kt===void 0||kt.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),In.abrupt("return");case 1:if(!this._mediasoupDevice){In.next=3;break}if(this._mediasoupDevice.canProduce("video")){In.next=2;break}return jt=this._deviceInfo.sdkType=="react-native"?pr.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:pr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(zt=this._openTelemetry)===null||zt===void 0||zt.completeSpan({span:ze,status:2,message:"Error in enableWebcam() :: ".concat(jt)}),(mn=this._videosdkLogs)===null||mn===void 0||mn.pushLogs({logText:jt,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),he.error("enableWebcam() | cannot produce video"),In.abrupt("return");case 2:In.next=4;break;case 3:return(an=this._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ze,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),In.abrupt("return");case 4:if(ft.dispatch(Ji(!0)),Nt=this._webcam.resolution,In.prev=5,this._externalVideo){In.next=24;break}return In.next=6,this._updateWebcams(ze);case 6:if(mt=this._webcam.device){In.next=7;break}throw new Error("Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).");case 7:he.debug("enableWebcam() | calling getUserMedia()");try{Pe&&(ke=Pe.getVideoTracks()[0]).readyState=="ended"&&(ke=null,Vt=pr.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(rn=this._videosdkLogs)===null||rn===void 0||rn.pushLogs({logText:Vt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Vt))}catch(gn){en=pr.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(ln=this._videosdkLogs)===null||ln===void 0||ln.pushLogs({logText:en.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._emitError(en),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(gn))}if(ke){In.next=23;break}if(cn=(yn=this._openTelemetry)===null||yn===void 0?void 0:yn.trace({spanName:"Creating Track",span:ze}),Kt=null,In.prev=8,this._webcam.resolution!="hd"){In.next=10;break}return In.next=9,this.createCameraVideoTrack({cameraId:mt.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:mt.facing});case 9:Pe=In.sent,Kt=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),In.next=12;break;case 10:return In.next=11,this.createCameraVideoTrack({cameraId:mt.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:mt.facing});case 11:Pe=In.sent,Kt=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 12:ke=Pe.getVideoTracks()[0],(dr=this._openTelemetry)===null||dr===void 0||dr.completeSpan({message:"Video Track Generated",span:cn,attributes:{customVideoTrackConfig:Kt},status:1}),In.next=23;break;case 13:if(In.prev=13,_n=In.catch(8),(tr=this._openTelemetry)===null||tr===void 0||tr.completeSpan({message:"Error in enableWebcam() :: ".concat(_n.message),span:cn,status:2}),_n.name!=="SecurityError"){In.next=14;break}br=pr.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,$r=br.message,this._emitError(br),(Ct=this._videosdkLogs)===null||Ct===void 0||Ct.pushLogs({logText:$r,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(En=this._openTelemetry)===null||En===void 0||En.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat($r),span:enableMicSpan,status:2}),In.next=22;break;case 14:if(_n.name!=="DOMException"){In.next=15;break}Aa=pr.q.ERROR_RN_CAMERA_NOT_FOUND,zr=Aa.message,this._emitError(Aa),(Xr=this._videosdkLogs)===null||Xr===void 0||Xr.pushLogs({logText:zr,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(ka=this._openTelemetry)===null||ka===void 0||ka.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(zr),span:enableMicSpan,status:2}),In.next=22;break;case 15:if(!(_n instanceof DOMException)){In.next=21;break}dn=_n.name,In.next=dn==="NotAllowedError"?16:dn==="NotReadableError"?17:dn==="NotFoundError"?18:19;break;case 16:return $=this.handleNotAllowedError(_n,this._openTelemetry,this._videosdkLogs,ze,"video"),this._emitError($),In.abrupt("continue",20);case 17:return K=this.handleNotReadableError(_n,this._openTelemetry,this._videosdkLogs,ze,"video"),this._emitError(K),In.abrupt("continue",20);case 18:return Q=pr.q.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Q=pr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),de=Q.message,this._emitError(Q),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:de,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(de),span:ze,status:2}),In.abrupt("continue",20);case 19:return Se="An error occurred in creating video track, ".concat(_n.message),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:_n.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Se)},dashboardLog:!0}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Error in enableWebcam() :: ".concat(Se),span:ze,status:2}),In.abrupt("continue",20);case 20:In.next=22;break;case 21:Ve="An error occurred in creating video track, ".concat(_n.message),(_e=this._videosdkLogs)===null||_e===void 0||_e.pushLogs({logText:_n.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Ve)},dashboardLog:!0}),(be=this._openTelemetry)===null||be===void 0||be.completeSpan({message:"Error in enableWebcam() :: ".concat(Ve),span:ze,status:2});case 22:return In.abrupt("return");case 23:In.next=26;break;case 24:return mt={label:"external video"},In.next=25,this._getExternalVideoStream();case 25:xe=In.sent,ke=xe.getVideoTracks()[0].clone();case 26:if(Ae=(ht=this._openTelemetry)===null||ht===void 0?void 0:ht.trace({spanName:"Generating Producer Configuration",span:ze}),Ne={videoGoogleStartBitrate:1e3},!this._forceH264){In.next=28;break}if($e=this._mediasoupDevice.rtpCapabilities.codecs.find(function(gn){return gn.mimeType.toLowerCase()==="video/h264"})){In.next=27;break}throw new Error("The desired H.264 codec and configuration are not supported");case 27:In.next=29;break;case 28:if(!this._forceVP9){In.next=29;break}if($e=this._mediasoupDevice.rtpCapabilities.codecs.find(function(gn){return gn.mimeType.toLowerCase()==="video/vp9"})){In.next=29;break}throw new Error("The desired VP9 codec and configuration are not supported");case 29:ke?(et=ke.getConstraints(),ue=this._deviceInfo.sdkType=="react-native"&&this._deviceInfo.platform=="ios",Ke=(0,Fi.v7)(!1,et.width,et.height,{simulcast:Pe.multiStream},ue)):this._useSimulcast&&(me=this._mediasoupDevice.rtpCapabilities.codecs.find(function(gn){return gn.kind==="video"}),Ke=this._forceVP9&&$e||me.mimeType.toLowerCase()==="video/vp9"?so:sc[this._webcam.resolution]),Me={};try{Me={encodings:Ke,width:Pe?(qe=ke)===null||qe===void 0?void 0:qe.getConstraints().width:er[Nt].width.ideal,height:Pe?(tt=ke)===null||tt===void 0?void 0:tt.getConstraints().height:er[Nt].height.ideal}}catch(gn){(Jt=this._videosdkLogs)===null||Jt===void 0||Jt.pushLogs({logText:gn.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(gn.message)},dashboardLog:!0}),console.log(gn)}if((At=this._openTelemetry)===null||At===void 0||At.traceAutoComplete({spanName:"Track Generated with height ".concat(Me.height," and width ").concat(Me.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(Me)},span:ze,status:1}),(We=this._openTelemetry)===null||We===void 0||We.completeSpan({span:Ae,status:1,message:"Producer Configuration Generated"}),Ae=(Mt=this._openTelemetry)===null||Mt===void 0?void 0:Mt.trace({spanName:"Creating Webcam Producer",span:ze}),!this._sendTransport){In.next=31;break}return In.next=30,this._sendTransport.produce({track:ke,encodings:Ke,codecOptions:Ne,codec:$e,appData:xa(xa({},Me),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(gn){mr.e2eeManager&&(gn.senderStreams=gn.createEncodedStreams())}});case 30:this._webcamProducer=In.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._webcamProducer),In.next=32;break;case 31:return(vt=this._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:pr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(pr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),In.abrupt("return");case 32:ke.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(ke.getConstraints().deviceId)),this._webcamProducer?(ct=ja({id:this._webcamProducer.id,deviceLabel:mt.label,type:this._getWebcamType(mt),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer,rtpSender:this._webcamProducer.rtpSender}),ft.dispatch(ct),this._eventEmitter.emit(ct.type,ct.payload),Ue=0,(yt=this._metrics.addNewProbe(this._webcamProducer,"producer")).onStatsCollected=function(gn){try{var Lr;mr._stats.producerStats||(mr._stats.producerStats={}),mr._stats.producerStats.video||(mr._stats.producerStats.video=[]),mr._webcamProducer&&(mr._latestStats[(Lr=mr._webcamProducer)===null||Lr===void 0?void 0:Lr.id]=[]),gn.video.forEach(function(Ci){var fs;mr._latestStats[(fs=mr._webcamProducer)===null||fs===void 0?void 0:fs.id].push(Ci)}),Ue%5==0&&mr._webcamProducer!=null&&mr._stats.producerStats.video.push({timestamp:new Date,stats:mr._latestStats[mr._webcamProducer.id]}),Ue++}catch(Ci){var ha;(ha=mr._videosdkLogs)===null||ha===void 0||ha.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ci.message}}),console.log("PRODUCER ERROR",Ci)}},yt.start(),this._webcamProducer.observer.on("close",function(){yt.stop(),mr._metrics.removeExistingProbe(yt)}),this._webcamProducer.on("transportclose",function(){var gn,Lr=Ba(mr._webcamProducer.id);ft.dispatch(Lr),mr._eventEmitter.emit(Lr.type,Lr.payload),(gn=mr._webcamProducer)===null||gn===void 0||gn.close(),mr._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var gn,Lr,ha=mr._deviceInfo.sdkType=="react-native"?pr.q.ERROR_RN_CAMERA_TRACK_ENDED:pr.q.ERROR_WEBCAM_TRACK_ENDED;(gn=mr._videosdkLogs)===null||gn===void 0||gn.pushLogs({logText:ha.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(ha.message)},dashboardLog:!0}),(Lr=mr._openTelemetry)===null||Lr===void 0||Lr.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:ze,message:ha.message,status:2}),ft.dispatch(Wn({type:"error",text:"Webcam disconnected!"})),mr.disableWebcam(ze).catch(function(){})}),(Rt=this._openTelemetry)===null||Rt===void 0||Rt.completeSpan({span:Ae,status:1,message:"Webcam Producer Created"}),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:ze,status:1,message:"Enable Webcam Successful"})):((fn=this._videosdkLogs)===null||fn===void 0||fn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:Ae,status:2,message:"Error in enableWebcam() :: webcamProducer null"}),(un=this._openTelemetry)===null||un===void 0||un.completeSpan({span:ze,status:2,message:"Error in enableWebcam() :: webcamProducer null"})),In.next=35;break;case 33:return In.prev=33,wr=In.catch(5),(Jn=this._videosdkLogs)===null||Jn===void 0||Jn.pushLogs({logText:wr.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(wr.message)},dashboardLog:!0}),(Rr=this._openTelemetry)===null||Rr===void 0||Rr.completeSpan({span:ze,status:2,message:"Error in enableWebcam() :: ".concat(wr.message)}),ft.dispatch(Wn({type:"error",text:"Error enabling webcam: ".concat(wr)})),In.next=34,this._socketRequest("produceError",{mediaType:"video",message:wr.message});case 34:ke&&ke.stop();case 35:ft.dispatch(Ji(!1));case 36:case"end":return In.stop()}},fe,this,[[5,33],[8,13]])})),function(){return V.apply(this,arguments)})},{key:"handleNotAllowedError",value:function(fe,X,re,ae,ie){var le={};return le=fe.message==="Permission denied"||fe.message==="Permission dismissed"?ie==="video"?pr.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:pr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:fe.message.includes("The request is not allowed by the user agent")?ie==="video"?pr.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:pr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:fe.message==="Permission denied by system"?ie==="video"?pr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:pr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:ie==="video"?pr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:pr.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,re.pushLogs({logText:le.message,logType:"ERROR",attributes:{error:"Error in ".concat(ie==="video"?"enableWebcam()":"enableMic()"," :: ").concat(fe.message)},dashboardLog:!0}),X.completeSpan({message:ie==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(le.message):"Error in enableMic() :: occurred in creating audio track, ".concat(le.message),span:ae,status:2}),le}},{key:"handleNotReadableError",value:function(fe,X,re,ae,ie){var le={};return le=fe.message==="Device in use"?ie==="video"?pr.q.ERROR_CAMERA_IN_USE:pr.q.ERROR_MICROPHONE_IN_USE:ie==="video"?pr.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:pr.q.ERROR_MICROPHONE_IN_USE,re.pushLogs({logText:le.message,logType:"ERROR",attributes:{error:"Error in ".concat(ie==="video"?"enableWebcam()":"enableMic()"," :: ").concat(fe.message)},dashboardLog:!0}),X.completeSpan({message:ie==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(le.message):"Error in enableMic() :: occurred in creating audio track, ".concat(le.message),span:ae,status:2}),le}},{key:"createCameraVideoTrack",value:(O=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an;return m().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return re=X.cameraId,ae=re===void 0?void 0:re,ie=X.encoderConfig,le=ie===void 0?void 0:ie,Pe=X.facingMode,De=Pe===void 0?void 0:Pe,ze=X.optimizationMode,Et=ze===void 0?void 0:ze,kt=X.multiStream,zt=kt===void 0||kt,mn=le?qi.$.videoProfiles[le]:qi.$.videoProfiles.h360p_w640p,jt={video:{deviceId:ae||void 0,facingMode:De||void 0,width:mn.width,height:mn.height,frameRate:mn.frameRate}},hn.next=1,(0,ge.lp)(jt);case 1:return an=hn.sent,Et&&(an.contentHint=Et),an.encoderConfig=le||"h360p_w640p",an.contentHint=Et||"",an.multiStream=zt,an.cameraId=ae,hn.abrupt("return",an);case 2:case"end":return hn.stop()}},fe)})),function(fe){return O.apply(this,arguments)})},{key:"disableWebcam",value:(l=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn=arguments;return m().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(ae=hn.length>0&&hn[0]!==void 0?hn[0]:void 0,ie=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"disableWebcam() Calling",status:1,span:ae||null}),he.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){ke.next=1;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"Error in disableWebcam() :: Webcam Producer Not found"}),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),ke.abrupt("return");case 1:return De=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Webcam Producer",span:ie,status:1}),this._webcamProducer.close(),ze=Ba(this._webcamProducer.id),ft.dispatch(ze),this._eventEmitter.emit(ze.type,ze.payload),ke.prev=2,ke.next=3,this._socketRequest("closeProducer",{producerId:this._webcamProducer.id});case 3:(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:De,status:1,message:"Requested Server to Close Producer"}),this._webcamProducer=null,(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:ie,status:1,message:"Webcam Disabled Successfully"}),ke.next=5;break;case 4:ke.prev=4,an=ke.catch(2),(zt=this._videosdkLogs)===null||zt===void 0||zt.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:an.message},dashboardLog:!0}),(mn=this._openTelemetry)===null||mn===void 0||mn.completeSpan({span:De,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(an)}),(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({span:ie,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(an)}),ft.dispatch(Wn({type:"error",text:"Error closing server-side webcam Producer: ".concat(an)}));case 5:case"end":return ke.stop()}},fe,this,[[2,4]])})),function(){return l.apply(this,arguments)})},{key:"getMics",value:(a=(0,v.A)(m().mark(function fe(){var X,re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return X=[],ie.prev=1,ie.next=2,this._updateMics();case 2:this._mics.forEach(function(le,Pe){X.push({deviceId:Pe,label:le.label})}),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),he.error("getMics() | Error",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:ae.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0});case 4:return ie.abrupt("return",X);case 5:case"end":return ie.stop()}},fe,this,[[1,3]])})),function(){return a.apply(this,arguments)})},{key:"changeMic",value:(Ns=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke;return m().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeMic() Calling"}),mt.prev=1,(0,T.A)(X)!="object"){mt.next=4;break}return mt.next=2,this.disableMic(!0,ae);case 2:return mt.next=3,this.enableMic(X,ae);case 3:mt.next=9;break;case 4:return De=X,mt.next=5,this._updateMics();case 5:if(ze=Array.from(this._mics.keys()),Et=ze.length,kt=this._mic.device?this._mic.device.deviceId:void 0,De!=null&&De!=null?zt=ze.indexOf(De):(zt=ze.indexOf(kt))<Et-1?zt++:zt=0,this._mic.device=this._mics.get(ze[zt]),mn=(ie=this._openTelemetry)===null||ie===void 0?void 0:ie.trace({spanName:"Getting Selected Mic",span:ae,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){mt.next=6;break}throw(jt=this._videosdkLogs)===null||jt===void 0||jt.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 6:return mt.next=7,this.disableMic(!0,ae);case 7:return mt.next=8,this.enableMic(void 0,ae);case 8:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:mn,status:1,message:"Done"}),(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:ae,status:1,message:"changeMic() Ending"});case 9:mt.next=11;break;case 10:mt.prev=10,ke=mt.catch(1),(an=this._openTelemetry)===null||an===void 0||an.completeSpan({span:ae,status:2,message:"changeMic() | Error ".concat(ke)}),(hn=this._videosdkLogs)===null||hn===void 0||hn.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:ke.message}});case 11:case"end":return mt.stop()}},fe,this,[[1,10]])})),function(fe){return Ns.apply(this,arguments)})},{key:"getWebcams",value:(ns=(0,v.A)(m().mark(function fe(){var X,re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return X=[],ie.prev=1,ie.next=2,this._updateWebcams();case 2:this._webcams.forEach(function(le,Pe){X.push({deviceId:Pe,label:le.label,facingMode:le.facing||"environment"})}),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),he.error("getWebcams() | failed %o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:ae.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0});case 4:return ie.abrupt("return",X);case 5:case"end":return ie.stop()}},fe,this,[[1,3]])})),function(){return ns.apply(this,arguments)})},{key:"replaceWebcamStream",value:(mo=(0,v.A)(m().mark(function fe(X){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!this._webcamProducer){ae.next=2;break}return re=X.getVideoTracks()[0],ae.next=1,this._webcamProducer.replaceTrack({track:re});case 1:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),ae.next=4;break;case 2:return ae.next=3,this.disableWebcam();case 3:return ae.next=4,this.enableWebcam(X);case 4:case"end":return ae.stop()}},fe,this)})),function(fe){return mo.apply(this,arguments)})},{key:"changeWebcam",value:(Do=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt;return m().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeWebcam() Calling"}),ft.dispatch(Ji(!0)),(0,T.A)(X)!=="object"){Nt.next=6;break}return Nt.prev=1,Nt.next=2,this.disableWebcam(ae);case 2:return Nt.next=3,this.enableWebcam(X,ae);case 3:Nt.next=5;break;case 4:Nt.prev=4,ke=Nt.catch(1),he.error("changeWebcam() | failed: %o",ke),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(X),error:ke.message}}),ft.dispatch(Wn({type:"error",text:"Could not change webcam: ".concat(ke)}));case 5:Nt.next=12;break;case 6:return Nt.prev=6,Nt.next=7,this._updateWebcams(ae);case 7:if(ze=Array.from(this._webcams.keys()),Et=ze.length,kt=this._webcam.device?this._webcam.device.deviceId:void 0,X!=null&&X!=null?zt=ze.indexOf(X):(zt=ze.indexOf(kt))<Et-1?zt++:zt=0,this._webcam.device=this._webcams.get(ze[zt]),he.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",mn=(le=this._openTelemetry)===null||le===void 0?void 0:le.trace({spanName:"Getting Selected Webcam",span:ae,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){Nt.next=8;break}throw(jt=this._videosdkLogs)===null||jt===void 0||jt.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 8:return Nt.next=9,this.disableWebcam(ae);case 9:return Nt.next=10,this.enableWebcam(void 0,ae);case 10:return(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:mn,status:1,message:"Done"}),(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:ae,status:1,message:"changeWebcam() Ending"}),Nt.abrupt("return");case 11:Nt.prev=11,mt=Nt.catch(6),he.error("changeWebcam() | failed: %o",mt),(an=this._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(X),error:mt.message}}),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ae,status:2,message:"Could not change webcam ".concat(mt)}),ft.dispatch(Wn({type:"error",text:"Could not change webcam: ".concat(mt)}));case 12:ft.dispatch(Ji(!1));case 13:case"end":return Nt.stop()}},fe,this,[[1,4],[6,11]])})),function(fe){return Do.apply(this,arguments)})},{key:"changeWebcamResolution",value:(ts=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De;return m().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:he.debug("changeWebcamResolution()"),ft.dispatch(Ji(!0)),ze.prev=1,le=this._webcam.resolution,ze.next=le==="qvga"?2:le==="vga"?3:le==="hd"?4:5;break;case 2:return this._webcam.resolution="vga",ze.abrupt("continue",6);case 3:return this._webcam.resolution="hd",ze.abrupt("continue",6);case 4:return this._webcam.resolution="qvga",ze.abrupt("continue",6);case 5:this._webcam.resolution="hd";case 6:return he.debug("changeWebcamResolution() | calling getUserMedia()"),ze.prev=7,ze.next=8,navigator.mediaDevices.getUserMedia({video:xa({deviceId:{exact:this._webcam.device.deviceId}},er[this._webcam.resolution])});case 8:X=ze.sent,ze.next=10;break;case 9:return ze.prev=9,Pe=ze.catch(7),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(Pe)}}),Pe.message==="Permission denied"||Pe.name==="NotAllowedError"?this._emitError(pr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(pr.q.ERROR_GET_VIDEO_MEDIA),ze.abrupt("return");case 10:return ae=X.getVideoTracks()[0],ze.next=11,this._webcamProducer.replaceTrack({track:ae});case 11:ft.dispatch(Qa(this._webcamProducer.id,ae)),ze.next=13;break;case 12:ze.prev=12,De=ze.catch(1),he.error("changeWebcamResolution() | failed: %o",De),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:De.message}}),ft.dispatch(Wn({type:"error",text:"Could not change webcam resolution: ".concat(De)}));case 13:ft.dispatch(Ji(!1));case 14:case"end":return ze.stop()}},fe,this,[[1,12],[7,9]])})),function(){return ts.apply(this,arguments)})},{key:"enableShare",value:(Zo=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt,Nt,ht,At,We,Mt,rn,Vt,ln,en,yn,cn,Kt,dr,tr,Ct,En,br,$r,Xr,ka,Aa,zr,$,K,Q,de,Se,_e,be=this,Ve=arguments;return m().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(re=Ve.length>0&&Ve[0]!==void 0?Ve[0]:void 0,ae=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"enableShare() Calling ".concat(re?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:re?JSON.stringify(re):"Not Specify Custom Track"}}),he.debug("enableShare()"),!this._shareProducer){xe.next=1;break}return(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"Screen Share Producer found"}),xe.abrupt("return");case 1:if(this._mediasoupDevice.canProduce("video")){xe.next=2;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"enableShare() | cannot produce video"}),he.error("enableShare() | cannot produce video"),xe.abrupt("return");case 2:if(ze=[],ft.dispatch(cs(!0)),xe.prev=3,he.debug("enableShare() | calling getUserMedia()"),hn=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Creating Track",span:ae}),!re||!re.active){xe.next=4;break}Pe=re.getVideoTracks()[0],De=re.getAudioTracks()[0],re.multiStream?(ke=Pe.getConstraints(),mt=ke.height,Nt=ke.frameRate,ht=qi.$.screenShareProfiles["h".concat(mt,"p_").concat(Nt,"fps")],At=[{maxBitrate:ht.bitrates.high,maxFramerate:Nt,scalabilityMode:"S3T3",dtx:!0},{maxBitrate:ht.bitrates.medium,maxFramerate:Nt,scalabilityMode:"S2T3",dtx:!0},{maxBitrate:ht.bitrates.low,maxFramerate:Nt,scalabilityMode:"S1T3",dtx:!0}],ze=At):ze=hi,xe.next=9;break;case 4:return xe.prev=4,xe.next=5,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 5:Mt=xe.sent,xe.next=7;break;case 6:return xe.prev=6,de=xe.catch(4),(rn=this._videosdkLogs)===null||rn===void 0||rn.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(de)}}),(Vt=this._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:ae,status:2,message:"Error in getDisplayMedia for screen share ".concat(de)}),de.message==="Permission denied"||de.name==="NotAllowedError"?this._emitError(pr.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(pr.q.ERROR_GET_DISPLAY_MEDIA),xe.abrupt("return");case 7:if(Mt){xe.next=8;break}return ft.dispatch(cs(!0)),(ln=this._openTelemetry)===null||ln===void 0||ln.completeSpan({span:ae,status:2,message:"Stream not found"}),xe.abrupt("return");case 8:Pe=Mt.getVideoTracks()[0],De=Mt.getAudioTracks()[0],ze=hi,(We=this._openTelemetry)===null||We===void 0||We.completeSpan({message:"Track Generated with height ".concat(Pe.getSettings().height," and width ").concat(Pe.getSettings().width),span:hn,status:1});case 9:if(en=(kt=this._openTelemetry)===null||kt===void 0?void 0:kt.trace({spanName:"Generating Producer Configuration",span:ae}),cn={videoGoogleStartBitrate:1e3},!this._forceH264){xe.next=11;break}if(yn=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Ae){return Ae.mimeType.toLowerCase()==="video/h264"})){xe.next=10;break}throw(Kt=this._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 10:xe.next=12;break;case 11:if(!this._forceVP9){xe.next=12;break}if(yn=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Ae){return Ae.mimeType.toLowerCase()==="video/vp9"})){xe.next=12;break}throw(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 12:return(zt=this._openTelemetry)===null||zt===void 0||zt.completeSpan({span:en,status:1,message:"Producer Configuration Generated"}),en=(mn=this._openTelemetry)===null||mn===void 0?void 0:mn.trace({spanName:"Creating Share Producer",span:ae}),xe.next=13,this._sendTransport.produce({track:Pe,encodings:ze.length>0?ze:hi,codecOptions:cn,codec:yn,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(Ae){be.e2eeManager&&(Ae.senderStreams=Ae.createEncodedStreams())}});case 13:if(this._shareProducer=xe.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareProducer),tr=ja({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareProducer,rtpSender:this._shareProducer.rtpSender}),ft.dispatch(tr),this._eventEmitter.emit(tr.type,tr.payload),this._shareProducer.on("transportclose",function(){var Ae,Ke=Ba(be._shareProducer.id);ft.dispatch(Ke),be._eventEmitter.emit(Ke.type,Ke.payload),(Ae=be._shareProducer)===null||Ae===void 0||Ae.close(),be._shareProducer=null}),this._shareProducer.on("trackended",function(){var Ae;(Ae=be._openTelemetry)===null||Ae===void 0||Ae.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:ae,status:2}),ft.dispatch(Wn({type:"error",text:"Share disconnected!"})),be.disableShare().catch(function(){})}),(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({span:en,status:1,message:"Share Producer Created"}),!De){xe.next=18;break}return xe.prev=14,br={opusStereo:1,opusDtx:1},en=(Ct=this._openTelemetry)===null||Ct===void 0?void 0:Ct.trace({spanName:"Creating Share Audio Producer",span:ae}),xe.next=15,this._sendTransport.produce({track:De,codecOptions:br,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(Ae){be.e2eeManager&&(Ae.senderStreams=Ae.createEncodedStreams())}});case 15:this._shareAudioProducer=xe.sent,$r=ja({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareAudioProducer,rtpSender:this._shareAudioProducer.rtpSender}),ft.dispatch($r),this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareAudioProducer),this._eventEmitter.emit($r.type,$r.payload),this._shareAudioProducer.on("transportclose",function(){var Ae,Ke=Ba(be._shareAudioProducer.id);ft.dispatch(Ke),be._eventEmitter.emit(Ke.type,Ke.payload),(Ae=be._shareAudioProducer)===null||Ae===void 0||Ae.close(),be._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var Ae;(Ae=be._openTelemetry)===null||Ae===void 0||Ae.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:ae,status:2}),ft.dispatch(Wn({type:"error",text:"Share disconnected!"}))}),(En=this._openTelemetry)===null||En===void 0||En.completeSpan({span:en,status:1,message:"Share Audio Producer Created"}),xe.next=18;break;case 16:return xe.prev=16,Se=xe.catch(14),xe.next=17,this._socketRequest("produceError",{mediaType:"shareAudio",message:Se.message});case 17:(Xr=this._videosdkLogs)===null||Xr===void 0||Xr.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:Se.message}});case 18:(an=this._openTelemetry)===null||an===void 0||an.completeSpan({span:ae,status:1,message:"Enable Share Successful"}),xe.next=21;break;case 19:return xe.prev=19,_e=xe.catch(3),he.error("enableShare() | failed:%o",_e),(ka=this._openTelemetry)===null||ka===void 0||ka.completeSpan({span:ae,status:2,attributes:{error:_e.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",_e.message),(Aa=this._videosdkLogs)===null||Aa===void 0||Aa.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:_e.message}}),_e.name!=="NotAllowedError"&&ft.dispatch(Wn({type:"error",text:"Error sharing: ".concat(_e)})),xe.next=20,this._socketRequest("produceError",{mediaType:"share",message:_e.message});case 20:Pe&&Pe.stop(),De&&De.stop();case 21:ft.dispatch(cs(!1)),this._shareProducer&&(zr=0,($=this._metrics.addNewProbe(this._shareProducer,"share_producer")).onStatsCollected=function(Ae){try{var Ke;be._stats.producerStats||(be._stats.producerStats={}),be._stats.producerStats.share||(be._stats.producerStats.share=[]),be._shareProducer&&(be._latestStats[(Ke=be._shareProducer)===null||Ke===void 0?void 0:Ke.id]=[]),Ae.video.forEach(function(Ne){var et;be._shareProducer&&be._latestStats[(et=be._shareProducer)===null||et===void 0?void 0:et.id].push(Ne)}),zr%5==0&&be._shareProducer!=null&&be._stats.producerStats.share.push({timestamp:new Date,stats:be._latestStats[be._shareProducer.id]}),zr++}catch(Ne){var $e;($e=be._videosdkLogs)===null||$e===void 0||$e.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ne.message}}),console.log("PRODUCER ERROR",Ne)}},$.start(),this._shareProducer.observer.on("close",function(){$.stop(),be._metrics.removeExistingProbe($)})),this._shareAudioProducer&&(K=0,(Q=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer")).onStatsCollected=function(Ae){try{var Ke;be._stats.producerStats||(be._stats.producerStats={}),be._stats.producerStats.shareAudio||(be._stats.producerStats.shareAudio=[]),be._shareAudioProducer&&(be._latestStats[(Ke=be._shareAudioProducer)===null||Ke===void 0?void 0:Ke.id]=[]),Ae.audio.forEach(function(Ne){var et;be._shareAudioProducer&&be._latestStats[(et=be._shareAudioProducer)===null||et===void 0?void 0:et.id].push(Ne)}),K%5==0&&be._shareAudioProducer!=null&&be._stats.producerStats.shareAudio.push(xa({timestamp:new Date},be._latestStats[be._shareAudioProducer.id]?be._latestStats[be._shareAudioProducer.id][0]:{})),K++}catch(Ne){var $e;($e=be._videosdkLogs)===null||$e===void 0||$e.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ne.message}}),console.log("PRODUCER ERROR",Ne)}},Q.start(),this._shareAudioProducer.observer.on("close",function(){Q.stop(),be._metrics.removeExistingProbe(Q)}));case 22:case"end":return xe.stop()}},fe,this,[[3,19],[4,6],[14,16]])})),function(){return Zo.apply(this,arguments)})},{key:"disableShare",value:(lc=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an;return m().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:if(he.debug("disableShare()"),ie=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){hn.next=1;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"Share Producer Not found"}),hn.abrupt("return");case 1:return Pe=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Share Producer",span:ie,status:1}),this._shareProducer.close(),De=Ba(this._shareProducer.id),ft.dispatch(De),this._eventEmitter.emit(De.type,De.payload),this._shareAudioProducer&&(kt=(ze=this._openTelemetry)===null||ze===void 0?void 0:ze.trace({spanName:"Closing Share Audio Producer",span:ie,status:1}),this._shareAudioProducer.close(),De=Ba(this._shareAudioProducer.id),ft.dispatch(De),this._eventEmitter.emit(De.type,De.payload),(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:kt,status:1,message:"Closed Share Audio Producer"})),hn.prev=2,hn.next=3,this._socketRequest("closeProducer",{producerId:this._shareProducer.id});case 3:if(!this._shareAudioProducer){hn.next=4;break}return hn.next=4,this._socketRequest("closeProducer",{producerId:this._shareAudioProducer.id});case 4:(zt=this._openTelemetry)===null||zt===void 0||zt.completeSpan({span:Pe,status:1,message:"Requested Server to Close Producer"}),hn.next=6;break;case 5:hn.prev=5,an=hn.catch(2),ft.dispatch(Wn({type:"error",text:"Error closing server-side share Producer: ".concat(an)})),(mn=this._openTelemetry)===null||mn===void 0||mn.completeSpan({span:ie,status:2,message:"Error closing server-side share Producer ".concat(an)}),(jt=this._videosdkLogs)===null||jt===void 0||jt.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:an.message}});case 6:this._shareProducer=null,this._shareAudioProducer=null,(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"Screen Share Disabled Successfully"});case 7:case"end":return hn.stop()}},fe,this,[[2,5]])})),function(){return lc.apply(this,arguments)})},{key:"enableAudioOnly",value:(Ps=(0,v.A)(m().mark(function fe(){var X,re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:he.debug("enableAudioOnly()"),ft.dispatch(Ea(!0)),this.disableWebcam(),X=La(this._consumers.values()),le.prev=1,X.s();case 2:if((re=X.n()).done){le.next=5;break}if((ae=re.value).kind==="video"){le.next=3;break}return le.abrupt("continue",4);case 3:this._pauseConsumer(ae);case 4:le.next=2;break;case 5:le.next=7;break;case 6:le.prev=6,ie=le.catch(1),X.e(ie);case 7:return le.prev=7,X.f(),le.finish(7);case 8:ft.dispatch(Br(!0)),ft.dispatch(Ea(!1));case 9:case"end":return le.stop()}},fe,this,[[1,6,7,8]])})),function(){return Ps.apply(this,arguments)})},{key:"disableAudioOnly",value:(Oo=(0,v.A)(m().mark(function fe(){var X,re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:he.debug("disableAudioOnly()"),ft.dispatch(Ea(!0)),!this._webcamProducer&&this._produce&&($n()||{}).webcamEnabled&&this.enableWebcam(),X=La(this._consumers.values()),le.prev=1,X.s();case 2:if((re=X.n()).done){le.next=5;break}if((ae=re.value).kind==="video"){le.next=3;break}return le.abrupt("continue",4);case 3:this._resumeConsumer(ae);case 4:le.next=2;break;case 5:le.next=7;break;case 6:le.prev=6,ie=le.catch(1),X.e(ie);case 7:return le.prev=7,X.f(),le.finish(7);case 8:ft.dispatch(Br(!1)),ft.dispatch(Ea(!1));case 9:case"end":return le.stop()}},fe,this,[[1,6,7,8]])})),function(){return Oo.apply(this,arguments)})},{key:"muteAudio",value:(_a=(0,v.A)(m().mark(function fe(){return m().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:he.debug("muteAudio()"),ft.dispatch(ua(!0));case 1:case"end":return X.stop()}},fe)})),function(){return _a.apply(this,arguments)})},{key:"unmuteAudio",value:(Hc=(0,v.A)(m().mark(function fe(){return m().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:he.debug("unmuteAudio()"),ft.dispatch(ua(!1));case 1:case"end":return X.stop()}},fe)})),function(){return Hc.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(po=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De,ze,Et,kt;return m().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return ie=X.iceParameters,le=X.transportId,Pe=X.internalSpan,le===((re=this._sendTransport)===null||re===void 0?void 0:re.id)&&this._sendTransport.restartIce({iceParameters:ie}),le===((ae=this._recvTransport)===null||ae===void 0?void 0:ae.id)&&this._recvTransport.restartIce({iceParameters:ie}),zt.prev=1,zt.next=2,this._socketRequest("iceRestarted",{transportId:le});case 2:(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:Pe,status:1,message:"iceRestarted"}),zt.next=4;break;case 3:zt.prev=3,kt=zt.catch(1),(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:Pe,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(kt)}),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:kt.message}}),ft.dispatch(Wn({type:"error",text:"ICE restart failed: ".concat(kt)}));case 4:case"end":return zt.stop()}},fe,this,[[1,3]])})),function(fe){return po.apply(this,arguments)})},{key:"restartIce",value:(ps=(0,v.A)(m().mark(function fe(){var X,re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(he.debug("restartIce()"),ft.dispatch(ya(!0)),le.prev=1,!this._sendTransport){le.next=3;break}return le.next=2,this._socketRequest("restartIce",{transportId:this._sendTransport.id});case 2:return X=le.sent,le.next=3,this._sendTransport.restartIce({iceParameters:X});case 3:if(!this._recvTransport){le.next=5;break}return le.next=4,this._socketRequest("restartIce",{transportId:this._recvTransport.id});case 4:return re=le.sent,le.next=5,this._recvTransport.restartIce({iceParameters:re});case 5:ft.dispatch(Wn({text:"ICE restarted"})),le.next=7;break;case 6:le.prev=6,ie=le.catch(1),he.error("restartIce() | failed:%o",ie),ft.dispatch(Wn({type:"error",text:"ICE restart failed: ".concat(ie)})),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:ie.message}});case 7:ft.dispatch(ya(!1));case 8:case"end":return le.stop()}},fe,this,[[1,6]])})),function(){return ps.apply(this,arguments)})},{key:"_socketRequest",value:(Ao=(0,v.A)(m().mark(function fe(X){var re,ae=this,ie=arguments;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return re=ie.length>1&&ie[1]!==void 0?ie[1]:{},le.abrupt("return",new Promise(function(Pe,De){ae._webSocket.emit("request",{method:X,request:!0,data:re},function(ze){ze!=null&&ze.error?De(new Error(ze.error)):Pe(ze.data)})}));case 1:case"end":return le.stop()}},fe)})),function(fe){return Ao.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(Hs=(0,v.A)(m().mark(function fe(X){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(he.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",X),ie.prev=1,!this._webcamProducer){ie.next=3;break}return ie.next=2,this._webcamProducer.setMaxSpatialLayer(X);case 2:ie.next=4;break;case 3:if(!this._shareProducer){ie.next=4;break}return ie.next=4,this._shareProducer.setMaxSpatialLayer(X);case 4:ie.next=6;break;case 5:ie.prev=5,ae=ie.catch(1),he.error("setMaxSendingSpatialLayer() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:ae.message}}),ft.dispatch(Wn({type:"error",text:"Error setting max sending video spatial layer: ".concat(ae)}));case 6:case"end":return ie.stop()}},fe,this,[[1,5]])})),function(fe){return Hs.apply(this,arguments)})},{key:"setWebcamQuality",value:(Xs=(0,v.A)(m().mark(function fe(X){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(this._webcamProducer){ie.next=1;break}return ie.abrupt("return");case 1:if(re=this._webcam.resolution,ae=io[re][X].s,this._webcamProducer.maxSpatialLayer!=ae){ie.next=2;break}return ie.abrupt("return");case 2:return ie.next=3,this._webcamProducer.setMaxSpatialLayer(ae);case 3:case"end":return ie.stop()}},fe,this)})),function(fe){return Xs.apply(this,arguments)})},{key:"setConsumerScreenShareQuality",value:(vi=(0,v.A)(m().mark(function fe(X,re){var ae,ie,le,Pe,De,ze;return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Pe=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:'Setting "'.concat(re,'" Quality for Screen Share')}),ze=(De={high:{spatialLayer:2,temporalLayer:2},med:{spatialLayer:1,temporalLayer:2},low:{spatialLayer:0,temporalLayer:2}})[re]||De.high,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Pe,attributes:{selectedQuality:ze},status:1}),Et.next=1,this.setConsumerPreferredLayers(X,ze.spatialLayer,ze.temporalLayer);case 1:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Done",span:Pe,status:1});case 2:case"end":return Et.stop()}},fe,this)})),function(fe,X){return vi.apply(this,arguments)})},{key:"setConsumerQuality",value:(uo=(0,v.A)(m().mark(function fe(X,re){var ae,ie,le,Pe,De,ze,Et;return m().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return Pe=this._webcam.resolution,De=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:'Setting "'.concat(re,'" Quality')}),ze=io[Pe][re].s,Et=io[Pe][re].t,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:De,attributes:{spatialLayers:JSON.parse(ze),temporalLayers:JSON.parse(Et)},status:1}),kt.next=1,this.setConsumerPreferredLayers(X,ze,Et);case 1:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Done",span:De,status:1});case 2:case"end":return kt.stop()}},fe,this)})),function(fe,X){return uo.apply(this,arguments)})},{key:"setViewPort",value:(Gi=(0,v.A)(m().mark(function fe(X,re,ae){var ie,le,Pe,De;return m().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(this._consumers.get(X.id)){ze.next=1;break}return ze.abrupt("return");case 1:if(ie=(0,Fi.ed)(this._consumers.get(X.id),re,ae),le=ie.consumerId,Pe=ie.newPreferredSpatialLayer,De=ie.newPreferredTemporalLayer,Pe!==X.preferredSpatialLayer||De!==X.preferredTemporalLayer){ze.next=2;break}return ze.abrupt("return");case 2:if(!le){ze.next=3;break}return ze.next=3,this.setConsumerPreferredLayers(le,Pe,De);case 3:case"end":return ze.stop()}},fe,this)})),function(fe,X,re){return Gi.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(Js=(0,v.A)(m().mark(function fe(X,re,ae){var ie,le,Pe;return m().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return he.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",X,re,ae),De.prev=1,(ie=this._consumers.get(X)).spatialLayers>1&&(ie.preferredSpatialLayer=re,ie.preferredTemporalLayer=ae),De.next=2,this._socketRequest("setConsumerPreferredLayers",{consumerId:X,spatialLayer:re,temporalLayer:ae});case 2:ft.dispatch(zo(X,re,ae)),De.next=4;break;case 3:De.prev=3,Pe=De.catch(1),he.error("setConsumerPreferredLayers() | failed:%o",Pe),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:Pe.message}}),ft.dispatch(Wn({type:"error",text:"Error setting Consumer preferred layers: ".concat(Pe)}));case 4:case"end":return De.stop()}},fe,this,[[1,3]])})),function(fe,X,re){return Js.apply(this,arguments)})},{key:"setConsumerPriority",value:(gi=(0,v.A)(m().mark(function fe(X,re){var ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return he.debug("setConsumerPriority() [consumerId:%s, priority:%d]",X,re),le.prev=1,le.next=2,this._socketRequest("setConsumerPriority",{consumerId:X,priority:re});case 2:ft.dispatch(_r(X,re)),le.next=4;break;case 3:le.prev=3,ie=le.catch(1),he.error("setConsumerPriority() | failed:%o",ie),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:ie.message}}),ft.dispatch(Wn({type:"error",text:"Error setting Consumer priority: ".concat(ie)}));case 4:case"end":return le.stop()}},fe,this,[[1,3]])})),function(fe,X){return gi.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(ri=(0,v.A)(m().mark(function fe(X){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return he.debug("requestConsumerKeyFrame() [consumerId:%s]",X),ie.prev=1,ie.next=2,this._socketRequest("requestConsumerKeyFrame",{consumerId:X});case 2:ft.dispatch(Wn({text:"Keyframe requested for video consumer"})),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),he.error("requestConsumerKeyFrame() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:ae.message}}),ft.dispatch(Wn({type:"error",text:"Error requesting key frame for Consumer: ".concat(ae)}));case 4:case"end":return ie.stop()}},fe,this,[[1,3]])})),function(fe){return ri.apply(this,arguments)})},{key:"enableChatDataProducer",value:(ds=(0,v.A)(m().mark(function fe(){var X,re,ae=this;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(he.debug("enableChatDataProducer()"),this._useDataChannel){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 2:this._chatDataProducer=ie.sent,ft.dispatch(Is({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){ae._chatDataProducer=null}),this._chatDataProducer.on("open",function(){he.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){he.error('chat DataProducer "close" event'),ae._chatDataProducer=null,ft.dispatch(Wn({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(le){he.error('chat DataProducer "error" event:%o',le),ft.dispatch(Wn({type:"error",text:"Chat DataProducer error: ".concat(le)}))}),this._chatDataProducer.on("bufferedamountlow",function(){he.debug('chat DataProducer "bufferedamountlow" event')}),ie.next=4;break;case 3:throw ie.prev=3,re=ie.catch(1),he.error("enableChatDataProducer() | failed:%o",re),(X=this._videosdkLogs)===null||X===void 0||X.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:re.message}}),ft.dispatch(Wn({type:"error",text:"Error enabling chat DataProducer: ".concat(re)})),re;case 4:case"end":return ie.stop()}},fe,this,[[1,3]])})),function(){return ds.apply(this,arguments)})},{key:"enableBotDataProducer",value:(fi=(0,v.A)(m().mark(function fe(){var X,re,ae=this;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(he.debug("enableBotDataProducer()"),this._useDataChannel){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 2:this._botDataProducer=ie.sent,ft.dispatch(Is({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){ae._botDataProducer=null}),this._botDataProducer.on("open",function(){he.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){he.error('bot DataProducer "close" event'),ae._botDataProducer=null,ft.dispatch(Wn({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(le){he.error('bot DataProducer "error" event:%o',le),ft.dispatch(Wn({type:"error",text:"Bot DataProducer error: ".concat(le)}))}),this._botDataProducer.on("bufferedamountlow",function(){he.debug('bot DataProducer "bufferedamountlow" event')}),ie.next=4;break;case 3:throw ie.prev=3,re=ie.catch(1),he.error("enableBotDataProducer() | failed:%o",re),(X=this._videosdkLogs)===null||X===void 0||X.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:re.message}}),ft.dispatch(Wn({type:"error",text:"Error enabling bot DataProducer: ".concat(re)})),re;case 4:case"end":return ie.stop()}},fe,this,[[1,3]])})),function(){return fi.apply(this,arguments)})},{key:"sendChatMessage",value:(ki=(0,v.A)(m().mark(function fe(X){return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(he.debug('sendChatMessage() [text:"%s]',X),this._chatDataProducer){re.next=1;break}return ft.dispatch(Wn({type:"error",text:"No chat DataProducer"})),re.abrupt("return");case 1:try{this._chatDataProducer.send(X)}catch(ae){he.error("chat DataProducer.send() failed:%o",ae),ft.dispatch(Wn({type:"error",text:"chat DataProducer.send() failed: ".concat(ae)}))}case 2:case"end":return re.stop()}},fe,this)})),function(fe){return ki.apply(this,arguments)})},{key:"sendBotMessage",value:(No=(0,v.A)(m().mark(function fe(X){return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(he.debug('sendBotMessage() [text:"%s]',X),this._botDataProducer){re.next=1;break}return ft.dispatch(Wn({type:"error",text:"No bot DataProducer"})),re.abrupt("return");case 1:try{this._botDataProducer.send(X)}catch(ae){he.error("bot DataProducer.send() failed:%o",ae),ft.dispatch(Wn({type:"error",text:"bot DataProducer.send() failed: ".concat(ae)}))}case 2:case"end":return re.stop()}},fe,this)})),function(fe){return No.apply(this,arguments)})},{key:"changeDisplayName",value:(lo=(0,v.A)(m().mark(function fe(X){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return he.debug('changeDisplayName() [displayName:"%s"]',X),sn({displayName:X}),ae.prev=1,ae.next=2,this._socketRequest("changeDisplayName",{displayName:X});case 2:this._displayName=X,ft.dispatch(An(X)),ft.dispatch(Wn({text:"Display name changed"})),ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),he.error("changeDisplayName() | failed: %o",re),ft.dispatch(Wn({type:"error",text:"Could not change display name: ".concat(re)})),ft.dispatch(An());case 4:case"end":return ae.stop()}},fe,this,[[1,3]])})),function(fe){return lo.apply(this,arguments)})},{key:"openConnection",value:(Vo=(0,v.A)(m().mark(function fe(X){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=X.roomId,ae=X.payload,ie.next=1,this._socketRequest("openConnection",{roomId:re,payload:ae}).catch(function(le){throw new Error(le)});case 1:case"end":return ie.stop()}},fe,this)})),function(fe){return Vo.apply(this,arguments)})},{key:"closeConnection",value:(Po=(0,v.A)(m().mark(function fe(X){return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=1,this._socketRequest("closeConnection",{roomId:X});case 1:case"end":return re.stop()}},fe,this)})),function(fe){return Po.apply(this,arguments)})},{key:"switchPeerRoom",value:(xc=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le;return m().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return re=X.peerId,ae=X.roomId,ie=X.payload,le=X.token,Pe.next=1,this._socketRequest("switchPeerRoom",{roomId:ae,peerId:re,payload:ie,token:le});case 1:case"end":return Pe.stop()}},fe,this)})),function(fe){return xc.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(Ts=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe;return m().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return re=X.roomId,ae=X.connectionRoomId,ie=X.peerId,le=X.payload,Pe=X.token,De.next=1,this._socketRequest("connectionSwitchPeerRoom",{roomId:re,connectionRoomId:ae,peerId:ie,payload:le,token:Pe});case 1:case"end":return De.stop()}},fe,this)})),function(fe){return Ts.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(Wi=(0,v.A)(m().mark(function fe(X){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=X.roomId,ae=X.message,ie.next=1,this._socketRequest("connectionSendChatMessage",{roomId:re,message:ae});case 1:case"end":return ie.stop()}},fe,this)})),function(fe){return Wi.apply(this,arguments)})},{key:"connectionEndMeeting",value:(qo=(0,v.A)(m().mark(function fe(X){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return re=X.roomId,ae.next=1,this._socketRequest("connectionCloseRoom",{roomId:re});case 1:case"end":return ae.stop()}},fe,this)})),function(fe){return qo.apply(this,arguments)})},{key:"pubsubPublish",value:(Cs=(0,v.A)(m().mark(function fe(X,re,ae,ie){var le,Pe,De,ze,Et,kt,zt;return m().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:if(mn.prev=0,ae!=null&&ae.sendOnly){if(le=ae.sendOnly,Pe=[],le){De=La(le);try{for(De.s();!(ze=De.n()).done;)(Et=ze.value)&&Pe.push(Et.toString())}catch(jt){De.e(jt)}finally{De.f()}}ae.sendOnly=Pe}return mn.next=1,this._socketRequest("pubsubPublish",{topic:X,message:re,options:ae,payload:ie});case 1:mn.next=3;break;case 2:mn.prev=2,zt=mn.catch(0),(kt=this._videosdkLogs)===null||kt===void 0||kt.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:zt.message}}),he.error("pubsubPublish() | failed: %o",zt);case 3:case"end":return mn.stop()}},fe,this,[[0,2]])})),function(fe,X,re,ae){return Cs.apply(this,arguments)})},{key:"pubsubSubscribe",value:(cc=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return le.prev=1,le.next=2,this._socketRequest("pubsubSubscribe",{topic:X});case 2:return re=le.sent,le.abrupt("return",re);case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:ie.message}}),he.error("pubsubSubscribe() | failed: %o",ie);case 4:case"end":return le.stop()}},fe,this,[[1,3]])})),function(fe){return cc.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(To=(0,v.A)(m().mark(function fe(X){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return le.prev=1,le.next=2,this._socketRequest("pubsubUnsubscribe",{topic:X});case 2:(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat(X),logType:"INFO"}),le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:ie.message}}),he.error("pubsubUnsubscribe() | failed: %o",ie);case 4:case"end":return le.stop()}},fe,this,[[1,3]])})),function(fe){return To.apply(this,arguments)})},{key:"closeRoom",value:(Us=(0,v.A)(m().mark(function fe(){return m().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=1,this._socketRequest("closeRoom",{});case 1:case"end":return X.stop()}},fe,this)})),function(){return Us.apply(this,arguments)})},{key:"removePeer",value:($i=(0,v.A)(m().mark(function fe(X){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if((re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Removing peer ".concat(X),status:1}),X!=null){ae.next=1;break}return ae.abrupt("return");case 1:return ae.next=2,this._socketRequest("removePeer",{peerId:X});case 2:case"end":return ae.stop()}},fe,this)})),function(fe){return $i.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(Fo=(0,v.A)(m().mark(function fe(){return m().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(he.debug("getSendTransportRemoteStats()"),this._sendTransport){X.next=1;break}return X.abrupt("return");case 1:return X.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._sendTransport.id}));case 2:case"end":return X.stop()}},fe,this)})),function(){return Fo.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(oc=(0,v.A)(m().mark(function fe(){return m().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(he.debug("getRecvTransportRemoteStats()"),this._recvTransport){X.next=1;break}return X.abrupt("return");case 1:return X.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._recvTransport.id}));case 2:case"end":return X.stop()}},fe,this)})),function(){return oc.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(co=(0,v.A)(m().mark(function fe(){var X;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(he.debug("getAudioRemoteStats()"),X=this._micProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[X.id]);case 2:case"end":return re.stop()}},fe,this)})),function(){return co.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(Zi=(0,v.A)(m().mark(function fe(){var X;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(he.debug("getVideoRemoteStats()"),X=this._webcamProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[X.id]);case 2:case"end":return re.stop()}},fe,this)})),function(){return Zi.apply(this,arguments)})},{key:"getShareRemoteStats",value:(Li=(0,v.A)(m().mark(function fe(){var X;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(he.debug("getVideoRemoteStats()"),X=this._shareProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[X.id]);case 2:case"end":return re.stop()}},fe,this)})),function(){return Li.apply(this,arguments)})},{key:"getShareAudioRemoteStats",value:(oo=(0,v.A)(m().mark(function fe(){var X;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(X=this._shareAudioProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[X.id]);case 2:case"end":return re.stop()}},fe,this)})),function(){return oo.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(Qs=(0,v.A)(m().mark(function fe(X){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(he.debug("getConsumerRemoteStats()"),re=this._consumers.get(X)){ie.next=1;break}return ie.abrupt("return");case 1:return this._latestStats[X]&&(this._latestStats[X][0].currentSpatialLayer=re.currentSpatialLayer,this._latestStats[X][0].currentTemporalLayer=re.currentTemporalLayer,this._latestStats[X][0].preferredSpatialLayer=re.preferredSpatialLayer,this._latestStats[X][0].preferredTemporalLayer=re.preferredTemporalLayer),ae=re.track.id.replace(/[{}]/g,""),ie.abrupt("return",this._latestStats[ae]);case 2:case"end":return ie.stop()}},fe,this)})),function(fe){return Qs.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(Ys=(0,v.A)(m().mark(function fe(){var X;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(he.debug("getChatDataProducerRemoteStats()"),X=this._chatDataProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:X.id}));case 2:case"end":return re.stop()}},fe,this)})),function(){return Ys.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(es=(0,v.A)(m().mark(function fe(){var X;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(he.debug("getBotDataProducerRemoteStats()"),X=this._botDataProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:X.id}));case 2:case"end":return re.stop()}},fe,this)})),function(){return es.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(ks=(0,v.A)(m().mark(function fe(X){return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(he.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(X)){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataConsumerStats",{dataConsumerId:X}));case 2:case"end":return re.stop()}},fe,this)})),function(fe){return ks.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(Rs=(0,v.A)(m().mark(function fe(){return m().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(he.debug("getSendTransportLocalStats()"),this._sendTransport){X.next=1;break}return X.abrupt("return");case 1:return X.abrupt("return",this._sendTransport.getStats());case 2:case"end":return X.stop()}},fe,this)})),function(){return Rs.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(Jr=(0,v.A)(m().mark(function fe(){return m().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(he.debug("getRecvTransportLocalStats()"),this._recvTransport){X.next=1;break}return X.abrupt("return");case 1:return X.abrupt("return",this._recvTransport.getStats());case 2:case"end":return X.stop()}},fe,this)})),function(){return Jr.apply(this,arguments)})},{key:"getAudioLocalStats",value:(ia=(0,v.A)(m().mark(function fe(){return m().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(he.debug("getAudioLocalStats()"),this._micProducer){X.next=1;break}return X.abrupt("return");case 1:return X.abrupt("return",this._micProducer.getStats());case 2:case"end":return X.stop()}},fe,this)})),function(){return ia.apply(this,arguments)})},{key:"getVideoLocalStats",value:(qr=(0,v.A)(m().mark(function fe(){var X;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(he.debug("getVideoLocalStats()"),X=this._webcamProducer||this._shareProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",X.getStats());case 2:case"end":return re.stop()}},fe,this)})),function(){return qr.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(Qr=(0,v.A)(m().mark(function fe(X){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(re=this._consumers.get(X)){ae.next=1;break}return ae.abrupt("return");case 1:return ae.abrupt("return",re.getStats());case 2:case"end":return ae.stop()}},fe,this)})),function(fe){return Qr.apply(this,arguments)})},{key:"getTransportRemoteStats",value:(vn=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe;return m().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(ie=X.participantId){De.next=1;break}return De.abrupt("return");case 1:return De.next=2,this._socketRequest("getTransportStats",{peerId:ie});case 2:return le=De.sent,Pe={availableBitrate:le==null||(re=le.recv)===null||re===void 0?void 0:re.availableBitrate,targetBitrate:le==null||(ae=le.recv)===null||ae===void 0?void 0:ae.targetBitrate},De.abrupt("return",Pe);case 3:case"end":return De.stop()}},fe,this)})),function(fe){return vn.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(Hn=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe;return m().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return re=X.uplink,ae=X.downlink,ie=X.rtt,le=X.secret,he.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",re,ae,ie),De.prev=1,De.next=2,this._socketRequest("applyNetworkThrottle",{uplink:re,downlink:ae,rtt:ie,secret:le});case 2:De.next=4;break;case 3:De.prev=3,Pe=De.catch(1),he.error("applyNetworkThrottle() | failed:%o",Pe),ft.dispatch(Wn({type:"error",text:"Error applying network throttle: ".concat(Pe)}));case 4:case"end":return De.stop()}},fe,this,[[1,3]])})),function(fe){return Hn.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(qt=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le;return m().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return re=X.silent,ae=re!==void 0&&re,ie=X.secret,he.debug("resetNetworkThrottle()"),Pe.prev=1,Pe.next=2,this._socketRequest("resetNetworkThrottle",{secret:ie});case 2:Pe.next=4;break;case 3:Pe.prev=3,le=Pe.catch(1),ae||(he.error("resetNetworkThrottle() | failed:%o",le),ft.dispatch(Wn({type:"error",text:"Error resetting network throttle: ".concat(le)})));case 4:case"end":return Pe.stop()}},fe,this,[[1,3]])})),function(fe){return qt.apply(this,arguments)})},{key:"createProducerTransport",value:(Tn=(0,v.A)(m().mark(function fe(X,re){var ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt=this;return m().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:le=X.id,Pe=X.iceParameters,De=X.iceCandidates,ze=X.dtlsParameters,Et=X.sctpParameters,kt=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"Creating Send Transport",span:re||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:le,iceParameters:Pe,iceCandidates:De,dtlsParameters:ze,sctpParameters:Et,iceServers:this._iceServers}),zt=new Map,mn=new Map,an=!1,hn=!1,ke=!1,this._sendTransportInternal=setInterval((0,v.A)(m().mark(function ht(){var At,We,Mt,rn,Vt,ln,en,yn,cn,Kt,dr,tr;return m().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return At=[],Ct.prev=1,Ct.next=2,mt._sendTransport.getStats();case 2:We=Ct.sent,Ct.next=4;break;case 3:return Ct.prev=3,tr=Ct.catch(1),console.error("Error fetching stats:",tr),Ct.abrupt("return");case 4:try{We.forEach(function(En){try{if(En.type==="outbound-rtp"){var br={qualityLimitationReason:En.qualityLimitationReason};zt.set(En.id,br)}if(En.type==="remote-inbound-rtp"&&En.totalRoundTripTime&&En.roundTripTimeMeasurements){var $r=mn.get(En.id);$r||($r={totalRoundTripTime:0,roundTripTimeMeasurements:0},mn.set(En.id,$r));var Xr=En.roundTripTimeMeasurements-$r.roundTripTimeMeasurements,ka=En.totalRoundTripTime-$r.totalRoundTripTime;if(Xr>0&&ka>0){var Aa=ka/Xr;$r.totalRoundTripTime=En.totalRoundTripTime,$r.roundTripTimeMeasurements=En.roundTripTimeMeasurements,At.push(1e3*Aa)}}}catch{}});try{Mt=At.reduce(function(En,br){return En+br},0)/At.length,Number.isNaN(Mt)||(jt||(jt=Mt),rn=(0,b.A)(zt.values()).some(function(En){return En.qualityLimitationReason==="bandwidth"}),Vt=(0,b.A)(zt.values()).some(function(En){return En.qualityLimitationReason==="cpu"}),!an&&rn&&Mt-jt>50?((ln=mt._videosdkLogs)===null||ln===void 0||ln.pushLogs({logType:"WARN",attributes:{avgRoundTripTimeInMs:Mt,ewmaRttInMs:jt},logText:"Send Transport Congestion detected, the network is bandwidth limited and the round trip time is increasing (ewmaRtt: ".concat(jt,", avgRoundTripTime: ").concat(Mt,")")}),an=!0,mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"congestion",state:"detected",timestamp:new Date().getTime()})):an&&Mt-jt<30&&((en=mt._videosdkLogs)===null||en===void 0||en.pushLogs({logType:"INFO",attributes:{avgRoundTripTimeInMs:Mt,ewmaRttInMs:jt},logText:"Send Transport  Congestion resolved, the round trip time is back to normal (ewmaRtt: ".concat(jt,", avgRoundTripTime: ").concat(Mt,")")}),an=!1,mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"congestion",state:"resolved",timestamp:new Date().getTime()})),rn&&!ke?((yn=mt._videosdkLogs)===null||yn===void 0||yn.pushLogs({logType:"WARN",logText:"Bandwidth Limitation detected"}),mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"bandwidth",state:"detected",timestamp:new Date().getTime()}),ke=!0):!rn&&ke&&((cn=mt._videosdkLogs)===null||cn===void 0||cn.pushLogs({logType:"INFO",logText:"Bandwidth Limitation resolved"}),mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"bandwidth",state:"resolved",timestamp:new Date().getTime()}),ke=!1),jt=.9*jt+.1*Mt,!hn&&Vt?(mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"cpu",state:"detected",timestamp:new Date().getTime()}),(Kt=mt._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logType:"WARN",logText:"CPU Limitation detected"}),hn=!0):hn&&!Vt&&(mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"cpu",state:"resolved",timestamp:new Date().getTime()}),(dr=mt._videosdkLogs)===null||dr===void 0||dr.pushLogs({logType:"INFO",logText:"CPU Limitation resolved"}),hn=!1))}catch{}}catch{}case 5:case"end":return Ct.stop()}},ht,null,[[1,3]])})),1e3),this._sendTransport.on("connect",function(ht,At,We){var Mt,rn=ht.dtlsParameters;(Mt=mt._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:kt,status:1}),mt._socketRequest("connectWebRtcTransport",{transportId:mt._sendTransport.id,dtlsParameters:rn}).then(function(){At()}).catch(function(Vt){We(Vt)})}),this._sendTransport.on("produce",function(){var ht=(0,v.A)(m().mark(function At(We,Mt,rn){var Vt,ln,en,yn,cn,Kt,dr,tr;return m().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Vt=We.kind,ln=We.rtpParameters,en=We.appData,Ct.prev=1,(yn=mt._openTelemetry)===null||yn===void 0||yn.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:kt,status:1}),Ct.next=2,mt._socketRequest("produce",{transportId:mt._sendTransport.id,kind:Vt,rtpParameters:ln,appData:en});case 2:cn=Ct.sent,Kt=cn.id,Mt({id:Kt}),Ct.next=4;break;case 3:Ct.prev=3,tr=Ct.catch(1),(dr=mt._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:tr.message}}),rn(tr);case 4:case"end":return Ct.stop()}},At,null,[[1,3]])}));return function(At,We,Mt){return ht.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var ht=(0,v.A)(m().mark(function At(We,Mt,rn){var Vt,ln,en,yn,cn,Kt,dr,tr;return m().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Vt=We.sctpStreamParameters,ln=We.label,en=We.protocol,yn=We.appData,Ct.prev=1,Ct.next=2,mt._socketRequest("produceData",{transportId:mt._sendTransport.id,sctpStreamParameters:Vt,label:ln,protocol:en,appData:yn});case 2:cn=Ct.sent,Kt=cn.id,Mt({id:Kt}),Ct.next=4;break;case 3:Ct.prev=3,tr=Ct.catch(1),(dr=mt._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:tr.message}}),rn(tr);case 4:case"end":return Ct.stop()}},At,null,[[1,3]])}));return function(At,We,Mt){return ht.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(){var ht=(0,v.A)(m().mark(function At(We){var Mt,rn,Vt,ln,en,yn;return m().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return en=Array,cn.next=1,mt._sendTransport.getStats();case 1:yn=cn.sent,(rn=en.from.call(en,yn).filter(function(Kt){var dr=(0,_.A)(Kt,2)[1];return dr.type==="local-candidate"||dr.type==="remote-candidate"}).map(function(Kt){return(0,_.A)(Kt,2)[1]})).length>0&&((Vt=mt._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:'Send Trasnport State Change "'.concat(We,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(rn)}})),We==="connected"&&mt.emitMeetingStateChange(Di),(Mt=mt._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(We),span:kt,status:1}),We==="failed"&&((ln=mt._videosdkLogs)===null||ln===void 0||ln.pushLogs({logText:"ERROR_MEETING_MEDIA_CONNECTION_FAILED",logType:"ERROR",attributes:{error:"Unable to connect to the meeting or media. Please check your network connection, ensure your firewall or security settings are not blocking the application, or try connecting using a different network."},dashboardLog:!0}),mt.restartIce()),mt._transportState=We;case 2:case"end":return cn.stop()}},At)}));return function(At){return ht.apply(this,arguments)}}()),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:kt,status:1,message:"Send Transport Created Successfully"});case 1:case"end":return Nt.stop()}},fe,this)})),function(fe,X){return Tn.apply(this,arguments)})},{key:"createConsumerTransport",value:(_t=(0,v.A)(m().mark(function fe(X,re){var ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt=this;return m().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:le=X.id,Pe=X.iceParameters,De=X.iceCandidates,ze=X.dtlsParameters,Et=X.sctpParameters,kt=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"Creating Recieve Transport",span:re||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:le,iceParameters:Pe,iceCandidates:De,dtlsParameters:ze,sctpParameters:Et,iceServers:this._iceServers}),this._recvTransport.on("connect",function(ht,At,We){var Mt,rn=ht.dtlsParameters;(Mt=mt._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:kt,status:1}),mt._socketRequest("connectWebRtcTransport",{transportId:mt._recvTransport.id,dtlsParameters:rn}).then(function(){At()}).catch(function(Vt){We(Vt)})}),this._recvTransport.on("connectionstatechange",function(){var ht=(0,v.A)(m().mark(function At(We){var Mt,rn,Vt,ln,en;return m().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:return ln=Array,yn.next=1,mt._recvTransport.getStats();case 1:en=yn.sent,(rn=ln.from.call(ln,en).filter(function(cn){var Kt=(0,_.A)(cn,2)[1];return Kt.type==="local-candidate"||Kt.type==="remote-candidate"}).map(function(cn){return(0,_.A)(cn,2)[1]})).length>0&&((Vt=mt._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:'Recv Trasnport State Change "'.concat(We,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(rn)}})),(Mt=mt._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(We),span:kt,status:1}),We==="failed"&&mt.restartIce(),mt._transportState=We;case 2:case"end":return yn.stop()}},At)}));return function(At){return ht.apply(this,arguments)}}()),zt=0,mn=this._metrics.addNewProbe(this._recvTransport,"transport"),jt=new Map,an=new Map,hn=new Map,ke=new Set,mn.onStatsCollected=function(ht){try{var At=function(rn,Vt,ln){mt._stats.consumerStats||(mt._stats.consumerStats={});var en=Vt.appData.peerId;mt._stats.consumerStats[en]||(mt._stats.consumerStats[en]={}),mt._stats.consumerStats[en][ln]||(mt._stats.consumerStats[en][ln]=[]),mt._latestStats[Vt.track.id.replace(/[{}]/g,"")]=[rn],zt%5==0&&mt._stats.consumerStats[en][ln].push(rn)},We=function(rn){ht[rn].forEach(function(Vt){var ln,en=La(mt._consumers);try{for(en.s();!(ln=en.n()).done;){var yn=(0,_.A)(ln.value,2),cn=(yn[0],yn[1]),Kt=cn.track.id.replace(/[{}]/g,"");if(Kt===Vt.trackId){var dr=cn.appData.share?cn.kind==="audio"?"shareAudio":"share":cn.kind;if(At(Vt,cn,dr),dr==="audio"||dr==="shareAudio")return;if(Vt.bitrate>0)jt.has(Kt)&&jt.delete(Kt);else{var tr=jt.get(Kt);tr?tr.detected+5e3<Date.now()&&mt._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"stuck",peerId:cn.appData.peerId,streamId:Kt}):jt.set(Kt,{detected:Date.now()})}var Ct=Vt.trackId,En=Vt.freezeCount;if(!Ct||En===void 0)return;var br=an.get(Ct);if(br===void 0)return void an.set(Ct,En);if(En>br)mt._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"freeze-detected",peerId:cn.appData.peerId,streamId:Kt}),hn.set(Ct,Date.now()),ke.delete(Ct);else{var $r=hn.get(Ct);$r&&!ke.has(Ct)&&Date.now()-$r>5e3&&(mt._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"freeze-resolved",peerId:cn.appData.peerId,streamId:Kt}),ke.add(Ct))}an.set(Ct,En)}}}catch(Xr){en.e(Xr)}finally{en.f()}})};We("audio"),We("video"),zt++}catch(rn){var Mt;(Mt=mt._videosdkLogs)===null||Mt===void 0||Mt.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:rn.message}}),console.log("CONSUMER CATCH",rn)}},mn.start(),this._recvTransport.observer.on("close",function(){mn.stop(),mt._metrics.removeExistingProbe(mn)}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:kt,status:1,message:"Recieve Transport Created Successfully"});case 1:case"end":return Nt.stop()}},fe,this)})),function(fe,X){return _t.apply(this,arguments)})},{key:"emitMeetingStateChange",value:function(fe){this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:fe}),this._meetingConnectionState=fe}},{key:"joinRoom",value:(Dt=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt,Nt,ht,At,We,Mt,rn,Vt,ln,en,yn,cn;return m().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return he.debug("joinRoom()"),Kt.prev=1,De=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new Sr.pF({handlerName:this._handlerName}),Kt.next=2,this._socketRequest("getRouterRtpCapabilities");case 2:return ze=Kt.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(ze.headerExtensions=(Et=ze.headerExtensions)===null||Et===void 0?void 0:Et.filter(function(dr){return dr.uri!="urn:3gpp:video-orientation"})):ze.headerExtensions=(kt=ze.headerExtensions)===null||kt===void 0?void 0:kt.filter(function(dr){return dr.uri!="urn:3gpp:video-orientation"}),Kt.next=3,this._mediasoupDevice.load({routerRtpCapabilities:ze});case 3:if((re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:De,status:1,attributes:{routerRtpCapabilities:JSON.stringify(ze).toString()},message:"Router Capabilities Loaded"}),!this._produce){Kt.next=5;break}return Kt.next=4,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 4:zt=Kt.sent,this.createProducerTransport(zt,this._joinSpan);case 5:if(!this._consume){Kt.next=7;break}return Kt.next=6,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 6:mn=Kt.sent,this.createConsumerTransport(mn,this._joinSpan);case 7:return Kt.next=8,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(ae=this._mediasoupDevice)===null||ae===void 0?void 0:ae.rtpCapabilities,sctpCapabilities:(ie=this._mediasoupDevice)===null||ie===void 0?void 0:ie.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData});case 8:jt=Kt.sent,an=jt.peers,hn=jt.poll,ke=jt.messages,ft.dispatch(wn("connected")),(le=this._openTelemetry)===null||le===void 0||le.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:an,poll:hn,messages:ke,baseUrl:this._baseUrl}),ft.dispatch(Bs()),ft.dispatch(Wn({text:"You are in the room!",timeout:3e3})),mt=La(an);try{for(mt.s();!(Nt=mt.n()).done;)ht=Nt.value,At=mi(xa(xa({},ht),{},{consumers:[],dataConsumers:[]})),ft.dispatch(At),this._eventEmitter.emit(At.type,At.payload)}catch(dr){mt.e(dr)}finally{mt.f()}this._produce&&(ft.dispatch(vr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((We=this._openTelemetry)===null||We===void 0||We.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(dr){dr.stop()})),Mt=$n(),this._webcamEnabled&&(!Mt||Mt.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((rn=this._openTelemetry)===null||rn===void 0||rn.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(dr){dr.stop()}))),window.SHOW_INFO&&(Vt=ft.getState(),ln=Vt.me,ft.dispatch(jr(ln.id))),(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),Kt.next=10;break;case 9:Kt.prev=9,cn=Kt.catch(1),he.error("joinRoom() failed:%o",cn),(en=this._videosdkLogs)===null||en===void 0||en.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:cn.message}}),(yn=this._openTelemetry)===null||yn===void 0||yn.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(cn)}),ft.dispatch(Wn({type:"error",text:"Could not join the room: ".concat(cn)})),this.close({sendLeft:!0});case 10:case"end":return Kt.stop()}},fe,this,[[1,9]])})),function(){return Dt.apply(this,arguments)})},{key:"switchingRoom",value:(St=(0,v.A)(m().mark(function fe(X){var re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt,Nt,ht,At;return m().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"switchingRoom() start",attributes:{"room.id":X,"peer.id":this._peerId,display_name:this._displayName}}),We.prev=1,Et=(ie=this._openTelemetry)===null||ie===void 0?void 0:ie.trace({name:"switch room join request",parentSpan:ae}),We.next=2,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(le=this._mediasoupDevice)===null||le===void 0?void 0:le.rtpCapabilities,sctpCapabilities:(Pe=this._mediasoupDevice)===null||Pe===void 0?void 0:Pe.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData,switchingRoom:!0});case 2:kt=We.sent,zt=kt.peers,mn=kt.poll,jt=kt.messages,(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:Et,status:1,message:"Join request successful in switched room"}),ft.dispatch(wn("connected")),this._eventEmitter.emit("MEETING_JOINED",{switchRoomId:X,peers:zt,poll:mn,messages:jt,baseUrl:this._baseUrl}),ft.dispatch(Bs()),ft.dispatch(Wn({text:"You are in the room!",timeout:3e3})),an=La(zt);try{for(an.s();!(hn=an.n()).done;)ke=hn.value,mt=mi(xa(xa({},ke),{},{consumers:[],dataConsumers:[]})),ft.dispatch(mt),this._eventEmitter.emit(mt.type,mt.payload)}catch(Mt){an.e(Mt)}finally{an.f()}(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:ae,status:1,message:"Room switch completed successfully"}),We.next=4;break;case 3:We.prev=3,At=We.catch(1),he.error("joinRoom() failed:%o",At),(Nt=this._videosdkLogs)===null||Nt===void 0||Nt.pushLogs({logText:"Error Could not join the switched room",logType:"ERROR",attributes:{error:At.message}}),(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:ae,status:2,message:"Room switch failed: ".concat(At.message)}),ft.dispatch(Wn({type:"error",text:"Could not join the switched room: ".concat(At)})),this.close({sendLeft:!0});case 4:case"end":return We.stop()}},fe,this,[[1,3]])})),function(fe){return St.apply(this,arguments)})},{key:"_updateMics",value:(rt=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt=arguments;return m().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return re=mt.length>0&&mt[0]!==void 0?mt[0]:void 0,this._mics=new Map,he.debug("_updateMics() |"),ae=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"_updateMics() Calling for Getting System Mic list",span:re||null}),Nt.prev=1,Nt.next=2,navigator.mediaDevices.enumerateDevices();case 2:Pe=Nt.sent,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting System Mic list",span:ae,status:1,attributes:{systemDevice:Pe?JSON.stringify(Pe):"Device not found"}}),De=La(Pe);try{for(De.s();!(ze=De.n()).done;)(Et=ze.value).kind=="audioinput"&&this._mics.set(Et.deviceId,Et)}catch(ht){De.e(ht)}finally{De.f()}kt=Array.from(this._mics.values()),zt=kt.length,mn=this._mic.device?this._mic.device.deviceId:void 0,zt===0?this._mic.device=null:this._mics.has(mn)||(this._mic.device=kt[0]),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:1,message:"Update Mic"}),Nt.next=5;break;case 3:if(Nt.prev=3,!((ke=Nt.catch(1))instanceof TypeError)){Nt.next=5;break}if(ke.name!=="TypeError"){Nt.next=4;break}throw an=pr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(an),(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({span:ae,status:2,message:"Error in updateMics() :: ".concat(an.message)}),new Error(an.message);case 4:throw(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ae,status:2,message:"Error in updateMics() :: ".concat(ke.message)}),new Error(ke.message);case 5:case"end":return Nt.stop()}},fe,this,[[1,3]])})),function(){return rt.apply(this,arguments)})},{key:"_updateWebcams",value:(Oe=(0,v.A)(m().mark(function fe(){var X,re,ae,ie,le,Pe,De,ze,Et,kt,zt,mn,jt,an,hn,ke,mt,Nt=arguments;return m().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return re=Nt.length>0&&Nt[0]!==void 0?Nt[0]:void 0,he.debug("_updateWebcams()"),this._webcams=new Map,he.debug("_updateWebcams() | calling enumerateDevices()"),ae=(X=this._openTelemetry)===null||X===void 0?void 0:X.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",span:re||null}),ht.prev=1,ht.next=2,navigator.mediaDevices.enumerateDevices();case 2:Pe=ht.sent,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting System Webcam list",span:ae,status:1,attributes:{systemDevice:Pe?JSON.stringify(Pe):"Device not found"}}),De=La(Pe),ht.prev=3,De.s();case 4:if((ze=De.n()).done){ht.next=7;break}if((Et=ze.value).kind==="videoinput"){ht.next=5;break}return ht.abrupt("continue",6);case 5:this._webcams.set(Et.deviceId,Et);case 6:ht.next=4;break;case 7:ht.next=9;break;case 8:ht.prev=8,ke=ht.catch(3),De.e(ke);case 9:return ht.prev=9,De.f(),ht.finish(9);case 10:kt=Array.from(this._webcams.values()),zt=kt.length,(mn=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=mn),he.debug("_updateWebcams() [webcams:%o]",kt),zt===0?this._webcam.device=null:this._webcams.has(mn)||(this._webcam.device=kt[0]),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:1,message:"Update Webcam"}),ft.dispatch(yr(this._webcams.size>1)),ht.next=13;break;case 11:if(ht.prev=11,!((mt=ht.catch(1))instanceof TypeError)){ht.next=13;break}if(mt.name!=="TypeError"){ht.next=12;break}throw an=pr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(an),(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({span:ae,status:2,message:"Error in updateWebcams() :: ".concat(an.message)}),new Error(an.message);case 12:throw(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ae,status:2,message:"Error in updateWebcams() :: ".concat(mt.message)}),new Error(mt.message);case 13:case"end":return ht.stop()}},fe,this,[[1,11],[3,8,9,10]])})),function(){return Oe.apply(this,arguments)})},{key:"_getWebcamType",value:function(fe){return/(back|rear)/i.test(fe.label)?(he.debug("_getWebcamType() | it seems to be a back camera"),"back"):(he.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(oe=(0,v.A)(m().mark(function fe(X){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!X.paused){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._socketRequest("pauseConsumer",{consumerId:X.id});case 2:X.pause(),ft.dispatch(ls(X.id,"local")),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),he.error("_pauseConsumer() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:ae.message}}),ft.dispatch(Wn({type:"error",text:"Error pausing Consumer: ".concat(ae)}));case 4:case"end":return ie.stop()}},fe,this,[[1,3]])})),function(fe){return oe.apply(this,arguments)})},{key:"_resumeConsumer",value:(Y=(0,v.A)(m().mark(function fe(X){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(X.paused){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._socketRequest("resumeConsumer",{consumerId:X.id});case 2:X.resume(),ft.dispatch(Xi(X.id,"local")),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),he.error("_resumeConsumer() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:ae.message}}),ft.dispatch(Wn({type:"error",text:"Error resuming Consumer: ".concat(ae)}));case 4:case"end":return ie.stop()}},fe,this,[[1,3]])})),function(fe){return Y.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(G=(0,v.A)(m().mark(function fe(){var X=this;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!this._externalVideoStream){re.next=1;break}return re.abrupt("return",this._externalVideoStream);case 1:if(!(this._externalVideo.readyState<3)){re.next=2;break}return re.next=2,new Promise(function(ae){return X._externalVideo.addEventListener("canplay",ae)});case 2:if(!this._externalVideo.captureStream){re.next=3;break}this._externalVideoStream=this._externalVideo.captureStream(),re.next=5;break;case 3:if(!this._externalVideo.mozCaptureStream){re.next=4;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),re.next=5;break;case 4:throw new Error("video.captureStream() not supported");case 5:return re.abrupt("return",this._externalVideoStream);case 6:case"end":return re.stop()}},fe,this)})),function(){return G.apply(this,arguments)})},{key:"toggleE2EEEnabled",value:(te=(0,v.A)(m().mark(function fe(X){return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!this.e2eeManager){re.next=1;break}this._peerId&&this.e2eeManager.setParticipantCryptorEnabled(X,this._peerId),this.isE2EEEnabled=X,re.next=2;break;case 1:throw Error("e2ee not configured, please set e2ee settings within the room options");case 2:case"end":return re.stop()}},fe,this)})),function(fe){return te.apply(this,arguments)})},{key:"_emitError",value:function(fe){this._eventEmitter.emit("ERROR",fe)}}],[{key:"init",value:function(fe){ft=fe.store}}]);var te,G,Y,oe,Oe,rt,St,Dt,_t,Tn,qt,Hn,vn,Qr,qr,ia,Jr,Rs,ks,es,Ys,Qs,oo,Li,Zi,co,oc,Fo,$i,Us,To,cc,Cs,qo,Wi,Ts,xc,Po,Vo,lo,No,ki,fi,ds,ri,gi,Js,Gi,uo,vi,Xs,Hs,Ao,ps,po,Hc,_a,Oo,Ps,lc,Zo,ts,Do,mo,ns,Ns,a,l,O,V,ee,pe,Ie,st,dt,Gt,Mn,Fn,Qn,xr,va,Na,Ja,yi,$o,Fc,ho,Fs,uc,ms,Ia,rs,qs,eo,Va,Wo,dc,fo,Rc,hs,si,qc,Ll,Il,jl,Vc,oi,Go,Ko,Yo,Ga,Qo,pc,Bl,zl,cu,Zc}();function Ho(te){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,v.A)(m().mark(function te(G){var Y,oe,Oe,rt,St,Dt,_t=this;return m().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:if(Tn.prev=0,this.e2eeManager){Tn.next=2;break}return oe=sl,Oe=G,Tn.next=1,ac();case 1:rt=Tn.sent,St={keyProvider:Oe,worker:rt},this.e2eeManager=new oe(St),this.e2eeManager.on(xs.KS.ParticipantEncryptionStatusChanged,function(qt){_t.isE2EEEnabled=qt}),this.e2eeManager.on(xs.KS.E2EEStateChange,function(qt){_t._eventEmitter.emit("E2EE_STATE_CHANGE",qt)}),(Y=this.e2eeManager)===null||Y===void 0||Y.setup(this),this.toggleE2EEEnabled(!0);case 2:Tn.next=4;break;case 3:throw Tn.prev=3,Dt=Tn.catch(0),console.error("Error setting up E2EE: ",Dt),new Error("Error setting up E2EE: "+Dt.message);case 4:case"end":return Tn.stop()}},te,this,[[0,3]])}))).apply(this,arguments)}},2073:function(I,k,d){var E;I.exports=(E=d(9021),d(7165),E.pad.AnsiX923={pad:function(_,b){var T=_.sigBytes,v=4*b,f=v-T%v,R=T+f-1;_.clamp(),_.words[R>>>2]|=f<<24-R%4*8,_.sigBytes+=f},unpad:function(_){var b=255&_.words[_.sigBytes-1>>>2];_.sigBytes-=b}},E.pad.Ansix923)},2107:(I,k,d)=>{d.d(k,{kR:()=>_,nI:()=>E,wZ:()=>b});var E={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER",SEND_AND_RECV:"SEND_AND_RECV",SIGNALLING_ONLY:"SIGNALLING_ONLY",RECV_ONLY:"RECV_ONLY"};function _(T){return T===E.CONFERENCE||T===E.SEND_AND_RECV}function b(T){return T===E.VIEWER||T===E.SIGNALLING_ONLY}},2109:function(I,k,d){var E;(function(_,b){var T,v="user-agent",f="",R="function",g="undefined",F="object",m="string",P="browser",S="cpu",H="device",x="engine",y="os",w="result",p="name",C="type",A="vendor",M="version",j="architecture",U="major",z="model",W="console",Z="mobile",ce="tablet",J="smarttv",Ee="wearable",Ce="xr",Re="embedded",ye="inapp",Te="brands",He="formFactors",we="fullVersionList",Je="platform",Be="platformVersion",nt="bitness",Qe="sec-ch-ua",Ze=Qe+"-full-version-list",Ht=Qe+"-arch",or=Qe+"-"+nt,Nr=Qe+"-form-factors",jn=Qe+"-"+Z,cr=Qe+"-"+z,Gn=Qe+"-"+Je,Un=Gn+"-version",Le=[Te,we,Z,z,Je,Be,j,He,nt],je="Amazon",Ge="Apple",Qt="ASUS",Ft="BlackBerry",xt="Google",pn="Huawei",Ln="Lenovo",Bt="Honor",lr="LG",Fr="Microsoft",kr="Motorola",Vr="Nvidia",Hr="OnePlus",Or="OPPO",Gr="Samsung",ga="Sharp",ta="Sony",oa="Xiaomi",Nn="Zebra",Ha="Chrome",Ca="Chromium",Kr="Chromecast",hr="Edge",at="Firefox",ut="Opera",$t="Facebook",Tt="Sogou",tn="Mobile ",Xt=" Browser",Xe="Windows",Sn=typeof _!==g,Rn=Sn&&_.navigator?_.navigator:b,Zn=Rn&&Rn.userAgentData?Rn.userAgentData:b,ur=function(sn){for(var $n={},Bn=0;Bn<sn.length;Bn++)$n[sn[Bn].toUpperCase()]=sn[Bn];return $n},Wt=function(sn,$n){if(typeof sn===F&&sn.length>0){for(var Bn in sn)if(bn($n)==bn(sn[Bn]))return!0;return!1}return!!Pn(sn)&&bn($n)==bn(sn)},bt=function(sn,$n){for(var Bn in sn)return/^(browser|cpu|device|engine|os)$/.test(Bn)||!!$n&&bt(sn[Bn])},Pn=function(sn){return typeof sn===m},kn=function(sn){if(!sn)return b;for(var $n=[],Bn=Dr(/\\?\"/g,sn).split(","),nr=0;nr<Bn.length;nr++)if(Bn[nr].indexOf(";")>-1){var wn=qn(Bn[nr]).split(";v=");$n[nr]={brand:wn[0],version:wn[1]}}else $n[nr]=qn(Bn[nr]);return $n},bn=function(sn){return Pn(sn)?sn.toLowerCase():sn},Ar=function(sn){return Pn(sn)?Dr(/[^\d\.]/g,sn).split(".")[0]:b},Sr=function(sn){for(var $n in sn){var Bn=sn[$n];typeof Bn==F&&Bn.length==2?this[Bn[0]]=Bn[1]:this[Bn]=b}return this},Dr=function(sn,$n){return Pn($n)?$n.replace(sn,f):$n},Xn=function(sn){return Dr(/\\?\"/g,sn)},qn=function(sn,$n){if(Pn(sn))return sn=Dr(/^\s\s*/,sn),typeof $n===g?sn:sn.substring(0,500)},ma=function(sn,$n){if(sn&&$n)for(var Bn,nr,wn,On,jr,vr,yr=0;yr<$n.length&&!jr;){var An=$n[yr],Br=$n[yr+1];for(Bn=nr=0;Bn<An.length&&!jr&&An[Bn];)if(jr=An[Bn++].exec(sn))for(wn=0;wn<Br.length;wn++)vr=jr[++nr],typeof(On=Br[wn])===F&&On.length>0?On.length===2?typeof On[1]==R?this[On[0]]=On[1].call(this,vr):this[On[0]]=On[1]:On.length>=3&&(typeof On[1]!==R||On[1].exec&&On[1].test?On.length==3?this[On[0]]=vr?vr.replace(On[1],On[2]):b:On.length==4?this[On[0]]=vr?On[3].call(this,vr.replace(On[1],On[2])):b:On.length>4&&(this[On[0]]=vr?On[3].apply(this,[vr.replace(On[1],On[2])].concat(On.slice(4))):b):On.length>3?this[On[0]]=vr?On[1].apply(this,On.slice(2)):b:this[On[0]]=vr?On[1].call(this,vr,On[2]):b):this[On]=vr||b;yr+=2}},ca=function(sn,$n){for(var Bn in $n)if(typeof $n[Bn]===F&&$n[Bn].length>0){for(var nr=0;nr<$n[Bn].length;nr++)if(Wt($n[Bn][nr],sn))return Bn==="?"?b:Bn}else if(Wt($n[Bn],sn))return Bn==="?"?b:Bn;return $n.hasOwnProperty("*")?$n["*"]:sn},Ta={ME:"4.90","NT 3.51":"3.51","NT 4.0":"4.0",2e3:["5.0","5.01"],XP:["5.1","5.2"],Vista:"6.0",7:"6.1",8:"6.2",8.1:"6.3",10:["6.4","10.0"],NT:""},Da={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":b},ss={Chrome:"Google Chrome",Edge:"Microsoft Edge","Edge WebView2":"Microsoft Edge WebView2","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"},ai={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[M,[p,tn+"Chrome"]],[/webview.+edge\/([\w\.]+)/i],[M,[p,hr+" WebView"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[M,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,M],[/opios[\/ ]+([\w\.]+)/i],[M,[p,ut+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[M,[p,ut+" GX"]],[/\bopr\/([\w\.]+)/i],[M,[p,ut]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[M,[p,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[M,[p,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[p,M],[/quark(?:pc)?\/([-\w\.]+)/i],[M,[p,"Quark"]],[/\bddg\/([\w\.]+)/i],[M,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[M,[p,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[M,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[M,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[M,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[M,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[M,[p,"Smart "+Ln+Xt]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure"+Xt],M],[/\bfocus\/([\w\.]+)/i],[M,[p,at+" Focus"]],[/\bopt\/([\w\.]+)/i],[M,[p,ut+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[M,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[M,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[M,[p,ut+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[M,[p,"MIUI"+Xt]],[/fxios\/([\w\.-]+)/i],[M,[p,tn+at]],[/\bqihoobrowser\/?([\w\.]*)/i],[M,[p,"360"]],[/\b(qq)\/([\w\.]+)/i],[[p,/(.+)/,"$1Browser"],M],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+Xt],M],[/samsungbrowser\/([\w\.]+)/i],[M,[p,Gr+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[M,[p,Tt+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,Tt+" Mobile"],M],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[p,M],[/(lbbrowser|rekonq)/i],[p],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[M,p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,$t],M,[C,ye]],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat|klarna)[\/ ]([-\w\.]+)/i],[p,M,[C,ye]],[/\bgsa\/([\w\.]+) .*safari\//i],[M,[p,"GSA"],[C,ye]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[M,[p,"TikTok"],[C,ye]],[/\[(linkedin)app\]/i],[p,[C,ye]],[/(chromium)[\/ ]([-\w\.]+)/i],[p,M],[/headlesschrome(?:\/([\w\.]+)| )/i],[M,[p,Ha+" Headless"]],[/wv\).+chrome\/([\w\.]+).+edgw\//i],[M,[p,hr+" WebView2"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,Ha+" WebView"],M],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[M,[p,"Android"+Xt]],[/chrome\/([\w\.]+) mobile/i],[M,[p,tn+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,M],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[M,[p,tn+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[p,tn+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[M,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[M,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[p,M],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[p,tn+at],M],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],M],[/(wolvic|librewolf)\/([\w\.]+)/i],[p,M],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[M,[p,at+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[p,[M,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[p,[M,/[^\d\.]+./,f]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[j,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[j,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[j,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[j,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[j,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[j,/ower/,f,bn]],[/ sun4\w[;\)]/i],[[j,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[j,bn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[z,[A,Gr],[C,ce]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr]|browser)[-\w]+)/i,/sec-(sgh\w+)/i],[z,[A,Gr],[C,Z]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[z,[A,Ge],[C,Z]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[z,[A,Ge],[C,ce]],[/(macintosh);/i],[z,[A,Ge]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[z,[A,ga],[C,Z]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[z,[A,Bt],[C,ce]],[/honor([-\w ]+)[;\)]/i],[z,[A,Bt],[C,Z]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[z,[A,pn],[C,ce]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[z,[A,pn],[C,Z]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[z,/_/g," "],[A,oa],[C,ce]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[z,/_/g," "],[A,oa],[C,Z]],[/droid.+; (cph2[3-6]\d[13579]|((gm|hd)19|(ac|be|in|kb)20|(d[en]|eb|le|mt)21|ne22)[0-2]\d|p[g-k]\w[1m]10)\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[z,[A,Hr],[C,Z]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[z,[A,Or],[C,Z]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[z,[A,ca,{OnePlus:["203","304","403","404","413","415"],"*":Or}],[C,ce]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[z,[A,"BLU"],[C,Z]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[z,[A,"Vivo"],[C,Z]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[z,[A,"Realme"],[C,Z]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[z,[A,Ln],[C,ce]],[/lenovo[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i],[z,[A,Ln],[C,Z]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ]([\w\s]+)(\)| bui)/i,/((?:moto(?! 360)[-\w\(\) ]+|xt\d{3,4}[cgkosw\+]?[-\d]*|nexus 6)(?= bui|\)))/i],[z,[A,kr],[C,Z]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[z,[A,kr],[C,ce]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[z,[A,lr],[C,ce]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch|webos))(\w+)/i,/\blg-?([\d\w]+) bui/i],[z,[A,lr],[C,Z]],[/(nokia) (t[12][01])/i],[A,z,[C,ce]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[z,/_/g," "],[C,Z],[A,"Nokia"]],[/(pixel (c|tablet))\b/i],[z,[A,xt],[C,ce]],[/droid.+;(?: google)? (g(01[13]a|020[aem]|025[jn]|1b60|1f8f|2ybb|4s1m|576d|5nz6|8hhn|8vou|a02099|c15s|d1yq|e2ae|ec77|gh2x|kv4x|p4bc|pj41|r83y|tt9q|ur25|wvk6)|pixel[\d ]*a?( pro)?( xl)?( fold)?( \(5g\))?)( bui|\))/i],[z,[A,xt],[C,Z]],[/(google) (pixelbook( go)?)/i],[A,z],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-\w\w\d\d)(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[z,[A,ta],[C,Z]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[z,"Xperia Tablet"],[A,ta],[C,ce]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[z,[A,je],[C,ce]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[z,/(.+)/g,"Fire Phone $1"],[A,je],[C,Z]],[/(playbook);[-\w\),; ]+(rim)/i],[z,A,[C,ce]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[z,[A,Ft],[C,Z]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[z,[A,Qt],[C,ce]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[z,[A,Qt],[C,Z]],[/(nexus 9)/i],[z,[A,"HTC"],[C,ce]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[A,[z,/_/g," "],[C,Z]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[z,[A,"TCL"],[C,ce]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[z,[A,"TCL"],[C,Z]],[/(itel) ((\w+))/i],[[A,bn],z,[C,ca,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[z,[A,"Acer"],[C,ce]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[z,[A,"Meizu"],[C,Z]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[z,[A,"Ulefone"],[C,Z]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[z,[A,"Energizer"],[C,Z]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[z,[A,"Cat"],[C,Z]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[z,[A,"Smartfren"],[C,Z]],[/droid.+; (a(in)?(0(15|59|6[35])|142)p?)/i],[z,[A,"Nothing"],[C,Z]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[z,[A,"Archos"],[C,ce]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[z,[A,"Archos"],[C,Z]],[/; (n159v)/i],[z,[A,"HMD"],[C,Z]],[/(imo) (tab \w+)/i,/(infinix|tecno) (x1101b?|p904|dp(7c|8d|10a)( pro)?|p70[1-3]a?|p904|t1101)/i],[A,z,[C,ce]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|infinix|lava|oneplus|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(oppo) ?([\w ]+) bui/i],[A,z,[C,Z]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[A,z,[C,ce]],[/(surface duo)/i],[z,[A,Fr],[C,ce]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[z,[A,"Fairphone"],[C,Z]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[z,[A,Vr],[C,ce]],[/(sprint) (\w+)/i],[A,z,[C,Z]],[/(kin\.[onetw]{3})/i],[[z,/\./g," "],[A,Fr],[C,Z]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[z,[A,Nn],[C,ce]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[z,[A,Nn],[C,Z]],[/smart-tv.+(samsung)/i],[A,[C,J]],[/hbbtv.+maple;(\d+)/i],[[z,/^/,"SmartTV"],[A,Gr],[C,J]],[/(vizio)(?: |.+model\/)(\w+-\w+)/i,/tcast.+(lg)e?. ([-\w]+)/i],[A,z,[C,J]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[A,lr],[C,J]],[/(apple) ?tv/i],[A,[z,Ge+" TV"],[C,J]],[/crkey.*devicetype\/chromecast/i],[[z,Kr+" Third Generation"],[A,xt],[C,J]],[/crkey.*devicetype\/([^/]*)/i],[[z,/^/,"Chromecast "],[A,xt],[C,J]],[/fuchsia.*crkey/i],[[z,Kr+" Nest Hub"],[A,xt],[C,J]],[/crkey/i],[[z,Kr],[A,xt],[C,J]],[/(portaltv)/i],[z,[A,$t],[C,J]],[/droid.+aft(\w+)( bui|\))/i],[z,[A,je],[C,J]],[/(shield \w+ tv)/i],[z,[A,Vr],[C,J]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[z,[A,ga],[C,J]],[/(bravia[\w ]+)( bui|\))/i],[z,[A,ta],[C,J]],[/(mi(tv|box)-?\w+) bui/i],[z,[A,oa],[C,J]],[/Hbbtv.*(technisat) (.*);/i],[A,z,[C,J]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[A,/.+\/(\w+)/,"$1",ca,{LG:"lge"}],[z,qn],[C,J]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[z,[C,J]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:|large screen[\w ]+safari)\b/i],[[C,J]],[/(playstation \w+)/i],[z,[A,ta],[C,W]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[z,[A,Fr],[C,W]],[/(ouya)/i,/(nintendo) (\w+)/i,/(retroid) (pocket ([^\)]+))/i],[A,z,[C,W]],[/droid.+; (shield)( bui|\))/i],[z,[A,Vr],[C,W]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[z,[A,Gr],[C,Ee]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[A,z,[C,Ee]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[z,[A,Or],[C,Ee]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[z,[A,Ge],[C,Ee]],[/(opwwe\d{3})/i],[z,[A,Hr],[C,Ee]],[/(moto 360)/i],[z,[A,kr],[C,Ee]],[/(smartwatch 3)/i],[z,[A,ta],[C,Ee]],[/(g watch r)/i],[z,[A,lr],[C,Ee]],[/droid.+; (wt63?0{2,3})\)/i],[z,[A,Nn],[C,Ee]],[/droid.+; (glass) \d/i],[z,[A,xt],[C,Ce]],[/(pico) (4|neo3(?: link|pro)?)/i],[A,z,[C,Ce]],[/(quest( \d| pro)?s?).+vr/i],[z,[A,$t],[C,Ce]],[/mobile vr; rv.+firefox/i],[[C,Ce]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[A,[C,Re]],[/(aeobc)\b/i],[z,[A,je],[C,Re]],[/(homepod).+mac os/i],[z,[A,Ge],[C,Re]],[/windows iot/i],[[C,Re]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[z,[C,ca,{mobile:"Mobile",xr:"VR","*":ce}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[C,ce]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[C,Z]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[z,[A,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[M,[p,hr+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[p,M],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[M,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,M],[/ladybird\//i],[[p,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[M,p]],os:[[/(windows nt) (6\.[23]); arm/i],[[p,/N/,"R"],[M,ca,Ta]],[/(windows (?:phone|mobile|iot))(?: os)?[\/ ]?([\d\.]*( se)?)/i,/(windows)[\/ ](1[01]|2000|3\.1|7|8(\.1)?|9[58]|me|server 20\d\d( r2)?|vista|xp)/i],[p,M],[/windows nt ?([\d\.\)]*)(?!.+xbox)/i,/\bwin(?=3| ?9|n)(?:nt| 9x )?([\d\.;]*)/i],[[M,/(;|\))/g,"",ca,Ta],[p,Xe]],[/(windows ce)\/?([\d\.]*)/i],[p,M],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[M,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+(haiku|morphos))/i],[[p,"macOS"],[M,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[M,[p,Kr+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[M,[p,Kr+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[M,[p,Kr+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[M,[p,Kr+" Linux"]],[/crkey\/([\d\.]+)/i],[M,[p,Kr]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[M,p],[/(ubuntu) ([\w\.]+) like android/i],[[p,/(.+)/,"$1 Touch"],M],[/(harmonyos)[\/ ]?([\d\.]*)/i,/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen)\w*[-\/\.; ]?([\d\.]*)/i],[p,M],[/\(bb(10);/i],[M,[p,Ft]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[M,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[M,[p,at+" OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i,/webos(?:[ \/]?|\.tv-20(?=2[2-9]))(\d[\d\.]*)/i],[M,[p,"webOS"]],[/web0s;.+?(?:chr[o0]me|safari)\/(\d+)/i],[[M,ca,{25:"120",24:"108",23:"94",22:"87",6:"79",5:"68",4:"53",3:"38",2:"538",1:"537","*":"TV"}],[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[M,[p,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,"Chrome OS"],M],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/linux.+(mint)[\/\(\) ]?([\w\.]*)/i,/(mageia|vectorlinux|fuchsia|arcaos|arch(?= ?linux))[;l ]([\d\.]*)/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire|knoppix)(?: gnu[\/ ]linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/\b(aix)[; ]([1-9\.]{0,4})/i,/(hurd|linux|morphos)(?: (?:arm|x86|ppc)\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) ?(r\d)?/i],[p,M],[/(sunos) ?([\d\.]*)/i],[[p,"Solaris"],M],[/\b(beos|os\/2|amigaos|openvms|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,M]]},Ui=(Sr.call((T={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[P,[p,M,U,C]],[S,[j]],[H,[C,z,A]],[x,[p,M]],[y,[p,M]]]),Sr.call(T.isIgnore,[[P,[M,U]],[x,[M]],[y,[M]]]),Sr.call(T.isIgnoreRgx,[[P,/ ?browser$/i],[y,/ ?os$/i]]),Sr.call(T.toString,[[P,[p,M]],[S,[j]],[H,[A,z]],[x,[p,M]],[y,[p,M]]]),T),os=function(sn,$n){var Bn=Ui.init[$n],nr=Ui.isIgnore[$n]||0,wn=Ui.isIgnoreRgx[$n]||0,On=Ui.toString[$n]||0;function jr(){Sr.call(this,Bn)}return jr.prototype.getItem=function(){return sn},jr.prototype.withClientHints=function(){return Zn?Zn.getHighEntropyValues(Le).then(function(vr){return sn.setCH(new Ei(vr,!1)).parseCH().get()}):sn.parseCH().get()},jr.prototype.withFeatureCheck=function(){return sn.detectFeature().get()},$n!=w&&(jr.prototype.is=function(vr){var yr=!1;for(var An in this)if(this.hasOwnProperty(An)&&!Wt(nr,An)&&bn(wn?Dr(wn,this[An]):this[An])==bn(wn?Dr(wn,vr):vr)){if(yr=!0,vr!=g)break}else if(vr==g&&yr){yr=!yr;break}return yr},jr.prototype.toString=function(){var vr=f;for(var yr in On)typeof this[On[yr]]!==g&&(vr+=(vr?" ":f)+this[On[yr]]);return vr||g}),Zn||(jr.prototype.then=function(vr){var yr=this,An=function(){for(var Ea in yr)yr.hasOwnProperty(Ea)&&(this[Ea]=yr[Ea])};An.prototype={is:jr.prototype.is,toString:jr.prototype.toString};var Br=new An;return vr(Br),Br}),new jr};function Ei(sn,$n){if(sn=sn||{},Sr.call(this,Le),$n)Sr.call(this,[[Te,kn(sn[Qe])],[we,kn(sn[Ze])],[Z,/\?1/.test(sn[jn])],[z,Xn(sn[cr])],[Je,Xn(sn[Gn])],[Be,Xn(sn[Un])],[j,Xn(sn[Ht])],[He,kn(sn[Nr])],[nt,Xn(sn[or])]]);else for(var Bn in sn)this.hasOwnProperty(Bn)&&typeof sn[Bn]!==g&&(this[Bn]=sn[Bn])}function Qi(sn,$n,Bn,nr){return this.get=function(wn){return wn?this.data.hasOwnProperty(wn)?this.data[wn]:b:this.data},this.set=function(wn,On){return this.data[wn]=On,this},this.setCH=function(wn){return this.uaCH=wn,this},this.detectFeature=function(){if(Rn&&Rn.userAgent==this.ua)switch(this.itemType){case P:Rn.brave&&typeof Rn.brave.isBrave==R&&this.set(p,"Brave");break;case H:!this.get(C)&&Zn&&Zn[Z]&&this.set(C,Z),this.get(z)=="Macintosh"&&Rn&&typeof Rn.standalone!==g&&Rn.maxTouchPoints&&Rn.maxTouchPoints>2&&this.set(z,"iPad").set(C,ce);break;case y:!this.get(p)&&Zn&&Zn[Je]&&this.set(p,Zn[Je]);break;case w:var wn=this.data,On=function(jr){return wn[jr].getItem().detectFeature().get()};this.set(P,On(P)).set(S,On(S)).set(H,On(H)).set(x,On(x)).set(y,On(y))}return this},this.parseUA=function(){return this.itemType!=w&&ma.call(this.data,this.ua,this.rgxMap),this.itemType==P&&this.set(U,Ar(this.get(M))),this},this.parseCH=function(){var wn=this.uaCH,On=this.rgxMap;switch(this.itemType){case P:case x:var jr,vr=wn[we]||wn[Te];if(vr)for(var yr in vr){var An=vr[yr].brand||vr[yr],Br=vr[yr].version;this.itemType==P&&!/not.a.brand/i.test(An)&&(!jr||/Chrom/.test(jr)&&An!=Ca||jr==hr&&/WebView2/.test(An))&&(An=ca(An,ss),(jr=this.get(p))&&!/Chrom/.test(jr)&&/Chrom/.test(An)||this.set(p,An).set(M,Br).set(U,Ar(Br)),jr=An),this.itemType==x&&An==Ca&&this.set(M,Br)}break;case S:var Ea=wn[j];Ea&&(Ea&&wn[nt]=="64"&&(Ea+="64"),ma.call(this.data,Ea+";",On));break;case H:if(wn[Z]&&this.set(C,Z),wn[z]&&(this.set(z,wn[z]),!this.get(C)||!this.get(A))){var ua={};ma.call(ua,"droid 9; "+wn[z]+")",On),!this.get(C)&&ua.type&&this.set(C,ua.type),!this.get(A)&&ua.vendor&&this.set(A,ua.vendor)}if(wn[He]){var ya;if(typeof wn[He]!="string")for(var ja=0;!ya&&ja<wn[He].length;)ya=ca(wn[He][ja++],Da);else ya=ca(wn[He],Da);this.set(C,ya)}break;case y:var Ba=wn[Je];if(Ba){var Wa=wn[Be];Ba==Xe&&(Wa=parseInt(Ar(Wa),10)>=13?"11":"10"),this.set(p,Ba).set(M,Wa)}this.get(p)==Xe&&wn[z]=="Xbox"&&this.set(p,"Xbox").set(M,b);break;case w:var Sa=this.data,Qa=function(pi){return Sa[pi].getItem().setCH(wn).parseCH().get()};this.set(P,Qa(P)).set(S,Qa(S)).set(H,Qa(H)).set(x,Qa(x)).set(y,Qa(y))}return this},Sr.call(this,[["itemType",sn],["ua",$n],["uaCH",nr],["rgxMap",Bn],["data",os(this,sn)]]),this}function Zr(sn,$n,Bn){if(typeof sn===F?(bt(sn,!0)?(typeof $n===F&&(Bn=$n),$n=sn):(Bn=sn,$n=b),sn=b):typeof sn!==m||bt($n,!0)||(Bn=$n,$n=b),Bn&&typeof Bn.append===R){var nr={};Bn.forEach(function(yr,An){nr[An]=yr}),Bn=nr}if(!(this instanceof Zr))return new Zr(sn,$n,Bn).getResult();var wn=typeof sn===m?sn:Bn&&Bn[v]?Bn[v]:Rn&&Rn.userAgent?Rn.userAgent:f,On=new Ei(Bn,!0),jr=$n?function(yr,An){var Br={},Ea=An;if(!bt(An))for(var ua in Ea={},An)for(var ya in An[ua])Ea[ya]=An[ua][ya].concat(Ea[ya]?Ea[ya]:[]);for(var ja in yr)Br[ja]=Ea[ja]&&Ea[ja].length%2==0?Ea[ja].concat(yr[ja]):yr[ja];return Br}(ai,$n):ai,vr=function(yr){return yr==w?function(){return new Qi(yr,wn,jr,On).set("ua",wn).set(P,this.getBrowser()).set(S,this.getCPU()).set(H,this.getDevice()).set(x,this.getEngine()).set(y,this.getOS()).get()}:function(){return new Qi(yr,wn,jr[yr],On).parseUA().get()}};return Sr.call(this,[["getBrowser",vr(P)],["getCPU",vr(S)],["getDevice",vr(H)],["getEngine",vr(x)],["getOS",vr(y)],["getResult",vr(w)],["getUA",function(){return wn}],["setUA",function(yr){return Pn(yr)&&(wn=yr.length>500?qn(yr,500):yr),this}]]).setUA(wn),this}Zr.VERSION="2.0.4",Zr.BROWSER=ur([p,M,U,C]),Zr.CPU=ur([j]),Zr.DEVICE=ur([z,A,C,W,Z,J,ce,Ee,Re]),Zr.ENGINE=Zr.OS=ur([p,M]),typeof k!==g?(I.exports&&(k=I.exports=Zr),k.UAParser=Zr):d.amdO?(E=(function(){return Zr}).call(k,d,k,I))===b||(I.exports=E):Sn&&(_.UAParser=Zr);var Si=Sn&&(_.jQuery||_.Zepto);if(Si&&!Si.ua){var Ai=new Zr;Si.ua=Ai.getResult(),Si.ua.get=function(){return Ai.getUA()},Si.ua.set=function(sn){Ai.setUA(sn);var $n=Ai.getResult();for(var Bn in $n)Si.ua[Bn]=$n[Bn]}}})(typeof window=="object"?window:this)},2155:function(I,k,d){var E;I.exports=(E=d(9021),d(7165),E.pad.ZeroPadding={pad:function(_,b){var T=4*b;_.clamp(),_.sigBytes+=T-(_.sigBytes%T||T)},unpad:function(_){var b=_.words,T=_.sigBytes-1;for(T=_.sigBytes-1;T>=0;T--)if(b[T>>>2]>>>24-T%4*8&255){_.sigBytes=T+1;break}}},E.pad.ZeroPadding)},2169:function(I,k,d){var E;I.exports=(E=d(9021),d(7165),E.mode.CFB=function(){var _=E.lib.BlockCipherMode.extend();function b(T,v,f,R){var g,F=this._iv;F?(g=F.slice(0),this._iv=void 0):g=this._prevBlock,R.encryptBlock(g,0);for(var m=0;m<f;m++)T[v+m]^=g[m]}return _.Encryptor=_.extend({processBlock:function(T,v){var f=this._cipher,R=f.blockSize;b.call(this,T,v,R,f),this._prevBlock=T.slice(v,v+R)}}),_.Decryptor=_.extend({processBlock:function(T,v){var f=this._cipher,R=f.blockSize,g=T.slice(v,v+R);b.call(this,T,v,R,f),this._prevBlock=g}}),_}(),E.mode.CFB)},2183:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Chrome111=void 0;const E=d(7363),_=d(2994),b=d(1765),T=d(8046),v=d(5544),f=d(5938),R=d(4256),g=d(4893),F=d(521),m=d(1305),P=d(3303),S=new _.Logger("Chrome111"),H={OS:1024,MIS:1024};class x extends F.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new x}constructor(){super()}get name(){return"Chrome111"}close(){if(S.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const w=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{w.addTransceiver("audio"),w.addTransceiver("video");const p=await w.createOffer();try{w.close()}catch{}const C=E.parse(p.sdp),A=v.extractRtpCapabilities({sdpObject:C});return R.addNackSupportForOpus(A),A}catch(p){try{w.close()}catch{}throw p}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:H}}run({direction:w,iceParameters:p,iceCandidates:C,dtlsParameters:A,sctpParameters:M,iceServers:j,iceTransportPolicy:U,additionalSettings:z,proprietaryConstraints:W,extendedRtpCapabilities:Z}){this.assertNotClosed(),S.debug("run()"),this._direction=w,this._remoteSdp=new m.RemoteSdp({iceParameters:p,iceCandidates:C,dtlsParameters:A,sctpParameters:M}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",Z),video:T.getSendingRtpParameters("video",Z)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",Z),video:T.getSendingRemoteRtpParameters("video",Z)},A.role&&A.role!=="auto"&&(this._forcedLocalDtlsRole=A.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:j??[],iceTransportPolicy:U??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...z},W),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ce=>{this.emit("@icecandidateerror",ce)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(w){this.assertNotClosed(),S.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=w,this._pc.setConfiguration(p)}async restartIce(w){if(this.assertNotClosed(),S.debug("restartIce()"),this._remoteSdp.updateIceParameters(w),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const C={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:w,encodings:p,codecOptions:C,codec:A,onRtpSender:M}){if(this.assertNotClosed(),this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",w.kind,w.id),p&&p.length>1){let Re=1;for(const ye of p){const Te=ye.scalabilityMode?(0,P.parse)(ye.scalabilityMode).temporalLayers:3;Te>Re&&(Re=Te)}p.forEach((ye,Te)=>{ye.rid=`r${Te}`,ye.scalabilityMode=`L1T${Re}`})}const j=b.clone(this._sendingRtpParametersByKind[w.kind]);j.codecs=T.reduceCodecs(j.codecs,A);const U=b.clone(this._sendingRemoteRtpParametersByKind[w.kind]);U.codecs=T.reduceCodecs(U.codecs,A);const z=this._remoteSdp.getNextMediaSectionIdx(),W=this._pc.addTransceiver(w,{direction:"sendonly",streams:[this._sendStream],sendEncodings:p});M&&M(W.sender);const Z=await this._pc.createOffer();let ce=E.parse(Z.sdp);ce.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ce}),S.debug("send() | calling pc.setLocalDescription() [offer:%o]",Z),await this._pc.setLocalDescription(Z);const J=W.mid;j.mid=J,ce=E.parse(this._pc.localDescription.sdp);const Ee=ce.media[z.idx];if(j.rtcp.cname=v.getCname({offerMediaObject:Ee}),p)if(p.length===1){const Re=f.getRtpEncodings({offerMediaObject:Ee});Object.assign(Re[0],p[0]),j.encodings=Re}else j.encodings=p;else j.encodings=f.getRtpEncodings({offerMediaObject:Ee});this._remoteSdp.send({offerMediaObject:Ee,reuseMid:z.reuseMid,offerRtpParameters:j,answerRtpParameters:U,codecOptions:C});const Ce={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Ce),await this._pc.setRemoteDescription(Ce),this._mapMidTransceiver.set(J,W),{localId:J,rtpParameters:j,rtpSender:W.sender}}async stopSending(w){if(this.assertSendDirection(),S.debug("stopSending() [localId:%s]",w),this._closed)return;const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const C=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._mapMidTransceiver.delete(w)}async pauseSending(w){this.assertNotClosed(),this.assertSendDirection(),S.debug("pauseSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(w);const C=await this._pc.createOffer();S.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async resumeSending(w){this.assertNotClosed(),this.assertSendDirection(),S.debug("resumeSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(this._remoteSdp.resumeSendingMediaSection(w),!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly";const C=await this._pc.createOffer();S.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async replaceTrack(w,p){this.assertNotClosed(),this.assertSendDirection(),p?S.debug("replaceTrack() [localId:%s, track.id:%s]",w,p.id):S.debug("replaceTrack() [localId:%s, no track]",w);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");await C.sender.replaceTrack(p)}async setMaxSpatialLayer(w,p){this.assertNotClosed(),this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",w,p);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");const A=C.sender.getParameters();A.encodings.forEach((U,z)=>{U.active=z<=p}),await C.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const M=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const j={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async setRtpEncodingParameters(w,p){this.assertNotClosed(),this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",w,p);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");const A=C.sender.getParameters();A.encodings.forEach((U,z)=>{A.encodings[z]={...U,...p}}),await C.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const M=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const j={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async getSenderStats(w){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:w,maxPacketLifeTime:p,maxRetransmits:C,label:A,protocol:M}){this.assertNotClosed(),this.assertSendDirection();const j={negotiated:!0,id:this._nextSendSctpStreamId,ordered:w,maxPacketLifeTime:p,maxRetransmits:C,protocol:M};S.debug("sendDataChannel() [options:%o]",j);const U=this._pc.createDataChannel(A,j);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%H.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),W=E.parse(z.sdp),Z=W.media.find(J=>J.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:Z});const ce={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setRemoteDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:U,sctpStreamParameters:{streamId:j.id,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits}}}async receive(w){this.assertNotClosed(),this.assertRecvDirection();const p=[],C=new Map;for(const U of w){const{trackId:z,kind:W,rtpParameters:Z,streamId:ce}=U;S.debug("receive() [trackId:%s, kind:%s]",z,W);const J=Z.mid??String(this._mapMidTransceiver.size);C.set(z,J),this._remoteSdp.receive({mid:J,kind:W,offerRtpParameters:Z,streamId:ce??Z.rtcp.cname,trackId:z})}const A={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",A),await this._pc.setRemoteDescription(A);for(const U of w){const{trackId:z,onRtpReceiver:W}=U;if(W){const Z=C.get(z),ce=this._pc.getTransceivers().find(J=>J.mid===Z);if(!ce)throw new Error("transceiver not found");W(ce.receiver)}}let M=await this._pc.createAnswer();const j=E.parse(M.sdp);for(const U of w){const{trackId:z,rtpParameters:W}=U,Z=C.get(z),ce=j.media.find(J=>String(J.mid)===Z);v.applyCodecParameters({offerRtpParameters:W,answerMediaObject:ce})}M={type:"answer",sdp:E.write(j)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",M),await this._pc.setLocalDescription(M);for(const U of w){const{trackId:z}=U,W=C.get(z),Z=this._pc.getTransceivers().find(ce=>ce.mid===W);if(!Z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(W,Z),p.push({localId:W,track:Z.receiver.track,rtpReceiver:Z.receiver})}return p}async stopReceiving(w){if(this.assertRecvDirection(),this._closed)return;for(const A of w){S.debug("stopReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(M.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C);for(const A of w)this._mapMidTransceiver.delete(A)}async pauseReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){S.debug("pauseReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="inactive",this._remoteSdp.pauseMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}async resumeReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){S.debug("resumeReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}async getReceiverStats(w){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:w,label:p,protocol:C}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:A,ordered:M,maxPacketLifeTime:j,maxRetransmits:U}=w,z={negotiated:!0,id:A,ordered:M,maxPacketLifeTime:j,maxRetransmits:U,protocol:C};S.debug("receiveDataChannel() [options:%o]",z);const W=this._pc.createDataChannel(p,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Z={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Z),await this._pc.setRemoteDescription(Z);const ce=await this._pc.createAnswer();if(!this._transportReady){const J=E.parse(ce.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setLocalDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:W}}async setupTransport({localDtlsRole:w,localSdpObject:p}){p||(p=E.parse(this._pc.localDescription.sdp));const C=v.extractDtlsParameters({sdpObject:p});C.role=w,this._remoteSdp.updateDtlsRole(w==="client"?"server":"client"),await new Promise((A,M)=>{this.safeEmit("@connect",{dtlsParameters:C},A,M)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.Chrome111=x},2196:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},2211:I=>{I.exports=function(k){var d,E,_="",b=(k=function(v){return v||(v={}),{length:v.length||8,numeric:typeof v.numeric!="boolean"||v.numeric,letters:typeof v.letters!="boolean"||v.letters,special:typeof v.special=="boolean"&&v.special,exclude:Array.isArray(v.exclude)?v.exclude:[]}}(k)).length,T=(k.exclude,function(v){var f="";v.numeric&&(f+="0123456789"),v.letters&&(f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),v.special&&(f+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var R=0;R<=v.exclude.length;R++)f=f.replace(v.exclude[R],"");return f}(k));for(d=1;d<=b;d++)_+=T.substring(E=Math.floor(Math.random()*T.length),E+1);return _}},2215:(I,k,d)=>{var E,_;(function(b){(_=typeof(E=b)=="function"?E.call(k,d,k,I):E)===void 0||(I.exports=_),I.exports=b()})(function(){function b(){for(var v=0,f={};v<arguments.length;v++){var R=arguments[v];for(var g in R)f[g]=R[g]}return f}function T(v){return v.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function v(f){function R(){}function g(m,P,S){if(typeof document<"u"){typeof(S=b({path:"/"},R.defaults,S)).expires=="number"&&(S.expires=new Date(1*new Date+864e5*S.expires)),S.expires=S.expires?S.expires.toUTCString():"";try{var H=JSON.stringify(P);/^[\{\[]/.test(H)&&(P=H)}catch{}P=f.write?f.write(P,m):encodeURIComponent(String(P)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),m=encodeURIComponent(String(m)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var x="";for(var y in S)S[y]&&(x+="; "+y,S[y]!==!0&&(x+="="+S[y].split(";")[0]));return document.cookie=m+"="+P+x}}function F(m,P){if(typeof document<"u"){for(var S={},H=document.cookie?document.cookie.split("; "):[],x=0;x<H.length;x++){var y=H[x].split("="),w=y.slice(1).join("=");P||w.charAt(0)!=='"'||(w=w.slice(1,-1));try{var p=T(y[0]);if(w=(f.read||f)(w,p)||T(w),P)try{w=JSON.parse(w)}catch{}if(S[p]=w,m===p)break}catch{}}return m?S[m]:S}}return R.set=g,R.get=function(m){return F(m,!1)},R.getJSON=function(m){return F(m,!0)},R.remove=function(m,P){g(m,"",b(P,{expires:-1}))},R.defaults={},R.withConverter=v,R}(function(){})})},2284:(I,k,d)=>{function E(_){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},E(_)}d.d(k,{A:()=>E})},2291:(I,k)=>{let d;Object.defineProperty(k,"__esModule",{value:!0});const E=new Uint8Array(16);k.default=function(){if(!d){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");d=crypto.getRandomValues.bind(crypto)}return d(E)}},2292:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Firefox120=void 0;const E=d(7363),_=d(2994),b=d(4893),T=d(1765),v=d(8046),f=d(5544),R=d(5938),g=d(521),F=d(1305),m=d(3303),P=new _.Logger("Firefox120"),S={OS:16,MIS:2048};class H extends g.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new H}constructor(){super()}get name(){return"Firefox120"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const y=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),w=document.createElement("canvas");w.getContext("2d");const p=w.captureStream().getVideoTracks()[0];try{y.addTransceiver("audio",{direction:"sendrecv"}),y.addTransceiver(p,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const C=await y.createOffer();try{w.remove()}catch{}try{p.stop()}catch{}try{y.close()}catch{}const A=E.parse(C.sdp);return f.extractRtpCapabilities({sdpObject:A})}catch(C){try{w.remove()}catch{}try{p.stop()}catch{}try{y.close()}catch{}throw C}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:y,iceParameters:w,iceCandidates:p,dtlsParameters:C,sctpParameters:A,iceServers:M,iceTransportPolicy:j,additionalSettings:U,proprietaryConstraints:z,extendedRtpCapabilities:W}){this.assertNotClosed(),P.debug("run()"),this._direction=y,this._remoteSdp=new F.RemoteSdp({iceParameters:w,iceCandidates:p,dtlsParameters:C,sctpParameters:A}),this._sendingRtpParametersByKind={audio:v.getSendingRtpParameters("audio",W),video:v.getSendingRtpParameters("video",W)},this._sendingRemoteRtpParametersByKind={audio:v.getSendingRemoteRtpParameters("audio",W),video:v.getSendingRemoteRtpParameters("video",W)},this._pc=new RTCPeerConnection({iceServers:M??[],iceTransportPolicy:j??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...U},z),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",Z=>{this.emit("@icecandidateerror",Z)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(y){throw this.assertNotClosed(),new b.UnsupportedError("not supported")}async restartIce(y){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(y),this._transportReady)if(this._direction==="send"){const w=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",w),await this._pc.setLocalDescription(w);const p={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}else{const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:y,encodings:w,codecOptions:p,codec:C,onRtpSender:A}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",y.kind,y.id),w&&w.length>1&&w.forEach((Ce,Re)=>{Ce.rid=`r${Re}`});const M=T.clone(this._sendingRtpParametersByKind[y.kind]);M.codecs=v.reduceCodecs(M.codecs,C);const j=T.clone(this._sendingRemoteRtpParametersByKind[y.kind]);j.codecs=v.reduceCodecs(j.codecs,C);const U=this._pc.addTransceiver(y,{direction:"sendonly",streams:[this._sendStream],sendEncodings:w});A&&A(U.sender);const z=await this._pc.createOffer();let W=E.parse(z.sdp);W.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:W});const Z=(0,m.parse)((w??[{}])[0].scalabilityMode);P.debug("send() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z);const ce=U.mid;M.mid=ce,W=E.parse(this._pc.localDescription.sdp);const J=W.media[W.media.length-1];if(M.rtcp.cname=f.getCname({offerMediaObject:J}),w)if(w.length===1){const Ce=R.getRtpEncodings({offerMediaObject:J});Object.assign(Ce[0],w[0]),M.encodings=Ce}else M.encodings=w;else M.encodings=R.getRtpEncodings({offerMediaObject:J});if(M.encodings.length>1&&(M.codecs[0].mimeType.toLowerCase()==="video/vp8"||M.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Ce of M.encodings)Ce.scalabilityMode?Ce.scalabilityMode=`L1T${Z.temporalLayers}`:Ce.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:J,offerRtpParameters:M,answerRtpParameters:j,codecOptions:p});const Ee={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Ee),await this._pc.setRemoteDescription(Ee),this._mapMidTransceiver.set(ce,U),{localId:ce,rtpParameters:M,rtpSender:U.sender}}async stopSending(y){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",y),this._closed)return;const w=this._mapMidTransceiver.get(y);if(!w)throw new Error("associated transceiver not found");w.sender.replaceTrack(null),this._pc.removeTrack(w.sender),this._remoteSdp.disableMediaSection(w.mid);const p=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const C={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C),this._mapMidTransceiver.delete(y)}async pauseSending(y){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",y);const w=this._mapMidTransceiver.get(y);if(!w)throw new Error("associated RTCRtpTransceiver not found");w.direction="inactive",this._remoteSdp.pauseMediaSection(y);const p=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const C={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C)}async resumeSending(y){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",y);const w=this._mapMidTransceiver.get(y);if(!w)throw new Error("associated RTCRtpTransceiver not found");w.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(y);const p=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const C={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C)}async replaceTrack(y,w){this.assertNotClosed(),this.assertSendDirection(),w?P.debug("replaceTrack() [localId:%s, track.id:%s]",y,w.id):P.debug("replaceTrack() [localId:%s, no track]",y);const p=this._mapMidTransceiver.get(y);if(!p)throw new Error("associated RTCRtpTransceiver not found");await p.sender.replaceTrack(w)}async setMaxSpatialLayer(y,w){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",y,w);const p=this._mapMidTransceiver.get(y);if(!p)throw new Error("associated transceiver not found");const C=p.sender.getParameters();C.encodings.forEach((j,U)=>{j.active=U<=w}),await p.sender.setParameters(C),this._remoteSdp.muxMediaSectionSimulcast(y,C.encodings);const A=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A);const M={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async setRtpEncodingParameters(y,w){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",y,w);const p=this._mapMidTransceiver.get(y);if(!p)throw new Error("associated RTCRtpTransceiver not found");const C=p.sender.getParameters();C.encodings.forEach((j,U)=>{C.encodings[U]={...j,...w}}),await p.sender.setParameters(C),this._remoteSdp.muxMediaSectionSimulcast(y,C.encodings);const A=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A);const M={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async getSenderStats(y){this.assertNotClosed(),this.assertSendDirection();const w=this._mapMidTransceiver.get(y);if(!w)throw new Error("associated RTCRtpTransceiver not found");return w.sender.getStats()}async sendDataChannel({ordered:y,maxPacketLifeTime:w,maxRetransmits:p,label:C,protocol:A}){this.assertNotClosed(),this.assertSendDirection();const M={negotiated:!0,id:this._nextSendSctpStreamId,ordered:y,maxPacketLifeTime:w,maxRetransmits:p,protocol:A};P.debug("sendDataChannel() [options:%o]",M);const j=this._pc.createDataChannel(C,M);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const U=await this._pc.createOffer(),z=E.parse(U.sdp),W=z.media.find(ce=>ce.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:z}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",U),await this._pc.setLocalDescription(U),this._remoteSdp.sendSctpAssociation({offerMediaObject:W});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:j,sctpStreamParameters:{streamId:M.id,ordered:M.ordered,maxPacketLifeTime:M.maxPacketLifeTime,maxRetransmits:M.maxRetransmits}}}async receive(y){this.assertNotClosed(),this.assertRecvDirection();const w=[],p=new Map;for(const j of y){const{trackId:U,kind:z,rtpParameters:W,streamId:Z}=j;P.debug("receive() [trackId:%s, kind:%s]",U,z);const ce=W.mid??String(this._mapMidTransceiver.size);p.set(U,ce),this._remoteSdp.receive({mid:ce,kind:z,offerRtpParameters:W,streamId:Z??W.rtcp.cname,trackId:U})}const C={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);for(const j of y){const{trackId:U,onRtpReceiver:z}=j;if(z){const W=p.get(U),Z=this._pc.getTransceivers().find(ce=>ce.mid===W);if(!Z)throw new Error("transceiver not found");z(Z.receiver)}}let A=await this._pc.createAnswer();const M=E.parse(A.sdp);for(const j of y){const{trackId:U,rtpParameters:z}=j,W=p.get(U),Z=M.media.find(ce=>String(ce.mid)===W);f.applyCodecParameters({offerRtpParameters:z,answerMediaObject:Z}),A={type:"answer",sdp:E.write(M)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:M}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",A),await this._pc.setLocalDescription(A);for(const j of y){const{trackId:U}=j,z=p.get(U),W=this._pc.getTransceivers().find(Z=>Z.mid===z);if(!W)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(z,W),w.push({localId:z,track:W.receiver.track,rtpReceiver:W.receiver})}return w}async stopReceiving(y){if(this.assertRecvDirection(),this._closed)return;for(const C of y){P.debug("stopReceiving() [localId:%s]",C);const A=this._mapMidTransceiver.get(C);if(!A)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(A.mid)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const C of y)this._mapMidTransceiver.delete(C)}async pauseReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const C of y){P.debug("pauseReceiving() [localId:%s]",C);const A=this._mapMidTransceiver.get(C);if(!A)throw new Error("associated RTCRtpTransceiver not found");A.direction="inactive",this._remoteSdp.pauseMediaSection(C)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async resumeReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const C of y){P.debug("resumeReceiving() [localId:%s]",C);const A=this._mapMidTransceiver.get(C);if(!A)throw new Error("associated RTCRtpTransceiver not found");A.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(C)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async getReceiverStats(y){this.assertRecvDirection();const w=this._mapMidTransceiver.get(y);if(!w)throw new Error("associated RTCRtpTransceiver not found");return w.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:y,label:w,protocol:p}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:C,ordered:A,maxPacketLifeTime:M,maxRetransmits:j}=y,U={negotiated:!0,id:C,ordered:A,maxPacketLifeTime:M,maxRetransmits:j,protocol:p};P.debug("receiveDataChannel() [options:%o]",U);const z=this._pc.createDataChannel(w,U);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const W={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",W),await this._pc.setRemoteDescription(W);const Z=await this._pc.createAnswer();if(!this._transportReady){const ce=E.parse(Z.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:ce})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:z}}async setupTransport({localDtlsRole:y,localSdpObject:w}){w||(w=E.parse(this._pc.localDescription.sdp));const p=f.extractDtlsParameters({sdpObject:w});p.role=y,this._remoteSdp.updateDtlsRole(y==="client"?"server":"client"),await new Promise((C,A)=>{this.safeEmit("@connect",{dtlsParameters:p},C,A)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new b.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.Firefox120=H},2696:function(I,k,d){var E;I.exports=(E=d(9021),d(754),d(4636),d(9506),d(7165),function(){var _=E,b=_.lib.StreamCipher,T=_.algo,v=[],f=[],R=[],g=T.RabbitLegacy=b.extend({_doReset:function(){var m=this._key.words,P=this.cfg.iv,S=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],H=this._C=[m[2]<<16|m[2]>>>16,4294901760&m[0]|65535&m[1],m[3]<<16|m[3]>>>16,4294901760&m[1]|65535&m[2],m[0]<<16|m[0]>>>16,4294901760&m[2]|65535&m[3],m[1]<<16|m[1]>>>16,4294901760&m[3]|65535&m[0]];this._b=0;for(var x=0;x<4;x++)F.call(this);for(x=0;x<8;x++)H[x]^=S[x+4&7];if(P){var y=P.words,w=y[0],p=y[1],C=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8),A=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),M=C>>>16|4294901760&A,j=A<<16|65535&C;for(H[0]^=C,H[1]^=M,H[2]^=A,H[3]^=j,H[4]^=C,H[5]^=M,H[6]^=A,H[7]^=j,x=0;x<4;x++)F.call(this)}},_doProcessBlock:function(m,P){var S=this._X;F.call(this),v[0]=S[0]^S[5]>>>16^S[3]<<16,v[1]=S[2]^S[7]>>>16^S[5]<<16,v[2]=S[4]^S[1]>>>16^S[7]<<16,v[3]=S[6]^S[3]>>>16^S[1]<<16;for(var H=0;H<4;H++)v[H]=16711935&(v[H]<<8|v[H]>>>24)|4278255360&(v[H]<<24|v[H]>>>8),m[P+H]^=v[H]},blockSize:4,ivSize:2});function F(){for(var m=this._X,P=this._C,S=0;S<8;S++)f[S]=P[S];for(P[0]=P[0]+1295307597+this._b|0,P[1]=P[1]+3545052371+(P[0]>>>0<f[0]>>>0?1:0)|0,P[2]=P[2]+886263092+(P[1]>>>0<f[1]>>>0?1:0)|0,P[3]=P[3]+1295307597+(P[2]>>>0<f[2]>>>0?1:0)|0,P[4]=P[4]+3545052371+(P[3]>>>0<f[3]>>>0?1:0)|0,P[5]=P[5]+886263092+(P[4]>>>0<f[4]>>>0?1:0)|0,P[6]=P[6]+1295307597+(P[5]>>>0<f[5]>>>0?1:0)|0,P[7]=P[7]+3545052371+(P[6]>>>0<f[6]>>>0?1:0)|0,this._b=P[7]>>>0<f[7]>>>0?1:0,S=0;S<8;S++){var H=m[S]+P[S],x=65535&H,y=H>>>16,w=((x*x>>>17)+x*y>>>15)+y*y,p=((4294901760&H)*H|0)+((65535&H)*H|0);R[S]=w^p}m[0]=R[0]+(R[7]<<16|R[7]>>>16)+(R[6]<<16|R[6]>>>16)|0,m[1]=R[1]+(R[0]<<8|R[0]>>>24)+R[7]|0,m[2]=R[2]+(R[1]<<16|R[1]>>>16)+(R[0]<<16|R[0]>>>16)|0,m[3]=R[3]+(R[2]<<8|R[2]>>>24)+R[1]|0,m[4]=R[4]+(R[3]<<16|R[3]>>>16)+(R[2]<<16|R[2]>>>16)|0,m[5]=R[5]+(R[4]<<8|R[4]>>>24)+R[3]|0,m[6]=R[6]+(R[5]<<16|R[5]>>>16)+(R[4]<<16|R[4]>>>16)|0,m[7]=R[7]+(R[6]<<8|R[6]>>>24)+R[5]|0}_.RabbitLegacy=b._createHelper(g)}(),E.RabbitLegacy)},2731:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.FakeHandler=void 0;const E=d(5328),_=d(3953),b=d(2994),T=d(1765),v=d(8046),f=d(4893),R=d(521),g=new b.Logger("FakeHandler");class F extends _.EnhancedEventEmitter{id;ordered;maxPacketLifeTime;maxRetransmits;label;protocol;constructor({id:S,ordered:H,maxPacketLifeTime:x,maxRetransmits:y,label:w,protocol:p}){super(),this.id=S,this.ordered=H,this.maxPacketLifeTime=x,this.maxRetransmits=y,this.label=w,this.protocol=p}close(){this.safeEmit("close"),this.emit("@close")}send(S){this.safeEmit("message",S)}addEventListener(S,H){this.on(S,H)}}class m extends R.HandlerInterface{_closed=!1;fakeParameters;_rtpParametersByKind;_cname=`CNAME-${T.generateRandomNumber()}`;_transportReady=!1;_nextLocalId=1;_tracks=new Map;_nextSctpStreamId=0;static createFactory(S){return()=>new m(S)}constructor(S){super(),this.fakeParameters=S}get name(){return"FakeHandler"}close(){g.debug("close()"),this._closed||(this._closed=!0)}setIceGatheringState(S){this.emit("@icegatheringstatechange",S)}setConnectionState(S){this.emit("@connectionstatechange",S)}async getNativeRtpCapabilities(){return g.debug("getNativeRtpCapabilities()"),this.fakeParameters.generateNativeRtpCapabilities()}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),this.fakeParameters.generateNativeSctpCapabilities()}run({direction:S,iceParameters:H,iceCandidates:x,dtlsParameters:y,sctpParameters:w,iceServers:p,iceTransportPolicy:C,proprietaryConstraints:A,extendedRtpCapabilities:M}){this.assertNotClosed(),g.debug("run()"),this._rtpParametersByKind={audio:v.getSendingRtpParameters("audio",M),video:v.getSendingRtpParameters("video",M)}}async updateIceServers(S){this.assertNotClosed(),g.debug("updateIceServers()")}async restartIce(S){this.assertNotClosed(),g.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:S,encodings:H,codecOptions:x,codec:y}){this.assertNotClosed(),g.debug("send() [kind:%s, track.id:%s]",S.kind,S.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const w=T.clone(this._rtpParametersByKind[S.kind]),p=w.codecs.some(A=>/.+\/rtx$/i.test(A.mimeType));w.mid=`mid-${T.generateRandomNumber()}`,H||(H=[{}]);for(const A of H)A.ssrc=T.generateRandomNumber(),p&&(A.rtx={ssrc:T.generateRandomNumber()});w.encodings=H,w.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const C=this._nextLocalId++;return this._tracks.set(C,S),{localId:String(C),rtpParameters:w}}async stopSending(S){if(g.debug("stopSending() [localId:%s]",S),!this._closed){if(!this._tracks.has(Number(S)))throw new Error("local track not found");this._tracks.delete(Number(S))}}async pauseSending(S){this.assertNotClosed()}async resumeSending(S){this.assertNotClosed()}async replaceTrack(S,H){this.assertNotClosed(),H?g.debug("replaceTrack() [localId:%s, track.id:%s]",S,H.id):g.debug("replaceTrack() [localId:%s, no track]",S),this._tracks.delete(Number(S)),this._tracks.set(Number(S),H)}async setMaxSpatialLayer(S,H){this.assertNotClosed(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",S,H)}async setRtpEncodingParameters(S,H){this.assertNotClosed(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",S,H)}async getSenderStats(S){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:S,maxPacketLifeTime:H,maxRetransmits:x,label:y,protocol:w}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),g.debug("sendDataChannel()"),{dataChannel:new F({id:this._nextSctpStreamId++,ordered:S,maxPacketLifeTime:H,maxRetransmits:x,label:y,protocol:w}),sctpStreamParameters:{streamId:this._nextSctpStreamId,ordered:S,maxPacketLifeTime:H,maxRetransmits:x}}}async receive(S){this.assertNotClosed();const H=[];for(const x of S){const{trackId:y,kind:w}=x;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),g.debug("receive() [trackId:%s, kind:%s]",y,w);const p=this._nextLocalId++,C=new E.FakeMediaStreamTrack({kind:w});this._tracks.set(p,C),H.push({localId:String(p),track:C})}return H}async stopReceiving(S){if(!this._closed)for(const H of S)g.debug("stopReceiving() [localId:%s]",H),this._tracks.delete(Number(H))}async pauseReceiving(S){this.assertNotClosed()}async resumeReceiving(S){this.assertNotClosed()}async getReceiverStats(S){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:S,label:H,protocol:x}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),g.debug("receiveDataChannel()"),{dataChannel:new F({id:S.streamId,ordered:S.ordered,maxPacketLifeTime:S.maxPacketLifeTime,maxRetransmits:S.maxRetransmits,label:H,protocol:x})}}async setupTransport({localDtlsRole:S,localSdpObject:H}){const x=T.clone(this.fakeParameters.generateLocalDtlsParameters());S&&(x.role=S),this.emit("@connectionstatechange","connecting"),await new Promise((y,w)=>this.emit("@connect",{dtlsParameters:x},y,w)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new f.InvalidStateError("method called in a closed handler")}}k.FakeHandler=m},2770:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0});const E=d(9746);k.default=function(_){if(!(0,E.default)(_))throw TypeError("Invalid UUID");return parseInt(_.slice(14,15),16)}},2829:(I,k)=>{function d(_,b,T,v){switch(_){case 0:return b&T^~b&v;case 1:case 3:return b^T^v;case 2:return b&T^b&v^T&v}}function E(_,b){return _<<b|_>>>32-b}Object.defineProperty(k,"__esModule",{value:!0}),k.default=function(_){const b=[1518500249,1859775393,2400959708,3395469782],T=[1732584193,4023233417,2562383102,271733878,3285377520],v=new Uint8Array(_.length+1);v.set(_),v[_.length]=128;const f=(_=v).length/4+2,R=Math.ceil(f/16),g=new Array(R);for(let F=0;F<R;++F){const m=new Uint32Array(16);for(let P=0;P<16;++P)m[P]=_[64*F+4*P]<<24|_[64*F+4*P+1]<<16|_[64*F+4*P+2]<<8|_[64*F+4*P+3];g[F]=m}g[R-1][14]=8*(_.length-1)/Math.pow(2,32),g[R-1][14]=Math.floor(g[R-1][14]),g[R-1][15]=8*(_.length-1)&4294967295;for(let F=0;F<R;++F){const m=new Uint32Array(80);for(let w=0;w<16;++w)m[w]=g[F][w];for(let w=16;w<80;++w)m[w]=E(m[w-3]^m[w-8]^m[w-14]^m[w-16],1);let P=T[0],S=T[1],H=T[2],x=T[3],y=T[4];for(let w=0;w<80;++w){const p=Math.floor(w/20),C=E(P,5)+d(p,S,H,x)+y+b[p]+m[w]>>>0;y=x,x=H,H=E(S,30)>>>0,S=P,P=C}T[0]=T[0]+P>>>0,T[1]=T[1]+S>>>0,T[2]=T[2]+H>>>0,T[3]=T[3]+x>>>0,T[4]=T[4]+y>>>0}return Uint8Array.of(T[0]>>24,T[0]>>16,T[0]>>8,T[0],T[1]>>24,T[1]>>16,T[1]>>8,T[1],T[2]>>24,T[2]>>16,T[2]>>8,T[2],T[3]>>24,T[3]>>16,T[3]>>8,T[3],T[4]>>24,T[4]>>16,T[4]>>8,T[4])}},2901:(I,k,d)=>{d.d(k,{A:()=>b});var E=d(816);function _(T,v){for(var f=0;f<v.length;f++){var R=v[f];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(T,(0,E.A)(R.key),R)}}function b(T,v,f){return v&&_(T.prototype,v),f&&_(T,f),Object.defineProperty(T,"prototype",{writable:!1}),T}},2988:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.URL=k.DNS=k.stringToBytes=void 0;const E=d(1797),_=d(6011);function b(T){T=unescape(encodeURIComponent(T));const v=new Uint8Array(T.length);for(let f=0;f<T.length;++f)v[f]=T.charCodeAt(f);return v}k.stringToBytes=b,k.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",k.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",k.default=function(T,v,f,R,g,F){const m=typeof f=="string"?b(f):f,P=typeof R=="string"?(0,E.default)(R):R;if(typeof R=="string"&&(R=(0,E.default)(R)),R?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let S=new Uint8Array(16+m.length);if(S.set(P),S.set(m,P.length),S=v(S),S[6]=15&S[6]|T,S[8]=63&S[8]|128,g){F=F||0;for(let H=0;H<16;++H)g[F+H]=S[H];return g}return(0,_.unsafeStringify)(S)}},2994:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Logger=void 0;const E=d(7833),_="mediasoup-client";k.Logger=class{_debug;_warn;_error;constructor(b){b?(this._debug=(0,E.default)(`${_}:${b}`),this._warn=(0,E.default)(`${_}:WARN:${b}`),this._error=(0,E.default)(`${_}:ERROR:${b}`)):(this._debug=(0,E.default)(_),this._warn=(0,E.default)(`${_}:WARN`),this._error=(0,E.default)(`${_}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3009:function(I,k,d){var E;I.exports=(E=d(9021),function(_){var b=E,T=b.lib,v=T.WordArray,f=T.Hasher,R=b.algo,g=[],F=[];(function(){function S(w){for(var p=_.sqrt(w),C=2;C<=p;C++)if(!(w%C))return!1;return!0}function H(w){return 4294967296*(w-(0|w))|0}for(var x=2,y=0;y<64;)S(x)&&(y<8&&(g[y]=H(_.pow(x,.5))),F[y]=H(_.pow(x,.3333333333333333)),y++),x++})();var m=[],P=R.SHA256=f.extend({_doReset:function(){this._hash=new v.init(g.slice(0))},_doProcessBlock:function(S,H){for(var x=this._hash.words,y=x[0],w=x[1],p=x[2],C=x[3],A=x[4],M=x[5],j=x[6],U=x[7],z=0;z<64;z++){if(z<16)m[z]=0|S[H+z];else{var W=m[z-15],Z=(W<<25|W>>>7)^(W<<14|W>>>18)^W>>>3,ce=m[z-2],J=(ce<<15|ce>>>17)^(ce<<13|ce>>>19)^ce>>>10;m[z]=Z+m[z-7]+J+m[z-16]}var Ee=y&w^y&p^w&p,Ce=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),Re=U+((A<<26|A>>>6)^(A<<21|A>>>11)^(A<<7|A>>>25))+(A&M^~A&j)+F[z]+m[z];U=j,j=M,M=A,A=C+Re|0,C=p,p=w,w=y,y=Re+(Ce+Ee)|0}x[0]=x[0]+y|0,x[1]=x[1]+w|0,x[2]=x[2]+p|0,x[3]=x[3]+C|0,x[4]=x[4]+A|0,x[5]=x[5]+M|0,x[6]=x[6]+j|0,x[7]=x[7]+U|0},_doFinalize:function(){var S=this._data,H=S.words,x=8*this._nDataBytes,y=8*S.sigBytes;return H[y>>>5]|=128<<24-y%32,H[14+(y+64>>>9<<4)]=_.floor(x/4294967296),H[15+(y+64>>>9<<4)]=x,S.sigBytes=4*H.length,this._process(),this._hash},clone:function(){var S=f.clone.call(this);return S._hash=this._hash.clone(),S}});b.SHA256=f._createHelper(P),b.HmacSHA256=f._createHmacHelper(P)}(Math),E.SHA256)},3029:(I,k,d)=>{function E(_,b){if(!(_ instanceof b))throw new TypeError("Cannot call a class as a function")}d.d(k,{A:()=>E})},3128:function(I,k,d){var E;I.exports=(E=d(9021),d(754),d(4636),d(9506),d(7165),function(){var _=E,b=_.lib.BlockCipher,T=_.algo;const v=16,f=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],R=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var g={pbox:[],sbox:[]};function F(x,y){let w=y>>24&255,p=y>>16&255,C=y>>8&255,A=255&y,M=x.sbox[0][w]+x.sbox[1][p];return M^=x.sbox[2][C],M+=x.sbox[3][A],M}function m(x,y,w){let p,C=y,A=w;for(let M=0;M<v;++M)C^=x.pbox[M],A=F(x,C)^A,p=C,C=A,A=p;return p=C,C=A,A=p,A^=x.pbox[v],C^=x.pbox[v+1],{left:C,right:A}}function P(x,y,w){let p,C=y,A=w;for(let M=v+1;M>1;--M)C^=x.pbox[M],A=F(x,C)^A,p=C,C=A,A=p;return p=C,C=A,A=p,A^=x.pbox[1],C^=x.pbox[0],{left:C,right:A}}function S(x,y,w){for(let j=0;j<4;j++){x.sbox[j]=[];for(let U=0;U<256;U++)x.sbox[j][U]=R[j][U]}let p=0;for(let j=0;j<v+2;j++)x.pbox[j]=f[j]^y[p],p++,p>=w&&(p=0);let C=0,A=0,M=0;for(let j=0;j<v+2;j+=2)M=m(x,C,A),C=M.left,A=M.right,x.pbox[j]=C,x.pbox[j+1]=A;for(let j=0;j<4;j++)for(let U=0;U<256;U+=2)M=m(x,C,A),C=M.left,A=M.right,x.sbox[j][U]=C,x.sbox[j][U+1]=A;return!0}var H=T.Blowfish=b.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var x=this._keyPriorReset=this._key,y=x.words,w=x.sigBytes/4;S(g,y,w)}},encryptBlock:function(x,y){var w=m(g,x[y],x[y+1]);x[y]=w.left,x[y+1]=w.right},decryptBlock:function(x,y){var w=P(g,x[y],x[y+1]);x[y]=w.left,x[y+1]=w.right},blockSize:2,keySize:4,ivSize:2});_.Blowfish=b._createHelper(H)}(),E.Blowfish)},3145:(I,k,d)=>{function E(_,b){(b==null||b>_.length)&&(b=_.length);for(var T=0,v=Array(b);T<b;T++)v[T]=_[T];return v}d.d(k,{A:()=>E})},3200:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.ProfileLevelId=k.Level=k.Profile=void 0,k.parseProfileLevelId=m,k.profileLevelIdToString=P,k.profileToString=function(y){switch(y){case _.ConstrainedBaseline:return"ConstrainedBaseline";case _.Baseline:return"Baseline";case _.Main:return"Main";case _.ConstrainedHigh:return"ConstrainedHigh";case _.High:return"High";case _.PredictiveHigh444:return"PredictiveHigh444";default:return void E.warn(`profileToString() | unrecognized profile ${y}`)}},k.levelToString=function(y){switch(y){case b.L1_b:return"1b";case b.L1:return"1";case b.L1_1:return"1.1";case b.L1_2:return"1.2";case b.L1_3:return"1.3";case b.L2:return"2";case b.L2_1:return"2.1";case b.L2_2:return"2.2";case b.L3:return"3";case b.L3_1:return"3.1";case b.L3_2:return"3.2";case b.L4:return"4";case b.L4_1:return"4.1";case b.L4_2:return"4.2";case b.L5:return"5";case b.L5_1:return"5.1";case b.L5_2:return"5.2";default:return void E.warn(`levelToString() | unrecognized level ${y}`)}},k.parseSdpProfileLevelId=S,k.isSameProfile=function(y={},w={}){const p=S(y),C=S(w);return!!(p&&C&&p.profile===C.profile)},k.isSameProfileAndLevel=function(y={},w={}){const p=S(y),C=S(w);return!!(p&&C&&p.profile===C.profile&&p.level==C.level)},k.generateProfileLevelIdStringForAnswer=function(y={},w={}){if(!y["profile-level-id"]&&!w["profile-level-id"])return void E.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const p=S(y),C=S(w);if(!p)throw new TypeError("invalid local_profile_level_id");if(!C)throw new TypeError("invalid remote_profile_level_id");if(p.profile!==C.profile)throw new TypeError("H264 Profile mismatch");const A=x(y)&&x(w),M=p.level,j=C.level,U=(W=M,Z=j,function(ce,J){return ce===b.L1_b?J!==b.L1&&J!==b.L1_b:J===b.L1_b?ce!==b.L1:ce<J}(W,Z)?W:Z),z=A?M:U;var W,Z;return E.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${p.profile}, level:${z}]`),P(new T(p.profile,z))},k.supportedLevel=function(y,w){for(let p=F.length-1;p>=0;--p){const C=F[p];if(256*C.max_macroblock_frame_size<=y&&C.max_macroblocks_per_second<=w*C.max_macroblock_frame_size)return E.debug(`supportedLevel() | result [max_frame_pixel_count:${y}, max_fps:${w}, level:${C.level}]`),C.level}return void E.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${y}, max_fps:${w}]`)};const E=new(d(3582)).Logger;var _,b;(function(y){y[y.ConstrainedBaseline=1]="ConstrainedBaseline",y[y.Baseline=2]="Baseline",y[y.Main=3]="Main",y[y.ConstrainedHigh=4]="ConstrainedHigh",y[y.High=5]="High",y[y.PredictiveHigh444=6]="PredictiveHigh444"})(_||(k.Profile=_={})),function(y){y[y.L1_b=0]="L1_b",y[y.L1=10]="L1",y[y.L1_1=11]="L1_1",y[y.L1_2=12]="L1_2",y[y.L1_3=13]="L1_3",y[y.L2=20]="L2",y[y.L2_1=21]="L2_1",y[y.L2_2=22]="L2_2",y[y.L3=30]="L3",y[y.L3_1=31]="L3_1",y[y.L3_2=32]="L3_2",y[y.L4=40]="L4",y[y.L4_1=41]="L4_1",y[y.L4_2=42]="L4_2",y[y.L5=50]="L5",y[y.L5_1=51]="L5_1",y[y.L5_2=52]="L5_2"}(b||(k.Level=b={}));class T{constructor(w,p){this.profile=w,this.level=p}}k.ProfileLevelId=T;const v=new T(_.ConstrainedBaseline,b.L3_1);class f{constructor(w){this.mask=~H("x",w),this.masked_value=H("1",w)}isMatch(w){return this.masked_value===(w&this.mask)}}class R{constructor(w,p,C){this.profile_idc=w,this.profile_iop=p,this.profile=C}}const g=[new R(66,new f("x1xx0000"),_.ConstrainedBaseline),new R(77,new f("1xxx0000"),_.ConstrainedBaseline),new R(88,new f("11xx0000"),_.ConstrainedBaseline),new R(66,new f("x0xx0000"),_.Baseline),new R(88,new f("10xx0000"),_.Baseline),new R(77,new f("0x0x0000"),_.Main),new R(100,new f("00000000"),_.High),new R(100,new f("00001100"),_.ConstrainedHigh),new R(244,new f("00000000"),_.PredictiveHigh444)],F=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:b.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:b.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:b.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:b.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:b.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:b.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:b.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:b.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:b.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:b.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:b.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:b.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:b.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:b.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:b.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:b.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:b.L5_2}];function m(y){if(typeof y!="string"||y.length!==6)return;const w=parseInt(y,16);if(w===0)return;const p=255&w,C=w>>8&255,A=w>>16&255;let M;switch(p){case b.L1_1:M=16&C?b.L1_b:b.L1_1;break;case b.L1:case b.L1_2:case b.L1_3:case b.L2:case b.L2_1:case b.L2_2:case b.L3:case b.L3_1:case b.L3_2:case b.L4:case b.L4_1:case b.L4_2:case b.L5:case b.L5_1:case b.L5_2:M=p;break;default:return void E.warn(`parseProfileLevelId() | unrecognized level_idc [str:${y}, level_idc:${p}]`)}for(const j of g)if(A===j.profile_idc&&j.profile_iop.isMatch(C))return E.debug(`parseProfileLevelId() | result [str:${y}, profile:${j.profile}, level:${M}]`),new T(j.profile,M);E.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${y}, profile_idc:${A}, profile_iop:${C}]`)}function P(y){if(y.level==b.L1_b)switch(y.profile){case _.ConstrainedBaseline:return"42f00b";case _.Baseline:return"42100b";case _.Main:return"4d100b";default:return void E.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${y.profile}`)}let w;switch(y.profile){case _.ConstrainedBaseline:w="42e0";break;case _.Baseline:w="4200";break;case _.Main:w="4d00";break;case _.ConstrainedHigh:w="640c";break;case _.High:w="6400";break;case _.PredictiveHigh444:w="f400";break;default:return void E.warn(`profileLevelIdToString() | unrecognized profile ${y.profile}`)}let p=y.level.toString(16);return p.length===1&&(p=`0${p}`),`${w}${p}`}function S(y={}){const w=y["profile-level-id"];return w?m(w):v}function H(y,w){return+(w[0]===y)<<7|+(w[1]===y)<<6|+(w[2]===y)<<5|+(w[3]===y)<<4|+(w[4]===y)<<3|+(w[5]===y)<<2|+(w[6]===y)<<1|+(w[7]===y)}function x(y={}){const w=y["level-asymmetry-allowed"];return w===!0||w===1||w==="1"}},3240:function(I,k,d){var E;I.exports=(E=d(9021),function(_){var b=E,T=b.lib,v=T.Base,f=T.WordArray,R=b.x64={};R.Word=v.extend({init:function(g,F){this.high=g,this.low=F}}),R.WordArray=v.extend({init:function(g,F){g=this.words=g||[],this.sigBytes=F!=_?F:8*g.length},toX32:function(){for(var g=this.words,F=g.length,m=[],P=0;P<F;P++){var S=g[P];m.push(S.high),m.push(S.low)}return f.create(m,this.sigBytes)},clone:function(){for(var g=v.clone.call(this),F=g.words=this.words.slice(0),m=F.length,P=0;P<m;P++)F[P]=F[P].clone();return g}})}(),E)},3303:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.parse=function(E){const _=d.exec(E??"");return _?{spatialLayers:Number(_[1]),temporalLayers:Number(_[2])}:{spatialLayers:1,temporalLayers:1}};const d=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})")},3465:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.default="00000000-0000-0000-0000-000000000000"},3471:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.OfferMediaSection=k.AnswerMediaSection=k.MediaSection=void 0;const E=d(7363),_=d(1765);class b{_mediaObject;_planB;constructor({iceParameters:f,iceCandidates:R,dtlsParameters:g,planB:F=!1}){if(this._mediaObject={},this._planB=F,f&&this.setIceParameters(f),R){this._mediaObject.candidates=[];for(const m of R){const P={component:1};P.foundation=m.foundation,P.ip=m.address??m.ip,P.port=m.port,P.priority=m.priority,P.transport=m.protocol,P.type=m.type,m.tcpType&&(P.tcptype=m.tcpType),this._mediaObject.candidates.push(P)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}g&&this.setDtlsRole(g.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(f){this._mediaObject.iceUfrag=f.usernameFragment,this._mediaObject.icePwd=f.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}k.MediaSection=b,k.AnswerMediaSection=class extends b{constructor({iceParameters:v,iceCandidates:f,dtlsParameters:R,sctpParameters:g,plainRtpParameters:F,planB:m=!1,offerMediaObject:P,offerRtpParameters:S,answerRtpParameters:H,codecOptions:x}){switch(super({iceParameters:v,iceCandidates:f,dtlsParameters:R,planB:m}),this._mediaObject.mid=String(P.mid),this._mediaObject.type=P.type,this._mediaObject.protocol=P.protocol,F?(this._mediaObject.connection={ip:F.ip,version:F.ipVersion},this._mediaObject.port=F.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),P.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const y of H.codecs){const w={payload:y.payloadType,codec:T(y),rate:y.clockRate};y.channels>1&&(w.encoding=y.channels),this._mediaObject.rtp.push(w);const p=_.clone(y.parameters)??{};let C=_.clone(y.rtcpFeedback)??[];if(x){const{opusStereo:M,opusFec:j,opusDtx:U,opusMaxPlaybackRate:z,opusMaxAverageBitrate:W,opusPtime:Z,opusNack:ce,videoGoogleStartBitrate:J,videoGoogleMaxBitrate:Ee,videoGoogleMinBitrate:Ce}=x,Re=S.codecs.find(ye=>ye.payloadType===y.payloadType);switch(y.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":M!==void 0&&(Re.parameters["sprop-stereo"]=M?1:0,p.stereo=M?1:0),j!==void 0&&(Re.parameters.useinbandfec=j?1:0,p.useinbandfec=j?1:0),U!==void 0&&(Re.parameters.usedtx=U?1:0,p.usedtx=U?1:0),z!==void 0&&(p.maxplaybackrate=z),W!==void 0&&(p.maxaveragebitrate=W),Z!==void 0&&(Re.parameters.ptime=Z,p.ptime=Z),ce||(Re.rtcpFeedback=Re.rtcpFeedback.filter(ye=>ye.type!=="nack"||ye.parameter),C=C.filter(ye=>ye.type!=="nack"||ye.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":J!==void 0&&(p["x-google-start-bitrate"]=J),Ee!==void 0&&(p["x-google-max-bitrate"]=Ee),Ce!==void 0&&(p["x-google-min-bitrate"]=Ce)}}const A={payload:y.payloadType,config:""};for(const M of Object.keys(p))A.config&&(A.config+=";"),A.config+=`${M}=${p[M]}`;A.config&&this._mediaObject.fmtp.push(A);for(const M of C)this._mediaObject.rtcpFb.push({payload:y.payloadType,type:M.type,subtype:M.parameter})}this._mediaObject.payloads=H.codecs.map(y=>y.payloadType).join(" "),this._mediaObject.ext=[];for(const y of H.headerExtensions)(P.ext??[]).some(w=>w.uri===y.uri)&&this._mediaObject.ext.push({uri:y.uri,value:y.id});if(P.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),P.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:P.simulcast.list1},this._mediaObject.rids=[];for(const y of P.rids??[])y.direction==="send"&&this._mediaObject.rids.push({id:y.id,direction:"recv"})}else if(P.simulcast_03){this._mediaObject.simulcast_03={value:P.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const y of P.rids??[])y.direction==="send"&&this._mediaObject.rids.push({id:y.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof P.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=g.port,this._mediaObject.maxMessageSize=g.maxMessageSize):P.sctpmap&&(this._mediaObject.payloads=g.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:g.port,maxMessageSize:g.maxMessageSize})}}setDtlsRole(v){switch(v){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(v){if(!this._mediaObject.simulcast?.list1)return;const f={};for(const F of v)F.rid&&(f[F.rid]=F);const R=this._mediaObject.simulcast.list1,g=E.parseSimulcastStreamList(R);for(const F of g)for(const m of F)m.paused=!f[m.scid]?.active;this._mediaObject.simulcast.list1=g.map(F=>F.map(m=>`${m.paused?"~":""}${m.scid}`).join(",")).join(";")}};function T(v){const f=new RegExp("^(audio|video)/(.+)","i").exec(v.mimeType);if(!f)throw new TypeError("invalid codec.mimeType");return f[2]}k.OfferMediaSection=class extends b{constructor({iceParameters:v,iceCandidates:f,dtlsParameters:R,sctpParameters:g,plainRtpParameters:F,planB:m=!1,mid:P,kind:S,offerRtpParameters:H,streamId:x,trackId:y,oldDataChannelSpec:w=!1}){switch(super({iceParameters:v,iceCandidates:f,dtlsParameters:R,planB:m}),this._mediaObject.mid=String(P),this._mediaObject.type=S,F?(this._mediaObject.connection={ip:F.ip,version:F.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=F.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=g?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",S){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${x??"-"} ${y}`);for(const M of H.codecs){const j={payload:M.payloadType,codec:T(M),rate:M.clockRate};M.channels>1&&(j.encoding=M.channels),this._mediaObject.rtp.push(j);const U={payload:M.payloadType,config:""};for(const z of Object.keys(M.parameters))U.config&&(U.config+=";"),U.config+=`${z}=${M.parameters[z]}`;U.config&&this._mediaObject.fmtp.push(U);for(const z of M.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:M.payloadType,type:z.type,subtype:z.parameter})}this._mediaObject.payloads=H.codecs.map(M=>M.payloadType).join(" "),this._mediaObject.ext=[];for(const M of H.headerExtensions)this._mediaObject.ext.push({uri:M.uri,value:M.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const p=H.encodings[0],C=p.ssrc,A=p.rtx?.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],H.rtcp.cname&&this._mediaObject.ssrcs.push({id:C,attribute:"cname",value:H.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:C,attribute:"msid",value:`${x??"-"} ${y}`}),A&&(H.rtcp.cname&&this._mediaObject.ssrcs.push({id:A,attribute:"cname",value:H.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:A,attribute:"msid",value:`${x??"-"} ${y}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${C} ${A}`}));break}case"application":w?(this._mediaObject.payloads=g.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:g.port,maxMessageSize:g.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=g.port,this._mediaObject.maxMessageSize=g.maxMessageSize)}}setDtlsRole(v){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:v,streamId:f,trackId:R}){const g=v.encodings[0],F=g.ssrc,m=g.rtx?.ssrc,P=this._mediaObject.payloads.split(" ");for(const S of v.codecs){if(P.includes(String(S.payloadType)))continue;const H={payload:S.payloadType,codec:T(S),rate:S.clockRate};S.channels>1&&(H.encoding=S.channels),this._mediaObject.rtp.push(H);const x={payload:S.payloadType,config:""};for(const y of Object.keys(S.parameters))x.config&&(x.config+=";"),x.config+=`${y}=${S.parameters[y]}`;x.config&&this._mediaObject.fmtp.push(x);for(const y of S.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:S.payloadType,type:y.type,subtype:y.parameter})}this._mediaObject.payloads+=` ${v.codecs.filter(S=>!this._mediaObject.payloads.includes(S.payloadType)).map(S=>S.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),v.rtcp.cname&&this._mediaObject.ssrcs.push({id:F,attribute:"cname",value:v.rtcp.cname}),this._mediaObject.ssrcs.push({id:F,attribute:"msid",value:`${f??"-"} ${R}`}),m&&(v.rtcp.cname&&this._mediaObject.ssrcs.push({id:m,attribute:"cname",value:v.rtcp.cname}),this._mediaObject.ssrcs.push({id:m,attribute:"msid",value:`${f??"-"} ${R}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${F} ${m}`}))}planBStopReceiving({offerRtpParameters:v}){const f=v.encodings[0],R=f.ssrc,g=f.rtx?.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(F=>F.id!==R&&F.id!==g),g&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(F=>F.ssrcs!==`${R} ${g}`))}}},3518:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Consumer=void 0;const E=d(2994),_=d(3953),b=d(4893),T=new E.Logger("Consumer");class v extends _.EnhancedEventEmitter{_id;_localId;_producerId;_closed=!1;_rtpReceiver;_track;_rtpParameters;_paused;_appData;_observer=new _.EnhancedEventEmitter;constructor({id:R,localId:g,producerId:F,rtpReceiver:m,track:P,rtpParameters:S,appData:H}){super(),T.debug("constructor()"),this._id=R,this._localId=g,this._producerId=F,this._rtpReceiver=m,this._track=P,this._rtpParameters=S,this._paused=!P.enabled,this._appData=H??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(R){this._appData=R}get observer(){return this._observer}close(){this._closed||(T.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(T.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new b.InvalidStateError("closed");return new Promise((R,g)=>{this.safeEmit("@getstats",R,g)})}pause(){T.debug("pause()"),this._closed?T.error("pause() | Consumer closed"):this._paused?T.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){T.debug("resume()"),this._closed?T.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):T.debug("resume() | Consumer is already resumed")}onTrackEnded(){T.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}k.Consumer=v},3582:function(I,k,d){var E=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(k,"__esModule",{value:!0}),k.Logger=void 0;const _=E(d(7833)),b="h264-profile-level-id";k.Logger=class{constructor(T){T?(this._debug=(0,_.default)(`${b}:${T}`),this._warn=(0,_.default)(`${b}:WARN:${T}`),this._error=(0,_.default)(`${b}:ERROR:${T}`)):(this._debug=(0,_.default)(b),this._warn=(0,_.default)(`${b}:WARN`),this._error=(0,_.default)(`${b}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3662:(I,k,d)=>{function E(_,b){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,v){return T.__proto__=v,T},E(_,b)}d.d(k,{A:()=>E})},3738:I=>{function k(d){return I.exports=k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},I.exports.__esModule=!0,I.exports.default=I.exports,k(d)}I.exports=k,I.exports.__esModule=!0,I.exports.default=I.exports},3779:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0});const d=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);k.default={randomUUID:d}},3785:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.clone=function(d){return d===void 0?void 0:Number.isNaN(d)?NaN:typeof structuredClone=="function"?structuredClone(d):JSON.parse(JSON.stringify(d))}},3797:function(I,k,d){var E,_,b;I.exports=(b=d(9021),d(7165),b.mode.OFB=(E=b.lib.BlockCipherMode.extend(),_=E.Encryptor=E.extend({processBlock:function(T,v){var f=this._cipher,R=f.blockSize,g=this._iv,F=this._keystream;g&&(F=this._keystream=g.slice(0),this._iv=void 0),f.encryptBlock(F,0);for(var m=0;m<R;m++)T[v+m]^=F[m]}}),E.Decryptor=_,E),b.mode.OFB)},3804:(I,k,d)=>{var E=d(5602),_=/%[sdv%]/g,b=function(R){var g=1,F=arguments,m=F.length;return R.replace(_,function(P){if(g>=m)return P;var S=F[g];switch(g+=1,P){case"%%":return"%";case"%s":return String(S);case"%d":return Number(S);case"%v":return""}})},T=function(R,g,F){var m=[R+"="+(g.format instanceof Function?g.format(g.push?F:F[g.name]):g.format)];if(g.names)for(var P=0;P<g.names.length;P+=1){var S=g.names[P];g.name?m.push(F[g.name][S]):m.push(F[g.names[P]])}else m.push(F[g.name]);return b.apply(null,m)},v=["v","o","s","i","u","e","p","c","b","t","r","z","a"],f=["i","c","b","a"];I.exports=function(R,g){g=g||{},R.version==null&&(R.version=0),R.name==null&&(R.name=" "),R.media.forEach(function(S){S.payloads==null&&(S.payloads="")});var F=g.outerOrder||v,m=g.innerOrder||f,P=[];return F.forEach(function(S){E[S].forEach(function(H){H.name in R&&R[H.name]!=null?P.push(T(S,H,R)):H.push in R&&R[H.push]!=null&&R[H.push].forEach(function(x){P.push(T(S,H,x))})})}),R.media.forEach(function(S){P.push(T("m",E.m[0],S)),m.forEach(function(H){E[H].forEach(function(x){x.name in S&&S[x.name]!=null?P.push(T(H,x,S)):x.push in S&&S[x.push]!=null&&S[x.push].forEach(function(y){P.push(T(H,x,y))})})})}),P.join(`\r
`)+`\r
`}},3953:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.EnhancedEventEmitter=void 0;const E=d(9596),_=new(d(2994)).Logger("EnhancedEventEmitter");class b extends E.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(v,...f){return super.emit(v,...f)}safeEmit(v,...f){try{return super.emit(v,...f)}catch(R){_.error("safeEmit() | event listener threw an error [eventName:%s]:%o",v,R);try{super.emit("listenererror",v,R)}catch{}return!!super.listenerCount(v)}}on(v,f){return super.on(v,f),this}off(v,f){return super.off(v,f),this}addListener(v,f){return super.on(v,f),this}prependListener(v,f){return super.prependListener(v,f),this}once(v,f){return super.once(v,f),this}prependOnceListener(v,f){return super.prependOnceListener(v,f),this}removeListener(v,f){return super.off(v,f),this}removeAllListeners(v){return super.removeAllListeners(v),this}listenerCount(v){return super.listenerCount(v)}listeners(v){return super.listeners(v)}rawListeners(v){return super.rawListeners(v)}}k.EnhancedEventEmitter=b},3954:(I,k,d)=>{function E(_){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},E(_)}d.d(k,{A:()=>E})},4039:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.ReactNativeUnifiedPlan=void 0;const E=d(7363),_=d(2994),b=d(1765),T=d(8046),v=d(5544),f=d(5938),R=d(4256),g=d(4893),F=d(521),m=d(1305),P=d(3303),S=new _.Logger("ReactNativeUnifiedPlan"),H={OS:1024,MIS:1024};class x extends F.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new x}constructor(){super()}get name(){return"ReactNativeUnifiedPlan"}close(){if(S.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const w=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{w.addTransceiver("audio"),w.addTransceiver("video");const p=await w.createOffer();try{w.close()}catch{}const C=E.parse(p.sdp),A=v.extractRtpCapabilities({sdpObject:C});return R.addNackSupportForOpus(A),A}catch(p){try{w.close()}catch{}throw p}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:H}}run({direction:w,iceParameters:p,iceCandidates:C,dtlsParameters:A,sctpParameters:M,iceServers:j,iceTransportPolicy:U,additionalSettings:z,proprietaryConstraints:W,extendedRtpCapabilities:Z}){this.assertNotClosed(),S.debug("run()"),this._direction=w,this._remoteSdp=new m.RemoteSdp({iceParameters:p,iceCandidates:C,dtlsParameters:A,sctpParameters:M}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",Z),video:T.getSendingRtpParameters("video",Z)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",Z),video:T.getSendingRemoteRtpParameters("video",Z)},A.role&&A.role!=="auto"&&(this._forcedLocalDtlsRole=A.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:j??[],iceTransportPolicy:U??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...z},W),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ce=>{this.emit("@icecandidateerror",ce)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(w){this.assertNotClosed(),S.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=w,this._pc.setConfiguration(p)}async restartIce(w){if(this.assertNotClosed(),S.debug("restartIce()"),this._remoteSdp.updateIceParameters(w),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const C={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:w,encodings:p,codecOptions:C,codec:A,onRtpSender:M}){this.assertNotClosed(),this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",w.kind,w.id),p&&p.length>1&&p.forEach((Te,He)=>{Te.rid=`r${He}`});const j=b.clone(this._sendingRtpParametersByKind[w.kind]);j.codecs=T.reduceCodecs(j.codecs,A);const U=b.clone(this._sendingRemoteRtpParametersByKind[w.kind]);U.codecs=T.reduceCodecs(U.codecs,A);const z=this._remoteSdp.getNextMediaSectionIdx(),W=this._pc.addTransceiver(w,{direction:"sendonly",streams:[this._sendStream],sendEncodings:p});M&&M(W.sender);let Z,ce=await this._pc.createOffer(),J=E.parse(ce.sdp);J.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J});let Ee=!1;const Ce=(0,P.parse)((p??[{}])[0].scalabilityMode);p&&p.length===1&&Ce.spatialLayers>1&&j.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(S.debug("send() | enabling legacy simulcast for VP9 SVC"),Ee=!0,J=E.parse(ce.sdp),Z=J.media[z.idx],f.addLegacySimulcast({offerMediaObject:Z,numStreams:Ce.spatialLayers}),ce={type:"offer",sdp:E.write(J)}),S.debug("send() | calling pc.setLocalDescription() [offer:%o]",ce),await this._pc.setLocalDescription(ce);let Re=W.mid??void 0;if(Re||S.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),j.mid=Re,J=E.parse(this._pc.localDescription.sdp),Z=J.media[z.idx],j.rtcp.cname=v.getCname({offerMediaObject:Z}),p)if(p.length===1){let Te=f.getRtpEncodings({offerMediaObject:Z});Object.assign(Te[0],p[0]),Ee&&(Te=[Te[0]]),j.encodings=Te}else j.encodings=p;else j.encodings=f.getRtpEncodings({offerMediaObject:Z});if(j.encodings.length>1&&(j.codecs[0].mimeType.toLowerCase()==="video/vp8"||j.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Te of j.encodings)Te.scalabilityMode?Te.scalabilityMode=`L1T${Ce.temporalLayers}`:Te.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Z,reuseMid:z.reuseMid,offerRtpParameters:j,answerRtpParameters:U,codecOptions:C});const ye={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ye),await this._pc.setRemoteDescription(ye),Re||(Re=W.mid,j.mid=Re),this._mapMidTransceiver.set(Re,W),{localId:Re,rtpParameters:j,rtpSender:W.sender}}async stopSending(w){if(this.assertSendDirection(),this._closed)return;S.debug("stopSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const C=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._mapMidTransceiver.delete(w)}async pauseSending(w){this.assertNotClosed(),this.assertSendDirection(),S.debug("pauseSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(w);const C=await this._pc.createOffer();S.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async resumeSending(w){this.assertNotClosed(),this.assertSendDirection(),S.debug("resumeSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(this._remoteSdp.resumeSendingMediaSection(w),!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly";const C=await this._pc.createOffer();S.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async replaceTrack(w,p){this.assertNotClosed(),this.assertSendDirection(),p?S.debug("replaceTrack() [localId:%s, track.id:%s]",w,p.id):S.debug("replaceTrack() [localId:%s, no track]",w);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");await C.sender.replaceTrack(p)}async setMaxSpatialLayer(w,p){this.assertNotClosed(),this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",w,p);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");const A=C.sender.getParameters();A.encodings.forEach((U,z)=>{U.active=z<=p}),await C.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const M=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const j={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async setRtpEncodingParameters(w,p){this.assertNotClosed(),this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",w,p);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");const A=C.sender.getParameters();A.encodings.forEach((U,z)=>{A.encodings[z]={...U,...p}}),await C.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const M=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const j={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async getSenderStats(w){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:w,maxPacketLifeTime:p,maxRetransmits:C,label:A,protocol:M}){this.assertNotClosed(),this.assertSendDirection();const j={negotiated:!0,id:this._nextSendSctpStreamId,ordered:w,maxPacketLifeTime:p,maxRetransmits:C,protocol:M};S.debug("sendDataChannel() [options:%o]",j);const U=this._pc.createDataChannel(A,j);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%H.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),W=E.parse(z.sdp),Z=W.media.find(J=>J.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:Z});const ce={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setRemoteDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:U,sctpStreamParameters:{streamId:j.id,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits}}}async receive(w){this.assertNotClosed(),this.assertRecvDirection();const p=[],C=new Map;for(const U of w){const{trackId:z,kind:W,rtpParameters:Z,streamId:ce}=U;S.debug("receive() [trackId:%s, kind:%s]",z,W);const J=Z.mid??String(this._mapMidTransceiver.size);C.set(z,J),this._remoteSdp.receive({mid:J,kind:W,offerRtpParameters:Z,streamId:ce??Z.rtcp.cname,trackId:z})}const A={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",A),await this._pc.setRemoteDescription(A);for(const U of w){const{trackId:z,onRtpReceiver:W}=U;if(W){const Z=C.get(z),ce=this._pc.getTransceivers().find(J=>J.mid===Z);if(!ce)throw new Error("transceiver not found");W(ce.receiver)}}let M=await this._pc.createAnswer();const j=E.parse(M.sdp);for(const U of w){const{trackId:z,rtpParameters:W}=U,Z=C.get(z),ce=j.media.find(J=>String(J.mid)===Z);v.applyCodecParameters({offerRtpParameters:W,answerMediaObject:ce})}M={type:"answer",sdp:E.write(j)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",M),await this._pc.setLocalDescription(M);for(const U of w){const{trackId:z}=U,W=C.get(z),Z=this._pc.getTransceivers().find(ce=>ce.mid===W);if(!Z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(W,Z),p.push({localId:W,track:Z.receiver.track,rtpReceiver:Z.receiver})}return p}async stopReceiving(w){if(this.assertRecvDirection(),this._closed)return;for(const A of w){S.debug("stopReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(M.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C);for(const A of w)this._mapMidTransceiver.delete(A)}async pauseReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){S.debug("pauseReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="inactive",this._remoteSdp.pauseMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}async resumeReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){S.debug("resumeReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}async getReceiverStats(w){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:w,label:p,protocol:C}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:A,ordered:M,maxPacketLifeTime:j,maxRetransmits:U}=w,z={negotiated:!0,id:A,ordered:M,maxPacketLifeTime:j,maxRetransmits:U,protocol:C};S.debug("receiveDataChannel() [options:%o]",z);const W=this._pc.createDataChannel(p,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Z={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Z),await this._pc.setRemoteDescription(Z);const ce=await this._pc.createAnswer();if(!this._transportReady){const J=E.parse(ce.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setLocalDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:W}}async setupTransport({localDtlsRole:w,localSdpObject:p}){p||(p=E.parse(this._pc.localDescription.sdp));const C=v.extractDtlsParameters({sdpObject:p});C.role=w,this._remoteSdp.updateDtlsRole(w==="client"?"server":"client"),await new Promise((A,M)=>{this.safeEmit("@connect",{dtlsParameters:C},A,M)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.ReactNativeUnifiedPlan=x},4160:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0})},4253:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.AwaitQueueRemovedTaskError=k.AwaitQueueStoppedError=void 0;class d extends Error{constructor(b){super(b??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,d)}}k.AwaitQueueStoppedError=d;class E extends Error{constructor(b){super(b??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,E)}}k.AwaitQueueRemovedTaskError=E},4256:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.addNackSupportForOpus=function(d){for(const E of d.codecs??[])E.mimeType.toLowerCase()!=="audio/opus"&&E.mimeType.toLowerCase()!=="audio/multiopus"||E.rtcpFeedback?.some(_=>_.type==="nack"&&!_.parameter)||(E.rtcpFeedback||(E.rtcpFeedback=[]),E.rtcpFeedback.push({type:"nack"}))}},4299:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.updateV7State=void 0;const E=d(2291),_=d(6011),b={};function T(f,R,g){return f.msecs??=-1/0,f.seq??=0,R>f.msecs?(f.seq=g[6]<<23|g[7]<<16|g[8]<<8|g[9],f.msecs=R):(f.seq=f.seq+1|0,f.seq===0&&f.msecs++),f}function v(f,R,g,F,m=0){if(f.length<16)throw new Error("Random bytes length must be >= 16");if(F){if(m<0||m+16>F.length)throw new RangeError(`UUID byte range ${m}:${m+15} is out of buffer bounds`)}else F=new Uint8Array(16),m=0;return R??=Date.now(),g??=127*f[6]<<24|f[7]<<16|f[8]<<8|f[9],F[m++]=R/1099511627776&255,F[m++]=R/4294967296&255,F[m++]=R/16777216&255,F[m++]=R/65536&255,F[m++]=R/256&255,F[m++]=255&R,F[m++]=112|g>>>28&15,F[m++]=g>>>20&255,F[m++]=128|g>>>14&63,F[m++]=g>>>6&255,F[m++]=g<<2&255|3&f[10],F[m++]=f[11],F[m++]=f[12],F[m++]=f[13],F[m++]=f[14],F[m++]=f[15],F}k.updateV7State=T,k.default=function(f,R,g){let F;if(f)F=v(f.random??f.rng?.()??(0,E.default)(),f.msecs,f.seq,R,g);else{const m=Date.now(),P=(0,E.default)();T(b,m,P),F=v(P,b.msecs,b.seq,R,g)}return R??(0,_.unsafeStringify)(F)}},4373:I=>{I.exports=function(k){var d=Object(k),E=[];for(var _ in d)E.unshift(_);return function b(){for(;E.length;)if((_=E.pop())in d)return b.value=_,b.done=!1,b;return b.done=!0,b}},I.exports.__esModule=!0,I.exports.default=I.exports},4467:(I,k,d)=>{d.d(k,{A:()=>_});var E=d(816);function _(b,T,v){return(T=(0,E.A)(T))in b?Object.defineProperty(b,T,{value:v,enumerable:!0,configurable:!0,writable:!0}):b[T]=v,b}},4496:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getRtpEncodings=function({offerMediaObject:d,track:E}){const _=new Set;for(const v of d.ssrcs??[])if(v.attribute==="msid"&&v.value.split(" ")[1]===E.id){const f=v.id;_.add(f)}if(_.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${E.id}]`);const b=new Map;for(const v of d.ssrcGroups??[]){if(v.semantics!=="FID")continue;let[f,R]=v.ssrcs.split(/\s+/);f=Number(f),R=Number(R),_.has(f)&&(_.delete(f),_.delete(R),b.set(f,R))}for(const v of _)b.set(v,null);const T=[];for(const[v,f]of b){const R={ssrc:v};f&&(R.rtx={ssrc:f}),T.push(R)}return T},k.addLegacySimulcast=function({offerMediaObject:d,track:E,numStreams:_}){if(_<=1)throw new TypeError("numStreams must be greater than 1");let b,T,v;if(!(d.ssrcs??[]).find(m=>m.attribute!=="msid"?!1:m.value.split(" ")[1]===E.id&&(b=m.id,v=m.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${E.id}]`);(d.ssrcGroups??[]).some(m=>{if(m.semantics!=="FID")return!1;const P=m.ssrcs.split(/\s+/);return Number(P[0])===b&&(T=Number(P[1]),!0)});const f=d.ssrcs.find(m=>m.attribute==="cname"&&m.id===b);if(!f)throw new Error(`a=ssrc line with cname information not found [track.id:${E.id}]`);const R=f.value,g=[],F=[];for(let m=0;m<_;++m)g.push(b+m),T&&F.push(T+m);d.ssrcGroups=d.ssrcGroups??[],d.ssrcs=d.ssrcs??[],d.ssrcGroups.push({semantics:"SIM",ssrcs:g.join(" ")});for(const m of g)d.ssrcs.push({id:m,attribute:"cname",value:R}),d.ssrcs.push({id:m,attribute:"msid",value:`${v} ${E.id}`});for(let m=0;m<F.length;++m){const P=g[m],S=F[m];d.ssrcs.push({id:S,attribute:"cname",value:R}),d.ssrcs.push({id:S,attribute:"msid",value:`${v} ${E.id}`}),d.ssrcGroups.push({semantics:"FID",ssrcs:`${P} ${S}`})}}},4557:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.URL=k.DNS=void 0;const E=d(2829),_=d(2988);var b=d(2988);function T(v,f,R,g){return(0,_.default)(80,E.default,v,f,R,g)}Object.defineProperty(k,"DNS",{enumerable:!0,get:function(){return b.DNS}}),Object.defineProperty(k,"URL",{enumerable:!0,get:function(){return b.URL}}),T.DNS=_.DNS,T.URL=_.URL,k.default=T},4633:(I,k,d)=>{var E=d(5172),_=d(6993),b=d(5869),T=d(887),v=d(1791),f=d(4373),R=d(579);function g(){var F=_(),m=F.m(g),P=(Object.getPrototypeOf?Object.getPrototypeOf(m):m.__proto__).constructor;function S(y){var w=typeof y=="function"&&y.constructor;return!!w&&(w===P||(w.displayName||w.name)==="GeneratorFunction")}var H={throw:1,return:2,break:3,continue:3};function x(y){var w,p;return function(C){w||(w={stop:function(){return p(C.a,2)},catch:function(){return C.v},abrupt:function(A,M){return p(C.a,H[A],M)},delegateYield:function(A,M,j){return w.resultName=M,p(C.d,R(A),j)},finish:function(A){return p(C.f,A)}},p=function(A,M,j){C.p=w.prev,C.n=w.next;try{return A(M,j)}finally{w.next=C.n}}),w.resultName&&(w[w.resultName]=C.v,w.resultName=void 0),w.sent=C.v,w.next=C.n;try{return y.call(this,w)}finally{C.p=w.prev,C.n=w.next}}}return(I.exports=g=function(){return{wrap:function(y,w,p,C){return F.w(x(y),w,p,C&&C.reverse())},isGeneratorFunction:S,mark:F.m,awrap:function(y,w){return new E(y,w)},AsyncIterator:v,async:function(y,w,p,C,A){return(S(w)?T:b)(x(y),w,p,C,A)},keys:f,values:R}},I.exports.__esModule=!0,I.exports.default=I.exports)()}I.exports=g,I.exports.__esModule=!0,I.exports.default=I.exports},4636:function(I,k,d){var E;I.exports=(E=d(9021),function(_){var b=E,T=b.lib,v=T.WordArray,f=T.Hasher,R=b.algo,g=[];(function(){for(var x=0;x<64;x++)g[x]=4294967296*_.abs(_.sin(x+1))|0})();var F=R.MD5=f.extend({_doReset:function(){this._hash=new v.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,y){for(var w=0;w<16;w++){var p=y+w,C=x[p];x[p]=16711935&(C<<8|C>>>24)|4278255360&(C<<24|C>>>8)}var A=this._hash.words,M=x[y+0],j=x[y+1],U=x[y+2],z=x[y+3],W=x[y+4],Z=x[y+5],ce=x[y+6],J=x[y+7],Ee=x[y+8],Ce=x[y+9],Re=x[y+10],ye=x[y+11],Te=x[y+12],He=x[y+13],we=x[y+14],Je=x[y+15],Be=A[0],nt=A[1],Qe=A[2],Ze=A[3];Be=m(Be,nt,Qe,Ze,M,7,g[0]),Ze=m(Ze,Be,nt,Qe,j,12,g[1]),Qe=m(Qe,Ze,Be,nt,U,17,g[2]),nt=m(nt,Qe,Ze,Be,z,22,g[3]),Be=m(Be,nt,Qe,Ze,W,7,g[4]),Ze=m(Ze,Be,nt,Qe,Z,12,g[5]),Qe=m(Qe,Ze,Be,nt,ce,17,g[6]),nt=m(nt,Qe,Ze,Be,J,22,g[7]),Be=m(Be,nt,Qe,Ze,Ee,7,g[8]),Ze=m(Ze,Be,nt,Qe,Ce,12,g[9]),Qe=m(Qe,Ze,Be,nt,Re,17,g[10]),nt=m(nt,Qe,Ze,Be,ye,22,g[11]),Be=m(Be,nt,Qe,Ze,Te,7,g[12]),Ze=m(Ze,Be,nt,Qe,He,12,g[13]),Qe=m(Qe,Ze,Be,nt,we,17,g[14]),Be=P(Be,nt=m(nt,Qe,Ze,Be,Je,22,g[15]),Qe,Ze,j,5,g[16]),Ze=P(Ze,Be,nt,Qe,ce,9,g[17]),Qe=P(Qe,Ze,Be,nt,ye,14,g[18]),nt=P(nt,Qe,Ze,Be,M,20,g[19]),Be=P(Be,nt,Qe,Ze,Z,5,g[20]),Ze=P(Ze,Be,nt,Qe,Re,9,g[21]),Qe=P(Qe,Ze,Be,nt,Je,14,g[22]),nt=P(nt,Qe,Ze,Be,W,20,g[23]),Be=P(Be,nt,Qe,Ze,Ce,5,g[24]),Ze=P(Ze,Be,nt,Qe,we,9,g[25]),Qe=P(Qe,Ze,Be,nt,z,14,g[26]),nt=P(nt,Qe,Ze,Be,Ee,20,g[27]),Be=P(Be,nt,Qe,Ze,He,5,g[28]),Ze=P(Ze,Be,nt,Qe,U,9,g[29]),Qe=P(Qe,Ze,Be,nt,J,14,g[30]),Be=S(Be,nt=P(nt,Qe,Ze,Be,Te,20,g[31]),Qe,Ze,Z,4,g[32]),Ze=S(Ze,Be,nt,Qe,Ee,11,g[33]),Qe=S(Qe,Ze,Be,nt,ye,16,g[34]),nt=S(nt,Qe,Ze,Be,we,23,g[35]),Be=S(Be,nt,Qe,Ze,j,4,g[36]),Ze=S(Ze,Be,nt,Qe,W,11,g[37]),Qe=S(Qe,Ze,Be,nt,J,16,g[38]),nt=S(nt,Qe,Ze,Be,Re,23,g[39]),Be=S(Be,nt,Qe,Ze,He,4,g[40]),Ze=S(Ze,Be,nt,Qe,M,11,g[41]),Qe=S(Qe,Ze,Be,nt,z,16,g[42]),nt=S(nt,Qe,Ze,Be,ce,23,g[43]),Be=S(Be,nt,Qe,Ze,Ce,4,g[44]),Ze=S(Ze,Be,nt,Qe,Te,11,g[45]),Qe=S(Qe,Ze,Be,nt,Je,16,g[46]),Be=H(Be,nt=S(nt,Qe,Ze,Be,U,23,g[47]),Qe,Ze,M,6,g[48]),Ze=H(Ze,Be,nt,Qe,J,10,g[49]),Qe=H(Qe,Ze,Be,nt,we,15,g[50]),nt=H(nt,Qe,Ze,Be,Z,21,g[51]),Be=H(Be,nt,Qe,Ze,Te,6,g[52]),Ze=H(Ze,Be,nt,Qe,z,10,g[53]),Qe=H(Qe,Ze,Be,nt,Re,15,g[54]),nt=H(nt,Qe,Ze,Be,j,21,g[55]),Be=H(Be,nt,Qe,Ze,Ee,6,g[56]),Ze=H(Ze,Be,nt,Qe,Je,10,g[57]),Qe=H(Qe,Ze,Be,nt,ce,15,g[58]),nt=H(nt,Qe,Ze,Be,He,21,g[59]),Be=H(Be,nt,Qe,Ze,W,6,g[60]),Ze=H(Ze,Be,nt,Qe,ye,10,g[61]),Qe=H(Qe,Ze,Be,nt,U,15,g[62]),nt=H(nt,Qe,Ze,Be,Ce,21,g[63]),A[0]=A[0]+Be|0,A[1]=A[1]+nt|0,A[2]=A[2]+Qe|0,A[3]=A[3]+Ze|0},_doFinalize:function(){var x=this._data,y=x.words,w=8*this._nDataBytes,p=8*x.sigBytes;y[p>>>5]|=128<<24-p%32;var C=_.floor(w/4294967296),A=w;y[15+(p+64>>>9<<4)]=16711935&(C<<8|C>>>24)|4278255360&(C<<24|C>>>8),y[14+(p+64>>>9<<4)]=16711935&(A<<8|A>>>24)|4278255360&(A<<24|A>>>8),x.sigBytes=4*(y.length+1),this._process();for(var M=this._hash,j=M.words,U=0;U<4;U++){var z=j[U];j[U]=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8)}return M},clone:function(){var x=f.clone.call(this);return x._hash=this._hash.clone(),x}});function m(x,y,w,p,C,A,M){var j=x+(y&w|~y&p)+C+M;return(j<<A|j>>>32-A)+y}function P(x,y,w,p,C,A,M){var j=x+(y&p|w&~p)+C+M;return(j<<A|j>>>32-A)+y}function S(x,y,w,p,C,A,M){var j=x+(y^w^p)+C+M;return(j<<A|j>>>32-A)+y}function H(x,y,w,p,C,A,M){var j=x+(w^(y|~p))+C+M;return(j<<A|j>>>32-A)+y}b.MD5=f._createHelper(F),b.HmacMD5=f._createHmacHelper(F)}(Math),E.MD5)},4725:function(I,k,d){var E;I.exports=(E=d(9021),function(){var _=E,b=_.lib.WordArray;function T(v,f,R){for(var g=[],F=0,m=0;m<f;m++)if(m%4){var P=R[v.charCodeAt(m-1)]<<m%4*2|R[v.charCodeAt(m)]>>>6-m%4*2;g[F>>>2]|=P<<24-F%4*8,F++}return b.create(g,F)}_.enc.Base64url={stringify:function(v,f){f===void 0&&(f=!0);var R=v.words,g=v.sigBytes,F=f?this._safe_map:this._map;v.clamp();for(var m=[],P=0;P<g;P+=3)for(var S=(R[P>>>2]>>>24-P%4*8&255)<<16|(R[P+1>>>2]>>>24-(P+1)%4*8&255)<<8|R[P+2>>>2]>>>24-(P+2)%4*8&255,H=0;H<4&&P+.75*H<g;H++)m.push(F.charAt(S>>>6*(3-H)&63));var x=F.charAt(64);if(x)for(;m.length%4;)m.push(x);return m.join("")},parse:function(v,f){f===void 0&&(f=!0);var R=v.length,g=f?this._safe_map:this._map,F=this._reverseMap;if(!F){F=this._reverseMap=[];for(var m=0;m<g.length;m++)F[g.charCodeAt(m)]=m}var P=g.charAt(64);if(P){var S=v.indexOf(P);S!==-1&&(R=S)}return T(v,R,F)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),E.enc.Base64url)},4756:(I,k,d)=>{var E=d(4633)();I.exports=E;try{regeneratorRuntime=E}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=E:Function("r","regeneratorRuntime = r")(E)}},4893:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.InvalidStateError=k.UnsupportedError=void 0;class d extends Error{constructor(b){super(b),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,d):this.stack=new Error(b).stack}}k.UnsupportedError=d;class E extends Error{constructor(b){super(b),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,E):this.stack=new Error(b).stack}}k.InvalidStateError=E},4905:function(I,k,d){var E;I.exports=(E=d(9021),d(7165),E.pad.Iso10126={pad:function(_,b){var T=4*b,v=T-_.sigBytes%T;_.concat(E.lib.WordArray.random(v-1)).concat(E.lib.WordArray.create([v<<24],1))},unpad:function(_){var b=255&_.words[_.sigBytes-1>>>2];_.sigBytes-=b}},E.pad.Iso10126)},4973:(I,k,d)=>{d.d(k,{Zu:()=>v,lp:()=>T});var E=d(467),_=d(4756),b=d.n(_),T=(d(9027),function(){var f=(0,E.A)(b().mark(function R(g){return b().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(m){var P=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return P?new Promise(function(S,H){P.call(navigator,m,S,H)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),F.next=1,navigator.mediaDevices.getUserMedia(g);case 1:return F.abrupt("return",F.sent);case 2:case"end":return F.stop()}},R)}));return function(R){return f.apply(this,arguments)}}()),v=function(){var f=(0,E.A)(b().mark(function R(g){return b().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(m){var P=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return P?new Promise(function(S,H){P.call(navigator,m,S,H)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),F.next=1,navigator.mediaDevices.getDisplayMedia(g);case 1:return F.abrupt("return",F.sent);case 2:case"end":return F.stop()}},R)}));return function(R){return f.apply(this,arguments)}}()},5020:(I,k,d)=>{var E=function(f){return String(Number(f))===f?Number(f):f},_=function(f,R,g){var F=f.name&&f.names;f.push&&!R[f.push]?R[f.push]=[]:F&&!R[f.name]&&(R[f.name]={});var m=f.push?{}:F?R[f.name]:R;(function(P,S,H,x){if(x&&!H)S[x]=E(P[1]);else for(var y=0;y<H.length;y+=1)P[y+1]!=null&&(S[H[y]]=E(P[y+1]))})(g.match(f.reg),m,f.names,f.name),f.push&&R[f.push].push(m)},b=d(5602),T=RegExp.prototype.test.bind(/^([a-z])=(.*)/);k.parse=function(f){var R={},g=[],F=R;return f.split(/(\r\n|\r|\n)/).filter(T).forEach(function(m){var P=m[0],S=m.slice(2);P==="m"&&(g.push({rtp:[],fmtp:[]}),F=g[g.length-1]);for(var H=0;H<(b[P]||[]).length;H+=1){var x=b[P][H];if(x.reg.test(S))return _(x,F,S)}}),R.media=g,R};var v=function(f,R){var g=R.split(/=(.+)/,2);return g.length===2?f[g[0]]=E(g[1]):g.length===1&&R.length>1&&(f[g[0]]=void 0),f};k.parseParams=function(f){return f.split(/;\s?/).reduce(v,{})},k.parseFmtpConfig=k.parseParams,k.parsePayloads=function(f){return f.toString().split(" ").map(Number)},k.parseRemoteCandidates=function(f){for(var R=[],g=f.split(" ").map(E),F=0;F<g.length;F+=3)R.push({component:g[F],ip:g[F+1],port:g[F+2]});return R},k.parseImageAttributes=function(f){return f.split(" ").map(function(R){return R.substring(1,R.length-1).split(",").reduce(v,{})})},k.parseSimulcastStreamList=function(f){return f.split(";").map(function(R){return R.split(",").map(function(g){var F,m=!1;return g[0]!=="~"?F=E(g):(F=E(g.substring(1,g.length)),m=!0),{scid:F,paused:m}})})}},5071:(I,k,d)=>{d.d(k,{V:()=>E});var E={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},5172:I=>{I.exports=function(k,d){this.v=k,this.k=d},I.exports.__esModule=!0,I.exports.default=I.exports},5248:(I,k,d)=>{d(1765)},5328:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.FakeMediaStreamTrack=void 0;const E=d(182),_=d(5862),b=d(3785);class T extends _.FakeEventTarget{#f;#d;#p;#e;#n;#t;#r;#m;#a;#h;#i;#s=null;#o=null;#c=null;#l=null;#u=null;constructor({kind:f,id:R,label:g,contentHint:F,enabled:m,muted:P,readyState:S,capabilities:H,constraints:x,settings:y,data:w}){super(),this.#f=R??(0,E.v4)(),this.#d=f,this.#p=g??"",this.#r=F??"",this.#n=m??!0,this.#t=P??!1,this.#e=S??"live",this.#m=H??{},this.#a=x??{},this.#h=y??{},this.#i=w??{}}get id(){return this.#f}get kind(){return this.#d}get label(){return this.#p}get contentHint(){return this.#r}set contentHint(f){this.#r=f}get enabled(){return this.#n}set enabled(f){const R=this.#n!==f;this.#n=f,R&&this.dispatchEvent(new Event("enabledchange"))}get muted(){return this.#t}get readyState(){return this.#e}get data(){return this.#i}set data(f){this.#i=f}get onmute(){return this.#s}set onmute(f){this.#s&&this.removeEventListener("mute",this.#s),this.#s=f,f&&this.addEventListener("mute",f)}get onunmute(){return this.#o}set onunmute(f){this.#o&&this.removeEventListener("unmute",this.#o),this.#o=f,f&&this.addEventListener("unmute",f)}get onended(){return this.#c}set onended(f){this.#c&&this.removeEventListener("ended",this.#c),this.#c=f,f&&this.addEventListener("ended",f)}get onenabledchange(){return this.#l}set onenabledchange(f){this.#l&&this.removeEventListener("enabledchange",this.#l),this.#l=f,f&&this.addEventListener("enabledchange",f)}get onstopped(){return this.#u}set onstopped(f){this.#u&&this.removeEventListener("stopped",this.#u),this.#u=f,f&&this.addEventListener("stopped",f)}addEventListener(f,R,g){super.addEventListener(f,R,g)}removeEventListener(f,R){super.removeEventListener(f,R)}stop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new Event("stopped")))}clone({id:f,data:R}={}){return new T({id:f??(0,E.v4)(),kind:this.#d,label:this.#p,contentHint:this.#r,enabled:this.#n,muted:this.#t,readyState:this.#e,capabilities:(0,b.clone)(this.#m),constraints:(0,b.clone)(this.#a),settings:(0,b.clone)(this.#h),data:R??(0,b.clone)(this.#i)})}getCapabilities(){return this.#m}getConstraints(){return this.#a}async applyConstraints(f={}){return this.#a=f,Promise.resolve()}getSettings(){return this.#h}remoteStop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new Event("stopped")),this.dispatchEvent(new Event("ended")))}remoteMute(){this.#t||(this.#t=!0,this.dispatchEvent(new Event("mute")))}remoteUnmute(){this.#t&&(this.#t=!1,this.dispatchEvent(new Event("unmute")))}}k.FakeMediaStreamTrack=T},5370:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0})},5414:I=>{I.exports=(()=>{var k={43:function(b,T,v){var f,R;(function(){f=function(){var g=function(){},F="undefined",m=typeof window!==F&&typeof window.navigator!==F&&/Trident\/|MSIE /.test(window.navigator.userAgent),P=["trace","debug","info","warn","error"];function S(j,U){var z=j[U];if(typeof z.bind=="function")return z.bind(j);try{return Function.prototype.bind.call(z,j)}catch{return function(){return Function.prototype.apply.apply(z,[j,arguments])}}}function H(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function x(j,U){for(var z=0;z<P.length;z++){var W=P[z];this[W]=z<j?g:this.methodFactory(W,j,U)}this.log=this.debug}function y(j,U,z){return function(){typeof console!==F&&(x.call(this,U,z),this[j].apply(this,arguments))}}function w(j,U,z){return function(W){return W==="debug"&&(W="log"),typeof console!==F&&(W==="trace"&&m?H:console[W]!==void 0?S(console,W):console.log!==void 0?S(console,"log"):g)}(j)||y.apply(this,arguments)}function p(j,U,z){var W,Z=this,ce="loglevel";function J(){var Ce;if(typeof window!==F&&ce){try{Ce=window.localStorage[ce]}catch{}if(typeof Ce===F)try{var Re=window.document.cookie,ye=Re.indexOf(encodeURIComponent(ce)+"=");ye!==-1&&(Ce=/^([^;]+)/.exec(Re.slice(ye))[1])}catch{}return Z.levels[Ce]===void 0&&(Ce=void 0),Ce}}typeof j=="string"?ce+=":"+j:typeof j=="symbol"&&(ce=void 0),Z.name=j,Z.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Z.methodFactory=z||w,Z.getLevel=function(){return W},Z.setLevel=function(Ce,Re){if(typeof Ce=="string"&&Z.levels[Ce.toUpperCase()]!==void 0&&(Ce=Z.levels[Ce.toUpperCase()]),!(typeof Ce=="number"&&Ce>=0&&Ce<=Z.levels.SILENT))throw"log.setLevel() called with invalid level: "+Ce;if(W=Ce,Re!==!1&&function(ye){var Te=(P[ye]||"silent").toUpperCase();if(typeof window!==F&&ce){try{return void(window.localStorage[ce]=Te)}catch{}try{window.document.cookie=encodeURIComponent(ce)+"="+Te+";"}catch{}}}(Ce),x.call(Z,Ce,j),typeof console===F&&Ce<Z.levels.SILENT)return"No console available for logging"},Z.setDefaultLevel=function(Ce){J()||Z.setLevel(Ce,!1)},Z.enableAll=function(Ce){Z.setLevel(Z.levels.TRACE,Ce)},Z.disableAll=function(Ce){Z.setLevel(Z.levels.SILENT,Ce)};var Ee=J();Ee==null&&(Ee=U??"WARN"),Z.setLevel(Ee,!1)}var C=new p,A={};C.getLogger=function(j){if(typeof j!="symbol"&&typeof j!="string"||j==="")throw new TypeError("You must supply a name when creating a logger.");var U=A[j];return U||(U=A[j]=new p(j,C.getLevel(),C.methodFactory)),U};var M=typeof window!==F?window.log:void 0;return C.noConflict=function(){return typeof window!==F&&window.log===C&&(window.log=M),C},C.getLoggers=function(){return A},C.default=C,C},(R=f.call(T,v,T,b))===void 0||(b.exports=R)})()}},d={};function E(b){var T=d[b];if(T!==void 0)return T.exports;var v=d[b]={exports:{}};return k[b].call(v.exports,v,v.exports,E),v.exports}E.d=(b,T)=>{for(var v in T)E.o(T,v)&&!E.o(b,v)&&Object.defineProperty(b,v,{enumerable:!0,get:T[v]})},E.o=(b,T)=>Object.prototype.hasOwnProperty.call(b,T),E.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var _={};return(()=>{E.r(_),E.d(_,{VideoSDKMetrics:()=>hr});const b="inbound",T="outbound",v={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:b},f={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:T},R={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:b},g={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:T},F="inbound-rtp",m="bytesReceived",P="bytesSent",S="clockRate",H="codecId",x="currentRoundTripTime",y="roundTripTime",w="fractionLost",p="frameHeight",C="frameWidth",A="qualityLimitationReason",M="qualityLimitationDurations",j="qualityLimitationResolutionChanges",U="id",z="jitter",W="kind",Z="mimeType",ce="packetsLost",J="packetsReceived",Ee="packetsSent",Ce="responsesReceived",Re="ssrc",ye="selected",Te="timestamp",He="totalRoundTripTime",we="roundTripTimeMeasurements",Je="type",Be="framesDecoded",nt="framesEncoded",Qe="totalDecodeTime",Ze="totalEncodeTime",Ht="pliCount",or="nackCount",Nr="trackId",jn="trackIdentifier",cr="mediaSourceId",Gn="audio",Un="video",Le={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},je="audio",Ge="video",Qt="network",Ft="data";var xt=E(43);const pn=()=>`${new Date().toISOString()} | metrics`,Ln=(at,ut,$t)=>`${at} | ${ut} | ${$t}`;xt.setDefaultLevel(xt.levels.TRACE);const Bt=(at,ut,$t)=>{$t?xt.debug(Ln(pn(),at,ut),$t):xt.debug(Ln(pn(),at,ut))},lr=(at,ut)=>{xt.warn(Ln(pn(),at,ut))},Fr=(at,ut)=>{xt.error(Ln(pn(),at,ut))},kr="extractor   ",Vr=(at,ut,$t)=>{if(!ut)return null;const Tt={};let tn=ut[Gn][at];tn||(tn=$t===b?{...v}:{...f}),Tt[Gn]=tn;let Xt=ut[Un][at];return Xt||(Xt=$t===b?{...R}:{...g}),Tt[Un]=Xt,Tt},Hr=(at,ut,$t,Tt)=>{let tn=!1;const Xt=Tt[ut].total_rtt_ms_out,Xe=Tt[ut].total_rtt_measure_out,Sn=$t?$t[ut].total_rtt_ms_out:0,Rn=$t?$t[ut].total_rtt_measure_out:0,Zn={rtt:null,totalRTT:Xt,totalRTTMeasurements:Xe};if(at[Te]===Tt[ut].timestamp_out||!Object.prototype.hasOwnProperty.call(at,y)||Object.prototype.hasOwnProperty.call(at,we)&&(tn=!0,Number(at[we])===0||Number(at[we])-Rn===Xe))return Zn;const ur=1e3*Number(at[y]);let Wt=Xt+ur,bt=Xe+1;return tn&&(Wt=1e3*Number(at[He])-Sn,bt=Number(at[we])-Rn),{rtt:ur,totalRTT:Wt,totalRTTMeasurements:bt}},Or=(at,ut,$t)=>at[Te]===$t[ut].timestamp_out?null:Object.prototype.hasOwnProperty.call(at,z)?1e3*(Number(at[z])||0):null,Gr=(at,ut,$t,Tt)=>{if(!Object.prototype.hasOwnProperty.call(at,Ee)||!Object.prototype.hasOwnProperty.call(at,P))return{packetsSent:$t[ut].total_packets_out,packetsLost:$t[ut].total_packets_lost_out,bytesSent:$t[ut].total_KBytes_out};const tn=Number(at[Ee])||0-(Tt?Tt[ut].total_packets_out:0),Xt=tn-$t[ut].total_packets_out,Xe=Number(at[P])/1024-(Tt?Tt[ut].total_KBytes_out:0),Sn=Xe-$t[ut].total_KBytes_out,Rn=at[Te]||Date.now(),Zn=Tt?Tt.timestamp:null;let ur=$t.timestamp;!ur&&Zn&&(ur=Zn);const Wt=ur?Rn-ur:0;return{packetsSent:tn,deltaPacketsSent:Xt,KBytesSent:Xe,deltaKBytesSent:Sn,kbsSent:Wt>0?.008*Sn*1024/Wt*1e3:0}},ga=(at,ut,$t,Tt)=>{let tn=$t[ut].total_packets_lost_out,Xt=0,Xe=0;return Object.prototype.hasOwnProperty.call(at,ce)&&(tn=Number(at[ce])||0-(Tt?Tt[ut].total_packets_lost_out:0),Xt=tn-$t[ut].total_packets_lost_out),Object.prototype.hasOwnProperty.call(at,w)&&(Xe=Number(100*at[w])),{packetsLost:tn,deltaPacketsLost:Xt,fractionLost:Xe}},ta=(at,ut,$t,Tt)=>{if(!Object.prototype.hasOwnProperty.call(at,J)||!Object.prototype.hasOwnProperty.call(at,ce)||!Object.prototype.hasOwnProperty.call(at,m))return{percent_packets_lost:$t[ut].percent_packets_lost_in,packetsReceived:$t[ut].total_packets_in,packetsLost:$t[ut].total_packets_lost_in,bytesReceived:$t[ut].total_KBytes_in};const tn=(Number(at[J])||0)-(Tt?Tt[ut].total_packets_in:0),Xt=(Number(at[ce])||0)-(Tt?Tt[ut].total_packets_lost_in:0),Xe=Xt-$t[ut].total_packets_lost_in,Sn=tn-$t[ut].total_packets_in,Rn=tn!==$t[ut].total_packets_in?100*Xe/(Xe+Sn):0,Zn=Number(at[m])/1024-(Tt?Tt[ut].total_KBytes_in:0),ur=Zn-$t[ut].total_KBytes_in,Wt=at[Te]||Date.now(),bt=Tt?Tt.timestamp:null;let Pn=$t.timestamp;!Pn&&bt&&(Pn=bt);const kn=Pn?Wt-Pn:0;return{percentPacketsLost:Rn,packetsReceived:tn,deltaPacketsReceived:Sn,packetsLost:Xt,deltaPacketsLost:Xe,KBytesReceived:Zn,deltaKBytesReceived:ur,kbsReceived:kn>0?.008*ur*1024/kn*1e3:0}},oa=at=>at.candidateType!=="relay"?"":at.relayProtocol||"",Nn=at=>Object.prototype.hasOwnProperty.call(at,p)&&Object.prototype.hasOwnProperty.call(at,C)?{width:at[C]||null,height:at[p]||null,framerate:at.framesPerSecond}:{width:null,height:null,framerate:null};class Ha{constructor(ut,$t){this._callbacks={onStatsCollected:null},this._id=`collector-${$t}`,this._moduleName=this._id,this._probeId=$t,this._config=ut,this._state="idle",this._statsReports=[]}registerCallback(ut,$t,Tt){ut in this._callbacks?(this._callbacks[ut]={callback:$t,context:Tt},Bt(this._moduleName,`registered callback '${ut}'`)):Fr(this._moduleName,`can't register callback for '${ut}' - not found`)}unregisterCallback(ut){ut in this._callbacks?(this._callbacks[ut]=null,delete this._callbacks[ut],Bt(this._moduleName,`unregistered callback '${ut}'`)):Fr(this._moduleName,`can't unregister callback for '${ut}' - not found`)}analyze(ut,$t){const Tt=(Xt=>{const Xe={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(Xt){const Sn={...Xt,audio:{},video:{},data:{...Xt.data},network:{...Xt.network}};return Object.keys(Xt.audio).forEach(Rn=>{Sn.audio[Rn]={...Xt.audio[Rn]}}),Object.keys(Xt.video).forEach(Rn=>{Sn.video[Rn]={...Xt.video[Rn]}}),Sn}return{...Xe,audio:{},video:{},data:{...Xe.data},network:{...Xe.network}}})($t);Tt.name=this._config.name,Tt.meetingId=this._config.meetingId,Tt.peerId=this._config.peerId,Tt.count=$t?$t.count+1:1;let tn=null;return ut.forEach(Xt=>{!tn&&Xt.timestamp&&(tn=Xt.timestamp),((Xe,Sn,Rn,Zn)=>{if(!Xe)return[];switch(Xe[Je]){case"candidate-pair":let ur=!1;if(Xe.nominated&&Xe.state==="succeeded"&&(ur=!0,Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe),ye in Xe&&!Xe[ye]&&(ur=!1)),ur){Xe.localCandidateId,Xe.remoteCandidateId;const bt=((kn,bn,Ar)=>{const Sr=(kn[m]||0)/1024-0,Dr=(kn[P]||0)/1024-0,Xn=kn[Te]||Date.now(),qn=Sr-bn.data.total_KBytes_in,ma=Dr-bn.data.total_KBytes_out;let ca=bn.timestamp;const Ta=ca?Xn-ca:0;return{total_KBytes_received:Sr,total_KBytes_sent:Dr,delta_KBytes_received:qn,delta_KBytes_sent:ma,kbs_speed_received:Ta>0?.008*qn*1024/Ta*1e3:0,kbs_speed_sent:Ta>0?.008*ma*1024/Ta*1e3:0}})(Xe,Sn),Pn=((kn=>{kn.availableIncomingBitrate,kn.availableOutgoingBitrate})(Xe),((kn,bn,Ar,Sr)=>{if(!Object.prototype.hasOwnProperty.call(kn,x))return{rtt:null,totalRTT:Sr[bn].total_rtt_connectivity_ms,totalRTTMeasurements:Sr[bn].total_rtt_connectivity_measure};const Dr=1e3*Number(kn[x]);let Xn=Sr[bn].total_rtt_connectivity_ms+Dr,qn=Sr[bn].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(kn,He)&&(Xn=1e3*Number(kn[He])-0),Object.prototype.hasOwnProperty.call(kn,Ce)&&(qn=Number(kn[Ce])-0),{rtt:Dr,totalRTT:Xn,totalRTTMeasurements:qn}})(Xe,"data",Zn,Sn));return[{type:Ft,value:{total_KBytes_in:bt.total_KBytes_received}},{type:Ft,value:{total_KBytes_out:bt.total_KBytes_sent}},{type:Ft,value:{delta_KBytes_in:bt.delta_KBytes_received}},{type:Ft,value:{delta_KBytes_out:bt.delta_KBytes_sent}},{type:Ft,value:{delta_kbs_in:bt.kbs_speed_received}},{type:Ft,value:{delta_kbs_out:bt.kbs_speed_sent}},{type:Ft,value:{delta_rtt_connectivity_ms:Pn.rtt}}]}break;case"local-candidate":if(Xe[U]===Sn.network.local_candidate_id)return[{type:Qt,value:{infrastructure:Xe.networkType}},{type:Qt,value:{local_candidate_protocol:Xe.protocol||""}},{type:Qt,value:{local_candidate_relay_protocol:oa(Xe)}}];break;case F:{Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe);const bt=Xe[Re],Pn=Vr(bt,Sn,b);Pn&&(Pn.timestamp=Sn.timestamp);const kn=Vr(bt,Zn,b);if(kn&&(kn.timestamp=Zn.timestamp),Xe[W]===Gn){const bn=ta(Xe,Gn,Pn,kn),Ar=Or(Xe,Gn,Pn),Sr=Xe[H]||"",Dr=((Xn,qn,ma)=>{const ca=Number(Xn.concealmentEvents)||0,Ta=ca-(ma[qn].total_concealment_events||0),Da=Number(Xn.insertedSamplesForDeceleration)||0,ss=Da-(ma[qn].total_inserted_samples_for_decelaration||0),ai=Number(Xn.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:ca,deltaConcealmentEvents:Ta,totalInsertedSamplesForDecelaration:Da,deltaInsertedSamplesForDecelaration:ss,totalRemovedSamplesForAccelaration:ai,deltaRemovedSampleForAccelaration:ai-(ma[qn].total_removed_samples_for_accelaration||0)}})(Xe,Gn,Pn);return[{ssrc:bt,type:je,value:{codec_id_in:Sr}},{ssrc:bt,type:je,value:{total_packets_in:bn.packetsReceived}},{ssrc:bt,type:je,value:{delta_packets_in:bn.deltaPacketsReceived}},{ssrc:bt,type:je,value:{total_packets_lost_in:bn.packetsLost}},{ssrc:bt,type:je,value:{delta_packets_lost_in:bn.deltaPacketsLost}},{ssrc:bt,type:je,value:{percent_packets_lost_in:bn.percentPacketsLost}},{ssrc:bt,type:je,value:{total_KBytes_in:bn.KBytesReceived}},{ssrc:bt,type:je,value:{delta_KBytes_in:bn.deltaKBytesReceived}},{ssrc:bt,type:je,value:{delta_kbs_in:bn.kbsReceived}},{ssrc:bt,type:je,value:{delta_jitter_ms_in:Ar}},{ssrc:bt,type:je,value:{total_concealment_events:Dr.totalConcealmentEvents}},{ssrc:bt,type:je,value:{delta_concealment_events:Dr.deltaConcealmentEvents}},{ssrc:bt,type:je,value:{total_inserted_samples_for_decelaration:Dr.totalInsertedSamplesForDecelaration}},{ssrc:bt,type:je,value:{delta_inserted_samples_for_decelaration:Dr.deltaInsertedSamplesForDecelaration}},{ssrc:bt,type:je,value:{total_removed_samples_for_accelaration:Dr.totalRemovedSamplesForAccelaration}},{ssrc:bt,type:je,value:{delta_removed_samples_for_accelaration:Dr.deltaRemovedSampleForAccelaration}},{ssrc:bt,type:je,value:{track_in:Xe[Nr]}},{ssrc:bt,type:je,value:{track_id_in:Xe[jn]}},{ssrc:bt,type:je,value:{media_source_id:Xe[cr]}}]}if(Xe[W]===Un){((Xn,qn)=>{if(!Object.prototype.hasOwnProperty.call(Xn,Be)||!Object.prototype.hasOwnProperty.call(Xn,Qe))return{delta_ms_decode_frame:qn[Un].delta_ms_decode_frame_in,frames_decoded:qn[Un].total_frames_decoded_in,total_decode_time:qn[Un].total_time_decoded_in};Xn[Be],Xn[Qe],qn[Un].total_time_decoded_in,qn[Un].total_frames_decoded_in})(Xe,Pn);const bn=ta(Xe,Un,Pn,kn),Ar=Or(Xe,Un,Pn),Sr=(Xe.decoderImplementation,Xe[H]||null),Dr=Nn(Xe);return((Xn,qn,ma)=>{if(!Object.prototype.hasOwnProperty.call(Xn,Ht)||!Object.prototype.hasOwnProperty.call(Xn,or))return{pliCount:qn.total_pli_sent_in,nackCount:qn.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};Xn[Ht],ma&&ma[Un].total_pli_sent_in,Xn[or],ma&&ma[Un].total_nack_sent_in,qn[Un].total_pli_sent_in,qn[Un].total_nack_sent_in})(Xe,Pn,kn),[{ssrc:bt,type:Ge,value:{codec_id_in:Sr}},{ssrc:bt,type:Ge,value:{total_packets_in:bn.packetsReceived}},{ssrc:bt,type:Ge,value:{delta_packets_in:bn.deltaPacketsReceived}},{ssrc:bt,type:Ge,value:{total_packets_lost_in:bn.packetsLost}},{ssrc:bt,type:Ge,value:{delta_packets_lost_in:bn.deltaPacketsLost}},{ssrc:bt,type:Ge,value:{percent_packets_lost_in:bn.percentPacketsLost}},{ssrc:bt,type:Ge,value:{total_KBytes_in:bn.KBytesReceived}},{ssrc:bt,type:Ge,value:{delta_KBytes_in:bn.deltaKBytesReceived}},{ssrc:bt,type:Ge,value:{delta_kbs_in:bn.kbsReceived}},{ssrc:bt,type:Ge,value:{delta_jitter_ms_in:Ar}},{ssrc:bt,type:Ge,value:{size_in:Dr}},{ssrc:bt,type:Ge,value:{track_in:Xe[Nr]}},{ssrc:bt,type:Ge,value:{track_id_in:Xe[jn]}},{ssrc:bt,type:Ge,value:{media_source_id:Xe[cr]}},{ssrc:bt,type:Ge,value:{pause_count:Xe.pauseCount}},{ssrc:bt,type:Ge,value:{total_pauses_duration:Xe.totalPausesDuration}},{ssrc:bt,type:Ge,value:{freeze_count:Xe.freezeCount}},{ssrc:bt,type:Ge,value:{total_freezes_duration:Xe.totalFreezesDuration}}]}break}case"outbound-rtp":{Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe);const bt=Xe[Re],Pn=Vr(bt,Sn,T);Pn&&(Pn.timestamp=Sn.timestamp);const kn=Vr(bt,Zn,T);if(kn&&(kn.timestamp=Zn.timestamp),Xe[W]===Gn){const bn=Xe[H]||null,Ar=Gr(Xe,Gn,Pn,kn);return[{ssrc:bt,type:je,value:{codec_id_out:bn}},{ssrc:bt,type:je,value:{total_packets_out:Ar.packetsSent}},{ssrc:bt,type:je,value:{delta_packets_out:Ar.deltaPacketsSent}},{ssrc:bt,type:je,value:{total_KBytes_out:Ar.KBytesSent}},{type:je,value:{delta_KBytes_out:Ar.deltaKBytesSent}},{ssrc:bt,type:je,value:{delta_kbs_out:Ar.kbsSent}},{ssrc:bt,type:je,value:{track_out:Xe[Nr]}},{ssrc:bt,type:je,value:{track_id_out:Xe[jn]}},{ssrc:bt,type:je,value:{media_source_id:Xe[cr]}}]}if(Xe[W]===Un){Xe.encoderImplementation;const bn=Xe[H]||null,Ar=(((Xn,qn)=>{if(!Object.prototype.hasOwnProperty.call(Xn,nt)||!Object.prototype.hasOwnProperty.call(Xn,Ze))return{delta_ms_encode_frame:qn[Un].delta_ms_encode_frame_out,frames_encoded:qn[Un].total_frames_encoded_out,total_encode_time:qn[Un].total_time_encoded_out};Xn[nt],Xn[Ze],qn[Un].total_time_encoded_out,qn[Un].total_frames_encoded_out})(Xe,Pn),Nn(Xe)),Sr=(Xn=>{const qn=Object.prototype.hasOwnProperty.call(Xn,A)?Xn[A]:null,ma=Object.prototype.hasOwnProperty.call(Xn,j)?Xn[j]:null,ca=Object.prototype.hasOwnProperty.call(Xn,M)?Xn[M]:null;return ca&&Object.keys(ca).forEach(Ta=>{ca[Ta]>1e3&&(ca[Ta]=Number(ca[Ta]/1e3))}),{reason:qn,durations:ca,resolutionChanges:ma}})(Xe),Dr=(((Xn,qn,ma)=>{if(!Object.prototype.hasOwnProperty.call(Xn,Ht)||!Object.prototype.hasOwnProperty.call(Xn,or))return{pliCount:qn.total_pli_received_out,nackCount:qn.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};Xn[Ht],ma&&ma[Un].total_pli_received_out,Xn[or],ma&&ma[Un].total_nack_received_out,qn[Un].total_pli_received_out,qn[Un].total_nack_received_out})(Xe,Pn,kn),Gr(Xe,Un,Pn,kn));return[{ssrc:bt,type:Ge,value:{codec_id_out:bn}},{ssrc:bt,type:Ge,value:{total_packets_out:Dr.packetsSent}},{ssrc:bt,type:Ge,value:{delta_packets_out:Dr.deltaPacketsSent}},{ssrc:bt,type:Ge,value:{total_KBytes_out:Dr.KBytesSent}},{ssrc:bt,type:Ge,value:{delta_KBytes_out:Dr.deltaKBytesSent}},{ssrc:bt,type:Ge,value:{delta_kbs_out:Dr.kbsSent}},{ssrc:bt,type:Ge,value:{size_out:Ar}},{ssrc:bt,type:Ge,value:{limitation_out:Sr}},{ssrc:bt,type:Ge,value:{track_out:Xe[Nr]}},{ssrc:bt,type:Ge,value:{track_id_out:Xe[jn]}},{ssrc:bt,type:Ge,value:{media_source_id:Xe[cr]}}]}break}case"media-source":{Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe);const bt=[];return Object.keys(Sn[Gn]).forEach(Pn=>{const kn=Sn[Gn][Pn];if(kn.media_source_id===Xe[U]){var bn=Xe[jn];bt.push({ssrc:kn.ssrc,type:je,value:{track_id_out:bn}})}}),Object.keys(Sn[Un]).forEach(Pn=>{const kn=Sn[Un][Pn];if(kn.media_source_id===Xe[U]){var bn=Xe[jn];bt.push({ssrc:kn.ssrc,type:Ge,value:{track_id_out:bn}})}}),bt}case"track":{Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe);const bt=[];return Object.keys(Sn[Gn]).forEach(Pn=>{const kn=Sn[Gn][Pn];if(kn.track_in===Xe[U]||kn.track_out===Xe[U]){Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe);var bn=Xe[jn];Xe[U]===kn.track_in?bt.push({ssrc:kn.ssrc,type:je,value:{track_id_in:bn}}):bt.push({ssrc:kn.ssrc,type:je,value:{track_id_out:bn}})}}),Object.keys(Sn[Un]).forEach(Pn=>{const kn=Sn[Un][Pn];if(kn.track_in===Xe[U]||kn.track_out===Xe[U]){Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe);var bn=Xe[jn];Xe[U]===kn.track_in?bt.push({ssrc:kn.ssrc,type:Ge,value:{track_id_in:bn}}):bt.push({ssrc:kn.ssrc,type:Ge,value:{track_id_out:bn}})}}),bt}case"codec":const Wt=[];return Object.keys(Sn[Gn]).forEach(bt=>{const Pn=Sn[Gn][bt];if(Pn.codec_id_in===Xe[U]||Pn.codec_id_out===Xe[U]){Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe);const kn=(bn=>({channels:bn.channels||null,clock_rate:bn[S]||null,mime_type:bn[Z]||null,sdp_fmtp_line:bn.sdpFmtpLine||null}))(Xe);Xe[U]===Pn.codec_id_in?Wt.push({ssrc:Pn.ssrc,type:je,value:{codec_in:kn}}):Wt.push({ssrc:Pn.ssrc,type:je,value:{codec_out:kn}})}}),Object.keys(Sn[Un]).forEach(bt=>{const Pn=Sn[Un][bt];if(Pn.codec_id_in===Xe[U]||Pn.codec_id_out===Xe[U]){Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe);const kn=(bn=>({clock_rate:bn[S]||null,mime_type:bn[Z]||null}))(Xe);Xe[U]===Pn.codec_id_in?Wt.push({ssrc:Pn.ssrc,type:Ge,value:{codec_in:kn}}):Wt.push({ssrc:Pn.ssrc,type:Ge,value:{codec_out:kn}})}}),Wt;case"remote-inbound-rtp":{Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe);const bt=Xe[Re],Pn=Vr(bt,Sn,T),kn=Vr(bt,Zn,T);if(Xe[W]===Gn){const bn=Hr(Xe,Gn,kn,Pn),Ar=Or(Xe,Gn,Pn),Sr=ga(Xe,Gn,Pn,kn);return[{ssrc:bt,type:je,value:{delta_rtt_ms_out:bn.rtt}},{ssrc:bt,type:je,value:{delta_jitter_ms_out:Ar}},{ssrc:bt,type:je,value:{timestamp_out:Xe[Te]}},{ssrc:bt,type:je,value:{total_packets_lost_out:Sr.packetsLost}},{ssrc:bt,type:je,value:{delta_packets_lost_out:Sr.deltaPacketsLost}},{ssrc:bt,type:je,value:{percent_packets_lost_out:Sr.fractionLost}}]}if(Xe[W]===Un){const bn=Hr(Xe,Un,kn,Pn),Ar=Or(Xe,Un,Pn),Sr=ga(Xe,Un,Pn,kn);return[{ssrc:bt,type:Ge,value:{delta_rtt_ms_out:bn.rtt}},{ssrc:bt,type:Ge,value:{delta_jitter_ms_out:Ar}},{ssrc:bt,type:Ge,value:{timestamp_out:Xe[Te]}},{ssrc:bt,type:Ge,value:{total_packets_lost_out:Sr.packetsLost}},{ssrc:bt,type:Ge,value:{delta_packets_lost_out:Sr.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{Bt(kr,`analyze() - got stats ${Xe[Je]} for ${Rn}`,Xe);const bt=Xe[Re],Pn=Vr(bt,Sn,T),kn=Vr(bt,Zn,T);if(Xe[W]===Gn){const bn=Hr(Xe,Gn,kn,Pn);return[{ssrc:bt,type:je,value:{delta_rtt_ms_in:bn.rtt}},{ssrc:bt,type:je,value:{timestamp_in:Xe[Te]}}]}break}}return[]})(Xt,Tt,Tt.name,null).forEach(Xe=>{if(Xe.value&&Xe.type)if(Xe.ssrc){let Zn=Tt[Xe.type][Xe.ssrc];Zn||(Sn=Xe.type,Rn=Xt.type,Zn=Sn===Gn?Rn===F?{...v}:{...f}:Rn===F?{...R}:{...g},Zn.ssrc=Xe.ssrc,Tt[Xe.type][Xe.ssrc]=Zn),Object.keys(Xe.value).forEach(ur=>{Xe.value[ur]!==void 0&&(Zn[ur]=Xe.value[ur])})}else Object.keys(Xe.value).forEach(Zn=>{Xe.value[Zn]!==void 0&&(Tt[Xe.type][Zn]=Xe.value[Zn])});var Sn,Rn})}),Tt.timestamp=tn,Tt}async collectStats(){try{const ut=await this._config.monitoringObject.getStats(),$t=this.analyze(ut,this._statsReports.slice().pop()||null);return this._statsReports.push($t),this.fireOnStatsCollected($t),ut}catch(ut){return Fr(this._moduleName,`got error ${ut}`),null}}fireOnStatsCollected(ut){if(this._callbacks.onStatsCollected){const $t={};$t.meetingId=ut.meetingId,$t.peerId=ut.peerId,$t.name=ut.name,$t.audio=[],$t.video=[],Object.values(ut.audio).forEach(Tt=>{const tn={};if(tn.network=Le[ut.network.infrastructure],tn.timestamp=ut.timestamp,Tt.direction==b){tn.codec=Tt.codec_in.mime_type,tn.jitter=Tt.delta_jitter_ms_in,tn.bitrate=Tt.delta_kbs_in,tn.packetsLost=Tt.delta_packets_lost_in,tn.rtt=ut.data.delta_rtt_connectivity_ms||0,tn.totalPackets=Tt.delta_packets_in,tn.concealmentEvents=Tt.delta_concealment_events,tn.removedSampleForAccelaration=Tt.delta_removed_samples_for_accelaration,tn.insertedSamplesForDecelaration=Tt.delta_inserted_samples_for_decelaration;const Xt=JSON.stringify(Tt.track_id_in).replace(/[{}"]/g,"");tn.trackId=Xt}else Tt.direction==T&&(tn.codec=Tt.codec_out.mime_type,tn.jitter=Tt.delta_jitter_ms_out,tn.bitrate=Tt.delta_kbs_out,tn.packetsLost=Tt.delta_packets_lost_out,tn.rtt=ut.data.delta_rtt_connectivity_ms||0,tn.totalPackets=Tt.delta_packets_out,tn.trackId=Tt.track_id_out);$t.audio.push(tn)}),Object.values(ut.video).forEach(Tt=>{const tn={};if(tn.network=Le[ut.network.infrastructure],tn.timestamp=ut.timestamp,Tt.direction==b){tn.codec=Tt.codec_in.mime_type,tn.jitter=Tt.delta_jitter_ms_in,tn.bitrate=Tt.delta_kbs_in,tn.packetsLost=Tt.delta_packets_lost_in,tn.rtt=ut.data.delta_rtt_connectivity_ms||0,tn.totalPackets=Tt.delta_packets_in,tn.size=Tt.size_in,tn.pauseCount=Tt.pause_count,tn.totalPausesDuration=Tt.total_pauses_duration,tn.freezeCount=Tt.freeze_count,tn.totalFreezesDuration=Tt.total_freezes_duration;const Xt=JSON.stringify(Tt.track_id_in).replace(/[{}"]/g,"");tn.trackId=Xt}else Tt.direction==T&&(tn.codec=Tt.codec_out.mime_type,tn.jitter=Tt.delta_jitter_ms_out,tn.bitrate=Tt.delta_kbs_out,tn.packetsLost=Tt.delta_packets_lost_out,tn.rtt=ut.data.delta_rtt_connectivity_ms||0,tn.totalPackets=Tt.delta_packets_out,tn.limitation=Tt.limitation_out,tn.size=Tt.size_out,tn.trackId=Tt.track_id_out);$t.video.push(tn)}),this._callbacks.onStatsCollected.callback($t)}}}class Ca{constructor(ut){this._id=ut.name&&ut.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=ut,this._collector=new Ha(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?lr("Probe already started."):(Bt(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{Bt(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),Bt(this._moduleName,"Probe Stopped")):lr("Probe not running, Please start first.")}set onStatsCollected(ut){ut?this._collector.registerCallback("onStatsCollected",ut):this._collector.unregisterCallback("onStatsCollected")}}const Kr={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class hr{constructor(ut){var $t;this._config={defaultConfig:Kr,...ut},this._probes=[],$t=this._config.verbose||!1,xt.setLevel($t?xt.levels.TRACE:xt.levels.INFO),Bt("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(ut,$t){if(!ut)throw new Error("undefined monitoring object");const Tt={monitoringObject:ut,...$t,...this._config},tn=new Ca(Tt);return this._probes.push(tn),tn}removeExistingProbe(ut){if(!ut)throw new Error("undefined probe");ut.stop(),this._probes=this._probes.filter($t=>ut.id!==$t.id)}getProbe(ut){for(let $t of this.probes)if($t.id==ut)return $t}startAllProbes(){this._probes.forEach((ut,$t)=>{ut.start()})}stopAllProbes(){this._probes.forEach(ut=>ut.stop())}}})(),_})()},5458:(I,k,d)=>{d.d(k,{A:()=>b});var E=d(3145),_=d(7800);function b(T){return function(v){if(Array.isArray(v))return(0,E.A)(v)}(T)||function(v){if(typeof Symbol<"u"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}(T)||(0,_.A)(T)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},5471:function(I,k,d){var E,_,b,T,v,f,R,g;I.exports=(g=d(9021),_=(E=g).lib,b=_.WordArray,T=_.Hasher,v=E.algo,f=[],R=v.SHA1=T.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(F,m){for(var P=this._hash.words,S=P[0],H=P[1],x=P[2],y=P[3],w=P[4],p=0;p<80;p++){if(p<16)f[p]=0|F[m+p];else{var C=f[p-3]^f[p-8]^f[p-14]^f[p-16];f[p]=C<<1|C>>>31}var A=(S<<5|S>>>27)+w+f[p];A+=p<20?1518500249+(H&x|~H&y):p<40?1859775393+(H^x^y):p<60?(H&x|H&y|x&y)-1894007588:(H^x^y)-899497514,w=y,y=x,x=H<<30|H>>>2,H=S,S=A}P[0]=P[0]+S|0,P[1]=P[1]+H|0,P[2]=P[2]+x|0,P[3]=P[3]+y|0,P[4]=P[4]+w|0},_doFinalize:function(){var F=this._data,m=F.words,P=8*this._nDataBytes,S=8*F.sigBytes;return m[S>>>5]|=128<<24-S%32,m[14+(S+64>>>9<<4)]=Math.floor(P/4294967296),m[15+(S+64>>>9<<4)]=P,F.sigBytes=4*m.length,this._process(),this._hash},clone:function(){var F=T.clone.call(this);return F._hash=this._hash.clone(),F}}),E.SHA1=T._createHelper(R),E.HmacSHA1=T._createHmacHelper(R),g.SHA1)},5501:(I,k,d)=>{d.d(k,{A:()=>_});var E=d(3662);function _(b,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(T&&T.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),T&&(0,E.A)(b,T)}},5503:function(I,k,d){var E;I.exports=(E=d(9021),function(){var _=E,b=_.lib.WordArray,T=_.enc;function v(f){return f<<8&4278255360|f>>>8&16711935}T.Utf16=T.Utf16BE={stringify:function(f){for(var R=f.words,g=f.sigBytes,F=[],m=0;m<g;m+=2){var P=R[m>>>2]>>>16-m%4*8&65535;F.push(String.fromCharCode(P))}return F.join("")},parse:function(f){for(var R=f.length,g=[],F=0;F<R;F++)g[F>>>1]|=f.charCodeAt(F)<<16-F%2*16;return b.create(g,2*R)}},T.Utf16LE={stringify:function(f){for(var R=f.words,g=f.sigBytes,F=[],m=0;m<g;m+=2){var P=v(R[m>>>2]>>>16-m%4*8&65535);F.push(String.fromCharCode(P))}return F.join("")},parse:function(f){for(var R=f.length,g=[],F=0;F<R;F++)g[F>>>1]|=v(f.charCodeAt(F)<<16-F%2*16);return b.create(g,2*R)}}}(),E.enc.Utf16)},5535:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Chrome70=void 0;const E=d(7363),_=d(2994),b=d(1765),T=d(8046),v=d(5544),f=d(5938),R=d(521),g=d(1305),F=d(3303),m=new _.Logger("Chrome70"),P={OS:1024,MIS:1024};class S extends R.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new S}constructor(){super()}get name(){return"Chrome70"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const x=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{x.addTransceiver("audio"),x.addTransceiver("video");const y=await x.createOffer();try{x.close()}catch{}const w=E.parse(y.sdp);return v.extractRtpCapabilities({sdpObject:w})}catch(y){try{x.close()}catch{}throw y}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:x,iceParameters:y,iceCandidates:w,dtlsParameters:p,sctpParameters:C,iceServers:A,iceTransportPolicy:M,additionalSettings:j,proprietaryConstraints:U,extendedRtpCapabilities:z}){m.debug("run()"),this._direction=x,this._remoteSdp=new g.RemoteSdp({iceParameters:y,iceCandidates:w,dtlsParameters:p,sctpParameters:C}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",z),video:T.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",z),video:T.getSendingRemoteRtpParameters("video",z)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:A??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...j},U),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",W=>{this.emit("@icecandidateerror",W)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(x){m.debug("updateIceServers()");const y=this._pc.getConfiguration();y.iceServers=x,this._pc.setConfiguration(y)}async restartIce(x){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(x),this._transportReady)if(this._direction==="send"){const y=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",y),await this._pc.setLocalDescription(y);const w={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w)}else{const y={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);const w=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w)}}async getTransportStats(){return this._pc.getStats()}async send({track:x,encodings:y,codecOptions:w,codec:p}){this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",x.kind,x.id);const C=b.clone(this._sendingRtpParametersByKind[x.kind]);C.codecs=T.reduceCodecs(C.codecs,p);const A=b.clone(this._sendingRemoteRtpParametersByKind[x.kind]);A.codecs=T.reduceCodecs(A.codecs,p);const M=this._remoteSdp.getNextMediaSectionIdx(),j=this._pc.addTransceiver(x,{direction:"sendonly",streams:[this._sendStream]});let U,z=await this._pc.createOffer(),W=E.parse(z.sdp);W.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W}),y&&y.length>1&&(m.debug("send() | enabling legacy simulcast"),W=E.parse(z.sdp),U=W.media[M.idx],f.addLegacySimulcast({offerMediaObject:U,numStreams:y.length}),z={type:"offer",sdp:E.write(W)});let Z=!1;const ce=(0,F.parse)((y??[{}])[0].scalabilityMode);if(y&&y.length===1&&ce.spatialLayers>1&&C.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(m.debug("send() | enabling legacy simulcast for VP9 SVC"),Z=!0,W=E.parse(z.sdp),U=W.media[M.idx],f.addLegacySimulcast({offerMediaObject:U,numStreams:ce.spatialLayers}),z={type:"offer",sdp:E.write(W)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),y){m.debug("send() | applying given encodings");const Ce=j.sender.getParameters();for(let Re=0;Re<(Ce.encodings??[]).length;++Re){const ye=Ce.encodings[Re],Te=y[Re];if(!Te)break;Ce.encodings[Re]=Object.assign(ye,Te)}await j.sender.setParameters(Ce)}const J=j.mid;if(C.mid=J,W=E.parse(this._pc.localDescription.sdp),U=W.media[M.idx],C.rtcp.cname=v.getCname({offerMediaObject:U}),C.encodings=f.getRtpEncodings({offerMediaObject:U}),y)for(let Ce=0;Ce<C.encodings.length;++Ce)y[Ce]&&Object.assign(C.encodings[Ce],y[Ce]);if(Z&&(C.encodings=[C.encodings[0]]),C.encodings.length>1&&(C.codecs[0].mimeType.toLowerCase()==="video/vp8"||C.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Ce of C.encodings)Ce.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:U,reuseMid:M.reuseMid,offerRtpParameters:C,answerRtpParameters:A,codecOptions:w});const Ee={type:"answer",sdp:this._remoteSdp.getSdp()};return m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Ee),await this._pc.setRemoteDescription(Ee),this._mapMidTransceiver.set(J,j),{localId:J,rtpParameters:C,rtpSender:j.sender}}async stopSending(x){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",x);const y=this._mapMidTransceiver.get(x);if(!y)throw new Error("associated RTCRtpTransceiver not found");if(y.sender.replaceTrack(null),this._pc.removeTrack(y.sender),this._remoteSdp.closeMediaSection(y.mid))try{y.stop()}catch{}const w=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",w),await this._pc.setLocalDescription(w);const p={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._mapMidTransceiver.delete(x)}async pauseSending(x){}async resumeSending(x){}async replaceTrack(x,y){this.assertSendDirection(),y?m.debug("replaceTrack() [localId:%s, track.id:%s]",x,y.id):m.debug("replaceTrack() [localId:%s, no track]",x);const w=this._mapMidTransceiver.get(x);if(!w)throw new Error("associated RTCRtpTransceiver not found");await w.sender.replaceTrack(y)}async setMaxSpatialLayer(x,y){this.assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",x,y);const w=this._mapMidTransceiver.get(x);if(!w)throw new Error("associated RTCRtpTransceiver not found");const p=w.sender.getParameters();p.encodings.forEach((M,j)=>{M.active=j<=y}),await w.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(x,p.encodings);const C=await this._pc.createOffer();m.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async setRtpEncodingParameters(x,y){this.assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",x,y);const w=this._mapMidTransceiver.get(x);if(!w)throw new Error("associated RTCRtpTransceiver not found");const p=w.sender.getParameters();p.encodings.forEach((M,j)=>{p.encodings[j]={...M,...y}}),await w.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(x,p.encodings);const C=await this._pc.createOffer();m.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async getSenderStats(x){this.assertSendDirection();const y=this._mapMidTransceiver.get(x);if(!y)throw new Error("associated RTCRtpTransceiver not found");return y.sender.getStats()}async sendDataChannel({ordered:x,maxPacketLifeTime:y,maxRetransmits:w,label:p,protocol:C}){this.assertSendDirection();const A={negotiated:!0,id:this._nextSendSctpStreamId,ordered:x,maxPacketLifeTime:y,maxRetransmitTime:y,maxRetransmits:w,protocol:C};m.debug("sendDataChannel() [options:%o]",A);const M=this._pc.createDataChannel(p,A);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),U=E.parse(j.sdp),z=U.media.find(Z=>Z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const W={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setRemoteDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:A.id,ordered:A.ordered,maxPacketLifeTime:A.maxPacketLifeTime,maxRetransmits:A.maxRetransmits}}}async receive(x){this.assertRecvDirection();const y=[],w=new Map;for(const M of x){const{trackId:j,kind:U,rtpParameters:z,streamId:W}=M;m.debug("receive() [trackId:%s, kind:%s]",j,U);const Z=z.mid??String(this._mapMidTransceiver.size);w.set(j,Z),this._remoteSdp.receive({mid:Z,kind:U,offerRtpParameters:z,streamId:W??z.rtcp.cname,trackId:j})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let C=await this._pc.createAnswer();const A=E.parse(C.sdp);for(const M of x){const{trackId:j,rtpParameters:U}=M,z=w.get(j),W=A.media.find(Z=>String(Z.mid)===z);v.applyCodecParameters({offerRtpParameters:U,answerMediaObject:W})}C={type:"answer",sdp:E.write(A)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C);for(const M of x){const{trackId:j}=M,U=w.get(j),z=this._pc.getTransceivers().find(W=>W.mid===U);if(!z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(U,z),y.push({localId:U,track:z.receiver.track,rtpReceiver:z.receiver})}return y}async stopReceiving(x){this.assertRecvDirection();for(const p of x){m.debug("stopReceiving() [localId:%s]",p);const C=this._mapMidTransceiver.get(p);if(!C)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(C.mid)}const y={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);const w=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w);for(const p of x)this._mapMidTransceiver.delete(p)}async pauseReceiving(x){}async resumeReceiving(x){}async getReceiverStats(x){this.assertRecvDirection();const y=this._mapMidTransceiver.get(x);if(!y)throw new Error("associated RTCRtpTransceiver not found");return y.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:x,label:y,protocol:w}){this.assertRecvDirection();const{streamId:p,ordered:C,maxPacketLifeTime:A,maxRetransmits:M}=x,j={negotiated:!0,id:p,ordered:C,maxPacketLifeTime:A,maxRetransmitTime:A,maxRetransmits:M,protocol:w};m.debug("receiveDataChannel() [options:%o]",j);const U=this._pc.createDataChannel(y,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const z={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const W=await this._pc.createAnswer();if(!this._transportReady){const Z=E.parse(W.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setLocalDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:U}}async setupTransport({localDtlsRole:x,localSdpObject:y}){y||(y=E.parse(this._pc.localDescription.sdp));const w=v.extractDtlsParameters({sdpObject:y});w.role=x,this._remoteSdp.updateDtlsRole(x==="client"?"server":"client"),await new Promise((p,C)=>{this.safeEmit("@connect",{dtlsParameters:w},p,C)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.Chrome70=S},5544:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.extractRtpCapabilities=function({sdpObject:_}){const b=new Map,T=[];let v=!1,f=!1;for(const R of _.media){const g=R.type;switch(g){case"audio":if(v)continue;v=!0;break;case"video":if(f)continue;f=!0;break;default:continue}for(const F of R.rtp){const m={kind:g,mimeType:`${g}/${F.codec}`,preferredPayloadType:F.payload,clockRate:F.rate,channels:F.encoding,parameters:{},rtcpFeedback:[]};b.set(m.preferredPayloadType,m)}for(const F of R.fmtp??[]){const m=E.parseParams(F.config),P=b.get(F.payload);P&&(m?.hasOwnProperty("profile-level-id")&&(m["profile-level-id"]=String(m["profile-level-id"])),P.parameters=m)}for(const F of R.rtcpFb??[]){const m={type:F.type,parameter:F.subtype};if(m.parameter||delete m.parameter,F.payload!=="*"){const P=b.get(F.payload);if(!P)continue;P.rtcpFeedback.push(m)}else for(const P of b.values())P.kind!==g||/.+\/rtx$/i.test(P.mimeType)||P.rtcpFeedback.push(m)}for(const F of R.ext??[]){if(F["encrypt-uri"])continue;const m={kind:g,uri:F.uri,preferredId:F.value};T.push(m)}}return{codecs:Array.from(b.values()),headerExtensions:T}},k.extractDtlsParameters=function({sdpObject:_}){let b,T=_.setup,v=_.fingerprint;if(!T||!v){const f=(_.media??[]).find(R=>R.port!==0);f&&(T??=f.setup,v??=f.fingerprint)}if(!T)throw new Error("no a=setup found at SDP session or media level");if(!v)throw new Error("no a=fingerprint found at SDP session or media level");switch(T){case"active":b="client";break;case"passive":b="server";break;case"actpass":b="auto"}return{role:b,fingerprints:[{algorithm:v.type,value:v.hash}]}},k.getCname=function({offerMediaObject:_}){const b=(_.ssrcs??[]).find(T=>T.attribute==="cname");return b?b.value:""},k.applyCodecParameters=function({offerRtpParameters:_,answerMediaObject:b}){for(const T of _.codecs){const v=T.mimeType.toLowerCase();if(v!=="audio/opus"||!(b.rtp??[]).find(g=>g.payload===T.payloadType))continue;b.fmtp=b.fmtp??[];let f=b.fmtp.find(g=>g.payload===T.payloadType);f||(f={payload:T.payloadType,config:""},b.fmtp.push(f));const R=E.parseParams(f.config);switch(v){case"audio/opus":{const g=T.parameters["sprop-stereo"];g!==void 0&&(R.stereo=Number(g)?1:0);break}}f.config="";for(const g of Object.keys(R))f.config&&(f.config+=";"),f.config+=`${g}=${R[g]}`}};const E=d(7363)},5546:I=>{function k(d,E,_,b){var T=Object.defineProperty;try{T({},"",{})}catch{T=0}I.exports=k=function(v,f,R,g){if(f)T?T(v,f,{value:R,enumerable:!g,configurable:!g,writable:!g}):v[f]=R;else{var F=function(m,P){k(v,m,function(S){return this._invoke(m,P,S)})};F("next",0),F("throw",1),F("return",2)}},I.exports.__esModule=!0,I.exports.default=I.exports,k(d,E,_,b)}I.exports=k,I.exports.__esModule=!0,I.exports.default=I.exports},5601:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Transport=void 0;const E=d(8876),_=d(2994),b=d(3953),T=d(4893),v=d(1765),f=d(8046),R=d(9792),g=d(3518),F=d(7504),m=d(9166),P=new _.Logger("Transport");class S{consumerOptions;promise;resolve;reject;constructor(y){this.consumerOptions=y,this.promise=new Promise((w,p)=>{this.resolve=w,this.reject=p})}}class H extends b.EnhancedEventEmitter{_id;_closed=!1;_direction;_extendedRtpCapabilities;_canProduceByKind;_maxSctpMessageSize;_handler;_iceGatheringState="new";_connectionState="new";_appData;_producers=new Map;_consumers=new Map;_dataProducers=new Map;_dataConsumers=new Map;_probatorConsumerCreated=!1;_awaitQueue=new E.AwaitQueue;_pendingConsumerTasks=[];_consumerCreationInProgress=!1;_pendingPauseConsumers=new Map;_consumerPauseInProgress=!1;_pendingResumeConsumers=new Map;_consumerResumeInProgress=!1;_pendingCloseConsumers=new Map;_consumerCloseInProgress=!1;_observer=new b.EnhancedEventEmitter;constructor({direction:y,id:w,iceParameters:p,iceCandidates:C,dtlsParameters:A,sctpParameters:M,iceServers:j,iceTransportPolicy:U,additionalSettings:z,proprietaryConstraints:W,appData:Z,handlerFactory:ce,extendedRtpCapabilities:J,canProduceByKind:Ee}){super(),P.debug("constructor() [id:%s, direction:%s]",w,y),this._id=w,this._direction=y,this._extendedRtpCapabilities=J,this._canProduceByKind=Ee,this._maxSctpMessageSize=M?M.maxMessageSize:null;const Ce=v.clone(z)??{};delete Ce.iceServers,delete Ce.iceTransportPolicy,delete Ce.bundlePolicy,delete Ce.rtcpMuxPolicy,delete Ce.sdpSemantics,this._handler=ce(),this._handler.run({direction:y,iceParameters:p,iceCandidates:C,dtlsParameters:A,sctpParameters:M,iceServers:j,iceTransportPolicy:U,additionalSettings:Ce,proprietaryConstraints:W,extendedRtpCapabilities:J}),this._appData=Z??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(y){this._appData=y}get observer(){return this._observer}close(){if(!this._closed){P.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const y of this._producers.values())y.transportClosed();this._producers.clear();for(const y of this._consumers.values())y.transportClosed();this._consumers.clear();for(const y of this._dataProducers.values())y.transportClosed();this._dataProducers.clear();for(const y of this._dataConsumers.values())y.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new T.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:y}){if(P.debug("restartIce()"),this._closed)throw new T.InvalidStateError("closed");if(!y)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(y),"transport.restartIce()")}async updateIceServers({iceServers:y}={}){if(P.debug("updateIceServers()"),this._closed)throw new T.InvalidStateError("closed");if(!Array.isArray(y))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(y),"transport.updateIceServers()")}async produce({track:y,encodings:w,codecOptions:p,codec:C,stopTracks:A=!0,disableTrackOnPause:M=!0,zeroRtpOnPause:j=!1,onRtpSender:U,appData:z={}}={}){if(P.debug("produce() [track:%o]",y),this._closed)throw new T.InvalidStateError("closed");if(!y)throw new TypeError("missing track");if(this._direction!=="send")throw new T.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[y.kind])throw new T.UnsupportedError(`cannot produce ${y.kind}`);if(y.readyState==="ended")throw new T.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(z&&typeof z!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let W;if(w&&!Array.isArray(w))throw TypeError("encodings must be an array");w&&w.length===0?W=void 0:w&&(W=w.map(Ee=>{const Ce={active:!0};return Ee.active===!1&&(Ce.active=!1),typeof Ee.dtx=="boolean"&&(Ce.dtx=Ee.dtx),typeof Ee.scalabilityMode=="string"&&(Ce.scalabilityMode=Ee.scalabilityMode),typeof Ee.scaleResolutionDownBy=="number"&&(Ce.scaleResolutionDownBy=Ee.scaleResolutionDownBy),typeof Ee.maxBitrate=="number"&&(Ce.maxBitrate=Ee.maxBitrate),typeof Ee.maxFramerate=="number"&&(Ce.maxFramerate=Ee.maxFramerate),typeof Ee.adaptivePtime=="boolean"&&(Ce.adaptivePtime=Ee.adaptivePtime),typeof Ee.priority=="string"&&(Ce.priority=Ee.priority),typeof Ee.networkPriority=="string"&&(Ce.networkPriority=Ee.networkPriority),Ce}));const{localId:Z,rtpParameters:ce,rtpSender:J}=await this._handler.send({track:y,encodings:W,codecOptions:p,codec:C,onRtpSender:U});try{f.validateRtpParameters(ce);const{id:Ee}=await new Promise((Re,ye)=>{this.safeEmit("produce",{kind:y.kind,rtpParameters:ce,appData:z},Re,ye)}),Ce=new R.Producer({id:Ee,localId:Z,rtpSender:J,track:y,rtpParameters:ce,stopTracks:A,disableTrackOnPause:M,zeroRtpOnPause:j,appData:z});return this._producers.set(Ce.id,Ce),this.handleProducer(Ce),this._observer.safeEmit("newproducer",Ce),Ce}catch(Ee){throw this._handler.stopSending(Z).catch(()=>{}),Ee}},"transport.produce()").catch(W=>{if(A)try{y.stop()}catch{}throw W})}async consume({id:y,producerId:w,kind:p,rtpParameters:C,streamId:A,onRtpReceiver:M,appData:j={}}){if(P.debug("consume()"),this._closed)throw new T.InvalidStateError("closed");if(this._direction!=="recv")throw new T.UnsupportedError("not a receiving Transport");if(typeof y!="string")throw new TypeError("missing id");if(typeof w!="string")throw new TypeError("missing producerId");if(p!=="audio"&&p!=="video")throw new TypeError(`invalid kind '${p}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(j&&typeof j!="object")throw new TypeError("if given, appData must be an object");const U=v.clone(C);if(!f.canReceive(U,this._extendedRtpCapabilities))throw new T.UnsupportedError("cannot consume this Producer");const z=new S({id:y,producerId:w,kind:p,rtpParameters:U,streamId:A,onRtpReceiver:M,appData:j});return this._pendingConsumerTasks.push(z),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),z.promise}async produceData({ordered:y=!0,maxPacketLifeTime:w,maxRetransmits:p,label:C="",protocol:A="",appData:M={}}={}){if(P.debug("produceData()"),this._closed)throw new T.InvalidStateError("closed");if(this._direction!=="send")throw new T.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new T.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(M&&typeof M!="object")throw new TypeError("if given, appData must be an object");return(w||p)&&(y=!1),this._awaitQueue.push(async()=>{const{dataChannel:j,sctpStreamParameters:U}=await this._handler.sendDataChannel({ordered:y,maxPacketLifeTime:w,maxRetransmits:p,label:C,protocol:A});f.validateSctpStreamParameters(U);const{id:z}=await new Promise((Z,ce)=>{this.safeEmit("producedata",{sctpStreamParameters:U,label:C,protocol:A,appData:M},Z,ce)}),W=new F.DataProducer({id:z,dataChannel:j,sctpStreamParameters:U,appData:M});return this._dataProducers.set(W.id,W),this.handleDataProducer(W),this._observer.safeEmit("newdataproducer",W),W},"transport.produceData()")}async consumeData({id:y,dataProducerId:w,sctpStreamParameters:p,label:C="",protocol:A="",appData:M={}}){if(P.debug("consumeData()"),this._closed)throw new T.InvalidStateError("closed");if(this._direction!=="recv")throw new T.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new T.UnsupportedError("SCTP not enabled by remote Transport");if(typeof y!="string")throw new TypeError("missing id");if(typeof w!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(M&&typeof M!="object")throw new TypeError("if given, appData must be an object");const j=v.clone(p);return f.validateSctpStreamParameters(j),this._awaitQueue.push(async()=>{const{dataChannel:U}=await this._handler.receiveDataChannel({sctpStreamParameters:j,label:C,protocol:A}),z=new m.DataConsumer({id:y,dataProducerId:w,dataChannel:U,sctpStreamParameters:j,appData:M});return this._dataConsumers.set(z.id,z),this.handleDataConsumer(z),this._observer.safeEmit("newdataconsumer",z),z},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void P.debug("createPendingConsumers() | there is no Consumer to be created");const y=[...this._pendingConsumerTasks];let w;this._pendingConsumerTasks=[];const p=[];for(const C of y){const{id:A,kind:M,rtpParameters:j,streamId:U,onRtpReceiver:z}=C.consumerOptions;p.push({trackId:A,kind:M,rtpParameters:j,streamId:U,onRtpReceiver:z})}try{const C=await this._handler.receive(p);for(let A=0;A<C.length;++A){const M=y[A],j=C[A],{id:U,producerId:z,kind:W,rtpParameters:Z,appData:ce}=M.consumerOptions,{localId:J,rtpReceiver:Ee,track:Ce}=j,Re=new g.Consumer({id:U,localId:J,producerId:z,rtpReceiver:Ee,track:Ce,rtpParameters:Z,appData:ce});this._consumers.set(Re.id,Re),this.handleConsumer(Re),this._probatorConsumerCreated||w||W!=="video"||(w=Re),this._observer.safeEmit("newconsumer",Re),M.resolve(Re)}}catch(C){for(const A of y)A.reject(C)}if(w)try{const C=f.generateProbatorRtpParameters(w.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:C}]),P.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(C){P.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",C)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void P.debug("pausePendingConsumers() | there is no Consumer to be paused");const y=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const w=y.map(p=>p.localId);await this._handler.pauseReceiving(w)}catch(w){P.error("pausePendingConsumers() | failed to pause Consumers:",w)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void P.debug("resumePendingConsumers() | there is no Consumer to be resumed");const y=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const w=y.map(p=>p.localId);await this._handler.resumeReceiving(w)}catch(w){P.error("resumePendingConsumers() | failed to resume Consumers:",w)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void P.debug("closePendingConsumers() | there is no Consumer to be closed");const y=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(y.map(w=>w.localId))}catch(w){P.error("closePendingConsumers() | failed to close Consumers:",w)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const y=this._handler;y.on("@connect",({dtlsParameters:w},p,C)=>{this._closed?C(new T.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:w},p,C)}),y.on("@icegatheringstatechange",w=>{w!==this._iceGatheringState&&(P.debug("ICE gathering state changed to %s",w),this._iceGatheringState=w,this._closed||this.safeEmit("icegatheringstatechange",w))}),y.on("@icecandidateerror",w=>{P.warn(`ICE candidate error [url:${w.url}, localAddress:${w.address}, localPort:${w.port}]: ${w.errorCode} "${w.errorText}"`),this.safeEmit("icecandidateerror",w)}),y.on("@connectionstatechange",w=>{w!==this._connectionState&&(P.debug("connection state changed to %s",w),this._connectionState=w,this._closed||this.safeEmit("connectionstatechange",w))})}handleProducer(y){y.on("@close",()=>{this._producers.delete(y.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(y.localId),"producer @close event").catch(w=>P.warn("producer.close() failed:%o",w))}),y.on("@pause",(w,p)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(y.localId),"producer @pause event").then(w).catch(p)}),y.on("@resume",(w,p)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(y.localId),"producer @resume event").then(w).catch(p)}),y.on("@replacetrack",(w,p,C)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(y.localId,w),"producer @replacetrack event").then(p).catch(C)}),y.on("@setmaxspatiallayer",(w,p,C)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(y.localId,w),"producer @setmaxspatiallayer event").then(p).catch(C)}),y.on("@setrtpencodingparameters",(w,p,C)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(y.localId,w),"producer @setrtpencodingparameters event").then(p).catch(C)}),y.on("@getstats",(w,p)=>{if(this._closed)return p(new T.InvalidStateError("closed"));this._handler.getSenderStats(y.localId).then(w).catch(p)})}handleConsumer(y){y.on("@close",()=>{this._consumers.delete(y.id),this._pendingPauseConsumers.delete(y.id),this._pendingResumeConsumers.delete(y.id),this._closed||(this._pendingCloseConsumers.set(y.id,y),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),y.on("@pause",()=>{this._pendingResumeConsumers.has(y.id)&&this._pendingResumeConsumers.delete(y.id),this._pendingPauseConsumers.set(y.id,y),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),y.on("@resume",()=>{this._pendingPauseConsumers.has(y.id)&&this._pendingPauseConsumers.delete(y.id),this._pendingResumeConsumers.set(y.id,y),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),y.on("@getstats",(w,p)=>{if(this._closed)return p(new T.InvalidStateError("closed"));this._handler.getReceiverStats(y.localId).then(w).catch(p)})}handleDataProducer(y){y.on("@close",()=>{this._dataProducers.delete(y.id)})}handleDataConsumer(y){y.on("@close",()=>{this._dataConsumers.delete(y.id)})}}k.Transport=H},5602:I=>{var k=I.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(d){return d.encoding?"rtpmap:%d %s/%s/%s":d.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(d){return d.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(d){return d.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(d){return"extmap:%d"+(d.direction?"/%s":"%v")+(d["encrypt-uri"]?" %s":"%v")+" %s"+(d.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(d){return d.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(d){var E="candidate:%s %d %s %d %s %d typ %s";return E+=d.raddr!=null?" raddr %s rport %d":"%v%v",E+=d.tcptype!=null?" tcptype %s":"%v",d.generation!=null&&(E+=" generation %d"),E+=d["network-id"]!=null?" network-id %d":"%v",E+=d["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(d){var E="ssrc:%d";return d.attribute!=null&&(E+=" %s",d.value!=null&&(E+=":%s")),E}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(d){return d.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(d){return d.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(d){return"imageattr:%s %s %s"+(d.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(d){return"simulcast:%s %s"+(d.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(d){return"ts-refclk:%s"+(d.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(d){var E="mediaclk:";return E+=d.id!=null?"id=%s %s":"%v%s",E+=d.mediaClockValue!=null?"=%s":"",E+=d.rateNumerator!=null?" rate=%s":"",E+=d.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(k).forEach(function(d){k[d].forEach(function(E){E.reg||(E.reg=/(.*)/),E.format||(E.format="%s")})})},5765:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Safari12=void 0;const E=d(7363),_=d(2994),b=d(1765),T=d(8046),v=d(5544),f=d(5938),R=d(4256),g=d(4893),F=d(521),m=d(1305),P=d(3303),S=new _.Logger("Safari12"),H={OS:1024,MIS:1024};class x extends F.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new x}constructor(){super()}get name(){return"Safari12"}close(){if(S.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const w=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{w.addTransceiver("audio"),w.addTransceiver("video");const p=await w.createOffer();try{w.close()}catch{}const C=E.parse(p.sdp),A=v.extractRtpCapabilities({sdpObject:C});return R.addNackSupportForOpus(A),A}catch(p){try{w.close()}catch{}throw p}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:H}}run({direction:w,iceParameters:p,iceCandidates:C,dtlsParameters:A,sctpParameters:M,iceServers:j,iceTransportPolicy:U,additionalSettings:z,proprietaryConstraints:W,extendedRtpCapabilities:Z}){this.assertNotClosed(),S.debug("run()"),this._direction=w,this._remoteSdp=new m.RemoteSdp({iceParameters:p,iceCandidates:C,dtlsParameters:A,sctpParameters:M}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",Z),video:T.getSendingRtpParameters("video",Z)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",Z),video:T.getSendingRemoteRtpParameters("video",Z)},A.role&&A.role!=="auto"&&(this._forcedLocalDtlsRole=A.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:j??[],iceTransportPolicy:U??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...z},W),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ce=>{this.emit("@icecandidateerror",ce)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(w){this.assertNotClosed(),S.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=w,this._pc.setConfiguration(p)}async restartIce(w){if(this.assertNotClosed(),S.debug("restartIce()"),this._remoteSdp.updateIceParameters(w),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const C={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:w,encodings:p,codecOptions:C,codec:A,onRtpSender:M}){this.assertNotClosed(),this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",w.kind,w.id);const j=b.clone(this._sendingRtpParametersByKind[w.kind]);j.codecs=T.reduceCodecs(j.codecs,A);const U=b.clone(this._sendingRemoteRtpParametersByKind[w.kind]);U.codecs=T.reduceCodecs(U.codecs,A);const z=this._remoteSdp.getNextMediaSectionIdx(),W=this._pc.addTransceiver(w,{direction:"sendonly",streams:[this._sendStream]});M&&M(W.sender);let Z,ce=await this._pc.createOffer(),J=E.parse(ce.sdp);J.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J});const Ee=(0,P.parse)((p??[{}])[0].scalabilityMode);p&&p.length>1&&(S.debug("send() | enabling legacy simulcast"),J=E.parse(ce.sdp),Z=J.media[z.idx],f.addLegacySimulcast({offerMediaObject:Z,numStreams:p.length}),ce={type:"offer",sdp:E.write(J)}),S.debug("send() | calling pc.setLocalDescription() [offer:%o]",ce),await this._pc.setLocalDescription(ce);const Ce=W.mid;if(j.mid=Ce,J=E.parse(this._pc.localDescription.sdp),Z=J.media[z.idx],j.rtcp.cname=v.getCname({offerMediaObject:Z}),j.encodings=f.getRtpEncodings({offerMediaObject:Z}),p)for(let ye=0;ye<j.encodings.length;++ye)p[ye]&&Object.assign(j.encodings[ye],p[ye]);if(j.encodings.length>1&&(j.codecs[0].mimeType.toLowerCase()==="video/vp8"||j.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ye of j.encodings)ye.scalabilityMode?ye.scalabilityMode=`L1T${Ee.temporalLayers}`:ye.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Z,reuseMid:z.reuseMid,offerRtpParameters:j,answerRtpParameters:U,codecOptions:C});const Re={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Re),await this._pc.setRemoteDescription(Re),this._mapMidTransceiver.set(Ce,W),{localId:Ce,rtpParameters:j,rtpSender:W.sender}}async stopSending(w){if(this.assertSendDirection(),this._closed)return;S.debug("stopSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const C=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._mapMidTransceiver.delete(w)}async pauseSending(w){this.assertNotClosed(),this.assertSendDirection(),S.debug("pauseSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(w);const C=await this._pc.createOffer();S.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async resumeSending(w){this.assertNotClosed(),this.assertSendDirection(),S.debug("resumeSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(w);const C=await this._pc.createOffer();S.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async replaceTrack(w,p){this.assertNotClosed(),this.assertSendDirection(),p?S.debug("replaceTrack() [localId:%s, track.id:%s]",w,p.id):S.debug("replaceTrack() [localId:%s, no track]",w);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");await C.sender.replaceTrack(p)}async setMaxSpatialLayer(w,p){this.assertNotClosed(),this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",w,p);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");const A=C.sender.getParameters();A.encodings.forEach((U,z)=>{U.active=z<=p}),await C.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const M=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const j={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async setRtpEncodingParameters(w,p){this.assertNotClosed(),this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",w,p);const C=this._mapMidTransceiver.get(w);if(!C)throw new Error("associated RTCRtpTransceiver not found");const A=C.sender.getParameters();A.encodings.forEach((U,z)=>{A.encodings[z]={...U,...p}}),await C.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const M=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const j={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async getSenderStats(w){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:w,maxPacketLifeTime:p,maxRetransmits:C,label:A,protocol:M}){this.assertNotClosed(),this.assertSendDirection();const j={negotiated:!0,id:this._nextSendSctpStreamId,ordered:w,maxPacketLifeTime:p,maxRetransmits:C,protocol:M};S.debug("sendDataChannel() [options:%o]",j);const U=this._pc.createDataChannel(A,j);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%H.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),W=E.parse(z.sdp),Z=W.media.find(J=>J.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:Z});const ce={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setRemoteDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:U,sctpStreamParameters:{streamId:j.id,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits}}}async receive(w){this.assertNotClosed(),this.assertRecvDirection();const p=[],C=new Map;for(const U of w){const{trackId:z,kind:W,rtpParameters:Z,streamId:ce}=U;S.debug("receive() [trackId:%s, kind:%s]",z,W);const J=Z.mid??String(this._mapMidTransceiver.size);C.set(z,J),this._remoteSdp.receive({mid:J,kind:W,offerRtpParameters:Z,streamId:ce??Z.rtcp.cname,trackId:z})}const A={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",A),await this._pc.setRemoteDescription(A);for(const U of w){const{trackId:z,onRtpReceiver:W}=U;if(W){const Z=C.get(z),ce=this._pc.getTransceivers().find(J=>J.mid===Z);if(!ce)throw new Error("transceiver not found");W(ce.receiver)}}let M=await this._pc.createAnswer();const j=E.parse(M.sdp);for(const U of w){const{trackId:z,rtpParameters:W}=U,Z=C.get(z),ce=j.media.find(J=>String(J.mid)===Z);v.applyCodecParameters({offerRtpParameters:W,answerMediaObject:ce})}M={type:"answer",sdp:E.write(j)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",M),await this._pc.setLocalDescription(M);for(const U of w){const{trackId:z}=U,W=C.get(z),Z=this._pc.getTransceivers().find(ce=>ce.mid===W);if(!Z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(W,Z),p.push({localId:W,track:Z.receiver.track,rtpReceiver:Z.receiver})}return p}async stopReceiving(w){if(this.assertRecvDirection(),this._closed)return;for(const A of w){S.debug("stopReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(M.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C);for(const A of w)this._mapMidTransceiver.delete(A)}async pauseReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){S.debug("pauseReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="inactive",this._remoteSdp.pauseMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}async resumeReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){S.debug("resumeReceiving() [localId:%s]",A);const M=this._mapMidTransceiver.get(A);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const C=await this._pc.createAnswer();S.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C)}async getReceiverStats(w){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:w,label:p,protocol:C}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:A,ordered:M,maxPacketLifeTime:j,maxRetransmits:U}=w,z={negotiated:!0,id:A,ordered:M,maxPacketLifeTime:j,maxRetransmits:U,protocol:C};S.debug("receiveDataChannel() [options:%o]",z);const W=this._pc.createDataChannel(p,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Z={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Z),await this._pc.setRemoteDescription(Z);const ce=await this._pc.createAnswer();if(!this._transportReady){const J=E.parse(ce.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setLocalDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:W}}async setupTransport({localDtlsRole:w,localSdpObject:p}){p||(p=E.parse(this._pc.localDescription.sdp));const C=v.extractDtlsParameters({sdpObject:p});C.role=w,this._remoteSdp.updateDtlsRole(w==="client"?"server":"client"),await new Promise((A,M)=>{this.safeEmit("@connect",{dtlsParameters:C},A,M)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.Safari12=x},5862:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.FakeEventTarget=void 0,k.FakeEventTarget=class{listeners={};addEventListener(d,E,_={}){E&&(this.listeners[d]??=[],this.listeners[d].push({callback:E,once:_.once===!0}))}removeEventListener(d,E){this.listeners[d]&&(this.listeners[d]=this.listeners[d].filter(_=>_.callback!==E))}dispatchEvent(d){if(!d||typeof d.type!="string")throw new Error("invalid event object");const E=this.listeners[d.type];if(!E)return!0;for(const _ of[...E]){try{_.callback.call(this,d)}catch(b){setTimeout(()=>{throw b},0)}_.once&&this.removeEventListener(d.type,_.callback)}return!d.defaultPrevented}}},5869:(I,k,d)=>{var E=d(887);I.exports=function(_,b,T,v,f){var R=E(_,b,T,v,f);return R.next().then(function(g){return g.done?g.value:R.next()})},I.exports.__esModule=!0,I.exports.default=I.exports},5938:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getRtpEncodings=function({offerMediaObject:d}){const E=new Set;for(const T of d.ssrcs??[]){const v=T.id;E.add(v)}if(E.size===0)throw new Error("no a=ssrc lines found");const _=new Map;for(const T of d.ssrcGroups??[]){if(T.semantics!=="FID")continue;let[v,f]=T.ssrcs.split(/\s+/);v=Number(v),f=Number(f),E.has(v)&&(E.delete(v),E.delete(f),_.set(v,f))}for(const T of E)_.set(T,null);const b=[];for(const[T,v]of _){const f={ssrc:T};v&&(f.rtx={ssrc:v}),b.push(f)}return b},k.addLegacySimulcast=function({offerMediaObject:d,numStreams:E}){if(E<=1)throw new TypeError("numStreams must be greater than 1");const _=(d.ssrcs??[]).find(P=>P.attribute==="msid");if(!_)throw new Error("a=ssrc line with msid information not found");const[b,T]=_.value.split(" "),v=Number(_.id);let f;(d.ssrcGroups??[]).some(P=>{if(P.semantics!=="FID")return!1;const S=P.ssrcs.split(/\s+/);return Number(S[0])===v&&(f=Number(S[1]),!0)});const R=d.ssrcs.find(P=>P.attribute==="cname");if(!R)throw new Error("a=ssrc line with cname information not found");const g=R.value,F=[],m=[];for(let P=0;P<E;++P)F.push(v+P),f&&m.push(f+P);d.ssrcGroups=[],d.ssrcs=[],d.ssrcGroups.push({semantics:"SIM",ssrcs:F.join(" ")});for(const P of F)d.ssrcs.push({id:P,attribute:"cname",value:g}),d.ssrcs.push({id:P,attribute:"msid",value:`${b} ${T}`});for(let P=0;P<m.length;++P){const S=F[P],H=m[P];d.ssrcs.push({id:H,attribute:"cname",value:g}),d.ssrcs.push({id:H,attribute:"msid",value:`${b} ${T}`}),d.ssrcGroups.push({semantics:"FID",ssrcs:`${S} ${H}`})}}},5953:function(I,k,d){var E;I.exports=(E=d(9021),d(3240),function(_){var b=E,T=b.lib,v=T.WordArray,f=T.Hasher,R=b.x64.Word,g=b.algo,F=[],m=[],P=[];(function(){for(var x=1,y=0,w=0;w<24;w++){F[x+5*y]=(w+1)*(w+2)/2%64;var p=(2*x+3*y)%5;x=y%5,y=p}for(x=0;x<5;x++)for(y=0;y<5;y++)m[x+5*y]=y+(2*x+3*y)%5*5;for(var C=1,A=0;A<24;A++){for(var M=0,j=0,U=0;U<7;U++){if(1&C){var z=(1<<U)-1;z<32?j^=1<<z:M^=1<<z-32}128&C?C=C<<1^113:C<<=1}P[A]=R.create(M,j)}})();var S=[];(function(){for(var x=0;x<25;x++)S[x]=R.create()})();var H=g.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var x=this._state=[],y=0;y<25;y++)x[y]=new R.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(x,y){for(var w=this._state,p=this.blockSize/2,C=0;C<p;C++){var A=x[y+2*C],M=x[y+2*C+1];A=16711935&(A<<8|A>>>24)|4278255360&(A<<24|A>>>8),M=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),(Qe=w[C]).high^=M,Qe.low^=A}for(var j=0;j<24;j++){for(var U=0;U<5;U++){for(var z=0,W=0,Z=0;Z<5;Z++)z^=(Qe=w[U+5*Z]).high,W^=Qe.low;var ce=S[U];ce.high=z,ce.low=W}for(U=0;U<5;U++){var J=S[(U+4)%5],Ee=S[(U+1)%5],Ce=Ee.high,Re=Ee.low;for(z=J.high^(Ce<<1|Re>>>31),W=J.low^(Re<<1|Ce>>>31),Z=0;Z<5;Z++)(Qe=w[U+5*Z]).high^=z,Qe.low^=W}for(var ye=1;ye<25;ye++){var Te=(Qe=w[ye]).high,He=Qe.low,we=F[ye];we<32?(z=Te<<we|He>>>32-we,W=He<<we|Te>>>32-we):(z=He<<we-32|Te>>>64-we,W=Te<<we-32|He>>>64-we);var Je=S[m[ye]];Je.high=z,Je.low=W}var Be=S[0],nt=w[0];for(Be.high=nt.high,Be.low=nt.low,U=0;U<5;U++)for(Z=0;Z<5;Z++){var Qe=w[ye=U+5*Z],Ze=S[ye],Ht=S[(U+1)%5+5*Z],or=S[(U+2)%5+5*Z];Qe.high=Ze.high^~Ht.high&or.high,Qe.low=Ze.low^~Ht.low&or.low}Qe=w[0];var Nr=P[j];Qe.high^=Nr.high,Qe.low^=Nr.low}},_doFinalize:function(){var x=this._data,y=x.words,w=(this._nDataBytes,8*x.sigBytes),p=32*this.blockSize;y[w>>>5]|=1<<24-w%32,y[(_.ceil((w+1)/p)*p>>>5)-1]|=128,x.sigBytes=4*y.length,this._process();for(var C=this._state,A=this.cfg.outputLength/8,M=A/8,j=[],U=0;U<M;U++){var z=C[U],W=z.high,Z=z.low;W=16711935&(W<<8|W>>>24)|4278255360&(W<<24|W>>>8),Z=16711935&(Z<<8|Z>>>24)|4278255360&(Z<<24|Z>>>8),j.push(Z),j.push(W)}return new v.init(j,A)},clone:function(){for(var x=f.clone.call(this),y=x._state=this._state.slice(0),w=0;w<25;w++)y[w]=y[w].clone();return x}});b.SHA3=f._createHelper(H),b.HmacSHA3=f._createHmacHelper(H)}(Math),E.SHA3)},6004:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Device=void 0,k.detectDevice=j;const E=d(2109),_=d(2994),b=d(3953),T=d(4893),v=d(1765),f=d(8046),R=d(5601),g=d(2183),F=d(11),m=d(5535),P=d(8155),S=d(7402),H=d(2292),x=d(1767),y=d(5765),w=d(9676),p=d(8633),C=d(4039),A=d(9352),M=new _.Logger("Device");function j(U){if(!U&&typeof navigator=="object"&&navigator.product==="ReactNative")return M.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void M.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?(M.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(M.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(U||typeof navigator=="object"&&typeof navigator.userAgent=="string"){U??=navigator.userAgent;const z=new E.UAParser(U);M.debug("detectDevice() | browser detected [userAgent:%s, parsed:%o]",U,z.getResult());const W=z.getBrowser(),Z=W.name?.toLowerCase(),ce=parseInt(W.major??"0"),J=z.getEngine(),Ee=J.name?.toLowerCase(),Ce=z.getOS(),Re=Ce.name?.toLowerCase(),ye=parseFloat(Ce.version??"0"),Te=z.getDevice(),He=Te.model?.toLowerCase(),we=Re==="ios"||He==="ipad",Je=Z&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(Z),Be=Z&&["firefox","mobile firefox","mobile focus"].includes(Z),nt=Z&&["safari","mobile safari"].includes(Z),Qe=Z&&["edge"].includes(Z);if((Je||Qe)&&!we&&ce>=111)return"Chrome111";if(Je&&!we&&ce>=74||Qe&&!we&&ce>=88)return"Chrome74";if(Je&&!we&&ce>=70)return"Chrome70";if(Je&&!we&&ce>=67)return"Chrome67";if(Je&&!we&&ce>=55)return"Chrome55";if(Be&&!we&&ce>=120)return"Firefox120";if(Be&&!we&&ce>=60)return"Firefox60";if(Be&&we&&ye>=14.3||nt&&ce>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(nt&&ce>=11)return"Safari11";if(Qe&&!we&&ce>=11&&ce<=18)return"Edge11";if(Ee==="webkit"&&we&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Ee==="blink"){const Ze=U.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(Ze){const Ht=Number(Ze[1]);return Ht>=111?"Chrome111":Ht>=74?"Chrome74":Ht>=70?"Chrome70":Ht>=67?"Chrome67":"Chrome55"}return"Chrome111"}return void M.warn("detectDevice() | browser not supported [name:%s, version:%s]",Z,ce)}M.warn("detectDevice() | unknown device")}k.Device=class{_handlerFactory;_handlerName;_loaded=!1;_extendedRtpCapabilities;_recvRtpCapabilities;_canProduceByKind;_sctpCapabilities;_observer=new b.EnhancedEventEmitter;constructor({handlerName:U,handlerFactory:z}={}){if(M.debug("constructor()"),U&&z)throw new TypeError("just one of handlerName or handlerInterface can be given");if(z)this._handlerFactory=z;else{if(U)M.debug("constructor() | handler given: %s",U);else{if(!(U=j()))throw new T.UnsupportedError("device not supported");M.debug("constructor() | detected handler: %s",U)}switch(U){case"Chrome111":this._handlerFactory=g.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=F.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=m.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=P.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=S.Chrome55.createFactory();break;case"Firefox120":this._handlerFactory=H.Firefox120.createFactory();break;case"Firefox60":this._handlerFactory=x.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=y.Safari12.createFactory();break;case"Safari11":this._handlerFactory=w.Safari11.createFactory();break;case"Edge11":this._handlerFactory=p.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=C.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=A.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${U}"`)}}const W=this._handlerFactory();this._handlerName=W.name,W.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new T.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new T.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:U}){let z;M.debug("load() [routerRtpCapabilities:%o]",U);try{if(this._loaded)throw new T.InvalidStateError("already loaded");const W=v.clone(U);f.validateRtpCapabilities(W),z=this._handlerFactory();const Z=await z.getNativeRtpCapabilities();M.debug("load() | got native RTP capabilities:%o",Z);const ce=v.clone(Z);f.validateRtpCapabilities(ce),this._extendedRtpCapabilities=f.getExtendedRtpCapabilities(ce,W),M.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=f.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=f.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=f.getRecvRtpCapabilities(this._extendedRtpCapabilities),f.validateRtpCapabilities(this._recvRtpCapabilities),M.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await z.getNativeSctpCapabilities(),M.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),f.validateSctpCapabilities(this._sctpCapabilities),M.debug("load() succeeded"),this._loaded=!0,z.close()}catch(W){throw z&&z.close(),W}}canProduce(U){if(!this._loaded)throw new T.InvalidStateError("not loaded");if(U!=="audio"&&U!=="video")throw new TypeError(`invalid kind "${U}"`);return this._canProduceByKind[U]}createSendTransport({id:U,iceParameters:z,iceCandidates:W,dtlsParameters:Z,sctpParameters:ce,iceServers:J,iceTransportPolicy:Ee,additionalSettings:Ce,proprietaryConstraints:Re,appData:ye}){return M.debug("createSendTransport()"),this.createTransport({direction:"send",id:U,iceParameters:z,iceCandidates:W,dtlsParameters:Z,sctpParameters:ce,iceServers:J,iceTransportPolicy:Ee,additionalSettings:Ce,proprietaryConstraints:Re,appData:ye})}createRecvTransport({id:U,iceParameters:z,iceCandidates:W,dtlsParameters:Z,sctpParameters:ce,iceServers:J,iceTransportPolicy:Ee,additionalSettings:Ce,proprietaryConstraints:Re,appData:ye}){return M.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:U,iceParameters:z,iceCandidates:W,dtlsParameters:Z,sctpParameters:ce,iceServers:J,iceTransportPolicy:Ee,additionalSettings:Ce,proprietaryConstraints:Re,appData:ye})}createTransport({direction:U,id:z,iceParameters:W,iceCandidates:Z,dtlsParameters:ce,sctpParameters:J,iceServers:Ee,iceTransportPolicy:Ce,additionalSettings:Re,proprietaryConstraints:ye,appData:Te}){if(!this._loaded)throw new T.InvalidStateError("not loaded");if(typeof z!="string")throw new TypeError("missing id");if(typeof W!="object")throw new TypeError("missing iceParameters");if(!Array.isArray(Z))throw new TypeError("missing iceCandidates");if(typeof ce!="object")throw new TypeError("missing dtlsParameters");if(J&&typeof J!="object")throw new TypeError("wrong sctpParameters");if(Te&&typeof Te!="object")throw new TypeError("if given, appData must be an object");const He=new R.Transport({direction:U,id:z,iceParameters:W,iceCandidates:Z,dtlsParameters:ce,sctpParameters:J,iceServers:Ee,iceTransportPolicy:Ce,additionalSettings:Re,proprietaryConstraints:ye,appData:Te,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",He),He}}},6011:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.unsafeStringify=void 0;const E=d(9746),_=[];for(let T=0;T<256;++T)_.push((T+256).toString(16).slice(1));function b(T,v=0){return(_[T[v+0]]+_[T[v+1]]+_[T[v+2]]+_[T[v+3]]+"-"+_[T[v+4]]+_[T[v+5]]+"-"+_[T[v+6]]+_[T[v+7]]+"-"+_[T[v+8]]+_[T[v+9]]+"-"+_[T[v+10]]+_[T[v+11]]+_[T[v+12]]+_[T[v+13]]+_[T[v+14]]+_[T[v+15]]).toLowerCase()}k.unsafeStringify=b,k.default=function(T,v=0){const f=b(T,v);if(!(0,E.default)(f))throw TypeError("Stringified UUID is invalid");return f}},6298:function(I,k,d){var E;I.exports=(E=d(9021),d(754),d(4636),d(9506),d(7165),function(){var _=E,b=_.lib.StreamCipher,T=_.algo,v=[],f=[],R=[],g=T.Rabbit=b.extend({_doReset:function(){for(var m=this._key.words,P=this.cfg.iv,S=0;S<4;S++)m[S]=16711935&(m[S]<<8|m[S]>>>24)|4278255360&(m[S]<<24|m[S]>>>8);var H=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],x=this._C=[m[2]<<16|m[2]>>>16,4294901760&m[0]|65535&m[1],m[3]<<16|m[3]>>>16,4294901760&m[1]|65535&m[2],m[0]<<16|m[0]>>>16,4294901760&m[2]|65535&m[3],m[1]<<16|m[1]>>>16,4294901760&m[3]|65535&m[0]];for(this._b=0,S=0;S<4;S++)F.call(this);for(S=0;S<8;S++)x[S]^=H[S+4&7];if(P){var y=P.words,w=y[0],p=y[1],C=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8),A=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),M=C>>>16|4294901760&A,j=A<<16|65535&C;for(x[0]^=C,x[1]^=M,x[2]^=A,x[3]^=j,x[4]^=C,x[5]^=M,x[6]^=A,x[7]^=j,S=0;S<4;S++)F.call(this)}},_doProcessBlock:function(m,P){var S=this._X;F.call(this),v[0]=S[0]^S[5]>>>16^S[3]<<16,v[1]=S[2]^S[7]>>>16^S[5]<<16,v[2]=S[4]^S[1]>>>16^S[7]<<16,v[3]=S[6]^S[3]>>>16^S[1]<<16;for(var H=0;H<4;H++)v[H]=16711935&(v[H]<<8|v[H]>>>24)|4278255360&(v[H]<<24|v[H]>>>8),m[P+H]^=v[H]},blockSize:4,ivSize:2});function F(){for(var m=this._X,P=this._C,S=0;S<8;S++)f[S]=P[S];for(P[0]=P[0]+1295307597+this._b|0,P[1]=P[1]+3545052371+(P[0]>>>0<f[0]>>>0?1:0)|0,P[2]=P[2]+886263092+(P[1]>>>0<f[1]>>>0?1:0)|0,P[3]=P[3]+1295307597+(P[2]>>>0<f[2]>>>0?1:0)|0,P[4]=P[4]+3545052371+(P[3]>>>0<f[3]>>>0?1:0)|0,P[5]=P[5]+886263092+(P[4]>>>0<f[4]>>>0?1:0)|0,P[6]=P[6]+1295307597+(P[5]>>>0<f[5]>>>0?1:0)|0,P[7]=P[7]+3545052371+(P[6]>>>0<f[6]>>>0?1:0)|0,this._b=P[7]>>>0<f[7]>>>0?1:0,S=0;S<8;S++){var H=m[S]+P[S],x=65535&H,y=H>>>16,w=((x*x>>>17)+x*y>>>15)+y*y,p=((4294901760&H)*H|0)+((65535&H)*H|0);R[S]=w^p}m[0]=R[0]+(R[7]<<16|R[7]>>>16)+(R[6]<<16|R[6]>>>16)|0,m[1]=R[1]+(R[0]<<8|R[0]>>>24)+R[7]|0,m[2]=R[2]+(R[1]<<16|R[1]>>>16)+(R[0]<<16|R[0]>>>16)|0,m[3]=R[3]+(R[2]<<8|R[2]>>>24)+R[1]|0,m[4]=R[4]+(R[3]<<16|R[3]>>>16)+(R[2]<<16|R[2]>>>16)|0,m[5]=R[5]+(R[4]<<8|R[4]>>>24)+R[3]|0,m[6]=R[6]+(R[5]<<16|R[5]>>>16)+(R[4]<<16|R[4]>>>16)|0,m[7]=R[7]+(R[6]<<8|R[6]>>>24)+R[5]|0}_.Rabbit=b._createHelper(g)}(),E.Rabbit)},6308:function(I,k,d){var E,_,b,T,v,f;I.exports=(f=d(9021),d(3009),_=(E=f).lib.WordArray,b=E.algo,T=b.SHA256,v=b.SHA224=T.extend({_doReset:function(){this._hash=new _.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var R=T._doFinalize.call(this);return R.sigBytes-=4,R}}),E.SHA224=T._createHelper(v),E.HmacSHA224=T._createHmacHelper(v),f.SHA224)},6356:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0});const E=d(6011),_=d(1425),b=d(6568);k.default=function(T,v,f){T??={},f??=0;let R=(0,_.default)({...T,_v6:!0},new Uint8Array(16));if(R=(0,b.default)(R),v){for(let g=0;g<16;g++)v[f+g]=R[g];return v}return(0,E.unsafeStringify)(R)}},6372:function(I,k,d){var E;I.exports=(E=d(9021),d(7165),E.mode.CTRGladman=function(){var _=E.lib.BlockCipherMode.extend();function b(f){if(255&~(f>>24))f+=16777216;else{var R=f>>16&255,g=f>>8&255,F=255&f;R===255?(R=0,g===255?(g=0,F===255?F=0:++F):++g):++R,f=0,f+=R<<16,f+=g<<8,f+=F}return f}function T(f){return(f[0]=b(f[0]))===0&&(f[1]=b(f[1])),f}var v=_.Encryptor=_.extend({processBlock:function(f,R){var g=this._cipher,F=g.blockSize,m=this._iv,P=this._counter;m&&(P=this._counter=m.slice(0),this._iv=void 0),T(P);var S=P.slice(0);g.encryptBlock(S,0);for(var H=0;H<F;H++)f[R+H]^=S[H]}});return _.Decryptor=v,_}(),E.mode.CTRGladman)},6440:function(I,k,d){var E;I.exports=(E=d(9021),function(){if(typeof ArrayBuffer=="function"){var _=E.lib.WordArray,b=_.init,T=_.init=function(v){if(v instanceof ArrayBuffer&&(v=new Uint8Array(v)),(v instanceof Int8Array||typeof Uint8ClampedArray<"u"&&v instanceof Uint8ClampedArray||v instanceof Int16Array||v instanceof Uint16Array||v instanceof Int32Array||v instanceof Uint32Array||v instanceof Float32Array||v instanceof Float64Array)&&(v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength)),v instanceof Uint8Array){for(var f=v.byteLength,R=[],g=0;g<f;g++)R[g>>>2]|=v[g]<<24-g%4*8;b.call(this,R,f)}else b.apply(this,arguments)};T.prototype=_}}(),E.lib.WordArray)},6568:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0});const E=d(1797),_=d(6011);k.default=function(b){const T=function(v){return Uint8Array.of((15&v[6])<<4|v[7]>>4&15,(15&v[7])<<4|(240&v[4])>>4,(15&v[4])<<4|(240&v[5])>>4,(15&v[5])<<4|(240&v[0])>>4,(15&v[0])<<4|(240&v[1])>>4,(15&v[1])<<4|(240&v[2])>>4,96|15&v[2],v[3],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])}(typeof b=="string"?(0,E.default)(b):b);return typeof b=="string"?(0,_.unsafeStringify)(T):T}},6585:I=>{var k=1e3,d=60*k,E=60*d,_=24*E,b=7*_,T=365.25*_;function v(f,R,g,F){var m=R>=1.5*g;return Math.round(f/g)+" "+F+(m?"s":"")}I.exports=function(f,R){R=R||{};var g=typeof f;if(g==="string"&&f.length>0)return function(F){if(!((F=String(F)).length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(m){var P=parseFloat(m[1]);switch((m[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return P*T;case"weeks":case"week":case"w":return P*b;case"days":case"day":case"d":return P*_;case"hours":case"hour":case"hrs":case"hr":case"h":return P*E;case"minutes":case"minute":case"mins":case"min":case"m":return P*d;case"seconds":case"second":case"secs":case"sec":case"s":return P*k;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return P;default:return}}}}(f);if(g==="number"&&isFinite(f))return R.long?function(F){var m=Math.abs(F);return m>=_?v(F,m,_,"day"):m>=E?v(F,m,E,"hour"):m>=d?v(F,m,d,"minute"):m>=k?v(F,m,k,"second"):F+" ms"}(f):function(F){var m=Math.abs(F);return m>=_?Math.round(F/_)+"d":m>=E?Math.round(F/E)+"h":m>=d?Math.round(F/d)+"m":m>=k?Math.round(F/k)+"s":F+"ms"}(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))}},6697:(I,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},6746:(I,k,d)=>{d.d(k,{KS:()=>_,fo:()=>E});var E=Object.freeze({SetKey:"setKey",RatchetRequest:"ratchetRequest",KeyRatcheted:"keyRatcheted"}),_=Object.freeze({ParticipantEncryptionStatusChanged:"participantEncryptionStatusChanged",EncryptionError:"encryptionError",E2EEStateChange:"e2eeStateChange"})},6880:function(I){I.exports=function(k){var d={};function E(_){if(d[_])return d[_].exports;var b=d[_]={i:_,l:!1,exports:{}};return k[_].call(b.exports,b,b.exports,E),b.l=!0,b.exports}return E.m=k,E.c=d,E.d=function(_,b,T){E.o(_,b)||Object.defineProperty(_,b,{enumerable:!0,get:T})},E.r=function(_){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},E.t=function(_,b){if(1&b&&(_=E(_)),8&b||4&b&&typeof _=="object"&&_&&_.__esModule)return _;var T=Object.create(null);if(E.r(T),Object.defineProperty(T,"default",{enumerable:!0,value:_}),2&b&&typeof _!="string")for(var v in _)E.d(T,v,(function(f){return _[f]}).bind(null,v));return T},E.n=function(_){var b=_&&_.__esModule?function(){return _.default}:function(){return _};return E.d(b,"a",b),b},E.o=function(_,b){return Object.prototype.hasOwnProperty.call(_,b)},E.p="",E(E.s=90)}({17:function(k,d,E){d.__esModule=!0,d.default=void 0;var _=E(18),b=function(){function T(){}return T.getFirstMatch=function(v,f){var R=f.match(v);return R&&R.length>0&&R[1]||""},T.getSecondMatch=function(v,f){var R=f.match(v);return R&&R.length>1&&R[2]||""},T.matchAndReturnConst=function(v,f,R){if(v.test(f))return R},T.getWindowsVersionName=function(v){switch(v){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},T.getMacOSVersionName=function(v){var f=v.split(".").splice(0,2).map(function(R){return parseInt(R,10)||0});if(f.push(0),f[0]===10)switch(f[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},T.getAndroidVersionName=function(v){var f=v.split(".").splice(0,2).map(function(R){return parseInt(R,10)||0});if(f.push(0),!(f[0]===1&&f[1]<5))return f[0]===1&&f[1]<6?"Cupcake":f[0]===1&&f[1]>=6?"Donut":f[0]===2&&f[1]<2?"Eclair":f[0]===2&&f[1]===2?"Froyo":f[0]===2&&f[1]>2?"Gingerbread":f[0]===3?"Honeycomb":f[0]===4&&f[1]<1?"Ice Cream Sandwich":f[0]===4&&f[1]<4?"Jelly Bean":f[0]===4&&f[1]>=4?"KitKat":f[0]===5?"Lollipop":f[0]===6?"Marshmallow":f[0]===7?"Nougat":f[0]===8?"Oreo":f[0]===9?"Pie":void 0},T.getVersionPrecision=function(v){return v.split(".").length},T.compareVersions=function(v,f,R){R===void 0&&(R=!1);var g=T.getVersionPrecision(v),F=T.getVersionPrecision(f),m=Math.max(g,F),P=0,S=T.map([v,f],function(H){var x=m-T.getVersionPrecision(H),y=H+new Array(x+1).join(".0");return T.map(y.split("."),function(w){return new Array(20-w.length).join("0")+w}).reverse()});for(R&&(P=m-Math.min(g,F)),m-=1;m>=P;){if(S[0][m]>S[1][m])return 1;if(S[0][m]===S[1][m]){if(m===P)return 0;m-=1}else if(S[0][m]<S[1][m])return-1}},T.map=function(v,f){var R,g=[];if(Array.prototype.map)return Array.prototype.map.call(v,f);for(R=0;R<v.length;R+=1)g.push(f(v[R]));return g},T.find=function(v,f){var R,g;if(Array.prototype.find)return Array.prototype.find.call(v,f);for(R=0,g=v.length;R<g;R+=1){var F=v[R];if(f(F,R))return F}},T.assign=function(v){for(var f,R,g=v,F=arguments.length,m=new Array(F>1?F-1:0),P=1;P<F;P++)m[P-1]=arguments[P];if(Object.assign)return Object.assign.apply(Object,[v].concat(m));var S=function(){var H=m[f];typeof H=="object"&&H!==null&&Object.keys(H).forEach(function(x){g[x]=H[x]})};for(f=0,R=m.length;f<R;f+=1)S();return v},T.getBrowserAlias=function(v){return _.BROWSER_ALIASES_MAP[v]},T.getBrowserTypeByAlias=function(v){return _.BROWSER_MAP[v]||""},T}();d.default=b,k.exports=d.default},18:function(k,d,E){d.__esModule=!0,d.ENGINE_MAP=d.OS_MAP=d.PLATFORMS_MAP=d.BROWSER_MAP=d.BROWSER_ALIASES_MAP=void 0,d.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},d.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},d.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},d.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},d.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(k,d,E){d.__esModule=!0,d.default=void 0;var _,b=(_=E(91))&&_.__esModule?_:{default:_},T=E(18);function v(R,g){for(var F=0;F<g.length;F++){var m=g[F];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(R,m.key,m)}}var f=function(){function R(){}var g,F,m;return R.getParser=function(P,S){if(S===void 0&&(S=!1),typeof P!="string")throw new Error("UserAgent should be a string");return new b.default(P,S)},R.parse=function(P){return new b.default(P).getResult()},g=R,m=[{key:"BROWSER_MAP",get:function(){return T.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return T.ENGINE_MAP}},{key:"OS_MAP",get:function(){return T.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return T.PLATFORMS_MAP}}],(F=null)&&v(g.prototype,F),m&&v(g,m),R}();d.default=f,k.exports=d.default},91:function(k,d,E){d.__esModule=!0,d.default=void 0;var _=R(E(92)),b=R(E(93)),T=R(E(94)),v=R(E(95)),f=R(E(17));function R(F){return F&&F.__esModule?F:{default:F}}var g=function(){function F(P,S){if(S===void 0&&(S=!1),P==null||P==="")throw new Error("UserAgent parameter can't be empty");this._ua=P,this.parsedResult={},S!==!0&&this.parse()}var m=F.prototype;return m.getUA=function(){return this._ua},m.test=function(P){return P.test(this._ua)},m.parseBrowser=function(){var P=this;this.parsedResult.browser={};var S=f.default.find(_.default,function(H){if(typeof H.test=="function")return H.test(P);if(H.test instanceof Array)return H.test.some(function(x){return P.test(x)});throw new Error("Browser's test function is not valid")});return S&&(this.parsedResult.browser=S.describe(this.getUA())),this.parsedResult.browser},m.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},m.getBrowserName=function(P){return P?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},m.getBrowserVersion=function(){return this.getBrowser().version},m.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},m.parseOS=function(){var P=this;this.parsedResult.os={};var S=f.default.find(b.default,function(H){if(typeof H.test=="function")return H.test(P);if(H.test instanceof Array)return H.test.some(function(x){return P.test(x)});throw new Error("Browser's test function is not valid")});return S&&(this.parsedResult.os=S.describe(this.getUA())),this.parsedResult.os},m.getOSName=function(P){var S=this.getOS().name;return P?String(S).toLowerCase()||"":S||""},m.getOSVersion=function(){return this.getOS().version},m.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},m.getPlatformType=function(P){P===void 0&&(P=!1);var S=this.getPlatform().type;return P?String(S).toLowerCase()||"":S||""},m.parsePlatform=function(){var P=this;this.parsedResult.platform={};var S=f.default.find(T.default,function(H){if(typeof H.test=="function")return H.test(P);if(H.test instanceof Array)return H.test.some(function(x){return P.test(x)});throw new Error("Browser's test function is not valid")});return S&&(this.parsedResult.platform=S.describe(this.getUA())),this.parsedResult.platform},m.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},m.getEngineName=function(P){return P?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},m.parseEngine=function(){var P=this;this.parsedResult.engine={};var S=f.default.find(v.default,function(H){if(typeof H.test=="function")return H.test(P);if(H.test instanceof Array)return H.test.some(function(x){return P.test(x)});throw new Error("Browser's test function is not valid")});return S&&(this.parsedResult.engine=S.describe(this.getUA())),this.parsedResult.engine},m.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},m.getResult=function(){return f.default.assign({},this.parsedResult)},m.satisfies=function(P){var S=this,H={},x=0,y={},w=0;if(Object.keys(P).forEach(function(W){var Z=P[W];typeof Z=="string"?(y[W]=Z,w+=1):typeof Z=="object"&&(H[W]=Z,x+=1)}),x>0){var p=Object.keys(H),C=f.default.find(p,function(W){return S.isOS(W)});if(C){var A=this.satisfies(H[C]);if(A!==void 0)return A}var M=f.default.find(p,function(W){return S.isPlatform(W)});if(M){var j=this.satisfies(H[M]);if(j!==void 0)return j}}if(w>0){var U=Object.keys(y),z=f.default.find(U,function(W){return S.isBrowser(W,!0)});if(z!==void 0)return this.compareVersion(y[z])}},m.isBrowser=function(P,S){S===void 0&&(S=!1);var H=this.getBrowserName().toLowerCase(),x=P.toLowerCase(),y=f.default.getBrowserTypeByAlias(x);return S&&y&&(x=y.toLowerCase()),x===H},m.compareVersion=function(P){var S=[0],H=P,x=!1,y=this.getBrowserVersion();if(typeof y=="string")return P[0]===">"||P[0]==="<"?(H=P.substr(1),P[1]==="="?(x=!0,H=P.substr(2)):S=[],P[0]===">"?S.push(1):S.push(-1)):P[0]==="="?H=P.substr(1):P[0]==="~"&&(x=!0,H=P.substr(1)),S.indexOf(f.default.compareVersions(y,H,x))>-1},m.isOS=function(P){return this.getOSName(!0)===String(P).toLowerCase()},m.isPlatform=function(P){return this.getPlatformType(!0)===String(P).toLowerCase()},m.isEngine=function(P){return this.getEngineName(!0)===String(P).toLowerCase()},m.is=function(P,S){return S===void 0&&(S=!1),this.isBrowser(P,S)||this.isOS(P)||this.isPlatform(P)},m.some=function(P){var S=this;return P===void 0&&(P=[]),P.some(function(H){return S.is(H)})},F}();d.default=g,k.exports=d.default},92:function(k,d,E){d.__esModule=!0,d.default=void 0;var _,b=(_=E(17))&&_.__esModule?_:{default:_},T=/version\/(\d+(\.?_?\d+)+)/i,v=[{test:[/googlebot/i],describe:function(f){var R={name:"Googlebot"},g=b.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/opera/i],describe:function(f){var R={name:"Opera"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/opr\/|opios/i],describe:function(f){var R={name:"Opera"},g=b.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/SamsungBrowser/i],describe:function(f){var R={name:"Samsung Internet for Android"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/Whale/i],describe:function(f){var R={name:"NAVER Whale Browser"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/MZBrowser/i],describe:function(f){var R={name:"MZ Browser"},g=b.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/focus/i],describe:function(f){var R={name:"Focus"},g=b.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/swing/i],describe:function(f){var R={name:"Swing"},g=b.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/coast/i],describe:function(f){var R={name:"Opera Coast"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(f){var R={name:"Opera Touch"},g=b.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/yabrowser/i],describe:function(f){var R={name:"Yandex Browser"},g=b.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/ucbrowser/i],describe:function(f){var R={name:"UC Browser"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/Maxthon|mxios/i],describe:function(f){var R={name:"Maxthon"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/epiphany/i],describe:function(f){var R={name:"Epiphany"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/puffin/i],describe:function(f){var R={name:"Puffin"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/sleipnir/i],describe:function(f){var R={name:"Sleipnir"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/k-meleon/i],describe:function(f){var R={name:"K-Meleon"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/micromessenger/i],describe:function(f){var R={name:"WeChat"},g=b.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/qqbrowser/i],describe:function(f){var R={name:/qqbrowserlite/i.test(f)?"QQ Browser Lite":"QQ Browser"},g=b.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/msie|trident/i],describe:function(f){var R={name:"Internet Explorer"},g=b.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/\sedg\//i],describe:function(f){var R={name:"Microsoft Edge"},g=b.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/edg([ea]|ios)/i],describe:function(f){var R={name:"Microsoft Edge"},g=b.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/vivaldi/i],describe:function(f){var R={name:"Vivaldi"},g=b.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/seamonkey/i],describe:function(f){var R={name:"SeaMonkey"},g=b.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/sailfish/i],describe:function(f){var R={name:"Sailfish"},g=b.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,f);return g&&(R.version=g),R}},{test:[/silk/i],describe:function(f){var R={name:"Amazon Silk"},g=b.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/phantom/i],describe:function(f){var R={name:"PhantomJS"},g=b.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/slimerjs/i],describe:function(f){var R={name:"SlimerJS"},g=b.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(f){var R={name:"BlackBerry"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/(web|hpw)[o0]s/i],describe:function(f){var R={name:"WebOS Browser"},g=b.default.getFirstMatch(T,f)||b.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/bada/i],describe:function(f){var R={name:"Bada"},g=b.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/tizen/i],describe:function(f){var R={name:"Tizen"},g=b.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/qupzilla/i],describe:function(f){var R={name:"QupZilla"},g=b.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/firefox|iceweasel|fxios/i],describe:function(f){var R={name:"Firefox"},g=b.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/electron/i],describe:function(f){var R={name:"Electron"},g=b.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/MiuiBrowser/i],describe:function(f){var R={name:"Miui"},g=b.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/chromium/i],describe:function(f){var R={name:"Chromium"},g=b.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,f)||b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/chrome|crios|crmo/i],describe:function(f){var R={name:"Chrome"},g=b.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/GSA/i],describe:function(f){var R={name:"Google Search"},g=b.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:function(f){var R=!f.test(/like android/i),g=f.test(/android/i);return R&&g},describe:function(f){var R={name:"Android Browser"},g=b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/playstation 4/i],describe:function(f){var R={name:"PlayStation 4"},g=b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/safari|applewebkit/i],describe:function(f){var R={name:"Safari"},g=b.default.getFirstMatch(T,f);return g&&(R.version=g),R}},{test:[/.*/i],describe:function(f){var R=f.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:b.default.getFirstMatch(R,f),version:b.default.getSecondMatch(R,f)}}}];d.default=v,k.exports=d.default},93:function(k,d,E){d.__esModule=!0,d.default=void 0;var _,b=(_=E(17))&&_.__esModule?_:{default:_},T=E(18),v=[{test:[/Roku\/DVP/],describe:function(f){var R=b.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,f);return{name:T.OS_MAP.Roku,version:R}}},{test:[/windows phone/i],describe:function(f){var R=b.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,f);return{name:T.OS_MAP.WindowsPhone,version:R}}},{test:[/windows /i],describe:function(f){var R=b.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,f),g=b.default.getWindowsVersionName(R);return{name:T.OS_MAP.Windows,version:R,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(f){var R={name:T.OS_MAP.iOS},g=b.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,f);return g&&(R.version=g),R}},{test:[/macintosh/i],describe:function(f){var R=b.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,f).replace(/[_\s]/g,"."),g=b.default.getMacOSVersionName(R),F={name:T.OS_MAP.MacOS,version:R};return g&&(F.versionName=g),F}},{test:[/(ipod|iphone|ipad)/i],describe:function(f){var R=b.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,f).replace(/[_\s]/g,".");return{name:T.OS_MAP.iOS,version:R}}},{test:function(f){var R=!f.test(/like android/i),g=f.test(/android/i);return R&&g},describe:function(f){var R=b.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,f),g=b.default.getAndroidVersionName(R),F={name:T.OS_MAP.Android,version:R};return g&&(F.versionName=g),F}},{test:[/(web|hpw)[o0]s/i],describe:function(f){var R=b.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,f),g={name:T.OS_MAP.WebOS};return R&&R.length&&(g.version=R),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(f){var R=b.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,f)||b.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,f)||b.default.getFirstMatch(/\bbb(\d+)/i,f);return{name:T.OS_MAP.BlackBerry,version:R}}},{test:[/bada/i],describe:function(f){var R=b.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,f);return{name:T.OS_MAP.Bada,version:R}}},{test:[/tizen/i],describe:function(f){var R=b.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,f);return{name:T.OS_MAP.Tizen,version:R}}},{test:[/linux/i],describe:function(){return{name:T.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:T.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(f){var R=b.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,f);return{name:T.OS_MAP.PlayStation4,version:R}}}];d.default=v,k.exports=d.default},94:function(k,d,E){d.__esModule=!0,d.default=void 0;var _,b=(_=E(17))&&_.__esModule?_:{default:_},T=E(18),v=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(f){var R=b.default.getFirstMatch(/(can-l01)/i,f)&&"Nova",g={type:T.PLATFORMS_MAP.mobile,vendor:"Huawei"};return R&&(g.model=R),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:T.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:T.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:T.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:T.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:T.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:T.PLATFORMS_MAP.tablet}}},{test:function(f){var R=f.test(/ipod|iphone/i),g=f.test(/like (ipod|iphone)/i);return R&&!g},describe:function(f){var R=b.default.getFirstMatch(/(ipod|iphone)/i,f);return{type:T.PLATFORMS_MAP.mobile,vendor:"Apple",model:R}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:T.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:T.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getBrowserName(!0)==="blackberry"},describe:function(){return{type:T.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(f){return f.getBrowserName(!0)==="bada"},describe:function(){return{type:T.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getBrowserName()==="windows phone"},describe:function(){return{type:T.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(f){var R=Number(String(f.getOSVersion()).split(".")[0]);return f.getOSName(!0)==="android"&&R>=3},describe:function(){return{type:T.PLATFORMS_MAP.tablet}}},{test:function(f){return f.getOSName(!0)==="android"},describe:function(){return{type:T.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getOSName(!0)==="macos"},describe:function(){return{type:T.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(f){return f.getOSName(!0)==="windows"},describe:function(){return{type:T.PLATFORMS_MAP.desktop}}},{test:function(f){return f.getOSName(!0)==="linux"},describe:function(){return{type:T.PLATFORMS_MAP.desktop}}},{test:function(f){return f.getOSName(!0)==="playstation 4"},describe:function(){return{type:T.PLATFORMS_MAP.tv}}},{test:function(f){return f.getOSName(!0)==="roku"},describe:function(){return{type:T.PLATFORMS_MAP.tv}}}];d.default=v,k.exports=d.default},95:function(k,d,E){d.__esModule=!0,d.default=void 0;var _,b=(_=E(17))&&_.__esModule?_:{default:_},T=E(18),v=[{test:function(f){return f.getBrowserName(!0)==="microsoft edge"},describe:function(f){if(/\sedg\//i.test(f))return{name:T.ENGINE_MAP.Blink};var R=b.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,f);return{name:T.ENGINE_MAP.EdgeHTML,version:R}}},{test:[/trident/i],describe:function(f){var R={name:T.ENGINE_MAP.Trident},g=b.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:function(f){return f.test(/presto/i)},describe:function(f){var R={name:T.ENGINE_MAP.Presto},g=b.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:function(f){var R=f.test(/gecko/i),g=f.test(/like gecko/i);return R&&!g},describe:function(f){var R={name:T.ENGINE_MAP.Gecko},g=b.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:T.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(f){var R={name:T.ENGINE_MAP.WebKit},g=b.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,f);return g&&(R.version=g),R}}];d.default=v,k.exports=d.default}})},6939:function(I,k,d){var E,_,b;I.exports=(b=d(9021),d(7165),b.mode.CTR=(E=b.lib.BlockCipherMode.extend(),_=E.Encryptor=E.extend({processBlock:function(T,v){var f=this._cipher,R=f.blockSize,g=this._iv,F=this._counter;g&&(F=this._counter=g.slice(0),this._iv=void 0);var m=F.slice(0);f.encryptBlock(m,0),F[R-1]=F[R-1]+1|0;for(var P=0;P<R;P++)T[v+P]^=m[P]}}),E.Decryptor=_,E),b.mode.CTR)},6993:(I,k,d)=>{var E=d(5546);function _(){var b,T,v=typeof Symbol=="function"?Symbol:{},f=v.iterator||"@@iterator",R=v.toStringTag||"@@toStringTag";function g(w,p,C,A){var M=p&&p.prototype instanceof m?p:m,j=Object.create(M.prototype);return E(j,"_invoke",function(U,z,W){var Z,ce,J,Ee=0,Ce=W||[],Re=!1,ye={p:0,n:0,v:b,a:Te,f:Te.bind(b,4),d:function(He,we){return Z=He,ce=0,J=b,ye.n=we,F}};function Te(He,we){for(ce=He,J=we,T=0;!Re&&Ee&&!Je&&T<Ce.length;T++){var Je,Be=Ce[T],nt=ye.p,Qe=Be[2];He>3?(Je=Qe===we)&&(J=Be[(ce=Be[4])?5:(ce=3,3)],Be[4]=Be[5]=b):Be[0]<=nt&&((Je=He<2&&nt<Be[1])?(ce=0,ye.v=we,ye.n=Be[1]):nt<Qe&&(Je=He<3||Be[0]>we||we>Qe)&&(Be[4]=He,Be[5]=we,ye.n=Qe,ce=0))}if(Je||He>1)return F;throw Re=!0,we}return function(He,we,Je){if(Ee>1)throw TypeError("Generator is already running");for(Re&&we===1&&Te(we,Je),ce=we,J=Je;(T=ce<2?b:J)||!Re;){Z||(ce?ce<3?(ce>1&&(ye.n=-1),Te(ce,J)):ye.n=J:ye.v=J);try{if(Ee=2,Z){if(ce||(He="next"),T=Z[He]){if(!(T=T.call(Z,J)))throw TypeError("iterator result is not an object");if(!T.done)return T;J=T.value,ce<2&&(ce=0)}else ce===1&&(T=Z.return)&&T.call(Z),ce<2&&(J=TypeError("The iterator does not provide a '"+He+"' method"),ce=1);Z=b}else if((T=(Re=ye.n<0)?J:U.call(z,ye))!==F)break}catch(Be){Z=b,ce=1,J=Be}finally{Ee=1}}return{value:T,done:Re}}}(w,C,A),!0),j}var F={};function m(){}function P(){}function S(){}T=Object.getPrototypeOf;var H=[][f]?T(T([][f]())):(E(T={},f,function(){return this}),T),x=S.prototype=m.prototype=Object.create(H);function y(w){return Object.setPrototypeOf?Object.setPrototypeOf(w,S):(w.__proto__=S,E(w,R,"GeneratorFunction")),w.prototype=Object.create(x),w}return P.prototype=S,E(x,"constructor",S),E(S,"constructor",P),P.displayName="GeneratorFunction",E(S,R,"GeneratorFunction"),E(x),E(x,R,"Generator"),E(x,f,function(){return this}),E(x,"toString",function(){return"[object Generator]"}),(I.exports=_=function(){return{w:g,m:y}},I.exports.__esModule=!0,I.exports.default=I.exports)()}I.exports=_,I.exports.__esModule=!0,I.exports.default=I.exports},7007:I=>{var k,d=typeof Reflect=="object"?Reflect:null,E=d&&typeof d.apply=="function"?d.apply:function(x,y,w){return Function.prototype.apply.call(x,y,w)};k=d&&typeof d.ownKeys=="function"?d.ownKeys:Object.getOwnPropertySymbols?function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:function(x){return Object.getOwnPropertyNames(x)};var _=Number.isNaN||function(x){return x!=x};function b(){b.init.call(this)}I.exports=b,I.exports.once=function(x,y){return new Promise(function(w,p){function C(M){x.removeListener(y,A),p(M)}function A(){typeof x.removeListener=="function"&&x.removeListener("error",C),w([].slice.call(arguments))}H(x,y,A,{once:!0}),y!=="error"&&function(M,j,U){typeof M.on=="function"&&H(M,"error",j,U)}(x,C,{once:!0})})},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var T=10;function v(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}function f(x){return x._maxListeners===void 0?b.defaultMaxListeners:x._maxListeners}function R(x,y,w,p){var C,A,M,j;if(v(w),(A=x._events)===void 0?(A=x._events=Object.create(null),x._eventsCount=0):(A.newListener!==void 0&&(x.emit("newListener",y,w.listener?w.listener:w),A=x._events),M=A[y]),M===void 0)M=A[y]=w,++x._eventsCount;else if(typeof M=="function"?M=A[y]=p?[w,M]:[M,w]:p?M.unshift(w):M.push(w),(C=f(x))>0&&M.length>C&&!M.warned){M.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=x,U.type=y,U.count=M.length,j=U,console&&console.warn&&console.warn(j)}return x}function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F(x,y,w){var p={fired:!1,wrapFn:void 0,target:x,type:y,listener:w},C=g.bind(p);return C.listener=w,p.wrapFn=C,C}function m(x,y,w){var p=x._events;if(p===void 0)return[];var C=p[y];return C===void 0?[]:typeof C=="function"?w?[C.listener||C]:[C]:w?function(A){for(var M=new Array(A.length),j=0;j<M.length;++j)M[j]=A[j].listener||A[j];return M}(C):S(C,C.length)}function P(x){var y=this._events;if(y!==void 0){var w=y[x];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0}function S(x,y){for(var w=new Array(y),p=0;p<y;++p)w[p]=x[p];return w}function H(x,y,w,p){if(typeof x.on=="function")p.once?x.once(y,w):x.on(y,w);else{if(typeof x.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x);x.addEventListener(y,function C(A){p.once&&x.removeEventListener(y,C),w(A)})}}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(x){if(typeof x!="number"||x<0||_(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");T=x}}),b.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||_(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this},b.prototype.getMaxListeners=function(){return f(this)},b.prototype.emit=function(x){for(var y=[],w=1;w<arguments.length;w++)y.push(arguments[w]);var p=x==="error",C=this._events;if(C!==void 0)p=p&&C.error===void 0;else if(!p)return!1;if(p){var A;if(y.length>0&&(A=y[0]),A instanceof Error)throw A;var M=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw M.context=A,M}var j=C[x];if(j===void 0)return!1;if(typeof j=="function")E(j,this,y);else{var U=j.length,z=S(j,U);for(w=0;w<U;++w)E(z[w],this,y)}return!0},b.prototype.addListener=function(x,y){return R(this,x,y,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(x,y){return R(this,x,y,!0)},b.prototype.once=function(x,y){return v(y),this.on(x,F(this,x,y)),this},b.prototype.prependOnceListener=function(x,y){return v(y),this.prependListener(x,F(this,x,y)),this},b.prototype.removeListener=function(x,y){var w,p,C,A,M;if(v(y),(p=this._events)===void 0)return this;if((w=p[x])===void 0)return this;if(w===y||w.listener===y)--this._eventsCount===0?this._events=Object.create(null):(delete p[x],p.removeListener&&this.emit("removeListener",x,w.listener||y));else if(typeof w!="function"){for(C=-1,A=w.length-1;A>=0;A--)if(w[A]===y||w[A].listener===y){M=w[A].listener,C=A;break}if(C<0)return this;C===0?w.shift():function(j,U){for(;U+1<j.length;U++)j[U]=j[U+1];j.pop()}(w,C),w.length===1&&(p[x]=w[0]),p.removeListener!==void 0&&this.emit("removeListener",x,M||y)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(x){var y,w,p;if((w=this._events)===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[x]),this;if(arguments.length===0){var C,A=Object.keys(w);for(p=0;p<A.length;++p)(C=A[p])!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(y=w[x])=="function")this.removeListener(x,y);else if(y!==void 0)for(p=y.length-1;p>=0;p--)this.removeListener(x,y[p]);return this},b.prototype.listeners=function(x){return m(this,x,!0)},b.prototype.rawListeners=function(x){return m(this,x,!1)},b.listenerCount=function(x,y){return typeof x.listenerCount=="function"?x.listenerCount(y):P.call(x,y)},b.prototype.listenerCount=P,b.prototype.eventNames=function(){return this._eventsCount>0?k(this._events):[]}},7080:(I,k,d)=>{d.d(k,{q:()=>_,s:()=>E});var E={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},_={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}},7165:function(I,k,d){var E;I.exports=(E=d(9021),d(9506),void(E.lib.Cipher||function(_){var b=E,T=b.lib,v=T.Base,f=T.WordArray,R=T.BufferedBlockAlgorithm,g=b.enc,F=(g.Utf8,g.Base64),m=b.algo.EvpKDF,P=T.Cipher=R.extend({cfg:v.extend(),createEncryptor:function(j,U){return this.create(this._ENC_XFORM_MODE,j,U)},createDecryptor:function(j,U){return this.create(this._DEC_XFORM_MODE,j,U)},init:function(j,U,z){this.cfg=this.cfg.extend(z),this._xformMode=j,this._key=U,this.reset()},reset:function(){R.reset.call(this),this._doReset()},process:function(j){return this._append(j),this._process()},finalize:function(j){return j&&this._append(j),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function j(U){return typeof U=="string"?M:C}return function(U){return{encrypt:function(z,W,Z){return j(W).encrypt(U,z,W,Z)},decrypt:function(z,W,Z){return j(W).decrypt(U,z,W,Z)}}}}()}),S=(T.StreamCipher=P.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),b.mode={}),H=T.BlockCipherMode=v.extend({createEncryptor:function(j,U){return this.Encryptor.create(j,U)},createDecryptor:function(j,U){return this.Decryptor.create(j,U)},init:function(j,U){this._cipher=j,this._iv=U}}),x=S.CBC=function(){var j=H.extend();function U(z,W,Z){var ce,J=this._iv;J?(ce=J,this._iv=_):ce=this._prevBlock;for(var Ee=0;Ee<Z;Ee++)z[W+Ee]^=ce[Ee]}return j.Encryptor=j.extend({processBlock:function(z,W){var Z=this._cipher,ce=Z.blockSize;U.call(this,z,W,ce),Z.encryptBlock(z,W),this._prevBlock=z.slice(W,W+ce)}}),j.Decryptor=j.extend({processBlock:function(z,W){var Z=this._cipher,ce=Z.blockSize,J=z.slice(W,W+ce);Z.decryptBlock(z,W),U.call(this,z,W,ce),this._prevBlock=J}}),j}(),y=(b.pad={}).Pkcs7={pad:function(j,U){for(var z=4*U,W=z-j.sigBytes%z,Z=W<<24|W<<16|W<<8|W,ce=[],J=0;J<W;J+=4)ce.push(Z);var Ee=f.create(ce,W);j.concat(Ee)},unpad:function(j){var U=255&j.words[j.sigBytes-1>>>2];j.sigBytes-=U}},w=(T.BlockCipher=P.extend({cfg:P.cfg.extend({mode:x,padding:y}),reset:function(){var j;P.reset.call(this);var U=this.cfg,z=U.iv,W=U.mode;this._xformMode==this._ENC_XFORM_MODE?j=W.createEncryptor:(j=W.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==j?this._mode.init(this,z&&z.words):(this._mode=j.call(W,this,z&&z.words),this._mode.__creator=j)},_doProcessBlock:function(j,U){this._mode.processBlock(j,U)},_doFinalize:function(){var j,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),j=this._process(!0)):(j=this._process(!0),U.unpad(j)),j},blockSize:4}),T.CipherParams=v.extend({init:function(j){this.mixIn(j)},toString:function(j){return(j||this.formatter).stringify(this)}})),p=(b.format={}).OpenSSL={stringify:function(j){var U=j.ciphertext,z=j.salt;return(z?f.create([1398893684,1701076831]).concat(z).concat(U):U).toString(F)},parse:function(j){var U,z=F.parse(j),W=z.words;return W[0]==1398893684&&W[1]==1701076831&&(U=f.create(W.slice(2,4)),W.splice(0,4),z.sigBytes-=16),w.create({ciphertext:z,salt:U})}},C=T.SerializableCipher=v.extend({cfg:v.extend({format:p}),encrypt:function(j,U,z,W){W=this.cfg.extend(W);var Z=j.createEncryptor(z,W),ce=Z.finalize(U),J=Z.cfg;return w.create({ciphertext:ce,key:z,iv:J.iv,algorithm:j,mode:J.mode,padding:J.padding,blockSize:j.blockSize,formatter:W.format})},decrypt:function(j,U,z,W){return W=this.cfg.extend(W),U=this._parse(U,W.format),j.createDecryptor(z,W).finalize(U.ciphertext)},_parse:function(j,U){return typeof j=="string"?U.parse(j,this):j}}),A=(b.kdf={}).OpenSSL={execute:function(j,U,z,W,Z){if(W||(W=f.random(8)),Z)ce=m.create({keySize:U+z,hasher:Z}).compute(j,W);else var ce=m.create({keySize:U+z}).compute(j,W);var J=f.create(ce.words.slice(U),4*z);return ce.sigBytes=4*U,w.create({key:ce,iv:J,salt:W})}},M=T.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:A}),encrypt:function(j,U,z,W){var Z=(W=this.cfg.extend(W)).kdf.execute(z,j.keySize,j.ivSize,W.salt,W.hasher);W.iv=Z.iv;var ce=C.encrypt.call(this,j,U,Z.key,W);return ce.mixIn(Z),ce},decrypt:function(j,U,z,W){W=this.cfg.extend(W),U=this._parse(U,W.format);var Z=W.kdf.execute(z,j.keySize,j.ivSize,U.salt,W.hasher);return W.iv=Z.iv,C.decrypt.call(this,j,U,Z.key,W)}})}()))},7193:function(I,k,d){var E;I.exports=(E=d(9021),d(754),d(4636),d(9506),d(7165),function(){var _=E,b=_.lib.StreamCipher,T=_.algo,v=T.RC4=b.extend({_doReset:function(){for(var g=this._key,F=g.words,m=g.sigBytes,P=this._S=[],S=0;S<256;S++)P[S]=S;S=0;for(var H=0;S<256;S++){var x=S%m,y=F[x>>>2]>>>24-x%4*8&255;H=(H+P[S]+y)%256;var w=P[S];P[S]=P[H],P[H]=w}this._i=this._j=0},_doProcessBlock:function(g,F){g[F]^=f.call(this)},keySize:8,ivSize:0});function f(){for(var g=this._S,F=this._i,m=this._j,P=0,S=0;S<4;S++){m=(m+g[F=(F+1)%256])%256;var H=g[F];g[F]=g[m],g[m]=H,P|=g[(g[F]+g[m])%256]<<24-8*S}return this._i=F,this._j=m,P}_.RC4=b._createHelper(v);var R=T.RC4Drop=v.extend({cfg:v.cfg.extend({drop:192}),_doReset:function(){v._doReset.call(this);for(var g=this.cfg.drop;g>0;g--)f.call(this)}});_.RC4Drop=b._createHelper(R)}(),E.RC4)},7363:(I,k,d)=>{var E=d(5020),_=d(3804),b=d(5602);k.grammar=b,k.write=_,k.parse=E.parse,k.parseParams=E.parseParams,k.parseFmtpConfig=E.parseFmtpConfig,k.parsePayloads=E.parsePayloads,k.parseRemoteCandidates=E.parseRemoteCandidates,k.parseImageAttributes=E.parseImageAttributes,k.parseSimulcastStreamList=E.parseSimulcastStreamList},7402:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Chrome55=void 0;const E=d(7363),_=d(2994),b=d(4893),T=d(1765),v=d(8046),f=d(5544),R=d(4496),g=d(521),F=d(1305),m=new _.Logger("Chrome55"),P={OS:1024,MIS:1024};class S extends g.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdTrack=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new S}constructor(){super()}get name(){return"Chrome55"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const x=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const y=await x.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{x.close()}catch{}const w=E.parse(y.sdp);return f.extractRtpCapabilities({sdpObject:w})}catch(y){try{x.close()}catch{}throw y}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:x,iceParameters:y,iceCandidates:w,dtlsParameters:p,sctpParameters:C,iceServers:A,iceTransportPolicy:M,additionalSettings:j,proprietaryConstraints:U,extendedRtpCapabilities:z}){m.debug("run()"),this._direction=x,this._remoteSdp=new F.RemoteSdp({iceParameters:y,iceCandidates:w,dtlsParameters:p,sctpParameters:C,planB:!0}),this._sendingRtpParametersByKind={audio:v.getSendingRtpParameters("audio",z),video:v.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:v.getSendingRemoteRtpParameters("audio",z),video:v.getSendingRemoteRtpParameters("video",z)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:A??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...j},U),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",W=>{this.emit("@icecandidateerror",W)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(x){m.debug("updateIceServers()");const y=this._pc.getConfiguration();y.iceServers=x,this._pc.setConfiguration(y)}async restartIce(x){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(x),this._transportReady)if(this._direction==="send"){const y=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",y),await this._pc.setLocalDescription(y);const w={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w)}else{const y={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);const w=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w)}}async getTransportStats(){return this._pc.getStats()}async send({track:x,encodings:y,codecOptions:w,codec:p}){this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",x.kind,x.id),p&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(x),this._pc.addStream(this._sendStream);let C,A=await this._pc.createOffer(),M=E.parse(A.sdp);M.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const j=T.clone(this._sendingRtpParametersByKind[x.kind]);j.codecs=v.reduceCodecs(j.codecs);const U=T.clone(this._sendingRemoteRtpParametersByKind[x.kind]);if(U.codecs=v.reduceCodecs(U.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),x.kind==="video"&&y&&y.length>1&&(m.debug("send() | enabling simulcast"),M=E.parse(A.sdp),C=M.media.find(Z=>Z.type==="video"),R.addLegacySimulcast({offerMediaObject:C,track:x,numStreams:y.length}),A={type:"offer",sdp:E.write(M)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A),M=E.parse(this._pc.localDescription.sdp),C=M.media.find(Z=>Z.type===x.kind),j.rtcp.cname=f.getCname({offerMediaObject:C}),j.encodings=R.getRtpEncodings({offerMediaObject:C,track:x}),y)for(let Z=0;Z<j.encodings.length;++Z)y[Z]&&Object.assign(j.encodings[Z],y[Z]);if(j.encodings.length>1&&j.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Z of j.encodings)Z.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:C,offerRtpParameters:j,answerRtpParameters:U,codecOptions:w});const z={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z);const W=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(W,x),{localId:W,rtpParameters:j}}async stopSending(x){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",x);const y=this._mapSendLocalIdTrack.get(x);if(!y)throw new Error("track not found");this._mapSendLocalIdTrack.delete(x),this._sendStream.removeTrack(y),this._pc.addStream(this._sendStream);const w=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",w);try{await this._pc.setLocalDescription(w)}catch(C){if(this._sendStream.getTracks().length===0)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",C.toString());throw C}if(this._pc.signalingState==="stable")return;const p={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async pauseSending(x){}async resumeSending(x){}async replaceTrack(x,y){throw new b.UnsupportedError("not implemented")}async setMaxSpatialLayer(x,y){throw new b.UnsupportedError(" not implemented")}async setRtpEncodingParameters(x,y){throw new b.UnsupportedError("not supported")}async getSenderStats(x){throw new b.UnsupportedError("not implemented")}async sendDataChannel({ordered:x,maxPacketLifeTime:y,maxRetransmits:w,label:p,protocol:C}){this.assertSendDirection();const A={negotiated:!0,id:this._nextSendSctpStreamId,ordered:x,maxPacketLifeTime:y,maxRetransmitTime:y,maxRetransmits:w,protocol:C};m.debug("sendDataChannel() [options:%o]",A);const M=this._pc.createDataChannel(p,A);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),U=E.parse(j.sdp),z=U.media.find(Z=>Z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const W={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setRemoteDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:A.id,ordered:A.ordered,maxPacketLifeTime:A.maxPacketLifeTime,maxRetransmits:A.maxRetransmits}}}async receive(x){this.assertRecvDirection();const y=[];for(const A of x){const{trackId:M,kind:j,rtpParameters:U,streamId:z}=A;m.debug("receive() [trackId:%s, kind:%s]",M,j);const W=j;this._remoteSdp.receive({mid:W,kind:j,offerRtpParameters:U,streamId:z??U.rtcp.cname,trackId:M})}const w={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);let p=await this._pc.createAnswer();const C=E.parse(p.sdp);for(const A of x){const{kind:M,rtpParameters:j}=A,U=M,z=C.media.find(W=>String(W.mid)===U);f.applyCodecParameters({offerRtpParameters:j,answerMediaObject:z})}p={type:"answer",sdp:E.write(C)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:C}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const A of x){const{kind:M,trackId:j,rtpParameters:U}=A,z=M,W=j,Z=A.streamId??U.rtcp.cname,ce=this._pc.getRemoteStreams().find(J=>J.id===Z).getTrackById(W);if(!ce)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(W,{mid:z,rtpParameters:U}),y.push({localId:W,track:ce})}return y}async stopReceiving(x){this.assertRecvDirection();for(const p of x){m.debug("stopReceiving() [localId:%s]",p);const{mid:C,rtpParameters:A}=this._mapRecvLocalIdInfo.get(p)??{};this._mapRecvLocalIdInfo.delete(p),this._remoteSdp.planBStopReceiving({mid:C,offerRtpParameters:A})}const y={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);const w=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w)}async pauseReceiving(x){}async resumeReceiving(x){}async getReceiverStats(x){throw new b.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:x,label:y,protocol:w}){this.assertRecvDirection();const{streamId:p,ordered:C,maxPacketLifeTime:A,maxRetransmits:M}=x,j={negotiated:!0,id:p,ordered:C,maxPacketLifeTime:A,maxRetransmitTime:A,maxRetransmits:M,protocol:w};m.debug("receiveDataChannel() [options:%o]",j);const U=this._pc.createDataChannel(y,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const z={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const W=await this._pc.createAnswer();if(!this._transportReady){const Z=E.parse(W.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setLocalDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:U}}async setupTransport({localDtlsRole:x,localSdpObject:y}){y||(y=E.parse(this._pc.localDescription.sdp));const w=f.extractDtlsParameters({sdpObject:y});w.role=x,this._remoteSdp.updateDtlsRole(x==="client"?"server":"client"),await new Promise((p,C)=>{this.safeEmit("@connect",{dtlsParameters:w},p,C)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.Chrome55=S},7504:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.DataProducer=void 0;const E=d(2994),_=d(3953),b=d(4893),T=new E.Logger("DataProducer");class v extends _.EnhancedEventEmitter{_id;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new _.EnhancedEventEmitter;constructor({id:R,dataChannel:g,sctpStreamParameters:F,appData:m}){super(),T.debug("constructor()"),this._id=R,this._dataChannel=g,this._sctpStreamParameters=F,this._appData=m??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(R){this._dataChannel.bufferedAmountLowThreshold=R}get appData(){return this._appData}set appData(R){this._appData=R}get observer(){return this._observer}close(){this._closed||(T.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(T.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(R){if(T.debug("send()"),this._closed)throw new b.InvalidStateError("closed");this._dataChannel.send(R)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(T.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",R=>{if(this._closed)return;let{error:g}=R;g||(g=new Error("unknown DataChannel error")),g.errorDetail==="sctp-failure"?T.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",g.sctpCauseCode,g.message):T.error('DataChannel "error" event: %o',g),this.safeEmit("error",g)}),this._dataChannel.addEventListener("close",()=>{this._closed||(T.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||T.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}k.DataProducer=v},7628:function(I,k,d){var E;I.exports=(E=d(9021),d(754),d(4636),d(9506),d(7165),function(){var _=E,b=_.lib,T=b.WordArray,v=b.BlockCipher,f=_.algo,R=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],F=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],m=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],P=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],S=f.DES=v.extend({_doReset:function(){for(var w=this._key.words,p=[],C=0;C<56;C++){var A=R[C]-1;p[C]=w[A>>>5]>>>31-A%32&1}for(var M=this._subKeys=[],j=0;j<16;j++){var U=M[j]=[],z=F[j];for(C=0;C<24;C++)U[C/6|0]|=p[(g[C]-1+z)%28]<<31-C%6,U[4+(C/6|0)]|=p[28+(g[C+24]-1+z)%28]<<31-C%6;for(U[0]=U[0]<<1|U[0]>>>31,C=1;C<7;C++)U[C]=U[C]>>>4*(C-1)+3;U[7]=U[7]<<5|U[7]>>>27}var W=this._invSubKeys=[];for(C=0;C<16;C++)W[C]=M[15-C]},encryptBlock:function(w,p){this._doCryptBlock(w,p,this._subKeys)},decryptBlock:function(w,p){this._doCryptBlock(w,p,this._invSubKeys)},_doCryptBlock:function(w,p,C){this._lBlock=w[p],this._rBlock=w[p+1],H.call(this,4,252645135),H.call(this,16,65535),x.call(this,2,858993459),x.call(this,8,16711935),H.call(this,1,1431655765);for(var A=0;A<16;A++){for(var M=C[A],j=this._lBlock,U=this._rBlock,z=0,W=0;W<8;W++)z|=m[W][((U^M[W])&P[W])>>>0];this._lBlock=U,this._rBlock=j^z}var Z=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Z,H.call(this,1,1431655765),x.call(this,8,16711935),x.call(this,2,858993459),H.call(this,16,65535),H.call(this,4,252645135),w[p]=this._lBlock,w[p+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function H(w,p){var C=(this._lBlock>>>w^this._rBlock)&p;this._rBlock^=C,this._lBlock^=C<<w}function x(w,p){var C=(this._rBlock>>>w^this._lBlock)&p;this._lBlock^=C,this._rBlock^=C<<w}_.DES=v._createHelper(S);var y=f.TripleDES=v.extend({_doReset:function(){var w=this._key.words;if(w.length!==2&&w.length!==4&&w.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var p=w.slice(0,2),C=w.length<4?w.slice(0,2):w.slice(2,4),A=w.length<6?w.slice(0,2):w.slice(4,6);this._des1=S.createEncryptor(T.create(p)),this._des2=S.createEncryptor(T.create(C)),this._des3=S.createEncryptor(T.create(A))},encryptBlock:function(w,p){this._des1.encryptBlock(w,p),this._des2.decryptBlock(w,p),this._des3.encryptBlock(w,p)},decryptBlock:function(w,p){this._des3.decryptBlock(w,p),this._des2.encryptBlock(w,p),this._des1.decryptBlock(w,p)},keySize:6,ivSize:2,blockSize:2});_.TripleDES=v._createHelper(y)}(),E.TripleDES)},7654:(I,k,d)=>{var E="__lodash_hash_undefined__",_="[object Function]",b="[object GeneratorFunction]",T=/^\[object .+?Constructor\]$/,v=typeof d.g=="object"&&d.g&&d.g.Object===Object&&d.g,f=typeof self=="object"&&self&&self.Object===Object&&self,R=v||f||Function("return this")(),g,F=Array.prototype,m=Function.prototype,P=Object.prototype,S=R["__core-js_shared__"],H=(g=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",x=m.toString,y=P.hasOwnProperty,w=P.toString,p=RegExp("^"+x.call(y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=F.splice,A=J(R,"Map"),M=J(Object,"create");function j(ye){var Te=-1,He=ye?ye.length:0;for(this.clear();++Te<He;){var we=ye[Te];this.set(we[0],we[1])}}function U(ye){var Te=-1,He=ye?ye.length:0;for(this.clear();++Te<He;){var we=ye[Te];this.set(we[0],we[1])}}function z(ye){var Te=-1,He=ye?ye.length:0;for(this.clear();++Te<He;){var we=ye[Te];this.set(we[0],we[1])}}function W(ye,Te){for(var He=ye.length;He--;)if(Ce(ye[He][0],Te))return He;return-1}function Z(ye){if(!Re(ye)||(Te=ye,H&&H in Te))return!1;var Te,He=function(we){var Je=Re(we)?w.call(we):"";return Je==_||Je==b}(ye)||function(we){var Je=!1;if(we!=null&&typeof we.toString!="function")try{Je=!!(we+"")}catch{}return Je}(ye)?p:T;return He.test(function(we){if(we!=null){try{return x.call(we)}catch{}try{return we+""}catch{}}return""}(ye))}function ce(ye,Te){var He,we,Je=ye.__data__;return((we=typeof(He=Te))=="string"||we=="number"||we=="symbol"||we=="boolean"?He!=="__proto__":He===null)?Je[typeof Te=="string"?"string":"hash"]:Je.map}function J(ye,Te){var He=function(we,Je){return we?.[Je]}(ye,Te);return Z(He)?He:void 0}function Ee(ye,Te){if(typeof ye!="function"||Te&&typeof Te!="function")throw new TypeError("Expected a function");var He=function(){var we=arguments,Je=Te?Te.apply(this,we):we[0],Be=He.cache;if(Be.has(Je))return Be.get(Je);var nt=ye.apply(this,we);return He.cache=Be.set(Je,nt),nt};return He.cache=new(Ee.Cache||z),He}function Ce(ye,Te){return ye===Te||ye!=ye&&Te!=Te}function Re(ye){var Te=typeof ye;return!!ye&&(Te=="object"||Te=="function")}j.prototype.clear=function(){this.__data__=M?M(null):{}},j.prototype.delete=function(ye){return this.has(ye)&&delete this.__data__[ye]},j.prototype.get=function(ye){var Te=this.__data__;if(M){var He=Te[ye];return He===E?void 0:He}return y.call(Te,ye)?Te[ye]:void 0},j.prototype.has=function(ye){var Te=this.__data__;return M?Te[ye]!==void 0:y.call(Te,ye)},j.prototype.set=function(ye,Te){return this.__data__[ye]=M&&Te===void 0?E:Te,this},U.prototype.clear=function(){this.__data__=[]},U.prototype.delete=function(ye){var Te=this.__data__,He=W(Te,ye);return!(He<0)&&(He==Te.length-1?Te.pop():C.call(Te,He,1),!0)},U.prototype.get=function(ye){var Te=this.__data__,He=W(Te,ye);return He<0?void 0:Te[He][1]},U.prototype.has=function(ye){return W(this.__data__,ye)>-1},U.prototype.set=function(ye,Te){var He=this.__data__,we=W(He,ye);return we<0?He.push([ye,Te]):He[we][1]=Te,this},z.prototype.clear=function(){this.__data__={hash:new j,map:new(A||U),string:new j}},z.prototype.delete=function(ye){return ce(this,ye).delete(ye)},z.prototype.get=function(ye){return ce(this,ye).get(ye)},z.prototype.has=function(ye){return ce(this,ye).has(ye)},z.prototype.set=function(ye,Te){return ce(this,ye).set(ye,Te),this},Ee.Cache=z,I.exports=Ee},7800:(I,k,d)=>{d.d(k,{A:()=>_});var E=d(3145);function _(b,T){if(b){if(typeof b=="string")return(0,E.A)(b,T);var v={}.toString.call(b).slice(8,-1);return v==="Object"&&b.constructor&&(v=b.constructor.name),v==="Map"||v==="Set"?Array.from(b):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?(0,E.A)(b,T):void 0}}},7833:(I,k,d)=>{k.formatArgs=function(_){if(_[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+_[0]+(this.useColors?"%c ":" ")+"+"+I.exports.humanize(this.diff),!this.useColors)return;const b="color: "+this.color;_.splice(1,0,b,"color: inherit");let T=0,v=0;_[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(T++,f==="%c"&&(v=T))}),_.splice(v,0,b)},k.save=function(_){try{_?k.storage.setItem("debug",_):k.storage.removeItem("debug")}catch{}},k.load=function(){let _;try{_=k.storage.getItem("debug")||k.storage.getItem("DEBUG")}catch{}return!_&&typeof process<"u"&&"env"in process&&(_=i.DEBUG),_},k.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let _;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(_=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(_[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},k.storage=function(){try{return localStorage}catch{}}(),k.destroy=(()=>{let _=!1;return()=>{_||(_=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),k.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],k.log=console.debug||console.log||(()=>{}),I.exports=d(736)(k);const{formatters:E}=I.exports;E.j=function(_){try{return JSON.stringify(_)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}}},8046:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.validateRtpCapabilities=function(p){if(typeof p!="object")throw new TypeError("caps is not an object");if(p.codecs&&!Array.isArray(p.codecs))throw new TypeError("caps.codecs is not an array");p.codecs||(p.codecs=[]);for(const C of p.codecs)R(C);if(p.headerExtensions&&!Array.isArray(p.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");p.headerExtensions||(p.headerExtensions=[]);for(const C of p.headerExtensions)F(C)},k.validateRtpParameters=f,k.validateSctpStreamParameters=function(p){if(typeof p!="object")throw new TypeError("params is not an object");if(typeof p.streamId!="number")throw new TypeError("missing params.streamId");let C=!1;if(typeof p.ordered=="boolean"?C=!0:p.ordered=!0,p.maxPacketLifeTime&&typeof p.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(p.maxRetransmits&&typeof p.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(p.maxPacketLifeTime&&p.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(C&&p.ordered&&(p.maxPacketLifeTime||p.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(C||!p.maxPacketLifeTime&&!p.maxRetransmits||(p.ordered=!1),p.label&&typeof p.label!="string")throw new TypeError("invalid params.label");if(p.protocol&&typeof p.protocol!="string")throw new TypeError("invalid params.protocol")},k.validateSctpCapabilities=function(p){if(typeof p!="object")throw new TypeError("caps is not an object");if(!p.numStreams||typeof p.numStreams!="object")throw new TypeError("missing caps.numStreams");(function(C){if(typeof C!="object")throw new TypeError("numStreams is not an object");if(typeof C.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof C.MIS!="number")throw new TypeError("missing numStreams.MIS")})(p.numStreams)},k.getExtendedRtpCapabilities=function(p,C){const A={codecs:[],headerExtensions:[]};for(const M of C.codecs??[]){if(H(M))continue;const j=(p.codecs??[]).find(z=>x(z,M,{strict:!0,modify:!0}));if(!j)continue;const U={mimeType:j.mimeType,kind:j.kind,clockRate:j.clockRate,channels:j.channels,localPayloadType:j.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:M.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:j.parameters,remoteParameters:M.parameters,rtcpFeedback:w(j,M)};A.codecs.push(U)}for(const M of A.codecs){const j=p.codecs.find(z=>H(z)&&z.parameters.apt===M.localPayloadType),U=C.codecs.find(z=>H(z)&&z.parameters.apt===M.remotePayloadType);j&&U&&(M.localRtxPayloadType=j.preferredPayloadType,M.remoteRtxPayloadType=U.preferredPayloadType)}for(const M of C.headerExtensions){const j=p.headerExtensions.find(z=>y(z,M));if(!j)continue;const U={kind:M.kind,uri:M.uri,sendId:j.preferredId,recvId:M.preferredId,encrypt:j.preferredEncrypt,direction:"sendrecv"};switch(M.direction){case"sendrecv":U.direction="sendrecv";break;case"recvonly":U.direction="sendonly";break;case"sendonly":U.direction="recvonly";break;case"inactive":U.direction="inactive"}A.headerExtensions.push(U)}return A},k.getRecvRtpCapabilities=function(p){const C={codecs:[],headerExtensions:[]};for(const A of p.codecs){const M={mimeType:A.mimeType,kind:A.kind,preferredPayloadType:A.remotePayloadType,clockRate:A.clockRate,channels:A.channels,parameters:A.localParameters,rtcpFeedback:A.rtcpFeedback};if(C.codecs.push(M),!A.remoteRtxPayloadType)continue;const j={mimeType:`${A.kind}/rtx`,kind:A.kind,preferredPayloadType:A.remoteRtxPayloadType,clockRate:A.clockRate,parameters:{apt:A.remotePayloadType},rtcpFeedback:[]};C.codecs.push(j)}for(const A of p.headerExtensions){if(A.direction!=="sendrecv"&&A.direction!=="recvonly")continue;const M={kind:A.kind,uri:A.uri,preferredId:A.recvId,preferredEncrypt:A.encrypt,direction:A.direction};C.headerExtensions.push(M)}return C},k.getSendingRtpParameters=function(p,C){const A={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const M of C.codecs){if(M.kind!==p)continue;const j={mimeType:M.mimeType,payloadType:M.localPayloadType,clockRate:M.clockRate,channels:M.channels,parameters:M.localParameters,rtcpFeedback:M.rtcpFeedback};if(A.codecs.push(j),M.localRtxPayloadType){const U={mimeType:`${M.kind}/rtx`,payloadType:M.localRtxPayloadType,clockRate:M.clockRate,parameters:{apt:M.localPayloadType},rtcpFeedback:[]};A.codecs.push(U)}}for(const M of C.headerExtensions){if(M.kind&&M.kind!==p||M.direction!=="sendrecv"&&M.direction!=="sendonly")continue;const j={uri:M.uri,id:M.sendId,encrypt:M.encrypt,parameters:{}};A.headerExtensions.push(j)}return A},k.getSendingRemoteRtpParameters=function(p,C){const A={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const M of C.codecs){if(M.kind!==p)continue;const j={mimeType:M.mimeType,payloadType:M.localPayloadType,clockRate:M.clockRate,channels:M.channels,parameters:M.remoteParameters,rtcpFeedback:M.rtcpFeedback};if(A.codecs.push(j),M.localRtxPayloadType){const U={mimeType:`${M.kind}/rtx`,payloadType:M.localRtxPayloadType,clockRate:M.clockRate,parameters:{apt:M.localPayloadType},rtcpFeedback:[]};A.codecs.push(U)}}for(const M of C.headerExtensions){if(M.kind&&M.kind!==p||M.direction!=="sendrecv"&&M.direction!=="sendonly")continue;const j={uri:M.uri,id:M.sendId,encrypt:M.encrypt,parameters:{}};A.headerExtensions.push(j)}if(A.headerExtensions.some(M=>M.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const M of A.codecs)M.rtcpFeedback=(M.rtcpFeedback??[]).filter(j=>j.type!=="goog-remb");else if(A.headerExtensions.some(M=>M.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const M of A.codecs)M.rtcpFeedback=(M.rtcpFeedback??[]).filter(j=>j.type!=="transport-cc");else for(const M of A.codecs)M.rtcpFeedback=(M.rtcpFeedback??[]).filter(j=>j.type!=="transport-cc"&&j.type!=="goog-remb");return A},k.reduceCodecs=function(p,C){const A=[];if(C){for(let M=0;M<p.length;++M)if(x(p[M],C,{strict:!0})){A.push(p[M]),H(p[M+1])&&A.push(p[M+1]);break}if(A.length===0)throw new TypeError("no matching codec found")}else A.push(p[0]),H(p[1])&&A.push(p[1]);return A},k.generateProbatorRtpParameters=function(p){f(p=_.clone(p));const C={mid:b,codecs:[],headerExtensions:[],encodings:[{ssrc:T}],rtcp:{cname:"probator"}};return C.codecs.push(p.codecs[0]),C.codecs[0].payloadType=v,C.headerExtensions=p.headerExtensions,C},k.canSend=function(p,C){return C.codecs.some(A=>A.kind===p)},k.canReceive=function(p,C){if(f(p),p.codecs.length===0)return!1;const A=p.codecs[0];return C.codecs.some(M=>M.remotePayloadType===A.payloadType)};const E=d(3200),_=d(1765),b="probator",T=1234,v=127;function f(p){if(typeof p!="object")throw new TypeError("params is not an object");if(p.mid&&typeof p.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(p.codecs))throw new TypeError("missing params.codecs");for(const C of p.codecs)m(C);if(p.headerExtensions&&!Array.isArray(p.headerExtensions))throw new TypeError("params.headerExtensions is not an array");p.headerExtensions||(p.headerExtensions=[]);for(const C of p.headerExtensions)P(C);if(p.encodings&&!Array.isArray(p.encodings))throw new TypeError("params.encodings is not an array");p.encodings||(p.encodings=[]);for(const C of p.encodings)S(C);if(p.rtcp&&typeof p.rtcp!="object")throw new TypeError("params.rtcp is not an object");p.rtcp||(p.rtcp={}),function(C){if(typeof C!="object")throw new TypeError("rtcp is not an object");if(C.cname&&typeof C.cname!="string")throw new TypeError("invalid rtcp.cname");C.reducedSize&&typeof C.reducedSize=="boolean"||(C.reducedSize=!0)}(p.rtcp)}function R(p){const C=new RegExp("^(audio|video)/(.+)","i");if(typeof p!="object")throw new TypeError("codec is not an object");if(!p.mimeType||typeof p.mimeType!="string")throw new TypeError("missing codec.mimeType");const A=C.exec(p.mimeType);if(!A)throw new TypeError("invalid codec.mimeType");if(p.kind=A[1].toLowerCase(),p.preferredPayloadType&&typeof p.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof p.clockRate!="number")throw new TypeError("missing codec.clockRate");p.kind==="audio"?typeof p.channels!="number"&&(p.channels=1):delete p.channels,p.parameters&&typeof p.parameters=="object"||(p.parameters={});for(const M of Object.keys(p.parameters)){let j=p.parameters[M];if(j===void 0&&(p.parameters[M]="",j=""),typeof j!="string"&&typeof j!="number")throw new TypeError(`invalid codec parameter [key:${M}s, value:${j}]`);if(M==="apt"&&typeof j!="number")throw new TypeError("invalid codec apt parameter")}p.rtcpFeedback&&Array.isArray(p.rtcpFeedback)||(p.rtcpFeedback=[]);for(const M of p.rtcpFeedback)g(M)}function g(p){if(typeof p!="object")throw new TypeError("fb is not an object");if(!p.type||typeof p.type!="string")throw new TypeError("missing fb.type");p.parameter&&typeof p.parameter=="string"||(p.parameter="")}function F(p){if(typeof p!="object")throw new TypeError("ext is not an object");if(p.kind!=="audio"&&p.kind!=="video")throw new TypeError("invalid ext.kind");if(!p.uri||typeof p.uri!="string")throw new TypeError("missing ext.uri");if(typeof p.preferredId!="number")throw new TypeError("missing ext.preferredId");if(p.preferredEncrypt&&typeof p.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(p.preferredEncrypt||(p.preferredEncrypt=!1),p.direction&&typeof p.direction!="string")throw new TypeError("invalid ext.direction");p.direction||(p.direction="sendrecv")}function m(p){const C=new RegExp("^(audio|video)/(.+)","i");if(typeof p!="object")throw new TypeError("codec is not an object");if(!p.mimeType||typeof p.mimeType!="string")throw new TypeError("missing codec.mimeType");const A=C.exec(p.mimeType);if(!A)throw new TypeError("invalid codec.mimeType");if(typeof p.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof p.clockRate!="number")throw new TypeError("missing codec.clockRate");A[1].toLowerCase()==="audio"?typeof p.channels!="number"&&(p.channels=1):delete p.channels,p.parameters&&typeof p.parameters=="object"||(p.parameters={});for(const M of Object.keys(p.parameters)){let j=p.parameters[M];if(j===void 0&&(p.parameters[M]="",j=""),typeof j!="string"&&typeof j!="number")throw new TypeError(`invalid codec parameter [key:${M}s, value:${j}]`);if(M==="apt"&&typeof j!="number")throw new TypeError("invalid codec apt parameter")}p.rtcpFeedback&&Array.isArray(p.rtcpFeedback)||(p.rtcpFeedback=[]);for(const M of p.rtcpFeedback)g(M)}function P(p){if(typeof p!="object")throw new TypeError("ext is not an object");if(!p.uri||typeof p.uri!="string")throw new TypeError("missing ext.uri");if(typeof p.id!="number")throw new TypeError("missing ext.id");if(p.encrypt&&typeof p.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");p.encrypt||(p.encrypt=!1),p.parameters&&typeof p.parameters=="object"||(p.parameters={});for(const C of Object.keys(p.parameters)){let A=p.parameters[C];if(A===void 0&&(p.parameters[C]="",A=""),typeof A!="string"&&typeof A!="number")throw new TypeError("invalid header extension parameter")}}function S(p){if(typeof p!="object")throw new TypeError("encoding is not an object");if(p.ssrc&&typeof p.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(p.rid&&typeof p.rid!="string")throw new TypeError("invalid encoding.rid");if(p.rtx&&typeof p.rtx!="object")throw new TypeError("invalid encoding.rtx");if(p.rtx&&typeof p.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(p.dtx&&typeof p.dtx=="boolean"||(p.dtx=!1),p.scalabilityMode&&typeof p.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function H(p){return!!p&&/.+\/rtx$/i.test(p.mimeType)}function x(p,C,{strict:A=!1,modify:M=!1}={}){const j=p.mimeType.toLowerCase();if(j!==C.mimeType.toLowerCase()||p.clockRate!==C.clockRate||p.channels!==C.channels)return!1;switch(j){case"video/h264":if(A){if((p.parameters["packetization-mode"]??0)!==(C.parameters["packetization-mode"]??0)||!E.isSameProfile(p.parameters,C.parameters))return!1;let U;try{U=E.generateProfileLevelIdStringForAnswer(p.parameters,C.parameters)}catch{return!1}M&&(U?(p.parameters["profile-level-id"]=U,C.parameters["profile-level-id"]=U):(delete p.parameters["profile-level-id"],delete C.parameters["profile-level-id"]))}break;case"video/vp9":if(A&&(p.parameters["profile-id"]??0)!==(C.parameters["profile-id"]??0))return!1}return!0}function y(p,C){return(!p.kind||!C.kind||p.kind===C.kind)&&p.uri===C.uri}function w(p,C){const A=[];for(const M of p.rtcpFeedback??[]){const j=(C.rtcpFeedback??[]).find(U=>U.type===M.type&&(U.parameter===M.parameter||!U.parameter&&!M.parameter));j&&A.push(j)}return A}},8056:function(I,k,d){var E;I.exports=(E=d(9021),function(){var _=E,b=_.lib,T=b.WordArray,v=b.Hasher,f=_.algo,R=T.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),g=T.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),F=T.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=T.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),P=T.create([0,1518500249,1859775393,2400959708,2840853838]),S=T.create([1352829926,1548603684,1836072691,2053994217,0]),H=f.RIPEMD160=v.extend({_doReset:function(){this._hash=T.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,j){for(var U=0;U<16;U++){var z=j+U,W=M[z];M[z]=16711935&(W<<8|W>>>24)|4278255360&(W<<24|W>>>8)}var Z,ce,J,Ee,Ce,Re,ye,Te,He,we,Je,Be=this._hash.words,nt=P.words,Qe=S.words,Ze=R.words,Ht=g.words,or=F.words,Nr=m.words;for(Re=Z=Be[0],ye=ce=Be[1],Te=J=Be[2],He=Ee=Be[3],we=Ce=Be[4],U=0;U<80;U+=1)Je=Z+M[j+Ze[U]]|0,Je+=U<16?x(ce,J,Ee)+nt[0]:U<32?y(ce,J,Ee)+nt[1]:U<48?w(ce,J,Ee)+nt[2]:U<64?p(ce,J,Ee)+nt[3]:C(ce,J,Ee)+nt[4],Je=(Je=A(Je|=0,or[U]))+Ce|0,Z=Ce,Ce=Ee,Ee=A(J,10),J=ce,ce=Je,Je=Re+M[j+Ht[U]]|0,Je+=U<16?C(ye,Te,He)+Qe[0]:U<32?p(ye,Te,He)+Qe[1]:U<48?w(ye,Te,He)+Qe[2]:U<64?y(ye,Te,He)+Qe[3]:x(ye,Te,He)+Qe[4],Je=(Je=A(Je|=0,Nr[U]))+we|0,Re=we,we=He,He=A(Te,10),Te=ye,ye=Je;Je=Be[1]+J+He|0,Be[1]=Be[2]+Ee+we|0,Be[2]=Be[3]+Ce+Re|0,Be[3]=Be[4]+Z+ye|0,Be[4]=Be[0]+ce+Te|0,Be[0]=Je},_doFinalize:function(){var M=this._data,j=M.words,U=8*this._nDataBytes,z=8*M.sigBytes;j[z>>>5]|=128<<24-z%32,j[14+(z+64>>>9<<4)]=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),M.sigBytes=4*(j.length+1),this._process();for(var W=this._hash,Z=W.words,ce=0;ce<5;ce++){var J=Z[ce];Z[ce]=16711935&(J<<8|J>>>24)|4278255360&(J<<24|J>>>8)}return W},clone:function(){var M=v.clone.call(this);return M._hash=this._hash.clone(),M}});function x(M,j,U){return M^j^U}function y(M,j,U){return M&j|~M&U}function w(M,j,U){return(M|~j)^U}function p(M,j,U){return M&U|j&~U}function C(M,j,U){return M^(j|~U)}function A(M,j){return M<<j|M>>>32-j}_.RIPEMD160=v._createHelper(H),_.HmacRIPEMD160=v._createHmacHelper(H)}(),E.RIPEMD160)},8057:function(I,k,d){var E=this&&this.__createBinding||(Object.create?function(b,T,v,f){f===void 0&&(f=v);var R=Object.getOwnPropertyDescriptor(T,v);R&&!("get"in R?!T.__esModule:R.writable||R.configurable)||(R={enumerable:!0,get:function(){return T[v]}}),Object.defineProperty(b,f,R)}:function(b,T,v,f){f===void 0&&(f=v),b[f]=T[v]}),_=this&&this.__exportStar||function(b,T){for(var v in b)v==="default"||Object.prototype.hasOwnProperty.call(T,v)||E(T,b,v)};Object.defineProperty(k,"__esModule",{value:!0}),_(d(6004),k),_(d(5601),k),_(d(9792),k),_(d(3518),k),_(d(7504),k),_(d(9166),k),_(d(5370),k),_(d(4160),k),_(d(521),k),_(d(4893),k)},8124:function(I,k,d){var E;I.exports=(E=d(9021),d(7165),E.pad.NoPadding={pad:function(){},unpad:function(){}},E.pad.NoPadding)},8155:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Chrome67=void 0;const E=d(7363),_=d(2994),b=d(1765),T=d(8046),v=d(5544),f=d(4496),R=d(521),g=d(1305),F=new _.Logger("Chrome67"),m={OS:1024,MIS:1024};class P extends R.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdRtpSender=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new P}constructor(){super()}get name(){return"Chrome67"}close(){if(F.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){F.debug("getNativeRtpCapabilities()");const H=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const x=await H.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{H.close()}catch{}const y=E.parse(x.sdp);return v.extractRtpCapabilities({sdpObject:y})}catch(x){try{H.close()}catch{}throw x}}async getNativeSctpCapabilities(){return F.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:H,iceParameters:x,iceCandidates:y,dtlsParameters:w,sctpParameters:p,iceServers:C,iceTransportPolicy:A,additionalSettings:M,proprietaryConstraints:j,extendedRtpCapabilities:U}){F.debug("run()"),this._direction=H,this._remoteSdp=new g.RemoteSdp({iceParameters:x,iceCandidates:y,dtlsParameters:w,sctpParameters:p,planB:!0}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",U),video:T.getSendingRtpParameters("video",U)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",U),video:T.getSendingRemoteRtpParameters("video",U)},w.role&&w.role!=="auto"&&(this._forcedLocalDtlsRole=w.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:C??[],iceTransportPolicy:A??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...M},j),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",z=>{this.emit("@icecandidateerror",z)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(F.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(H){F.debug("updateIceServers()");const x=this._pc.getConfiguration();x.iceServers=H,this._pc.setConfiguration(x)}async restartIce(H){if(F.debug("restartIce()"),this._remoteSdp.updateIceParameters(H),this._transportReady)if(this._direction==="send"){const x=await this._pc.createOffer({iceRestart:!0});F.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const y={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y)}else{const x={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const y=await this._pc.createAnswer();F.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",y),await this._pc.setLocalDescription(y)}}async getTransportStats(){return this._pc.getStats()}async send({track:H,encodings:x,codecOptions:y,codec:w}){this.assertSendDirection(),F.debug("send() [kind:%s, track.id:%s]",H.kind,H.id),w&&F.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(H),this._pc.addTrack(H,this._sendStream);let p,C=await this._pc.createOffer(),A=E.parse(C.sdp);A.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const M=b.clone(this._sendingRtpParametersByKind[H.kind]);M.codecs=T.reduceCodecs(M.codecs);const j=b.clone(this._sendingRemoteRtpParametersByKind[H.kind]);if(j.codecs=T.reduceCodecs(j.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),H.kind==="video"&&x&&x.length>1&&(F.debug("send() | enabling simulcast"),A=E.parse(C.sdp),p=A.media.find(Z=>Z.type==="video"),f.addLegacySimulcast({offerMediaObject:p,track:H,numStreams:x.length}),C={type:"offer",sdp:E.write(A)}),F.debug("send() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C),A=E.parse(this._pc.localDescription.sdp),p=A.media.find(Z=>Z.type===H.kind),M.rtcp.cname=v.getCname({offerMediaObject:p}),M.encodings=f.getRtpEncodings({offerMediaObject:p,track:H}),x)for(let Z=0;Z<M.encodings.length;++Z)x[Z]&&Object.assign(M.encodings[Z],x[Z]);if(M.encodings.length>1&&M.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Z of M.encodings)Z.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:M,answerRtpParameters:j,codecOptions:y});const U={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("send() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setRemoteDescription(U);const z=String(this._nextSendLocalId);this._nextSendLocalId++;const W=this._pc.getSenders().find(Z=>Z.track===H);return this._mapSendLocalIdRtpSender.set(z,W),{localId:z,rtpParameters:M,rtpSender:W}}async stopSending(H){this.assertSendDirection(),F.debug("stopSending() [localId:%s]",H);const x=this._mapSendLocalIdRtpSender.get(H);if(!x)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(x),x.track&&this._sendStream.removeTrack(x.track),this._mapSendLocalIdRtpSender.delete(H);const y=await this._pc.createOffer();F.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",y);try{await this._pc.setLocalDescription(y)}catch(p){if(this._sendStream.getTracks().length===0)return void F.warn("stopSending() | ignoring expected error due no sending tracks: %s",p.toString());throw p}if(this._pc.signalingState==="stable")return;const w={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w)}async pauseSending(H){}async resumeSending(H){}async replaceTrack(H,x){this.assertSendDirection(),x?F.debug("replaceTrack() [localId:%s, track.id:%s]",H,x.id):F.debug("replaceTrack() [localId:%s, no track]",H);const y=this._mapSendLocalIdRtpSender.get(H);if(!y)throw new Error("associated RTCRtpSender not found");const w=y.track;await y.replaceTrack(x),w&&this._sendStream.removeTrack(w),x&&this._sendStream.addTrack(x)}async setMaxSpatialLayer(H,x){this.assertSendDirection(),F.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",H,x);const y=this._mapSendLocalIdRtpSender.get(H);if(!y)throw new Error("associated RTCRtpSender not found");const w=y.getParameters();w.encodings.forEach((p,C)=>{p.active=C<=x}),await y.setParameters(w)}async setRtpEncodingParameters(H,x){this.assertSendDirection(),F.debug("setRtpEncodingParameters() [localId:%s, params:%o]",H,x);const y=this._mapSendLocalIdRtpSender.get(H);if(!y)throw new Error("associated RTCRtpSender not found");const w=y.getParameters();w.encodings.forEach((p,C)=>{w.encodings[C]={...p,...x}}),await y.setParameters(w)}async getSenderStats(H){this.assertSendDirection();const x=this._mapSendLocalIdRtpSender.get(H);if(!x)throw new Error("associated RTCRtpSender not found");return x.getStats()}async sendDataChannel({ordered:H,maxPacketLifeTime:x,maxRetransmits:y,label:w,protocol:p}){this.assertSendDirection();const C={negotiated:!0,id:this._nextSendSctpStreamId,ordered:H,maxPacketLifeTime:x,maxRetransmitTime:x,maxRetransmits:y,protocol:p};F.debug("sendDataChannel() [options:%o]",C);const A=this._pc.createDataChannel(w,C);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),j=E.parse(M.sdp),U=j.media.find(W=>W.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),F.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const z={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:A,sctpStreamParameters:{streamId:C.id,ordered:C.ordered,maxPacketLifeTime:C.maxPacketLifeTime,maxRetransmits:C.maxRetransmits}}}async receive(H){this.assertRecvDirection();const x=[];for(const C of H){const{trackId:A,kind:M,rtpParameters:j,streamId:U}=C;F.debug("receive() [trackId:%s, kind:%s]",A,M);const z=M;this._remoteSdp.receive({mid:z,kind:M,offerRtpParameters:j,streamId:U??j.rtcp.cname,trackId:A})}const y={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);let w=await this._pc.createAnswer();const p=E.parse(w.sdp);for(const C of H){const{kind:A,rtpParameters:M}=C,j=A,U=p.media.find(z=>String(z.mid)===j);v.applyCodecParameters({offerRtpParameters:M,answerMediaObject:U})}w={type:"answer",sdp:E.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),F.debug("receive() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w);for(const C of H){const{kind:A,trackId:M,rtpParameters:j}=C,U=M,z=A,W=this._pc.getReceivers().find(Z=>Z.track&&Z.track.id===U);if(!W)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(U,{mid:z,rtpParameters:j,rtpReceiver:W}),x.push({localId:U,track:W.track,rtpReceiver:W})}return x}async stopReceiving(H){this.assertRecvDirection();for(const w of H){F.debug("stopReceiving() [localId:%s]",w);const{mid:p,rtpParameters:C}=this._mapRecvLocalIdInfo.get(w)??{};this._mapRecvLocalIdInfo.delete(w),this._remoteSdp.planBStopReceiving({mid:p,offerRtpParameters:C})}const x={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const y=await this._pc.createAnswer();F.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",y),await this._pc.setLocalDescription(y)}async pauseReceiving(H){}async resumeReceiving(H){}async getReceiverStats(H){this.assertRecvDirection();const{rtpReceiver:x}=this._mapRecvLocalIdInfo.get(H)??{};if(!x)throw new Error("associated RTCRtpReceiver not found");return x.getStats()}async receiveDataChannel({sctpStreamParameters:H,label:x,protocol:y}){this.assertRecvDirection();const{streamId:w,ordered:p,maxPacketLifeTime:C,maxRetransmits:A}=H,M={negotiated:!0,id:w,ordered:p,maxPacketLifeTime:C,maxRetransmitTime:C,maxRetransmits:A,protocol:y};F.debug("receiveDataChannel() [options:%o]",M);const j=this._pc.createDataChannel(x,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const U={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",U),await this._pc.setRemoteDescription(U);const z=await this._pc.createAnswer();if(!this._transportReady){const W=E.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W})}F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:j}}async setupTransport({localDtlsRole:H,localSdpObject:x}){x||(x=E.parse(this._pc.localDescription.sdp));const y=v.extractDtlsParameters({sdpObject:x});y.role=H,this._remoteSdp.updateDtlsRole(H==="client"?"server":"client"),await new Promise((w,p)=>{this.safeEmit("@connect",{dtlsParameters:y},w,p)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.Chrome67=P},8274:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Logger=void 0;const E=d(7833),_="awaitqueue";k.Logger=class{_debug;_warn;_error;constructor(b){b?(this._debug=E(`${_}:${b}`),this._warn=E(`${_}:WARN:${b}`),this._error=E(`${_}:ERROR:${b}`)):(this._debug=E(_),this._warn=E(`${_}:WARN`),this._error=E(`${_}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},8278:(I,k,d)=>{d.d(k,{Ag:()=>T,Wm:()=>v,sn:()=>f,tr:()=>g});var E=d(467),_=d(4756),b=d.n(_);d(1806);function T(){return window.RTCRtpSender!==void 0&&window.RTCRtpSender.prototype.createEncodedStreams!==void 0||v()}function v(){return window.RTCRtpScriptTransform!==void 0}function f(m){return R.apply(this,arguments)}function R(){return(R=(0,E.A)(b().mark(function m(P){var S,H;return b().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return S=new TextEncoder,x.next=1,crypto.subtle.importKey("raw",S.encode(P),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 1:return H=x.sent,x.abrupt("return",H);case 2:case"end":return x.stop()}},m)}))).apply(this,arguments)}function g(m){return F.apply(this,arguments)}function F(){return(F=(0,E.A)(b().mark(function m(P){var S;return b().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=1,crypto.subtle.importKey("raw",P,"HKDF",!1,["deriveBits","deriveKey"]);case 1:return S=H.sent,H.abrupt("return",S);case 2:case"end":return H.stop()}},m)}))).apply(this,arguments)}},8286:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0});const E=d(3779),_=d(2291),b=d(6011);k.default=function(T,v,f){if(E.default.randomUUID&&!v&&!T)return E.default.randomUUID();const R=(T=T||{}).random??T.rng?.()??(0,_.default)();if(R.length<16)throw new Error("Random bytes length must be >= 16");if(R[6]=15&R[6]|64,R[8]=63&R[8]|128,v){if((f=f||0)<0||f+16>v.length)throw new RangeError(`UUID byte range ${f}:${f+15} is out of buffer bounds`);for(let g=0;g<16;++g)v[f+g]=R[g];return v}return(0,b.unsafeStringify)(R)}},8454:function(I,k,d){var E,_;I.exports=(_=d(9021),d(7165),_.mode.ECB=((E=_.lib.BlockCipherMode.extend()).Encryptor=E.extend({processBlock:function(b,T){this._cipher.encryptBlock(b,T)}}),E.Decryptor=E.extend({processBlock:function(b,T){this._cipher.decryptBlock(b,T)}}),E),_.mode.ECB)},8624:(I,k,d)=>{d.r(k),d.d(k,{DOMException:()=>A,Headers:()=>g,Request:()=>y,Response:()=>p,fetch:()=>M});var E=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||d.g!==void 0&&d.g||{},_={searchParams:"URLSearchParams"in E,iterable:"Symbol"in E&&"iterator"in Symbol,blob:"FileReader"in E&&"Blob"in E&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in E,arrayBuffer:"ArrayBuffer"in E};if(_.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],T=ArrayBuffer.isView||function(j){return j&&b.indexOf(Object.prototype.toString.call(j))>-1};function v(j){if(typeof j!="string"&&(j=String(j)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(j)||j==="")throw new TypeError('Invalid character in header field name: "'+j+'"');return j.toLowerCase()}function f(j){return typeof j!="string"&&(j=String(j)),j}function R(j){var U={next:function(){var z=j.shift();return{done:z===void 0,value:z}}};return _.iterable&&(U[Symbol.iterator]=function(){return U}),U}function g(j){this.map={},j instanceof g?j.forEach(function(U,z){this.append(z,U)},this):Array.isArray(j)?j.forEach(function(U){if(U.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+U.length);this.append(U[0],U[1])},this):j&&Object.getOwnPropertyNames(j).forEach(function(U){this.append(U,j[U])},this)}function F(j){if(!j._noBody)return j.bodyUsed?Promise.reject(new TypeError("Already read")):void(j.bodyUsed=!0)}function m(j){return new Promise(function(U,z){j.onload=function(){U(j.result)},j.onerror=function(){z(j.error)}})}function P(j){var U=new FileReader,z=m(U);return U.readAsArrayBuffer(j),z}function S(j){if(j.slice)return j.slice(0);var U=new Uint8Array(j.byteLength);return U.set(new Uint8Array(j)),U.buffer}function H(){return this.bodyUsed=!1,this._initBody=function(j){var U;this.bodyUsed=this.bodyUsed,this._bodyInit=j,j?typeof j=="string"?this._bodyText=j:_.blob&&Blob.prototype.isPrototypeOf(j)?this._bodyBlob=j:_.formData&&FormData.prototype.isPrototypeOf(j)?this._bodyFormData=j:_.searchParams&&URLSearchParams.prototype.isPrototypeOf(j)?this._bodyText=j.toString():_.arrayBuffer&&_.blob&&(U=j)&&DataView.prototype.isPrototypeOf(U)?(this._bodyArrayBuffer=S(j.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(j)||T(j))?this._bodyArrayBuffer=S(j):this._bodyText=j=Object.prototype.toString.call(j):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof j=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(j)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var j=F(this);if(j)return j;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var j=F(this);return j||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(_.blob)return this.blob().then(P);throw new Error("could not read as ArrayBuffer")},this.text=function(){var j,U,z,W,Z,ce=F(this);if(ce)return ce;if(this._bodyBlob)return j=this._bodyBlob,U=new FileReader,z=m(U),W=/charset=([A-Za-z0-9_-]+)/.exec(j.type),Z=W?W[1]:"utf-8",U.readAsText(j,Z),z;if(this._bodyArrayBuffer)return Promise.resolve(function(J){for(var Ee=new Uint8Array(J),Ce=new Array(Ee.length),Re=0;Re<Ee.length;Re++)Ce[Re]=String.fromCharCode(Ee[Re]);return Ce.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}g.prototype.append=function(j,U){j=v(j),U=f(U);var z=this.map[j];this.map[j]=z?z+", "+U:U},g.prototype.delete=function(j){delete this.map[v(j)]},g.prototype.get=function(j){return j=v(j),this.has(j)?this.map[j]:null},g.prototype.has=function(j){return this.map.hasOwnProperty(v(j))},g.prototype.set=function(j,U){this.map[v(j)]=f(U)},g.prototype.forEach=function(j,U){for(var z in this.map)this.map.hasOwnProperty(z)&&j.call(U,this.map[z],z,this)},g.prototype.keys=function(){var j=[];return this.forEach(function(U,z){j.push(z)}),R(j)},g.prototype.values=function(){var j=[];return this.forEach(function(U){j.push(U)}),R(j)},g.prototype.entries=function(){var j=[];return this.forEach(function(U,z){j.push([z,U])}),R(j)},_.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function y(j,U){if(!(this instanceof y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var z,W,Z=(U=U||{}).body;if(j instanceof y){if(j.bodyUsed)throw new TypeError("Already read");this.url=j.url,this.credentials=j.credentials,U.headers||(this.headers=new g(j.headers)),this.method=j.method,this.mode=j.mode,this.signal=j.signal,Z||j._bodyInit==null||(Z=j._bodyInit,j.bodyUsed=!0)}else this.url=String(j);if(this.credentials=U.credentials||this.credentials||"same-origin",!U.headers&&this.headers||(this.headers=new g(U.headers)),this.method=(z=U.method||this.method||"GET",W=z.toUpperCase(),x.indexOf(W)>-1?W:z),this.mode=U.mode||this.mode||null,this.signal=U.signal||this.signal||function(){if("AbortController"in E)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Z)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Z),!(this.method!=="GET"&&this.method!=="HEAD"||U.cache!=="no-store"&&U.cache!=="no-cache")){var ce=/([?&])_=[^&]*/;ce.test(this.url)?this.url=this.url.replace(ce,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function w(j){var U=new FormData;return j.trim().split("&").forEach(function(z){if(z){var W=z.split("="),Z=W.shift().replace(/\+/g," "),ce=W.join("=").replace(/\+/g," ");U.append(decodeURIComponent(Z),decodeURIComponent(ce))}}),U}function p(j,U){if(!(this instanceof p))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(U||(U={}),this.type="default",this.status=U.status===void 0?200:U.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=U.statusText===void 0?"":""+U.statusText,this.headers=new g(U.headers),this.url=U.url||"",this._initBody(j)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},H.call(y.prototype),H.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},p.error=function(){var j=new p(null,{status:200,statusText:""});return j.ok=!1,j.status=0,j.type="error",j};var C=[301,302,303,307,308];p.redirect=function(j,U){if(C.indexOf(U)===-1)throw new RangeError("Invalid status code");return new p(null,{status:U,headers:{location:j}})};var A=E.DOMException;try{new A}catch{(A=function(U,z){this.message=U,this.name=z;var W=Error(U);this.stack=W.stack}).prototype=Object.create(Error.prototype),A.prototype.constructor=A}function M(j,U){return new Promise(function(z,W){var Z=new y(j,U);if(Z.signal&&Z.signal.aborted)return W(new A("Aborted","AbortError"));var ce=new XMLHttpRequest;function J(){ce.abort()}if(ce.onload=function(){var Ce,Re,ye={statusText:ce.statusText,headers:(Ce=ce.getAllResponseHeaders()||"",Re=new g,Ce.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(He){return He.indexOf(`
`)===0?He.substr(1,He.length):He}).forEach(function(He){var we=He.split(":"),Je=we.shift().trim();if(Je){var Be=we.join(":").trim();try{Re.append(Je,Be)}catch(nt){console.warn("Response "+nt.message)}}}),Re)};Z.url.indexOf("file://")===0&&(ce.status<200||ce.status>599)?ye.status=200:ye.status=ce.status,ye.url="responseURL"in ce?ce.responseURL:ye.headers.get("X-Request-URL");var Te="response"in ce?ce.response:ce.responseText;setTimeout(function(){z(new p(Te,ye))},0)},ce.onerror=function(){setTimeout(function(){W(new TypeError("Network request failed"))},0)},ce.ontimeout=function(){setTimeout(function(){W(new TypeError("Network request timed out"))},0)},ce.onabort=function(){setTimeout(function(){W(new A("Aborted","AbortError"))},0)},ce.open(Z.method,function(Ce){try{return Ce===""&&E.location.href?E.location.href:Ce}catch{return Ce}}(Z.url),!0),Z.credentials==="include"?ce.withCredentials=!0:Z.credentials==="omit"&&(ce.withCredentials=!1),"responseType"in ce&&(_.blob?ce.responseType="blob":_.arrayBuffer&&(ce.responseType="arraybuffer")),U&&typeof U.headers=="object"&&!(U.headers instanceof g||E.Headers&&U.headers instanceof E.Headers)){var Ee=[];Object.getOwnPropertyNames(U.headers).forEach(function(Ce){Ee.push(v(Ce)),ce.setRequestHeader(Ce,f(U.headers[Ce]))}),Z.headers.forEach(function(Ce,Re){Ee.indexOf(Re)===-1&&ce.setRequestHeader(Re,Ce)})}else Z.headers.forEach(function(Ce,Re){ce.setRequestHeader(Re,Ce)});Z.signal&&(Z.signal.addEventListener("abort",J),ce.onreadystatechange=function(){ce.readyState===4&&Z.signal.removeEventListener("abort",J)}),ce.send(Z._bodyInit===void 0?null:Z._bodyInit)})}M.polyfill=!0,E.fetch||(E.fetch=M,E.Headers=g,E.Request=y,E.Response=p)},8633:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Edge11=void 0;const E=d(2994),_=d(4893),b=d(1765),T=d(8046),v=d(8751),f=d(521),R=new E.Logger("Edge11");class g extends f.HandlerInterface{_sendingRtpParametersByKind;_remoteIceParameters;_remoteIceCandidates;_remoteDtlsParameters;_iceGatherer;_iceTransport;_dtlsTransport;_rtpSenders=new Map;_rtpReceivers=new Map;_nextSendLocalId=0;_cname;_transportReady=!1;static createFactory(){return()=>new g}constructor(){super()}get name(){return"Edge11"}close(){R.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const m of this._rtpSenders.values())try{m.stop()}catch{}for(const m of this._rtpReceivers.values())try{m.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return R.debug("getNativeRtpCapabilities()"),v.getCapabilities()}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:m,iceParameters:P,iceCandidates:S,dtlsParameters:H,sctpParameters:x,iceServers:y,iceTransportPolicy:w,additionalSettings:p,proprietaryConstraints:C,extendedRtpCapabilities:A}){R.debug("run()"),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",A),video:T.getSendingRtpParameters("video",A)},this._remoteIceParameters=P,this._remoteIceCandidates=S,this._remoteDtlsParameters=H,this._cname=`CNAME-${b.generateRandomNumber()}`,this.setIceGatherer({iceServers:y,iceTransportPolicy:w}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(m){throw new _.UnsupportedError("not supported")}async restartIce(m){if(R.debug("restartIce()"),this._remoteIceParameters=m,this._transportReady){R.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,m,"controlling");for(const P of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(P);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:m,encodings:P,codecOptions:S,codec:H}){R.debug("send() [kind:%s, track.id:%s]",m.kind,m.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),R.debug("send() | calling new RTCRtpSender()");const x=new RTCRtpSender(m,this._dtlsTransport),y=b.clone(this._sendingRtpParametersByKind[m.kind]);y.codecs=T.reduceCodecs(y.codecs,H);const w=y.codecs.some(A=>/.+\/rtx$/i.test(A.mimeType));P||(P=[{}]);for(const A of P)A.ssrc=b.generateRandomNumber(),w&&(A.rtx={ssrc:b.generateRandomNumber()});y.encodings=P,y.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const p=v.mangleRtpParameters(y);R.debug("send() | calling rtpSender.send() [params:%o]",p),await x.send(p);const C=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(C,x),{localId:C,rtpParameters:y,rtpSender:x}}async stopSending(m){R.debug("stopSending() [localId:%s]",m);const P=this._rtpSenders.get(m);if(!P)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(m);try{R.debug("stopSending() | calling rtpSender.stop()"),P.stop()}catch(S){throw R.warn("stopSending() | rtpSender.stop() failed:%o",S),S}}async pauseSending(m){}async resumeSending(m){}async replaceTrack(m,P){P?R.debug("replaceTrack() [localId:%s, track.id:%s]",m,P.id):R.debug("replaceTrack() [localId:%s, no track]",m);const S=this._rtpSenders.get(m);if(!S)throw new Error("RTCRtpSender not found");S.setTrack(P)}async setMaxSpatialLayer(m,P){R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",m,P);const S=this._rtpSenders.get(m);if(!S)throw new Error("RTCRtpSender not found");const H=S.getParameters();H.encodings.forEach((x,y)=>{x.active=y<=P}),await S.setParameters(H)}async setRtpEncodingParameters(m,P){R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",m,P);const S=this._rtpSenders.get(m);if(!S)throw new Error("RTCRtpSender not found");const H=S.getParameters();H.encodings.forEach((x,y)=>{H.encodings[y]={...x,...P}}),await S.setParameters(H)}async getSenderStats(m){const P=this._rtpSenders.get(m);if(!P)throw new Error("RTCRtpSender not found");return P.getStats()}async sendDataChannel(m){throw new _.UnsupportedError("not implemented")}async receive(m){const P=[];for(const S of m){const{trackId:H,kind:x}=S;R.debug("receive() [trackId:%s, kind:%s]",H,x)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const S of m){const{trackId:H,kind:x,rtpParameters:y}=S;R.debug("receive() | calling new RTCRtpReceiver()");const w=new RTCRtpReceiver(this._dtlsTransport,x);w.addEventListener("error",A=>{R.error('rtpReceiver "error" event [event:%o]',A)});const p=v.mangleRtpParameters(y);R.debug("receive() | calling rtpReceiver.receive() [params:%o]",p),await w.receive(p);const C=H;this._rtpReceivers.set(C,w),P.push({localId:C,track:w.track,rtpReceiver:w})}return P}async stopReceiving(m){for(const P of m){R.debug("stopReceiving() [localId:%s]",P);const S=this._rtpReceivers.get(P);if(!S)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(P);try{R.debug("stopReceiving() | calling rtpReceiver.stop()"),S.stop()}catch(H){R.warn("stopReceiving() | rtpReceiver.stop() failed:%o",H)}}}async pauseReceiving(m){}async resumeReceiving(m){}async getReceiverStats(m){const P=this._rtpReceivers.get(m);if(!P)throw new Error("RTCRtpReceiver not found");return P.getStats()}async receiveDataChannel(m){throw new _.UnsupportedError("not implemented")}setIceGatherer({iceServers:m,iceTransportPolicy:P}){const S=new RTCIceGatherer({iceServers:m??[],gatherPolicy:P??"all"});S.addEventListener("error",H=>{R.error('iceGatherer "error" event [event:%o]',H)});try{S.gather()}catch(H){R.debug("setIceGatherer() | iceGatherer.gather() failed: %s",H.toString())}this._iceGatherer=S}setIceTransport(){const m=new RTCIceTransport(this._iceGatherer);m.addEventListener("statechange",()=>{switch(m.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),m.addEventListener("icestatechange",()=>{switch(m.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),m.addEventListener("candidatepairchange",P=>{R.debug('iceTransport "candidatepairchange" event [pair:%o]',P.pair)}),this._iceTransport=m}setDtlsTransport(){const m=new RTCDtlsTransport(this._iceTransport);m.addEventListener("statechange",()=>{R.debug('dtlsTransport "statechange" event [state:%s]',m.state)}),m.addEventListener("dtlsstatechange",()=>{R.debug('dtlsTransport "dtlsstatechange" event [state:%s]',m.state),m.state==="closed"&&this.emit("@connectionstatechange","closed")}),m.addEventListener("error",P=>{R.error('dtlsTransport "error" event [event:%o]',P)}),this._dtlsTransport=m}async setupTransport({localDtlsRole:m}){R.debug("setupTransport()");const P=this._dtlsTransport.getLocalParameters();P.role=m,await new Promise((S,H)=>{this.safeEmit("@connect",{dtlsParameters:P},S,H)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const S of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(S);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(S=>S.algorithm==="sha-256"||S.algorithm==="sha-384"||S.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}k.Edge11=g},8751:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getCapabilities=function(){const _=RTCRtpReceiver.getCapabilities(),b=E.clone(_);for(const T of b.codecs??[]){if(T.channels=T.numChannels,delete T.numChannels,T.mimeType=T.mimeType??`${T.kind}/${T.name}`,T.parameters){const v=T.parameters;v.apt&&(v.apt=Number(v.apt)),v["packetization-mode"]&&(v["packetization-mode"]=Number(v["packetization-mode"]))}for(const v of T.rtcpFeedback??[])v.parameter||(v.parameter="")}return b},k.mangleRtpParameters=function(_){const b=E.clone(_);b.mid&&(b.muxId=b.mid,delete b.mid);for(const T of b.codecs)T.channels&&(T.numChannels=T.channels,delete T.channels),T.mimeType&&!T.name&&(T.name=T.mimeType.split("/")[1]),delete T.mimeType;return b};const E=d(1765)},8876:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.AwaitQueueRemovedTaskError=k.AwaitQueueStoppedError=k.AwaitQueue=void 0;var E=d(9275);Object.defineProperty(k,"AwaitQueue",{enumerable:!0,get:function(){return E.AwaitQueue}});var _=d(4253);Object.defineProperty(k,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return _.AwaitQueueStoppedError}}),Object.defineProperty(k,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return _.AwaitQueueRemovedTaskError}})},9021:function(I,k,d){var E;I.exports=(E=E||function(_,b){var T;if(typeof window<"u"&&window.crypto&&(T=window.crypto),typeof self<"u"&&self.crypto&&(T=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(T=globalThis.crypto),!T&&typeof window<"u"&&window.msCrypto&&(T=window.msCrypto),!T&&d.g!==void 0&&d.g.crypto&&(T=d.g.crypto),!T)try{T=d(477)}catch{}var v=function(){if(T){if(typeof T.getRandomValues=="function")try{return T.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof T.randomBytes=="function")try{return T.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function p(){}return function(C){var A;return p.prototype=C,A=new p,p.prototype=null,A}}(),R={},g=R.lib={},F=g.Base={extend:function(p){var C=f(this);return p&&C.mixIn(p),C.hasOwnProperty("init")&&this.init!==C.init||(C.init=function(){C.$super.init.apply(this,arguments)}),C.init.prototype=C,C.$super=this,C},create:function(){var p=this.extend();return p.init.apply(p,arguments),p},init:function(){},mixIn:function(p){for(var C in p)p.hasOwnProperty(C)&&(this[C]=p[C]);p.hasOwnProperty("toString")&&(this.toString=p.toString)},clone:function(){return this.init.prototype.extend(this)}},m=g.WordArray=F.extend({init:function(p,C){p=this.words=p||[],this.sigBytes=C!=b?C:4*p.length},toString:function(p){return(p||S).stringify(this)},concat:function(p){var C=this.words,A=p.words,M=this.sigBytes,j=p.sigBytes;if(this.clamp(),M%4)for(var U=0;U<j;U++){var z=A[U>>>2]>>>24-U%4*8&255;C[M+U>>>2]|=z<<24-(M+U)%4*8}else for(var W=0;W<j;W+=4)C[M+W>>>2]=A[W>>>2];return this.sigBytes+=j,this},clamp:function(){var p=this.words,C=this.sigBytes;p[C>>>2]&=4294967295<<32-C%4*8,p.length=_.ceil(C/4)},clone:function(){var p=F.clone.call(this);return p.words=this.words.slice(0),p},random:function(p){for(var C=[],A=0;A<p;A+=4)C.push(v());return new m.init(C,p)}}),P=R.enc={},S=P.Hex={stringify:function(p){for(var C=p.words,A=p.sigBytes,M=[],j=0;j<A;j++){var U=C[j>>>2]>>>24-j%4*8&255;M.push((U>>>4).toString(16)),M.push((15&U).toString(16))}return M.join("")},parse:function(p){for(var C=p.length,A=[],M=0;M<C;M+=2)A[M>>>3]|=parseInt(p.substr(M,2),16)<<24-M%8*4;return new m.init(A,C/2)}},H=P.Latin1={stringify:function(p){for(var C=p.words,A=p.sigBytes,M=[],j=0;j<A;j++){var U=C[j>>>2]>>>24-j%4*8&255;M.push(String.fromCharCode(U))}return M.join("")},parse:function(p){for(var C=p.length,A=[],M=0;M<C;M++)A[M>>>2]|=(255&p.charCodeAt(M))<<24-M%4*8;return new m.init(A,C)}},x=P.Utf8={stringify:function(p){try{return decodeURIComponent(escape(H.stringify(p)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(p){return H.parse(unescape(encodeURIComponent(p)))}},y=g.BufferedBlockAlgorithm=F.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(p){typeof p=="string"&&(p=x.parse(p)),this._data.concat(p),this._nDataBytes+=p.sigBytes},_process:function(p){var C,A=this._data,M=A.words,j=A.sigBytes,U=this.blockSize,z=j/(4*U),W=(z=p?_.ceil(z):_.max((0|z)-this._minBufferSize,0))*U,Z=_.min(4*W,j);if(W){for(var ce=0;ce<W;ce+=U)this._doProcessBlock(M,ce);C=M.splice(0,W),A.sigBytes-=Z}return new m.init(C,Z)},clone:function(){var p=F.clone.call(this);return p._data=this._data.clone(),p},_minBufferSize:0}),w=(g.Hasher=y.extend({cfg:F.extend(),init:function(p){this.cfg=this.cfg.extend(p),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(p){return this._append(p),this._process(),this},finalize:function(p){return p&&this._append(p),this._doFinalize()},blockSize:16,_createHelper:function(p){return function(C,A){return new p.init(A).finalize(C)}},_createHmacHelper:function(p){return function(C,A){return new w.HMAC.init(p,A).finalize(C)}}}),R.algo={});return R}(Math),E)},9027:(I,k,d)=>{d.d(k,{$:()=>E});var E={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"osneSixNine"},h360p_w640p_150kbps:{width:640,height:360,bitRate:15e4,frameRate:15,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{resolution:{width:640,height:360},frameRate:30,bitrates:{high:4e5,medium:2e5,low:1e5}},h480p_15fps:{resolution:{width:854,height:480},frameRate:15,bitrates:{high:3e5,medium:15e4,low:75e3}},h480p_30fps:{resolution:{width:854,height:480},frameRate:30,bitrates:{high:5e5,medium:25e4,low:125e3}},h720p_5fps:{resolution:{width:1280,height:720},frameRate:5,bitrates:{high:4e5,medium:2e5,low:1e5}},h720p_15fps:{resolution:{width:1280,height:720},frameRate:15,bitrates:{high:1e6,medium:5e5,low:25e4}},h720p_30fps:{resolution:{width:1280,height:720},frameRate:30,bitrates:{high:15e5,medium:75e4,low:375e3}},h1080p_15fps:{resolution:{width:1920,height:1080},frameRate:15,bitrates:{high:15e5,medium:75e4,low:3e5}},h1080p_30fps:{resolution:{width:1920,height:1080},frameRate:30,bitrates:{high:2e6,medium:1e6,low:5e5}}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},9166:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.DataConsumer=void 0;const E=d(2994),_=d(3953),b=new E.Logger("DataConsumer");class T extends _.EnhancedEventEmitter{_id;_dataProducerId;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new _.EnhancedEventEmitter;constructor({id:f,dataProducerId:R,dataChannel:g,sctpStreamParameters:F,appData:m}){super(),b.debug("constructor()"),this._id=f,this._dataProducerId=R,this._dataChannel=g,this._sctpStreamParameters=F,this._appData=m??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(f){this._dataChannel.binaryType=f}get appData(){return this._appData}set appData(f){this._appData=f}get observer(){return this._observer}close(){this._closed||(b.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(b.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(b.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",f=>{if(this._closed)return;let{error:R}=f;R||(R=new Error("unknown DataChannel error")),R.errorDetail==="sctp-failure"?b.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",R.sctpCauseCode,R.message):b.error('DataChannel "error" event: %o',R),this.safeEmit("error",R)}),this._dataChannel.addEventListener("close",()=>{this._closed||(b.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",f=>{this._closed||this.safeEmit("message",f.data)})}}k.DataConsumer=T},9275:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.AwaitQueue=void 0;const E=d(8274),_=d(4253),b=new E.Logger("AwaitQueue");k.AwaitQueue=class{pendingTasks=new Map;nextTaskId=0;stopping=!1;constructor(){b.debug("constructor()")}get size(){return this.pendingTasks.size}async push(T,v){if(v=v??T.name,b.debug(`push() [name:${v}]`),typeof T!="function")throw new TypeError("given task is not a function");if(v)try{Object.defineProperty(T,"name",{value:v})}catch{}return new Promise((f,R)=>{const g={id:this.nextTaskId++,task:T,name:v,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:F=>{if(g.completed)return;g.completed=!0,this.pendingTasks.delete(g.id),b.debug(`resolving task [name:${g.name}]`),f(F);const[m]=this.pendingTasks.values();m&&!m.executedAt&&this.execute(m)},reject:F=>{if(!g.completed&&(g.completed=!0,this.pendingTasks.delete(g.id),b.debug(`rejecting task [name:${g.name}]: %s`,String(F)),R(F),!this.stopping)){const[m]=this.pendingTasks.values();m&&!m.executedAt&&this.execute(m)}}};this.pendingTasks.set(g.id,g),this.pendingTasks.size===1&&this.execute(g)})}stop(){b.debug("stop()"),this.stopping=!0;for(const T of this.pendingTasks.values())b.debug(`stop() | stopping task [name:${T.name}]`),T.reject(new _.AwaitQueueStoppedError);this.stopping=!1}remove(T){b.debug(`remove() [taskIdx:${T}]`);const v=Array.from(this.pendingTasks.values())[T];v?v.reject(new _.AwaitQueueRemovedTaskError):b.debug(`stop() | no task with given idx [taskIdx:${T}]`)}dump(){const T=Date.now();let v=0;return Array.from(this.pendingTasks.values()).map(f=>({idx:v++,task:f.task,name:f.name,enqueuedTime:f.executedAt?f.executedAt-f.enqueuedAt:T-f.enqueuedAt,executionTime:f.executedAt?T-f.executedAt:0}))}async execute(T){if(b.debug(`execute() [name:${T.name}]`),T.executedAt)throw new Error("task already being executed");T.executedAt=Date.now();try{const v=await T.task();T.resolve(v)}catch(v){T.reject(v)}}}},9352:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.ReactNative=void 0;const E=d(7363),_=d(2994),b=d(4893),T=d(1765),v=d(8046),f=d(5544),R=d(4496),g=d(521),F=d(1305),m=new _.Logger("ReactNative"),P={OS:1024,MIS:1024};class S extends g.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdTrack=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new S}constructor(){super()}get name(){return"ReactNative"}close(){if(m.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const x=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const y=await x.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{x.close()}catch{}const w=E.parse(y.sdp);return f.extractRtpCapabilities({sdpObject:w})}catch(y){try{x.close()}catch{}throw y}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:x,iceParameters:y,iceCandidates:w,dtlsParameters:p,sctpParameters:C,iceServers:A,iceTransportPolicy:M,additionalSettings:j,proprietaryConstraints:U,extendedRtpCapabilities:z}){m.debug("run()"),this._direction=x,this._remoteSdp=new F.RemoteSdp({iceParameters:y,iceCandidates:w,dtlsParameters:p,sctpParameters:C,planB:!0}),this._sendingRtpParametersByKind={audio:v.getSendingRtpParameters("audio",z),video:v.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:v.getSendingRemoteRtpParameters("audio",z),video:v.getSendingRemoteRtpParameters("video",z)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:A??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...j},U),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",W=>{this.emit("@icecandidateerror",W)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(x){m.debug("updateIceServers()");const y=this._pc.getConfiguration();y.iceServers=x,this._pc.setConfiguration(y)}async restartIce(x){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(x),this._transportReady)if(this._direction==="send"){const y=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",y),await this._pc.setLocalDescription(y);const w={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w)}else{const y={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);const w=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w)}}async getTransportStats(){return this._pc.getStats()}async send({track:x,encodings:y,codecOptions:w,codec:p}){this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",x.kind,x.id),p&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(x),this._pc.addStream(this._sendStream);let C,A=await this._pc.createOffer(),M=E.parse(A.sdp);M.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const j=T.clone(this._sendingRtpParametersByKind[x.kind]);j.codecs=v.reduceCodecs(j.codecs);const U=T.clone(this._sendingRemoteRtpParametersByKind[x.kind]);if(U.codecs=v.reduceCodecs(U.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),x.kind==="video"&&y&&y.length>1&&(m.debug("send() | enabling simulcast"),M=E.parse(A.sdp),C=M.media.find(Z=>Z.type==="video"),R.addLegacySimulcast({offerMediaObject:C,track:x,numStreams:y.length}),A={type:"offer",sdp:E.write(M)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A),M=E.parse(this._pc.localDescription.sdp),C=M.media.find(Z=>Z.type===x.kind),j.rtcp.cname=f.getCname({offerMediaObject:C}),j.encodings=R.getRtpEncodings({offerMediaObject:C,track:x}),y)for(let Z=0;Z<j.encodings.length;++Z)y[Z]&&Object.assign(j.encodings[Z],y[Z]);if(j.encodings.length>1&&(j.codecs[0].mimeType.toLowerCase()==="video/vp8"||j.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Z of j.encodings)Z.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:C,offerRtpParameters:j,answerRtpParameters:U,codecOptions:w});const z={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z);const W=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(W,x),{localId:W,rtpParameters:j}}async stopSending(x){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",x);const y=this._mapSendLocalIdTrack.get(x);if(!y)throw new Error("track not found");this._mapSendLocalIdTrack.delete(x),this._sendStream.removeTrack(y),this._pc.addStream(this._sendStream);const w=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",w);try{await this._pc.setLocalDescription(w)}catch(C){if(this._sendStream.getTracks().length===0)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",C.toString());throw C}if(this._pc.signalingState==="stable")return;const p={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async pauseSending(x){}async resumeSending(x){}async replaceTrack(x,y){throw new b.UnsupportedError("not implemented")}async setMaxSpatialLayer(x,y){throw new b.UnsupportedError("not implemented")}async setRtpEncodingParameters(x,y){throw new b.UnsupportedError("not implemented")}async getSenderStats(x){throw new b.UnsupportedError("not implemented")}async sendDataChannel({ordered:x,maxPacketLifeTime:y,maxRetransmits:w,label:p,protocol:C}){this.assertSendDirection();const A={negotiated:!0,id:this._nextSendSctpStreamId,ordered:x,maxPacketLifeTime:y,maxRetransmitTime:y,maxRetransmits:w,protocol:C};m.debug("sendDataChannel() [options:%o]",A);const M=this._pc.createDataChannel(p,A);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),U=E.parse(j.sdp),z=U.media.find(Z=>Z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const W={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setRemoteDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:A.id,ordered:A.ordered,maxPacketLifeTime:A.maxPacketLifeTime,maxRetransmits:A.maxRetransmits}}}async receive(x){this.assertRecvDirection();const y=[],w=new Map;for(const M of x){const{trackId:j,kind:U,rtpParameters:z}=M;m.debug("receive() [trackId:%s, kind:%s]",j,U);const W=U;let Z=M.streamId??z.rtcp.cname;m.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),Z+=`-hack-${T.generateRandomNumber()}`,w.set(j,Z),this._remoteSdp.receive({mid:W,kind:U,offerRtpParameters:z,streamId:Z,trackId:j})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let C=await this._pc.createAnswer();const A=E.parse(C.sdp);for(const M of x){const{kind:j,rtpParameters:U}=M,z=j,W=A.media.find(Z=>String(Z.mid)===z);f.applyCodecParameters({offerRtpParameters:U,answerMediaObject:W})}C={type:"answer",sdp:E.write(A)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",C),await this._pc.setLocalDescription(C);for(const M of x){const{kind:j,trackId:U,rtpParameters:z}=M,W=U,Z=j,ce=w.get(U),J=this._pc.getRemoteStreams().find(Ee=>Ee.id===ce).getTrackById(W);if(!J)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(W,{mid:Z,rtpParameters:z}),y.push({localId:W,track:J})}return y}async stopReceiving(x){this.assertRecvDirection();for(const p of x){m.debug("stopReceiving() [localId:%s]",p);const{mid:C,rtpParameters:A}=this._mapRecvLocalIdInfo.get(p)??{};this._mapRecvLocalIdInfo.delete(p),this._remoteSdp.planBStopReceiving({mid:C,offerRtpParameters:A})}const y={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);const w=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w)}async pauseReceiving(x){}async resumeReceiving(x){}async getReceiverStats(x){throw new b.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:x,label:y,protocol:w}){this.assertRecvDirection();const{streamId:p,ordered:C,maxPacketLifeTime:A,maxRetransmits:M}=x,j={negotiated:!0,id:p,ordered:C,maxPacketLifeTime:A,maxRetransmitTime:A,maxRetransmits:M,protocol:w};m.debug("receiveDataChannel() [options:%o]",j);const U=this._pc.createDataChannel(y,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const z={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const W=await this._pc.createAnswer();if(!this._transportReady){const Z=E.parse(W.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setLocalDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:U}}async setupTransport({localDtlsRole:x,localSdpObject:y}){y||(y=E.parse(this._pc.localDescription.sdp));const w=f.extractDtlsParameters({sdpObject:y});w.role=x,this._remoteSdp.updateDtlsRole(x==="client"?"server":"client"),await new Promise((p,C)=>{this.safeEmit("@connect",{dtlsParameters:w},p,C)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.ReactNative=S},9506:function(I,k,d){var E,_,b,T,v,f,R,g;I.exports=(g=d(9021),d(5471),d(1025),_=(E=g).lib,b=_.Base,T=_.WordArray,v=E.algo,f=v.MD5,R=v.EvpKDF=b.extend({cfg:b.extend({keySize:4,hasher:f,iterations:1}),init:function(F){this.cfg=this.cfg.extend(F)},compute:function(F,m){for(var P,S=this.cfg,H=S.hasher.create(),x=T.create(),y=x.words,w=S.keySize,p=S.iterations;y.length<w;){P&&H.update(P),P=H.update(F).finalize(m),H.reset();for(var C=1;C<p;C++)P=H.finalize(P),H.reset();x.concat(P)}return x.sigBytes=4*w,x}}),E.EvpKDF=function(F,m,P){return R.create(P).compute(F,m)},g.EvpKDF)},9557:function(I,k,d){var E,_,b,T,v,f,R,g;I.exports=(g=d(9021),d(3240),d(1380),_=(E=g).x64,b=_.Word,T=_.WordArray,v=E.algo,f=v.SHA512,R=v.SHA384=f.extend({_doReset:function(){this._hash=new T.init([new b.init(3418070365,3238371032),new b.init(1654270250,914150663),new b.init(2438529370,812702999),new b.init(355462360,4144912697),new b.init(1731405415,4290775857),new b.init(2394180231,1750603025),new b.init(3675008525,1694076839),new b.init(1203062813,3204075428)])},_doFinalize:function(){var F=f._doFinalize.call(this);return F.sigBytes-=16,F}}),E.SHA384=f._createHelper(R),E.HmacSHA384=f._createHmacHelper(R),g.SHA384)},9596:I=>{var k,d=typeof Reflect=="object"?Reflect:null,E=d&&typeof d.apply=="function"?d.apply:function(x,y,w){return Function.prototype.apply.call(x,y,w)};k=d&&typeof d.ownKeys=="function"?d.ownKeys:Object.getOwnPropertySymbols?function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:function(x){return Object.getOwnPropertyNames(x)};var _=Number.isNaN||function(x){return x!=x};function b(){b.init.call(this)}I.exports=b,I.exports.once=function(x,y){return new Promise(function(w,p){function C(M){x.removeListener(y,A),p(M)}function A(){typeof x.removeListener=="function"&&x.removeListener("error",C),w([].slice.call(arguments))}H(x,y,A,{once:!0}),y!=="error"&&function(M,j,U){typeof M.on=="function"&&H(M,"error",j,U)}(x,C,{once:!0})})},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var T=10;function v(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}function f(x){return x._maxListeners===void 0?b.defaultMaxListeners:x._maxListeners}function R(x,y,w,p){var C,A,M,j;if(v(w),(A=x._events)===void 0?(A=x._events=Object.create(null),x._eventsCount=0):(A.newListener!==void 0&&(x.emit("newListener",y,w.listener?w.listener:w),A=x._events),M=A[y]),M===void 0)M=A[y]=w,++x._eventsCount;else if(typeof M=="function"?M=A[y]=p?[w,M]:[M,w]:p?M.unshift(w):M.push(w),(C=f(x))>0&&M.length>C&&!M.warned){M.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=x,U.type=y,U.count=M.length,j=U,console&&console.warn&&console.warn(j)}return x}function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F(x,y,w){var p={fired:!1,wrapFn:void 0,target:x,type:y,listener:w},C=g.bind(p);return C.listener=w,p.wrapFn=C,C}function m(x,y,w){var p=x._events;if(p===void 0)return[];var C=p[y];return C===void 0?[]:typeof C=="function"?w?[C.listener||C]:[C]:w?function(A){for(var M=new Array(A.length),j=0;j<M.length;++j)M[j]=A[j].listener||A[j];return M}(C):S(C,C.length)}function P(x){var y=this._events;if(y!==void 0){var w=y[x];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0}function S(x,y){for(var w=new Array(y),p=0;p<y;++p)w[p]=x[p];return w}function H(x,y,w,p){if(typeof x.on=="function")p.once?x.once(y,w):x.on(y,w);else{if(typeof x.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x);x.addEventListener(y,function C(A){p.once&&x.removeEventListener(y,C),w(A)})}}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(x){if(typeof x!="number"||x<0||_(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");T=x}}),b.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||_(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this},b.prototype.getMaxListeners=function(){return f(this)},b.prototype.emit=function(x){for(var y=[],w=1;w<arguments.length;w++)y.push(arguments[w]);var p=x==="error",C=this._events;if(C!==void 0)p=p&&C.error===void 0;else if(!p)return!1;if(p){var A;if(y.length>0&&(A=y[0]),A instanceof Error)throw A;var M=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw M.context=A,M}var j=C[x];if(j===void 0)return!1;if(typeof j=="function")E(j,this,y);else{var U=j.length,z=S(j,U);for(w=0;w<U;++w)E(z[w],this,y)}return!0},b.prototype.addListener=function(x,y){return R(this,x,y,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(x,y){return R(this,x,y,!0)},b.prototype.once=function(x,y){return v(y),this.on(x,F(this,x,y)),this},b.prototype.prependOnceListener=function(x,y){return v(y),this.prependListener(x,F(this,x,y)),this},b.prototype.removeListener=function(x,y){var w,p,C,A,M;if(v(y),(p=this._events)===void 0)return this;if((w=p[x])===void 0)return this;if(w===y||w.listener===y)--this._eventsCount===0?this._events=Object.create(null):(delete p[x],p.removeListener&&this.emit("removeListener",x,w.listener||y));else if(typeof w!="function"){for(C=-1,A=w.length-1;A>=0;A--)if(w[A]===y||w[A].listener===y){M=w[A].listener,C=A;break}if(C<0)return this;C===0?w.shift():function(j,U){for(;U+1<j.length;U++)j[U]=j[U+1];j.pop()}(w,C),w.length===1&&(p[x]=w[0]),p.removeListener!==void 0&&this.emit("removeListener",x,M||y)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(x){var y,w,p;if((w=this._events)===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[x]),this;if(arguments.length===0){var C,A=Object.keys(w);for(p=0;p<A.length;++p)(C=A[p])!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(y=w[x])=="function")this.removeListener(x,y);else if(y!==void 0)for(p=y.length-1;p>=0;p--)this.removeListener(x,y[p]);return this},b.prototype.listeners=function(x){return m(this,x,!0)},b.prototype.rawListeners=function(x){return m(this,x,!1)},b.listenerCount=function(x,y){return typeof x.listenerCount=="function"?x.listenerCount(y):P.call(x,y)},b.prototype.listenerCount=P,b.prototype.eventNames=function(){return this._eventsCount>0?k(this._events):[]}},9633:(I,k,d)=>{d.d(k,{l:()=>y});var E=d(467),_=d(3029),b=d(2901),T=d(388),v=d(3954),f=d(5501),R=d(4756),g=d.n(R),F=d(7007),m=d(1806),P=d(6746),S=d(8278);function H(w,p,C){return p=(0,v.A)(p),(0,T.A)(w,x()?Reflect.construct(p,C||[],(0,v.A)(w).constructor):p.apply(w,C))}function x(){try{var w=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x=function(){return!!w})()}var y=function(w){function p(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,_.A)(this,p),H(this,p,[Object.assign(Object.assign({},A),{sharedKey:!0,ratchetWindowSize:0,failureTolerance:-1})])}return(0,f.A)(p,w),(0,b.A)(p,[{key:"setSharedKey",value:(C=(0,E.A)(g().mark(function A(M){var j,U;return g().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(typeof M!="string"){z.next=2;break}return z.next=1,(0,S.sn)(M);case 1:U=z.sent,z.next=4;break;case 2:return z.next=3,(0,S.tr)(M);case 3:U=z.sent;case 4:j=U,this.onSetEncryptionKey(j);case 5:case"end":return z.stop()}},A,this)})),function(A){return C.apply(this,arguments)})}]);var C}(function(w){function p(){var C,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,_.A)(this,p),(C=H(this,p)).onKeyRatcheted=function(M,j){console.debug("key ratcheted event received",{material:M,keyIndex:j})},C.keyInfoMap=new Map,C.options=Object.assign(Object.assign({},m.T4),A),C.on(P.fo.KeyRatcheted,C.onKeyRatcheted),C}return(0,f.A)(p,w),(0,b.A)(p,[{key:"onSetEncryptionKey",value:function(C,A,M){var j={key:C,participantIdentity:A,keyIndex:M};if(!this.options.sharedKey&&!A)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(A??"shared","-").concat(M??0),j),this.emit(P.fo.SetKey,j)}},{key:"getKeys",value:function(){return Array.from(this.keyInfoMap.values())}},{key:"getOptions",value:function(){return this.options}},{key:"ratchetKey",value:function(C,A){this.emit(P.fo.RatchetRequest,C,A)}}])}(F.EventEmitter))},9676:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Safari11=void 0;const E=d(7363),_=d(2994),b=d(1765),T=d(8046),v=d(5544),f=d(4496),R=d(521),g=d(1305),F=new _.Logger("Safari11"),m={OS:1024,MIS:1024};class P extends R.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdRtpSender=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new P}constructor(){super()}get name(){return"Safari11"}close(){if(F.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){F.debug("getNativeRtpCapabilities()");const H=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const x=await H.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{H.close()}catch{}const y=E.parse(x.sdp);return v.extractRtpCapabilities({sdpObject:y})}catch(x){try{H.close()}catch{}throw x}}async getNativeSctpCapabilities(){return F.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:H,iceParameters:x,iceCandidates:y,dtlsParameters:w,sctpParameters:p,iceServers:C,iceTransportPolicy:A,additionalSettings:M,proprietaryConstraints:j,extendedRtpCapabilities:U}){F.debug("run()"),this._direction=H,this._remoteSdp=new g.RemoteSdp({iceParameters:x,iceCandidates:y,dtlsParameters:w,sctpParameters:p,planB:!0}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",U),video:T.getSendingRtpParameters("video",U)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",U),video:T.getSendingRemoteRtpParameters("video",U)},w.role&&w.role!=="auto"&&(this._forcedLocalDtlsRole=w.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:C??[],iceTransportPolicy:A??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...M},j),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",z=>{this.emit("@icecandidateerror",z)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(F.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(H){F.debug("updateIceServers()");const x=this._pc.getConfiguration();x.iceServers=H,this._pc.setConfiguration(x)}async restartIce(H){if(F.debug("restartIce()"),this._remoteSdp.updateIceParameters(H),this._transportReady)if(this._direction==="send"){const x=await this._pc.createOffer({iceRestart:!0});F.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const y={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y)}else{const x={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const y=await this._pc.createAnswer();F.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",y),await this._pc.setLocalDescription(y)}}async getTransportStats(){return this._pc.getStats()}async send({track:H,encodings:x,codecOptions:y,codec:w}){this.assertSendDirection(),F.debug("send() [kind:%s, track.id:%s]",H.kind,H.id),w&&F.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(H),this._pc.addTrack(H,this._sendStream);let p,C=await this._pc.createOffer(),A=E.parse(C.sdp);A.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const M=b.clone(this._sendingRtpParametersByKind[H.kind]);M.codecs=T.reduceCodecs(M.codecs);const j=b.clone(this._sendingRemoteRtpParametersByKind[H.kind]);if(j.codecs=T.reduceCodecs(j.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),H.kind==="video"&&x&&x.length>1&&(F.debug("send() | enabling simulcast"),A=E.parse(C.sdp),p=A.media.find(Z=>Z.type==="video"),f.addLegacySimulcast({offerMediaObject:p,track:H,numStreams:x.length}),C={type:"offer",sdp:E.write(A)}),F.debug("send() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C),A=E.parse(this._pc.localDescription.sdp),p=A.media.find(Z=>Z.type===H.kind),M.rtcp.cname=v.getCname({offerMediaObject:p}),M.encodings=f.getRtpEncodings({offerMediaObject:p,track:H}),x)for(let Z=0;Z<M.encodings.length;++Z)x[Z]&&Object.assign(M.encodings[Z],x[Z]);if(M.encodings.length>1&&M.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Z of M.encodings)Z.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:M,answerRtpParameters:j,codecOptions:y});const U={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("send() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setRemoteDescription(U);const z=String(this._nextSendLocalId);this._nextSendLocalId++;const W=this._pc.getSenders().find(Z=>Z.track===H);return this._mapSendLocalIdRtpSender.set(z,W),{localId:z,rtpParameters:M,rtpSender:W}}async stopSending(H){this.assertSendDirection();const x=this._mapSendLocalIdRtpSender.get(H);if(!x)throw new Error("associated RTCRtpSender not found");x.track&&this._sendStream.removeTrack(x.track),this._mapSendLocalIdRtpSender.delete(H);const y=await this._pc.createOffer();F.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",y);try{await this._pc.setLocalDescription(y)}catch(p){if(this._sendStream.getTracks().length===0)return void F.warn("stopSending() | ignoring expected error due no sending tracks: %s",p.toString());throw p}if(this._pc.signalingState==="stable")return;const w={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w)}async pauseSending(H){}async resumeSending(H){}async replaceTrack(H,x){this.assertSendDirection(),x?F.debug("replaceTrack() [localId:%s, track.id:%s]",H,x.id):F.debug("replaceTrack() [localId:%s, no track]",H);const y=this._mapSendLocalIdRtpSender.get(H);if(!y)throw new Error("associated RTCRtpSender not found");const w=y.track;await y.replaceTrack(x),w&&this._sendStream.removeTrack(w),x&&this._sendStream.addTrack(x)}async setMaxSpatialLayer(H,x){this.assertSendDirection(),F.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",H,x);const y=this._mapSendLocalIdRtpSender.get(H);if(!y)throw new Error("associated RTCRtpSender not found");const w=y.getParameters();w.encodings.forEach((p,C)=>{p.active=C<=x}),await y.setParameters(w)}async setRtpEncodingParameters(H,x){this.assertSendDirection(),F.debug("setRtpEncodingParameters() [localId:%s, params:%o]",H,x);const y=this._mapSendLocalIdRtpSender.get(H);if(!y)throw new Error("associated RTCRtpSender not found");const w=y.getParameters();w.encodings.forEach((p,C)=>{w.encodings[C]={...p,...x}}),await y.setParameters(w)}async getSenderStats(H){this.assertSendDirection();const x=this._mapSendLocalIdRtpSender.get(H);if(!x)throw new Error("associated RTCRtpSender not found");return x.getStats()}async sendDataChannel({ordered:H,maxPacketLifeTime:x,maxRetransmits:y,label:w,protocol:p}){this.assertSendDirection();const C={negotiated:!0,id:this._nextSendSctpStreamId,ordered:H,maxPacketLifeTime:x,maxRetransmits:y,protocol:p};F.debug("sendDataChannel() [options:%o]",C);const A=this._pc.createDataChannel(w,C);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),j=E.parse(M.sdp),U=j.media.find(W=>W.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),F.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const z={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:A,sctpStreamParameters:{streamId:C.id,ordered:C.ordered,maxPacketLifeTime:C.maxPacketLifeTime,maxRetransmits:C.maxRetransmits}}}async receive(H){this.assertRecvDirection();const x=[];for(const C of H){const{trackId:A,kind:M,rtpParameters:j,streamId:U}=C;F.debug("receive() [trackId:%s, kind:%s]",A,M);const z=M;this._remoteSdp.receive({mid:z,kind:M,offerRtpParameters:j,streamId:U??j.rtcp.cname,trackId:A})}const y={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);let w=await this._pc.createAnswer();const p=E.parse(w.sdp);for(const C of H){const{kind:A,rtpParameters:M}=C,j=A,U=p.media.find(z=>String(z.mid)===j);v.applyCodecParameters({offerRtpParameters:M,answerMediaObject:U})}w={type:"answer",sdp:E.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),F.debug("receive() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w);for(const C of H){const{kind:A,trackId:M,rtpParameters:j}=C,U=A,z=M,W=this._pc.getReceivers().find(Z=>Z.track&&Z.track.id===z);if(!W)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(z,{mid:U,rtpParameters:j,rtpReceiver:W}),x.push({localId:z,track:W.track,rtpReceiver:W})}return x}async stopReceiving(H){this.assertRecvDirection();for(const w of H){F.debug("stopReceiving() [localId:%s]",w);const{mid:p,rtpParameters:C}=this._mapRecvLocalIdInfo.get(w)??{};this._mapRecvLocalIdInfo.delete(w),this._remoteSdp.planBStopReceiving({mid:p,offerRtpParameters:C})}const x={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const y=await this._pc.createAnswer();F.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",y),await this._pc.setLocalDescription(y)}async getReceiverStats(H){this.assertRecvDirection();const{rtpReceiver:x}=this._mapRecvLocalIdInfo.get(H)??{};if(!x)throw new Error("associated RTCRtpReceiver not found");return x.getStats()}async pauseReceiving(H){}async resumeReceiving(H){}async receiveDataChannel({sctpStreamParameters:H,label:x,protocol:y}){this.assertRecvDirection();const{streamId:w,ordered:p,maxPacketLifeTime:C,maxRetransmits:A}=H,M={negotiated:!0,id:w,ordered:p,maxPacketLifeTime:C,maxRetransmits:A,protocol:y};F.debug("receiveDataChannel() [options:%o]",M);const j=this._pc.createDataChannel(x,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const U={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",U),await this._pc.setRemoteDescription(U);const z=await this._pc.createAnswer();if(!this._transportReady){const W=E.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W})}F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:j}}async setupTransport({localDtlsRole:H,localSdpObject:x}){x||(x=E.parse(this._pc.localDescription.sdp));const y=v.extractDtlsParameters({sdpObject:x});y.role=H,this._remoteSdp.updateDtlsRole(H==="client"?"server":"client"),await new Promise((w,p)=>{this.safeEmit("@connect",{dtlsParameters:y},w,p)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}k.Safari11=P},9746:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0});const E=d(6697);k.default=function(_){return typeof _=="string"&&E.default.test(_)}},9792:(I,k,d)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.Producer=void 0;const E=d(2994),_=d(3953),b=d(4893),T=new E.Logger("Producer");class v extends _.EnhancedEventEmitter{_id;_localId;_closed=!1;_rtpSender;_track;_kind;_rtpParameters;_paused;_maxSpatialLayer;_stopTracks;_disableTrackOnPause;_zeroRtpOnPause;_appData;_observer=new _.EnhancedEventEmitter;constructor({id:R,localId:g,rtpSender:F,track:m,rtpParameters:P,stopTracks:S,disableTrackOnPause:H,zeroRtpOnPause:x,appData:y}){super(),T.debug("constructor()"),this._id=R,this._localId=g,this._rtpSender=F,this._track=m,this._kind=m.kind,this._rtpParameters=P,this._paused=!!H&&!m.enabled,this._maxSpatialLayer=void 0,this._stopTracks=S,this._disableTrackOnPause=H,this._zeroRtpOnPause=x,this._appData=y??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(R){this._appData=R}get observer(){return this._observer}close(){this._closed||(T.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(T.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new b.InvalidStateError("closed");return new Promise((R,g)=>{this.safeEmit("@getstats",R,g)})}pause(){T.debug("pause()"),this._closed?T.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((R,g)=>{this.safeEmit("@pause",R,g)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){T.debug("resume()"),this._closed?T.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((R,g)=>{this.safeEmit("@resume",R,g)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:R}){if(T.debug("replaceTrack() [track:%o]",R),this._closed){if(R&&this._stopTracks)try{R.stop()}catch{}throw new b.InvalidStateError("closed")}if(R&&R.readyState==="ended")throw new b.InvalidStateError("track ended");R!==this._track?(await new Promise((g,F)=>{this.safeEmit("@replacetrack",R,g,F)}),this.destroyTrack(),this._track=R,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):T.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(R){if(this._closed)throw new b.InvalidStateError("closed");if(this._kind!=="video")throw new b.UnsupportedError("not a video Producer");if(typeof R!="number")throw new TypeError("invalid spatialLayer");R!==this._maxSpatialLayer&&(await new Promise((g,F)=>{this.safeEmit("@setmaxspatiallayer",R,g,F)}).catch(()=>{}),this._maxSpatialLayer=R)}async setRtpEncodingParameters(R){if(this._closed)throw new b.InvalidStateError("closed");if(typeof R!="object")throw new TypeError("invalid params");await new Promise((g,F)=>{this.safeEmit("@setrtpencodingparameters",R,g,F)})}onTrackEnded(){T.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}k.Producer=v}},h={};function N(I){var k=h[I];if(k!==void 0)return k.exports;var d=h[I]={exports:{}};return o[I].call(d.exports,d,d.exports,N),d.exports}N.amdO={},N.n=I=>{var k=I&&I.__esModule?()=>I.default:()=>I;return N.d(k,{a:k}),k},N.d=(I,k)=>{for(var d in k)N.o(k,d)&&!N.o(I,d)&&Object.defineProperty(I,d,{enumerable:!0,get:k[d]})},N.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),N.o=(I,k)=>Object.prototype.hasOwnProperty.call(I,k),N.r=I=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})};var B={};return(()=>{N.r(B),N.d(B,{CameraDeviceInfo:()=>Sc,DeviceInfo:()=>Ks,ExternalE2EEKeyProvider:()=>tr.l,MicrophoneDeviceInfo:()=>Bc,VideoSDK:()=>Xr,ZujoSDK:()=>zr});var I=N(2284),k=N(467),d=N(3029),E=N(2901),_=N(4467),b=N(4756),T=N.n(b),v=N(6880),f=N.n(v);function R($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function g($){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?R(Object(Q),!0).forEach(function(de){(0,_.A)($,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Q)):R(Object(Q)).forEach(function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Q,de))})}return $}function F($){return"Minified Redux error #"+$+"; visit https://redux.js.org/Errors?code="+$+" for the full message or use the non-minified dev environment for full errors. "}var m=typeof Symbol=="function"&&Symbol.observable||"@@observable",P=function(){return Math.random().toString(36).substring(7).split("").join(".")},S={INIT:"@@redux/INIT"+P(),REPLACE:"@@redux/REPLACE"+P(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+P()}};function H($){if(typeof $!="object"||$===null)return!1;for(var K=$;Object.getPrototypeOf(K)!==null;)K=Object.getPrototypeOf(K);return Object.getPrototypeOf($)===K}function x($,K,Q){var de;if(typeof K=="function"&&typeof Q=="function"||typeof Q=="function"&&typeof arguments[3]=="function")throw new Error(F(0));if(typeof K=="function"&&Q===void 0&&(Q=K,K=void 0),Q!==void 0){if(typeof Q!="function")throw new Error(F(1));return Q(x)($,K)}if(typeof $!="function")throw new Error(F(2));var Se=$,_e=K,be=[],Ve=be,xe=!1;function Ae(){Ve===be&&(Ve=be.slice())}function Ke(){if(xe)throw new Error(F(3));return _e}function $e(et){if(typeof et!="function")throw new Error(F(4));if(xe)throw new Error(F(5));var ue=!0;return Ae(),Ve.push(et),function(){if(ue){if(xe)throw new Error(F(6));ue=!1,Ae();var me=Ve.indexOf(et);Ve.splice(me,1),be=null}}}function Ne(et){if(!H(et))throw new Error(F(7));if(et.type===void 0)throw new Error(F(8));if(xe)throw new Error(F(9));try{xe=!0,_e=Se(_e,et)}finally{xe=!1}for(var ue=be=Ve,me=0;me<ue.length;me++)(0,ue[me])();return et}return Ne({type:S.INIT}),(de={dispatch:Ne,subscribe:$e,getState:Ke,replaceReducer:function(et){if(typeof et!="function")throw new Error(F(10));Se=et,Ne({type:S.REPLACE})}})[m]=function(){var et,ue=$e;return(et={subscribe:function(me){if(typeof me!="object"||me===null)throw new Error(F(11));function Me(){me.next&&me.next(Ke())}return Me(),{unsubscribe:ue(Me)}}})[m]=function(){return this},et},de}function y(){for(var $=arguments.length,K=new Array($),Q=0;Q<$;Q++)K[Q]=arguments[Q];return K.length===0?function(de){return de}:K.length===1?K[0]:K.reduce(function(de,Se){return function(){return de(Se.apply(void 0,arguments))}})}function w(){for(var $=arguments.length,K=new Array($),Q=0;Q<$;Q++)K[Q]=arguments[Q];return function(de){return function(){var Se=de.apply(void 0,arguments),_e=function(){throw new Error(F(15))},be={getState:Se.getState,dispatch:function(){return _e.apply(void 0,arguments)}},Ve=K.map(function(xe){return xe(be)});return _e=y.apply(void 0,Ve)(Se.dispatch),g(g({},Se),{},{dispatch:_e})}}}function p($){return function(K){var Q=K.dispatch,de=K.getState;return function(Se){return function(_e){return typeof _e=="function"?_e(Q,de,$):Se(_e)}}}}var C=p();C.withExtraArgument=p;const A=C;var M=N(2211),j=N.n(M);function U($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function z($){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?U(Object(Q),!0).forEach(function(de){(0,_.A)($,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Q)):U(Object(Q)).forEach(function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Q,de))})}return $}var W={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const Z=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_URL":var Q=K.payload.url;return z(z({},$),{},{url:Q});case"SET_ROOM_STATE":var de=K.payload.state;return z(z({},$),{},de==="connected"?{state:de}:{state:de,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var Se=K.payload.peerId;return z(z({},$),{},{activeSpeakerId:Se});case"SET_ROOM_STATS_PEER_ID":var _e=K.payload.peerId;return $.statsPeerId===_e?z(z({},$),{},{statsPeerId:null}):z(z({},$),{},{statsPeerId:_e});case"SET_FACE_DETECTION":var be=K.payload;return z(z({},$),{},{faceDetection:be});case"REMOVE_PEER":var Ve=K.payload.peerId,xe=z({},$);return Ve&&Ve===$.activeSpeakerId&&(xe.activeSpeakerId=null),Ve&&Ve===$.statsPeerId&&(xe.statsPeerId=null),xe;default:return $}};function ce($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function J($){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?ce(Object(Q),!0).forEach(function(de){(0,_.A)($,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Q)):ce(Object(Q)).forEach(function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Q,de))})}return $}var Ee={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const Ce=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ee,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?J(J({},$),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):$;case"SET_ME":var Q=K.payload,de=Q.peerId,Se=Q.displayName,_e=Q.displayNameSet,be=Q.device;return J(J({},$),{},{id:de,displayName:Se,displayNameSet:_e,device:be});case"SET_MEDIA_CAPABILITIES":var Ve=K.payload,xe=Ve.canSendMic,Ae=Ve.canSendWebcam;return J(J({},$),{},{canSendMic:xe,canSendWebcam:Ae});case"SET_CAN_CHANGE_WEBCAM":var Ke=K.payload;return J(J({},$),{},{canChangeWebcam:Ke});case"SET_WEBCAM_IN_PROGRESS":var $e=K.payload.flag;return J(J({},$),{},{webcamInProgress:$e});case"SET_SHARE_IN_PROGRESS":var Ne=K.payload.flag;return J(J({},$),{},{shareInProgress:Ne});case"SET_DISPLAY_NAME":var et=K.payload.displayName;return et||(et=$.displayName),J(J({},$),{},{displayName:et,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var ue=K.payload.enabled;return J(J({},$),{},{audioOnly:ue});case"SET_AUDIO_ONLY_IN_PROGRESS":var me=K.payload.flag;return J(J({},$),{},{audioOnlyInProgress:me});case"SET_AUDIO_MUTED_STATE":var Me=K.payload.enabled;return J(J({},$),{},{audioMuted:Me});case"SET_RESTART_ICE_IN_PROGRESS":var qe=K.payload.flag;return J(J({},$),{},{restartIceInProgress:qe});default:return $}};function Re($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function ye($){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?Re(Object(Q),!0).forEach(function(de){(0,_.A)($,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Q)):Re(Object(Q)).forEach(function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Q,de))})}return $}var Te={};const He=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:$;case"ADD_PRODUCER":var Q=K.payload.producer;return ye(ye({},$),{},(0,_.A)({},Q.id,Q));case"REMOVE_PRODUCER":var de=K.payload.producerId,Se=ye({},$);return delete Se[de],Se;case"SET_PRODUCER_PAUSED":var _e=K.payload.producerId,be=ye(ye({},$[_e]),{},{paused:!0});return ye(ye({},$),{},(0,_.A)({},_e,be));case"SET_PRODUCER_RESUMED":var Ve=K.payload.producerId,xe=ye(ye({},$[Ve]),{},{paused:!1});return ye(ye({},$),{},(0,_.A)({},Ve,xe));case"SET_PRODUCER_TRACK":var Ae=K.payload,Ke=Ae.producerId,$e=Ae.track,Ne=ye(ye({},$[Ke]),{},{track:$e});return ye(ye({},$),{},(0,_.A)({},Ke,Ne));case"SET_PRODUCER_SCORE":var et=K.payload,ue=et.producerId,me=et.score,Me=$[ue];if(!Me)return $;var qe=ye(ye({},Me),{},{score:me});return ye(ye({},$),{},(0,_.A)({},ue,qe));default:return $}};function we($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function Je($){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?we(Object(Q),!0).forEach(function(de){(0,_.A)($,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Q)):we(Object(Q)).forEach(function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Q,de))})}return $}var Be={};const nt=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Be,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:$;case"ADD_DATA_PRODUCER":var Q=K.payload.dataProducer;return Je(Je({},$),{},(0,_.A)({},Q.id,Q));case"REMOVE_DATA_PRODUCER":var de=K.payload.dataProducerId,Se=Je({},$);return delete Se[de],Se;default:return $}};var Qe=N(5458);function Ze($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function Ht($){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?Ze(Object(Q),!0).forEach(function(de){(0,_.A)($,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Q)):Ze(Object(Q)).forEach(function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Q,de))})}return $}var or={};function Nr($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function jn($){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?Nr(Object(Q),!0).forEach(function(de){(0,_.A)($,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Q)):Nr(Object(Q)).forEach(function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Q,de))})}return $}var cr={};function Gn($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function Un($){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?Gn(Object(Q),!0).forEach(function(de){(0,_.A)($,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Q)):Gn(Object(Q)).forEach(function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Q,de))})}return $}var Le={},je=[];const Ge=function($){for(var K=Object.keys($),Q={},de=0;de<K.length;de++){var Se=K[de];typeof $[Se]=="function"&&(Q[Se]=$[Se])}var _e,be=Object.keys(Q);try{(function(Ve){Object.keys(Ve).forEach(function(xe){var Ae=Ve[xe];if(Ae(void 0,{type:S.INIT})===void 0)throw new Error(F(12));if(Ae(void 0,{type:S.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(F(13))})})(Q)}catch(Ve){_e=Ve}return function(Ve,xe){if(Ve===void 0&&(Ve={}),_e)throw _e;for(var Ae=!1,Ke={},$e=0;$e<be.length;$e++){var Ne=be[$e],et=Q[Ne],ue=Ve[Ne],me=et(ue,xe);if(me===void 0)throw xe&&xe.type,new Error(F(14));Ke[Ne]=me,Ae=Ae||me!==ue}return(Ae=Ae||be.length!==Object.keys(Ve).length)?Ke:Ve}}({room:Z,me:Ce,producers:He,dataProducers:nt,peers:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:or,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:$;case"ADD_PEER":var Q=K.payload.peer;return Ht(Ht({},$),{},(0,_.A)({},Q.id,Q));case"REMOVE_PEER":var de=K.payload.peerId,Se=Ht({},$);return delete Se[de],Se;case"SET_PEER_DISPLAY_NAME":var _e=K.payload,be=_e.displayName,Ve=$[_e.peerId];if(!Ve)throw new Error("no Peer found");var xe=Ht(Ht({},Ve),{},{displayName:be});return Ht(Ht({},$),{},(0,_.A)({},xe.id,xe));case"ADD_CONSUMER":var Ae=K.payload,Ke=Ae.consumer,$e=$[Ae.peerId];if(!$e)return Ht({},$);var Ne=[].concat((0,Qe.A)($e.consumers),[Ke.id]),et=Ht(Ht({},$e),{},{consumers:Ne});return Ht(Ht({},$),{},(0,_.A)({},et.id,et));case"REMOVE_CONSUMER":var ue=K.payload,me=ue.consumerId,Me=$[ue.peerId];if(!Me)return $;var qe=Me.consumers.indexOf(me);if(qe===-1)return Ht({},$);var tt=Me.consumers.slice();tt.splice(qe,1);var Jt=Ht(Ht({},Me),{},{consumers:tt});return Ht(Ht({},$),{},(0,_.A)({},Jt.id,Jt));case"ADD_DATA_CONSUMER":var vt=K.payload,Rt=vt.dataConsumer,xn=vt.peerId;if(!xn)return $;var ct=$[xn];if(!ct)return Ht({},$);var Ue=[].concat((0,Qe.A)(ct.dataConsumers),[Rt.id]),yt=Ht(Ht({},ct),{},{dataConsumers:Ue});return Ht(Ht({},$),{},(0,_.A)({},yt.id,yt));case"REMOVE_DATA_CONSUMER":var fn=K.payload,nn=fn.dataConsumerId,un=fn.peerId;if(!un)return $;var Jn=$[un];if(!Jn)return $;var Rr=Jn.dataConsumers.indexOf(nn);if(Rr===-1)return Ht({},$);var _n=Jn.dataConsumers.slice();_n.splice(Rr,1);var dn=Ht(Ht({},Jn),{},{dataConsumers:_n});return Ht(Ht({},$),{},(0,_.A)({},dn.id,dn));default:return $}},consumers:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cr,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:$;case"ADD_CONSUMER":var Q=K.payload.consumer;return jn(jn({},$),{},(0,_.A)({},Q.id,Q));case"REMOVE_CONSUMER":var de=K.payload.consumerId,Se=jn({},$);return delete Se[de],Se;case"SET_CONSUMER_PAUSED":var _e,be=K.payload,Ve=be.consumerId,xe=be.originator,Ae=$[Ve];return _e=jn(jn({},Ae),{},xe==="local"?{locallyPaused:!0,paused:!0}:{remotelyPaused:!0,paused:!0}),jn(jn({},$),{},(0,_.A)({},Ve,_e));case"SET_CONSUMER_RESUMED":var Ke,$e=K.payload,Ne=$e.consumerId,et=$e.originator,ue=$[Ne];return Ke=jn(jn({},ue),{},et==="local"?{locallyPaused:!1,paused:!1}:{remotelyPaused:!1,paused:!1}),jn(jn({},$),{},(0,_.A)({},Ne,Ke));case"SET_CONSUMER_CURRENT_LAYERS":var me=K.payload,Me=me.consumerId,qe=me.spatialLayer,tt=me.temporalLayer,Jt=jn(jn({},$[Me]),{},{currentSpatialLayer:qe,currentTemporalLayer:tt});return jn(jn({},$),{},(0,_.A)({},Me,Jt));case"SET_CONSUMER_PREFERRED_LAYERS":var vt=K.payload,Rt=vt.consumerId,xn=vt.spatialLayer,ct=vt.temporalLayer,Ue=jn(jn({},$[Rt]),{},{preferredSpatialLayer:xn,preferredTemporalLayer:ct});return jn(jn({},$),{},(0,_.A)({},Rt,Ue));case"SET_CONSUMER_PRIORITY":var yt=K.payload,fn=yt.consumerId,nn=yt.priority,un=jn(jn({},$[fn]),{},{priority:nn});return jn(jn({},$),{},(0,_.A)({},fn,un));case"SET_CONSUMER_TRACK":var Jn=K.payload,Rr=Jn.consumerId,_n=Jn.track,dn=jn(jn({},$[Rr]),{},{track:_n});return jn(jn({},$),{},(0,_.A)({},Rr,dn));case"SET_CONSUMER_SCORE":var wr=K.payload,mr=wr.consumerId,Yn=wr.score,In=$[mr];if(!In)return $;var gn=jn(jn({},In),{},{score:Yn});return jn(jn({},$),{},(0,_.A)({},mr,gn));default:return $}},dataConsumers:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:$;case"ADD_DATA_CONSUMER":var Q=K.payload.dataConsumer;return Un(Un({},$),{},(0,_.A)({},Q.id,Q));case"REMOVE_DATA_CONSUMER":var de=K.payload.dataConsumerId,Se=Un({},$);return delete Se[de],Se;default:return $}},notifications:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:je,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"ADD_NOTIFICATION":var Q=K.payload.notification;return[].concat((0,Qe.A)($),[Q]);case"REMOVE_NOTIFICATION":var de=K.payload.notificationId;return $.filter(function(Se){return Se.id!==de});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return $}}});var Qt=N(1919),Ft=N(7007),xt=N(296),pn=(N(1919).default,(0,E.A)(function $(){(0,d.A)(this,$),this.roomClient=null})),Ln=new(function(){function $(){(0,d.A)(this,$),$.instance||($.instance=new pn)}return(0,E.A)($,[{key:"getInstance",value:function(){return $.instance}}])}());Object.freeze(Ln);var Bt=Ln.getInstance(),lr="state",Fr=function(){return(0,E.A)(function $(K){(0,d.A)(this,$),(0,_.A)(this,"pausedBy",void 0),this.id=K.id,this.kind=K.track.kind,this.codec=K.codec,this.track=K.track,this.producerOrConsumer=K.instance,K.appData&&K.appData.share===!0&&K.track.kind==="video"&&(this.kind="share"),K.appData&&K.appData.share===!0&&K.track.kind==="audio"&&(this.kind="shareAudio"),this.rtpSender=K.rtpSender,this.rtpReceiver=K.rtpReceiver,this.eventEmitter=new Ft},[{key:"pause",value:function(){Bt.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){Bt.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"handleStateChanged",value:function($){var K=$.state;$.streamId,this.eventEmitter.emit(lr,{state:K,timestamp:new Date().getTime()})}},{key:"paused",get:function(){return this.producerOrConsumer.paused}},{key:"on",value:function($,K){if($!==lr)throw new Error("Invalid event type from STREAM onn");this.eventEmitter.on($,K)}},{key:"off",value:function($,K){if($!==lr)throw new Error("Invalid event type from STREAM off");this.eventEmitter.off($,K)}}])}(),kr=N(1803);function Vr($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function Hr($,K){var Q=typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"];if(!Q){if(Array.isArray($)||(Q=function(xe,Ae){if(xe){if(typeof xe=="string")return Or(xe,Ae);var Ke={}.toString.call(xe).slice(8,-1);return Ke==="Object"&&xe.constructor&&(Ke=xe.constructor.name),Ke==="Map"||Ke==="Set"?Array.from(xe):Ke==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ke)?Or(xe,Ae):void 0}}($))||K){Q&&($=Q);var de=0,Se=function(){};return{s:Se,n:function(){return de>=$.length?{done:!0}:{done:!1,value:$[de++]}},e:function(xe){throw xe},f:Se}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _e,be=!0,Ve=!1;return{s:function(){Q=Q.call($)},n:function(){var xe=Q.next();return be=xe.done,xe},e:function(xe){Ve=!0,_e=xe},f:function(){try{be||Q.return==null||Q.return()}finally{if(Ve)throw _e}}}}function Or($,K){(K==null||K>$.length)&&(K=$.length);for(var Q=0,de=Array(K);Q<K;Q++)de[Q]=$[Q];return de}var Gr="stream-enabled",ga="stream-disabled",ta="media-status-changed",oa="video-quality-changed",Nn="stream-paused",Ha="stream-resumed",Ca="producer-added",Kr="producer-removed",hr="consumer-added",at="consumer-removed",ut="e2ee-state-change",$t=function(){return(0,E.A)(function _e(be){var Ve=this;(0,d.A)(this,_e),(0,_.A)(this,"captureImage",(0,k.A)(T().mark(function xe(){var Ae,Ke,$e,Ne,et,ue,me,Me,qe,tt,Jt=arguments;return T().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:Ke=(Ae=Jt.length>0&&Jt[0]!==void 0?Jt[0]:{}).height,$e=Ae.width,vt.prev=1,Ne=(0,Qe.A)(Ve.streams.values()),et=Hr(Ne),vt.prev=2,me=T().mark(function Rt(){var xn,ct,Ue,yt,fn,nn;return T().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:if((xn=ue.value).kind!="video"){un.next=4;break}return un.prev=1,(ct=new MediaStream).addTrack(xn.track),(Ue=document.createElement("video")).srcObject=ct,Ue.playsInline=!0,(yt=document.createElement("canvas")).id="canvasId",un.next=2,new Promise(function(Jn,Rr){Ue.addEventListener("loadeddata",(0,k.A)(T().mark(function _n(){var dn,wr,mr,Yn,In,gn,Lr;return T().wrap(function(ha){for(;;)switch(ha.prev=ha.next){case 0:return dn=Ue.videoWidth,wr=Ue.videoHeight,mr=16/9,Ke==null&&$e==null&&(Ke=wr,$e=dn),Ke==null&&Ke==null||(Ke<=0||Ke>wr)&&(Ke=wr),$e==null&&$e==null||($e<=0||$e>dn)&&($e=dn),Ke==null&&(Ke=$e/mr),$e==null&&($e=Ke*mr),yt.width=$e,yt.height=Ke,ha.prev=1,ha.next=2,Ue.play();case 2:document.body.appendChild(Ue),Yn=(yt.width-dn*mr)/2,In=(yt.height-wr*mr)/2,yt.getContext("2d").clearRect(0,0,Yn/2,In/2),yt.getContext("2d").drawImage(Ue,0,0),gn=yt.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(yt),document.body.removeChild(yt),document.body.removeChild(Ue),Jn(gn),ha.next=4;break;case 3:ha.prev=3,Lr=ha.catch(1),Rr(Lr),console.log("error in video",Lr);case 4:case"end":return ha.stop()}},_n,null,[[1,3]])})))});case 2:return fn=un.sent,un.abrupt("return",{v:fn});case 3:un.prev=3,nn=un.catch(1),console.error("err on image capture",nn);case 4:case"end":return un.stop()}},Rt,null,[[1,3]])}),et.s();case 3:if((ue=et.n()).done){vt.next=6;break}return vt.delegateYield(me(),"t0",4);case 4:if(!(Me=vt.t0)){vt.next=5;break}return vt.abrupt("return",Me.v);case 5:vt.next=3;break;case 6:vt.next=8;break;case 7:vt.prev=7,qe=vt.catch(2),et.e(qe);case 8:return vt.prev=8,et.f(),vt.finish(8);case 9:throw new Error("Camera must be on to capture an image");case 10:vt.prev=10,tt=vt.catch(1),console.error("Error in captureImage::",tt),Bt.roomClient._videosdkLogs&&Bt.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:tt.message}});case 11:case"end":return vt.stop()}},xe,null,[[1,10],[2,7,8,9]])}))),this.id=be.id,this.displayName=be.displayName,this.streams=new Map,this.quality="low",this.screenShareQuality="high",this.local=be.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=be.mode,this.metaData=be.metaData,this.eventEmitter=new Ft.EventEmitter,this.participantVideoElements=new Map,this.participantAudioElements=new Map,this.videoVisible=!1,this.height=null,this.width=null,this.resizeObserver=null},[{key:"_setPinState",value:function(_e){_e.cam!=null&&(this.pinState.cam=_e.cam),_e.share!=null&&(this.pinState.share=_e.share)}},{key:"remove",value:function(){Bt.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){Bt.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){Bt.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Bt.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Bt.roomClient.disablePeerWebcam(this.id)}},{key:"getTransportStats",value:function(){return Bt.roomClient.getTransportRemoteStats({participantId:this.id})}},{key:"handleStreamStateChanged",value:function(_e){var be=_e.state,Ve=(_e.peerId,_e.streamId),xe=this.streams.get(Ve);xe!=null&&(xe.kind!=="video"&&xe.kind!=="share"||xe.handleStateChanged({state:be,streamId:Ve}))}},{key:"addStream",value:function(_e){if(_e){this.streams.set(_e.id,_e),_e.kind!=="video"||this.local||Bt.roomClient.setConsumerQuality(_e.id,this.quality);var be=new MediaStream;be.addTrack(_e.track);try{if(["video","share"].includes(_e.kind)){var Ve=this.participantVideoElements.get(_e.kind);if(Ve){var xe={display:"block",objectFit:_e.kind==="share"?"contain":"cover",width:"100%"};Object.assign(Ve.style,xe),Ve.srcObject=be,Ve.play().catch(function(Ke){console.error("Failed to play ".concat(_e.kind," stream:"),Ke)}),(_e.kind==="share"||_e.kind==="video"&&this.videoVisible)&&_e.resume()}}if((_e.kind==="audio"||_e.kind==="shareAudio")&&!this.local){var Ae=this.participantAudioElements.get(_e.kind);Ae&&(Ae.srcObject=be,Ae.play().catch(function(Ke){console.error("Failed to play ".concat(_e.kind," audio:"),Ke)}))}this.eventEmitter.emit(Gr,_e),_e.kind==="video"&&!this.local&&this.height&&this.width&&this.setViewPort(this.width,this.height)}catch(Ke){console.error("Error in addStream:",Ke)}}else console.warn("Attempted to add null/undefined stream")}},{key:"updateStream",value:function(_e){this.streams.set(_e.id,_e),this.eventEmitter.emit(Gr,_e)}},{key:"deleteStream",value:function(_e){var be=this.streams.get(_e);if(be!=null){this.streams.delete(_e);var Ve={video:{collection:this.participantVideoElements,type:"video"},share:{collection:this.participantVideoElements,type:"share"},audio:{collection:this.participantAudioElements,type:"audio"},shareAudio:{collection:this.participantAudioElements,type:"shareAudio"}}[be.kind];if(Ve){var xe=Ve.collection.get(Ve.type);xe&&(xe.style.display="none")}return this.eventEmitter.emit(ga,be),be}}},{key:"streamResumed",value:function(_e){this.streams.get(_e)}},{key:"streamPaused",value:function(_e){this.streams.get(_e)}},{key:"updateParticipantMediaState",value:function(_e,be){_e=="audio"?this.micOn=be:_e=="video"&&(this.webcamOn=be),this.eventEmitter.emit(ta,{peerId:this.id,kind:_e,newStatus:be})}},{key:"handleParticipantPause",value:function(_e){if(_e!=null&&_e.consumerId){var be=this.streams.get(_e.consumerId);be?be.pausedBy="SUB_MANAGER":console.warn("Stream with consumerId ".concat(_e.consumerId," not found."))}this.eventEmitter.emit(Nn,{kind:_e?.kind,reason:_e?.reason})}},{key:"handleParticipantResume",value:function(_e){if(_e!=null&&_e.consumerId){var be=this.streams.get(_e.consumerId);be?be.pausedBy=void 0:console.warn("Stream with consumerId ".concat(_e.consumerId," not found."))}this.eventEmitter.emit(Ha,{kind:_e?.kind,reason:_e?.reason})}},{key:"handleE2EEStateChange",value:function(_e){_e==null||delete _e.peerId,this.eventEmitter.emit(ut,_e)}},{key:"videoQualityChanged",value:function(_e,be){this.eventEmitter.emit(oa,{peerId:this.id,prevQuality:_e,currentQuality:be})}},{key:"setQuality",value:function(_e){if(!this.local){if(typeof document<"u"&&this.resizeObserver){var be=document.querySelector("#f-".concat(this.id));be&&this.resizeObserver.unobserve(be)}this.quality=_e,(0,Qe.A)(this.streams.entries()).forEach(function(Ve){var xe=Ve[1];xe.kind==="video"&&Bt.roomClient.setConsumerQuality(xe.id,_e)})}}},{key:"setScreenShareQuality",value:function(_e){this.local||(this.screenShareQuality=_e,this.streams.forEach(function(be){be.kind==="share"&&Bt.roomClient.setConsumerScreenShareQuality(be.id,_e)}))}},{key:"setViewPort",value:function(_e,be){(0,Qe.A)(this.streams.entries()).forEach(function(Ve){var xe=Ve[1];xe.kind==="video"&&Bt.roomClient.setViewPort(xe.producerOrConsumer,_e,be)})}},{key:"pin",value:function(_e){switch(_e){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}Bt.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(_e){switch(_e){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}Bt.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(Se=(0,k.A)(T().mark(function _e(be){var Ve,xe,Ae;return T().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ve=be.meetingId,xe=be.payload,Ae=be.token,Ke.next=1,Bt.roomClient.switchPeerRoom({peerId:this.id,roomId:Ve,payload:xe,token:Ae});case 1:case"end":return Ke.stop()}},_e,this)})),function(_e){return Se.apply(this,arguments)})},{key:"getVideoStats",value:(de=(0,k.A)(T().mark(function _e(){var be,Ve,xe,Ae,Ke,$e;return T().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(!this.local){Ne.next=2;break}return Ne.next=1,Bt.roomClient.getVideoRemoteStats();case 1:return Ne.abrupt("return",Ne.sent);case 2:be=(0,Qe.A)(this.streams.entries()),Ve=Hr(be),Ne.prev=3,Ve.s();case 4:if((xe=Ve.n()).done){Ne.next=7;break}if(Ae=(0,xt.A)(xe.value,2),Ke=Ae[0],Ae[1].kind!="video"){Ne.next=6;break}return Ne.next=5,Bt.roomClient.getConsumerRemoteStats(Ke);case 5:return Ne.abrupt("return",Ne.sent);case 6:Ne.next=4;break;case 7:Ne.next=9;break;case 8:Ne.prev=8,$e=Ne.catch(3),Ve.e($e);case 9:return Ne.prev=9,Ve.f(),Ne.finish(9);case 10:case"end":return Ne.stop()}},_e,this,[[3,8,9,10]])})),function(){return de.apply(this,arguments)})},{key:"getShareStats",value:(Q=(0,k.A)(T().mark(function _e(){var be,Ve,xe,Ae,Ke,$e;return T().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(!this.local){Ne.next=2;break}return Ne.next=1,Bt.roomClient.getShareRemoteStats();case 1:return Ne.abrupt("return",Ne.sent);case 2:be=(0,Qe.A)(this.streams.entries()),Ve=Hr(be),Ne.prev=3,Ve.s();case 4:if((xe=Ve.n()).done){Ne.next=7;break}if(Ae=(0,xt.A)(xe.value,2),Ke=Ae[0],Ae[1].kind!="share"){Ne.next=6;break}return Ne.next=5,Bt.roomClient.getConsumerRemoteStats(Ke);case 5:return Ne.abrupt("return",Ne.sent);case 6:Ne.next=4;break;case 7:Ne.next=9;break;case 8:Ne.prev=8,$e=Ne.catch(3),Ve.e($e);case 9:return Ne.prev=9,Ve.f(),Ne.finish(9);case 10:case"end":return Ne.stop()}},_e,this,[[3,8,9,10]])})),function(){return Q.apply(this,arguments)})},{key:"getShareAudioStats",value:(K=(0,k.A)(T().mark(function _e(){var be,Ve,xe,Ae,Ke,$e;return T().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(!this.local){Ne.next=2;break}return Ne.next=1,Bt.roomClient.getShareAudioRemoteStats();case 1:return Ne.abrupt("return",Ne.sent);case 2:be=(0,Qe.A)(this.streams.entries()),Ve=Hr(be),Ne.prev=3,Ve.s();case 4:if((xe=Ve.n()).done){Ne.next=7;break}if(Ae=(0,xt.A)(xe.value,2),Ke=Ae[0],Ae[1].kind!="shareAudio"){Ne.next=6;break}return Ne.next=5,Bt.roomClient.getConsumerRemoteStats(Ke);case 5:return Ne.abrupt("return",Ne.sent);case 6:Ne.next=4;break;case 7:Ne.next=9;break;case 8:Ne.prev=8,$e=Ne.catch(3),Ve.e($e);case 9:return Ne.prev=9,Ve.f(),Ne.finish(9);case 10:case"end":return Ne.stop()}},_e,this,[[3,8,9,10]])})),function(){return K.apply(this,arguments)})},{key:"getAudioStats",value:($=(0,k.A)(T().mark(function _e(){var be,Ve,xe,Ae,Ke,$e;return T().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(this.micOn){Ne.next=1;break}return Ne.abrupt("return",[]);case 1:if(!this.local){Ne.next=3;break}return Ne.next=2,Bt.roomClient.getAudioRemoteStats();case 2:return Ne.abrupt("return",Ne.sent);case 3:be=(0,Qe.A)(this.streams.entries()),Ve=Hr(be),Ne.prev=4,Ve.s();case 5:if((xe=Ve.n()).done){Ne.next=8;break}if(Ae=(0,xt.A)(xe.value,2),Ke=Ae[0],Ae[1].kind!="audio"){Ne.next=7;break}return Ne.next=6,Bt.roomClient.getConsumerRemoteStats(Ke);case 6:return Ne.abrupt("return",Ne.sent);case 7:Ne.next=5;break;case 8:Ne.next=10;break;case 9:Ne.prev=9,$e=Ne.catch(4),Ve.e($e);case 10:return Ne.prev=10,Ve.f(),Ne.finish(10);case 11:case"end":return Ne.stop()}},_e,this,[[4,9,10,11]])})),function(){return $.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){Bt.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){Bt.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){Bt.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){Bt.roomClient.stopConsumingMicStreams(this.id)}},{key:"renderVideo",value:function(_e){for(var be,Ve=this,xe=_e.type,Ae=xe===void 0?"video":xe,Ke=_e.maxQuality,$e=Ke===void 0?"auto":Ke,Ne=_e.videostyle,et=Ne===void 0?{}:Ne,ue=_e.containerStyle,me=ue===void 0?{}:ue,Me=0,qe=(0,Qe.A)(this.streams.values());Me<qe.length;Me++){var tt=qe[Me];tt.kind==Ae&&(be=new MediaStream).addTrack(tt.track)}if(this.participantVideoElements.get(Ae)){if(be){var Jt=this.participantVideoElements.get(Ae);Jt&&(Jt.srcObject=be,Jt.play().catch(function(yt){return console.error("videoElem.play() failed",yt)}))}return this.participantVideoElements.get(Ae)}try{var vt=document.createElement("div");vt.classList.add("video-container","participant-video-".concat(this.id)),vt.setAttribute("id","f-".concat(this.id).concat(Ae==="share"?"-share":"")),vt.style.setProperty("position","relative"),Object.assign(vt.style,me);var Rt=document.createElement("video");if(Rt.setAttribute("id","v-".concat(this.id).concat(Ae==="share"?"-share":"")),Rt.setAttribute("playsinline",""),Rt.setAttribute("webkit-playsinline",""),Rt.setAttribute("x5-playsinline",""),Rt.playsinline=!0,Rt.muted=!0,Rt.autoplay=!0,Rt.onerror=function(yt){console.log(yt,"participant video error")},Object.assign(Rt.style,function(yt){for(var fn=1;fn<arguments.length;fn++){var nn=arguments[fn]!=null?arguments[fn]:{};fn%2?Vr(Object(nn),!0).forEach(function(un){(0,_.A)(yt,un,nn[un])}):Object.getOwnPropertyDescriptors?Object.defineProperties(yt,Object.getOwnPropertyDescriptors(nn)):Vr(Object(nn)).forEach(function(un){Object.defineProperty(yt,un,Object.getOwnPropertyDescriptor(nn,un))})}return yt}({width:"100%",height:"100%",objectFit:Ae==="share"?"contain":"cover"},et)),be&&(Rt.srcObject=be,Rt.play().then(function(yt){console.log("videoElem.play() success",yt)}).catch(function(yt){return console.error("videoElem.play() failed",yt)})),vt.appendChild(Rt),this.participantVideoElements.set(Ae,Rt),this.videoVisible=!1,!this.local&&Ae==="video"){var xn=(0,kr.sg)(function(yt){if(yt.length!=0)if(yt[yt.length-1].intersectionRatio>0){Ve.videoVisible=!0;for(var fn=0,nn=(0,Qe.A)(Ve.streams.values());fn<nn.length;fn++){var un=nn[fn];un.kind=="video"&&un.pausedBy!=="SUB_MANAGER"&&un.paused&&un.resume()}}else{Ve.videoVisible=!1;for(var Jn=0,Rr=(0,Qe.A)(Ve.streams.values());Jn<Rr.length;Jn++){var _n=Rr[Jn];_n.kind=="video"&&_n.pause()}}},500);if(new IntersectionObserver(xn,{root:null,rootMargin:"0px",threshold:0}).observe(vt),$e=="auto"&&Ae==="video"){var ct=(0,kr.sg)(function(yt){var fn=yt[0].contentRect,nn=fn.width,un=fn.height;nn>0&&un>0&&(Ve.height=un,Ve.width=nn,Ve.setViewPort(nn,un))},500),Ue=new ResizeObserver(ct);Ue.observe(vt),this.resizeObserver=Ue}}return Ae!=="video"||$e==="auto"||this.local||this.setQuality($e),vt}catch(yt){console.log("Render video Exception",yt)}}},{key:"renderAudio",value:function(_e){var be=_e.type,Ve=be===void 0?"audio":be;if(this.local)return null;try{if(this.participantAudioElements.get(Ve)){var xe=this.participantAudioElements.get(Ve),Ae=this.getAudioStream(Ve);return Ae&&xe&&(xe.srcObject=Ae,xe.play().catch(function(Ne){return console.error("Failed to play existing audio:",Ne)})),xe}var Ke=document.createElement("audio");Ke.setAttribute("id","a-".concat(this.id,"-").concat(Ve)),Ke.autoplay=!1,Ke.playsInline=!0,Ke.controls=!1,Ke.style.display="none",Ke.onerror=function(Ne){return console.log("Audio element error:",Ne)};var $e=this.getAudioStream(Ve);return $e&&(Ke.srcObject=$e,Ke.play().catch(function(Ne){return console.error("Failed to play new audio:",Ne)})),this.participantAudioElements.set(Ve,Ke),Ke}catch(Ne){return console.error("Render audio exception:",Ne),null}}},{key:"getAudioStream",value:function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"audio",be=(0,Qe.A)(this.streams.values()).find(function(xe){return xe.kind===_e});if(be){var Ve=new MediaStream;return Ve.addTrack(be.track),be.resume(),Ve}return null}},{key:"addProducer",value:function(_e){this.eventEmitter.emit(Ca,_e)}},{key:"removeProducer",value:function(_e){this.eventEmitter.emit(Kr,_e)}},{key:"addConsumer",value:function(_e){this.eventEmitter.emit(hr,_e)}},{key:"removeConsumer",value:function(_e){this.eventEmitter.emit(at,_e)}},{key:"on",value:function(_e,be){switch(_e){case Gr:case ga:case ta:case oa:case Nn:case Ha:case Ca:case Kr:case hr:case at:case ut:this.eventEmitter.on(_e,be);break;default:throw new Error("Invalid event type from participant onn")}}},{key:"off",value:function(_e,be){switch(_e){case Gr:case ga:case ta:case oa:case Nn:case Ha:case Ca:case Kr:case hr:case at:case ut:this.eventEmitter.off(_e,be);break;default:throw new Error("Invalid event type from participant off")}}}]);var $,K,Q,de,Se}(),Tt=N(388),tn=N(3954),Xt=N(5501),Xe={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"},Sn=N(2107);function Rn(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rn=function(){return!!$})()}function Zn($,K,Q){ur($,K),K.set($,Q)}function ur($,K){if(K.has($))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wt($,K){return $.get(Pn($,K))}function bt($,K,Q){return $.set(Pn($,K),Q),Q}function Pn($,K,Q){if(typeof $=="function"?$===K:$.has(K))return arguments.length<3?K:Q;throw new TypeError("Private element is not present on this object")}var kn="stream-enabled",bn="stream-disabled",Ar="character-joined",Sr="character-left",Dr="media-status-changed",Xn="video-quality-changed",qn="character-state-changed",ma="character-message",ca="user-message",Ta="data",Da="error",ss=new WeakMap,ai=new WeakMap,Ui=new WeakMap,os=new WeakMap,Ei=new WeakMap,Qi=new WeakMap,Zr=new WeakMap,Si=new WeakSet,Ai=function($){function K(xe){var Ae,Ke,$e,Ne;return(0,d.A)(this,K),Ke=this,$e=K,Ne=[{id:xe.id,displayName:xe.displayName,mode:Sn.nI.SEND_AND_RECV,metaData:xe.metaData}],$e=(0,tn.A)($e),function(et,ue){ur(et,ue),ue.add(et)}(Ae=(0,Tt.A)(Ke,Rn()?Reflect.construct($e,Ne||[],(0,tn.A)(Ke).constructor):$e.apply(Ke,Ne)),Si),Zn(Ae,ss,void 0),Zn(Ae,ai,void 0),Zn(Ae,Ui,void 0),Zn(Ae,os,void 0),Zn(Ae,Ei,void 0),Zn(Ae,Qi,void 0),Zn(Ae,Zr,void 0),(0,_.A)(Ae,"captureImage",(0,k.A)(T().mark(function et(){var ue,me=arguments;return T().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:throw(ue=me.length>0&&me[0]!==void 0?me[0]:{}).height,ue.width,new Error("captureImage method is not supported on character");case 1:case"end":return Me.stop()}},et)}))),bt(Ei,Ae,xe.interactionId||null),Ae.id=xe.id||null,bt(ss,Ae,xe.characterRole),bt(ai,Ae,xe.characterMode),bt(Ui,Ae,xe.knowledgeBases||[]),Ae.displayName=xe.displayName,bt(os,Ae,xe.language),bt(Qi,Ae,xe.state||Xe.CHARACTER_LISTENING),bt(Zr,Ae,xe.roomClient),Ae}return(0,Xt.A)(K,$),(0,E.A)(K,[{key:"join",value:(Ve=(0,k.A)(T().mark(function xe(){var Ae;return T().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.next=1,Wt(Zr,this).joinCharacter({interactionId:Wt(Ei,this),characterId:this.id,characterRole:Wt(ss,this),displayName:this.displayName,characterMode:Wt(ai,this),knowledgeBases:Wt(Ui,this),language:Wt(os,this),metaData:this.metaData});case 1:(Ae=Ke.sent)&&(this.id=Ae.characterId,this.displayName=Ae.displayName,bt(ai,this,Ae.characterMode),bt(ss,this,Ae.characterRole),bt(Ei,this,Ae.interactionId),bt(Ui,this,Ae.knowledgeBases),bt(os,this,Ae.language),Wt(Zr,this)._eventEmitter.emit("INIT_CHARACTER",this));case 2:case"end":return Ke.stop()}},xe,this)})),function(){return Ve.apply(this,arguments)})},{key:"leave",value:(be=(0,k.A)(T().mark(function xe(){return T().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=1,Wt(Zr,this).removeCharacter();case 1:case"end":return Ae.stop()}},xe,this)})),function(){return be.apply(this,arguments)})},{key:"remove",value:(_e=(0,k.A)(T().mark(function xe(){return T().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return Ae.stop()}},xe)})),function(){return _e.apply(this,arguments)})},{key:"sendMessage",value:(Se=(0,k.A)(T().mark(function xe(Ae){return T().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.next=1,Wt(Zr,this).sendCharacterMessage({interactionId:Wt(Ei,this),text:Ae});case 1:case"end":return Ke.stop()}},xe,this)})),function(xe){return Se.apply(this,arguments)})},{key:"handleCharacterStateChanged",value:function(xe){Object.keys(Xe).includes(xe.status)&&(Pn(Si,this,sn).call(this,xe.status),this.eventEmitter.emit(qn,xe))}},{key:"handleCharacterMessage",value:function(xe){this.eventEmitter.emit(ma,xe)}},{key:"interrupt",value:(de=(0,k.A)(T().mark(function xe(){return T().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=1,Wt(Zr,this).interruptCharacter({interactionId:Wt(Ei,this)});case 1:case"end":return Ae.stop()}},xe,this)})),function(){return de.apply(this,arguments)})},{key:"handleUserMessage",value:function(xe){this.eventEmitter.emit(ca,xe)}},{key:"handleCharacterData",value:function(xe){var Ae=xe.topic,Ke=xe.data;this.eventEmitter.emit(Ta,Ae,Ke)}},{key:"handleCharacterError",value:function(xe){var Ae=xe.data;this.eventEmitter.listenerCount(Da)>0&&this.eventEmitter.emit(Da,Ae)}},{key:"enableMic",value:function(){Wt(Zr,this).enablePeerMic(this.id)}},{key:"disableMic",value:function(){Wt(Zr,this).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Wt(Zr,this).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Wt(Zr,this).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(xe){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(Q=(0,k.A)(T().mark(function xe(Ae){return T().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:throw Ae.meetingId,Ae.payload,Ae.token,new Error("switchTo method is not supported on character");case 1:case"end":return Ke.stop()}},xe)})),function(xe){return Q.apply(this,arguments)})},{key:"pin",value:function(xe){throw new Error("pin method is not supported on character")}},{key:"on",value:function(xe,Ae){switch(xe){case kn:case bn:case Ar:case Sr:case Dr:case Xn:case qn:case ma:case ca:case Ta:case Da:this.eventEmitter.on(xe,Ae);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(xe,Ae){switch(xe){case kn:case bn:case Ar:case Sr:case Dr:case Xn:case qn:case ma:case ca:case Ta:case Da:this.eventEmitter.off(xe,Ae);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return Wt(Qi,this)}},{key:"knowledgeBases",get:function(){return Wt(Ui,this)}},{key:"characterMode",get:function(){return Wt(ai,this)}},{key:"characterRole",get:function(){return Wt(ss,this)}},{key:"interactionId",get:function(){return Wt(Ei,this)}},{key:"language",get:function(){return Wt(os,this)}}]);var Q,de,Se,_e,be,Ve}($t);function sn($){bt(Qi,this,$)}function $n($,K,Q){(function(de,Se){if(Se.has(de))throw new TypeError("Cannot initialize the same private elements twice on an object")})($,K),K.set($,Q)}function Bn($,K){return $.get(nr($,K))}function nr($,K,Q){if(typeof $=="function"?$===K:$.has(K))return arguments.length<3?K:Q;throw new TypeError("Private element is not present on this object")}var wn=new WeakMap,On=function(){return(0,E.A)(function K(Q,de){var Se,_e,be,Ve=Q.id,xe=Q.displayName;(0,d.A)(this,K),$n(this,wn,void 0),this.id=Ve,this.displayName=xe,_e=this,be=de,(Se=wn).set(nr(Se,_e),be)},[{key:"switchTo",value:($=(0,k.A)(T().mark(function K(Q){var de,Se,_e;return T().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return de=Q.meetingId,Se=Q.payload,_e=Q.token,be.next=1,Bt.roomClient.connectionSwitchPeerRoom({roomId:de,connectionRoomId:Bn(wn,this),payload:Se,peerId:this.id,token:_e});case 1:case"end":return be.stop()}},K,this)})),function(K){return $.apply(this,arguments)})}]);var $}(),jr="participant-joined",vr="participant-left",yr="chat-message",An=function(){return(0,E.A)(function K(Q,de){var Se=this;(0,d.A)(this,K),this.eventEmitter=new Ft.EventEmitter,this.id=Q,this.participants=new Map,de.forEach(function(_e){Se.participants.set(_e.id,new On(_e,Se.id))})},[{key:"participantJoin",value:function(K){var Q=new On(K,this.id);this.participants.set(K.id,Q),this.eventEmitter.emit(jr,Q)}},{key:"participantLeft",value:function(K){this.participants.delete(K),this.eventEmitter.emit(vr,K)}},{key:"sendChatMessage",value:function(K){Bt.roomClient.connectionSendChatMessage({roomId:this.id,message:K})}},{key:"sendChatMessageEvent",value:function(K){var Q=K.participantId,de=K.message;this.eventEmitter.emit(yr,{participantId:Q,message:de})}},{key:"end",value:($=(0,k.A)(T().mark(function K(){return T().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=1,Bt.roomClient.connectionEndMeeting({roomId:this.id});case 1:case"end":return Q.stop()}},K,this)})),function(){return $.apply(this,arguments)})},{key:"on",value:function(K,Q){switch(K){case jr:case vr:case yr:this.eventEmitter.on(K,Q);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(K,Q){switch(K){case jr:case vr:case yr:this.eventEmitter.off(K,Q);break;default:throw new Error("Invalid event type")}}}]);var $}(),Br=function(){return(0,E.A)(function $(K){var Q=K.roomId,de=K.peers,Se=K.payload;(0,d.A)(this,$),this.id=Q,this.payload=Se,this.meeting=new An(Q,de)},[{key:"close",value:function(){Bt.roomClient.closeConnection(this.id)}}])}();function Ea($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function ua($){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?Ea(Object(Q),!0).forEach(function(de){(0,_.A)($,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Q)):Ea(Object(Q)).forEach(function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Q,de))})}return $}function ya($,K){if(K.has($))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ja($,K){return $.get(Ba($,K))}function Ba($,K,Q){if(typeof $=="function"?$===K:$.has(K))return arguments.length<3?K:Q;throw new TypeError("Private element is not present on this object")}var Wa="error",Sa="meeting-joined",Qa="meeting-left",pi="participant-mode-changed",Is="participant-joined",Ji="participant-left",cs="speaker-changed",mi="presenter-changed",no="main-participant-changed",$s="chat-message",ws="entry-requested",js="entry-responded",ls="recording-state-changed",Xi="recording-started",us="recording-stopped",zo="livestream-state-changed",_r="livestream-started",xi="livestream-stopped",na="hls-state-changed",Hi="hls-started",Bs="hls-stopped",Wn="whiteboard-started",Oi="whiteboard-stopped",Fi="video-state-changed",qi="video-seeked",pr="mic-requested",Ma="webcam-requested",Di="stream-enabled",Ro="stream-disabled",ti="pin-state-changed",Es="connection-open",Ws="connection-close",Fa="switch-meeting",nc="meeting-state-changed",Mi="quality-limitation",Mr="paused-all-streams",Vi="resumed-all-streams",ni="transcription-state-changed",Ss="transcription-text",ko="character-joined",Co="character-left",zs="media-relay-started",on="media-relay-stopped",ge="media-relay-error",Pt="media-relay-request-response",Kn="media-relay-request-received",aa=new WeakMap,qa=new WeakSet,ii=function(){return(0,E.A)(function ue(me,Me,qe){var tt,Jt,vt,Rt,xn,ct=this;(0,d.A)(this,ue),ya(tt=this,Jt=qa),Jt.add(tt),function(Ue,yt,fn){ya(Ue,yt),yt.set(Ue,fn)}(this,aa,void 0),(0,_.A)(this,"pubSub",{publish:(xn=(0,k.A)(T().mark(function Ue(yt,fn,nn,un){return T().wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:if(un==null){Jn.next=1;break}if((0,I.A)(un)=="object"){Jn.next=1;break}throw new Error('"payload" can only be object.');case 1:return Jn.next=2,ct.roomClient.pubsubPublish(yt,fn,nn,un);case 2:case"end":return Jn.stop()}},Ue)})),function(Ue,yt,fn,nn){return xn.apply(this,arguments)}),subscribe:(Rt=(0,k.A)(T().mark(function Ue(yt,fn){var nn;return T().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:if(!ja(aa,ct).listeners(yt).includes(fn)){un.next=1;break}return un.abrupt("return");case 1:return un.next=2,ct.roomClient.pubsubSubscribe(yt);case 2:return nn=un.sent,ja(aa,ct).on(yt,fn),un.abrupt("return",nn);case 3:case"end":return un.stop()}},Ue)})),function(Ue,yt){return Rt.apply(this,arguments)}),unsubscribe:(vt=(0,k.A)(T().mark(function Ue(yt,fn){return T().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(ja(aa,ct).off(yt,fn),ja(aa,ct).listeners(yt).length!=0){nn.next=1;break}return nn.next=1,ct.roomClient.pubsubUnsubscribe(yt);case 1:case"end":return nn.stop()}},Ue)})),function(Ue,yt){return vt.apply(this,arguments)})}),(0,_.A)(this,"uploadBase64File",function(){var Ue=(0,k.A)(T().mark(function yt(fn){var nn,un,Jn,Rr,_n,dn,wr,mr;return T().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:if(nn=fn.base64Data,un=fn.token,Jn=fn.fileName,Yn.prev=1,nn&&un&&Jn){Yn.next=2;break}throw new Error("please provide base64Data, token and fileName");case 2:return Rr="https://".concat(ct.baseUrl,"/base64-upload?roomId=").concat(ct.id),_n={fileName:Jn,base64Data:nn},Yn.next=3,fetch(Rr,{method:"POST",body:JSON.stringify(_n),headers:{"Content-Type":"application/json",Authorization:un}});case 3:return dn=Yn.sent,Yn.next=4,dn.json();case 4:return wr=Yn.sent,Yn.abrupt("return",wr.url);case 5:Yn.prev=5,mr=Yn.catch(1),console.error("Error while Uploading Base64 File::",mr),ct.roomClient._videosdkLogs&&ct.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:mr.message}});case 6:case"end":return Yn.stop()}},yt,null,[[1,5]])}));return function(yt){return Ue.apply(this,arguments)}}()),(0,_.A)(this,"fetchBase64File",function(){var Ue=(0,k.A)(T().mark(function yt(fn){var nn,un,Jn,Rr,_n,dn;return T().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:if(nn=fn.url,un=fn.token,wr.prev=1,nn&&un){wr.next=2;break}throw new Error("please provide url and token");case 2:return wr.next=3,fetch(nn,{headers:{Authorization:un}});case 3:return Jn=wr.sent,wr.next=4,Jn.arrayBuffer();case 4:return Rr=wr.sent,_n=window.btoa(new Uint8Array(Rr).reduce(function(mr,Yn){return mr+String.fromCharCode(Yn)},"")),wr.abrupt("return",_n);case 5:wr.prev=5,dn=wr.catch(1),console.error("Error while fetching Base64 File::",dn),ct.roomClient._videosdkLogs&&ct.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:dn.message}});case 6:case"end":return wr.stop()}},yt,null,[[1,5]])}));return function(yt){return Ue.apply(this,arguments)}}()),this.id=me,this.roomClient=qe,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=Me,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new Ft.EventEmitter,function(Ue,yt,fn){Ue.set(Ba(Ue,yt),fn)}(aa,this,new Ft.EventEmitter),this.eventEmitter.setMaxListeners(9999),ja(aa,this).setMaxListeners(9999),this.roomClient.on("ERROR",function(Ue){return ct.handleError(Ue)}),this.roomClient.on("ADD_PEER",function(Ue){return ct.handlePeerAdd(Ue)}),this.roomClient.on("REMOVE_PEER",function(Ue){return ct.handlePeerRemove(Ue)}),this.roomClient.on("STREAM_STATE_CHANGED",function(Ue){return ct.handleStreamState(Ue)}),this.roomClient.on("ADD_PRODUCER",function(Ue){return ct.handleProducerAdd(Ue)}),this.roomClient.on("UPDATE_PRODUCER",function(Ue){return ct.handleUpdateProducer(Ue)}),this.roomClient.on("REMOVE_PRODUCER",function(Ue){return ct.handleProducerRemove(Ue)}),this.roomClient.on("ADD_CONSUMER",function(Ue){return ct.handleConsumerAdd(Ue)}),this.roomClient.on("REMOVE_CONSUMER",function(Ue){return ct.handleConsumerRemove(Ue)}),this.roomClient.on("CONSUMER_RESUMED",function(Ue){return ct.handleConsumerResume(Ue)}),this.roomClient.on("CONSUMER_PAUSED",function(Ue){return ct.handleConsumerPause(Ue)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(Ue){return ct.handleParticipantMediaStateChanged(Ue)}),this.roomClient.on("CHAT_MESSAGE",function(Ue){return ct.handleNewChatMessage(Ue)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(Ue){return ct.handleSpeakerChange(Ue)}),this.roomClient.on("ENTRY_REQUESTED",function(Ue){return ct.handleEntryRequested(Ue)}),this.roomClient.on("ENTRY_RESPONDED",function(Ue){return ct.handleEntryResponded(Ue)}),this.roomClient.on("MEETING_JOINED",function(Ue){return ct.handleMeetingJoined(Ue)}),this.roomClient.on("MEETING_LEFT",function(Ue){return ct.handleMeetingLeft(Ue)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(Ue){ct.handleRecordingStateChanged(Ue)}),this.roomClient.on("RECORDING_STARTED",function(Ue){return ct.handleRecordingStarted(Ue)}),this.roomClient.on("RECORDING_STOPPED",function(Ue){return ct.handleRecordingStopped(Ue)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(Ue){ct.handleLivestreamStateChanged(Ue)}),this.roomClient.on("LIVESTREAM_STARTED",function(Ue){return ct.handleLivestreamStarted(Ue)}),this.roomClient.on("LIVESTREAM_STOPPED",function(Ue){return ct.handleLivestreamStopped(Ue)}),this.roomClient.on("HLS_STATE_CHANGED",function(Ue){ct.handleHlsStateChanged(Ue)}),this.roomClient.on("HLS_STARTED",function(Ue){ct.handleHlsStarted(Ue)}),this.roomClient.on("HLS_STOPPED",function(Ue){ct.handleHlsStopped(Ue)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(Ue){ct.handleTranscriptionStateChanged(Ue)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(Ue){ct.handleTranscriptionText(Ue)}),this.roomClient.on("SUB_MANAGER_RESUMED",function(Ue){ct.handleParticipantResumeBySubManager(Ue)}),this.roomClient.on("SUB_MANAGER_PAUSED",function(Ue){ct.handleParticipantPausedBySubManager(Ue)}),this.roomClient.on("WHITEBOARD_STARTED",function(Ue){return ct.handleWhiteboardStarted(Ue)}),this.roomClient.on("WHITEBOARD_STOPPED",function(Ue){return ct.handleWhiteboardStopped(Ue)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(Ue){return ct.handleVideoStateChanged(Ue)}),this.roomClient.on("VIDEO_SEEKED",function(Ue){return ct.handleVideoSeeked(Ue)}),this.roomClient.on("PIN_STATE_CHANGED",function(Ue){ct.handlePinStateChanged(Ue)}),this.roomClient.on("MIC_REQUESTED",function(Ue){return ct.handleMicRequested(Ue)}),this.roomClient.on("WEBCAM_REQUESTED",function(Ue){return ct.handleWebcamRequested(Ue)}),this.roomClient.on("CONNECTION_OPEN",function(Ue){return ct.handleConnectionOpen(Ue)}),this.roomClient.on("CONNECTION_CLOSE",function(Ue){return ct.handleConnectionClose(Ue)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(Ue){return ct.handleConnectionParticipantJoin(Ue)}),this.roomClient.on("SWITCH_ROOM",function(Ue){return ct.handleSwitchMeeting(Ue)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(Ue){return ct.handleConnectionChatMessage(Ue)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(Ue){ct.handleConnectionParticipantLeft(Ue)}),this.roomClient.on("PUBSUB_MESSAGE",function(Ue){return Ba(qa,ct,Lc).call(ct,Ue)}),this.roomClient.on("PEER_MODE_CHANGED",function(Ue){return Ba(qa,ct,Ic).call(ct,Ue)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(Ue){return ct.handleMeetingStateChanged(Ue)}),this.roomClient.on("QUALITY_LIMITATION_INTERNAL",function(Ue){return ct.handleQualityChanged(Ue)}),this.roomClient.on("ALL_CONSUMERS_PAUSED",function(Ue){return ct.handleConsumersPaused(Ue)}),this.roomClient.on("ALL_CONSUMERS_RESUMED",function(Ue){return ct.handleConsumersResumed(Ue)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(Ue){return ct.handleVideoQualityChanged(Ue)}),this.roomClient.on("ADD_CHARACTER",function(Ue){return ct.handleAddCharacter(Ue)}),this.roomClient.on("INIT_CHARACTER",function(Ue){return ct.handleInitCharacter(Ue)}),this.roomClient.on("REMOVE_CHARACTER",function(Ue){return ct.handleRemoveCharacter(Ue)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(Ue){return ct.handleCharacterStateChanged(Ue)}),this.roomClient.on("CHARACTER_MESSAGE",function(Ue){return ct.handleCharacterMessage(Ue)}),this.roomClient.on("USER_MESSAGE",function(Ue){return ct.handleUserMessage(Ue)}),this.roomClient.on("CHARACTER_DATA",function(Ue){return ct.handleOnCharacterData(Ue)}),this.roomClient.on("CHARACTER_ERROR",function(Ue){return ct.handleOnCharacterError(Ue)}),this.roomClient.on("E2EE_STATE_CHANGE",function(Ue){return ct.handleE2EEStateChange(Ue)}),this.roomClient.on("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING",function(){return ct.handleOnRemoveCurrentMeetingParticipant()}),this.roomClient.on("MEDIA_RELAY_STARTED",function(Ue){return ct.handleMediaRelayStart(Ue)}),this.roomClient.on("MEDIA_RELAY_STOPPED",function(Ue){return ct.handleMediaRelayStop(Ue)}),this.roomClient.on("MEDIA_RELAY_ERROR",function(Ue){return ct.handleMediaRelayError(Ue)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RESPONSE",function(Ue){return ct.handleMediaRelayRequestResponse(Ue)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RECEIVED",function(Ue){return ct.handleMediaRelayRequest(Ue)})},[{key:"isE2EEEnabled",get:function(){return this.roomClient.isE2EEEnabled}},{key:"handleError",value:function(ue){this.eventEmitter.listenerCount(Wa)>0&&this.eventEmitter.emit(Wa,ue)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(ue){this.roomClient.changeMode(ue)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(ue,me){this.roomClient.respondEntry(ue,me)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(ue)}},{key:"publishAudio",value:(et=(0,k.A)(T().mark(function ue(){var me,Me=arguments;return T().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return me=Me.length>0&&Me[0]!==void 0?Me[0]:void 0,qe.next=1,this.roomClient.enableMic(me);case 1:return qe.abrupt("return");case 2:case"end":return qe.stop()}},ue,this)})),function(){return et.apply(this,arguments)})},{key:"unpublishAudio",value:(Ne=(0,k.A)(T().mark(function ue(){return T().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=1,this.roomClient.disableMic();case 1:return me.abrupt("return");case 2:case"end":return me.stop()}},ue,this)})),function(){return Ne.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(ue)}},{key:"publishVideo",value:($e=(0,k.A)(T().mark(function ue(){var me,Me=arguments;return T().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return me=Me.length>0&&Me[0]!==void 0?Me[0]:void 0,this.roomClient.enableWebcam(me),qe.abrupt("return");case 1:case"end":return qe.stop()}},ue,this)})),function(){return $e.apply(this,arguments)})},{key:"unpublishVideo",value:(Ke=(0,k.A)(T().mark(function ue(){return T().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return this.roomClient.disableWebcam(),me.abrupt("return");case 1:case"end":return me.stop()}},ue,this)})),function(){return Ke.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(ue)}},{key:"pubblishScreenShare",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(ue)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(ue){this.roomClient.sendChatMessage(ue);var me={text:ue,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(me)}},{key:"pauseAllStreams",value:function(ue){this.roomClient.pauseAllConsumers(ue)}},{key:"resumeAllStreams",value:function(ue){this.roomClient.resumeAllConsumers(ue)}},{key:"startRecording",value:function(ue,me,Me,qe){this.roomClient.startRecording(ue,me,Me,qe)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(ue){this.roomClient.startTranscription(ue)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startLivestream",value:function(ue,me){this.roomClient.startLivestream(ue,me)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(Ae=(0,k.A)(T().mark(function ue(me,Me){return T().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=1,this.roomClient.startHls(me,Me);case 1:case"end":return qe.stop()}},ue,this)})),function(ue,me){return Ae.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(ue){if(!ue.interactionId&&!ue.id)throw new Error("InteractionId or id is required");return new Ai(ua(ua({},ue),{},{roomClient:this.roomClient}))}},{key:"getMics",value:(xe=(0,k.A)(T().mark(function ue(){return T().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=1,this.roomClient.getMics();case 1:return me.abrupt("return",me.sent);case 2:case"end":return me.stop()}},ue,this)})),function(){return xe.apply(this,arguments)})},{key:"getWebcams",value:(Ve=(0,k.A)(T().mark(function ue(){return T().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=1,this.roomClient.getWebcams();case 1:return me.abrupt("return",me.sent);case 2:case"end":return me.stop()}},ue,this)})),function(){return Ve.apply(this,arguments)})},{key:"changeMic",value:function(ue){this.roomClient.changeMic(ue)}},{key:"changeWebcam",value:function(ue){this.roomClient.changeWebcam(ue)}},{key:"replaceWebcamStream",value:function(ue){this.roomClient.replaceWebcamStream(ue)}},{key:"setWebcamQuality",value:function(ue){this.roomClient.setWebcamQuality(ue)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(ue){var me=ue.link;this.roomClient.startVideo({link:me})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(ue){var me=ue.currentTime;this.roomClient.pauseVideo(me)}},{key:"seekVideo",value:function(ue){var me=ue.currentTime;this.roomClient.seekVideo(me)}},{key:"handlePeerAdd",value:function(ue){var me=ue.peer,Me=new $t(me);this.participants.set(Me.id,Me),this.eventEmitter.emit(Is,Me),this.participants.size===1&&this.updateMainParticipant(Me.id)}},{key:"handleStreamState",value:function(ue){var me=ue.state,Me=ue.peerId,qe=ue.streamId,tt=this.participants.get(Me);tt?.handleStreamStateChanged({state:me,peerId:Me,streamId:qe})}},{key:"handlePeerRemove",value:function(ue){var me=ue.peerId,Me=this.participants.get(me);Me!=null&&(this.participants.delete(me),this.eventEmitter.emit(Ji,Me),this.activePresenterId===Me.id&&(this.activePresenterId=null,this.eventEmitter.emit(mi,this.activePresenterId)),this.mainParticipantId===Me.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(ue){var me=ue.producer,Me={id:me.id,rtpSender:me.rtpSender};this.localParticipant.addProducer(Me);var qe=new Fr(me);this.localParticipant.addStream(qe),qe.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(mi,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(ue){var me=ue.producer,Me=new Fr(me);this.localParticipant.updateStream(Me)}},{key:"handleProducerRemove",value:function(ue){var me=ue.producerId;this.localParticipant.removeProducer(me);var Me=this.localParticipant.deleteStream(me);if(Me&&Me.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(mi,this.activePresenterId);var qe=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||qe||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(ue){var me=ue.consumer,Me=ue.peerId,qe=this.participants.get(Me)||this.characters.get(Me);if(qe){var tt={id:me.id,rtpReceiver:me.rtpReceiver};qe.addConsumer(tt);var Jt=new Fr(me);qe.addStream(Jt),this.eventEmitter.emit(Di,Jt),Jt.kind==="share"&&(this.activePresenterId=qe.id,this.eventEmitter.emit(mi,this.activePresenterId),this.updateMainParticipant(qe.id))}}},{key:"handleConsumerResume",value:function(ue){var me=ue.consumerId,Me=ue.peerId,qe=this.participants.get(Me);qe&&qe.streamResumed(me)}},{key:"handleConsumerPause",value:function(ue){var me=ue.consumerId,Me=ue.peerId,qe=this.participants.get(Me);qe&&qe.streamPaused(me)}},{key:"handleConsumerRemove",value:function(ue){var me=ue.consumerId,Me=ue.peerId,qe=this.participants.get(Me)||this.characters.get(Me);if(qe!=null&&qe){qe.removeConsumer(me);var tt=qe.deleteStream(me);if(this.eventEmitter.emit(Ro,tt),tt&&tt.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(mi,this.activePresenterId);var Jt=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Jt||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(ue){var me=ue.peerId,Me=ue.kind,qe=ue.newState,tt=this.participants.get(me)||this.characters.get(me);this.localParticipant.id==me&&(tt=this.localParticipant),tt&&tt&&(Me=="audio"?tt.micOn=qe:Me=="video"&&(tt.webcamOn=qe),tt.updateParticipantMediaState(Me,qe))}},{key:"handleParticipantPausedBySubManager",value:function(ue){var me=this.participants.get(ue.peerId);me&&me&&me.handleParticipantPause(ue)}},{key:"handleParticipantResumeBySubManager",value:function(ue){var me=this.participants.get(ue.peerId);me&&me&&me.handleParticipantResume(ue)}},{key:"handleSpeakerChange",value:function(ue){var me=ue.peerId;this.activeSpeakerId!==me&&(this.activeSpeakerId=me,this.eventEmitter.emit(cs,me),me&&me!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&me!==this.mainParticipantId&&this.updateMainParticipant(me))}},{key:"handleNewChatMessage",value:function(ue){var me=ue.senderId,Me={senderId:me,text:ue.text,timestamp:ue.timestamp};if(this.localParticipant.id===me)Me.senderName=this.localParticipant.displayName;else{var qe=this.participants.get(me);qe&&(Me.senderName=qe.displayName)}this.messages.push(Me),this.eventEmitter.emit($s,Me)}},{key:"updateMainParticipant",value:function(ue){this.mainParticipantId=ue;var me=null;me=ue===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(no,me)}},{key:"handleEntryRequested",value:function(ue){var me=this,Me=ue.id,qe=ue.name;this.eventEmitter.emit(ws,{participantId:Me,name:qe,allow:function(){me.roomClient.respondEntry(Me,"allowed")},deny:function(){me.roomClient.respondEntry(Me,"denied")}})}},{key:"handleEntryResponded",value:function(ue){var me=ue.id,Me=ue.decision;this.eventEmitter.emit(js,me,Me)}},{key:"handleMeetingJoined",value:function(ue){var me=ue.peers,Me=ue.poll,qe=ue.messages,tt=ue.baseUrl,Jt=ue.switchRoomId;typeof Jt=="string"&&(this.id=Jt),this.baseUrl=tt,qe.length>0&&(this.messages=qe),this.eventEmitter.emit(Sa,{switchRoomId:Jt||null,peers:me,poll:Me,messages:qe})}},{key:"handleMeetingLeft",value:function(ue){this.eventEmitter.emit(Qa,ue)}},{key:"handleRecordingStateChanged",value:function(ue){this.recordingState=ue.status,this.eventEmitter.emit(ls,ue)}},{key:"handleLivestreamStateChanged",value:function(ue){this.livestreamState=ue.status,this.eventEmitter.emit(zo,ue)}},{key:"handleHlsStateChanged",value:function(ue){this.hlsState=ue.status,ue.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:ue.downstreamUrl,playbackHlsUrl:ue.playbackHlsUrl,livestreamUrl:ue.livestreamUrl}:ue.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(na,ue)}},{key:"handleTranscriptionStateChanged",value:function(ue){this.transcriptionState=ue.status,this.eventEmitter.emit(ni,ue)}},{key:"handleTranscriptionText",value:function(ue){this.eventEmitter.emit(Ss,ue)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(Xi)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(us)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(_r)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(xi)}},{key:"handleHlsStarted",value:function(ue){this.eventEmitter.emit(Hi,ue)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(Bs)}},{key:"handleWhiteboardStarted",value:function(ue){this.eventEmitter.emit(Wn,ue)}},{key:"handleWhiteboardStopped",value:function(ue){(function(me){if(me==null)throw new TypeError("Cannot destructure "+me)})(ue),this.eventEmitter.emit(Oi)}},{key:"handleAddCharacter",value:function(ue){var me,Me=ue.id,qe=(me=this.characters.get(Me))!==null&&me!==void 0?me:new Ai(ua(ua({},ue),{},{state:Xe.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(Me,qe),this.eventEmitter.emit(ko,qe),qe.eventEmitter.emit(ko)}},{key:"handleInitCharacter",value:function(ue){this.characters.set(ue.id,ue)}},{key:"handleRemoveCharacter",value:function(ue){var me=ue.id;if(this.characters.has(me)){var Me=this.characters.get(me);this.eventEmitter.emit(Co,Me),Me.eventEmitter.emit(Co),this.characters.delete(me)}}},{key:"handleCharacterStateChanged",value:function(ue){var me=ue.id;this.characters.has(me)&&this.characters.get(me).handleCharacterStateChanged(ue)}},{key:"handleCharacterMessage",value:function(ue){var me=ue.id;this.characters.has(me)&&this.characters.get(me).handleCharacterMessage(ue)}},{key:"handleUserMessage",value:function(ue){var me=ue.id;this.characters.has(me)&&this.characters.get(me).handleUserMessage(ue)}},{key:"handleOnCharacterData",value:function(ue){var me=ue.id;this.characters.has(me)&&this.characters.get(me).handleCharacterData(ue)}},{key:"handleOnCharacterError",value:function(ue){var me=ue.id;this.characters.has(me)&&this.characters.get(me).handleCharacterError(ue)}},{key:"handleOnRemoveCurrentMeetingParticipant",value:function(){var ue=this;(0,Qe.A)(this.participants.keys()).forEach(function(me){me!==ue.localParticipant.id&&ue.handlePeerRemove({peerId:me})})}},{key:"handleVideoStateChanged",value:function(ue){this.eventEmitter.emit(Fi,ue)}},{key:"handleVideoSeeked",value:function(ue){var me=ue.currentTime;this.eventEmitter.emit(qi,{currentTime:me})}},{key:"handlePinStateChanged",value:function(ue){var me=ue.peerId,Me=ue.state,qe=ue.pinnedBy;this.eventEmitter.emit(ti,{participantId:me,state:Me,pinnedBy:qe})}},{key:"handleMeetingStateChanged",value:function(ue){var me=ue.state;this.eventEmitter.emit(nc,{state:me})}},{key:"handleQualityChanged",value:function(ue){var me=ue.type,Me=ue.state,qe=ue.timestamp;this.eventEmitter.emit(Mi,{type:me,state:Me,timestamp:qe})}},{key:"handleConsumersPaused",value:function(ue){var me=ue.kind;this.eventEmitter.emit(Mr,{kind:me})}},{key:"handleConsumersResumed",value:function(ue){var me=ue.kind;this.eventEmitter.emit(Vi,{kind:me})}},{key:"handleVideoQualityChanged",value:function(ue){var me=ue.peerId,Me=ue.prevQuality,qe=ue.currentQuality,tt=this.participants.get(me)||this.characters.get(me);tt&&tt&&tt.videoQualityChanged(Me,qe)}},{key:"handleMicRequested",value:function(ue){var me=this,Me=ue.peerId;this.eventEmitter.emit(pr,{participantId:Me,accept:function(){return me.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(ue){var me=this,Me=ue.peerId;this.eventEmitter.emit(Ma,{participantId:Me,accept:function(){return me.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(ue){var me=ue.roomId,Me=ue.peer,qe=this.connections.get(me);qe?.meeting.participantJoin(Me)}},{key:"handleConnectionParticipantLeft",value:function(ue){var me=ue.roomId,Me=ue.peerId,qe=this.connections.get(me);qe?.meeting.participantLeft(Me)}},{key:"handleConnectionOpen",value:function(ue){var me=ue.peers,Me=ue.roomId,qe=ue.payload,tt=new Br({roomId:Me,peers:me,payload:qe});this.connections.set(tt.id,tt),this.eventEmitter.emit(Es,tt)}},{key:"handleConnectionClose",value:function(ue){var me=ue.roomId;this.connections.get(me)!=null&&(this.connections.delete(me),this.eventEmitter.emit(Ws,me))}},{key:"handleMediaRelayError",value:function(ue){var me=ue.meetingId,Me=ue.error;this.eventEmitter.emit(ge,{meetingId:me,error:Me})}},{key:"handleMediaRelayRequest",value:function(ue){var me=this,Me=ue.peerId,qe=ue.meetingId,tt=ue.displayName;this.eventEmitter.emit(Kn,{participantId:Me,meetingId:qe,displayName:tt,accept:function(){return me.roomClient.handleRelayRequestResponse({decision:"allowed",meetingId:qe,peerId:Me})},reject:function(){return me.roomClient.handleRelayRequestResponse({decision:"denied",meetingId:qe,peerId:Me})}})}},{key:"handleMediaRelayRequestResponse",value:function(ue){var me=ue.decision,Me=ue.decidedBy,qe=ue.meetingId;this.eventEmitter.emit(Pt,{decision:me,decidedBy:Me,meetingId:qe})}},{key:"handleMediaRelayStart",value:function(ue){var me=ue.meetingId;this.eventEmitter.emit(zs,{meetingId:me})}},{key:"handleMediaRelayStop",value:function(ue){var me=ue.meetingId,Me=ue.reason;this.eventEmitter.emit(on,{meetingId:me,reason:Me})}},{key:"requestMediaRelay",value:(be=(0,k.A)(T().mark(function ue(me){var Me,qe,tt;return T().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:if(Me=me.destinationMeetingId,qe=me.token,tt=me.kinds,Me){Jt.next=1;break}throw new Error("Parameter destinationMeetingId is required when calling requestMediaRelay.");case 1:return Jt.next=2,this.roomClient.requestMediaRelay(Me,qe,tt);case 2:case"end":return Jt.stop()}},ue,this)})),function(ue){return be.apply(this,arguments)})},{key:"stopMediaRelay",value:(_e=(0,k.A)(T().mark(function ue(me){return T().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(me){Me.next=1;break}throw new Error("Parameter destinationMeetingId is required when calling stopMediaRelay.");case 1:return Me.next=2,this.roomClient.stopMediaRelay(me);case 2:case"end":return Me.stop()}},ue,this)})),function(ue){return _e.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(Se=(0,k.A)(T().mark(function ue(){return T().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=1,this.roomClient.enableAdaptiveSubscription();case 1:case"end":return me.stop()}},ue,this)})),function(){return Se.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(de=(0,k.A)(T().mark(function ue(){return T().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=1,this.roomClient.disableAdaptiveSubscription();case 1:case"end":return me.stop()}},ue,this)})),function(){return de.apply(this,arguments)})},{key:"enableE2EE",value:(Q=(0,k.A)(T().mark(function ue(){return T().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=1,this.roomClient.toggleE2EEEnabled(!0);case 1:case"end":return me.stop()}},ue,this)})),function(){return Q.apply(this,arguments)})},{key:"disableE2EE",value:(K=(0,k.A)(T().mark(function ue(){return T().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=1,this.roomClient.toggleE2EEEnabled(!1);case 1:case"end":return me.stop()}},ue,this)})),function(){return K.apply(this,arguments)})},{key:"handleSwitchMeeting",value:function(ue){var me=ue.roomId,Me=ue.token,qe=ue.payload,tt=ue.peerId,Jt=ue.connectionPeerId,vt=ue.connectionRoomId,Rt=tt?{meetingId:me,payload:qe,token:Me,participantId:tt}:{meetingId:me,payload:qe,token:Me,connectionParticipantId:Jt,connectionMeetingId:vt};this.eventEmitter.emit(Fa,Rt)}},{key:"handleConnectionChatMessage",value:function(ue){var me=ue.roomId,Me=ue.peerId,qe=ue.message,tt=this.connections.get(me);tt?.meeting.sendChatMessageEvent({participantId:Me,message:qe})}},{key:"handleE2EEStateChange",value:function(ue){var me=ue.peerId,Me=this.localParticipant.id==me?this.localParticipant:this.participants.get(me)||this.characters.get(me);Me&&Me&&Me.handleE2EEStateChange(ue)}},{key:"connectTo",value:($=(0,k.A)(T().mark(function ue(me){var Me,qe;return T().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return Me=me.meetingId,qe=me.payload,tt.next=1,this.roomClient.openConnection({roomId:Me,payload:qe});case 1:case"end":return tt.stop()}},ue,this)})),function(ue){return $.apply(this,arguments)})},{key:"switchTo",value:function(ue){var me=ue.meetingId,Me=ue.token;if(!me||typeof me!="string"||me.trim()==="")throw new Error("Invalid meetingId: must be a non-empty string");this.roomClient.switchTo({meetingId:me,token:Me,participantId:this.localParticipant.id})}},{key:"selectedCameraDevice",get:function(){var ue;return(ue=this.roomClient._webcam)===null||ue===void 0?void 0:ue.device}},{key:"selectedMicrophoneDevice",get:function(){var ue;return(ue=this.roomClient._mic)===null||ue===void 0?void 0:ue.device}},{key:"on",value:function(ue,me){switch(ue){case Is:case Ji:case cs:case mi:case no:case $s:case ws:case js:case ls:case Xi:case us:case zo:case _r:case xi:case Hi:case Bs:case na:case ni:case Ss:case Di:case Ro:case Wn:case Oi:case ko:case Co:case Sa:case Qa:case Fi:case qi:case pr:case Ma:case ti:case Es:case Ws:case Fa:case nc:case pi:case Mr:case Vi:case zs:case on:case ge:case Kn:case Pt:case Wa:case Mi:this.eventEmitter.on(ue,me);break;default:throw new Error("Invalid event type "+ue)}}},{key:"off",value:function(ue,me){switch(ue){case Is:case Ji:case cs:case mi:case no:case $s:case ws:case js:case ls:case Xi:case us:case zo:case _r:case xi:case na:case Hi:case Bs:case ni:case Ss:case Di:case Ro:case Wn:case Oi:case ko:case Co:case Sa:case Qa:case Fi:case qi:case pr:case Ma:case ti:case Es:case Ws:case Fa:case nc:case Wa:case zs:case on:case ge:case Kn:case Pt:case pi:case Mr:case Vi:case Mi:this.eventEmitter.off(ue,me);break;default:throw new Error("Invalid event type.")}}}]);var $,K,Q,de,Se,_e,be,Ve,xe,Ae,Ke,$e,Ne,et}();function Lc($){var K=$.topic,Q=$.message,de=$.senderId,Se=$.timestamp,_e=$.senderName,be=$.id,Ve=$.payload;K&&Q&&ja(aa,this).emit(K,{message:Q,senderId:de,timestamp:Se,topic:K,senderName:_e,id:be,payload:Ve})}function Ic($){var K=$.peerId,Q=$.mode;K===this.localParticipant.id?this.localParticipant.mode=Q:this.participants.get(K).mode=Q,this.activePresenterId!==this.localParticipant.id||(0,Sn.kR)(Q)||(this.activePresenterId=null,this.eventEmitter.emit(mi,this.activePresenterId)),this.eventEmitter.emit(pi,{participantId:K,mode:Q})}var Cr=N(7080),jc=N(5071),Uo=N(4973),ro=N(9027);function Gs($,K,Q){return K=(0,tn.A)(K),(0,Tt.A)($,xs()?Reflect.construct(K,Q||[],(0,tn.A)($).constructor):K.apply($,Q))}function xs(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xs=function(){return!!$})()}var Ks=function($){function K(Q,de,Se,_e){return(0,d.A)(this,K),Gs(this,K,[Q,de,Se,_e])}return(0,Xt.A)(K,$),(0,E.A)(K)}((0,E.A)(function $(K,Q,de,Se){(0,d.A)(this,$),this.deviceId=K,this.groupId=Q,this.kind=de,this.label=Se})),Sc=function($){function K(Q,de,Se,_e){return(0,d.A)(this,K),Gs(this,K,[Q,de,Se,_e])}return(0,Xt.A)(K,$),(0,E.A)(K)}(Ks),Bc=function($){function K(Q,de,Se,_e){return(0,d.A)(this,K),Gs(this,K,[Q,de,Se,_e])}return(0,Xt.A)(K,$),(0,E.A)(K)}(Ks),rc=function($){function K(Q,de,Se,_e){return(0,d.A)(this,K),Gs(this,K,[Q,de,Se,_e])}return(0,Xt.A)(K,$),(0,E.A)(K)}(Ks),Ri={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},sl=(N(328),N(7654));function ac($,K){return $==null||K==null?NaN:$<K?-1:$>K?1:$>=K?0:NaN}function ic($,K){return $==null||K==null?NaN:K<$?-1:K>$?1:K>=$?0:NaN}function ao($){let K,Q,de;function Se(_e,be,Ve=0,xe=_e.length){if(Ve<xe){if(K(be,be)!==0)return xe;do{const Ae=Ve+xe>>>1;Q(_e[Ae],be)<0?Ve=Ae+1:xe=Ae}while(Ve<xe)}return Ve}return $.length!==2?(K=ac,Q=(_e,be)=>ac($(_e),be),de=(_e,be)=>$(_e)-be):(K=$===ac||$===ic?$:ol,Q=$,de=$),{left:Se,center:function(_e,be,Ve=0,xe=_e.length){const Ae=Se(_e,be,Ve,xe-1);return Ae>Ve&&de(_e[Ae-1],be)>-de(_e[Ae],be)?Ae-1:Ae},right:function(_e,be,Ve=0,xe=_e.length){if(Ve<xe){if(K(be,be)!==0)return xe;do{const Ae=Ve+xe>>>1;Q(_e[Ae],be)<=0?Ve=Ae+1:xe=Ae}while(Ve<xe)}return Ve}}}function ol(){return 0}const xa=ao(ac),La=xa.right,zc=(ao(function($){return $===null?NaN:+$}).center,La);function Uc($,K){switch(arguments.length){case 0:break;case 1:this.range($);break;default:this.range(K).domain($)}return this}function ft(){var $,K=[.5],Q=[0,1],de=1;function Se(_e){return _e!=null&&_e<=_e?Q[zc(K,_e,0,de)]:$}return Se.domain=function(_e){return arguments.length?(K=Array.from(_e),de=Math.min(K.length,Q.length-1),Se):K.slice()},Se.range=function(_e){return arguments.length?(Q=Array.from(_e),de=Math.min(K.length,Q.length-1),Se):Q.slice()},Se.invertExtent=function(_e){var be=Q.indexOf(_e);return[K[be-1],K[be]]},Se.unknown=function(_e){return arguments.length?($=_e,Se):$},Se.copy=function(){return ft().domain(K).range(Q).unknown($)},Uc.apply(Se,arguments)}function io($,K){(K==null||K>$.length)&&(K=$.length);for(var Q=0,de=Array(K);Q<K;Q++)de[Q]=$[Q];return de}function er($,K,Q){if(typeof $=="function"?$===K:$.has(K))return arguments.length<3?K:Q;throw new TypeError("Private element is not present on this object")}function sc($,K,Q){return K=Y(K),function(de,Se){if(Se&&(typeof Se=="object"||typeof Se=="function"))return Se;if(Se!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}(de)}($,Oe()?Reflect.construct(K,Q||[],Y($).constructor):K.apply($,Q))}function so($,K){if(K.has($))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hi($,K){if(!($ instanceof K))throw new TypeError("Cannot call a class as a function")}function he($,K){return $.get(er($,K))}function Cn($,K,Q){so($,K),K.set($,Q)}function Dn($,K,Q){return $.set(er($,K),Q),Q}function Ho($,K){so($,K),K.add($)}function Ra($,K,Q){return K&&function(de,Se){for(var _e=0;_e<Se.length;_e++){var be=Se[_e];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(de,qr(be.key),be)}}($.prototype,K),Object.defineProperty($,"prototype",{writable:!1}),$}function te($,K,Q){return(K=qr(K))in $?Object.defineProperty($,K,{value:Q,enumerable:!0,configurable:!0,writable:!0}):$[K]=Q,$}function G(){return G=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function($,K,Q){var de=Hn($,K);if(de){var Se=Object.getOwnPropertyDescriptor(de,K);return Se.get?Se.get.call(arguments.length<3?$:Q):Se.value}},G.apply(null,arguments)}function Y($){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(K){return K.__proto__||Object.getPrototypeOf(K)},Y($)}function oe($,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(K&&K.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),K&&Tn($,K)}function Oe(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oe=function(){return!!$})()}function rt($,K){var Q=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);K&&(de=de.filter(function(Se){return Object.getOwnPropertyDescriptor($,Se).enumerable})),Q.push.apply(Q,de)}return Q}function St($){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?rt(Object(Q),!0).forEach(function(de){te($,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Q)):rt(Object(Q)).forEach(function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Q,de))})}return $}function Dt($,K){if($==null)return{};var Q,de,Se=function(be,Ve){if(be==null)return{};var xe={};for(var Ae in be)if({}.hasOwnProperty.call(be,Ae)){if(Ve.indexOf(Ae)!==-1)continue;xe[Ae]=be[Ae]}return xe}($,K);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols($);for(de=0;de<_e.length;de++)Q=_e[de],K.indexOf(Q)===-1&&{}.propertyIsEnumerable.call($,Q)&&(Se[Q]=$[Q])}return Se}function _t($,K,Q,de){return _t=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(Se,_e,be,Ve){var xe,Ae=Hn(Se,_e);if(Ae){if((xe=Object.getOwnPropertyDescriptor(Ae,_e)).set)return xe.set.call(Ve,be),!0;if(!xe.writable)return!1}if(xe=Object.getOwnPropertyDescriptor(Ve,_e)){if(!xe.writable)return!1;xe.value=be,Object.defineProperty(Ve,_e,xe)}else te(Ve,_e,be);return!0},_t($,K,Q,de)}function Tn($,K){return Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Q,de){return Q.__proto__=de,Q},Tn($,K)}function qt($,K){return function(Q){if(Array.isArray(Q))return Q}($)||function(Q,de){var Se=Q==null?null:typeof Symbol<"u"&&Q[Symbol.iterator]||Q["@@iterator"];if(Se!=null){var _e,be,Ve,xe,Ae=[],Ke=!0,$e=!1;try{if(Ve=(Se=Se.call(Q)).next,de===0){if(Object(Se)!==Se)return;Ke=!1}else for(;!(Ke=(_e=Ve.call(Se)).done)&&(Ae.push(_e.value),Ae.length!==de);Ke=!0);}catch(Ne){$e=!0,be=Ne}finally{try{if(!Ke&&Se.return!=null&&(xe=Se.return(),Object(xe)!==xe))return}finally{if($e)throw be}}return Ae}}($,K)||ia($,K)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hn($,K){for(;!{}.hasOwnProperty.call($,K)&&($=Y($))!==null;);return $}function vn($,K,Q,de,Se,_e){return function(be,Ve,xe,Ae,Ke){if(!_t(be,Ve,xe,Ae||be)&&Ke)throw new TypeError("failed to set property");return xe}(Y($.prototype),K,Q,de,Se)}function Qr($){return function(K){if(Array.isArray(K))return io(K)}($)||function(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}($)||ia($)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qr($){var K=function(Q,de){if(typeof Q!="object"||!Q)return Q;var Se=Q[Symbol.toPrimitive];if(Se!==void 0){var _e=Se.call(Q,de);if(typeof _e!="object")return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Q)}($,"string");return typeof K=="symbol"?K:K+""}function ia($,K){if($){if(typeof $=="string")return io($,K);var Q={}.toString.call($).slice(8,-1);return Q==="Object"&&$.constructor&&(Q=$.constructor.name),Q==="Map"||Q==="Set"?Array.from($):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?io($,K):void 0}}var Jr="https://speed.cloudflare.com",Rs={autoStart:!0,downloadApiUrl:"".concat(Jr,"/__down"),uploadApiUrl:"".concat(Jr,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(Jr,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(Jr,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},ks={aimMeasurementScoring:{packetLoss:ft([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:ft([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:ft([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:ft([10,20,100,500],[10,5,0,-10,-20]),download:ft([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:ft([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},es=function($){var K=$.headers.get("server-timing");if(K){var Q=K.match(/dur=([0-9.]+)/);if(Q)return+Q[1]}},Ys=function($){return $.responseStart-$.requestStart},Qs=function($){return $.responseEnd-$.responseStart},oo=function($){return $.ping+$.payloadDownloadTime},Li=function($){return $.ttfb},Zi=function($,K){var Q=$.duration,de=$.transferSize,Se=Q/1e3;return Se?8*(de||1.005*+K)/Se:void 0},co=function($,K){var Q=$.duration/1e3;return Q?8*K*1.005/Q:void 0},oc=sl(function($){return"0".repeat($)}),Fo=new WeakMap,$i=new WeakMap,Us=new WeakMap,To=new WeakMap,cc=new WeakMap,Cs=new WeakMap,qo=new WeakMap,Wi=new WeakMap,Ts=new WeakMap,xc=new WeakMap,Po=new WeakMap,Vo=new WeakMap,lo=new WeakMap,No=new WeakMap,ki=new WeakMap,fi=new WeakMap,ds=new WeakMap,ri=new WeakMap,gi=new WeakMap,Js=new WeakMap,Gi=new WeakMap,uo=new WeakMap,vi=new WeakSet,Xs=function(){return Ra(function $(K){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=Q.downloadApiUrl,Se=Q.uploadApiUrl,_e=Q.throttleMs,be=_e===void 0?0:_e,Ve=Q.estimatedServerTime,xe=Ve===void 0?0:Ve;if(hi(this,$),Ho(this,vi),Cn(this,Fo,{}),Cn(this,$i,{}),te(this,"finishRequestDuration",1e3),te(this,"getServerTime",es),Cn(this,Us,function(Ae){return Ae}),Cn(this,To,function(){}),Cn(this,cc,function(){}),Cn(this,Cs,function(){}),Cn(this,qo,function(){}),Cn(this,Wi,function(){}),Cn(this,Ts,void 0),Cn(this,xc,void 0),Cn(this,Po,void 0),Cn(this,Vo,!1),Cn(this,lo,{down:!1,up:!1}),Cn(this,No,{down:{},up:{}}),Cn(this,ki,0),Cn(this,fi,0),Cn(this,ds,0),Cn(this,ri,-1/0),Cn(this,gi,0),Cn(this,Js,0),Cn(this,Gi,void 0),Cn(this,uo,void 0),!K)throw new Error("Missing measurements argument");if(!de)throw new Error("Missing downloadApiUrl argument");if(!Se)throw new Error("Missing uploadApiUrl argument");Dn(Ts,this,K),Dn(xc,this,de),Dn(Po,this,Se),Dn(gi,this,be),Dn(Js,this,Math.max(0,xe))},[{key:"results",get:function(){return he(No,this)}},{key:"qsParams",get:function(){return he(Fo,this)},set:function($){Dn(Fo,this,$)}},{key:"fetchOptions",get:function(){return he($i,this)},set:function($){Dn($i,this,$)}},{key:"responseHook",set:function($){Dn(Us,this,$)}},{key:"onRunningChange",set:function($){Dn(To,this,$)}},{key:"onNewMeasurementStarted",set:function($){Dn(cc,this,$)}},{key:"onMeasurementResult",set:function($){Dn(Cs,this,$)}},{key:"onFinished",set:function($){Dn(qo,this,$)}},{key:"onConnectionError",set:function($){Dn(Wi,this,$)}},{key:"pause",value:function(){clearTimeout(he(uo,this)),er(vi,this,po).call(this),er(vi,this,Hs).call(this,!1)}},{key:"play",value:function(){he(Vo,this)||(er(vi,this,Hs).call(this,!0),er(vi,this,ps).call(this))}}])}();function Hs($){var K=this;$!==he(Vo,this)&&(Dn(Vo,this,$),setTimeout(function(){return he(To,K).call(K,he(Vo,K))}))}function Ao($,K){var Q=this,de=he(Ts,this)[$],Se=de.bytes,_e=de.dir,be=he(No,this),Ve=be[_e].hasOwnProperty(Se)?be[_e][Se]:{timings:[],numMeasurements:he(Ts,this).filter(function(xe){var Ae=xe.bytes,Ke=xe.dir;return Se===Ae&&_e===Ke}).map(function(xe){return xe.count}).reduce(function(xe,Ae){return xe+Ae},0)};K&&Ve.timings.push(K),Ve.timings=Ve.timings.slice(-Ve.numMeasurements),be[_e][Se]=Ve,K?setTimeout(function(){he(Cs,Q).call(Q,St({type:_e,bytes:Se},K),be)}):he(cc,this).call(this,he(Ts,this)[$],be)}function ps(){var $=this,K=he(Ts,this),Q=K[he(ki,this)];if(he(fi,this)>=Q.count){var de=he(lo,this);if(he(ri,this)>this.finishRequestDuration&&!Q.bypassMinDuration){var Se=Q.dir;he(lo,this)[Se]=!0,Object.values(he(lo,this)).every(function(me){return me})&&he(qo,this).call(this,he(No,this))}Dn(fi,this,0),Dn(ri,this,-1/0),performance.clearResourceTimings();do Dn(ki,this,he(ki,this)+1);while(he(ki,this)<K.length&&de[K[he(ki,this)].dir]);if(he(ki,this)>=K.length)return Dn(lo,this,{down:!0,up:!0}),er(vi,this,Hs).call(this,!1),void he(qo,this).call(this,he(No,this));Q=K[he(ki,this)]}var _e=he(ki,this);he(fi,this)===0&&er(vi,this,Ao).call(this,_e);var be=Q,Ve=be.bytes,xe=be.dir==="down",Ae=he(xe?xc:Po,this),Ke=Object.assign({},he(Fo,this));xe&&(Ke.bytes="".concat(Ve));var $e,Ne="".concat(Ae.startsWith("http")||Ae.startsWith("//")?"":window.location.origin).concat(Ae,"?").concat(Object.entries(Ke).map(function(me){var Me=qt(me,2),qe=Me[0],tt=Me[1];return"".concat(qe,"=").concat(tt)}).join("&")),et=Object.assign({},xe?{}:{method:"POST",body:oc(Ve)},he($i,this)),ue=Dn(Gi,this,fetch(Ne,et).then(function(me){if(me.ok)return me;throw Error(me.statusText)}).then(function(me){return $.getServerTime&&($e=$.getServerTime(me)),me}).then(function(me){return me.text().then(function(Me){return he(Us,$)&&he(Us,$).call($,{url:Ne,headers:me.headers,body:Me}),Me})}).then(function(me,Me){if(ue._cancel)Me("cancelled");else{var qe=performance.getEntriesByName(Ne).slice(-1)[0],tt={transferSize:qe.transferSize,ttfb:Ys(qe),payloadDownloadTime:Qs(qe),serverTime:$e||-1,measTime:new Date};if(tt.ping=Math.max(.01,tt.ttfb-($e||he(Js,$))),tt.duration=(xe?oo:Li)(tt),tt.bps=(xe?Zi:co)(tt,Ve),xe&&Ve){var Jt=+Ve;tt.transferSize&&(tt.transferSize<Jt||tt.transferSize/Jt>1.05)&&console.warn("Requested ".concat(Jt,"B but received ").concat(tt.transferSize,"B (").concat(Math.round(tt.transferSize/Jt*1e4)/100,"%)."))}er(vi,$,Ao).call($,_e,tt);var vt=tt.duration;Dn(ri,$,he(ri,$)<0?vt:Math.min(he(ri,$),vt)),Dn(fi,$,he(fi,$)+1),Dn(ds,$,0),he(gi,$)?Dn(uo,$,setTimeout(function(){return er(vi,$,ps).call($)},he(gi,$))):er(vi,$,ps).call($)}}).catch(function(me){var Me,qe;ue._cancel||(console.warn("Error fetching ".concat(Ne,": ").concat(me)),Dn(ds,$,(Me=he(ds,$),qe=Me++,Me)),qe<20?er(vi,$,ps).call($):(Dn(ds,$,0),er(vi,$,Hs).call($,!1),he(Wi,$).call($,"Connection failed to ".concat(Ne,". Gave up after ").concat(20," retries."))))}))}function po(){var $=he(Gi,this);$&&($._cancel=!0)}var Hc=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],_a=new WeakMap,Oo=new WeakSet,Ps=function($){function K(Q){var de,Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=Se.measureParallelLatency,be=_e!==void 0&&_e,Ve=Se.parallelLatencyThrottleMs,xe=Ve===void 0?100:Ve,Ae=Se.downloadApiUrl,Ke=Se.uploadApiUrl,$e=Se.estimatedServerTime,Ne=$e===void 0?0:$e,et=Dt(Se,Hc);return hi(this,K),Ho(de=sc(this,K,[Q,St({downloadApiUrl:Ae,uploadApiUrl:Ke,estimatedServerTime:Ne},et)]),Oo),Cn(de,_a,void 0),be&&(Dn(_a,de,new Xs([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:Ae,uploadApiUrl:Ke,estimatedServerTime:Ne,throttleMs:xe})),he(_a,de).qsParams={during:"".concat(Q[0].dir,"load")},vn(K,"onRunningChange",er(Oo,de,lc),de,1),vn(K,"onConnectionError",function(){return he(_a,de).pause()},de,1)),de}return oe(K,$),Ra(K,[{key:"latencyResults",get:function(){return he(_a,this)&&he(_a,this).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(Q){he(_a,this)&&(he(_a,this).onMeasurementResult=function(de){return Q(de)})}},{key:"fetchOptions",get:function(){return Q="fetchOptions",de=this,Se=1,_e=G(Y(K.prototype),Q,de),2&Se&&typeof _e=="function"?function(be){return _e.apply(de,be)}:_e;var Q,de,Se,_e},set:function(Q){vn(K,"fetchOptions",Q,this,1),he(_a,this)&&(he(_a,this).fetchOptions=Q)}},{key:"onRunningChange",set:function(Q){var de=this;vn(K,"onRunningChange",function(Se){er(Oo,de,lc).call(de,Se),Q(Se)},this,1)}},{key:"onConnectionError",set:function(Q){var de=this;vn(K,"onConnectionError",function(){he(_a,de)&&he(_a,de).pause(),Q.apply(void 0,arguments)},this,1)}}])}(Xs);function lc($){var K=this;he(_a,this)&&($?setTimeout(function(){return he(_a,K).play()},20):he(_a,this).pause())}var Zo=["measurementId","logApiUrl"],ts=new WeakMap,Do=new WeakMap,mo=new WeakMap,ns=new WeakMap,Ns=new WeakSet,a=function($){function K(Q){var de,Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=Se.measurementId,be=Se.logApiUrl,Ve=Dt(Se,Zo);return hi(this,K),Ho(de=sc(this,K,[Q,Ve]),Ns),Cn(de,ts,void 0),Cn(de,Do,void 0),Cn(de,mo,void 0),Cn(de,ns,void 0),Dn(ts,de,_e),Dn(ns,de,be),vn(K,"qsParams",be?{measId:he(ts,de)}:{},de,1),vn(K,"responseHook",function(xe){return er(Ns,de,l).call(de,xe)},de,1),vn(K,"onMeasurementResult",function(xe){return er(Ns,de,O).call(de,xe)},de,1),de}return oe(K,$),Ra(K,[{key:"qsParams",set:function(Q){vn(K,"qsParams",he(ns,this)?St({measId:he(ts,this)},Q):Q,this,1)}},{key:"responseHook",set:function(Q){var de=this;vn(K,"responseHook",function(Se){Q(Se),er(Ns,de,l).call(de,Se)},this,1)}},{key:"onMeasurementResult",set:function(Q){var de=this;vn(K,"onMeasurementResult",function(Se){for(var _e=arguments.length,be=new Array(_e>1?_e-1:0),Ve=1;Ve<_e;Ve++)be[Ve-1]=arguments[Ve];Q.apply(void 0,[Se].concat(be)),er(Ns,de,O).call(de,Se)},this,1)}}])}(Ps);function l($){he(ns,this)&&(Dn(mo,this,+$.headers.get("cf-meta-request-time")),Dn(Do,this,$.body.slice(-300).split("___").pop()))}function O($){if(he(ns,this)){var K={type:$.type,bytes:$.bytes,ping:Math.round($.ping),ttfb:Math.round($.ttfb),payloadDownloadTime:Math.round($.payloadDownloadTime),duration:Math.round($.duration),transferSize:Math.round($.transferSize),serverTime:Math.round($.serverTime),token:he(Do,this),requestTime:he(mo,this),measId:he(ts,this)};Dn(Do,this,null),Dn(mo,this,null),fetch(he(ns,this),St({method:"POST",body:JSON.stringify(K)},this.fetchOptions))}}var V=new WeakMap,ee=new WeakMap,pe=new WeakMap,Ie=new WeakSet,st=function(){return Ra(function $(K){if(hi(this,$),Ho(this,Ie),Cn(this,V,!1),Cn(this,ee,void 0),Cn(this,pe,void 0),!K)throw new Error("Missing operation to perform");Dn(pe,this,K),this.play()},[{key:"pause",value:function(){er(Ie,this,Mn).call(this),er(Ie,this,dt).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){he(V,this)||(er(Ie,this,dt).call(this,!0),er(Ie,this,Gt).call(this))}}])}();function dt($){$!==he(V,this)&&Dn(V,this,$)}function Gt(){var $=this,K=Dn(ee,this,he(pe,this).call(this).then(function(){!K._cancel&&er(Ie,$,Gt).call($)}))}function Mn(){var $=he(ee,this);$&&($._cancel=!0)}var Fn=new WeakMap,Qn=function(){return Ra(function $(){var K=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=Q.download,Se=Q.upload;if(hi(this,$),te(this,"qsParams",{}),te(this,"fetchOptions",{}),Cn(this,Fn,[]),!de&&!Se)throw new Error("Missing at least one of download/upload config");[[de,"download"],[Se,"upload"]].filter(function(be){return qt(be,1)[0]}).forEach(function(be){var Ve=qt(be,2),xe=Ve[0],Ae=Ve[1],Ke=xe.apiUrl,$e=xe.chunkSize;if(!Ke)throw new Error("Missing ".concat(Ae," apiUrl argument"));if(!$e)throw new Error("Missing ".concat(Ae," chunkSize argument"))});var _e=function(be){var Ve=be.apiUrl,xe=be.qsParams,Ae=xe===void 0?{}:xe,Ke=be.fetchOptions,$e=Ke===void 0?{}:Ke;return new st(function(){var Ne=Object.assign({},Ae,K.qsParams),et="".concat(Ve.startsWith("http")||Ve.startsWith("//")?"":window.location.origin).concat(Ve,"?").concat(Object.entries(Ne).map(function(me){var Me=qt(me,2),qe=Me[0],tt=Me[1];return"".concat(qe,"=").concat(tt)}).join("&")),ue=Object.assign({},$e,K.fetchOptions);return fetch(et,ue).then(function(me){if(me.ok)return me;throw Error(me.statusText)}).then(function(me){return me.text()})})};de&&he(Fn,this).push(_e({apiUrl:de.apiUrl,qsParams:{bytes:"".concat(de.chunkSize)}})),Se&&he(Fn,this).push(_e({apiUrl:Se.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(Se.chunkSize)}}))},[{key:"pause",value:function(){he(Fn,this).forEach(function($){return $.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){he(Fn,this).forEach(function($){return $.play()})}}])}(),xr=["iceServers","acceptIceCandidate","dataChannelCfg"],va=new WeakMap,Na=new WeakMap,Ja=new WeakMap,yi=new WeakMap,$o=new WeakMap,Fc=function(){return Ra(function $(){var K=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=Q.iceServers,Se=de===void 0?[]:de,_e=Q.acceptIceCandidate,be=_e===void 0?function(et){var ue=et.protocol||"";if(!ue&&et.candidate){var me=et.candidate.split(" ");me.length>=3&&(ue=me[2])}return ue.toLowerCase()==="udp"}:_e,Ve=Q.dataChannelCfg,xe=Ve===void 0?{ordered:!1,maxRetransmits:0}:Ve,Ae=Dt(Q,xr);hi(this,$),te(this,"onOpen",function(){}),te(this,"onClose",function(){}),te(this,"onMessageReceived",function(){}),Cn(this,va,!1),Cn(this,Na,void 0),Cn(this,Ja,void 0),Cn(this,yi,void 0),Cn(this,$o,void 0);var Ke=new RTCPeerConnection(St({iceServers:Se},Ae)),$e=new RTCPeerConnection(St({iceServers:Se},Ae)),Ne=Ke.createDataChannel("channel",xe);Ne.onopen=function(){Dn(va,K,!0),K.onOpen()},Ne.onclose=function(){return K.close()},$e.ondatachannel=function(et){var ue=et.channel;ue.onclose=function(){return K.close()},ue.onmessage=function(me){return K.onMessageReceived(me.data)},Dn($o,K,ue)},Ke.onicecandidate=function(et){et.candidate&&be(et.candidate)&&$e.addIceCandidate(et.candidate)},$e.onicecandidate=function(et){et.candidate&&be(et.candidate)&&Ke.addIceCandidate(et.candidate)},Ke.createOffer().then(function(et){return Ke.setLocalDescription(et)}).then(function(){return $e.setRemoteDescription(Ke.localDescription)}).then(function(){return $e.createAnswer()}).then(function(et){return $e.setLocalDescription(et)}).then(function(){return Ke.setRemoteDescription($e.localDescription)}),Dn(Na,this,Ke),Dn(Ja,this,$e),Dn(yi,this,Ne),Dn(va,this,!1)},[{key:"send",value:function($){return he(yi,this).send($)}},{key:"close",value:function(){return he(Na,this)&&he(Na,this).close(),he(Ja,this)&&he(Ja,this).close(),he(yi,this)&&he(yi,this).close(),he($o,this)&&he($o,this).close(),he(va,this)&&this.onClose(),Dn(va,this,!1),this}}])}(),ho=new WeakMap,Fs=new WeakMap,uc=new WeakMap,ms=new WeakMap,Ia=new WeakMap,rs=new WeakMap,qs=function(){return Ra(function $(){var K=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=Q.turnServerUri,Se=Q.turnServerCredsApi,_e=Q.turnServerCredsApiParser,be=_e===void 0?function(Rt){return{turnServerUser:Rt.username,turnServerPass:Rt.credential,turnServerUri:Rt.server}}:_e,Ve=Q.turnServerCredsApiIncludeCredentials,xe=Ve!==void 0&&Ve,Ae=Q.turnServerUser,Ke=Q.turnServerPass,$e=Q.numMsgs,Ne=$e===void 0?100:$e,et=Q.batchSize,ue=et===void 0?10:et,me=Q.batchWaitTime,Me=me===void 0?10:me,qe=Q.responsesWaitTime,tt=qe===void 0?5e3:qe,Jt=Q.connectionTimeout,vt=Jt===void 0?5e3:Jt;if(hi(this,$),Cn(this,ho,function(){}),Cn(this,Fs,function(){}),Cn(this,uc,function(){}),te(this,"onMsgSent",function(){}),te(this,"onAllMsgsSent",function(){}),te(this,"onMsgReceived",function(){}),Cn(this,ms,{}),Cn(this,Ia,void 0),Cn(this,rs,void 0),!de&&!Se)throw new Error("Missing turnServerCredsApi or turnServerUri argument");if(!(Ae&&Ke||Se))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");Dn(rs,this,Ne),(Ae&&Ke?Promise.resolve({turnServerUser:Ae,turnServerPass:Ke}):fetch(Se,{credentials:xe?"include":void 0}).then(function(Rt){return Rt.json()}).then(function(Rt){if(Rt.error)throw Rt.error;return Rt}).then(be)).catch(function(Rt){return he(ho,K).call(K,Rt)}).then(function(Rt){var xn=Rt.turnServerUser,ct=Rt.turnServerPass,Ue=Rt.turnServerUri,yt=Dn(Ia,K,new Fc({iceServers:[{urls:"turn:".concat(Ue||de,"?transport=udp"),username:xn,credential:ct}],iceTransportPolicy:"relay"})),fn=!1;setTimeout(function(){fn||(yt.close(),he(Fs,K).call(K,"ICE connection timeout!"))},vt);var nn=he(ms,K);yt.onOpen=function(){fn=!0;var un=K;(function Jn(Rr){if(Rr<=Ne){for(var _n=Rr;_n<=Math.min(Ne,Rr+ue-1);)nn[_n]=!1,yt.send(_n),un.onMsgSent(_n),_n++;setTimeout(function(){return Jn(_n)},Me)}else{un.onAllMsgsSent(Object.keys(nn).length);var dn=function(){yt.close(),he(uc,un).call(un,un.results)},wr=setTimeout(dn,tt),mr=Object.values(he(ms,un)).filter(function(Yn){return!Yn}).length;yt.onMessageReceived=function(Yn){clearTimeout(wr),nn[Yn]=!0,un.onMsgReceived(Yn),--mr<=0&&Object.values(he(ms,un)).every(function(In){return In})?dn():wr=setTimeout(dn,tt)}}})(1)},yt.onMessageReceived=function(un){nn[un]=!0,K.onMsgReceived(un)}}).catch(function(Rt){return he(Fs,K).call(K,Rt.toString())})},[{key:"onCredentialsFailure",set:function($){Dn(ho,this,$)}},{key:"onConnectionError",set:function($){Dn(Fs,this,$)}},{key:"onFinished",set:function($){Dn(uc,this,$)}},{key:"results",get:function(){var $=he(rs,this),K=Object.keys(he(ms,this)).length,Q=Object.entries(he(ms,this)).filter(function(de){return!qt(de,2)[1]}).map(function(de){return+qt(de,1)[0]});return{totalMessages:$,numMessagesSent:K,packetLoss:Q.length/K,lostMessages:Q}}}])}(),eo=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],Va=new WeakMap,Wo=function($){function K(){var Q,de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Se=de.downloadChunkSize,_e=de.uploadChunkSize,be=de.downloadApiUrl,Ve=de.uploadApiUrl,xe=Dt(de,eo);return hi(this,K),Cn(Q=sc(this,K,[xe]),Va,void 0),(Se||_e)&&(Dn(Va,Q,new Qn({download:Se?{apiUrl:be,chunkSize:Se}:null,upload:_e?{apiUrl:Ve,chunkSize:_e}:null})),vn(K,"onCredentialsFailure",vn(K,"onConnectionError",vn(K,"onFinished",function(){return he(Va,Q).stop()},Q,1),Q,1),Q,1)),Q}return oe(K,$),Ra(K,[{key:"qsParams",set:function(Q){he(Va,this)&&(he(Va,this).qsParams=Q)}},{key:"fetchOptions",set:function(Q){he(Va,this)&&(he(Va,this).fetchOptions=Q)}},{key:"onCredentialsFailure",set:function(Q){var de=this;vn(K,"onCredentialsFailure",function(){Q.apply(void 0,arguments),he(Va,de)&&he(Va,de).stop()},this,1)}},{key:"onConnectionError",set:function(Q){var de=this;vn(K,"onConnectionError",function(){Q.apply(void 0,arguments),he(Va,de)&&he(Va,de).stop()},this,1)}},{key:"onFinished",set:function(Q){var de=this;vn(K,"onFinished",function(){Q.apply(void 0,arguments),he(Va,de)&&he(Va,de).stop()},this,1)}}])}(qs),dc=["reachable"],fo=Ra(function $(K){var Q=this,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Se=de.timeout,_e=Se===void 0?-1:Se,be=de.fetchOptions,Ve=be===void 0?{}:be;hi(this,$),te(this,"onFinished",function(){});var xe=!1,Ae=function(Ke){var $e=Ke.reachable,Ne=Dt(Ke,dc);xe||(xe=!0,Q.onFinished(St({targetUrl:K,reachable:$e},Ne)))};fetch(K,Ve).then(function(Ke){Ae({reachable:!0,response:Ke})}).catch(function(Ke){Ae({reachable:!1,error:Ke})}),_e>0&&setTimeout(function(){return Ae({reachable:!1,error:"Request timeout"})},_e)}),Rc=function($){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!$.length)return 0;var Q=$.slice().sort(function(be,Ve){return be-Ve}),de=($.length-1)*K,Se=de%1;if(Se===0)return Q[Math.round(de)];var _e=[Math.floor,Math.ceil].map(function(be){return Q[be(de)]});return _e[0]+(_e[1]-_e[0])*Se},hs=new WeakMap,si=new WeakMap,qc=function(){return Ra(function $(K){var Q=this;hi(this,$),te(this,"getLatencyPoints",function(de){return de.timings.map(function(Se){return Se.ping})}),te(this,"getLatency",function(de){return Rc(Q.getLatencyPoints(de),he(hs,Q).latencyPercentile)}),te(this,"getBandwidthPoints",function(de){return Object.entries(de).map(function(Se){var _e=qt(Se,2),be=_e[0];return _e[1].timings.map(function(Ve){var xe=Ve.bps,Ae=Ve.duration,Ke=Ve.ping,$e=Ve.measTime,Ne=Ve.serverTime,et=Ve.transferSize;return{bytes:+be,bps:xe,duration:Ae,ping:Ke,measTime:$e,serverTime:Ne,transferSize:et}})}).flat()}),te(this,"getBandwidth",function(de){return Rc(Q.getBandwidthPoints(de).filter(function(Se){return Se.duration>=he(hs,Q).bandwidthMinRequestDuration}).map(function(Se){return Se.bps}).filter(function(Se){return Se}),he(hs,Q).bandwidthPercentile)}),te(this,"getLoadedLatency",function(de){return Q.getLatency({timings:he(si,Q).call(Q,de)})}),te(this,"getLoadedJitter",function(de){return Q.getJitter({timings:he(si,Q).call(Q,de)})}),te(this,"getLoadedLatencyPoints",function(de){return Q.getLatencyPoints({timings:he(si,Q).call(Q,de)})}),te(this,"getPacketLoss",function(de){return de.packetLoss}),te(this,"getPacketLossDetails",function(de){return de}),te(this,"getReachability",function(de){return!!de.reachable}),te(this,"getReachabilityDetails",function(de){return{host:de.host,reachable:de.reachable}}),Cn(this,hs,void 0),Cn(this,si,function(de){return Object.values(de).filter(function(Se){return Se.timings.length&&Math.min.apply(Math,Qr(Se.timings.map(function(_e){return _e.duration})))>=he(hs,Q).loadedRequestMinDuration}).map(function(Se){return Se.sideLatency||[]}).flat().slice(-he(hs,Q).loadedLatencyMaxPoints)}),Dn(hs,this,K)},[{key:"getJitter",value:function($){var K=this.getLatencyPoints($);return K.length<2?null:K.reduce(function(Q,de){var Se=Q.sumDeltas,_e=Se===void 0?0:Se,be=Q.prevLatency;return{sumDeltas:_e+(be!==void 0?Math.abs(be-de):0),prevLatency:de}},{}).sumDeltas/(K.length-1)}}])}(),Ll=["bad","poor","average","good","great"],Il={loadedLatencyIncrease:function($){return $.latency&&($.downLoadedLatency||$.upLoadedLatency)?Math.max($.downLoadedLatency,$.upLoadedLatency)-$.latency:void 0}},jl={packetLoss:0},Vc=new WeakMap,oi=function(){return Ra(function $(K){hi(this,$),Cn(this,Vc,void 0),Dn(Vc,this,K)},[{key:"getScores",value:function($){var K=Object.assign.apply(Object,Qr(Object.entries(he(Vc,this).aimMeasurementScoring).map(function(Q){var de=qt(Q,2),Se=de[0],_e=de[1],be=Il.hasOwnProperty(Se)?Il[Se]($):$[Se];return be===void 0?jl.hasOwnProperty(Se)?te({},Se,jl[Se]):{}:te({},Se,be===void 0?0:+_e(be))})));return Object.assign.apply(Object,[{}].concat(Qr(Object.entries(he(Vc,this).aimExperiencesDefs).filter(function(Q){return qt(Q,2)[1].input.every(function(de){return K.hasOwnProperty(de)})}).map(function(Q){var de,Se=qt(Q,2),_e=Se[0],be=Se[1],Ve=be.input,xe=be.pointThresholds,Ae=Math.max(0,(de=Ve.map(function($e){return K[$e]}),de.reduce(function($e,Ne){return $e+Ne},0))),Ke=ft(xe,[0,1,2,3,4])(Ae);return te({},_e,{points:Ae,classificationIdx:Ke,classificationName:Ll[Ke]})}))))}}])}(),Go=new WeakMap,Ko=new WeakMap,Yo=new WeakMap,Ga=new WeakMap,Qo=new WeakMap,pc=new WeakMap,Bl=new WeakMap,zl=new WeakMap,cu=function(){return Ra(function $(K){var Q=this;hi(this,$),te(this,"raw",void 0),te(this,"getUnloadedLatency",function(){return he(Ga,Q).call(Q,"getLatency","latency")}),te(this,"getUnloadedJitter",function(){return he(Ga,Q).call(Q,"getJitter","latency")}),te(this,"getUnloadedLatencyPoints",function(){return he(Ga,Q).call(Q,"getLatencyPoints","latency",[])}),te(this,"getDownLoadedLatency",function(){return he(Ga,Q).call(Q,"getLoadedLatency","download")}),te(this,"getDownLoadedJitter",function(){return he(Ga,Q).call(Q,"getLoadedJitter","download")}),te(this,"getDownLoadedLatencyPoints",function(){return he(Ga,Q).call(Q,"getLoadedLatencyPoints","download",[])}),te(this,"getUpLoadedLatency",function(){return he(Ga,Q).call(Q,"getLoadedLatency","upload")}),te(this,"getUpLoadedJitter",function(){return he(Ga,Q).call(Q,"getLoadedJitter","upload")}),te(this,"getUpLoadedLatencyPoints",function(){return he(Ga,Q).call(Q,"getLoadedLatencyPoints","upload",[])}),te(this,"getDownloadBandwidth",function(){return he(Ga,Q).call(Q,"getBandwidth","download")}),te(this,"getDownloadBandwidthPoints",function(){return he(Ga,Q).call(Q,"getBandwidthPoints","download",[])}),te(this,"getUploadBandwidth",function(){return he(Ga,Q).call(Q,"getBandwidth","upload")}),te(this,"getUploadBandwidthPoints",function(){return he(Ga,Q).call(Q,"getBandwidthPoints","upload",[])}),te(this,"getPacketLoss",function(){return he(Ga,Q).call(Q,"getPacketLoss","packetLoss")}),te(this,"getPacketLossDetails",function(){return he(Ga,Q).call(Q,"getPacketLossDetails","packetLoss",void 0,!0)}),te(this,"getScores",function(){return he(Yo,Q).getScores(Q.getSummary())}),Cn(this,Go,void 0),Cn(this,Ko,void 0),Cn(this,Yo,void 0),Cn(this,Ga,function(de,Se){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,be=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return Q.raw.hasOwnProperty(Se)&&Q.raw[Se].started?be&&Q.raw[Se].error?{error:Q.raw[Se].error}:he(Ko,Q)[de](Q.raw[Se].results):_e}),Cn(this,Qo,function(){return he(Ga,Q).call(Q,"getReachability","v4Reachability")}),Cn(this,pc,function(){return he(Ga,Q).call(Q,"getReachabilityDetails","v4Reachability")}),Cn(this,Bl,function(){return he(Ga,Q).call(Q,"getReachability","v6Reachability")}),Cn(this,zl,function(){return he(Ga,Q).call(Q,"getReachabilityDetails","v6Reachability")}),Dn(Go,this,K),this.clear(),Dn(Ko,this,new qc(he(Go,this))),Dn(Yo,this,new oi(he(Go,this)))},[{key:"isFinished",get:function(){return Object.values(this.raw).every(function($){return $.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(Qr(Qr(new Set(he(Go,this).measurements.map(function($){return $.type}))).map(function($){return te({},$,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var $={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:he(Qo,this),v6Reachability:he(Bl,this)};return Object.assign.apply(Object,Qr(Object.entries($).map(function(K){var Q=qt(K,2),de=Q[0],Se=(0,Q[1])();return Se===void 0?{}:te({},de,Se)})))}}])}(),Zc=function($){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return $&&Math.round($*Math.pow(10,K))/Math.pow(10,K)},fe=function($){return $.map(function(K){return Zc(K,2)})},X=function($){return $.map(function(K){return{bytes:+K.bytes,bps:Zc(K.bps)}})},re={latencyMs:["getUnloadedLatencyPoints",fe],download:["getDownloadBandwidthPoints",X],upload:["getUploadBandwidthPoints",X],downLoadedLatencyMs:["getDownLoadedLatencyPoints",fe],upLoadedLatencyMs:["getUpLoadedLatencyPoints",fe],packetLoss:["getPacketLossDetails",function($){return $.error?void 0:{numMessages:$.numMessagesSent,lossRatio:Zc($.packetLoss,4)}}]},ae=["type"],ie=["numPackets"],le=["bytes"],Pe=["latency","latencyUnderLoad","download","upload"],De=function(){return"".concat(Math.round(1e16*Math.random()))},ze=new WeakMap,Et=new WeakMap,kt=new WeakMap,zt=new WeakMap,mn=new WeakMap,jt=new WeakMap,an=new WeakMap,hn=new WeakMap,ke=new WeakMap,mt=new WeakMap,Nt=new WeakMap,ht=new WeakSet,At=function(){return Ra(function $(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};hi(this,$),Ho(this,ht),te(this,"onRunningChange",function(){}),te(this,"onResultsChange",function(){}),Cn(this,ze,function(){}),Cn(this,Et,function(){}),Cn(this,kt,void 0),Cn(this,zt,void 0),Cn(this,mn,De()),Cn(this,jt,-1),Cn(this,an,void 0),Cn(this,hn,1e6),Cn(this,ke,1e6),Cn(this,mt,!1),Cn(this,Nt,!1),Dn(kt,this,Object.assign({},Rs,K,ks)),Dn(zt,this,new cu(he(kt,this))),he(kt,this).autoStart&&this.play()},[{key:"results",get:function(){return he(zt,this)}},{key:"isRunning",get:function(){return he(mt,this)}},{key:"isFinished",get:function(){return he(Nt,this)}},{key:"onFinish",set:function($){Dn(ze,this,$)}},{key:"onError",set:function($){Dn(Et,this,$)}},{key:"pause",value:function(){Pe.includes(er(ht,this,rn).call(this))&&he(an,this).pause(),er(ht,this,We).call(this,!1)}},{key:"play",value:function(){he(mt,this)||(er(ht,this,We).call(this,!0),er(ht,this,yn).call(this))}},{key:"restart",value:function(){er(ht,this,ln).call(this),this.play()}}])}();function We($){$!==he(mt,this)&&(Dn(mt,this,$),this.onRunningChange(he(mt,this)))}function Mt($){var K=this;$!==he(Nt,this)&&(Dn(Nt,this,$),$&&setTimeout(function(){return he(ze,K).call(K,K.results)}))}function rn(){return he(jt,this)<0||he(jt,this)>=he(kt,this).measurements.length?null:he(kt,this).measurements[he(jt,this)].type}function Vt(){return he(zt,this).raw[er(ht,this,rn).call(this)]||void 0}function ln(){er(ht,this,en).call(this),Dn(mn,this,De()),Dn(jt,this,-1),Dn(an,this,void 0),er(ht,this,We).call(this,!1),er(ht,this,Mt).call(this,!1),he(zt,this).clear()}function en(){var $=he(an,this);$&&($.onFinished=$.onConnectionError=$.onFail=$.onMsgReceived=$.onCredentialsFailure=$.onMeasurementResult=function(){},Pe.includes(er(ht,this,rn).call(this))&&$.pause())}function yn(){var $,K=this;if(!(Pe.includes(er(ht,this,rn).call(this))&&er(ht,this,Vt).call(this)&&er(ht,this,Vt).call(this).started)||er(ht,this,Vt).call(this).finished||er(ht,this,Vt).call(this).finishedCurrentRound||er(ht,this,Vt).call(this).error){if(Dn(jt,this,($=he(jt,this),++$)),he(jt,this)>=he(kt,this).measurements.length)return er(ht,this,We).call(this,!1),void er(ht,this,Mt).call(this,!0);var Q,de=he(kt,this).measurements[he(jt,this)],Se=de.type,_e=Dt(de,ae),be=er(ht,this,Vt).call(this),Ve=he(kt,this),xe=Ve.downloadApiUrl,Ae=Ve.uploadApiUrl,Ke=Ve.estimatedServerTime;switch(Se){case"v4Reachability":case"v6Reachability":(Q=new fo("https://".concat(_e.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(vt){be.finished=!0,be.results=St({host:_e.host},vt),K.onResultsChange({type:Se}),er(ht,K,yn).call(K)};break;case"rpki":(Q=new fo("https://".concat(he(kt,this).rpkiInvalidHost),{timeout:5e3})).onFinished=function(vt){(vt.response?vt.response.json():Promise.resolve()).then(function(Rt){be.finished=!0,be.results=St({host:he(kt,K).rpkiInvalidHost,filteringInvalids:!vt.reachable},Rt?{asn:Rt.asn,name:Rt.name}:{}),K.onResultsChange({type:Se}),er(ht,K,yn).call(K)})};break;case"nxdomain":(Q=new fo("https://".concat(_e.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(vt){be.finished=!0,be.results={host:_e.nxhost,reachable:vt.reachable},K.onResultsChange({type:Se}),er(ht,K,yn).call(K)};break;case"packetLoss":case"packetLossUnderLoad":be.finished=!1;var $e=_e.numPackets,Ne=Dt(_e,ie),et=he(kt,this),ue=et.turnServerUri,me=et.turnServerCredsApiUrl,Me=et.turnServerUser,qe=et.turnServerPass,tt=et.includeCredentials;(Q=new Wo(St({turnServerUri:ue,turnServerCredsApi:me,turnServerCredsApiIncludeCredentials:tt,turnServerUser:Me,turnServerPass:qe,numMsgs:$e,downloadChunkSize:_e.loadDown?he(hn,this):void 0,uploadChunkSize:_e.loadUp?he(ke,this):void 0,downloadApiUrl:xe,uploadApiUrl:Ae},Ne))).onMsgReceived=function(){be.results=Object.assign({},Q.results),K.onResultsChange({type:Se})},Q.onFinished=function(){be.finished=!0,K.onResultsChange({type:Se}),er(ht,K,yn).call(K)},Q.onConnectionError=function(vt){be.error=vt,K.onResultsChange({type:Se}),he(Et,K).call(K,"Connection error while measuring packet loss: ".concat(vt)),er(ht,K,yn).call(K)},Q.onCredentialsFailure=function(){be.error="unable to get turn server credentials",K.onResultsChange({type:Se}),he(Et,K).call(K,"Error while measuring packet loss: unable to get turn server credentials."),er(ht,K,yn).call(K)};break;case"latency":case"latencyUnderLoad":be.finished=!1,(Q=new a([{dir:"down",bytes:0,count:_e.numPackets,bypassMinDuration:!0}],{downloadApiUrl:xe,uploadApiUrl:Ae,estimatedServerTime:Ke,logApiUrl:he(kt,this).logMeasurementApiUrl,measurementId:he(mn,this),downloadChunkSize:_e.loadDown?he(hn,this):void 0,uploadChunkSize:_e.loadUp?he(ke,this):void 0})).fetchOptions={credentials:he(kt,this).includeCredentials?"include":void 0},Q.onMeasurementResult=Q.onNewMeasurementStarted=function(vt,Rt){be.results=Object.assign({},Rt.down[0]),K.onResultsChange({type:Se})},Q.onFinished=function(){be.finished=!0,K.onResultsChange({type:Se}),he(mt,K)&&er(ht,K,yn).call(K)},Q.onConnectionError=function(vt){be.error=vt,K.onResultsChange({type:Se}),he(Et,K).call(K,"Connection error while measuring latency: ".concat(vt)),er(ht,K,yn).call(K)},Q.play();break;case"download":case"upload":if(be.finished||be.error)er(ht,this,yn).call(this);else{delete be.finishedCurrentRound;var Jt=he(kt,this)["measure".concat(Se==="download"?"Down":"Up","loadLoadedLatency")];(Q=new a([St({dir:Se==="download"?"down":"up"},_e)],{downloadApiUrl:xe,uploadApiUrl:Ae,estimatedServerTime:Ke,logApiUrl:he(kt,this).logMeasurementApiUrl,measurementId:he(mn,this),measureParallelLatency:Jt,parallelLatencyThrottleMs:he(kt,this).loadedLatencyThrottle})).fetchOptions={credentials:he(kt,this).includeCredentials?"include":void 0},Q.finishRequestDuration=he(kt,this).bandwidthFinishRequestDuration,Q.onNewMeasurementStarted=function(vt){var Rt=vt.count,xn=vt.bytes,ct=be.results=Object.assign({},be.results);!ct.hasOwnProperty(xn)&&(ct[xn]={timings:[],numMeasurements:0,sideLatency:Jt?[]:void 0}),ct[xn].numMeasurements-ct[xn].timings.length!==Rt&&(ct[xn].numMeasurements+=Rt,K.onResultsChange({type:Se}))},Q.onMeasurementResult=function(vt){var Rt=vt.bytes,xn=Dt(vt,le);be.results[Rt].timings.push(xn),be.results=Object.assign({},be.results),K.onResultsChange({type:Se})},Q.onParallelLatencyResult=function(vt){be.results[_e.bytes].sideLatency.push(vt),be.results=Object.assign({},be.results),K.onResultsChange({type:Se})},Q.onFinished=function(vt){var Rt=!he(kt,K).measurements.slice(he(jt,K)+1).map(function(Ue){return Ue.type}).includes(Se),xn=Math.min.apply(Math,Qr(Object.values(Se==="download"?vt.down:vt.up).slice(-1)[0].timings.map(function(Ue){return Ue.duration})));if(Rt||!_e.bypassMinDuration&&xn>he(kt,K).bandwidthFinishRequestDuration){be.finished=!0,K.onResultsChange({type:Se});var ct=.5*Object.keys(be.results).map(function(Ue){return+Ue}).sort(function(Ue,yt){return yt-Ue})[0];Se==="download"&&Dn(hn,K,ct),Se==="upload"&&Dn(ke,K,ct)}else be.finishedCurrentRound=!0;he(mt,K)&&er(ht,K,yn).call(K)},Q.onConnectionError=function(vt){be.error=vt,K.onResultsChange({type:Se}),he(Et,K).call(K,"Connection error while measuring ".concat(Se,": ").concat(vt)),er(ht,K,yn).call(K)},Q.play()}}Dn(an,this,Q),be.started=!0,this.onResultsChange({type:Se})}else he(an,this).play()}var cn=new WeakMap,Kt=new WeakMap,dr=function($){function K(Q){var de;hi(this,K);for(var Se=arguments.length,_e=new Array(Se>1?Se-1:0),be=1;be<Se;be++)_e[be-1]=arguments[be];return Cn(de=sc(this,K,[Q].concat(_e)),cn,void 0),Cn(de,Kt,function(Ve){he(cn,de)&&function(xe,Ae){var Ke=Ae.apiUrl,$e={};Object.entries(re).forEach(function(et){var ue=qt(et,2),me=ue[0],Me=qt(ue[1],2),qe=Me[0],tt=Me[1],Jt=tt===void 0?function(Rt){return Rt}:tt,vt=xe[qe]();vt&&($e[me]=Jt(vt))});var Ne=xe.getScores();Ne&&($e.scores=Object.assign.apply(Object,[{}].concat(Qr(Object.entries(Ne).map(function(et){var ue,me=qt(et,2);return te({},me[0],{points:(ue=me[1]).points,classification:ue.classificationName})}))))),fetch(Ke,{method:"POST",body:JSON.stringify($e)})}(Ve,{apiUrl:he(cn,de)})}),vn(K,"onFinish",he(Kt,de),de,1),Dn(cn,de,Object.assign({},Rs,Q,ks).logAimApiUrl),de}return oe(K,$),Ra(K,[{key:"onFinish",set:function(Q){var de=this;vn(K,"onFinish",function(Se){Q(Se),he(Kt,de).call(de,Se)},this,1)}}])}(At),tr=N(9633);function Ct($,K){var Q=typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"];if(!Q){if(Array.isArray($)||(Q=function(xe,Ae){if(xe){if(typeof xe=="string")return En(xe,Ae);var Ke={}.toString.call(xe).slice(8,-1);return Ke==="Object"&&xe.constructor&&(Ke=xe.constructor.name),Ke==="Map"||Ke==="Set"?Array.from(xe):Ke==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ke)?En(xe,Ae):void 0}}($))||K){Q&&($=Q);var de=0,Se=function(){};return{s:Se,n:function(){return de>=$.length?{done:!0}:{done:!1,value:$[de++]}},e:function(xe){throw xe},f:Se}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _e,be=!0,Ve=!1;return{s:function(){Q=Q.call($)},n:function(){var xe=Q.next();return be=xe.done,xe},e:function(xe){Ve=!0,_e=xe},f:function(){try{be||Q.return==null||Q.return()}finally{if(Ve)throw _e}}}}function En($,K){(K==null||K>$.length)&&(K=$.length);for(var Q=0,de=Array(K);Q<K;Q++)de[Q]=$[Q];return de}var br=[A],$r=!1,Xr=function(){return(0,E.A)(function $e(){(0,d.A)(this,$e),(0,_.A)(this,"keyProvider",null)},null,[{key:"setKeyProvider",value:function($e){this.keyProvider=$e}},{key:"getKeyProvider",value:function(){return this.keyProvider}},{key:"config",value:function($e){if(!$e)throw new Error("'token' is empty, please provide it in config");this.apiKey=$e;var Ne=x(Ge,void 0,w.apply(void 0,br));window.STORE=Ne,Qt.default.init({store:Ne})}},{key:"getCameras",value:(Ke=(0,k.A)(T().mark(function $e(){var Ne,et,ue,me,Me;return T().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(qe.prev=0,Ne=navigator.userAgent.includes("Firefox"),et=[],!Ne){qe.next=2;break}return qe.next=1,new Promise(function(tt,Jt){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(){var vt=(0,k.A)(T().mark(function Rt(xn){var ct;return T().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Ue.sent,et=ct.filter(function(yt){return yt.kind==="videoinput"}).map(function(yt){return new Sc(yt.deviceId,yt.groupId,yt.kind,yt.label)}),tt(et),xn.getTracks().forEach(function(yt){return yt.stop()});case 2:case"end":return Ue.stop()}},Rt)}));return function(Rt){return vt.apply(this,arguments)}}()).catch(function(vt){console.error("Error in getCameras()",vt),Jt(vt)})});case 1:qe.next=4;break;case 2:return qe.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=qe.sent,et=ue.filter(function(tt){return tt.kind==="videoinput"}).map(function(tt){return new Sc(tt.deviceId,tt.groupId,tt.kind,tt.label)});case 4:return qe.abrupt("return",et);case 5:qe.prev=5,Me=qe.catch(0),me=Me.message,Me instanceof TypeError&&Me.name==="TypeError"&&(me=Cr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(me));case 6:case"end":return qe.stop()}},$e,null,[[0,5]])})),function(){return Ke.apply(this,arguments)})},{key:"getMicrophones",value:(Ae=(0,k.A)(T().mark(function $e(){var Ne,et,ue,me,Me;return T().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(qe.prev=0,Ne=navigator.userAgent.includes("Firefox"),et=[],!Ne){qe.next=2;break}return qe.next=1,new Promise(function(tt,Jt){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var vt=(0,k.A)(T().mark(function Rt(xn){var ct;return T().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Ue.sent,et=ct.filter(function(yt){return yt.kind==="audioinput"}).map(function(yt){return new Bc(yt.deviceId,yt.groupId,yt.kind,yt.label)}),tt(et),xn.getTracks().forEach(function(yt){return yt.stop()});case 2:case"end":return Ue.stop()}},Rt)}));return function(Rt){return vt.apply(this,arguments)}}()).catch(function(vt){console.error("Error in getMicrophones()",vt),Jt(vt)})});case 1:qe.next=4;break;case 2:return qe.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=qe.sent,et=ue.filter(function(tt){return tt.kind==="audioinput"}).map(function(tt){return new Bc(tt.deviceId,tt.groupId,tt.kind,tt.label)});case 4:return qe.abrupt("return",et);case 5:qe.prev=5,Me=qe.catch(0),me=Me.message,Me instanceof TypeError&&Me.name==="TypeError"&&(me=Cr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(me));case 6:case"end":return qe.stop()}},$e,null,[[0,5]])})),function(){return Ae.apply(this,arguments)})},{key:"getPlaybackDevices",value:(xe=(0,k.A)(T().mark(function $e(){var Ne,et,ue,me,Me;return T().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(qe.prev=0,Ne=navigator.userAgent.includes("Firefox"),et=[],!Ne){qe.next=2;break}return qe.next=1,new Promise(function(tt,Jt){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var vt=(0,k.A)(T().mark(function Rt(xn){var ct;return T().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Ue.sent,et=ct.filter(function(yt){return yt.kind==="audiooutput"}).map(function(yt){return new rc(yt.deviceId,yt.groupId,yt.kind,yt.label)}),tt(et),xn.getTracks().forEach(function(yt){return yt.stop()});case 2:case"end":return Ue.stop()}},Rt)}));return function(Rt){return vt.apply(this,arguments)}}()).catch(function(vt){console.error("Error in getPlaybackDevices()",vt),Jt(vt)})});case 1:qe.next=4;break;case 2:return qe.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=qe.sent,et=ue.filter(function(tt){return tt.kind==="audiooutput"}).map(function(tt){return new rc(tt.deviceId,tt.groupId,tt.kind,tt.label)});case 4:return qe.abrupt("return",et);case 5:qe.prev=5,Me=qe.catch(0),me=Me.message,Me instanceof TypeError&&Me.name==="TypeError"&&(me="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(me));case 6:case"end":return qe.stop()}},$e,null,[[0,5]])})),function(){return xe.apply(this,arguments)})},{key:"getDevices",value:(Ve=(0,k.A)(T().mark(function $e(){var Ne,et,ue,me,Me,qe,tt;return T().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return Jt.prev=0,Jt.next=1,navigator.mediaDevices.enumerateDevices();case 1:Ne=Jt.sent,et=[],ue=Ct(Ne);try{for(ue.s();!(me=ue.n()).done;)Me=me.value,et.push(new Ks(Me.deviceId,Me.groupId,Me.kind,Me.label))}catch(vt){ue.e(vt)}finally{ue.f()}return Jt.abrupt("return",et);case 2:Jt.prev=2,tt=Jt.catch(0),qe=tt.message,tt instanceof TypeError&&(qe=tt.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":tt.message),console.error("An error occurred in getDevices(), ".concat(qe));case 3:case"end":return Jt.stop()}},$e,null,[[0,2]])})),function(){return Ve.apply(this,arguments)})},{key:"on",value:function($e,Ne){if($e!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on($e,Ne)}},{key:"addDeviceChangeEvent",value:function(){var $e=this;if(!$r){this.getDevices().then(function(et){$e.devices=et});try{navigator.mediaDevices.addEventListener("devicechange",function(){var et=(0,k.A)(T().mark(function ue(me){var Me,qe,tt,Jt,vt,Rt;return T().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return Me=$e.devices,xn.next=1,$e.getDevices();case 1:$e.devices=xn.sent,qe=new Array,tt=Ct($e.devices),xn.prev=2,vt=T().mark(function ct(){var Ue;return T().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:Ue=Jt.value,Me.filter(function(fn){return fn.deviceId==Ue.deviceId&&fn.kind==Ue.kind}).length==0?qe.push(Ue):Me=Me.filter(function(fn){return!(fn.deviceId==Ue.deviceId&&fn.kind==Ue.kind)});case 1:case"end":return yt.stop()}},ct)}),tt.s();case 3:if((Jt=tt.n()).done){xn.next=5;break}return xn.delegateYield(vt(),"t0",4);case 4:xn.next=3;break;case 5:xn.next=7;break;case 6:xn.prev=6,Rt=xn.catch(2),tt.e(Rt);case 7:return xn.prev=7,tt.f(),xn.finish(7);case 8:qe.length!=0&&$e.eventEmitter.emit("device-changed",{devices:$e.devices}),Me.length!=0&&$e.eventEmitter.emit("device-changed",{devices:$e.devices});case 9:case"end":return xn.stop()}},ue,null,[[2,6,7,8]])}));return function(ue){return et.apply(this,arguments)}}()),$r=!0}catch(et){var Ne=et.message;et instanceof TypeError&&(Ne=et.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":et.message),console.error("An error occurred in device-change event, ".concat(Ne))}}}},{key:"off",value:function($e,Ne){if($e!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off($e,Ne)}},{key:"checkPermissions",value:(be=(0,k.A)(T().mark(function $e(Ne){var et,ue,me,Me,qe;return T().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(Ne||(Ne=Ri.AUDIO_AND_VIDEO),et=new Map,!Ne.includes(Ri.AUDIO)&&!Ne.includes(Ri.AUDIO_AND_VIDEO)){tt.next=5;break}return ue=!0,tt.prev=1,tt.next=2,navigator.permissions.query({name:"microphone"});case 2:(me=tt.sent).state!="prompt"&&me.state!="denied"||(ue=!1),tt.next=4;break;case 3:throw tt.prev=3,tt.catch(1),Error("Browser does not support microphone permission check");case 4:et.set(Ri.AUDIO,ue);case 5:if(!Ne.includes(Ri.VIDEO)&&!Ne.includes(Ri.AUDIO_AND_VIDEO)){tt.next=10;break}return Me=!0,tt.prev=6,tt.next=7,navigator.permissions.query({name:"camera"});case 7:(qe=tt.sent).state!="prompt"&&qe.state!="denied"||(Me=!1),tt.next=9;break;case 8:throw tt.prev=8,tt.catch(6),Error("Browser does not support camera permission check");case 9:et.set(Ri.VIDEO,Me);case 10:return tt.abrupt("return",et);case 11:case"end":return tt.stop()}},$e,null,[[1,3],[6,8]])})),function($e){return be.apply(this,arguments)})},{key:"requestPermission",value:(_e=(0,k.A)(T().mark(function $e(Ne){var et,ue,me,Me,qe,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn,nn,un,Jn,Rr,_n;return T().wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:if(Ne||(Ne=Ri.AUDIO_AND_VIDEO),et=new Map,!Ne.includes(Ri.AUDIO_AND_VIDEO)){dn.next=12;break}return me={audio:!0,video:!0},Me=!0,dn.prev=1,dn.next=2,navigator.mediaDevices.getUserMedia(me);case 2:ue=dn.sent,dn.next=11;break;case 3:if(dn.prev=3,!((fn=dn.catch(1))instanceof DOMException)){dn.next=9;break}nn=fn.name,dn.next=nn==="NotAllowedError"?4:nn==="NotReadableError"?5:nn==="NotFoundError"?6:7;break;case 4:return fn.message==="Permission denied by system"&&(qe=Cr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",8);case 5:return qe=Aa(fn,"video"),dn.abrupt("continue",8);case 6:return qe=Cr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(qe=Cr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",8);case 7:qe=fn.message;case 8:dn.next=10;break;case 9:qe=fn instanceof TypeError&&fn.name==="TypeError"?Cr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:fn.message;case 10:Me=!1,qe&&console.error("An error occurred in request permission, ".concat(qe));case 11:ue&&setTimeout(function(){ue.getTracks().forEach(function(wr){wr.stop()})},100),et.set(Ri.AUDIO_AND_VIDEO,Me);case 12:if(!Ne.includes(Ri.VIDEO)){dn.next=24;break}return Jt={audio:!1,video:!0},vt=!0,dn.prev=13,dn.next=14,navigator.mediaDevices.getUserMedia(Jt);case 14:tt=dn.sent,dn.next=23;break;case 15:if(dn.prev=15,!((un=dn.catch(13))instanceof DOMException)){dn.next=21;break}Jn=un.name,dn.next=Jn==="NotAllowedError"?16:Jn==="NotReadableError"?17:Jn==="NotFoundError"?18:19;break;case 16:return un.message==="Permission denied by system"&&(Rt=Cr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",20);case 17:return Rt=Aa(un,"video"),dn.abrupt("continue",20);case 18:return Rt=Cr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Rt=Cr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",20);case 19:Rt=un.message;case 20:dn.next=22;break;case 21:Rt=un instanceof TypeError&&un.name==="TypeError"?Cr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:un.message;case 22:vt=!1,Rt&&console.error("An error occurred in request permission, ".concat(Rt));case 23:tt&&tt.getTracks().forEach(function(wr){wr.stop()}),et.set(Ri.VIDEO,vt);case 24:if(!Ne.includes(Ri.AUDIO)){dn.next=36;break}return ct={audio:!0,video:!1},Ue=!0,dn.prev=25,dn.next=26,navigator.mediaDevices.getUserMedia(ct);case 26:xn=dn.sent,dn.next=35;break;case 27:if(dn.prev=27,!((Rr=dn.catch(25))instanceof DOMException)){dn.next=33;break}_n=Rr.name,dn.next=_n==="NotAllowedError"?28:_n==="NotReadableError"?29:_n==="NotFoundError"?30:31;break;case 28:return Rr.message==="Permission denied by system"&&(yt=Cr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",32);case 29:return yt=Aa(Rr,"audio"),dn.abrupt("continue",32);case 30:return yt=Cr.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(yt=Cr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",32);case 31:yt=Rr.message;case 32:dn.next=34;break;case 33:yt=Rr instanceof TypeError&&Rr.name==="TypeError"?Cr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:Rr.message;case 34:Ue=!1,yt&&console.error("An error occurred in request permission, ".concat(yt));case 35:xn&&xn.getTracks().forEach(function(wr){wr.stop()}),et.set(Ri.AUDIO,Ue);case 36:return dn.abrupt("return",et);case 37:case"end":return dn.stop()}},$e,null,[[1,3],[13,15],[25,27]])})),function($e){return _e.apply(this,arguments)})},{key:"isInt",value:function($e){return typeof $e=="number"&&$e%1==0}},{key:"getNetworkStats",value:(Se=(0,k.A)(T().mark(function $e(){var Ne,et,ue,me,Me,qe,tt=arguments;return T().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return et=(Ne=tt.length>0&&tt[0]!==void 0?tt[0]:{}).timeoutDuration,ue=Ne.baseUrl,me=ue===void 0?"api.videosdk.live":ue,et&&this.isInt(et)||(et=6e4),Me=new Promise(function(vt,Rt){setTimeout(function(){Rt("Not able to get NetworkStats due to timeout")},et)}),qe=new Promise(function(vt,Rt){if(navigator.onLine){var xn=new dr({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}],uploadApiUrl:"https://".concat(me,"/test-upload-speed"),downloadApiUrl:"https://".concat(me,"/test-download-speed")});xn.isRunning?(xn.onFinish=function(ct){vt({downloadSpeed:parseFloat(Number(ct.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(ct.getUploadBandwidth()/1048576).toFixed(2))})},xn.onError=function(ct){Rt("Not able to get NetworkStats")}):Rt("Not able to get NetworkStats")}else Rt("Not able to get NetworkStats due to no Network")}),Jt.abrupt("return",Promise.race([qe,Me]));case 1:case"end":return Jt.stop()}},$e,this)})),function(){return Se.apply(this,arguments)})},{key:"checkConnection",value:(de=(0,k.A)(T().mark(function $e(){var Ne,et,ue,me,Me,qe,tt=arguments;return T().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return et=(Ne=tt.length>0&&tt[0]!==void 0?tt[0]:{}).timeoutDuration,ue=Ne.baseUrl,me=ue===void 0?"api.videosdk.live":ue,et&&this.isInt(et)||(et=6e4),Me=new Promise(function(vt,Rt){setTimeout(function(){Rt("TimeoutError: NetworkStats timeout")},et)}),qe=new Promise(function(vt,Rt){navigator.onLine?fetch("https://".concat(me,"/ping")).then(function(xn){xn.text().then(function(ct){ct=="pong"?vt("Connection established"):Rt("ConnectionError: Server unreachable")})}).catch(function(xn){Rt("ConnectionError: Server unreachable")}):Rt("NetworkError: Offline")}),Jt.abrupt("return",Promise.race([qe,Me]));case 1:case"end":return Jt.stop()}},$e,this)})),function(){return de.apply(this,arguments)})},{key:"analytics",value:function($e){var Ne,et,ue;!$e&&navigator&&navigator.userAgent&&(et=navigator.userAgent,delete(ue=f().parse(et)).engine);try{var me;(me=$e)!==null&&me!==void 0&&me.browserUserAgent||(et=navigator.userAgent,delete(ue=f().parse(et)).engine)}catch{}$e&&$e.rawUserAgent&&(et=$e.rawUserAgent,delete(ue=f().parse(et)).engine),$e||($e={});var Me={};Me.sdkType=$e.sdkType||"javascript",Me.sdkVersion=$e.sdkVersion||"0.2.14",Me.platform=$e.platform||((Ne=ue)===null||Ne===void 0||(Ne=Ne.platform)===null||Ne===void 0?void 0:Ne.type)||"",$e.browserUserAgent=="null"?Me.browserUserAgent=void 0:Me.browserUserAgent=ue,$e.deviceUserAgent&&(Me.deviceUserAgent=$e.deviceUserAgent),this._deviceInfo=Me}},{key:"initMeeting",value:function($e){var Ne,et=$e.meetingId,ue=$e.customCameraVideoTrack,me=ue===void 0?void 0:ue,Me=$e.customMicrophoneAudioTrack,qe=Me===void 0?void 0:Me,tt=$e.autoConsume,Jt=tt===void 0||tt,vt=$e.preferredProtocol,Rt=$e.mode,xn=$e.multiStream,ct=xn===void 0||xn,Ue=$e.participantId,yt=$e.name,fn=$e.micEnabled,nn=$e.webcamEnabled,un=$e.maxResolution,Jn=$e.metaData,Rr=$e.chatEnabled,_n=$e.useSpartialLayerAnalytics,dn=$e.signalingBaseUrl,wr=$e.defaultCamera,mr=$e.debugMode,Yn=mr===void 0||mr;if(!et)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var In=Ue?Ue.toString():j()({length:8}).toLowerCase(),gn=yt||j()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof vt!="string"&&(vt="UDP_OVER_TCP"),(Ne=vt)===null||Ne===void 0?void 0:Ne.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":vt=vt.toUpperCase();break;default:vt="UDP_OVER_TCP"}if(Rt||(Rt=Sn.nI.SEND_AND_RECV),Rt!==Sn.nI.SEND_AND_RECV&&Rt!==Sn.nI.SIGNALLING_ONLY&&Rt!==Sn.nI.RECV_ONLY&&Rt!==Sn.nI.VIEWER&&Rt!==Sn.nI.CONFERENCE)throw new Error('"mode" can only be either '.concat(Sn.nI.SEND_AND_RECV," or ").concat(Sn.nI.SIGNALLING_ONLY," or ").concat(Sn.nI.RECV_ONLY," "));if(Jn!=null&&(0,I.A)(Jn)!="object")throw new Error('"metaData" can only be object.');var Lr=this._deviceInfo.sdkType==="react-native",ha=Lr?wr?wr==="front"?1:0:me?me.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:Lr?1:0:0,Ci=new Qt.default({roomId:et,peerId:In,secret:this.apiKey,device:"unknown",displayName:gn,mode:Rt,useSimulcast:ct,produce:!0,consume:!0,datachannel:Rr!==!1,micEnabled:fn!==!1,webcamEnabled:nn!==!1,maxResolution:un||"hd",useSpartialLayerAnalytics:_n,_deviceInfo:this._deviceInfo,customCameraVideoTrack:me,customMicrophoneAudioTrack:qe,autoConsume:Jt,preferredProtocol:vt,signalingBaseUrl:dn,metaData:Jn,defaultCameraIndex:ha,debugMode:Yn,keyProvider:this.keyProvider});Bt.roomClient=Ci;var fs=new $t({id:In,displayName:gn,local:!0,mode:Rt,metaData:Jn});return new ii(et,fs,Ci)}},{key:"createCameraVideoTrack",value:(Q=(0,k.A)(T().mark(function $e(Ne){var et,ue,me,Me,qe,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn,nn,un,Jn,Rr;return T().wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:if(et=Ne.cameraId,ue=et===void 0?void 0:et,me=Ne.encoderConfig,Me=me===void 0?void 0:me,qe=Ne.facingMode,tt=qe===void 0?void 0:qe,Jt=Ne.optimizationMode,vt=Jt===void 0?void 0:Jt,Rt=Ne.multiStream,xn=Rt===void 0||Rt,!ue){_n.next=2;break}return _n.next=1,this.getCameras();case 1:(ct=_n.sent)&&ct.some(function(dn){return dn.deviceId})&&(ct.some(function(dn){return dn.deviceId===ue})||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."));case 2:return _n.prev=2,Ue=Me?ro.$.videoProfiles[Me]:ro.$.videoProfiles.h360p_w640p,console.log("VIDEO PROFILE",{videoProfile:Ue,encoderConfig:Me}),yt={video:{deviceId:ue||void 0,facingMode:tt||void 0,width:Ue.width,height:Ue.height,frameRate:Ue.frameRate}},_n.next=3,(0,Uo.lp)(yt);case 3:return fn=_n.sent,vt&&(fn.contentHint=vt),fn.encoderConfig=Me||"h360p_w640p",fn.contentHint=vt||"",fn.multiStream=xn,fn.cameraId=ue,_n.abrupt("return",fn);case 4:if(_n.prev=4,(Jn=_n.catch(2)).name!=="SecurityError"){_n.next=5;break}nn=Cr.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,_n.next=13;break;case 5:if(Jn.name!=="DOMException"){_n.next=6;break}nn=Cr.q.ERROR_RN_CAMERA_NOT_FOUND.message,_n.next=13;break;case 6:if(!(Jn instanceof DOMException)){_n.next=12;break}Rr=Jn.name,_n.next=Rr==="NotAllowedError"?7:Rr==="NotReadableError"?8:Rr==="NotFoundError"?9:10;break;case 7:return nn=ka(Jn,"video"),_n.abrupt("continue",11);case 8:return nn=Aa(Jn,"video"),_n.abrupt("continue",11);case 9:return nn=Cr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(nn=Cr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),_n.abrupt("continue",11);case 10:return nn=Jn.message,_n.abrupt("continue",11);case 11:_n.next=13;break;case 12:Jn.message=="getUserMedia is not implemented in this browser"?(un=Cr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,nn=un.message):nn=Jn.message;case 13:console.error("An error occurred in creating video track, ".concat(nn));case 14:case"end":return _n.stop()}},$e,this,[[2,4]])})),function($e){return Q.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(K=(0,k.A)(T().mark(function $e(Ne){var et,ue,me,Me,qe,tt,Jt,vt,Rt,xn,ct;return T().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return et=Ne.encoderConfig,ue=et===void 0?void 0:et,me=Ne.optimizationMode,Me=me===void 0?void 0:me,qe=Ne.withAudio,tt=qe===void 0?"enable":qe,Jt=Ne.multiStream,vt=Jt!==void 0&&Jt,Rt=ue?ro.$.screenShareProfiles[ue]:ro.$.screenShareProfiles.h720p_15fps,xn={audio:tt==="enable",video:{width:Rt.resolution.width,height:Rt.resolution.height,frameRate:Rt.frameRate}},Ue.next=1,(0,Uo.Zu)(xn);case 1:return ct=Ue.sent,Me&&(ct.contentHint=Me),ct.multiStream=vt,Ue.abrupt("return",ct);case 2:case"end":return Ue.stop()}},$e)})),function($e){return K.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:($=(0,k.A)(T().mark(function $e(Ne){var et,ue,me,Me,qe,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn;return T().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(et=Ne.noiseConfig,ue=et===void 0?void 0:et,me=Ne.encoderConfig,Me=me===void 0?void 0:me,qe=Ne.microphoneId,!(tt=qe===void 0?void 0:qe)){nn.next=2;break}return nn.next=1,this.getMicrophones();case 1:(Jt=nn.sent)&&Jt.some(function(un){return un.deviceId})&&(Jt.some(function(un){return un.deviceId===tt})||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 2:return nn.prev=2,vt=Me?ro.$.audioProfiles[Me]:ro.$.audioProfiles.speech_standard,Rt={audio:{deviceId:tt,sampleRate:vt.sampleRate,echoCancellation:ue?ue&&ue.acousticEchoCancellation:vt.echoCancellation,autoGainControl:ue?ue&&ue.autoGainControl:vt.autoGainControl,noiseSuppression:ue?ue&&ue.noiseSuppression:vt.noiseSuppression,channelCount:vt.channelCount}},nn.next=3,(0,Uo.lp)(Rt);case 3:return(xn=nn.sent).encoderConfig=Me||"speech_standard",xn.microphoneId=tt,nn.abrupt("return",xn);case 4:if(nn.prev=4,(yt=nn.catch(2)).name!=="SecurityError"){nn.next=5;break}ct=Cr.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,nn.next=13;break;case 5:if(yt.name!=="DOMException"){nn.next=6;break}ct=Cr.q.ERROR_RN_MIC_NOT_FOUND.message,nn.next=13;break;case 6:if(!(yt instanceof DOMException)){nn.next=12;break}fn=yt.name,nn.next=fn==="NotAllowedError"?7:fn==="NotReadableError"?8:fn==="NotFoundError"?9:10;break;case 7:return ct=ka(yt,"audio"),nn.abrupt("continue",11);case 8:return ct=Aa(yt,"audio"),nn.abrupt("continue",11);case 9:return ct=Cr.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(ct=Cr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),nn.abrupt("continue",11);case 10:return ct=yt.message,nn.abrupt("continue",11);case 11:nn.next=13;break;case 12:yt.message=="getUserMedia is not implemented in this browser"?(Ue=Cr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,ct=Ue.message):ct=yt.message;case 13:console.error("An error occurred in creating audio track, ".concat(ct));case 14:case"end":return nn.stop()}},$e,this,[[2,4]])})),function($e){return $.apply(this,arguments)})}]);var $,K,Q,de,Se,_e,be,Ve,xe,Ae,Ke}();function ka($,K){return($.message==="Permission denied"||$.message==="Permission dismissed"?K==="video"?Cr.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:Cr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:$.message.includes("The request is not allowed by the user agent")?K==="video"?Cr.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:Cr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:$.message==="Permission denied by system"?K==="video"?Cr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:Cr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:K==="video"?Cr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:Cr.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED).message}function Aa($,K){return($.message==="Device in use"?K==="video"?Cr.q.ERROR_CAMERA_IN_USE:Cr.q.ERROR_MICROPHONE_IN_USE:K==="video"?Cr.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:Cr.q.ERROR_MICROPHONE_IN_USE).message}(0,_.A)(Xr,"devices",[]),(0,_.A)(Xr,"eventEmitter",new Ft),(0,_.A)(Xr,"Constants",{errors:Cr.s,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},characterState:Xe,characterMode:{TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},hlsEvents:jc.V,transcriptionEvents:{TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},modes:Sn.nI,permission:Ri});var zr=Xr})(),B})())}(yf)),yf.exports}var Al=kA();function km(){return km=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},km.apply(null,arguments)}var Wr="videosdk-live-react-sdk",Lt={"participant-joined":Wr+"-participant-joined","participant-left":Wr+"-participant-left","speaker-changed":Wr+"-speaker-changed","presenter-changed":Wr+"-presenter-changed","main-participant-changed":Wr+"-main-participant-changed","entry-requested":Wr+"-entry-requested","entry-responded":Wr+"-entry-responded","recording-started":Wr+"-recording-started","recording-stopped":Wr+"-recording-stopped","chat-message":Wr+"-chat-message","meeting-joined":Wr+"-meeting-joined","meeting-left":Wr+"-meeting-left","live-stream-started":Wr+"-live-stream-started","live-stream-stopped":Wr+"-live-stream-stopped","video-state-changed":Wr+"-video-state-changed","video-seeked":Wr+"-video-seeked","webcam-requested":Wr+"-webcam-requested","mic-requested":Wr+"-mic-requested","pin-state-changed":Wr+"-pin-state-changed","connection-open":Wr+"-connection-open","connection-close":Wr+"-connection-close","switch-meeting":Wr+"-switch-meeting",error:Wr+"-error","hls-started":Wr+"-hls-started","hls-stopped":Wr+"-hls-stopped","hls-state-changed":Wr+"-hls-state-changed","recording-state-changed":Wr+"-recording-state-changed","livestream-state-changed":Wr+"-livestream-state-changed","meeting-state-changed":Wr+"-meeting-state-changed","participant-mode-changed":Wr+"-participant-mode-changed","transcription-state-changed":Wr+"-transcription-state-changed","transcription-text":Wr+"-transcription-text","character-joined":Wr+"-character-joined","character-left":Wr+"-character-left","whiteboard-started":Wr+"-whiteboard-started","whiteboard-stopped":Wr+"-whiteboard-stopped","paused-all-streams":Wr+"-paused-all-streams","resumed-all-streams":Wr+"-resumed-all-streams","media-relay-started":Wr+"-media-relay-started","media-relay-stopped":Wr+"-media-relay-stopped","media-relay-error":Wr+"-media-relay-error","media-relay-request-response":Wr+"-media-relay-request-response","media-relay-request-received":Wr+"-media-relay-request-received"},Ot=new RA;Ot.setMaxListeners(9999);var rw=ne.createContext(),Vm=function(r){var i=r===void 0?{}:r,o=i.onParticipantJoined,h=o===void 0?function(){}:o,N=i.onParticipantLeft,B=N===void 0?function(){}:N,I=i.onSpeakerChanged,k=I===void 0?function(){}:I,d=i.onPresenterChanged,E=d===void 0?function(){}:d,_=i.onMainParticipantChanged,b=_===void 0?function(){}:_,T=i.onEntryRequested,v=T===void 0?function(){}:T,f=i.onEntryResponded,R=f===void 0?function(){}:f,g=i.onPausedAllStreams,F=g===void 0?function(){}:g,m=i.onResumedAllStreams,P=m===void 0?function(){}:m,S=i.onRecordingStarted,H=S===void 0?function(){}:S,x=i.onRecordingStopped,y=x===void 0?function(){}:x,w=i.onChatMessage,p=w===void 0?function(){}:w,C=i.onMeetingJoined,A=C===void 0?function(){}:C,M=i.onMeetingLeft,j=M===void 0?function(){}:M,U=i.onLiveStreamStarted,z=U===void 0?function(){}:U,W=i.onLiveStreamStopped,Z=W===void 0?function(){}:W,ce=i.onVideoStateChanged,J=ce===void 0?function(){}:ce,Ee=i.onVideoSeeked,Ce=Ee===void 0?function(){}:Ee,Re=i.onWebcamRequested,ye=Re===void 0?function(){}:Re,Te=i.onMicRequested,He=Te===void 0?function(){}:Te,we=i.onPinStateChanged,Je=we===void 0?function(){}:we,Be=i.onConnectionOpen,nt=Be===void 0?function(){}:Be,Qe=i.onConnetionClose,Ze=Qe===void 0?function(){}:Qe,Ht=i.onSwitchMeeting,or=Ht===void 0?function(){}:Ht,Nr=i.onError,jn=Nr===void 0?function(){}:Nr,cr=i.onHlsStarted,Gn=cr===void 0?function(){}:cr,Un=i.onHlsStopped,Le=Un===void 0?function(){}:Un,je=i.onHlsStateChanged,Ge=je===void 0?function(){}:je,Qt=i.onRecordingStateChanged,Ft=Qt===void 0?function(){}:Qt,xt=i.onLivestreamStateChanged,pn=xt===void 0?function(){}:xt,Ln=i.onMeetingStateChanged,Bt=Ln===void 0?function(){}:Ln,lr=i.onParticipantModeChanged,Fr=lr===void 0?function(){}:lr,kr=i.onCharacterJoined,Vr=kr===void 0?function(){}:kr,Hr=i.onCharacterLeft,Or=Hr===void 0?function(){}:Hr,Gr=i.onMediaRelayStarted,ga=Gr===void 0?function(){}:Gr,ta=i.onMediaRelayStopped,oa=ta===void 0?function(){}:ta,Nn=i.onMediaRelayError,Ha=Nn===void 0?function(){}:Nn,Ca=i.onMediaRelayRequestResponse,Kr=Ca===void 0?function(){}:Ca,hr=i.onMediaRelayRequestReceived,at=hr===void 0?function(){}:hr;return ne.useEffect(function(){return Ot.on(Lt["participant-joined"],h),Ot.on(Lt["participant-left"],B),Ot.on(Lt["speaker-changed"],k),Ot.on(Lt["presenter-changed"],E),Ot.on(Lt["main-participant-changed"],b),Ot.on(Lt["entry-requested"],v),Ot.on(Lt["entry-responded"],R),Ot.on(Lt["paused-all-streams"],F),Ot.on(Lt["resumed-all-streams"],P),Ot.on(Lt["recording-started"],H),Ot.on(Lt["recording-stopped"],y),Ot.on(Lt["chat-message"],p),Ot.on(Lt["meeting-joined"],A),Ot.on(Lt["meeting-left"],j),Ot.on(Lt["live-stream-started"],z),Ot.on(Lt["live-stream-stopped"],Z),Ot.on(Lt["video-state-changed"],J),Ot.on(Lt["video-seeked"],Ce),Ot.on(Lt["webcam-requested"],ye),Ot.on(Lt["mic-requested"],He),Ot.on(Lt["pin-state-changed"],Je),Ot.on(Lt["connection-open"],nt),Ot.on(Lt["connection-close"],Ze),Ot.on(Lt["switch-meeting"],or),Ot.on(Lt.error,jn),Ot.on(Lt["hls-started"],Gn),Ot.on(Lt["hls-stopped"],Le),Ot.on(Lt["hls-state-changed"],Ge),Ot.on(Lt["recording-state-changed"],Ft),Ot.on(Lt["livestream-state-changed"],pn),Ot.on(Lt["meeting-state-changed"],Bt),Ot.on(Lt["participant-mode-changed"],Fr),Ot.on(Lt["character-joined"],Vr),Ot.on(Lt["character-left"],Or),Ot.on(Lt["media-relay-started"],ga),Ot.on(Lt["media-relay-stopped"],oa),Ot.on(Lt["media-relay-error"],Ha),Ot.on(Lt["media-relay-request-response"],Kr),Ot.on(Lt["media-relay-request-received"],at),function(){Ot.off(Lt["meeting-state-changed"],Bt),Ot.off(Lt["participant-joined"],h),Ot.off(Lt["participant-left"],B),Ot.off(Lt["speaker-changed"],k),Ot.off(Lt["presenter-changed"],E),Ot.off(Lt["main-participant-changed"],b),Ot.off(Lt["entry-requested"],v),Ot.off(Lt["entry-responded"],R),Ot.off(Lt["paused-all-streams"],F),Ot.off(Lt["resumed-all-streams"],P),Ot.off(Lt["recording-started"],H),Ot.off(Lt["recording-stopped"],y),Ot.off(Lt["chat-message"],p),Ot.off(Lt["meeting-joined"],A),Ot.off(Lt["meeting-left"],j),Ot.off(Lt["live-stream-started"],z),Ot.off(Lt["live-stream-stopped"],Z),Ot.off(Lt["video-state-changed"],J),Ot.off(Lt["video-seeked"],Ce),Ot.off(Lt["webcam-requested"],ye),Ot.off(Lt["mic-requested"],He),Ot.off(Lt["pin-state-changed"],Je),Ot.off(Lt["connection-open"],nt),Ot.off(Lt["connection-close"],Ze),Ot.off(Lt["switch-meeting"],or),Ot.off(Lt.error,jn),Ot.off(Lt["hls-started"],Gn),Ot.off(Lt["hls-stopped"],Le),Ot.off(Lt["hls-state-changed"],Ge),Ot.off(Lt["recording-state-changed"],Ft),Ot.off(Lt["livestream-state-changed"],pn),Ot.off(Lt["participant-mode-changed"],Fr),Ot.off(Lt["character-joined"],Vr),Ot.off(Lt["character-left"],Or),Ot.off(Lt["media-relay-started"],ga),Ot.off(Lt["media-relay-stopped"],oa),Ot.off(Lt["media-relay-error"],Ha),Ot.off(Lt["media-relay-request-response"],Kr),Ot.off(Lt["media-relay-request-received"],at)}},[]),ne.useContext(rw)},CA="0.3.14",TA=function(r){var i=r.children,o=r.config,h=r.token,N=r.joinWithoutUserInteraction,B=r.reinitialiseMeetingOnConfigChange,I=r.deviceInfo,k=r.keyProvider,d=ne.useState(null),E=d[0],_=d[1],b=ne.useState(null),T=b[0],v=b[1],f=ne.useState(null),R=f[0],g=f[1],F=ne.useState(null),m=F[0],P=F[1],S=ne.useState(null),H=S[0],x=S[1],y=ne.useState(!1),w=y[0],p=y[1],C=ne.useState(!1),A=C[0],M=C[1],j=ne.useState(!1),U=j[0],z=j[1],W=ne.useState(!1),Z=W[0],ce=W[1],J=ne.useState([]),Ee=J[0],Ce=J[1],Re=ne.useState(new Map),ye=Re[0],Te=Re[1],He=ne.useState(new Map),we=He[0],Je=He[1],Be=ne.useState(new Map),nt=Be[0],Qe=Be[1],Ze=ne.useState(!1),Ht=Ze[0],or=Ze[1],Nr=ne.useState(new Map),jn=Nr[0],cr=Nr[1],Gn=ne.useState(!1),Un=Gn[0],Le=Gn[1],je=ne.useState(!1),Ge=je[0],Qt=je[1],Ft=ne.useState("RECORDING_STOPPED"),xt=Ft[0],pn=Ft[1],Ln=ne.useState("LIVESTREAM_STOPPED"),Bt=Ln[0],lr=Ln[1],Fr=ne.useState("HLS_STOPPED"),kr=Fr[0],Vr=Fr[1],Hr=ne.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Or=Hr[0],Gr=Hr[1],ga=ne.useState("TRANSCRIPTION_STOPPED"),ta=ga[0],oa=ga[1],Nn=ne.useRef(),Ha=ne.useRef(),Ca=ne.useRef(),Kr=ne.useRef(),hr=ne.useRef(),at=ne.useRef(k),ut=ne.useRef(o),$t=ne.useRef(h),Tt=ne.useRef(!1),tn=ne.useRef(),Xt=ne.useMemo(function(){return B},[]);ne.useEffect(function(){Nn.current=E},[E]),ne.useEffect(function(){Ha.current=w},[w]),ne.useEffect(function(){Ca.current=A},[A]),ne.useEffect(function(){Kr.current=U},[U]),ne.useEffect(function(){hr.current=Z},[Z]),ne.useEffect(function(){ut.current=o},[o]),ne.useEffect(function(){$t.current=h},[h]),ne.useEffect(function(){tn.current=Ge},[Ge]);var Xe=function(){_(null),v(null),g(null),P(null),x(null),p(!1),M(!1),z(!1),ce(!1),Ce([]),or(!1),Te(new Map),Je(new Map),Qe(new Map),cr(new Map),Le(!1),Qt(!1),pn("RECORDING_STOPPED"),lr("LIVESTREAM_STOPPED"),Vr("HLS_STOPPED"),oa("TRANSCRIPTION_STOPPED"),Gr({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},Sn=function(ge){Te(function(Pt){Pt.set(ge.id,ge);var Kn=new Map(Pt);return Kn}),Ot.emit(Lt["participant-joined"],ge)},Rn=function(ge){Te(function(Pt){Pt.delete(ge.id);var Kn=new Map(Pt);return Kn}),Ot.emit(Lt["participant-left"],ge)},Zn=function(ge){var Pt,Kn;x(ge),z(ge===(Nn==null||(Pt=Nn.current)===null||Pt===void 0||(Kn=Pt.localParticipant)===null||Kn===void 0?void 0:Kn.id)),Ot.emit(Lt["presenter-changed"],ge)},ur=function(ge){g(ge),Ot.emit(Lt["main-participant-changed"],ge)},Wt=function(ge){P(ge),Ot.emit(Lt["speaker-changed"],ge)},bt=function(ge){Ce(function(Pt){return[].concat(Pt,[ge])}),Ot.emit(Lt["chat-message"],ge)},Pn=function(ge){Ot.emit(Lt["entry-requested"],ge)},kn=function(ge,Pt){Ot.emit(Lt["entry-responded"],ge,Pt)},bn=function(){ce(!0),Ot.emit(Lt["recording-started"])},Ar=function(){ce(!1),Ot.emit(Lt["recording-stopped"])},Sr=function(ge){ge.track.readyState==="live"&&(ge.kind==="video"?M(!0):ge.kind==="audio"&&p(!0))},Dr=function(ge){ge.kind==="video"?M(!1):ge.kind==="audio"&&p(!1)},Xn=function(ge){or(!0),Ot.emit(Lt["live-stream-started"],ge)},qn=function(){or(!1),Ot.emit(Lt["live-stream-stopped"])},ma=function(ge){Qt(!0),Ot.emit(Lt["hls-started"],ge)},ca=function(){Qt(!1),Ot.emit(Lt["hls-stopped"])},Ta=function(ge){Ot.emit(Lt["video-state-changed"],ge)},Da=function(ge){Ot.emit(Lt["video-seeked"],ge)},ss=function(ge){Ot.emit(Lt["webcam-requested"],ge)},ai=function(ge){Ot.emit(Lt["mic-requested"],ge)},Ui=function(ge){ge.switchRoomId?(Ce(function(Pt){return[].concat(Pt,ge.messages)}),Ot.emit(Lt["meeting-joined"],ge)):(Tt.current=!0,Ce(function(Pt){return[].concat(Pt,ge.messages)}),Ot.emit(Lt["meeting-joined"],ge),Le(!0))},os=function(){Ot.emit(Lt["meeting-left"]);var ge=Nn.current;if(ge){var Pt;typeof ge?.off=="function"&&(ge.off("meeting-state-changed",On),ge.off("participant-joined",Sn),ge.off("participant-left",Rn),ge.off("presenter-changed",Zn),ge.off("main-participant-changed",ur),ge.off("speaker-changed",Wt),ge.off("entry-requested",Pn),ge.off("entry-responded",kn),ge.off("chat-message",bt),ge.off("recording-started",bn),ge.off("recording-stopped",Ar),ge.off("meeting-joined",Ui),ge.off("meeting-left",os),ge.off("livestream-started",Xn),ge.off("livestream-stopped",qn),ge.off("video-state-changed",Ta),ge.off("video-seeked",Da),ge.off("webcam-requested",ss),ge.off("mic-requested",ai),ge.off("pin-state-changed",Ei),ge.off("paused-all-streams",Qi),ge.off("resumed-all-streams",Zr),ge.off("connection-open",Si),ge.off("connection-close",Ai),ge.off("switch-meeting",sn),ge.off("error",$n),ge.off("hls-started",ma),ge.off("hls-stopped",ca),ge.off("recording-state-changed",Bn),ge.off("livestream-state-changed",nr),ge.off("hls-state-changed",wn),ge.off("participant-mode-changed",ua),ge.off("whiteboard-stopped",An),ge.off("whiteboard-started",yr),ge.off("transcription-state-changed",jr),ge.off("character-joined",Br),ge.off("character-left",Ea)),typeof(ge==null||(Pt=ge.localParticipant)===null||Pt===void 0?void 0:Pt.off)=="function"&&(ge.localParticipant.off("stream-enabled",Sr),ge.localParticipant.off("stream-disabled",Dr)),Xe()}},Ei=function(ge){var Pt=ge.participantId,Kn=ge.state,aa=ge.pinnedBy;Qe(function(qa){!Kn.cam&&!Kn.share?qa.delete(Pt):qa.set(Pt,Kn);var ii=new Map(qa);return ii}),Ot.emit(Lt["pin-state-changed"],{participantId:Pt,state:Kn,pinnedBy:aa})},Qi=function(ge){var Pt=ge.kind;Ot.emit(Lt["paused-all-streams"],{kind:Pt})},Zr=function(ge){var Pt=ge.kind;Ot.emit(Lt["resumed-all-streams"],{kind:Pt})},Si=function(ge){cr(function(Pt){Pt.set(ge.id,ge);var Kn=new Map(Pt);return Kn}),Ot.emit(Lt["connection-open"],ge)},Ai=function(ge){cr(function(Pt){Pt.delete(ge);var Kn=new Map(Pt);return Kn}),Ot.emit(Lt["connection-close"],ge)},sn=function(ge){Ot.emit(Lt["switch-meeting"],ge)},$n=function(ge){Ot.emit(Lt.error,ge)},Bn=function(ge){pn(ge?.status),Ot.emit(Lt["recording-state-changed"],ge)},nr=function(ge){lr(ge?.status),Ot.emit(Lt["livestream-state-changed"],ge)},wn=function(ge){Vr(ge?.status),ge?.status=="HLS_PLAYABLE"?Gr({downstreamUrl:ge?.downstreamUrl,playbackHlsUrl:ge?.playbackHlsUrl,livestreamUrl:ge?.livestreamUrl}):ge?.status=="HLS_STOPPED"&&Gr({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Ot.emit(Lt["hls-state-changed"],ge)},On=function(ge){Ot.emit(Lt["meeting-state-changed"],ge)},jr=function(ge){oa(ge?.status),Ot.emit(Lt["transcription-state-changed"],ge)},vr=function(ge){Ot.emit(Lt["transcription-text"],ge)},yr=function(ge){Ot.emit(Lt["whiteboard-started"],ge)},An=function(ge){Ot.emit(Lt["whiteboard-stopped"],ge)},Br=function(ge){Je(function(Pt){Pt.set(ge.id,ge);var Kn=new Map(Pt);return Kn}),Ot.emit(Lt["character-joined"],ge)},Ea=function(ge){Je(function(Pt){Pt.delete(ge.id);var Kn=new Map(Pt);return Kn}),Ot.emit(Lt["character-left"],ge)},ua=function(ge){var Pt,Kn;Te(function(aa){var qa=aa.get(ge.participantId);qa.mode=ge.mode,aa.set(qa.id,qa);var ii=new Map(aa);return ii}),ge.participantId===(Nn==null||(Pt=Nn.current)===null||Pt===void 0||(Kn=Pt.localParticipant)===null||Kn===void 0?void 0:Kn.id)&&v(function(aa){return aa.mode=ge.mode,aa}),Ot.emit(Lt["participant-mode-changed"],ge)},ya=function(ge){Ot.emit(Lt["media-relay-started"],ge)},ja=function(ge){Ot.emit(Lt["media-relay-stopped"],ge)},Ba=function(ge){Ot.emit(Lt["media-relay-error"],ge)},Wa=function(ge){Ot.emit(Lt["media-relay-request-response"],ge)},Sa=function(ge){Ot.emit(Lt["media-relay-request-received"],ge)},Qa=function(){var ge=Al.VideoSDK&&Al.VideoSDK.initMeeting(ut.current);_(ge);var Pt=ge.localParticipant,Kn=ge.participants,aa=ge.characters;Kn.set(Pt.id,Pt),Te(Kn),Je(aa),v(Pt),ge.on("meeting-state-changed",On),ge.on("participant-joined",Sn),ge.on("participant-left",Rn),ge.on("presenter-changed",Zn),ge.on("main-participant-changed",ur),ge.on("speaker-changed",Wt),ge.on("entry-requested",Pn),ge.on("entry-responded",kn),ge.on("chat-message",bt),ge.on("recording-started",bn),ge.on("recording-stopped",Ar),ge.on("meeting-joined",Ui),ge.on("meeting-left",os),ge.on("livestream-started",Xn),ge.on("livestream-stopped",qn),ge.on("video-state-changed",Ta),ge.on("video-seeked",Da),ge.on("webcam-requested",ss),ge.on("mic-requested",ai),ge.on("pin-state-changed",Ei),ge.on("paused-all-streams",Qi),ge.on("resumed-all-streams",Zr),ge.on("connection-open",Si),ge.on("connection-close",Ai),ge.on("switch-meeting",sn),ge.on("error",$n),ge.on("hls-started",ma),ge.on("hls-stopped",ca),ge.on("recording-state-changed",Bn),ge.on("livestream-state-changed",nr),ge.on("hls-state-changed",wn),ge.on("participant-mode-changed",ua),ge.on("transcription-state-changed",jr),ge.on("transcription-text",vr),ge.on("whiteboard-started",yr),ge.on("whiteboard-stopped",An),ge.on("character-joined",Br),ge.on("character-left",Ea),ge.on("media-relay-started",ya),ge.on("media-relay-stopped",ja),ge.on("media-relay-error",Ba),ge.on("media-relay-request-response",Wa),ge.on("media-relay-request-received",Sa),ge.localParticipant.on("stream-enabled",Sr),ge.localParticipant.on("stream-disabled",Dr),ge.join()},pi=function(){var ge=Nn.current;ge&&ge.leave()},Is=function(){var ge=Nn.current;ge&&ge.end()},Ji=function(ge){var Pt=Nn.current;Pt&&Pt.pauseAllStreams(ge)},cs=function(ge){var Pt=Nn.current;Pt&&Pt.resumeAllStreams(ge)},mi=function(ge,Pt,Kn,aa){var qa=Nn.current;qa&&qa.startRecording(ge,Pt,Kn,aa)},no=function(){var ge=Nn.current;if(ge){var Pt=hr.current;Pt&&ge.stopRecording()}},$s=function(ge){ge===void 0&&(ge=void 0);var Pt=Nn.current;Pt&&Pt.unmuteMic(ge)},ws=function(){var ge=Nn.current;ge&&ge.muteMic()},js=function(ge){ge===void 0&&(ge=void 0);var Pt=Ha.current;Pt?ws():$s(ge)},ls=function(){var ge=Nn.current;ge&&ge.disableWebcam()},Xi=function(ge){ge===void 0&&(ge=void 0);var Pt=Nn.current;Pt&&Pt.enableWebcam(ge)},us=function(ge){ge===void 0&&(ge=void 0);var Pt=Ca.current;Pt?ls():Xi(ge)},zo=function(ge){var Pt=ge.meetingId,Kn=ge.token,aa=Nn.current;aa&&aa.switchTo({meetingId:Pt,token:Kn})},_r=function(){var ge=Nn.current;ge&&ge.disableScreenShare()},xi=function(ge){ge===void 0&&(ge=void 0);var Pt=Nn.current;Pt&&Pt.enableScreenShare(ge)},na=function(ge){ge===void 0&&(ge=void 0);var Pt=Kr.current;Pt?_r():xi(ge)},Hi=function(ge){var Pt=Nn.current;Pt&&Pt.changeMode(ge)},Bs=function(ge){var Pt=Nn.current;Pt&&Pt.sendChatMessage(ge)},Wn=function(ge,Pt){var Kn=Nn.current;Kn&&Kn.respondEntry(ge,Pt)},Oi=function(){try{var ge=Nn.current;return Promise.resolve(function(){if(ge)return Promise.resolve(ge.getMics())}())}catch(Pt){return Promise.reject(Pt)}},Fi=function(){try{var ge=Nn.current;return Promise.resolve(function(){if(ge)return Promise.resolve(ge.getWebcams())}())}catch(Pt){return Promise.reject(Pt)}},qi=function(ge){var Pt=Nn.current;Pt&&Pt.changeWebcam(ge)},pr=function(ge){var Pt=Nn.current;Pt&&Pt.replaceWebcamStream(ge)},Ma=function(ge){var Pt=Nn.current;Pt&&Pt.changeMic(ge)},Di=function(ge){var Pt=ge.link,Kn=Nn.current;Kn&&Kn.startVideo({link:Pt})},Ro=function(){var ge=Nn.current;ge&&ge.stopVideo()},ti=function(){var ge=Nn.current;ge&&ge.resumeVideo()},Es=function(ge){var Pt=ge.currentTime,Kn=Nn.current;Kn&&Kn.pauseVideo({currentTime:Pt})},Ws=function(){var ge=Nn.current;ge&&ge.enableAdaptiveSubscription()},Fa=function(){var ge=Nn.current;ge&&ge.disableAdaptiveSubscription()},nc=function(ge){var Pt=ge.destinationMeetingId,Kn=ge.token,aa=ge.kinds,qa=Nn.current;qa&&qa.requestMediaRelay({destinationMeetingId:Pt,token:Kn,kinds:aa})},Mi=function(ge){var Pt=Nn.current;Pt&&Pt.stopMediaRelay(ge)},Mr=function(ge){var Pt=ge.currentTime,Kn=Nn.current;Kn&&Kn.seekVideo({currentTime:Pt})},Vi=function(ge,Pt){var Kn=Nn.current;Kn&&Kn.startLivestream(ge,Pt)},ni=function(){var ge=Nn.current;ge&&ge.stopLivestream()},Ss=function(ge){var Pt=ge.meetingId,Kn=ge.payload;try{var aa=Nn.current,qa=function(){if(aa)return Promise.resolve(aa.connectTo({meetingId:Pt,payload:Kn})).then(function(){})}();return Promise.resolve(qa&&qa.then?qa.then(function(){}):void 0)}catch(ii){return Promise.reject(ii)}},ko=function(ge,Pt){var Kn=Nn.current;Kn&&Kn.startHls(ge,Pt)},Co=function(){var ge=Nn.current;ge&&ge.stopHls()},zs=function(){Al.VideoSDK.config($t.current),at.current&&Al.VideoSDK.setKeyProvider(at.current),I?Al.VideoSDK.analytics(I):Al.VideoSDK.analytics({sdkType:"react-web",sdkVersion:CA}),N&&Qa()};return ne.useEffect(function(){zs()},[]),ne.useEffect(function(){Xt&&Tt.current&&(pi(),zs(),!N&&Qa())},[o.meetingId,h,Xt]),c.createElement(rw.Provider,{value:{meetingId:E?.id,meeting:E,baseUrl:E?.baseUrl,localParticipant:T,mainParticipant:R,activeSpeakerId:m,participants:ye,characters:we,presenterId:H,localMicOn:w,localWebcamOn:A,localScreenShareOn:U,messages:Ee,isRecording:Z,isLiveStreaming:Ht,pinnedParticipants:nt,connections:jn,isHls:Ge,recordingState:xt,livestreamState:Bt,hlsState:kr,hlsUrls:Or,transcriptionState:ta,isMeetingJoined:Un,selectedCameraDevice:E?.selectedCameraDevice,selectedMicrophoneDevice:E?.selectedMicrophoneDevice,join:Qa,leave:pi,end:Is,pauseAllStreams:Ji,resumeAllStreams:cs,startRecording:mi,stopRecording:no,sendChatMessage:Bs,respondEntry:Wn,muteMic:ws,unmuteMic:$s,toggleMic:js,disableWebcam:ls,enableWebcam:Xi,toggleWebcam:us,disableScreenShare:_r,enableScreenShare:xi,toggleScreenShare:na,switchTo:zo,getMics:Oi,getWebcams:Fi,changeWebcam:qi,replaceWebcamStream:pr,changeMic:Ma,changeMode:Hi,startVideo:Di,stopVideo:Ro,resumeVideo:ti,pauseVideo:Es,seekVideo:Mr,startLivestream:Vi,stopLivestream:ni,connectTo:Ss,startHls:ko,stopHls:Co,enableAdaptiveSubscription:Ws,disableAdaptiveSubscription:Fa,requestMediaRelay:nc,stopMediaRelay:Mi}},i)},aw=function(r,i){var o={},h=o.onStreamEnabled,N=h===void 0?function(){}:h,B=o.onStreamDisabled,I=B===void 0?function(){}:B,k=o.onMediaStatusChanged,d=k===void 0?function(){}:k,E=o.onVideoQualityChanged,_=E===void 0?function(){}:E,b=o.onStreamPaused,T=b===void 0?function(){}:b,v=o.onStreamResumed,f=v===void 0?function(){}:v,R=o.onProducerAdded,g=R===void 0?function(){}:R,F=o.onProducerRemoved,m=F===void 0?function(){}:F,P=o.onConsumerAdded,S=P===void 0?function(){}:P,H=o.onConsumerRemoved,x=H===void 0?function(){}:H,y=ne.useState(null),w=y[0],p=y[1],C=ne.useState(null),A=C[0],M=C[1],j=ne.useState(null),U=j[0],z=j[1],W=ne.useState(null),Z=W[0],ce=W[1],J=Vm(),Ee=ne.useMemo(function(){var hr,at=J?.participants,ut=J?.localParticipant,$t=J?.activeSpeakerId,Tt=J?.mainParticipant,tn=(J==null||(hr=J.pinnedParticipants)===null||hr===void 0?void 0:hr.get(r))||{cam:!1,share:!1};return{participants:at,localParticipant:ut,activeSpeakerId:$t,mainParticipant:Tt,pinState:tn}},[J]),Ce=Ee.participants,Re=Ee.localParticipant,ye=Ee.activeSpeakerId,Te=Ee.mainParticipant,He=Ee.pinState,we=Ce?.get(r),Je=ne.useState(we?.webcamOn),Be=Je[0],nt=Je[1],Qe=ne.useState(we?.micOn),Ze=Qe[0],Ht=Qe[1],or=ne.useState(we?.mode),Nr=or[0],jn=or[1],cr=function(at){if(at.track.readyState==="live")switch(at.kind){case"video":w!=null&&p(null),p(at);break;case"audio":A!=null&&M(null),M(at);break;case"share":U!=null&&z(null),z(at);break;case"shareAudio":Z!=null&&ce(null),ce(at);break}},Gn=function(at){switch(at.kind){case"video":p(null);break;case"audio":M(null);break;case"share":z(null);break;case"shareAudio":ce(null);break}},Un=function(at){cr(at),N(at)},Le=function(at){r===at.participantId&&jn(at.mode)},je=function(at){Gn(at),I(at)},Ge=function(at){var ut=at.peerId,$t=at.prevQuality,Tt=at.currentQuality;_({peerId:ut,prevQuality:$t,currentQuality:Tt})},Qt=function(at){var ut=at.kind,$t=at.peerId,Tt=at.newStatus;ut=="audio"?Ht(Tt):ut=="video"&&nt(Tt),d({kind:ut,peerId:$t,newStatus:Tt})},Ft=function(at){we?.setQuality(at)},xt=function(at,ut){we?.setViewPort(at,ut)},pn=function(at){we?.setScreenShareQuality(at)},Ln=function(){we?.enableMic()},Bt=function(){we?.disableMic()},lr=function(){we?.enableWebcam()},Fr=function(){we?.disableWebcam()},kr=function(at){we?.pin(at)},Vr=function(at){we?.unpin(at)},Hr=function(){we?.remove()},Or=function(at){var ut=at===void 0?{}:at,$t=ut.height,Tt=ut.width;return Promise.resolve(we?.captureImage({height:$t,width:Tt}))},Gr=function(){return Promise.resolve(we?.getAudioStats())},ga=function(){return Promise.resolve(we?.getVideoStats())},ta=function(){return Promise.resolve(we?.getShareStats())},oa=function(){return Promise.resolve(we?.getShareAudioStats())},Nn=function(){we?.consumeWebcamStreams()},Ha=function(){we?.consumeMicStreams()},Ca=function(){we?.stopConsumingWebcamStreams()},Kr=function(){we?.stopConsumingMicStreams()};return ne.useEffect(function(){var hr=we?.streams;return hr&&hr.forEach(function(at){cr(at)}),we!=null&&we.micOn&&Ht(Ze),we!=null&&we.webcamOn&&nt(Be),we?.on("stream-enabled",Un),we?.on("stream-disabled",je),we?.on("stream-paused",function(at){T(at)}),we?.on("stream-resumed",function(at){f(at)}),we?.on("media-status-changed",Qt),we?.on("video-quality-changed",Ge),we?.on("producer-added",function(at){g(at)}),we?.on("producer-removed",function(at){m(at)}),we?.on("consumer-added",function(at){S(at)}),we?.on("consumer-removed",function(at){x(at)}),Ot.on(Lt["participant-mode-changed"],Le),function(){we?.off("stream-enabled",Un),we?.off("stream-disabled",je),we?.off("media-status-changed",Qt),we?.off("video-quality-changed",Ge),Ot.off(Lt["participant-mode-changed"],Le)}},[we]),{displayName:we?.displayName,participant:we,webcamStream:w,micStream:A,screenShareStream:U,screenShareAudioStream:Z,webcamOn:Be||!!w,micOn:Ze||!!A,mode:Nr,metaData:we?.metaData,screenShareOn:!!U,isLocal:Re?.id===r,isActiveSpeaker:ye===r,isMainParticipant:Te?.id===r,pinState:He,consumeMicStreams:Ha,consumeWebcamStreams:Nn,stopConsumingMicStreams:Kr,stopConsumingWebcamStreams:Ca,setQuality:Ft,setScreenShareQuality:pn,setViewPort:xt,enableMic:Ln,disableMic:Bt,enableWebcam:lr,disableWebcam:Fr,captureImage:Or,pin:kr,unpin:Vr,remove:Hr,getAudioStats:Gr,getVideoStats:ga,getShareStats:ta,getShareAudioStats:oa}},PA=function(r,i){var o=i===void 0?{}:i,h=o.onMessageReceived,N=h===void 0?function(){}:h,B=o.onOldMessagesReceived,I=B===void 0?function(){}:B,k=Vm(),d=k.meeting,E=k.isMeetingJoined,_=ne.useState([]),b=_[0],T=_[1],v=ne.useRef(!1),f=function(m,P,S){d&&d.pubSub.publish(r,m,P,S)},R=function(m){T(function(P){return[].concat(P,[m])}),N(m)},g=function(m){try{var P;return Promise.resolve(m==null||(P=m.pubSub)===null||P===void 0?void 0:P.subscribe(r,R)).then(function(S){S&&(I(S.messages),T(S.messages))})}catch(S){return Promise.reject(S)}};return ne.useEffect(function(){if(d&&!v.current&&E)return v.current=!0,g(d),function(){var F;d==null||(F=d.pubSub)===null||F===void 0||F.unsubscribe(r,R)}},[d,E]),{publish:f,messages:b}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));Al.VideoSDK.Constants;var NA=function(r){var i=r.cameraId,o=i===void 0?void 0:i,h=r.encoderConfig,N=h===void 0?void 0:h,B=r.facingMode,I=B===void 0?void 0:B,k=r.optimizationMode,d=k===void 0?void 0:k,E=r.multiStream,_=E===void 0?!0:E;try{return Promise.resolve(Al.VideoSDK.createCameraVideoTrack({cameraId:o,encoderConfig:N,facingMode:I,optimizationMode:d,multiStream:_}))}catch(b){return Promise.reject(b)}};ne.forwardRef(function(e,r){var i=e.participantId,o=e.type,h=o===void 0?"video":o,N=e.containerStyle,B=N===void 0?{}:N,I=e.className,k=I===void 0?"":I,d=e.classNameVideo,E=d===void 0?"":d,_=e.videoStyle,b=_===void 0?{}:_,T=aw(i),v=T.webcamOn,f=T.webcamStream,R=T.isLocal,g=T.screenShareStream,F=T.screenShareOn,m=ne.useRef(null);return ne.useEffect(function(){var P=h==="share"?g:f,S=h==="share"?F:v;if(m.current)if(S&&P){var H=new MediaStream;H.addTrack(P.track),m.current.srcObject=H,m.current.setAttribute("playsinline",""),m.current.setAttribute("x5-playsinline",""),m.current.setAttribute("webkit-playsinline",""),m.current.play().catch(function(x){return console.error("videoRef.current.play() failed",x)})}else m.current.srcObject=null},[h].concat(h==="share"?[F,g]:h==="video"?[v,f]:[])),c.createElement("div",{ref:r,className:"video-container participant-video-"+i+" "+(k||""),style:km({objectFit:h==="share"?"contain":"none",height:"100%"},B)},c.createElement("video",{width:"100%",height:"100%",ref:m,autoPlay:!0,className:E,style:R&&h!=="share"?km({transform:"scaleX(-1)",WebkitTransform:"scaleX(-1)"},b):b}))});function o_({participantId:e}){const r=ne.useRef(null),i=ne.useRef(null),{webcamStream:o,micStream:h,webcamOn:N,micOn:B,isLocal:I,displayName:k}=aw(e);return ne.useEffect(()=>{if(i.current&&N&&o){const d=new MediaStream;try{d.addTrack(o.track)}catch(E){console.error("Failed to add track to MediaStream:",E)}i.current.srcObject=d,i.current.play().catch(E=>console.error("Video play failed:",E))}else i.current&&(i.current.srcObject=null)},[o,N,k]),ne.useEffect(()=>{if(r.current)if(B&&h){const d=new MediaStream;try{d.addTrack(h.track)}catch(E){console.error("Failed to add mic track to MediaStream:",E)}r.current.srcObject=d,r.current.play().catch(E=>console.error("audio play failed",E))}else r.current.srcObject=null},[h,B]),c.createElement("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden"},c.createElement("audio",{ref:r,autoPlay:!0,playsInline:!0,muted:I}),N&&o?c.createElement("video",{ref:i,autoPlay:!0,playsInline:!0,muted:I,className:"w-full h-full object-contain",style:I?{transform:"scaleX(-1)"}:{transform:"none"},onLoadedMetadata:()=>console.log("Video metadata loaded for:",k),onError:d=>console.error("Video error for:",k,d)}):c.createElement("div",{className:"w-full h-full flex items-center justify-center bg-gray-700"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-2"},c.createElement("span",{className:"text-2xl font-medium"},(k||"U").charAt(0).toUpperCase())),c.createElement("p",{className:"text-sm"},k||"User"),c.createElement("p",{className:"text-xs text-gray-400"},"Camera off"))),c.createElement("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 px-2 py-1 rounded"},c.createElement("span",{className:"text-white text-xs"},k||"User"," ",I?"(You)":"")),c.createElement("div",{className:"absolute top-2 right-2 flex space-x-1"},!B&&c.createElement("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center"},c.createElement(hR,null)),!N&&c.createElement("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center"},c.createElement(gR,null))))}function AA({onLeave:e,setShowChat:r,showChat:i,setShowParticipants:o,showParticipants:h}){const{leave:N,toggleMic:B,toggleWebcam:I}=Vm(),k=()=>{N(),e&&e()};return c.createElement("div",{className:"bg-gray-800 p-4"},c.createElement("div",{className:"flex items-center justify-center space-x-4"},c.createElement("button",{onClick:B,className:"p-3 rounded-full bg-gray-700 hover:bg-gray-600 text-white transition-colors",title:"Toggle Microphone"},c.createElement(mR,null)),c.createElement("button",{onClick:I,className:"p-3 rounded-full bg-gray-700 hover:bg-gray-600 text-white transition-colors",title:"Toggle Camera"},c.createElement(fR,null)),c.createElement("button",{onClick:()=>r(!i),className:"p-3 rounded-full bg-gray-700 hover:bg-gray-600 text-white transition-colors",title:"Toggle Chat"},c.createElement(vR,null)),c.createElement("button",{onClick:()=>o(!h),className:"p-3 rounded-full bg-gray-700 hover:bg-gray-600 text-white transition-colors",title:"Participants"},c.createElement(yR,null)),c.createElement("button",{onClick:k,className:"p-3 rounded-full bg-red-600 hover:bg-red-700 text-white transition-colors",title:"Leave Meeting"},c.createElement(cR,null))))}function OA({onLeave:e,meetingId:r,participantName:i,isDoctor:o}){const[h,N]=ne.useState(null),[B,I]=ne.useState(!0),[k,d]=ne.useState(!1),[E,_]=ne.useState(""),b=ne.useRef(null),{join:T,participants:v,localParticipant:f,enableWebcam:R,disableWebcam:g}=Vm({onMeetingJoined:async()=>{N("JOINED"),zn.success("Joined meeting successfully!"),async function(){try{if(g)try{await g()}catch{}const y=await NA({encoderConfig:"h720p_30fps",optimizationMode:"motion",facingMode:"user"});R&&(await R(y),console.log("Published custom HD webcam track"),zn.success("Using HD camera (if supported)"))}catch(y){console.warn("Could not publish HD webcam track:",y)}}()},onMeetingLeft:()=>{e()},onParticipantJoined:x=>{console.log("Participant joined:",x)},onParticipantLeft:x=>{console.log("Participant left:",x)}}),{publish:F,messages:m}=PA("CHAT",{onMessageReceived:x=>{zn.info(`${x.senderName} sent a message`)}});ne.useEffect(()=>{b.current&&(b.current.scrollTop=b.current.scrollHeight)},[m]);const P=()=>{N("JOINING"),T()},S=()=>{if(E.trim()&&F)try{F(E,{persist:!0}),_(""),zn.success("Message sent!")}catch(x){console.error("Failed to send message:",x),zn.error("Failed to send message. Please try again.")}else E.trim()&&zn.error("Chat not available. Please try again.")},H=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),S())};return h==="JOINING"?c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),c.createElement("p",null,"Joining the meeting..."))):h==="JOINED"?c.createElement("div",{className:"flex h-screen bg-gray-900"},c.createElement("div",{className:"flex-1 flex flex-col"},o&&r&&c.createElement("div",{className:"bg-blue-600 text-white p-3 text-center"},c.createElement("p",{className:"text-sm font-medium"},"Share this meeting code with patient:"),c.createElement("div",{className:"flex items-center justify-center gap-2 mt-1"},c.createElement("code",{className:"bg-blue-700 px-3 py-1 rounded font-mono text-lg"},r),c.createElement("button",{onClick:()=>{navigator.clipboard.writeText(r),zn.success("Meeting code copied to clipboard!")},className:"bg-blue-800 hover:bg-blue-900 px-3 py-1 rounded text-sm transition-colors",title:"Copy meeting code"},"📋 Copy"))),c.createElement("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4"},f&&c.createElement(o_,{participantId:f.id}),[...v.keys()].filter(x=>x!==f?.id).map(x=>c.createElement(o_,{participantId:x,key:x})),[...v.keys()].filter(x=>x!==f?.id).length===0&&c.createElement("div",{className:"bg-gray-800 rounded-lg flex items-center justify-center"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-2"},c.createElement("span",{className:"text-2xl font-medium"},"👤")),c.createElement("p",{className:"text-sm"},o?"Waiting for patient...":"Waiting for doctor..."),c.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Share the meeting code to invite others")))),c.createElement(AA,{onLeave:e,setShowChat:I,showChat:B,setShowParticipants:d,showParticipants:k})),c.createElement("div",{className:"w-80 bg-gray-800 border-l border-gray-700"},B&&c.createElement("div",{className:"h-full flex flex-col"},c.createElement("div",{className:"p-4 border-b border-gray-700"},c.createElement("h3",{className:"text-white font-semibold"},"Chat"),c.createElement("p",{className:"text-gray-400 text-xs"},"Meeting: ",r)),c.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",ref:b},m.map(x=>c.createElement("div",{key:x.id,className:`p-3 rounded-lg ${x.senderId===f?.id?"bg-blue-600 ml-8":"bg-gray-700 mr-8"}`},c.createElement("div",{className:"flex justify-between items-start mb-1"},c.createElement("span",{className:`font-medium text-sm ${x.senderId===f?.id?"text-blue-100":"text-blue-400"}`},x.senderName||"Unknown"),c.createElement("span",{className:"text-gray-400 text-xs"},new Date(x.timestamp).toLocaleTimeString())),c.createElement("p",{className:"text-sm text-white"},x.message))),m.length===0&&c.createElement("div",{className:"text-center text-gray-400 text-sm py-8"},c.createElement("p",null,"No messages yet"),c.createElement("p",{className:"text-xs mt-1"},"Start the conversation!"))),c.createElement("div",{className:"p-4 border-t border-gray-700"},c.createElement("div",{className:"flex space-x-2"},c.createElement("div",{className:"flex-1 relative"},c.createElement("input",{type:"text",value:E,onChange:x=>_(x.target.value),onKeyPress:H,placeholder:"Type a message...",className:"w-full px-3 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:500,disabled:h!=="JOINED"||!F}),c.createElement("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-400"},E.length,"/500")),c.createElement("button",{onClick:S,disabled:!E.trim()||h!=="JOINED"||!F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},"Send")))),k&&c.createElement("div",{className:"h-full flex flex-col"},c.createElement("div",{className:"p-4 border-b border-gray-700"},c.createElement("h3",{className:"text-white font-semibold"},"Participants"),c.createElement("p",{className:"text-gray-400 text-xs"},v.size+1," online")),c.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-2"},c.createElement("div",{className:"flex items-center space-x-3 p-2 bg-gray-700 rounded-lg"},c.createElement("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},c.createElement("span",{className:"text-white text-sm font-medium"},i?.charAt(0)||"U")),c.createElement("span",{className:"text-white text-sm"},i),c.createElement("span",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded-full"},o?"Doctor":"Patient")),c.createElement("div",{className:"text-center text-gray-400 text-sm py-4"},c.createElement("p",null,"Other participants will appear here"),c.createElement("p",{className:"text-xs mt-1"},"Share the meeting code to invite others")))))):c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("h3",{className:"text-xl mb-4"},"Meeting ID: ",r),c.createElement("button",{onClick:P,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors"},"Join Meeting")))}const iw=({meetingId:e,doctorId:r,userId:i,userName:o,isPatient:h=!0,onLeave:N})=>{const{user:B}=So(),{doctor:I}=Ms(),[k,d]=ne.useState(null),[E,_]=ne.useState(e),[b,T]=ne.useState(!0),v=!h,f=v?I:B,R=f?.name||o||"User";return ne.useEffect(()=>{(async()=>{try{T(!0);const F=await J1(f?._id||i,R,v?["allow_join","allow_mod"]:["allow_join"],v?"doctor":"user");if(d(F),v)if(e==="new"||!e){const m=await Hf(F);_(m.roomId),zn.success(`New meeting created: ${m.roomId}`)}else try{if((await a_(F,e)).isValid)_(e);else throw new Error("Invalid meeting")}catch{const P=await Hf(F);_(P.roomId),zn.success(`New meeting created: ${P.roomId}`)}else{if(!e||e==="new")throw new Error("Meeting ID is required for patients");if(!(await a_(F,e)).isValid)throw new Error("Invalid meeting ID");_(e)}}catch(F){console.error("Failed to initialize meeting:",F),zn.error(F.message||"Failed to initialize meeting"),N&&N()}finally{T(!1)}})()},[e,v,f,i,R,N]),b?c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),c.createElement("p",null,"Initializing meeting..."))):!k||!E?c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("p",null,"Failed to initialize meeting"),c.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Retry"))):c.createElement(TA,{config:{meetingId:E,name:R,micEnabled:!0,webcamEnabled:!0,participantId:f?._id||i,maxResolution:"hd",multiStream:!1},token:k,joinWithoutUserInteraction:!1},c.createElement(OA,{onLeave:N,meetingId:E,participantName:R,isDoctor:v}))},DA=()=>{const{meetingId:e,doctorId:r}=_c(),i=bs(),{user:o,isAuthenticated:h}=So(),[N,B]=ne.useState(!1),[I,k]=ne.useState(null),[d,E]=ne.useState(!0);ne.useEffect(()=>{if(!h){zn.error("Please login to join consultation"),i("/login");return}if(!e){zn.error("Invalid consultation link"),i("/");return}_()},[e,h]);const _=async()=>{try{E(!0),k({meetingId:e,doctorId:r,patientId:o?._id,patientName:o?.name,startTime:new Date().toISOString()}),B(!0)}catch(T){console.error("Failed to initialize consultation:",T),zn.error("Failed to start consultation"),i("/")}finally{E(!1)}},b=()=>{B(!1),zn.info("Consultation ended"),i("/")};return d?c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),c.createElement("p",null,"Initializing consultation..."))):I?c.createElement("div",{className:"h-screen"},N&&c.createElement(iw,{meetingId:I.meetingId,doctorId:I.doctorId,userId:I.patientId,userName:I.patientName,isPatient:!0,onLeave:b})):c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("p",null,"Failed to load consultation"),c.createElement("button",{onClick:()=>i("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Go Home")))},c_=()=>{const{meetingId:e,patientId:r}=_c(),i=bs(),{user:o,isAuthenticated:h}=So(),[N,B]=ne.useState(!1),[I,k]=ne.useState(null),[d,E]=ne.useState(!0),{doctor:_}=Ms();ne.useEffect(()=>{if(!_){zn.error("Please login to host consultation"),i("/doctor/login");return}(!e||e==="new")&&console.log("Doctor creating new consultation"),b()},[e,h]);const b=async()=>{try{E(!0),k({meetingId:e,doctorId:o?._id,doctorName:o?.name,patientId:r,startTime:new Date().toISOString()}),B(!0)}catch(v){console.error("Failed to initialize consultation:",v),zn.error("Failed to start consultation"),i("/")}finally{E(!1)}},T=()=>{B(!1),zn.info("Consultation ended"),i("/doctor/dashboard")};return d?c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),c.createElement("p",null,"Initializing consultation..."))):I?c.createElement("div",{className:"h-screen"},N&&c.createElement(iw,{meetingId:I.meetingId,doctorId:I.doctorId,userId:I.doctorId,userName:I.doctorName,isPatient:!1,onLeave:T})):c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("p",null,"Failed to load consultation"),c.createElement("button",{onClick:()=>i("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Go Home")))},MA=al({email:fa().email("Invalid email"),password:fa().min(6,"Password must be at least 6 characters")}),LA=()=>{const{login:e,loading:r,error:i}=wc(),o=bs(),{register:h,handleSubmit:N,formState:{errors:B}}=au({resolver:ou(MA)}),I=async k=>{await e(k,o)};return c.createElement("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md"},c.createElement("div",{className:"text-center mb-6"},c.createElement("div",{className:"text-4xl mb-2"},"👨‍💼"),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800"},"Admin Login"),c.createElement("p",{className:"text-emerald-600"},"Access the admin dashboard")),c.createElement("form",{onSubmit:N(I),className:"space-y-4"},c.createElement(ra,{label:"Email",name:"email",type:"email",...h("email"),error:B.email?.message,autoComplete:"email",required:!0}),c.createElement(ra,{label:"Password",name:"password",type:"password",...h("password"),error:B.password?.message,autoComplete:"current-password",required:!0}),c.createElement("button",{type:"submit",className:"w-full py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition disabled:opacity-50",disabled:r.login},r.login?"Signing in...":"Sign In"))))},IA=({statistics:e})=>{const{hospitalStatistics:r}=wc();return c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},aR(e,r).map((i,o)=>c.createElement("div",{key:o,className:"bg-white rounded-lg shadow p-4"},c.createElement("div",{className:"flex items-center"},c.createElement("div",{className:`w-10 h-10 flex items-center justify-center rounded-full ${i.bgColor} ${i.textColor}`},c.createElement("span",{className:"text-lg md:text-xl"},i.icon)),c.createElement("div",{className:"ml-3"},c.createElement("p",{className:"text-xs font-medium text-gray-600"},i.title),c.createElement("p",{className:"text-xl font-semibold text-gray-900"},i.count||0))))))},jA=({label:e,value:r})=>c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},e,":"),c.createElement("span",{className:"text-sm text-gray-900"},r||"Not provided")),Hd=({condition:e,trueLabel:r,falseLabel:i})=>c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},e?r:i),BA=({status:e})=>{const r={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${r[e]||"bg-gray-100 text-gray-800"}`},e?.charAt(0).toUpperCase()+e?.slice(1)||"Unknown")},zA=({isRejected:e,isApproved:r,isOpen:i,doctor:o,onClose:h,onApprove:N,onReject:B,handleDoctorReject:I,onToggleActive:k,onProfileImageUpload:d})=>{const[E,_]=ne.useState(null),[b,T]=ne.useState(!1),[v,f]=ne.useState(""),[R,g]=ne.useState(o.documents||[]),{DoctorDocumentUpload:F,loading:m,doctorProfilePicture:P,updateDoctorDetails:S,doctorAction:H}=wc(),x=c.useRef(),y=c.useRef(),[w,p]=ne.useState(null),[C,A]=ne.useState(!1),[M,j]=ne.useState({}),[U,z]=ne.useState(!1);c.useEffect(()=>{g(o.documents||[]),j({name:o.name||"",speciality:Array.isArray(o.speciality)?o.speciality:[o.speciality||""],phone:o.phone||"",mainDegree:o.mainDegree||"",fullAddress:o.fullAddress||"",hospital:o.hospital||"",experience:o.experience||"",fee:o.fee||"",availability:o.availability||!1,pmdcNumber:o.pmdcNumber||"",cnic:o.cnic||"",email:o.email||"",gender:o.gender||""})},[o.documents,o]);const W=(Be,nt)=>{j(Qe=>({...Qe,[Be]:nt}))},Z=async()=>{z(!0);try{const Be=M.speciality.filter(Qe=>Qe.trim()!==""),nt={...M,speciality:Be,experience:parseInt(M.experience)||0,fee:parseInt(M.fee)||0};S(o._id,nt),A(!1)}catch(Be){console.log(Be)}finally{z(!1)}},ce=()=>{A(!1),j({name:o.name||"",speciality:Array.isArray(o.speciality)?o.speciality:[o.speciality||""],phone:o.phone||"",mainDegree:o.mainDegree||"",fullAddress:o.fullAddress||"",hospital:o.hospital||"",hospitalVerified:!!o.hospitalVerified,experience:o.experience||"",fee:o.fee||"",availability:o.availability||!1,pmdcNumber:o.pmdcNumber||"",cnic:o.cnic||"",email:o.email||"",gender:o.gender||""})},J=async Be=>{Be.preventDefault();const nt=Be.target.files[0];if(nt){URL.createObjectURL(nt);const Qe=new FormData;Qe.append("documents",nt),await F(Qe,o._id)}},Ee=async()=>{o.isActive?(console.log(o.isActive),await H(o._id,{action:!1})):await H(o._id,{action:!0})},Ce=async Be=>{const nt=Be.target.files[0];if(nt){const Qe=URL.createObjectURL(nt);p(Qe);const Ze=new FormData;Ze.append("image",nt),await P(o._id,Ze)}};if(!i||!o)return null;const Re=Be=>{if(!Be)return"Not available";try{return new Date(Be).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},ye=Be=>{if(console.log("openImageViewer called with:",Be),!Be){console.error("No image URL provided");return}_(Be),T(!0),console.log("Image viewer state set:",{selectedImage:Be,isOpen:!0})},Te=()=>{T(!1),_(null)};c.useEffect(()=>{const Be=nt=>{nt.key==="Escape"&&b&&Te()};return b&&document.addEventListener("keydown",Be),()=>{document.removeEventListener("keydown",Be)}},[b]);const He=(Be,nt)=>c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},Be),c.createElement("div",{className:"space-y-3"},nt.map(({key:Qe,label:Ze,value:Ht})=>c.createElement(jA,{key:Qe,label:Ze,value:Ht})))),we=[{key:"created",label:"Created",value:Re(o.createdAt)},{key:"updated",label:"Updated",value:Re(o.updatedAt)},...o.PaymentCompleted?[{key:"payment",label:"Payment Completed",value:Re(o.PaymentCompleted)}]:[]],Je=[{key:"avg",label:"Average Rating",value:o.rating?.average?`${o.rating.average}/5`:"No ratings"},{key:"reviews",label:"Total Reviews",value:o.rating?.count||0}];return c.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},c.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},c.createElement("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("div",{className:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center relative overflow-hidden"},w||o.profilePicture||o.profileImageUrl?c.createElement("img",{src:w||o.profilePicture||o.profileImageUrl,alt:"Profile",className:"h-12 w-12 object-cover rounded-full",onError:Be=>{Be.currentTarget.src=""}}):c.createElement("span",{className:"text-emerald-600 font-medium text-lg"},o.name?.split(" ")?.map(Be=>Be[0])?.join("")||"DR"),c.createElement("button",{type:"button",className:"absolute bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 shadow hover:bg-gray-100",title:"Edit Profile Image",onClick:()=>y.current&&y.current.click()},c.createElement(_R,null)),c.createElement("input",{type:"file",accept:"image/*",ref:y,className:"hidden",onChange:Ce})),c.createElement("div",null,c.createElement("h2",{className:"text-xl font-semibold text-gray-900"},o.name||"Unknown Doctor"),c.createElement("p",{className:"text-sm text-gray-500"},o.email||"No email"))),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("button",{onClick:()=>A(!C),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${C?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-600 text-white hover:bg-gray-700"}`},C?"View Mode":"Edit Mode"),c.createElement("button",{onClick:h,className:"text-gray-400 hover:text-gray-600"},c.createElement(H0,null)))),c.createElement("div",{className:"px-6 py-4 grid grid-cols-1 lg:grid-cols-2 gap-6"},C?c.createElement("div",{className:"lg:col-span-2"},c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},c.createElement(Q1,{values:M,errors:{},include:{password:!1,confirmPassword:!1,agreement:!1,city:!1,hospital:!1,hospitalVerified:!1},onInputChange:Be=>nt=>{const Qe=nt?.target?.type==="checkbox"?nt.target.checked:nt?.target?.value;W(Be,Qe)},onDropdownChange:(Be,nt)=>W(Be,nt),onSpecialtyChange:Be=>W("speciality",Be),onCnicChange:Be=>{const nt=Be?.target?.value||"";W("cnic",nt)}}),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("input",{type:"checkbox",id:"availability",checked:M.availability||!1,onChange:Be=>W("availability",Be.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"availability",className:"text-sm text-gray-700"},"Available for appointments")))):c.createElement(c.Fragment,null,He("Personal Information",iR(o)),He("Professional Information",sR(o))),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Verification Status"),c.createElement("div",{className:"space-y-3"},c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Status:"),c.createElement(BA,{status:o.status})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"PMDC Verified:"),c.createElement(Hd,{condition:o.pmdcVerified,trueLabel:"Verified",falseLabel:"Not Verified"})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Hospital Verified:"),c.createElement(Hd,{condition:o.hospitalVerified,trueLabel:"Verified",falseLabel:"Not Verified"})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Availability:"),c.createElement(Hd,{condition:o.availability,trueLabel:"Available",falseLabel:"Not Available"})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Active:"),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement(Hd,{condition:o.isActive,trueLabel:"Active",falseLabel:"Inactive"}),c.createElement("button",{type:"button",className:"ml-2 px-2 py-1 text-xs font-medium text-blue-600 bg-blue-100 rounded hover:bg-blue-200",onClick:Ee,title:"Toggle Active Status"},"Edit"))),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Blocked:"),c.createElement(Hd,{condition:!o.isBlocked,trueLabel:"Not Blocked",falseLabel:"Blocked"})))),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Documents (",R?.length||0,")"),R?.length?R.map((Be,nt)=>c.createElement("div",{key:nt,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("div",{className:"h-8 w-8 bg-emerald-100 rounded flex items-center justify-center"},c.createElement(bR,null)),c.createElement("span",{className:"text-sm font-medium text-gray-900"},"Document ",nt+1)),c.createElement("button",{onClick:()=>{ye(Be.documentUrl)},className:"text-emerald-600 hover:text-emerald-800 text-sm font-medium"},"View"))):c.createElement("p",{className:"text-sm text-gray-500"},"No documents uploaded"),c.createElement("input",{id:"documents",type:"file",name:"documents",accept:"image/*",onChange:J,className:"hidden",ref:x}),c.createElement("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",onClick:()=>x.current&&x.current.click(),disabled:m},m?"Uploading...":"Add Documents"),v&&c.createElement("p",{className:"text-sm text-red-600"},v)),He("Timestamps",we),He("Rating",Je)),o.verificationNotes&&c.createElement("div",{className:"px-6 pb-6"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Verification Notes"),c.createElement("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg"},o.verificationNotes)),c.createElement("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3"},C&&c.createElement(c.Fragment,null,c.createElement("button",{onClick:ce,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Cancel"),c.createElement("button",{onClick:Z,className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",disabled:U},U?"Saving...":"Save Changes")),c.createElement("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Close"),!e&&c.createElement("button",{onClick:()=>I(o._id),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700"},"Reject"),!r&&c.createElement("button",{onClick:()=>N(o._id),className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700"},"Approve"))),b&&E&&c.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60]",onClick:Te},c.createElement("div",{className:"relative max-w-4xl max-h-[90vh] mx-4",onClick:Be=>Be.stopPropagation()},c.createElement("button",{onClick:Te,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2"},c.createElement(H0,null)),c.createElement("button",{onClick:()=>{const Be=document.createElement("a");Be.href=E,Be.download=`document_${Date.now()}.jpg`,Be.click()},className:"absolute top-4 right-16 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2"},c.createElement(wR,null)),c.createElement("img",{src:E,alt:"Document",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onError:Be=>{Be.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCAxMDBDNTAgNzIuODM4IDcyLjgzOCA1MCAxMDAgNTBDMTI3LjE2MiA1MCAxNTAgNzIuODM4IDE1MCAxMDBDMTUwIDEyNy4xNjIgMTI3LjE2MiAxNTAgMTAwIDE1MEM3Mi44MzggMTUwIDUwIDEyNy4xNjIgNTAgMTAwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDEyNUMxMTMuODA3IDEyNSAxMjUgMTEzLjgwNyAxMjUgMTAwQzEyNSA4Ni4xOTMgMTEzLjgwNyA3NSAxMDAgNzVDODYuMTkzIDc1IDc1IDg2LjE5MyA3NSAxMEM3NSAxMTMuODA3IDg2LjE5MyAxMjUgMTAwIDEyNVoiIGZpbGw9IiM2QjcyNzkiLz4KPHN2Zz4K",Be.target.alt="Image not available"}}),c.createElement("div",{className:"absolute bottom-4 left-4 text-white text-sm bg-black bg-opacity-50 px-3 py-2 rounded-lg"},"Click outside or press ESC to close"))))},UA=({label:e,value:r})=>c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},e,":"),c.createElement("span",{className:"text-sm text-gray-900"},r||"Not provided")),_f=({condition:e,trueLabel:r,falseLabel:i})=>c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},e?r:i),HA=({status:e})=>{const r={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${r[e]||"bg-gray-100 text-gray-800"}`},e?.charAt(0).toUpperCase()+e?.slice(1)||"Unknown")},FA=({isRejected:e,isOpen:r,hospital:i,onClose:o,onApprove:h,onReject:N,handleHospitalReject:B})=>{const[I,k]=ne.useState(null),[d,E]=ne.useState(!1),[_,b]=ne.useState(""),[T,v]=ne.useState(i.documents||[]),{loading:f,hospitalProfilePicture:R,HospitalDocumentUpload:g}=wc(),F=c.useRef(),m=c.useRef(),[P,S]=ne.useState(null);c.useEffect(()=>{v(i.documents||[])},[i.documents,i]);const H=async z=>{z.preventDefault();const W=z.target.files[0];if(W){URL.createObjectURL(W);const Z=new FormData;Z.append("documents",W),await g(Z,i._id)}},x=async z=>{const W=z.target.files[0];if(W){const Z=URL.createObjectURL(W);S(Z);const ce=new FormData;ce.append("image",W),await R(i._id,ce)}};if(!r||!i)return null;const y=z=>{if(!z)return"Not available";try{return new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},w=z=>{if(!z){console.error("No image URL provided");return}k(z),E(!0)},p=()=>{E(!1),k(null)};c.useEffect(()=>{const z=W=>{W.key==="Escape"&&d&&p()};return d&&document.addEventListener("keydown",z),()=>{document.removeEventListener("keydown",z)}},[d]);const C=[{key:"name",label:"Hospital Name",value:i.name},{key:"email",label:"Email",value:i.email},{key:"phone",label:"Phone",value:i.phone},{key:"cnic",label:"CNIC",value:i.cnic},{key:"address",label:"Address",value:i.address},{key:"city",label:"City",value:i.city}],A=[{key:"type",label:"Hospital Type",value:i.hospitalType},{key:"category",label:"Category",value:i.category},{key:"license",label:"License Number",value:i.licenseNumber},{key:"established",label:"Established Year",value:i.establishedYear?`${i.establishedYear}`:"Not specified"},{key:"beds",label:"Total Beds",value:i.totalBeds},{key:"ot",label:"Operation Theaters",value:i.operationTheaters}],M=(z,W)=>c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},z),c.createElement("div",{className:"space-y-3"},W.map(({key:Z,label:ce,value:J})=>c.createElement(UA,{key:Z,label:ce,value:J})))),j=[{key:"created",label:"Created",value:y(i.createdAt)},{key:"updated",label:"Updated",value:y(i.updatedAt)}],U=[{key:"avg",label:"Average Rating",value:i.rating?.average?`${i.rating.average}/5`:"No ratings"},{key:"reviews",label:"Total Reviews",value:i.rating?.count||0}];return c.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},c.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},c.createElement("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("div",{className:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center relative overflow-hidden"},P||i.profilePicture||i.profileImageUrl||i.image?c.createElement("img",{src:P||i.profilePicture||i.profileImageUrl||i.image,alt:"Hospital",className:"h-12 w-12 object-cover rounded-full",onError:z=>{z.currentTarget.src=""}}):c.createElement("span",{className:"text-emerald-600 font-medium text-lg"},"🏥"),c.createElement("button",{type:"button",className:"absolute bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 shadow hover:bg-gray-100",title:"Edit Hospital Image",onClick:()=>m.current&&m.current.click()},c.createElement("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2H7a2 2 0 01-2-2v-1.586a1 1 0 01.293-.707l9.414-9.414a1 1 0 011.414 0l1.586 1.586a1 1 0 010 1.414l-9.414 9.414A1 1 0 017 19v-1.586z"}))),c.createElement("input",{type:"file",accept:"image/*",ref:m,className:"hidden",onChange:x})),c.createElement("div",null,c.createElement("h2",{className:"text-xl font-semibold text-gray-900"},i.name||"Unknown Hospital"),c.createElement("p",{className:"text-sm text-gray-500"},i.email||"No email"))),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("button",{onClick:o,className:"text-gray-400 hover:text-gray-600"},c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),c.createElement("div",{className:"px-6 py-4 grid grid-cols-1 lg:grid-cols-2 gap-6"},M("Basic Information",C),M("Hospital Information",A),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Verification Status"),c.createElement("div",{className:"space-y-3"},c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Status:"),c.createElement(HA,{status:i.status})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"License Verified:"),c.createElement(_f,{condition:i.licenseVerified,trueLabel:"Verified",falseLabel:"Not Verified"})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Active:"),c.createElement(_f,{condition:i.isActive,trueLabel:"Active",falseLabel:"Inactive"})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Blocked:"),c.createElement(_f,{condition:!i.isBlocked,trueLabel:"Not Blocked",falseLabel:"Blocked"})))),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Documents (",T?.length||0,")"),T?.length?T.map((z,W)=>c.createElement("div",{key:W,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("div",{className:"h-8 w-8 bg-emerald-100 rounded flex items-center justify-center"},c.createElement("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))),c.createElement("span",{className:"text-sm font-medium text-gray-900"},"Document ",W+1)),c.createElement("button",{onClick:()=>{w(z.documentUrl)},className:"text-emerald-600 hover:text-emerald-800 text-sm font-medium"},"View"))):c.createElement("p",{className:"text-sm text-gray-500"},"No documents uploaded"),c.createElement("input",{id:"documents",type:"file",name:"documents",accept:"image/*",onChange:H,className:"hidden",ref:F}),c.createElement("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",onClick:()=>F.current&&F.current.click(),disabled:f},f?"Uploading...":"Add Documents"),_&&c.createElement("p",{className:"text-sm text-red-600"},_)),M("Timestamps",j),M("Rating",U)),i.verificationNotes&&c.createElement("div",{className:"px-6 pb-6"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Verification Notes"),c.createElement("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg"},i.verificationNotes)),c.createElement("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3"},c.createElement("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Close"),!e&&c.createElement("button",{onClick:()=>B(i._id),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700"},"Reject"),c.createElement("button",{onClick:()=>h(i._id),className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700"},"Approve"))),d&&I&&c.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60]",onClick:p},c.createElement("div",{className:"relative max-w-4xl max-h-[90vh] mx-4",onClick:z=>z.stopPropagation()},c.createElement("button",{onClick:p,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2"},c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))),c.createElement("button",{onClick:()=>{const z=document.createElement("a");z.href=I,z.download=`document_${Date.now()}.jpg`,z.click()},className:"absolute top-4 right-16 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2"},c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))),c.createElement("img",{src:I,alt:"Document",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onError:z=>{z.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCAxMDBDNTAgNzIuODM4IDcyLjgzOCA1MCAxMDAgNTBDMTI3LjE2MiA1MCAxNTAgNzIuODM4IDE1MCAxMDBDMTUwIDEyNy4xNjIgMTI3LjE2MiAxNTAgMTAwIDE1MEM3Mi44MzggMTUwIDUwIDEyNy4xNjIgNTAgMTAwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDEyNUMxMTMuODA3IDEyNSAxMjUgMTEzLjgwNyAxMjUgMTAwQzEyNSA4Ni4xOTMgMTEzLjgwNyA3NSAxMDAgNzVDODYuMTkzIDc1IDc1IDg2LjE5MyA3NSAxMEM3NSAxMTMuODA3IDg2LjE5MyAxMjUgMTAwIDEyNVoiIGZpbGw9IiM2QjcyNzkiLz4KPHN2Zz4K",z.target.alt="Image not available"}}),c.createElement("div",{className:"absolute bottom-4 left-4 text-white text-sm bg-black bg-opacity-50 px-3 py-2 rounded-lg"},"Click outside or press ESC to close"))))},Fu=({pendingItems:e,type:r,title:i="",onApprove:o,onReject:h,isRejected:N,isApproved:B,onOpenRejectModal:I,onActivatePayment:k})=>{const[d,E]=ne.useState(null),[_,b]=ne.useState(!1),[T,v]=ne.useState(null),[f,R]=ne.useState(!1),[g,F]=ne.useState(""),[m,P]=ne.useState(1),S=5;ne.useEffect(()=>{P(1)},[e,g]);const H=ne.useMemo(()=>{const U=g.trim().toLowerCase();return U?(e||[]).filter(z=>(z.name||"").toLowerCase().includes(U)):e||[]},[e,g]),x=Math.max(1,Math.ceil(H.length/S)),y=ne.useMemo(()=>{const U=(m-1)*S;return H.slice(U,U+S)},[H,m]);if(!e||e.length===0)return c.createElement("div",{className:"p-8 text-center"},c.createElement("span",{className:"text-4xl mb-4 block"},r==="doctor"?"👨‍⚕️":"🏥"),c.createElement("p",{className:"text-gray-600"},"No pending ",r," applications to review!"));const w=U=>{r==="doctor"?(E(U),b(!0)):(v(U),R(!0))},p=()=>{b(!1),E(null),R(!1),v(null)},C=U=>{o(U),p()},A=(U="")=>{const z=U.split(" ").map(Z=>Z[0]||"").join("").slice(0,3),W=z.length<=2?"text-base":z.length===3?"text-sm":"text-xs";return c.createElement("span",{className:`text-emerald-600 font-medium ${W}`},z)},j=r==="doctor"?[{key:"name",label:"Doctor",render:U=>c.createElement("div",{className:"flex items-center"},c.createElement("div",{className:"flex-shrink-0 h-10 w-10"},c.createElement("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center overflow-hidden"},U.profilePicture||U.profileImageUrl?c.createElement("img",{src:U.profilePicture||U.profileImageUrl,alt:"Profile",className:"h-10 w-10 object-cover rounded-full",onError:z=>{z.currentTarget.style.display="none",z.currentTarget.nextElementSibling.style.display="flex"}}):null,c.createElement("div",{className:`h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center ${U.profilePicture||U.profileImageUrl?"hidden":""}`},A(U.name)))),c.createElement("div",{className:"ml-4"},c.createElement("div",{className:"text-sm font-medium text-gray-900"},U.name),c.createElement("div",{className:"text-sm text-gray-500"},U.email)))},{key:"speciality",label:"Speciality",render:U=>c.createElement("div",null,c.createElement("div",{className:"text-sm text-gray-900"},U.speciality),c.createElement("div",{className:"text-sm text-gray-500"},U.mainDegree))},{key:"contact",label:"Contact",render:U=>c.createElement("div",null,c.createElement("div",{className:"text-sm text-gray-900"},U.phone),c.createElement("div",{className:"text-sm text-gray-500"},U.hospital))},{key:"pmdc",label:"PMDC Status",render:U=>c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${U.pmdcVerified?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},U.pmdcVerified?"Verified":"Not Verified")},{key:"paymentStatus",label:"Payment Status",render:U=>c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${U.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},U.isActive?"Active":"Inactive")}]:[{key:"name",label:"Hospital",render:U=>c.createElement("div",{className:"flex items-center"},c.createElement("div",{className:"flex-shrink-0 h-10 w-10"},c.createElement("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center overflow-hidden"},U.profilePicture||U.profileImageUrl||U.image?c.createElement("img",{src:U.profilePicture||U.profileImageUrl||U.image,alt:"Profile",className:"h-10 w-10 object-cover rounded-full",onError:z=>{z.currentTarget.style.display="none",z.currentTarget.nextElementSibling.style.display="flex"}}):null,c.createElement("div",{className:`h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center ${U.profilePicture||U.profileImageUrl||U.image?"hidden":""}`},A(U.name)))),c.createElement("div",{className:"ml-4"},c.createElement("div",{className:"text-sm font-medium text-gray-900"},U.name),c.createElement("div",{className:"text-sm text-gray-500"},U.email)))},{key:"type",label:"Type & Category",render:U=>c.createElement("div",null,c.createElement("div",{className:"text-sm text-gray-900"},U.hospitalType),c.createElement("div",{className:"text-sm text-gray-500"},U.category))},{key:"contact",label:"Contact",render:U=>c.createElement("div",null,c.createElement("div",{className:"text-sm text-gray-900"},U.phone),c.createElement("div",{className:"text-sm text-gray-500"},U.city))}];return c.createElement("div",{className:"bg-white"},c.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},c.createElement("div",{className:"flex items-center justify-between gap-4"},c.createElement("h2",{className:"text-lg font-semibold text-gray-900"},i),c.createElement("div",{className:"ml-auto w-full sm:w-64"},c.createElement("input",{type:"text",value:g,onChange:U=>F(U.target.value),placeholder:"Search by name",className:"w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-300","aria-label":"Search by name"})))),c.createElement("div",{className:"overflow-x-auto"},c.createElement("table",{className:"min-w-full divide-y divide-gray-200"},c.createElement("thead",{className:"bg-gray-50"},c.createElement("tr",null,j.map(U=>c.createElement("th",{key:U.key,className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},U.label)),c.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions"))),c.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},y.map(U=>c.createElement("tr",{key:U._id,className:"hover:bg-gray-50"},j.map(z=>c.createElement("td",{key:z.key,className:"px-6 py-4 whitespace-nowrap"},z.render(U))),c.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},c.createElement("div",{className:"flex space-x-2"},!B&&c.createElement("button",{onClick:()=>o(U._id),className:"bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700 transition-colors"},"Approve"),!N&&c.createElement("button",{onClick:()=>h(U._id),className:"bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors"},"Reject"),c.createElement("button",{onClick:()=>w(U),className:"bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors"},"View Details"))))),H.length===0&&c.createElement("tr",null,c.createElement("td",{colSpan:j.length+1,className:"px-6 py-8 text-center text-gray-500"},"No results found."))))),c.createElement("div",{className:"px-6 py-4 flex items-center justify-between"},c.createElement("div",{className:"text-sm text-gray-600"},"Showing ",H.length===0?0:y.length," of"," ",H.length," result(s)"),c.createElement("div",{className:"inline-flex items-center space-x-2"},c.createElement("button",{onClick:()=>P(U=>Math.max(1,U-1)),disabled:m===1,className:"px-3 py-1 rounded border text-sm disabled:opacity-50"},"Prev"),c.createElement("div",{className:"inline-flex items-center space-x-1"},Array.from({length:x},(U,z)=>z+1).map(U=>c.createElement("button",{key:U,onClick:()=>P(U),"aria-current":U===m?"page":void 0,className:`px-3 py-1 rounded text-sm border ${U===m?"bg-emerald-600 text-white border-emerald-600":""}`},U))),c.createElement("button",{onClick:()=>P(U=>Math.min(x,U+1)),disabled:m===x,className:"px-3 py-1 rounded border text-sm disabled:opacity-50"},"Next"))),_&&d&&c.createElement(zA,{isOpen:_,onClose:p,onApprove:C,doctor:d,handleDoctorReject:h,isRejected:N,isApproved:B}),f&&T&&c.createElement(FA,{isOpen:f,onClose:p,onApprove:C,hospital:T,handleHospitalReject:h,isRejected:N,isApproved:B}))},qA=({logout:e,navigate:r})=>{const i=()=>{e(),r("/admin/login")};return c.createElement("div",{className:"bg-white shadow-sm border-b"},c.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"flex justify-between items-center py-4"},c.createElement("div",{className:"flex items-center"},c.createElement("span",{className:"text-emerald-600 text-2xl mr-3"},"👨‍💼"),c.createElement("h1",{className:"text-2xl font-bold text-emerald-800"},"Admin Dashboard")),c.createElement("div",{className:"flex items-center space-x-4"},c.createElement("button",{onClick:i,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors"},"Logout")))))},VA=()=>{const{pendingDoctors:e,approvedDoctors:r,rejectedDoctors:i,pendingHospitals:o,approvedHospitals:h,rejectedHospitals:N,approveDoctor:B,rejectDoctor:I,approveHospital:k,rejectHospital:d,statistics:E,logout:_}=wc(),b=bs(),T=async g=>await B(g),v=async g=>await k(g),f=async g=>await I(g),R=async g=>await d(g);return c.createElement("div",{className:"min-h-screen bg-emerald-50"},c.createElement(qA,{logout:_,navigate:b}),c.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},c.createElement(IA,{statistics:E}),c.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},c.createElement(Fu,{title:"Pending Doctor Applications",pendingItems:e,type:"doctor",onApprove:g=>T(g),onReject:g=>f(g)})),c.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},c.createElement(Fu,{title:"Pending Hospital Applications",pendingItems:o,type:"hospital",onApprove:g=>v(g),onReject:g=>R(g)})),c.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},c.createElement(Fu,{title:"Approved Doctor Applications",pendingItems:r,type:"doctor",onApprove:g=>T(g),onReject:g=>f(g),isApproved:!0})),c.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},c.createElement(Fu,{title:"Approved Hospital Applications",pendingItems:h,type:"hospital",onApprove:g=>v(g),onReject:g=>R(g),isApproved:!0})),c.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},c.createElement(Fu,{title:"Rejected Doctor Applications",pendingItems:i,type:"doctor",onApprove:g=>T(g),onReject:g=>f(g),isRejected:!0})),c.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},c.createElement(Fu,{title:"Rejected Hospital Applications",pendingItems:N,type:"hospital",onApprove:g=>v(g),onReject:g=>R(g),isRejected:!0}))))},ZA=()=>{const[e,r]=ne.useState(null),[i,o]=ne.useState(null),[h,N]=ne.useState(null),[B,I]=ne.useState(""),[k,d]=ne.useState(!1),E=bs(),{UpdateProfilePic:_,DoctorDocumentUpload:b,loading:T,doctor:v}=Ms();ne.useEffect(()=>()=>{h&&URL.revokeObjectURL(h)},[h]),ne.useEffect(()=>{B&&d(!0)},[B]);const f=F=>{const m=F.target.files;m.length>0?r(m):r(null)},R=F=>{const m=F.target.files[0];if(o(m),m){const P=URL.createObjectURL(m);N(P);const S=new FormData;S.append("image",m),_(S)}},g=F=>{if(F.preventDefault(),!e){I("Please upload at least one image document.");return}const m=new FormData;Array.from(e).forEach(P=>{m.append("documents",P)}),b(m,E),I("Login successful but account is still in pending verification. We are reviewing your profile and will contact you via email.")};return v?.hasDocuments?c.createElement("div",{className:"min-h-screen flex items-center justify-center px-4 py-12"},c.createElement("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-lg p-8 text-center"},c.createElement("div",{className:"flex justify-center mb-6"},c.createElement(IR,{className:"w-20 h-20 text-emerald-500"})),c.createElement("h2",{className:"text-3xl font-bold text-emerald-800 mb-4"},"Documents Already Uploaded"),c.createElement("p",{className:"text-gray-600 mb-6"},"Your documents have been successfully uploaded and are currently under review. You cannot upload additional documents at this time."),c.createElement("button",{onClick:()=>E("/"),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-3 px-6 rounded-md shadow transition"},"Go to Home"))):c.createElement("div",{className:"min-h-screen  flex items-center justify-center px-4 py-12"},c.createElement("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-lg p-8"},c.createElement("h2",{className:"text-3xl font-bold text-center text-emerald-800 mb-6"},"Upload Your Documents"),c.createElement("form",{onSubmit:g,className:"space-y-6"},c.createElement("div",{className:"flex flex-col items-center gap-2"},c.createElement("label",{htmlFor:"profileImage",className:"cursor-pointer group"},c.createElement("div",{className:"w-28 h-28 mx-auto rounded-full border-4 border-dashed border-emerald-400 flex items-center justify-center bg-gray-50 overflow-hidden transition hover:border-emerald-600"},h?c.createElement("img",{src:h,alt:"Profile",className:"w-full h-full object-cover"}):c.createElement(BR,{className:"w-16 h-16 text-gray-300 group-hover:text-emerald-400"})),c.createElement("input",{id:"profileImage",type:"file",name:"profileImage",accept:"image/*",onChange:R,className:"hidden"}),c.createElement("p",{className:"text-sm text-gray-500 mt-2 group-hover:text-emerald-700 transition"},"Click to upload profile image (optional)"))),c.createElement("div",{className:"w-full"},c.createElement("label",{className:"block text-sm font-medium text-emerald-700 mb-1"},"Upload Supporting Documents"," ",c.createElement("span",{className:"text-red-500"},"*")),c.createElement("div",{className:"flex items-center justify-center w-full"},c.createElement("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-emerald-300 rounded-lg cursor-pointer bg-emerald-50 hover:bg-emerald-100 transition"},c.createElement("div",{className:"flex flex-col items-center justify-center pt-5 pb-6"},c.createElement(lb,{className:"w-8 h-8 mb-2 text-emerald-500"}),c.createElement("p",{className:"text-sm text-gray-500"},c.createElement("span",{className:"font-semibold"},"Click to upload")," or drag & drop image(s)"),c.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Only image formats are allowed (JPG, PNG, etc.)")),c.createElement("input",{type:"file",name:"documents",accept:"image/*",onChange:f,className:"hidden",multiple:!0,required:!0}))),e&&c.createElement("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside space-y-1"},Array.from(e).map((F,m)=>c.createElement("li",{key:m},F.name)))),c.createElement("button",{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-2 px-4 rounded-md shadow transition"},T?"Submitting...":"Submit Documents"))),k&&c.createElement(sp,{open:k,onOpenChange:d,title:"Verification Pending",description:"Login successful but account is still in pending verification. We are reviewing your profile and will contact you via email."},c.createElement("button",{className:"w-fit mx-auto px-5 py-2 rounded-lg bg-emerald-600 text-white font-semibold shadow-md hover:bg-emerald-700 transition-all duration-300",onClick:()=>E("/")},"Home")))},$A=()=>{const{doctor:e,logout:r,DoctorProfileUpdate:i,UpdateProfilePic:o}=Ms(),[h,N]=ne.useState(!1),[B,I]=ne.useState(""),[k,d]=ne.useState(!1),[E,_]=ne.useState(""),[b,T]=ne.useState([]),[v,f]=ne.useState({phone:e?.phone||"",availability:Array.isArray(e?.availability)?e.availability:e?.availability?[e.availability]:[],fee:e?.fee||"",fullAddress:e?.fullAddress||"",experience:e?.experience||""}),R=bs();ne.useEffect(()=>{const S=()=>{T([{patientName:"John Doe",date:new Date,meetingId:"meeting_1754952068034_88yzffp2o",patientId:"patient_001",symptoms:"Fever and headache"}])};S();const H=setInterval(S,3e4);return()=>clearInterval(H)},[]);const g=()=>{if(!E.trim()){zn.error("Please enter a consultation code");return}R(`/doctor/consultation/${E}/patient_waiting`)},F=async S=>{S.preventDefault(),i(v)},m=S=>{const H=S.target.files[0];if(H){const x=URL.createObjectURL(H);I(x);const y=new FormData;y.append("image",H),o(y)}},P=()=>{r(R)};return e?e.status==="pending"?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 p-4"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-2xl w-full text-center"},c.createElement("div",{className:"mb-6"},c.createElement("div",{className:"w-20 h-20 mx-auto bg-yellow-100 rounded-full flex items-center justify-center mb-4"},c.createElement("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),c.createElement("h2",{className:"text-3xl font-bold text-yellow-700 mb-4"},"Application Pending"),c.createElement("p",{className:"text-lg text-gray-600 mb-6"},"Your account is pending verification. We will notify you via email once verified."),c.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},c.createElement("p",{className:"text-sm text-yellow-800"},c.createElement("strong",null,"Current Status:")," Pending Verification"),c.createElement("p",{className:"text-sm text-yellow-800 mt-1"},c.createElement("strong",null,"Name:")," ",e.name),c.createElement("p",{className:"text-sm text-yellow-800 mt-1"},c.createElement("strong",null,"Speciality:")," ",e.speciality?.join(", ")||"Not specified"),c.createElement("button",{onClick:P,className:"bg-red-600 text-white mt-4 px-4 py-2 rounded-lg hover:bg-red-700"},"Logout"))))):c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4 flex justify-center"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-2xl w-full"},c.createElement("div",{className:"flex justify-between items-center mb-6"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800"},"Doctor Profile"),c.createElement("div",{className:"flex gap-3 items-center"},b.length>0&&c.createElement("div",{className:"relative"},c.createElement("button",{onClick:()=>{document.querySelector("[data-consultation-section]")?.scrollIntoView({behavior:"smooth"})},className:"bg-red-100 text-red-700 px-3 py-2 rounded-lg hover:bg-red-200 transition-colors relative"},c.createElement("span",{className:"font-medium"},"Pending Consultations"),c.createElement("span",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center"},b.length))),c.createElement("button",{onClick:()=>N(!h),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700"},h?"Cancel":"Edit"),c.createElement("button",{onClick:P,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"},"Logout"))),h?c.createElement("form",{onSubmit:F,className:"space-y-6"},c.createElement("div",{className:"flex flex-col items-center mb-6"},c.createElement("div",{className:"relative"},c.createElement("img",{src:B||e.profilePicture,alt:e.name,className:"w-28 h-28 rounded-full object-cover mb-4 border-4 border-emerald-100"}),c.createElement("label",{className:"absolute bottom-4 right-0 bg-emerald-600 text-white p-2 rounded-full cursor-pointer hover:bg-emerald-700"},c.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})),c.createElement("input",{type:"file",accept:"image/*",onChange:m,className:"hidden"}))),c.createElement("h2",{className:"text-xl font-bold text-emerald-800"},e.name),c.createElement("p",{className:"text-sm text-emerald-700"},e.speciality?.join(", ")||e.specialty)),c.createElement(ra,{label:"Phone Number",name:"phone",type:"tel",value:v.phone,onChange:S=>f(H=>({...H,phone:S.target.value})),placeholder:"Enter phone number"}),c.createElement(ra,{label:"Consultation Fee (Rs.)",name:"fee",type:"text",value:v.fee,onChange:S=>f(H=>({...H,fee:S.target.value})),placeholder:"Enter consultation fee"}),c.createElement(ra,{label:"Experience",name:"experience",type:"text",value:v.experience,onChange:S=>f(H=>({...H,experience:S.target.value})),placeholder:"Enter years of experience"}),c.createElement(ra,{label:"Full Address",name:"fullAddress",type:"text",value:v.fullAddress,onChange:S=>f(H=>({...H,fullAddress:S.target.value})),placeholder:"Enter full address"}),c.createElement("div",null,c.createElement("label",{className:"font-medium text-emerald-700 mb-1 block"},"Availability"),c.createElement("div",{className:"grid grid-cols-2 gap-2"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(S=>c.createElement("label",{key:S,className:"flex items-center"},c.createElement("input",{type:"checkbox",checked:v.availability.includes(S),onChange:H=>f(x=>({...x,availability:H.target.checked?[...x.availability,S]:x.availability.filter(y=>y!==S)})),className:"mr-2"}),S)))),c.createElement("div",{className:"flex justify-between"},c.createElement("button",{type:"button",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700",onClick:()=>d(!0)},"Update More Details"),c.createElement("button",{type:"submit",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700"},"Save Changes"))):c.createElement("div",null,c.createElement("div",{className:"flex flex-col items-center mb-6"},c.createElement("img",{src:e.profilePicture,alt:e.name,className:"w-28 h-28 rounded-full object-cover mb-2 border-4 border-emerald-100"}),c.createElement("h2",{className:"text-xl font-bold text-emerald-800"},e.name),c.createElement("p",{className:"text-sm text-emerald-700"},e.speciality?.join(", ")||e.specialty)),c.createElement("div",{className:"space-y-3"},c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Experience:")," ",e.experience," years"),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Hospital:")," ",e.hospital),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Location:")," ",e.fullAddress),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Rating:")," ⭐ ",e?.rating?.average||0," (",e?.rating?.count||0," reviews)"),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Fee:")," Rs. ",e.fee||"Not set"),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Availability:")," ",Array.isArray(e.availability)?e.availability.join(", "):e.availability||"Not specified"),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"PMDC Number:")," ",e.pmdcNumber),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Main Degree:")," ",e.mainDegree),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Status:")," ",c.createElement("span",{className:`px-2 py-1 rounded text-xs ${e.status==="verified"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},e.status)),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Documents Uploaded:")," ",c.createElement("span",{className:`px-2 py-1 rounded text-xs ${e.hasDocuments?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},e.hasDocuments?"Yes":"No")),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Hospital Verified:")," ",c.createElement("span",{className:`px-2 py-1 rounded text-xs ${e.hospitalVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},e.hospitalVerified?"Yes":"No")),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"PMDC Verified:")," ",c.createElement("span",{className:`px-2 py-1 rounded text-xs ${e.pmdcVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},e.pmdcVerified?"Yes":"No")),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Member of Registered Hospital:")," ",c.createElement("span",{className:`px-2 py-1 rounded text-xs ${e.memberofRegisterdHospital?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},e.memberofRegisterdHospital?"Yes":"No")),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"CNIC:")," ",e.cnic),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Phone:")," ",e.phone),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Email:")," ",e.email),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Gender:")," ",e.gender),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Religion:")," ",e.religion),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Payment Completed:")," ",new Date(e.PaymentCompleted).toLocaleDateString()),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Created:")," ",new Date(e.createdAt).toLocaleDateString()),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Last Updated:")," ",new Date(e.updatedAt).toLocaleDateString())),c.createElement("div",{className:"mt-8 border-t pt-6","data-consultation-section":!0},c.createElement("h3",{className:"text-lg font-semibold text-emerald-800 mb-4"},"Video Consultation Management"),c.createElement("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4"},c.createElement("h4",{className:"font-semibold text-green-800 mb-3"},"🚀 Start New Consultation"),c.createElement("p",{className:"text-green-700 text-sm mb-3"},"Create a new video consultation room for patients to join."),c.createElement("button",{onClick:()=>{R("/doctor/consultation/new/new_patient")},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium"},"Start New Consultation")),c.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4"},c.createElement("h4",{className:"font-semibold text-blue-800 mb-3"},"Join Existing Consultation"),c.createElement("p",{className:"text-blue-700 text-sm mb-3"},"A patient has started a video consultation and is waiting for you to join. Enter the consultation code below to join the session."),b.length>0&&c.createElement("div",{className:"mb-4 p-3 bg-blue-100 border border-blue-300 rounded-lg"},c.createElement("p",{className:"text-blue-800 text-sm font-medium mb-2"},"💡 Example Consultation Code:"),c.createElement("div",{className:"flex items-center gap-2"},c.createElement("code",{className:"bg-blue-200 px-2 py-1 rounded text-sm font-mono"},b[0].meetingId),c.createElement("button",{onClick:()=>_(b[0].meetingId),className:"text-blue-600 hover:text-blue-800 text-sm underline"},"Use this code"))),c.createElement("div",{className:"flex gap-3"},c.createElement("input",{type:"text",value:E,onChange:S=>_(S.target.value),placeholder:"Enter consultation code (e.g., lssf-npyx-3zzd)",className:"flex-1 px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),c.createElement("button",{onClick:g,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium"},"Join Now")),c.createElement("div",{className:"mt-3 text-xs text-blue-600"},c.createElement("p",null,"• Make sure you have a stable internet connection"),c.createElement("p",null,"• Allow camera and microphone access when prompted"),c.createElement("p",null,"• Find a quiet, private space for the consultation"),c.createElement("p",null,"• Enter the meeting code provided by the patient or from your dashboard")))),c.createElement("div",{className:"mt-6"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-800 mb-3"},"Consultation Status"),c.createElement("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4"},c.createElement("div",{className:"text-gray-600 text-sm"},b&&b.length>0?c.createElement(c.Fragment,null,c.createElement("span",{className:"font-medium text-yellow-700"},"You have ",b.length," pending consultation(s)."),c.createElement("ul",{className:"list-disc list-inside text-sm text-gray-700 mt-2"},b.map((S,H)=>c.createElement("li",{key:H,className:"flex items-center justify-between mb-2 p-2 bg-white rounded border"},c.createElement("div",{className:"flex-1"},c.createElement("span",{className:"font-medium"},"Patient: ",S.patientName),c.createElement("br",null),c.createElement("span",{className:"text-sm text-gray-600"},"Date:"," ",new Date(S.date).toLocaleDateString()),c.createElement("br",null),c.createElement("span",{className:"text-sm text-gray-600"},"Meeting ID: ",S.meetingId),S.symptoms&&c.createElement(c.Fragment,null,c.createElement("br",null),c.createElement("span",{className:"text-sm text-gray-600"},"Symptoms: ",S.symptoms))),c.createElement("button",{onClick:()=>{_(S.meetingId),document.querySelector("[data-consultation-section]")?.scrollIntoView({behavior:"smooth"})},className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors ml-3"},"Quick Join"))))):c.createElement("span",{className:"text-green-600"},"No pending consultations at the moment.")))))),c.createElement(sp,{open:k,onOpenChange:d,title:"Need to Update More Details?",description:"We're here to help! For additional profile updates, please reach out to our support team. You can contact us directly at +92 348 8597922 or connect with our admin team for personalized assistance."})):c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("h2",{className:"text-2xl text-emerald-700 font-semibold"},"No doctor found."))},WA=()=>{const{allPublicHospital:e}=nu(),[r,i]=ne.useState(null),{slug:o}=_c();return ne.useEffect(()=>{if(e&&e.length>0){const h=o.split("-").pop(),N=e.find(B=>B._id===h);N&&i(N)}},[e,o]),c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"max-w-5xl mx-auto"},c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8"},c.createElement("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6"},c.createElement("img",{src:r?.profilePicture||r?.image||"https://ui-avatars.com/api/?name=Hospital&background=random",alt:r?.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow"}),c.createElement("div",{className:"flex-1 w-full"},c.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800"},r?.name),c.createElement("div",{className:"flex flex-wrap gap-2"},r?.hospitalType&&c.createElement("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full"},r?.hospitalType),r?.status&&c.createElement("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs px-3 py-1 rounded-full capitalize"},r?.status),r?.city&&c.createElement("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full"},r?.city))),r?.description&&c.createElement("p",{className:"text-gray-700 mt-3"},r?.description),c.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6"},c.createElement("div",{className:"text-gray-700"},c.createElement("div",{className:"mb-1"},c.createElement("span",{className:"font-semibold"},"Address:")," ",r?.address||"—"),c.createElement("div",{className:"mb-1"},c.createElement("span",{className:"font-semibold"},"Contact:")," ",r?.phone||r?.contact||"—"),c.createElement("div",{className:"mb-1"},c.createElement("span",{className:"font-semibold"},"Email:")," ",r?.email||"—"),c.createElement("div",{className:"mb-1"},c.createElement("span",{className:"font-semibold"},"Established:")," ",r?.establishedYear||"—")),c.createElement("div",{className:"text-gray-700"},c.createElement("div",{className:"mb-1"},c.createElement("span",{className:"font-semibold"},"Total Beds:")," ",r?.totalBeds??r?.beds??"—"),c.createElement("div",{className:"mb-1"},c.createElement("span",{className:"font-semibold"},"Operation Theaters:")," ",r?.operationTheaters??"—"),c.createElement("div",{className:"mb-1"},c.createElement("span",{className:"font-semibold"},"Active:")," ",r?.isActive?"Yes":"No"),Array.isArray(r?.doctors)&&c.createElement("div",{className:"mb-1"},c.createElement("span",{className:"font-semibold"},"Doctors:")," ",r?.doctors.length))),r?.services&&c.createElement("div",{className:"mt-6"},c.createElement("h2",{className:"text-lg font-semibold text-emerald-800 mb-2"},"Services"),c.createElement("div",{className:"flex flex-wrap gap-2"},r?.services?.emergencyServices&&c.createElement("span",{className:"inline-block bg-red-100 text-red-700 text-xs px-3 py-1 rounded-full"},"Emergency"),r?.services?.ambulanceServices&&c.createElement("span",{className:"inline-block bg-yellow-100 text-yellow-700 text-xs px-3 py-1 rounded-full"},"Ambulance"),r?.services?.icuServices&&c.createElement("span",{className:"inline-block bg-purple-100 text-purple-700 text-xs px-3 py-1 rounded-full"},"ICU"))),c.createElement("div",{className:"mt-8 flex flex-col sm:flex-row gap-3"},c.createElement(Bi,{to:`/hospitals/${o}/doctors`,className:"px-5 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium text-center"},"View Doctors")))))))},GA=({children:e})=>{const{admin:r}=wc(),{user:i}=So(),{doctor:o}=Ms();return r?e:c.createElement(sS,{to:"/",replace:!0})},KA=()=>c.createElement(cS,null,c.createElement(Oa,{element:c.createElement(ck,null)},c.createElement(Oa,{path:"/",element:c.createElement(y4,null)}),c.createElement(Oa,{path:"/doctors",element:c.createElement(pA,null)}),c.createElement(Oa,{path:"/hospitals",element:c.createElement(mA,null)}),c.createElement(Oa,{path:"/labs",element:c.createElement(hA,null)}),c.createElement(Oa,{path:"/medicines",element:c.createElement(fA,null)}),c.createElement(Oa,{path:"/hospitals/:slug",element:c.createElement(gA,null)}),c.createElement(Oa,{path:"/medicine/:slug",element:c.createElement(_A,null)}),c.createElement(Oa,{path:"/lab/:slug",element:c.createElement(yA,null)}),c.createElement(Oa,{path:"/register/doctor",element:c.createElement(eA,null)}),c.createElement(Oa,{path:"/register/hospital",element:c.createElement(sA,null)}),c.createElement(Oa,{path:"/doctor/profile/",element:c.createElement($A,null)}),c.createElement(Oa,{path:"/doctor/profile/:slug",element:c.createElement(uA,null)}),c.createElement(Oa,{path:"/hospital/profile/:slug",element:c.createElement(WA,null)}),c.createElement(Oa,{path:"/doctor/book/:slug",element:c.createElement(bA,null)}),c.createElement(Oa,{path:"/doctor/:slug",element:c.createElement(dA,null)}),c.createElement(Oa,{path:"/hospitals/:slug/doctors",element:c.createElement(vA,null)}),c.createElement(Oa,{path:"/hospitals/:slug/book",element:c.createElement(wA,null)}),c.createElement(Oa,{path:"/profile",element:c.createElement(EA,null)}),c.createElement(Oa,{path:"/admin/dashboard",element:c.createElement(GA,null,c.createElement(VA,null))})),c.createElement(Oa,{path:"/consultation/:meetingId/:doctorId",element:c.createElement(DA,null)}),c.createElement(Oa,{path:"/doctor/consultation/:meetingId/:patientId",element:c.createElement(c_,null)}),c.createElement(Oa,{path:"/doctor/consultation/new/:patientId",element:c.createElement(c_,null)}),c.createElement(Oa,{element:c.createElement(lk,null)},c.createElement(Oa,{path:"/login",element:c.createElement(FN,null)}),c.createElement(Oa,{path:"/hospital/login",element:c.createElement(cA,null)}),c.createElement(Oa,{path:"/doctor/login",element:c.createElement(ZN,null)}),c.createElement(Oa,{path:"/doctor/upload-documents",element:c.createElement(ZA,null)}),c.createElement(Oa,{path:"/admin/login",element:c.createElement(LA,null)}),c.createElement(Oa,{path:"/register",element:c.createElement(VN,null)})));function YA(){return c.createElement(xR,null,c.createElement(ER,null,c.createElement(RR,null,c.createElement(Vx,null,c.createElement(Fk,null,c.createElement(AS,{basename:"/quickMed"},c.createElement(KA,null)))))))}fE.createRoot(document.getElementById("root")).render(c.createElement(ne.StrictMode,null,c.createElement(YA,null),c.createElement(qx,null)));

var yk=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Nz=yk((eU,cm)=>{function _k(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in e)){const h=Object.getOwnPropertyDescriptor(s,l);h&&Object.defineProperty(e,l,h.get?h:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const C of h.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&s(C)}).observe(document,{childList:!0,subtree:!0});function r(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=r(l);fetch(l.href,h)}})();function R0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hv={exports:{}},Xh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob;function bk(){if(Ob)return Xh;Ob=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,l,h){var C=null;if(h!==void 0&&(C=""+h),l.key!==void 0&&(C=""+l.key),"key"in l){h={};for(var N in l)N!=="key"&&(h[N]=l[N])}else h=l;return l=h.ref,{$$typeof:e,type:s,key:C,ref:l!==void 0?l:null,props:h}}return Xh.Fragment=t,Xh.jsx=r,Xh.jsxs=r,Xh}var Mb;function xk(){return Mb||(Mb=1,hv.exports=bk()),hv.exports}var o=xk(),pv={exports:{}},ca={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function wk(){if(jb)return ca;jb=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),v=Symbol.iterator;function b(Q){return Q===null||typeof Q!="object"?null:(Q=v&&Q[v]||Q["@@iterator"],typeof Q=="function"?Q:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,m={};function k(Q,ve,we){this.props=Q,this.context=ve,this.refs=m,this.updater=we||E}k.prototype.isReactComponent={},k.prototype.setState=function(Q,ve){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,ve,"setState")},k.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function w(){}w.prototype=k.prototype;function F(Q,ve,we){this.props=Q,this.context=ve,this.refs=m,this.updater=we||E}var g=F.prototype=new w;g.constructor=F,_(g,k.prototype),g.isPureReactComponent=!0;var A=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function D(Q,ve,we,Re,me,Ce){return we=Ce.ref,{$$typeof:e,type:Q,key:ve,ref:we!==void 0?we:null,props:Ce}}function S(Q,ve){return D(Q.type,ve,void 0,void 0,void 0,Q.props)}function x(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===e}function d(Q){var ve={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(we){return ve[we]})}var T=/\/+/g;function O(Q,ve){return typeof Q=="object"&&Q!==null&&Q.key!=null?d(""+Q.key):ve.toString(36)}function M(){}function I(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(M,M):(Q.status="pending",Q.then(function(ve){Q.status==="pending"&&(Q.status="fulfilled",Q.value=ve)},function(ve){Q.status==="pending"&&(Q.status="rejected",Q.reason=ve)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function U(Q,ve,we,Re,me){var Ce=typeof Q;(Ce==="undefined"||Ce==="boolean")&&(Q=null);var Be=!1;if(Q===null)Be=!0;else switch(Ce){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(Q.$$typeof){case e:case t:Be=!0;break;case R:return Be=Q._init,U(Be(Q._payload),ve,we,Re,me)}}if(Be)return me=me(Q),Be=Re===""?"."+O(Q,0):Re,A(me)?(we="",Be!=null&&(we=Be.replace(T,"$&/")+"/"),U(me,ve,we,"",function(Qe){return Qe})):me!=null&&(x(me)&&(me=S(me,we+(me.key==null||Q&&Q.key===me.key?"":(""+me.key).replace(T,"$&/")+"/")+Be)),ve.push(me)),1;Be=0;var be=Re===""?".":Re+":";if(A(Q))for(var Ye=0;Ye<Q.length;Ye++)Re=Q[Ye],Ce=be+O(Re,Ye),Be+=U(Re,ve,we,Ce,me);else if(Ye=b(Q),typeof Ye=="function")for(Q=Ye.call(Q),Ye=0;!(Re=Q.next()).done;)Re=Re.value,Ce=be+O(Re,Ye++),Be+=U(Re,ve,we,Ce,me);else if(Ce==="object"){if(typeof Q.then=="function")return U(I(Q),ve,we,Re,me);throw ve=String(Q),Error("Objects are not valid as a React child (found: "+(ve==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":ve)+"). If you meant to render a collection of children, use an array instead.")}return Be}function z(Q,ve,we){if(Q==null)return Q;var Re=[],me=0;return U(Q,Re,"","",function(Ce){return ve.call(we,Ce,me++)}),Re}function $(Q){if(Q._status===-1){var ve=Q._result;ve=ve(),ve.then(function(we){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=we)},function(we){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=we)}),Q._status===-1&&(Q._status=0,Q._result=ve)}if(Q._status===1)return Q._result.default;throw Q._result}var q=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ve=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(ve))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function ae(){}return ca.Children={map:z,forEach:function(Q,ve,we){z(Q,function(){ve.apply(this,arguments)},we)},count:function(Q){var ve=0;return z(Q,function(){ve++}),ve},toArray:function(Q){return z(Q,function(ve){return ve})||[]},only:function(Q){if(!x(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},ca.Component=k,ca.Fragment=r,ca.Profiler=l,ca.PureComponent=F,ca.StrictMode=s,ca.Suspense=y,ca.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ca.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return P.H.useMemoCache(Q)}},ca.cache=function(Q){return function(){return Q.apply(null,arguments)}},ca.cloneElement=function(Q,ve,we){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var Re=_({},Q.props),me=Q.key,Ce=void 0;if(ve!=null)for(Be in ve.ref!==void 0&&(Ce=void 0),ve.key!==void 0&&(me=""+ve.key),ve)!H.call(ve,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ve.ref===void 0||(Re[Be]=ve[Be]);var Be=arguments.length-2;if(Be===1)Re.children=we;else if(1<Be){for(var be=Array(Be),Ye=0;Ye<Be;Ye++)be[Ye]=arguments[Ye+2];Re.children=be}return D(Q.type,me,void 0,void 0,Ce,Re)},ca.createContext=function(Q){return Q={$$typeof:C,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:h,_context:Q},Q},ca.createElement=function(Q,ve,we){var Re,me={},Ce=null;if(ve!=null)for(Re in ve.key!==void 0&&(Ce=""+ve.key),ve)H.call(ve,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(me[Re]=ve[Re]);var Be=arguments.length-2;if(Be===1)me.children=we;else if(1<Be){for(var be=Array(Be),Ye=0;Ye<Be;Ye++)be[Ye]=arguments[Ye+2];me.children=be}if(Q&&Q.defaultProps)for(Re in Be=Q.defaultProps,Be)me[Re]===void 0&&(me[Re]=Be[Re]);return D(Q,Ce,void 0,void 0,null,me)},ca.createRef=function(){return{current:null}},ca.forwardRef=function(Q){return{$$typeof:N,render:Q}},ca.isValidElement=x,ca.lazy=function(Q){return{$$typeof:R,_payload:{_status:-1,_result:Q},_init:$}},ca.memo=function(Q,ve){return{$$typeof:u,type:Q,compare:ve===void 0?null:ve}},ca.startTransition=function(Q){var ve=P.T,we={};P.T=we;try{var Re=Q(),me=P.S;me!==null&&me(we,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(ae,q)}catch(Ce){q(Ce)}finally{P.T=ve}},ca.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ca.use=function(Q){return P.H.use(Q)},ca.useActionState=function(Q,ve,we){return P.H.useActionState(Q,ve,we)},ca.useCallback=function(Q,ve){return P.H.useCallback(Q,ve)},ca.useContext=function(Q){return P.H.useContext(Q)},ca.useDebugValue=function(){},ca.useDeferredValue=function(Q,ve){return P.H.useDeferredValue(Q,ve)},ca.useEffect=function(Q,ve,we){var Re=P.H;if(typeof we=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Re.useEffect(Q,ve)},ca.useId=function(){return P.H.useId()},ca.useImperativeHandle=function(Q,ve,we){return P.H.useImperativeHandle(Q,ve,we)},ca.useInsertionEffect=function(Q,ve){return P.H.useInsertionEffect(Q,ve)},ca.useLayoutEffect=function(Q,ve){return P.H.useLayoutEffect(Q,ve)},ca.useMemo=function(Q,ve){return P.H.useMemo(Q,ve)},ca.useOptimistic=function(Q,ve){return P.H.useOptimistic(Q,ve)},ca.useReducer=function(Q,ve,we){return P.H.useReducer(Q,ve,we)},ca.useRef=function(Q){return P.H.useRef(Q)},ca.useState=function(Q){return P.H.useState(Q)},ca.useSyncExternalStore=function(Q,ve,we){return P.H.useSyncExternalStore(Q,ve,we)},ca.useTransition=function(){return P.H.useTransition()},ca.version="19.1.0",ca}var Lb;function Dm(){return Lb||(Lb=1,pv.exports=wk()),pv.exports}var Z=Dm();const $t=R0(Z),Y1=_k({__proto__:null,default:$t},[Z]);var fv={exports:{}},ep={},mv={exports:{}},gv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function Sk(){return Ib||(Ib=1,function(e){function t(z,$){var q=z.length;z.push($);e:for(;0<q;){var ae=q-1>>>1,Q=z[ae];if(0<l(Q,$))z[ae]=$,z[q]=Q,q=ae;else break e}}function r(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var $=z[0],q=z.pop();if(q!==$){z[0]=q;e:for(var ae=0,Q=z.length,ve=Q>>>1;ae<ve;){var we=2*(ae+1)-1,Re=z[we],me=we+1,Ce=z[me];if(0>l(Re,q))me<Q&&0>l(Ce,Re)?(z[ae]=Ce,z[me]=q,ae=me):(z[ae]=Re,z[we]=q,ae=we);else if(me<Q&&0>l(Ce,q))z[ae]=Ce,z[me]=q,ae=me;else break e}}return $}function l(z,$){var q=z.sortIndex-$.sortIndex;return q!==0?q:z.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var C=Date,N=C.now();e.unstable_now=function(){return C.now()-N}}var y=[],u=[],R=1,v=null,b=3,E=!1,_=!1,m=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;function A(z){for(var $=r(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=z)s(u),$.sortIndex=$.expirationTime,t(y,$);else break;$=r(u)}}function P(z){if(m=!1,A(z),!_)if(r(y)!==null)_=!0,H||(H=!0,O());else{var $=r(u);$!==null&&U(P,$.startTime-z)}}var H=!1,D=-1,S=5,x=-1;function d(){return k?!0:!(e.unstable_now()-x<S)}function T(){if(k=!1,H){var z=e.unstable_now();x=z;var $=!0;try{e:{_=!1,m&&(m=!1,F(D),D=-1),E=!0;var q=b;try{t:{for(A(z),v=r(y);v!==null&&!(v.expirationTime>z&&d());){var ae=v.callback;if(typeof ae=="function"){v.callback=null,b=v.priorityLevel;var Q=ae(v.expirationTime<=z);if(z=e.unstable_now(),typeof Q=="function"){v.callback=Q,A(z),$=!0;break t}v===r(y)&&s(y),A(z)}else s(y);v=r(y)}if(v!==null)$=!0;else{var ve=r(u);ve!==null&&U(P,ve.startTime-z),$=!1}}break e}finally{v=null,b=q,E=!1}$=void 0}}finally{$?O():H=!1}}}var O;if(typeof g=="function")O=function(){g(T)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,I=M.port2;M.port1.onmessage=T,O=function(){I.postMessage(null)}}else O=function(){w(T,0)};function U(z,$){D=w(function(){z(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(z){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var q=b;b=$;try{return z()}finally{b=q}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=b;b=z;try{return $()}finally{b=q}},e.unstable_scheduleCallback=function(z,$,q){var ae=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ae+q:ae):q=ae,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=q+Q,z={id:R++,callback:$,priorityLevel:z,startTime:q,expirationTime:Q,sortIndex:-1},q>ae?(z.sortIndex=q,t(u,z),r(y)===null&&z===r(u)&&(m?(F(D),D=-1):m=!0,U(P,q-ae))):(z.sortIndex=Q,t(y,z),_||E||(_=!0,H||(H=!0,O()))),z},e.unstable_shouldYield=d,e.unstable_wrapCallback=function(z){var $=b;return function(){var q=b;b=$;try{return z.apply(this,arguments)}finally{b=q}}}}(gv)),gv}var Bb;function Rk(){return Bb||(Bb=1,mv.exports=Sk()),mv.exports}var vv={exports:{}},ho={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function Ek(){if(zb)return ho;zb=1;var e=Dm();function t(y){var u="https://react.dev/errors/"+y;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)u+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+y+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(y,u,R){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:y,containerInfo:u,implementation:R}}var C=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function N(y,u){if(y==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ho.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ho.createPortal=function(y,u){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return h(y,u,null,R)},ho.flushSync=function(y){var u=C.T,R=s.p;try{if(C.T=null,s.p=2,y)return y()}finally{C.T=u,s.p=R,s.d.f()}},ho.preconnect=function(y,u){typeof y=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,s.d.C(y,u))},ho.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},ho.preinit=function(y,u){if(typeof y=="string"&&u&&typeof u.as=="string"){var R=u.as,v=N(R,u.crossOrigin),b=typeof u.integrity=="string"?u.integrity:void 0,E=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;R==="style"?s.d.S(y,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:E}):R==="script"&&s.d.X(y,{crossOrigin:v,integrity:b,fetchPriority:E,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ho.preinitModule=function(y,u){if(typeof y=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var R=N(u.as,u.crossOrigin);s.d.M(y,{crossOrigin:R,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&s.d.M(y)},ho.preload=function(y,u){if(typeof y=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var R=u.as,v=N(R,u.crossOrigin);s.d.L(y,R,{crossOrigin:v,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ho.preloadModule=function(y,u){if(typeof y=="string")if(u){var R=N(u.as,u.crossOrigin);s.d.m(y,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:R,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else s.d.m(y)},ho.requestFormReset=function(y){s.d.r(y)},ho.unstable_batchedUpdates=function(y,u){return y(u)},ho.useFormState=function(y,u,R){return C.H.useFormState(y,u,R)},ho.useFormStatus=function(){return C.H.useHostTransitionStatus()},ho.version="19.1.0",ho}var Ub;function K1(){if(Ub)return vv.exports;Ub=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),vv.exports=Ek(),vv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function kk(){if(Fb)return ep;Fb=1;var e=Rk(),t=Dm(),r=K1();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function h(n){var a=n,c=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(c=a.return),n=a.return;while(n)}return a.tag===3?c:null}function C(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function N(n){if(h(n)!==n)throw Error(s(188))}function y(n){var a=n.alternate;if(!a){if(a=h(n),a===null)throw Error(s(188));return a!==n?null:n}for(var c=n,f=a;;){var B=c.return;if(B===null)break;var V=B.alternate;if(V===null){if(f=B.return,f!==null){c=f;continue}break}if(B.child===V.child){for(V=B.child;V;){if(V===c)return N(B),n;if(V===f)return N(B),a;V=V.sibling}throw Error(s(188))}if(c.return!==f.return)c=B,f=V;else{for(var oe=!1,_e=B.child;_e;){if(_e===c){oe=!0,c=B,f=V;break}if(_e===f){oe=!0,f=B,c=V;break}_e=_e.sibling}if(!oe){for(_e=V.child;_e;){if(_e===c){oe=!0,c=V,f=B;break}if(_e===f){oe=!0,f=V,c=B;break}_e=_e.sibling}if(!oe)throw Error(s(189))}}if(c.alternate!==f)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?n:a}function u(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=u(n),a!==null)return a;n=n.sibling}return null}var R=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),g=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),d=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=T&&n[T]||n["@@iterator"],typeof n=="function"?n:null)}var M=Symbol.for("react.client.reference");function I(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===M?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _:return"Fragment";case k:return"Profiler";case m:return"StrictMode";case P:return"Suspense";case H:return"SuspenseList";case x:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case E:return"Portal";case g:return(n.displayName||"Context")+".Provider";case F:return(n._context.displayName||"Context")+".Consumer";case A:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return a=n.displayName||null,a!==null?a:I(n.type)||"Memo";case S:a=n._payload,n=n._init;try{return I(n(a))}catch{}}return null}var U=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},ae=[],Q=-1;function ve(n){return{current:n}}function we(n){0>Q||(n.current=ae[Q],ae[Q]=null,Q--)}function Re(n,a){Q++,ae[Q]=n.current,n.current=a}var me=ve(null),Ce=ve(null),Be=ve(null),be=ve(null);function Ye(n,a){switch(Re(Be,a),Re(Ce,n),Re(me,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?ob(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=ob(a),n=cb(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}we(me),Re(me,n)}function Qe(){we(me),we(Ce),we(Be)}function Ge(n){n.memoizedState!==null&&Re(be,n);var a=me.current,c=cb(a,n.type);a!==c&&(Re(Ce,n),Re(me,c))}function He(n){Ce.current===n&&(we(me),we(Ce)),be.current===n&&(we(be),Gh._currentValue=q)}var Te=Object.prototype.hasOwnProperty,dt=e.unstable_scheduleCallback,_t=e.unstable_cancelCallback,on=e.unstable_shouldYield,ln=e.unstable_requestPaint,Pn=e.unstable_now,En=e.unstable_getCurrentPriorityLevel,rn=e.unstable_ImmediatePriority,Ne=e.unstable_UserBlockingPriority,Me=e.unstable_NormalPriority,Ze=e.unstable_LowPriority,Ft=e.unstable_IdlePriority,Tt=e.log,St=e.unstable_setDisableYieldValue,un=null,Sn=null;function Ut(n){if(typeof Tt=="function"&&St(n),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(un,n)}catch{}}var nr=Math.clz32?Math.clz32:Ur,Ar=Math.log,Sr=Math.LN2;function Ur(n){return n>>>=0,n===0?32:31-(Ar(n)/Sr|0)|0}var xr=256,Or=4194304;function Kr(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function va(n,a,c){var f=n.pendingLanes;if(f===0)return 0;var B=0,V=n.suspendedLanes,oe=n.pingedLanes;n=n.warmLanes;var _e=f&134217727;return _e!==0?(f=_e&~V,f!==0?B=Kr(f):(oe&=_e,oe!==0?B=Kr(oe):c||(c=_e&~n,c!==0&&(B=Kr(c))))):(_e=f&~V,_e!==0?B=Kr(_e):oe!==0?B=Kr(oe):c||(c=f&~n,c!==0&&(B=Kr(c)))),B===0?0:a!==0&&a!==B&&(a&V)===0&&(V=B&-B,c=a&-a,V>=c||V===32&&(c&4194048)!==0)?a:B}function ra(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function ua(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jn(){var n=xr;return xr<<=1,(xr&4194048)===0&&(xr=256),n}function Ha(){var n=Or;return Or<<=1,(Or&62914560)===0&&(Or=4194304),n}function Ea(n){for(var a=[],c=0;31>c;c++)a.push(n);return a}function Qr(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gr(n,a,c,f,B,V){var oe=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var _e=n.entanglements,Ve=n.expirationTimes,lt=n.hiddenUpdates;for(c=oe&~c;0<c;){var Ht=31-nr(c),en=1<<Ht;_e[Ht]=0,Ve[Ht]=-1;var pt=lt[Ht];if(pt!==null)for(lt[Ht]=null,Ht=0;Ht<pt.length;Ht++){var yt=pt[Ht];yt!==null&&(yt.lane&=-536870913)}c&=~en}f!==0&&rt(n,f,0),V!==0&&B===0&&n.tag!==0&&(n.suspendedLanes|=V&~(oe&~a))}function rt(n,a,c){n.pendingLanes|=a,n.suspendedLanes&=~a;var f=31-nr(a);n.entangledLanes|=a,n.entanglements[f]=n.entanglements[f]|1073741824|c&4194090}function ut(n,a){var c=n.entangledLanes|=a;for(n=n.entanglements;c;){var f=31-nr(c),B=1<<f;B&a|n[f]&a&&(n[f]|=a),c&=~B}}function Zt(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Pt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function sn(){var n=$.p;return n!==0?n:(n=window.event,n===void 0?32:Cb(n.type))}function nn(n,a){var c=$.p;try{return $.p=n,a()}finally{$.p=c}}var et=Math.random().toString(36).slice(2),On="__reactFiber$"+et,Ln="__reactProps$"+et,Jn="__reactContainer$"+et,vr="__reactEvents$"+et,Qt="__reactListeners$"+et,Rt="__reactHandles$"+et,Un="__reactResources$"+et,In="__reactMarker$"+et;function Nn(n){delete n[On],delete n[Ln],delete n[vr],delete n[Qt],delete n[Rt]}function Fr(n){var a=n[On];if(a)return a;for(var c=n.parentNode;c;){if(a=c[Jn]||c[On]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(n=hb(n);n!==null;){if(c=n[On])return c;n=hb(n)}return a}n=c,c=n.parentNode}return null}function Mr(n){if(n=n[On]||n[Jn]){var a=n.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return n}return null}function Hr(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function cr(n){var a=n[Un];return a||(a=n[Un]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Kn(n){n[In]=!0}var xa=new Set,ma={};function La(n,a){Va(n,a),Va(n+"Capture",a)}function Va(n,a){for(ma[n]=a,n=0;n<a.length;n++)xa.add(a[n])}var Ci=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xs={},ii={};function Ti(n){return Te.call(ii,n)?!0:Te.call(xs,n)?!1:Ci.test(n)?ii[n]=!0:(xs[n]=!0,!1)}function Fs(n,a,c){if(Ti(a))if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+c)}}function vi(n,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+c)}}function ea(n,a,c,f){if(f===null)n.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(a,c,""+f)}}var Hs,Ks;function pn(n){if(Hs===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Hs=a&&a[1]||"",Ks=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hs+n+Ks}var Xn=!1;function Wn(n,a){if(!n||Xn)return"";Xn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var en=function(){throw Error()};if(Object.defineProperty(en.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(en,[])}catch(yt){var pt=yt}Reflect.construct(n,[],en)}else{try{en.call()}catch(yt){pt=yt}n.call(en.prototype)}}else{try{throw Error()}catch(yt){pt=yt}(en=n())&&typeof en.catch=="function"&&en.catch(function(){})}}catch(yt){if(yt&&pt&&typeof yt.stack=="string")return[yt.stack,pt.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var B=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");B&&B.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=f.DetermineComponentFrameRoot(),oe=V[0],_e=V[1];if(oe&&_e){var Ve=oe.split(`
`),lt=_e.split(`
`);for(B=f=0;f<Ve.length&&!Ve[f].includes("DetermineComponentFrameRoot");)f++;for(;B<lt.length&&!lt[B].includes("DetermineComponentFrameRoot");)B++;if(f===Ve.length||B===lt.length)for(f=Ve.length-1,B=lt.length-1;1<=f&&0<=B&&Ve[f]!==lt[B];)B--;for(;1<=f&&0<=B;f--,B--)if(Ve[f]!==lt[B]){if(f!==1||B!==1)do if(f--,B--,0>B||Ve[f]!==lt[B]){var Ht=`
`+Ve[f].replace(" at new "," at ");return n.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",n.displayName)),Ht}while(1<=f&&0<=B);break}}}finally{Xn=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?pn(c):""}function dr(n){switch(n.tag){case 26:case 27:case 5:return pn(n.type);case 16:return pn("Lazy");case 13:return pn("Suspense");case 19:return pn("SuspenseList");case 0:case 15:return Wn(n.type,!1);case 11:return Wn(n.type.render,!1);case 1:return Wn(n.type,!0);case 31:return pn("Activity");default:return""}}function Dn(n){try{var a="";do a+=dr(n),n=n.return;while(n);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Hn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Wr(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Er(n){var a=Wr(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),f=""+n[a];if(!n.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var B=c.get,V=c.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return B.call(this)},set:function(oe){f=""+oe,V.call(this,oe)}}),Object.defineProperty(n,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(oe){f=""+oe},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Cr(n){n._valueTracker||(n._valueTracker=Er(n))}function Fn(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return n&&(f=Wr(n)?n.checked?"true":"false":n.value),n=f,n!==c?(a.setValue(n),!0):!1}function Zr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Da=/[\n"\\]/g;function ya(n){return n.replace(Da,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ca(n,a,c,f,B,V,oe,_e){n.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?n.type=oe:n.removeAttribute("type"),a!=null?oe==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+Hn(a)):n.value!==""+Hn(a)&&(n.value=""+Hn(a)):oe!=="submit"&&oe!=="reset"||n.removeAttribute("value"),a!=null?Ya(n,oe,Hn(a)):c!=null?Ya(n,oe,Hn(c)):f!=null&&n.removeAttribute("value"),B==null&&V!=null&&(n.defaultChecked=!!V),B!=null&&(n.checked=B&&typeof B!="function"&&typeof B!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?n.name=""+Hn(_e):n.removeAttribute("name")}function Ga(n,a,c,f,B,V,oe,_e){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(n.type=V),a!=null||c!=null){if(!(V!=="submit"&&V!=="reset"||a!=null))return;c=c!=null?""+Hn(c):"",a=a!=null?""+Hn(a):c,_e||a===n.value||(n.value=a),n.defaultValue=a}f=f??B,f=typeof f!="function"&&typeof f!="symbol"&&!!f,n.checked=_e?n.checked:!!f,n.defaultChecked=!!f,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(n.name=oe)}function Ya(n,a,c){a==="number"&&Zr(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function is(n,a,c,f){if(n=n.options,a){a={};for(var B=0;B<c.length;B++)a["$"+c[B]]=!0;for(c=0;c<n.length;c++)B=a.hasOwnProperty("$"+n[c].value),n[c].selected!==B&&(n[c].selected=B),B&&f&&(n[c].defaultSelected=!0)}else{for(c=""+Hn(c),a=null,B=0;B<n.length;B++){if(n[B].value===c){n[B].selected=!0,f&&(n[B].defaultSelected=!0);return}a!==null||n[B].disabled||(a=n[B])}a!==null&&(a.selected=!0)}}function Aa(n,a,c){if(a!=null&&(a=""+Hn(a),a!==n.value&&(n.value=a),c==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=c!=null?""+Hn(c):""}function us(n,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(s(92));if(U(f)){if(1<f.length)throw Error(s(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=Hn(a),n.defaultValue=c,f=n.textContent,f===c&&f!==""&&f!==null&&(n.value=f)}function Ps(n,a){if(a){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=a;return}}n.textContent=a}var ro=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yi(n,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":f?n.setProperty(a,c):typeof c!="number"||c===0||ro.has(a)?a==="float"?n.cssFloat=c:n[a]=(""+c).trim():n[a]=c+"px"}function Pi(n,a,c){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?n.setProperty(f,""):f==="float"?n.cssFloat="":n[f]="");for(var B in a)f=a[B],a.hasOwnProperty(B)&&c[B]!==f&&yi(n,B,f)}else for(var V in a)a.hasOwnProperty(V)&&yi(n,V,a[V])}function Ns(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hi(n){return mo.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ao=null;function Ni(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _i=null,Di=null;function uc(n){var a=Mr(n);if(a&&(n=a.stateNode)){var c=n[Ln]||null;e:switch(n=a.stateNode,a.type){case"input":if(Ca(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ya(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==n&&f.form===n.form){var B=f[Ln]||null;if(!B)throw Error(s(90));Ca(f,B.value,B.defaultValue,B.defaultValue,B.checked,B.defaultChecked,B.type,B.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===n.form&&Fn(f)}break e;case"textarea":Aa(n,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&is(n,!!c.multiple,a,!1)}}}var Tr=!1;function Vs(n,a,c){if(Tr)return n(a,c);Tr=!0;try{var f=n(a);return f}finally{if(Tr=!1,(_i!==null||Di!==null)&&(hf(),_i&&(a=_i,n=Di,Di=_i=null,uc(a),n)))for(a=0;a<n.length;a++)uc(n[a])}}function da(n,a){var c=n.stateNode;if(c===null)return null;var f=c[Ln]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(s(231,a,typeof c));return c}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),so=!1;if(oi)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){so=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{so=!1}var Qs=null,ci=null,li=null;function _r(){if(li)return li;var n,a=ci,c=a.length,f,B="value"in Qs?Qs.value:Qs.textContent,V=B.length;for(n=0;n<c&&a[n]===B[n];n++);var oe=c-n;for(f=1;f<=oe&&a[c-f]===B[V-f];f++);return li=B.slice(n,1<f?1-f:void 0)}function qa(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Js(){return!0}function Go(){return!1}function ms(n){function a(c,f,B,V,oe){this._reactName=c,this._targetInst=B,this.type=f,this.nativeEvent=V,this.target=oe,this.currentTarget=null;for(var _e in n)n.hasOwnProperty(_e)&&(c=n[_e],this[_e]=c?c(V):V[_e]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Js:Go,this.isPropagationStopped=Go,this}return R(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),a}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},go=ms(Vi),Xa=R({},Vi,{view:0,detail:0}),Oc=ms(Xa),Xs,Vr,ui,gs=R({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ui&&(ui&&n.type==="mousemove"?(Xs=n.screenX-ui.screenX,Vr=n.screenY-ui.screenY):Vr=Xs=0,ui=n),Xs)},movementY:function(n){return"movementY"in n?n.movementY:Vr}}),qi=ms(gs),Yo=R({},gs,{dataTransfer:0}),Ko=ms(Yo),io=R({},Xa,{relatedTarget:0}),fn=ms(io),ye=R({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ot=ms(ye),rr=R({},Vi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ha=ms(rr),es=R({},Vi,{data:0}),ws=ms(es),Cl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ir={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pl(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Ir[n])?!!a[n]:!1}function dc(){return Pl}var ko=R({},Xa,{key:function(n){if(n.key){var a=Cl[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=qa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Tl[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(n){return n.type==="keypress"?qa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),vo=ms(ko),$i=R({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yo=ms($i),il=R({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),Nl=ms(il),Mc=R({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),qs=ms(Mc),cu=R({},gs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),jc=ms(cu),Lc=R({},Vi,{newState:0,oldState:0}),Co=ms(Lc),lu=[9,13,27,32],Oa=oi&&"CompositionEvent"in window,$a=null;oi&&"documentMode"in document&&($a=document.documentMode);var Dl=oi&&"TextEvent"in window&&!$a,Al=oi&&(!Oa||$a&&8<$a&&11>=$a),vt=" ",To=!1;function lr(n,a){switch(n){case"keyup":return lu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ic(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Po=!1;function Ds(n,a){switch(n){case"compositionend":return Ic(a);case"keypress":return a.which!==32?null:(To=!0,vt);case"textInput":return n=a.data,n===vt&&To?null:n;default:return null}}function fe(n,a){if(Po)return n==="compositionend"||!Oa&&lr(n,a)?(n=_r(),li=ci=Qs=null,Po=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Al&&a.locale!=="ko"?null:a.data;default:return null}}var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!Bn[n.type]:a==="textarea"}function hc(n,a,c,f){_i?Di?Di.push(f):Di=[f]:_i=f,a=yf(a,"onChange"),0<a.length&&(c=new go("onChange","change",null,c,f),n.push({event:c,listeners:a}))}var Ma=null,ne=null;function Y(n){nb(n,0)}function J(n){var a=Hr(n);if(Fn(a))return n}function ce(n,a){if(n==="change")return a}var je=!1;if(oi){var at;if(oi){var Ct="oninput"in document;if(!Ct){var It=document.createElement("div");It.setAttribute("oninput","return;"),Ct=typeof It.oninput=="function"}at=Ct}else at=!1;je=at&&(!document.documentMode||9<document.documentMode)}function wt(){Ma&&(Ma.detachEvent("onpropertychange",zn),ne=Ma=null)}function zn(n){if(n.propertyName==="value"&&J(ne)){var a=[];hc(a,ne,n,Ni(n)),Vs(Y,a)}}function Yt(n,a,c){n==="focusin"?(wt(),Ma=a,ne=c,Ma.attachEvent("onpropertychange",zn)):n==="focusout"&&wt()}function Gn(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return J(ne)}function kn(n,a){if(n==="click")return J(a)}function sa(n,a){if(n==="input"||n==="change")return J(a)}function Xr(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var pa=typeof Object.is=="function"?Object.is:Xr;function ia(n,a){if(pa(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var c=Object.keys(n),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var B=c[f];if(!Te.call(a,B)||!pa(n[B],a[B]))return!1}return!0}function Wi(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Zi(n,a){var c=Wi(n);n=0;for(var f;c;){if(c.nodeType===3){if(f=n+c.textContent.length,n<=a&&f>=a)return{node:c,offset:a-n};n=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Wi(c)}}function bi(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?bi(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function _o(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=Zr(n.document);a instanceof n.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)n=a.contentWindow;else break;a=Zr(n.document)}return a}function bo(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var No=oi&&"documentMode"in document&&11>=document.documentMode,ei=null,di=null,Do=null,Bc=!1;function pc(n,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Bc||ei==null||ei!==Zr(f)||(f=ei,"selectionStart"in f&&bo(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Do&&ia(Do,f)||(Do=f,f=yf(di,"onSelect"),0<f.length&&(a=new go("onSelect","select",null,a,c),n.push({event:a,listeners:f}),a.target=ei)))}function hi(n,a){var c={};return c[n.toLowerCase()]=a.toLowerCase(),c["Webkit"+n]="webkit"+a,c["Moz"+n]="moz"+a,c}var oo={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},Qo={},zc={};oi&&(zc=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function Gi(n){if(Qo[n])return Qo[n];if(!oo[n])return n;var a=oo[n],c;for(c in a)if(a.hasOwnProperty(c)&&c in zc)return Qo[n]=a[c];return n}var fc=Gi("animationend"),pi=Gi("animationiteration"),Yi=Gi("animationstart"),ol=Gi("transitionrun"),Jo=Gi("transitionstart"),mc=Gi("transitioncancel"),Ao=Gi("transitionend"),Xo=new Map,$s="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$s.push("scrollEnd");function As(n,a){Xo.set(n,a),La(a,[n])}var Ai=new WeakMap;function vs(n,a){if(typeof n=="object"&&n!==null){var c=Ai.get(n);return c!==void 0?c:(a={value:n,source:a,stack:Dn(a)},Ai.set(n,a),a)}return{value:n,source:a,stack:Dn(a)}}var Os=[],xo=0,fi=0;function Oo(){for(var n=xo,a=fi=xo=0;a<n;){var c=Os[a];Os[a++]=null;var f=Os[a];Os[a++]=null;var B=Os[a];Os[a++]=null;var V=Os[a];if(Os[a++]=null,f!==null&&B!==null){var oe=f.pending;oe===null?B.next=B:(B.next=oe.next,oe.next=B),f.pending=B}V!==0&&ec(c,B,V)}}function Ms(n,a,c,f){Os[xo++]=n,Os[xo++]=a,Os[xo++]=c,Os[xo++]=f,fi|=f,n.lanes|=f,n=n.alternate,n!==null&&(n.lanes|=f)}function wo(n,a,c,f){return Ms(n,a,c,f),Oi(n)}function co(n,a){return Ms(n,null,null,a),Oi(n)}function ec(n,a,c){n.lanes|=c;var f=n.alternate;f!==null&&(f.lanes|=c);for(var B=!1,V=n.return;V!==null;)V.childLanes|=c,f=V.alternate,f!==null&&(f.childLanes|=c),V.tag===22&&(n=V.stateNode,n===null||n._visibility&1||(B=!0)),n=V,V=V.return;return n.tag===3?(V=n.stateNode,B&&a!==null&&(B=31-nr(c),n=V.hiddenUpdates,f=n[B],f===null?n[B]=[a]:f.push(a),a.lane=c|536870912),V):null}function Oi(n){if(50<Uh)throw Uh=0,Lg=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Mo={};function Ol(n,a,c,f){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(n,a,c,f){return new Ol(n,a,c,f)}function tc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ki(n,a){var c=n.alternate;return c===null?(c=Ta(n.tag,a,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=a,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,a=n.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function Uc(n,a){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,a=c.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function gc(n,a,c,f,B,V){var oe=0;if(f=n,typeof n=="function")tc(n)&&(oe=1);else if(typeof n=="string")oe=sk(n,c,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case x:return n=Ta(31,c,a,B),n.elementType=x,n.lanes=V,n;case _:return xi(c.children,B,V,a);case m:oe=8,B|=24;break;case k:return n=Ta(12,c,a,B|2),n.elementType=k,n.lanes=V,n;case P:return n=Ta(13,c,a,B),n.elementType=P,n.lanes=V,n;case H:return n=Ta(19,c,a,B),n.elementType=H,n.lanes=V,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case w:case g:oe=10;break e;case F:oe=9;break e;case A:oe=11;break e;case D:oe=14;break e;case S:oe=16,f=null;break e}oe=29,c=Error(s(130,n===null?"null":typeof n,"")),f=null}return a=Ta(oe,c,a,B),a.elementType=n,a.type=f,a.lanes=V,a}function xi(n,a,c,f){return n=Ta(7,n,f,a),n.lanes=c,n}function nc(n,a,c){return n=Ta(6,n,null,a),n.lanes=c,n}function jo(n,a,c){return a=Ta(4,n.children!==null?n.children:[],n.key,a),a.lanes=c,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var wi=[],Qi=0,i=null,p=0,j=[],W=0,te=null,he=1,ze="";function it(n,a){wi[Qi++]=p,wi[Qi++]=i,i=n,p=a}function ht(n,a,c){j[W++]=he,j[W++]=ze,j[W++]=te,te=n;var f=he;n=ze;var B=32-nr(f)-1;f&=~(1<<B),c+=1;var V=32-nr(a)+B;if(30<V){var oe=B-B%5;V=(f&(1<<oe)-1).toString(32),f>>=oe,B-=oe,he=1<<32-nr(a)+B|c<<B|f,ze=V+n}else he=1<<V|c<<B|f,ze=n}function Jt(n){n.return!==null&&(it(n,1),ht(n,1,0))}function qn(n){for(;n===i;)i=wi[--Qi],wi[Qi]=null,p=wi[--Qi],wi[Qi]=null;for(;n===te;)te=j[--W],j[W]=null,ze=j[--W],j[W]=null,he=j[--W],j[W]=null}var Yn=null,ir=null,jr=!1,ka=null,Ua=!1,ds=Error(s(519));function js(n){var a=Error(s(418,""));throw Mi(vs(a,n)),ds}function vc(n){var a=n.stateNode,c=n.type,f=n.memoizedProps;switch(a[On]=n,a[Ln]=f,c){case"dialog":ba("cancel",a),ba("close",a);break;case"iframe":case"object":case"embed":ba("load",a);break;case"video":case"audio":for(c=0;c<Hh.length;c++)ba(Hh[c],a);break;case"source":ba("error",a);break;case"img":case"image":case"link":ba("error",a),ba("load",a);break;case"details":ba("toggle",a);break;case"input":ba("invalid",a),Ga(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Cr(a);break;case"select":ba("invalid",a);break;case"textarea":ba("invalid",a),us(a,f.value,f.defaultValue,f.children),Cr(a)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||ib(a.textContent,c)?(f.popover!=null&&(ba("beforetoggle",a),ba("toggle",a)),f.onScroll!=null&&ba("scroll",a),f.onScrollEnd!=null&&ba("scrollend",a),f.onClick!=null&&(a.onclick=_f),a=!0):a=!1,a||js(n)}function Ml(n){for(Yn=n.return;Yn;)switch(Yn.tag){case 5:case 13:Ua=!1;return;case 27:case 3:Ua=!0;return;default:Yn=Yn.return}}function Lo(n){if(n!==Yn)return!1;if(!jr)return Ml(n),jr=!0,!1;var a=n.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||Jg(n.type,n.memoizedProps)),c=!c),c&&ir&&js(n),Ml(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8)if(c=n.data,c==="/$"){if(a===0){ir=$c(n.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;n=n.nextSibling}ir=null}}else a===27?(a=ir,Su(n.type)?(n=nv,nv=null,ir=n):ir=a):ir=Yn?$c(n.stateNode.nextSibling):null;return!0}function lo(){ir=Yn=null,jr=!1}function Fc(){var n=ka;return n!==null&&(zo===null?zo=n:zo.push.apply(zo,n),ka=null),n}function Mi(n){ka===null?ka=[n]:ka.push(n)}var Wa=ve(null),Si=null,uo=null;function So(n,a,c){Re(Wa,a._currentValue),a._currentValue=c}function ts(n){n._currentValue=Wa.current,we(Wa)}function yc(n,a,c){for(;n!==null;){var f=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),n===c)break;n=n.return}}function Hc(n,a,c,f){var B=n.child;for(B!==null&&(B.return=n);B!==null;){var V=B.dependencies;if(V!==null){var oe=B.child;V=V.firstContext;e:for(;V!==null;){var _e=V;V=B;for(var Ve=0;Ve<a.length;Ve++)if(_e.context===a[Ve]){V.lanes|=c,_e=V.alternate,_e!==null&&(_e.lanes|=c),yc(V.return,c,n),f||(oe=null);break e}V=_e.next}}else if(B.tag===18){if(oe=B.return,oe===null)throw Error(s(341));oe.lanes|=c,V=oe.alternate,V!==null&&(V.lanes|=c),yc(oe,c,n),oe=null}else oe=B.child;if(oe!==null)oe.return=B;else for(oe=B;oe!==null;){if(oe===n){oe=null;break}if(B=oe.sibling,B!==null){B.return=oe.return,oe=B;break}oe=oe.return}B=oe}}function Io(n,a,c,f){n=null;for(var B=a,V=!1;B!==null;){if(!V){if((B.flags&524288)!==0)V=!0;else if((B.flags&262144)!==0)break}if(B.tag===10){var oe=B.alternate;if(oe===null)throw Error(s(387));if(oe=oe.memoizedProps,oe!==null){var _e=B.type;pa(B.pendingProps.value,oe.value)||(n!==null?n.push(_e):n=[_e])}}else if(B===be.current){if(oe=B.alternate,oe===null)throw Error(s(387));oe.memoizedState.memoizedState!==B.memoizedState.memoizedState&&(n!==null?n.push(Gh):n=[Gh])}B=B.return}n!==null&&Hc(a,n,c,f),a.flags|=262144}function cl(n){for(n=n.firstContext;n!==null;){if(!pa(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ji(n){Si=n,uo=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ss(n){return Bu(Si,n)}function jl(n,a){return Si===null&&ji(n),Bu(n,a)}function Bu(n,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},uo===null){if(n===null)throw Error(s(308));uo=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else uo=uo.next=a;return c}var zu=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(c,f){n.push(f)}};this.abort=function(){a.aborted=!0,n.forEach(function(c){return c()})}},Uu=e.unstable_scheduleCallback,Ll=e.unstable_NormalPriority,Rs={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _c(){return{controller:new zu,data:new Map,refCount:0}}function bc(n){n.refCount--,n.refCount===0&&Uu(Ll,function(){n.controller.abort()})}var xc=null,os=0,wc=0,Vc=null;function Fu(n,a){if(xc===null){var c=xc=[];os=0,wc=Vg(),Vc={status:"pending",value:void 0,then:function(f){c.push(f)}}}return os++,a.then(Hu,Hu),a}function Hu(){if(--os===0&&xc!==null){Vc!==null&&(Vc.status="fulfilled");var n=xc;xc=null,wc=0,Vc=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function _d(n,a){var c=[],f={status:"pending",value:null,reason:null,then:function(B){c.push(B)}};return n.then(function(){f.status="fulfilled",f.value=a;for(var B=0;B<c.length;B++)(0,c[B])(a)},function(B){for(f.status="rejected",f.reason=B,B=0;B<c.length;B++)(0,c[B])(void 0)}),f}var Il=z.S;z.S=function(n,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Fu(n,a),Il!==null&&Il(n,a)};var ge=ve(null);function ee(){var n=ge.current;return n!==null?n:hs.pooledCache}function re(n,a){a===null?Re(ge,ge.current):Re(ge,a.pool)}function se(){var n=ee();return n===null?null:{parent:Rs._currentValue,pool:n}}var ie=Error(s(460)),le=Error(s(474)),De=Error(s(542)),Le={then:function(){}};function Ue(n){return n=n.status,n==="fulfilled"||n==="rejected"}function kt(){}function Dt(n,a,c){switch(c=n[c],c===void 0?n.push(a):c!==a&&(a.then(kt,kt),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Vt(n),n;default:if(typeof a.status=="string")a.then(kt,kt);else{if(n=hs,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(f){if(a.status==="pending"){var B=a;B.status="fulfilled",B.value=f}},function(f){if(a.status==="pending"){var B=a;B.status="rejected",B.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Vt(n),n}throw qt=a,ie}}var qt=null;function bn(){if(qt===null)throw Error(s(459));var n=qt;return qt=null,n}function Vt(n){if(n===ie||n===De)throw Error(s(483))}var hn=!1;function xn(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pe(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ft(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Mt(n,a,c){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(Ka&2)!==0){var B=f.pending;return B===null?a.next=a:(a.next=B.next,B.next=a),f.pending=a,a=Oi(n),ec(n,null,c),a}return Ms(n,f,a,c),Oi(n)}function mt(n,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var f=a.lanes;f&=n.pendingLanes,c|=f,a.lanes=c,ut(n,c)}}function jt(n,a){var c=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var B=null,V=null;if(c=c.firstBaseUpdate,c!==null){do{var oe={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};V===null?B=V=oe:V=V.next=oe,c=c.next}while(c!==null);V===null?B=V=a:V=V.next=a}else B=V=a;c={baseState:f.baseState,firstBaseUpdate:B,lastBaseUpdate:V,shared:f.shared,callbacks:f.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=a:n.next=a,c.lastBaseUpdate=a}var Ke=!1;function Bt(){if(Ke){var n=Vc;if(n!==null)throw n}}function dn(n,a,c,f){Ke=!1;var B=n.updateQueue;hn=!1;var V=B.firstBaseUpdate,oe=B.lastBaseUpdate,_e=B.shared.pending;if(_e!==null){B.shared.pending=null;var Ve=_e,lt=Ve.next;Ve.next=null,oe===null?V=lt:oe.next=lt,oe=Ve;var Ht=n.alternate;Ht!==null&&(Ht=Ht.updateQueue,_e=Ht.lastBaseUpdate,_e!==oe&&(_e===null?Ht.firstBaseUpdate=lt:_e.next=lt,Ht.lastBaseUpdate=Ve))}if(V!==null){var en=B.baseState;oe=0,Ht=lt=Ve=null,_e=V;do{var pt=_e.lane&-536870913,yt=pt!==_e.lane;if(yt?(Pa&pt)===pt:(f&pt)===pt){pt!==0&&pt===wc&&(Ke=!0),Ht!==null&&(Ht=Ht.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var $r=n,Br=_e;pt=a;var rs=c;switch(Br.tag){case 1:if($r=Br.payload,typeof $r=="function"){en=$r.call(rs,en,pt);break e}en=$r;break e;case 3:$r.flags=$r.flags&-65537|128;case 0:if($r=Br.payload,pt=typeof $r=="function"?$r.call(rs,en,pt):$r,pt==null)break e;en=R({},en,pt);break e;case 2:hn=!0}}pt=_e.callback,pt!==null&&(n.flags|=64,yt&&(n.flags|=8192),yt=B.callbacks,yt===null?B.callbacks=[pt]:yt.push(pt))}else yt={lane:pt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},Ht===null?(lt=Ht=yt,Ve=en):Ht=Ht.next=yt,oe|=pt;if(_e=_e.next,_e===null){if(_e=B.shared.pending,_e===null)break;yt=_e,_e=yt.next,yt.next=null,B.lastBaseUpdate=yt,B.shared.pending=null}}while(!0);Ht===null&&(Ve=en),B.baseState=Ve,B.firstBaseUpdate=lt,B.lastBaseUpdate=Ht,V===null&&(B.shared.lanes=0),_u|=oe,n.lanes=oe,n.memoizedState=en}}function Kt(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function gn(n,a){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)Kt(c[n],a)}var an=ve(null),Cn=ve(0);function mn(n,a){n=ql,Re(Cn,n),Re(an,a),ql=n|a.baseLanes}function Xt(){Re(Cn,ql),Re(an,an.current)}function yr(){ql=Cn.current,we(an),we(Cn)}var ur=0,At=null,An=null,Pr=null,ta=!1,oa=!1,ja=!1,Fa=0,Gr=0,G=null,K=0;function X(){throw Error(s(321))}function de(n,a){if(a===null)return!1;for(var c=0;c<a.length&&c<n.length;c++)if(!pa(n[c],a[c]))return!1;return!0}function Ee(n,a,c,f,B,V){return ur=V,At=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,z.H=n===null||n.memoizedState===null?Uy:Fy,ja=!1,V=c(f,B),ja=!1,oa&&(V=Se(a,c,f,B)),xe(n),V}function xe(n){z.H=Jp;var a=An!==null&&An.next!==null;if(ur=0,Pr=An=At=null,ta=!1,Gr=0,G=null,a)throw Error(s(300));n===null||Ii||(n=n.dependencies,n!==null&&cl(n)&&(Ii=!0))}function Se(n,a,c,f){At=n;var B=0;do{if(oa&&(G=null),Gr=0,oa=!1,25<=B)throw Error(s(301));if(B+=1,Pr=An=null,n.updateQueue!=null){var V=n.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}z.H=gE,V=a(c,f)}while(oa);return V}function $e(){var n=z.H,a=n.useState()[0];return a=typeof a.then=="function"?ue(a):a,n=n.useState()[0],(An!==null?An.memoizedState:null)!==n&&(At.flags|=1024),a}function ke(){var n=Fa!==0;return Fa=0,n}function Oe(n,a,c){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~c}function Je(n){if(ta){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ta=!1}ur=0,Pr=An=At=null,oa=!1,Gr=Fa=0,G=null}function We(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?At.memoizedState=Pr=n:Pr=Pr.next=n,Pr}function Ae(){if(An===null){var n=At.alternate;n=n!==null?n.memoizedState:null}else n=An.next;var a=Pr===null?At.memoizedState:Pr.next;if(a!==null)Pr=a,An=n;else{if(n===null)throw At.alternate===null?Error(s(467)):Error(s(310));An=n,n={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Pr===null?At.memoizedState=Pr=n:Pr=Pr.next=n}return Pr}function tt(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ue(n){var a=Gr;return Gr+=1,G===null&&(G=[]),n=Dt(G,n,a),a=At,(Pr===null?a.memoizedState:Pr.next)===null&&(a=a.alternate,z.H=a===null||a.memoizedState===null?Uy:Fy),n}function pe(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ue(n);if(n.$$typeof===g)return Ss(n)}throw Error(s(438,String(n)))}function Ie(n){var a=null,c=At.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=At.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(B){return B.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=tt(),At.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(n),f=0;f<n;f++)c[f]=d;return a.index++,c}function qe(n,a){return typeof a=="function"?a(n):a}function nt(n){var a=Ae();return tn(a,An,n)}function tn(n,a,c){var f=n.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=c;var B=n.baseQueue,V=f.pending;if(V!==null){if(B!==null){var oe=B.next;B.next=V.next,V.next=oe}a.baseQueue=B=V,f.pending=null}if(V=n.baseState,B===null)n.memoizedState=V;else{a=B.next;var _e=oe=null,Ve=null,lt=a,Ht=!1;do{var en=lt.lane&-536870913;if(en!==lt.lane?(Pa&en)===en:(ur&en)===en){var pt=lt.revertLane;if(pt===0)Ve!==null&&(Ve=Ve.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),en===wc&&(Ht=!0);else if((ur&pt)===pt){lt=lt.next,pt===wc&&(Ht=!0);continue}else en={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Ve===null?(_e=Ve=en,oe=V):Ve=Ve.next=en,At.lanes|=pt,_u|=pt;en=lt.action,ja&&c(V,en),V=lt.hasEagerState?lt.eagerState:c(V,en)}else pt={lane:en,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Ve===null?(_e=Ve=pt,oe=V):Ve=Ve.next=pt,At.lanes|=en,_u|=en;lt=lt.next}while(lt!==null&&lt!==a);if(Ve===null?oe=V:Ve.next=_e,!pa(V,n.memoizedState)&&(Ii=!0,Ht&&(c=Vc,c!==null)))throw c;n.memoizedState=V,n.baseState=oe,n.baseQueue=Ve,f.lastRenderedState=V}return B===null&&(f.lanes=0),[n.memoizedState,f.dispatch]}function bt(n){var a=Ae(),c=a.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=n;var f=c.dispatch,B=c.pending,V=a.memoizedState;if(B!==null){c.pending=null;var oe=B=B.next;do V=n(V,oe.action),oe=oe.next;while(oe!==B);pa(V,a.memoizedState)||(Ii=!0),a.memoizedState=V,a.baseQueue===null&&(a.baseState=V),c.lastRenderedState=V}return[V,f]}function Nt(n,a,c){var f=At,B=Ae(),V=jr;if(V){if(c===void 0)throw Error(s(407));c=c()}else c=a();var oe=!pa((An||B).memoizedState,c);oe&&(B.memoizedState=c,Ii=!0),B=B.queue;var _e=Fe.bind(null,f,B,n);if(Bl(2048,8,_e,[n]),B.getSnapshot!==a||oe||Pr!==null&&Pr.memoizedState.tag&1){if(f.flags|=2048,Li(9,uu(),ct.bind(null,f,B,c,a),null),hs===null)throw Error(s(349));V||(ur&124)!==0||Mn(f,a,c)}return c}function Mn(n,a,c){n.flags|=16384,n={getSnapshot:a,value:c},a=At.updateQueue,a===null?(a=tt(),At.updateQueue=a,a.stores=[n]):(c=a.stores,c===null?a.stores=[n]:c.push(n))}function ct(n,a,c,f){a.value=c,a.getSnapshot=f,xt(a)&&wn(n)}function Fe(n,a,c){return c(function(){xt(a)&&wn(n)})}function xt(n){var a=n.getSnapshot;n=n.value;try{var c=a();return!pa(n,c)}catch{return!0}}function wn(n){var a=co(n,2);a!==null&&oc(a,n,2)}function cn(n){var a=We();if(typeof n=="function"){var c=n;if(n=c(),ja){Ut(!0);try{c()}finally{Ut(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:n},a}function vn(n,a,c,f){return n.baseState=c,tn(n,An,typeof f=="function"?f:qe)}function or(n,a,c,f,B){if(wr(n))throw Error(s(485));if(n=a.action,n!==null){var V={payload:B,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){V.listeners.push(oe)}};z.T!==null?c(!0):V.isTransition=!1,f(V),c=a.pending,c===null?(V.next=a.pending=V,Lr(a,V)):(V.next=c.next,a.pending=c.next=V)}}function Lr(n,a){var c=a.action,f=a.payload,B=n.state;if(a.isTransition){var V=z.T,oe={};z.T=oe;try{var _e=c(B,f),Ve=z.S;Ve!==null&&Ve(oe,_e),Tn(n,a,_e)}catch(lt){Nr(n,a,lt)}finally{z.T=V}}else try{V=c(B,f),Tn(n,a,V)}catch(lt){Nr(n,a,lt)}}function Tn(n,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){yn(n,a,f)},function(f){return Nr(n,a,f)}):yn(n,a,c)}function yn(n,a,c){a.status="fulfilled",a.value=c,br(a),n.state=c,a=n.pending,a!==null&&(c=a.next,c===a?n.pending=null:(c=c.next,a.next=c,Lr(n,c)))}function Nr(n,a,c){var f=n.pending;if(n.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,br(a),a=a.next;while(a!==f)}n.action=null}function br(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function ar(n,a){return a}function $n(n,a){if(jr){var c=hs.formState;if(c!==null){e:{var f=At;if(jr){if(ir){t:{for(var B=ir,V=Ua;B.nodeType!==8;){if(!V){B=null;break t}if(B=$c(B.nextSibling),B===null){B=null;break t}}V=B.data,B=V==="F!"||V==="F"?B:null}if(B){ir=$c(B.nextSibling),f=B.data==="F!";break e}}js(f)}f=!1}f&&(a=c[0])}}return c=We(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:a},c.queue=f,c=Nh.bind(null,At,f),f.dispatch=c,f=cn(!1),V=Pd.bind(null,At,!1,f.queue),f=We(),B={state:a,dispatch:null,action:n,pending:null},f.queue=B,c=or.bind(null,At,B,V,c),B.dispatch=c,f.memoizedState=n,[a,c,!1]}function Rn(n){var a=Ae();return qr(a,An,n)}function qr(n,a,c){if(a=tn(n,a,ar)[0],n=nt(qe)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=ue(a)}catch(oe){throw oe===ie?De:oe}else f=a;a=Ae();var B=a.queue,V=B.dispatch;return c!==a.memoizedState&&(At.flags|=2048,Li(9,uu(),wa.bind(null,B,c),null)),[f,V,n]}function wa(n,a){n.action=a}function Ws(n){var a=Ae(),c=An;if(c!==null)return qr(a,c,n);Ae(),a=a.memoizedState,c=Ae();var f=c.queue.dispatch;return c.memoizedState=n,[a,f,!1]}function Li(n,a,c,f){return n={tag:n,create:c,deps:f,inst:a,next:null},a=At.updateQueue,a===null&&(a=tt(),At.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=n.next=n:(f=c.next,c.next=n,n.next=f,a.lastEffect=n),n}function uu(){return{destroy:void 0,resource:void 0}}function bd(){return Ae().memoizedState}function Vu(n,a,c,f){var B=We();f=f===void 0?null:f,At.flags|=n,B.memoizedState=Li(1|a,uu(),c,f)}function Bl(n,a,c,f){var B=Ae();f=f===void 0?null:f;var V=B.memoizedState.inst;An!==null&&f!==null&&de(f,An.memoizedState.deps)?B.memoizedState=Li(a,V,c,f):(At.flags|=n,B.memoizedState=Li(1|a,V,c,f))}function xd(n,a){Vu(8390656,8,n,a)}function wd(n,a){Bl(2048,8,n,a)}function wh(n,a){return Bl(4,2,n,a)}function Sd(n,a){return Bl(4,4,n,a)}function Sh(n,a){if(typeof a=="function"){n=n();var c=a(n);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Rh(n,a,c){c=c!=null?c.concat([n]):null,Bl(4,4,Sh.bind(null,a,n),c)}function qu(){}function Eh(n,a){var c=Ae();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&de(a,f[1])?f[0]:(c.memoizedState=[n,a],n)}function Rd(n,a){var c=Ae();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&de(a,f[1]))return f[0];if(f=n(),ja){Ut(!0);try{n()}finally{Ut(!1)}}return c.memoizedState=[f,a],f}function $u(n,a,c){return c===void 0||(ur&1073741824)!==0?n.memoizedState=a:(n.memoizedState=c,n=O_(),At.lanes|=n,_u|=n,c)}function Ed(n,a,c,f){return pa(c,a)?c:an.current!==null?(n=$u(n,c,f),pa(n,a)||(Ii=!0),n):(ur&42)===0?(Ii=!0,n.memoizedState=c):(n=O_(),At.lanes|=n,_u|=n,a)}function kd(n,a,c,f,B){var V=$.p;$.p=V!==0&&8>V?V:8;var oe=z.T,_e={};z.T=_e,Pd(n,!1,a,c);try{var Ve=B(),lt=z.S;if(lt!==null&&lt(_e,Ve),Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var Ht=_d(Ve,f);du(n,a,Ht,ic(n))}else du(n,a,f,ic(n))}catch(en){du(n,a,{then:function(){},status:"rejected",reason:en},ic())}finally{$.p=V,z.T=oe}}function Yp(){}function Cd(n,a,c,f){if(n.tag!==5)throw Error(s(476));var B=kh(n).queue;kd(n,B,a,q,c===null?Yp:function(){return Ch(n),c(f)})}function kh(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:q},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:c},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Ch(n){var a=kh(n).next.queue;du(n,a,{},ic())}function Td(){return Ss(Gh)}function Th(){return Ae().memoizedState}function Ph(){return Ae().memoizedState}function Kp(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var c=ic();n=ft(c);var f=Mt(a,n,c);f!==null&&(oc(f,a,c),mt(f,a,c)),a={cache:_c()},n.payload=a;return}a=a.return}}function Qp(n,a,c){var f=ic();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},wr(n)?Qn(a,c):(c=wo(n,a,c,f),c!==null&&(oc(c,n,f),hu(c,a,f)))}function Nh(n,a,c){var f=ic();du(n,a,c,f)}function du(n,a,c,f){var B={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(wr(n))Qn(a,B);else{var V=n.alternate;if(n.lanes===0&&(V===null||V.lanes===0)&&(V=a.lastRenderedReducer,V!==null))try{var oe=a.lastRenderedState,_e=V(oe,c);if(B.hasEagerState=!0,B.eagerState=_e,pa(_e,oe))return Ms(n,a,B,0),hs===null&&Oo(),!1}catch{}finally{}if(c=wo(n,a,B,f),c!==null)return oc(c,n,f),hu(c,a,f),!0}return!1}function Pd(n,a,c,f){if(f={lane:2,revertLane:Vg(),action:f,hasEagerState:!1,eagerState:null,next:null},wr(n)){if(a)throw Error(s(479))}else a=wo(n,c,f,2),a!==null&&oc(a,n,2)}function wr(n){var a=n.alternate;return n===At||a!==null&&a===At}function Qn(n,a){oa=ta=!0;var c=n.pending;c===null?a.next=a:(a.next=c.next,c.next=a),n.pending=a}function hu(n,a,c){if((c&4194048)!==0){var f=a.lanes;f&=n.pendingLanes,c|=f,a.lanes=c,ut(n,c)}}var Jp={readContext:Ss,use:pe,useCallback:X,useContext:X,useEffect:X,useImperativeHandle:X,useLayoutEffect:X,useInsertionEffect:X,useMemo:X,useReducer:X,useRef:X,useState:X,useDebugValue:X,useDeferredValue:X,useTransition:X,useSyncExternalStore:X,useId:X,useHostTransitionStatus:X,useFormState:X,useActionState:X,useOptimistic:X,useMemoCache:X,useCacheRefresh:X},Uy={readContext:Ss,use:pe,useCallback:function(n,a){return We().memoizedState=[n,a===void 0?null:a],n},useContext:Ss,useEffect:xd,useImperativeHandle:function(n,a,c){c=c!=null?c.concat([n]):null,Vu(4194308,4,Sh.bind(null,a,n),c)},useLayoutEffect:function(n,a){return Vu(4194308,4,n,a)},useInsertionEffect:function(n,a){Vu(4,2,n,a)},useMemo:function(n,a){var c=We();a=a===void 0?null:a;var f=n();if(ja){Ut(!0);try{n()}finally{Ut(!1)}}return c.memoizedState=[f,a],f},useReducer:function(n,a,c){var f=We();if(c!==void 0){var B=c(a);if(ja){Ut(!0);try{c(a)}finally{Ut(!1)}}}else B=a;return f.memoizedState=f.baseState=B,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:B},f.queue=n,n=n.dispatch=Qp.bind(null,At,n),[f.memoizedState,n]},useRef:function(n){var a=We();return n={current:n},a.memoizedState=n},useState:function(n){n=cn(n);var a=n.queue,c=Nh.bind(null,At,a);return a.dispatch=c,[n.memoizedState,c]},useDebugValue:qu,useDeferredValue:function(n,a){var c=We();return $u(c,n,a)},useTransition:function(){var n=cn(!1);return n=kd.bind(null,At,n.queue,!0,!1),We().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,c){var f=At,B=We();if(jr){if(c===void 0)throw Error(s(407));c=c()}else{if(c=a(),hs===null)throw Error(s(349));(Pa&124)!==0||Mn(f,a,c)}B.memoizedState=c;var V={value:c,getSnapshot:a};return B.queue=V,xd(Fe.bind(null,f,V,n),[n]),f.flags|=2048,Li(9,uu(),ct.bind(null,f,V,c,a),null),c},useId:function(){var n=We(),a=hs.identifierPrefix;if(jr){var c=ze,f=he;c=(f&~(1<<32-nr(f)-1)).toString(32)+c,a=""+a+"R"+c,c=Fa++,0<c&&(a+="H"+c.toString(32)),a+=""}else c=K++,a=""+a+"r"+c.toString(32)+"";return n.memoizedState=a},useHostTransitionStatus:Td,useFormState:$n,useActionState:$n,useOptimistic:function(n){var a=We();a.memoizedState=a.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Pd.bind(null,At,!0,c),c.dispatch=a,[n,a]},useMemoCache:Ie,useCacheRefresh:function(){return We().memoizedState=Kp.bind(null,At)}},Fy={readContext:Ss,use:pe,useCallback:Eh,useContext:Ss,useEffect:wd,useImperativeHandle:Rh,useInsertionEffect:wh,useLayoutEffect:Sd,useMemo:Rd,useReducer:nt,useRef:bd,useState:function(){return nt(qe)},useDebugValue:qu,useDeferredValue:function(n,a){var c=Ae();return Ed(c,An.memoizedState,n,a)},useTransition:function(){var n=nt(qe)[0],a=Ae().memoizedState;return[typeof n=="boolean"?n:ue(n),a]},useSyncExternalStore:Nt,useId:Th,useHostTransitionStatus:Td,useFormState:Rn,useActionState:Rn,useOptimistic:function(n,a){var c=Ae();return vn(c,An,n,a)},useMemoCache:Ie,useCacheRefresh:Ph},gE={readContext:Ss,use:pe,useCallback:Eh,useContext:Ss,useEffect:wd,useImperativeHandle:Rh,useInsertionEffect:wh,useLayoutEffect:Sd,useMemo:Rd,useReducer:bt,useRef:bd,useState:function(){return bt(qe)},useDebugValue:qu,useDeferredValue:function(n,a){var c=Ae();return An===null?$u(c,n,a):Ed(c,An.memoizedState,n,a)},useTransition:function(){var n=bt(qe)[0],a=Ae().memoizedState;return[typeof n=="boolean"?n:ue(n),a]},useSyncExternalStore:Nt,useId:Th,useHostTransitionStatus:Td,useFormState:Ws,useActionState:Ws,useOptimistic:function(n,a){var c=Ae();return An!==null?vn(c,An,n,a):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:Ie,useCacheRefresh:Ph},Nd=null,Dh=0;function Xp(n){var a=Dh;return Dh+=1,Nd===null&&(Nd=[]),Dt(Nd,n,a)}function Ah(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function ef(n,a){throw a.$$typeof===v?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function Hy(n){var a=n._init;return a(n._payload)}function Vy(n){function a(st,Xe){if(n){var ot=st.deletions;ot===null?(st.deletions=[Xe],st.flags|=16):ot.push(Xe)}}function c(st,Xe){if(!n)return null;for(;Xe!==null;)a(st,Xe),Xe=Xe.sibling;return null}function f(st){for(var Xe=new Map;st!==null;)st.key!==null?Xe.set(st.key,st):Xe.set(st.index,st),st=st.sibling;return Xe}function B(st,Xe){return st=Ki(st,Xe),st.index=0,st.sibling=null,st}function V(st,Xe,ot){return st.index=ot,n?(ot=st.alternate,ot!==null?(ot=ot.index,ot<Xe?(st.flags|=67108866,Xe):ot):(st.flags|=67108866,Xe)):(st.flags|=1048576,Xe)}function oe(st){return n&&st.alternate===null&&(st.flags|=67108866),st}function _e(st,Xe,ot,Gt){return Xe===null||Xe.tag!==6?(Xe=nc(ot,st.mode,Gt),Xe.return=st,Xe):(Xe=B(Xe,ot),Xe.return=st,Xe)}function Ve(st,Xe,ot,Gt){var hr=ot.type;return hr===_?Ht(st,Xe,ot.props.children,Gt,ot.key):Xe!==null&&(Xe.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===S&&Hy(hr)===Xe.type)?(Xe=B(Xe,ot.props),Ah(Xe,ot),Xe.return=st,Xe):(Xe=gc(ot.type,ot.key,ot.props,null,st.mode,Gt),Ah(Xe,ot),Xe.return=st,Xe)}function lt(st,Xe,ot,Gt){return Xe===null||Xe.tag!==4||Xe.stateNode.containerInfo!==ot.containerInfo||Xe.stateNode.implementation!==ot.implementation?(Xe=jo(ot,st.mode,Gt),Xe.return=st,Xe):(Xe=B(Xe,ot.children||[]),Xe.return=st,Xe)}function Ht(st,Xe,ot,Gt,hr){return Xe===null||Xe.tag!==7?(Xe=xi(ot,st.mode,Gt,hr),Xe.return=st,Xe):(Xe=B(Xe,ot),Xe.return=st,Xe)}function en(st,Xe,ot){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Xe=nc(""+Xe,st.mode,ot),Xe.return=st,Xe;if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case b:return ot=gc(Xe.type,Xe.key,Xe.props,null,st.mode,ot),Ah(ot,Xe),ot.return=st,ot;case E:return Xe=jo(Xe,st.mode,ot),Xe.return=st,Xe;case S:var Gt=Xe._init;return Xe=Gt(Xe._payload),en(st,Xe,ot)}if(U(Xe)||O(Xe))return Xe=xi(Xe,st.mode,ot,null),Xe.return=st,Xe;if(typeof Xe.then=="function")return en(st,Xp(Xe),ot);if(Xe.$$typeof===g)return en(st,jl(st,Xe),ot);ef(st,Xe)}return null}function pt(st,Xe,ot,Gt){var hr=Xe!==null?Xe.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return hr!==null?null:_e(st,Xe,""+ot,Gt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case b:return ot.key===hr?Ve(st,Xe,ot,Gt):null;case E:return ot.key===hr?lt(st,Xe,ot,Gt):null;case S:return hr=ot._init,ot=hr(ot._payload),pt(st,Xe,ot,Gt)}if(U(ot)||O(ot))return hr!==null?null:Ht(st,Xe,ot,Gt,null);if(typeof ot.then=="function")return pt(st,Xe,Xp(ot),Gt);if(ot.$$typeof===g)return pt(st,Xe,jl(st,ot),Gt);ef(st,ot)}return null}function yt(st,Xe,ot,Gt,hr){if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint")return st=st.get(ot)||null,_e(Xe,st,""+Gt,hr);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case b:return st=st.get(Gt.key===null?ot:Gt.key)||null,Ve(Xe,st,Gt,hr);case E:return st=st.get(Gt.key===null?ot:Gt.key)||null,lt(Xe,st,Gt,hr);case S:var ga=Gt._init;return Gt=ga(Gt._payload),yt(st,Xe,ot,Gt,hr)}if(U(Gt)||O(Gt))return st=st.get(ot)||null,Ht(Xe,st,Gt,hr,null);if(typeof Gt.then=="function")return yt(st,Xe,ot,Xp(Gt),hr);if(Gt.$$typeof===g)return yt(st,Xe,ot,jl(Xe,Gt),hr);ef(Xe,Gt)}return null}function $r(st,Xe,ot,Gt){for(var hr=null,ga=null,Rr=Xe,zr=Xe=0,zi=null;Rr!==null&&zr<ot.length;zr++){Rr.index>zr?(zi=Rr,Rr=null):zi=Rr.sibling;var Ia=pt(st,Rr,ot[zr],Gt);if(Ia===null){Rr===null&&(Rr=zi);break}n&&Rr&&Ia.alternate===null&&a(st,Rr),Xe=V(Ia,Xe,zr),ga===null?hr=Ia:ga.sibling=Ia,ga=Ia,Rr=zi}if(zr===ot.length)return c(st,Rr),jr&&it(st,zr),hr;if(Rr===null){for(;zr<ot.length;zr++)Rr=en(st,ot[zr],Gt),Rr!==null&&(Xe=V(Rr,Xe,zr),ga===null?hr=Rr:ga.sibling=Rr,ga=Rr);return jr&&it(st,zr),hr}for(Rr=f(Rr);zr<ot.length;zr++)zi=yt(Rr,st,zr,ot[zr],Gt),zi!==null&&(n&&zi.alternate!==null&&Rr.delete(zi.key===null?zr:zi.key),Xe=V(zi,Xe,zr),ga===null?hr=zi:ga.sibling=zi,ga=zi);return n&&Rr.forEach(function(Tu){return a(st,Tu)}),jr&&it(st,zr),hr}function Br(st,Xe,ot,Gt){if(ot==null)throw Error(s(151));for(var hr=null,ga=null,Rr=Xe,zr=Xe=0,zi=null,Ia=ot.next();Rr!==null&&!Ia.done;zr++,Ia=ot.next()){Rr.index>zr?(zi=Rr,Rr=null):zi=Rr.sibling;var Tu=pt(st,Rr,Ia.value,Gt);if(Tu===null){Rr===null&&(Rr=zi);break}n&&Rr&&Tu.alternate===null&&a(st,Rr),Xe=V(Tu,Xe,zr),ga===null?hr=Tu:ga.sibling=Tu,ga=Tu,Rr=zi}if(Ia.done)return c(st,Rr),jr&&it(st,zr),hr;if(Rr===null){for(;!Ia.done;zr++,Ia=ot.next())Ia=en(st,Ia.value,Gt),Ia!==null&&(Xe=V(Ia,Xe,zr),ga===null?hr=Ia:ga.sibling=Ia,ga=Ia);return jr&&it(st,zr),hr}for(Rr=f(Rr);!Ia.done;zr++,Ia=ot.next())Ia=yt(Rr,st,zr,Ia.value,Gt),Ia!==null&&(n&&Ia.alternate!==null&&Rr.delete(Ia.key===null?zr:Ia.key),Xe=V(Ia,Xe,zr),ga===null?hr=Ia:ga.sibling=Ia,ga=Ia);return n&&Rr.forEach(function(vk){return a(st,vk)}),jr&&it(st,zr),hr}function rs(st,Xe,ot,Gt){if(typeof ot=="object"&&ot!==null&&ot.type===_&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case b:e:{for(var hr=ot.key;Xe!==null;){if(Xe.key===hr){if(hr=ot.type,hr===_){if(Xe.tag===7){c(st,Xe.sibling),Gt=B(Xe,ot.props.children),Gt.return=st,st=Gt;break e}}else if(Xe.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===S&&Hy(hr)===Xe.type){c(st,Xe.sibling),Gt=B(Xe,ot.props),Ah(Gt,ot),Gt.return=st,st=Gt;break e}c(st,Xe);break}else a(st,Xe);Xe=Xe.sibling}ot.type===_?(Gt=xi(ot.props.children,st.mode,Gt,ot.key),Gt.return=st,st=Gt):(Gt=gc(ot.type,ot.key,ot.props,null,st.mode,Gt),Ah(Gt,ot),Gt.return=st,st=Gt)}return oe(st);case E:e:{for(hr=ot.key;Xe!==null;){if(Xe.key===hr)if(Xe.tag===4&&Xe.stateNode.containerInfo===ot.containerInfo&&Xe.stateNode.implementation===ot.implementation){c(st,Xe.sibling),Gt=B(Xe,ot.children||[]),Gt.return=st,st=Gt;break e}else{c(st,Xe);break}else a(st,Xe);Xe=Xe.sibling}Gt=jo(ot,st.mode,Gt),Gt.return=st,st=Gt}return oe(st);case S:return hr=ot._init,ot=hr(ot._payload),rs(st,Xe,ot,Gt)}if(U(ot))return $r(st,Xe,ot,Gt);if(O(ot)){if(hr=O(ot),typeof hr!="function")throw Error(s(150));return ot=hr.call(ot),Br(st,Xe,ot,Gt)}if(typeof ot.then=="function")return rs(st,Xe,Xp(ot),Gt);if(ot.$$typeof===g)return rs(st,Xe,jl(st,ot),Gt);ef(st,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint"?(ot=""+ot,Xe!==null&&Xe.tag===6?(c(st,Xe.sibling),Gt=B(Xe,ot),Gt.return=st,st=Gt):(c(st,Xe),Gt=nc(ot,st.mode,Gt),Gt.return=st,st=Gt),oe(st)):c(st,Xe)}return function(st,Xe,ot,Gt){try{Dh=0;var hr=rs(st,Xe,ot,Gt);return Nd=null,hr}catch(Rr){if(Rr===ie||Rr===De)throw Rr;var ga=Ta(29,Rr,null,st.mode);return ga.lanes=Gt,ga.return=st,ga}finally{}}}var Dd=Vy(!0),qy=Vy(!1),Sc=ve(null),ll=null;function pu(n){var a=n.alternate;Re(Ri,Ri.current&1),Re(Sc,n),ll===null&&(a===null||an.current!==null||a.memoizedState!==null)&&(ll=n)}function $y(n){if(n.tag===22){if(Re(Ri,Ri.current),Re(Sc,n),ll===null){var a=n.alternate;a!==null&&a.memoizedState!==null&&(ll=n)}}else fu()}function fu(){Re(Ri,Ri.current),Re(Sc,Sc.current)}function zl(n){we(Sc),ll===n&&(ll=null),we(Ri)}var Ri=ve(0);function tf(n){for(var a=n;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||tv(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function hg(n,a,c,f){a=n.memoizedState,c=c(f,a),c=c==null?a:R({},a,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var pg={enqueueSetState:function(n,a,c){n=n._reactInternals;var f=ic(),B=ft(f);B.payload=a,c!=null&&(B.callback=c),a=Mt(n,B,f),a!==null&&(oc(a,n,f),mt(a,n,f))},enqueueReplaceState:function(n,a,c){n=n._reactInternals;var f=ic(),B=ft(f);B.tag=1,B.payload=a,c!=null&&(B.callback=c),a=Mt(n,B,f),a!==null&&(oc(a,n,f),mt(a,n,f))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var c=ic(),f=ft(c);f.tag=2,a!=null&&(f.callback=a),a=Mt(n,f,c),a!==null&&(oc(a,n,c),mt(a,n,c))}};function Wy(n,a,c,f,B,V,oe){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,V,oe):a.prototype&&a.prototype.isPureReactComponent?!ia(c,f)||!ia(B,V):!0}function Zy(n,a,c,f){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==n&&pg.enqueueReplaceState(a,a.state,null)}function Wu(n,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(n=n.defaultProps){c===a&&(c=R({},c));for(var B in n)c[B]===void 0&&(c[B]=n[B])}return c}var nf=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Gy(n){nf(n)}function Yy(n){console.error(n)}function Ky(n){nf(n)}function rf(n,a){try{var c=n.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function Qy(n,a,c){try{var f=n.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(B){setTimeout(function(){throw B})}}function fg(n,a,c){return c=ft(c),c.tag=3,c.payload={element:null},c.callback=function(){rf(n,a)},c}function Jy(n){return n=ft(n),n.tag=3,n}function Xy(n,a,c,f){var B=c.type.getDerivedStateFromError;if(typeof B=="function"){var V=f.value;n.payload=function(){return B(V)},n.callback=function(){Qy(a,c,f)}}var oe=c.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(n.callback=function(){Qy(a,c,f),typeof B!="function"&&(bu===null?bu=new Set([this]):bu.add(this));var _e=f.stack;this.componentDidCatch(f.value,{componentStack:_e!==null?_e:""})})}function vE(n,a,c,f,B){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&Io(a,c,B,!0),c=Sc.current,c!==null){switch(c.tag){case 13:return ll===null?Bg():c.alternate===null&&Zs===0&&(Zs=3),c.flags&=-257,c.flags|=65536,c.lanes=B,f===Le?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),Ug(n,f,B)),!1;case 22:return c.flags|=65536,f===Le?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),Ug(n,f,B)),!1}throw Error(s(435,c.tag))}return Ug(n,f,B),Bg(),!1}if(jr)return a=Sc.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=B,f!==ds&&(n=Error(s(422),{cause:f}),Mi(vs(n,c)))):(f!==ds&&(a=Error(s(423),{cause:f}),Mi(vs(a,c))),n=n.current.alternate,n.flags|=65536,B&=-B,n.lanes|=B,f=vs(f,c),B=fg(n.stateNode,f,B),jt(n,B),Zs!==4&&(Zs=2)),!1;var V=Error(s(520),{cause:f});if(V=vs(V,c),zh===null?zh=[V]:zh.push(V),Zs!==4&&(Zs=2),a===null)return!0;f=vs(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,n=B&-B,c.lanes|=n,n=fg(c.stateNode,f,n),jt(c,n),!1;case 1:if(a=c.type,V=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(bu===null||!bu.has(V))))return c.flags|=65536,B&=-B,c.lanes|=B,B=Jy(B),Xy(B,n,c,f),jt(c,B),!1}c=c.return}while(c!==null);return!1}var e_=Error(s(461)),Ii=!1;function Ji(n,a,c,f){a.child=n===null?qy(a,null,c,f):Dd(a,n.child,c,f)}function t_(n,a,c,f,B){c=c.render;var V=a.ref;if("ref"in f){var oe={};for(var _e in f)_e!=="ref"&&(oe[_e]=f[_e])}else oe=f;return ji(a),f=Ee(n,a,c,oe,V,B),_e=ke(),n!==null&&!Ii?(Oe(n,a,B),Ul(n,a,B)):(jr&&_e&&Jt(a),a.flags|=1,Ji(n,a,f,B),a.child)}function n_(n,a,c,f,B){if(n===null){var V=c.type;return typeof V=="function"&&!tc(V)&&V.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=V,r_(n,a,V,f,B)):(n=gc(c.type,null,f,a,a.mode,B),n.ref=a.ref,n.return=a,a.child=n)}if(V=n.child,!wg(n,B)){var oe=V.memoizedProps;if(c=c.compare,c=c!==null?c:ia,c(oe,f)&&n.ref===a.ref)return Ul(n,a,B)}return a.flags|=1,n=Ki(V,f),n.ref=a.ref,n.return=a,a.child=n}function r_(n,a,c,f,B){if(n!==null){var V=n.memoizedProps;if(ia(V,f)&&n.ref===a.ref)if(Ii=!1,a.pendingProps=f=V,wg(n,B))(n.flags&131072)!==0&&(Ii=!0);else return a.lanes=n.lanes,Ul(n,a,B)}return mg(n,a,c,f,B)}function a_(n,a,c){var f=a.pendingProps,B=f.children,V=n!==null?n.memoizedState:null;if(f.mode==="hidden"){if((a.flags&128)!==0){if(f=V!==null?V.baseLanes|c:c,n!==null){for(B=a.child=n.child,V=0;B!==null;)V=V|B.lanes|B.childLanes,B=B.sibling;a.childLanes=V&~f}else a.childLanes=0,a.child=null;return s_(n,a,f,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&re(a,V!==null?V.cachePool:null),V!==null?mn(a,V):Xt(),$y(a);else return a.lanes=a.childLanes=536870912,s_(n,a,V!==null?V.baseLanes|c:c,c)}else V!==null?(re(a,V.cachePool),mn(a,V),fu(),a.memoizedState=null):(n!==null&&re(a,null),Xt(),fu());return Ji(n,a,B,c),a.child}function s_(n,a,c,f){var B=ee();return B=B===null?null:{parent:Rs._currentValue,pool:B},a.memoizedState={baseLanes:c,cachePool:B},n!==null&&re(a,null),Xt(),$y(a),n!==null&&Io(n,a,f,!0),null}function af(n,a){var c=a.ref;if(c===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(n===null||n.ref!==c)&&(a.flags|=4194816)}}function mg(n,a,c,f,B){return ji(a),c=Ee(n,a,c,f,void 0,B),f=ke(),n!==null&&!Ii?(Oe(n,a,B),Ul(n,a,B)):(jr&&f&&Jt(a),a.flags|=1,Ji(n,a,c,B),a.child)}function i_(n,a,c,f,B,V){return ji(a),a.updateQueue=null,c=Se(a,f,c,B),xe(n),f=ke(),n!==null&&!Ii?(Oe(n,a,V),Ul(n,a,V)):(jr&&f&&Jt(a),a.flags|=1,Ji(n,a,c,V),a.child)}function o_(n,a,c,f,B){if(ji(a),a.stateNode===null){var V=Mo,oe=c.contextType;typeof oe=="object"&&oe!==null&&(V=Ss(oe)),V=new c(f,V),a.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=pg,a.stateNode=V,V._reactInternals=a,V=a.stateNode,V.props=f,V.state=a.memoizedState,V.refs={},xn(a),oe=c.contextType,V.context=typeof oe=="object"&&oe!==null?Ss(oe):Mo,V.state=a.memoizedState,oe=c.getDerivedStateFromProps,typeof oe=="function"&&(hg(a,c,oe,f),V.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(oe=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),oe!==V.state&&pg.enqueueReplaceState(V,V.state,null),dn(a,f,V,B),Bt(),V.state=a.memoizedState),typeof V.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(n===null){V=a.stateNode;var _e=a.memoizedProps,Ve=Wu(c,_e);V.props=Ve;var lt=V.context,Ht=c.contextType;oe=Mo,typeof Ht=="object"&&Ht!==null&&(oe=Ss(Ht));var en=c.getDerivedStateFromProps;Ht=typeof en=="function"||typeof V.getSnapshotBeforeUpdate=="function",_e=a.pendingProps!==_e,Ht||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(_e||lt!==oe)&&Zy(a,V,f,oe),hn=!1;var pt=a.memoizedState;V.state=pt,dn(a,f,V,B),Bt(),lt=a.memoizedState,_e||pt!==lt||hn?(typeof en=="function"&&(hg(a,c,en,f),lt=a.memoizedState),(Ve=hn||Wy(a,c,Ve,f,pt,lt,oe))?(Ht||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(a.flags|=4194308)):(typeof V.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=lt),V.props=f,V.state=lt,V.context=oe,f=Ve):(typeof V.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{V=a.stateNode,Pe(n,a),oe=a.memoizedProps,Ht=Wu(c,oe),V.props=Ht,en=a.pendingProps,pt=V.context,lt=c.contextType,Ve=Mo,typeof lt=="object"&&lt!==null&&(Ve=Ss(lt)),_e=c.getDerivedStateFromProps,(lt=typeof _e=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(oe!==en||pt!==Ve)&&Zy(a,V,f,Ve),hn=!1,pt=a.memoizedState,V.state=pt,dn(a,f,V,B),Bt();var yt=a.memoizedState;oe!==en||pt!==yt||hn||n!==null&&n.dependencies!==null&&cl(n.dependencies)?(typeof _e=="function"&&(hg(a,c,_e,f),yt=a.memoizedState),(Ht=hn||Wy(a,c,Ht,f,pt,yt,Ve)||n!==null&&n.dependencies!==null&&cl(n.dependencies))?(lt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(f,yt,Ve),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(f,yt,Ve)),typeof V.componentDidUpdate=="function"&&(a.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof V.componentDidUpdate!="function"||oe===n.memoizedProps&&pt===n.memoizedState||(a.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||oe===n.memoizedProps&&pt===n.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=yt),V.props=f,V.state=yt,V.context=Ve,f=Ht):(typeof V.componentDidUpdate!="function"||oe===n.memoizedProps&&pt===n.memoizedState||(a.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||oe===n.memoizedProps&&pt===n.memoizedState||(a.flags|=1024),f=!1)}return V=f,af(n,a),f=(a.flags&128)!==0,V||f?(V=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:V.render(),a.flags|=1,n!==null&&f?(a.child=Dd(a,n.child,null,B),a.child=Dd(a,null,c,B)):Ji(n,a,c,B),a.memoizedState=V.state,n=a.child):n=Ul(n,a,B),n}function c_(n,a,c,f){return lo(),a.flags|=256,Ji(n,a,c,f),a.child}var gg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vg(n){return{baseLanes:n,cachePool:se()}}function yg(n,a,c){return n=n!==null?n.childLanes&~c:0,a&&(n|=Rc),n}function l_(n,a,c){var f=a.pendingProps,B=!1,V=(a.flags&128)!==0,oe;if((oe=V)||(oe=n!==null&&n.memoizedState===null?!1:(Ri.current&2)!==0),oe&&(B=!0,a.flags&=-129),oe=(a.flags&32)!==0,a.flags&=-33,n===null){if(jr){if(B?pu(a):fu(),jr){var _e=ir,Ve;if(Ve=_e){e:{for(Ve=_e,_e=Ua;Ve.nodeType!==8;){if(!_e){_e=null;break e}if(Ve=$c(Ve.nextSibling),Ve===null){_e=null;break e}}_e=Ve}_e!==null?(a.memoizedState={dehydrated:_e,treeContext:te!==null?{id:he,overflow:ze}:null,retryLane:536870912,hydrationErrors:null},Ve=Ta(18,null,null,0),Ve.stateNode=_e,Ve.return=a,a.child=Ve,Yn=a,ir=null,Ve=!0):Ve=!1}Ve||js(a)}if(_e=a.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return tv(_e)?a.lanes=32:a.lanes=536870912,null;zl(a)}return _e=f.children,f=f.fallback,B?(fu(),B=a.mode,_e=sf({mode:"hidden",children:_e},B),f=xi(f,B,c,null),_e.return=a,f.return=a,_e.sibling=f,a.child=_e,B=a.child,B.memoizedState=vg(c),B.childLanes=yg(n,oe,c),a.memoizedState=gg,f):(pu(a),_g(a,_e))}if(Ve=n.memoizedState,Ve!==null&&(_e=Ve.dehydrated,_e!==null)){if(V)a.flags&256?(pu(a),a.flags&=-257,a=bg(n,a,c)):a.memoizedState!==null?(fu(),a.child=n.child,a.flags|=128,a=null):(fu(),B=f.fallback,_e=a.mode,f=sf({mode:"visible",children:f.children},_e),B=xi(B,_e,c,null),B.flags|=2,f.return=a,B.return=a,f.sibling=B,a.child=f,Dd(a,n.child,null,c),f=a.child,f.memoizedState=vg(c),f.childLanes=yg(n,oe,c),a.memoizedState=gg,a=B);else if(pu(a),tv(_e)){if(oe=_e.nextSibling&&_e.nextSibling.dataset,oe)var lt=oe.dgst;oe=lt,f=Error(s(419)),f.stack="",f.digest=oe,Mi({value:f,source:null,stack:null}),a=bg(n,a,c)}else if(Ii||Io(n,a,c,!1),oe=(c&n.childLanes)!==0,Ii||oe){if(oe=hs,oe!==null&&(f=c&-c,f=(f&42)!==0?1:Zt(f),f=(f&(oe.suspendedLanes|c))!==0?0:f,f!==0&&f!==Ve.retryLane))throw Ve.retryLane=f,co(n,f),oc(oe,n,f),e_;_e.data==="$?"||Bg(),a=bg(n,a,c)}else _e.data==="$?"?(a.flags|=192,a.child=n.child,a=null):(n=Ve.treeContext,ir=$c(_e.nextSibling),Yn=a,jr=!0,ka=null,Ua=!1,n!==null&&(j[W++]=he,j[W++]=ze,j[W++]=te,he=n.id,ze=n.overflow,te=a),a=_g(a,f.children),a.flags|=4096);return a}return B?(fu(),B=f.fallback,_e=a.mode,Ve=n.child,lt=Ve.sibling,f=Ki(Ve,{mode:"hidden",children:f.children}),f.subtreeFlags=Ve.subtreeFlags&65011712,lt!==null?B=Ki(lt,B):(B=xi(B,_e,c,null),B.flags|=2),B.return=a,f.return=a,f.sibling=B,a.child=f,f=B,B=a.child,_e=n.child.memoizedState,_e===null?_e=vg(c):(Ve=_e.cachePool,Ve!==null?(lt=Rs._currentValue,Ve=Ve.parent!==lt?{parent:lt,pool:lt}:Ve):Ve=se(),_e={baseLanes:_e.baseLanes|c,cachePool:Ve}),B.memoizedState=_e,B.childLanes=yg(n,oe,c),a.memoizedState=gg,f):(pu(a),c=n.child,n=c.sibling,c=Ki(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,n!==null&&(oe=a.deletions,oe===null?(a.deletions=[n],a.flags|=16):oe.push(n)),a.child=c,a.memoizedState=null,c)}function _g(n,a){return a=sf({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function sf(n,a){return n=Ta(22,n,null,a),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function bg(n,a,c){return Dd(a,n.child,null,c),n=_g(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function u_(n,a,c){n.lanes|=a;var f=n.alternate;f!==null&&(f.lanes|=a),yc(n.return,a,c)}function xg(n,a,c,f,B){var V=n.memoizedState;V===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:B}:(V.isBackwards=a,V.rendering=null,V.renderingStartTime=0,V.last=f,V.tail=c,V.tailMode=B)}function d_(n,a,c){var f=a.pendingProps,B=f.revealOrder,V=f.tail;if(Ji(n,a,f.children,c),f=Ri.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&u_(n,c,a);else if(n.tag===19)u_(n,c,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}switch(Re(Ri,f),B){case"forwards":for(c=a.child,B=null;c!==null;)n=c.alternate,n!==null&&tf(n)===null&&(B=c),c=c.sibling;c=B,c===null?(B=a.child,a.child=null):(B=c.sibling,c.sibling=null),xg(a,!1,B,c,V);break;case"backwards":for(c=null,B=a.child,a.child=null;B!==null;){if(n=B.alternate,n!==null&&tf(n)===null){a.child=B;break}n=B.sibling,B.sibling=c,c=B,B=n}xg(a,!0,c,null,V);break;case"together":xg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ul(n,a,c){if(n!==null&&(a.dependencies=n.dependencies),_u|=a.lanes,(c&a.childLanes)===0)if(n!==null){if(Io(n,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,c=Ki(n,n.pendingProps),a.child=c,c.return=a;n.sibling!==null;)n=n.sibling,c=c.sibling=Ki(n,n.pendingProps),c.return=a;c.sibling=null}return a.child}function wg(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&cl(n)))}function yE(n,a,c){switch(a.tag){case 3:Ye(a,a.stateNode.containerInfo),So(a,Rs,n.memoizedState.cache),lo();break;case 27:case 5:Ge(a);break;case 4:Ye(a,a.stateNode.containerInfo);break;case 10:So(a,a.type,a.memoizedProps.value);break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(pu(a),a.flags|=128,null):(c&a.child.childLanes)!==0?l_(n,a,c):(pu(a),n=Ul(n,a,c),n!==null?n.sibling:null);pu(a);break;case 19:var B=(n.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(Io(n,a,c,!1),f=(c&a.childLanes)!==0),B){if(f)return d_(n,a,c);a.flags|=128}if(B=a.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),Re(Ri,Ri.current),f)break;return null;case 22:case 23:return a.lanes=0,a_(n,a,c);case 24:So(a,Rs,n.memoizedState.cache)}return Ul(n,a,c)}function h_(n,a,c){if(n!==null)if(n.memoizedProps!==a.pendingProps)Ii=!0;else{if(!wg(n,c)&&(a.flags&128)===0)return Ii=!1,yE(n,a,c);Ii=(n.flags&131072)!==0}else Ii=!1,jr&&(a.flags&1048576)!==0&&ht(a,p,a.index);switch(a.lanes=0,a.tag){case 16:e:{n=a.pendingProps;var f=a.elementType,B=f._init;if(f=B(f._payload),a.type=f,typeof f=="function")tc(f)?(n=Wu(f,n),a.tag=1,a=o_(null,a,f,n,c)):(a.tag=0,a=mg(null,a,f,n,c));else{if(f!=null){if(B=f.$$typeof,B===A){a.tag=11,a=t_(null,a,f,n,c);break e}else if(B===D){a.tag=14,a=n_(null,a,f,n,c);break e}}throw a=I(f)||f,Error(s(306,a,""))}}return a;case 0:return mg(n,a,a.type,a.pendingProps,c);case 1:return f=a.type,B=Wu(f,a.pendingProps),o_(n,a,f,B,c);case 3:e:{if(Ye(a,a.stateNode.containerInfo),n===null)throw Error(s(387));f=a.pendingProps;var V=a.memoizedState;B=V.element,Pe(n,a),dn(a,f,null,c);var oe=a.memoizedState;if(f=oe.cache,So(a,Rs,f),f!==V.cache&&Hc(a,[Rs],c,!0),Bt(),f=oe.element,V.isDehydrated)if(V={element:f,isDehydrated:!1,cache:oe.cache},a.updateQueue.baseState=V,a.memoizedState=V,a.flags&256){a=c_(n,a,f,c);break e}else if(f!==B){B=vs(Error(s(424)),a),Mi(B),a=c_(n,a,f,c);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ir=$c(n.firstChild),Yn=a,jr=!0,ka=null,Ua=!0,c=qy(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(lo(),f===B){a=Ul(n,a,c);break e}Ji(n,a,f,c)}a=a.child}return a;case 26:return af(n,a),n===null?(c=gb(a.type,null,a.pendingProps,null))?a.memoizedState=c:jr||(c=a.type,n=a.pendingProps,f=bf(Be.current).createElement(c),f[On]=a,f[Ln]=n,eo(f,c,n),Kn(f),a.stateNode=f):a.memoizedState=gb(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Ge(a),n===null&&jr&&(f=a.stateNode=pb(a.type,a.pendingProps,Be.current),Yn=a,Ua=!0,B=ir,Su(a.type)?(nv=B,ir=$c(f.firstChild)):ir=B),Ji(n,a,a.pendingProps.children,c),af(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&jr&&((B=f=ir)&&(f=WE(f,a.type,a.pendingProps,Ua),f!==null?(a.stateNode=f,Yn=a,ir=$c(f.firstChild),Ua=!1,B=!0):B=!1),B||js(a)),Ge(a),B=a.type,V=a.pendingProps,oe=n!==null?n.memoizedProps:null,f=V.children,Jg(B,V)?f=null:oe!==null&&Jg(B,oe)&&(a.flags|=32),a.memoizedState!==null&&(B=Ee(n,a,$e,null,null,c),Gh._currentValue=B),af(n,a),Ji(n,a,f,c),a.child;case 6:return n===null&&jr&&((n=c=ir)&&(c=ZE(c,a.pendingProps,Ua),c!==null?(a.stateNode=c,Yn=a,ir=null,n=!0):n=!1),n||js(a)),null;case 13:return l_(n,a,c);case 4:return Ye(a,a.stateNode.containerInfo),f=a.pendingProps,n===null?a.child=Dd(a,null,f,c):Ji(n,a,f,c),a.child;case 11:return t_(n,a,a.type,a.pendingProps,c);case 7:return Ji(n,a,a.pendingProps,c),a.child;case 8:return Ji(n,a,a.pendingProps.children,c),a.child;case 12:return Ji(n,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,So(a,a.type,f.value),Ji(n,a,f.children,c),a.child;case 9:return B=a.type._context,f=a.pendingProps.children,ji(a),B=Ss(B),f=f(B),a.flags|=1,Ji(n,a,f,c),a.child;case 14:return n_(n,a,a.type,a.pendingProps,c);case 15:return r_(n,a,a.type,a.pendingProps,c);case 19:return d_(n,a,c);case 31:return f=a.pendingProps,c=a.mode,f={mode:f.mode,children:f.children},n===null?(c=sf(f,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=Ki(n.child,f),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return a_(n,a,c);case 24:return ji(a),f=Ss(Rs),n===null?(B=ee(),B===null&&(B=hs,V=_c(),B.pooledCache=V,V.refCount++,V!==null&&(B.pooledCacheLanes|=c),B=V),a.memoizedState={parent:f,cache:B},xn(a),So(a,Rs,B)):((n.lanes&c)!==0&&(Pe(n,a),dn(a,null,null,c),Bt()),B=n.memoizedState,V=a.memoizedState,B.parent!==f?(B={parent:f,cache:f},a.memoizedState=B,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=B),So(a,Rs,f)):(f=V.cache,So(a,Rs,f),f!==B.cache&&Hc(a,[Rs],c,!0))),Ji(n,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Fl(n){n.flags|=4}function p_(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!xb(a)){if(a=Sc.current,a!==null&&((Pa&4194048)===Pa?ll!==null:(Pa&62914560)!==Pa&&(Pa&536870912)===0||a!==ll))throw qt=Le,le;n.flags|=8192}}function of(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?Ha():536870912,n.lanes|=a,jd|=a)}function Oh(n,a){if(!jr)switch(n.tailMode){case"hidden":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Ls(n){var a=n.alternate!==null&&n.alternate.child===n.child,c=0,f=0;if(a)for(var B=n.child;B!==null;)c|=B.lanes|B.childLanes,f|=B.subtreeFlags&65011712,f|=B.flags&65011712,B.return=n,B=B.sibling;else for(B=n.child;B!==null;)c|=B.lanes|B.childLanes,f|=B.subtreeFlags,f|=B.flags,B.return=n,B=B.sibling;return n.subtreeFlags|=f,n.childLanes=c,a}function _E(n,a,c){var f=a.pendingProps;switch(qn(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ls(a),null;case 1:return Ls(a),null;case 3:return c=a.stateNode,f=null,n!==null&&(f=n.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),ts(Rs),Qe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Lo(a)?Fl(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Fc())),Ls(a),null;case 26:return c=a.memoizedState,n===null?(Fl(a),c!==null?(Ls(a),p_(a,c)):(Ls(a),a.flags&=-16777217)):c?c!==n.memoizedState?(Fl(a),Ls(a),p_(a,c)):(Ls(a),a.flags&=-16777217):(n.memoizedProps!==f&&Fl(a),Ls(a),a.flags&=-16777217),null;case 27:He(a),c=Be.current;var B=a.type;if(n!==null&&a.stateNode!=null)n.memoizedProps!==f&&Fl(a);else{if(!f){if(a.stateNode===null)throw Error(s(166));return Ls(a),null}n=me.current,Lo(a)?vc(a):(n=pb(B,f,c),a.stateNode=n,Fl(a))}return Ls(a),null;case 5:if(He(a),c=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==f&&Fl(a);else{if(!f){if(a.stateNode===null)throw Error(s(166));return Ls(a),null}if(n=me.current,Lo(a))vc(a);else{switch(B=bf(Be.current),n){case 1:n=B.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:n=B.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":n=B.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":n=B.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":n=B.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof f.is=="string"?B.createElement("select",{is:f.is}):B.createElement("select"),f.multiple?n.multiple=!0:f.size&&(n.size=f.size);break;default:n=typeof f.is=="string"?B.createElement(c,{is:f.is}):B.createElement(c)}}n[On]=a,n[Ln]=f;e:for(B=a.child;B!==null;){if(B.tag===5||B.tag===6)n.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===a)break e;for(;B.sibling===null;){if(B.return===null||B.return===a)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}a.stateNode=n;e:switch(eo(n,c,f),c){case"button":case"input":case"select":case"textarea":n=!!f.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Fl(a)}}return Ls(a),a.flags&=-16777217,null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==f&&Fl(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(s(166));if(n=Be.current,Lo(a)){if(n=a.stateNode,c=a.memoizedProps,f=null,B=Yn,B!==null)switch(B.tag){case 27:case 5:f=B.memoizedProps}n[On]=a,n=!!(n.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||ib(n.nodeValue,c)),n||js(a)}else n=bf(n).createTextNode(f),n[On]=a,a.stateNode=n}return Ls(a),null;case 13:if(f=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(B=Lo(a),f!==null&&f.dehydrated!==null){if(n===null){if(!B)throw Error(s(318));if(B=a.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(s(317));B[On]=a}else lo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ls(a),B=!1}else B=Fc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=B),B=!0;if(!B)return a.flags&256?(zl(a),a):(zl(a),null)}if(zl(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=f!==null,n=n!==null&&n.memoizedState!==null,c){f=a.child,B=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(B=f.alternate.memoizedState.cachePool.pool);var V=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(V=f.memoizedState.cachePool.pool),V!==B&&(f.flags|=2048)}return c!==n&&c&&(a.child.flags|=8192),of(a,a.updateQueue),Ls(a),null;case 4:return Qe(),n===null&&Zg(a.stateNode.containerInfo),Ls(a),null;case 10:return ts(a.type),Ls(a),null;case 19:if(we(Ri),B=a.memoizedState,B===null)return Ls(a),null;if(f=(a.flags&128)!==0,V=B.rendering,V===null)if(f)Oh(B,!1);else{if(Zs!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(V=tf(n),V!==null){for(a.flags|=128,Oh(B,!1),n=V.updateQueue,a.updateQueue=n,of(a,n),a.subtreeFlags=0,n=c,c=a.child;c!==null;)Uc(c,n),c=c.sibling;return Re(Ri,Ri.current&1|2),a.child}n=n.sibling}B.tail!==null&&Pn()>uf&&(a.flags|=128,f=!0,Oh(B,!1),a.lanes=4194304)}else{if(!f)if(n=tf(V),n!==null){if(a.flags|=128,f=!0,n=n.updateQueue,a.updateQueue=n,of(a,n),Oh(B,!0),B.tail===null&&B.tailMode==="hidden"&&!V.alternate&&!jr)return Ls(a),null}else 2*Pn()-B.renderingStartTime>uf&&c!==536870912&&(a.flags|=128,f=!0,Oh(B,!1),a.lanes=4194304);B.isBackwards?(V.sibling=a.child,a.child=V):(n=B.last,n!==null?n.sibling=V:a.child=V,B.last=V)}return B.tail!==null?(a=B.tail,B.rendering=a,B.tail=a.sibling,B.renderingStartTime=Pn(),a.sibling=null,n=Ri.current,Re(Ri,f?n&1|2:n&1),a):(Ls(a),null);case 22:case 23:return zl(a),yr(),f=a.memoizedState!==null,n!==null?n.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(c&536870912)!==0&&(a.flags&128)===0&&(Ls(a),a.subtreeFlags&6&&(a.flags|=8192)):Ls(a),c=a.updateQueue,c!==null&&of(a,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),n!==null&&we(ge),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ts(Rs),Ls(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function bE(n,a){switch(qn(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return ts(Rs),Qe(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return He(a),null;case 13:if(zl(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));lo()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return we(Ri),null;case 4:return Qe(),null;case 10:return ts(a.type),null;case 22:case 23:return zl(a),yr(),n!==null&&we(ge),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return ts(Rs),null;case 25:return null;default:return null}}function f_(n,a){switch(qn(a),a.tag){case 3:ts(Rs),Qe();break;case 26:case 27:case 5:He(a);break;case 4:Qe();break;case 13:zl(a);break;case 19:we(Ri);break;case 10:ts(a.type);break;case 22:case 23:zl(a),yr(),n!==null&&we(ge);break;case 24:ts(Rs)}}function Mh(n,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var B=f.next;c=B;do{if((c.tag&n)===n){f=void 0;var V=c.create,oe=c.inst;f=V(),oe.destroy=f}c=c.next}while(c!==B)}}catch(_e){cs(a,a.return,_e)}}function mu(n,a,c){try{var f=a.updateQueue,B=f!==null?f.lastEffect:null;if(B!==null){var V=B.next;f=V;do{if((f.tag&n)===n){var oe=f.inst,_e=oe.destroy;if(_e!==void 0){oe.destroy=void 0,B=a;var Ve=c,lt=_e;try{lt()}catch(Ht){cs(B,Ve,Ht)}}}f=f.next}while(f!==V)}}catch(Ht){cs(a,a.return,Ht)}}function m_(n){var a=n.updateQueue;if(a!==null){var c=n.stateNode;try{gn(a,c)}catch(f){cs(n,n.return,f)}}}function g_(n,a,c){c.props=Wu(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(f){cs(n,a,f)}}function jh(n,a){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var f=n.stateNode;break;case 30:f=n.stateNode;break;default:f=n.stateNode}typeof c=="function"?n.refCleanup=c(f):c.current=f}}catch(B){cs(n,a,B)}}function ul(n,a){var c=n.ref,f=n.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(B){cs(n,a,B)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(B){cs(n,a,B)}else c.current=null}function v_(n){var a=n.type,c=n.memoizedProps,f=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(B){cs(n,n.return,B)}}function Sg(n,a,c){try{var f=n.stateNode;FE(f,n.type,c,a),f[Ln]=a}catch(B){cs(n,n.return,B)}}function y_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Su(n.type)||n.tag===4}function Rg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||y_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Su(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Eg(n,a,c){var f=n.tag;if(f===5||f===6)n=n.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(n),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=_f));else if(f!==4&&(f===27&&Su(n.type)&&(c=n.stateNode,a=null),n=n.child,n!==null))for(Eg(n,a,c),n=n.sibling;n!==null;)Eg(n,a,c),n=n.sibling}function cf(n,a,c){var f=n.tag;if(f===5||f===6)n=n.stateNode,a?c.insertBefore(n,a):c.appendChild(n);else if(f!==4&&(f===27&&Su(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(cf(n,a,c),n=n.sibling;n!==null;)cf(n,a,c),n=n.sibling}function __(n){var a=n.stateNode,c=n.memoizedProps;try{for(var f=n.type,B=a.attributes;B.length;)a.removeAttributeNode(B[0]);eo(a,f,c),a[On]=n,a[Ln]=c}catch(V){cs(n,n.return,V)}}var Hl=!1,ti=!1,kg=!1,b_=typeof WeakSet=="function"?WeakSet:Set,Bi=null;function xE(n,a){if(n=n.containerInfo,Kg=kf,n=_o(n),bo(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var B=f.anchorOffset,V=f.focusNode;f=f.focusOffset;try{c.nodeType,V.nodeType}catch{c=null;break e}var oe=0,_e=-1,Ve=-1,lt=0,Ht=0,en=n,pt=null;t:for(;;){for(var yt;en!==c||B!==0&&en.nodeType!==3||(_e=oe+B),en!==V||f!==0&&en.nodeType!==3||(Ve=oe+f),en.nodeType===3&&(oe+=en.nodeValue.length),(yt=en.firstChild)!==null;)pt=en,en=yt;for(;;){if(en===n)break t;if(pt===c&&++lt===B&&(_e=oe),pt===V&&++Ht===f&&(Ve=oe),(yt=en.nextSibling)!==null)break;en=pt,pt=en.parentNode}en=yt}c=_e===-1||Ve===-1?null:{start:_e,end:Ve}}else c=null}c=c||{start:0,end:0}}else c=null;for(Qg={focusedElem:n,selectionRange:c},kf=!1,Bi=a;Bi!==null;)if(a=Bi,n=a.child,(a.subtreeFlags&1024)!==0&&n!==null)n.return=a,Bi=n;else for(;Bi!==null;){switch(a=Bi,V=a.alternate,n=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&V!==null){n=void 0,c=a,B=V.memoizedProps,V=V.memoizedState,f=c.stateNode;try{var $r=Wu(c.type,B,c.elementType===c.type);n=f.getSnapshotBeforeUpdate($r,V),f.__reactInternalSnapshotBeforeUpdate=n}catch(Br){cs(c,c.return,Br)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,c=n.nodeType,c===9)ev(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ev(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,Bi=n;break}Bi=a.return}}function x_(n,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:gu(n,c),f&4&&Mh(5,c);break;case 1:if(gu(n,c),f&4)if(n=c.stateNode,a===null)try{n.componentDidMount()}catch(oe){cs(c,c.return,oe)}else{var B=Wu(c.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(B,a,n.__reactInternalSnapshotBeforeUpdate)}catch(oe){cs(c,c.return,oe)}}f&64&&m_(c),f&512&&jh(c,c.return);break;case 3:if(gu(n,c),f&64&&(n=c.updateQueue,n!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{gn(n,a)}catch(oe){cs(c,c.return,oe)}}break;case 27:a===null&&f&4&&__(c);case 26:case 5:gu(n,c),a===null&&f&4&&v_(c),f&512&&jh(c,c.return);break;case 12:gu(n,c);break;case 13:gu(n,c),f&4&&R_(n,c),f&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=NE.bind(null,c),GE(n,c))));break;case 22:if(f=c.memoizedState!==null||Hl,!f){a=a!==null&&a.memoizedState!==null||ti,B=Hl;var V=ti;Hl=f,(ti=a)&&!V?vu(n,c,(c.subtreeFlags&8772)!==0):gu(n,c),Hl=B,ti=V}break;case 30:break;default:gu(n,c)}}function w_(n){var a=n.alternate;a!==null&&(n.alternate=null,w_(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Nn(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Es=null,Bo=!1;function Vl(n,a,c){for(c=c.child;c!==null;)S_(n,a,c),c=c.sibling}function S_(n,a,c){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(un,c)}catch{}switch(c.tag){case 26:ti||ul(c,a),Vl(n,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ti||ul(c,a);var f=Es,B=Bo;Su(c.type)&&(Es=c.stateNode,Bo=!1),Vl(n,a,c),qh(c.stateNode),Es=f,Bo=B;break;case 5:ti||ul(c,a);case 6:if(f=Es,B=Bo,Es=null,Vl(n,a,c),Es=f,Bo=B,Es!==null)if(Bo)try{(Es.nodeType===9?Es.body:Es.nodeName==="HTML"?Es.ownerDocument.body:Es).removeChild(c.stateNode)}catch(V){cs(c,a,V)}else try{Es.removeChild(c.stateNode)}catch(V){cs(c,a,V)}break;case 18:Es!==null&&(Bo?(n=Es,db(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),Jh(n)):db(Es,c.stateNode));break;case 4:f=Es,B=Bo,Es=c.stateNode.containerInfo,Bo=!0,Vl(n,a,c),Es=f,Bo=B;break;case 0:case 11:case 14:case 15:ti||mu(2,c,a),ti||mu(4,c,a),Vl(n,a,c);break;case 1:ti||(ul(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&g_(c,a,f)),Vl(n,a,c);break;case 21:Vl(n,a,c);break;case 22:ti=(f=ti)||c.memoizedState!==null,Vl(n,a,c),ti=f;break;default:Vl(n,a,c)}}function R_(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Jh(n)}catch(c){cs(a,a.return,c)}}function wE(n){switch(n.tag){case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new b_),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new b_),a;default:throw Error(s(435,n.tag))}}function Cg(n,a){var c=wE(n);a.forEach(function(f){var B=DE.bind(null,n,f);c.has(f)||(c.add(f),f.then(B,B))})}function rc(n,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var B=c[f],V=n,oe=a,_e=oe;e:for(;_e!==null;){switch(_e.tag){case 27:if(Su(_e.type)){Es=_e.stateNode,Bo=!1;break e}break;case 5:Es=_e.stateNode,Bo=!1;break e;case 3:case 4:Es=_e.stateNode.containerInfo,Bo=!0;break e}_e=_e.return}if(Es===null)throw Error(s(160));S_(V,oe,B),Es=null,Bo=!1,V=B.alternate,V!==null&&(V.return=null),B.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)E_(a,n),a=a.sibling}var qc=null;function E_(n,a){var c=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:rc(a,n),ac(n),f&4&&(mu(3,n,n.return),Mh(3,n),mu(5,n,n.return));break;case 1:rc(a,n),ac(n),f&512&&(ti||c===null||ul(c,c.return)),f&64&&Hl&&(n=n.updateQueue,n!==null&&(f=n.callbacks,f!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var B=qc;if(rc(a,n),ac(n),f&512&&(ti||c===null||ul(c,c.return)),f&4){var V=c!==null?c.memoizedState:null;if(f=n.memoizedState,c===null)if(f===null)if(n.stateNode===null){e:{f=n.type,c=n.memoizedProps,B=B.ownerDocument||B;t:switch(f){case"title":V=B.getElementsByTagName("title")[0],(!V||V[In]||V[On]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=B.createElement(f),B.head.insertBefore(V,B.querySelector("head > title"))),eo(V,f,c),V[On]=n,Kn(V),f=V;break e;case"link":var oe=_b("link","href",B).get(f+(c.href||""));if(oe){for(var _e=0;_e<oe.length;_e++)if(V=oe[_e],V.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&V.getAttribute("rel")===(c.rel==null?null:c.rel)&&V.getAttribute("title")===(c.title==null?null:c.title)&&V.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){oe.splice(_e,1);break t}}V=B.createElement(f),eo(V,f,c),B.head.appendChild(V);break;case"meta":if(oe=_b("meta","content",B).get(f+(c.content||""))){for(_e=0;_e<oe.length;_e++)if(V=oe[_e],V.getAttribute("content")===(c.content==null?null:""+c.content)&&V.getAttribute("name")===(c.name==null?null:c.name)&&V.getAttribute("property")===(c.property==null?null:c.property)&&V.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&V.getAttribute("charset")===(c.charSet==null?null:c.charSet)){oe.splice(_e,1);break t}}V=B.createElement(f),eo(V,f,c),B.head.appendChild(V);break;default:throw Error(s(468,f))}V[On]=n,Kn(V),f=V}n.stateNode=f}else bb(B,n.type,n.stateNode);else n.stateNode=yb(B,f,n.memoizedProps);else V!==f?(V===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):V.count--,f===null?bb(B,n.type,n.stateNode):yb(B,f,n.memoizedProps)):f===null&&n.stateNode!==null&&Sg(n,n.memoizedProps,c.memoizedProps)}break;case 27:rc(a,n),ac(n),f&512&&(ti||c===null||ul(c,c.return)),c!==null&&f&4&&Sg(n,n.memoizedProps,c.memoizedProps);break;case 5:if(rc(a,n),ac(n),f&512&&(ti||c===null||ul(c,c.return)),n.flags&32){B=n.stateNode;try{Ps(B,"")}catch(yt){cs(n,n.return,yt)}}f&4&&n.stateNode!=null&&(B=n.memoizedProps,Sg(n,B,c!==null?c.memoizedProps:B)),f&1024&&(kg=!0);break;case 6:if(rc(a,n),ac(n),f&4){if(n.stateNode===null)throw Error(s(162));f=n.memoizedProps,c=n.stateNode;try{c.nodeValue=f}catch(yt){cs(n,n.return,yt)}}break;case 3:if(Sf=null,B=qc,qc=xf(a.containerInfo),rc(a,n),qc=B,ac(n),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Jh(a.containerInfo)}catch(yt){cs(n,n.return,yt)}kg&&(kg=!1,k_(n));break;case 4:f=qc,qc=xf(n.stateNode.containerInfo),rc(a,n),ac(n),qc=f;break;case 12:rc(a,n),ac(n);break;case 13:rc(a,n),ac(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Og=Pn()),f&4&&(f=n.updateQueue,f!==null&&(n.updateQueue=null,Cg(n,f)));break;case 22:B=n.memoizedState!==null;var Ve=c!==null&&c.memoizedState!==null,lt=Hl,Ht=ti;if(Hl=lt||B,ti=Ht||Ve,rc(a,n),ti=Ht,Hl=lt,ac(n),f&8192)e:for(a=n.stateNode,a._visibility=B?a._visibility&-2:a._visibility|1,B&&(c===null||Ve||Hl||ti||Zu(n)),c=null,a=n;;){if(a.tag===5||a.tag===26){if(c===null){Ve=c=a;try{if(V=Ve.stateNode,B)oe=V.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{_e=Ve.stateNode;var en=Ve.memoizedProps.style,pt=en!=null&&en.hasOwnProperty("display")?en.display:null;_e.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(yt){cs(Ve,Ve.return,yt)}}}else if(a.tag===6){if(c===null){Ve=a;try{Ve.stateNode.nodeValue=B?"":Ve.memoizedProps}catch(yt){cs(Ve,Ve.return,yt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=n.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Cg(n,c))));break;case 19:rc(a,n),ac(n),f&4&&(f=n.updateQueue,f!==null&&(n.updateQueue=null,Cg(n,f)));break;case 30:break;case 21:break;default:rc(a,n),ac(n)}}function ac(n){var a=n.flags;if(a&2){try{for(var c,f=n.return;f!==null;){if(y_(f)){c=f;break}f=f.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var B=c.stateNode,V=Rg(n);cf(n,V,B);break;case 5:var oe=c.stateNode;c.flags&32&&(Ps(oe,""),c.flags&=-33);var _e=Rg(n);cf(n,_e,oe);break;case 3:case 4:var Ve=c.stateNode.containerInfo,lt=Rg(n);Eg(n,lt,Ve);break;default:throw Error(s(161))}}catch(Ht){cs(n,n.return,Ht)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function k_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;k_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function gu(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)x_(n,a.alternate,a),a=a.sibling}function Zu(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:mu(4,a,a.return),Zu(a);break;case 1:ul(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&g_(a,a.return,c),Zu(a);break;case 27:qh(a.stateNode);case 26:case 5:ul(a,a.return),Zu(a);break;case 22:a.memoizedState===null&&Zu(a);break;case 30:Zu(a);break;default:Zu(a)}n=n.sibling}}function vu(n,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,B=n,V=a,oe=V.flags;switch(V.tag){case 0:case 11:case 15:vu(B,V,c),Mh(4,V);break;case 1:if(vu(B,V,c),f=V,B=f.stateNode,typeof B.componentDidMount=="function")try{B.componentDidMount()}catch(lt){cs(f,f.return,lt)}if(f=V,B=f.updateQueue,B!==null){var _e=f.stateNode;try{var Ve=B.shared.hiddenCallbacks;if(Ve!==null)for(B.shared.hiddenCallbacks=null,B=0;B<Ve.length;B++)Kt(Ve[B],_e)}catch(lt){cs(f,f.return,lt)}}c&&oe&64&&m_(V),jh(V,V.return);break;case 27:__(V);case 26:case 5:vu(B,V,c),c&&f===null&&oe&4&&v_(V),jh(V,V.return);break;case 12:vu(B,V,c);break;case 13:vu(B,V,c),c&&oe&4&&R_(B,V);break;case 22:V.memoizedState===null&&vu(B,V,c),jh(V,V.return);break;case 30:break;default:vu(B,V,c)}a=a.sibling}}function Tg(n,a){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&bc(c))}function Pg(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&bc(n))}function dl(n,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)C_(n,a,c,f),a=a.sibling}function C_(n,a,c,f){var B=a.flags;switch(a.tag){case 0:case 11:case 15:dl(n,a,c,f),B&2048&&Mh(9,a);break;case 1:dl(n,a,c,f);break;case 3:dl(n,a,c,f),B&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&bc(n)));break;case 12:if(B&2048){dl(n,a,c,f),n=a.stateNode;try{var V=a.memoizedProps,oe=V.id,_e=V.onPostCommit;typeof _e=="function"&&_e(oe,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Ve){cs(a,a.return,Ve)}}else dl(n,a,c,f);break;case 13:dl(n,a,c,f);break;case 23:break;case 22:V=a.stateNode,oe=a.alternate,a.memoizedState!==null?V._visibility&2?dl(n,a,c,f):Lh(n,a):V._visibility&2?dl(n,a,c,f):(V._visibility|=2,Ad(n,a,c,f,(a.subtreeFlags&10256)!==0)),B&2048&&Tg(oe,a);break;case 24:dl(n,a,c,f),B&2048&&Pg(a.alternate,a);break;default:dl(n,a,c,f)}}function Ad(n,a,c,f,B){for(B=B&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var V=n,oe=a,_e=c,Ve=f,lt=oe.flags;switch(oe.tag){case 0:case 11:case 15:Ad(V,oe,_e,Ve,B),Mh(8,oe);break;case 23:break;case 22:var Ht=oe.stateNode;oe.memoizedState!==null?Ht._visibility&2?Ad(V,oe,_e,Ve,B):Lh(V,oe):(Ht._visibility|=2,Ad(V,oe,_e,Ve,B)),B&&lt&2048&&Tg(oe.alternate,oe);break;case 24:Ad(V,oe,_e,Ve,B),B&&lt&2048&&Pg(oe.alternate,oe);break;default:Ad(V,oe,_e,Ve,B)}a=a.sibling}}function Lh(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=n,f=a,B=f.flags;switch(f.tag){case 22:Lh(c,f),B&2048&&Tg(f.alternate,f);break;case 24:Lh(c,f),B&2048&&Pg(f.alternate,f);break;default:Lh(c,f)}a=a.sibling}}var Ih=8192;function Od(n){if(n.subtreeFlags&Ih)for(n=n.child;n!==null;)T_(n),n=n.sibling}function T_(n){switch(n.tag){case 26:Od(n),n.flags&Ih&&n.memoizedState!==null&&ok(qc,n.memoizedState,n.memoizedProps);break;case 5:Od(n);break;case 3:case 4:var a=qc;qc=xf(n.stateNode.containerInfo),Od(n),qc=a;break;case 22:n.memoizedState===null&&(a=n.alternate,a!==null&&a.memoizedState!==null?(a=Ih,Ih=16777216,Od(n),Ih=a):Od(n));break;default:Od(n)}}function P_(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function Bh(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Bi=f,D_(f,n)}P_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)N_(n),n=n.sibling}function N_(n){switch(n.tag){case 0:case 11:case 15:Bh(n),n.flags&2048&&mu(9,n,n.return);break;case 3:Bh(n);break;case 12:Bh(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,lf(n)):Bh(n);break;default:Bh(n)}}function lf(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Bi=f,D_(f,n)}P_(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:mu(8,a,a.return),lf(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,lf(a));break;default:lf(a)}n=n.sibling}}function D_(n,a){for(;Bi!==null;){var c=Bi;switch(c.tag){case 0:case 11:case 15:mu(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:bc(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Bi=f;else e:for(c=n;Bi!==null;){f=Bi;var B=f.sibling,V=f.return;if(w_(f),f===c){Bi=null;break e}if(B!==null){B.return=V,Bi=B;break e}Bi=V}}}var SE={getCacheForType:function(n){var a=Ss(Rs),c=a.data.get(n);return c===void 0&&(c=n(),a.data.set(n,c)),c}},RE=typeof WeakMap=="function"?WeakMap:Map,Ka=0,hs=null,_a=null,Pa=0,Qa=0,sc=null,yu=!1,Md=!1,Ng=!1,ql=0,Zs=0,_u=0,Gu=0,Dg=0,Rc=0,jd=0,zh=null,zo=null,Ag=!1,Og=0,uf=1/0,df=null,bu=null,Xi=0,xu=null,Ld=null,Id=0,Mg=0,jg=null,A_=null,Uh=0,Lg=null;function ic(){if((Ka&2)!==0&&Pa!==0)return Pa&-Pa;if(z.T!==null){var n=wc;return n!==0?n:Vg()}return sn()}function O_(){Rc===0&&(Rc=(Pa&536870912)===0||jr?jn():536870912);var n=Sc.current;return n!==null&&(n.flags|=32),Rc}function oc(n,a,c){(n===hs&&(Qa===2||Qa===9)||n.cancelPendingCommit!==null)&&(Bd(n,0),wu(n,Pa,Rc,!1)),Qr(n,c),((Ka&2)===0||n!==hs)&&(n===hs&&((Ka&2)===0&&(Gu|=c),Zs===4&&wu(n,Pa,Rc,!1)),hl(n))}function M_(n,a,c){if((Ka&6)!==0)throw Error(s(327));var f=!c&&(a&124)===0&&(a&n.expiredLanes)===0||ra(n,a),B=f?CE(n,a):zg(n,a,!0),V=f;do{if(B===0){Md&&!f&&wu(n,a,0,!1);break}else{if(c=n.current.alternate,V&&!EE(c)){B=zg(n,a,!1),V=!1;continue}if(B===2){if(V=a,n.errorRecoveryDisabledLanes&V)var oe=0;else oe=n.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){a=oe;e:{var _e=n;B=zh;var Ve=_e.current.memoizedState.isDehydrated;if(Ve&&(Bd(_e,oe).flags|=256),oe=zg(_e,oe,!1),oe!==2){if(Ng&&!Ve){_e.errorRecoveryDisabledLanes|=V,Gu|=V,B=4;break e}V=zo,zo=B,V!==null&&(zo===null?zo=V:zo.push.apply(zo,V))}B=oe}if(V=!1,B!==2)continue}}if(B===1){Bd(n,0),wu(n,a,0,!0);break}e:{switch(f=n,V=B,V){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:wu(f,a,Rc,!yu);break e;case 2:zo=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(B=Og+300-Pn(),10<B)){if(wu(f,a,Rc,!yu),va(f,0,!0)!==0)break e;f.timeoutHandle=lb(j_.bind(null,f,c,zo,df,Ag,a,Rc,Gu,jd,yu,V,2,-0,0),B);break e}j_(f,c,zo,df,Ag,a,Rc,Gu,jd,yu,V,0,-0,0)}}break}while(!0);hl(n)}function j_(n,a,c,f,B,V,oe,_e,Ve,lt,Ht,en,pt,yt){if(n.timeoutHandle=-1,en=a.subtreeFlags,(en&8192||(en&16785408)===16785408)&&(Zh={stylesheets:null,count:0,unsuspend:ik},T_(a),en=ck(),en!==null)){n.cancelPendingCommit=en(H_.bind(null,n,a,V,c,f,B,oe,_e,Ve,Ht,1,pt,yt)),wu(n,V,oe,!lt);return}H_(n,a,V,c,f,B,oe,_e,Ve)}function EE(n){for(var a=n;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var B=c[f],V=B.getSnapshot;B=B.value;try{if(!pa(V(),B))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function wu(n,a,c,f){a&=~Dg,a&=~Gu,n.suspendedLanes|=a,n.pingedLanes&=~a,f&&(n.warmLanes|=a),f=n.expirationTimes;for(var B=a;0<B;){var V=31-nr(B),oe=1<<V;f[V]=-1,B&=~oe}c!==0&&rt(n,c,a)}function hf(){return(Ka&6)===0?(Fh(0),!1):!0}function Ig(){if(_a!==null){if(Qa===0)var n=_a.return;else n=_a,uo=Si=null,Je(n),Nd=null,Dh=0,n=_a;for(;n!==null;)f_(n.alternate,n),n=n.return;_a=null}}function Bd(n,a){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,VE(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),Ig(),hs=n,_a=c=Ki(n.current,null),Pa=a,Qa=0,sc=null,yu=!1,Md=ra(n,a),Ng=!1,jd=Rc=Dg=Gu=_u=Zs=0,zo=zh=null,Ag=!1,(a&8)!==0&&(a|=a&32);var f=n.entangledLanes;if(f!==0)for(n=n.entanglements,f&=a;0<f;){var B=31-nr(f),V=1<<B;a|=n[B],f&=~V}return ql=a,Oo(),c}function L_(n,a){At=null,z.H=Jp,a===ie||a===De?(a=bn(),Qa=3):a===le?(a=bn(),Qa=4):Qa=a===e_?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,sc=a,_a===null&&(Zs=1,rf(n,vs(a,n.current)))}function I_(){var n=z.H;return z.H=Jp,n===null?Jp:n}function B_(){var n=z.A;return z.A=SE,n}function Bg(){Zs=4,yu||(Pa&4194048)!==Pa&&Sc.current!==null||(Md=!0),(_u&134217727)===0&&(Gu&134217727)===0||hs===null||wu(hs,Pa,Rc,!1)}function zg(n,a,c){var f=Ka;Ka|=2;var B=I_(),V=B_();(hs!==n||Pa!==a)&&(df=null,Bd(n,a)),a=!1;var oe=Zs;e:do try{if(Qa!==0&&_a!==null){var _e=_a,Ve=sc;switch(Qa){case 8:Ig(),oe=6;break e;case 3:case 2:case 9:case 6:Sc.current===null&&(a=!0);var lt=Qa;if(Qa=0,sc=null,zd(n,_e,Ve,lt),c&&Md){oe=0;break e}break;default:lt=Qa,Qa=0,sc=null,zd(n,_e,Ve,lt)}}kE(),oe=Zs;break}catch(Ht){L_(n,Ht)}while(!0);return a&&n.shellSuspendCounter++,uo=Si=null,Ka=f,z.H=B,z.A=V,_a===null&&(hs=null,Pa=0,Oo()),oe}function kE(){for(;_a!==null;)z_(_a)}function CE(n,a){var c=Ka;Ka|=2;var f=I_(),B=B_();hs!==n||Pa!==a?(df=null,uf=Pn()+500,Bd(n,a)):Md=ra(n,a);e:do try{if(Qa!==0&&_a!==null){a=_a;var V=sc;t:switch(Qa){case 1:Qa=0,sc=null,zd(n,a,V,1);break;case 2:case 9:if(Ue(V)){Qa=0,sc=null,U_(a);break}a=function(){Qa!==2&&Qa!==9||hs!==n||(Qa=7),hl(n)},V.then(a,a);break e;case 3:Qa=7;break e;case 4:Qa=5;break e;case 7:Ue(V)?(Qa=0,sc=null,U_(a)):(Qa=0,sc=null,zd(n,a,V,7));break;case 5:var oe=null;switch(_a.tag){case 26:oe=_a.memoizedState;case 5:case 27:var _e=_a;if(!oe||xb(oe)){Qa=0,sc=null;var Ve=_e.sibling;if(Ve!==null)_a=Ve;else{var lt=_e.return;lt!==null?(_a=lt,pf(lt)):_a=null}break t}}Qa=0,sc=null,zd(n,a,V,5);break;case 6:Qa=0,sc=null,zd(n,a,V,6);break;case 8:Ig(),Zs=6;break e;default:throw Error(s(462))}}TE();break}catch(Ht){L_(n,Ht)}while(!0);return uo=Si=null,z.H=f,z.A=B,Ka=c,_a!==null?0:(hs=null,Pa=0,Oo(),Zs)}function TE(){for(;_a!==null&&!on();)z_(_a)}function z_(n){var a=h_(n.alternate,n,ql);n.memoizedProps=n.pendingProps,a===null?pf(n):_a=a}function U_(n){var a=n,c=a.alternate;switch(a.tag){case 15:case 0:a=i_(c,a,a.pendingProps,a.type,void 0,Pa);break;case 11:a=i_(c,a,a.pendingProps,a.type.render,a.ref,Pa);break;case 5:Je(a);default:f_(c,a),a=_a=Uc(a,ql),a=h_(c,a,ql)}n.memoizedProps=n.pendingProps,a===null?pf(n):_a=a}function zd(n,a,c,f){uo=Si=null,Je(a),Nd=null,Dh=0;var B=a.return;try{if(vE(n,B,a,c,Pa)){Zs=1,rf(n,vs(c,n.current)),_a=null;return}}catch(V){if(B!==null)throw _a=B,V;Zs=1,rf(n,vs(c,n.current)),_a=null;return}a.flags&32768?(jr||f===1?n=!0:Md||(Pa&536870912)!==0?n=!1:(yu=n=!0,(f===2||f===9||f===3||f===6)&&(f=Sc.current,f!==null&&f.tag===13&&(f.flags|=16384))),F_(a,n)):pf(a)}function pf(n){var a=n;do{if((a.flags&32768)!==0){F_(a,yu);return}n=a.return;var c=_E(a.alternate,a,ql);if(c!==null){_a=c;return}if(a=a.sibling,a!==null){_a=a;return}_a=a=n}while(a!==null);Zs===0&&(Zs=5)}function F_(n,a){do{var c=bE(n.alternate,n);if(c!==null){c.flags&=32767,_a=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(n=n.sibling,n!==null)){_a=n;return}_a=n=c}while(n!==null);Zs=6,_a=null}function H_(n,a,c,f,B,V,oe,_e,Ve){n.cancelPendingCommit=null;do ff();while(Xi!==0);if((Ka&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(V=a.lanes|a.childLanes,V|=fi,gr(n,c,V,oe,_e,Ve),n===hs&&(_a=hs=null,Pa=0),Ld=a,xu=n,Id=c,Mg=V,jg=B,A_=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,AE(Me,function(){return Z_(),null})):(n.callbackNode=null,n.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=z.T,z.T=null,B=$.p,$.p=2,oe=Ka,Ka|=4;try{xE(n,a,c)}finally{Ka=oe,$.p=B,z.T=f}}Xi=1,V_(),q_(),$_()}}function V_(){if(Xi===1){Xi=0;var n=xu,a=Ld,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=z.T,z.T=null;var f=$.p;$.p=2;var B=Ka;Ka|=4;try{E_(a,n);var V=Qg,oe=_o(n.containerInfo),_e=V.focusedElem,Ve=V.selectionRange;if(oe!==_e&&_e&&_e.ownerDocument&&bi(_e.ownerDocument.documentElement,_e)){if(Ve!==null&&bo(_e)){var lt=Ve.start,Ht=Ve.end;if(Ht===void 0&&(Ht=lt),"selectionStart"in _e)_e.selectionStart=lt,_e.selectionEnd=Math.min(Ht,_e.value.length);else{var en=_e.ownerDocument||document,pt=en&&en.defaultView||window;if(pt.getSelection){var yt=pt.getSelection(),$r=_e.textContent.length,Br=Math.min(Ve.start,$r),rs=Ve.end===void 0?Br:Math.min(Ve.end,$r);!yt.extend&&Br>rs&&(oe=rs,rs=Br,Br=oe);var st=Zi(_e,Br),Xe=Zi(_e,rs);if(st&&Xe&&(yt.rangeCount!==1||yt.anchorNode!==st.node||yt.anchorOffset!==st.offset||yt.focusNode!==Xe.node||yt.focusOffset!==Xe.offset)){var ot=en.createRange();ot.setStart(st.node,st.offset),yt.removeAllRanges(),Br>rs?(yt.addRange(ot),yt.extend(Xe.node,Xe.offset)):(ot.setEnd(Xe.node,Xe.offset),yt.addRange(ot))}}}}for(en=[],yt=_e;yt=yt.parentNode;)yt.nodeType===1&&en.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<en.length;_e++){var Gt=en[_e];Gt.element.scrollLeft=Gt.left,Gt.element.scrollTop=Gt.top}}kf=!!Kg,Qg=Kg=null}finally{Ka=B,$.p=f,z.T=c}}n.current=a,Xi=2}}function q_(){if(Xi===2){Xi=0;var n=xu,a=Ld,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=z.T,z.T=null;var f=$.p;$.p=2;var B=Ka;Ka|=4;try{x_(n,a.alternate,a)}finally{Ka=B,$.p=f,z.T=c}}Xi=3}}function $_(){if(Xi===4||Xi===3){Xi=0,ln();var n=xu,a=Ld,c=Id,f=A_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Xi=5:(Xi=0,Ld=xu=null,W_(n,n.pendingLanes));var B=n.pendingLanes;if(B===0&&(bu=null),Pt(c),a=a.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(un,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=z.T,B=$.p,$.p=2,z.T=null;try{for(var V=n.onRecoverableError,oe=0;oe<f.length;oe++){var _e=f[oe];V(_e.value,{componentStack:_e.stack})}}finally{z.T=a,$.p=B}}(Id&3)!==0&&ff(),hl(n),B=n.pendingLanes,(c&4194090)!==0&&(B&42)!==0?n===Lg?Uh++:(Uh=0,Lg=n):Uh=0,Fh(0)}}function W_(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,bc(a)))}function ff(n){return V_(),q_(),$_(),Z_()}function Z_(){if(Xi!==5)return!1;var n=xu,a=Mg;Mg=0;var c=Pt(Id),f=z.T,B=$.p;try{$.p=32>c?32:c,z.T=null,c=jg,jg=null;var V=xu,oe=Id;if(Xi=0,Ld=xu=null,Id=0,(Ka&6)!==0)throw Error(s(331));var _e=Ka;if(Ka|=4,N_(V.current),C_(V,V.current,oe,c),Ka=_e,Fh(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(un,V)}catch{}return!0}finally{$.p=B,z.T=f,W_(n,a)}}function G_(n,a,c){a=vs(c,a),a=fg(n.stateNode,a,2),n=Mt(n,a,2),n!==null&&(Qr(n,2),hl(n))}function cs(n,a,c){if(n.tag===3)G_(n,n,c);else for(;a!==null;){if(a.tag===3){G_(a,n,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(bu===null||!bu.has(f))){n=vs(c,n),c=Jy(2),f=Mt(a,c,2),f!==null&&(Xy(c,f,a,n),Qr(f,2),hl(f));break}}a=a.return}}function Ug(n,a,c){var f=n.pingCache;if(f===null){f=n.pingCache=new RE;var B=new Set;f.set(a,B)}else B=f.get(a),B===void 0&&(B=new Set,f.set(a,B));B.has(c)||(Ng=!0,B.add(c),n=PE.bind(null,n,a,c),a.then(n,n))}function PE(n,a,c){var f=n.pingCache;f!==null&&f.delete(a),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,hs===n&&(Pa&c)===c&&(Zs===4||Zs===3&&(Pa&62914560)===Pa&&300>Pn()-Og?(Ka&2)===0&&Bd(n,0):Dg|=c,jd===Pa&&(jd=0)),hl(n)}function Y_(n,a){a===0&&(a=Ha()),n=co(n,a),n!==null&&(Qr(n,a),hl(n))}function NE(n){var a=n.memoizedState,c=0;a!==null&&(c=a.retryLane),Y_(n,c)}function DE(n,a){var c=0;switch(n.tag){case 13:var f=n.stateNode,B=n.memoizedState;B!==null&&(c=B.retryLane);break;case 19:f=n.stateNode;break;case 22:f=n.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(a),Y_(n,c)}function AE(n,a){return dt(n,a)}var mf=null,Ud=null,Fg=!1,gf=!1,Hg=!1,Yu=0;function hl(n){n!==Ud&&n.next===null&&(Ud===null?mf=Ud=n:Ud=Ud.next=n),gf=!0,Fg||(Fg=!0,ME())}function Fh(n,a){if(!Hg&&gf){Hg=!0;do for(var c=!1,f=mf;f!==null;){if(n!==0){var B=f.pendingLanes;if(B===0)var V=0;else{var oe=f.suspendedLanes,_e=f.pingedLanes;V=(1<<31-nr(42|n)+1)-1,V&=B&~(oe&~_e),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(c=!0,X_(f,V))}else V=Pa,V=va(f,f===hs?V:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(V&3)===0||ra(f,V)||(c=!0,X_(f,V));f=f.next}while(c);Hg=!1}}function OE(){K_()}function K_(){gf=Fg=!1;var n=0;Yu!==0&&(HE()&&(n=Yu),Yu=0);for(var a=Pn(),c=null,f=mf;f!==null;){var B=f.next,V=Q_(f,a);V===0?(f.next=null,c===null?mf=B:c.next=B,B===null&&(Ud=c)):(c=f,(n!==0||(V&3)!==0)&&(gf=!0)),f=B}Fh(n)}function Q_(n,a){for(var c=n.suspendedLanes,f=n.pingedLanes,B=n.expirationTimes,V=n.pendingLanes&-62914561;0<V;){var oe=31-nr(V),_e=1<<oe,Ve=B[oe];Ve===-1?((_e&c)===0||(_e&f)!==0)&&(B[oe]=ua(_e,a)):Ve<=a&&(n.expiredLanes|=_e),V&=~_e}if(a=hs,c=Pa,c=va(n,n===a?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),f=n.callbackNode,c===0||n===a&&(Qa===2||Qa===9)||n.cancelPendingCommit!==null)return f!==null&&f!==null&&_t(f),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||ra(n,c)){if(a=c&-c,a===n.callbackPriority)return a;switch(f!==null&&_t(f),Pt(c)){case 2:case 8:c=Ne;break;case 32:c=Me;break;case 268435456:c=Ft;break;default:c=Me}return f=J_.bind(null,n),c=dt(c,f),n.callbackPriority=a,n.callbackNode=c,a}return f!==null&&f!==null&&_t(f),n.callbackPriority=2,n.callbackNode=null,2}function J_(n,a){if(Xi!==0&&Xi!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(ff()&&n.callbackNode!==c)return null;var f=Pa;return f=va(n,n===hs?f:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),f===0?null:(M_(n,f,a),Q_(n,Pn()),n.callbackNode!=null&&n.callbackNode===c?J_.bind(null,n):null)}function X_(n,a){if(ff())return null;M_(n,a,!0)}function ME(){qE(function(){(Ka&6)!==0?dt(rn,OE):K_()})}function Vg(){return Yu===0&&(Yu=jn()),Yu}function eb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Hi(""+n)}function tb(n,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,n.id&&c.setAttribute("form",n.id),a.parentNode.insertBefore(c,a),n=new FormData(n),c.parentNode.removeChild(c),n}function jE(n,a,c,f,B){if(a==="submit"&&c&&c.stateNode===B){var V=eb((B[Ln]||null).action),oe=f.submitter;oe&&(a=(a=oe[Ln]||null)?eb(a.formAction):oe.getAttribute("formAction"),a!==null&&(V=a,oe=null));var _e=new go("action","action",null,f,B);n.push({event:_e,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Yu!==0){var Ve=oe?tb(B,oe):new FormData(B);Cd(c,{pending:!0,data:Ve,method:B.method,action:V},null,Ve)}}else typeof V=="function"&&(_e.preventDefault(),Ve=oe?tb(B,oe):new FormData(B),Cd(c,{pending:!0,data:Ve,method:B.method,action:V},V,Ve))},currentTarget:B}]})}}for(var qg=0;qg<$s.length;qg++){var $g=$s[qg],LE=$g.toLowerCase(),IE=$g[0].toUpperCase()+$g.slice(1);As(LE,"on"+IE)}As(fc,"onAnimationEnd"),As(pi,"onAnimationIteration"),As(Yi,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(ol,"onTransitionRun"),As(Jo,"onTransitionStart"),As(mc,"onTransitionCancel"),As(Ao,"onTransitionEnd"),Va("onMouseEnter",["mouseout","mouseover"]),Va("onMouseLeave",["mouseout","mouseover"]),Va("onPointerEnter",["pointerout","pointerover"]),Va("onPointerLeave",["pointerout","pointerover"]),La("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),La("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),La("onBeforeInput",["compositionend","keypress","textInput","paste"]),La("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),La("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),La("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hh));function nb(n,a){a=(a&4)!==0;for(var c=0;c<n.length;c++){var f=n[c],B=f.event;f=f.listeners;e:{var V=void 0;if(a)for(var oe=f.length-1;0<=oe;oe--){var _e=f[oe],Ve=_e.instance,lt=_e.currentTarget;if(_e=_e.listener,Ve!==V&&B.isPropagationStopped())break e;V=_e,B.currentTarget=lt;try{V(B)}catch(Ht){nf(Ht)}B.currentTarget=null,V=Ve}else for(oe=0;oe<f.length;oe++){if(_e=f[oe],Ve=_e.instance,lt=_e.currentTarget,_e=_e.listener,Ve!==V&&B.isPropagationStopped())break e;V=_e,B.currentTarget=lt;try{V(B)}catch(Ht){nf(Ht)}B.currentTarget=null,V=Ve}}}}function ba(n,a){var c=a[vr];c===void 0&&(c=a[vr]=new Set);var f=n+"__bubble";c.has(f)||(rb(a,n,2,!1),c.add(f))}function Wg(n,a,c){var f=0;a&&(f|=4),rb(c,n,f,a)}var vf="_reactListening"+Math.random().toString(36).slice(2);function Zg(n){if(!n[vf]){n[vf]=!0,xa.forEach(function(c){c!=="selectionchange"&&(BE.has(c)||Wg(c,!1,n),Wg(c,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[vf]||(a[vf]=!0,Wg("selectionchange",!1,a))}}function rb(n,a,c,f){switch(Cb(a)){case 2:var B=dk;break;case 8:B=hk;break;default:B=ov}c=B.bind(null,a,c,n),B=void 0,!so||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(B=!0),f?B!==void 0?n.addEventListener(a,c,{capture:!0,passive:B}):n.addEventListener(a,c,!0):B!==void 0?n.addEventListener(a,c,{passive:B}):n.addEventListener(a,c,!1)}function Gg(n,a,c,f,B){var V=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var oe=f.tag;if(oe===3||oe===4){var _e=f.stateNode.containerInfo;if(_e===B)break;if(oe===4)for(oe=f.return;oe!==null;){var Ve=oe.tag;if((Ve===3||Ve===4)&&oe.stateNode.containerInfo===B)return;oe=oe.return}for(;_e!==null;){if(oe=Fr(_e),oe===null)return;if(Ve=oe.tag,Ve===5||Ve===6||Ve===26||Ve===27){f=V=oe;continue e}_e=_e.parentNode}}f=f.return}Vs(function(){var lt=V,Ht=Ni(c),en=[];e:{var pt=Xo.get(n);if(pt!==void 0){var yt=go,$r=n;switch(n){case"keypress":if(qa(c)===0)break e;case"keydown":case"keyup":yt=vo;break;case"focusin":$r="focus",yt=fn;break;case"focusout":$r="blur",yt=fn;break;case"beforeblur":case"afterblur":yt=fn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=qi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=Ko;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Nl;break;case fc:case pi:case Yi:yt=Ot;break;case Ao:yt=qs;break;case"scroll":case"scrollend":yt=Oc;break;case"wheel":yt=jc;break;case"copy":case"cut":case"paste":yt=ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=yo;break;case"toggle":case"beforetoggle":yt=Co}var Br=(a&4)!==0,rs=!Br&&(n==="scroll"||n==="scrollend"),st=Br?pt!==null?pt+"Capture":null:pt;Br=[];for(var Xe=lt,ot;Xe!==null;){var Gt=Xe;if(ot=Gt.stateNode,Gt=Gt.tag,Gt!==5&&Gt!==26&&Gt!==27||ot===null||st===null||(Gt=da(Xe,st),Gt!=null&&Br.push(Vh(Xe,Gt,ot))),rs)break;Xe=Xe.return}0<Br.length&&(pt=new yt(pt,$r,null,c,Ht),en.push({event:pt,listeners:Br}))}}if((a&7)===0){e:{if(pt=n==="mouseover"||n==="pointerover",yt=n==="mouseout"||n==="pointerout",pt&&c!==ao&&($r=c.relatedTarget||c.fromElement)&&(Fr($r)||$r[Jn]))break e;if((yt||pt)&&(pt=Ht.window===Ht?Ht:(pt=Ht.ownerDocument)?pt.defaultView||pt.parentWindow:window,yt?($r=c.relatedTarget||c.toElement,yt=lt,$r=$r?Fr($r):null,$r!==null&&(rs=h($r),Br=$r.tag,$r!==rs||Br!==5&&Br!==27&&Br!==6)&&($r=null)):(yt=null,$r=lt),yt!==$r)){if(Br=qi,Gt="onMouseLeave",st="onMouseEnter",Xe="mouse",(n==="pointerout"||n==="pointerover")&&(Br=yo,Gt="onPointerLeave",st="onPointerEnter",Xe="pointer"),rs=yt==null?pt:Hr(yt),ot=$r==null?pt:Hr($r),pt=new Br(Gt,Xe+"leave",yt,c,Ht),pt.target=rs,pt.relatedTarget=ot,Gt=null,Fr(Ht)===lt&&(Br=new Br(st,Xe+"enter",$r,c,Ht),Br.target=ot,Br.relatedTarget=rs,Gt=Br),rs=Gt,yt&&$r)t:{for(Br=yt,st=$r,Xe=0,ot=Br;ot;ot=Fd(ot))Xe++;for(ot=0,Gt=st;Gt;Gt=Fd(Gt))ot++;for(;0<Xe-ot;)Br=Fd(Br),Xe--;for(;0<ot-Xe;)st=Fd(st),ot--;for(;Xe--;){if(Br===st||st!==null&&Br===st.alternate)break t;Br=Fd(Br),st=Fd(st)}Br=null}else Br=null;yt!==null&&ab(en,pt,yt,Br,!1),$r!==null&&rs!==null&&ab(en,rs,$r,Br,!0)}}e:{if(pt=lt?Hr(lt):window,yt=pt.nodeName&&pt.nodeName.toLowerCase(),yt==="select"||yt==="input"&&pt.type==="file")var hr=ce;else if(Vn(pt))if(je)hr=sa;else{hr=Gn;var ga=Yt}else yt=pt.nodeName,!yt||yt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?lt&&Ns(lt.elementType)&&(hr=ce):hr=kn;if(hr&&(hr=hr(n,lt))){hc(en,hr,c,Ht);break e}ga&&ga(n,pt,lt),n==="focusout"&&lt&&pt.type==="number"&&lt.memoizedProps.value!=null&&Ya(pt,"number",pt.value)}switch(ga=lt?Hr(lt):window,n){case"focusin":(Vn(ga)||ga.contentEditable==="true")&&(ei=ga,di=lt,Do=null);break;case"focusout":Do=di=ei=null;break;case"mousedown":Bc=!0;break;case"contextmenu":case"mouseup":case"dragend":Bc=!1,pc(en,c,Ht);break;case"selectionchange":if(No)break;case"keydown":case"keyup":pc(en,c,Ht)}var Rr;if(Oa)e:{switch(n){case"compositionstart":var zr="onCompositionStart";break e;case"compositionend":zr="onCompositionEnd";break e;case"compositionupdate":zr="onCompositionUpdate";break e}zr=void 0}else Po?lr(n,c)&&(zr="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(zr="onCompositionStart");zr&&(Al&&c.locale!=="ko"&&(Po||zr!=="onCompositionStart"?zr==="onCompositionEnd"&&Po&&(Rr=_r()):(Qs=Ht,ci="value"in Qs?Qs.value:Qs.textContent,Po=!0)),ga=yf(lt,zr),0<ga.length&&(zr=new ws(zr,n,null,c,Ht),en.push({event:zr,listeners:ga}),Rr?zr.data=Rr:(Rr=Ic(c),Rr!==null&&(zr.data=Rr)))),(Rr=Dl?Ds(n,c):fe(n,c))&&(zr=yf(lt,"onBeforeInput"),0<zr.length&&(ga=new ws("onBeforeInput","beforeinput",null,c,Ht),en.push({event:ga,listeners:zr}),ga.data=Rr)),jE(en,n,lt,c,Ht)}nb(en,a)})}function Vh(n,a,c){return{instance:n,listener:a,currentTarget:c}}function yf(n,a){for(var c=a+"Capture",f=[];n!==null;){var B=n,V=B.stateNode;if(B=B.tag,B!==5&&B!==26&&B!==27||V===null||(B=da(n,c),B!=null&&f.unshift(Vh(n,B,V)),B=da(n,a),B!=null&&f.push(Vh(n,B,V))),n.tag===3)return f;n=n.return}return[]}function Fd(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ab(n,a,c,f,B){for(var V=a._reactName,oe=[];c!==null&&c!==f;){var _e=c,Ve=_e.alternate,lt=_e.stateNode;if(_e=_e.tag,Ve!==null&&Ve===f)break;_e!==5&&_e!==26&&_e!==27||lt===null||(Ve=lt,B?(lt=da(c,V),lt!=null&&oe.unshift(Vh(c,lt,Ve))):B||(lt=da(c,V),lt!=null&&oe.push(Vh(c,lt,Ve)))),c=c.return}oe.length!==0&&n.push({event:a,listeners:oe})}var zE=/\r\n?/g,UE=/\u0000|\uFFFD/g;function sb(n){return(typeof n=="string"?n:""+n).replace(zE,`
`).replace(UE,"")}function ib(n,a){return a=sb(a),sb(n)===a}function _f(){}function ns(n,a,c,f,B,V){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||Ps(n,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&Ps(n,""+f);break;case"className":vi(n,"class",f);break;case"tabIndex":vi(n,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":vi(n,c,f);break;case"style":Pi(n,f,V);break;case"data":if(a!=="object"){vi(n,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){n.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){n.removeAttribute(c);break}f=Hi(""+f),n.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(c==="formAction"?(a!=="input"&&ns(n,a,"name",B.name,B,null),ns(n,a,"formEncType",B.formEncType,B,null),ns(n,a,"formMethod",B.formMethod,B,null),ns(n,a,"formTarget",B.formTarget,B,null)):(ns(n,a,"encType",B.encType,B,null),ns(n,a,"method",B.method,B,null),ns(n,a,"target",B.target,B,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){n.removeAttribute(c);break}f=Hi(""+f),n.setAttribute(c,f);break;case"onClick":f!=null&&(n.onclick=_f);break;case"onScroll":f!=null&&ba("scroll",n);break;case"onScrollEnd":f!=null&&ba("scrollend",n);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(B.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"multiple":n.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":n.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){n.removeAttribute("xlink:href");break}c=Hi(""+f),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(c,""+f):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":f===!0?n.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?n.setAttribute(c,f):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?n.setAttribute(c,f):n.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?n.removeAttribute(c):n.setAttribute(c,f);break;case"popover":ba("beforetoggle",n),ba("toggle",n),Fs(n,"popover",f);break;case"xlinkActuate":ea(n,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":ea(n,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":ea(n,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":ea(n,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":ea(n,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":ea(n,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":ea(n,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":ea(n,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":ea(n,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Fs(n,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Eo.get(c)||c,Fs(n,c,f))}}function Yg(n,a,c,f,B,V){switch(c){case"style":Pi(n,f,V);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(B.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"children":typeof f=="string"?Ps(n,f):(typeof f=="number"||typeof f=="bigint")&&Ps(n,""+f);break;case"onScroll":f!=null&&ba("scroll",n);break;case"onScrollEnd":f!=null&&ba("scrollend",n);break;case"onClick":f!=null&&(n.onclick=_f);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ma.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(B=c.endsWith("Capture"),a=c.slice(2,B?c.length-7:void 0),V=n[Ln]||null,V=V!=null?V[c]:null,typeof V=="function"&&n.removeEventListener(a,V,B),typeof f=="function")){typeof V!="function"&&V!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(a,f,B);break e}c in n?n[c]=f:f===!0?n.setAttribute(c,""):Fs(n,c,f)}}}function eo(n,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ba("error",n),ba("load",n);var f=!1,B=!1,V;for(V in c)if(c.hasOwnProperty(V)){var oe=c[V];if(oe!=null)switch(V){case"src":f=!0;break;case"srcSet":B=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:ns(n,a,V,oe,c,null)}}B&&ns(n,a,"srcSet",c.srcSet,c,null),f&&ns(n,a,"src",c.src,c,null);return;case"input":ba("invalid",n);var _e=V=oe=B=null,Ve=null,lt=null;for(f in c)if(c.hasOwnProperty(f)){var Ht=c[f];if(Ht!=null)switch(f){case"name":B=Ht;break;case"type":oe=Ht;break;case"checked":Ve=Ht;break;case"defaultChecked":lt=Ht;break;case"value":V=Ht;break;case"defaultValue":_e=Ht;break;case"children":case"dangerouslySetInnerHTML":if(Ht!=null)throw Error(s(137,a));break;default:ns(n,a,f,Ht,c,null)}}Ga(n,V,_e,Ve,lt,oe,B,!1),Cr(n);return;case"select":ba("invalid",n),f=oe=V=null;for(B in c)if(c.hasOwnProperty(B)&&(_e=c[B],_e!=null))switch(B){case"value":V=_e;break;case"defaultValue":oe=_e;break;case"multiple":f=_e;default:ns(n,a,B,_e,c,null)}a=V,c=oe,n.multiple=!!f,a!=null?is(n,!!f,a,!1):c!=null&&is(n,!!f,c,!0);return;case"textarea":ba("invalid",n),V=B=f=null;for(oe in c)if(c.hasOwnProperty(oe)&&(_e=c[oe],_e!=null))switch(oe){case"value":f=_e;break;case"defaultValue":B=_e;break;case"children":V=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(s(91));break;default:ns(n,a,oe,_e,c,null)}us(n,f,B,V),Cr(n);return;case"option":for(Ve in c)if(c.hasOwnProperty(Ve)&&(f=c[Ve],f!=null))switch(Ve){case"selected":n.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ns(n,a,Ve,f,c,null)}return;case"dialog":ba("beforetoggle",n),ba("toggle",n),ba("cancel",n),ba("close",n);break;case"iframe":case"object":ba("load",n);break;case"video":case"audio":for(f=0;f<Hh.length;f++)ba(Hh[f],n);break;case"image":ba("error",n),ba("load",n);break;case"details":ba("toggle",n);break;case"embed":case"source":case"link":ba("error",n),ba("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in c)if(c.hasOwnProperty(lt)&&(f=c[lt],f!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:ns(n,a,lt,f,c,null)}return;default:if(Ns(a)){for(Ht in c)c.hasOwnProperty(Ht)&&(f=c[Ht],f!==void 0&&Yg(n,a,Ht,f,c,void 0));return}}for(_e in c)c.hasOwnProperty(_e)&&(f=c[_e],f!=null&&ns(n,a,_e,f,c,null))}function FE(n,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var B=null,V=null,oe=null,_e=null,Ve=null,lt=null,Ht=null;for(yt in c){var en=c[yt];if(c.hasOwnProperty(yt)&&en!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":Ve=en;default:f.hasOwnProperty(yt)||ns(n,a,yt,null,f,en)}}for(var pt in f){var yt=f[pt];if(en=c[pt],f.hasOwnProperty(pt)&&(yt!=null||en!=null))switch(pt){case"type":V=yt;break;case"name":B=yt;break;case"checked":lt=yt;break;case"defaultChecked":Ht=yt;break;case"value":oe=yt;break;case"defaultValue":_e=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(s(137,a));break;default:yt!==en&&ns(n,a,pt,yt,f,en)}}Ca(n,oe,_e,Ve,lt,Ht,V,B);return;case"select":yt=oe=_e=pt=null;for(V in c)if(Ve=c[V],c.hasOwnProperty(V)&&Ve!=null)switch(V){case"value":break;case"multiple":yt=Ve;default:f.hasOwnProperty(V)||ns(n,a,V,null,f,Ve)}for(B in f)if(V=f[B],Ve=c[B],f.hasOwnProperty(B)&&(V!=null||Ve!=null))switch(B){case"value":pt=V;break;case"defaultValue":_e=V;break;case"multiple":oe=V;default:V!==Ve&&ns(n,a,B,V,f,Ve)}a=_e,c=oe,f=yt,pt!=null?is(n,!!c,pt,!1):!!f!=!!c&&(a!=null?is(n,!!c,a,!0):is(n,!!c,c?[]:"",!1));return;case"textarea":yt=pt=null;for(_e in c)if(B=c[_e],c.hasOwnProperty(_e)&&B!=null&&!f.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:ns(n,a,_e,null,f,B)}for(oe in f)if(B=f[oe],V=c[oe],f.hasOwnProperty(oe)&&(B!=null||V!=null))switch(oe){case"value":pt=B;break;case"defaultValue":yt=B;break;case"children":break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(91));break;default:B!==V&&ns(n,a,oe,B,f,V)}Aa(n,pt,yt);return;case"option":for(var $r in c)if(pt=c[$r],c.hasOwnProperty($r)&&pt!=null&&!f.hasOwnProperty($r))switch($r){case"selected":n.selected=!1;break;default:ns(n,a,$r,null,f,pt)}for(Ve in f)if(pt=f[Ve],yt=c[Ve],f.hasOwnProperty(Ve)&&pt!==yt&&(pt!=null||yt!=null))switch(Ve){case"selected":n.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:ns(n,a,Ve,pt,f,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Br in c)pt=c[Br],c.hasOwnProperty(Br)&&pt!=null&&!f.hasOwnProperty(Br)&&ns(n,a,Br,null,f,pt);for(lt in f)if(pt=f[lt],yt=c[lt],f.hasOwnProperty(lt)&&pt!==yt&&(pt!=null||yt!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(s(137,a));break;default:ns(n,a,lt,pt,f,yt)}return;default:if(Ns(a)){for(var rs in c)pt=c[rs],c.hasOwnProperty(rs)&&pt!==void 0&&!f.hasOwnProperty(rs)&&Yg(n,a,rs,void 0,f,pt);for(Ht in f)pt=f[Ht],yt=c[Ht],!f.hasOwnProperty(Ht)||pt===yt||pt===void 0&&yt===void 0||Yg(n,a,Ht,pt,f,yt);return}}for(var st in c)pt=c[st],c.hasOwnProperty(st)&&pt!=null&&!f.hasOwnProperty(st)&&ns(n,a,st,null,f,pt);for(en in f)pt=f[en],yt=c[en],!f.hasOwnProperty(en)||pt===yt||pt==null&&yt==null||ns(n,a,en,pt,f,yt)}var Kg=null,Qg=null;function bf(n){return n.nodeType===9?n:n.ownerDocument}function ob(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cb(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function Jg(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Xg=null;function HE(){var n=window.event;return n&&n.type==="popstate"?n===Xg?!1:(Xg=n,!0):(Xg=null,!1)}var lb=typeof setTimeout=="function"?setTimeout:void 0,VE=typeof clearTimeout=="function"?clearTimeout:void 0,ub=typeof Promise=="function"?Promise:void 0,qE=typeof queueMicrotask=="function"?queueMicrotask:typeof ub<"u"?function(n){return ub.resolve(null).then(n).catch($E)}:lb;function $E(n){setTimeout(function(){throw n})}function Su(n){return n==="head"}function db(n,a){var c=a,f=0,B=0;do{var V=c.nextSibling;if(n.removeChild(c),V&&V.nodeType===8)if(c=V.data,c==="/$"){if(0<f&&8>f){c=f;var oe=n.ownerDocument;if(c&1&&qh(oe.documentElement),c&2&&qh(oe.body),c&4)for(c=oe.head,qh(c),oe=c.firstChild;oe;){var _e=oe.nextSibling,Ve=oe.nodeName;oe[In]||Ve==="SCRIPT"||Ve==="STYLE"||Ve==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||c.removeChild(oe),oe=_e}}if(B===0){n.removeChild(V),Jh(a);return}B--}else c==="$"||c==="$?"||c==="$!"?B++:f=c.charCodeAt(0)-48;else f=0;c=V}while(c);Jh(a)}function ev(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":ev(c),Nn(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function WE(n,a,c,f){for(;n.nodeType===1;){var B=c;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(f){if(!n[In])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(V=n.getAttribute("rel"),V==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(V!==B.rel||n.getAttribute("href")!==(B.href==null||B.href===""?null:B.href)||n.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin)||n.getAttribute("title")!==(B.title==null?null:B.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(V=n.getAttribute("src"),(V!==(B.src==null?null:B.src)||n.getAttribute("type")!==(B.type==null?null:B.type)||n.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin))&&V&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var V=B.name==null?null:""+B.name;if(B.type==="hidden"&&n.getAttribute("name")===V)return n}else return n;if(n=$c(n.nextSibling),n===null)break}return null}function ZE(n,a,c){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=$c(n.nextSibling),n===null))return null;return n}function tv(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function GE(n,a){var c=n.ownerDocument;if(n.data!=="$?"||c.readyState==="complete")a();else{var f=function(){a(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),n._reactRetry=f}}function $c(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return n}var nv=null;function hb(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return n;a--}else c==="/$"&&a++}n=n.previousSibling}return null}function pb(n,a,c){switch(a=bf(c),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function qh(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Nn(n)}var Ec=new Map,fb=new Set;function xf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var $l=$.d;$.d={f:YE,r:KE,D:QE,C:JE,L:XE,m:ek,X:nk,S:tk,M:rk};function YE(){var n=$l.f(),a=hf();return n||a}function KE(n){var a=Mr(n);a!==null&&a.tag===5&&a.type==="form"?Ch(a):$l.r(n)}var Hd=typeof document>"u"?null:document;function mb(n,a,c){var f=Hd;if(f&&typeof a=="string"&&a){var B=ya(a);B='link[rel="'+n+'"][href="'+B+'"]',typeof c=="string"&&(B+='[crossorigin="'+c+'"]'),fb.has(B)||(fb.add(B),n={rel:n,crossOrigin:c,href:a},f.querySelector(B)===null&&(a=f.createElement("link"),eo(a,"link",n),Kn(a),f.head.appendChild(a)))}}function QE(n){$l.D(n),mb("dns-prefetch",n,null)}function JE(n,a){$l.C(n,a),mb("preconnect",n,a)}function XE(n,a,c){$l.L(n,a,c);var f=Hd;if(f&&n&&a){var B='link[rel="preload"][as="'+ya(a)+'"]';a==="image"&&c&&c.imageSrcSet?(B+='[imagesrcset="'+ya(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(B+='[imagesizes="'+ya(c.imageSizes)+'"]')):B+='[href="'+ya(n)+'"]';var V=B;switch(a){case"style":V=Vd(n);break;case"script":V=qd(n)}Ec.has(V)||(n=R({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:n,as:a},c),Ec.set(V,n),f.querySelector(B)!==null||a==="style"&&f.querySelector($h(V))||a==="script"&&f.querySelector(Wh(V))||(a=f.createElement("link"),eo(a,"link",n),Kn(a),f.head.appendChild(a)))}}function ek(n,a){$l.m(n,a);var c=Hd;if(c&&n){var f=a&&typeof a.as=="string"?a.as:"script",B='link[rel="modulepreload"][as="'+ya(f)+'"][href="'+ya(n)+'"]',V=B;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=qd(n)}if(!Ec.has(V)&&(n=R({rel:"modulepreload",href:n},a),Ec.set(V,n),c.querySelector(B)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Wh(V)))return}f=c.createElement("link"),eo(f,"link",n),Kn(f),c.head.appendChild(f)}}}function tk(n,a,c){$l.S(n,a,c);var f=Hd;if(f&&n){var B=cr(f).hoistableStyles,V=Vd(n);a=a||"default";var oe=B.get(V);if(!oe){var _e={loading:0,preload:null};if(oe=f.querySelector($h(V)))_e.loading=5;else{n=R({rel:"stylesheet",href:n,"data-precedence":a},c),(c=Ec.get(V))&&rv(n,c);var Ve=oe=f.createElement("link");Kn(Ve),eo(Ve,"link",n),Ve._p=new Promise(function(lt,Ht){Ve.onload=lt,Ve.onerror=Ht}),Ve.addEventListener("load",function(){_e.loading|=1}),Ve.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,wf(oe,a,f)}oe={type:"stylesheet",instance:oe,count:1,state:_e},B.set(V,oe)}}}function nk(n,a){$l.X(n,a);var c=Hd;if(c&&n){var f=cr(c).hoistableScripts,B=qd(n),V=f.get(B);V||(V=c.querySelector(Wh(B)),V||(n=R({src:n,async:!0},a),(a=Ec.get(B))&&av(n,a),V=c.createElement("script"),Kn(V),eo(V,"link",n),c.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},f.set(B,V))}}function rk(n,a){$l.M(n,a);var c=Hd;if(c&&n){var f=cr(c).hoistableScripts,B=qd(n),V=f.get(B);V||(V=c.querySelector(Wh(B)),V||(n=R({src:n,async:!0,type:"module"},a),(a=Ec.get(B))&&av(n,a),V=c.createElement("script"),Kn(V),eo(V,"link",n),c.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},f.set(B,V))}}function gb(n,a,c,f){var B=(B=Be.current)?xf(B):null;if(!B)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Vd(c.href),c=cr(B).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=Vd(c.href);var V=cr(B).hoistableStyles,oe=V.get(n);if(oe||(B=B.ownerDocument||B,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(n,oe),(V=B.querySelector($h(n)))&&!V._p&&(oe.instance=V,oe.state.loading=5),Ec.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ec.set(n,c),V||ak(B,n,c,oe.state))),a&&f===null)throw Error(s(528,""));return oe}if(a&&f!==null)throw Error(s(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=qd(c),c=cr(B).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Vd(n){return'href="'+ya(n)+'"'}function $h(n){return'link[rel="stylesheet"]['+n+"]"}function vb(n){return R({},n,{"data-precedence":n.precedence,precedence:null})}function ak(n,a,c,f){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=n.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),eo(a,"link",c),Kn(a),n.head.appendChild(a))}function qd(n){return'[src="'+ya(n)+'"]'}function Wh(n){return"script[async]"+n}function yb(n,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=n.querySelector('style[data-href~="'+ya(c.href)+'"]');if(f)return a.instance=f,Kn(f),f;var B=R({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(n.ownerDocument||n).createElement("style"),Kn(f),eo(f,"style",B),wf(f,c.precedence,n),a.instance=f;case"stylesheet":B=Vd(c.href);var V=n.querySelector($h(B));if(V)return a.state.loading|=4,a.instance=V,Kn(V),V;f=vb(c),(B=Ec.get(B))&&rv(f,B),V=(n.ownerDocument||n).createElement("link"),Kn(V);var oe=V;return oe._p=new Promise(function(_e,Ve){oe.onload=_e,oe.onerror=Ve}),eo(V,"link",f),a.state.loading|=4,wf(V,c.precedence,n),a.instance=V;case"script":return V=qd(c.src),(B=n.querySelector(Wh(V)))?(a.instance=B,Kn(B),B):(f=c,(B=Ec.get(V))&&(f=R({},c),av(f,B)),n=n.ownerDocument||n,B=n.createElement("script"),Kn(B),eo(B,"link",f),n.head.appendChild(B),a.instance=B);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,wf(f,c.precedence,n));return a.instance}function wf(n,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),B=f.length?f[f.length-1]:null,V=B,oe=0;oe<f.length;oe++){var _e=f[oe];if(_e.dataset.precedence===a)V=_e;else if(V!==B)break}V?V.parentNode.insertBefore(n,V.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(n,a.firstChild))}function rv(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function av(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Sf=null;function _b(n,a,c){if(Sf===null){var f=new Map,B=Sf=new Map;B.set(c,f)}else B=Sf,f=B.get(c),f||(f=new Map,B.set(c,f));if(f.has(n))return f;for(f.set(n,null),c=c.getElementsByTagName(n),B=0;B<c.length;B++){var V=c[B];if(!(V[In]||V[On]||n==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=V.getAttribute(a)||"";oe=n+oe;var _e=f.get(oe);_e?_e.push(V):f.set(oe,[V])}}return f}function bb(n,a,c){n=n.ownerDocument||n,n.head.insertBefore(c,a==="title"?n.querySelector("head > title"):null)}function sk(n,a,c){if(c===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function xb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Zh=null;function ik(){}function ok(n,a,c){if(Zh===null)throw Error(s(475));var f=Zh;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var B=Vd(c.href),V=n.querySelector($h(B));if(V){n=V._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(f.count++,f=Rf.bind(f),n.then(f,f)),a.state.loading|=4,a.instance=V,Kn(V);return}V=n.ownerDocument||n,c=vb(c),(B=Ec.get(B))&&rv(c,B),V=V.createElement("link"),Kn(V);var oe=V;oe._p=new Promise(function(_e,Ve){oe.onload=_e,oe.onerror=Ve}),eo(V,"link",c),a.instance=V}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(f.count++,a=Rf.bind(f),n.addEventListener("load",a),n.addEventListener("error",a))}}function ck(){if(Zh===null)throw Error(s(475));var n=Zh;return n.stylesheets&&n.count===0&&sv(n,n.stylesheets),0<n.count?function(a){var c=setTimeout(function(){if(n.stylesheets&&sv(n,n.stylesheets),n.unsuspend){var f=n.unsuspend;n.unsuspend=null,f()}},6e4);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(c)}}:null}function Rf(){if(this.count--,this.count===0){if(this.stylesheets)sv(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ef=null;function sv(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ef=new Map,a.forEach(lk,n),Ef=null,Rf.call(n))}function lk(n,a){if(!(a.state.loading&4)){var c=Ef.get(n);if(c)var f=c.get(null);else{c=new Map,Ef.set(n,c);for(var B=n.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<B.length;V++){var oe=B[V];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(c.set(oe.dataset.precedence,oe),f=oe)}f&&c.set(null,f)}B=a.instance,oe=B.getAttribute("data-precedence"),V=c.get(oe)||f,V===f&&c.set(null,B),c.set(oe,B),this.count++,f=Rf.bind(this),B.addEventListener("load",f),B.addEventListener("error",f),V?V.parentNode.insertBefore(B,V.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(B,n.firstChild)),a.state.loading|=4}}var Gh={$$typeof:g,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function uk(n,a,c,f,B,V,oe,_e){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ea(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ea(0),this.hiddenUpdates=Ea(null),this.identifierPrefix=f,this.onUncaughtError=B,this.onCaughtError=V,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function wb(n,a,c,f,B,V,oe,_e,Ve,lt,Ht,en){return n=new uk(n,a,c,oe,_e,Ve,lt,en),a=1,V===!0&&(a|=24),V=Ta(3,null,null,a),n.current=V,V.stateNode=n,a=_c(),a.refCount++,n.pooledCache=a,a.refCount++,V.memoizedState={element:f,isDehydrated:c,cache:a},xn(V),n}function Sb(n){return n?(n=Mo,n):Mo}function Rb(n,a,c,f,B,V){B=Sb(B),f.context===null?f.context=B:f.pendingContext=B,f=ft(a),f.payload={element:c},V=V===void 0?null:V,V!==null&&(f.callback=V),c=Mt(n,f,a),c!==null&&(oc(c,n,a),mt(c,n,a))}function Eb(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<a?c:a}}function iv(n,a){Eb(n,a),(n=n.alternate)&&Eb(n,a)}function kb(n){if(n.tag===13){var a=co(n,67108864);a!==null&&oc(a,n,67108864),iv(n,67108864)}}var kf=!0;function dk(n,a,c,f){var B=z.T;z.T=null;var V=$.p;try{$.p=2,ov(n,a,c,f)}finally{$.p=V,z.T=B}}function hk(n,a,c,f){var B=z.T;z.T=null;var V=$.p;try{$.p=8,ov(n,a,c,f)}finally{$.p=V,z.T=B}}function ov(n,a,c,f){if(kf){var B=cv(f);if(B===null)Gg(n,a,f,Cf,c),Tb(n,f);else if(fk(B,n,a,c,f))f.stopPropagation();else if(Tb(n,f),a&4&&-1<pk.indexOf(n)){for(;B!==null;){var V=Mr(B);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var oe=Kr(V.pendingLanes);if(oe!==0){var _e=V;for(_e.pendingLanes|=2,_e.entangledLanes|=2;oe;){var Ve=1<<31-nr(oe);_e.entanglements[1]|=Ve,oe&=~Ve}hl(V),(Ka&6)===0&&(uf=Pn()+500,Fh(0))}}break;case 13:_e=co(V,2),_e!==null&&oc(_e,V,2),hf(),iv(V,2)}if(V=cv(f),V===null&&Gg(n,a,f,Cf,c),V===B)break;B=V}B!==null&&f.stopPropagation()}else Gg(n,a,f,null,c)}}function cv(n){return n=Ni(n),lv(n)}var Cf=null;function lv(n){if(Cf=null,n=Fr(n),n!==null){var a=h(n);if(a===null)n=null;else{var c=a.tag;if(c===13){if(n=C(a),n!==null)return n;n=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Cf=n,null}function Cb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(En()){case rn:return 2;case Ne:return 8;case Me:case Ze:return 32;case Ft:return 268435456;default:return 32}default:return 32}}var uv=!1,Ru=null,Eu=null,ku=null,Yh=new Map,Kh=new Map,Cu=[],pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tb(n,a){switch(n){case"focusin":case"focusout":Ru=null;break;case"dragenter":case"dragleave":Eu=null;break;case"mouseover":case"mouseout":ku=null;break;case"pointerover":case"pointerout":Yh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kh.delete(a.pointerId)}}function Qh(n,a,c,f,B,V){return n===null||n.nativeEvent!==V?(n={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:V,targetContainers:[B]},a!==null&&(a=Mr(a),a!==null&&kb(a)),n):(n.eventSystemFlags|=f,a=n.targetContainers,B!==null&&a.indexOf(B)===-1&&a.push(B),n)}function fk(n,a,c,f,B){switch(a){case"focusin":return Ru=Qh(Ru,n,a,c,f,B),!0;case"dragenter":return Eu=Qh(Eu,n,a,c,f,B),!0;case"mouseover":return ku=Qh(ku,n,a,c,f,B),!0;case"pointerover":var V=B.pointerId;return Yh.set(V,Qh(Yh.get(V)||null,n,a,c,f,B)),!0;case"gotpointercapture":return V=B.pointerId,Kh.set(V,Qh(Kh.get(V)||null,n,a,c,f,B)),!0}return!1}function Pb(n){var a=Fr(n.target);if(a!==null){var c=h(a);if(c!==null){if(a=c.tag,a===13){if(a=C(c),a!==null){n.blockedOn=a,nn(n.priority,function(){if(c.tag===13){var f=ic();f=Zt(f);var B=co(c,f);B!==null&&oc(B,c,f),iv(c,f)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Tf(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var c=cv(n.nativeEvent);if(c===null){c=n.nativeEvent;var f=new c.constructor(c.type,c);ao=f,c.target.dispatchEvent(f),ao=null}else return a=Mr(c),a!==null&&kb(a),n.blockedOn=c,!1;a.shift()}return!0}function Nb(n,a,c){Tf(n)&&c.delete(a)}function mk(){uv=!1,Ru!==null&&Tf(Ru)&&(Ru=null),Eu!==null&&Tf(Eu)&&(Eu=null),ku!==null&&Tf(ku)&&(ku=null),Yh.forEach(Nb),Kh.forEach(Nb)}function Pf(n,a){n.blockedOn===a&&(n.blockedOn=null,uv||(uv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mk)))}var Nf=null;function Db(n){Nf!==n&&(Nf=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Nf===n&&(Nf=null);for(var a=0;a<n.length;a+=3){var c=n[a],f=n[a+1],B=n[a+2];if(typeof f!="function"){if(lv(f||c)===null)continue;break}var V=Mr(c);V!==null&&(n.splice(a,3),a-=3,Cd(V,{pending:!0,data:B,method:c.method,action:f},f,B))}}))}function Jh(n){function a(Ve){return Pf(Ve,n)}Ru!==null&&Pf(Ru,n),Eu!==null&&Pf(Eu,n),ku!==null&&Pf(ku,n),Yh.forEach(a),Kh.forEach(a);for(var c=0;c<Cu.length;c++){var f=Cu[c];f.blockedOn===n&&(f.blockedOn=null)}for(;0<Cu.length&&(c=Cu[0],c.blockedOn===null);)Pb(c),c.blockedOn===null&&Cu.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var B=c[f],V=c[f+1],oe=B[Ln]||null;if(typeof V=="function")oe||Db(c);else if(oe){var _e=null;if(V&&V.hasAttribute("formAction")){if(B=V,oe=V[Ln]||null)_e=oe.formAction;else if(lv(B)!==null)continue}else _e=oe.action;typeof _e=="function"?c[f+1]=_e:(c.splice(f,3),f-=3),Db(c)}}}function dv(n){this._internalRoot=n}Df.prototype.render=dv.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var c=a.current,f=ic();Rb(c,f,n,a,null,null)},Df.prototype.unmount=dv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Rb(n.current,2,null,n,null,null),hf(),a[Jn]=null}};function Df(n){this._internalRoot=n}Df.prototype.unstable_scheduleHydration=function(n){if(n){var a=sn();n={blockedOn:null,target:n,priority:a};for(var c=0;c<Cu.length&&a!==0&&a<Cu[c].priority;c++);Cu.splice(c,0,n),c===0&&Pb(n)}};var Ab=t.version;if(Ab!=="19.1.0")throw Error(s(527,Ab,"19.1.0"));$.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=y(a),n=n!==null?u(n):null,n=n===null?null:n.stateNode,n};var gk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{un=Af.inject(gk),Sn=Af}catch{}}return ep.createRoot=function(n,a){if(!l(n))throw Error(s(299));var c=!1,f="",B=Gy,V=Yy,oe=Ky,_e=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(B=a.onUncaughtError),a.onCaughtError!==void 0&&(V=a.onCaughtError),a.onRecoverableError!==void 0&&(oe=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(_e=a.unstable_transitionCallbacks)),a=wb(n,1,!1,null,null,c,f,B,V,oe,_e,null),n[Jn]=a.current,Zg(n),new dv(a)},ep.hydrateRoot=function(n,a,c){if(!l(n))throw Error(s(299));var f=!1,B="",V=Gy,oe=Yy,_e=Ky,Ve=null,lt=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(B=c.identifierPrefix),c.onUncaughtError!==void 0&&(V=c.onUncaughtError),c.onCaughtError!==void 0&&(oe=c.onCaughtError),c.onRecoverableError!==void 0&&(_e=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Ve=c.unstable_transitionCallbacks),c.formState!==void 0&&(lt=c.formState)),a=wb(n,1,!0,a,c??null,f,B,V,oe,_e,Ve,lt),a.context=Sb(null),c=a.current,f=ic(),f=Zt(f),B=ft(f),B.callback=null,Mt(c,B,f),c=f,a.current.lanes=c,Qr(a,c),hl(a),n[Jn]=a.current,Zg(n),new Df(a)},ep.version="19.1.0",ep}var Hb;function Ck(){if(Hb)return fv.exports;Hb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fv.exports=kk(),fv.exports}var Tk=Ck();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Vb="popstate";function Pk(e={}){function t(s,l){let{pathname:h,search:C,hash:N}=s.location;return Wv("",{pathname:h,search:C,hash:N},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(s,l){return typeof l=="string"?l:bp(l)}return Dk(t,r,null,e)}function Cs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Nk(){return Math.random().toString(36).substring(2,10)}function qb(e,t){return{usr:e.state,key:e.key,idx:t}}function Wv(e,t,r=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?uh(t):t,state:r,key:t&&t.key||s||Nk()}}function bp({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uh(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function Dk(e,t,r,s={}){let{window:l=document.defaultView,v5Compat:h=!1}=s,C=l.history,N="POP",y=null,u=R();u==null&&(u=0,C.replaceState({...C.state,idx:u},""));function R(){return(C.state||{idx:null}).idx}function v(){N="POP";let k=R(),w=k==null?null:k-u;u=k,y&&y({action:N,location:m.location,delta:w})}function b(k,w){N="PUSH";let F=Wv(m.location,k,w);u=R()+1;let g=qb(F,u),A=m.createHref(F);try{C.pushState(g,"",A)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;l.location.assign(A)}h&&y&&y({action:N,location:m.location,delta:1})}function E(k,w){N="REPLACE";let F=Wv(m.location,k,w);u=R();let g=qb(F,u),A=m.createHref(F);C.replaceState(g,"",A),h&&y&&y({action:N,location:m.location,delta:0})}function _(k){return Ak(k)}let m={get action(){return N},get location(){return e(l,C)},listen(k){if(y)throw new Error("A history only accepts one active listener");return l.addEventListener(Vb,v),y=k,()=>{l.removeEventListener(Vb,v),y=null}},createHref(k){return t(l,k)},createURL:_,encodeLocation(k){let w=_(k);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:b,replace:E,go(k){return C.go(k)}};return m}function Ak(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Cs(r,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:bp(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function Q1(e,t,r="/"){return Ok(e,t,r,!1)}function Ok(e,t,r,s){let l=typeof t=="string"?uh(t):t,h=au(l.pathname||"/",r);if(h==null)return null;let C=J1(e);Mk(C);let N=null;for(let y=0;N==null&&y<C.length;++y){let u=$k(h);N=Vk(C[y],u,s)}return N}function J1(e,t=[],r=[],s=""){let l=(h,C,N)=>{let y={relativePath:N===void 0?h.path||"":N,caseSensitive:h.caseSensitive===!0,childrenIndex:C,route:h};y.relativePath.startsWith("/")&&(Cs(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length));let u=tu([s,y.relativePath]),R=r.concat(y);h.children&&h.children.length>0&&(Cs(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),J1(h.children,t,R,u)),!(h.path==null&&!h.index)&&t.push({path:u,score:Fk(u,h.index),routesMeta:R})};return e.forEach((h,C)=>{if(h.path===""||!h.path?.includes("?"))l(h,C);else for(let N of X1(h.path))l(h,C,N)}),t}function X1(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,l=r.endsWith("?"),h=r.replace(/\?$/,"");if(s.length===0)return l?[h,""]:[h];let C=X1(s.join("/")),N=[];return N.push(...C.map(y=>y===""?h:[h,y].join("/"))),l&&N.push(...C),N.map(y=>e.startsWith("/")&&y===""?"/":y)}function Mk(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Hk(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var jk=/^:[\w-]+$/,Lk=3,Ik=2,Bk=1,zk=10,Uk=-2,$b=e=>e==="*";function Fk(e,t){let r=e.split("/"),s=r.length;return r.some($b)&&(s+=Uk),t&&(s+=Ik),r.filter(l=>!$b(l)).reduce((l,h)=>l+(jk.test(h)?Lk:h===""?Bk:zk),s)}function Hk(e,t){return e.length===t.length&&e.slice(0,-1).every((s,l)=>s===t[l])?e[e.length-1]-t[t.length-1]:0}function Vk(e,t,r=!1){let{routesMeta:s}=e,l={},h="/",C=[];for(let N=0;N<s.length;++N){let y=s[N],u=N===s.length-1,R=h==="/"?t:t.slice(h.length)||"/",v=lm({path:y.relativePath,caseSensitive:y.caseSensitive,end:u},R),b=y.route;if(!v&&u&&r&&!s[s.length-1].route.index&&(v=lm({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},R)),!v)return null;Object.assign(l,v.params),C.push({params:l,pathname:tu([h,v.pathname]),pathnameBase:Yk(tu([h,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(h=tu([h,v.pathnameBase]))}return C}function lm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=qk(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let h=l[0],C=h.replace(/(.)\/+$/,"$1"),N=l.slice(1);return{params:s.reduce((u,{paramName:R,isOptional:v},b)=>{if(R==="*"){let _=N[b]||"";C=h.slice(0,h.length-_.length).replace(/(.)\/+$/,"$1")}const E=N[b];return v&&!E?u[R]=void 0:u[R]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:h,pathnameBase:C,pattern:e}}function qk(e,t=!1,r=!0){Cc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(C,N,y)=>(s.push({paramName:N,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),s]}function $k(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function au(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function Wk(e,t="/"){let{pathname:r,search:s="",hash:l=""}=typeof e=="string"?uh(e):e;return{pathname:r?r.startsWith("/")?r:Zk(r,t):t,search:Kk(s),hash:Qk(l)}}function Zk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function yv(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gk(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function E0(e){let t=Gk(e);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function k0(e,t,r,s=!1){let l;typeof e=="string"?l=uh(e):(l={...e},Cs(!l.pathname||!l.pathname.includes("?"),yv("?","pathname","search",l)),Cs(!l.pathname||!l.pathname.includes("#"),yv("#","pathname","hash",l)),Cs(!l.search||!l.search.includes("#"),yv("#","search","hash",l)));let h=e===""||l.pathname==="",C=h?"/":l.pathname,N;if(C==null)N=r;else{let v=t.length-1;if(!s&&C.startsWith("..")){let b=C.split("/");for(;b[0]==="..";)b.shift(),v-=1;l.pathname=b.join("/")}N=v>=0?t[v]:"/"}let y=Wk(l,N),u=C&&C!=="/"&&C.endsWith("/"),R=(h||C===".")&&r.endsWith("/");return!y.pathname.endsWith("/")&&(u||R)&&(y.pathname+="/"),y}var tu=e=>e.join("/").replace(/\/\/+/g,"/"),Yk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Kk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Jk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var ew=["POST","PUT","PATCH","DELETE"];new Set(ew);var Xk=["GET",...ew];new Set(Xk);var dh=Z.createContext(null);dh.displayName="DataRouter";var Am=Z.createContext(null);Am.displayName="DataRouterState";Z.createContext(!1);var tw=Z.createContext({isTransitioning:!1});tw.displayName="ViewTransition";var eC=Z.createContext(new Map);eC.displayName="Fetchers";var tC=Z.createContext(null);tC.displayName="Await";var tl=Z.createContext(null);tl.displayName="Navigation";var Mp=Z.createContext(null);Mp.displayName="Location";var Pc=Z.createContext({outlet:null,matches:[],isDataRoute:!1});Pc.displayName="Route";var C0=Z.createContext(null);C0.displayName="RouteError";function nC(e,{relative:t}={}){Cs(hh(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=Z.useContext(tl),{hash:l,pathname:h,search:C}=jp(e,{relative:t}),N=h;return r!=="/"&&(N=h==="/"?r:tu([r,h])),s.createHref({pathname:N,search:C,hash:l})}function hh(){return Z.useContext(Mp)!=null}function nl(){return Cs(hh(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(Mp).location}var nw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rw(e){Z.useContext(tl).static||Z.useLayoutEffect(e)}function as(){let{isDataRoute:e}=Z.useContext(Pc);return e?vC():rC()}function rC(){Cs(hh(),"useNavigate() may be used only in the context of a <Router> component.");let e=Z.useContext(dh),{basename:t,navigator:r}=Z.useContext(tl),{matches:s}=Z.useContext(Pc),{pathname:l}=nl(),h=JSON.stringify(E0(s)),C=Z.useRef(!1);return rw(()=>{C.current=!0}),Z.useCallback((y,u={})=>{if(Cc(C.current,nw),!C.current)return;if(typeof y=="number"){r.go(y);return}let R=k0(y,JSON.parse(h),l,u.relative==="path");e==null&&t!=="/"&&(R.pathname=R.pathname==="/"?t:tu([t,R.pathname])),(u.replace?r.replace:r.push)(R,u.state,u)},[t,r,h,l,e])}var aC=Z.createContext(null);function sC(e){let t=Z.useContext(Pc).outlet;return t&&Z.createElement(aC.Provider,{value:e},t)}function xl(){let{matches:e}=Z.useContext(Pc),t=e[e.length-1];return t?t.params:{}}function jp(e,{relative:t}={}){let{matches:r}=Z.useContext(Pc),{pathname:s}=nl(),l=JSON.stringify(E0(r));return Z.useMemo(()=>k0(e,JSON.parse(l),s,t==="path"),[e,l,s,t])}function iC(e,t){return aw(e,t)}function aw(e,t,r,s){Cs(hh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=Z.useContext(tl),{matches:h}=Z.useContext(Pc),C=h[h.length-1],N=C?C.params:{},y=C?C.pathname:"/",u=C?C.pathnameBase:"/",R=C&&C.route;{let w=R&&R.path||"";sw(y,!R||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let v=nl(),b;if(t){let w=typeof t=="string"?uh(t):t;Cs(u==="/"||w.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),b=w}else b=v;let E=b.pathname||"/",_=E;if(u!=="/"){let w=u.replace(/^\//,"").split("/");_="/"+E.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=Q1(e,{pathname:_});Cc(R||m!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Cc(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=dC(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},N,w.params),pathname:tu([u,l.encodeLocation?l.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:tu([u,l.encodeLocation?l.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),h,r,s);return t&&k?Z.createElement(Mp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},k):k}function oC(){let e=gC(),t=Jk(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},h={padding:"2px 4px",backgroundColor:s},C=null;return console.error("Error handled by React Router default ErrorBoundary:",e),C=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:h},"ErrorBoundary")," or"," ",Z.createElement("code",{style:h},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},t),r?Z.createElement("pre",{style:l},r):null,C)}var cC=Z.createElement(oC,null),lC=class extends Z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Z.createElement(Pc.Provider,{value:this.props.routeContext},Z.createElement(C0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uC({routeContext:e,match:t,children:r}){let s=Z.useContext(dh);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),Z.createElement(Pc.Provider,{value:e},r)}function dC(e,t=[],r=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,h=r?.errors;if(h!=null){let y=l.findIndex(u=>u.route.id&&h?.[u.route.id]!==void 0);Cs(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let C=!1,N=-1;if(r)for(let y=0;y<l.length;y++){let u=l[y];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(N=y),u.route.id){let{loaderData:R,errors:v}=r,b=u.route.loader&&!R.hasOwnProperty(u.route.id)&&(!v||v[u.route.id]===void 0);if(u.route.lazy||b){C=!0,N>=0?l=l.slice(0,N+1):l=[l[0]];break}}}return l.reduceRight((y,u,R)=>{let v,b=!1,E=null,_=null;r&&(v=h&&u.route.id?h[u.route.id]:void 0,E=u.route.errorElement||cC,C&&(N<0&&R===0?(sw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,_=null):N===R&&(b=!0,_=u.route.hydrateFallbackElement||null)));let m=t.concat(l.slice(0,R+1)),k=()=>{let w;return v?w=E:b?w=_:u.route.Component?w=Z.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=y,Z.createElement(uC,{match:u,routeContext:{outlet:y,matches:m,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||R===0)?Z.createElement(lC,{location:r.location,revalidation:r.revalidation,component:E,error:v,children:k(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):k()},null)}function T0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hC(e){let t=Z.useContext(dh);return Cs(t,T0(e)),t}function pC(e){let t=Z.useContext(Am);return Cs(t,T0(e)),t}function fC(e){let t=Z.useContext(Pc);return Cs(t,T0(e)),t}function P0(e){let t=fC(e),r=t.matches[t.matches.length-1];return Cs(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function mC(){return P0("useRouteId")}function gC(){let e=Z.useContext(C0),t=pC("useRouteError"),r=P0("useRouteError");return e!==void 0?e:t.errors?.[r]}function vC(){let{router:e}=hC("useNavigate"),t=P0("useNavigate"),r=Z.useRef(!1);return rw(()=>{r.current=!0}),Z.useCallback(async(l,h={})=>{Cc(r.current,nw),r.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...h}))},[e,t])}var Wb={};function sw(e,t,r){!t&&!Wb[e]&&(Wb[e]=!0,Cc(!1,r))}Z.memo(yC);function yC({routes:e,future:t,state:r}){return aw(e,void 0,r,t)}function ph({to:e,replace:t,state:r,relative:s}){Cs(hh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=Z.useContext(tl);Cc(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=Z.useContext(Pc),{pathname:C}=nl(),N=as(),y=k0(e,E0(h),C,s==="path"),u=JSON.stringify(y);return Z.useEffect(()=>{N(JSON.parse(u),{replace:t,state:r,relative:s})},[N,u,s,t,r]),null}function iw(e){return sC(e.context)}function Sa(e){Cs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _C({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:l,static:h=!1}){Cs(!hh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let C=e.replace(/^\/*/,"/"),N=Z.useMemo(()=>({basename:C,navigator:l,static:h,future:{}}),[C,l,h]);typeof r=="string"&&(r=uh(r));let{pathname:y="/",search:u="",hash:R="",state:v=null,key:b="default"}=r,E=Z.useMemo(()=>{let _=au(y,C);return _==null?null:{location:{pathname:_,search:u,hash:R,state:v,key:b},navigationType:s}},[C,y,u,R,v,b,s]);return Cc(E!=null,`<Router basename="${C}"> is not able to match the URL "${y}${u}${R}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:Z.createElement(tl.Provider,{value:N},Z.createElement(Mp.Provider,{children:t,value:E}))}function bC({children:e,location:t}){return iC(Zv(e),t)}function Zv(e,t=[]){let r=[];return Z.Children.forEach(e,(s,l)=>{if(!Z.isValidElement(s))return;let h=[...t,l];if(s.type===Z.Fragment){r.push.apply(r,Zv(s.props.children,h));return}Cs(s.type===Sa,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Cs(!s.props.index||!s.props.children,"An index route cannot have child routes.");let C={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(C.children=Zv(s.props.children,h)),r.push(C)}),r}var Qf="get",Jf="application/x-www-form-urlencoded";function Om(e){return e!=null&&typeof e.tagName=="string"}function xC(e){return Om(e)&&e.tagName.toLowerCase()==="button"}function wC(e){return Om(e)&&e.tagName.toLowerCase()==="form"}function SC(e){return Om(e)&&e.tagName.toLowerCase()==="input"}function RC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function EC(e,t){return e.button===0&&(!t||t==="_self")&&!RC(e)}function Gv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(l=>[r,l]):[[r,s]])},[]))}function kC(e,t){let r=Gv(e);return t&&t.forEach((s,l)=>{r.has(l)||t.getAll(l).forEach(h=>{r.append(l,h)})}),r}var Of=null;function CC(){if(Of===null)try{new FormData(document.createElement("form"),0),Of=!1}catch{Of=!0}return Of}var TC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _v(e){return e!=null&&!TC.has(e)?(Cc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jf}"`),null):e}function PC(e,t){let r,s,l,h,C;if(wC(e)){let N=e.getAttribute("action");s=N?au(N,t):null,r=e.getAttribute("method")||Qf,l=_v(e.getAttribute("enctype"))||Jf,h=new FormData(e)}else if(xC(e)||SC(e)&&(e.type==="submit"||e.type==="image")){let N=e.form;if(N==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=e.getAttribute("formaction")||N.getAttribute("action");if(s=y?au(y,t):null,r=e.getAttribute("formmethod")||N.getAttribute("method")||Qf,l=_v(e.getAttribute("formenctype"))||_v(N.getAttribute("enctype"))||Jf,h=new FormData(N,e),!CC()){let{name:u,type:R,value:v}=e;if(R==="image"){let b=u?`${u}.`:"";h.append(`${b}x`,"0"),h.append(`${b}y`,"0")}else u&&h.append(u,v)}}else{if(Om(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Qf,s=null,l=Jf,C=e}return h&&l==="text/plain"&&(C=h,h=void 0),{action:s,method:r.toLowerCase(),encType:l,formData:h,body:C}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function N0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function NC(e,t,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&au(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function DC(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AC(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function OC(e,t,r){let s=await Promise.all(e.map(async l=>{let h=t.routes[l.route.id];if(h){let C=await DC(h,r);return C.links?C.links():[]}return[]}));return IC(s.flat(1).filter(AC).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Zb(e,t,r,s,l,h){let C=(y,u)=>r[u]?y.route.id!==r[u].route.id:!0,N=(y,u)=>r[u].pathname!==y.pathname||r[u].route.path?.endsWith("*")&&r[u].params["*"]!==y.params["*"];return h==="assets"?t.filter((y,u)=>C(y,u)||N(y,u)):h==="data"?t.filter((y,u)=>{let R=s.routes[y.route.id];if(!R||!R.hasLoader)return!1;if(C(y,u)||N(y,u))return!0;if(y.route.shouldRevalidate){let v=y.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function MC(e,t,{includeHydrateFallback:r}={}){return jC(e.map(s=>{let l=t.routes[s.route.id];if(!l)return[];let h=[l.module];return l.clientActionModule&&(h=h.concat(l.clientActionModule)),l.clientLoaderModule&&(h=h.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(h=h.concat(l.hydrateFallbackModule)),l.imports&&(h=h.concat(l.imports)),h}).flat(1))}function jC(e){return[...new Set(e)]}function LC(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}function IC(e,t){let r=new Set;return new Set(t),e.reduce((s,l)=>{let h=JSON.stringify(LC(l));return r.has(h)||(r.add(h),s.push({key:h,link:l})),s},[])}function ow(){let e=Z.useContext(dh);return N0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function BC(){let e=Z.useContext(Am);return N0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var D0=Z.createContext(void 0);D0.displayName="FrameworkContext";function cw(){let e=Z.useContext(D0);return N0(e,"You must render this element inside a <HydratedRouter> element"),e}function zC(e,t){let r=Z.useContext(D0),[s,l]=Z.useState(!1),[h,C]=Z.useState(!1),{onFocus:N,onBlur:y,onMouseEnter:u,onMouseLeave:R,onTouchStart:v}=t,b=Z.useRef(null);Z.useEffect(()=>{if(e==="render"&&C(!0),e==="viewport"){let m=w=>{w.forEach(F=>{C(F.isIntersecting)})},k=new IntersectionObserver(m,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[e]),Z.useEffect(()=>{if(s){let m=setTimeout(()=>{C(!0)},100);return()=>{clearTimeout(m)}}},[s]);let E=()=>{l(!0)},_=()=>{l(!1),C(!1)};return r?e!=="intent"?[h,b,{}]:[h,b,{onFocus:tp(N,E),onBlur:tp(y,_),onMouseEnter:tp(u,E),onMouseLeave:tp(R,_),onTouchStart:tp(v,E)}]:[!1,b,{}]}function tp(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function UC({page:e,...t}){let{router:r}=ow(),s=Z.useMemo(()=>Q1(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?Z.createElement(HC,{page:e,matches:s,...t}):null}function FC(e){let{manifest:t,routeModules:r}=cw(),[s,l]=Z.useState([]);return Z.useEffect(()=>{let h=!1;return OC(e,t,r).then(C=>{h||l(C)}),()=>{h=!0}},[e,t,r]),s}function HC({page:e,matches:t,...r}){let s=nl(),{manifest:l,routeModules:h}=cw(),{basename:C}=ow(),{loaderData:N,matches:y}=BC(),u=Z.useMemo(()=>Zb(e,t,y,l,s,"data"),[e,t,y,l,s]),R=Z.useMemo(()=>Zb(e,t,y,l,s,"assets"),[e,t,y,l,s]),v=Z.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let _=new Set,m=!1;if(t.forEach(w=>{let F=l.routes[w.route.id];!F||!F.hasLoader||(!u.some(g=>g.route.id===w.route.id)&&w.route.id in N&&h[w.route.id]?.shouldRevalidate||F.hasClientLoader?m=!0:_.add(w.route.id))}),_.size===0)return[];let k=NC(e,C,"data");return m&&_.size>0&&k.searchParams.set("_routes",t.filter(w=>_.has(w.route.id)).map(w=>w.route.id).join(",")),[k.pathname+k.search]},[C,N,s,l,u,t,e,h]),b=Z.useMemo(()=>MC(R,l),[R,l]),E=FC(R);return Z.createElement(Z.Fragment,null,v.map(_=>Z.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...r})),b.map(_=>Z.createElement("link",{key:_,rel:"modulepreload",href:_,...r})),E.map(({key:_,link:m})=>Z.createElement("link",{key:_,...m})))}function VC(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var lw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lw&&(window.__reactRouterVersion="7.7.0")}catch{}function qC({basename:e,children:t,window:r}){let s=Z.useRef();s.current==null&&(s.current=Pk({window:r,v5Compat:!0}));let l=s.current,[h,C]=Z.useState({action:l.action,location:l.location}),N=Z.useCallback(y=>{Z.startTransition(()=>C(y))},[C]);return Z.useLayoutEffect(()=>l.listen(N),[l,N]),Z.createElement(_C,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:l})}var uw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Za=Z.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:l,reloadDocument:h,replace:C,state:N,target:y,to:u,preventScrollReset:R,viewTransition:v,...b},E){let{basename:_}=Z.useContext(tl),m=typeof u=="string"&&uw.test(u),k,w=!1;if(typeof u=="string"&&m&&(k=u,lw))try{let x=new URL(window.location.href),d=u.startsWith("//")?new URL(x.protocol+u):new URL(u),T=au(d.pathname,_);d.origin===x.origin&&T!=null?u=T+d.search+d.hash:w=!0}catch{Cc(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=nC(u,{relative:l}),[g,A,P]=zC(s,b),H=GC(u,{replace:C,state:N,target:y,preventScrollReset:R,relative:l,viewTransition:v});function D(x){t&&t(x),x.defaultPrevented||H(x)}let S=Z.createElement("a",{...b,...P,href:k||F,onClick:w||h?t:D,ref:VC(E,A),target:y,"data-discover":!m&&r==="render"?"true":void 0});return g&&!m?Z.createElement(Z.Fragment,null,S,Z.createElement(UC,{page:F})):S});Za.displayName="Link";var $C=Z.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:l=!1,style:h,to:C,viewTransition:N,children:y,...u},R){let v=jp(C,{relative:u.relative}),b=nl(),E=Z.useContext(Am),{navigator:_,basename:m}=Z.useContext(tl),k=E!=null&&XC(v)&&N===!0,w=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,F=b.pathname,g=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(F=F.toLowerCase(),g=g?g.toLowerCase():null,w=w.toLowerCase()),g&&m&&(g=au(g,m)||g);const A=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let P=F===w||!l&&F.startsWith(w)&&F.charAt(A)==="/",H=g!=null&&(g===w||!l&&g.startsWith(w)&&g.charAt(w.length)==="/"),D={isActive:P,isPending:H,isTransitioning:k},S=P?t:void 0,x;typeof s=="function"?x=s(D):x=[s,P?"active":null,H?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let d=typeof h=="function"?h(D):h;return Z.createElement(Za,{...u,"aria-current":S,className:x,ref:R,style:d,to:C,viewTransition:N},typeof y=="function"?y(D):y)});$C.displayName="NavLink";var WC=Z.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:l,state:h,method:C=Qf,action:N,onSubmit:y,relative:u,preventScrollReset:R,viewTransition:v,...b},E)=>{let _=QC(),m=JC(N,{relative:u}),k=C.toLowerCase()==="get"?"get":"post",w=typeof N=="string"&&uw.test(N),F=g=>{if(y&&y(g),g.defaultPrevented)return;g.preventDefault();let A=g.nativeEvent.submitter,P=A?.getAttribute("formmethod")||C;_(A||g.currentTarget,{fetcherKey:t,method:P,navigate:r,replace:l,state:h,relative:u,preventScrollReset:R,viewTransition:v})};return Z.createElement("form",{ref:E,method:k,action:m,onSubmit:s?y:F,...b,"data-discover":!w&&e==="render"?"true":void 0})});WC.displayName="Form";function ZC(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dw(e){let t=Z.useContext(dh);return Cs(t,ZC(e)),t}function GC(e,{target:t,replace:r,state:s,preventScrollReset:l,relative:h,viewTransition:C}={}){let N=as(),y=nl(),u=jp(e,{relative:h});return Z.useCallback(R=>{if(EC(R,t)){R.preventDefault();let v=r!==void 0?r:bp(y)===bp(u);N(e,{replace:v,state:s,preventScrollReset:l,relative:h,viewTransition:C})}},[y,N,u,r,s,t,e,l,h,C])}function A0(e){Cc(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=Z.useRef(Gv(e)),r=Z.useRef(!1),s=nl(),l=Z.useMemo(()=>kC(s.search,r.current?null:t.current),[s.search]),h=as(),C=Z.useCallback((N,y)=>{const u=Gv(typeof N=="function"?N(new URLSearchParams(l)):N);r.current=!0,h("?"+u,y)},[h,l]);return[l,C]}var YC=0,KC=()=>`__${String(++YC)}__`;function QC(){let{router:e}=dw("useSubmit"),{basename:t}=Z.useContext(tl),r=mC();return Z.useCallback(async(s,l={})=>{let{action:h,method:C,encType:N,formData:y,body:u}=PC(s,t);if(l.navigate===!1){let R=l.fetcherKey||KC();await e.fetch(R,r,l.action||h,{preventScrollReset:l.preventScrollReset,formData:y,body:u,formMethod:l.method||C,formEncType:l.encType||N,flushSync:l.flushSync})}else await e.navigate(l.action||h,{preventScrollReset:l.preventScrollReset,formData:y,body:u,formMethod:l.method||C,formEncType:l.encType||N,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,r])}function JC(e,{relative:t}={}){let{basename:r}=Z.useContext(tl),s=Z.useContext(Pc);Cs(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),h={...jp(e||".",{relative:t})},C=nl();if(e==null){h.search=C.search;let N=new URLSearchParams(h.search),y=N.getAll("index");if(y.some(R=>R==="")){N.delete("index"),y.filter(v=>v).forEach(v=>N.append("index",v));let R=N.toString();h.search=R?`?${R}`:""}}return(!e||e===".")&&l.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(h.pathname=h.pathname==="/"?r:tu([r,h.pathname])),bp(h)}function XC(e,t={}){let r=Z.useContext(tw);Cs(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=dw("useViewTransitionState"),l=jp(e,{relative:t.relative});if(!r.isTransitioning)return!1;let h=au(r.currentLocation.pathname,s)||r.currentLocation.pathname,C=au(r.nextLocation.pathname,s)||r.nextLocation.pathname;return lm(l.pathname,C)!=null||lm(l.pathname,h)!=null}var hw=K1();const pw=R0(hw);function fw(e,t){return function(){return e.apply(t,arguments)}}const{toString:eT}=Object.prototype,{getPrototypeOf:O0}=Object,{iterator:Mm,toStringTag:mw}=Symbol,jm=(e=>t=>{const r=eT.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),rl=e=>(e=e.toLowerCase(),t=>jm(t)===e),Lm=e=>t=>typeof t===e,{isArray:fh}=Array,xp=Lm("undefined");function Lp(e){return e!==null&&!xp(e)&&e.constructor!==null&&!xp(e.constructor)&&Vo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gw=rl("ArrayBuffer");function tT(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&gw(e.buffer),t}const nT=Lm("string"),Vo=Lm("function"),vw=Lm("number"),Ip=e=>e!==null&&typeof e=="object",rT=e=>e===!0||e===!1,Xf=e=>{if(jm(e)!=="object")return!1;const t=O0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(mw in e)&&!(Mm in e)},aT=e=>{if(!Ip(e)||Lp(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},sT=rl("Date"),iT=rl("File"),oT=rl("Blob"),cT=rl("FileList"),lT=e=>Ip(e)&&Vo(e.pipe),uT=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Vo(e.append)&&((t=jm(e))==="formdata"||t==="object"&&Vo(e.toString)&&e.toString()==="[object FormData]"))},dT=rl("URLSearchParams"),[hT,pT,fT,mT]=["ReadableStream","Request","Response","Headers"].map(rl),gT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bp(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,l;if(typeof e!="object"&&(e=[e]),fh(e))for(s=0,l=e.length;s<l;s++)t.call(null,e[s],s,e);else{if(Lp(e))return;const h=r?Object.getOwnPropertyNames(e):Object.keys(e),C=h.length;let N;for(s=0;s<C;s++)N=h[s],t.call(null,e[N],N,e)}}function yw(e,t){if(Lp(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,l;for(;s-- >0;)if(l=r[s],t===l.toLowerCase())return l;return null}const rd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_w=e=>!xp(e)&&e!==rd;function Yv(){const{caseless:e}=_w(this)&&this||{},t={},r=(s,l)=>{const h=e&&yw(t,l)||l;Xf(t[h])&&Xf(s)?t[h]=Yv(t[h],s):Xf(s)?t[h]=Yv({},s):fh(s)?t[h]=s.slice():t[h]=s};for(let s=0,l=arguments.length;s<l;s++)arguments[s]&&Bp(arguments[s],r);return t}const vT=(e,t,r,{allOwnKeys:s}={})=>(Bp(t,(l,h)=>{r&&Vo(l)?e[h]=fw(l,r):e[h]=l},{allOwnKeys:s}),e),yT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_T=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},bT=(e,t,r,s)=>{let l,h,C;const N={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),h=l.length;h-- >0;)C=l[h],(!s||s(C,e,t))&&!N[C]&&(t[C]=e[C],N[C]=!0);e=r!==!1&&O0(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},xT=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},wT=e=>{if(!e)return null;if(fh(e))return e;let t=e.length;if(!vw(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},ST=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&O0(Uint8Array)),RT=(e,t)=>{const s=(e&&e[Mm]).call(e);let l;for(;(l=s.next())&&!l.done;){const h=l.value;t.call(e,h[0],h[1])}},ET=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},kT=rl("HTMLFormElement"),CT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,l){return s.toUpperCase()+l}),Gb=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),TT=rl("RegExp"),bw=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Bp(r,(l,h)=>{let C;(C=t(l,h,e))!==!1&&(s[h]=C||l)}),Object.defineProperties(e,s)},PT=e=>{bw(e,(t,r)=>{if(Vo(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(Vo(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},NT=(e,t)=>{const r={},s=l=>{l.forEach(h=>{r[h]=!0})};return fh(e)?s(e):s(String(e).split(t)),r},DT=()=>{},AT=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function OT(e){return!!(e&&Vo(e.append)&&e[mw]==="FormData"&&e[Mm])}const MT=e=>{const t=new Array(10),r=(s,l)=>{if(Ip(s)){if(t.indexOf(s)>=0)return;if(Lp(s))return s;if(!("toJSON"in s)){t[l]=s;const h=fh(s)?[]:{};return Bp(s,(C,N)=>{const y=r(C,l+1);!xp(y)&&(h[N]=y)}),t[l]=void 0,h}}return s};return r(e,0)},jT=rl("AsyncFunction"),LT=e=>e&&(Ip(e)||Vo(e))&&Vo(e.then)&&Vo(e.catch),xw=((e,t)=>e?setImmediate:t?((r,s)=>(rd.addEventListener("message",({source:l,data:h})=>{l===rd&&h===r&&s.length&&s.shift()()},!1),l=>{s.push(l),rd.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Vo(rd.postMessage)),IT=typeof queueMicrotask<"u"?queueMicrotask.bind(rd):typeof process<"u"&&process.nextTick||xw,BT=e=>e!=null&&Vo(e[Mm]),Et={isArray:fh,isArrayBuffer:gw,isBuffer:Lp,isFormData:uT,isArrayBufferView:tT,isString:nT,isNumber:vw,isBoolean:rT,isObject:Ip,isPlainObject:Xf,isEmptyObject:aT,isReadableStream:hT,isRequest:pT,isResponse:fT,isHeaders:mT,isUndefined:xp,isDate:sT,isFile:iT,isBlob:oT,isRegExp:TT,isFunction:Vo,isStream:lT,isURLSearchParams:dT,isTypedArray:ST,isFileList:cT,forEach:Bp,merge:Yv,extend:vT,trim:gT,stripBOM:yT,inherits:_T,toFlatObject:bT,kindOf:jm,kindOfTest:rl,endsWith:xT,toArray:wT,forEachEntry:RT,matchAll:ET,isHTMLForm:kT,hasOwnProperty:Gb,hasOwnProp:Gb,reduceDescriptors:bw,freezeMethods:PT,toObjectSet:NT,toCamelCase:CT,noop:DT,toFiniteNumber:AT,findKey:yw,global:rd,isContextDefined:_w,isSpecCompliantForm:OT,toJSONObject:MT,isAsyncFn:jT,isThenable:LT,setImmediate:xw,asap:IT,isIterable:BT};function aa(e,t,r,s,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),l&&(this.response=l,this.status=l.status?l.status:null)}Et.inherits(aa,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Et.toJSONObject(this.config),code:this.code,status:this.status}}});const ww=aa.prototype,Sw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Sw[e]={value:e}});Object.defineProperties(aa,Sw);Object.defineProperty(ww,"isAxiosError",{value:!0});aa.from=(e,t,r,s,l,h)=>{const C=Object.create(ww);return Et.toFlatObject(e,C,function(y){return y!==Error.prototype},N=>N!=="isAxiosError"),aa.call(C,e.message,t,r,s,l),C.cause=e,C.name=e.name,h&&Object.assign(C,h),C};const zT=null;function Kv(e){return Et.isPlainObject(e)||Et.isArray(e)}function Rw(e){return Et.endsWith(e,"[]")?e.slice(0,-2):e}function Yb(e,t,r){return e?e.concat(t).map(function(l,h){return l=Rw(l),!r&&h?"["+l+"]":l}).join(r?".":""):t}function UT(e){return Et.isArray(e)&&!e.some(Kv)}const FT=Et.toFlatObject(Et,{},null,function(t){return/^is[A-Z]/.test(t)});function Im(e,t,r){if(!Et.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Et.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,k){return!Et.isUndefined(k[m])});const s=r.metaTokens,l=r.visitor||R,h=r.dots,C=r.indexes,y=(r.Blob||typeof Blob<"u"&&Blob)&&Et.isSpecCompliantForm(t);if(!Et.isFunction(l))throw new TypeError("visitor must be a function");function u(_){if(_===null)return"";if(Et.isDate(_))return _.toISOString();if(Et.isBoolean(_))return _.toString();if(!y&&Et.isBlob(_))throw new aa("Blob is not supported. Use a Buffer instead.");return Et.isArrayBuffer(_)||Et.isTypedArray(_)?y&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function R(_,m,k){let w=_;if(_&&!k&&typeof _=="object"){if(Et.endsWith(m,"{}"))m=s?m:m.slice(0,-2),_=JSON.stringify(_);else if(Et.isArray(_)&&UT(_)||(Et.isFileList(_)||Et.endsWith(m,"[]"))&&(w=Et.toArray(_)))return m=Rw(m),w.forEach(function(g,A){!(Et.isUndefined(g)||g===null)&&t.append(C===!0?Yb([m],A,h):C===null?m:m+"[]",u(g))}),!1}return Kv(_)?!0:(t.append(Yb(k,m,h),u(_)),!1)}const v=[],b=Object.assign(FT,{defaultVisitor:R,convertValue:u,isVisitable:Kv});function E(_,m){if(!Et.isUndefined(_)){if(v.indexOf(_)!==-1)throw Error("Circular reference detected in "+m.join("."));v.push(_),Et.forEach(_,function(w,F){(!(Et.isUndefined(w)||w===null)&&l.call(t,w,Et.isString(F)?F.trim():F,m,b))===!0&&E(w,m?m.concat(F):[F])}),v.pop()}}if(!Et.isObject(e))throw new TypeError("data must be an object");return E(e),t}function Kb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function M0(e,t){this._pairs=[],e&&Im(e,this,t)}const Ew=M0.prototype;Ew.append=function(t,r){this._pairs.push([t,r])};Ew.toString=function(t){const r=t?function(s){return t.call(this,s,Kb)}:Kb;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function HT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function kw(e,t,r){if(!t)return e;const s=r&&r.encode||HT;Et.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let h;if(l?h=l(t,r):h=Et.isURLSearchParams(t)?t.toString():new M0(t,r).toString(s),h){const C=e.indexOf("#");C!==-1&&(e=e.slice(0,C)),e+=(e.indexOf("?")===-1?"?":"&")+h}return e}class Qb{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Et.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Cw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},VT=typeof URLSearchParams<"u"?URLSearchParams:M0,qT=typeof FormData<"u"?FormData:null,$T=typeof Blob<"u"?Blob:null,WT={isBrowser:!0,classes:{URLSearchParams:VT,FormData:qT,Blob:$T},protocols:["http","https","file","blob","url","data"]},j0=typeof window<"u"&&typeof document<"u",Qv=typeof navigator=="object"&&navigator||void 0,ZT=j0&&(!Qv||["ReactNative","NativeScript","NS"].indexOf(Qv.product)<0),GT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",YT=j0&&window.location.href||"http://localhost",KT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:j0,hasStandardBrowserEnv:ZT,hasStandardBrowserWebWorkerEnv:GT,navigator:Qv,origin:YT},Symbol.toStringTag,{value:"Module"})),po={...KT,...WT};function QT(e,t){return Im(e,new po.classes.URLSearchParams,{visitor:function(r,s,l,h){return po.isNode&&Et.isBuffer(r)?(this.append(s,r.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)},...t})}function JT(e){return Et.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function XT(e){const t={},r=Object.keys(e);let s;const l=r.length;let h;for(s=0;s<l;s++)h=r[s],t[h]=e[h];return t}function Tw(e){function t(r,s,l,h){let C=r[h++];if(C==="__proto__")return!0;const N=Number.isFinite(+C),y=h>=r.length;return C=!C&&Et.isArray(l)?l.length:C,y?(Et.hasOwnProp(l,C)?l[C]=[l[C],s]:l[C]=s,!N):((!l[C]||!Et.isObject(l[C]))&&(l[C]=[]),t(r,s,l[C],h)&&Et.isArray(l[C])&&(l[C]=XT(l[C])),!N)}if(Et.isFormData(e)&&Et.isFunction(e.entries)){const r={};return Et.forEachEntry(e,(s,l)=>{t(JT(s),l,r,0)}),r}return null}function eP(e,t,r){if(Et.isString(e))try{return(t||JSON.parse)(e),Et.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const zp={transitional:Cw,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",l=s.indexOf("application/json")>-1,h=Et.isObject(t);if(h&&Et.isHTMLForm(t)&&(t=new FormData(t)),Et.isFormData(t))return l?JSON.stringify(Tw(t)):t;if(Et.isArrayBuffer(t)||Et.isBuffer(t)||Et.isStream(t)||Et.isFile(t)||Et.isBlob(t)||Et.isReadableStream(t))return t;if(Et.isArrayBufferView(t))return t.buffer;if(Et.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let N;if(h){if(s.indexOf("application/x-www-form-urlencoded")>-1)return QT(t,this.formSerializer).toString();if((N=Et.isFileList(t))||s.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return Im(N?{"files[]":t}:t,y&&new y,this.formSerializer)}}return h||l?(r.setContentType("application/json",!1),eP(t)):t}],transformResponse:[function(t){const r=this.transitional||zp.transitional,s=r&&r.forcedJSONParsing,l=this.responseType==="json";if(Et.isResponse(t)||Et.isReadableStream(t))return t;if(t&&Et.isString(t)&&(s&&!this.responseType||l)){const C=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(t)}catch(N){if(C)throw N.name==="SyntaxError"?aa.from(N,aa.ERR_BAD_RESPONSE,this,null,this.response):N}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:po.classes.FormData,Blob:po.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Et.forEach(["delete","get","head","post","put","patch"],e=>{zp.headers[e]={}});const tP=Et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nP=e=>{const t={};let r,s,l;return e&&e.split(`
`).forEach(function(C){l=C.indexOf(":"),r=C.substring(0,l).trim().toLowerCase(),s=C.substring(l+1).trim(),!(!r||t[r]&&tP[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},Jb=Symbol("internals");function np(e){return e&&String(e).trim().toLowerCase()}function em(e){return e===!1||e==null?e:Et.isArray(e)?e.map(em):String(e)}function rP(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const aP=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function bv(e,t,r,s,l){if(Et.isFunction(s))return s.call(this,t,r);if(l&&(t=r),!!Et.isString(t)){if(Et.isString(s))return t.indexOf(s)!==-1;if(Et.isRegExp(s))return s.test(t)}}function sP(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function iP(e,t){const r=Et.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(l,h,C){return this[s].call(this,t,l,h,C)},configurable:!0})})}let qo=class{constructor(t){t&&this.set(t)}set(t,r,s){const l=this;function h(N,y,u){const R=np(y);if(!R)throw new Error("header name must be a non-empty string");const v=Et.findKey(l,R);(!v||l[v]===void 0||u===!0||u===void 0&&l[v]!==!1)&&(l[v||y]=em(N))}const C=(N,y)=>Et.forEach(N,(u,R)=>h(u,R,y));if(Et.isPlainObject(t)||t instanceof this.constructor)C(t,r);else if(Et.isString(t)&&(t=t.trim())&&!aP(t))C(nP(t),r);else if(Et.isObject(t)&&Et.isIterable(t)){let N={},y,u;for(const R of t){if(!Et.isArray(R))throw TypeError("Object iterator must return a key-value pair");N[u=R[0]]=(y=N[u])?Et.isArray(y)?[...y,R[1]]:[y,R[1]]:R[1]}C(N,r)}else t!=null&&h(r,t,s);return this}get(t,r){if(t=np(t),t){const s=Et.findKey(this,t);if(s){const l=this[s];if(!r)return l;if(r===!0)return rP(l);if(Et.isFunction(r))return r.call(this,l,s);if(Et.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=np(t),t){const s=Et.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||bv(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let l=!1;function h(C){if(C=np(C),C){const N=Et.findKey(s,C);N&&(!r||bv(s,s[N],N,r))&&(delete s[N],l=!0)}}return Et.isArray(t)?t.forEach(h):h(t),l}clear(t){const r=Object.keys(this);let s=r.length,l=!1;for(;s--;){const h=r[s];(!t||bv(this,this[h],h,t,!0))&&(delete this[h],l=!0)}return l}normalize(t){const r=this,s={};return Et.forEach(this,(l,h)=>{const C=Et.findKey(s,h);if(C){r[C]=em(l),delete r[h];return}const N=t?sP(h):String(h).trim();N!==h&&delete r[h],r[N]=em(l),s[N]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Et.forEach(this,(s,l)=>{s!=null&&s!==!1&&(r[l]=t&&Et.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(l=>s.set(l)),s}static accessor(t){const s=(this[Jb]=this[Jb]={accessors:{}}).accessors,l=this.prototype;function h(C){const N=np(C);s[N]||(iP(l,C),s[N]=!0)}return Et.isArray(t)?t.forEach(h):h(t),this}};qo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Et.reduceDescriptors(qo.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});Et.freezeMethods(qo);function xv(e,t){const r=this||zp,s=t||r,l=qo.from(s.headers);let h=s.data;return Et.forEach(e,function(N){h=N.call(r,h,l.normalize(),t?t.status:void 0)}),l.normalize(),h}function Pw(e){return!!(e&&e.__CANCEL__)}function mh(e,t,r){aa.call(this,e??"canceled",aa.ERR_CANCELED,t,r),this.name="CanceledError"}Et.inherits(mh,aa,{__CANCEL__:!0});function Nw(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new aa("Request failed with status code "+r.status,[aa.ERR_BAD_REQUEST,aa.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function oP(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function cP(e,t){e=e||10;const r=new Array(e),s=new Array(e);let l=0,h=0,C;return t=t!==void 0?t:1e3,function(y){const u=Date.now(),R=s[h];C||(C=u),r[l]=y,s[l]=u;let v=h,b=0;for(;v!==l;)b+=r[v++],v=v%e;if(l=(l+1)%e,l===h&&(h=(h+1)%e),u-C<t)return;const E=R&&u-R;return E?Math.round(b*1e3/E):void 0}}function lP(e,t){let r=0,s=1e3/t,l,h;const C=(u,R=Date.now())=>{r=R,l=null,h&&(clearTimeout(h),h=null),e(...u)};return[(...u)=>{const R=Date.now(),v=R-r;v>=s?C(u,R):(l=u,h||(h=setTimeout(()=>{h=null,C(l)},s-v)))},()=>l&&C(l)]}const um=(e,t,r=3)=>{let s=0;const l=cP(50,250);return lP(h=>{const C=h.loaded,N=h.lengthComputable?h.total:void 0,y=C-s,u=l(y),R=C<=N;s=C;const v={loaded:C,total:N,progress:N?C/N:void 0,bytes:y,rate:u||void 0,estimated:u&&N&&R?(N-C)/u:void 0,event:h,lengthComputable:N!=null,[t?"download":"upload"]:!0};e(v)},r)},Xb=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},ex=e=>(...t)=>Et.asap(()=>e(...t)),uP=po.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,po.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(po.origin),po.navigator&&/(msie|trident)/i.test(po.navigator.userAgent)):()=>!0,dP=po.hasStandardBrowserEnv?{write(e,t,r,s,l,h){const C=[e+"="+encodeURIComponent(t)];Et.isNumber(r)&&C.push("expires="+new Date(r).toGMTString()),Et.isString(s)&&C.push("path="+s),Et.isString(l)&&C.push("domain="+l),h===!0&&C.push("secure"),document.cookie=C.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hP(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function pP(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Dw(e,t,r){let s=!hP(t);return e&&(s||r==!1)?pP(e,t):t}const tx=e=>e instanceof qo?{...e}:e;function dd(e,t){t=t||{};const r={};function s(u,R,v,b){return Et.isPlainObject(u)&&Et.isPlainObject(R)?Et.merge.call({caseless:b},u,R):Et.isPlainObject(R)?Et.merge({},R):Et.isArray(R)?R.slice():R}function l(u,R,v,b){if(Et.isUndefined(R)){if(!Et.isUndefined(u))return s(void 0,u,v,b)}else return s(u,R,v,b)}function h(u,R){if(!Et.isUndefined(R))return s(void 0,R)}function C(u,R){if(Et.isUndefined(R)){if(!Et.isUndefined(u))return s(void 0,u)}else return s(void 0,R)}function N(u,R,v){if(v in t)return s(u,R);if(v in e)return s(void 0,u)}const y={url:h,method:h,data:h,baseURL:C,transformRequest:C,transformResponse:C,paramsSerializer:C,timeout:C,timeoutMessage:C,withCredentials:C,withXSRFToken:C,adapter:C,responseType:C,xsrfCookieName:C,xsrfHeaderName:C,onUploadProgress:C,onDownloadProgress:C,decompress:C,maxContentLength:C,maxBodyLength:C,beforeRedirect:C,transport:C,httpAgent:C,httpsAgent:C,cancelToken:C,socketPath:C,responseEncoding:C,validateStatus:N,headers:(u,R,v)=>l(tx(u),tx(R),v,!0)};return Et.forEach(Object.keys({...e,...t}),function(R){const v=y[R]||l,b=v(e[R],t[R],R);Et.isUndefined(b)&&v!==N||(r[R]=b)}),r}const Aw=e=>{const t=dd({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:l,xsrfCookieName:h,headers:C,auth:N}=t;t.headers=C=qo.from(C),t.url=kw(Dw(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),N&&C.set("Authorization","Basic "+btoa((N.username||"")+":"+(N.password?unescape(encodeURIComponent(N.password)):"")));let y;if(Et.isFormData(r)){if(po.hasStandardBrowserEnv||po.hasStandardBrowserWebWorkerEnv)C.setContentType(void 0);else if((y=C.getContentType())!==!1){const[u,...R]=y?y.split(";").map(v=>v.trim()).filter(Boolean):[];C.setContentType([u||"multipart/form-data",...R].join("; "))}}if(po.hasStandardBrowserEnv&&(s&&Et.isFunction(s)&&(s=s(t)),s||s!==!1&&uP(t.url))){const u=l&&h&&dP.read(h);u&&C.set(l,u)}return t},fP=typeof XMLHttpRequest<"u",mP=fP&&function(e){return new Promise(function(r,s){const l=Aw(e);let h=l.data;const C=qo.from(l.headers).normalize();let{responseType:N,onUploadProgress:y,onDownloadProgress:u}=l,R,v,b,E,_;function m(){E&&E(),_&&_(),l.cancelToken&&l.cancelToken.unsubscribe(R),l.signal&&l.signal.removeEventListener("abort",R)}let k=new XMLHttpRequest;k.open(l.method.toUpperCase(),l.url,!0),k.timeout=l.timeout;function w(){if(!k)return;const g=qo.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),P={data:!N||N==="text"||N==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:g,config:e,request:k};Nw(function(D){r(D),m()},function(D){s(D),m()},P),k=null}"onloadend"in k?k.onloadend=w:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(w)},k.onabort=function(){k&&(s(new aa("Request aborted",aa.ECONNABORTED,e,k)),k=null)},k.onerror=function(){s(new aa("Network Error",aa.ERR_NETWORK,e,k)),k=null},k.ontimeout=function(){let A=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const P=l.transitional||Cw;l.timeoutErrorMessage&&(A=l.timeoutErrorMessage),s(new aa(A,P.clarifyTimeoutError?aa.ETIMEDOUT:aa.ECONNABORTED,e,k)),k=null},h===void 0&&C.setContentType(null),"setRequestHeader"in k&&Et.forEach(C.toJSON(),function(A,P){k.setRequestHeader(P,A)}),Et.isUndefined(l.withCredentials)||(k.withCredentials=!!l.withCredentials),N&&N!=="json"&&(k.responseType=l.responseType),u&&([b,_]=um(u,!0),k.addEventListener("progress",b)),y&&k.upload&&([v,E]=um(y),k.upload.addEventListener("progress",v),k.upload.addEventListener("loadend",E)),(l.cancelToken||l.signal)&&(R=g=>{k&&(s(!g||g.type?new mh(null,e,k):g),k.abort(),k=null)},l.cancelToken&&l.cancelToken.subscribe(R),l.signal&&(l.signal.aborted?R():l.signal.addEventListener("abort",R)));const F=oP(l.url);if(F&&po.protocols.indexOf(F)===-1){s(new aa("Unsupported protocol "+F+":",aa.ERR_BAD_REQUEST,e));return}k.send(h||null)})},gP=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,l;const h=function(u){if(!l){l=!0,N();const R=u instanceof Error?u:this.reason;s.abort(R instanceof aa?R:new mh(R instanceof Error?R.message:R))}};let C=t&&setTimeout(()=>{C=null,h(new aa(`timeout ${t} of ms exceeded`,aa.ETIMEDOUT))},t);const N=()=>{e&&(C&&clearTimeout(C),C=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(h):u.removeEventListener("abort",h)}),e=null)};e.forEach(u=>u.addEventListener("abort",h));const{signal:y}=s;return y.unsubscribe=()=>Et.asap(N),y}},vP=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,l;for(;s<r;)l=s+t,yield e.slice(s,l),s=l},yP=async function*(e,t){for await(const r of _P(e))yield*vP(r,t)},_P=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},nx=(e,t,r,s)=>{const l=yP(e,t);let h=0,C,N=y=>{C||(C=!0,s&&s(y))};return new ReadableStream({async pull(y){try{const{done:u,value:R}=await l.next();if(u){N(),y.close();return}let v=R.byteLength;if(r){let b=h+=v;r(b)}y.enqueue(new Uint8Array(R))}catch(u){throw N(u),u}},cancel(y){return N(y),l.return()}},{highWaterMark:2})},Bm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ow=Bm&&typeof ReadableStream=="function",bP=Bm&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Mw=(e,...t)=>{try{return!!e(...t)}catch{return!1}},xP=Ow&&Mw(()=>{let e=!1;const t=new Request(po.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),rx=64*1024,Jv=Ow&&Mw(()=>Et.isReadableStream(new Response("").body)),dm={stream:Jv&&(e=>e.body)};Bm&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!dm[t]&&(dm[t]=Et.isFunction(e[t])?r=>r[t]():(r,s)=>{throw new aa(`Response type '${t}' is not supported`,aa.ERR_NOT_SUPPORT,s)})})})(new Response);const wP=async e=>{if(e==null)return 0;if(Et.isBlob(e))return e.size;if(Et.isSpecCompliantForm(e))return(await new Request(po.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Et.isArrayBufferView(e)||Et.isArrayBuffer(e))return e.byteLength;if(Et.isURLSearchParams(e)&&(e=e+""),Et.isString(e))return(await bP(e)).byteLength},SP=async(e,t)=>{const r=Et.toFiniteNumber(e.getContentLength());return r??wP(t)},RP=Bm&&(async e=>{let{url:t,method:r,data:s,signal:l,cancelToken:h,timeout:C,onDownloadProgress:N,onUploadProgress:y,responseType:u,headers:R,withCredentials:v="same-origin",fetchOptions:b}=Aw(e);u=u?(u+"").toLowerCase():"text";let E=gP([l,h&&h.toAbortSignal()],C),_;const m=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let k;try{if(y&&xP&&r!=="get"&&r!=="head"&&(k=await SP(R,s))!==0){let P=new Request(t,{method:"POST",body:s,duplex:"half"}),H;if(Et.isFormData(s)&&(H=P.headers.get("content-type"))&&R.setContentType(H),P.body){const[D,S]=Xb(k,um(ex(y)));s=nx(P.body,rx,D,S)}}Et.isString(v)||(v=v?"include":"omit");const w="credentials"in Request.prototype;_=new Request(t,{...b,signal:E,method:r.toUpperCase(),headers:R.normalize().toJSON(),body:s,duplex:"half",credentials:w?v:void 0});let F=await fetch(_,b);const g=Jv&&(u==="stream"||u==="response");if(Jv&&(N||g&&m)){const P={};["status","statusText","headers"].forEach(x=>{P[x]=F[x]});const H=Et.toFiniteNumber(F.headers.get("content-length")),[D,S]=N&&Xb(H,um(ex(N),!0))||[];F=new Response(nx(F.body,rx,D,()=>{S&&S(),m&&m()}),P)}u=u||"text";let A=await dm[Et.findKey(dm,u)||"text"](F,e);return!g&&m&&m(),await new Promise((P,H)=>{Nw(P,H,{data:A,headers:qo.from(F.headers),status:F.status,statusText:F.statusText,config:e,request:_})})}catch(w){throw m&&m(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new aa("Network Error",aa.ERR_NETWORK,e,_),{cause:w.cause||w}):aa.from(w,w&&w.code,e,_)}}),Xv={http:zT,xhr:mP,fetch:RP};Et.forEach(Xv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ax=e=>`- ${e}`,EP=e=>Et.isFunction(e)||e===null||e===!1,jw={getAdapter:e=>{e=Et.isArray(e)?e:[e];const{length:t}=e;let r,s;const l={};for(let h=0;h<t;h++){r=e[h];let C;if(s=r,!EP(r)&&(s=Xv[(C=String(r)).toLowerCase()],s===void 0))throw new aa(`Unknown adapter '${C}'`);if(s)break;l[C||"#"+h]=s}if(!s){const h=Object.entries(l).map(([N,y])=>`adapter ${N} `+(y===!1?"is not supported by the environment":"is not available in the build"));let C=t?h.length>1?`since :
`+h.map(ax).join(`
`):" "+ax(h[0]):"as no adapter specified";throw new aa("There is no suitable adapter to dispatch the request "+C,"ERR_NOT_SUPPORT")}return s},adapters:Xv};function wv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new mh(null,e)}function sx(e){return wv(e),e.headers=qo.from(e.headers),e.data=xv.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),jw.getAdapter(e.adapter||zp.adapter)(e).then(function(s){return wv(e),s.data=xv.call(e,e.transformResponse,s),s.headers=qo.from(s.headers),s},function(s){return Pw(s)||(wv(e),s&&s.response&&(s.response.data=xv.call(e,e.transformResponse,s.response),s.response.headers=qo.from(s.response.headers))),Promise.reject(s)})}const Lw="1.11.0",zm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zm[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const ix={};zm.transitional=function(t,r,s){function l(h,C){return"[Axios v"+Lw+"] Transitional option '"+h+"'"+C+(s?". "+s:"")}return(h,C,N)=>{if(t===!1)throw new aa(l(C," has been removed"+(r?" in "+r:"")),aa.ERR_DEPRECATED);return r&&!ix[C]&&(ix[C]=!0,console.warn(l(C," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(h,C,N):!0}};zm.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function kP(e,t,r){if(typeof e!="object")throw new aa("options must be an object",aa.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let l=s.length;for(;l-- >0;){const h=s[l],C=t[h];if(C){const N=e[h],y=N===void 0||C(N,h,e);if(y!==!0)throw new aa("option "+h+" must be "+y,aa.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new aa("Unknown option "+h,aa.ERR_BAD_OPTION)}}const tm={assertOptions:kP,validators:zm},pl=tm.validators;let od=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Qb,response:new Qb}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const h=l.stack?l.stack.replace(/^.+\n/,""):"";try{s.stack?h&&!String(s.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+h):s.stack=h}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=dd(this.defaults,r);const{transitional:s,paramsSerializer:l,headers:h}=r;s!==void 0&&tm.assertOptions(s,{silentJSONParsing:pl.transitional(pl.boolean),forcedJSONParsing:pl.transitional(pl.boolean),clarifyTimeoutError:pl.transitional(pl.boolean)},!1),l!=null&&(Et.isFunction(l)?r.paramsSerializer={serialize:l}:tm.assertOptions(l,{encode:pl.function,serialize:pl.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),tm.assertOptions(r,{baseUrl:pl.spelling("baseURL"),withXsrfToken:pl.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let C=h&&Et.merge(h.common,h[r.method]);h&&Et.forEach(["delete","get","head","post","put","patch","common"],_=>{delete h[_]}),r.headers=qo.concat(C,h);const N=[];let y=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(y=y&&m.synchronous,N.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let R,v=0,b;if(!y){const _=[sx.bind(this),void 0];for(_.unshift(...N),_.push(...u),b=_.length,R=Promise.resolve(r);v<b;)R=R.then(_[v++],_[v++]);return R}b=N.length;let E=r;for(v=0;v<b;){const _=N[v++],m=N[v++];try{E=_(E)}catch(k){m.call(this,k);break}}try{R=sx.call(this,E)}catch(_){return Promise.reject(_)}for(v=0,b=u.length;v<b;)R=R.then(u[v++],u[v++]);return R}getUri(t){t=dd(this.defaults,t);const r=Dw(t.baseURL,t.url,t.allowAbsoluteUrls);return kw(r,t.params,t.paramsSerializer)}};Et.forEach(["delete","get","head","options"],function(t){od.prototype[t]=function(r,s){return this.request(dd(s||{},{method:t,url:r,data:(s||{}).data}))}});Et.forEach(["post","put","patch"],function(t){function r(s){return function(h,C,N){return this.request(dd(N||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:h,data:C}))}}od.prototype[t]=r(),od.prototype[t+"Form"]=r(!0)});let CP=class Iw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(h){r=h});const s=this;this.promise.then(l=>{if(!s._listeners)return;let h=s._listeners.length;for(;h-- >0;)s._listeners[h](l);s._listeners=null}),this.promise.then=l=>{let h;const C=new Promise(N=>{s.subscribe(N),h=N}).then(l);return C.cancel=function(){s.unsubscribe(h)},C},t(function(h,C,N){s.reason||(s.reason=new mh(h,C,N),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Iw(function(l){t=l}),cancel:t}}};function TP(e){return function(r){return e.apply(null,r)}}function PP(e){return Et.isObject(e)&&e.isAxiosError===!0}const e0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(e0).forEach(([e,t])=>{e0[t]=e});function Bw(e){const t=new od(e),r=fw(od.prototype.request,t);return Et.extend(r,od.prototype,t,{allOwnKeys:!0}),Et.extend(r,t,null,{allOwnKeys:!0}),r.create=function(l){return Bw(dd(e,l))},r}const Bs=Bw(zp);Bs.Axios=od;Bs.CanceledError=mh;Bs.CancelToken=CP;Bs.isCancel=Pw;Bs.VERSION=Lw;Bs.toFormData=Im;Bs.AxiosError=aa;Bs.Cancel=Bs.CanceledError;Bs.all=function(t){return Promise.all(t)};Bs.spread=TP;Bs.isAxiosError=PP;Bs.mergeConfig=dd;Bs.AxiosHeaders=qo;Bs.formToJSON=e=>Tw(Et.isHTMLForm(e)?new FormData(e):e);Bs.getAdapter=jw.getAdapter;Bs.HttpStatusCode=e0;Bs.default=Bs;const{Axios:Mz,AxiosError:jz,CanceledError:Lz,isCancel:Iz,CancelToken:Bz,VERSION:zz,all:Uz,Cancel:Fz,isAxiosError:Hz,spread:Vz,toFormData:qz,AxiosHeaders:$z,HttpStatusCode:Wz,formToJSON:Zz,getAdapter:Gz,mergeConfig:Yz}=Bs,er=Bs.create({baseURL:"https://quickmed-0efa714d7a9f.herokuapp.com/",headers:{"Content-Type":"application/json"}});if(typeof window<"u"){const e=localStorage.getItem("token");e&&(er.defaults.headers.Authorization=`${e}`)}const L0=e=>{if(!e)return;const t=e;localStorage.setItem("token",e),er.defaults.headers.common.Authorization=t},I0=()=>localStorage.removeItem("token"),Um=e=>{let t=e.replace(/\D/g,"");return t=t.slice(0,13),t.length<=5?t:t.length<=12?t.slice(0,5)+"-"+t.slice(5):t.slice(0,5)+"-"+t.slice(5,12)+"-"+t.slice(12)},zw=e=>/^\d{5}-\d{7}-\d{1}$/.test(e),Ku={validateToken:()=>er.get("/auth/me"),signInRequest:e=>er.post("/auth/login",e),signUpRequest:e=>er.post("/auth/signup",e),forgotPassword:e=>er.post("/auth/forgot-password",e),resetPassword:e=>er.post("/auth/reset-password",e),changePassword:e=>er.post("/auth/change-password",e),allUsers:()=>er.get("/auth/users")},Wc={validateToken:()=>er.get("/doctor/me"),signUp:e=>er.post("/doctor/signup",e),login:e=>er.post("/doctor/login",e),forgotPassword:e=>er.post("/doctor/forgot-password",e),resetPassword:e=>er.post("/doctor/reset-password",e),changePassword:e=>er.post("/doctor/change-password",e),updateProfile:e=>er.post("/doctor/picture",e,{headers:{"Content-Type":"multipart/form-data"}}),uploadDocuments:e=>er.post("/doctor/documents",e,{headers:{"Content-Type":"multipart/form-data"}}),updateDoctorProfile:e=>er.put("/doctor",e),getAllPublicDoctors:()=>er.get("/auth/doctors"),recommendationsApiSearch:e=>er.post("")},Wl={validateToken:()=>er.get("/hospital/me"),signUp:e=>er.post("/hospital/signup",e,{headers:{"Content-Type":"multipart/form-data"}}),login:e=>er.post("/hospital/login",e),forgotPassword:e=>er.post("/hospital/forgot-password",e),resetPassword:e=>er.post("/hospital/reset-password",e),changePassword:e=>er.post("/hospital/change-password",e),updateProfile:(e,t)=>er.put(`/hospital/profile/${e}`,t),getProfile:e=>er.get(`/hospital/profile/${e}`),getAllPublicHospital:()=>er.get("/auth/hospitals")},Gs={validateToken:()=>er.get("/admin/me"),login:e=>er.post("/admin/login",e),getAllDoctor:()=>er.get("/admin/doctors"),getPendingDoctors:()=>er.get("/admin/doctors/pending"),getPendingHospitals:()=>er.get("/admin/hospitals/pending"),getApprovedDoctors:()=>er.get("/admin/doctors/verified"),getApprovedHospitals:()=>er.get("/admin/hospitals/verified"),getRejectedDoctors:()=>er.get("/admin/doctors/rejected"),getRejectedHospitals:()=>er.get("/admin/hospitals/rejected"),getDoctorsStatistics:()=>er.get("/admin/doctors/stats"),getHospitalStatistics:()=>er.get("/admin/hospitals/stats"),approveDoctor:e=>er.post(`/admin/doctors/verification/${e}`,{status:"verified"}),rejectDoctor:e=>er.post(`/admin/doctors/verification/${e}`,{status:"rejected"}),approveHospital:e=>er.post(`/admin/hospitals/verification/${e}`,{status:"verified"}),rejectHospital:(e,t)=>er.post(`/admin/hospitals/verification/${e}`,{status:"rejected",reason:t}),doctorAction:(e,t)=>er.post(`/admin/doctors/action/${e}`,{action:t}),hospitalAction:(e,t)=>er.post(`/admin/hospitals/action/${e}`,{action:t}),uploadDocuments:(e,t)=>er.post(`/admin/doctor/documents/${t}`,e,{headers:{"Content-Type":"multipart/form-data"}}),uploadHospitalsDocuments:(e,t)=>er.post(`/admin/hospitals/documents/${t}`,e,{headers:{"Content-Type":"multipart/form-data"}}),doctorProfilePicture:(e,t)=>er.post(`/admin/doctor/picture/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}}),hospitalProfilePicture:(e,t)=>er.post(`/admin/hospital/picture/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}}),updateDoctorDetails:(e,t)=>er.put(`/admin/doctor/${e}`,t)},Qu={getPlatformRatings:()=>er.get("/auth/platform-rating"),addDoctorRating:(e,t)=>er.post(`/auth/doctor-rating/${t}`,e),addPlatformRating:e=>er.post("/auth/platform-rating",e),updateDoctorRating:(e,t)=>er.put(`/auth/doctor-rating/${e}`,t),deleteDoctorRating:e=>er.delete(`/auth/doctor-rating/${e}`),updatePlatformRating:e=>er.put("/auth/platform-rating",e),deletePlatformRating:()=>er.delete("/auth/platform-rating")},NP={getDoctorRecommendations:e=>er.post("/ai/doctor-recommendations",{symptoms:e})},Sv={sendMessage:async(e,t)=>(await er.post(`/chat/send/${e}`,{message:t})).data,getAllThreads:async()=>(await er.get("/chat/threads")).data,getMessageOfSingleThread:async e=>(await er.get(`/chat/messages/${e}`)).data},Zl={doctorAppointmentsSchedule:e=>er.put("/appointments/doctor/schedule",e),checkDoctorAvailabilitySlots:(e,t)=>er.get(`/appointments/doctors/${e}/slots?date=${t}`),userBookingAppointments:e=>er.post("/appointments/book",e),userAppointments:()=>er.get("/appointments/user"),userCancelAppointment:e=>er.put(`/appointments/user/${e}/cancel`),doctorAppointments:()=>er.get("/appointments/doctor"),appointmentStatus:e=>er.put(`/appointments/doctor/${e}/confirm`),doctorAppointmentsCancel:e=>er.put(`/appointments/doctor/${e}/cancel`),getSchedule:e=>er.get(`/appointments/schedule/${e}`)},Ju={validateToken:()=>Ku.validateToken(),signInRequest:e=>Ku.signInRequest(e),signUpRequest:e=>Ku.signUpRequest(e),forgotPassword:e=>Ku.forgotPassword(e),resetPassword:e=>Ku.resetPassword(e),changePassword:e=>Ku.changePassword(e),allUsers:()=>Ku.allUsers()},fl={validateToken:()=>Wc.validateToken(),signUp:e=>Wc.signUp(e),login:e=>Wc.login(e),forgotPassword:e=>Wc.forgotPassword(e),resetPassword:e=>Wc.resetPassword(e),changePassword:e=>Wc.changePassword(e),updateProfile:e=>Wc.updateProfile(e),uploadDocuments:e=>Wc.uploadDocuments(e),updateDoctorProfile:e=>Wc.updateDoctorProfile(e),getAllPublicDoctors:()=>Wc.getAllPublicDoctors(),recommendationsApiSearch:e=>Wc.recommendationsApiSearch()},Pu={validateToken:()=>Wl.validateToken(),signUp:e=>Wl.signUp(e),login:e=>Wl.login(e),forgotPassword:e=>Wl.forgotPassword(e),resetPassword:e=>Wl.resetPassword(e),changePassword:e=>Wl.changePassword(e),updateProfile:(e,t)=>{const r=localStorage.getItem("token");return Wl.updateProfile(e,t,r)},getProfile:e=>{const t=localStorage.getItem("token");return Wl.getProfile(e,t)},getAllPublicHospital:()=>Wl.getAllPublicHospital()},ni={validateToken:()=>Gs.validateToken(),login:e=>Gs.login(e),getAllDoctor:()=>Gs.getAllDoctor(),getPendingDoctors:()=>Gs.getPendingDoctors(),getPendingHospitals:()=>Gs.getPendingHospitals(),getApprovedDoctors:()=>Gs.getApprovedDoctors(),getApprovedHospitals:()=>Gs.getApprovedHospitals(),getRejectedDoctors:()=>Gs.getRejectedDoctors(),getDoctorsStatistics:()=>Gs.getDoctorsStatistics(),getHospitalStatistics:()=>Gs.getHospitalStatistics(),getRejectedHospitals:()=>Gs.getRejectedHospitals(),approveDoctor:e=>Gs.approveDoctor(e),rejectDoctor:e=>Gs.rejectDoctor(e),approveHospital:e=>Gs.approveHospital(e),rejectHospital:(e,t)=>Gs.rejectHospital(e,t),doctorAction:(e,t)=>Gs.doctorAction(e,t),hospitalAction:(e,t)=>Gs.hospitalAction(e,t),uploadDocuments:(e,t)=>Gs.uploadDocuments(e,t),uploadHospitalsDocuments:(e,t)=>Gs.uploadHospitalsDocuments(e,t),doctorProfilePicture:(e,t)=>Gs.doctorProfilePicture(e,t),hospitalProfilePicture:(e,t)=>Gs.hospitalProfilePicture(e,t),updateDoctorDetails:(e,t)=>Gs.updateDoctorDetails(e,t)},Xu={getPlatformRatings:()=>Qu.getPlatformRatings(),addDoctorRating:(e,t)=>Qu.addDoctorRating(e,t),addPlatformRating:e=>Qu.addPlatformRating(e),updateDoctorRating:(e,t)=>Qu.updateDoctorRating(e,t),updatePlatformRating:e=>Qu.updatePlatformRating(e),deleteDoctorRating:e=>Qu.deleteDoctorRating(e),deletePlatformRating:()=>Qu.deletePlatformRating()},DP={getDoctorRecommendations:e=>NP.getDoctorRecommendations(e)};function AP(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const OP=e=>{switch(e){case"success":return LP;case"info":return BP;case"warning":return IP;case"error":return zP;default:return null}},MP=Array(12).fill(0),jP=({visible:e,className:t})=>$t.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},$t.createElement("div",{className:"sonner-spinner"},MP.map((r,s)=>$t.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),LP=$t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),IP=$t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$t.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),BP=$t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$t.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zP=$t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$t.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),UP=$t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$t.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$t.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),FP=()=>{const[e,t]=$t.useState(document.hidden);return $t.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let t0=1;class HP{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:s,...l}=t,h=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:t0++,C=this.toasts.find(y=>y.id===h),N=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(h)&&this.dismissedToasts.delete(h),C?this.toasts=this.toasts.map(y=>y.id===h?(this.publish({...y,...t,id:h,title:s}),{...y,...t,id:h,dismissible:N,title:s}):y):this.addToast({title:s,...l,dismissible:N,id:h}),h},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(s=>s({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let s;r.loading!==void 0&&(s=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const l=Promise.resolve(t instanceof Function?t():t);let h=s!==void 0,C;const N=l.then(async u=>{if(C=["resolve",u],$t.isValidElement(u))h=!1,this.create({id:s,type:"default",message:u});else if(qP(u)&&!u.ok){h=!1;const v=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,b=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,_=typeof v=="object"&&!$t.isValidElement(v)?v:{message:v};this.create({id:s,type:"error",description:b,..._})}else if(u instanceof Error){h=!1;const v=typeof r.error=="function"?await r.error(u):r.error,b=typeof r.description=="function"?await r.description(u):r.description,_=typeof v=="object"&&!$t.isValidElement(v)?v:{message:v};this.create({id:s,type:"error",description:b,..._})}else if(r.success!==void 0){h=!1;const v=typeof r.success=="function"?await r.success(u):r.success,b=typeof r.description=="function"?await r.description(u):r.description,_=typeof v=="object"&&!$t.isValidElement(v)?v:{message:v};this.create({id:s,type:"success",description:b,..._})}}).catch(async u=>{if(C=["reject",u],r.error!==void 0){h=!1;const R=typeof r.error=="function"?await r.error(u):r.error,v=typeof r.description=="function"?await r.description(u):r.description,E=typeof R=="object"&&!$t.isValidElement(R)?R:{message:R};this.create({id:s,type:"error",description:v,...E})}}).finally(()=>{h&&(this.dismiss(s),s=void 0),r.finally==null||r.finally.call(r)}),y=()=>new Promise((u,R)=>N.then(()=>C[0]==="reject"?R(C[1]):u(C[1])).catch(R));return typeof s!="string"&&typeof s!="number"?{unwrap:y}:Object.assign(s,{unwrap:y})},this.custom=(t,r)=>{const s=r?.id||t0++;return this.create({jsx:t(s),id:s,...r}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ho=new HP,VP=(e,t)=>{const r=t?.id||t0++;return Ho.addToast({title:e,...t,id:r}),r},qP=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",$P=VP,WP=()=>Ho.toasts,ZP=()=>Ho.getActiveToasts(),gt=Object.assign($P,{success:Ho.success,info:Ho.info,warning:Ho.warning,error:Ho.error,custom:Ho.custom,message:Ho.message,promise:Ho.promise,dismiss:Ho.dismiss,loading:Ho.loading},{getHistory:WP,getToasts:ZP});AP("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Mf(e){return e.label!==void 0}const GP=3,YP="24px",KP="16px",ox=4e3,QP=356,JP=14,XP=45,e4=200;function ml(...e){return e.filter(Boolean).join(" ")}function t4(e){const[t,r]=e.split("-"),s=[];return t&&s.push(t),r&&s.push(r),s}const n4=e=>{var t,r,s,l,h,C,N,y,u;const{invert:R,toast:v,unstyled:b,interacting:E,setHeights:_,visibleToasts:m,heights:k,index:w,toasts:F,expanded:g,removeToast:A,defaultRichColors:P,closeButton:H,style:D,cancelButtonStyle:S,actionButtonStyle:x,className:d="",descriptionClassName:T="",duration:O,position:M,gap:I,expandByDefault:U,classNames:z,icons:$,closeButtonAriaLabel:q="Close toast"}=e,[ae,Q]=$t.useState(null),[ve,we]=$t.useState(null),[Re,me]=$t.useState(!1),[Ce,Be]=$t.useState(!1),[be,Ye]=$t.useState(!1),[Qe,Ge]=$t.useState(!1),[He,Te]=$t.useState(!1),[dt,_t]=$t.useState(0),[on,ln]=$t.useState(0),Pn=$t.useRef(v.duration||O||ox),En=$t.useRef(null),rn=$t.useRef(null),Ne=w===0,Me=w+1<=m,Ze=v.type,Ft=v.dismissible!==!1,Tt=v.className||"",St=v.descriptionClassName||"",un=$t.useMemo(()=>k.findIndex(rt=>rt.toastId===v.id)||0,[k,v.id]),Sn=$t.useMemo(()=>{var rt;return(rt=v.closeButton)!=null?rt:H},[v.closeButton,H]),Ut=$t.useMemo(()=>v.duration||O||ox,[v.duration,O]),nr=$t.useRef(0),Ar=$t.useRef(0),Sr=$t.useRef(0),Ur=$t.useRef(null),[xr,Or]=M.split("-"),Kr=$t.useMemo(()=>k.reduce((rt,ut,Zt)=>Zt>=un?rt:rt+ut.height,0),[k,un]),va=FP(),ra=v.invert||R,ua=Ze==="loading";Ar.current=$t.useMemo(()=>un*I+Kr,[un,Kr]),$t.useEffect(()=>{Pn.current=Ut},[Ut]),$t.useEffect(()=>{me(!0)},[]),$t.useEffect(()=>{const rt=rn.current;if(rt){const ut=rt.getBoundingClientRect().height;return ln(ut),_(Zt=>[{toastId:v.id,height:ut,position:v.position},...Zt]),()=>_(Zt=>Zt.filter(Pt=>Pt.toastId!==v.id))}},[_,v.id]),$t.useLayoutEffect(()=>{if(!Re)return;const rt=rn.current,ut=rt.style.height;rt.style.height="auto";const Zt=rt.getBoundingClientRect().height;rt.style.height=ut,ln(Zt),_(Pt=>Pt.find(nn=>nn.toastId===v.id)?Pt.map(nn=>nn.toastId===v.id?{...nn,height:Zt}:nn):[{toastId:v.id,height:Zt,position:v.position},...Pt])},[Re,v.title,v.description,_,v.id,v.jsx,v.action,v.cancel]);const jn=$t.useCallback(()=>{Be(!0),_t(Ar.current),_(rt=>rt.filter(ut=>ut.toastId!==v.id)),setTimeout(()=>{A(v)},e4)},[v,A,_,Ar]);$t.useEffect(()=>{if(v.promise&&Ze==="loading"||v.duration===1/0||v.type==="loading")return;let rt;return g||E||va?(()=>{if(Sr.current<nr.current){const Pt=new Date().getTime()-nr.current;Pn.current=Pn.current-Pt}Sr.current=new Date().getTime()})():(()=>{Pn.current!==1/0&&(nr.current=new Date().getTime(),rt=setTimeout(()=>{v.onAutoClose==null||v.onAutoClose.call(v,v),jn()},Pn.current))})(),()=>clearTimeout(rt)},[g,E,v,Ze,va,jn]),$t.useEffect(()=>{v.delete&&(jn(),v.onDismiss==null||v.onDismiss.call(v,v))},[jn,v.delete]);function Ha(){var rt;if($?.loading){var ut;return $t.createElement("div",{className:ml(z?.loader,v==null||(ut=v.classNames)==null?void 0:ut.loader,"sonner-loader"),"data-visible":Ze==="loading"},$.loading)}return $t.createElement(jP,{className:ml(z?.loader,v==null||(rt=v.classNames)==null?void 0:rt.loader),visible:Ze==="loading"})}const Ea=v.icon||$?.[Ze]||OP(Ze);var Qr,gr;return $t.createElement("li",{tabIndex:0,ref:rn,className:ml(d,Tt,z?.toast,v==null||(t=v.classNames)==null?void 0:t.toast,z?.default,z?.[Ze],v==null||(r=v.classNames)==null?void 0:r[Ze]),"data-sonner-toast":"","data-rich-colors":(Qr=v.richColors)!=null?Qr:P,"data-styled":!(v.jsx||v.unstyled||b),"data-mounted":Re,"data-promise":!!v.promise,"data-swiped":He,"data-removed":Ce,"data-visible":Me,"data-y-position":xr,"data-x-position":Or,"data-index":w,"data-front":Ne,"data-swiping":be,"data-dismissible":Ft,"data-type":Ze,"data-invert":ra,"data-swipe-out":Qe,"data-swipe-direction":ve,"data-expanded":!!(g||U&&Re),"data-testid":v.testId,style:{"--index":w,"--toasts-before":w,"--z-index":F.length-w,"--offset":`${Ce?dt:Ar.current}px`,"--initial-height":U?"auto":`${on}px`,...D,...v.style},onDragEnd:()=>{Ye(!1),Q(null),Ur.current=null},onPointerDown:rt=>{rt.button!==2&&(ua||!Ft||(En.current=new Date,_t(Ar.current),rt.target.setPointerCapture(rt.pointerId),rt.target.tagName!=="BUTTON"&&(Ye(!0),Ur.current={x:rt.clientX,y:rt.clientY})))},onPointerUp:()=>{var rt,ut,Zt;if(Qe||!Ft)return;Ur.current=null;const Pt=Number(((rt=rn.current)==null?void 0:rt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),sn=Number(((ut=rn.current)==null?void 0:ut.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),nn=new Date().getTime()-((Zt=En.current)==null?void 0:Zt.getTime()),et=ae==="x"?Pt:sn,On=Math.abs(et)/nn;if(Math.abs(et)>=XP||On>.11){_t(Ar.current),v.onDismiss==null||v.onDismiss.call(v,v),we(ae==="x"?Pt>0?"right":"left":sn>0?"down":"up"),jn(),Ge(!0);return}else{var Ln,Jn;(Ln=rn.current)==null||Ln.style.setProperty("--swipe-amount-x","0px"),(Jn=rn.current)==null||Jn.style.setProperty("--swipe-amount-y","0px")}Te(!1),Ye(!1),Q(null)},onPointerMove:rt=>{var ut,Zt,Pt;if(!Ur.current||!Ft||((ut=window.getSelection())==null?void 0:ut.toString().length)>0)return;const nn=rt.clientY-Ur.current.y,et=rt.clientX-Ur.current.x;var On;const Ln=(On=e.swipeDirections)!=null?On:t4(M);!ae&&(Math.abs(et)>1||Math.abs(nn)>1)&&Q(Math.abs(et)>Math.abs(nn)?"x":"y");let Jn={x:0,y:0};const vr=Qt=>1/(1.5+Math.abs(Qt)/20);if(ae==="y"){if(Ln.includes("top")||Ln.includes("bottom"))if(Ln.includes("top")&&nn<0||Ln.includes("bottom")&&nn>0)Jn.y=nn;else{const Qt=nn*vr(nn);Jn.y=Math.abs(Qt)<Math.abs(nn)?Qt:nn}}else if(ae==="x"&&(Ln.includes("left")||Ln.includes("right")))if(Ln.includes("left")&&et<0||Ln.includes("right")&&et>0)Jn.x=et;else{const Qt=et*vr(et);Jn.x=Math.abs(Qt)<Math.abs(et)?Qt:et}(Math.abs(Jn.x)>0||Math.abs(Jn.y)>0)&&Te(!0),(Zt=rn.current)==null||Zt.style.setProperty("--swipe-amount-x",`${Jn.x}px`),(Pt=rn.current)==null||Pt.style.setProperty("--swipe-amount-y",`${Jn.y}px`)}},Sn&&!v.jsx&&Ze!=="loading"?$t.createElement("button",{"aria-label":q,"data-disabled":ua,"data-close-button":!0,onClick:ua||!Ft?()=>{}:()=>{jn(),v.onDismiss==null||v.onDismiss.call(v,v)},className:ml(z?.closeButton,v==null||(s=v.classNames)==null?void 0:s.closeButton)},(gr=$?.close)!=null?gr:UP):null,(Ze||v.icon||v.promise)&&v.icon!==null&&($?.[Ze]!==null||v.icon)?$t.createElement("div",{"data-icon":"",className:ml(z?.icon,v==null||(l=v.classNames)==null?void 0:l.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||Ha():null,v.type!=="loading"?Ea:null):null,$t.createElement("div",{"data-content":"",className:ml(z?.content,v==null||(h=v.classNames)==null?void 0:h.content)},$t.createElement("div",{"data-title":"",className:ml(z?.title,v==null||(C=v.classNames)==null?void 0:C.title)},v.jsx?v.jsx:typeof v.title=="function"?v.title():v.title),v.description?$t.createElement("div",{"data-description":"",className:ml(T,St,z?.description,v==null||(N=v.classNames)==null?void 0:N.description)},typeof v.description=="function"?v.description():v.description):null),$t.isValidElement(v.cancel)?v.cancel:v.cancel&&Mf(v.cancel)?$t.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||S,onClick:rt=>{Mf(v.cancel)&&Ft&&(v.cancel.onClick==null||v.cancel.onClick.call(v.cancel,rt),jn())},className:ml(z?.cancelButton,v==null||(y=v.classNames)==null?void 0:y.cancelButton)},v.cancel.label):null,$t.isValidElement(v.action)?v.action:v.action&&Mf(v.action)?$t.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||x,onClick:rt=>{Mf(v.action)&&(v.action.onClick==null||v.action.onClick.call(v.action,rt),!rt.defaultPrevented&&jn())},className:ml(z?.actionButton,v==null||(u=v.classNames)==null?void 0:u.actionButton)},v.action.label):null)};function cx(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function r4(e,t){const r={};return[e,t].forEach((s,l)=>{const h=l===1,C=h?"--mobile-offset":"--offset",N=h?KP:YP;function y(u){["top","right","bottom","left"].forEach(R=>{r[`${C}-${R}`]=typeof u=="number"?`${u}px`:u})}typeof s=="number"||typeof s=="string"?y(s):typeof s=="object"?["top","right","bottom","left"].forEach(u=>{s[u]===void 0?r[`${C}-${u}`]=N:r[`${C}-${u}`]=typeof s[u]=="number"?`${s[u]}px`:s[u]}):y(N)}),r}const a4=$t.forwardRef(function(t,r){const{id:s,invert:l,position:h="bottom-right",hotkey:C=["altKey","KeyT"],expand:N,closeButton:y,className:u,offset:R,mobileOffset:v,theme:b="light",richColors:E,duration:_,style:m,visibleToasts:k=GP,toastOptions:w,dir:F=cx(),gap:g=JP,icons:A,containerAriaLabel:P="Notifications"}=t,[H,D]=$t.useState([]),S=$t.useMemo(()=>s?H.filter(Re=>Re.toasterId===s):H.filter(Re=>!Re.toasterId),[H,s]),x=$t.useMemo(()=>Array.from(new Set([h].concat(S.filter(Re=>Re.position).map(Re=>Re.position)))),[S,h]),[d,T]=$t.useState([]),[O,M]=$t.useState(!1),[I,U]=$t.useState(!1),[z,$]=$t.useState(b!=="system"?b:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=$t.useRef(null),ae=C.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=$t.useRef(null),ve=$t.useRef(!1),we=$t.useCallback(Re=>{D(me=>{var Ce;return(Ce=me.find(Be=>Be.id===Re.id))!=null&&Ce.delete||Ho.dismiss(Re.id),me.filter(({id:Be})=>Be!==Re.id)})},[]);return $t.useEffect(()=>Ho.subscribe(Re=>{if(Re.dismiss){requestAnimationFrame(()=>{D(me=>me.map(Ce=>Ce.id===Re.id?{...Ce,delete:!0}:Ce))});return}setTimeout(()=>{pw.flushSync(()=>{D(me=>{const Ce=me.findIndex(Be=>Be.id===Re.id);return Ce!==-1?[...me.slice(0,Ce),{...me[Ce],...Re},...me.slice(Ce+1)]:[Re,...me]})})})}),[H]),$t.useEffect(()=>{if(b!=="system"){$(b);return}if(b==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;const Re=window.matchMedia("(prefers-color-scheme: dark)");try{Re.addEventListener("change",({matches:me})=>{$(me?"dark":"light")})}catch{Re.addListener(({matches:Ce})=>{try{$(Ce?"dark":"light")}catch(Be){console.error(Be)}})}},[b]),$t.useEffect(()=>{H.length<=1&&M(!1)},[H]),$t.useEffect(()=>{const Re=me=>{var Ce;if(C.every(Ye=>me[Ye]||me.code===Ye)){var be;M(!0),(be=q.current)==null||be.focus()}me.code==="Escape"&&(document.activeElement===q.current||(Ce=q.current)!=null&&Ce.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",Re),()=>document.removeEventListener("keydown",Re)},[C]),$t.useEffect(()=>{if(q.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,ve.current=!1)}},[q.current]),$t.createElement("section",{ref:r,"aria-label":`${P} ${ae}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},x.map((Re,me)=>{var Ce;const[Be,be]=Re.split("-");return S.length?$t.createElement("ol",{key:Re,dir:F==="auto"?cx():F,tabIndex:-1,ref:q,className:u,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":Be,"data-x-position":be,style:{"--front-toast-height":`${((Ce=d[0])==null?void 0:Ce.height)||0}px`,"--width":`${QP}px`,"--gap":`${g}px`,...m,...r4(R,v)},onBlur:Ye=>{ve.current&&!Ye.currentTarget.contains(Ye.relatedTarget)&&(ve.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:Ye=>{Ye.target instanceof HTMLElement&&Ye.target.dataset.dismissible==="false"||ve.current||(ve.current=!0,Q.current=Ye.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{I||M(!1)},onDragEnd:()=>M(!1),onPointerDown:Ye=>{Ye.target instanceof HTMLElement&&Ye.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},S.filter(Ye=>!Ye.position&&me===0||Ye.position===Re).map((Ye,Qe)=>{var Ge,He;return $t.createElement(n4,{key:Ye.id,icons:A,index:Qe,toast:Ye,defaultRichColors:E,duration:(Ge=w?.duration)!=null?Ge:_,className:w?.className,descriptionClassName:w?.descriptionClassName,invert:l,visibleToasts:k,closeButton:(He=w?.closeButton)!=null?He:y,interacting:I,position:Re,style:w?.style,unstyled:w?.unstyled,classNames:w?.classNames,cancelButtonStyle:w?.cancelButtonStyle,actionButtonStyle:w?.actionButtonStyle,closeButtonAriaLabel:w?.closeButtonAriaLabel,removeToast:we,toasts:S.filter(Te=>Te.position==Ye.position),heights:d.filter(Te=>Te.position==Ye.position),setHeights:T,expandByDefault:N,gap:g,expanded:O,swipeDirections:t.swipeDirections})})):null}))}),$d={getDoctorRecommendations:async e=>{try{return await DP.getDoctorRecommendations(e)}catch(t){throw gt.error(t.response.data.data),t}},createUserMessage:e=>({id:Date.now(),type:"user",content:e.trim(),timestamp:new Date}),createBotMessage:(e,t=null,r=null)=>({id:Date.now()+1,type:"bot",content:e,timestamp:new Date,recommendations:t,apiResponse:r}),createErrorMessage:e=>({id:Date.now()+1,type:"bot",content:e,timestamp:new Date,isError:!0}),validateMessage:(e,t=11)=>e.trim().length>=t,formatUrlFriendly:e=>e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),getAnalysisSummary:e=>{const t=e?.totalDoctorsAnalyzed||e?.data?.totalDoctorsAnalyzed||e?.recommendations?.totalDoctorsAnalyzed||e?.recommendations?.analysis?.totalDoctorsAnalyzed||0,r=e?.timestamp||e?.recommendations?.timestamp||new Date;return{totalDoctors:t,timestamp:new Date(r)}}},Wd={sendMessage:(e,t)=>Sv.sendMessage(e,t),getAllThreads:()=>Sv.getAllThreads(),getMessageOfSingleThread:e=>Sv.getMessageOfSingleThread(e)},Gl={doctorAppointmentsSchedule:e=>Zl.doctorAppointmentsSchedule(e),checkDoctorAvailabilitySlots:(e,t)=>Zl.checkDoctorAvailabilitySlots(e,t),userBookingAppointments:e=>Zl.userBookingAppointments(e),userAppointments:()=>Zl.userAppointments(),userCancelAppointment:e=>Zl.userCancelAppointment(e),doctorAppointments:()=>Zl.doctorAppointments(),appointmentStatus:e=>Zl.appointmentStatus(e),doctorAppointmentsCancel:e=>Zl.doctorAppointmentsCancel(e),getSchedule:e=>Zl.getSchedule(e)},Uw=Z.createContext(),s4=({children:e})=>{const[t,r]=Z.useState(null),[s,l]=Z.useState([]),[h,C]=Z.useState(!1),[N,y]=Z.useState(!1),[u,R]=Z.useState(!0),[v,b]=Z.useState([]),[E,_]=Z.useState(null),m=async()=>{try{const{data:D}=await Ju.validateToken();r(D.data),C(!0)}catch{}finally{R(!1)}};Z.useEffect(()=>{m(),H()},[]);const k=async(D,S)=>{y(!0);try{const{data:x}=await Ju.signInRequest(D);L0(x.data.token),r(x?.data?.user),C(!0),gt.success("Login successful"),S&&S("/")}catch(x){gt.error(x.response?.data?.data||"Login failed"),_(x)}finally{y(!1)}},w=async(D,S)=>{y(!0);try{const{data:x}=await Ju.signUpRequest(D);r(x.data.user),C(!0),gt.success("Signup successful"),S&&S("/login")}catch(x){gt.error(x?.response?.data?.data||"Signup failed"),_(x)}finally{y(!1)}},F=async(D,S)=>{y(!0);try{const{data:x}=await Ju.forgotPassword(D);gt.success("Password reset email sent"),S&&S("/reset-password")}catch(x){gt.error(x.response?.data?.data||"Failed to send reset email"),_(x)}finally{y(!1)}},g=async(D,S)=>{y(!0);try{const{data:x}=await Ju.resetPassword(D);gt.success("Password reset successful"),S&&S("/login")}catch(x){gt.error(x.response?.data?.data||"Password reset failed"),_(x)}finally{y(!1)}},A=async(D,S)=>{y(!0);try{const{data:x}=await Ju.changePassword(D);gt.success("Password changed successfully"),S&&S("/profile")}catch(x){gt.error(x.response?.data?.data||"Password change failed"),_(x)}finally{y(!1)}},P=async D=>{y(!0);try{I0(),r(null),C(!1),gt.success("Logged out successfully"),D("/login")}catch(S){gt.error(S.response.data.data)}finally{y(!1)}},H=async()=>{y(!0);try{const{data:D}=await Ju.allUsers();return b(D.data),D.data}catch(D){gt.error(D.response?.data?.data||"Failed to fetch user"),_(D)}finally{y(!1)}};return o.jsx(Uw.Provider,{value:{setUser:r,user:t,isAuthenticated:h,signIn:k,signUpFun:w,signOut:P,loading:N,error:E,ForgotPassword:F,ResetPassword:g,ChangePassword:A,isAuthLoading:u,validateSession:m,allUsers:v},children:e})},si=()=>Z.useContext(Uw),Fw=Z.createContext(),i4=({children:e})=>{const[t,r]=Z.useState(null),[s,l]=Z.useState(!1),[h,C]=Z.useState(null),[N,y]=Z.useState(null),[u,R]=Z.useState([]),[v,b]=Z.useState(!1),[E,_]=Z.useState(!1),m=as(),k=async()=>{l(!0);try{const{data:O}=await fl.validateToken();r(O.data)}catch(O){O.response?.data?.data==="Your documents have been uploaded. Please wait until verification is complete or contact support at <b> quickmed0023.info@gmail.com </b>"?(b(!0),gt.error("Your Request is in pending once it complete then you will receive an email"),m("/doctor/profile")):O.response.data.data==="Please upload your documents and profile picture for verification."&&(_(!0),m("/doctor/upload-documents"))}finally{l(!1)}};Z.useEffect(()=>{k(),x()},[]);const w=async(O,M)=>{l(!0),C(null);try{const I=await fl.login(O);return L0(I.data.data.token),I.data.data.user.hasDocuments?(r(I.data.data.user),M("/")):(_(!0),M("/doctor/upload-documents")),gt.success("Login Successfully"),I.response.data.message}catch(I){gt.error(I.response.data.data)}finally{l(!1)}},F=async(O,M)=>{l(!0),C(null);try{await fl.signUp(O),gt.success("Form Submitted Successfully"),M("/doctor/login")}catch(I){gt.error(I.response.data.data)}finally{l(!1)}},g=async(O,M)=>{l(!0);try{const{data:I}=await fl.forgotPassword(O);gt.success("Password reset email sent"),M&&M("/doctor/reset-password")}catch(I){gt.error(I.response?.data?.data||"Failed to send reset email"),C(I)}finally{l(!1)}},A=async(O,M)=>{l(!0);try{const{data:I}=await fl.resetPassword(O);gt.success("Password reset successful"),M&&M("/doctor/login")}catch(I){gt.error(I.response?.data?.data||"Password reset failed"),C(I)}finally{l(!1)}},P=async(O,M)=>{l(!0);try{const{data:I}=await fl.changePassword(O);gt.success("Password changed successfully"),M&&M("/doctor/profile")}catch(I){gt.error(I.response?.data?.data||"Password change failed"),C(I)}finally{l(!1)}},H=async O=>{try{const M=await fl.updateProfile(O);return gt.success(M.data.data.message),M}catch(M){gt.error(M.response.data.data)}},D=async(O,M)=>{l(!0);try{const I=await fl.uploadDocuments(O);return M(""),gt.success("Documents Uploaded"),I}catch(I){gt.error(I.response.data.data)}finally{l(!1)}},S=async O=>{try{const M=await fl.updateDoctorProfile(O);return gt.success("Doctor Profile Updated Successfully"),M}catch(M){gt.error(M.response.data.data)}},x=async()=>{try{const O=await fl.getAllPublicDoctors();return R(O.data.data.doctors),O}catch(O){gt.error(O.response.data.data)}},d=(O,M)=>{R(I=>I.map(U=>U._id===O?{...U,rating:M}:U))},T=O=>{O("/doctor/login"),I0(),r(null)};return o.jsx(Fw.Provider,{value:{doctor:t,loading:s,error:h,DoctorLogin:w,DoctorSignUp:F,DoctorForgotPassword:g,DoctorResetPassword:A,DoctorChangePassword:P,UpdateProfilePic:H,DoctorProfileUpdate:S,DoctorDocumentUpload:D,logout:T,allDoctors:u,updateDoctorRating:d,pendingValidation:v,doctorDocumentsPending:E},children:e})},fs=()=>Z.useContext(Fw),Hw=Z.createContext(),o4=({children:e})=>{const[t,r]=Z.useState(null),[s,l]=Z.useState([]),[h,C]=Z.useState(!1),[N,y]=Z.useState(null),[u,R]=Z.useState(!1),v=async()=>{C(!0);try{const{data:g}=await Pu.validateToken();r(g.data)}catch(g){gt.error(g.response.data.data)}finally{C(!1)}};Z.useEffect(()=>{v(),F()},[]);const b=async(g,A)=>{C(!0);try{const{data:P}=await Pu.login(g);return localStorage.setItem("token",P.data.token),r(P.data.hospital),gt.success("Login Successfully"),A("/hospital/profile"),P.data.message}catch(P){gt.error(P.response.data.data||"Login failed"),y(P)}finally{C(!1)}},E=async(g,A)=>{C(!0),y(null);try{await Pu.signUp(g),gt.success("Form Submitted Successfully"),A("/hospital/login")}catch(P){gt.error(P.response.data.data)}finally{C(!1)}},_=async(g,A)=>{C(!0);try{const{data:P}=await Pu.forgotPassword(g);gt.success("Password reset email sent"),A&&A("/hospital/reset-password")}catch(P){gt.error(P.response?.data?.data||"Failed to send reset email"),y(P)}finally{C(!1)}},m=async(g,A)=>{C(!0);try{const{data:P}=await Pu.resetPassword(g);gt.success("Password reset successful"),A&&A("/hospital/login")}catch(P){gt.error(P.response?.data?.data||"Password reset failed"),y(P)}finally{C(!1)}},k=async(g,A)=>{C(!0);try{const{data:P}=await Pu.changePassword(g);gt.success("Password changed successfully"),A&&A("/hospital/profile")}catch(P){gt.error(P.response?.data?.data||"Password change failed"),y(P)}finally{C(!1)}},w=async(g,A)=>{try{const P=await Pu.updateProfile(g,A);return gt.success("Profile updated successfully"),P.data}catch(P){gt.error(P.response?.data?.data||"Update failed"),y(P)}finally{C(!1)}},F=async()=>{try{const g=await Pu.getAllPublicHospital();l(g.data.data.hospitals)}catch(g){gt.error(g.response.data.data)}finally{C(!1)}};return o.jsx(Hw.Provider,{value:{hospital:t,allPublicHospital:s,loading:h,error:N,HospitalLogin:b,HospitalSignUp:E,HospitalForgotPassword:_,HospitalResetPassword:m,HospitalChangePassword:k,HospitalProfile:w,setHospital:r},children:e})},to=()=>Z.useContext(Hw),Vw=Z.createContext(),c4=({children:e})=>{const[t,r]=Z.useState(null),[s,l]=Z.useState([]),[h,C]=Z.useState([]),[N,y]=Z.useState([]),[u,R]=Z.useState([]),[v,b]=Z.useState([]),[E,_]=Z.useState([]),[m,k]=Z.useState(null),[w,F]=Z.useState(null),[g,A]=Z.useState({}),[P,H]=Z.useState({}),D=(Te,dt)=>A(_t=>({..._t,[Te]:dt})),S=(Te,dt)=>H(_t=>({..._t,[Te]:dt})),x=async()=>{D("session",!0);try{const{data:Te}=await ni.validateToken(),dt=Te?.data;r(dt),dt?.role==="admin"&&await Q()}catch(Te){S("session",Te)}finally{D("session",!1)}},d=async(Te,dt)=>{D("login",!0);try{const _t=await ni.login(Te),on=_t?.data?.data?.token;L0(on);const ln=_t?.data?.data?.user;return r(ln),gt.success("Admin login successfully"),await Q(),dt("/admin/dashboard"),_t}catch(_t){throw gt.error(_t.response.data.data),S("login",_t),_t}finally{D("login",!1)}},T=()=>{I0(),r(null)},O=async()=>{D("pendingDoctors",!0);try{const Te=await ni.getPendingDoctors();l(Te.data.data.doctors),S("pendingDoctors",null)}catch(Te){S("pendingDoctors",Te)}finally{D("pendingDoctors",!1)}},M=async()=>{D("approvedDoctors",!0);try{const Te=await ni.getApprovedDoctors();C(Te.data.data.doctors),S("approvedDoctors",null)}catch(Te){S("approvedDoctors",Te)}finally{D("approvedDoctors",!1)}},I=async()=>{D("rejectedDoctors",!0);try{const Te=await ni.getRejectedDoctors();y(Te.data.data.doctors),S("rejectedDoctors",null)}catch(Te){S("rejectedDoctors",Te)}finally{D("rejectedDoctors",!1)}},U=async()=>{D("pendingHospitals",!0);try{const Te=await ni.getPendingHospitals();R(Te.data.data.hospitals),S("pendingHospitals",null)}catch(Te){S("pendingHospitals",Te)}finally{D("pendingHospitals",!1)}},z=async()=>{D("approvedHospitals",!0);try{const Te=await ni.getApprovedHospitals();b(Te.data.data.hospitals),S("approvedHospitals",null)}catch(Te){S("approvedHospitals",Te)}finally{D("approvedHospitals",!1)}},$=async()=>{D("rejectedHospitals",!0);try{const Te=await ni.getRejectedHospitals();_(Te.data.data.hospitals),S("rejectedHospitals",null)}catch(Te){S("rejectedHospitals",Te)}finally{D("rejectedHospitals",!1)}},q=async()=>{D("statistics",!0);try{const Te=await ni.getDoctorsStatistics();k(Te.data.data.statistics),S("statistics",null)}catch(Te){S("statistics",Te)}finally{D("statistics",!1)}},ae=async()=>{D("hospitalStatistics",!0);try{const Te=await ni.getHospitalStatistics();F(Te.data.data.statistics),S("hospitalStatistics",null)}catch(Te){S("hospitalStatistics",Te)}finally{D("hospitalStatistics",!1)}},Q=async()=>{await Promise.all([q(),ae(),O(),M(),I(),U(),z(),$()])},ve=async Te=>{try{await ni.approveDoctor(Te),gt.success("Doctor approved successfully"),await Q()}catch(dt){gt.error(dt.response.data.data)}},we=async Te=>{try{await ni.approveHospital(Te),gt.success("Hospital approved successfully"),await Q()}catch(dt){gt.error(dt.response.data.data)}},Re=async Te=>{try{await ni.rejectDoctor(Te),gt.success("Doctor rejected successfully"),await Q()}catch(dt){gt.error(dt.response.data.data)}},me=async(Te,dt)=>{try{await ni.rejectHospital(Te,dt),gt.success("Hospital rejected successfully"),await Q()}catch(_t){gt.error(_t.response.data.data)}},Ce=async(Te,dt)=>{try{await ni.doctorAction(Te,dt),gt.success("Doctor action updated successfully")}catch(_t){gt.error(_t.response.data.data)}},Be=async(Te,dt)=>{try{await ni.hospitalAction(Te,dt),gt.success("Hospital action updated successfully")}catch(_t){gt.error(_t.response.data.data)}},be=async(Te,dt)=>{try{const _t=await ni.uploadDocuments(Te,dt);return gt.success("Doctor documents uploaded"),_t}catch(_t){gt.error(_t.response.data.data)}},Ye=async(Te,dt)=>{try{const _t=await ni.uploadHospitalsDocuments(Te,dt);return gt.success("Hospital documents uploaded"),_t}catch(_t){gt.error(_t.response.data.data)}},Qe=async(Te,dt)=>{try{await ni.doctorProfilePicture(Te,dt),gt.success("Doctor profile picture updated")}catch(_t){gt.error(_t.response.data.data)}},Ge=async(Te,dt)=>{try{await ni.hospitalProfilePicture(Te,dt),gt.success("Hospital profile picture updated")}catch(_t){gt.error(_t.response.data.data)}},He=async(Te,dt)=>{try{const on=(await ni.updateDoctorDetails(Te,dt))?.data?.data?.doctor||{},ln=Pn=>({...Pn,...dt,...on});l(Pn=>Pn.map(En=>En._id===Te?ln(En):En)),C(Pn=>Pn.map(En=>En._id===Te?ln(En):En)),y(Pn=>Pn.map(En=>En._id===Te?ln(En):En)),gt.success("Doctor details updated")}catch(_t){gt.error(_t.response.data.data)}};return Z.useEffect(()=>{x()},[]),o.jsx(Vw.Provider,{value:{admin:t,login:d,logout:T,loading:g,error:P,pendingDoctors:s,approvedDoctors:h,rejectedDoctors:N,pendingHospitals:u,approvedHospitals:v,rejectedHospitals:E,statistics:m,hospitalStatistics:w,fetchPendingDoctors:O,fetchApprovedDoctors:M,fetchRejectedDoctors:I,fetchPendingHospitals:U,fetchApprovedHospitals:z,fetchRejectedHospitals:$,DoctorsStatistics:q,HospitalStatistics:ae,approveDoctor:ve,approveHospital:we,rejectDoctor:Re,rejectHospital:me,doctorAction:Ce,HospitalAction:Be,DoctorDocumentUpload:be,HospitalDocumentUpload:Ye,doctorProfilePicture:Qe,hospitalProfilePicture:Ge,updateDoctorDetails:He},children:e})},$o=()=>Z.useContext(Vw),qw=Z.createContext(),l4=({children:e})=>{const[t,r]=Z.useState([]),s=async()=>{try{const R=await Xu.getPlatformRatings();r(R.data.data)}catch(R){gt.error(R.response.data.data)}},l=async(R,v,b)=>{try{const _=(await Xu.addDoctorRating(R,v))?.data?.data?.rating??null;b&&_!==null&&b(_),gt.success("Rating added!")}catch(E){E.response?.data?.data==="You have already rated this doctor"&&gt.error("You've already rated this doctor. Update or delete instead.")}},h=async R=>{try{await Xu.addPlatformRating(R),gt.success("Rating added!")}catch(v){gt.error(v.response.data.data)}},C=async(R,v,b)=>{try{const _=(await Xu.updateDoctorRating(v,R))?.data?.data?.rating??null;b&&_!==null&&b(_),gt.success("Rating Updated Successfully!")}catch(E){gt.error(E.response?.data?.data)}},N=async R=>{try{await Xu.updatePlatformRating(R),gt.success("Platform Rating Updated Successfully!")}catch(v){gt.error(v.response.data.data)}},y=async(R,v)=>{try{const E=(await Xu.deleteDoctorRating(R))?.data?.data?.rating??null;v&&E!==null&&v(E),gt.success("Rating Deleted !")}catch(b){gt.error(b.response?.data?.data)}},u=async()=>{try{await Xu.deletePlatformRating(),gt.success("Rating Deleted Successfully")}catch{gt.error(err.response.data.data)}};return Z.useEffect(()=>{s()},[]),o.jsx(qw.Provider,{value:{ratings:t,addDoctorRating:l,addPlatformRating:h,updateDoctorRating:C,deleteDoctorRating:y,updatePlatformRating:N,deletePlatformRating:u,getPlatformRatings:s},children:e})},$w=()=>Z.useContext(qw),Ww=Z.createContext(),u4=({children:e})=>{const[t,r]=Z.useState([]),[s,l]=Z.useState(""),[h,C]=Z.useState(!1),[N,y]=Z.useState(!1),u=Z.useRef(null),R=11,v=s.trim().length>=R;Z.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[t]),Z.useEffect(()=>{N&&t.length===0&&r([{id:1,type:"bot",content:"Hello! I'm Dr. AI, your virtual health assistant. I'm here to help you find the right doctor based on your symptoms. Please describe what you're experiencing in detail (minimum 11 characters).",timestamp:new Date}])},[N,t.length]);const b=async()=>{if(!s.trim()||h||!v)return;const A=$d.createUserMessage(s);r(P=>[...P,A]),l(""),C(!0);try{const P=await $d.getDoctorRecommendations(s),H=P?.data?.data,D=$d.createBotMessage("Based on your symptoms, here's my detailed medical analysis and recommendations:",H,P?.data);r(S=>[...S,D])}catch(P){const H=$d.createErrorMessage("I apologize, but I'm having trouble processing your request right now. Please try again in a moment.");r(D=>[...D,H]),gt.error(P.response.data.data)}finally{C(!1)}},E=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),v?b():gt.error(`Please enter at least ${R} characters to describe your symptoms.`))},_=()=>{y(!0)},m=()=>{y(!1)},g={messages:t,inputMessage:s,loading:h,isModalOpen:N,chatContainerRef:u,isInputValid:v,MIN_CHARACTERS:R,setInputMessage:l,handleSendMessage:b,handleKeyDown:E,openModal:_,closeModal:m,clearChat:()=>{r([]),l("")},handleSpecialtyClick:A=>{new URLSearchParams({specialty:A,source:"ai-recommendation"}),m();const P=$d.formatUrlFriendly(A);window.location.href=`/quickMed/doctor/${P}`,gt.success(`Searching for ${A} specialists...`)},handleDoctorClick:A=>{m();const H=`/quickMed/doctor/profile/${$d.formatUrlFriendly(A.name)}-${A.doctorId}`;window.location.href=H,gt.success(`Viewing ${A.name}'s profile...`)}};return o.jsx(Ww.Provider,{value:g,children:e})},Zw=()=>{const e=Z.useContext(Ww);if(!e)throw new Error("useQuickHelp must be used within a QuickHelpProvider");return e},B0={API_KEY:"dac164d6-2dd7-4232-b6b1-05cd1a0edb83",SECRET_KEY:"fc6ce9fe05e735a33e7f3f234e1afe1ec8481389c54a94482d3b6685133a3ef3",API_BASE_URL:"https://api.videosdk.live/v2",TEMP_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiJkYWMxNjRkNi0yZGQ3LTQyMzItYjZiMS0wNWNkMWEwZWRiODMiLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTc1NDk5MjEyMSwiZXhwIjoxNzU3NTg0MTIxfQ.kplefvdyD8APGCFxaIMWvMItwhqgVKiALU3f4EulMtg"},z0=async(e,t,r=["allow_join"],s="user")=>{try{return B0.TEMP_TOKEN}catch{throw new Error("Failed to generate authentication token")}},hm=async(e,t={})=>{try{const r={region:"sg001",...t},s=await Bs.post(`${B0.API_BASE_URL}/rooms`,r,{headers:{Authorization:e,"Content-Type":"application/json"},timeout:15e3});return{roomId:s.data.roomId,meetingId:s.data.roomId,region:r.region,createdAt:new Date().toISOString()}}catch(r){throw r.response?.status===401?new Error("Invalid authentication token"):r.response?.status===429?new Error("Rate limit exceeded. Please try again later"):new Error("Failed to create meeting room")}},lx=async(e,t)=>{try{const r=await Bs.get(`${B0.API_BASE_URL}/rooms/${t}`,{headers:{Authorization:e,"Content-Type":"application/json"},timeout:1e4});return{isValid:!0,meetingId:r.data.roomId,region:r.data.region,createdAt:r.data.createdAt}}catch(r){return r.response?.status===404?{isValid:!1,error:"Meeting not found"}:{isValid:!1,error:"Unable to validate meeting"}}},Gw=Z.createContext(),d4=({children:e})=>{const[t,r]=Z.useState([]),[s,l]=Z.useState(null),[h,C]=Z.useState([]),[N,y]=Z.useState(!1),[u,R]=Z.useState(!1),[v,b]=Z.useState(!1),[E,_]=Z.useState([]),[m,k]=Z.useState([]),w=Z.useRef(null),F=async(x,d)=>{try{y(!0);const T=await Wd.sendMessage(x,d);return T.status==="success"&&(await P(),gt.success("Message sent successfully")),T}catch{gt.error("Failed to send message")}finally{y(!1)}},g=async x=>{try{y(!0);const d=x.doctorProfile&&(x.doctorProfile._id||x.doctorProfile.id)||x.doctorId||x.doctor&&(x.doctor._id||x.doctor.id)||"",T=x.doctorProfile&&x.doctorProfile.name||x.doctorName||x.doctor&&x.doctor.name||"Doctor",O=x.patientId,M=await z0(d,T),U=(await hm(M))?.roomId;if(!U)throw new Error("Failed to create meeting");k(ae=>ae.map(Q=>Q._id===x._id?{...Q,status:"confirmed",meetingId:U}:Q));const z=`/consultation/${U}/${d}`.replace(/\/+$/,""),$=`/doctor/consultation/${U}/${O}`.replace(/\/+$/,""),q=` **Consultation Confirmed!**

Your video consultation request has been approved by Dr. ${T}.

**Meeting ID:** ${U}
**Join Link:** ${z}

You can share this link with trusted devices only.`;if(O&&await Wd.sendMessage(O,q),d){const ae=` Meeting created with ${x.patientProfile?.name}.

**Meeting ID:** ${U}
**Your Join Link:** ${$}`;await Wd.sendMessage(d,ae)}gt.success("Consultation confirmed! Meeting started."),await P()}catch(d){gt.error(d.message||"Failed to confirm consultation")}finally{y(!1)}},A=async x=>{try{y(!0),k(T=>T.map(O=>O._id===x._id?{...O,status:"cancelled"}:O));const d=` **Consultation Request Declined**

Your video consultation request has been declined by Dr. ${x.doctorProfile?.name}.

Please contact the doctor directly or try booking an in-person appointment instead.`;await Wd.sendMessage(x.patientId,d),gt.success("Consultation request declined"),await P()}catch{gt.error("Failed to cancel consultation")}finally{y(!1)}},P=async({showLoading:x=!0}={})=>{try{x&&R(!0);const d=await Wd.getAllThreads();return d.status==="success"&&_(d.data),d}catch(d){throw gt.error(d.response.data.data),d}finally{x&&R(!1)}},H=async(x,{showLoading:d=!0}={})=>{try{d&&b(!0);const T=await Wd.getMessageOfSingleThread(x);return T.status==="success"&&(C(T.data),l(x)),T}catch(T){throw gt.error(T.response.data.data),T}finally{d&&b(!1)}},D=x=>{w.current&&clearInterval(w.current),w.current=setInterval(async()=>{x&&await H(x,{showLoading:!1})},5e3)},S=()=>{w.current&&(clearInterval(w.current),w.current=null)};return Z.useEffect(()=>()=>{S()},[]),o.jsx(Gw.Provider,{value:{chats:t,setChats:r,currentThread:s,messages:h,setMessages:C,threads:E,loading:N,threadsLoading:u,messagesLoading:v,consultationRequests:m,sendMessage:F,confirmConsultation:g,cancelConsultation:A,getAllThreads:P,getMessageOfSingleThread:H,startPolling:D,stopPolling:S},children:e})},Yw=()=>{const e=Z.useContext(Gw);if(!e)throw new Error("useChat must be used within a ChatProvider");return e},Kw=Z.createContext(),h4=({children:e})=>{const[t,r]=Z.useState([]),[s,l]=Z.useState([]),[h,C]=Z.useState(null),[N,y]=Z.useState([]),[u,R]=Z.useState({}),[v,b]=Z.useState({});Z.useEffect(()=>{F().catch(()=>{}),A().catch(()=>{})},[]);const E=(S,x)=>R(d=>({...d,[S]:x})),_=(S,x)=>b(d=>({...d,[S]:x})),m=async S=>{E("doctorAppointmentsSchedule",!0);try{const x=await Gl.doctorAppointmentsSchedule(S);return gt.success("Schedule updated"),x?.data}catch(x){throw _("doctorAppointmentsSchedule",x?.message||"Failed"),gt.error("Failed to update schedule"),x}finally{E("doctorAppointmentsSchedule",!1)}},k=async(S,x)=>{E("checkDoctorAvailabilitySlots",!0);try{const d=await Gl.checkDoctorAvailabilitySlots(S,x),T=d?.data?.data||d?.data||[];return y(Array.isArray(T)?T:[]),T}catch(d){throw _("checkDoctorAvailabilitySlots",d?.message||"Failed"),d}finally{E("checkDoctorAvailabilitySlots",!1)}},w=async S=>{E("userBookingAppointments",!0);try{const x=await Gl.userBookingAppointments(S);return gt.success("Appointment booked"),await F(),x?.data}catch(x){throw _("userBookingAppointments",x?.message||"Failed"),gt.error(x?.response?.data?.data||"Failed to book appointment"),x}finally{E("userBookingAppointments",!1)}},F=async()=>{E("userAppointments",!0);try{const S=await Gl.userAppointments(),x=S?.data?.data||S?.data||[];return r(Array.isArray(x)?x:[]),x}catch(S){throw _("userAppointments",S?.message||"Failed"),S}finally{E("userAppointments",!1)}},g=async S=>{E("userCancelAppointment",!0);try{await Gl.userCancelAppointment(S),gt.success("Appointment cancelled"),await F()}catch(x){throw _("userCancelAppointment",x?.message||"Failed"),gt.error("Failed to cancel appointment"),x}finally{E("userCancelAppointment",!1)}},A=async()=>{E("doctorAppointments",!0);try{const S=await Gl.doctorAppointments(),x=S?.data?.data||S?.data||[];return l(Array.isArray(x)?x:[]),x}catch(S){throw _("doctorAppointments",S?.message||"Failed"),S}finally{E("doctorAppointments",!1)}},P=async S=>{E("appointmentStatus",!0);try{await Gl.appointmentStatus(S),gt.success("Appointment updated"),await A()}catch(x){throw _("appointmentStatus",x?.message||"Failed"),gt.error("Failed to update appointment"),x}finally{E("appointmentStatus",!1)}},H=async S=>{E("doctorAppointmentsCancel",!0);try{await Gl.doctorAppointmentsCancel(S),gt.success("Appointment cancelled"),await A()}catch(x){throw _("doctorAppointmentsCancel",x?.message||"Failed"),gt.error("Failed to cancel appointment"),x}finally{E("doctorAppointmentsCancel",!1)}},D=async S=>{E("getSchedule",!0);try{const x=await Gl.getSchedule(S),d=x?.data?.schedule||x?.data?.data||x?.data||null;return C(d),d}catch(x){throw _("getSchedule",x?.message||"Failed"),x}finally{E("getSchedule",!1)}};return o.jsx(Kw.Provider,{value:{usersAppointments:t,doctorsAppointments:s,schedule:h,slots:N,loading:u,error:v,doctorAppointmentsSchedule:m,checkDoctorAvailabilitySlots:k,userBookingAppointments:w,userAppointments:F,userCancelAppointment:g,doctorAppointments:A,appointmentStatus:P,doctorAppointmentsCancel:H,getSchedule:D},children:e})},U0=()=>Z.useContext(Kw),ux=[{label:"Find Doctors",dropdown:[{label:"All Specialities",href:"/doctors"},{label:"Allergy & Immunology",href:"doctor/allergy-immunology"},{label:"Anesthesiology & Critical Care",href:"doctor/anesthesiology-critical-care"},{label:"Cardiology",href:"doctor/cardiology"},{label:"Cardiothoracic Surgery",href:"doctor/cardiothoracic-surgery"},{label:"Clinical Biochemical Genetics",href:"doctor/clinical-biochemical-genetics"},{label:"Dermatology",href:"doctor/dermatology"},{label:"Emergency Medicine",href:"doctor/emergency-medicine"},{label:"Endocrinology",href:"doctor/endocrinology"},{label:"Family Medicine",href:"doctor/family-medicine"},{label:"Forensic Pathology",href:"doctor/forensic-pathology"},{label:"Gastroenterology & Hepatology",href:"doctor/gastroenterology-hepatology"},{label:"Geriatric Medicine",href:"doctor/geriatric-medicine"},{label:"Hematology / Medical Oncology",href:"doctor/hematology-oncology"},{label:"Infectious Diseases",href:"doctor/infectious-diseases"},{label:"Internal Medicine",href:"doctor/internal-medicine"},{label:"Interventional Cardiology",href:"doctor/interventional-cardiology"},{label:"Neonatology (Pediatric Subspecialty)",href:"doctor/neonatology"},{label:"Nephrology",href:"doctor/nephrology"},{label:"Neurology",href:"doctor/neurology"},{label:"Neurosurgery",href:"doctor/neurosurgery"},{label:"Nuclear Medicine",href:"doctor/nuclear-medicine"},{label:"Obstetrics & Gynecology (OB/GYN)",href:"doctor/obstetrics-gynecology"},{label:"Ophthalmology",href:"doctor/ophthalmology"},{label:"Oral & Maxillofacial Surgery",href:"doctor/oral-maxillofacial-surgery"},{label:"Otorhinolaryngology (ENT)",href:"doctor/otorhinolaryngology"},{label:"Orthopedic Surgery",href:"doctor/orthopedic-surgery"},{label:"Palliative Medicine",href:"doctor/palliative-medicine"},{label:"Pathology (Anatomical & Clinical)",href:"doctor/pathology"},{label:"Physical Medicine & Rehabilitation (PM&R)",href:"doctor/physical-medicine-rehabilitation"},{label:"Plastic, Reconstructive & Aesthetic Surgery",href:"doctor/plastic-surgery"},{label:"Preventive & Lifestyle Medicine",href:"doctor/preventive-lifestyle-medicine"},{label:"Psychiatry & Child-Adolescent Psychiatry",href:"doctor/psychiatry"},{label:"Public Health & Occupational Medicine",href:"doctor/public-health-occupational-medicine"},{label:"Pulmonology / Respiratory Medicine",href:"doctor/pulmonology"},{label:"Radiation Oncology",href:"doctor/radiation-oncology"},{label:"Radiology & Interventional Radiology",href:"doctor/radiology"},{label:"Rheumatology",href:"doctor/rheumatology"},{label:"Sleep Medicine",href:"doctor/sleep-medicine"},{label:"Sports Medicine",href:"doctor/sports-medicine"},{label:"Thoracic Surgery",href:"doctor/thoracic-surgery"},{label:"Toxicology",href:"doctor/toxicology"},{label:"Transfusion Medicine",href:"doctor/transfusion-medicine"},{label:"Urology",href:"doctor/urology"},{label:"Vascular Surgery & Interventional Radiologists",href:"doctor/vascular-surgery"},{label:"Research Physicians",href:"doctor/research-physicians"}]},{label:"Hospitals",dropdown:[]}],p4=[{icon:"",title:"PMC Verified Doctors",description:"All doctors are verified by Pakistan Medical Commission",stat:"PMC Verified"},{icon:"",title:"16,000+ Doctors Available",description:"Largest network of qualified doctors across Pakistan",stat:"16,000+"},{icon:"",title:"24/7 Customer Support",description:"Well trained & supportive team available round the clock",stat:"24/7"},{icon:"",title:"Secure Online Payments",description:"SSL-encrypted secure payment gateway for your safety",stat:"SSL Encrypted"}],f4=[{title:"For Patients",links:[{name:"Find Doctors",href:"#"},{name:"Book Appointment",href:"#"},{name:"Online Consultation",href:"#"},{name:"Lab Tests",href:"#"},{name:"Medicines",href:"#"}]},{title:"For Doctors",links:[{name:"Join as Doctor",href:"#"},{name:"Doctor Login",href:"#"},{name:"List Your Practice",href:"#"},{name:"Doctor Resources",href:"#"}]},{title:"Pages",links:[{name:"About Us",href:"#"},{name:"Careers",href:"#"},{name:"Press",href:"#"},{name:"Blog",href:"#"},{name:"Contact Us",href:"#"}]}],m4=[{name:"Facebook",href:"#",icon:""},{name:"Twitter",href:"#",icon:""},{name:"Instagram",href:"#",icon:""},{name:"LinkedIn",href:"#",icon:""}],g4=[{title:"Fever",icon:"",description:"Find doctors for fever treatment",href:"#"},{title:"Heart Attack",icon:"",description:"Emergency cardiac care",href:"#"},{title:"Pregnancy",icon:"",description:"Prenatal and maternity care",href:"#"},{title:"High Blood Pressure",icon:"",description:"Hypertension management",href:"#"},{title:"Breathlessness",icon:"",description:"Respiratory care",href:"#"},{title:"Diarrhea",icon:"",description:"Digestive health",href:"#"},{title:"Hairfall",icon:"",description:"Hair and scalp treatment",href:"#"},{title:"Anxiety/Depression",icon:"",description:"Mental health support",href:"#"},{title:"Dengue Fever",icon:"",description:"Dengue prevention and treatment",href:"#"},{title:"Typhoid Fever",icon:"",description:"Typhoid care",href:"#"},{title:"Piles",icon:"",description:"Hemorrhoid treatment",href:"#"},{title:"Gastritis",icon:"",description:"Stomach care",href:"#"}],v4=["Allergy & Immunology -       ","Anesthesiology & Critical Care -     ","Cardiology -   ","Cardiothoracic Surgery -   ","Clinical Biochemical Genetics -   ","Dermatology -     ","Emergency Medicine -  ","Endocrinology -    ","Family Medicine -   ( )","Forensic Pathology -   ","Gastroenterology & Hepatology -      ","Geriatric Medicine -     ","Hematology / Medical Oncology -       ","Infectious Diseases -    ","Internal Medicine -     ","Interventional Cardiology -   ","Neonatology (Pediatric Subspecialty) -    ","Nephrology -     ","Neurology -      ","Neurosurgery -  (    )","Nuclear Medicine -     ","Obstetrics & Gynecology (OB/GYN) -       ","Ophthalmology -     ","Oral & Maxillofacial Surgery -     ","Otorhinolaryngology (ENT) -     ","Orthopedic Surgery -     ","Palliative Medicine -   ","Pathology (Anatomical & Clinical) -  ","Physical Medicine & Rehabilitation (PM&R) -    ","Plastic, Reconstructive & Aesthetic Surgery -    ","Preventive & Lifestyle Medicine -      ","Psychiatry & Child-Adolescent Psychiatry -  ","Public Health & Occupational Medicine -      ","Pulmonology / Respiratory Medicine -     ","Radiation Oncology -    ","Radiology & Interventional Radiology -    ","Rheumatology -      ","Sleep Medicine -     ","Sports Medicine -     ","Thoracic Surgery -       ","Toxicology -       ","Transfusion Medicine -      ","Urology -         ","Vascular Surgery & Interventional Radiologists -     ","Research Physicians -     "],Qw=["Allergy & Immunology","Anesthesiology & Critical Care","Cardiology","Cardiothoracic Surgery","Clinical Biochemical Genetics","Dermatology","Emergency Medicine","Endocrinology","Family Medicine","Forensic Pathology","Gastroenterology & Hepatology","Geriatric Medicine","Hematology / Medical Oncology","Infectious Diseases","Internal Medicine","Interventional Cardiology","Neonatology (Pediatric Subspecialty)","Nephrology","Neurology","Neurosurgery","Nuclear Medicine","Obstetrics & Gynecology (OB/GYN)","Ophthalmology","Oral & Maxillofacial Surgery","Otorhinolaryngology (ENT)","Orthopedic Surgery","Palliative Medicine","Pathology (Anatomical & Clinical)","Physical Medicine & Rehabilitation (PM&R)","Plastic, Reconstructive & Aesthetic Surgery","Preventive & Lifestyle Medicine","Psychiatry & Child-Adolescent Psychiatry","Public Health & Occupational Medicine","Pulmonology / Respiratory Medicine","Radiation Oncology","Radiology & Interventional Radiology","Rheumatology","Sleep Medicine","Sports Medicine","Thoracic Surgery","Toxicology","Transfusion Medicine","Urology","Vascular Surgery & Interventional Radiologists","Research Physicians"],Jw=[{name:"Paracetamol",slug:"paracetamol",type:"Tablet",description:"Pain reliever and fever reducer.",price:50,image:"/quickMed//images/medicine1.jpg"},{name:"Amoxicillin",slug:"amoxicillin",type:"Capsule",description:"Antibiotic for bacterial infections.",price:120,image:"/quickMed//images/medicine2.jpg"}],Xw=[{name:"Chughtai Lab",slug:"chughtai-lab",city:"Lahore",address:"Main Boulevard, Lahore",contact:"042-111-456-789",tests:120,image:"/quickMed//images/lab1.jpg"},{name:"Excel Labs",slug:"excel-labs",city:"Islamabad",address:"Blue Area, Islamabad",contact:"051-111-222-333",tests:80,image:"/quickMed//images/lab2.jpg"}],y4=["Public","Private","Semi-Private","Military","Charity"],_4=["General","Specialized","Teaching","Research","Emergency"],b4=["Male","Female","Other"],x4=["Islam","Christianity","Hinduism","Sikhism","Buddhism","Other"],w4=["MBBS","BDS"],S4={Karachi:[24.86,67.01],Lahore:[31.56,74.35],Faisalabad:[31.41,73.11],Rawalpindi:[33.6,73.04],Gujranwala:[32.16,74.18],Multan:[30.2,71.45],Hyderabad:[25.38,68.37],Peshawar:[34.01,71.54],Quetta:[30.21,67.02],Islamabad:[33.72,73.06],Sargodha:[32.08,72.67],Sialkot:[32.52,74.55],Bahawalpur:[29.39,71.67],Sukkur:[27.7,68.85],Jhang:[31.28,72.32],Sheikhupura:[31.72,73.98],Larkana:[27.56,68.21],Gujrat:[32.58,74.07],Mardan:[34.2,72.04],Kasur:[31.12,74.45],RahimYarKhan:[28.42,70.3],Sahiwal:[30.67,73.11],Okara:[30.81,73.45],WahCantonment:[33.77,72.75],DeraGhaziKhan:[30.06,70.64],MirpurKhas:[25.53,69.01],Nawabshah:[26.24,68.4],Mingora:[34.78,72.36],Chiniot:[31.72,72.98],Kamoke:[31.98,74.21],Burewala:[30.16,72.67],Jhelum:[32.94,73.72],Sadiqabad:[28.3,70.13],Jacobabad:[28.28,68.43],Shikarpur:[27.96,68.64],Khanewal:[30.31,71.82],Hafizabad:[32.07,73.68],Kohat:[33.6,71.44],Muzaffargarh:[30.07,71.18],Khanpur:[28.65,70.65],Gojra:[31.15,72.69],Bahawalnagar:[30,73.25],Muridke:[31.81,74.25],Pakpattan:[30.35,73.38],Abbottabad:[34.15,73.2],TandoAdam:[25.76,68.66],Khairpur:[27.53,68.74],Chishtian:[29.79,72.84],Daska:[32.33,74.36],Dadu:[26.73,67.77],MandiBahauddin:[32.59,73.48],AhmadpurEast:[29.15,71.26],Kamalia:[30.73,72.64],Khuzdar:[27.8,66.6],Vehari:[30.05,72.34],DeraIsmailKhan:[31.83,70.9],Wazirabad:[32.45,74.1],Nowshera:[34.01,71.99],Khushab:[32.3,72.34],Swabi:[34.1167,72.4667],Layyah:[30.9647,70.9399],Bhakkar:[31.6333,71.0667],TobaTekSingh:[30.9777,72.4861],Jaranwala:[31.3454,73.4298],Thatta:[24.7497,67.9116],Badin:[24.6552,68.8402],Umerkot:[25.3655,69.7401],Shahdadkot:[27.9,67.93],Ghotki:[28,69.34],Kotri:[25.43,68.32],TandoAllahyar:[25.462,68.7198],Moro:[26.7286,68.0234],Taxila:[33.7475,72.8073],Turbat:[26.0028,63.0506],Zhob:[31.3397,69.4477],UchSharif:[29.2389,71.0615],Benazirabad:[26.65,68],Kotli:[33.15,73.75],Bhimber:[32.9667,74.0833],Mansehra:[34.3333,73.2],Chakwal:[32.93,72.86],Mianwali:[32.5833,71.5333],Samundri:[30.4728,72.97],Sambrial:[32.5167,74.4667],Narowal:[32.1,74.8833],Mirpur:[33.15,73.75],KotAddu:[30.5333,70.95],Lodhran:[29.53,71.64],ShakarGarh:[32.3,74.52],SeraiAlamgir:[32.9,73.73],TaunsaSharif:[30.4333,70.6347],Hasilpur:[29.69,73.69],Hub:[25.0675,66.5814],DeraMuradJamali:[28.0347,67.9179],Dalbandin:[28.9,64.4333],Chaman:[30.9211,66.4506],Loralai:[29.3667,68.4167],Pasni:[25.2828,63.3328],Sibi:[29.5444,67.8778],Pishin:[30.5833,67.9997],Qalat:[29.0167,66.9],Kharian:[32.8167,73.85],Muree:[33.9011,73.3944]},Rv=["Karachi","Lahore","Islamabad","Multan","Peshawar","Faisalabad","Rawalpindi","Gujranwala","Hyderabad","Quetta","Sargodha","Sialkot","Bahawalpur","Sukkur","Jhang","Sheikhupura","Larkana","Gujrat","Mardan","Kasur","RahimYarKhan","Sahiwal","Okara","WahCantonment","DeraGhaziKhan","MirpurKhas","Nawabshah","Mingora","Chiniot","Kamoke","Burewala","Jhelum","Sadiqabad","Jacobabad","Shikarpur","Khanewal","Hafizabad","Kohat","Muzaffargarh","Khanpur","Gojra","Bahawalnagar","Muridke","Pakpattan","Abbottabad","TandoAdam","Khairpur","Chishtian","Daska","Dadu","MandiBahauddin","AhmadpurEast","Kamalia","Khuzdar","Vehari","DeraIsmailKhan","Wazirabad","Nowshera","Khushab","Swabi","Layyah","Bhakkar","TobaTekSingh","Jaranwala","Thatta","Badin","Umerkot","Shahdadkot","Ghotki","Kotri","TandoAllahyar","Moro","Taxila","Turbat","Zhob","UchSharif","Benazirabad","Kotli","Bhimber","Mansehra","Chakwal","Mianwali","Samundri","Sambrial","Narowal","Mirpur","KotAddu","Lodhran","ShakarGarh","SeraiAlamgir","TaunsaSharif","Hasilpur","Hub","DeraMuradJamali","Dalbandin","Chaman","Loralai","Pasni","Sibi","Pishin","Qalat","Kharian","Muree"],R4=["Aga Khan University Hospital","Shaukat Khanum Memorial Cancer Hospital","Lahore General Hospital","Services Hospital Lahore","Mayo Hospital Lahore","Jinnah Hospital Lahore","Combined Military Hospital (CMH)","National Institute of Cardiovascular Disease","Pakistan Institute of Medical Sciences (PIMS)","Ziauddin Hospital"],E4=(e,t)=>[{title:"Total Doctors",count:e?.total,icon:"",bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Pending Doctors Reviews",count:e?.pending,icon:"",bgColor:"bg-yellow-100",textColor:"text-yellow-600"},{title:"Approved Doctors",count:e?.verified,icon:"",bgColor:"bg-green-100",textColor:"text-green-600"},{title:"Rejected Doctors",count:e?.rejected,icon:"",bgColor:"bg-red-100",textColor:"text-red-600"},{title:"Total Hospitals",count:t?.total,icon:"",bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Pending Hospitals Reviews",count:t?.pending,icon:"",bgColor:"bg-yellow-100",textColor:"text-yellow-600"},{title:"Approved Hospitals",count:t?.verified,icon:"",bgColor:"bg-green-100",textColor:"text-green-600"},{title:"Rejected Hospitals",count:t?.rejected,icon:"",bgColor:"bg-red-100",textColor:"text-red-600"}],k4=e=>[{key:"name",label:"Name",value:e.name},{key:"email",label:"Email",value:e.email},{key:"phone",label:"Phone",value:e.phone},{key:"cnic",label:"CNIC",value:e.cnic},{key:"gender",label:"Gender",value:e.gender},{key:"address",label:"Address",value:e.fullAddress}],C4=e=>[{key:"degree",label:"Main Degree",value:e.mainDegree},{key:"speciality",label:"Speciality",value:Array.isArray(e.speciality)?e.speciality.join(", "):e.speciality},{key:"experience",label:"Experience",value:e.experience?`${e.experience} years`:"Not specified"},{key:"fee",label:"Fee",value:e.fee?`Rs. ${e.fee}`:"Not set"},{key:"hospital",label:"Hospital",value:e.hospital},{key:"pmdc",label:"PMDC Number",value:e.pmdcNumber}],eS=()=>o.jsx("svg",{className:"ml-1",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",viewBox:"0 0 16 16",children:o.jsx("path",{fillRule:"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"})}),T4=()=>o.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),P4=()=>o.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h2l.4 2M7 7h10l1 2m-1 8v2a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-2m12-8V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v2"})}),N4=()=>o.jsx("svg",{className:"ml-0",width:"14.01",height:"17.513",viewBox:"0 0 18 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M9 0C6.61392 0.00270323 4.32637 0.914156 2.63915 2.53442C0.951939 4.15468 0.0028245 6.35146 9.57508e-06 8.64286C-0.00284824 10.5154 0.634084 12.3371 1.8131 13.8286C1.8131 13.8286 2.05855 14.1389 2.09864 14.1837L9 22L15.9046 14.1798C15.9406 14.1381 16.1869 13.8286 16.1869 13.8286L16.1877 13.8262C17.3661 12.3354 18.0028 10.5145 18 8.64286C17.9972 6.35146 17.0481 4.15468 15.3608 2.53442C13.6736 0.914156 11.3861 0.00270323 9 0V0ZM9 11.7857C8.35272 11.7857 7.71997 11.6014 7.18177 11.256C6.64358 10.9107 6.2241 10.4199 5.9764 9.84558C5.72869 9.27129 5.66388 8.63937 5.79016 8.02972C5.91644 7.42006 6.22814 6.86006 6.68583 6.42052C7.14353 5.98098 7.72668 5.68166 8.36152 5.56039C8.99637 5.43912 9.6544 5.50136 10.2524 5.73924C10.8504 5.97711 11.3616 6.37994 11.7212 6.89678C12.0808 7.41362 12.2727 8.02126 12.2727 8.64286C12.2716 9.47608 11.9265 10.2749 11.313 10.864C10.6994 11.4532 9.86765 11.7847 9 11.7857V11.7857Z",fill:"#014E78"})}),dx=()=>o.jsx("svg",{width:"19",height:"19",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M19.8499 19.0004C21.7248 16.9042 22.7082 14.1594 22.5908 11.3495C22.4735 8.53962 21.2647 5.88632 19.2215 3.95379C17.1784 2.02125 14.4619 0.961924 11.6499 1.00105C8.8378 1.04017 6.1519 2.17466 4.16328 4.16328C2.17466 6.1519 1.04017 8.8378 1.00105 11.6499C0.961924 14.4619 2.02125 17.1784 3.95379 19.2215C5.88632 21.2647 8.53962 22.4735 11.3495 22.5908C14.1594 22.7082 16.9042 21.7248 19.0004 19.8499L23.9764 24.8258C24.0892 24.9377 24.2417 25.0003 24.4006 25C24.5595 24.9997 24.7117 24.9364 24.8241 24.8241C24.9364 24.7117 24.9997 24.5595 25 24.4006C25.0003 24.2417 24.9377 24.0892 24.8258 23.9764L19.8499 19.0004ZM4.99921 18.5876C4.09652 17.7009 3.37786 16.6447 2.88446 15.4795C2.39106 14.3143 2.13265 13.0632 2.12407 11.7979C2.11548 10.5326 2.35688 9.27802 2.83442 8.10625C3.31195 6.93448 4.01621 5.86857 4.90678 4.96969C5.79734 4.07082 6.85667 3.35669 8.02396 2.8683C9.19124 2.3799 10.4435 2.12686 11.7088 2.1237C12.9742 2.12054 14.2277 2.36732 15.3974 2.84988C16.5671 3.33243 17.63 4.04126 18.525 4.93567L18.5885 4.99921C19.4808 5.89149 20.1885 6.95078 20.6714 8.11659C21.1542 9.2824 21.4027 10.5319 21.4027 11.7937C21.4026 13.0556 21.154 14.3051 20.6711 15.4708C20.1882 16.6366 19.4804 17.6959 18.5881 18.5881C17.6958 19.4803 16.6365 20.1881 15.4707 20.6709C14.3049 21.1538 13.0554 21.4023 11.7936 21.4022C9.24515 21.4021 6.80115 20.3897 4.99921 18.5876Z",fill:"#014E78",stroke:"#014E78"})}),D4=()=>o.jsx("svg",{className:"w-4 h-4 text-emerald-600 group-hover:text-emerald-800 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),A4=()=>o.jsxs("svg",{className:"animate-spin h-16 w-16 text-emerald-600 drop-shadow-lg",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),O4=()=>o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})}),tS=()=>o.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),M4=()=>o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),nS=()=>o.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),j4=()=>o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),L4=()=>o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M13 7a3 3 0 11-6 0 3 3 0 016 0zm-6 8a6 6 0 1112 0H7z"})}),hx=()=>o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),I4=()=>o.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2H7a2 2 0 01-2-2v-1.586a1 1 0 01.293-.707l9.414-9.414a1 1 0 011.414 0l1.586 1.586a1 1 0 010 1.414l-9.414 9.414A1 1 0 017 19v-1.586z"})}),B4=()=>o.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),z4=()=>o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),U4=(e,t=!1)=>{const r=["Backspace","ArrowLeft","ArrowRight","Delete","Tab"],s=/^[0-9]$/.test(e.key),l=t&&e.key==="-";return s||l||r.includes(e.key)},Yr=({label:e,type:t="text",name:r,error:s,className:l="",onlyNumbers:h=!1,allowDashes:C=!1,checked:N,required:y=!1,onBlur:u,...R})=>{const v=b=>{h&&!U4(b,C)&&b.preventDefault()};return o.jsxs("div",{children:[e&&o.jsx("label",{htmlFor:r,className:"block text-emerald-700 font-medium mb-1",children:e}),o.jsx("input",{id:r,name:r,type:t,required:y,onKeyDown:v,className:`w-full px-3 py-2 border ${s?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500 ${l}`,inputMode:h?"numeric":void 0,pattern:h?C?"[0-9-]*":"[0-9]*":void 0,...R}),s&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:s})]})},px=({link:e,idx:t,openDropdown:r,setOpenDropdown:s,isMobile:l,onLinkClick:h})=>{const C=r===t,N=()=>{window.scrollTo({top:0,behavior:"smooth"}),h?.()},y=()=>s(C?null:t);return o.jsxs("div",{className:`relative ${l?"mb-2":"group"}`,onMouseEnter:l?void 0:()=>s(t),onMouseLeave:l?void 0:()=>s(null),children:[o.jsxs("button",{onClick:l?y:void 0,className:"flex items-center w-full px-3 py-2 xl:text-[15px] text-[14px] font-medium text-[#014e78] bg-white hover:bg-[#014e78] hover:text-white rounded transition-colors duration-150",children:[o.jsx("span",{children:e.label}),o.jsx(eS,{})]}),o.jsx("div",{className:`${l?C?"block":"hidden":C?"absolute left-0 w-64 min-w-fit z-20":"hidden"} bg-[#f9f9f9] mt-1 shadow-lg rounded transition-all duration-200 ${e.label==="Find Doctors"?"max-h-96 overflow-y-auto":""}`,children:e.dropdown.map((u,R)=>o.jsx(Za,{to:u.href,onClick:N,className:`block px-4 py-2.5 text-[#014e78] hover:bg-[#f1f1f1] font-medium whitespace-nowrap ${e.label==="Find Doctors"?"text-sm":"text-[15px]"} ${R===0?"border-b border-gray-200":""}`,children:u.label},u.label))})]})},Ui=({href:e,label:t,onClick:r,className:s})=>{const l=()=>{window.scrollTo({top:0,behavior:"smooth"}),r&&r()};return o.jsx(Za,{onClick:l,to:e,className:`${s} px-3 py-2 text-[15px] font-medium text-[#014e78] hover:bg-[#f7f7f7] rounded transition-colors duration-150`,children:t})},F4=(e="")=>e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-"),fx=({idx:e=0,openDropdown:t,setOpenDropdown:r,isMobile:s=!1,onLinkClick:l})=>{const h=t===e,{allPublicHospital:C=[]}=to(),N=()=>{window.scrollTo({top:0,behavior:"smooth"}),l?.()},y=Z.useMemo(()=>{const b={};return C.forEach(E=>{const _=E.city&&String(E.city).trim()||E.location&&E.location.city&&String(E.location.city).trim()||"Unknown";b[_]||(b[_]=0),b[_]+=1}),b},[C]),u=Z.useMemo(()=>Object.keys(y).sort(),[y]),R=b=>`/hospitals/${F4(b)}`,v=()=>r(h?null:e);return o.jsxs("div",{className:`relative ${s?"mb-2":"group"}`,onMouseEnter:s?void 0:()=>r(e),onMouseLeave:s?void 0:()=>r(null),children:[o.jsxs("button",{onClick:s?v:void 0,className:"flex items-center w-full px-3 py-2 xl:text-[15px] text-[14px] font-medium text-[#014e78] bg-white hover:bg-[#014e78] hover:text-white rounded transition-colors duration-150","aria-expanded":h,"aria-haspopup":"true",children:[o.jsx("span",{children:"Hospitals"}),o.jsx(eS,{})]}),o.jsxs("div",{className:`${s?h?"block":"hidden":h?"absolute left-0 w-64 min-w-fit z-20":"hidden"} bg-[#f9f9f9] mt-1 shadow-lg rounded transition-all duration-200 ${Object.keys(y).length>6?"max-h-96 overflow-y-auto":""}`,children:[o.jsx(Za,{to:"/hospitals",onClick:N,className:"block px-4 py-2.5 text-[#014e78] hover:bg-[#f1f1f1] font-medium whitespace-nowrap text-[15px] border-b border-gray-200",children:"All Hospitals (City wise)"}),u.length===0?o.jsx("div",{className:"px-4 py-3 text-sm text-gray-600",children:"No hospitals found."}):o.jsx("div",{className:"pt-0",children:u.map(b=>o.jsx(Za,{to:R(b),onClick:N,className:"block px-4 py-2.5 text-[#014e78] hover:bg-[#f1f1f1] font-medium whitespace-nowrap text-[15px]",children:b},b))})]})]})};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V4=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),mx=e=>{const t=V4(e);return t.charAt(0).toUpperCase()+t.slice(1)},rS=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),q4=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=Z.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:l="",children:h,iconNode:C,...N},y)=>Z.createElement("svg",{ref:y,...$4,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:rS("lucide",l),...!h&&!q4(N)&&{"aria-hidden":"true"},...N},[...C.map(([u,R])=>Z.createElement(u,R)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=(e,t)=>{const r=Z.forwardRef(({className:s,...l},h)=>Z.createElement(W4,{ref:h,iconNode:t,className:rS(`lucide-${H4(mx(e))}`,`lucide-${e}`,s),...l}));return r.displayName=mx(e),r};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],gx=Ja("activity",Z4);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Y4=Ja("arrow-left",G4);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Q4=Ja("arrow-right",K4);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],X4=Ja("check",J4);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vx=Ja("circle-alert",e6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],n6=Ja("circle-check-big",t6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],a6=Ja("circle-user",r6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],i6=Ja("clock",s6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],aS=Ja("cloud-upload",o6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],l6=Ja("ellipsis-vertical",c6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],d6=Ja("file-text",u6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],p6=Ja("heart",h6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],m6=Ja("image",f6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],v6=Ja("message-circle",g6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]],_6=Ja("message-square-text",y6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M5 12h14",key:"1ays0h"}]],x6=Ja("minus",b6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],S6=Ja("paperclip",w6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],E6=Ja("phone",R6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],C6=Ja("search",k6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],sS=Ja("send",T6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],N6=Ja("shield",P6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],A6=Ja("smile",D6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],n0=Ja("sparkles",O6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],dp=Ja("stethoscope",M6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],L6=Ja("trending-up",j6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],B6=Ja("user",I6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],U6=Ja("users",z6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],H6=Ja("video",F6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fm=Ja("x",V6),yx=({label:e,name:t,onChange:r,error:s,accept:l="*/*",multiple:h=!1,maxSize:C=5e6,preview:N=!1,required:y=!1})=>{const[u,R]=Z.useState(!1),[v,b]=Z.useState([]),E=A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?R(!0):A.type==="dragleave"&&R(!1)},_=A=>{A.preventDefault(),A.stopPropagation(),R(!1);const P=Array.from(A.dataTransfer.files);m(P)},m=A=>{const P=A.filter(H=>H.size>C?(alert(`File ${H.name} is too large. Maximum size is ${C/1e6}MB`),!1):!0);h?(b(H=>[...H,...P]),r(P)):(b(P),r(P[0]))},k=A=>{const P=Array.from(A.target.files);m(P)},w=A=>{if(h){const P=v.filter((H,D)=>D!==A);b(P),r(P)}else b([]),r(null)},F=A=>{if(A===0)return"0 Bytes";const P=1024,H=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(A)/Math.log(P));return parseFloat((A/Math.pow(P,D)).toFixed(2))+" "+H[D]},g=A=>A.type.startsWith("image/")?o.jsx(m6,{className:"w-4 h-4"}):o.jsx(d6,{className:"w-4 h-4"});return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e,y&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ${u?"border-emerald-400 bg-emerald-50":"border-gray-300 hover:border-gray-400"} ${s?"border-red-300 bg-red-50":""}`,onDragEnter:E,onDragLeave:E,onDragOver:E,onDrop:_,children:[o.jsx("input",{type:"file",name:t,onChange:k,accept:l,multiple:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(aS,{className:"mx-auto h-12 w-12 text-gray-400"}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx("span",{className:"font-medium text-emerald-600 hover:text-emerald-500",children:"Click to upload"})," ","or drag and drop"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[l!=="*/*"&&`Accepted formats: ${l}`,o.jsx("br",{}),"Max size: ",C/1e6,"MB"]})]})]}),s&&o.jsx("p",{className:"text-sm text-red-600",children:s}),v.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Selected Files:"}),o.jsx("div",{className:"space-y-2",children:v.map((A,P)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[g(A),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.name}),o.jsx("p",{className:"text-xs text-gray-500",children:F(A.size)})]})]}),o.jsx("button",{type:"button",onClick:()=>w(P),className:"text-red-500 hover:text-red-700",children:o.jsx(Fm,{className:"w-4 h-4"})})]},P))})]})]})},cd=({options:e=[],value:t="",onChange:r=()=>{},placeholder:s="Select",icon:l,showUrdu:h=!1,inputStyle:C="",placeholderStyle:N="",urduTextStyle:y="",englishTextStyle:u="",disabled:R=!1})=>{const[v,b]=Z.useState(!1),E=Z.useRef(null);Z.useEffect(()=>{const k=w=>{E.current&&!E.current.contains(w.target)&&b(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const _=k=>{r(k),b(!1)},m=()=>{if(h&&t.includes(" - ")){const[k,w]=t.split(" - ");return o.jsxs(o.Fragment,{children:[k,o.jsx("span",{className:"font-JameelNoori font-bold ml-2",children:w})]})}return t||s};return o.jsxs("div",{className:"relative w-full",ref:E,children:[o.jsxs("button",{type:"button",className:`w-full flex items-center h-11 border border-gray-300 rounded-md px-3 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500 ${R?"bg-gray-100 text-gray-400 cursor-not-allowed":"text-gray-700 bg-white hover:border-gray-400"}`,onClick:()=>!R&&b(k=>!k),disabled:R,children:[o.jsx("span",{className:`flex-1 text-left ${t?C:N}`,children:m()}),l&&o.jsx(l,{})]}),v&&o.jsx("div",{className:"absolute left-0 mt-1 w-full bg-white h-36 overflow-y-auto border border-gray-200 rounded shadow z-10",children:e.map(k=>{const w=h&&typeof k=="string"&&k.includes(" - "),[F,g]=w?k.split(" - "):[k];return o.jsxs("div",{className:"px-4 py-2 hover:bg-emerald-100 text-gray-700 cursor-pointer font-medium flex items-center gap-2",onClick:()=>_(k),children:[o.jsx("span",{className:u,children:F}),w&&o.jsx("span",{className:`font-JameelNoori font-bold text-xl ${y}`,children:g})]},k)})})]})},q6=({selectedSpecialties:e=[],onSpecialtiesChange:t,placeholder:r="Select specialties...",maxSelections:s=5,className:l=""})=>{const h=N=>{e.includes(N)?t(e.filter(y=>y!==N)):e.length<s&&t([...e,N])},C=N=>{t(e.filter(y=>y!==N))};return o.jsxs("div",{className:`relative ${l}`,children:[o.jsxs("label",{className:"block text-emerald-700 font-medium mb-2",children:["Specialties"," ",e.length>0&&o.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",e.length,"/",s,")"]})]}),e.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.map((N,y)=>o.jsxs("div",{onClick:()=>C(N),className:"group flex items-center gap-1 bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full text-sm font-medium hover:bg-emerald-200 cursor-pointer",children:[o.jsx("span",{className:"truncate max-w-[200px]",children:N}),o.jsx(D4,{})]},y))}),o.jsx(cd,{options:Qw,value:r,onChange:h,placeholder:r,disabled:e.length>=s}),e.length>=s&&o.jsxs("div",{className:"mt-2 text-xs text-amber-600 bg-amber-50 border border-amber-200 rounded px-3 py-2",children:["Maximum ",s," specialties allowed"]})]})},$6=({options:e=[],value:t="",onChange:r=()=>{},placeholder:s="Select or add...",icon:l,disabled:h=!1,allowAddNew:C=!1,onVerificationChange:N=()=>{},registeredOptions:y=[]})=>{const[u,R]=Z.useState(!1),[v,b]=Z.useState(""),[E,_]=Z.useState([]),m=Z.useRef(null);Z.useEffect(()=>{const P=e.filter(H=>H.toLowerCase().includes(v.toLowerCase()));_(P)},[v,e]),Z.useEffect(()=>{const P=H=>{m.current&&!m.current.contains(H.target)&&(R(!1),b(""))};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const k=P=>{const H=P.target.value;if(b(H),R(!0),C){r(H);const D=y.includes(H);N(D)}},w=P=>{if(b(""),R(!1),r(P),C){const H=y.includes(P);N(H)}},F=()=>{v.trim()&&(R(!1),r(v.trim()),N(!1),b(""))},g=C&&v.trim()&&!E.some(P=>P.toLowerCase()===v.toLowerCase()),A=t||s;return o.jsxs("div",{className:"relative w-full",ref:m,children:[u?o.jsx("input",{type:"text",value:v,onChange:k,onBlur:()=>{setTimeout(()=>R(!1),150)},placeholder:s,className:"w-full px-3 py-2 border border-emerald-200 rounded focus:outline-none focus:ring-2 focus:ring-emerald-500",autoFocus:!0}):o.jsxs("button",{type:"button",className:`w-full flex items-center h-11 border border-emerald-200 rounded-md px-3 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500 ${h?"bg-gray-100 text-gray-400 cursor-not-allowed":"text-gray-700 bg-white hover:border-emerald-400"}`,onClick:()=>!h&&R(!0),disabled:h,children:[o.jsx("span",{className:`flex-1 text-left ${t?"":"text-gray-500"}`,children:A}),l&&o.jsx(l,{})]}),u&&o.jsxs("div",{className:"absolute left-0 mt-1 w-full bg-white max-h-60 overflow-y-auto border border-gray-200 rounded shadow z-10",children:[E.map(P=>o.jsxs("div",{className:"px-4 py-2 hover:bg-emerald-100 text-gray-700 cursor-pointer font-medium flex items-center justify-between",onClick:()=>w(P),children:[o.jsx("span",{children:P}),C&&y.includes(P)&&o.jsx("span",{className:"text-xs text-emerald-600 bg-emerald-100 px-2 py-1 rounded",children:" Verified"})]},P)),g&&o.jsxs("div",{onClick:F,className:"px-4 py-2 hover:bg-gray-50 cursor-pointer flex items-center justify-between border-t border-gray-100",children:[o.jsxs("span",{children:['Add "',v,'"']}),o.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:"+ New"})]}),E.length===0&&!g&&v&&o.jsx("div",{className:"px-4 py-2 text-gray-500 text-sm",children:"No options found"})]})]})},W6=({onCitySelect:e})=>{const[t,r]=Z.useState(""),[s,l]=Z.useState(""),[h,C]=Z.useState([]),N=Z.useRef(null),y=as(),{allDoctors:u}=fs(),[R,v]=Z.useState(""),[b,E]=Z.useState([]),_=Z.useRef(null);Z.useEffect(()=>{const S=x=>{N.current&&!N.current.contains(x.target)&&C([]),_.current&&!_.current.contains(x.target)&&E([])};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const m=S=>{const x=S.target.value;r(x),C(x?Rv.filter(d=>d.toLowerCase().includes(x.toLowerCase())):[])},k=S=>{r(S),C([]);const x=S4[S]||[24.8607,67.0011];e?.(S,x)},w=S=>{if(S.key==="Enter"){const x=h[0]||Rv.includes(t)&&t;x&&k(x)}},F=S=>S.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/\//g,"-").replace(/&/g,"and"),g=S=>{if(l(S),!t)return;const x=typeof S=="string"&&S.includes(" - ")?S.split(" - ")[0]:S,d=F(x||"");d&&y(`/doctor/${d}?city=${encodeURIComponent(t)}`)},A=(S,x)=>`${(S||"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${x}`,P=S=>{const x=S.target.value;if(v(x),!x){E([]);return}const d=x.toLowerCase(),T=(u||[]).filter(O=>(O?.name||"").toLowerCase().includes(d)).filter(O=>{if(!t)return!0;const M=(O.city||O.fullAddress||"").toString().toLowerCase();return O.city?O.city.toLowerCase()===t.toLowerCase():M.includes(t.toLowerCase())}).slice(0,20);E(T)},H=S=>{if(S.key==="Enter"&&b.length>0){const x=b[0],d=A(x.name,x._id);y(`/doctor/profile/${d}`)}},D=S=>{const x=A(S.name,S._id);v(""),E([]),y(`/doctor/profile/${x}`)};return o.jsxs("div",{className:"p-6 max-w-4xl mx-auto mb-6 mt-10",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-4",children:[o.jsxs("div",{className:"relative w-full md:w-1/2",ref:N,children:[o.jsx("input",{type:"text",value:t,placeholder:"Enter City",onChange:m,onFocus:()=>C(Rv),onKeyDown:w,autoComplete:"off",className:"w-full h-11 border bg-white px-3 pr-12 py-2 rounded-md text-gray-700 font-medium border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("div",{className:"absolute right-0 top-0 h-full w-10 flex items-center justify-center bg-[#f2fafe] border-l border-gray-300 rounded-e-md",children:o.jsx(N4,{})}),h.length>0&&o.jsx("div",{className:"absolute left-0 mt-1 w-full max-h-32 overflow-y-auto bg-white border border-gray-200 rounded shadow z-50",children:h.map(S=>o.jsx("div",{onMouseDown:()=>k(S),className:"px-4 py-2 cursor-pointer hover:bg-blue-100 text-gray-700 font-medium",children:S},S))})]}),o.jsxs("div",{className:"relative w-full md:w-[500px]",children:[o.jsx(cd,{options:v4,value:s,onChange:g,placeholder:"Search by Doctors",showUrdu:!0,inputStyle:"text-[12px]",placeholderStyle:"text-[16px]"}),o.jsx("div",{className:"absolute right-0 top-0 h-full w-10 flex items-center justify-center bg-[#f2fafe] border-l border-gray-300 rounded-e-md pointer-events-none",children:o.jsx(dx,{})})]})]}),o.jsx("div",{className:"mt-3",children:o.jsxs("div",{className:"relative w-full",ref:_,children:[o.jsx("input",{type:"text",value:R,placeholder:"Search doctor by name",onChange:P,onKeyDown:H,autoComplete:"off",className:"w-full h-11 border bg-white px-3 pr-12 py-2 rounded-md text-gray-700 font-medium border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("div",{className:"absolute right-0 top-0 h-full w-10 flex items-center justify-center bg-[#f2fafe] border-l border-gray-300 rounded-e-md pointer-events-none",children:o.jsx(dx,{})}),b.length>0&&o.jsx("div",{className:"absolute left-0 mt-1 w-full max-h-40 overflow-y-auto bg-white border border-gray-200 rounded shadow z-50",children:b.map(S=>o.jsxs("div",{onMouseDown:()=>D(S),className:"px-4 py-2 cursor-pointer hover:bg-blue-100 text-gray-700 font-medium flex items-center justify-between",children:[o.jsx("span",{children:S.name}),o.jsx("span",{className:"text-xs text-gray-500",children:(Array.isArray(S.speciality)?S.speciality[0]:S.speciality)||""})]},S._id))})]})})]})},iS=()=>o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(A4,{}),o.jsx("span",{className:"mt-4 text-lg font-semibold text-emerald-700 animate-pulse",children:"Loading..."})]})});function _x(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function oS(...e){return t=>{let r=!1;const s=e.map(l=>{const h=_x(l,t);return!r&&typeof h=="function"&&(r=!0),h});if(r)return()=>{for(let l=0;l<s.length;l++){const h=s[l];typeof h=="function"?h():_x(e[l],null)}}}}function Wo(...e){return Z.useCallback(oS(...e),e)}function F0(e){const t=G6(e),r=Z.forwardRef((s,l)=>{const{children:h,...C}=s,N=Z.Children.toArray(h),y=N.find(K6);if(y){const u=y.props.children,R=N.map(v=>v===y?Z.Children.count(u)>1?Z.Children.only(null):Z.isValidElement(u)?u.props.children:null:v);return o.jsx(t,{...C,ref:l,children:Z.isValidElement(u)?Z.cloneElement(u,void 0,R):null})}return o.jsx(t,{...C,ref:l,children:h})});return r.displayName=`${e}.Slot`,r}var Z6=F0("Slot");function G6(e){const t=Z.forwardRef((r,s)=>{const{children:l,...h}=r;if(Z.isValidElement(l)){const C=J6(l),N=Q6(h,l.props);return l.type!==Z.Fragment&&(N.ref=s?oS(s,C):C),Z.cloneElement(l,N)}return Z.Children.count(l)>1?Z.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Y6=Symbol("radix.slottable");function K6(e){return Z.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Y6}function Q6(e,t){const r={...t};for(const s in t){const l=e[s],h=t[s];/^on[A-Z]/.test(s)?l&&h?r[s]=(...N)=>{const y=h(...N);return l(...N),y}:l&&(r[s]=l):s==="style"?r[s]={...l,...h}:s==="className"&&(r[s]=[l,h].filter(Boolean).join(" "))}return{...e,...r}}function J6(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function cS(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=cS(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function lS(){for(var e,t,r=0,s="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=cS(e))&&(s&&(s+=" "),s+=t);return s}const bx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,xx=lS,X6=(e,t)=>r=>{var s;if(t?.variants==null)return xx(e,r?.class,r?.className);const{variants:l,defaultVariants:h}=t,C=Object.keys(l).map(u=>{const R=r?.[u],v=h?.[u];if(R===null)return null;const b=bx(R)||bx(v);return l[u][b]}),N=r&&Object.entries(r).reduce((u,R)=>{let[v,b]=R;return b===void 0||(u[v]=b),u},{}),y=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,R)=>{let{class:v,className:b,...E}=R;return Object.entries(E).every(_=>{let[m,k]=_;return Array.isArray(k)?k.includes({...h,...N}[m]):{...h,...N}[m]===k})?[...u,v,b]:u},[]);return xx(e,C,y,r?.class,r?.className)},H0="-",eN=e=>{const t=nN(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:C=>{const N=C.split(H0);return N[0]===""&&N.length!==1&&N.shift(),uS(N,t)||tN(C)},getConflictingClassGroupIds:(C,N)=>{const y=r[C]||[];return N&&s[C]?[...y,...s[C]]:y}}},uS=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),l=s?uS(e.slice(1),s):void 0;if(l)return l;if(t.validators.length===0)return;const h=e.join(H0);return t.validators.find(({validator:C})=>C(h))?.classGroupId},wx=/^\[(.+)\]$/,tN=e=>{if(wx.test(e)){const t=wx.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},nN=e=>{const{theme:t,classGroups:r}=e,s={nextPart:new Map,validators:[]};for(const l in r)r0(r[l],s,l,t);return s},r0=(e,t,r,s)=>{e.forEach(l=>{if(typeof l=="string"){const h=l===""?t:Sx(t,l);h.classGroupId=r;return}if(typeof l=="function"){if(rN(l)){r0(l(s),t,r,s);return}t.validators.push({validator:l,classGroupId:r});return}Object.entries(l).forEach(([h,C])=>{r0(C,Sx(t,h),r,s)})})},Sx=(e,t)=>{let r=e;return t.split(H0).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},rN=e=>e.isThemeGetter,aN=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const l=(h,C)=>{r.set(h,C),t++,t>e&&(t=0,s=r,r=new Map)};return{get(h){let C=r.get(h);if(C!==void 0)return C;if((C=s.get(h))!==void 0)return l(h,C),C},set(h,C){r.has(h)?r.set(h,C):l(h,C)}}},a0="!",s0=":",sN=s0.length,iN=e=>{const{prefix:t,experimentalParseClassName:r}=e;let s=l=>{const h=[];let C=0,N=0,y=0,u;for(let _=0;_<l.length;_++){let m=l[_];if(C===0&&N===0){if(m===s0){h.push(l.slice(y,_)),y=_+sN;continue}if(m==="/"){u=_;continue}}m==="["?C++:m==="]"?C--:m==="("?N++:m===")"&&N--}const R=h.length===0?l:l.substring(y),v=oN(R),b=v!==R,E=u&&u>y?u-y:void 0;return{modifiers:h,hasImportantModifier:b,baseClassName:v,maybePostfixModifierPosition:E}};if(t){const l=t+s0,h=s;s=C=>C.startsWith(l)?h(C.substring(l.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:C,maybePostfixModifierPosition:void 0}}if(r){const l=s;s=h=>r({className:h,parseClassName:l})}return s},oN=e=>e.endsWith(a0)?e.substring(0,e.length-1):e.startsWith(a0)?e.substring(1):e,cN=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const l=[];let h=[];return s.forEach(C=>{C[0]==="["||t[C]?(l.push(...h.sort(),C),h=[]):h.push(C)}),l.push(...h.sort()),l}},lN=e=>({cache:aN(e.cacheSize),parseClassName:iN(e),sortModifiers:cN(e),...eN(e)}),uN=/\s+/,dN=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:l,sortModifiers:h}=t,C=[],N=e.trim().split(uN);let y="";for(let u=N.length-1;u>=0;u-=1){const R=N[u],{isExternal:v,modifiers:b,hasImportantModifier:E,baseClassName:_,maybePostfixModifierPosition:m}=r(R);if(v){y=R+(y.length>0?" "+y:y);continue}let k=!!m,w=s(k?_.substring(0,m):_);if(!w){if(!k){y=R+(y.length>0?" "+y:y);continue}if(w=s(_),!w){y=R+(y.length>0?" "+y:y);continue}k=!1}const F=h(b).join(":"),g=E?F+a0:F,A=g+w;if(C.includes(A))continue;C.push(A);const P=l(w,k);for(let H=0;H<P.length;++H){const D=P[H];C.push(g+D)}y=R+(y.length>0?" "+y:y)}return y};function hN(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=dS(t))&&(s&&(s+=" "),s+=r);return s}const dS=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=dS(e[s]))&&(r&&(r+=" "),r+=t);return r};function pN(e,...t){let r,s,l,h=C;function C(y){const u=t.reduce((R,v)=>v(R),e());return r=lN(u),s=r.cache.get,l=r.cache.set,h=N,N(y)}function N(y){const u=s(y);if(u)return u;const R=dN(y,r);return l(y,R),R}return function(){return h(hN.apply(null,arguments))}}const Ei=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},hS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,pS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fN=/^\d+\/\d+$/,mN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,yN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_N=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zd=e=>fN.test(e),fa=e=>!!e&&!Number.isNaN(Number(e)),Nu=e=>!!e&&Number.isInteger(Number(e)),Ev=e=>e.endsWith("%")&&fa(e.slice(0,-1)),Yl=e=>mN.test(e),bN=()=>!0,xN=e=>gN.test(e)&&!vN.test(e),fS=()=>!1,wN=e=>yN.test(e),SN=e=>_N.test(e),RN=e=>!pr(e)&&!fr(e),EN=e=>gh(e,vS,fS),pr=e=>hS.test(e),ed=e=>gh(e,yS,xN),kv=e=>gh(e,NN,fa),Rx=e=>gh(e,mS,fS),kN=e=>gh(e,gS,SN),jf=e=>gh(e,_S,wN),fr=e=>pS.test(e),rp=e=>vh(e,yS),CN=e=>vh(e,DN),Ex=e=>vh(e,mS),TN=e=>vh(e,vS),PN=e=>vh(e,gS),Lf=e=>vh(e,_S,!0),gh=(e,t,r)=>{const s=hS.exec(e);return s?s[1]?t(s[1]):r(s[2]):!1},vh=(e,t,r=!1)=>{const s=pS.exec(e);return s?s[1]?t(s[1]):r:!1},mS=e=>e==="position"||e==="percentage",gS=e=>e==="image"||e==="url",vS=e=>e==="length"||e==="size"||e==="bg-size",yS=e=>e==="length",NN=e=>e==="number",DN=e=>e==="family-name",_S=e=>e==="shadow",AN=()=>{const e=Ei("color"),t=Ei("font"),r=Ei("text"),s=Ei("font-weight"),l=Ei("tracking"),h=Ei("leading"),C=Ei("breakpoint"),N=Ei("container"),y=Ei("spacing"),u=Ei("radius"),R=Ei("shadow"),v=Ei("inset-shadow"),b=Ei("text-shadow"),E=Ei("drop-shadow"),_=Ei("blur"),m=Ei("perspective"),k=Ei("aspect"),w=Ei("ease"),F=Ei("animate"),g=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...A(),fr,pr],H=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],S=()=>[fr,pr,y],x=()=>[Zd,"full","auto",...S()],d=()=>[Nu,"none","subgrid",fr,pr],T=()=>["auto",{span:["full",Nu,fr,pr]},Nu,fr,pr],O=()=>[Nu,"auto",fr,pr],M=()=>["auto","min","max","fr",fr,pr],I=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],U=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...S()],$=()=>[Zd,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],q=()=>[e,fr,pr],ae=()=>[...A(),Ex,Rx,{position:[fr,pr]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ve=()=>["auto","cover","contain",TN,EN,{size:[fr,pr]}],we=()=>[Ev,rp,ed],Re=()=>["","none","full",u,fr,pr],me=()=>["",fa,rp,ed],Ce=()=>["solid","dashed","dotted","double"],Be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>[fa,Ev,Ex,Rx],Ye=()=>["","none",_,fr,pr],Qe=()=>["none",fa,fr,pr],Ge=()=>["none",fa,fr,pr],He=()=>[fa,fr,pr],Te=()=>[Zd,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yl],breakpoint:[Yl],color:[bN],container:[Yl],"drop-shadow":[Yl],ease:["in","out","in-out"],font:[RN],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yl],shadow:[Yl],spacing:["px",fa],text:[Yl],"text-shadow":[Yl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Zd,pr,fr,k]}],container:["container"],columns:[{columns:[fa,pr,fr,N]}],"break-after":[{"break-after":g()}],"break-before":[{"break-before":g()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:x()}],"inset-x":[{"inset-x":x()}],"inset-y":[{"inset-y":x()}],start:[{start:x()}],end:[{end:x()}],top:[{top:x()}],right:[{right:x()}],bottom:[{bottom:x()}],left:[{left:x()}],visibility:["visible","invisible","collapse"],z:[{z:[Nu,"auto",fr,pr]}],basis:[{basis:[Zd,"full","auto",N,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[fa,Zd,"auto","initial","none",pr]}],grow:[{grow:["",fa,fr,pr]}],shrink:[{shrink:["",fa,fr,pr]}],order:[{order:[Nu,"first","last","none",fr,pr]}],"grid-cols":[{"grid-cols":d()}],"col-start-end":[{col:T()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":d()}],"row-start-end":[{row:T()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...I(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...I()]}],"align-items":[{items:[...U(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...U(),{baseline:["","last"]}]}],"place-content":[{"place-content":I()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[N,"screen",...$()]}],"min-w":[{"min-w":[N,"screen","none",...$()]}],"max-w":[{"max-w":[N,"screen","none","prose",{screen:[C]},...$()]}],h:[{h:["screen","lh",...$()]}],"min-h":[{"min-h":["screen","lh","none",...$()]}],"max-h":[{"max-h":["screen","lh",...$()]}],"font-size":[{text:["base",r,rp,ed]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,fr,kv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ev,pr]}],"font-family":[{font:[CN,pr,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,fr,pr]}],"line-clamp":[{"line-clamp":[fa,"none",fr,kv]}],leading:[{leading:[h,...S()]}],"list-image":[{"list-image":["none",fr,pr]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",fr,pr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[fa,"from-font","auto",fr,ed]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[fa,"auto",fr,pr]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fr,pr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fr,pr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ae()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:ve()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Nu,fr,pr],radial:["",fr,pr],conic:[Nu,fr,pr]},PN,kN]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:we()}],"gradient-via-pos":[{via:we()}],"gradient-to-pos":[{to:we()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:Re()}],"rounded-s":[{"rounded-s":Re()}],"rounded-e":[{"rounded-e":Re()}],"rounded-t":[{"rounded-t":Re()}],"rounded-r":[{"rounded-r":Re()}],"rounded-b":[{"rounded-b":Re()}],"rounded-l":[{"rounded-l":Re()}],"rounded-ss":[{"rounded-ss":Re()}],"rounded-se":[{"rounded-se":Re()}],"rounded-ee":[{"rounded-ee":Re()}],"rounded-es":[{"rounded-es":Re()}],"rounded-tl":[{"rounded-tl":Re()}],"rounded-tr":[{"rounded-tr":Re()}],"rounded-br":[{"rounded-br":Re()}],"rounded-bl":[{"rounded-bl":Re()}],"border-w":[{border:me()}],"border-w-x":[{"border-x":me()}],"border-w-y":[{"border-y":me()}],"border-w-s":[{"border-s":me()}],"border-w-e":[{"border-e":me()}],"border-w-t":[{"border-t":me()}],"border-w-r":[{"border-r":me()}],"border-w-b":[{"border-b":me()}],"border-w-l":[{"border-l":me()}],"divide-x":[{"divide-x":me()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":me()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ce(),"hidden","none"]}],"divide-style":[{divide:[...Ce(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...Ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[fa,fr,pr]}],"outline-w":[{outline:["",fa,rp,ed]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",R,Lf,jf]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",v,Lf,jf]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:me()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[fa,ed]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":me()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",b,Lf,jf]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[fa,fr,pr]}],"mix-blend":[{"mix-blend":[...Be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[fa]}],"mask-image-linear-from-pos":[{"mask-linear-from":be()}],"mask-image-linear-to-pos":[{"mask-linear-to":be()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":be()}],"mask-image-t-to-pos":[{"mask-t-to":be()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":be()}],"mask-image-r-to-pos":[{"mask-r-to":be()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":be()}],"mask-image-b-to-pos":[{"mask-b-to":be()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":be()}],"mask-image-l-to-pos":[{"mask-l-to":be()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":be()}],"mask-image-x-to-pos":[{"mask-x-to":be()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":be()}],"mask-image-y-to-pos":[{"mask-y-to":be()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[fr,pr]}],"mask-image-radial-from-pos":[{"mask-radial-from":be()}],"mask-image-radial-to-pos":[{"mask-radial-to":be()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[fa]}],"mask-image-conic-from-pos":[{"mask-conic-from":be()}],"mask-image-conic-to-pos":[{"mask-conic-to":be()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ae()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:ve()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",fr,pr]}],filter:[{filter:["","none",fr,pr]}],blur:[{blur:Ye()}],brightness:[{brightness:[fa,fr,pr]}],contrast:[{contrast:[fa,fr,pr]}],"drop-shadow":[{"drop-shadow":["","none",E,Lf,jf]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",fa,fr,pr]}],"hue-rotate":[{"hue-rotate":[fa,fr,pr]}],invert:[{invert:["",fa,fr,pr]}],saturate:[{saturate:[fa,fr,pr]}],sepia:[{sepia:["",fa,fr,pr]}],"backdrop-filter":[{"backdrop-filter":["","none",fr,pr]}],"backdrop-blur":[{"backdrop-blur":Ye()}],"backdrop-brightness":[{"backdrop-brightness":[fa,fr,pr]}],"backdrop-contrast":[{"backdrop-contrast":[fa,fr,pr]}],"backdrop-grayscale":[{"backdrop-grayscale":["",fa,fr,pr]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[fa,fr,pr]}],"backdrop-invert":[{"backdrop-invert":["",fa,fr,pr]}],"backdrop-opacity":[{"backdrop-opacity":[fa,fr,pr]}],"backdrop-saturate":[{"backdrop-saturate":[fa,fr,pr]}],"backdrop-sepia":[{"backdrop-sepia":["",fa,fr,pr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",fr,pr]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[fa,"initial",fr,pr]}],ease:[{ease:["linear","initial",w,fr,pr]}],delay:[{delay:[fa,fr,pr]}],animate:[{animate:["none",F,fr,pr]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,fr,pr]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:Qe()}],"rotate-x":[{"rotate-x":Qe()}],"rotate-y":[{"rotate-y":Qe()}],"rotate-z":[{"rotate-z":Qe()}],scale:[{scale:Ge()}],"scale-x":[{"scale-x":Ge()}],"scale-y":[{"scale-y":Ge()}],"scale-z":[{"scale-z":Ge()}],"scale-3d":["scale-3d"],skew:[{skew:He()}],"skew-x":[{"skew-x":He()}],"skew-y":[{"skew-y":He()}],transform:[{transform:[fr,pr,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Te()}],"translate-x":[{"translate-x":Te()}],"translate-y":[{"translate-y":Te()}],"translate-z":[{"translate-z":Te()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fr,pr]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fr,pr]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[fa,rp,ed,kv]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ON=pN(AN);function Ys(...e){return ON(lS(e))}const MN=X6("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Yc({className:e,variant:t,size:r,asChild:s=!1,...l}){const h=s?Z6:"button";return o.jsx(h,{"data-slot":"button",className:Ys(MN({variant:t,size:r,className:e})),...l})}function jN(e){return Object.prototype.toString.call(e)==="[object Object]"}function kx(e){return jN(e)||Array.isArray(e)}function LN(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function V0(e,t){const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;const l=JSON.stringify(Object.keys(e.breakpoints||{})),h=JSON.stringify(Object.keys(t.breakpoints||{}));return l!==h?!1:r.every(C=>{const N=e[C],y=t[C];return typeof N=="function"?`${N}`==`${y}`:!kx(N)||!kx(y)?N===y:V0(N,y)})}function Cx(e){return e.concat().sort((t,r)=>t.name>r.name?1:-1).map(t=>t.options)}function IN(e,t){if(e.length!==t.length)return!1;const r=Cx(e),s=Cx(t);return r.every((l,h)=>{const C=s[h];return V0(l,C)})}function q0(e){return typeof e=="number"}function i0(e){return typeof e=="string"}function Hm(e){return typeof e=="boolean"}function Tx(e){return Object.prototype.toString.call(e)==="[object Object]"}function Is(e){return Math.abs(e)}function $0(e){return Math.sign(e)}function fp(e,t){return Is(e-t)}function BN(e,t){if(e===0||t===0||Is(e)<=Is(t))return 0;const r=fp(Is(e),Is(t));return Is(r/e)}function zN(e){return Math.round(e*100)/100}function wp(e){return Sp(e).map(Number)}function Qc(e){return e[Up(e)]}function Up(e){return Math.max(0,e.length-1)}function W0(e,t){return t===Up(e)}function Px(e,t=0){return Array.from(Array(e),(r,s)=>t+s)}function Sp(e){return Object.keys(e)}function bS(e,t){return[e,t].reduce((r,s)=>(Sp(s).forEach(l=>{const h=r[l],C=s[l],N=Tx(h)&&Tx(C);r[l]=N?bS(h,C):C}),r),{})}function o0(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function UN(e,t){const r={start:s,center:l,end:h};function s(){return 0}function l(y){return h(y)/2}function h(y){return t-y}function C(y,u){return i0(e)?r[e](y):e(t,y,u)}return{measure:C}}function Rp(){let e=[];function t(l,h,C,N={passive:!0}){let y;if("addEventListener"in l)l.addEventListener(h,C,N),y=()=>l.removeEventListener(h,C,N);else{const u=l;u.addListener(C),y=()=>u.removeListener(C)}return e.push(y),s}function r(){e=e.filter(l=>l())}const s={add:t,clear:r};return s}function FN(e,t,r,s){const l=Rp(),h=1e3/60;let C=null,N=0,y=0;function u(){l.add(e,"visibilitychange",()=>{e.hidden&&_()})}function R(){E(),l.clear()}function v(k){if(!y)return;C||(C=k,r(),r());const w=k-C;for(C=k,N+=w;N>=h;)r(),N-=h;const F=N/h;s(F),y&&(y=t.requestAnimationFrame(v))}function b(){y||(y=t.requestAnimationFrame(v))}function E(){t.cancelAnimationFrame(y),C=null,N=0,y=0}function _(){C=null,N=0}return{init:u,destroy:R,start:b,stop:E,update:r,render:s}}function HN(e,t){const r=t==="rtl",s=e==="y",l=s?"y":"x",h=s?"x":"y",C=!s&&r?-1:1,N=R(),y=v();function u(_){const{height:m,width:k}=_;return s?m:k}function R(){return s?"top":r?"right":"left"}function v(){return s?"bottom":r?"left":"right"}function b(_){return _*C}return{scroll:l,cross:h,startEdge:N,endEdge:y,measureSize:u,direction:b}}function hd(e=0,t=0){const r=Is(e-t);function s(u){return u<e}function l(u){return u>t}function h(u){return s(u)||l(u)}function C(u){return h(u)?s(u)?e:t:u}function N(u){return r?u-r*Math.ceil((u-t)/r):u}return{length:r,max:t,min:e,constrain:C,reachedAny:h,reachedMax:l,reachedMin:s,removeOffset:N}}function xS(e,t,r){const{constrain:s}=hd(0,e),l=e+1;let h=C(t);function C(b){return r?Is((l+b)%l):s(b)}function N(){return h}function y(b){return h=C(b),v}function u(b){return R().set(N()+b)}function R(){return xS(e,N(),r)}const v={get:N,set:y,add:u,clone:R};return v}function VN(e,t,r,s,l,h,C,N,y,u,R,v,b,E,_,m,k,w,F){const{cross:g,direction:A}=e,P=["INPUT","SELECT","TEXTAREA"],H={passive:!1},D=Rp(),S=Rp(),x=hd(50,225).constrain(E.measure(20)),d={mouse:300,touch:400},T={mouse:500,touch:600},O=_?43:25;let M=!1,I=0,U=0,z=!1,$=!1,q=!1,ae=!1;function Q(Te){if(!F)return;function dt(on){(Hm(F)||F(Te,on))&&Be(on)}const _t=t;D.add(_t,"dragstart",on=>on.preventDefault(),H).add(_t,"touchmove",()=>{},H).add(_t,"touchend",()=>{}).add(_t,"touchstart",dt).add(_t,"mousedown",dt).add(_t,"touchcancel",Ye).add(_t,"contextmenu",Ye).add(_t,"click",Qe,!0)}function ve(){D.clear(),S.clear()}function we(){const Te=ae?r:t;S.add(Te,"touchmove",be,H).add(Te,"touchend",Ye).add(Te,"mousemove",be,H).add(Te,"mouseup",Ye)}function Re(Te){const dt=Te.nodeName||"";return P.includes(dt)}function me(){return(_?T:d)[ae?"mouse":"touch"]}function Ce(Te,dt){const _t=v.add($0(Te)*-1),on=R.byDistance(Te,!_).distance;return _||Is(Te)<x?on:k&&dt?on*.5:R.byIndex(_t.get(),0).distance}function Be(Te){const dt=o0(Te,s);ae=dt,q=_&&dt&&!Te.buttons&&M,M=fp(l.get(),C.get())>=2,!(dt&&Te.button!==0)&&(Re(Te.target)||(z=!0,h.pointerDown(Te),u.useFriction(0).useDuration(0),l.set(C),we(),I=h.readPoint(Te),U=h.readPoint(Te,g),b.emit("pointerDown")))}function be(Te){if(!o0(Te,s)&&Te.touches.length>=2)return Ye(Te);const _t=h.readPoint(Te),on=h.readPoint(Te,g),ln=fp(_t,I),Pn=fp(on,U);if(!$&&!ae&&(!Te.cancelable||($=ln>Pn,!$)))return Ye(Te);const En=h.pointerMove(Te);ln>m&&(q=!0),u.useFriction(.3).useDuration(.75),N.start(),l.add(A(En)),Te.preventDefault()}function Ye(Te){const _t=R.byDistance(0,!1).index!==v.get(),on=h.pointerUp(Te)*me(),ln=Ce(A(on),_t),Pn=BN(on,ln),En=O-10*Pn,rn=w+Pn/50;$=!1,z=!1,S.clear(),u.useDuration(En).useFriction(rn),y.distance(ln,!_),ae=!1,b.emit("pointerUp")}function Qe(Te){q&&(Te.stopPropagation(),Te.preventDefault(),q=!1)}function Ge(){return z}return{init:Q,destroy:ve,pointerDown:Ge}}function qN(e,t){let s,l;function h(v){return v.timeStamp}function C(v,b){const _=`client${(b||e.scroll)==="x"?"X":"Y"}`;return(o0(v,t)?v:v.touches[0])[_]}function N(v){return s=v,l=v,C(v)}function y(v){const b=C(v)-C(l),E=h(v)-h(s)>170;return l=v,E&&(s=v),b}function u(v){if(!s||!l)return 0;const b=C(l)-C(s),E=h(v)-h(s),_=h(v)-h(l)>170,m=b/E;return E&&!_&&Is(m)>.1?m:0}return{pointerDown:N,pointerMove:y,pointerUp:u,readPoint:C}}function $N(){function e(r){const{offsetTop:s,offsetLeft:l,offsetWidth:h,offsetHeight:C}=r;return{top:s,right:l+h,bottom:s+C,left:l,width:h,height:C}}return{measure:e}}function WN(e){function t(s){return e*(s/100)}return{measure:t}}function ZN(e,t,r,s,l,h,C){const N=[e].concat(s);let y,u,R=[],v=!1;function b(k){return l.measureSize(C.measure(k))}function E(k){if(!h)return;u=b(e),R=s.map(b);function w(F){for(const g of F){if(v)return;const A=g.target===e,P=s.indexOf(g.target),H=A?u:R[P],D=b(A?e:s[P]);if(Is(D-H)>=.5){k.reInit(),t.emit("resize");break}}}y=new ResizeObserver(F=>{(Hm(h)||h(k,F))&&w(F)}),r.requestAnimationFrame(()=>{N.forEach(F=>y.observe(F))})}function _(){v=!0,y&&y.disconnect()}return{init:E,destroy:_}}function GN(e,t,r,s,l,h){let C=0,N=0,y=l,u=h,R=e.get(),v=0;function b(){const H=s.get()-e.get(),D=!y;let S=0;return D?(C=0,r.set(s),e.set(s),S=H):(r.set(e),C+=H/y,C*=u,R+=C,e.add(C),S=R-v),N=$0(S),v=R,P}function E(){const H=s.get()-t.get();return Is(H)<.001}function _(){return y}function m(){return N}function k(){return C}function w(){return g(l)}function F(){return A(h)}function g(H){return y=H,P}function A(H){return u=H,P}const P={direction:m,duration:_,velocity:k,seek:b,settled:E,useBaseFriction:F,useBaseDuration:w,useFriction:A,useDuration:g};return P}function YN(e,t,r,s,l){const h=l.measure(10),C=l.measure(50),N=hd(.1,.99);let y=!1;function u(){return!(y||!e.reachedAny(r.get())||!e.reachedAny(t.get()))}function R(E){if(!u())return;const _=e.reachedMin(t.get())?"min":"max",m=Is(e[_]-t.get()),k=r.get()-t.get(),w=N.constrain(m/C);r.subtract(k*w),!E&&Is(k)<h&&(r.set(e.constrain(r.get())),s.useDuration(25).useBaseFriction())}function v(E){y=!E}return{shouldConstrain:u,constrain:R,toggleActive:v}}function KN(e,t,r,s,l){const h=hd(-t+e,0),C=v(),N=R(),y=b();function u(_,m){return fp(_,m)<=1}function R(){const _=C[0],m=Qc(C),k=C.lastIndexOf(_),w=C.indexOf(m)+1;return hd(k,w)}function v(){return r.map((_,m)=>{const{min:k,max:w}=h,F=h.constrain(_),g=!m,A=W0(r,m);return g?w:A||u(k,F)?k:u(w,F)?w:F}).map(_=>parseFloat(_.toFixed(3)))}function b(){if(t<=e+l)return[h.max];if(s==="keepSnaps")return C;const{min:_,max:m}=N;return C.slice(_,m)}return{snapsContained:y,scrollContainLimit:N}}function QN(e,t,r){const s=t[0],l=r?s-e:Qc(t);return{limit:hd(l,s)}}function JN(e,t,r,s){const h=t.min+.1,C=t.max+.1,{reachedMin:N,reachedMax:y}=hd(h,C);function u(b){return b===1?y(r.get()):b===-1?N(r.get()):!1}function R(b){if(!u(b))return;const E=e*(b*-1);s.forEach(_=>_.add(E))}return{loop:R}}function XN(e){const{max:t,length:r}=e;function s(h){const C=h-t;return r?C/-r:0}return{get:s}}function e3(e,t,r,s,l){const{startEdge:h,endEdge:C}=e,{groupSlides:N}=l,y=v().map(t.measure),u=b(),R=E();function v(){return N(s).map(m=>Qc(m)[C]-m[0][h]).map(Is)}function b(){return s.map(m=>r[h]-m[h]).map(m=>-Is(m))}function E(){return N(u).map(m=>m[0]).map((m,k)=>m+y[k])}return{snaps:u,snapsAligned:R}}function t3(e,t,r,s,l,h){const{groupSlides:C}=l,{min:N,max:y}=s,u=R();function R(){const b=C(h),E=!e||t==="keepSnaps";return r.length===1?[h]:E?b:b.slice(N,y).map((_,m,k)=>{const w=!m,F=W0(k,m);if(w){const g=Qc(k[0])+1;return Px(g)}if(F){const g=Up(h)-Qc(k)[0]+1;return Px(g,Qc(k)[0])}return _})}return{slideRegistry:u}}function n3(e,t,r,s,l){const{reachedAny:h,removeOffset:C,constrain:N}=s;function y(_){return _.concat().sort((m,k)=>Is(m)-Is(k))[0]}function u(_){const m=e?C(_):N(_),k=t.map((F,g)=>({diff:R(F-m,0),index:g})).sort((F,g)=>Is(F.diff)-Is(g.diff)),{index:w}=k[0];return{index:w,distance:m}}function R(_,m){const k=[_,_+r,_-r];if(!e)return _;if(!m)return y(k);const w=k.filter(F=>$0(F)===m);return w.length?y(w):Qc(k)-r}function v(_,m){const k=t[_]-l.get(),w=R(k,m);return{index:_,distance:w}}function b(_,m){const k=l.get()+_,{index:w,distance:F}=u(k),g=!e&&h(k);if(!m||g)return{index:w,distance:_};const A=t[w]-F,P=_+R(A,0);return{index:w,distance:P}}return{byDistance:b,byIndex:v,shortcut:R}}function r3(e,t,r,s,l,h,C){function N(v){const b=v.distance,E=v.index!==t.get();h.add(b),b&&(s.duration()?e.start():(e.update(),e.render(1),e.update())),E&&(r.set(t.get()),t.set(v.index),C.emit("select"))}function y(v,b){const E=l.byDistance(v,b);N(E)}function u(v,b){const E=t.clone().set(v),_=l.byIndex(E.get(),b);N(_)}return{distance:y,index:u}}function a3(e,t,r,s,l,h,C,N){const y={passive:!0,capture:!0};let u=0;function R(E){if(!N)return;function _(m){if(new Date().getTime()-u>10)return;C.emit("slideFocusStart"),e.scrollLeft=0;const F=r.findIndex(g=>g.includes(m));q0(F)&&(l.useDuration(0),s.index(F,0),C.emit("slideFocus"))}h.add(document,"keydown",v,!1),t.forEach((m,k)=>{h.add(m,"focus",w=>{(Hm(N)||N(E,w))&&_(k)},y)})}function v(E){E.code==="Tab"&&(u=new Date().getTime())}return{init:R}}function hp(e){let t=e;function r(){return t}function s(y){t=C(y)}function l(y){t+=C(y)}function h(y){t-=C(y)}function C(y){return q0(y)?y:y.get()}return{get:r,set:s,add:l,subtract:h}}function wS(e,t){const r=e.scroll==="x"?C:N,s=t.style;let l=null,h=!1;function C(b){return`translate3d(${b}px,0px,0px)`}function N(b){return`translate3d(0px,${b}px,0px)`}function y(b){if(h)return;const E=zN(e.direction(b));E!==l&&(s.transform=r(E),l=E)}function u(b){h=!b}function R(){h||(s.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:R,to:y,toggleActive:u}}function s3(e,t,r,s,l,h,C,N,y){const R=wp(l),v=wp(l).reverse(),b=w().concat(F());function E(D,S){return D.reduce((x,d)=>x-l[d],S)}function _(D,S){return D.reduce((x,d)=>E(x,S)>0?x.concat([d]):x,[])}function m(D){return h.map((S,x)=>({start:S-s[x]+.5+D,end:S+t-.5+D}))}function k(D,S,x){const d=m(S);return D.map(T=>{const O=x?0:-r,M=x?r:0,I=x?"end":"start",U=d[T][I];return{index:T,loopPoint:U,slideLocation:hp(-1),translate:wS(e,y[T]),target:()=>N.get()>U?O:M}})}function w(){const D=C[0],S=_(v,D);return k(S,r,!1)}function F(){const D=t-C[0]-1,S=_(R,D);return k(S,-r,!0)}function g(){return b.every(({index:D})=>{const S=R.filter(x=>x!==D);return E(S,t)<=.1})}function A(){b.forEach(D=>{const{target:S,translate:x,slideLocation:d}=D,T=S();T!==d.get()&&(x.to(T),d.set(T))})}function P(){b.forEach(D=>D.translate.clear())}return{canLoop:g,clear:P,loop:A,loopPoints:b}}function i3(e,t,r){let s,l=!1;function h(y){if(!r)return;function u(R){for(const v of R)if(v.type==="childList"){y.reInit(),t.emit("slidesChanged");break}}s=new MutationObserver(R=>{l||(Hm(r)||r(y,R))&&u(R)}),s.observe(e,{childList:!0})}function C(){s&&s.disconnect(),l=!0}return{init:h,destroy:C}}function o3(e,t,r,s){const l={};let h=null,C=null,N,y=!1;function u(){N=new IntersectionObserver(_=>{y||(_.forEach(m=>{const k=t.indexOf(m.target);l[k]=m}),h=null,C=null,r.emit("slidesInView"))},{root:e.parentElement,threshold:s}),t.forEach(_=>N.observe(_))}function R(){N&&N.disconnect(),y=!0}function v(_){return Sp(l).reduce((m,k)=>{const w=parseInt(k),{isIntersecting:F}=l[w];return(_&&F||!_&&!F)&&m.push(w),m},[])}function b(_=!0){if(_&&h)return h;if(!_&&C)return C;const m=v(_);return _&&(h=m),_||(C=m),m}return{init:u,destroy:R,get:b}}function c3(e,t,r,s,l,h){const{measureSize:C,startEdge:N,endEdge:y}=e,u=r[0]&&l,R=_(),v=m(),b=r.map(C),E=k();function _(){if(!u)return 0;const F=r[0];return Is(t[N]-F[N])}function m(){if(!u)return 0;const F=h.getComputedStyle(Qc(s));return parseFloat(F.getPropertyValue(`margin-${y}`))}function k(){return r.map((F,g,A)=>{const P=!g,H=W0(A,g);return P?b[g]+R:H?b[g]+v:A[g+1][N]-F[N]}).map(Is)}return{slideSizes:b,slideSizesWithGaps:E,startGap:R,endGap:v}}function l3(e,t,r,s,l,h,C,N,y){const{startEdge:u,endEdge:R,direction:v}=e,b=q0(r);function E(w,F){return wp(w).filter(g=>g%F===0).map(g=>w.slice(g,g+F))}function _(w){return w.length?wp(w).reduce((F,g,A)=>{const P=Qc(F)||0,H=P===0,D=g===Up(w),S=l[u]-h[P][u],x=l[u]-h[g][R],d=!s&&H?v(C):0,T=!s&&D?v(N):0,O=Is(x-T-(S+d));return A&&O>t+y&&F.push(g),D&&F.push(w.length),F},[]).map((F,g,A)=>{const P=Math.max(A[g-1]||0);return w.slice(P,F)}):[]}function m(w){return b?E(w,r):_(w)}return{groupSlides:m}}function u3(e,t,r,s,l,h,C){const{align:N,axis:y,direction:u,startIndex:R,loop:v,duration:b,dragFree:E,dragThreshold:_,inViewThreshold:m,slidesToScroll:k,skipSnaps:w,containScroll:F,watchResize:g,watchSlides:A,watchDrag:P,watchFocus:H}=h,D=2,S=$N(),x=S.measure(t),d=r.map(S.measure),T=HN(y,u),O=T.measureSize(x),M=WN(O),I=UN(N,O),U=!v&&!!F,z=v||!!F,{slideSizes:$,slideSizesWithGaps:q,startGap:ae,endGap:Q}=c3(T,x,d,r,z,l),ve=l3(T,O,k,v,x,d,ae,Q,D),{snaps:we,snapsAligned:Re}=e3(T,I,x,d,ve),me=-Qc(we)+Qc(q),{snapsContained:Ce,scrollContainLimit:Be}=KN(O,me,Re,F,D),be=U?Ce:Re,{limit:Ye}=QN(me,be,v),Qe=xS(Up(be),R,v),Ge=Qe.clone(),He=wp(r),Te=({dragHandler:Ar,scrollBody:Sr,scrollBounds:Ur,options:{loop:xr}})=>{xr||Ur.constrain(Ar.pointerDown()),Sr.seek()},dt=({scrollBody:Ar,translate:Sr,location:Ur,offsetLocation:xr,previousLocation:Or,scrollLooper:Kr,slideLooper:va,dragHandler:ra,animation:ua,eventHandler:jn,scrollBounds:Ha,options:{loop:Ea}},Qr)=>{const gr=Ar.settled(),rt=!Ha.shouldConstrain(),ut=Ea?gr:gr&&rt,Zt=ut&&!ra.pointerDown();Zt&&ua.stop();const Pt=Ur.get()*Qr+Or.get()*(1-Qr);xr.set(Pt),Ea&&(Kr.loop(Ar.direction()),va.loop()),Sr.to(xr.get()),Zt&&jn.emit("settle"),ut||jn.emit("scroll")},_t=FN(s,l,()=>Te(nr),Ar=>dt(nr,Ar)),on=.68,ln=be[Qe.get()],Pn=hp(ln),En=hp(ln),rn=hp(ln),Ne=hp(ln),Me=GN(Pn,rn,En,Ne,b,on),Ze=n3(v,be,me,Ye,Ne),Ft=r3(_t,Qe,Ge,Me,Ze,Ne,C),Tt=XN(Ye),St=Rp(),un=o3(t,r,C,m),{slideRegistry:Sn}=t3(U,F,be,Be,ve,He),Ut=a3(e,r,Sn,Ft,Me,St,C,H),nr={ownerDocument:s,ownerWindow:l,eventHandler:C,containerRect:x,slideRects:d,animation:_t,axis:T,dragHandler:VN(T,e,s,l,Ne,qN(T,l),Pn,_t,Ft,Me,Ze,Qe,C,M,E,_,w,on,P),eventStore:St,percentOfView:M,index:Qe,indexPrevious:Ge,limit:Ye,location:Pn,offsetLocation:rn,previousLocation:En,options:h,resizeHandler:ZN(t,C,l,r,T,g,S),scrollBody:Me,scrollBounds:YN(Ye,rn,Ne,Me,M),scrollLooper:JN(me,Ye,rn,[Pn,rn,En,Ne]),scrollProgress:Tt,scrollSnapList:be.map(Tt.get),scrollSnaps:be,scrollTarget:Ze,scrollTo:Ft,slideLooper:s3(T,O,me,$,q,we,be,rn,r),slideFocus:Ut,slidesHandler:i3(t,C,A),slidesInView:un,slideIndexes:He,slideRegistry:Sn,slidesToScroll:ve,target:Ne,translate:wS(T,t)};return nr}function d3(){let e={},t;function r(u){t=u}function s(u){return e[u]||[]}function l(u){return s(u).forEach(R=>R(t,u)),y}function h(u,R){return e[u]=s(u).concat([R]),y}function C(u,R){return e[u]=s(u).filter(v=>v!==R),y}function N(){e={}}const y={init:r,emit:l,off:C,on:h,clear:N};return y}const h3={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function p3(e){function t(h,C){return bS(h,C||{})}function r(h){const C=h.breakpoints||{},N=Sp(C).filter(y=>e.matchMedia(y).matches).map(y=>C[y]).reduce((y,u)=>t(y,u),{});return t(h,N)}function s(h){return h.map(C=>Sp(C.breakpoints||{})).reduce((C,N)=>C.concat(N),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:r,optionsMediaQueries:s}}function f3(e){let t=[];function r(h,C){return t=C.filter(({options:N})=>e.optionsAtMedia(N).active!==!1),t.forEach(N=>N.init(h,e)),C.reduce((N,y)=>Object.assign(N,{[y.name]:y}),{})}function s(){t=t.filter(h=>h.destroy())}return{init:r,destroy:s}}function pm(e,t,r){const s=e.ownerDocument,l=s.defaultView,h=p3(l),C=f3(h),N=Rp(),y=d3(),{mergeOptions:u,optionsAtMedia:R,optionsMediaQueries:v}=h,{on:b,off:E,emit:_}=y,m=T;let k=!1,w,F=u(h3,pm.globalOptions),g=u(F),A=[],P,H,D;function S(){const{container:He,slides:Te}=g;H=(i0(He)?e.querySelector(He):He)||e.children[0];const _t=i0(Te)?H.querySelectorAll(Te):Te;D=[].slice.call(_t||H.children)}function x(He){const Te=u3(e,H,D,s,l,He,y);if(He.loop&&!Te.slideLooper.canLoop()){const dt=Object.assign({},He,{loop:!1});return x(dt)}return Te}function d(He,Te){k||(F=u(F,He),g=R(F),A=Te||A,S(),w=x(g),v([F,...A.map(({options:dt})=>dt)]).forEach(dt=>N.add(dt,"change",T)),g.active&&(w.translate.to(w.location.get()),w.animation.init(),w.slidesInView.init(),w.slideFocus.init(Ge),w.eventHandler.init(Ge),w.resizeHandler.init(Ge),w.slidesHandler.init(Ge),w.options.loop&&w.slideLooper.loop(),H.offsetParent&&D.length&&w.dragHandler.init(Ge),P=C.init(Ge,A)))}function T(He,Te){const dt=ve();O(),d(u({startIndex:dt},He),Te),y.emit("reInit")}function O(){w.dragHandler.destroy(),w.eventStore.clear(),w.translate.clear(),w.slideLooper.clear(),w.resizeHandler.destroy(),w.slidesHandler.destroy(),w.slidesInView.destroy(),w.animation.destroy(),C.destroy(),N.clear()}function M(){k||(k=!0,N.clear(),O(),y.emit("destroy"),y.clear())}function I(He,Te,dt){!g.active||k||(w.scrollBody.useBaseFriction().useDuration(Te===!0?0:g.duration),w.scrollTo.index(He,dt||0))}function U(He){const Te=w.index.add(1).get();I(Te,He,-1)}function z(He){const Te=w.index.add(-1).get();I(Te,He,1)}function $(){return w.index.add(1).get()!==ve()}function q(){return w.index.add(-1).get()!==ve()}function ae(){return w.scrollSnapList}function Q(){return w.scrollProgress.get(w.offsetLocation.get())}function ve(){return w.index.get()}function we(){return w.indexPrevious.get()}function Re(){return w.slidesInView.get()}function me(){return w.slidesInView.get(!1)}function Ce(){return P}function Be(){return w}function be(){return e}function Ye(){return H}function Qe(){return D}const Ge={canScrollNext:$,canScrollPrev:q,containerNode:Ye,internalEngine:Be,destroy:M,off:E,on:b,emit:_,plugins:Ce,previousScrollSnap:we,reInit:m,rootNode:be,scrollNext:U,scrollPrev:z,scrollProgress:Q,scrollSnapList:ae,scrollTo:I,selectedScrollSnap:ve,slideNodes:Qe,slidesInView:Re,slidesNotInView:me};return d(t,r),setTimeout(()=>y.emit("init"),0),Ge}pm.globalOptions=void 0;function Z0(e={},t=[]){const r=Z.useRef(e),s=Z.useRef(t),[l,h]=Z.useState(),[C,N]=Z.useState(),y=Z.useCallback(()=>{l&&l.reInit(r.current,s.current)},[l]);return Z.useEffect(()=>{V0(r.current,e)||(r.current=e,y())},[e,y]),Z.useEffect(()=>{IN(s.current,t)||(s.current=t,y())},[t,y]),Z.useEffect(()=>{if(LN()&&C){pm.globalOptions=Z0.globalOptions;const u=pm(C,r.current,s.current);return h(u),()=>u.destroy()}else h(void 0)},[C,h]),[N,l]}Z0.globalOptions=void 0;const SS=Z.createContext(null);function Vm(){const e=Z.useContext(SS);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}function m3({orientation:e="horizontal",opts:t,setApi:r,plugins:s,className:l,children:h,...C}){const[N,y]=Z0({...t,axis:e==="horizontal"?"x":"y"},s),[u,R]=Z.useState(!1),[v,b]=Z.useState(!1),E=Z.useCallback(w=>{w&&(R(w.canScrollPrev()),b(w.canScrollNext()))},[]),_=Z.useCallback(()=>{y?.scrollPrev()},[y]),m=Z.useCallback(()=>{y?.scrollNext()},[y]),k=Z.useCallback(w=>{w.key==="ArrowLeft"?(w.preventDefault(),_()):w.key==="ArrowRight"&&(w.preventDefault(),m())},[_,m]);return Z.useEffect(()=>{!y||!r||r(y)},[y,r]),Z.useEffect(()=>{if(y)return E(y),y.on("reInit",E),y.on("select",E),()=>{y?.off("select",E)}},[y,E]),o.jsx(SS.Provider,{value:{carouselRef:N,api:y,opts:t,orientation:e||(t?.axis==="y"?"vertical":"horizontal"),scrollPrev:_,scrollNext:m,canScrollPrev:u,canScrollNext:v},children:o.jsx("div",{onKeyDownCapture:k,className:Ys("relative",l),role:"region","aria-roledescription":"carousel","data-slot":"carousel",...C,children:h})})}function g3({className:e,...t}){const{carouselRef:r,orientation:s}=Vm();return o.jsx("div",{ref:r,className:"overflow-hidden","data-slot":"carousel-content",children:o.jsx("div",{className:Ys("flex",s==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})}function v3({className:e,...t}){const{orientation:r}=Vm();return o.jsx("div",{role:"group","aria-roledescription":"slide","data-slot":"carousel-item",className:Ys("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",e),...t})}function y3({className:e,variant:t="outline",size:r="icon",...s}){const{orientation:l,scrollPrev:h,canScrollPrev:C}=Vm();return o.jsxs(Yc,{"data-slot":"carousel-previous",variant:t,size:r,className:Ys("absolute size-8 rounded-full",l==="horizontal"?"top-1/2 -left-12 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!C,onClick:h,...s,children:[o.jsx(Y4,{}),o.jsx("span",{className:"sr-only",children:"Previous slide"})]})}function _3({className:e,variant:t="outline",size:r="icon",...s}){const{orientation:l,scrollNext:h,canScrollNext:C}=Vm();return o.jsxs(Yc,{"data-slot":"carousel-next",variant:t,size:r,className:Ys("absolute size-8 rounded-full",l==="horizontal"?"top-1/2 -right-12 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!C,onClick:h,...s,children:[o.jsx(Q4,{}),o.jsx("span",{className:"sr-only",children:"Next slide"})]})}function Lu(e,t,{checkForDefaultPrevented:r=!0}={}){return function(l){if(e?.(l),r===!1||!l.defaultPrevented)return t?.(l)}}function b3(e,t){const r=Z.createContext(t),s=h=>{const{children:C,...N}=h,y=Z.useMemo(()=>N,Object.values(N));return o.jsx(r.Provider,{value:y,children:C})};s.displayName=e+"Provider";function l(h){const C=Z.useContext(r);if(C)return C;if(t!==void 0)return t;throw new Error(`\`${h}\` must be used within \`${e}\``)}return[s,l]}function G0(e,t=[]){let r=[];function s(h,C){const N=Z.createContext(C),y=r.length;r=[...r,C];const u=v=>{const{scope:b,children:E,..._}=v,m=b?.[e]?.[y]||N,k=Z.useMemo(()=>_,Object.values(_));return o.jsx(m.Provider,{value:k,children:E})};u.displayName=h+"Provider";function R(v,b){const E=b?.[e]?.[y]||N,_=Z.useContext(E);if(_)return _;if(C!==void 0)return C;throw new Error(`\`${v}\` must be used within \`${h}\``)}return[u,R]}const l=()=>{const h=r.map(C=>Z.createContext(C));return function(N){const y=N?.[e]||h;return Z.useMemo(()=>({[`__scope${e}`]:{...N,[e]:y}}),[N,y])}};return l.scopeName=e,[s,x3(l,...t)]}function x3(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(h){const C=s.reduce((N,{useScope:y,scopeName:u})=>{const v=y(h)[`__scope${u}`];return{...N,...v}},{});return Z.useMemo(()=>({[`__scope${t.scopeName}`]:C}),[C])}};return r.scopeName=t.scopeName,r}var Jc=globalThis?.document?Z.useLayoutEffect:()=>{},w3=Y1[" useId ".trim().toString()]||(()=>{}),S3=0;function Cv(e){const[t,r]=Z.useState(w3());return Jc(()=>{r(s=>s??String(S3++))},[e]),e||(t?`radix-${t}`:"")}var R3=Y1[" useInsertionEffect ".trim().toString()]||Jc;function E3({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[l,h,C]=k3({defaultProp:t,onChange:r}),N=e!==void 0,y=N?e:l;{const R=Z.useRef(e!==void 0);Z.useEffect(()=>{const v=R.current;v!==N&&console.warn(`${s} is changing from ${v?"controlled":"uncontrolled"} to ${N?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),R.current=N},[N,s])}const u=Z.useCallback(R=>{if(N){const v=C3(R)?R(e):R;v!==e&&C.current?.(v)}else h(R)},[N,e,h,C]);return[y,u]}function k3({defaultProp:e,onChange:t}){const[r,s]=Z.useState(e),l=Z.useRef(r),h=Z.useRef(t);return R3(()=>{h.current=t},[t]),Z.useEffect(()=>{l.current!==r&&(h.current?.(r),l.current=r)},[r,l]),[r,s,h]}function C3(e){return typeof e=="function"}var T3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],no=T3.reduce((e,t)=>{const r=F0(`Primitive.${t}`),s=Z.forwardRef((l,h)=>{const{asChild:C,...N}=l,y=C?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(y,{...N,ref:h})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function P3(e,t){e&&hw.flushSync(()=>e.dispatchEvent(t))}function cc(e){const t=Z.useRef(e);return Z.useEffect(()=>{t.current=e}),Z.useMemo(()=>(...r)=>t.current?.(...r),[])}function N3(e,t=globalThis?.document){const r=cc(e);Z.useEffect(()=>{const s=l=>{l.key==="Escape"&&r(l)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var D3="DismissableLayer",c0="dismissableLayer.update",A3="dismissableLayer.pointerDownOutside",O3="dismissableLayer.focusOutside",Nx,RS=Z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ES=Z.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:h,onInteractOutside:C,onDismiss:N,...y}=e,u=Z.useContext(RS),[R,v]=Z.useState(null),b=R?.ownerDocument??globalThis?.document,[,E]=Z.useState({}),_=Wo(t,D=>v(D)),m=Array.from(u.layers),[k]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=m.indexOf(k),F=R?m.indexOf(R):-1,g=u.layersWithOutsidePointerEventsDisabled.size>0,A=F>=w,P=L3(D=>{const S=D.target,x=[...u.branches].some(d=>d.contains(S));!A||x||(l?.(D),C?.(D),D.defaultPrevented||N?.())},b),H=I3(D=>{const S=D.target;[...u.branches].some(d=>d.contains(S))||(h?.(D),C?.(D),D.defaultPrevented||N?.())},b);return N3(D=>{F===u.layers.size-1&&(s?.(D),!D.defaultPrevented&&N&&(D.preventDefault(),N()))},b),Z.useEffect(()=>{if(R)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Nx=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(R)),u.layers.add(R),Dx(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Nx)}},[R,b,r,u]),Z.useEffect(()=>()=>{R&&(u.layers.delete(R),u.layersWithOutsidePointerEventsDisabled.delete(R),Dx())},[R,u]),Z.useEffect(()=>{const D=()=>E({});return document.addEventListener(c0,D),()=>document.removeEventListener(c0,D)},[]),o.jsx(no.div,{...y,ref:_,style:{pointerEvents:g?A?"auto":"none":void 0,...e.style},onFocusCapture:Lu(e.onFocusCapture,H.onFocusCapture),onBlurCapture:Lu(e.onBlurCapture,H.onBlurCapture),onPointerDownCapture:Lu(e.onPointerDownCapture,P.onPointerDownCapture)})});ES.displayName=D3;var M3="DismissableLayerBranch",j3=Z.forwardRef((e,t)=>{const r=Z.useContext(RS),s=Z.useRef(null),l=Wo(t,s);return Z.useEffect(()=>{const h=s.current;if(h)return r.branches.add(h),()=>{r.branches.delete(h)}},[r.branches]),o.jsx(no.div,{...e,ref:l})});j3.displayName=M3;function L3(e,t=globalThis?.document){const r=cc(e),s=Z.useRef(!1),l=Z.useRef(()=>{});return Z.useEffect(()=>{const h=N=>{if(N.target&&!s.current){let y=function(){kS(A3,r,u,{discrete:!0})};const u={originalEvent:N};N.pointerType==="touch"?(t.removeEventListener("click",l.current),l.current=y,t.addEventListener("click",l.current,{once:!0})):y()}else t.removeEventListener("click",l.current);s.current=!1},C=window.setTimeout(()=>{t.addEventListener("pointerdown",h)},0);return()=>{window.clearTimeout(C),t.removeEventListener("pointerdown",h),t.removeEventListener("click",l.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function I3(e,t=globalThis?.document){const r=cc(e),s=Z.useRef(!1);return Z.useEffect(()=>{const l=h=>{h.target&&!s.current&&kS(O3,r,{originalEvent:h},{discrete:!1})};return t.addEventListener("focusin",l),()=>t.removeEventListener("focusin",l)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Dx(){const e=new CustomEvent(c0);document.dispatchEvent(e)}function kS(e,t,r,{discrete:s}){const l=r.originalEvent.target,h=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&l.addEventListener(e,t,{once:!0}),s?P3(l,h):l.dispatchEvent(h)}var Tv="focusScope.autoFocusOnMount",Pv="focusScope.autoFocusOnUnmount",Ax={bubbles:!1,cancelable:!0},B3="FocusScope",CS=Z.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:l,onUnmountAutoFocus:h,...C}=e,[N,y]=Z.useState(null),u=cc(l),R=cc(h),v=Z.useRef(null),b=Wo(t,m=>y(m)),E=Z.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Z.useEffect(()=>{if(s){let m=function(g){if(E.paused||!N)return;const A=g.target;N.contains(A)?v.current=A:Du(v.current,{select:!0})},k=function(g){if(E.paused||!N)return;const A=g.relatedTarget;A!==null&&(N.contains(A)||Du(v.current,{select:!0}))},w=function(g){if(document.activeElement===document.body)for(const P of g)P.removedNodes.length>0&&Du(N)};document.addEventListener("focusin",m),document.addEventListener("focusout",k);const F=new MutationObserver(w);return N&&F.observe(N,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",k),F.disconnect()}}},[s,N,E.paused]),Z.useEffect(()=>{if(N){Mx.add(E);const m=document.activeElement;if(!N.contains(m)){const w=new CustomEvent(Tv,Ax);N.addEventListener(Tv,u),N.dispatchEvent(w),w.defaultPrevented||(z3(q3(TS(N)),{select:!0}),document.activeElement===m&&Du(N))}return()=>{N.removeEventListener(Tv,u),setTimeout(()=>{const w=new CustomEvent(Pv,Ax);N.addEventListener(Pv,R),N.dispatchEvent(w),w.defaultPrevented||Du(m??document.body,{select:!0}),N.removeEventListener(Pv,R),Mx.remove(E)},0)}}},[N,u,R,E]);const _=Z.useCallback(m=>{if(!r&&!s||E.paused)return;const k=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,w=document.activeElement;if(k&&w){const F=m.currentTarget,[g,A]=U3(F);g&&A?!m.shiftKey&&w===A?(m.preventDefault(),r&&Du(g,{select:!0})):m.shiftKey&&w===g&&(m.preventDefault(),r&&Du(A,{select:!0})):w===F&&m.preventDefault()}},[r,s,E.paused]);return o.jsx(no.div,{tabIndex:-1,...C,ref:b,onKeyDown:_})});CS.displayName=B3;function z3(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(Du(s,{select:t}),document.activeElement!==r)return}function U3(e){const t=TS(e),r=Ox(t,e),s=Ox(t.reverse(),e);return[r,s]}function TS(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const l=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||l?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Ox(e,t){for(const r of e)if(!F3(r,{upTo:t}))return r}function F3(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function H3(e){return e instanceof HTMLInputElement&&"select"in e}function Du(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&H3(e)&&t&&e.select()}}var Mx=V3();function V3(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=jx(e,t),e.unshift(t)},remove(t){e=jx(e,t),e[0]?.resume()}}}function jx(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function q3(e){return e.filter(t=>t.tagName!=="A")}var $3="Portal",PS=Z.forwardRef((e,t)=>{const{container:r,...s}=e,[l,h]=Z.useState(!1);Jc(()=>h(!0),[]);const C=r||l&&globalThis?.document?.body;return C?pw.createPortal(o.jsx(no.div,{...s,ref:t}),C):null});PS.displayName=$3;function W3(e,t){return Z.useReducer((r,s)=>t[r][s]??r,e)}var qm=e=>{const{present:t,children:r}=e,s=Z3(t),l=typeof r=="function"?r({present:s.isPresent}):Z.Children.only(r),h=Wo(s.ref,G3(l));return typeof r=="function"||s.isPresent?Z.cloneElement(l,{ref:h}):null};qm.displayName="Presence";function Z3(e){const[t,r]=Z.useState(),s=Z.useRef(null),l=Z.useRef(e),h=Z.useRef("none"),C=e?"mounted":"unmounted",[N,y]=W3(C,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Z.useEffect(()=>{const u=If(s.current);h.current=N==="mounted"?u:"none"},[N]),Jc(()=>{const u=s.current,R=l.current;if(R!==e){const b=h.current,E=If(u);e?y("MOUNT"):E==="none"||u?.display==="none"?y("UNMOUNT"):y(R&&b!==E?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,y]),Jc(()=>{if(t){let u;const R=t.ownerDocument.defaultView??window,v=E=>{const m=If(s.current).includes(E.animationName);if(E.target===t&&m&&(y("ANIMATION_END"),!l.current)){const k=t.style.animationFillMode;t.style.animationFillMode="forwards",u=R.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=k)})}},b=E=>{E.target===t&&(h.current=If(s.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",v),t.addEventListener("animationend",v),()=>{R.clearTimeout(u),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",v),t.removeEventListener("animationend",v)}}else y("ANIMATION_END")},[t,y]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:Z.useCallback(u=>{s.current=u?getComputedStyle(u):null,r(u)},[])}}function If(e){return e?.animationName||"none"}function G3(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Nv=0;function Y3(){Z.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Lx()),document.body.insertAdjacentElement("beforeend",e[1]??Lx()),Nv++,()=>{Nv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Nv--}},[])}function Lx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var vl=function(){return vl=Object.assign||function(t){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(t[h]=r[h])}return t},vl.apply(this,arguments)};function NS(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(r[s[l]]=e[s[l]]);return r}function K3(e,t,r){if(r||arguments.length===2)for(var s=0,l=t.length,h;s<l;s++)(h||!(s in t))&&(h||(h=Array.prototype.slice.call(t,0,s)),h[s]=t[s]);return e.concat(h||Array.prototype.slice.call(t))}var nm="right-scroll-bar-position",rm="width-before-scroll-bar",Q3="with-scroll-bars-hidden",J3="--removed-body-scroll-bar-size";function Dv(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function X3(e,t){var r=Z.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var l=r.value;l!==s&&(r.value=s,r.callback(s,l))}}}})[0];return r.callback=t,r.facade}var eD=typeof window<"u"?Z.useLayoutEffect:Z.useEffect,Ix=new WeakMap;function tD(e,t){var r=X3(null,function(s){return e.forEach(function(l){return Dv(l,s)})});return eD(function(){var s=Ix.get(r);if(s){var l=new Set(s),h=new Set(e),C=r.current;l.forEach(function(N){h.has(N)||Dv(N,null)}),h.forEach(function(N){l.has(N)||Dv(N,C)})}Ix.set(r,e)},[e]),r}function nD(e){return e}function rD(e,t){t===void 0&&(t=nD);var r=[],s=!1,l={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(h){var C=t(h,s);return r.push(C),function(){r=r.filter(function(N){return N!==C})}},assignSyncMedium:function(h){for(s=!0;r.length;){var C=r;r=[],C.forEach(h)}r={push:function(N){return h(N)},filter:function(){return r}}},assignMedium:function(h){s=!0;var C=[];if(r.length){var N=r;r=[],N.forEach(h),C=r}var y=function(){var R=C;C=[],R.forEach(h)},u=function(){return Promise.resolve().then(y)};u(),r={push:function(R){C.push(R),u()},filter:function(R){return C=C.filter(R),r}}}};return l}function aD(e){e===void 0&&(e={});var t=rD(null);return t.options=vl({async:!0,ssr:!1},e),t}var DS=function(e){var t=e.sideCar,r=NS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return Z.createElement(s,vl({},r))};DS.isSideCarExport=!0;function sD(e,t){return e.useMedium(t),DS}var AS=aD(),Av=function(){},$m=Z.forwardRef(function(e,t){var r=Z.useRef(null),s=Z.useState({onScrollCapture:Av,onWheelCapture:Av,onTouchMoveCapture:Av}),l=s[0],h=s[1],C=e.forwardProps,N=e.children,y=e.className,u=e.removeScrollBar,R=e.enabled,v=e.shards,b=e.sideCar,E=e.noRelative,_=e.noIsolation,m=e.inert,k=e.allowPinchZoom,w=e.as,F=w===void 0?"div":w,g=e.gapMode,A=NS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=b,H=tD([r,t]),D=vl(vl({},A),l);return Z.createElement(Z.Fragment,null,R&&Z.createElement(P,{sideCar:AS,removeScrollBar:u,shards:v,noRelative:E,noIsolation:_,inert:m,setCallbacks:h,allowPinchZoom:!!k,lockRef:r,gapMode:g}),C?Z.cloneElement(Z.Children.only(N),vl(vl({},D),{ref:H})):Z.createElement(F,vl({},D,{className:y,ref:H}),N))});$m.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$m.classNames={fullWidth:rm,zeroRight:nm};var iD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function oD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=iD();return t&&e.setAttribute("nonce",t),e}function cD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function lD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var uD=function(){var e=0,t=null;return{add:function(r){e==0&&(t=oD())&&(cD(t,r),lD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},dD=function(){var e=uD();return function(t,r){Z.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},OS=function(){var e=dD(),t=function(r){var s=r.styles,l=r.dynamic;return e(s,l),null};return t},hD={left:0,top:0,right:0,gap:0},Ov=function(e){return parseInt(e||"",10)||0},pD=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],l=t[e==="padding"?"paddingRight":"marginRight"];return[Ov(r),Ov(s),Ov(l)]},fD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return hD;var t=pD(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},mD=OS(),ah="data-scroll-locked",gD=function(e,t,r,s){var l=e.left,h=e.top,C=e.right,N=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Q3,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(N,"px ").concat(s,`;
  }
  body[`).concat(ah,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(h,`px;
    padding-right: `).concat(C,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(N,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(N,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nm,` {
    right: `).concat(N,"px ").concat(s,`;
  }
  
  .`).concat(rm,` {
    margin-right: `).concat(N,"px ").concat(s,`;
  }
  
  .`).concat(nm," .").concat(nm,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(rm," .").concat(rm,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(ah,`] {
    `).concat(J3,": ").concat(N,`px;
  }
`)},Bx=function(){var e=parseInt(document.body.getAttribute(ah)||"0",10);return isFinite(e)?e:0},vD=function(){Z.useEffect(function(){return document.body.setAttribute(ah,(Bx()+1).toString()),function(){var e=Bx()-1;e<=0?document.body.removeAttribute(ah):document.body.setAttribute(ah,e.toString())}},[])},yD=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,l=s===void 0?"margin":s;vD();var h=Z.useMemo(function(){return fD(l)},[l]);return Z.createElement(mD,{styles:gD(h,!t,l,r?"":"!important")})},l0=!1;if(typeof window<"u")try{var Bf=Object.defineProperty({},"passive",{get:function(){return l0=!0,!0}});window.addEventListener("test",Bf,Bf),window.removeEventListener("test",Bf,Bf)}catch{l0=!1}var Gd=l0?{passive:!1}:!1,_D=function(e){return e.tagName==="TEXTAREA"},MS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!_D(e)&&r[t]==="visible")},bD=function(e){return MS(e,"overflowY")},xD=function(e){return MS(e,"overflowX")},zx=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var l=jS(e,s);if(l){var h=LS(e,s),C=h[1],N=h[2];if(C>N)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},wD=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},SD=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},jS=function(e,t){return e==="v"?bD(t):xD(t)},LS=function(e,t){return e==="v"?wD(t):SD(t)},RD=function(e,t){return e==="h"&&t==="rtl"?-1:1},ED=function(e,t,r,s,l){var h=RD(e,window.getComputedStyle(t).direction),C=h*s,N=r.target,y=t.contains(N),u=!1,R=C>0,v=0,b=0;do{if(!N)break;var E=LS(e,N),_=E[0],m=E[1],k=E[2],w=m-k-h*_;(_||w)&&jS(e,N)&&(v+=w,b+=_);var F=N.parentNode;N=F&&F.nodeType===Node.DOCUMENT_FRAGMENT_NODE?F.host:F}while(!y&&N!==document.body||y&&(t.contains(N)||t===N));return(R&&Math.abs(v)<1||!R&&Math.abs(b)<1)&&(u=!0),u},zf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ux=function(e){return[e.deltaX,e.deltaY]},Fx=function(e){return e&&"current"in e?e.current:e},kD=function(e,t){return e[0]===t[0]&&e[1]===t[1]},CD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},TD=0,Yd=[];function PD(e){var t=Z.useRef([]),r=Z.useRef([0,0]),s=Z.useRef(),l=Z.useState(TD++)[0],h=Z.useState(OS)[0],C=Z.useRef(e);Z.useEffect(function(){C.current=e},[e]),Z.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var m=K3([e.lockRef.current],(e.shards||[]).map(Fx),!0).filter(Boolean);return m.forEach(function(k){return k.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),m.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var N=Z.useCallback(function(m,k){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!C.current.allowPinchZoom;var w=zf(m),F=r.current,g="deltaX"in m?m.deltaX:F[0]-w[0],A="deltaY"in m?m.deltaY:F[1]-w[1],P,H=m.target,D=Math.abs(g)>Math.abs(A)?"h":"v";if("touches"in m&&D==="h"&&H.type==="range")return!1;var S=zx(D,H);if(!S)return!0;if(S?P=D:(P=D==="v"?"h":"v",S=zx(D,H)),!S)return!1;if(!s.current&&"changedTouches"in m&&(g||A)&&(s.current=P),!P)return!0;var x=s.current||P;return ED(x,k,m,x==="h"?g:A)},[]),y=Z.useCallback(function(m){var k=m;if(!(!Yd.length||Yd[Yd.length-1]!==h)){var w="deltaY"in k?Ux(k):zf(k),F=t.current.filter(function(P){return P.name===k.type&&(P.target===k.target||k.target===P.shadowParent)&&kD(P.delta,w)})[0];if(F&&F.should){k.cancelable&&k.preventDefault();return}if(!F){var g=(C.current.shards||[]).map(Fx).filter(Boolean).filter(function(P){return P.contains(k.target)}),A=g.length>0?N(k,g[0]):!C.current.noIsolation;A&&k.cancelable&&k.preventDefault()}}},[]),u=Z.useCallback(function(m,k,w,F){var g={name:m,delta:k,target:w,should:F,shadowParent:ND(w)};t.current.push(g),setTimeout(function(){t.current=t.current.filter(function(A){return A!==g})},1)},[]),R=Z.useCallback(function(m){r.current=zf(m),s.current=void 0},[]),v=Z.useCallback(function(m){u(m.type,Ux(m),m.target,N(m,e.lockRef.current))},[]),b=Z.useCallback(function(m){u(m.type,zf(m),m.target,N(m,e.lockRef.current))},[]);Z.useEffect(function(){return Yd.push(h),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:b}),document.addEventListener("wheel",y,Gd),document.addEventListener("touchmove",y,Gd),document.addEventListener("touchstart",R,Gd),function(){Yd=Yd.filter(function(m){return m!==h}),document.removeEventListener("wheel",y,Gd),document.removeEventListener("touchmove",y,Gd),document.removeEventListener("touchstart",R,Gd)}},[]);var E=e.removeScrollBar,_=e.inert;return Z.createElement(Z.Fragment,null,_?Z.createElement(h,{styles:CD(l)}):null,E?Z.createElement(yD,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function ND(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const DD=sD(AS,PD);var IS=Z.forwardRef(function(e,t){return Z.createElement($m,vl({},e,{ref:t,sideCar:DD}))});IS.classNames=$m.classNames;var AD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Kd=new WeakMap,Uf=new WeakMap,Ff={},Mv=0,BS=function(e){return e&&(e.host||BS(e.parentNode))},OD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=BS(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},MD=function(e,t,r,s){var l=OD(t,Array.isArray(e)?e:[e]);Ff[r]||(Ff[r]=new WeakMap);var h=Ff[r],C=[],N=new Set,y=new Set(l),u=function(v){!v||N.has(v)||(N.add(v),u(v.parentNode))};l.forEach(u);var R=function(v){!v||y.has(v)||Array.prototype.forEach.call(v.children,function(b){if(N.has(b))R(b);else try{var E=b.getAttribute(s),_=E!==null&&E!=="false",m=(Kd.get(b)||0)+1,k=(h.get(b)||0)+1;Kd.set(b,m),h.set(b,k),C.push(b),m===1&&_&&Uf.set(b,!0),k===1&&b.setAttribute(r,"true"),_||b.setAttribute(s,"true")}catch(w){console.error("aria-hidden: cannot operate on ",b,w)}})};return R(t),N.clear(),Mv++,function(){C.forEach(function(v){var b=Kd.get(v)-1,E=h.get(v)-1;Kd.set(v,b),h.set(v,E),b||(Uf.has(v)||v.removeAttribute(s),Uf.delete(v)),E||v.removeAttribute(r)}),Mv--,Mv||(Kd=new WeakMap,Kd=new WeakMap,Uf=new WeakMap,Ff={})}},jD=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),l=AD(e);return l?(s.push.apply(s,Array.from(l.querySelectorAll("[aria-live], script"))),MD(s,l,r,"aria-hidden")):function(){return null}},Wm="Dialog",[zS,Kz]=G0(Wm),[LD,al]=zS(Wm),US=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:l,onOpenChange:h,modal:C=!0}=e,N=Z.useRef(null),y=Z.useRef(null),[u,R]=E3({prop:s,defaultProp:l??!1,onChange:h,caller:Wm});return o.jsx(LD,{scope:t,triggerRef:N,contentRef:y,contentId:Cv(),titleId:Cv(),descriptionId:Cv(),open:u,onOpenChange:R,onOpenToggle:Z.useCallback(()=>R(v=>!v),[R]),modal:C,children:r})};US.displayName=Wm;var FS="DialogTrigger",HS=Z.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,l=al(FS,r),h=Wo(t,l.triggerRef);return o.jsx(no.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Q0(l.open),...s,ref:h,onClick:Lu(e.onClick,l.onOpenToggle)})});HS.displayName=FS;var Y0="DialogPortal",[ID,VS]=zS(Y0,{forceMount:void 0}),qS=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:l}=e,h=al(Y0,t);return o.jsx(ID,{scope:t,forceMount:r,children:Z.Children.map(s,C=>o.jsx(qm,{present:r||h.open,children:o.jsx(PS,{asChild:!0,container:l,children:C})}))})};qS.displayName=Y0;var fm="DialogOverlay",$S=Z.forwardRef((e,t)=>{const r=VS(fm,e.__scopeDialog),{forceMount:s=r.forceMount,...l}=e,h=al(fm,e.__scopeDialog);return h.modal?o.jsx(qm,{present:s||h.open,children:o.jsx(zD,{...l,ref:t})}):null});$S.displayName=fm;var BD=F0("DialogOverlay.RemoveScroll"),zD=Z.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,l=al(fm,r);return o.jsx(IS,{as:BD,allowPinchZoom:!0,shards:[l.contentRef],children:o.jsx(no.div,{"data-state":Q0(l.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),pd="DialogContent",WS=Z.forwardRef((e,t)=>{const r=VS(pd,e.__scopeDialog),{forceMount:s=r.forceMount,...l}=e,h=al(pd,e.__scopeDialog);return o.jsx(qm,{present:s||h.open,children:h.modal?o.jsx(UD,{...l,ref:t}):o.jsx(FD,{...l,ref:t})})});WS.displayName=pd;var UD=Z.forwardRef((e,t)=>{const r=al(pd,e.__scopeDialog),s=Z.useRef(null),l=Wo(t,r.contentRef,s);return Z.useEffect(()=>{const h=s.current;if(h)return jD(h)},[]),o.jsx(ZS,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Lu(e.onCloseAutoFocus,h=>{h.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Lu(e.onPointerDownOutside,h=>{const C=h.detail.originalEvent,N=C.button===0&&C.ctrlKey===!0;(C.button===2||N)&&h.preventDefault()}),onFocusOutside:Lu(e.onFocusOutside,h=>h.preventDefault())})}),FD=Z.forwardRef((e,t)=>{const r=al(pd,e.__scopeDialog),s=Z.useRef(!1),l=Z.useRef(!1);return o.jsx(ZS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:h=>{e.onCloseAutoFocus?.(h),h.defaultPrevented||(s.current||r.triggerRef.current?.focus(),h.preventDefault()),s.current=!1,l.current=!1},onInteractOutside:h=>{e.onInteractOutside?.(h),h.defaultPrevented||(s.current=!0,h.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const C=h.target;r.triggerRef.current?.contains(C)&&h.preventDefault(),h.detail.originalEvent.type==="focusin"&&l.current&&h.preventDefault()}})}),ZS=Z.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:l,onCloseAutoFocus:h,...C}=e,N=al(pd,r),y=Z.useRef(null),u=Wo(t,y);return Y3(),o.jsxs(o.Fragment,{children:[o.jsx(CS,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:l,onUnmountAutoFocus:h,children:o.jsx(ES,{role:"dialog",id:N.contentId,"aria-describedby":N.descriptionId,"aria-labelledby":N.titleId,"data-state":Q0(N.open),...C,ref:u,onDismiss:()=>N.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(HD,{titleId:N.titleId}),o.jsx(qD,{contentRef:y,descriptionId:N.descriptionId})]})]})}),K0="DialogTitle",GS=Z.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,l=al(K0,r);return o.jsx(no.h2,{id:l.titleId,...s,ref:t})});GS.displayName=K0;var YS="DialogDescription",KS=Z.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,l=al(YS,r);return o.jsx(no.p,{id:l.descriptionId,...s,ref:t})});KS.displayName=YS;var QS="DialogClose",JS=Z.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,l=al(QS,r);return o.jsx(no.button,{type:"button",...s,ref:t,onClick:Lu(e.onClick,()=>l.onOpenChange(!1))})});JS.displayName=QS;function Q0(e){return e?"open":"closed"}var XS="DialogTitleWarning",[Qz,e2]=b3(XS,{contentName:pd,titleName:K0,docsSlug:"dialog"}),HD=({titleId:e})=>{const t=e2(XS),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return Z.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},VD="DialogDescriptionWarning",qD=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${e2(VD).contentName}}.`;return Z.useEffect(()=>{const l=e.current?.getAttribute("aria-describedby");t&&l&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},$D=US,WD=HS,ZD=qS,GD=$S,YD=WS,KD=GS,QD=KS,JD=JS;function J0({...e}){return o.jsx($D,{"data-slot":"dialog",...e})}function t2({...e}){return o.jsx(WD,{"data-slot":"dialog-trigger",...e})}function XD({...e}){return o.jsx(ZD,{"data-slot":"dialog-portal",...e})}function eA({className:e,...t}){return o.jsx(GD,{"data-slot":"dialog-overlay",className:Ys("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function X0({className:e,children:t,showCloseButton:r=!0,...s}){return o.jsxs(XD,{"data-slot":"dialog-portal",children:[o.jsx(eA,{}),o.jsxs(YD,{"data-slot":"dialog-content",className:Ys("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...s,children:[t,r&&o.jsxs(JD,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[o.jsx(Fm,{}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ey({className:e,...t}){return o.jsx("div",{"data-slot":"dialog-header",className:Ys("flex flex-col gap-2 text-center sm:text-left",e),...t})}function ty({className:e,...t}){return o.jsx(KD,{"data-slot":"dialog-title",className:Ys("text-lg leading-none font-semibold",e),...t})}function ny({className:e,...t}){return o.jsx(QD,{"data-slot":"dialog-description",className:Ys("text-muted-foreground text-sm",e),...t})}var tA=Object.defineProperty,nA=Object.defineProperties,rA=Object.getOwnPropertyDescriptors,mm=Object.getOwnPropertySymbols,n2=Object.prototype.hasOwnProperty,r2=Object.prototype.propertyIsEnumerable,Hx=(e,t,r)=>t in e?tA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,aA=(e,t)=>{for(var r in t||(t={}))n2.call(t,r)&&Hx(e,r,t[r]);if(mm)for(var r of mm(t))r2.call(t,r)&&Hx(e,r,t[r]);return e},sA=(e,t)=>nA(e,rA(t)),iA=(e,t)=>{var r={};for(var s in e)n2.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&mm)for(var s of mm(e))t.indexOf(s)<0&&r2.call(e,s)&&(r[s]=e[s]);return r};function oA(e){let t=setTimeout(e,0),r=setTimeout(e,10),s=setTimeout(e,50);return[t,r,s]}function cA(e){let t=Z.useRef();return Z.useEffect(()=>{t.current=e}),t.current}var lA=18,a2=40,uA=`${a2}px`,dA=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function hA({containerRef:e,inputRef:t,pushPasswordManagerStrategy:r,isFocused:s}){let[l,h]=Z.useState(!1),[C,N]=Z.useState(!1),[y,u]=Z.useState(!1),R=Z.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&l&&C,[l,C,r]),v=Z.useCallback(()=>{let b=e.current,E=t.current;if(!b||!E||y||r==="none")return;let _=b,m=_.getBoundingClientRect().left+_.offsetWidth,k=_.getBoundingClientRect().top+_.offsetHeight/2,w=m-lA,F=k;document.querySelectorAll(dA).length===0&&document.elementFromPoint(w,F)===b||(h(!0),u(!0))},[e,t,y,r]);return Z.useEffect(()=>{let b=e.current;if(!b||r==="none")return;function E(){let m=window.innerWidth-b.getBoundingClientRect().right;N(m>=a2)}E();let _=setInterval(E,1e3);return()=>{clearInterval(_)}},[e,r]),Z.useEffect(()=>{let b=s||document.activeElement===t.current;if(r==="none"||!b)return;let E=setTimeout(v,0),_=setTimeout(v,2e3),m=setTimeout(v,5e3),k=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(E),clearTimeout(_),clearTimeout(m),clearTimeout(k)}},[t,s,r,v]),{hasPWMBadge:l,willPushPWMBadge:R,PWM_BADGE_SPACE_WIDTH:uA}}var s2=Z.createContext({}),i2=Z.forwardRef((e,t)=>{var r=e,{value:s,onChange:l,maxLength:h,textAlign:C="left",pattern:N,placeholder:y,inputMode:u="numeric",onComplete:R,pushPasswordManagerStrategy:v="increase-width",pasteTransformer:b,containerClassName:E,noScriptCSSFallback:_=pA,render:m,children:k}=r,w=iA(r,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),F,g,A,P,H;let[D,S]=Z.useState(typeof w.defaultValue=="string"?w.defaultValue:""),x=s??D,d=cA(x),T=Z.useCallback(_t=>{l?.(_t),S(_t)},[l]),O=Z.useMemo(()=>N?typeof N=="string"?new RegExp(N):N:null,[N]),M=Z.useRef(null),I=Z.useRef(null),U=Z.useRef({value:x,onChange:T,isIOS:typeof window<"u"&&((g=(F=window?.CSS)==null?void 0:F.supports)==null?void 0:g.call(F,"-webkit-touch-callout","none"))}),z=Z.useRef({prev:[(A=M.current)==null?void 0:A.selectionStart,(P=M.current)==null?void 0:P.selectionEnd,(H=M.current)==null?void 0:H.selectionDirection]});Z.useImperativeHandle(t,()=>M.current,[]),Z.useEffect(()=>{let _t=M.current,on=I.current;if(!_t||!on)return;U.current.value!==_t.value&&U.current.onChange(_t.value),z.current.prev=[_t.selectionStart,_t.selectionEnd,_t.selectionDirection];function ln(){if(document.activeElement!==_t){we(null),me(null);return}let rn=_t.selectionStart,Ne=_t.selectionEnd,Me=_t.selectionDirection,Ze=_t.maxLength,Ft=_t.value,Tt=z.current.prev,St=-1,un=-1,Sn;if(Ft.length!==0&&rn!==null&&Ne!==null){let Sr=rn===Ne,Ur=rn===Ft.length&&Ft.length<Ze;if(Sr&&!Ur){let xr=rn;if(xr===0)St=0,un=1,Sn="forward";else if(xr===Ze)St=xr-1,un=xr,Sn="backward";else if(Ze>1&&Ft.length>1){let Or=0;if(Tt[0]!==null&&Tt[1]!==null){Sn=xr<Tt[1]?"backward":"forward";let Kr=Tt[0]===Tt[1]&&Tt[0]<Ze;Sn==="backward"&&!Kr&&(Or=-1)}St=Or+xr,un=Or+xr+1}}St!==-1&&un!==-1&&St!==un&&M.current.setSelectionRange(St,un,Sn)}let Ut=St!==-1?St:rn,nr=un!==-1?un:Ne,Ar=Sn??Me;we(Ut),me(nr),z.current.prev=[Ut,nr,Ar]}if(document.addEventListener("selectionchange",ln,{capture:!0}),ln(),document.activeElement===_t&&Q(!0),!document.getElementById("input-otp-style")){let rn=document.createElement("style");if(rn.id="input-otp-style",document.head.appendChild(rn),rn.sheet){let Ne="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";ap(rn.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),ap(rn.sheet,`[data-input-otp]:autofill { ${Ne} }`),ap(rn.sheet,`[data-input-otp]:-webkit-autofill { ${Ne} }`),ap(rn.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),ap(rn.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Pn=()=>{on&&on.style.setProperty("--root-height",`${_t.clientHeight}px`)};Pn();let En=new ResizeObserver(Pn);return En.observe(_t),()=>{document.removeEventListener("selectionchange",ln,{capture:!0}),En.disconnect()}},[]);let[$,q]=Z.useState(!1),[ae,Q]=Z.useState(!1),[ve,we]=Z.useState(null),[Re,me]=Z.useState(null);Z.useEffect(()=>{oA(()=>{var _t,on,ln,Pn;(_t=M.current)==null||_t.dispatchEvent(new Event("input"));let En=(on=M.current)==null?void 0:on.selectionStart,rn=(ln=M.current)==null?void 0:ln.selectionEnd,Ne=(Pn=M.current)==null?void 0:Pn.selectionDirection;En!==null&&rn!==null&&(we(En),me(rn),z.current.prev=[En,rn,Ne])})},[x,ae]),Z.useEffect(()=>{d!==void 0&&x!==d&&d.length<h&&x.length===h&&R?.(x)},[h,R,d,x]);let Ce=hA({containerRef:I,inputRef:M,pushPasswordManagerStrategy:v,isFocused:ae}),Be=Z.useCallback(_t=>{let on=_t.currentTarget.value.slice(0,h);if(on.length>0&&O&&!O.test(on)){_t.preventDefault();return}typeof d=="string"&&on.length<d.length&&document.dispatchEvent(new Event("selectionchange")),T(on)},[h,T,d,O]),be=Z.useCallback(()=>{var _t;if(M.current){let on=Math.min(M.current.value.length,h-1),ln=M.current.value.length;(_t=M.current)==null||_t.setSelectionRange(on,ln),we(on),me(ln)}Q(!0)},[h]),Ye=Z.useCallback(_t=>{var on,ln;let Pn=M.current;if(!b&&(!U.current.isIOS||!_t.clipboardData||!Pn))return;let En=_t.clipboardData.getData("text/plain"),rn=b?b(En):En;_t.preventDefault();let Ne=(on=M.current)==null?void 0:on.selectionStart,Me=(ln=M.current)==null?void 0:ln.selectionEnd,Ze=(Ne!==Me?x.slice(0,Ne)+rn+x.slice(Me):x.slice(0,Ne)+rn+x.slice(Ne)).slice(0,h);if(Ze.length>0&&O&&!O.test(Ze))return;Pn.value=Ze,T(Ze);let Ft=Math.min(Ze.length,h-1),Tt=Ze.length;Pn.setSelectionRange(Ft,Tt),we(Ft),me(Tt)},[h,T,O,x]),Qe=Z.useMemo(()=>({position:"relative",cursor:w.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[w.disabled]),Ge=Z.useMemo(()=>({position:"absolute",inset:0,width:Ce.willPushPWMBadge?`calc(100% + ${Ce.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Ce.willPushPWMBadge?`inset(0 ${Ce.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:C,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Ce.PWM_BADGE_SPACE_WIDTH,Ce.willPushPWMBadge,C]),He=Z.useMemo(()=>Z.createElement("input",sA(aA({autoComplete:w.autoComplete||"one-time-code"},w),{"data-input-otp":!0,"data-input-otp-placeholder-shown":x.length===0||void 0,"data-input-otp-mss":ve,"data-input-otp-mse":Re,inputMode:u,pattern:O?.source,"aria-placeholder":y,style:Ge,maxLength:h,value:x,ref:M,onPaste:_t=>{var on;Ye(_t),(on=w.onPaste)==null||on.call(w,_t)},onChange:Be,onMouseOver:_t=>{var on;q(!0),(on=w.onMouseOver)==null||on.call(w,_t)},onMouseLeave:_t=>{var on;q(!1),(on=w.onMouseLeave)==null||on.call(w,_t)},onFocus:_t=>{var on;be(),(on=w.onFocus)==null||on.call(w,_t)},onBlur:_t=>{var on;Q(!1),(on=w.onBlur)==null||on.call(w,_t)}})),[Be,be,Ye,u,Ge,h,Re,ve,w,O?.source,x]),Te=Z.useMemo(()=>({slots:Array.from({length:h}).map((_t,on)=>{var ln;let Pn=ae&&ve!==null&&Re!==null&&(ve===Re&&on===ve||on>=ve&&on<Re),En=x[on]!==void 0?x[on]:null,rn=x[0]!==void 0?null:(ln=y?.[on])!=null?ln:null;return{char:En,placeholderChar:rn,isActive:Pn,hasFakeCaret:Pn&&En===null}}),isFocused:ae,isHovering:!w.disabled&&$}),[ae,$,h,Re,ve,w.disabled,x]),dt=Z.useMemo(()=>m?m(Te):Z.createElement(s2.Provider,{value:Te},k),[k,Te,m]);return Z.createElement(Z.Fragment,null,_!==null&&Z.createElement("noscript",null,Z.createElement("style",null,_)),Z.createElement("div",{ref:I,"data-input-otp-container":!0,style:Qe,className:E},dt,Z.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},He)))});i2.displayName="Input";function ap(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var pA=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;function fA({className:e,containerClassName:t,...r}){return o.jsx(i2,{"data-slot":"input-otp",containerClassName:Ys("flex items-center gap-2 has-disabled:opacity-50",t),className:Ys("disabled:cursor-not-allowed",e),...r})}function Vx({className:e,...t}){return o.jsx("div",{"data-slot":"input-otp-group",className:Ys("flex items-center",e),...t})}function Qd({index:e,className:t,...r}){const s=Z.useContext(s2),{char:l,hasFakeCaret:h,isActive:C}=s?.slots[e]??{};return o.jsxs("div",{"data-slot":"input-otp-slot","data-active":C,className:Ys("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",t),...r,children:[l,h&&o.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}function mA({...e}){return o.jsx("div",{"data-slot":"input-otp-separator",role:"separator",...e,children:o.jsx(x6,{})})}function gA({className:e,type:t,...r}){return o.jsx("input",{type:t,"data-slot":"input",className:Ys("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}function vA(e,t){return Z.useReducer((r,s)=>t[r][s]??r,e)}var Fp=e=>{const{present:t,children:r}=e,s=yA(t),l=typeof r=="function"?r({present:s.isPresent}):Z.Children.only(r),h=Wo(s.ref,_A(l));return typeof r=="function"||s.isPresent?Z.cloneElement(l,{ref:h}):null};Fp.displayName="Presence";function yA(e){const[t,r]=Z.useState(),s=Z.useRef(null),l=Z.useRef(e),h=Z.useRef("none"),C=e?"mounted":"unmounted",[N,y]=vA(C,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Z.useEffect(()=>{const u=Hf(s.current);h.current=N==="mounted"?u:"none"},[N]),Jc(()=>{const u=s.current,R=l.current;if(R!==e){const b=h.current,E=Hf(u);e?y("MOUNT"):E==="none"||u?.display==="none"?y("UNMOUNT"):y(R&&b!==E?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,y]),Jc(()=>{if(t){let u;const R=t.ownerDocument.defaultView??window,v=E=>{const m=Hf(s.current).includes(CSS.escape(E.animationName));if(E.target===t&&m&&(y("ANIMATION_END"),!l.current)){const k=t.style.animationFillMode;t.style.animationFillMode="forwards",u=R.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=k)})}},b=E=>{E.target===t&&(h.current=Hf(s.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",v),t.addEventListener("animationend",v),()=>{R.clearTimeout(u),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",v),t.removeEventListener("animationend",v)}}else y("ANIMATION_END")},[t,y]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:Z.useCallback(u=>{s.current=u?getComputedStyle(u):null,r(u)},[])}}function Hf(e){return e?.animationName||"none"}function _A(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var bA=Z.createContext(void 0);function xA(e){const t=Z.useContext(bA);return e||t||"ltr"}function wA(e,[t,r]){return Math.min(r,Math.max(t,e))}function ld(e,t,{checkForDefaultPrevented:r=!0}={}){return function(l){if(e?.(l),r===!1||!l.defaultPrevented)return t?.(l)}}function SA(e,t){return Z.useReducer((r,s)=>t[r][s]??r,e)}var ry="ScrollArea",[o2,Jz]=G0(ry),[RA,Nc]=o2(ry),c2=Z.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:l,scrollHideDelay:h=600,...C}=e,[N,y]=Z.useState(null),[u,R]=Z.useState(null),[v,b]=Z.useState(null),[E,_]=Z.useState(null),[m,k]=Z.useState(null),[w,F]=Z.useState(0),[g,A]=Z.useState(0),[P,H]=Z.useState(!1),[D,S]=Z.useState(!1),x=Wo(t,T=>y(T)),d=xA(l);return o.jsx(RA,{scope:r,type:s,dir:d,scrollHideDelay:h,scrollArea:N,viewport:u,onViewportChange:R,content:v,onContentChange:b,scrollbarX:E,onScrollbarXChange:_,scrollbarXEnabled:P,onScrollbarXEnabledChange:H,scrollbarY:m,onScrollbarYChange:k,scrollbarYEnabled:D,onScrollbarYEnabledChange:S,onCornerWidthChange:F,onCornerHeightChange:A,children:o.jsx(no.div,{dir:d,...C,ref:x,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":g+"px",...e.style}})})});c2.displayName=ry;var l2="ScrollAreaViewport",u2=Z.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:l,...h}=e,C=Nc(l2,r),N=Z.useRef(null),y=Wo(t,N,C.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),o.jsx(no.div,{"data-radix-scroll-area-viewport":"",...h,ref:y,style:{overflowX:C.scrollbarXEnabled?"scroll":"hidden",overflowY:C.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:C.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});u2.displayName=l2;var wl="ScrollAreaScrollbar",d2=Z.forwardRef((e,t)=>{const{forceMount:r,...s}=e,l=Nc(wl,e.__scopeScrollArea),{onScrollbarXEnabledChange:h,onScrollbarYEnabledChange:C}=l,N=e.orientation==="horizontal";return Z.useEffect(()=>(N?h(!0):C(!0),()=>{N?h(!1):C(!1)}),[N,h,C]),l.type==="hover"?o.jsx(EA,{...s,ref:t,forceMount:r}):l.type==="scroll"?o.jsx(kA,{...s,ref:t,forceMount:r}):l.type==="auto"?o.jsx(h2,{...s,ref:t,forceMount:r}):l.type==="always"?o.jsx(ay,{...s,ref:t}):null});d2.displayName=wl;var EA=Z.forwardRef((e,t)=>{const{forceMount:r,...s}=e,l=Nc(wl,e.__scopeScrollArea),[h,C]=Z.useState(!1);return Z.useEffect(()=>{const N=l.scrollArea;let y=0;if(N){const u=()=>{window.clearTimeout(y),C(!0)},R=()=>{y=window.setTimeout(()=>C(!1),l.scrollHideDelay)};return N.addEventListener("pointerenter",u),N.addEventListener("pointerleave",R),()=>{window.clearTimeout(y),N.removeEventListener("pointerenter",u),N.removeEventListener("pointerleave",R)}}},[l.scrollArea,l.scrollHideDelay]),o.jsx(Fp,{present:r||h,children:o.jsx(h2,{"data-state":h?"visible":"hidden",...s,ref:t})})}),kA=Z.forwardRef((e,t)=>{const{forceMount:r,...s}=e,l=Nc(wl,e.__scopeScrollArea),h=e.orientation==="horizontal",C=Gm(()=>y("SCROLL_END"),100),[N,y]=SA("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return Z.useEffect(()=>{if(N==="idle"){const u=window.setTimeout(()=>y("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(u)}},[N,l.scrollHideDelay,y]),Z.useEffect(()=>{const u=l.viewport,R=h?"scrollLeft":"scrollTop";if(u){let v=u[R];const b=()=>{const E=u[R];v!==E&&(y("SCROLL"),C()),v=E};return u.addEventListener("scroll",b),()=>u.removeEventListener("scroll",b)}},[l.viewport,h,y,C]),o.jsx(Fp,{present:r||N!=="hidden",children:o.jsx(ay,{"data-state":N==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:ld(e.onPointerEnter,()=>y("POINTER_ENTER")),onPointerLeave:ld(e.onPointerLeave,()=>y("POINTER_LEAVE"))})})}),h2=Z.forwardRef((e,t)=>{const r=Nc(wl,e.__scopeScrollArea),{forceMount:s,...l}=e,[h,C]=Z.useState(!1),N=e.orientation==="horizontal",y=Gm(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,R=r.viewport.offsetHeight<r.viewport.scrollHeight;C(N?u:R)}},10);return ch(r.viewport,y),ch(r.content,y),o.jsx(Fp,{present:s||h,children:o.jsx(ay,{"data-state":h?"visible":"hidden",...l,ref:t})})}),ay=Z.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,l=Nc(wl,e.__scopeScrollArea),h=Z.useRef(null),C=Z.useRef(0),[N,y]=Z.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=v2(N.viewport,N.content),R={...s,sizes:N,onSizesChange:y,hasThumb:u>0&&u<1,onThumbChange:b=>h.current=b,onThumbPointerUp:()=>C.current=0,onThumbPointerDown:b=>C.current=b};function v(b,E){return AA(b,C.current,N,E)}return r==="horizontal"?o.jsx(CA,{...R,ref:t,onThumbPositionChange:()=>{if(l.viewport&&h.current){const b=l.viewport.scrollLeft,E=qx(b,N,l.dir);h.current.style.transform=`translate3d(${E}px, 0, 0)`}},onWheelScroll:b=>{l.viewport&&(l.viewport.scrollLeft=b)},onDragScroll:b=>{l.viewport&&(l.viewport.scrollLeft=v(b,l.dir))}}):r==="vertical"?o.jsx(TA,{...R,ref:t,onThumbPositionChange:()=>{if(l.viewport&&h.current){const b=l.viewport.scrollTop,E=qx(b,N);h.current.style.transform=`translate3d(0, ${E}px, 0)`}},onWheelScroll:b=>{l.viewport&&(l.viewport.scrollTop=b)},onDragScroll:b=>{l.viewport&&(l.viewport.scrollTop=v(b))}}):null}),CA=Z.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...l}=e,h=Nc(wl,e.__scopeScrollArea),[C,N]=Z.useState(),y=Z.useRef(null),u=Wo(t,y,h.onScrollbarXChange);return Z.useEffect(()=>{y.current&&N(getComputedStyle(y.current))},[y]),o.jsx(f2,{"data-orientation":"horizontal",...l,ref:u,sizes:r,style:{bottom:0,left:h.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:h.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Zm(r)+"px",...e.style},onThumbPointerDown:R=>e.onThumbPointerDown(R.x),onDragScroll:R=>e.onDragScroll(R.x),onWheelScroll:(R,v)=>{if(h.viewport){const b=h.viewport.scrollLeft+R.deltaX;e.onWheelScroll(b),_2(b,v)&&R.preventDefault()}},onResize:()=>{y.current&&h.viewport&&C&&s({content:h.viewport.scrollWidth,viewport:h.viewport.offsetWidth,scrollbar:{size:y.current.clientWidth,paddingStart:vm(C.paddingLeft),paddingEnd:vm(C.paddingRight)}})}})}),TA=Z.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...l}=e,h=Nc(wl,e.__scopeScrollArea),[C,N]=Z.useState(),y=Z.useRef(null),u=Wo(t,y,h.onScrollbarYChange);return Z.useEffect(()=>{y.current&&N(getComputedStyle(y.current))},[y]),o.jsx(f2,{"data-orientation":"vertical",...l,ref:u,sizes:r,style:{top:0,right:h.dir==="ltr"?0:void 0,left:h.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Zm(r)+"px",...e.style},onThumbPointerDown:R=>e.onThumbPointerDown(R.y),onDragScroll:R=>e.onDragScroll(R.y),onWheelScroll:(R,v)=>{if(h.viewport){const b=h.viewport.scrollTop+R.deltaY;e.onWheelScroll(b),_2(b,v)&&R.preventDefault()}},onResize:()=>{y.current&&h.viewport&&C&&s({content:h.viewport.scrollHeight,viewport:h.viewport.offsetHeight,scrollbar:{size:y.current.clientHeight,paddingStart:vm(C.paddingTop),paddingEnd:vm(C.paddingBottom)}})}})}),[PA,p2]=o2(wl),f2=Z.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:l,onThumbChange:h,onThumbPointerUp:C,onThumbPointerDown:N,onThumbPositionChange:y,onDragScroll:u,onWheelScroll:R,onResize:v,...b}=e,E=Nc(wl,r),[_,m]=Z.useState(null),k=Wo(t,x=>m(x)),w=Z.useRef(null),F=Z.useRef(""),g=E.viewport,A=s.content-s.viewport,P=cc(R),H=cc(y),D=Gm(v,10);function S(x){if(w.current){const d=x.clientX-w.current.left,T=x.clientY-w.current.top;u({x:d,y:T})}}return Z.useEffect(()=>{const x=d=>{const T=d.target;_?.contains(T)&&P(d,A)};return document.addEventListener("wheel",x,{passive:!1}),()=>document.removeEventListener("wheel",x,{passive:!1})},[g,_,A,P]),Z.useEffect(H,[s,H]),ch(_,D),ch(E.content,D),o.jsx(PA,{scope:r,scrollbar:_,hasThumb:l,onThumbChange:cc(h),onThumbPointerUp:cc(C),onThumbPositionChange:H,onThumbPointerDown:cc(N),children:o.jsx(no.div,{...b,ref:k,style:{position:"absolute",...b.style},onPointerDown:ld(e.onPointerDown,x=>{x.button===0&&(x.target.setPointerCapture(x.pointerId),w.current=_.getBoundingClientRect(),F.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E.viewport&&(E.viewport.style.scrollBehavior="auto"),S(x))}),onPointerMove:ld(e.onPointerMove,S),onPointerUp:ld(e.onPointerUp,x=>{const d=x.target;d.hasPointerCapture(x.pointerId)&&d.releasePointerCapture(x.pointerId),document.body.style.webkitUserSelect=F.current,E.viewport&&(E.viewport.style.scrollBehavior=""),w.current=null})})})}),gm="ScrollAreaThumb",m2=Z.forwardRef((e,t)=>{const{forceMount:r,...s}=e,l=p2(gm,e.__scopeScrollArea);return o.jsx(Fp,{present:r||l.hasThumb,children:o.jsx(NA,{ref:t,...s})})}),NA=Z.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...l}=e,h=Nc(gm,r),C=p2(gm,r),{onThumbPositionChange:N}=C,y=Wo(t,v=>C.onThumbChange(v)),u=Z.useRef(void 0),R=Gm(()=>{u.current&&(u.current(),u.current=void 0)},100);return Z.useEffect(()=>{const v=h.viewport;if(v){const b=()=>{if(R(),!u.current){const E=OA(v,N);u.current=E,N()}};return N(),v.addEventListener("scroll",b),()=>v.removeEventListener("scroll",b)}},[h.viewport,R,N]),o.jsx(no.div,{"data-state":C.hasThumb?"visible":"hidden",...l,ref:y,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ld(e.onPointerDownCapture,v=>{const E=v.target.getBoundingClientRect(),_=v.clientX-E.left,m=v.clientY-E.top;C.onThumbPointerDown({x:_,y:m})}),onPointerUp:ld(e.onPointerUp,C.onThumbPointerUp)})});m2.displayName=gm;var sy="ScrollAreaCorner",g2=Z.forwardRef((e,t)=>{const r=Nc(sy,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?o.jsx(DA,{...e,ref:t}):null});g2.displayName=sy;var DA=Z.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,l=Nc(sy,r),[h,C]=Z.useState(0),[N,y]=Z.useState(0),u=!!(h&&N);return ch(l.scrollbarX,()=>{const R=l.scrollbarX?.offsetHeight||0;l.onCornerHeightChange(R),y(R)}),ch(l.scrollbarY,()=>{const R=l.scrollbarY?.offsetWidth||0;l.onCornerWidthChange(R),C(R)}),u?o.jsx(no.div,{...s,ref:t,style:{width:h,height:N,position:"absolute",right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function vm(e){return e?parseInt(e,10):0}function v2(e,t){const r=e/t;return isNaN(r)?0:r}function Zm(e){const t=v2(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function AA(e,t,r,s="ltr"){const l=Zm(r),h=l/2,C=t||h,N=l-C,y=r.scrollbar.paddingStart+C,u=r.scrollbar.size-r.scrollbar.paddingEnd-N,R=r.content-r.viewport,v=s==="ltr"?[0,R]:[R*-1,0];return y2([y,u],v)(e)}function qx(e,t,r="ltr"){const s=Zm(t),l=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,h=t.scrollbar.size-l,C=t.content-t.viewport,N=h-s,y=r==="ltr"?[0,C]:[C*-1,0],u=wA(e,y);return y2([0,C],[0,N])(u)}function y2(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function _2(e,t){return e>0&&e<t}var OA=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function l(){const h={left:e.scrollLeft,top:e.scrollTop},C=r.left!==h.left,N=r.top!==h.top;(C||N)&&t(),r=h,s=window.requestAnimationFrame(l)}(),()=>window.cancelAnimationFrame(s)};function Gm(e,t){const r=cc(e),s=Z.useRef(0);return Z.useEffect(()=>()=>window.clearTimeout(s.current),[]),Z.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function ch(e,t){const r=cc(t);Jc(()=>{let s=0;if(e){const l=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return l.observe(e),()=>{window.cancelAnimationFrame(s),l.unobserve(e)}}},[e,r])}var MA=c2,jA=u2,LA=g2;function IA({className:e,children:t,...r}){return o.jsxs(MA,{"data-slot":"scroll-area",className:Ys("relative",e),...r,children:[o.jsx(jA,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),o.jsx(BA,{}),o.jsx(LA,{})]})}function BA({className:e,orientation:t="vertical",...r}){return o.jsx(d2,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Ys("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...r,children:o.jsx(m2,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var jv={exports:{}},Lv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function zA(){if($x)return Lv;$x=1;var e=Dm();function t(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var r=typeof Object.is=="function"?Object.is:t,s=e.useState,l=e.useEffect,h=e.useLayoutEffect,C=e.useDebugValue;function N(v,b){var E=b(),_=s({inst:{value:E,getSnapshot:b}}),m=_[0].inst,k=_[1];return h(function(){m.value=E,m.getSnapshot=b,y(m)&&k({inst:m})},[v,E,b]),l(function(){return y(m)&&k({inst:m}),v(function(){y(m)&&k({inst:m})})},[v]),C(E),E}function y(v){var b=v.getSnapshot;v=v.value;try{var E=b();return!r(v,E)}catch{return!0}}function u(v,b){return b()}var R=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:N;return Lv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:R,Lv}var Wx;function UA(){return Wx||(Wx=1,jv.exports=zA()),jv.exports}var FA=UA();function HA(){return FA.useSyncExternalStore(VA,()=>!0,()=>!1)}function VA(){return()=>{}}var iy="Avatar",[qA,Xz]=G0(iy),[$A,b2]=qA(iy),x2=Z.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[l,h]=Z.useState("idle");return o.jsx($A,{scope:r,imageLoadingStatus:l,onImageLoadingStatusChange:h,children:o.jsx(no.span,{...s,ref:t})})});x2.displayName=iy;var w2="AvatarImage",S2=Z.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:l=()=>{},...h}=e,C=b2(w2,r),N=WA(s,h),y=cc(u=>{l(u),C.onImageLoadingStatusChange(u)});return Jc(()=>{N!=="idle"&&y(N)},[N,y]),N==="loaded"?o.jsx(no.img,{...h,ref:t,src:s}):null});S2.displayName=w2;var R2="AvatarFallback",E2=Z.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...l}=e,h=b2(R2,r),[C,N]=Z.useState(s===void 0);return Z.useEffect(()=>{if(s!==void 0){const y=window.setTimeout(()=>N(!0),s);return()=>window.clearTimeout(y)}},[s]),C&&h.imageLoadingStatus!=="loaded"?o.jsx(no.span,{...l,ref:t}):null});E2.displayName=R2;function Zx(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function WA(e,{referrerPolicy:t,crossOrigin:r}){const s=HA(),l=Z.useRef(null),h=s?(l.current||(l.current=new window.Image),l.current):null,[C,N]=Z.useState(()=>Zx(h,e));return Jc(()=>{N(Zx(h,e))},[h,e]),Jc(()=>{const y=v=>()=>{N(v)};if(!h)return;const u=y("loaded"),R=y("error");return h.addEventListener("load",u),h.addEventListener("error",R),t&&(h.referrerPolicy=t),typeof r=="string"&&(h.crossOrigin=r),()=>{h.removeEventListener("load",u),h.removeEventListener("error",R)}},[h,r,t]),C}var ZA=x2,GA=S2,YA=E2;function Ep({className:e,...t}){return o.jsx(ZA,{"data-slot":"avatar",className:Ys("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function kp({className:e,...t}){return o.jsx(GA,{"data-slot":"avatar-image",className:Ys("aspect-square size-full",e),...t})}function Cp({className:e,...t}){return o.jsx(YA,{"data-slot":"avatar-fallback",className:Ys("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function ad({className:e,...t}){return o.jsx("div",{"data-slot":"skeleton",className:Ys("bg-accent animate-pulse rounded-md",e),...t})}const KA=({value:e,onChange:t,maxLength:r=6,disabled:s=!1,error:l,placeholder:h="Enter your one-time password"})=>{const[C,N]=Z.useState(e||""),y=u=>{N(u),t&&t(u)};return o.jsxs("div",{className:"space-y-2",children:[o.jsxs(fA,{maxLength:r,value:C,onChange:y,disabled:s,children:[o.jsxs(Vx,{children:[o.jsx(Qd,{index:0}),o.jsx(Qd,{index:1}),o.jsx(Qd,{index:2})]}),o.jsx(mA,{}),o.jsxs(Vx,{children:[o.jsx(Qd,{index:3}),o.jsx(Qd,{index:4}),o.jsx(Qd,{index:5})]})]}),l&&o.jsx("p",{className:"text-red-500 text-sm text-center",children:l}),o.jsx("div",{className:"text-center text-sm text-gray-600",children:C===""?o.jsx(o.Fragment,{children:h}):o.jsxs(o.Fragment,{children:["You entered: ",C]})})]})},Gx=({onClick:e,className:t="",disabled:r})=>o.jsx(Za,{to:r?"#":"/login",onClick:r?s=>s.preventDefault():e,className:`px-4 py-2 border-2 border-[#004d71] text-[#004d71] bg-white rounded font-bold hover:bg-[#f7f7f7] transition-colors duration-150 ${r?"pointer-events-none opacity-50":""} ${t}`,children:"Login"}),k2=()=>{const[e,t]=Z.useState(!1),[r,s]=Z.useState(null),{admin:l}=$o(),h=Z.useRef(null),{doctor:C,pendingValidation:N}=fs(),{hospital:y,allPublicHospital:u}=to(),{user:R}=si(),v=!!(C||N),b=l||C||N||y||R,E=()=>window.scrollTo({top:0,behavior:"smooth"}),_=()=>t(g=>!g),m=()=>{t(!1),s(null)};Z.useEffect(()=>{const g=A=>{h.current&&!h.current.contains(A.target)&&m()};return e&&document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[e]);const k=(g=!1)=>l?o.jsx(Ui,{href:"/admin/dashboard",label:"Admin Dashboard",onClick:g?m:void 0}):o.jsx(Ui,{href:b?"#":"/admin/login",label:"Admin",onClick:g?m:void 0,className:b?"pointer-events-none opacity-50":""}),w=()=>o.jsxs("nav",{className:"hidden lg:flex items-center space-x-4 ml-4 xl:ml-8 flex-1",children:[ux.map((g,A)=>g.label==="Hospitals"?o.jsx(fx,{idx:A,openDropdown:r,setOpenDropdown:s,isMobile:!1,onLinkClick:m},g.label):g.dropdown?o.jsx(px,{link:g,idx:A,openDropdown:r,setOpenDropdown:s},g.label):o.jsx(Ui,{href:g.href,label:g.label},`${g.label}-${A}`)),o.jsxs("div",{className:"flex justify-end space-x-3 w-fit ms-auto",children:[o.jsx(Gx,{className:"ml-2",disabled:b}),o.jsx(Ui,{href:b?"#":"/doctor/login",label:"Doctor",className:v||b?"pointer-events-none opacity-50":""}),o.jsx(Ui,{href:b?"#":"/hospital/login",label:"Hospital",className:b?"pointer-events-none opacity-50":""}),k(!1),v&&o.jsx(Ui,{href:"/doctor/profile",label:"My Profile"}),C&&o.jsx(Ui,{href:"/doctor/messages",label:"Messages"}),y&&o.jsx(Ui,{href:"/hospital/profile",label:"My Hospital Profile"}),R&&o.jsx(Ui,{href:"/profile",label:"My Profile"}),R&&o.jsx(Ui,{href:"/user/message",label:"Messages"})]})]}),F=()=>e&&o.jsxs("nav",{ref:h,className:"absolute top-full left-0 w-full bg-white shadow-lg z-40 flex flex-col py-4 px-4 lg:hidden animate-fade-in max-h-[80vh] overflow-y-auto",children:[ux.map((g,A)=>g.label==="Hospitals"?o.jsx(fx,{idx:A,openDropdown:r,setOpenDropdown:s,isMobile:!0,onLinkClick:m},g.label):g.dropdown?o.jsx(px,{link:g,idx:A,openDropdown:r,setOpenDropdown:s,isMobile:!0,onLinkClick:m},g.label):o.jsx(Ui,{href:g.href,label:g.label,onClick:m},g.label)),o.jsx(Gx,{onClick:m,className:"mt-2",disabled:b}),o.jsx(Ui,{href:b?"#":"/doctor/login",label:"Doctor",onClick:m,className:v||b?"pointer-events-none opacity-50":""}),o.jsx(Ui,{href:b?"#":"/register/hospital",label:"Register Hospital",className:`flex items-center gap-2 px-4 py-2 bg-[#004d71] text-white rounded border border-[#004d71] font-medium hover:bg-sky-500 transition-colors duration-150 ${b?"pointer-events-none opacity-50":""}`}),k(!0),v&&o.jsx(Ui,{href:"/doctor/profile",label:"My Profile",onClick:m}),v&&o.jsx(Ui,{href:"/doctor/messages",label:"Messages",onClick:m}),y&&o.jsx(Ui,{href:"/doctor/profile",label:"My Hospital Profile",onClick:m}),R&&o.jsx(Ui,{href:"/profile",label:"My Profile",onClick:m}),R&&o.jsx(Ui,{href:"/user/message",label:"Messages",onClick:m})]});return o.jsx("header",{className:"bg-white shadow-md sticky top-0 z-50 w-full",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between h-20 relative",children:[o.jsx(Za,{to:"/","aria-label":"quickMed Logo",className:"flex items-center",onClick:E,children:o.jsx("img",{src:"/quickMed//images/logo.png",alt:"logo",className:"w-[120px] h-auto"})}),o.jsx(w,{}),o.jsx("button",{onClick:_,className:"lg:hidden inline-flex items-center justify-center p-2 rounded-md text-[#014e78] hover:text-white hover:bg-[#014e78]",children:o.jsx(T4,{})}),o.jsx(F,{}),o.jsx("a",{target:"_self",href:"https://wa.me/923488597922","aria-label":"Sadeeq Helpline",className:"lg:hidden absolute right-16 top-1/2 -translate-y-1/2 text-[#014e78] hover:text-[#004d71]"})]})})})},QA=()=>o.jsx("footer",{className:"bg-emerald-900 text-emerald-100",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:f4.map((e,t)=>o.jsxs("div",{className:"rounded-xl bg-emerald-800 bg-opacity-60 p-6 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4 text-emerald-50",children:e.title}),o.jsx("ul",{className:"space-y-2",children:e.links.map((r,s)=>o.jsx("li",{children:r.href.startsWith("/")?o.jsx(Za,{to:r.href,className:"text-emerald-200 hover:text-white transition-colors duration-200",children:r.name}):o.jsx("a",{href:r.href,className:"text-emerald-200 hover:text-white transition-colors duration-200",children:r.name})},s))})]},t))}),o.jsxs("div",{className:"border-t border-emerald-700 mt-12 pt-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[o.jsxs("div",{className:"mb-4 md:mb-0",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{className:"h-8 w-8 text-emerald-100 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2H4a1 1 0 01-1-1V4z",clipRule:"evenodd"})}),o.jsx("span",{className:"text-xl font-bold text-emerald-50",children:"quickMed"})]}),o.jsx("p",{className:"text-emerald-200 mt-2",children:"Pakistan's most trusted healthcare platform"})]}),o.jsx("div",{className:"flex space-x-4",children:m4.map((e,t)=>o.jsx("a",{href:e.href,className:"text-2xl hover:text-emerald-200 transition-colors duration-200",title:e.name,children:e.icon},t))})]}),o.jsx("div",{className:"text-center mt-8 pt-8 border-t border-emerald-700",children:o.jsxs("p",{className:"text-emerald-200 text-sm",children:[" 2024 Sadeeq and Haider. All rights reserved. |",o.jsx(Za,{to:"#",className:"hover:text-white ml-1",children:"Privacy Policy"})," ","|",o.jsx(Za,{to:"#",className:"hover:text-white ml-1",children:"Terms of Service"})]})})]})]})}),C2=({className:e="",size:t="default"})=>{const{openModal:r}=Zw(),s={small:"w-10 h-10",default:"w-12 h-12",large:"w-14 h-14"},l={small:"w-5 h-5",default:"w-6 h-6",large:"w-7 h-7"};return o.jsx("button",{onClick:r,className:`${s[t]} ${e} fixed bottom-6 right-6 bg-gradient-to-r from-emerald-500 to-blue-600 text-white rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center justify-center z-40`,"aria-label":"Open AI Health Assistant",children:o.jsxs("div",{className:"relative",children:[o.jsx(dp,{className:l[t]}),o.jsx(n0,{className:"absolute -top-1 -right-1 w-3 h-3 text-yellow-300 animate-pulse"})]})})},JA=()=>{const{messages:e,inputMessage:t,loading:r,isModalOpen:s,chatContainerRef:l,isInputValid:h,MIN_CHARACTERS:C,setInputMessage:N,handleSendMessage:y,handleKeyDown:u,closeModal:R,handleSpecialtyClick:v,handleDoctorClick:b}=Zw(),E=Z.useRef(null);return Z.useEffect(()=>{const _=m=>{s&&E.current&&!E.current.contains(m.target)&&R()};return s&&document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[s,R]),s?o.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none flex justify-end",children:o.jsxs("div",{ref:E,className:"pointer-events-auto relative w-full max-w-sm h-full bg-white shadow-xl flex flex-col",role:"dialog","aria-modal":"true","aria-label":"Quick help chat",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-emerald-600 to-blue-600 text-white",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(dp,{className:"w-6 h-6"}),o.jsx(n0,{className:"absolute -top-1 -right-1 w-3 h-3 text-yellow-300 animate-pulse"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sm",children:"Dr. AI Assistant"}),o.jsx("p",{className:"text-xs opacity-90",children:"Virtual Health Consultation"})]})]}),o.jsx("button",{onClick:R,className:"p-2 hover:bg-white/20 rounded-full transition-colors","aria-label":"Close quick help",children:o.jsx(Fm,{className:"w-5 h-5"})})]}),o.jsxs("div",{ref:l,className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gradient-to-b from-blue-50/30 to-white",children:[e.map(_=>{const m=_.type==="user";return o.jsx("div",{className:`flex ${m?"justify-end":"justify-start"} mb-3`,children:o.jsxs("div",{className:`flex items-start gap-3 max-w-[88%] ${m?"flex-row-reverse":"flex-row"}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${m?"bg-gradient-to-br from-emerald-500 to-emerald-600 shadow-lg":"bg-gradient-to-br from-blue-500 to-blue-600 shadow-lg"}`,children:m?o.jsx(B6,{className:"w-5 h-5 text-white"}):o.jsxs("div",{className:"relative",children:[o.jsx(dp,{className:"w-5 h-5 text-white"}),o.jsx(n0,{className:"absolute -top-1 -right-1 w-2 h-2 text-yellow-300"})]})}),o.jsxs("div",{className:`rounded-2xl px-4 py-3 shadow-sm ${m?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white":_.isError?"bg-red-50 border border-red-200 text-red-800":"bg-white border border-gray-200 text-gray-800 shadow-md"}`,children:[o.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:_.content}),_.apiResponse&&o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-xl border border-purple-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(L6,{className:"w-4 h-4 text-purple-600"}),o.jsx("h4",{className:"font-semibold text-purple-800 text-sm",children:"Analysis Summary"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(U6,{className:"w-3 h-3 text-purple-600"}),o.jsx("span",{className:"text-purple-700",children:`${_.apiResponse?.totalDoctorsAnalyzed||_.apiResponse?.data?.totalDoctorsAnalyzed||_.recommendations?.totalDoctorsAnalyzed||_.recommendations?.analysis?.totalDoctorsAnalyzed||0} doctors analyzed`})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(i6,{className:"w-3 h-3 text-purple-600"}),o.jsx("span",{className:"text-purple-700",children:(()=>{const k=_.apiResponse?.timestamp||_.recommendations?.timestamp||new Date;return new Date(k).toLocaleTimeString()})()})]})]})]}),_.recommendations?.analysis?.symptomAnalysis&&o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-xl border border-blue-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(gx,{className:"w-4 h-4 text-blue-600"}),o.jsx("h4",{className:"font-semibold text-blue-800 text-sm",children:"Symptom Analysis"})]}),o.jsx("p",{className:"text-blue-700 text-xs leading-relaxed",children:_.recommendations.analysis.symptomAnalysis})]}),_.recommendations?.analysis?.generalAdvice&&o.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 p-4 rounded-xl border border-yellow-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(p6,{className:"w-4 h-4 text-yellow-600"}),o.jsx("h4",{className:"font-semibold text-yellow-800 text-sm",children:"Health Advice"})]}),o.jsx("p",{className:"text-yellow-700 text-xs leading-relaxed",children:_.recommendations.analysis.generalAdvice})]}),_.recommendations?.analysis?.recommendedSpecialities&&o.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-emerald-100 p-4 rounded-xl border border-emerald-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(N6,{className:"w-4 h-4 text-emerald-600"}),o.jsx("h4",{className:"font-semibold text-emerald-800 text-sm",children:"Recommended Specialties"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:_.recommendations.analysis.recommendedSpecialities.map((k,w)=>o.jsx("button",{onClick:()=>v(k),className:"inline-block bg-emerald-200 text-emerald-800 text-xs px-3 py-1.5 rounded-full font-medium border border-emerald-300 hover:bg-emerald-300 hover:border-emerald-400 transition-all duration-200 cursor-pointer",children:k},w))})]}),_.recommendations?.analysis?.recommendations&&o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(dp,{className:"w-4 h-4 text-gray-600"}),o.jsxs("h4",{className:"font-semibold text-gray-800 text-sm",children:["Top Doctors (",_.recommendations.analysis.recommendations.length,")"]})]}),o.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:_.recommendations.analysis.recommendations.slice(0,3).map((k,w)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gradient-to-r from-gray-50 to-white hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>b(k),children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h5",{className:"font-semibold text-gray-800 text-sm",children:k.name}),o.jsxs("span",{className:"text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full",children:[k.relevanceScore,"/10"]})]}),o.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:k.speciality.slice(0,2).map((F,g)=>o.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-md font-medium",children:F},g))}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(gx,{className:"w-3 h-3"}),k.experience," years"]}),o.jsx("span",{children:""}),o.jsx("span",{children:k.city||"Location N/A"})]}),o.jsx("div",{className:"mt-2 text-xs text-gray-500",children:k.reasoning})]},w))})]})]}),o.jsx("span",{className:"text-xs opacity-70 mt-2 block",children:_.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},_.id)}),r&&o.jsx("div",{className:"flex justify-start mb-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:o.jsx(dp,{className:"w-5 h-5 text-white"})}),o.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl px-4 py-3 shadow-md",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),o.jsx("span",{className:"text-sm text-gray-600 ml-2",children:"Analyzing symptoms..."})]})})]})})]}),o.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:[o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("textarea",{value:t,onChange:_=>N(_.target.value),onKeyDown:u,placeholder:`Describe your symptoms in detail (minimum ${C} characters)...`,className:`w-full px-4 py-3 text-sm border rounded-xl focus:outline-none focus:ring-2 resize-none shadow-sm transition-all duration-200 ${t.length>0&&!h?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-emerald-500 focus:border-transparent"}`,rows:1,maxLength:500,disabled:r}),o.jsxs("div",{className:"absolute right-3 bottom-2 flex items-center gap-2",children:[t.length>0&&!h&&o.jsx(vx,{className:"w-4 h-4 text-red-400"}),o.jsxs("div",{className:`text-xs ${t.length>0&&!h?"text-red-400":t.length>=C?"text-emerald-500":"text-gray-400"}`,children:[t.length,"/",C]})]})]}),o.jsx("button",{onClick:y,disabled:!t.trim()||r||!h,className:`px-4 py-3 rounded-xl transition-all duration-200 flex items-center justify-center shadow-lg transform hover:scale-105 ${h&&t.trim()?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white hover:from-emerald-600 hover:to-emerald-700 hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-label":"Send message",children:o.jsx(sS,{className:"w-4 h-4"})})]}),t.length>0&&!h&&o.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-red-500",children:[o.jsx(vx,{className:"w-3 h-3"}),o.jsxs("span",{children:["Please enter at least ",C," characters to describe your symptoms"]})]})]})]})}):null},XA=()=>{const{loading:e}=$o();return e.session?o.jsx(iS,{}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(k2,{}),o.jsx("main",{className:"flex-1",children:o.jsx(iw,{})}),o.jsx(QA,{}),o.jsx(C2,{}),o.jsx(JA,{})]})},eO=()=>{const{loading:e}=$o(),{loading:t}=fs(),{user:r}=si();return e.session?o.jsx(iS,{}):o.jsxs(o.Fragment,{children:[o.jsx(k2,{}),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50",children:o.jsx(iw,{})})]})};function tO(e,t){const r=Z.useRef(t);Z.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}const nO=1;function rO(e){return Object.freeze({__version:nO,map:e})}const T2=Z.createContext(null);function P2(){const e=Z.use(T2);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function aO(e){function t(r,s){const{instance:l}=e(r).current;return Z.useImperativeHandle(s,()=>l),null}return Z.forwardRef(t)}function sO(e,t){const r=Z.useRef(void 0);Z.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function N2(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}var pp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var iO=pp.exports,Yx;function oO(){return Yx||(Yx=1,function(e,t){(function(r,s){s(t)})(iO,function(r){var s="1.9.4";function l(i){var p,j,W,te;for(j=1,W=arguments.length;j<W;j++){te=arguments[j];for(p in te)i[p]=te[p]}return i}var h=Object.create||function(){function i(){}return function(p){return i.prototype=p,new i}}();function C(i,p){var j=Array.prototype.slice;if(i.bind)return i.bind.apply(i,j.call(arguments,1));var W=j.call(arguments,2);return function(){return i.apply(p,W.length?W.concat(j.call(arguments)):arguments)}}var N=0;function y(i){return"_leaflet_id"in i||(i._leaflet_id=++N),i._leaflet_id}function u(i,p,j){var W,te,he,ze;return ze=function(){W=!1,te&&(he.apply(j,te),te=!1)},he=function(){W?te=arguments:(i.apply(j,arguments),setTimeout(ze,p),W=!0)},he}function R(i,p,j){var W=p[1],te=p[0],he=W-te;return i===W&&j?i:((i-te)%he+he)%he+te}function v(){return!1}function b(i,p){if(p===!1)return i;var j=Math.pow(10,p===void 0?6:p);return Math.round(i*j)/j}function E(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function _(i){return E(i).split(/\s+/)}function m(i,p){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?h(i.options):{});for(var j in p)i.options[j]=p[j];return i.options}function k(i,p,j){var W=[];for(var te in i)W.push(encodeURIComponent(j?te.toUpperCase():te)+"="+encodeURIComponent(i[te]));return(!p||p.indexOf("?")===-1?"?":"&")+W.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function F(i,p){return i.replace(w,function(j,W){var te=p[W];if(te===void 0)throw new Error("No value provided for variable "+j);return typeof te=="function"&&(te=te(p)),te})}var g=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function A(i,p){for(var j=0;j<i.length;j++)if(i[j]===p)return j;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var D=0;function S(i){var p=+new Date,j=Math.max(0,16-(p-D));return D=p+j,window.setTimeout(i,j)}var x=window.requestAnimationFrame||H("RequestAnimationFrame")||S,d=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function T(i,p,j){if(j&&x===S)i.call(p);else return x.call(window,C(i,p))}function O(i){i&&d.call(window,i)}var M={__proto__:null,extend:l,create:h,bind:C,get lastId(){return N},stamp:y,throttle:u,wrapNum:R,falseFn:v,formatNum:b,trim:E,splitWords:_,setOptions:m,getParamString:k,template:F,isArray:g,indexOf:A,emptyImageUrl:P,requestFn:x,cancelFn:d,requestAnimFrame:T,cancelAnimFrame:O};function I(){}I.extend=function(i){var p=function(){m(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},j=p.__super__=this.prototype,W=h(j);W.constructor=p,p.prototype=W;for(var te in this)Object.prototype.hasOwnProperty.call(this,te)&&te!=="prototype"&&te!=="__super__"&&(p[te]=this[te]);return i.statics&&l(p,i.statics),i.includes&&(U(i.includes),l.apply(null,[W].concat(i.includes))),l(W,i),delete W.statics,delete W.includes,W.options&&(W.options=j.options?h(j.options):{},l(W.options,i.options)),W._initHooks=[],W.callInitHooks=function(){if(!this._initHooksCalled){j.callInitHooks&&j.callInitHooks.call(this),this._initHooksCalled=!0;for(var he=0,ze=W._initHooks.length;he<ze;he++)W._initHooks[he].call(this)}},p},I.include=function(i){var p=this.prototype.options;return l(this.prototype,i),i.options&&(this.prototype.options=p,this.mergeOptions(i.options)),this},I.mergeOptions=function(i){return l(this.prototype.options,i),this},I.addInitHook=function(i){var p=Array.prototype.slice.call(arguments,1),j=typeof i=="function"?i:function(){this[i].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(j),this};function U(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=g(i)?i:[i];for(var p=0;p<i.length;p++)i[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var z={on:function(i,p,j){if(typeof i=="object")for(var W in i)this._on(W,i[W],p);else{i=_(i);for(var te=0,he=i.length;te<he;te++)this._on(i[te],p,j)}return this},off:function(i,p,j){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var W in i)this._off(W,i[W],p);else{i=_(i);for(var te=arguments.length===1,he=0,ze=i.length;he<ze;he++)te?this._off(i[he]):this._off(i[he],p,j)}return this},_on:function(i,p,j,W){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(i,p,j)===!1){j===this&&(j=void 0);var te={fn:p,ctx:j};W&&(te.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(te)}},_off:function(i,p,j){var W,te,he;if(this._events&&(W=this._events[i],!!W)){if(arguments.length===1){if(this._firingCount)for(te=0,he=W.length;te<he;te++)W[te].fn=v;delete this._events[i];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var ze=this._listens(i,p,j);if(ze!==!1){var it=W[ze];this._firingCount&&(it.fn=v,this._events[i]=W=W.slice()),W.splice(ze,1)}}},fire:function(i,p,j){if(!this.listens(i,j))return this;var W=l({},p,{type:i,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var te=this._events[i];if(te){this._firingCount=this._firingCount+1||1;for(var he=0,ze=te.length;he<ze;he++){var it=te[he],ht=it.fn;it.once&&this.off(i,ht,it.ctx),ht.call(it.ctx||this,W)}this._firingCount--}}return j&&this._propagateEvent(W),this},listens:function(i,p,j,W){typeof i!="string"&&console.warn('"string" type argument expected');var te=p;typeof p!="function"&&(W=!!p,te=void 0,j=void 0);var he=this._events&&this._events[i];if(he&&he.length&&this._listens(i,te,j)!==!1)return!0;if(W){for(var ze in this._eventParents)if(this._eventParents[ze].listens(i,p,j,W))return!0}return!1},_listens:function(i,p,j){if(!this._events)return!1;var W=this._events[i]||[];if(!p)return!!W.length;j===this&&(j=void 0);for(var te=0,he=W.length;te<he;te++)if(W[te].fn===p&&W[te].ctx===j)return te;return!1},once:function(i,p,j){if(typeof i=="object")for(var W in i)this._on(W,i[W],p,!0);else{i=_(i);for(var te=0,he=i.length;te<he;te++)this._on(i[te],p,j,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[y(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[y(i)],this},_propagateEvent:function(i){for(var p in this._eventParents)this._eventParents[p].fire(i.type,l({layer:i.target,propagatedFrom:i.target},i),!0)}};z.addEventListener=z.on,z.removeEventListener=z.clearAllEventListeners=z.off,z.addOneTimeEventListener=z.once,z.fireEvent=z.fire,z.hasEventListeners=z.listens;var $=I.extend(z);function q(i,p,j){this.x=j?Math.round(i):i,this.y=j?Math.round(p):p}var ae=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(i){return this.clone()._add(Q(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(Q(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new q(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new q(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(i){i=Q(i);var p=i.x-this.x,j=i.y-this.y;return Math.sqrt(p*p+j*j)},equals:function(i){return i=Q(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=Q(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function Q(i,p,j){return i instanceof q?i:g(i)?new q(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new q(i.x,i.y):new q(i,p,j)}function ve(i,p){if(i)for(var j=p?[i,p]:i,W=0,te=j.length;W<te;W++)this.extend(j[W])}ve.prototype={extend:function(i){var p,j;if(!i)return this;if(i instanceof q||typeof i[0]=="number"||"x"in i)p=j=Q(i);else if(i=we(i),p=i.min,j=i.max,!p||!j)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=j.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(j.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(j.y,this.max.y)),this},getCenter:function(i){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var p,j;return typeof i[0]=="number"||i instanceof q?i=Q(i):i=we(i),i instanceof ve?(p=i.min,j=i.max):p=j=i,p.x>=this.min.x&&j.x<=this.max.x&&p.y>=this.min.y&&j.y<=this.max.y},intersects:function(i){i=we(i);var p=this.min,j=this.max,W=i.min,te=i.max,he=te.x>=p.x&&W.x<=j.x,ze=te.y>=p.y&&W.y<=j.y;return he&&ze},overlaps:function(i){i=we(i);var p=this.min,j=this.max,W=i.min,te=i.max,he=te.x>p.x&&W.x<j.x,ze=te.y>p.y&&W.y<j.y;return he&&ze},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var p=this.min,j=this.max,W=Math.abs(p.x-j.x)*i,te=Math.abs(p.y-j.y)*i;return we(Q(p.x-W,p.y-te),Q(j.x+W,j.y+te))},equals:function(i){return i?(i=we(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function we(i,p){return!i||i instanceof ve?i:new ve(i,p)}function Re(i,p){if(i)for(var j=p?[i,p]:i,W=0,te=j.length;W<te;W++)this.extend(j[W])}Re.prototype={extend:function(i){var p=this._southWest,j=this._northEast,W,te;if(i instanceof Ce)W=i,te=i;else if(i instanceof Re){if(W=i._southWest,te=i._northEast,!W||!te)return this}else return i?this.extend(Be(i)||me(i)):this;return!p&&!j?(this._southWest=new Ce(W.lat,W.lng),this._northEast=new Ce(te.lat,te.lng)):(p.lat=Math.min(W.lat,p.lat),p.lng=Math.min(W.lng,p.lng),j.lat=Math.max(te.lat,j.lat),j.lng=Math.max(te.lng,j.lng)),this},pad:function(i){var p=this._southWest,j=this._northEast,W=Math.abs(p.lat-j.lat)*i,te=Math.abs(p.lng-j.lng)*i;return new Re(new Ce(p.lat-W,p.lng-te),new Ce(j.lat+W,j.lng+te))},getCenter:function(){return new Ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Ce||"lat"in i?i=Be(i):i=me(i);var p=this._southWest,j=this._northEast,W,te;return i instanceof Re?(W=i.getSouthWest(),te=i.getNorthEast()):W=te=i,W.lat>=p.lat&&te.lat<=j.lat&&W.lng>=p.lng&&te.lng<=j.lng},intersects:function(i){i=me(i);var p=this._southWest,j=this._northEast,W=i.getSouthWest(),te=i.getNorthEast(),he=te.lat>=p.lat&&W.lat<=j.lat,ze=te.lng>=p.lng&&W.lng<=j.lng;return he&&ze},overlaps:function(i){i=me(i);var p=this._southWest,j=this._northEast,W=i.getSouthWest(),te=i.getNorthEast(),he=te.lat>p.lat&&W.lat<j.lat,ze=te.lng>p.lng&&W.lng<j.lng;return he&&ze},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,p){return i?(i=me(i),this._southWest.equals(i.getSouthWest(),p)&&this._northEast.equals(i.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function me(i,p){return i instanceof Re?i:new Re(i,p)}function Ce(i,p,j){if(isNaN(i)||isNaN(p))throw new Error("Invalid LatLng object: ("+i+", "+p+")");this.lat=+i,this.lng=+p,j!==void 0&&(this.alt=+j)}Ce.prototype={equals:function(i,p){if(!i)return!1;i=Be(i);var j=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return j<=(p===void 0?1e-9:p)},toString:function(i){return"LatLng("+b(this.lat,i)+", "+b(this.lng,i)+")"},distanceTo:function(i){return Ye.distance(this,Be(i))},wrap:function(){return Ye.wrapLatLng(this)},toBounds:function(i){var p=180*i/40075017,j=p/Math.cos(Math.PI/180*this.lat);return me([this.lat-p,this.lng-j],[this.lat+p,this.lng+j])},clone:function(){return new Ce(this.lat,this.lng,this.alt)}};function Be(i,p,j){return i instanceof Ce?i:g(i)&&typeof i[0]!="object"?i.length===3?new Ce(i[0],i[1],i[2]):i.length===2?new Ce(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Ce(i.lat,"lng"in i?i.lng:i.lon,i.alt):p===void 0?null:new Ce(i,p,j)}var be={latLngToPoint:function(i,p){var j=this.projection.project(i),W=this.scale(p);return this.transformation._transform(j,W)},pointToLatLng:function(i,p){var j=this.scale(p),W=this.transformation.untransform(i,j);return this.projection.unproject(W)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var p=this.projection.bounds,j=this.scale(i),W=this.transformation.transform(p.min,j),te=this.transformation.transform(p.max,j);return new ve(W,te)},infinite:!1,wrapLatLng:function(i){var p=this.wrapLng?R(i.lng,this.wrapLng,!0):i.lng,j=this.wrapLat?R(i.lat,this.wrapLat,!0):i.lat,W=i.alt;return new Ce(j,p,W)},wrapLatLngBounds:function(i){var p=i.getCenter(),j=this.wrapLatLng(p),W=p.lat-j.lat,te=p.lng-j.lng;if(W===0&&te===0)return i;var he=i.getSouthWest(),ze=i.getNorthEast(),it=new Ce(he.lat-W,he.lng-te),ht=new Ce(ze.lat-W,ze.lng-te);return new Re(it,ht)}},Ye=l({},be,{wrapLng:[-180,180],R:6371e3,distance:function(i,p){var j=Math.PI/180,W=i.lat*j,te=p.lat*j,he=Math.sin((p.lat-i.lat)*j/2),ze=Math.sin((p.lng-i.lng)*j/2),it=he*he+Math.cos(W)*Math.cos(te)*ze*ze,ht=2*Math.atan2(Math.sqrt(it),Math.sqrt(1-it));return this.R*ht}}),Qe=6378137,Ge={R:Qe,MAX_LATITUDE:85.0511287798,project:function(i){var p=Math.PI/180,j=this.MAX_LATITUDE,W=Math.max(Math.min(j,i.lat),-j),te=Math.sin(W*p);return new q(this.R*i.lng*p,this.R*Math.log((1+te)/(1-te))/2)},unproject:function(i){var p=180/Math.PI;return new Ce((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*p,i.x*p/this.R)},bounds:function(){var i=Qe*Math.PI;return new ve([-i,-i],[i,i])}()};function He(i,p,j,W){if(g(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=p,this._c=j,this._d=W}He.prototype={transform:function(i,p){return this._transform(i.clone(),p)},_transform:function(i,p){return p=p||1,i.x=p*(this._a*i.x+this._b),i.y=p*(this._c*i.y+this._d),i},untransform:function(i,p){return p=p||1,new q((i.x/p-this._b)/this._a,(i.y/p-this._d)/this._c)}};function Te(i,p,j,W){return new He(i,p,j,W)}var dt=l({},Ye,{code:"EPSG:3857",projection:Ge,transformation:function(){var i=.5/(Math.PI*Ge.R);return Te(i,.5,-i,.5)}()}),_t=l({},dt,{code:"EPSG:900913"});function on(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function ln(i,p){var j="",W,te,he,ze,it,ht;for(W=0,he=i.length;W<he;W++){for(it=i[W],te=0,ze=it.length;te<ze;te++)ht=it[te],j+=(te?"L":"M")+ht.x+" "+ht.y;j+=p?Qt.svg?"z":"x":""}return j||"M0 0"}var Pn=document.documentElement.style,En="ActiveXObject"in window,rn=En&&!document.addEventListener,Ne="msLaunchUri"in navigator&&!("documentMode"in document),Me=vr("webkit"),Ze=vr("android"),Ft=vr("android 2")||vr("android 3"),Tt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),St=Ze&&vr("Google")&&Tt<537&&!("AudioNode"in window),un=!!window.opera,Sn=!Ne&&vr("chrome"),Ut=vr("gecko")&&!Me&&!un&&!En,nr=!Sn&&vr("safari"),Ar=vr("phantom"),Sr="OTransition"in Pn,Ur=navigator.platform.indexOf("Win")===0,xr=En&&"transition"in Pn,Or="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ft,Kr="MozPerspective"in Pn,va=!window.L_DISABLE_3D&&(xr||Or||Kr)&&!Sr&&!Ar,ra=typeof orientation<"u"||vr("mobile"),ua=ra&&Me,jn=ra&&Or,Ha=!window.PointerEvent&&window.MSPointerEvent,Ea=!!(window.PointerEvent||Ha),Qr="ontouchstart"in window||!!window.TouchEvent,gr=!window.L_NO_TOUCH&&(Qr||Ea),rt=ra&&un,ut=ra&&Ut,Zt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pt=function(){var i=!1;try{var p=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",v,p),window.removeEventListener("testPassiveEventSupport",v,p)}catch{}return i}(),sn=function(){return!!document.createElement("canvas").getContext}(),nn=!!(document.createElementNS&&on("svg").createSVGRect),et=!!nn&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),On=!nn&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var p=i.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),Ln=navigator.platform.indexOf("Mac")===0,Jn=navigator.platform.indexOf("Linux")===0;function vr(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Qt={ie:En,ielt9:rn,edge:Ne,webkit:Me,android:Ze,android23:Ft,androidStock:St,opera:un,chrome:Sn,gecko:Ut,safari:nr,phantom:Ar,opera12:Sr,win:Ur,ie3d:xr,webkit3d:Or,gecko3d:Kr,any3d:va,mobile:ra,mobileWebkit:ua,mobileWebkit3d:jn,msPointer:Ha,pointer:Ea,touch:gr,touchNative:Qr,mobileOpera:rt,mobileGecko:ut,retina:Zt,passiveEvents:Pt,canvas:sn,svg:nn,vml:On,inlineSvg:et,mac:Ln,linux:Jn},Rt=Qt.msPointer?"MSPointerDown":"pointerdown",Un=Qt.msPointer?"MSPointerMove":"pointermove",In=Qt.msPointer?"MSPointerUp":"pointerup",Nn=Qt.msPointer?"MSPointerCancel":"pointercancel",Fr={touchstart:Rt,touchmove:Un,touchend:In,touchcancel:Nn},Mr={touchstart:ii,touchmove:xs,touchend:xs,touchcancel:xs},Hr={},cr=!1;function Kn(i,p,j){return p==="touchstart"&&Ci(),Mr[p]?(j=Mr[p].bind(this,j),i.addEventListener(Fr[p],j,!1),j):(console.warn("wrong event specified:",p),v)}function xa(i,p,j){if(!Fr[p]){console.warn("wrong event specified:",p);return}i.removeEventListener(Fr[p],j,!1)}function ma(i){Hr[i.pointerId]=i}function La(i){Hr[i.pointerId]&&(Hr[i.pointerId]=i)}function Va(i){delete Hr[i.pointerId]}function Ci(){cr||(document.addEventListener(Rt,ma,!0),document.addEventListener(Un,La,!0),document.addEventListener(In,Va,!0),document.addEventListener(Nn,Va,!0),cr=!0)}function xs(i,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var j in Hr)p.touches.push(Hr[j]);p.changedTouches=[p],i(p)}}function ii(i,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&qa(p),xs(i,p)}function Ti(i){var p={},j,W;for(W in i)j=i[W],p[W]=j&&j.bind?j.bind(i):j;return i=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var Fs=200;function vi(i,p){i.addEventListener("dblclick",p);var j=0,W;function te(he){if(he.detail!==1){W=he.detail;return}if(!(he.pointerType==="mouse"||he.sourceCapabilities&&!he.sourceCapabilities.firesTouchEvents)){var ze=Go(he);if(!(ze.some(function(ht){return ht instanceof HTMLLabelElement&&ht.attributes.for})&&!ze.some(function(ht){return ht instanceof HTMLInputElement||ht instanceof HTMLSelectElement}))){var it=Date.now();it-j<=Fs?(W++,W===2&&p(Ti(he))):W=1,j=it}}}return i.addEventListener("click",te),{dblclick:p,simDblclick:te}}function ea(i,p){i.removeEventListener("dblclick",p.dblclick),i.removeEventListener("click",p.simDblclick)}var Hs=Ya(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ks=Ya(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pn=Ks==="webkitTransition"||Ks==="OTransition"?Ks+"End":"transitionend";function Xn(i){return typeof i=="string"?document.getElementById(i):i}function Wn(i,p){var j=i.style[p]||i.currentStyle&&i.currentStyle[p];if((!j||j==="auto")&&document.defaultView){var W=document.defaultView.getComputedStyle(i,null);j=W?W[p]:null}return j==="auto"?null:j}function dr(i,p,j){var W=document.createElement(i);return W.className=p||"",j&&j.appendChild(W),W}function Dn(i){var p=i.parentNode;p&&p.removeChild(i)}function Hn(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Wr(i){var p=i.parentNode;p&&p.lastChild!==i&&p.appendChild(i)}function Er(i){var p=i.parentNode;p&&p.firstChild!==i&&p.insertBefore(i,p.firstChild)}function Cr(i,p){if(i.classList!==void 0)return i.classList.contains(p);var j=ya(i);return j.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(j)}function Fn(i,p){if(i.classList!==void 0)for(var j=_(p),W=0,te=j.length;W<te;W++)i.classList.add(j[W]);else if(!Cr(i,p)){var he=ya(i);Da(i,(he?he+" ":"")+p)}}function Zr(i,p){i.classList!==void 0?i.classList.remove(p):Da(i,E((" "+ya(i)+" ").replace(" "+p+" "," ")))}function Da(i,p){i.className.baseVal===void 0?i.className=p:i.className.baseVal=p}function ya(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Ca(i,p){"opacity"in i.style?i.style.opacity=p:"filter"in i.style&&Ga(i,p)}function Ga(i,p){var j=!1,W="DXImageTransform.Microsoft.Alpha";try{j=i.filters.item(W)}catch{if(p===1)return}p=Math.round(p*100),j?(j.Enabled=p!==100,j.Opacity=p):i.style.filter+=" progid:"+W+"(opacity="+p+")"}function Ya(i){for(var p=document.documentElement.style,j=0;j<i.length;j++)if(i[j]in p)return i[j];return!1}function is(i,p,j){var W=p||new q(0,0);i.style[Hs]=(Qt.ie3d?"translate("+W.x+"px,"+W.y+"px)":"translate3d("+W.x+"px,"+W.y+"px,0)")+(j?" scale("+j+")":"")}function Aa(i,p){i._leaflet_pos=p,Qt.any3d?is(i,p):(i.style.left=p.x+"px",i.style.top=p.y+"px")}function us(i){return i._leaflet_pos||new q(0,0)}var Ps,ro,yi;if("onselectstart"in document)Ps=function(){Tr(window,"selectstart",qa)},ro=function(){da(window,"selectstart",qa)};else{var Pi=Ya(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ps=function(){if(Pi){var i=document.documentElement.style;yi=i[Pi],i[Pi]="none"}},ro=function(){Pi&&(document.documentElement.style[Pi]=yi,yi=void 0)}}function Ns(){Tr(window,"dragstart",qa)}function Eo(){da(window,"dragstart",qa)}var mo,Hi;function ao(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Ni(),mo=i,Hi=i.style.outlineStyle,i.style.outlineStyle="none",Tr(window,"keydown",Ni))}function Ni(){mo&&(mo.style.outlineStyle=Hi,mo=void 0,Hi=void 0,da(window,"keydown",Ni))}function _i(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Di(i){var p=i.getBoundingClientRect();return{x:p.width/i.offsetWidth||1,y:p.height/i.offsetHeight||1,boundingClientRect:p}}var uc={__proto__:null,TRANSFORM:Hs,TRANSITION:Ks,TRANSITION_END:pn,get:Xn,getStyle:Wn,create:dr,remove:Dn,empty:Hn,toFront:Wr,toBack:Er,hasClass:Cr,addClass:Fn,removeClass:Zr,setClass:Da,getClass:ya,setOpacity:Ca,testProp:Ya,setTransform:is,setPosition:Aa,getPosition:us,get disableTextSelection(){return Ps},get enableTextSelection(){return ro},disableImageDrag:Ns,enableImageDrag:Eo,preventOutline:ao,restoreOutline:Ni,getSizedParentNode:_i,getScale:Di};function Tr(i,p,j,W){if(p&&typeof p=="object")for(var te in p)tr(i,te,p[te],j);else{p=_(p);for(var he=0,ze=p.length;he<ze;he++)tr(i,p[he],j,W)}return this}var Vs="_leaflet_events";function da(i,p,j,W){if(arguments.length===1)oi(i),delete i[Vs];else if(p&&typeof p=="object")for(var te in p)Qs(i,te,p[te],j);else if(p=_(p),arguments.length===2)oi(i,function(it){return A(p,it)!==-1});else for(var he=0,ze=p.length;he<ze;he++)Qs(i,p[he],j,W);return this}function oi(i,p){for(var j in i[Vs]){var W=j.split(/\d/)[0];(!p||p(W))&&Qs(i,W,null,null,j)}}var so={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function tr(i,p,j,W){var te=p+y(j)+(W?"_"+y(W):"");if(i[Vs]&&i[Vs][te])return this;var he=function(it){return j.call(W||i,it||window.event)},ze=he;!Qt.touchNative&&Qt.pointer&&p.indexOf("touch")===0?he=Kn(i,p,he):Qt.touch&&p==="dblclick"?he=vi(i,he):"addEventListener"in i?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?i.addEventListener(so[p]||p,he,Qt.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(he=function(it){it=it||window.event,Xa(i,it)&&ze(it)},i.addEventListener(so[p],he,!1)):i.addEventListener(p,ze,!1):i.attachEvent("on"+p,he),i[Vs]=i[Vs]||{},i[Vs][te]=he}function Qs(i,p,j,W,te){te=te||p+y(j)+(W?"_"+y(W):"");var he=i[Vs]&&i[Vs][te];if(!he)return this;!Qt.touchNative&&Qt.pointer&&p.indexOf("touch")===0?xa(i,p,he):Qt.touch&&p==="dblclick"?ea(i,he):"removeEventListener"in i?i.removeEventListener(so[p]||p,he,!1):i.detachEvent("on"+p,he),i[Vs][te]=null}function ci(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function li(i){return tr(i,"wheel",ci),this}function _r(i){return Tr(i,"mousedown touchstart dblclick contextmenu",ci),i._leaflet_disable_click=!0,this}function qa(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Js(i){return qa(i),ci(i),this}function Go(i){if(i.composedPath)return i.composedPath();for(var p=[],j=i.target;j;)p.push(j),j=j.parentNode;return p}function ms(i,p){if(!p)return new q(i.clientX,i.clientY);var j=Di(p),W=j.boundingClientRect;return new q((i.clientX-W.left)/j.x-p.clientLeft,(i.clientY-W.top)/j.y-p.clientTop)}var Vi=Qt.linux&&Qt.chrome?window.devicePixelRatio:Qt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function go(i){return Qt.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Vi:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Xa(i,p){var j=p.relatedTarget;if(!j)return!0;try{for(;j&&j!==i;)j=j.parentNode}catch{return!1}return j!==i}var Oc={__proto__:null,on:Tr,off:da,stopPropagation:ci,disableScrollPropagation:li,disableClickPropagation:_r,preventDefault:qa,stop:Js,getPropagationPath:Go,getMousePosition:ms,getWheelDelta:go,isExternalTarget:Xa,addListener:Tr,removeListener:da},Xs=$.extend({run:function(i,p,j,W){this.stop(),this._el=i,this._inProgress=!0,this._duration=j||.25,this._easeOutPower=1/Math.max(W||.5,.2),this._startPos=us(i),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(i){var p=+new Date-this._startTime,j=this._duration*1e3;p<j?this._runFrame(this._easeOut(p/j),i):(this._runFrame(1),this._complete())},_runFrame:function(i,p){var j=this._startPos.add(this._offset.multiplyBy(i));p&&j._round(),Aa(this._el,j),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Vr=$.extend({options:{crs:dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,p){p=m(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=C(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(Be(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ks&&Qt.any3d&&!Qt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Tr(this._proxy,pn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,p,j){if(p=p===void 0?this._zoom:this._limitZoom(p),i=this._limitCenter(Be(i),p,this.options.maxBounds),j=j||{},this._stop(),this._loaded&&!j.reset&&j!==!0){j.animate!==void 0&&(j.zoom=l({animate:j.animate},j.zoom),j.pan=l({animate:j.animate,duration:j.duration},j.pan));var W=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,p,j.zoom):this._tryAnimatedPan(i,j.pan);if(W)return clearTimeout(this._sizeTimer),this}return this._resetView(i,p,j.pan&&j.pan.noMoveStart),this},setZoom:function(i,p){return this._loaded?this.setView(this.getCenter(),i,{zoom:p}):(this._zoom=i,this)},zoomIn:function(i,p){return i=i||(Qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,p)},zoomOut:function(i,p){return i=i||(Qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,p)},setZoomAround:function(i,p,j){var W=this.getZoomScale(p),te=this.getSize().divideBy(2),he=i instanceof q?i:this.latLngToContainerPoint(i),ze=he.subtract(te).multiplyBy(1-1/W),it=this.containerPointToLatLng(te.add(ze));return this.setView(it,p,{zoom:j})},_getBoundsCenterZoom:function(i,p){p=p||{},i=i.getBounds?i.getBounds():me(i);var j=Q(p.paddingTopLeft||p.padding||[0,0]),W=Q(p.paddingBottomRight||p.padding||[0,0]),te=this.getBoundsZoom(i,!1,j.add(W));if(te=typeof p.maxZoom=="number"?Math.min(p.maxZoom,te):te,te===1/0)return{center:i.getCenter(),zoom:te};var he=W.subtract(j).divideBy(2),ze=this.project(i.getSouthWest(),te),it=this.project(i.getNorthEast(),te),ht=this.unproject(ze.add(it).divideBy(2).add(he),te);return{center:ht,zoom:te}},fitBounds:function(i,p){if(i=me(i),!i.isValid())throw new Error("Bounds are not valid.");var j=this._getBoundsCenterZoom(i,p);return this.setView(j.center,j.zoom,p)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,p){return this.setView(i,this._zoom,{pan:p})},panBy:function(i,p){if(i=Q(i).round(),p=p||{},!i.x&&!i.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){Fn(this._mapPane,"leaflet-pan-anim");var j=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,j,p.duration||.25,p.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,p,j){if(j=j||{},j.animate===!1||!Qt.any3d)return this.setView(i,p,j);this._stop();var W=this.project(this.getCenter()),te=this.project(i),he=this.getSize(),ze=this._zoom;i=Be(i),p=p===void 0?ze:p;var it=Math.max(he.x,he.y),ht=it*this.getZoomScale(ze,p),Jt=te.distanceTo(W)||1,qn=1.42,Yn=qn*qn;function ir(Wa){var Si=Wa?-1:1,uo=Wa?ht:it,So=ht*ht-it*it+Si*Yn*Yn*Jt*Jt,ts=2*uo*Yn*Jt,yc=So/ts,Hc=Math.sqrt(yc*yc+1)-yc,Io=Hc<1e-9?-18:Math.log(Hc);return Io}function jr(Wa){return(Math.exp(Wa)-Math.exp(-Wa))/2}function ka(Wa){return(Math.exp(Wa)+Math.exp(-Wa))/2}function Ua(Wa){return jr(Wa)/ka(Wa)}var ds=ir(0);function js(Wa){return it*(ka(ds)/ka(ds+qn*Wa))}function vc(Wa){return it*(ka(ds)*Ua(ds+qn*Wa)-jr(ds))/Yn}function Ml(Wa){return 1-Math.pow(1-Wa,1.5)}var Lo=Date.now(),lo=(ir(1)-ds)/qn,Fc=j.duration?1e3*j.duration:1e3*lo*.8;function Mi(){var Wa=(Date.now()-Lo)/Fc,Si=Ml(Wa)*lo;Wa<=1?(this._flyToFrame=T(Mi,this),this._move(this.unproject(W.add(te.subtract(W).multiplyBy(vc(Si)/Jt)),ze),this.getScaleZoom(it/js(Si),ze),{flyTo:!0})):this._move(i,p)._moveEnd(!0)}return this._moveStart(!0,j.noMoveStart),Mi.call(this),this},flyToBounds:function(i,p){var j=this._getBoundsCenterZoom(i,p);return this.flyTo(j.center,j.zoom,p)},setMaxBounds:function(i){return i=me(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var p=this.options.minZoom;return this.options.minZoom=i,this._loaded&&p!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var p=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&p!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,p){this._enforcingBounds=!0;var j=this.getCenter(),W=this._limitCenter(j,this._zoom,me(i));return j.equals(W)||this.panTo(W,p),this._enforcingBounds=!1,this},panInside:function(i,p){p=p||{};var j=Q(p.paddingTopLeft||p.padding||[0,0]),W=Q(p.paddingBottomRight||p.padding||[0,0]),te=this.project(this.getCenter()),he=this.project(i),ze=this.getPixelBounds(),it=we([ze.min.add(j),ze.max.subtract(W)]),ht=it.getSize();if(!it.contains(he)){this._enforcingBounds=!0;var Jt=he.subtract(it.getCenter()),qn=it.extend(he).getSize().subtract(ht);te.x+=Jt.x<0?-qn.x:qn.x,te.y+=Jt.y<0?-qn.y:qn.y,this.panTo(this.unproject(te),p),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=l({animate:!1,pan:!0},i===!0?{animate:!0}:i);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var j=this.getSize(),W=p.divideBy(2).round(),te=j.divideBy(2).round(),he=W.subtract(te);return!he.x&&!he.y?this:(i.animate&&i.pan?this.panBy(he):(i.pan&&this._rawPanBy(he),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(C(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:j}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=l({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=C(this._handleGeolocationResponse,this),j=C(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,j,i):navigator.geolocation.getCurrentPosition(p,j,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var p=i.code,j=i.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+j+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var p=i.coords.latitude,j=i.coords.longitude,W=new Ce(p,j),te=W.toBounds(i.coords.accuracy*2),he=this._locateOptions;if(he.setView){var ze=this.getBoundsZoom(te);this.setView(W,he.maxZoom?Math.min(ze,he.maxZoom):ze)}var it={latlng:W,bounds:te,timestamp:i.timestamp};for(var ht in i.coords)typeof i.coords[ht]=="number"&&(it[ht]=i.coords[ht]);this.fire("locationfound",it)}},addHandler:function(i,p){if(!p)return this;var j=this[i]=new p(this);return this._handlers.push(j),this.options[i]&&j.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Dn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Dn(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,p){var j="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),W=dr("div",j,p||this._mapPane);return i&&(this._panes[i]=W),W},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),p=this.unproject(i.getBottomLeft()),j=this.unproject(i.getTopRight());return new Re(p,j)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,p,j){i=me(i),j=Q(j||[0,0]);var W=this.getZoom()||0,te=this.getMinZoom(),he=this.getMaxZoom(),ze=i.getNorthWest(),it=i.getSouthEast(),ht=this.getSize().subtract(j),Jt=we(this.project(it,W),this.project(ze,W)).getSize(),qn=Qt.any3d?this.options.zoomSnap:1,Yn=ht.x/Jt.x,ir=ht.y/Jt.y,jr=p?Math.max(Yn,ir):Math.min(Yn,ir);return W=this.getScaleZoom(jr,W),qn&&(W=Math.round(W/(qn/100))*(qn/100),W=p?Math.ceil(W/qn)*qn:Math.floor(W/qn)*qn),Math.max(te,Math.min(he,W))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,p){var j=this._getTopLeftPoint(i,p);return new ve(j,j.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,p){var j=this.options.crs;return p=p===void 0?this._zoom:p,j.scale(i)/j.scale(p)},getScaleZoom:function(i,p){var j=this.options.crs;p=p===void 0?this._zoom:p;var W=j.zoom(i*j.scale(p));return isNaN(W)?1/0:W},project:function(i,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(Be(i),p)},unproject:function(i,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(Q(i),p)},layerPointToLatLng:function(i){var p=Q(i).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(i){var p=this.project(Be(i))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Be(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(me(i))},distance:function(i,p){return this.options.crs.distance(Be(i),Be(p))},containerPointToLayerPoint:function(i){return Q(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return Q(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var p=this.containerPointToLayerPoint(Q(i));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Be(i)))},mouseEventToContainerPoint:function(i){return ms(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var p=this._container=Xn(i);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Tr(p,"scroll",this._onScroll,this),this._containerId=y(p)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Qt.any3d,Fn(i,"leaflet-container"+(Qt.touch?" leaflet-touch":"")+(Qt.retina?" leaflet-retina":"")+(Qt.ielt9?" leaflet-oldie":"")+(Qt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=Wn(i,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Aa(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Fn(i.markerPane,"leaflet-zoom-hide"),Fn(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,p,j){Aa(this._mapPane,new q(0,0));var W=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var te=this._zoom!==p;this._moveStart(te,j)._move(i,p)._moveEnd(te),this.fire("viewreset"),W&&this.fire("load")},_moveStart:function(i,p){return i&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(i,p,j,W){p===void 0&&(p=this._zoom);var te=this._zoom!==p;return this._zoom=p,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),W?j&&j.pinch&&this.fire("zoom",j):((te||j&&j.pinch)&&this.fire("zoom",j),this.fire("move",j)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Aa(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[y(this._container)]=this;var p=i?da:Tr;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),Qt.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=T(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,p){for(var j=[],W,te=p==="mouseout"||p==="mouseover",he=i.target||i.srcElement,ze=!1;he;){if(W=this._targets[y(he)],W&&(p==="click"||p==="preclick")&&this._draggableMoved(W)){ze=!0;break}if(W&&W.listens(p,!0)&&(te&&!Xa(he,i)||(j.push(W),te))||he===this._container)break;he=he.parentNode}return!j.length&&!ze&&!te&&this.listens(p,!0)&&(j=[this]),j},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var p=i.target||i.srcElement;if(!(!this._loaded||p._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(p))){var j=i.type;j==="mousedown"&&ao(p),this._fireDOMEvent(i,j)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,p,j){if(i.type==="click"){var W=l({},i);W.type="preclick",this._fireDOMEvent(W,W.type,j)}var te=this._findEventTargets(i,p);if(j){for(var he=[],ze=0;ze<j.length;ze++)j[ze].listens(p,!0)&&he.push(j[ze]);te=he.concat(te)}if(te.length){p==="contextmenu"&&qa(i);var it=te[0],ht={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Jt=it.getLatLng&&(!it._radius||it._radius<=10);ht.containerPoint=Jt?this.latLngToContainerPoint(it.getLatLng()):this.mouseEventToContainerPoint(i),ht.layerPoint=this.containerPointToLayerPoint(ht.containerPoint),ht.latlng=Jt?it.getLatLng():this.layerPointToLatLng(ht.layerPoint)}for(ze=0;ze<te.length;ze++)if(te[ze].fire(p,ht,!0),ht.originalEvent._stopped||te[ze].options.bubblingMouseEvents===!1&&A(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,p=this._handlers.length;i<p;i++)this._handlers[i].disable()},whenReady:function(i,p){return this._loaded?i.call(p||this,{target:this}):this.on("load",i,p),this},_getMapPanePos:function(){return us(this._mapPane)||new q(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,p){var j=i&&p!==void 0?this._getNewPixelOrigin(i,p):this.getPixelOrigin();return j.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,p){var j=this.getSize()._divideBy(2);return this.project(i,p)._subtract(j)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,p,j){var W=this._getNewPixelOrigin(j,p);return this.project(i,p)._subtract(W)},_latLngBoundsToNewLayerBounds:function(i,p,j){var W=this._getNewPixelOrigin(j,p);return we([this.project(i.getSouthWest(),p)._subtract(W),this.project(i.getNorthWest(),p)._subtract(W),this.project(i.getSouthEast(),p)._subtract(W),this.project(i.getNorthEast(),p)._subtract(W)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,p,j){if(!j)return i;var W=this.project(i,p),te=this.getSize().divideBy(2),he=new ve(W.subtract(te),W.add(te)),ze=this._getBoundsOffset(he,j,p);return Math.abs(ze.x)<=1&&Math.abs(ze.y)<=1?i:this.unproject(W.add(ze),p)},_limitOffset:function(i,p){if(!p)return i;var j=this.getPixelBounds(),W=new ve(j.min.add(i),j.max.add(i));return i.add(this._getBoundsOffset(W,p))},_getBoundsOffset:function(i,p,j){var W=we(this.project(p.getNorthEast(),j),this.project(p.getSouthWest(),j)),te=W.min.subtract(i.min),he=W.max.subtract(i.max),ze=this._rebound(te.x,-he.x),it=this._rebound(te.y,-he.y);return new q(ze,it)},_rebound:function(i,p){return i+p>0?Math.round(i-p)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(p))},_limitZoom:function(i){var p=this.getMinZoom(),j=this.getMaxZoom(),W=Qt.any3d?this.options.zoomSnap:1;return W&&(i=Math.round(i/W)*W),Math.max(p,Math.min(j,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Zr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,p){var j=this._getCenterOffset(i)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(j)?!1:(this.panBy(j,p),!0)},_createAnimProxy:function(){var i=this._proxy=dr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(p){var j=Hs,W=this._proxy.style[j];is(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),W===this._proxy.style[j]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Dn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),p=this.getZoom();is(this._proxy,this.project(i,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,p,j){if(this._animatingZoom)return!0;if(j=j||{},!this._zoomAnimated||j.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var W=this.getZoomScale(p),te=this._getCenterOffset(i)._divideBy(1-1/W);return j.animate!==!0&&!this.getSize().contains(te)?!1:(T(function(){this._moveStart(!0,j.noMoveStart||!1)._animateZoom(i,p,!0)},this),!0)},_animateZoom:function(i,p,j,W){this._mapPane&&(j&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=p,Fn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:p,noUpdate:W}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(C(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Zr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ui(i,p){return new Vr(i,p)}var gs=I.extend({options:{position:"topright"},initialize:function(i){m(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var p=this._map;return p&&p.removeControl(this),this.options.position=i,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var p=this._container=this.onAdd(i),j=this.getPosition(),W=i._controlCorners[j];return Fn(p,"leaflet-control"),j.indexOf("bottom")!==-1?W.insertBefore(p,W.firstChild):W.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Dn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),qi=function(i){return new gs(i)};Vr.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},p="leaflet-",j=this._controlContainer=dr("div",p+"control-container",this._container);function W(te,he){var ze=p+te+" "+p+he;i[te+he]=dr("div",ze,j)}W("top","left"),W("top","right"),W("bottom","left"),W("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Dn(this._controlCorners[i]);Dn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yo=gs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,p,j,W){return j<W?-1:W<j?1:0}},initialize:function(i,p,j){m(this,j),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var W in i)this._addLayer(i[W],W);for(W in p)this._addLayer(p[W],W,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return gs.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,p){return this._addLayer(i,p),this._map?this._update():this},addOverlay:function(i,p){return this._addLayer(i,p,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var p=this._getLayer(y(i));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){Fn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Fn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Zr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Zr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",p=this._container=dr("div",i),j=this.options.collapsed;p.setAttribute("aria-haspopup",!0),_r(p),li(p);var W=this._section=dr("section",i+"-list");j&&(this._map.on("click",this.collapse,this),Tr(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var te=this._layersLink=dr("a",i+"-toggle",p);te.href="#",te.title="Layers",te.setAttribute("role","button"),Tr(te,{keydown:function(he){he.keyCode===13&&this._expandSafely()},click:function(he){qa(he),this._expandSafely()}},this),j||this.expand(),this._baseLayersList=dr("div",i+"-base",W),this._separator=dr("div",i+"-separator",W),this._overlaysList=dr("div",i+"-overlays",W),p.appendChild(W)},_getLayer:function(i){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&y(this._layers[p].layer)===i)return this._layers[p]},_addLayer:function(i,p,j){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:p,overlay:j}),this.options.sortLayers&&this._layers.sort(C(function(W,te){return this.options.sortFunction(W.layer,te.layer,W.name,te.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Hn(this._baseLayersList),Hn(this._overlaysList),this._layerControlInputs=[];var i,p,j,W,te=0;for(j=0;j<this._layers.length;j++)W=this._layers[j],this._addItem(W),p=p||W.overlay,i=i||!W.overlay,te+=W.overlay?0:1;return this.options.hideSingleBase&&(i=i&&te>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=p&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var p=this._getLayer(y(i.target)),j=p.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;j&&this._map.fire(j,p)},_createRadioElement:function(i,p){var j='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(p?' checked="checked"':"")+"/>",W=document.createElement("div");return W.innerHTML=j,W.firstChild},_addItem:function(i){var p=document.createElement("label"),j=this._map.hasLayer(i.layer),W;i.overlay?(W=document.createElement("input"),W.type="checkbox",W.className="leaflet-control-layers-selector",W.defaultChecked=j):W=this._createRadioElement("leaflet-base-layers_"+y(this),j),this._layerControlInputs.push(W),W.layerId=y(i.layer),Tr(W,"click",this._onInputClick,this);var te=document.createElement("span");te.innerHTML=" "+i.name;var he=document.createElement("span");p.appendChild(he),he.appendChild(W),he.appendChild(te);var ze=i.overlay?this._overlaysList:this._baseLayersList;return ze.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,p,j,W=[],te=[];this._handlingClick=!0;for(var he=i.length-1;he>=0;he--)p=i[he],j=this._getLayer(p.layerId).layer,p.checked?W.push(j):p.checked||te.push(j);for(he=0;he<te.length;he++)this._map.hasLayer(te[he])&&this._map.removeLayer(te[he]);for(he=0;he<W.length;he++)this._map.hasLayer(W[he])||this._map.addLayer(W[he]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,p,j,W=this._map.getZoom(),te=i.length-1;te>=0;te--)p=i[te],j=this._getLayer(p.layerId).layer,p.disabled=j.options.minZoom!==void 0&&W<j.options.minZoom||j.options.maxZoom!==void 0&&W>j.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Tr(i,"click",qa),this.expand();var p=this;setTimeout(function(){da(i,"click",qa),p._preventClick=!1})}}),Ko=function(i,p,j){return new Yo(i,p,j)},io=gs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var p="leaflet-control-zoom",j=dr("div",p+" leaflet-bar"),W=this.options;return this._zoomInButton=this._createButton(W.zoomInText,W.zoomInTitle,p+"-in",j,this._zoomIn),this._zoomOutButton=this._createButton(W.zoomOutText,W.zoomOutTitle,p+"-out",j,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),j},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,p,j,W,te){var he=dr("a",j,W);return he.innerHTML=i,he.href="#",he.title=p,he.setAttribute("role","button"),he.setAttribute("aria-label",p),_r(he),Tr(he,"click",Js),Tr(he,"click",te,this),Tr(he,"click",this._refocusOnMap,this),he},_updateDisabled:function(){var i=this._map,p="leaflet-disabled";Zr(this._zoomInButton,p),Zr(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Fn(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Fn(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Vr.mergeOptions({zoomControl:!0}),Vr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new io,this.addControl(this.zoomControl))});var fn=function(i){return new io(i)},ye=gs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var p="leaflet-control-scale",j=dr("div",p),W=this.options;return this._addScales(W,p+"-line",j),i.on(W.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),j},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,p,j){i.metric&&(this._mScale=dr("div",p,j)),i.imperial&&(this._iScale=dr("div",p,j))},_update:function(){var i=this._map,p=i.getSize().y/2,j=i.distance(i.containerPointToLatLng([0,p]),i.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(j)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var p=this._getRoundNum(i),j=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,j,p/i)},_updateImperial:function(i){var p=i*3.2808399,j,W,te;p>5280?(j=p/5280,W=this._getRoundNum(j),this._updateScale(this._iScale,W+" mi",W/j)):(te=this._getRoundNum(p),this._updateScale(this._iScale,te+" ft",te/p))},_updateScale:function(i,p,j){i.style.width=Math.round(this.options.maxWidth*j)+"px",i.innerHTML=p},_getRoundNum:function(i){var p=Math.pow(10,(Math.floor(i)+"").length-1),j=i/p;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:1,p*j}}),Ot=function(i){return new ye(i)},rr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ha=gs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Qt.inlineSvg?rr+" ":"")+"Leaflet</a>"},initialize:function(i){m(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=dr("div","leaflet-control-attribution"),_r(this._container);for(var p in i._layers)i._layers[p].getAttribution&&this.addAttribution(i._layers[p].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var p in this._attributions)this._attributions[p]&&i.push(p);var j=[];this.options.prefix&&j.push(this.options.prefix),i.length&&j.push(i.join(", ")),this._container.innerHTML=j.join(' <span aria-hidden="true">|</span> ')}}});Vr.mergeOptions({attributionControl:!0}),Vr.addInitHook(function(){this.options.attributionControl&&new ha().addTo(this)});var es=function(i){return new ha(i)};gs.Layers=Yo,gs.Zoom=io,gs.Scale=ye,gs.Attribution=ha,qi.layers=Ko,qi.zoom=fn,qi.scale=Ot,qi.attribution=es;var ws=I.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ws.addTo=function(i,p){return i.addHandler(p,this),this};var Cl={Events:z},Tl=Qt.touch?"touchstart mousedown":"mousedown",Ir=$.extend({options:{clickTolerance:3},initialize:function(i,p,j,W){m(this,W),this._element=i,this._dragStartTarget=p||i,this._preventOutline=j},enable:function(){this._enabled||(Tr(this._dragStartTarget,Tl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ir._dragging===this&&this.finishDrag(!0),da(this._dragStartTarget,Tl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Cr(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Ir._dragging===this&&this.finishDrag();return}if(!(Ir._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Ir._dragging=this,this._preventOutline&&ao(this._element),Ns(),Ps(),!this._moving)){this.fire("down");var p=i.touches?i.touches[0]:i,j=_i(this._element);this._startPoint=new q(p.clientX,p.clientY),this._startPos=us(this._element),this._parentScale=Di(j);var W=i.type==="mousedown";Tr(document,W?"mousemove":"touchmove",this._onMove,this),Tr(document,W?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var p=i.touches&&i.touches.length===1?i.touches[0]:i,j=new q(p.clientX,p.clientY)._subtract(this._startPoint);!j.x&&!j.y||Math.abs(j.x)+Math.abs(j.y)<this.options.clickTolerance||(j.x/=this._parentScale.x,j.y/=this._parentScale.y,qa(i),this._moved||(this.fire("dragstart"),this._moved=!0,Fn(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Fn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(j),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Aa(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){Zr(document.body,"leaflet-dragging"),this._lastTarget&&(Zr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),da(document,"mousemove touchmove",this._onMove,this),da(document,"mouseup touchend touchcancel",this._onUp,this),Eo(),ro();var p=this._moved&&this._moving;this._moving=!1,Ir._dragging=!1,p&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Pl(i,p,j){var W,te=[1,4,2,8],he,ze,it,ht,Jt,qn,Yn,ir;for(he=0,qn=i.length;he<qn;he++)i[he]._code=Co(i[he],p);for(it=0;it<4;it++){for(Yn=te[it],W=[],he=0,qn=i.length,ze=qn-1;he<qn;ze=he++)ht=i[he],Jt=i[ze],ht._code&Yn?Jt._code&Yn||(ir=Lc(Jt,ht,Yn,p,j),ir._code=Co(ir,p),W.push(ir)):(Jt._code&Yn&&(ir=Lc(Jt,ht,Yn,p,j),ir._code=Co(ir,p),W.push(ir)),W.push(ht));i=W}return i}function dc(i,p){var j,W,te,he,ze,it,ht,Jt,qn;if(!i||i.length===0)throw new Error("latlngs not passed");$a(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Yn=Be([0,0]),ir=me(i),jr=ir.getNorthWest().distanceTo(ir.getSouthWest())*ir.getNorthEast().distanceTo(ir.getNorthWest());jr<1700&&(Yn=ko(i));var ka=i.length,Ua=[];for(j=0;j<ka;j++){var ds=Be(i[j]);Ua.push(p.project(Be([ds.lat-Yn.lat,ds.lng-Yn.lng])))}for(it=ht=Jt=0,j=0,W=ka-1;j<ka;W=j++)te=Ua[j],he=Ua[W],ze=te.y*he.x-he.y*te.x,ht+=(te.x+he.x)*ze,Jt+=(te.y+he.y)*ze,it+=ze*3;it===0?qn=Ua[0]:qn=[ht/it,Jt/it];var js=p.unproject(Q(qn));return Be([js.lat+Yn.lat,js.lng+Yn.lng])}function ko(i){for(var p=0,j=0,W=0,te=0;te<i.length;te++){var he=Be(i[te]);p+=he.lat,j+=he.lng,W++}return Be([p/W,j/W])}var vo={__proto__:null,clipPolygon:Pl,polygonCenter:dc,centroid:ko};function $i(i,p){if(!p||!i.length)return i.slice();var j=p*p;return i=qs(i,j),i=Nl(i,j),i}function yo(i,p,j){return Math.sqrt(Oa(i,p,j,!0))}function il(i,p,j){return Oa(i,p,j)}function Nl(i,p){var j=i.length,W=typeof Uint8Array<"u"?Uint8Array:Array,te=new W(j);te[0]=te[j-1]=1,Mc(i,te,p,0,j-1);var he,ze=[];for(he=0;he<j;he++)te[he]&&ze.push(i[he]);return ze}function Mc(i,p,j,W,te){var he=0,ze,it,ht;for(it=W+1;it<=te-1;it++)ht=Oa(i[it],i[W],i[te],!0),ht>he&&(ze=it,he=ht);he>j&&(p[ze]=1,Mc(i,p,j,W,ze),Mc(i,p,j,ze,te))}function qs(i,p){for(var j=[i[0]],W=1,te=0,he=i.length;W<he;W++)lu(i[W],i[te])>p&&(j.push(i[W]),te=W);return te<he-1&&j.push(i[he-1]),j}var cu;function jc(i,p,j,W,te){var he=W?cu:Co(i,j),ze=Co(p,j),it,ht,Jt;for(cu=ze;;){if(!(he|ze))return[i,p];if(he&ze)return!1;it=he||ze,ht=Lc(i,p,it,j,te),Jt=Co(ht,j),it===he?(i=ht,he=Jt):(p=ht,ze=Jt)}}function Lc(i,p,j,W,te){var he=p.x-i.x,ze=p.y-i.y,it=W.min,ht=W.max,Jt,qn;return j&8?(Jt=i.x+he*(ht.y-i.y)/ze,qn=ht.y):j&4?(Jt=i.x+he*(it.y-i.y)/ze,qn=it.y):j&2?(Jt=ht.x,qn=i.y+ze*(ht.x-i.x)/he):j&1&&(Jt=it.x,qn=i.y+ze*(it.x-i.x)/he),new q(Jt,qn,te)}function Co(i,p){var j=0;return i.x<p.min.x?j|=1:i.x>p.max.x&&(j|=2),i.y<p.min.y?j|=4:i.y>p.max.y&&(j|=8),j}function lu(i,p){var j=p.x-i.x,W=p.y-i.y;return j*j+W*W}function Oa(i,p,j,W){var te=p.x,he=p.y,ze=j.x-te,it=j.y-he,ht=ze*ze+it*it,Jt;return ht>0&&(Jt=((i.x-te)*ze+(i.y-he)*it)/ht,Jt>1?(te=j.x,he=j.y):Jt>0&&(te+=ze*Jt,he+=it*Jt)),ze=i.x-te,it=i.y-he,W?ze*ze+it*it:new q(te,he)}function $a(i){return!g(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Dl(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$a(i)}function Al(i,p){var j,W,te,he,ze,it,ht,Jt;if(!i||i.length===0)throw new Error("latlngs not passed");$a(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var qn=Be([0,0]),Yn=me(i),ir=Yn.getNorthWest().distanceTo(Yn.getSouthWest())*Yn.getNorthEast().distanceTo(Yn.getNorthWest());ir<1700&&(qn=ko(i));var jr=i.length,ka=[];for(j=0;j<jr;j++){var Ua=Be(i[j]);ka.push(p.project(Be([Ua.lat-qn.lat,Ua.lng-qn.lng])))}for(j=0,W=0;j<jr-1;j++)W+=ka[j].distanceTo(ka[j+1])/2;if(W===0)Jt=ka[0];else for(j=0,he=0;j<jr-1;j++)if(ze=ka[j],it=ka[j+1],te=ze.distanceTo(it),he+=te,he>W){ht=(he-W)/te,Jt=[it.x-ht*(it.x-ze.x),it.y-ht*(it.y-ze.y)];break}var ds=p.unproject(Q(Jt));return Be([ds.lat+qn.lat,ds.lng+qn.lng])}var vt={__proto__:null,simplify:$i,pointToSegmentDistance:yo,closestPointOnSegment:il,clipSegment:jc,_getEdgeIntersection:Lc,_getBitCode:Co,_sqClosestPointOnSegment:Oa,isFlat:$a,_flat:Dl,polylineCenter:Al},To={project:function(i){return new q(i.lng,i.lat)},unproject:function(i){return new Ce(i.y,i.x)},bounds:new ve([-180,-90],[180,90])},lr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ve([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var p=Math.PI/180,j=this.R,W=i.lat*p,te=this.R_MINOR/j,he=Math.sqrt(1-te*te),ze=he*Math.sin(W),it=Math.tan(Math.PI/4-W/2)/Math.pow((1-ze)/(1+ze),he/2);return W=-j*Math.log(Math.max(it,1e-10)),new q(i.lng*p*j,W)},unproject:function(i){for(var p=180/Math.PI,j=this.R,W=this.R_MINOR/j,te=Math.sqrt(1-W*W),he=Math.exp(-i.y/j),ze=Math.PI/2-2*Math.atan(he),it=0,ht=.1,Jt;it<15&&Math.abs(ht)>1e-7;it++)Jt=te*Math.sin(ze),Jt=Math.pow((1-Jt)/(1+Jt),te/2),ht=Math.PI/2-2*Math.atan(he*Jt)-ze,ze+=ht;return new Ce(ze*p,i.x*p/j)}},Ic={__proto__:null,LonLat:To,Mercator:lr,SphericalMercator:Ge},Po=l({},Ye,{code:"EPSG:3395",projection:lr,transformation:function(){var i=.5/(Math.PI*lr.R);return Te(i,.5,-i,.5)}()}),Ds=l({},Ye,{code:"EPSG:4326",projection:To,transformation:Te(1/180,1,-1/180,.5)}),fe=l({},be,{projection:To,transformation:Te(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,p){var j=p.lng-i.lng,W=p.lat-i.lat;return Math.sqrt(j*j+W*W)},infinite:!0});be.Earth=Ye,be.EPSG3395=Po,be.EPSG3857=dt,be.EPSG900913=_t,be.EPSG4326=Ds,be.Simple=fe;var Bn=$.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[y(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[y(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var p=i.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var j=this.getEvents();p.on(j,this),this.once("remove",function(){p.off(j,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Vr.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var p=y(i);return this._layers[p]?this:(this._layers[p]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var p=y(i);return this._layers[p]?(this._loaded&&i.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return y(i)in this._layers},eachLayer:function(i,p){for(var j in this._layers)i.call(p,this._layers[j]);return this},_addLayers:function(i){i=i?g(i)?i:[i]:[];for(var p=0,j=i.length;p<j;p++)this.addLayer(i[p])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[y(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var p=y(i);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,p=-1/0,j=this._getZoomSpan();for(var W in this._zoomBoundLayers){var te=this._zoomBoundLayers[W].options;i=te.minZoom===void 0?i:Math.min(i,te.minZoom),p=te.maxZoom===void 0?p:Math.max(p,te.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=i===1/0?void 0:i,j!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Vn=Bn.extend({initialize:function(i,p){m(this,p),this._layers={};var j,W;if(i)for(j=0,W=i.length;j<W;j++)this.addLayer(i[j])},addLayer:function(i){var p=this.getLayerId(i);return this._layers[p]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var p=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(i){var p=typeof i=="number"?i:this.getLayerId(i);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var p=Array.prototype.slice.call(arguments,1),j,W;for(j in this._layers)W=this._layers[j],W[i]&&W[i].apply(W,p);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,p){for(var j in this._layers)i.call(p,this._layers[j]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return y(i)}}),hc=function(i,p){return new Vn(i,p)},Ma=Vn.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Vn.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Vn.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Re;for(var p in this._layers){var j=this._layers[p];i.extend(j.getBounds?j.getBounds():j.getLatLng())}return i}}),ne=function(i,p){return new Ma(i,p)},Y=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){m(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,p){var j=this._getIconUrl(i);if(!j){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var W=this._createImg(j,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(W,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(W.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),W},_setIconStyles:function(i,p){var j=this.options,W=j[p+"Size"];typeof W=="number"&&(W=[W,W]);var te=Q(W),he=Q(p==="shadow"&&j.shadowAnchor||j.iconAnchor||te&&te.divideBy(2,!0));i.className="leaflet-marker-"+p+" "+(j.className||""),he&&(i.style.marginLeft=-he.x+"px",i.style.marginTop=-he.y+"px"),te&&(i.style.width=te.x+"px",i.style.height=te.y+"px")},_createImg:function(i,p){return p=p||document.createElement("img"),p.src=i,p},_getIconUrl:function(i){return Qt.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function J(i){return new Y(i)}var ce=Y.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof ce.imagePath!="string"&&(ce.imagePath=this._detectIconPath()),(this.options.imagePath||ce.imagePath)+Y.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var p=function(j,W,te){var he=W.exec(j);return he&&he[te]};return i=p(i,/^url\((['"])?(.+)\1\)$/,2),i&&p(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=dr("div","leaflet-default-icon-path",document.body),p=Wn(i,"background-image")||Wn(i,"backgroundImage");if(document.body.removeChild(i),p=this._stripUrl(p),p)return p;var j=document.querySelector('link[href$="leaflet.css"]');return j?j.href.substring(0,j.href.length-11-1):""}}),je=ws.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Ir(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Fn(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Zr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var p=this._marker,j=p._map,W=this._marker.options.autoPanSpeed,te=this._marker.options.autoPanPadding,he=us(p._icon),ze=j.getPixelBounds(),it=j.getPixelOrigin(),ht=we(ze.min._subtract(it).add(te),ze.max._subtract(it).subtract(te));if(!ht.contains(he)){var Jt=Q((Math.max(ht.max.x,he.x)-ht.max.x)/(ze.max.x-ht.max.x)-(Math.min(ht.min.x,he.x)-ht.min.x)/(ze.min.x-ht.min.x),(Math.max(ht.max.y,he.y)-ht.max.y)/(ze.max.y-ht.max.y)-(Math.min(ht.min.y,he.y)-ht.min.y)/(ze.min.y-ht.min.y)).multiplyBy(W);j.panBy(Jt,{animate:!1}),this._draggable._newPos._add(Jt),this._draggable._startPos._add(Jt),Aa(p._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=T(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,i)))},_onDrag:function(i){var p=this._marker,j=p._shadow,W=us(p._icon),te=p._map.layerPointToLatLng(W);j&&Aa(j,W),p._latlng=te,i.latlng=te,i.oldLatLng=this._oldLatLng,p.fire("move",i).fire("drag",i)},_onDragEnd:function(i){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),at=Bn.extend({options:{icon:new ce,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,p){m(this,p),this._latlng=Be(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var p=this._latlng;return this._latlng=Be(i),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),j=i.icon.createIcon(this._icon),W=!1;j!==this._icon&&(this._icon&&this._removeIcon(),W=!0,i.title&&(j.title=i.title),j.tagName==="IMG"&&(j.alt=i.alt||"")),Fn(j,p),i.keyboard&&(j.tabIndex="0",j.setAttribute("role","button")),this._icon=j,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Tr(j,"focus",this._panOnFocus,this);var te=i.icon.createShadow(this._shadow),he=!1;te!==this._shadow&&(this._removeShadow(),he=!0),te&&(Fn(te,p),te.alt=""),this._shadow=te,i.opacity<1&&this._updateOpacity(),W&&this.getPane().appendChild(this._icon),this._initInteraction(),te&&he&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&da(this._icon,"focus",this._panOnFocus,this),Dn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Dn(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Aa(this._icon,i),this._shadow&&Aa(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var p=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(Fn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),je)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new je(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Ca(this._icon,i),this._shadow&&Ca(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var p=this.options.icon.options,j=p.iconSize?Q(p.iconSize):Q(0,0),W=p.iconAnchor?Q(p.iconAnchor):Q(0,0);i.panInside(this._latlng,{paddingTopLeft:W,paddingBottomRight:j.subtract(W)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ct(i,p){return new at(i,p)}var It=Bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return m(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wt=It.extend({options:{fill:!0,radius:10},initialize:function(i,p){m(this,p),this._latlng=Be(i),this._radius=this.options.radius},setLatLng:function(i){var p=this._latlng;return this._latlng=Be(i),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var p=i&&i.radius||this._radius;return It.prototype.setStyle.call(this,i),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,p=this._radiusY||i,j=this._clickTolerance(),W=[i+j,p+j];this._pxBounds=new ve(this._point.subtract(W),this._point.add(W))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zn(i,p){return new wt(i,p)}var Yt=wt.extend({initialize:function(i,p,j){if(typeof p=="number"&&(p=l({},j,{radius:p})),m(this,p),this._latlng=Be(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Re(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:It.prototype.setStyle,_project:function(){var i=this._latlng.lng,p=this._latlng.lat,j=this._map,W=j.options.crs;if(W.distance===Ye.distance){var te=Math.PI/180,he=this._mRadius/Ye.R/te,ze=j.project([p+he,i]),it=j.project([p-he,i]),ht=ze.add(it).divideBy(2),Jt=j.unproject(ht).lat,qn=Math.acos((Math.cos(he*te)-Math.sin(p*te)*Math.sin(Jt*te))/(Math.cos(p*te)*Math.cos(Jt*te)))/te;(isNaN(qn)||qn===0)&&(qn=he/Math.cos(Math.PI/180*p)),this._point=ht.subtract(j.getPixelOrigin()),this._radius=isNaN(qn)?0:ht.x-j.project([Jt,i-qn]).x,this._radiusY=ht.y-ze.y}else{var Yn=W.unproject(W.project(this._latlng).subtract([this._mRadius,0]));this._point=j.latLngToLayerPoint(this._latlng),this._radius=this._point.x-j.latLngToLayerPoint(Yn).x}this._updateBounds()}});function Gn(i,p,j){return new Yt(i,p,j)}var kn=It.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,p){m(this,p),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var p=1/0,j=null,W=Oa,te,he,ze=0,it=this._parts.length;ze<it;ze++)for(var ht=this._parts[ze],Jt=1,qn=ht.length;Jt<qn;Jt++){te=ht[Jt-1],he=ht[Jt];var Yn=W(i,te,he,!0);Yn<p&&(p=Yn,j=W(i,te,he))}return j&&(j.distance=Math.sqrt(p)),j},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Al(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,p){return p=p||this._defaultShape(),i=Be(i),p.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Re,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return $a(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var p=[],j=$a(i),W=0,te=i.length;W<te;W++)j?(p[W]=Be(i[W]),this._bounds.extend(p[W])):p[W]=this._convertLatLngs(i[W]);return p},_project:function(){var i=new ve;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),p=new q(i,i);this._rawPxBounds&&(this._pxBounds=new ve([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(i,p,j){var W=i[0]instanceof Ce,te=i.length,he,ze;if(W){for(ze=[],he=0;he<te;he++)ze[he]=this._map.latLngToLayerPoint(i[he]),j.extend(ze[he]);p.push(ze)}else for(he=0;he<te;he++)this._projectLatlngs(i[he],p,j)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,j,W,te,he,ze,it,ht;for(j=0,te=0,he=this._rings.length;j<he;j++)for(ht=this._rings[j],W=0,ze=ht.length;W<ze-1;W++)it=jc(ht[W],ht[W+1],i,W,!0),it&&(p[te]=p[te]||[],p[te].push(it[0]),(it[1]!==ht[W+1]||W===ze-2)&&(p[te].push(it[1]),te++))}},_simplifyPoints:function(){for(var i=this._parts,p=this.options.smoothFactor,j=0,W=i.length;j<W;j++)i[j]=$i(i[j],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,p){var j,W,te,he,ze,it,ht=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(j=0,he=this._parts.length;j<he;j++)for(it=this._parts[j],W=0,ze=it.length,te=ze-1;W<ze;te=W++)if(!(!p&&W===0)&&yo(i,it[te],it[W])<=ht)return!0;return!1}});function sa(i,p){return new kn(i,p)}kn._flat=Dl;var Xr=kn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var p=kn.prototype._convertLatLngs.call(this,i),j=p.length;return j>=2&&p[0]instanceof Ce&&p[0].equals(p[j-1])&&p.pop(),p},_setLatLngs:function(i){kn.prototype._setLatLngs.call(this,i),$a(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $a(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,p=this.options.weight,j=new q(p,p);if(i=new ve(i.min.subtract(j),i.max.add(j)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var W=0,te=this._rings.length,he;W<te;W++)he=Pl(this._rings[W],i,!0),he.length&&this._parts.push(he)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var p=!1,j,W,te,he,ze,it,ht,Jt;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(he=0,ht=this._parts.length;he<ht;he++)for(j=this._parts[he],ze=0,Jt=j.length,it=Jt-1;ze<Jt;it=ze++)W=j[ze],te=j[it],W.y>i.y!=te.y>i.y&&i.x<(te.x-W.x)*(i.y-W.y)/(te.y-W.y)+W.x&&(p=!p);return p||kn.prototype._containsPoint.call(this,i,!0)}});function pa(i,p){return new Xr(i,p)}var ia=Ma.extend({initialize:function(i,p){m(this,p),this._layers={},i&&this.addData(i)},addData:function(i){var p=g(i)?i:i.features,j,W,te;if(p){for(j=0,W=p.length;j<W;j++)te=p[j],(te.geometries||te.geometry||te.features||te.coordinates)&&this.addData(te);return this}var he=this.options;if(he.filter&&!he.filter(i))return this;var ze=Wi(i,he);return ze?(ze.feature=di(i),ze.defaultOptions=ze.options,this.resetStyle(ze),he.onEachFeature&&he.onEachFeature(i,ze),this.addLayer(ze)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=l({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(p){this._setLayerStyle(p,i)},this)},_setLayerStyle:function(i,p){i.setStyle&&(typeof p=="function"&&(p=p(i.feature)),i.setStyle(p))}});function Wi(i,p){var j=i.type==="Feature"?i.geometry:i,W=j?j.coordinates:null,te=[],he=p&&p.pointToLayer,ze=p&&p.coordsToLatLng||bi,it,ht,Jt,qn;if(!W&&!j)return null;switch(j.type){case"Point":return it=ze(W),Zi(he,i,it,p);case"MultiPoint":for(Jt=0,qn=W.length;Jt<qn;Jt++)it=ze(W[Jt]),te.push(Zi(he,i,it,p));return new Ma(te);case"LineString":case"MultiLineString":return ht=_o(W,j.type==="LineString"?0:1,ze),new kn(ht,p);case"Polygon":case"MultiPolygon":return ht=_o(W,j.type==="Polygon"?1:2,ze),new Xr(ht,p);case"GeometryCollection":for(Jt=0,qn=j.geometries.length;Jt<qn;Jt++){var Yn=Wi({geometry:j.geometries[Jt],type:"Feature",properties:i.properties},p);Yn&&te.push(Yn)}return new Ma(te);case"FeatureCollection":for(Jt=0,qn=j.features.length;Jt<qn;Jt++){var ir=Wi(j.features[Jt],p);ir&&te.push(ir)}return new Ma(te);default:throw new Error("Invalid GeoJSON object.")}}function Zi(i,p,j,W){return i?i(p,j):new at(j,W&&W.markersInheritOptions&&W)}function bi(i){return new Ce(i[1],i[0],i[2])}function _o(i,p,j){for(var W=[],te=0,he=i.length,ze;te<he;te++)ze=p?_o(i[te],p-1,j):(j||bi)(i[te]),W.push(ze);return W}function bo(i,p){return i=Be(i),i.alt!==void 0?[b(i.lng,p),b(i.lat,p),b(i.alt,p)]:[b(i.lng,p),b(i.lat,p)]}function No(i,p,j,W){for(var te=[],he=0,ze=i.length;he<ze;he++)te.push(p?No(i[he],$a(i[he])?0:p-1,j,W):bo(i[he],W));return!p&&j&&te.length>0&&te.push(te[0].slice()),te}function ei(i,p){return i.feature?l({},i.feature,{geometry:p}):di(p)}function di(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Do={toGeoJSON:function(i){return ei(this,{type:"Point",coordinates:bo(this.getLatLng(),i)})}};at.include(Do),Yt.include(Do),wt.include(Do),kn.include({toGeoJSON:function(i){var p=!$a(this._latlngs),j=No(this._latlngs,p?1:0,!1,i);return ei(this,{type:(p?"Multi":"")+"LineString",coordinates:j})}}),Xr.include({toGeoJSON:function(i){var p=!$a(this._latlngs),j=p&&!$a(this._latlngs[0]),W=No(this._latlngs,j?2:p?1:0,!0,i);return p||(W=[W]),ei(this,{type:(j?"Multi":"")+"Polygon",coordinates:W})}}),Vn.include({toMultiPoint:function(i){var p=[];return this.eachLayer(function(j){p.push(j.toGeoJSON(i).geometry.coordinates)}),ei(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(i){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(i);var j=p==="GeometryCollection",W=[];return this.eachLayer(function(te){if(te.toGeoJSON){var he=te.toGeoJSON(i);if(j)W.push(he.geometry);else{var ze=di(he);ze.type==="FeatureCollection"?W.push.apply(W,ze.features):W.push(ze)}}}),j?ei(this,{geometries:W,type:"GeometryCollection"}):{type:"FeatureCollection",features:W}}});function Bc(i,p){return new ia(i,p)}var pc=Bc,hi=Bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,p,j){this._url=i,this._bounds=me(p),m(this,j)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Fn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Dn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Wr(this._image),this},bringToBack:function(){return this._map&&Er(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=me(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",p=this._image=i?this._url:dr("img");if(Fn(p,"leaflet-image-layer"),this._zoomAnimated&&Fn(p,"leaflet-zoom-animated"),this.options.className&&Fn(p,this.options.className),p.onselectstart=v,p.onmousemove=v,p.onload=C(this.fire,this,"load"),p.onerror=C(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(i){var p=this._map.getZoomScale(i.zoom),j=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;is(this._image,j,p)},_reset:function(){var i=this._image,p=new ve(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),j=p.getSize();Aa(i,p.min),i.style.width=j.x+"px",i.style.height=j.y+"px"},_updateOpacity:function(){Ca(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),oo=function(i,p,j){return new hi(i,p,j)},Qo=hi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",p=this._image=i?this._url:dr("video");if(Fn(p,"leaflet-image-layer"),this._zoomAnimated&&Fn(p,"leaflet-zoom-animated"),this.options.className&&Fn(p,this.options.className),p.onselectstart=v,p.onmousemove=v,p.onloadeddata=C(this.fire,this,"load"),i){for(var j=p.getElementsByTagName("source"),W=[],te=0;te<j.length;te++)W.push(j[te].src);this._url=j.length>0?W:[p.src];return}g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var he=0;he<this._url.length;he++){var ze=dr("source");ze.src=this._url[he],p.appendChild(ze)}}});function zc(i,p,j){return new Qo(i,p,j)}var Gi=hi.extend({_initImage:function(){var i=this._image=this._url;Fn(i,"leaflet-image-layer"),this._zoomAnimated&&Fn(i,"leaflet-zoom-animated"),this.options.className&&Fn(i,this.options.className),i.onselectstart=v,i.onmousemove=v}});function fc(i,p,j){return new Gi(i,p,j)}var pi=Bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,p){i&&(i instanceof Ce||g(i))?(this._latlng=Be(i),m(this,p)):(m(this,i),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Ca(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Ca(this._container,1),this.bringToFront(),this.options.interactive&&(Fn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Ca(this._container,0),this._removeTimeout=setTimeout(C(Dn,void 0,this._container),200)):Dn(this._container),this.options.interactive&&(Zr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Be(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Wr(this._container),this},bringToBack:function(){return this._map&&Er(this._container),this},_prepareOpen:function(i){var p=this._source;if(!p._map)return!1;if(p instanceof Ma){p=null;var j=this._source._layers;for(var W in j)if(j[W]._map){p=j[W];break}if(!p)return!1;this._source=p}if(!i)if(p.getCenter)i=p.getCenter();else if(p.getLatLng)i=p.getLatLng();else if(p.getBounds)i=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")i.innerHTML=p;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),p=Q(this.options.offset),j=this._getAnchor();this._zoomAnimated?Aa(this._container,i.add(j)):p=p.add(i).add(j);var W=this._containerBottom=-p.y,te=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=W+"px",this._container.style.left=te+"px"}},_getAnchor:function(){return[0,0]}});Vr.include({_initOverlay:function(i,p,j,W){var te=p;return te instanceof i||(te=new i(W).setContent(p)),j&&te.setLatLng(j),te}}),Bn.include({_initOverlay:function(i,p,j,W){var te=j;return te instanceof i?(m(te,W),te._source=this):(te=p&&!W?p:new i(W,this),te.setContent(j)),te}});var Yi=pi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,pi.prototype.openOn.call(this,i)},onAdd:function(i){pi.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof It||this._source.on("preclick",ci))},onRemove:function(i){pi.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof It||this._source.off("preclick",ci))},getEvents:function(){var i=pi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",p=this._container=dr("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),j=this._wrapper=dr("div",i+"-content-wrapper",p);if(this._contentNode=dr("div",i+"-content",j),_r(p),li(this._contentNode),Tr(p,"contextmenu",ci),this._tipContainer=dr("div",i+"-tip-container",p),this._tip=dr("div",i+"-tip",this._tipContainer),this.options.closeButton){var W=this._closeButton=dr("a",i+"-close-button",p);W.setAttribute("role","button"),W.setAttribute("aria-label","Close popup"),W.href="#close",W.innerHTML='<span aria-hidden="true">&#215;</span>',Tr(W,"click",function(te){qa(te),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,p=i.style;p.width="",p.whiteSpace="nowrap";var j=i.offsetWidth;j=Math.min(j,this.options.maxWidth),j=Math.max(j,this.options.minWidth),p.width=j+1+"px",p.whiteSpace="",p.height="";var W=i.offsetHeight,te=this.options.maxHeight,he="leaflet-popup-scrolled";te&&W>te?(p.height=te+"px",Fn(i,he)):Zr(i,he),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var p=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),j=this._getAnchor();Aa(this._container,p.add(j))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,p=parseInt(Wn(this._container,"marginBottom"),10)||0,j=this._container.offsetHeight+p,W=this._containerWidth,te=new q(this._containerLeft,-j-this._containerBottom);te._add(us(this._container));var he=i.layerPointToContainerPoint(te),ze=Q(this.options.autoPanPadding),it=Q(this.options.autoPanPaddingTopLeft||ze),ht=Q(this.options.autoPanPaddingBottomRight||ze),Jt=i.getSize(),qn=0,Yn=0;he.x+W+ht.x>Jt.x&&(qn=he.x+W-Jt.x+ht.x),he.x-qn-it.x<0&&(qn=he.x-it.x),he.y+j+ht.y>Jt.y&&(Yn=he.y+j-Jt.y+ht.y),he.y-Yn-it.y<0&&(Yn=he.y-it.y),(qn||Yn)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([qn,Yn]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ol=function(i,p){return new Yi(i,p)};Vr.mergeOptions({closePopupOnClick:!0}),Vr.include({openPopup:function(i,p,j){return this._initOverlay(Yi,i,p,j).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Bn.include({bindPopup:function(i,p){return this._popup=this._initOverlay(Yi,this._popup,i,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Ma||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Js(i);var p=i.layer||i.target;if(this._popup._source===p&&!(p instanceof It)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=p,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Jo=pi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){pi.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){pi.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=pi.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",p=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=dr("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var p,j,W=this._map,te=this._container,he=W.latLngToContainerPoint(W.getCenter()),ze=W.layerPointToContainerPoint(i),it=this.options.direction,ht=te.offsetWidth,Jt=te.offsetHeight,qn=Q(this.options.offset),Yn=this._getAnchor();it==="top"?(p=ht/2,j=Jt):it==="bottom"?(p=ht/2,j=0):it==="center"?(p=ht/2,j=Jt/2):it==="right"?(p=0,j=Jt/2):it==="left"?(p=ht,j=Jt/2):ze.x<he.x?(it="right",p=0,j=Jt/2):(it="left",p=ht+(qn.x+Yn.x)*2,j=Jt/2),i=i.subtract(Q(p,j,!0)).add(qn).add(Yn),Zr(te,"leaflet-tooltip-right"),Zr(te,"leaflet-tooltip-left"),Zr(te,"leaflet-tooltip-top"),Zr(te,"leaflet-tooltip-bottom"),Fn(te,"leaflet-tooltip-"+it),Aa(te,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Ca(this._container,i)},_animateZoom:function(i){var p=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(p)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mc=function(i,p){return new Jo(i,p)};Vr.include({openTooltip:function(i,p,j){return this._initOverlay(Jo,i,p,j).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Bn.include({bindTooltip:function(i,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Jo,this._tooltip,i,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var p=i?"off":"on",j={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?j.add=this._openTooltip:(j.mouseover=this._openTooltip,j.mouseout=this.closeTooltip,j.click=this._openTooltip,this._map?this._addFocusListeners():j.add=this._addFocusListeners),this._tooltip.options.sticky&&(j.mousemove=this._moveTooltip),this[p](j),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Ma||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var p=typeof i.getElement=="function"&&i.getElement();p&&(Tr(p,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Tr(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var p=typeof i.getElement=="function"&&i.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var p=i.latlng,j,W;this._tooltip.options.sticky&&i.originalEvent&&(j=this._map.mouseEventToContainerPoint(i.originalEvent),W=this._map.containerPointToLayerPoint(j),p=this._map.layerPointToLatLng(W)),this._tooltip.setLatLng(p)}});var Ao=Y.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var p=i&&i.tagName==="DIV"?i:document.createElement("div"),j=this.options;if(j.html instanceof Element?(Hn(p),p.appendChild(j.html)):p.innerHTML=j.html!==!1?j.html:"",j.bgPos){var W=Q(j.bgPos);p.style.backgroundPosition=-W.x+"px "+-W.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function Xo(i){return new Ao(i)}Y.Default=ce;var $s=Bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Qt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){m(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Dn(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Wr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Er(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof q?i:new q(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var p=this.getPane().children,j=-i(-1/0,1/0),W=0,te=p.length,he;W<te;W++)he=p[W].style.zIndex,p[W]!==this._container&&he&&(j=i(j,+he));isFinite(j)&&(this.options.zIndex=j+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Qt.ielt9){Ca(this._container,this.options.opacity);var i=+new Date,p=!1,j=!1;for(var W in this._tiles){var te=this._tiles[W];if(!(!te.current||!te.loaded)){var he=Math.min(1,(i-te.loaded)/200);Ca(te.el,he),he<1?p=!0:(te.active?j=!0:this._onOpaqueTile(te),te.active=!0)}}j&&!this._noPrune&&this._pruneTiles(),p&&(O(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=dr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,p=this.options.maxZoom;if(i!==void 0){for(var j in this._levels)j=Number(j),this._levels[j].el.children.length||j===i?(this._levels[j].el.style.zIndex=p-Math.abs(i-j),this._onUpdateLevel(j)):(Dn(this._levels[j].el),this._removeTilesAtZoom(j),this._onRemoveLevel(j),delete this._levels[j]);var W=this._levels[i],te=this._map;return W||(W=this._levels[i]={},W.el=dr("div","leaflet-tile-container leaflet-zoom-animated",this._container),W.el.style.zIndex=p,W.origin=te.project(te.unproject(te.getPixelOrigin()),i).round(),W.zoom=i,this._setZoomTransform(W,te.getCenter(),te.getZoom()),v(W.el.offsetWidth),this._onCreateLevel(W)),this._level=W,W}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var i,p,j=this._map.getZoom();if(j>this.options.maxZoom||j<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)p=this._tiles[i],p.retain=p.current;for(i in this._tiles)if(p=this._tiles[i],p.current&&!p.active){var W=p.coords;this._retainParent(W.x,W.y,W.z,W.z-5)||this._retainChildren(W.x,W.y,W.z,W.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var p in this._tiles)this._tiles[p].coords.z===i&&this._removeTile(p)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Dn(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,p,j,W){var te=Math.floor(i/2),he=Math.floor(p/2),ze=j-1,it=new q(+te,+he);it.z=+ze;var ht=this._tileCoordsToKey(it),Jt=this._tiles[ht];return Jt&&Jt.active?(Jt.retain=!0,!0):(Jt&&Jt.loaded&&(Jt.retain=!0),ze>W?this._retainParent(te,he,ze,W):!1)},_retainChildren:function(i,p,j,W){for(var te=2*i;te<2*i+2;te++)for(var he=2*p;he<2*p+2;he++){var ze=new q(te,he);ze.z=j+1;var it=this._tileCoordsToKey(ze),ht=this._tiles[it];if(ht&&ht.active){ht.retain=!0;continue}else ht&&ht.loaded&&(ht.retain=!0);j+1<W&&this._retainChildren(te,he,j+1,W)}},_resetView:function(i){var p=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var p=this.options;return p.minNativeZoom!==void 0&&i<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<i?p.maxNativeZoom:i},_setView:function(i,p,j,W){var te=Math.round(p);this.options.maxZoom!==void 0&&te>this.options.maxZoom||this.options.minZoom!==void 0&&te<this.options.minZoom?te=void 0:te=this._clampZoom(te);var he=this.options.updateWhenZooming&&te!==this._tileZoom;(!W||he)&&(this._tileZoom=te,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),te!==void 0&&this._update(i),j||this._pruneTiles(),this._noPrune=!!j),this._setZoomTransforms(i,p)},_setZoomTransforms:function(i,p){for(var j in this._levels)this._setZoomTransform(this._levels[j],i,p)},_setZoomTransform:function(i,p,j){var W=this._map.getZoomScale(j,i.zoom),te=i.origin.multiplyBy(W).subtract(this._map._getNewPixelOrigin(p,j)).round();Qt.any3d?is(i.el,te,W):Aa(i.el,te)},_resetGrid:function(){var i=this._map,p=i.options.crs,j=this._tileSize=this.getTileSize(),W=this._tileZoom,te=this._map.getPixelWorldBounds(this._tileZoom);te&&(this._globalTileRange=this._pxBoundsToTileRange(te)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,p.wrapLng[0]],W).x/j.x),Math.ceil(i.project([0,p.wrapLng[1]],W).x/j.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([p.wrapLat[0],0],W).y/j.x),Math.ceil(i.project([p.wrapLat[1],0],W).y/j.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var p=this._map,j=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),W=p.getZoomScale(j,this._tileZoom),te=p.project(i,this._tileZoom).floor(),he=p.getSize().divideBy(W*2);return new ve(te.subtract(he),te.add(he))},_update:function(i){var p=this._map;if(p){var j=this._clampZoom(p.getZoom());if(i===void 0&&(i=p.getCenter()),this._tileZoom!==void 0){var W=this._getTiledPixelBounds(i),te=this._pxBoundsToTileRange(W),he=te.getCenter(),ze=[],it=this.options.keepBuffer,ht=new ve(te.getBottomLeft().subtract([it,-it]),te.getTopRight().add([it,-it]));if(!(isFinite(te.min.x)&&isFinite(te.min.y)&&isFinite(te.max.x)&&isFinite(te.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Jt in this._tiles){var qn=this._tiles[Jt].coords;(qn.z!==this._tileZoom||!ht.contains(new q(qn.x,qn.y)))&&(this._tiles[Jt].current=!1)}if(Math.abs(j-this._tileZoom)>1){this._setView(i,j);return}for(var Yn=te.min.y;Yn<=te.max.y;Yn++)for(var ir=te.min.x;ir<=te.max.x;ir++){var jr=new q(ir,Yn);if(jr.z=this._tileZoom,!!this._isValidTile(jr)){var ka=this._tiles[this._tileCoordsToKey(jr)];ka?ka.current=!0:ze.push(jr)}}if(ze.sort(function(ds,js){return ds.distanceTo(he)-js.distanceTo(he)}),ze.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ua=document.createDocumentFragment();for(ir=0;ir<ze.length;ir++)this._addTile(ze[ir],Ua);this._level.el.appendChild(Ua)}}}},_isValidTile:function(i){var p=this._map.options.crs;if(!p.infinite){var j=this._globalTileRange;if(!p.wrapLng&&(i.x<j.min.x||i.x>j.max.x)||!p.wrapLat&&(i.y<j.min.y||i.y>j.max.y))return!1}if(!this.options.bounds)return!0;var W=this._tileCoordsToBounds(i);return me(this.options.bounds).overlaps(W)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var p=this._map,j=this.getTileSize(),W=i.scaleBy(j),te=W.add(j),he=p.unproject(W,i.z),ze=p.unproject(te,i.z);return[he,ze]},_tileCoordsToBounds:function(i){var p=this._tileCoordsToNwSe(i),j=new Re(p[0],p[1]);return this.options.noWrap||(j=this._map.wrapLatLngBounds(j)),j},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var p=i.split(":"),j=new q(+p[0],+p[1]);return j.z=+p[2],j},_removeTile:function(i){var p=this._tiles[i];p&&(Dn(p.el),delete this._tiles[i],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Fn(i,"leaflet-tile");var p=this.getTileSize();i.style.width=p.x+"px",i.style.height=p.y+"px",i.onselectstart=v,i.onmousemove=v,Qt.ielt9&&this.options.opacity<1&&Ca(i,this.options.opacity)},_addTile:function(i,p){var j=this._getTilePos(i),W=this._tileCoordsToKey(i),te=this.createTile(this._wrapCoords(i),C(this._tileReady,this,i));this._initTile(te),this.createTile.length<2&&T(C(this._tileReady,this,i,null,te)),Aa(te,j),this._tiles[W]={el:te,coords:i,current:!0},p.appendChild(te),this.fire("tileloadstart",{tile:te,coords:i})},_tileReady:function(i,p,j){p&&this.fire("tileerror",{error:p,tile:j,coords:i});var W=this._tileCoordsToKey(i);j=this._tiles[W],j&&(j.loaded=+new Date,this._map._fadeAnimated?(Ca(j.el,0),O(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(j.active=!0,this._pruneTiles()),p||(Fn(j.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:j.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Qt.ielt9||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(C(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var p=new q(this._wrapX?R(i.x,this._wrapX):i.x,this._wrapY?R(i.y,this._wrapY):i.y);return p.z=i.z,p},_pxBoundsToTileRange:function(i){var p=this.getTileSize();return new ve(i.min.unscaleBy(p).floor(),i.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function As(i){return new $s(i)}var Ai=$s.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,p){this._url=i,p=m(this,p),p.detectRetina&&Qt.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,p){return this._url===i&&p===void 0&&(p=!0),this._url=i,p||this.redraw(),this},createTile:function(i,p){var j=document.createElement("img");return Tr(j,"load",C(this._tileOnLoad,this,p,j)),Tr(j,"error",C(this._tileOnError,this,p,j)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(j.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(j.referrerPolicy=this.options.referrerPolicy),j.alt="",j.src=this.getTileUrl(i),j},getTileUrl:function(i){var p={r:Qt.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var j=this._globalTileRange.max.y-i.y;this.options.tms&&(p.y=j),p["-y"]=j}return F(this._url,l(p,this.options))},_tileOnLoad:function(i,p){Qt.ielt9?setTimeout(C(i,this,null,p),0):i(null,p)},_tileOnError:function(i,p,j){var W=this.options.errorTileUrl;W&&p.getAttribute("src")!==W&&(p.src=W),i(j,p)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,p=this.options.maxZoom,j=this.options.zoomReverse,W=this.options.zoomOffset;return j&&(i=p-i),i+W},_getSubdomain:function(i){var p=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var i,p;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(p=this._tiles[i].el,p.onload=v,p.onerror=v,!p.complete)){p.src=P;var j=this._tiles[i].coords;Dn(p),delete this._tiles[i],this.fire("tileabort",{tile:p,coords:j})}},_removeTile:function(i){var p=this._tiles[i];if(p)return p.el.setAttribute("src",P),$s.prototype._removeTile.call(this,i)},_tileReady:function(i,p,j){if(!(!this._map||j&&j.getAttribute("src")===P))return $s.prototype._tileReady.call(this,i,p,j)}});function vs(i,p){return new Ai(i,p)}var Os=Ai.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,p){this._url=i;var j=l({},this.defaultWmsParams);for(var W in p)W in this.options||(j[W]=p[W]);p=m(this,p);var te=p.detectRetina&&Qt.retina?2:1,he=this.getTileSize();j.width=he.x*te,j.height=he.y*te,this.wmsParams=j},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,Ai.prototype.onAdd.call(this,i)},getTileUrl:function(i){var p=this._tileCoordsToNwSe(i),j=this._crs,W=we(j.project(p[0]),j.project(p[1])),te=W.min,he=W.max,ze=(this._wmsVersion>=1.3&&this._crs===Ds?[te.y,te.x,he.y,he.x]:[te.x,te.y,he.x,he.y]).join(","),it=Ai.prototype.getTileUrl.call(this,i);return it+k(this.wmsParams,it,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ze},setParams:function(i,p){return l(this.wmsParams,i),p||this.redraw(),this}});function xo(i,p){return new Os(i,p)}Ai.WMS=Os,vs.wms=xo;var fi=Bn.extend({options:{padding:.1},initialize:function(i){m(this,i),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Fn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,p){var j=this._map.getZoomScale(p,this._zoom),W=this._map.getSize().multiplyBy(.5+this.options.padding),te=this._map.project(this._center,p),he=W.multiplyBy(-j).add(te).subtract(this._map._getNewPixelOrigin(i,p));Qt.any3d?is(this._container,he,j):Aa(this._container,he)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,p=this._map.getSize(),j=this._map.containerPointToLayerPoint(p.multiplyBy(-i)).round();this._bounds=new ve(j,j.add(p.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Oo=fi.extend({options:{tolerance:0},getEvents:function(){var i=fi.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Tr(i,"mousemove",this._onMouseMove,this),Tr(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Tr(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,Dn(this._container),da(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var p in this._layers)i=this._layers[p],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fi.prototype._update.call(this);var i=this._bounds,p=this._container,j=i.getSize(),W=Qt.retina?2:1;Aa(p,i.min),p.width=W*j.x,p.height=W*j.y,p.style.width=j.x+"px",p.style.height=j.y+"px",Qt.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){fi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[y(i)]=i;var p=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var p=i._order,j=p.next,W=p.prev;j?j.prev=W:this._drawLast=W,W?W.next=j:this._drawFirst=j,delete i._order,delete this._layers[y(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var p=i.options.dashArray.split(/[, ]+/),j=[],W,te;for(te=0;te<p.length;te++){if(W=Number(p[te]),isNaN(W))return;j.push(W)}i.options._dashArray=j}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var p=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ve,this._redrawBounds.extend(i._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(i._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var p=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,p=this._redrawBounds;if(this._ctx.save(),p){var j=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,j.x,j.y),this._ctx.clip()}this._drawing=!0;for(var W=this._drawFirst;W;W=W.next)i=W.layer,(!p||i._pxBounds&&i._pxBounds.intersects(p))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,p){if(this._drawing){var j,W,te,he,ze=i._parts,it=ze.length,ht=this._ctx;if(it){for(ht.beginPath(),j=0;j<it;j++){for(W=0,te=ze[j].length;W<te;W++)he=ze[j][W],ht[W?"lineTo":"moveTo"](he.x,he.y);p&&ht.closePath()}this._fillStroke(ht,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var p=i._point,j=this._ctx,W=Math.max(Math.round(i._radius),1),te=(Math.max(Math.round(i._radiusY),1)||W)/W;te!==1&&(j.save(),j.scale(1,te)),j.beginPath(),j.arc(p.x,p.y/te,W,0,Math.PI*2,!1),te!==1&&j.restore(),this._fillStroke(j,i)}},_fillStroke:function(i,p){var j=p.options;j.fill&&(i.globalAlpha=j.fillOpacity,i.fillStyle=j.fillColor||j.color,i.fill(j.fillRule||"evenodd")),j.stroke&&j.weight!==0&&(i.setLineDash&&i.setLineDash(p.options&&p.options._dashArray||[]),i.globalAlpha=j.opacity,i.lineWidth=j.weight,i.strokeStyle=j.color,i.lineCap=j.lineCap,i.lineJoin=j.lineJoin,i.stroke())},_onClick:function(i){for(var p=this._map.mouseEventToLayerPoint(i),j,W,te=this._drawFirst;te;te=te.next)j=te.layer,j.options.interactive&&j._containsPoint(p)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(j))&&(W=j);this._fireEvent(W?[W]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,p)}},_handleMouseOut:function(i){var p=this._hoveredLayer;p&&(Zr(this._container,"leaflet-interactive"),this._fireEvent([p],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,p){if(!this._mouseHoverThrottled){for(var j,W,te=this._drawFirst;te;te=te.next)j=te.layer,j.options.interactive&&j._containsPoint(p)&&(W=j);W!==this._hoveredLayer&&(this._handleMouseOut(i),W&&(Fn(this._container,"leaflet-interactive"),this._fireEvent([W],i,"mouseover"),this._hoveredLayer=W)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(C(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,p,j){this._map._fireDOMEvent(p,j||p.type,i)},_bringToFront:function(i){var p=i._order;if(p){var j=p.next,W=p.prev;if(j)j.prev=W;else return;W?W.next=j:j&&(this._drawFirst=j),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(i)}},_bringToBack:function(i){var p=i._order;if(p){var j=p.next,W=p.prev;if(W)W.next=j;else return;j?j.prev=W:W&&(this._drawLast=W),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(i)}}});function Ms(i){return Qt.canvas?new Oo(i):null}var wo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),co={_initContainer:function(){this._container=dr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fi.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var p=i._container=wo("shape");Fn(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",i._path=wo("path"),p.appendChild(i._path),this._updateStyle(i),this._layers[y(i)]=i},_addPath:function(i){var p=i._container;this._container.appendChild(p),i.options.interactive&&i.addInteractiveTarget(p)},_removePath:function(i){var p=i._container;Dn(p),i.removeInteractiveTarget(p),delete this._layers[y(i)]},_updateStyle:function(i){var p=i._stroke,j=i._fill,W=i.options,te=i._container;te.stroked=!!W.stroke,te.filled=!!W.fill,W.stroke?(p||(p=i._stroke=wo("stroke")),te.appendChild(p),p.weight=W.weight+"px",p.color=W.color,p.opacity=W.opacity,W.dashArray?p.dashStyle=g(W.dashArray)?W.dashArray.join(" "):W.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=W.lineCap.replace("butt","flat"),p.joinstyle=W.lineJoin):p&&(te.removeChild(p),i._stroke=null),W.fill?(j||(j=i._fill=wo("fill")),te.appendChild(j),j.color=W.fillColor||W.color,j.opacity=W.fillOpacity):j&&(te.removeChild(j),i._fill=null)},_updateCircle:function(i){var p=i._point.round(),j=Math.round(i._radius),W=Math.round(i._radiusY||j);this._setPath(i,i._empty()?"M0 0":"AL "+p.x+","+p.y+" "+j+","+W+" 0,"+65535*360)},_setPath:function(i,p){i._path.v=p},_bringToFront:function(i){Wr(i._container)},_bringToBack:function(i){Er(i._container)}},ec=Qt.vml?wo:on,Oi=fi.extend({_initContainer:function(){this._container=ec("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ec("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Dn(this._container),da(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fi.prototype._update.call(this);var i=this._bounds,p=i.getSize(),j=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,j.setAttribute("width",p.x),j.setAttribute("height",p.y)),Aa(j,i.min),j.setAttribute("viewBox",[i.min.x,i.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(i){var p=i._path=ec("path");i.options.className&&Fn(p,i.options.className),i.options.interactive&&Fn(p,"leaflet-interactive"),this._updateStyle(i),this._layers[y(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Dn(i._path),i.removeInteractiveTarget(i._path),delete this._layers[y(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var p=i._path,j=i.options;p&&(j.stroke?(p.setAttribute("stroke",j.color),p.setAttribute("stroke-opacity",j.opacity),p.setAttribute("stroke-width",j.weight),p.setAttribute("stroke-linecap",j.lineCap),p.setAttribute("stroke-linejoin",j.lineJoin),j.dashArray?p.setAttribute("stroke-dasharray",j.dashArray):p.removeAttribute("stroke-dasharray"),j.dashOffset?p.setAttribute("stroke-dashoffset",j.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),j.fill?(p.setAttribute("fill",j.fillColor||j.color),p.setAttribute("fill-opacity",j.fillOpacity),p.setAttribute("fill-rule",j.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(i,p){this._setPath(i,ln(i._parts,p))},_updateCircle:function(i){var p=i._point,j=Math.max(Math.round(i._radius),1),W=Math.max(Math.round(i._radiusY),1)||j,te="a"+j+","+W+" 0 1,0 ",he=i._empty()?"M0 0":"M"+(p.x-j)+","+p.y+te+j*2+",0 "+te+-j*2+",0 ";this._setPath(i,he)},_setPath:function(i,p){i._path.setAttribute("d",p)},_bringToFront:function(i){Wr(i._path)},_bringToBack:function(i){Er(i._path)}});Qt.vml&&Oi.include(co);function Mo(i){return Qt.svg||Qt.vml?new Oi(i):null}Vr.include({getRenderer:function(i){var p=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var p=this._paneRenderers[i];return p===void 0&&(p=this._createRenderer({pane:i}),this._paneRenderers[i]=p),p},_createRenderer:function(i){return this.options.preferCanvas&&Ms(i)||Mo(i)}});var Ol=Xr.extend({initialize:function(i,p){Xr.prototype.initialize.call(this,this._boundsToLatLngs(i),p)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=me(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Ta(i,p){return new Ol(i,p)}Oi.create=ec,Oi.pointsToPath=ln,ia.geometryToLayer=Wi,ia.coordsToLatLng=bi,ia.coordsToLatLngs=_o,ia.latLngToCoords=bo,ia.latLngsToCoords=No,ia.getFeature=ei,ia.asFeature=di,Vr.mergeOptions({boxZoom:!0});var tc=ws.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Tr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){da(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Dn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ps(),Ns(),this._startPoint=this._map.mouseEventToContainerPoint(i),Tr(document,{contextmenu:Js,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=dr("div","leaflet-zoom-box",this._container),Fn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var p=new ve(this._point,this._startPoint),j=p.getSize();Aa(this._box,p.min),this._box.style.width=j.x+"px",this._box.style.height=j.y+"px"},_finish:function(){this._moved&&(Dn(this._box),Zr(this._container,"leaflet-crosshair")),ro(),Eo(),da(document,{contextmenu:Js,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(C(this._resetState,this),0);var p=new Re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Vr.addInitHook("addHandler","boxZoom",tc),Vr.mergeOptions({doubleClickZoom:!0});var Ki=ws.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var p=this._map,j=p.getZoom(),W=p.options.zoomDelta,te=i.originalEvent.shiftKey?j-W:j+W;p.options.doubleClickZoom==="center"?p.setZoom(te):p.setZoomAround(i.containerPoint,te)}});Vr.addInitHook("addHandler","doubleClickZoom",Ki),Vr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Uc=ws.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Ir(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Fn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Zr(this._map._container,"leaflet-grab"),Zr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=me(this._map.options.maxBounds);this._offsetLimit=we(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var p=this._lastTime=+new Date,j=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(j),this._times.push(p),this._prunePositions(p)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,p){return i-(i-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;i.x<p.min.x&&(i.x=this._viscousLimit(i.x,p.min.x)),i.y<p.min.y&&(i.y=this._viscousLimit(i.y,p.min.y)),i.x>p.max.x&&(i.x=this._viscousLimit(i.x,p.max.x)),i.y>p.max.y&&(i.y=this._viscousLimit(i.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,p=Math.round(i/2),j=this._initialWorldOffset,W=this._draggable._newPos.x,te=(W-p+j)%i+p-j,he=(W+p+j)%i-p-j,ze=Math.abs(te+j)<Math.abs(he+j)?te:he;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ze},_onDragEnd:function(i){var p=this._map,j=p.options,W=!j.inertia||i.noInertia||this._times.length<2;if(p.fire("dragend",i),W)p.fire("moveend");else{this._prunePositions(+new Date);var te=this._lastPos.subtract(this._positions[0]),he=(this._lastTime-this._times[0])/1e3,ze=j.easeLinearity,it=te.multiplyBy(ze/he),ht=it.distanceTo([0,0]),Jt=Math.min(j.inertiaMaxSpeed,ht),qn=it.multiplyBy(Jt/ht),Yn=Jt/(j.inertiaDeceleration*ze),ir=qn.multiplyBy(-Yn/2).round();!ir.x&&!ir.y?p.fire("moveend"):(ir=p._limitOffset(ir,p.options.maxBounds),T(function(){p.panBy(ir,{duration:Yn,easeLinearity:ze,noMoveStart:!0,animate:!0})}))}}});Vr.addInitHook("addHandler","dragging",Uc),Vr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gc=ws.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Tr(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),da(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,p=document.documentElement,j=i.scrollTop||p.scrollTop,W=i.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(W,j)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var p=this._panKeys={},j=this.keyCodes,W,te;for(W=0,te=j.left.length;W<te;W++)p[j.left[W]]=[-1*i,0];for(W=0,te=j.right.length;W<te;W++)p[j.right[W]]=[i,0];for(W=0,te=j.down.length;W<te;W++)p[j.down[W]]=[0,i];for(W=0,te=j.up.length;W<te;W++)p[j.up[W]]=[0,-1*i]},_setZoomDelta:function(i){var p=this._zoomKeys={},j=this.keyCodes,W,te;for(W=0,te=j.zoomIn.length;W<te;W++)p[j.zoomIn[W]]=i;for(W=0,te=j.zoomOut.length;W<te;W++)p[j.zoomOut[W]]=-i},_addHooks:function(){Tr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){da(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var p=i.keyCode,j=this._map,W;if(p in this._panKeys){if(!j._panAnim||!j._panAnim._inProgress)if(W=this._panKeys[p],i.shiftKey&&(W=Q(W).multiplyBy(3)),j.options.maxBounds&&(W=j._limitOffset(Q(W),j.options.maxBounds)),j.options.worldCopyJump){var te=j.wrapLatLng(j.unproject(j.project(j.getCenter()).add(W)));j.panTo(te)}else j.panBy(W)}else if(p in this._zoomKeys)j.setZoom(j.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&j._popup&&j._popup.options.closeOnEscapeKey)j.closePopup();else return;Js(i)}}});Vr.addInitHook("addHandler","keyboard",gc),Vr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xi=ws.extend({addHooks:function(){Tr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){da(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var p=go(i),j=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var W=Math.max(j-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(C(this._performZoom,this),W),Js(i)},_performZoom:function(){var i=this._map,p=i.getZoom(),j=this._map.options.zoomSnap||0;i._stop();var W=this._delta/(this._map.options.wheelPxPerZoomLevel*4),te=4*Math.log(2/(1+Math.exp(-Math.abs(W))))/Math.LN2,he=j?Math.ceil(te/j)*j:te,ze=i._limitZoom(p+(this._delta>0?he:-he))-p;this._delta=0,this._startTime=null,ze&&(i.options.scrollWheelZoom==="center"?i.setZoom(p+ze):i.setZoomAround(this._lastMousePos,p+ze))}});Vr.addInitHook("addHandler","scrollWheelZoom",xi);var nc=600;Vr.mergeOptions({tapHold:Qt.touchNative&&Qt.safari&&Qt.mobile,tapTolerance:15});var jo=ws.extend({addHooks:function(){Tr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){da(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var p=i.touches[0];this._startPos=this._newPos=new q(p.clientX,p.clientY),this._holdTimeout=setTimeout(C(function(){this._cancel(),this._isTapValid()&&(Tr(document,"touchend",qa),Tr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),nc),Tr(document,"touchend touchcancel contextmenu",this._cancel,this),Tr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){da(document,"touchend",qa),da(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),da(document,"touchend touchcancel contextmenu",this._cancel,this),da(document,"touchmove",this._onMove,this)},_onMove:function(i){var p=i.touches[0];this._newPos=new q(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,p){var j=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});j._simulated=!0,p.target.dispatchEvent(j)}});Vr.addInitHook("addHandler","tapHold",jo),Vr.mergeOptions({touchZoom:Qt.touch,bounceAtZoomLimits:!0});var wi=ws.extend({addHooks:function(){Fn(this._map._container,"leaflet-touch-zoom"),Tr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Zr(this._map._container,"leaflet-touch-zoom"),da(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var p=this._map;if(!(!i.touches||i.touches.length!==2||p._animatingZoom||this._zooming)){var j=p.mouseEventToContainerPoint(i.touches[0]),W=p.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(j.add(W)._divideBy(2))),this._startDist=j.distanceTo(W),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),Tr(document,"touchmove",this._onTouchMove,this),Tr(document,"touchend touchcancel",this._onTouchEnd,this),qa(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var p=this._map,j=p.mouseEventToContainerPoint(i.touches[0]),W=p.mouseEventToContainerPoint(i.touches[1]),te=j.distanceTo(W)/this._startDist;if(this._zoom=p.getScaleZoom(te,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&te<1||this._zoom>p.getMaxZoom()&&te>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,te===1)return}else{var he=j._add(W)._divideBy(2)._subtract(this._centerPoint);if(te===1&&he.x===0&&he.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(he),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var ze=C(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=T(ze,this,!0),qa(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),da(document,"touchmove",this._onTouchMove,this),da(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Vr.addInitHook("addHandler","touchZoom",wi),Vr.BoxZoom=tc,Vr.DoubleClickZoom=Ki,Vr.Drag=Uc,Vr.Keyboard=gc,Vr.ScrollWheelZoom=xi,Vr.TapHold=jo,Vr.TouchZoom=wi,r.Bounds=ve,r.Browser=Qt,r.CRS=be,r.Canvas=Oo,r.Circle=Yt,r.CircleMarker=wt,r.Class=I,r.Control=gs,r.DivIcon=Ao,r.DivOverlay=pi,r.DomEvent=Oc,r.DomUtil=uc,r.Draggable=Ir,r.Evented=$,r.FeatureGroup=Ma,r.GeoJSON=ia,r.GridLayer=$s,r.Handler=ws,r.Icon=Y,r.ImageOverlay=hi,r.LatLng=Ce,r.LatLngBounds=Re,r.Layer=Bn,r.LayerGroup=Vn,r.LineUtil=vt,r.Map=Vr,r.Marker=at,r.Mixin=Cl,r.Path=It,r.Point=q,r.PolyUtil=vo,r.Polygon=Xr,r.Polyline=kn,r.Popup=Yi,r.PosAnimation=Xs,r.Projection=Ic,r.Rectangle=Ol,r.Renderer=fi,r.SVG=Oi,r.SVGOverlay=Gi,r.TileLayer=Ai,r.Tooltip=Jo,r.Transformation=He,r.Util=M,r.VideoOverlay=Qo,r.bind=C,r.bounds=we,r.canvas=Ms,r.circle=Gn,r.circleMarker=zn,r.control=qi,r.divIcon=Xo,r.extend=l,r.featureGroup=ne,r.geoJSON=Bc,r.geoJson=pc,r.gridLayer=As,r.icon=J,r.imageOverlay=oo,r.latLng=Be,r.latLngBounds=me,r.layerGroup=hc,r.map=ui,r.marker=Ct,r.point=Q,r.polygon=pa,r.polyline=sa,r.popup=ol,r.rectangle=Ta,r.setOptions=m,r.stamp=y,r.svg=Mo,r.svgOverlay=fc,r.tileLayer=vs,r.tooltip=mc,r.transformation=Te,r.version=s,r.videoOverlay=zc;var Qi=window.L;r.noConflict=function(){return window.L=Qi,this},window.L=r})}(pp,pp.exports)),pp.exports}var D2=oO();function cO(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function lO(e,t){return t==null?function(s,l){const h=Z.useRef(void 0);return h.current||(h.current=e(s,l)),h}:function(s,l){const h=Z.useRef(void 0);h.current||(h.current=e(s,l));const C=Z.useRef(s),{instance:N}=h.current;return Z.useEffect(function(){C.current!==s&&(t(N,s,C.current),C.current=s)},[N,s,t]),h}}function uO(e,t){Z.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function dO(e){return function(r){const s=P2(),l=e(N2(r,s),s);return tO(s.map,r.attribution),sO(l.current,r.eventHandlers),uO(l.current,s),l}}function hO(e,t){const r=lO(e,t),s=dO(r);return aO(s)}function pO(e,t,r){const{opacity:s,zIndex:l}=t;s!=null&&s!==r.opacity&&e.setOpacity(s),l!=null&&l!==r.zIndex&&e.setZIndex(l)}function fO(){return P2().map}function mO({bounds:e,boundsOptions:t,center:r,children:s,className:l,id:h,placeholder:C,style:N,whenReady:y,zoom:u,...R},v){const[b]=Z.useState({className:l,id:h,style:N}),[E,_]=Z.useState(null),m=Z.useRef(void 0);Z.useImperativeHandle(v,()=>E?.map??null,[E]);const k=Z.useCallback(F=>{if(F!==null&&!m.current){const g=new D2.Map(F,R);m.current=g,r!=null&&u!=null?g.setView(r,u):e!=null&&g.fitBounds(e,t),y!=null&&g.whenReady(y),_(rO(g))}},[]);Z.useEffect(()=>()=>{E?.map.remove()},[E]);const w=E?$t.createElement(T2,{value:E},s):C??null;return $t.createElement("div",{...b,ref:k},w)}const gO=Z.forwardRef(mO),vO=hO(function({url:t,...r},s){const l=new D2.TileLayer(t,N2(r,s));return cO(l,s)},function(t,r,s){pO(t,r,s);const{url:l}=r;l!=null&&l!==s.url&&t.setUrl(l)});var A2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Kx=$t.createContext&&$t.createContext(A2),yO=["attr","size","title"];function _O(e,t){if(e==null)return{};var r=bO(e,t),s,l;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(l=0;l<h.length;l++)s=h[l],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function bO(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function ym(){return ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ym.apply(this,arguments)}function Qx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,s)}return r}function _m(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qx(Object(r),!0).forEach(function(s){xO(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qx(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function xO(e,t,r){return t=wO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wO(e){var t=SO(e,"string");return typeof t=="symbol"?t:t+""}function SO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O2(e){return e&&e.map((t,r)=>$t.createElement(t.tag,_m({key:r},t.attr),O2(t.child)))}function RO(e){return t=>$t.createElement(EO,ym({attr:_m({},e.attr)},t),O2(e.child))}function EO(e){var t=r=>{var{attr:s,size:l,title:h}=e,C=_O(e,yO),N=l||r.size||"1em",y;return r.className&&(y=r.className),e.className&&(y=(y?y+" ":"")+e.className),$t.createElement("svg",ym({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,C,{className:y,style:_m(_m({color:e.color||r.color},r.style),e.style),height:N,width:N,xmlns:"http://www.w3.org/2000/svg"}),h&&$t.createElement("title",null,h),e.children)};return Kx!==void 0?$t.createElement(Kx.Consumer,null,r=>t(r)):t(A2)}function kO(e){return RO({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(e)}function CO({coords:e}){const t=fO();return $t.useEffect(()=>{e&&t.flyTo(e,12,{duration:1.5})},[e,t]),null}const Jx=[24.8607,67.0011],TO=()=>{const[e,t]=Z.useState(""),[r,s]=Z.useState(null),[l,h]=Z.useState(!1),{user:C}=si(),{doctor:N}=fs(),{admin:y}=$o(),u=(_,m)=>{h(!0),t(_),setTimeout(()=>{s(m),h(!1)},1200)},R=C&&C.name||N&&N.name||y&&"Admin"||"Guest",v=C&&"User"||N&&"Doctor"||y&&"Admin"||"Guest",E=((_="")=>{if(!_||typeof _!="string")return"G";const m=_.trim().split(/\s+/).filter(Boolean);if(m.length>=2){const k=m[0][0]||"",w=m[m.length-1][0]||"";return(k+w).toUpperCase().slice(0,3)}return _.slice(0,2).toUpperCase()})(R);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"w-full flex flex-col items-center justify-center py-4 px-4 bg-gradient-to-r from-[#014e78] via-[#009688] to-[#43cea2] text-white shadow-lg mb-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute left-4 top-4 opacity-12 text-[96px] pointer-events-none select-none text-white/60",children:o.jsx(kO,{})}),o.jsxs("div",{className:"flex items-center gap-4 mb-2 z-10",children:[o.jsx("div",{className:"relative",title:R,"aria-label":`${v} avatar for ${R}`,children:o.jsx("div",{className:`\r
                w-14 h-14 rounded-full\r
                bg-gradient-to-tr from-emerald-500 to-cyan-400\r
                flex items-center justify-center\r
                text-white text-lg font-extrabold\r
                shadow-2xl\r
                transform transition-all duration-200\r
                ring-4 ring-white/80\r
                hover:scale-105\r
                `,children:o.jsx("span",{className:"select-none",children:E})})}),o.jsxs("p",{className:"text-lg sm:text-xl font-semibold z-10",children:["Hello, ",R]})]}),o.jsxs("h2",{className:"text-xl sm:text-3xl font-extrabold tracking-tight text-center z-10 drop-shadow-lg",children:["Find the ",o.jsx("span",{className:"text-[#ffe082]",children:"Best Doctor"})," Near You"]})]}),o.jsxs("section",{className:"relative w-full min-h-[400px] mt-0 overflow-hidden",children:[l&&o.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:o.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-blue-500 rounded-full animate-spin"})}),o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsxs(gO,{center:r||Jx,zoom:12,style:{height:"100%",width:"100%"},zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,attributionControl:!1,children:[o.jsx(vO,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),o.jsx(CO,{coords:r||Jx})]}),o.jsx("div",{className:"absolute inset-0 bg-white/70 backdrop-blur-sm z-10"})]}),o.jsx("div",{className:"relative h-[400px] z-20 flex flex-col items-center justify-center max-w-2xl mx-auto py-12 px-6",children:o.jsx(W6,{onCitySelect:u})})]}),!e&&o.jsxs("div",{className:"w-full flex flex-col items-center mt-6 space-y-4",children:[o.jsx("h2",{className:"text-lg font-bold",children:"How can we help you today?"}),o.jsx(C2,{className:"text-sm px-6 py-3"})]})]})},PO=()=>{const{allDoctors:e}=fs(),{allPublicHospital:t}=to(),{allUsers:r}=si(),s=[{number:e?.length||0,label:"Verified Doctors",description:"PMC verified doctors across Pakistan"},{number:r.length||0,label:"Happy Patients",description:"Patients served nationwide"},{number:t?.length||0,label:"Hospitals",description:"Partner hospitals and clinics"},{number:"24/7",label:"Support",description:"Round the clock customer support"}];return o.jsx("section",{className:"py-16 bg-emerald-700 text-white",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Trusted by Millions"}),o.jsx("p",{className:"text-xl text-emerald-100",children:"Join Pakistan's largest healthcare community"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8",children:s.map((l,h)=>o.jsxs("div",{className:"bg-emerald-800 bg-opacity-80 rounded-xl shadow-md p-8 flex flex-col items-center transition-transform duration-200 hover:scale-105",children:[o.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2 text-emerald-200 drop-shadow",children:l.number}),o.jsx("h3",{className:"text-lg md:text-xl font-semibold mb-2 text-white",children:l.label}),o.jsx("p",{className:"text-emerald-100 text-sm md:text-base text-center",children:l.description})]},h))})]})})},Hp=({triggerText:e="",title:t,description:r,children:s,open:l,onOpenChange:h})=>o.jsxs(J0,{open:l,onOpenChange:h,children:[e&&o.jsx(t2,{children:e}),o.jsxs(X0,{children:[o.jsxs(ey,{children:[t&&o.jsx(ty,{children:t}),r&&o.jsx(ny,{children:r})]}),s]})]}),Ym=({doctor:e})=>{const[t,r]=Z.useState(!1),{user:s}=si(),{doctor:l}=fs(),{admin:h}=$o(),C=as(),N=e?._id===l?._id,u=((R,v)=>`${R.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${v}`)(e.name,e._id);return o.jsxs("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl hover:scale-105 border-t-4 border-emerald-500 transition-all duration-300 p-6 flex flex-col justify-between",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("img",{src:e.profilePicture||"https://ui-avatars.com/api/?name="+encodeURIComponent(e.name)+"&background=random",alt:e.name,className:"w-20 h-20 rounded-full mx-auto mb-3 object-cover border-4 border-emerald-100 shadow"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),o.jsx("p",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-2 py-1 rounded-full mb-1",children:Array.isArray(e.speciality)?e.speciality.filter(Boolean).join(", "):e.speciality||"General Medicine"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[e.experience||0," years experience"]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Rating:"}),o.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[o.jsx("span",{children:""}),o.jsx("span",{className:"font-medium",children:e.rating.average}),o.jsxs("span",{className:"text-gray-400 ml-1",children:["(",e.rating.count,")"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between gap-7 text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Hospital:"}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-500 text-xs",children:[" ",e.hospital||"Not specified"]})]}),o.jsx("div",{className:"flex items-center justify-between gap-7 text-sm",children:o.jsx("div",{className:"flex items-center gap-1 text-gray-500 text-xs",children:e.hospitalVerified===!0?"Member of Registered Hospital":"Not Member of Registered Hospital"})}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Location:"}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-500 text-xs",children:[""," ",e.fullAddress?e.fullAddress.split(",").slice(-2).join(", "):"Not specified"]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Fee:"}),o.jsxs("span",{className:"font-medium text-green-600",children:["Rs. ",e.fee||"Not specified"]})]}),e.mainDegree&&o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Degree:"}),o.jsx("span",{className:"text-gray-500",children:e.mainDegree})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-xs text-center",children:o.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${e.availability?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.availability?"Available":"Not Available"})}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(Za,{to:`/doctor/profile/${u}`,className:"px-3 py-2 text-sm border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 text-center",children:"View Profile"}),o.jsx("button",{onClick:()=>{s||h||l?C(`/doctor/book/${u}`):r(!0)},disabled:N,className:"px-3 py-2 text-sm bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 text-center",children:N?"Not allowed":"Book Now"})]})]}),o.jsx(Hp,{title:"Login Required",description:"Only logged in users can book appointments.",open:t,onOpenChange:r,children:o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{onClick:()=>{r(!1),C("/login")},className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",children:"Go to Login"})]})})]})},NO=()=>{const{allDoctors:e=[],loading:t}=fs(),r=l=>{const h=l?.rating;return h?Number(typeof h=="object"?h.average||0:h||0):0},s=e.slice().sort((l,h)=>r(h)-r(l)).slice(0,4);return t?o.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Top Rated Doctors"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Consult with Pakistan's best doctors from the comfort of your home"})]}),o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})]}):s.length?o.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Top Rated Doctors"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Consult with Pakistan's best doctors from the comfort of your home"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map(l=>o.jsx(Ym,{doctor:l},l._id))})]}):o.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Top Rated Doctors"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Consult with Pakistan's best doctors from the comfort of your home"})]}),o.jsx("div",{className:"text-center text-gray-500",children:o.jsx("p",{children:"No doctors available at the moment."})})]})},M2=({mode:e="rating-and-review",trigger:t=null,open:r,onOpenChange:s,initialRating:l=0,initialReview:h="",onSubmit:C=()=>{},onUpdate:N=()=>{},onDelete:y=()=>{},title:u="Leave a Review",description:R="",submitLabel:v="Submit"})=>{const[b,E]=Z.useState(!1),_=r??b,m=O=>{s?s(O):E(O)},[k,w]=Z.useState(l||0),[F,g]=Z.useState(0),[A,P]=Z.useState(h||""),[H,D]=Z.useState(!1);Z.useEffect(()=>{w(l||0)},[l,_]),Z.useEffect(()=>{P(h||"")},[h,_]);const S=async()=>{C({rating:k,review:A.trim()})},x=async()=>{N({rating:k,review:A.trim()})},d=async()=>{y()},T=({index:O})=>{const M=O<=(F||k);return o.jsx("button",{type:"button","aria-label":`${O} star${O>1?"s":""}`,onClick:()=>w(O),onMouseEnter:()=>g(O),onMouseLeave:()=>g(0),className:`w-9 h-9 flex items-center justify-center rounded-md transition ${M?"bg-yellow-50 text-yellow-500":"bg-gray-100 text-gray-300"} focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-amber-300`,children:o.jsx("svg",{viewBox:"0 0 20 20",className:"w-5 h-5",fill:"currentColor","aria-hidden":!0,children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})};return o.jsxs(J0,{open:_,onOpenChange:m,children:[t&&o.jsx(t2,{asChild:!0,children:t}),o.jsxs(X0,{className:"max-w-md",children:[o.jsxs(ey,{children:[u&&o.jsx(ty,{className:"text-lg font-semibold",children:u}),R&&o.jsx(ny,{className:"text-sm text-gray-500",children:R})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Rating"}),o.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(O=>o.jsx(T,{index:O},O))}),o.jsx("div",{className:"mt-2 text-xs text-gray-500",children:k?`${k} / 5`:"Select a rating"})]}),e==="rating-and-review"&&o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{htmlFor:"review",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review"}),o.jsx("textarea",{id:"review",rows:4,value:A,onChange:O=>P(O.target.value),placeholder:"Tell other customers about your experience...",className:"w-full rounded-md border border-gray-200 p-3 text-sm focus:ring-2 focus:ring-emerald-300 focus:outline-none"}),o.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:[A.trim().length," characters"]})]}),o.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 rounded-md text-sm bg-gray-100 hover:bg-gray-200 transition",disabled:H,children:"Cancel"}),o.jsx("button",{type:"button",onClick:d,disabled:H,className:`px-4 py-2 rounded-md text-sm text-white transition ${H?"bg-red-300 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:"Delete"}),o.jsx("button",{type:"button",onClick:x,disabled:!k||H,className:`px-4 py-2 rounded-md text-sm text-white transition ${!k||H?"bg-blue-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:"Update"}),o.jsx("button",{type:"button",onClick:S,disabled:!k||H,className:`px-4 py-2 rounded-md text-sm text-white transition ${!k||H?"bg-emerald-300 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700"}`,children:H?"Sending...":v})]})]})]})},j2=({hospital:e})=>{const r=((s,l)=>`${s.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${l}`)(e.name,e._id);return o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center",children:[o.jsx("img",{src:e.image||e.profilePicture||"https://ui-avatars.com/api/?name=Hospital&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-emerald-800 mb-1",children:e.name}),o.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2",children:e.city}),o.jsxs("div",{className:"text-gray-700 text-sm mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Address:"})," ",e.address]}),o.jsxs("div",{className:"text-gray-700 text-sm mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Contact:"})," ",e.contact||e.phone]}),o.jsxs("div",{className:"text-gray-700 text-sm mb-2",children:[o.jsx("span",{className:"font-semibold",children:"Beds:"})," ",e.beds??e.totalBeds]}),o.jsx(Za,{to:`/hospital/profile/${r}`,className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full text-center",children:"View Hospital"})]})},DO=({level:e})=>{const t={excellent:"bg-emerald-100 text-emerald-800",good:"bg-amber-100 text-amber-800",fair:"bg-sky-100 text-sky-800",poor:"bg-rose-100 text-rose-800",default:"bg-gray-100 text-gray-800"};return o.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium shadow-sm ${t[(e||"").toLowerCase()||"default"]}`,"aria-label":`Satisfaction: ${e}`,children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-current opacity-80"}),e]})},AO=({filled:e})=>o.jsx("svg",{viewBox:"0 0 20 20",className:`w-4 h-4 ${e?"text-yellow-400":"text-gray-300"}`,fill:"currentColor","aria-hidden":"true",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),OO=({testimonial:e})=>{const{name:t="Anonymous",rating:r=5,description:s="",avatar:l,satisfactionLevel:h="Excellent"}=e||{};return o.jsxs("article",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-lg hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-300 max-w-md mx-auto flex flex-col h-full min-h-[280px]","aria-label":`Testimonial from ${t}`,children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex items-center gap-4",children:[l?o.jsx("img",{src:l,alt:`${t} avatar`,className:"w-14 h-14 rounded-full object-cover border-2 border-white shadow-sm",loading:"lazy"}):o.jsx("div",{className:"w-14 h-14 rounded-full bg-emerald-100 flex items-center justify-center",children:o.jsx("span",{className:"text-emerald-600 font-semibold text-lg",children:t.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm sm:text-base font-semibold text-emerald-900",children:t}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("div",{className:"flex -space-x-1",children:[...Array(5)].map((C,N)=>o.jsx(AO,{filled:N<Math.round(r)},N))}),o.jsx("span",{className:"text-xs text-gray-500 font-medium",children:r.toFixed(1)})]})]})]})}),o.jsxs("blockquote",{className:"relative text-gray-800 italic text-sm sm:text-base mb-6 flex-grow",children:[o.jsx("span",{className:"absolute -top-4 -left-3 text-4xl text-emerald-100","aria-hidden":"true",children:'"'}),o.jsx("p",{className:"pl-4",children:s||o.jsx("span",{className:"text-gray-400 italic",children:'"Great experience with QuickMed platform!"'})})]}),o.jsx("div",{className:"mt-auto",children:o.jsx(DO,{level:h})})]})},L2=({lab:e})=>o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center",children:[o.jsx("img",{src:e.image||"https://ui-avatars.com/api/?name=Lab&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-emerald-800 mb-1",children:e.name}),o.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2",children:e.city}),o.jsxs("div",{className:"text-gray-700 text-sm mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Address:"})," ",e.address]}),o.jsxs("div",{className:"text-gray-700 text-sm mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Contact:"})," ",e.contact]}),o.jsxs("div",{className:"text-gray-700 text-sm mb-2",children:[o.jsx("span",{className:"font-semibold",children:"Tests Available:"})," ",e.tests]}),o.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 font-medium w-full mb-2",children:"Book Test"}),o.jsx("button",{className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full",children:"View Reports"})]}),I2=({medicine:e})=>o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center",children:[o.jsx("img",{src:e.image||"https://ui-avatars.com/api/?name=Medicine&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-emerald-800 mb-1",children:e.name}),o.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2",children:e.type}),o.jsxs("div",{className:"text-gray-700 text-sm mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Description:"})," ",e.description]}),o.jsxs("div",{className:"text-emerald-700 font-bold mb-2",children:["Price: Rs. ",e.price]}),o.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 font-medium w-full mb-2",children:"Add to Cart"}),o.jsx("button",{className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full",children:"Buy Now"})]});//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var B2;function Zn(){return B2.apply(null,arguments)}function MO(e){B2=e}function Xc(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ud(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Ba(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function oy(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Ba(e,t))return!1;return!0}function Uo(e){return e===void 0}function su(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Vp(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function z2(e,t){var r=[],s,l=e.length;for(s=0;s<l;++s)r.push(t(e[s],s));return r}function Mu(e,t){for(var r in t)Ba(t,r)&&(e[r]=t[r]);return Ba(t,"toString")&&(e.toString=t.toString),Ba(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Sl(e,t,r,s){return cR(e,t,r,s,!0).utc()}function jO(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function la(e){return e._pf==null&&(e._pf=jO()),e._pf}var u0;Array.prototype.some?u0=Array.prototype.some:u0=function(e){var t=Object(this),r=t.length>>>0,s;for(s=0;s<r;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};function cy(e){var t=null,r=!1,s=e._d&&!isNaN(e._d.getTime());if(s&&(t=la(e),r=u0.call(t.parsedDateParts,function(l){return l!=null}),s=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(s=s&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=s;else return s;return e._isValid}function Km(e){var t=Sl(NaN);return e!=null?Mu(la(t),e):la(t).userInvalidated=!0,t}var Xx=Zn.momentProperties=[],Iv=!1;function ly(e,t){var r,s,l,h=Xx.length;if(Uo(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Uo(t._i)||(e._i=t._i),Uo(t._f)||(e._f=t._f),Uo(t._l)||(e._l=t._l),Uo(t._strict)||(e._strict=t._strict),Uo(t._tzm)||(e._tzm=t._tzm),Uo(t._isUTC)||(e._isUTC=t._isUTC),Uo(t._offset)||(e._offset=t._offset),Uo(t._pf)||(e._pf=la(t)),Uo(t._locale)||(e._locale=t._locale),h>0)for(r=0;r<h;r++)s=Xx[r],l=t[s],Uo(l)||(e[s]=l);return e}function qp(e){ly(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Iv===!1&&(Iv=!0,Zn.updateOffset(this),Iv=!1)}function el(e){return e instanceof qp||e!=null&&e._isAMomentObject!=null}function U2(e){Zn.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Dc(e,t){var r=!0;return Mu(function(){if(Zn.deprecationHandler!=null&&Zn.deprecationHandler(null,e),r){var s=[],l,h,C,N=arguments.length;for(h=0;h<N;h++){if(l="",typeof arguments[h]=="object"){l+=`
[`+h+"] ";for(C in arguments[0])Ba(arguments[0],C)&&(l+=C+": "+arguments[0][C]+", ");l=l.slice(0,-2)}else l=arguments[h];s.push(l)}U2(e+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var e1={};function F2(e,t){Zn.deprecationHandler!=null&&Zn.deprecationHandler(e,t),e1[e]||(U2(t),e1[e]=!0)}Zn.suppressDeprecationWarnings=!1;Zn.deprecationHandler=null;function Rl(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function LO(e){var t,r;for(r in e)Ba(e,r)&&(t=e[r],Rl(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function d0(e,t){var r=Mu({},e),s;for(s in t)Ba(t,s)&&(ud(e[s])&&ud(t[s])?(r[s]={},Mu(r[s],e[s]),Mu(r[s],t[s])):t[s]!=null?r[s]=t[s]:delete r[s]);for(s in e)Ba(e,s)&&!Ba(t,s)&&ud(e[s])&&(r[s]=Mu({},r[s]));return r}function uy(e){e!=null&&this.set(e)}var h0;Object.keys?h0=Object.keys:h0=function(e){var t,r=[];for(t in e)Ba(e,t)&&r.push(t);return r};var IO={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function BO(e,t,r){var s=this._calendar[e]||this._calendar.sameElse;return Rl(s)?s.call(t,r):s}function bl(e,t,r){var s=""+Math.abs(e),l=t-s.length,h=e>=0;return(h?r?"+":"":"-")+Math.pow(10,Math.max(0,l)).toString().substr(1)+s}var dy=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Vf=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Bv={},sh={};function Dr(e,t,r,s){var l=s;typeof s=="string"&&(l=function(){return this[s]()}),e&&(sh[e]=l),t&&(sh[t[0]]=function(){return bl(l.apply(this,arguments),t[1],t[2])}),r&&(sh[r]=function(){return this.localeData().ordinal(l.apply(this,arguments),e)})}function zO(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function UO(e){var t=e.match(dy),r,s;for(r=0,s=t.length;r<s;r++)sh[t[r]]?t[r]=sh[t[r]]:t[r]=zO(t[r]);return function(l){var h="",C;for(C=0;C<s;C++)h+=Rl(t[C])?t[C].call(l,e):t[C];return h}}function am(e,t){return e.isValid()?(t=H2(t,e.localeData()),Bv[t]=Bv[t]||UO(t),Bv[t](e)):e.localeData().invalidDate()}function H2(e,t){var r=5;function s(l){return t.longDateFormat(l)||l}for(Vf.lastIndex=0;r>=0&&Vf.test(e);)e=e.replace(Vf,s),Vf.lastIndex=0,r-=1;return e}var FO={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function HO(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(dy).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[e])}var VO="Invalid date";function qO(){return this._invalidDate}var $O="%d",WO=/\d{1,2}/;function ZO(e){return this._ordinal.replace("%d",e)}var GO={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function YO(e,t,r,s){var l=this._relativeTime[r];return Rl(l)?l(e,t,r,s):l.replace(/%d/i,e)}function KO(e,t){var r=this._relativeTime[e>0?"future":"past"];return Rl(r)?r(t):r.replace(/%s/i,t)}var t1={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Ac(e){return typeof e=="string"?t1[e]||t1[e.toLowerCase()]:void 0}function hy(e){var t={},r,s;for(s in e)Ba(e,s)&&(r=Ac(s),r&&(t[r]=e[s]));return t}var QO={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function JO(e){var t=[],r;for(r in e)Ba(e,r)&&t.push({unit:r,priority:QO[r]});return t.sort(function(s,l){return s.priority-l.priority}),t}var V2=/\d/,lc=/\d\d/,q2=/\d{3}/,py=/\d{4}/,Qm=/[+-]?\d{6}/,bs=/\d\d?/,$2=/\d\d\d\d?/,W2=/\d\d\d\d\d\d?/,Jm=/\d{1,3}/,fy=/\d{1,4}/,Xm=/[+-]?\d{1,6}/,yh=/\d+/,eg=/[+-]?\d+/,XO=/Z|[+-]\d\d:?\d\d/gi,tg=/Z|[+-]\d\d(?::?\d\d)?/gi,eM=/[+-]?\d+(\.\d{1,3})?/,$p=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,_h=/^[1-9]\d?/,my=/^([1-9]\d|\d)/,bm;bm={};function sr(e,t,r){bm[e]=Rl(t)?t:function(s,l){return s&&r?r:t}}function tM(e,t){return Ba(bm,e)?bm[e](t._strict,t._locale):new RegExp(nM(e))}function nM(e){return nu(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,s,l,h){return r||s||l||h}))}function nu(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function kc(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Ra(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=kc(t)),r}var p0={};function ss(e,t){var r,s=t,l;for(typeof e=="string"&&(e=[e]),su(t)&&(s=function(h,C){C[t]=Ra(h)}),l=e.length,r=0;r<l;r++)p0[e[r]]=s}function Wp(e,t){ss(e,function(r,s,l,h){l._w=l._w||{},t(r,l._w,l,h)})}function rM(e,t,r){t!=null&&Ba(p0,e)&&p0[e](t,r._a,r,e)}function ng(e){return e%4===0&&e%100!==0||e%400===0}var fo=0,Xl=1,yl=2,ki=3,Kc=4,eu=5,sd=6,aM=7,sM=8;Dr("Y",0,0,function(){var e=this.year();return e<=9999?bl(e,4):"+"+e});Dr(0,["YY",2],0,function(){return this.year()%100});Dr(0,["YYYY",4],0,"year");Dr(0,["YYYYY",5],0,"year");Dr(0,["YYYYYY",6,!0],0,"year");sr("Y",eg);sr("YY",bs,lc);sr("YYYY",fy,py);sr("YYYYY",Xm,Qm);sr("YYYYYY",Xm,Qm);ss(["YYYYY","YYYYYY"],fo);ss("YYYY",function(e,t){t[fo]=e.length===2?Zn.parseTwoDigitYear(e):Ra(e)});ss("YY",function(e,t){t[fo]=Zn.parseTwoDigitYear(e)});ss("Y",function(e,t){t[fo]=parseInt(e,10)});function mp(e){return ng(e)?366:365}Zn.parseTwoDigitYear=function(e){return Ra(e)+(Ra(e)>68?1900:2e3)};var Z2=bh("FullYear",!0);function iM(){return ng(this.year())}function bh(e,t){return function(r){return r!=null?(G2(this,e,r),Zn.updateOffset(this,t),this):Tp(this,e)}}function Tp(e,t){if(!e.isValid())return NaN;var r=e._d,s=e._isUTC;switch(t){case"Milliseconds":return s?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return s?r.getUTCSeconds():r.getSeconds();case"Minutes":return s?r.getUTCMinutes():r.getMinutes();case"Hours":return s?r.getUTCHours():r.getHours();case"Date":return s?r.getUTCDate():r.getDate();case"Day":return s?r.getUTCDay():r.getDay();case"Month":return s?r.getUTCMonth():r.getMonth();case"FullYear":return s?r.getUTCFullYear():r.getFullYear();default:return NaN}}function G2(e,t,r){var s,l,h,C,N;if(!(!e.isValid()||isNaN(r))){switch(s=e._d,l=e._isUTC,t){case"Milliseconds":return void(l?s.setUTCMilliseconds(r):s.setMilliseconds(r));case"Seconds":return void(l?s.setUTCSeconds(r):s.setSeconds(r));case"Minutes":return void(l?s.setUTCMinutes(r):s.setMinutes(r));case"Hours":return void(l?s.setUTCHours(r):s.setHours(r));case"Date":return void(l?s.setUTCDate(r):s.setDate(r));case"FullYear":break;default:return}h=r,C=e.month(),N=e.date(),N=N===29&&C===1&&!ng(h)?28:N,l?s.setUTCFullYear(h,C,N):s.setFullYear(h,C,N)}}function oM(e){return e=Ac(e),Rl(this[e])?this[e]():this}function cM(e,t){if(typeof e=="object"){e=hy(e);var r=JO(e),s,l=r.length;for(s=0;s<l;s++)this[r[s].unit](e[r[s].unit])}else if(e=Ac(e),Rl(this[e]))return this[e](t);return this}function lM(e,t){return(e%t+t)%t}var ri;Array.prototype.indexOf?ri=Array.prototype.indexOf:ri=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function gy(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=lM(t,12);return e+=(t-r)/12,r===1?ng(e)?29:28:31-r%7%2}Dr("M",["MM",2],"Mo",function(){return this.month()+1});Dr("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Dr("MMMM",0,0,function(e){return this.localeData().months(this,e)});sr("M",bs,_h);sr("MM",bs,lc);sr("MMM",function(e,t){return t.monthsShortRegex(e)});sr("MMMM",function(e,t){return t.monthsRegex(e)});ss(["M","MM"],function(e,t){t[Xl]=Ra(e)-1});ss(["MMM","MMMM"],function(e,t,r,s){var l=r._locale.monthsParse(e,s,r._strict);l!=null?t[Xl]=l:la(r).invalidMonth=e});var uM="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Y2="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),K2=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,dM=$p,hM=$p;function pM(e,t){return e?Xc(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||K2).test(t)?"format":"standalone"][e.month()]:Xc(this._months)?this._months:this._months.standalone}function fM(e,t){return e?Xc(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[K2.test(t)?"format":"standalone"][e.month()]:Xc(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function mM(e,t,r){var s,l,h,C=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)h=Sl([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(h,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(h,"").toLocaleLowerCase();return r?t==="MMM"?(l=ri.call(this._shortMonthsParse,C),l!==-1?l:null):(l=ri.call(this._longMonthsParse,C),l!==-1?l:null):t==="MMM"?(l=ri.call(this._shortMonthsParse,C),l!==-1?l:(l=ri.call(this._longMonthsParse,C),l!==-1?l:null)):(l=ri.call(this._longMonthsParse,C),l!==-1?l:(l=ri.call(this._shortMonthsParse,C),l!==-1?l:null))}function gM(e,t,r){var s,l,h;if(this._monthsParseExact)return mM.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(l=Sl([2e3,s]),r&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(l,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(l,"").replace(".","")+"$","i")),!r&&!this._monthsParse[s]&&(h="^"+this.months(l,"")+"|^"+this.monthsShort(l,""),this._monthsParse[s]=new RegExp(h.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[s].test(e))return s;if(r&&t==="MMM"&&this._shortMonthsParse[s].test(e))return s;if(!r&&this._monthsParse[s].test(e))return s}}function Q2(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Ra(t);else if(t=e.localeData().monthsParse(t),!su(t))return e}var r=t,s=e.date();return s=s<29?s:Math.min(s,gy(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,s):e._d.setMonth(r,s),e}function J2(e){return e!=null?(Q2(this,e),Zn.updateOffset(this,!0),this):Tp(this,"Month")}function vM(){return gy(this.year(),this.month())}function yM(e){return this._monthsParseExact?(Ba(this,"_monthsRegex")||X2.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Ba(this,"_monthsShortRegex")||(this._monthsShortRegex=dM),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function _M(e){return this._monthsParseExact?(Ba(this,"_monthsRegex")||X2.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Ba(this,"_monthsRegex")||(this._monthsRegex=hM),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function X2(){function e(y,u){return u.length-y.length}var t=[],r=[],s=[],l,h,C,N;for(l=0;l<12;l++)h=Sl([2e3,l]),C=nu(this.monthsShort(h,"")),N=nu(this.months(h,"")),t.push(C),r.push(N),s.push(N),s.push(C);t.sort(e),r.sort(e),s.sort(e),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function bM(e,t,r,s,l,h,C){var N;return e<100&&e>=0?(N=new Date(e+400,t,r,s,l,h,C),isFinite(N.getFullYear())&&N.setFullYear(e)):N=new Date(e,t,r,s,l,h,C),N}function Pp(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function xm(e,t,r){var s=7+t-r,l=(7+Pp(e,0,s).getUTCDay()-t)%7;return-l+s-1}function eR(e,t,r,s,l){var h=(7+r-s)%7,C=xm(e,s,l),N=1+7*(t-1)+h+C,y,u;return N<=0?(y=e-1,u=mp(y)+N):N>mp(e)?(y=e+1,u=N-mp(e)):(y=e,u=N),{year:y,dayOfYear:u}}function Np(e,t,r){var s=xm(e.year(),t,r),l=Math.floor((e.dayOfYear()-s-1)/7)+1,h,C;return l<1?(C=e.year()-1,h=l+ru(C,t,r)):l>ru(e.year(),t,r)?(h=l-ru(e.year(),t,r),C=e.year()+1):(C=e.year(),h=l),{week:h,year:C}}function ru(e,t,r){var s=xm(e,t,r),l=xm(e+1,t,r);return(mp(e)-s+l)/7}Dr("w",["ww",2],"wo","week");Dr("W",["WW",2],"Wo","isoWeek");sr("w",bs,_h);sr("ww",bs,lc);sr("W",bs,_h);sr("WW",bs,lc);Wp(["w","ww","W","WW"],function(e,t,r,s){t[s.substr(0,1)]=Ra(e)});function xM(e){return Np(e,this._week.dow,this._week.doy).week}var wM={dow:0,doy:6};function SM(){return this._week.dow}function RM(){return this._week.doy}function EM(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function kM(e){var t=Np(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Dr("d",0,"do","day");Dr("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Dr("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Dr("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Dr("e",0,0,"weekday");Dr("E",0,0,"isoWeekday");sr("d",bs);sr("e",bs);sr("E",bs);sr("dd",function(e,t){return t.weekdaysMinRegex(e)});sr("ddd",function(e,t){return t.weekdaysShortRegex(e)});sr("dddd",function(e,t){return t.weekdaysRegex(e)});Wp(["dd","ddd","dddd"],function(e,t,r,s){var l=r._locale.weekdaysParse(e,s,r._strict);l!=null?t.d=l:la(r).invalidWeekday=e});Wp(["d","e","E"],function(e,t,r,s){t[s]=Ra(e)});function CM(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function TM(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function vy(e,t){return e.slice(t,7).concat(e.slice(0,t))}var PM="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),tR="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),NM="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),DM=$p,AM=$p,OM=$p;function MM(e,t){var r=Xc(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?vy(r,this._week.dow):e?r[e.day()]:r}function jM(e){return e===!0?vy(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function LM(e){return e===!0?vy(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function IM(e,t,r){var s,l,h,C=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)h=Sl([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(h,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(h,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(h,"").toLocaleLowerCase();return r?t==="dddd"?(l=ri.call(this._weekdaysParse,C),l!==-1?l:null):t==="ddd"?(l=ri.call(this._shortWeekdaysParse,C),l!==-1?l:null):(l=ri.call(this._minWeekdaysParse,C),l!==-1?l:null):t==="dddd"?(l=ri.call(this._weekdaysParse,C),l!==-1||(l=ri.call(this._shortWeekdaysParse,C),l!==-1)?l:(l=ri.call(this._minWeekdaysParse,C),l!==-1?l:null)):t==="ddd"?(l=ri.call(this._shortWeekdaysParse,C),l!==-1||(l=ri.call(this._weekdaysParse,C),l!==-1)?l:(l=ri.call(this._minWeekdaysParse,C),l!==-1?l:null)):(l=ri.call(this._minWeekdaysParse,C),l!==-1||(l=ri.call(this._weekdaysParse,C),l!==-1)?l:(l=ri.call(this._shortWeekdaysParse,C),l!==-1?l:null))}function BM(e,t,r){var s,l,h;if(this._weekdaysParseExact)return IM.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(l=Sl([2e3,1]).day(s),r&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(l,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(l,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(l,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(h="^"+this.weekdays(l,"")+"|^"+this.weekdaysShort(l,"")+"|^"+this.weekdaysMin(l,""),this._weekdaysParse[s]=new RegExp(h.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[s].test(e))return s;if(r&&t==="ddd"&&this._shortWeekdaysParse[s].test(e))return s;if(r&&t==="dd"&&this._minWeekdaysParse[s].test(e))return s;if(!r&&this._weekdaysParse[s].test(e))return s}}function zM(e){if(!this.isValid())return e!=null?this:NaN;var t=Tp(this,"Day");return e!=null?(e=CM(e,this.localeData()),this.add(e-t,"d")):t}function UM(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function FM(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=TM(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function HM(e){return this._weekdaysParseExact?(Ba(this,"_weekdaysRegex")||yy.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Ba(this,"_weekdaysRegex")||(this._weekdaysRegex=DM),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function VM(e){return this._weekdaysParseExact?(Ba(this,"_weekdaysRegex")||yy.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ba(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=AM),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function qM(e){return this._weekdaysParseExact?(Ba(this,"_weekdaysRegex")||yy.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ba(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=OM),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function yy(){function e(R,v){return v.length-R.length}var t=[],r=[],s=[],l=[],h,C,N,y,u;for(h=0;h<7;h++)C=Sl([2e3,1]).day(h),N=nu(this.weekdaysMin(C,"")),y=nu(this.weekdaysShort(C,"")),u=nu(this.weekdays(C,"")),t.push(N),r.push(y),s.push(u),l.push(N),l.push(y),l.push(u);t.sort(e),r.sort(e),s.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function _y(){return this.hours()%12||12}function $M(){return this.hours()||24}Dr("H",["HH",2],0,"hour");Dr("h",["hh",2],0,_y);Dr("k",["kk",2],0,$M);Dr("hmm",0,0,function(){return""+_y.apply(this)+bl(this.minutes(),2)});Dr("hmmss",0,0,function(){return""+_y.apply(this)+bl(this.minutes(),2)+bl(this.seconds(),2)});Dr("Hmm",0,0,function(){return""+this.hours()+bl(this.minutes(),2)});Dr("Hmmss",0,0,function(){return""+this.hours()+bl(this.minutes(),2)+bl(this.seconds(),2)});function nR(e,t){Dr(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}nR("a",!0);nR("A",!1);function rR(e,t){return t._meridiemParse}sr("a",rR);sr("A",rR);sr("H",bs,my);sr("h",bs,_h);sr("k",bs,_h);sr("HH",bs,lc);sr("hh",bs,lc);sr("kk",bs,lc);sr("hmm",$2);sr("hmmss",W2);sr("Hmm",$2);sr("Hmmss",W2);ss(["H","HH"],ki);ss(["k","kk"],function(e,t,r){var s=Ra(e);t[ki]=s===24?0:s});ss(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});ss(["h","hh"],function(e,t,r){t[ki]=Ra(e),la(r).bigHour=!0});ss("hmm",function(e,t,r){var s=e.length-2;t[ki]=Ra(e.substr(0,s)),t[Kc]=Ra(e.substr(s)),la(r).bigHour=!0});ss("hmmss",function(e,t,r){var s=e.length-4,l=e.length-2;t[ki]=Ra(e.substr(0,s)),t[Kc]=Ra(e.substr(s,2)),t[eu]=Ra(e.substr(l)),la(r).bigHour=!0});ss("Hmm",function(e,t,r){var s=e.length-2;t[ki]=Ra(e.substr(0,s)),t[Kc]=Ra(e.substr(s))});ss("Hmmss",function(e,t,r){var s=e.length-4,l=e.length-2;t[ki]=Ra(e.substr(0,s)),t[Kc]=Ra(e.substr(s,2)),t[eu]=Ra(e.substr(l))});function WM(e){return(e+"").toLowerCase().charAt(0)==="p"}var ZM=/[ap]\.?m?\.?/i,GM=bh("Hours",!0);function YM(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var aR={calendar:IO,longDateFormat:FO,invalidDate:VO,ordinal:$O,dayOfMonthOrdinalParse:WO,relativeTime:GO,months:uM,monthsShort:Y2,week:wM,weekdays:PM,weekdaysMin:NM,weekdaysShort:tR,meridiemParse:ZM},ks={},sp={},Dp;function KM(e,t){var r,s=Math.min(e.length,t.length);for(r=0;r<s;r+=1)if(e[r]!==t[r])return r;return s}function n1(e){return e&&e.toLowerCase().replace("_","-")}function QM(e){for(var t=0,r,s,l,h;t<e.length;){for(h=n1(e[t]).split("-"),r=h.length,s=n1(e[t+1]),s=s?s.split("-"):null;r>0;){if(l=rg(h.slice(0,r).join("-")),l)return l;if(s&&s.length>=r&&KM(h,s)>=r-1)break;r--}t++}return Dp}function JM(e){return!!(e&&e.match("^[^/\\\\]*$"))}function rg(e){var t=null,r;if(ks[e]===void 0&&typeof cm<"u"&&cm&&cm.exports&&JM(e))try{t=Dp._abbr,r=require,r("./locale/"+e),Iu(t)}catch{ks[e]=null}return ks[e]}function Iu(e,t){var r;return e&&(Uo(t)?r=iu(e):r=by(e,t),r?Dp=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Dp._abbr}function by(e,t){if(t!==null){var r,s=aR;if(t.abbr=e,ks[e]!=null)F2("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=ks[e]._config;else if(t.parentLocale!=null)if(ks[t.parentLocale]!=null)s=ks[t.parentLocale]._config;else if(r=rg(t.parentLocale),r!=null)s=r._config;else return sp[t.parentLocale]||(sp[t.parentLocale]=[]),sp[t.parentLocale].push({name:e,config:t}),null;return ks[e]=new uy(d0(s,t)),sp[e]&&sp[e].forEach(function(l){by(l.name,l.config)}),Iu(e),ks[e]}else return delete ks[e],null}function XM(e,t){if(t!=null){var r,s,l=aR;ks[e]!=null&&ks[e].parentLocale!=null?ks[e].set(d0(ks[e]._config,t)):(s=rg(e),s!=null&&(l=s._config),t=d0(l,t),s==null&&(t.abbr=e),r=new uy(t),r.parentLocale=ks[e],ks[e]=r),Iu(e)}else ks[e]!=null&&(ks[e].parentLocale!=null?(ks[e]=ks[e].parentLocale,e===Iu()&&Iu(e)):ks[e]!=null&&delete ks[e]);return ks[e]}function iu(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Dp;if(!Xc(e)){if(t=rg(e),t)return t;e=[e]}return QM(e)}function ej(){return h0(ks)}function xy(e){var t,r=e._a;return r&&la(e).overflow===-2&&(t=r[Xl]<0||r[Xl]>11?Xl:r[yl]<1||r[yl]>gy(r[fo],r[Xl])?yl:r[ki]<0||r[ki]>24||r[ki]===24&&(r[Kc]!==0||r[eu]!==0||r[sd]!==0)?ki:r[Kc]<0||r[Kc]>59?Kc:r[eu]<0||r[eu]>59?eu:r[sd]<0||r[sd]>999?sd:-1,la(e)._overflowDayOfYear&&(t<fo||t>yl)&&(t=yl),la(e)._overflowWeeks&&t===-1&&(t=aM),la(e)._overflowWeekday&&t===-1&&(t=sM),la(e).overflow=t),e}var tj=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nj=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rj=/Z|[+-]\d\d(?::?\d\d)?/,qf=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],zv=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aj=/^\/?Date\((-?\d+)/i,sj=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ij={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function sR(e){var t,r,s=e._i,l=tj.exec(s)||nj.exec(s),h,C,N,y,u=qf.length,R=zv.length;if(l){for(la(e).iso=!0,t=0,r=u;t<r;t++)if(qf[t][1].exec(l[1])){C=qf[t][0],h=qf[t][2]!==!1;break}if(C==null){e._isValid=!1;return}if(l[3]){for(t=0,r=R;t<r;t++)if(zv[t][1].exec(l[3])){N=(l[2]||" ")+zv[t][0];break}if(N==null){e._isValid=!1;return}}if(!h&&N!=null){e._isValid=!1;return}if(l[4])if(rj.exec(l[4]))y="Z";else{e._isValid=!1;return}e._f=C+(N||"")+(y||""),Sy(e)}else e._isValid=!1}function oj(e,t,r,s,l,h){var C=[cj(e),Y2.indexOf(t),parseInt(r,10),parseInt(s,10),parseInt(l,10)];return h&&C.push(parseInt(h,10)),C}function cj(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function lj(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function uj(e,t,r){if(e){var s=tR.indexOf(e),l=new Date(t[0],t[1],t[2]).getDay();if(s!==l)return la(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function dj(e,t,r){if(e)return ij[e];if(t)return 0;var s=parseInt(r,10),l=s%100,h=(s-l)/100;return h*60+l}function iR(e){var t=sj.exec(lj(e._i)),r;if(t){if(r=oj(t[4],t[3],t[2],t[5],t[6],t[7]),!uj(t[1],r,e))return;e._a=r,e._tzm=dj(t[8],t[9],t[10]),e._d=Pp.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),la(e).rfc2822=!0}else e._isValid=!1}function hj(e){var t=aj.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(sR(e),e._isValid===!1)delete e._isValid;else return;if(iR(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Zn.createFromInputFallback(e)}Zn.createFromInputFallback=Dc("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function th(e,t,r){return e??t??r}function pj(e){var t=new Date(Zn.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function wy(e){var t,r,s=[],l,h,C;if(!e._d){for(l=pj(e),e._w&&e._a[yl]==null&&e._a[Xl]==null&&fj(e),e._dayOfYear!=null&&(C=th(e._a[fo],l[fo]),(e._dayOfYear>mp(C)||e._dayOfYear===0)&&(la(e)._overflowDayOfYear=!0),r=Pp(C,0,e._dayOfYear),e._a[Xl]=r.getUTCMonth(),e._a[yl]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=s[t]=l[t];for(;t<7;t++)e._a[t]=s[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[ki]===24&&e._a[Kc]===0&&e._a[eu]===0&&e._a[sd]===0&&(e._nextDay=!0,e._a[ki]=0),e._d=(e._useUTC?Pp:bM).apply(null,s),h=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ki]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==h&&(la(e).weekdayMismatch=!0)}}function fj(e){var t,r,s,l,h,C,N,y,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(h=1,C=4,r=th(t.GG,e._a[fo],Np(ys(),1,4).year),s=th(t.W,1),l=th(t.E,1),(l<1||l>7)&&(y=!0)):(h=e._locale._week.dow,C=e._locale._week.doy,u=Np(ys(),h,C),r=th(t.gg,e._a[fo],u.year),s=th(t.w,u.week),t.d!=null?(l=t.d,(l<0||l>6)&&(y=!0)):t.e!=null?(l=t.e+h,(t.e<0||t.e>6)&&(y=!0)):l=h),s<1||s>ru(r,h,C)?la(e)._overflowWeeks=!0:y!=null?la(e)._overflowWeekday=!0:(N=eR(r,s,l,h,C),e._a[fo]=N.year,e._dayOfYear=N.dayOfYear)}Zn.ISO_8601=function(){};Zn.RFC_2822=function(){};function Sy(e){if(e._f===Zn.ISO_8601){sR(e);return}if(e._f===Zn.RFC_2822){iR(e);return}e._a=[],la(e).empty=!0;var t=""+e._i,r,s,l,h,C,N=t.length,y=0,u,R;for(l=H2(e._f,e._locale).match(dy)||[],R=l.length,r=0;r<R;r++)h=l[r],s=(t.match(tM(h,e))||[])[0],s&&(C=t.substr(0,t.indexOf(s)),C.length>0&&la(e).unusedInput.push(C),t=t.slice(t.indexOf(s)+s.length),y+=s.length),sh[h]?(s?la(e).empty=!1:la(e).unusedTokens.push(h),rM(h,s,e)):e._strict&&!s&&la(e).unusedTokens.push(h);la(e).charsLeftOver=N-y,t.length>0&&la(e).unusedInput.push(t),e._a[ki]<=12&&la(e).bigHour===!0&&e._a[ki]>0&&(la(e).bigHour=void 0),la(e).parsedDateParts=e._a.slice(0),la(e).meridiem=e._meridiem,e._a[ki]=mj(e._locale,e._a[ki],e._meridiem),u=la(e).era,u!==null&&(e._a[fo]=e._locale.erasConvertYear(u,e._a[fo])),wy(e),xy(e)}function mj(e,t,r){var s;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(s=e.isPM(r),s&&t<12&&(t+=12),!s&&t===12&&(t=0)),t)}function gj(e){var t,r,s,l,h,C,N=!1,y=e._f.length;if(y===0){la(e).invalidFormat=!0,e._d=new Date(NaN);return}for(l=0;l<y;l++)h=0,C=!1,t=ly({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[l],Sy(t),cy(t)&&(C=!0),h+=la(t).charsLeftOver,h+=la(t).unusedTokens.length*10,la(t).score=h,N?h<s&&(s=h,r=t):(s==null||h<s||C)&&(s=h,r=t,C&&(N=!0));Mu(e,r||t)}function vj(e){if(!e._d){var t=hy(e._i),r=t.day===void 0?t.date:t.day;e._a=z2([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(s){return s&&parseInt(s,10)}),wy(e)}}function yj(e){var t=new qp(xy(oR(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function oR(e){var t=e._i,r=e._f;return e._locale=e._locale||iu(e._l),t===null||r===void 0&&t===""?Km({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),el(t)?new qp(xy(t)):(Vp(t)?e._d=t:Xc(r)?gj(e):r?Sy(e):_j(e),cy(e)||(e._d=null),e))}function _j(e){var t=e._i;Uo(t)?e._d=new Date(Zn.now()):Vp(t)?e._d=new Date(t.valueOf()):typeof t=="string"?hj(e):Xc(t)?(e._a=z2(t.slice(0),function(r){return parseInt(r,10)}),wy(e)):ud(t)?vj(e):su(t)?e._d=new Date(t):Zn.createFromInputFallback(e)}function cR(e,t,r,s,l){var h={};return(t===!0||t===!1)&&(s=t,t=void 0),(r===!0||r===!1)&&(s=r,r=void 0),(ud(e)&&oy(e)||Xc(e)&&e.length===0)&&(e=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=l,h._l=r,h._i=e,h._f=t,h._strict=s,yj(h)}function ys(e,t,r,s){return cR(e,t,r,s,!1)}var bj=Dc("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ys.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Km()}),xj=Dc("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ys.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Km()});function lR(e,t){var r,s;if(t.length===1&&Xc(t[0])&&(t=t[0]),!t.length)return ys();for(r=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](r))&&(r=t[s]);return r}function wj(){var e=[].slice.call(arguments,0);return lR("isBefore",e)}function Sj(){var e=[].slice.call(arguments,0);return lR("isAfter",e)}var Rj=function(){return Date.now?Date.now():+new Date},ip=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ej(e){var t,r=!1,s,l=ip.length;for(t in e)if(Ba(e,t)&&!(ri.call(ip,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(s=0;s<l;++s)if(e[ip[s]]){if(r)return!1;parseFloat(e[ip[s]])!==Ra(e[ip[s]])&&(r=!0)}return!0}function kj(){return this._isValid}function Cj(){return sl(NaN)}function ag(e){var t=hy(e),r=t.year||0,s=t.quarter||0,l=t.month||0,h=t.week||t.isoWeek||0,C=t.day||0,N=t.hour||0,y=t.minute||0,u=t.second||0,R=t.millisecond||0;this._isValid=Ej(t),this._milliseconds=+R+u*1e3+y*6e4+N*1e3*60*60,this._days=+C+h*7,this._months=+l+s*3+r*12,this._data={},this._locale=iu(),this._bubble()}function sm(e){return e instanceof ag}function f0(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Tj(e,t,r){var s=Math.min(e.length,t.length),l=Math.abs(e.length-t.length),h=0,C;for(C=0;C<s;C++)Ra(e[C])!==Ra(t[C])&&h++;return h+l}function uR(e,t){Dr(e,0,0,function(){var r=this.utcOffset(),s="+";return r<0&&(r=-r,s="-"),s+bl(~~(r/60),2)+t+bl(~~r%60,2)})}uR("Z",":");uR("ZZ","");sr("Z",tg);sr("ZZ",tg);ss(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=Ry(tg,e)});var Pj=/([\+\-]|\d\d)/gi;function Ry(e,t){var r=(t||"").match(e),s,l,h;return r===null?null:(s=r[r.length-1]||[],l=(s+"").match(Pj)||["-",0,0],h=+(l[1]*60)+Ra(l[2]),h===0?0:l[0]==="+"?h:-h)}function Ey(e,t){var r,s;return t._isUTC?(r=t.clone(),s=(el(e)||Vp(e)?e.valueOf():ys(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+s),Zn.updateOffset(r,!1),r):ys(e).local()}function m0(e){return-Math.round(e._d.getTimezoneOffset())}Zn.updateOffset=function(){};function Nj(e,t,r){var s=this._offset||0,l;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Ry(tg,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(l=m0(this)),this._offset=e,this._isUTC=!0,l!=null&&this.add(l,"m"),s!==e&&(!t||this._changeInProgress?pR(this,sl(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Zn.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:m0(this)}function Dj(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Aj(e){return this.utcOffset(0,e)}function Oj(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(m0(this),"m")),this}function Mj(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Ry(XO,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function jj(e){return this.isValid()?(e=e?ys(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Lj(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ij(){if(!Uo(this._isDSTShifted))return this._isDSTShifted;var e={},t;return ly(e,this),e=oR(e),e._a?(t=e._isUTC?Sl(e._a):ys(e._a),this._isDSTShifted=this.isValid()&&Tj(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Bj(){return this.isValid()?!this._isUTC:!1}function zj(){return this.isValid()?this._isUTC:!1}function dR(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Uj=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Fj=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function sl(e,t){var r=e,s=null,l,h,C;return sm(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:su(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(s=Uj.exec(e))?(l=s[1]==="-"?-1:1,r={y:0,d:Ra(s[yl])*l,h:Ra(s[ki])*l,m:Ra(s[Kc])*l,s:Ra(s[eu])*l,ms:Ra(f0(s[sd]*1e3))*l}):(s=Fj.exec(e))?(l=s[1]==="-"?-1:1,r={y:td(s[2],l),M:td(s[3],l),w:td(s[4],l),d:td(s[5],l),h:td(s[6],l),m:td(s[7],l),s:td(s[8],l)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(C=Hj(ys(r.from),ys(r.to)),r={},r.ms=C.milliseconds,r.M=C.months),h=new ag(r),sm(e)&&Ba(e,"_locale")&&(h._locale=e._locale),sm(e)&&Ba(e,"_isValid")&&(h._isValid=e._isValid),h}sl.fn=ag.prototype;sl.invalid=Cj;function td(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function r1(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Hj(e,t){var r;return e.isValid()&&t.isValid()?(t=Ey(t,e),e.isBefore(t)?r=r1(e,t):(r=r1(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function hR(e,t){return function(r,s){var l,h;return s!==null&&!isNaN(+s)&&(F2(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),h=r,r=s,s=h),l=sl(r,s),pR(this,l,e),this}}function pR(e,t,r,s){var l=t._milliseconds,h=f0(t._days),C=f0(t._months);e.isValid()&&(s=s??!0,C&&Q2(e,Tp(e,"Month")+C*r),h&&G2(e,"Date",Tp(e,"Date")+h*r),l&&e._d.setTime(e._d.valueOf()+l*r),s&&Zn.updateOffset(e,h||C))}var Vj=hR(1,"add"),qj=hR(-1,"subtract");function fR(e){return typeof e=="string"||e instanceof String}function $j(e){return el(e)||Vp(e)||fR(e)||su(e)||Zj(e)||Wj(e)||e===null||e===void 0}function Wj(e){var t=ud(e)&&!oy(e),r=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l,h,C=s.length;for(l=0;l<C;l+=1)h=s[l],r=r||Ba(e,h);return t&&r}function Zj(e){var t=Xc(e),r=!1;return t&&(r=e.filter(function(s){return!su(s)&&fR(e)}).length===0),t&&r}function Gj(e){var t=ud(e)&&!oy(e),r=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],l,h;for(l=0;l<s.length;l+=1)h=s[l],r=r||Ba(e,h);return t&&r}function Yj(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function Kj(e,t){arguments.length===1&&(arguments[0]?$j(arguments[0])?(e=arguments[0],t=void 0):Gj(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||ys(),s=Ey(r,this).startOf("day"),l=Zn.calendarFormat(this,s)||"sameElse",h=t&&(Rl(t[l])?t[l].call(this,r):t[l]);return this.format(h||this.localeData().calendar(l,this,ys(r)))}function Qj(){return new qp(this)}function Jj(e,t){var r=el(e)?e:ys(e);return this.isValid()&&r.isValid()?(t=Ac(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function Xj(e,t){var r=el(e)?e:ys(e);return this.isValid()&&r.isValid()?(t=Ac(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function e8(e,t,r,s){var l=el(e)?e:ys(e),h=el(t)?t:ys(t);return this.isValid()&&l.isValid()&&h.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(l,r):!this.isBefore(l,r))&&(s[1]===")"?this.isBefore(h,r):!this.isAfter(h,r))):!1}function t8(e,t){var r=el(e)?e:ys(e),s;return this.isValid()&&r.isValid()?(t=Ac(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(s=r.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf())):!1}function n8(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function r8(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function a8(e,t,r){var s,l,h;if(!this.isValid())return NaN;if(s=Ey(e,this),!s.isValid())return NaN;switch(l=(s.utcOffset()-this.utcOffset())*6e4,t=Ac(t),t){case"year":h=im(this,s)/12;break;case"month":h=im(this,s);break;case"quarter":h=im(this,s)/3;break;case"second":h=(this-s)/1e3;break;case"minute":h=(this-s)/6e4;break;case"hour":h=(this-s)/36e5;break;case"day":h=(this-s-l)/864e5;break;case"week":h=(this-s-l)/6048e5;break;default:h=this-s}return r?h:kc(h)}function im(e,t){if(e.date()<t.date())return-im(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),s=e.clone().add(r,"months"),l,h;return t-s<0?(l=e.clone().add(r-1,"months"),h=(t-s)/(s-l)):(l=e.clone().add(r+1,"months"),h=(t-s)/(l-s)),-(r+h)||0}Zn.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Zn.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function s8(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function i8(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?am(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Rl(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",am(r,"Z")):am(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function o8(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,s,l,h;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",l="-MM-DD[T]HH:mm:ss.SSS",h=t+'[")]',this.format(r+s+l+h)}function c8(e){e||(e=this.isUtc()?Zn.defaultFormatUtc:Zn.defaultFormat);var t=am(this,e);return this.localeData().postformat(t)}function l8(e,t){return this.isValid()&&(el(e)&&e.isValid()||ys(e).isValid())?sl({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function u8(e){return this.from(ys(),e)}function d8(e,t){return this.isValid()&&(el(e)&&e.isValid()||ys(e).isValid())?sl({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function h8(e){return this.to(ys(),e)}function mR(e){var t;return e===void 0?this._locale._abbr:(t=iu(e),t!=null&&(this._locale=t),this)}var gR=Dc("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function vR(){return this._locale}var wm=1e3,ih=60*wm,Sm=60*ih,yR=(365*400+97)*24*Sm;function oh(e,t){return(e%t+t)%t}function _R(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-yR:new Date(e,t,r).valueOf()}function bR(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-yR:Date.UTC(e,t,r)}function p8(e){var t,r;if(e=Ac(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?bR:_R,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=oh(t+(this._isUTC?0:this.utcOffset()*ih),Sm);break;case"minute":t=this._d.valueOf(),t-=oh(t,ih);break;case"second":t=this._d.valueOf(),t-=oh(t,wm);break}return this._d.setTime(t),Zn.updateOffset(this,!0),this}function f8(e){var t,r;if(e=Ac(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?bR:_R,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Sm-oh(t+(this._isUTC?0:this.utcOffset()*ih),Sm)-1;break;case"minute":t=this._d.valueOf(),t+=ih-oh(t,ih)-1;break;case"second":t=this._d.valueOf(),t+=wm-oh(t,wm)-1;break}return this._d.setTime(t),Zn.updateOffset(this,!0),this}function m8(){return this._d.valueOf()-(this._offset||0)*6e4}function g8(){return Math.floor(this.valueOf()/1e3)}function v8(){return new Date(this.valueOf())}function y8(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function _8(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function b8(){return this.isValid()?this.toISOString():null}function x8(){return cy(this)}function w8(){return Mu({},la(this))}function S8(){return la(this).overflow}function R8(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Dr("N",0,0,"eraAbbr");Dr("NN",0,0,"eraAbbr");Dr("NNN",0,0,"eraAbbr");Dr("NNNN",0,0,"eraName");Dr("NNNNN",0,0,"eraNarrow");Dr("y",["y",1],"yo","eraYear");Dr("y",["yy",2],0,"eraYear");Dr("y",["yyy",3],0,"eraYear");Dr("y",["yyyy",4],0,"eraYear");sr("N",ky);sr("NN",ky);sr("NNN",ky);sr("NNNN",j8);sr("NNNNN",L8);ss(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,s){var l=r._locale.erasParse(e,s,r._strict);l?la(r).era=l:la(r).invalidEra=e});sr("y",yh);sr("yy",yh);sr("yyy",yh);sr("yyyy",yh);sr("yo",I8);ss(["y","yy","yyy","yyyy"],fo);ss(["yo"],function(e,t,r,s){var l;r._locale._eraYearOrdinalRegex&&(l=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[fo]=r._locale.eraYearOrdinalParse(e,l):t[fo]=parseInt(e,10)});function E8(e,t){var r,s,l,h=this._eras||iu("en")._eras;for(r=0,s=h.length;r<s;++r){switch(typeof h[r].since){case"string":l=Zn(h[r].since).startOf("day"),h[r].since=l.valueOf();break}switch(typeof h[r].until){case"undefined":h[r].until=1/0;break;case"string":l=Zn(h[r].until).startOf("day").valueOf(),h[r].until=l.valueOf();break}}return h}function k8(e,t,r){var s,l,h=this.eras(),C,N,y;for(e=e.toUpperCase(),s=0,l=h.length;s<l;++s)if(C=h[s].name.toUpperCase(),N=h[s].abbr.toUpperCase(),y=h[s].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(N===e)return h[s];break;case"NNNN":if(C===e)return h[s];break;case"NNNNN":if(y===e)return h[s];break}else if([C,N,y].indexOf(e)>=0)return h[s]}function C8(e,t){var r=e.since<=e.until?1:-1;return t===void 0?Zn(e.since).year():Zn(e.since).year()+(t-e.offset)*r}function T8(){var e,t,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return s[e].name;return""}function P8(){var e,t,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return s[e].narrow;return""}function N8(){var e,t,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return s[e].abbr;return""}function D8(){var e,t,r,s,l=this.localeData().eras();for(e=0,t=l.length;e<t;++e)if(r=l[e].since<=l[e].until?1:-1,s=this.clone().startOf("day").valueOf(),l[e].since<=s&&s<=l[e].until||l[e].until<=s&&s<=l[e].since)return(this.year()-Zn(l[e].since).year())*r+l[e].offset;return this.year()}function A8(e){return Ba(this,"_erasNameRegex")||Cy.call(this),e?this._erasNameRegex:this._erasRegex}function O8(e){return Ba(this,"_erasAbbrRegex")||Cy.call(this),e?this._erasAbbrRegex:this._erasRegex}function M8(e){return Ba(this,"_erasNarrowRegex")||Cy.call(this),e?this._erasNarrowRegex:this._erasRegex}function ky(e,t){return t.erasAbbrRegex(e)}function j8(e,t){return t.erasNameRegex(e)}function L8(e,t){return t.erasNarrowRegex(e)}function I8(e,t){return t._eraYearOrdinalRegex||yh}function Cy(){var e=[],t=[],r=[],s=[],l,h,C,N,y,u=this.eras();for(l=0,h=u.length;l<h;++l)C=nu(u[l].name),N=nu(u[l].abbr),y=nu(u[l].narrow),t.push(C),e.push(N),r.push(y),s.push(C),s.push(N),s.push(y);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}Dr(0,["gg",2],0,function(){return this.weekYear()%100});Dr(0,["GG",2],0,function(){return this.isoWeekYear()%100});function sg(e,t){Dr(0,[e,e.length],0,t)}sg("gggg","weekYear");sg("ggggg","weekYear");sg("GGGG","isoWeekYear");sg("GGGGG","isoWeekYear");sr("G",eg);sr("g",eg);sr("GG",bs,lc);sr("gg",bs,lc);sr("GGGG",fy,py);sr("gggg",fy,py);sr("GGGGG",Xm,Qm);sr("ggggg",Xm,Qm);Wp(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,s){t[s.substr(0,2)]=Ra(e)});Wp(["gg","GG"],function(e,t,r,s){t[s]=Zn.parseTwoDigitYear(e)});function B8(e){return xR.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function z8(e){return xR.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function U8(){return ru(this.year(),1,4)}function F8(){return ru(this.isoWeekYear(),1,4)}function H8(){var e=this.localeData()._week;return ru(this.year(),e.dow,e.doy)}function V8(){var e=this.localeData()._week;return ru(this.weekYear(),e.dow,e.doy)}function xR(e,t,r,s,l){var h;return e==null?Np(this,s,l).year:(h=ru(e,s,l),t>h&&(t=h),q8.call(this,e,t,r,s,l))}function q8(e,t,r,s,l){var h=eR(e,t,r,s,l),C=Pp(h.year,0,h.dayOfYear);return this.year(C.getUTCFullYear()),this.month(C.getUTCMonth()),this.date(C.getUTCDate()),this}Dr("Q",0,"Qo","quarter");sr("Q",V2);ss("Q",function(e,t){t[Xl]=(Ra(e)-1)*3});function $8(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Dr("D",["DD",2],"Do","date");sr("D",bs,_h);sr("DD",bs,lc);sr("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});ss(["D","DD"],yl);ss("Do",function(e,t){t[yl]=Ra(e.match(bs)[0])});var wR=bh("Date",!0);Dr("DDD",["DDDD",3],"DDDo","dayOfYear");sr("DDD",Jm);sr("DDDD",q2);ss(["DDD","DDDD"],function(e,t,r){r._dayOfYear=Ra(e)});function W8(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Dr("m",["mm",2],0,"minute");sr("m",bs,my);sr("mm",bs,lc);ss(["m","mm"],Kc);var Z8=bh("Minutes",!1);Dr("s",["ss",2],0,"second");sr("s",bs,my);sr("ss",bs,lc);ss(["s","ss"],eu);var G8=bh("Seconds",!1);Dr("S",0,0,function(){return~~(this.millisecond()/100)});Dr(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Dr(0,["SSS",3],0,"millisecond");Dr(0,["SSSS",4],0,function(){return this.millisecond()*10});Dr(0,["SSSSS",5],0,function(){return this.millisecond()*100});Dr(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Dr(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Dr(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Dr(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});sr("S",Jm,V2);sr("SS",Jm,lc);sr("SSS",Jm,q2);var ju,SR;for(ju="SSSS";ju.length<=9;ju+="S")sr(ju,yh);function Y8(e,t){t[sd]=Ra(("0."+e)*1e3)}for(ju="S";ju.length<=9;ju+="S")ss(ju,Y8);SR=bh("Milliseconds",!1);Dr("z",0,0,"zoneAbbr");Dr("zz",0,0,"zoneName");function K8(){return this._isUTC?"UTC":""}function Q8(){return this._isUTC?"Coordinated Universal Time":""}var _n=qp.prototype;_n.add=Vj;_n.calendar=Kj;_n.clone=Qj;_n.diff=a8;_n.endOf=f8;_n.format=c8;_n.from=l8;_n.fromNow=u8;_n.to=d8;_n.toNow=h8;_n.get=oM;_n.invalidAt=S8;_n.isAfter=Jj;_n.isBefore=Xj;_n.isBetween=e8;_n.isSame=t8;_n.isSameOrAfter=n8;_n.isSameOrBefore=r8;_n.isValid=x8;_n.lang=gR;_n.locale=mR;_n.localeData=vR;_n.max=xj;_n.min=bj;_n.parsingFlags=w8;_n.set=cM;_n.startOf=p8;_n.subtract=qj;_n.toArray=y8;_n.toObject=_8;_n.toDate=v8;_n.toISOString=i8;_n.inspect=o8;typeof Symbol<"u"&&Symbol.for!=null&&(_n[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});_n.toJSON=b8;_n.toString=s8;_n.unix=g8;_n.valueOf=m8;_n.creationData=R8;_n.eraName=T8;_n.eraNarrow=P8;_n.eraAbbr=N8;_n.eraYear=D8;_n.year=Z2;_n.isLeapYear=iM;_n.weekYear=B8;_n.isoWeekYear=z8;_n.quarter=_n.quarters=$8;_n.month=J2;_n.daysInMonth=vM;_n.week=_n.weeks=EM;_n.isoWeek=_n.isoWeeks=kM;_n.weeksInYear=H8;_n.weeksInWeekYear=V8;_n.isoWeeksInYear=U8;_n.isoWeeksInISOWeekYear=F8;_n.date=wR;_n.day=_n.days=zM;_n.weekday=UM;_n.isoWeekday=FM;_n.dayOfYear=W8;_n.hour=_n.hours=GM;_n.minute=_n.minutes=Z8;_n.second=_n.seconds=G8;_n.millisecond=_n.milliseconds=SR;_n.utcOffset=Nj;_n.utc=Aj;_n.local=Oj;_n.parseZone=Mj;_n.hasAlignedHourOffset=jj;_n.isDST=Lj;_n.isLocal=Bj;_n.isUtcOffset=zj;_n.isUtc=dR;_n.isUTC=dR;_n.zoneAbbr=K8;_n.zoneName=Q8;_n.dates=Dc("dates accessor is deprecated. Use date instead.",wR);_n.months=Dc("months accessor is deprecated. Use month instead",J2);_n.years=Dc("years accessor is deprecated. Use year instead",Z2);_n.zone=Dc("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Dj);_n.isDSTShifted=Dc("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ij);function J8(e){return ys(e*1e3)}function X8(){return ys.apply(null,arguments).parseZone()}function RR(e){return e}var za=uy.prototype;za.calendar=BO;za.longDateFormat=HO;za.invalidDate=qO;za.ordinal=ZO;za.preparse=RR;za.postformat=RR;za.relativeTime=YO;za.pastFuture=KO;za.set=LO;za.eras=E8;za.erasParse=k8;za.erasConvertYear=C8;za.erasAbbrRegex=O8;za.erasNameRegex=A8;za.erasNarrowRegex=M8;za.months=pM;za.monthsShort=fM;za.monthsParse=gM;za.monthsRegex=_M;za.monthsShortRegex=yM;za.week=xM;za.firstDayOfYear=RM;za.firstDayOfWeek=SM;za.weekdays=MM;za.weekdaysMin=LM;za.weekdaysShort=jM;za.weekdaysParse=BM;za.weekdaysRegex=HM;za.weekdaysShortRegex=VM;za.weekdaysMinRegex=qM;za.isPM=WM;za.meridiem=YM;function Rm(e,t,r,s){var l=iu(),h=Sl().set(s,t);return l[r](h,e)}function ER(e,t,r){if(su(e)&&(t=e,e=void 0),e=e||"",t!=null)return Rm(e,t,r,"month");var s,l=[];for(s=0;s<12;s++)l[s]=Rm(e,s,r,"month");return l}function Ty(e,t,r,s){typeof e=="boolean"?(su(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,su(t)&&(r=t,t=void 0),t=t||"");var l=iu(),h=e?l._week.dow:0,C,N=[];if(r!=null)return Rm(t,(r+h)%7,s,"day");for(C=0;C<7;C++)N[C]=Rm(t,(C+h)%7,s,"day");return N}function eL(e,t){return ER(e,t,"months")}function tL(e,t){return ER(e,t,"monthsShort")}function nL(e,t,r){return Ty(e,t,r,"weekdays")}function rL(e,t,r){return Ty(e,t,r,"weekdaysShort")}function aL(e,t,r){return Ty(e,t,r,"weekdaysMin")}Iu("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=Ra(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});Zn.lang=Dc("moment.lang is deprecated. Use moment.locale instead.",Iu);Zn.langData=Dc("moment.langData is deprecated. Use moment.localeData instead.",iu);var Kl=Math.abs;function sL(){var e=this._data;return this._milliseconds=Kl(this._milliseconds),this._days=Kl(this._days),this._months=Kl(this._months),e.milliseconds=Kl(e.milliseconds),e.seconds=Kl(e.seconds),e.minutes=Kl(e.minutes),e.hours=Kl(e.hours),e.months=Kl(e.months),e.years=Kl(e.years),this}function kR(e,t,r,s){var l=sl(t,r);return e._milliseconds+=s*l._milliseconds,e._days+=s*l._days,e._months+=s*l._months,e._bubble()}function iL(e,t){return kR(this,e,t,1)}function oL(e,t){return kR(this,e,t,-1)}function a1(e){return e<0?Math.floor(e):Math.ceil(e)}function cL(){var e=this._milliseconds,t=this._days,r=this._months,s=this._data,l,h,C,N,y;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=a1(g0(r)+t)*864e5,t=0,r=0),s.milliseconds=e%1e3,l=kc(e/1e3),s.seconds=l%60,h=kc(l/60),s.minutes=h%60,C=kc(h/60),s.hours=C%24,t+=kc(C/24),y=kc(CR(t)),r+=y,t-=a1(g0(y)),N=kc(r/12),r%=12,s.days=t,s.months=r,s.years=N,this}function CR(e){return e*4800/146097}function g0(e){return e*146097/4800}function lL(e){if(!this.isValid())return NaN;var t,r,s=this._milliseconds;if(e=Ac(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+s/864e5,r=this._months+CR(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(g0(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return t*24+s/36e5;case"minute":return t*1440+s/6e4;case"second":return t*86400+s/1e3;case"millisecond":return Math.floor(t*864e5)+s;default:throw new Error("Unknown unit "+e)}}function ou(e){return function(){return this.as(e)}}var TR=ou("ms"),uL=ou("s"),dL=ou("m"),hL=ou("h"),pL=ou("d"),fL=ou("w"),mL=ou("M"),gL=ou("Q"),vL=ou("y"),yL=TR;function _L(){return sl(this)}function bL(e){return e=Ac(e),this.isValid()?this[e+"s"]():NaN}function gd(e){return function(){return this.isValid()?this._data[e]:NaN}}var xL=gd("milliseconds"),wL=gd("seconds"),SL=gd("minutes"),RL=gd("hours"),EL=gd("days"),kL=gd("months"),CL=gd("years");function TL(){return kc(this.days()/7)}var Jl=Math.round,nh={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function PL(e,t,r,s,l){return l.relativeTime(t||1,!!r,e,s)}function NL(e,t,r,s){var l=sl(e).abs(),h=Jl(l.as("s")),C=Jl(l.as("m")),N=Jl(l.as("h")),y=Jl(l.as("d")),u=Jl(l.as("M")),R=Jl(l.as("w")),v=Jl(l.as("y")),b=h<=r.ss&&["s",h]||h<r.s&&["ss",h]||C<=1&&["m"]||C<r.m&&["mm",C]||N<=1&&["h"]||N<r.h&&["hh",N]||y<=1&&["d"]||y<r.d&&["dd",y];return r.w!=null&&(b=b||R<=1&&["w"]||R<r.w&&["ww",R]),b=b||u<=1&&["M"]||u<r.M&&["MM",u]||v<=1&&["y"]||["yy",v],b[2]=t,b[3]=+e>0,b[4]=s,PL.apply(null,b)}function DL(e){return e===void 0?Jl:typeof e=="function"?(Jl=e,!0):!1}function AL(e,t){return nh[e]===void 0?!1:t===void 0?nh[e]:(nh[e]=t,e==="s"&&(nh.ss=t-1),!0)}function OL(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,s=nh,l,h;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(s=Object.assign({},nh,t),t.s!=null&&t.ss==null&&(s.ss=t.s-1)),l=this.localeData(),h=NL(this,!r,s,l),r&&(h=l.pastFuture(+this,h)),l.postformat(h)}var Uv=Math.abs;function Jd(e){return(e>0)-(e<0)||+e}function ig(){if(!this.isValid())return this.localeData().invalidDate();var e=Uv(this._milliseconds)/1e3,t=Uv(this._days),r=Uv(this._months),s,l,h,C,N=this.asSeconds(),y,u,R,v;return N?(s=kc(e/60),l=kc(s/60),e%=60,s%=60,h=kc(r/12),r%=12,C=e?e.toFixed(3).replace(/\.?0+$/,""):"",y=N<0?"-":"",u=Jd(this._months)!==Jd(N)?"-":"",R=Jd(this._days)!==Jd(N)?"-":"",v=Jd(this._milliseconds)!==Jd(N)?"-":"",y+"P"+(h?u+h+"Y":"")+(r?u+r+"M":"")+(t?R+t+"D":"")+(l||s||e?"T":"")+(l?v+l+"H":"")+(s?v+s+"M":"")+(e?v+C+"S":"")):"P0D"}var Na=ag.prototype;Na.isValid=kj;Na.abs=sL;Na.add=iL;Na.subtract=oL;Na.as=lL;Na.asMilliseconds=TR;Na.asSeconds=uL;Na.asMinutes=dL;Na.asHours=hL;Na.asDays=pL;Na.asWeeks=fL;Na.asMonths=mL;Na.asQuarters=gL;Na.asYears=vL;Na.valueOf=yL;Na._bubble=cL;Na.clone=_L;Na.get=bL;Na.milliseconds=xL;Na.seconds=wL;Na.minutes=SL;Na.hours=RL;Na.days=EL;Na.weeks=TL;Na.months=kL;Na.years=CL;Na.humanize=OL;Na.toISOString=ig;Na.toString=ig;Na.toJSON=ig;Na.locale=mR;Na.localeData=vR;Na.toIsoString=Dc("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ig);Na.lang=gR;Dr("X",0,0,"unix");Dr("x",0,0,"valueOf");sr("x",eg);sr("X",eM);ss("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});ss("x",function(e,t,r){r._d=new Date(Ra(e))});//! moment.js
Zn.version="2.30.1";MO(ys);Zn.fn=_n;Zn.min=wj;Zn.max=Sj;Zn.now=Rj;Zn.utc=Sl;Zn.unix=J8;Zn.months=eL;Zn.isDate=Vp;Zn.locale=Iu;Zn.invalid=Km;Zn.duration=sl;Zn.isMoment=el;Zn.weekdays=nL;Zn.parseZone=X8;Zn.localeData=iu;Zn.isDuration=sm;Zn.monthsShort=tL;Zn.weekdaysMin=aL;Zn.defineLocale=by;Zn.updateLocale=XM;Zn.locales=ej;Zn.weekdaysShort=rL;Zn.normalizeUnits=Ac;Zn.relativeTimeRounding=DL;Zn.relativeTimeThreshold=AL;Zn.calendarFormat=Yj;Zn.prototype=_n;Zn.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const PR=(e,t="L")=>{if(!e)return"";const r=typeof e=="string"&&e.match(/^\d{1,2}:\d{2}/)?Zn(e,["H:mm","HH:mm"]):Zn(e);return r.isValid()?r.format(t):""},NR=(e,t="hh:mm A")=>{if(!e)return"";const r=typeof e=="string"&&e.match(/^\d{1,2}:\d{2}/)?Zn(e,["H:mm","HH:mm"]):Zn(e);return r.isValid()?r.format(t):""},DR=(e,t="L LT")=>{if(!e)return"";const r=Zn(e);return r.isValid()?r.format(t):""},ML=e=>e?typeof e=="string"?e:e.name||e.fullName||(e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:null)||e.email||e._id||"":"",jL=e=>{if(!e||typeof e!="object")return"";const t=Array.isArray(e.speciality)?e.speciality.join(", "):e.speciality||"",r=e.hospital||"";return[t,r].filter(Boolean).join("  ")},AR=({appointment:e,role:t="user",onConfirm:r,onCancel:s,showConfirm:l=!1,showCancel:h=!1})=>{const C=e||{},N=t==="doctor"?ML(C.user):C.doctor&&typeof C.doctor=="object"?C.doctor.name:"",y=t==="doctor"?"":jL(C.doctor);return o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[o.jsxs("div",{className:"text-sm space-y-1",children:[N&&o.jsxs("div",{className:"font-semibold text-gray-900",children:[t==="doctor"?"Patient":"Doctor",": ",N]}),y&&o.jsx("div",{className:"text-gray-600 text-xs",children:y}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[o.jsxs("span",{className:"px-2 py-0.5 rounded bg-gray-200 text-gray-700 text-xs",children:[PR(C.date)," ",NR(C.time)]}),C.fee!==void 0&&o.jsxs("span",{className:"px-2 py-0.5 rounded bg-gray-200 text-gray-700 text-xs",children:["Fee: Rs. ",C.fee]}),C.status&&o.jsx("span",{className:`px-2 py-0.5 rounded text-xs capitalize ${C.status==="confirmed"?"bg-green-100 text-green-700":C.status==="cancelled"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:C.status}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${C.paymentDone?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:C.paymentDone?"Paid":"Unpaid"})]}),C.symptoms&&o.jsxs("div",{className:"text-gray-700 text-sm",children:[o.jsx("span",{className:"font-medium",children:"Symptoms:"})," ",C.symptoms]}),C.notes&&o.jsxs("div",{className:"text-gray-700 text-sm",children:[o.jsx("span",{className:"font-medium",children:"Notes:"})," ",C.notes]})]}),o.jsxs("div",{className:"flex gap-2",children:[l&&o.jsx("button",{className:"px-3 py-1 rounded bg-emerald-600 text-white text-sm",onClick:r,children:"Confirm"}),h&&o.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-sm",onClick:s,children:"Cancel"})]})]})},LL=()=>{const{ratings:e,addPlatformRating:t,updatePlatformRating:r,deletePlatformRating:s,getPlatformRatings:l}=$w(),{user:h}=si(),{admin:C}=$o(),{doctor:N}=fs(),[y,u]=Z.useState(!1),[R,v]=Z.useState(!1),b=()=>{h||C||N?u(!0):v(!0)},E=async({rating:k,review:w})=>{await t({rating:k,description:w}),await l(),u(!1)},_=async({rating:k,review:w})=>{await r({rating:k,review:w}),await l(),u(!1)},m=async()=>{await s(),await l(),u(!1)};return o.jsx("section",{className:"py-16 bg-emerald-50",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-emerald-900 mb-4",children:"What Our Patients Say"}),o.jsx("p",{className:"text-lg text-emerald-700 max-w-2xl mx-auto",children:"Read reviews from thousands of satisfied patients across Pakistan"})]}),o.jsxs("div",{className:"relative max-w-6xl mx-auto mb-8",children:[o.jsxs(m3,{opts:{align:"start",loop:!0,skipSnaps:!1,dragFree:!1,containScroll:"trimSnaps"},className:"w-full",children:[o.jsx(g3,{className:"-ml-4 md:-ml-6",children:e.map((k,w)=>o.jsx(v3,{className:"pl-4 md:pl-6 basis-full sm:basis-1/2 lg:basis-1/3",children:o.jsx("div",{className:"p-2",children:o.jsx(OO,{testimonial:k})})},w))}),o.jsx(y3,{className:"left-4 md:left-6 bg-white/80 hover:bg-white border-2 border-emerald-200 hover:border-emerald-300 shadow-lg"}),o.jsx(_3,{className:"right-4 md:right-6 bg-white/80 hover:bg-white border-2 border-emerald-200 hover:border-emerald-300 shadow-lg"})]}),o.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:e.map((k,w)=>o.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-300 hover:bg-emerald-500 transition-colors cursor-pointer"},w))}),o.jsx("div",{className:"text-center mt-4",children:o.jsx("p",{className:"text-sm text-emerald-600",children:" Swipe or use arrows to navigate  Click indicators to jump to specific reviews"})})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Yc,{onClick:b,variant:"default",size:"lg",className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300",children:"Rate Our Platform"}),o.jsx(M2,{open:y,onOpenChange:u,mode:"rating-and-review",onSubmit:E,onUpdate:_,onDelete:m,title:"Rate Our Platform",description:"Your feedback helps us improve QuickMed for everyone. Rate your overall experience with our healthcare platform, including ease of use, features, and service quality.",submitLabel:"Submit Rating"}),o.jsx(J0,{open:R,onOpenChange:v,children:o.jsxs(X0,{className:"max-w-md",children:[o.jsxs(ey,{children:[o.jsx(ty,{children:"Login Required"}),o.jsx(ny,{children:"Please log in to rate our platform. Choose your login type below."})]}),o.jsxs("div",{className:"mt-2 grid gap-3",children:[o.jsx(Za,{to:"/login",onClick:()=>v(!1),children:o.jsx(Yc,{className:"w-full",children:"Login as User"})}),o.jsx(Za,{to:"/doctor/login",onClick:()=>v(!1),children:o.jsx(Yc,{variant:"outline",className:"w-full",children:"Login as Doctor"})})]})]})})]})]})})},IL=()=>o.jsx("section",{className:"py-16 bg-white",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Why Choose QuickMed?"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Pakistan's most trusted healthcare platform with verified doctors and secure services"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:p4.map((e,t)=>o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-4xl mb-4",children:e.icon}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),o.jsx("p",{className:"text-gray-600 mb-3",children:e.description}),o.jsx("div",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:e.stat})]},t))})]})}),BL=()=>o.jsx("section",{className:"py-16 bg-gray-50",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Common Health Conditions"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Find expert doctors for the most common health conditions and symptoms"})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:g4.map((e,t)=>o.jsxs(Za,{to:e.href,className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 p-6 text-center group",children:[o.jsx("div",{className:"text-3xl mb-3",children:e.icon}),o.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2 group-hover:text-blue-600",children:e.title}),o.jsx("p",{className:"text-xs text-gray-500",children:e.description})]},t))})]})}),zL=()=>o.jsxs("main",{children:[o.jsx(TO,{}),o.jsx(BL,{}),o.jsx(IL,{}),o.jsx(NO,{}),o.jsx(PO,{}),o.jsx(LL,{})]});var Zp=e=>e.type==="checkbox",id=e=>e instanceof Date,Ro=e=>e==null;const OR=e=>typeof e=="object";var ai=e=>!Ro(e)&&!Array.isArray(e)&&OR(e)&&!id(e),UL=e=>ai(e)&&e.target?Zp(e.target)?e.target.checked:e.target.value:e,FL=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,HL=(e,t)=>e.has(FL(t)),VL=e=>{const t=e.constructor&&e.constructor.prototype;return ai(t)&&t.hasOwnProperty("isPrototypeOf")},Py=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Fi(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Py&&(e instanceof Blob||s))&&(r||ai(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!VL(e))t=e;else for(const l in e)e.hasOwnProperty(l)&&(t[l]=Fi(e[l]));else return e;return t}var og=e=>/^\w*$/.test(e),gi=e=>e===void 0,Ny=e=>Array.isArray(e)?e.filter(Boolean):[],Dy=e=>Ny(e.replace(/["|']|\]/g,"").split(/\.|\[/)),mr=(e,t,r)=>{if(!t||!ai(e))return r;const s=(og(t)?[t]:Dy(t)).reduce((l,h)=>Ro(l)?l:l[h],e);return gi(s)||s===e?gi(e[t])?r:e[t]:s},gl=e=>typeof e=="boolean",ls=(e,t,r)=>{let s=-1;const l=og(t)?[t]:Dy(t),h=l.length,C=h-1;for(;++s<h;){const N=l[s];let y=r;if(s!==C){const u=e[N];y=ai(u)||Array.isArray(u)?u:isNaN(+l[s+1])?{}:[]}if(N==="__proto__"||N==="constructor"||N==="prototype")return;e[N]=y,e=e[N]}};const s1={BLUR:"blur",FOCUS_OUT:"focusout"},Zc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ql={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},qL=$t.createContext(null);qL.displayName="HookFormContext";var $L=(e,t,r,s=!0)=>{const l={defaultValues:t._defaultValues};for(const h in e)Object.defineProperty(l,h,{get:()=>{const C=h;return t._proxyFormState[C]!==Zc.all&&(t._proxyFormState[C]=!s||Zc.all),e[C]}});return l};const WL=typeof window<"u"?$t.useLayoutEffect:$t.useEffect;var _l=e=>typeof e=="string",ZL=(e,t,r,s,l)=>_l(e)?(s&&t.watch.add(e),mr(r,e,l)):Array.isArray(e)?e.map(h=>(s&&t.watch.add(h),mr(r,h))):(s&&(t.watchAll=!0),r),v0=e=>Ro(e)||!OR(e);function Ou(e,t,r=new WeakSet){if(v0(e)||v0(t))return e===t;if(id(e)&&id(t))return e.getTime()===t.getTime();const s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const h of s){const C=e[h];if(!l.includes(h))return!1;if(h!=="ref"){const N=t[h];if(id(C)&&id(N)||ai(C)&&ai(N)||Array.isArray(C)&&Array.isArray(N)?!Ou(C,N,r):C!==N)return!1}}return!0}var Ay=(e,t,r,s,l)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:l||!0}}:{},gp=e=>Array.isArray(e)?e:[e],i1=()=>{let e=[];return{get observers(){return e},next:l=>{for(const h of e)h.next&&h.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(h=>h!==l)}}),unsubscribe:()=>{e=[]}}},Fo=e=>ai(e)&&!Object.keys(e).length,Oy=e=>e.type==="file",Gc=e=>typeof e=="function",Em=e=>{if(!Py)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},MR=e=>e.type==="select-multiple",My=e=>e.type==="radio",GL=e=>My(e)||Zp(e),Fv=e=>Em(e)&&e.isConnected;function YL(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=gi(e)?s++:e[t[s++]];return e}function KL(e){for(const t in e)if(e.hasOwnProperty(t)&&!gi(e[t]))return!1;return!0}function mi(e,t){const r=Array.isArray(t)?t:og(t)?[t]:Dy(t),s=r.length===1?e:YL(e,r),l=r.length-1,h=r[l];return s&&delete s[h],l!==0&&(ai(s)&&Fo(s)||Array.isArray(s)&&KL(s))&&mi(e,r.slice(0,-1)),e}var jR=e=>{for(const t in e)if(Gc(e[t]))return!0;return!1};function km(e,t={}){const r=Array.isArray(e);if(ai(e)||r)for(const s in e)Array.isArray(e[s])||ai(e[s])&&!jR(e[s])?(t[s]=Array.isArray(e[s])?[]:{},km(e[s],t[s])):Ro(e[s])||(t[s]=!0);return t}function LR(e,t,r){const s=Array.isArray(e);if(ai(e)||s)for(const l in e)Array.isArray(e[l])||ai(e[l])&&!jR(e[l])?gi(t)||v0(r[l])?r[l]=Array.isArray(e[l])?km(e[l],[]):{...km(e[l])}:LR(e[l],Ro(t)?{}:t[l],r[l]):r[l]=!Ou(e[l],t[l]);return r}var op=(e,t)=>LR(e,t,km(t));const o1={value:!1,isValid:!1},c1={value:!0,isValid:!0};var IR=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!gi(e[0].attributes.value)?gi(e[0].value)||e[0].value===""?c1:{value:e[0].value,isValid:!0}:c1:o1}return o1},BR=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>gi(e)?e:t?e===""?NaN:e&&+e:r&&_l(e)?new Date(e):s?s(e):e;const l1={isValid:!1,value:null};var zR=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,l1):l1;function u1(e){const t=e.ref;return Oy(t)?t.files:My(t)?zR(e.refs).value:MR(t)?[...t.selectedOptions].map(({value:r})=>r):Zp(t)?IR(e.refs).value:BR(gi(t.value)?e.ref.value:t.value,e)}var QL=(e,t,r,s)=>{const l={};for(const h of e){const C=mr(t,h);C&&ls(l,h,C._f)}return{criteriaMode:r,names:[...e],fields:l,shouldUseNativeValidation:s}},Cm=e=>e instanceof RegExp,cp=e=>gi(e)?e:Cm(e)?e.source:ai(e)?Cm(e.value)?e.value.source:e.value:e,d1=e=>({isOnSubmit:!e||e===Zc.onSubmit,isOnBlur:e===Zc.onBlur,isOnChange:e===Zc.onChange,isOnAll:e===Zc.all,isOnTouch:e===Zc.onTouched});const h1="AsyncFunction";var JL=e=>!!e&&!!e.validate&&!!(Gc(e.validate)&&e.validate.constructor.name===h1||ai(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===h1)),XL=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),p1=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const vp=(e,t,r,s)=>{for(const l of r||Object.keys(e)){const h=mr(e,l);if(h){const{_f:C,...N}=h;if(C){if(C.refs&&C.refs[0]&&t(C.refs[0],l)&&!s)return!0;if(C.ref&&t(C.ref,C.name)&&!s)return!0;if(vp(N,t))break}else if(ai(N)&&vp(N,t))break}}};function f1(e,t,r){const s=mr(e,r);if(s||og(r))return{error:s,name:r};const l=r.split(".");for(;l.length;){const h=l.join("."),C=mr(t,h),N=mr(e,h);if(C&&!Array.isArray(C)&&r!==h)return{name:r};if(N&&N.type)return{name:h,error:N};if(N&&N.root&&N.root.type)return{name:`${h}.root`,error:N.root};l.pop()}return{name:r}}var e7=(e,t,r,s)=>{r(e);const{name:l,...h}=e;return Fo(h)||Object.keys(h).length>=Object.keys(t).length||Object.keys(h).find(C=>t[C]===(!s||Zc.all))},t7=(e,t,r)=>!e||!t||e===t||gp(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),n7=(e,t,r,s,l)=>l.isOnAll?!1:!r&&l.isOnTouch?!(t||e):(r?s.isOnBlur:l.isOnBlur)?!e:(r?s.isOnChange:l.isOnChange)?e:!0,r7=(e,t)=>!Ny(mr(e,t)).length&&mi(e,t),a7=(e,t,r)=>{const s=gp(mr(e,r));return ls(s,"root",t[r]),ls(e,r,s),e},om=e=>_l(e);function m1(e,t,r="validate"){if(om(e)||Array.isArray(e)&&e.every(om)||gl(e)&&!e)return{type:r,message:om(e)?e:"",ref:t}}var Xd=e=>ai(e)&&!Cm(e)?e:{value:e,message:""},g1=async(e,t,r,s,l,h)=>{const{ref:C,refs:N,required:y,maxLength:u,minLength:R,min:v,max:b,pattern:E,validate:_,name:m,valueAsNumber:k,mount:w}=e._f,F=mr(r,m);if(!w||t.has(m))return{};const g=N?N[0]:C,A=O=>{l&&g.reportValidity&&(g.setCustomValidity(gl(O)?"":O||""),g.reportValidity())},P={},H=My(C),D=Zp(C),S=H||D,x=(k||Oy(C))&&gi(C.value)&&gi(F)||Em(C)&&C.value===""||F===""||Array.isArray(F)&&!F.length,d=Ay.bind(null,m,s,P),T=(O,M,I,U=Ql.maxLength,z=Ql.minLength)=>{const $=O?M:I;P[m]={type:O?U:z,message:$,ref:C,...d(O?U:z,$)}};if(h?!Array.isArray(F)||!F.length:y&&(!S&&(x||Ro(F))||gl(F)&&!F||D&&!IR(N).isValid||H&&!zR(N).isValid)){const{value:O,message:M}=om(y)?{value:!!y,message:y}:Xd(y);if(O&&(P[m]={type:Ql.required,message:M,ref:g,...d(Ql.required,M)},!s))return A(M),P}if(!x&&(!Ro(v)||!Ro(b))){let O,M;const I=Xd(b),U=Xd(v);if(!Ro(F)&&!isNaN(F)){const z=C.valueAsNumber||F&&+F;Ro(I.value)||(O=z>I.value),Ro(U.value)||(M=z<U.value)}else{const z=C.valueAsDate||new Date(F),$=Q=>new Date(new Date().toDateString()+" "+Q),q=C.type=="time",ae=C.type=="week";_l(I.value)&&F&&(O=q?$(F)>$(I.value):ae?F>I.value:z>new Date(I.value)),_l(U.value)&&F&&(M=q?$(F)<$(U.value):ae?F<U.value:z<new Date(U.value))}if((O||M)&&(T(!!O,I.message,U.message,Ql.max,Ql.min),!s))return A(P[m].message),P}if((u||R)&&!x&&(_l(F)||h&&Array.isArray(F))){const O=Xd(u),M=Xd(R),I=!Ro(O.value)&&F.length>+O.value,U=!Ro(M.value)&&F.length<+M.value;if((I||U)&&(T(I,O.message,M.message),!s))return A(P[m].message),P}if(E&&!x&&_l(F)){const{value:O,message:M}=Xd(E);if(Cm(O)&&!F.match(O)&&(P[m]={type:Ql.pattern,message:M,ref:C,...d(Ql.pattern,M)},!s))return A(M),P}if(_){if(Gc(_)){const O=await _(F,r),M=m1(O,g);if(M&&(P[m]={...M,...d(Ql.validate,M.message)},!s))return A(M.message),P}else if(ai(_)){let O={};for(const M in _){if(!Fo(O)&&!s)break;const I=m1(await _[M](F,r),g,M);I&&(O={...I,...d(M,I.message)},A(I.message),s&&(P[m]=O))}if(!Fo(O)&&(P[m]={ref:g,...O},!s))return P}}return A(!0),P};const s7={mode:Zc.onSubmit,reValidateMode:Zc.onChange,shouldFocusError:!0};function i7(e={}){let t={...s7,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Gc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},l=ai(t.defaultValues)||ai(t.values)?Fi(t.defaultValues||t.values)||{}:{},h=t.shouldUnregister?{}:Fi(l),C={action:!1,mount:!1,watch:!1},N={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},y,u=0;const R={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...R};const b={array:i1(),state:i1()},E=t.criteriaMode===Zc.all,_=Ne=>Me=>{clearTimeout(u),u=setTimeout(Ne,Me)},m=async Ne=>{if(!t.disabled&&(R.isValid||v.isValid||Ne)){const Me=t.resolver?Fo((await D()).errors):await x(s,!0);Me!==r.isValid&&b.state.next({isValid:Me})}},k=(Ne,Me)=>{!t.disabled&&(R.isValidating||R.validatingFields||v.isValidating||v.validatingFields)&&((Ne||Array.from(N.mount)).forEach(Ze=>{Ze&&(Me?ls(r.validatingFields,Ze,Me):mi(r.validatingFields,Ze))}),b.state.next({validatingFields:r.validatingFields,isValidating:!Fo(r.validatingFields)}))},w=(Ne,Me=[],Ze,Ft,Tt=!0,St=!0)=>{if(Ft&&Ze&&!t.disabled){if(C.action=!0,St&&Array.isArray(mr(s,Ne))){const un=Ze(mr(s,Ne),Ft.argA,Ft.argB);Tt&&ls(s,Ne,un)}if(St&&Array.isArray(mr(r.errors,Ne))){const un=Ze(mr(r.errors,Ne),Ft.argA,Ft.argB);Tt&&ls(r.errors,Ne,un),r7(r.errors,Ne)}if((R.touchedFields||v.touchedFields)&&St&&Array.isArray(mr(r.touchedFields,Ne))){const un=Ze(mr(r.touchedFields,Ne),Ft.argA,Ft.argB);Tt&&ls(r.touchedFields,Ne,un)}(R.dirtyFields||v.dirtyFields)&&(r.dirtyFields=op(l,h)),b.state.next({name:Ne,isDirty:T(Ne,Me),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ls(h,Ne,Me)},F=(Ne,Me)=>{ls(r.errors,Ne,Me),b.state.next({errors:r.errors})},g=Ne=>{r.errors=Ne,b.state.next({errors:r.errors,isValid:!1})},A=(Ne,Me,Ze,Ft)=>{const Tt=mr(s,Ne);if(Tt){const St=mr(h,Ne,gi(Ze)?mr(l,Ne):Ze);gi(St)||Ft&&Ft.defaultChecked||Me?ls(h,Ne,Me?St:u1(Tt._f)):I(Ne,St),C.mount&&m()}},P=(Ne,Me,Ze,Ft,Tt)=>{let St=!1,un=!1;const Sn={name:Ne};if(!t.disabled){if(!Ze||Ft){(R.isDirty||v.isDirty)&&(un=r.isDirty,r.isDirty=Sn.isDirty=T(),St=un!==Sn.isDirty);const Ut=Ou(mr(l,Ne),Me);un=!!mr(r.dirtyFields,Ne),Ut?mi(r.dirtyFields,Ne):ls(r.dirtyFields,Ne,!0),Sn.dirtyFields=r.dirtyFields,St=St||(R.dirtyFields||v.dirtyFields)&&un!==!Ut}if(Ze){const Ut=mr(r.touchedFields,Ne);Ut||(ls(r.touchedFields,Ne,Ze),Sn.touchedFields=r.touchedFields,St=St||(R.touchedFields||v.touchedFields)&&Ut!==Ze)}St&&Tt&&b.state.next(Sn)}return St?Sn:{}},H=(Ne,Me,Ze,Ft)=>{const Tt=mr(r.errors,Ne),St=(R.isValid||v.isValid)&&gl(Me)&&r.isValid!==Me;if(t.delayError&&Ze?(y=_(()=>F(Ne,Ze)),y(t.delayError)):(clearTimeout(u),y=null,Ze?ls(r.errors,Ne,Ze):mi(r.errors,Ne)),(Ze?!Ou(Tt,Ze):Tt)||!Fo(Ft)||St){const un={...Ft,...St&&gl(Me)?{isValid:Me}:{},errors:r.errors,name:Ne};r={...r,...un},b.state.next(un)}},D=async Ne=>{k(Ne,!0);const Me=await t.resolver(h,t.context,QL(Ne||N.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return k(Ne),Me},S=async Ne=>{const{errors:Me}=await D(Ne);if(Ne)for(const Ze of Ne){const Ft=mr(Me,Ze);Ft?ls(r.errors,Ze,Ft):mi(r.errors,Ze)}else r.errors=Me;return Me},x=async(Ne,Me,Ze={valid:!0})=>{for(const Ft in Ne){const Tt=Ne[Ft];if(Tt){const{_f:St,...un}=Tt;if(St){const Sn=N.array.has(St.name),Ut=Tt._f&&JL(Tt._f);Ut&&R.validatingFields&&k([Ft],!0);const nr=await g1(Tt,N.disabled,h,E,t.shouldUseNativeValidation&&!Me,Sn);if(Ut&&R.validatingFields&&k([Ft]),nr[St.name]&&(Ze.valid=!1,Me))break;!Me&&(mr(nr,St.name)?Sn?a7(r.errors,nr,St.name):ls(r.errors,St.name,nr[St.name]):mi(r.errors,St.name))}!Fo(un)&&await x(un,Me,Ze)}}return Ze.valid},d=()=>{for(const Ne of N.unMount){const Me=mr(s,Ne);Me&&(Me._f.refs?Me._f.refs.every(Ze=>!Fv(Ze)):!Fv(Me._f.ref))&&be(Ne)}N.unMount=new Set},T=(Ne,Me)=>!t.disabled&&(Ne&&Me&&ls(h,Ne,Me),!Ou(Q(),l)),O=(Ne,Me,Ze)=>ZL(Ne,N,{...C.mount?h:gi(Me)?l:_l(Ne)?{[Ne]:Me}:Me},Ze,Me),M=Ne=>Ny(mr(C.mount?h:l,Ne,t.shouldUnregister?mr(l,Ne,[]):[])),I=(Ne,Me,Ze={})=>{const Ft=mr(s,Ne);let Tt=Me;if(Ft){const St=Ft._f;St&&(!St.disabled&&ls(h,Ne,BR(Me,St)),Tt=Em(St.ref)&&Ro(Me)?"":Me,MR(St.ref)?[...St.ref.options].forEach(un=>un.selected=Tt.includes(un.value)):St.refs?Zp(St.ref)?St.refs.forEach(un=>{(!un.defaultChecked||!un.disabled)&&(Array.isArray(Tt)?un.checked=!!Tt.find(Sn=>Sn===un.value):un.checked=Tt===un.value||!!Tt)}):St.refs.forEach(un=>un.checked=un.value===Tt):Oy(St.ref)?St.ref.value="":(St.ref.value=Tt,St.ref.type||b.state.next({name:Ne,values:Fi(h)})))}(Ze.shouldDirty||Ze.shouldTouch)&&P(Ne,Tt,Ze.shouldTouch,Ze.shouldDirty,!0),Ze.shouldValidate&&ae(Ne)},U=(Ne,Me,Ze)=>{for(const Ft in Me){if(!Me.hasOwnProperty(Ft))return;const Tt=Me[Ft],St=Ne+"."+Ft,un=mr(s,St);(N.array.has(Ne)||ai(Tt)||un&&!un._f)&&!id(Tt)?U(St,Tt,Ze):I(St,Tt,Ze)}},z=(Ne,Me,Ze={})=>{const Ft=mr(s,Ne),Tt=N.array.has(Ne),St=Fi(Me);ls(h,Ne,St),Tt?(b.array.next({name:Ne,values:Fi(h)}),(R.isDirty||R.dirtyFields||v.isDirty||v.dirtyFields)&&Ze.shouldDirty&&b.state.next({name:Ne,dirtyFields:op(l,h),isDirty:T(Ne,St)})):Ft&&!Ft._f&&!Ro(St)?U(Ne,St,Ze):I(Ne,St,Ze),p1(Ne,N)&&b.state.next({...r,name:Ne}),b.state.next({name:C.mount?Ne:void 0,values:Fi(h)})},$=async Ne=>{C.mount=!0;const Me=Ne.target;let Ze=Me.name,Ft=!0;const Tt=mr(s,Ze),St=Ut=>{Ft=Number.isNaN(Ut)||id(Ut)&&isNaN(Ut.getTime())||Ou(Ut,mr(h,Ze,Ut))},un=d1(t.mode),Sn=d1(t.reValidateMode);if(Tt){let Ut,nr;const Ar=Me.type?u1(Tt._f):UL(Ne),Sr=Ne.type===s1.BLUR||Ne.type===s1.FOCUS_OUT,Ur=!XL(Tt._f)&&!t.resolver&&!mr(r.errors,Ze)&&!Tt._f.deps||n7(Sr,mr(r.touchedFields,Ze),r.isSubmitted,Sn,un),xr=p1(Ze,N,Sr);ls(h,Ze,Ar),Sr?(!Me||!Me.readOnly)&&(Tt._f.onBlur&&Tt._f.onBlur(Ne),y&&y(0)):Tt._f.onChange&&Tt._f.onChange(Ne);const Or=P(Ze,Ar,Sr),Kr=!Fo(Or)||xr;if(!Sr&&b.state.next({name:Ze,type:Ne.type,values:Fi(h)}),Ur)return(R.isValid||v.isValid)&&(t.mode==="onBlur"?Sr&&m():Sr||m()),Kr&&b.state.next({name:Ze,...xr?{}:Or});if(!Sr&&xr&&b.state.next({...r}),t.resolver){const{errors:va}=await D([Ze]);if(St(Ar),Ft){const ra=f1(r.errors,s,Ze),ua=f1(va,s,ra.name||Ze);Ut=ua.error,Ze=ua.name,nr=Fo(va)}}else k([Ze],!0),Ut=(await g1(Tt,N.disabled,h,E,t.shouldUseNativeValidation))[Ze],k([Ze]),St(Ar),Ft&&(Ut?nr=!1:(R.isValid||v.isValid)&&(nr=await x(s,!0)));Ft&&(Tt._f.deps&&ae(Tt._f.deps),H(Ze,nr,Ut,Or))}},q=(Ne,Me)=>{if(mr(r.errors,Me)&&Ne.focus)return Ne.focus(),1},ae=async(Ne,Me={})=>{let Ze,Ft;const Tt=gp(Ne);if(t.resolver){const St=await S(gi(Ne)?Ne:Tt);Ze=Fo(St),Ft=Ne?!Tt.some(un=>mr(St,un)):Ze}else Ne?(Ft=(await Promise.all(Tt.map(async St=>{const un=mr(s,St);return await x(un&&un._f?{[St]:un}:un)}))).every(Boolean),!(!Ft&&!r.isValid)&&m()):Ft=Ze=await x(s);return b.state.next({...!_l(Ne)||(R.isValid||v.isValid)&&Ze!==r.isValid?{}:{name:Ne},...t.resolver||!Ne?{isValid:Ze}:{},errors:r.errors}),Me.shouldFocus&&!Ft&&vp(s,q,Ne?Tt:N.mount),Ft},Q=Ne=>{const Me={...C.mount?h:l};return gi(Ne)?Me:_l(Ne)?mr(Me,Ne):Ne.map(Ze=>mr(Me,Ze))},ve=(Ne,Me)=>({invalid:!!mr((Me||r).errors,Ne),isDirty:!!mr((Me||r).dirtyFields,Ne),error:mr((Me||r).errors,Ne),isValidating:!!mr(r.validatingFields,Ne),isTouched:!!mr((Me||r).touchedFields,Ne)}),we=Ne=>{Ne&&gp(Ne).forEach(Me=>mi(r.errors,Me)),b.state.next({errors:Ne?r.errors:{}})},Re=(Ne,Me,Ze)=>{const Ft=(mr(s,Ne,{_f:{}})._f||{}).ref,Tt=mr(r.errors,Ne)||{},{ref:St,message:un,type:Sn,...Ut}=Tt;ls(r.errors,Ne,{...Ut,...Me,ref:Ft}),b.state.next({name:Ne,errors:r.errors,isValid:!1}),Ze&&Ze.shouldFocus&&Ft&&Ft.focus&&Ft.focus()},me=(Ne,Me)=>Gc(Ne)?b.state.subscribe({next:Ze=>"values"in Ze&&Ne(O(void 0,Me),Ze)}):O(Ne,Me,!0),Ce=Ne=>b.state.subscribe({next:Me=>{t7(Ne.name,Me.name,Ne.exact)&&e7(Me,Ne.formState||R,Pn,Ne.reRenderRoot)&&Ne.callback({values:{...h},...r,...Me,defaultValues:l})}}).unsubscribe,Be=Ne=>(C.mount=!0,v={...v,...Ne.formState},Ce({...Ne,formState:v})),be=(Ne,Me={})=>{for(const Ze of Ne?gp(Ne):N.mount)N.mount.delete(Ze),N.array.delete(Ze),Me.keepValue||(mi(s,Ze),mi(h,Ze)),!Me.keepError&&mi(r.errors,Ze),!Me.keepDirty&&mi(r.dirtyFields,Ze),!Me.keepTouched&&mi(r.touchedFields,Ze),!Me.keepIsValidating&&mi(r.validatingFields,Ze),!t.shouldUnregister&&!Me.keepDefaultValue&&mi(l,Ze);b.state.next({values:Fi(h)}),b.state.next({...r,...Me.keepDirty?{isDirty:T()}:{}}),!Me.keepIsValid&&m()},Ye=({disabled:Ne,name:Me})=>{(gl(Ne)&&C.mount||Ne||N.disabled.has(Me))&&(Ne?N.disabled.add(Me):N.disabled.delete(Me))},Qe=(Ne,Me={})=>{let Ze=mr(s,Ne);const Ft=gl(Me.disabled)||gl(t.disabled);return ls(s,Ne,{...Ze||{},_f:{...Ze&&Ze._f?Ze._f:{ref:{name:Ne}},name:Ne,mount:!0,...Me}}),N.mount.add(Ne),Ze?Ye({disabled:gl(Me.disabled)?Me.disabled:t.disabled,name:Ne}):A(Ne,!0,Me.value),{...Ft?{disabled:Me.disabled||t.disabled}:{},...t.progressive?{required:!!Me.required,min:cp(Me.min),max:cp(Me.max),minLength:cp(Me.minLength),maxLength:cp(Me.maxLength),pattern:cp(Me.pattern)}:{},name:Ne,onChange:$,onBlur:$,ref:Tt=>{if(Tt){Qe(Ne,Me),Ze=mr(s,Ne);const St=gi(Tt.value)&&Tt.querySelectorAll&&Tt.querySelectorAll("input,select,textarea")[0]||Tt,un=GL(St),Sn=Ze._f.refs||[];if(un?Sn.find(Ut=>Ut===St):St===Ze._f.ref)return;ls(s,Ne,{_f:{...Ze._f,...un?{refs:[...Sn.filter(Fv),St,...Array.isArray(mr(l,Ne))?[{}]:[]],ref:{type:St.type,name:Ne}}:{ref:St}}}),A(Ne,!1,void 0,St)}else Ze=mr(s,Ne,{}),Ze._f&&(Ze._f.mount=!1),(t.shouldUnregister||Me.shouldUnregister)&&!(HL(N.array,Ne)&&C.action)&&N.unMount.add(Ne)}}},Ge=()=>t.shouldFocusError&&vp(s,q,N.mount),He=Ne=>{gl(Ne)&&(b.state.next({disabled:Ne}),vp(s,(Me,Ze)=>{const Ft=mr(s,Ze);Ft&&(Me.disabled=Ft._f.disabled||Ne,Array.isArray(Ft._f.refs)&&Ft._f.refs.forEach(Tt=>{Tt.disabled=Ft._f.disabled||Ne}))},0,!1))},Te=(Ne,Me)=>async Ze=>{let Ft;Ze&&(Ze.preventDefault&&Ze.preventDefault(),Ze.persist&&Ze.persist());let Tt=Fi(h);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:St,values:un}=await D();r.errors=St,Tt=Fi(un)}else await x(s);if(N.disabled.size)for(const St of N.disabled)mi(Tt,St);if(mi(r.errors,"root"),Fo(r.errors)){b.state.next({errors:{}});try{await Ne(Tt,Ze)}catch(St){Ft=St}}else Me&&await Me({...r.errors},Ze),Ge(),setTimeout(Ge);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Fo(r.errors)&&!Ft,submitCount:r.submitCount+1,errors:r.errors}),Ft)throw Ft},dt=(Ne,Me={})=>{mr(s,Ne)&&(gi(Me.defaultValue)?z(Ne,Fi(mr(l,Ne))):(z(Ne,Me.defaultValue),ls(l,Ne,Fi(Me.defaultValue))),Me.keepTouched||mi(r.touchedFields,Ne),Me.keepDirty||(mi(r.dirtyFields,Ne),r.isDirty=Me.defaultValue?T(Ne,Fi(mr(l,Ne))):T()),Me.keepError||(mi(r.errors,Ne),R.isValid&&m()),b.state.next({...r}))},_t=(Ne,Me={})=>{const Ze=Ne?Fi(Ne):l,Ft=Fi(Ze),Tt=Fo(Ne),St=Tt?l:Ft;if(Me.keepDefaultValues||(l=Ze),!Me.keepValues){if(Me.keepDirtyValues){const un=new Set([...N.mount,...Object.keys(op(l,h))]);for(const Sn of Array.from(un))mr(r.dirtyFields,Sn)?ls(St,Sn,mr(h,Sn)):z(Sn,mr(St,Sn))}else{if(Py&&gi(Ne))for(const un of N.mount){const Sn=mr(s,un);if(Sn&&Sn._f){const Ut=Array.isArray(Sn._f.refs)?Sn._f.refs[0]:Sn._f.ref;if(Em(Ut)){const nr=Ut.closest("form");if(nr){nr.reset();break}}}}if(Me.keepFieldsRef)for(const un of N.mount)z(un,mr(St,un));else s={}}h=t.shouldUnregister?Me.keepDefaultValues?Fi(l):{}:Fi(St),b.array.next({values:{...St}}),b.state.next({values:{...St}})}N={mount:Me.keepDirtyValues?N.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},C.mount=!R.isValid||!!Me.keepIsValid||!!Me.keepDirtyValues,C.watch=!!t.shouldUnregister,b.state.next({submitCount:Me.keepSubmitCount?r.submitCount:0,isDirty:Tt?!1:Me.keepDirty?r.isDirty:!!(Me.keepDefaultValues&&!Ou(Ne,l)),isSubmitted:Me.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Tt?{}:Me.keepDirtyValues?Me.keepDefaultValues&&h?op(l,h):r.dirtyFields:Me.keepDefaultValues&&Ne?op(l,Ne):Me.keepDirty?r.dirtyFields:{},touchedFields:Me.keepTouched?r.touchedFields:{},errors:Me.keepErrors?r.errors:{},isSubmitSuccessful:Me.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},on=(Ne,Me)=>_t(Gc(Ne)?Ne(h):Ne,Me),ln=(Ne,Me={})=>{const Ze=mr(s,Ne),Ft=Ze&&Ze._f;if(Ft){const Tt=Ft.refs?Ft.refs[0]:Ft.ref;Tt.focus&&(Tt.focus(),Me.shouldSelect&&Gc(Tt.select)&&Tt.select())}},Pn=Ne=>{r={...r,...Ne}},rn={control:{register:Qe,unregister:be,getFieldState:ve,handleSubmit:Te,setError:Re,_subscribe:Ce,_runSchema:D,_focusError:Ge,_getWatch:O,_getDirty:T,_setValid:m,_setFieldArray:w,_setDisabledField:Ye,_setErrors:g,_getFieldArray:M,_reset:_t,_resetDefaultValues:()=>Gc(t.defaultValues)&&t.defaultValues().then(Ne=>{on(Ne,t.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:d,_disableForm:He,_subjects:b,_proxyFormState:R,get _fields(){return s},get _formValues(){return h},get _state(){return C},set _state(Ne){C=Ne},get _defaultValues(){return l},get _names(){return N},set _names(Ne){N=Ne},get _formState(){return r},get _options(){return t},set _options(Ne){t={...t,...Ne}}},subscribe:Be,trigger:ae,register:Qe,handleSubmit:Te,watch:me,setValue:z,getValues:Q,reset:on,resetField:dt,clearErrors:we,unregister:be,setError:Re,setFocus:ln,getFieldState:ve};return{...rn,formControl:rn}}function El(e={}){const t=$t.useRef(void 0),r=$t.useRef(void 0),[s,l]=$t.useState({isDirty:!1,isValidating:!1,isLoading:Gc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Gc(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Gc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:C,...N}=i7(e);t.current={...N,formState:s}}const h=t.current.control;return h._options=e,WL(()=>{const C=h._subscribe({formState:h._proxyFormState,callback:()=>l({...h._formState}),reRenderRoot:!0});return l(N=>({...N,isReady:!0})),h._formState.isReady=!0,C},[h]),$t.useEffect(()=>h._disableForm(e.disabled),[h,e.disabled]),$t.useEffect(()=>{e.mode&&(h._options.mode=e.mode),e.reValidateMode&&(h._options.reValidateMode=e.reValidateMode)},[h,e.mode,e.reValidateMode]),$t.useEffect(()=>{e.errors&&(h._setErrors(e.errors),h._focusError())},[h,e.errors]),$t.useEffect(()=>{e.shouldUnregister&&h._subjects.state.next({values:h._getWatch()})},[h,e.shouldUnregister]),$t.useEffect(()=>{if(h._proxyFormState.isDirty){const C=h._getDirty();C!==s.isDirty&&h._subjects.state.next({isDirty:C})}},[h,s.isDirty]),$t.useEffect(()=>{e.values&&!Ou(e.values,r.current)?(h._reset(e.values,{keepFieldsRef:!0,...h._options.resetOptions}),r.current=e.values,l(C=>({...C}))):h._resetDefaultValues()},[h,e.values]),$t.useEffect(()=>{h._state.mount||(h._setValid(),h._state.mount=!0),h._state.watch&&(h._state.watch=!1,h._subjects.state.next({...h._formState})),h._removeUnmounted()}),t.current.formState=$L(s,h),t.current}const v1=(e,t,r)=>{if(e&&"reportValidity"in e){const s=mr(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},y0=(e,t)=>{for(const r in t.fields){const s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?v1(s.ref,r,e):s&&s.refs&&s.refs.forEach(l=>v1(l,r,e))}},y1=(e,t)=>{t.shouldUseNativeValidation&&y0(e,t);const r={};for(const s in e){const l=mr(t.fields,s),h=Object.assign(e[s]||{},{ref:l&&l.ref});if(o7(t.names||Object.keys(e),s)){const C=Object.assign({},mr(r,s));ls(C,"root",h),ls(r,s,C)}else ls(r,s,h)}return r},o7=(e,t)=>{const r=_1(t);return e.some(s=>_1(s).match(`^${r}\\.\\d+`))};function _1(e){return e.replace(/\]|\[/g,"")}function Wt(e,t,r){function s(N,y){var u;Object.defineProperty(N,"_zod",{value:N._zod??{},enumerable:!1}),(u=N._zod).traits??(u.traits=new Set),N._zod.traits.add(e),t(N,y);for(const R in C.prototype)R in N||Object.defineProperty(N,R,{value:C.prototype[R].bind(N)});N._zod.constr=C,N._zod.def=y}const l=r?.Parent??Object;class h extends l{}Object.defineProperty(h,"name",{value:e});function C(N){var y;const u=r?.Parent?new h:this;s(u,N),(y=u._zod).deferred??(y.deferred=[]);for(const R of u._zod.deferred)R();return u}return Object.defineProperty(C,"init",{value:s}),Object.defineProperty(C,Symbol.hasInstance,{value:N=>r?.Parent&&N instanceof r.Parent?!0:N?._zod?.traits?.has(e)}),Object.defineProperty(C,"name",{value:e}),C}class Ap extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const UR={};function fd(e){return UR}function c7(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,l])=>t.indexOf(+s)===-1).map(([s,l])=>l)}function _0(e,t){return typeof t=="bigint"?t.toString():t}function FR(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function jy(e){return e==null}function Ly(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function l7(e,t){const r=(e.toString().split(".")[1]||"").length,s=t.toString();let l=(s.split(".")[1]||"").length;if(l===0&&/\d?e-\d?/.test(s)){const y=s.match(/\d?e-(\d?)/);y?.[1]&&(l=Number.parseInt(y[1]))}const h=r>l?r:l,C=Number.parseInt(e.toFixed(h).replace(".","")),N=Number.parseInt(t.toFixed(h).replace(".",""));return C%N/10**h}const b1=Symbol("evaluating");function ps(e,t,r){let s;Object.defineProperty(e,t,{get(){if(s!==b1)return s===void 0&&(s=b1,s=r()),s},set(l){Object.defineProperty(e,t,{value:l})},configurable:!0})}function u7(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function vd(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function xh(...e){const t={};for(const r of e){const s=Object.getOwnPropertyDescriptors(r);Object.assign(t,s)}return Object.defineProperties({},t)}function x1(e){return JSON.stringify(e)}const HR="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function b0(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const d7=FR(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function x0(e){if(b0(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(b0(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const h7=new Set(["string","number","symbol"]);function lh(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yd(e,t,r){const s=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(s._zod.parent=e),s}function kr(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function p7(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const f7={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function m7(e,t){const r=e._zod.def,s=xh(e._zod.def,{get shape(){const l={};for(const h in t){if(!(h in r.shape))throw new Error(`Unrecognized key: "${h}"`);t[h]&&(l[h]=r.shape[h])}return vd(this,"shape",l),l},checks:[]});return yd(e,s)}function g7(e,t){const r=e._zod.def,s=xh(e._zod.def,{get shape(){const l={...e._zod.def.shape};for(const h in t){if(!(h in r.shape))throw new Error(`Unrecognized key: "${h}"`);t[h]&&delete l[h]}return vd(this,"shape",l),l},checks:[]});return yd(e,s)}function v7(e,t){if(!x0(t))throw new Error("Invalid input to extend: expected a plain object");const r=xh(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return vd(this,"shape",s),s},checks:[]});return yd(e,r)}function y7(e,t){const r=xh(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t._zod.def.shape};return vd(this,"shape",s),s},get catchall(){return t._zod.def.catchall},checks:[]});return yd(e,r)}function _7(e,t,r){const s=xh(t._zod.def,{get shape(){const l=t._zod.def.shape,h={...l};if(r)for(const C in r){if(!(C in l))throw new Error(`Unrecognized key: "${C}"`);r[C]&&(h[C]=e?new e({type:"optional",innerType:l[C]}):l[C])}else for(const C in l)h[C]=e?new e({type:"optional",innerType:l[C]}):l[C];return vd(this,"shape",h),h},checks:[]});return yd(t,s)}function b7(e,t,r){const s=xh(t._zod.def,{get shape(){const l=t._zod.def.shape,h={...l};if(r)for(const C in r){if(!(C in h))throw new Error(`Unrecognized key: "${C}"`);r[C]&&(h[C]=new e({type:"nonoptional",innerType:l[C]}))}else for(const C in l)h[C]=new e({type:"nonoptional",innerType:l[C]});return vd(this,"shape",h),h},checks:[]});return yd(t,s)}function yp(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function VR(e,t){return t.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(e),r})}function $f(e){return typeof e=="string"?e:e?.message}function md(e,t,r){const s={...e,path:e.path??[]};if(!e.message){const l=$f(e.inst?._zod.def?.error?.(e))??$f(t?.error?.(e))??$f(r.customError?.(e))??$f(r.localeError?.(e))??"Invalid input";s.message=l}return delete s.inst,delete s.continue,t?.reportInput||delete s.input,s}function Iy(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Op(...e){const[t,r,s]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:s}:{...t}}const qR=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,_0,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},By=Wt("$ZodError",qR),cg=Wt("$ZodError",qR,{Parent:Error});function x7(e,t=r=>r.message){const r={},s=[];for(const l of e.issues)l.path.length>0?(r[l.path[0]]=r[l.path[0]]||[],r[l.path[0]].push(t(l))):s.push(t(l));return{formErrors:s,fieldErrors:r}}function w7(e,t){const r=t||function(h){return h.message},s={_errors:[]},l=h=>{for(const C of h.issues)if(C.code==="invalid_union"&&C.errors.length)C.errors.map(N=>l({issues:N}));else if(C.code==="invalid_key")l({issues:C.issues});else if(C.code==="invalid_element")l({issues:C.issues});else if(C.path.length===0)s._errors.push(r(C));else{let N=s,y=0;for(;y<C.path.length;){const u=C.path[y];y===C.path.length-1?(N[u]=N[u]||{_errors:[]},N[u]._errors.push(r(C))):N[u]=N[u]||{_errors:[]},N=N[u],y++}}};return l(e),s}const $R=e=>(t,r,s,l)=>{const h=s?Object.assign(s,{async:!1}):{async:!1},C=t._zod.run({value:r,issues:[]},h);if(C instanceof Promise)throw new Ap;if(C.issues.length){const N=new(l?.Err??e)(C.issues.map(y=>md(y,h,fd())));throw HR(N,l?.callee),N}return C.value},S7=$R(cg),WR=e=>async(t,r,s,l)=>{const h=s?Object.assign(s,{async:!0}):{async:!0};let C=t._zod.run({value:r,issues:[]},h);if(C instanceof Promise&&(C=await C),C.issues.length){const N=new(l?.Err??e)(C.issues.map(y=>md(y,h,fd())));throw HR(N,l?.callee),N}return C.value},R7=WR(cg),ZR=e=>(t,r,s)=>{const l=s?{...s,async:!1}:{async:!1},h=t._zod.run({value:r,issues:[]},l);if(h instanceof Promise)throw new Ap;return h.issues.length?{success:!1,error:new(e??By)(h.issues.map(C=>md(C,l,fd())))}:{success:!0,data:h.value}},E7=ZR(cg),GR=e=>async(t,r,s)=>{const l=s?Object.assign(s,{async:!0}):{async:!0};let h=t._zod.run({value:r,issues:[]},l);return h instanceof Promise&&(h=await h),h.issues.length?{success:!1,error:new e(h.issues.map(C=>md(C,l,fd())))}:{success:!0,data:h.value}},k7=GR(cg),C7=/^[cC][^\s-]{8,}$/,T7=/^[0-9a-z]+$/,P7=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,N7=/^[0-9a-vA-V]{20}$/,D7=/^[A-Za-z0-9]{27}$/,A7=/^[a-zA-Z0-9_-]{21}$/,O7=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,M7=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,w1=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,j7=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,L7="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function I7(){return new RegExp(L7,"u")}const B7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,z7=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,U7=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,F7=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,H7=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,YR=/^[A-Za-z0-9_-]*$/,V7=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,q7=/^\+(?:[0-9]){6,14}[0-9]$/,KR="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",$7=new RegExp(`^${KR}$`);function QR(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function W7(e){return new RegExp(`^${QR(e)}$`)}function Z7(e){const t=QR({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${t}(?:${r.join("|")})`;return new RegExp(`^${KR}T(?:${s})$`)}const G7=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Y7=/^\d+$/,K7=/^-?\d+(?:\.\d+)?/i,Q7=/true|false/i,J7=/undefined/i,X7=/^[^A-Z]*$/,eI=/^[^a-z]*$/,Zo=Wt("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),JR={number:"number",bigint:"bigint",object:"date"},XR=Wt("$ZodCheckLessThan",(e,t)=>{Zo.init(e,t);const r=JR[typeof t.value];e._zod.onattach.push(s=>{const l=s._zod.bag,h=(t.inclusive?l.maximum:l.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<h&&(t.inclusive?l.maximum=t.value:l.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:r,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),eE=Wt("$ZodCheckGreaterThan",(e,t)=>{Zo.init(e,t);const r=JR[typeof t.value];e._zod.onattach.push(s=>{const l=s._zod.bag,h=(t.inclusive?l.minimum:l.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>h&&(t.inclusive?l.minimum=t.value:l.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:r,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),tI=Wt("$ZodCheckMultipleOf",(e,t)=>{Zo.init(e,t),e._zod.onattach.push(r=>{var s;(s=r._zod.bag).multipleOf??(s.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):l7(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),nI=Wt("$ZodCheckNumberFormat",(e,t)=>{Zo.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),s=r?"int":"number",[l,h]=f7[t.format];e._zod.onattach.push(C=>{const N=C._zod.bag;N.format=t.format,N.minimum=l,N.maximum=h,r&&(N.pattern=Y7)}),e._zod.check=C=>{const N=C.value;if(r){if(!Number.isInteger(N)){C.issues.push({expected:s,format:t.format,code:"invalid_type",continue:!1,input:N,inst:e});return}if(!Number.isSafeInteger(N)){N>0?C.issues.push({input:N,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):C.issues.push({input:N,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}N<l&&C.issues.push({origin:"number",input:N,code:"too_small",minimum:l,inclusive:!0,inst:e,continue:!t.abort}),N>h&&C.issues.push({origin:"number",input:N,code:"too_big",maximum:h,inst:e})}}),rI=Wt("$ZodCheckMaxLength",(e,t)=>{var r;Zo.init(e,t),(r=e._zod.def).when??(r.when=s=>{const l=s.value;return!jy(l)&&l.length!==void 0}),e._zod.onattach.push(s=>{const l=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<l&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const l=s.value;if(l.length<=t.maximum)return;const C=Iy(l);s.issues.push({origin:C,code:"too_big",maximum:t.maximum,inclusive:!0,input:l,inst:e,continue:!t.abort})}}),aI=Wt("$ZodCheckMinLength",(e,t)=>{var r;Zo.init(e,t),(r=e._zod.def).when??(r.when=s=>{const l=s.value;return!jy(l)&&l.length!==void 0}),e._zod.onattach.push(s=>{const l=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>l&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const l=s.value;if(l.length>=t.minimum)return;const C=Iy(l);s.issues.push({origin:C,code:"too_small",minimum:t.minimum,inclusive:!0,input:l,inst:e,continue:!t.abort})}}),sI=Wt("$ZodCheckLengthEquals",(e,t)=>{var r;Zo.init(e,t),(r=e._zod.def).when??(r.when=s=>{const l=s.value;return!jy(l)&&l.length!==void 0}),e._zod.onattach.push(s=>{const l=s._zod.bag;l.minimum=t.length,l.maximum=t.length,l.length=t.length}),e._zod.check=s=>{const l=s.value,h=l.length;if(h===t.length)return;const C=Iy(l),N=h>t.length;s.issues.push({origin:C,...N?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),lg=Wt("$ZodCheckStringFormat",(e,t)=>{var r,s;Zo.init(e,t),e._zod.onattach.push(l=>{const h=l._zod.bag;h.format=t.format,t.pattern&&(h.patterns??(h.patterns=new Set),h.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=l=>{t.pattern.lastIndex=0,!t.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:t.format,input:l.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),iI=Wt("$ZodCheckRegex",(e,t)=>{lg.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),oI=Wt("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=X7),lg.init(e,t)}),cI=Wt("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=eI),lg.init(e,t)}),lI=Wt("$ZodCheckIncludes",(e,t)=>{Zo.init(e,t);const r=lh(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=s,e._zod.onattach.push(l=>{const h=l._zod.bag;h.patterns??(h.patterns=new Set),h.patterns.add(s)}),e._zod.check=l=>{l.value.includes(t.includes,t.position)||l.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:l.value,inst:e,continue:!t.abort})}}),uI=Wt("$ZodCheckStartsWith",(e,t)=>{Zo.init(e,t);const r=new RegExp(`^${lh(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const l=s._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(r)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),dI=Wt("$ZodCheckEndsWith",(e,t)=>{Zo.init(e,t);const r=new RegExp(`.*${lh(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const l=s._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(r)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),hI=Wt("$ZodCheckOverwrite",(e,t)=>{Zo.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class pI{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(C=>C),l=Math.min(...s.map(C=>C.length-C.trimStart().length)),h=s.map(C=>C.slice(l)).map(C=>" ".repeat(this.indent*2)+C);for(const C of h)this.content.push(C)}compile(){const t=Function,r=this?.args,l=[...(this?.content??[""]).map(h=>`  ${h}`)];return new t(...r,l.join(`
`))}}const fI={major:4,minor:0,patch:15},_s=Wt("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=fI;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const l of s)for(const h of l._zod.onattach)h(e);if(s.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const l=(h,C,N)=>{let y=yp(h),u;for(const R of C){if(R._zod.def.when){if(!R._zod.def.when(h))continue}else if(y)continue;const v=h.issues.length,b=R._zod.check(h);if(b instanceof Promise&&N?.async===!1)throw new Ap;if(u||b instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await b,h.issues.length!==v&&(y||(y=yp(h,v)))});else{if(h.issues.length===v)continue;y||(y=yp(h,v))}}return u?u.then(()=>h):h};e._zod.run=(h,C)=>{const N=e._zod.parse(h,C);if(N instanceof Promise){if(C.async===!1)throw new Ap;return N.then(y=>l(y,s,C))}return l(N,s,C)}}e["~standard"]={validate:l=>{try{const h=E7(e,l);return h.success?{value:h.data}:{issues:h.error?.issues}}catch{return k7(e,l).then(C=>C.success?{value:C.data}:{issues:C.error?.issues})}},vendor:"zod",version:1}}),zy=Wt("$ZodString",(e,t)=>{_s.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??G7(e._zod.bag),e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Ts=Wt("$ZodStringFormat",(e,t)=>{lg.init(e,t),zy.init(e,t)}),mI=Wt("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=M7),Ts.init(e,t)}),gI=Wt("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=w1(s))}else t.pattern??(t.pattern=w1());Ts.init(e,t)}),vI=Wt("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=j7),Ts.init(e,t)}),yI=Wt("$ZodURL",(e,t)=>{Ts.init(e,t),e._zod.check=r=>{try{const s=r.value.trim(),l=new URL(s);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(l.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:V7.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(l.protocol.endsWith(":")?l.protocol.slice(0,-1):l.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=l.href:r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),_I=Wt("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=I7()),Ts.init(e,t)}),bI=Wt("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=A7),Ts.init(e,t)}),xI=Wt("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=C7),Ts.init(e,t)}),wI=Wt("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=T7),Ts.init(e,t)}),SI=Wt("$ZodULID",(e,t)=>{t.pattern??(t.pattern=P7),Ts.init(e,t)}),RI=Wt("$ZodXID",(e,t)=>{t.pattern??(t.pattern=N7),Ts.init(e,t)}),EI=Wt("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=D7),Ts.init(e,t)}),kI=Wt("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Z7(t)),Ts.init(e,t)}),CI=Wt("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=$7),Ts.init(e,t)}),TI=Wt("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=W7(t)),Ts.init(e,t)}),PI=Wt("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=O7),Ts.init(e,t)}),NI=Wt("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=B7),Ts.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv4"})}),DI=Wt("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=z7),Ts.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),AI=Wt("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=U7),Ts.init(e,t)}),OI=Wt("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=F7),Ts.init(e,t),e._zod.check=r=>{const[s,l]=r.value.split("/");try{if(!l)throw new Error;const h=Number(l);if(`${h}`!==l)throw new Error;if(h<0||h>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function tE(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const MI=Wt("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=H7),Ts.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{tE(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function jI(e){if(!YR.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return tE(r)}const LI=Wt("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=YR),Ts.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{jI(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),II=Wt("$ZodE164",(e,t)=>{t.pattern??(t.pattern=q7),Ts.init(e,t)});function BI(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const l=JSON.parse(atob(s));return!("typ"in l&&l?.typ!=="JWT"||!l.alg||t&&(!("alg"in l)||l.alg!==t))}catch{return!1}}const zI=Wt("$ZodJWT",(e,t)=>{Ts.init(e,t),e._zod.check=r=>{BI(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),nE=Wt("$ZodNumber",(e,t)=>{_s.init(e,t),e._zod.pattern=e._zod.bag.pattern??K7,e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const l=r.value;if(typeof l=="number"&&!Number.isNaN(l)&&Number.isFinite(l))return r;const h=typeof l=="number"?Number.isNaN(l)?"NaN":Number.isFinite(l)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:l,inst:e,...h?{received:h}:{}}),r}}),UI=Wt("$ZodNumber",(e,t)=>{nI.init(e,t),nE.init(e,t)}),FI=Wt("$ZodBoolean",(e,t)=>{_s.init(e,t),e._zod.pattern=Q7,e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=!!r.value}catch{}const l=r.value;return typeof l=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:l,inst:e}),r}}),HI=Wt("$ZodUndefined",(e,t)=>{_s.init(e,t),e._zod.pattern=J7,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(r,s)=>{const l=r.value;return typeof l>"u"||r.issues.push({expected:"undefined",code:"invalid_type",input:l,inst:e}),r}}),VI=Wt("$ZodAny",(e,t)=>{_s.init(e,t),e._zod.parse=r=>r}),qI=Wt("$ZodUnknown",(e,t)=>{_s.init(e,t),e._zod.parse=r=>r}),$I=Wt("$ZodNever",(e,t)=>{_s.init(e,t),e._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function S1(e,t,r){e.issues.length&&t.issues.push(...VR(r,e.issues)),t.value[r]=e.value}const WI=Wt("$ZodArray",(e,t)=>{_s.init(e,t),e._zod.parse=(r,s)=>{const l=r.value;if(!Array.isArray(l))return r.issues.push({expected:"array",code:"invalid_type",input:l,inst:e}),r;r.value=Array(l.length);const h=[];for(let C=0;C<l.length;C++){const N=l[C],y=t.element._zod.run({value:N,issues:[]},s);y instanceof Promise?h.push(y.then(u=>S1(u,r,C))):S1(y,r,C)}return h.length?Promise.all(h).then(()=>r):r}});function Wf(e,t,r,s){e.issues.length&&t.issues.push(...VR(r,e.issues)),e.value===void 0?r in s&&(t.value[r]=void 0):t.value[r]=e.value}const ZI=Wt("$ZodObject",(e,t)=>{_s.init(e,t);const r=FR(()=>{const v=Object.keys(t.shape);for(const E of v)if(!(t.shape[E]instanceof _s))throw new Error(`Invalid element at key "${E}": expected a Zod schema`);const b=p7(t.shape);return{shape:t.shape,keys:v,keySet:new Set(v),numKeys:v.length,optionalKeys:new Set(b)}});ps(e._zod,"propValues",()=>{const v=t.shape,b={};for(const E in v){const _=v[E]._zod;if(_.values){b[E]??(b[E]=new Set);for(const m of _.values)b[E].add(m)}}return b});const s=v=>{const b=new pI(["shape","payload","ctx"]),E=r.value,_=F=>{const g=x1(F);return`shape[${g}]._zod.run({ value: input[${g}], issues: [] }, ctx)`};b.write("const input = payload.value;");const m=Object.create(null);let k=0;for(const F of E.keys)m[F]=`key_${k++}`;b.write("const newResult = {}");for(const F of E.keys){const g=m[F],A=x1(F);b.write(`const ${g} = ${_(F)};`),b.write(`
        if (${g}.issues.length) {
          payload.issues = payload.issues.concat(${g}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${A}, ...iss.path] : [${A}]
          })));
        }
        
        if (${g}.value === undefined) {
          if (${A} in input) {
            newResult[${A}] = undefined;
          }
        } else {
          newResult[${A}] = ${g}.value;
        }
      `)}b.write("payload.value = newResult;"),b.write("return payload;");const w=b.compile();return(F,g)=>w(v,F,g)};let l;const h=b0,C=!UR.jitless,y=C&&d7.value,u=t.catchall;let R;e._zod.parse=(v,b)=>{R??(R=r.value);const E=v.value;if(!h(E))return v.issues.push({expected:"object",code:"invalid_type",input:E,inst:e}),v;const _=[];if(C&&y&&b?.async===!1&&b.jitless!==!0)l||(l=s(t.shape)),v=l(v,b);else{v.value={};const g=R.shape;for(const A of R.keys){const H=g[A]._zod.run({value:E[A],issues:[]},b);H instanceof Promise?_.push(H.then(D=>Wf(D,v,A,E))):Wf(H,v,A,E)}}if(!u)return _.length?Promise.all(_).then(()=>v):v;const m=[],k=R.keySet,w=u._zod,F=w.def.type;for(const g of Object.keys(E)){if(k.has(g))continue;if(F==="never"){m.push(g);continue}const A=w.run({value:E[g],issues:[]},b);A instanceof Promise?_.push(A.then(P=>Wf(P,v,g,E))):Wf(A,v,g,E)}return m.length&&v.issues.push({code:"unrecognized_keys",keys:m,input:E,inst:e}),_.length?Promise.all(_).then(()=>v):v}});function R1(e,t,r,s){for(const h of e)if(h.issues.length===0)return t.value=h.value,t;const l=e.filter(h=>!yp(h));return l.length===1?(t.value=l[0].value,l[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(h=>h.issues.map(C=>md(C,s,fd())))}),t)}const GI=Wt("$ZodUnion",(e,t)=>{_s.init(e,t),ps(e._zod,"optin",()=>t.options.some(l=>l._zod.optin==="optional")?"optional":void 0),ps(e._zod,"optout",()=>t.options.some(l=>l._zod.optout==="optional")?"optional":void 0),ps(e._zod,"values",()=>{if(t.options.every(l=>l._zod.values))return new Set(t.options.flatMap(l=>Array.from(l._zod.values)))}),ps(e._zod,"pattern",()=>{if(t.options.every(l=>l._zod.pattern)){const l=t.options.map(h=>h._zod.pattern);return new RegExp(`^(${l.map(h=>Ly(h.source)).join("|")})$`)}});const r=t.options.length===1,s=t.options[0]._zod.run;e._zod.parse=(l,h)=>{if(r)return s(l,h);let C=!1;const N=[];for(const y of t.options){const u=y._zod.run({value:l.value,issues:[]},h);if(u instanceof Promise)N.push(u),C=!0;else{if(u.issues.length===0)return u;N.push(u)}}return C?Promise.all(N).then(y=>R1(y,l,e,h)):R1(N,l,e,h)}}),YI=Wt("$ZodIntersection",(e,t)=>{_s.init(e,t),e._zod.parse=(r,s)=>{const l=r.value,h=t.left._zod.run({value:l,issues:[]},s),C=t.right._zod.run({value:l,issues:[]},s);return h instanceof Promise||C instanceof Promise?Promise.all([h,C]).then(([y,u])=>E1(r,y,u)):E1(r,h,C)}});function w0(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(x0(e)&&x0(t)){const r=Object.keys(t),s=Object.keys(e).filter(h=>r.indexOf(h)!==-1),l={...e,...t};for(const h of s){const C=w0(e[h],t[h]);if(!C.valid)return{valid:!1,mergeErrorPath:[h,...C.mergeErrorPath]};l[h]=C.data}return{valid:!0,data:l}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<e.length;s++){const l=e[s],h=t[s],C=w0(l,h);if(!C.valid)return{valid:!1,mergeErrorPath:[s,...C.mergeErrorPath]};r.push(C.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function E1(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),yp(e))return e;const s=w0(t.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const KI=Wt("$ZodEnum",(e,t)=>{_s.init(e,t);const r=c7(t.entries),s=new Set(r);e._zod.values=s,e._zod.pattern=new RegExp(`^(${r.filter(l=>h7.has(typeof l)).map(l=>typeof l=="string"?lh(l):l.toString()).join("|")})$`),e._zod.parse=(l,h)=>{const C=l.value;return s.has(C)||l.issues.push({code:"invalid_value",values:r,input:C,inst:e}),l}}),QI=Wt("$ZodLiteral",(e,t)=>{if(_s.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?lh(r):r?lh(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,s)=>{const l=r.value;return e._zod.values.has(l)||r.issues.push({code:"invalid_value",values:t.values,input:l,inst:e}),r}}),JI=Wt("$ZodTransform",(e,t)=>{_s.init(e,t),e._zod.parse=(r,s)=>{const l=t.transform(r.value,r);if(s.async)return(l instanceof Promise?l:Promise.resolve(l)).then(C=>(r.value=C,r));if(l instanceof Promise)throw new Ap;return r.value=l,r}});function k1(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const XI=Wt("$ZodOptional",(e,t)=>{_s.init(e,t),e._zod.optin="optional",e._zod.optout="optional",ps(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),ps(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ly(r.source)})?$`):void 0}),e._zod.parse=(r,s)=>{if(t.innerType._zod.optin==="optional"){const l=t.innerType._zod.run(r,s);return l instanceof Promise?l.then(h=>k1(h,r.value)):k1(l,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,s)}}),e5=Wt("$ZodNullable",(e,t)=>{_s.init(e,t),ps(e._zod,"optin",()=>t.innerType._zod.optin),ps(e._zod,"optout",()=>t.innerType._zod.optout),ps(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ly(r.source)}|null)$`):void 0}),ps(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,s)=>r.value===null?r:t.innerType._zod.run(r,s)}),t5=Wt("$ZodDefault",(e,t)=>{_s.init(e,t),e._zod.optin="optional",ps(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const l=t.innerType._zod.run(r,s);return l instanceof Promise?l.then(h=>C1(h,t)):C1(l,t)}});function C1(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const n5=Wt("$ZodPrefault",(e,t)=>{_s.init(e,t),e._zod.optin="optional",ps(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,s))}),r5=Wt("$ZodNonOptional",(e,t)=>{_s.init(e,t),ps(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),e._zod.parse=(r,s)=>{const l=t.innerType._zod.run(r,s);return l instanceof Promise?l.then(h=>T1(h,e)):T1(l,e)}});function T1(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const a5=Wt("$ZodCatch",(e,t)=>{_s.init(e,t),ps(e._zod,"optin",()=>t.innerType._zod.optin),ps(e._zod,"optout",()=>t.innerType._zod.optout),ps(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{const l=t.innerType._zod.run(r,s);return l instanceof Promise?l.then(h=>(r.value=h.value,h.issues.length&&(r.value=t.catchValue({...r,error:{issues:h.issues.map(C=>md(C,s,fd()))},input:r.value}),r.issues=[]),r)):(r.value=l.value,l.issues.length&&(r.value=t.catchValue({...r,error:{issues:l.issues.map(h=>md(h,s,fd()))},input:r.value}),r.issues=[]),r)}}),s5=Wt("$ZodPipe",(e,t)=>{_s.init(e,t),ps(e._zod,"values",()=>t.in._zod.values),ps(e._zod,"optin",()=>t.in._zod.optin),ps(e._zod,"optout",()=>t.out._zod.optout),ps(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,s)=>{const l=t.in._zod.run(r,s);return l instanceof Promise?l.then(h=>P1(h,t,s)):P1(l,t,s)}});function P1(e,t,r){return e.issues.length?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const i5=Wt("$ZodReadonly",(e,t)=>{_s.init(e,t),ps(e._zod,"propValues",()=>t.innerType._zod.propValues),ps(e._zod,"values",()=>t.innerType._zod.values),ps(e._zod,"optin",()=>t.innerType._zod.optin),ps(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,s)=>{const l=t.innerType._zod.run(r,s);return l instanceof Promise?l.then(N1):N1(l)}});function N1(e){return e.value=Object.freeze(e.value),e}const o5=Wt("$ZodCustom",(e,t)=>{Zo.init(e,t),_s.init(e,t),e._zod.parse=(r,s)=>r,e._zod.check=r=>{const s=r.value,l=t.fn(s);if(l instanceof Promise)return l.then(h=>D1(h,r,s,e));D1(l,r,s,e)}});function D1(e,t,r,s){if(!e){const l={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(l.params=s._zod.def.params),t.issues.push(Op(l))}}class c5{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const s=r[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const s={...this.get(r)??{}};delete s.id;const l={...s,...this._map.get(t)};return Object.keys(l).length?l:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function l5(){return new c5}const Zf=l5();function u5(e,t){return new e({type:"string",...kr(t)})}function d5(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...kr(t)})}function A1(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...kr(t)})}function h5(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...kr(t)})}function p5(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...kr(t)})}function f5(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...kr(t)})}function m5(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...kr(t)})}function g5(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...kr(t)})}function v5(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...kr(t)})}function y5(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...kr(t)})}function _5(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...kr(t)})}function b5(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...kr(t)})}function x5(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...kr(t)})}function w5(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...kr(t)})}function S5(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...kr(t)})}function R5(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...kr(t)})}function E5(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...kr(t)})}function k5(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...kr(t)})}function C5(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...kr(t)})}function T5(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...kr(t)})}function P5(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...kr(t)})}function N5(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...kr(t)})}function D5(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...kr(t)})}function A5(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...kr(t)})}function O5(e,t){return new e({type:"string",format:"date",check:"string_format",...kr(t)})}function M5(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...kr(t)})}function j5(e,t){return new e({type:"string",format:"duration",check:"string_format",...kr(t)})}function L5(e,t){return new e({type:"number",coerce:!0,checks:[],...kr(t)})}function I5(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...kr(t)})}function B5(e,t){return new e({type:"boolean",...kr(t)})}function z5(e,t){return new e({type:"undefined",...kr(t)})}function U5(e){return new e({type:"any"})}function F5(e){return new e({type:"unknown"})}function H5(e,t){return new e({type:"never",...kr(t)})}function O1(e,t){return new XR({check:"less_than",...kr(t),value:e,inclusive:!1})}function Hv(e,t){return new XR({check:"less_than",...kr(t),value:e,inclusive:!0})}function M1(e,t){return new eE({check:"greater_than",...kr(t),value:e,inclusive:!1})}function Vv(e,t){return new eE({check:"greater_than",...kr(t),value:e,inclusive:!0})}function j1(e,t){return new tI({check:"multiple_of",...kr(t),value:e})}function rE(e,t){return new rI({check:"max_length",...kr(t),maximum:e})}function Tm(e,t){return new aI({check:"min_length",...kr(t),minimum:e})}function aE(e,t){return new sI({check:"length_equals",...kr(t),length:e})}function V5(e,t){return new iI({check:"string_format",format:"regex",...kr(t),pattern:e})}function q5(e){return new oI({check:"string_format",format:"lowercase",...kr(e)})}function $5(e){return new cI({check:"string_format",format:"uppercase",...kr(e)})}function W5(e,t){return new lI({check:"string_format",format:"includes",...kr(t),includes:e})}function Z5(e,t){return new uI({check:"string_format",format:"starts_with",...kr(t),prefix:e})}function G5(e,t){return new dI({check:"string_format",format:"ends_with",...kr(t),suffix:e})}function Gp(e){return new hI({check:"overwrite",tx:e})}function Y5(e){return Gp(t=>t.normalize(e))}function K5(){return Gp(e=>e.trim())}function Q5(){return Gp(e=>e.toLowerCase())}function J5(){return Gp(e=>e.toUpperCase())}function X5(e,t,r){return new e({type:"array",element:t,...kr(r)})}function e9(e,t,r){return new e({type:"custom",check:"custom",fn:t,...kr(r)})}function t9(e){const t=n9(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(Op(s,r.value,t._zod.def));else{const l=s;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=r.value),l.inst??(l.inst=t),l.continue??(l.continue=!t._zod.def.abort),r.issues.push(Op(l))}},e(r.value,r)));return t}function n9(e,t){const r=new Zo({check:"custom",...kr(t)});return r._zod.check=e,r}function L1(e,t){try{var r=e()}catch(s){return t(s)}return r&&r.then?r.then(void 0,t):r}function r9(e,t){for(var r={};e.length;){var s=e[0],l=s.code,h=s.message,C=s.path.join(".");if(!r[C])if("unionErrors"in s){var N=s.unionErrors[0].errors[0];r[C]={message:N.message,type:N.code}}else r[C]={message:h,type:l};if("unionErrors"in s&&s.unionErrors.forEach(function(R){return R.errors.forEach(function(v){return e.push(v)})}),t){var y=r[C].types,u=y&&y[s.code];r[C]=Ay(C,t,r,l,u?[].concat(u,s.message):s.message)}e.shift()}return r}function a9(e,t){for(var r={};e.length;){var s=e[0],l=s.code,h=s.message,C=s.path.join(".");if(!r[C])if(s.code==="invalid_union"&&s.errors.length>0){var N=s.errors[0][0];r[C]={message:N.message,type:N.code}}else r[C]={message:h,type:l};if(s.code==="invalid_union"&&s.errors.forEach(function(R){return R.forEach(function(v){return e.push(v)})}),t){var y=r[C].types,u=y&&y[s.code];r[C]=Ay(C,t,r,l,u?[].concat(u,s.message):s.message)}e.shift()}return r}function kl(e,t,r){if(r===void 0&&(r={}),function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def}(e))return function(s,l,h){try{return Promise.resolve(L1(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(C){return h.shouldUseNativeValidation&&y0({},h),{errors:{},values:r.raw?Object.assign({},s):C}})},function(C){if(function(N){return Array.isArray(N?.issues)}(C))return{values:{},errors:y1(r9(C.errors,!h.shouldUseNativeValidation&&h.criteriaMode==="all"),h)};throw C}))}catch(C){return Promise.reject(C)}};if(function(s){return"_zod"in s&&typeof s._zod=="object"}(e))return function(s,l,h){try{return Promise.resolve(L1(function(){return Promise.resolve((r.mode==="sync"?S7:R7)(e,s,t)).then(function(C){return h.shouldUseNativeValidation&&y0({},h),{errors:{},values:r.raw?Object.assign({},s):C}})},function(C){if(function(N){return N instanceof By}(C))return{values:{},errors:y1(a9(C.issues,!h.shouldUseNativeValidation&&h.criteriaMode==="all"),h)};throw C}))}catch(C){return Promise.reject(C)}};throw new Error("Invalid input: not a Zod schema")}const s9=Wt("ZodISODateTime",(e,t)=>{kI.init(e,t),Us.init(e,t)});function i9(e){return A5(s9,e)}const o9=Wt("ZodISODate",(e,t)=>{CI.init(e,t),Us.init(e,t)});function c9(e){return O5(o9,e)}const l9=Wt("ZodISOTime",(e,t)=>{TI.init(e,t),Us.init(e,t)});function u9(e){return M5(l9,e)}const d9=Wt("ZodISODuration",(e,t)=>{PI.init(e,t),Us.init(e,t)});function h9(e){return j5(d9,e)}const p9=(e,t)=>{By.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>w7(e,r)},flatten:{value:r=>x7(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,_0,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,_0,2)}},isEmpty:{get(){return e.issues.length===0}}})},ug=Wt("ZodError",p9,{Parent:Error}),f9=$R(ug),m9=WR(ug),g9=ZR(ug),v9=GR(ug),zs=Wt("ZodType",(e,t)=>(_s.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),e.clone=(r,s)=>yd(e,r,s),e.brand=()=>e,e.register=(r,s)=>(r.add(e,s),e),e.parse=(r,s)=>f9(e,r,s,{callee:e.parse}),e.safeParse=(r,s)=>g9(e,r,s),e.parseAsync=async(r,s)=>m9(e,r,s,{callee:e.parseAsync}),e.safeParseAsync=async(r,s)=>v9(e,r,s),e.spa=e.safeParseAsync,e.refine=(r,s)=>e.check(dB(r,s)),e.superRefine=r=>e.check(hB(r)),e.overwrite=r=>e.check(Gp(r)),e.optional=()=>F1(e),e.nullable=()=>H1(e),e.nullish=()=>F1(H1(e)),e.nonoptional=r=>aB(e,r),e.array=()=>oE(e),e.or=r=>Z9([e,r]),e.and=r=>Y9(e,r),e.transform=r=>V1(e,J9(r)),e.default=r=>tB(e,r),e.prefault=r=>rB(e,r),e.catch=r=>iB(e,r),e.pipe=r=>V1(e,r),e.readonly=()=>lB(e),e.describe=r=>{const s=e.clone();return Zf.add(s,{description:r}),s},Object.defineProperty(e,"description",{get(){return Zf.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Zf.get(e);const s=e.clone();return Zf.add(s,r[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),sE=Wt("_ZodString",(e,t)=>{zy.init(e,t),zs.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...s)=>e.check(V5(...s)),e.includes=(...s)=>e.check(W5(...s)),e.startsWith=(...s)=>e.check(Z5(...s)),e.endsWith=(...s)=>e.check(G5(...s)),e.min=(...s)=>e.check(Tm(...s)),e.max=(...s)=>e.check(rE(...s)),e.length=(...s)=>e.check(aE(...s)),e.nonempty=(...s)=>e.check(Tm(1,...s)),e.lowercase=s=>e.check(q5(s)),e.uppercase=s=>e.check($5(s)),e.trim=()=>e.check(K5()),e.normalize=(...s)=>e.check(Y5(...s)),e.toLowerCase=()=>e.check(Q5()),e.toUpperCase=()=>e.check(J5())}),y9=Wt("ZodString",(e,t)=>{zy.init(e,t),sE.init(e,t),e.email=r=>e.check(d5(_9,r)),e.url=r=>e.check(g5(b9,r)),e.jwt=r=>e.check(D5(j9,r)),e.emoji=r=>e.check(v5(x9,r)),e.guid=r=>e.check(A1(I1,r)),e.uuid=r=>e.check(h5(Gf,r)),e.uuidv4=r=>e.check(p5(Gf,r)),e.uuidv6=r=>e.check(f5(Gf,r)),e.uuidv7=r=>e.check(m5(Gf,r)),e.nanoid=r=>e.check(y5(w9,r)),e.guid=r=>e.check(A1(I1,r)),e.cuid=r=>e.check(_5(S9,r)),e.cuid2=r=>e.check(b5(R9,r)),e.ulid=r=>e.check(x5(E9,r)),e.base64=r=>e.check(T5(A9,r)),e.base64url=r=>e.check(P5(O9,r)),e.xid=r=>e.check(w5(k9,r)),e.ksuid=r=>e.check(S5(C9,r)),e.ipv4=r=>e.check(R5(T9,r)),e.ipv6=r=>e.check(E5(P9,r)),e.cidrv4=r=>e.check(k5(N9,r)),e.cidrv6=r=>e.check(C5(D9,r)),e.e164=r=>e.check(N5(M9,r)),e.datetime=r=>e.check(i9(r)),e.date=r=>e.check(c9(r)),e.time=r=>e.check(u9(r)),e.duration=r=>e.check(h9(r))});function Jr(e){return u5(y9,e)}const Us=Wt("ZodStringFormat",(e,t)=>{Ts.init(e,t),sE.init(e,t)}),_9=Wt("ZodEmail",(e,t)=>{vI.init(e,t),Us.init(e,t)}),I1=Wt("ZodGUID",(e,t)=>{mI.init(e,t),Us.init(e,t)}),Gf=Wt("ZodUUID",(e,t)=>{gI.init(e,t),Us.init(e,t)}),b9=Wt("ZodURL",(e,t)=>{yI.init(e,t),Us.init(e,t)}),x9=Wt("ZodEmoji",(e,t)=>{_I.init(e,t),Us.init(e,t)}),w9=Wt("ZodNanoID",(e,t)=>{bI.init(e,t),Us.init(e,t)}),S9=Wt("ZodCUID",(e,t)=>{xI.init(e,t),Us.init(e,t)}),R9=Wt("ZodCUID2",(e,t)=>{wI.init(e,t),Us.init(e,t)}),E9=Wt("ZodULID",(e,t)=>{SI.init(e,t),Us.init(e,t)}),k9=Wt("ZodXID",(e,t)=>{RI.init(e,t),Us.init(e,t)}),C9=Wt("ZodKSUID",(e,t)=>{EI.init(e,t),Us.init(e,t)}),T9=Wt("ZodIPv4",(e,t)=>{NI.init(e,t),Us.init(e,t)}),P9=Wt("ZodIPv6",(e,t)=>{DI.init(e,t),Us.init(e,t)}),N9=Wt("ZodCIDRv4",(e,t)=>{AI.init(e,t),Us.init(e,t)}),D9=Wt("ZodCIDRv6",(e,t)=>{OI.init(e,t),Us.init(e,t)}),A9=Wt("ZodBase64",(e,t)=>{MI.init(e,t),Us.init(e,t)}),O9=Wt("ZodBase64URL",(e,t)=>{LI.init(e,t),Us.init(e,t)}),M9=Wt("ZodE164",(e,t)=>{II.init(e,t),Us.init(e,t)}),j9=Wt("ZodJWT",(e,t)=>{zI.init(e,t),Us.init(e,t)}),iE=Wt("ZodNumber",(e,t)=>{nE.init(e,t),zs.init(e,t),e.gt=(s,l)=>e.check(M1(s,l)),e.gte=(s,l)=>e.check(Vv(s,l)),e.min=(s,l)=>e.check(Vv(s,l)),e.lt=(s,l)=>e.check(O1(s,l)),e.lte=(s,l)=>e.check(Hv(s,l)),e.max=(s,l)=>e.check(Hv(s,l)),e.int=s=>e.check(B1(s)),e.safe=s=>e.check(B1(s)),e.positive=s=>e.check(M1(0,s)),e.nonnegative=s=>e.check(Vv(0,s)),e.negative=s=>e.check(O1(0,s)),e.nonpositive=s=>e.check(Hv(0,s)),e.multipleOf=(s,l)=>e.check(j1(s,l)),e.step=(s,l)=>e.check(j1(s,l)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null}),L9=Wt("ZodNumberFormat",(e,t)=>{UI.init(e,t),iE.init(e,t)});function B1(e){return I5(L9,e)}const I9=Wt("ZodBoolean",(e,t)=>{FI.init(e,t),zs.init(e,t)});function rh(e){return B5(I9,e)}const B9=Wt("ZodUndefined",(e,t)=>{HI.init(e,t),zs.init(e,t)});function z9(e){return z5(B9,e)}const U9=Wt("ZodAny",(e,t)=>{VI.init(e,t),zs.init(e,t)});function z1(){return U5(U9)}const F9=Wt("ZodUnknown",(e,t)=>{qI.init(e,t),zs.init(e,t)});function U1(){return F5(F9)}const H9=Wt("ZodNever",(e,t)=>{$I.init(e,t),zs.init(e,t)});function V9(e){return H5(H9,e)}const q9=Wt("ZodArray",(e,t)=>{WI.init(e,t),zs.init(e,t),e.element=t.element,e.min=(r,s)=>e.check(Tm(r,s)),e.nonempty=r=>e.check(Tm(1,r)),e.max=(r,s)=>e.check(rE(r,s)),e.length=(r,s)=>e.check(aE(r,s)),e.unwrap=()=>e.element});function oE(e,t){return X5(q9,e,t)}const $9=Wt("ZodObject",(e,t)=>{ZI.init(e,t),zs.init(e,t),ps(e,"shape",()=>t.shape),e.keyof=()=>Pm(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:U1()}),e.loose=()=>e.clone({...e._zod.def,catchall:U1()}),e.strict=()=>e.clone({...e._zod.def,catchall:V9()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>v7(e,r),e.merge=r=>y7(e,r),e.pick=r=>m7(e,r),e.omit=r=>g7(e,r),e.partial=(...r)=>_7(lE,e,r[0]),e.required=(...r)=>b7(uE,e,r[0])});function Tc(e,t){const r={type:"object",get shape(){return vd(this,"shape",e?u7(e):{}),this.shape},...kr(t)};return new $9(r)}const W9=Wt("ZodUnion",(e,t)=>{GI.init(e,t),zs.init(e,t),e.options=t.options});function Z9(e,t){return new W9({type:"union",options:e,...kr(t)})}const G9=Wt("ZodIntersection",(e,t)=>{YI.init(e,t),zs.init(e,t)});function Y9(e,t){return new G9({type:"intersection",left:e,right:t})}const S0=Wt("ZodEnum",(e,t)=>{KI.init(e,t),zs.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(s,l)=>{const h={};for(const C of s)if(r.has(C))h[C]=t.entries[C];else throw new Error(`Key ${C} not found in enum`);return new S0({...t,checks:[],...kr(l),entries:h})},e.exclude=(s,l)=>{const h={...t.entries};for(const C of s)if(r.has(C))delete h[C];else throw new Error(`Key ${C} not found in enum`);return new S0({...t,checks:[],...kr(l),entries:h})}});function Pm(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new S0({type:"enum",entries:r,...kr(t)})}const K9=Wt("ZodLiteral",(e,t)=>{QI.init(e,t),zs.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function cE(e,t){return new K9({type:"literal",values:Array.isArray(e)?e:[e],...kr(t)})}const Q9=Wt("ZodTransform",(e,t)=>{JI.init(e,t),zs.init(e,t),e._zod.parse=(r,s)=>{r.addIssue=h=>{if(typeof h=="string")r.issues.push(Op(h,r.value,t));else{const C=h;C.fatal&&(C.continue=!1),C.code??(C.code="custom"),C.input??(C.input=r.value),C.inst??(C.inst=e),r.issues.push(Op(C))}};const l=t.transform(r.value,r);return l instanceof Promise?l.then(h=>(r.value=h,r)):(r.value=l,r)}});function J9(e){return new Q9({type:"transform",transform:e})}const lE=Wt("ZodOptional",(e,t)=>{XI.init(e,t),zs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function F1(e){return new lE({type:"optional",innerType:e})}const X9=Wt("ZodNullable",(e,t)=>{e5.init(e,t),zs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function H1(e){return new X9({type:"nullable",innerType:e})}const eB=Wt("ZodDefault",(e,t)=>{t5.init(e,t),zs.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function tB(e,t){return new eB({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const nB=Wt("ZodPrefault",(e,t)=>{n5.init(e,t),zs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function rB(e,t){return new nB({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const uE=Wt("ZodNonOptional",(e,t)=>{r5.init(e,t),zs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function aB(e,t){return new uE({type:"nonoptional",innerType:e,...kr(t)})}const sB=Wt("ZodCatch",(e,t)=>{a5.init(e,t),zs.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function iB(e,t){return new sB({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const oB=Wt("ZodPipe",(e,t)=>{s5.init(e,t),zs.init(e,t),e.in=t.in,e.out=t.out});function V1(e,t){return new oB({type:"pipe",in:e,out:t})}const cB=Wt("ZodReadonly",(e,t)=>{i5.init(e,t),zs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lB(e){return new cB({type:"readonly",innerType:e})}const uB=Wt("ZodCustom",(e,t)=>{o5.init(e,t),zs.init(e,t)});function dB(e,t={}){return e9(uB,e,t)}function hB(e){return t9(e)}function _p(e){return L5(iE,e)}const pB=Jr().refine(e=>zw(e),{message:"CNIC must be in format: 12345-1234567-1"}),fB=/^[0-9+-\s()]+$/,mB=/^[A-Z0-9]+$/,gB=Tc({name:Jr().min(1,"Name is required").min(2,"Name must be at least 2 characters long").max(100,"Name cannot exceed 100 characters").trim(),email:Jr().min(1,"Email is required").email("Please provide a valid email address").trim(),speciality:oE(Jr()).min(1,"At least one specialty is required").max(5,"Maximum 5 specialties allowed"),phone:Jr().min(1,"Phone number is required").regex(fB,"Please provide a valid phone number").length(11,"Phone number must be exactly 11 digits"),gender:Pm(["Male","Female","Other"],{required_error:"Gender is required",invalid_type_error:"Gender must be either Male, Female, or Other"}),religion:Jr().min(1,"Religion is required").trim(),pmdcNumber:Jr().min(1,"PMDC number is required").regex(mB,"PMDC number must contain only uppercase letters and numbers").min(5,"PMDC number must be at least 5 characters long").max(20,"PMDC number cannot exceed 20 characters").trim(),mainDegree:Jr().min(1,"Main degree is required").min(2,"Main degree must be at least 2 characters long").max(100,"Main degree cannot exceed 100 characters").trim(),fullAddress:Jr().min(1,"Full address is required").min(10,"Full address must be at least 10 characters long").max(500,"Full address cannot exceed 500 characters").trim(),city:Jr().max(100,"City name cannot exceed 100 characters").optional().or(cE("")),hospital:Jr().min(1,"Hospital is required").min(2,"Hospital must be at least 2 characters long").max(200,"Hospital cannot exceed 200 characters").trim(),experience:_p({required_error:"Experience is required",invalid_type_error:"Experience must be a number"}).int("Experience must be a whole number").min(0,"Experience cannot be negative").max(50,"Experience cannot exceed 50 years"),fee:_p({required_error:"Fee is required",invalid_type_error:"Fee must be a number"}).min(0,"Fee cannot be negative").max(1e5,"Fee cannot exceed 100,000"),cnic:pB,password:Jr().min(1,"Password is required").min(6,"Password must be at least 6 characters long"),confirmPassword:Jr().min(1,"Confirm password is required"),agreement:rh().refine(e=>e===!0,"You must confirm before submitting"),hospitalVerified:rh().default(!1),hospitalId:Jr().nullable().optional().or(z9())}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),vB={name:"",email:"",speciality:[],phone:"",gender:void 0,religion:"",pmdcNumber:"",mainDegree:"",fullAddress:"",city:"",hospital:"",experience:void 0,cnic:"",password:"",confirmPassword:"",agreement:!1,hospitalVerified:!1,hospitalId:void 0,fee:void 0},yB=Jr().refine(e=>zw(e),{message:"CNIC must be in format: 12345-1234567-1"}),_B=/^03\d{9}$/,bB=Tc({name:Jr().min(1,"Hospital name is required").min(2,"Hospital name must be at least 2 characters long").max(100,"Hospital name cannot exceed 100 characters").trim(),email:Jr().min(1,"Email is required").email("Please provide a valid email address").trim(),description:Jr().min(10,"Description must be at least 10 characters long").max(500,"Description cannot exceed 500 characters").optional().or(cE("")),hospitalType:Pm(["Public","Private","Semi-Private","Military","Charity"],{required_error:"Hospital type is required",invalid_type_error:"Please select a valid hospital type"}),category:Pm(["General","Specialized","Teaching","Research","Emergency"],{required_error:"Category is required",invalid_type_error:"Please select a valid category"}),licenseNumber:Jr().min(1,"License number is required").min(5,"License number must be at least 5 characters long").max(50,"License number cannot exceed 50 characters").trim(),establishedYear:_p({required_error:"Established year is required",invalid_type_error:"Established year must be a number"}).int("Established year must be a whole number").min(1900,"Established year cannot be before 1900").max(new Date().getFullYear(),"Established year cannot be in the future"),phone:Jr().min(1,"Phone number is required").regex(_B,"Phone number must be in format 03XXXXXXXXX").trim(),address:Jr().min(1,"Address is required").min(10,"Address must be at least 10 characters long").max(500,"Address cannot exceed 500 characters").trim(),city:Jr().min(1,"City is required").min(2,"City name must be at least 2 characters long").max(50,"City name cannot exceed 50 characters").trim(),totalBeds:_p({required_error:"Total beds is required",invalid_type_error:"Total beds must be a number"}).int("Total beds must be a whole number").min(1,"Total beds must be at least 1"),operationTheaters:_p({required_error:"Operation theaters is required",invalid_type_error:"Operation theaters must be a number"}).int("Operation theaters must be a whole number").min(0,"Operation theaters cannot be negative"),cnic:yB,password:Jr().min(1,"Password is required").min(6,"Password must be at least 6 characters long").max(50,"Password cannot exceed 50 characters"),confirmPassword:Jr().min(1,"Confirm password is required"),services:Tc({emergencyServices:rh().default(!1),ambulanceServices:rh().default(!1),icuServices:rh().default(!1)}).default({emergencyServices:!1,ambulanceServices:!1,icuServices:!1}),image:z1().refine(e=>e instanceof File,"Hospital image is required").refine(e=>e&&e.size<=5e6,"Image size should be less than 5MB").refine(e=>e&&["image/jpeg","image/png","image/jpg"].includes(e.type),"Only JPEG, PNG and JPG images are allowed"),documents:z1().refine(e=>e instanceof File,"Hospital documents is required").refine(e=>e&&e.size<=5e6,"Image size should be less than 5MB").refine(e=>e&&["image/jpeg","image/png","image/jpg"].includes(e.type),"Only JPEG, PNG and JPG images are allowed"),agreement:rh().refine(e=>e===!0,"You must confirm before submitting")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),xB={name:"",email:"",description:"",hospitalType:void 0,category:void 0,licenseNumber:"",establishedYear:void 0,phone:"",address:"",city:"",totalBeds:void 0,operationTheaters:void 0,cnic:"",password:"",confirmPassword:"",image:null,documents:null},wB=Tc({name:Jr().min(3,"Name must be at least 3 characters"),email:Jr().email("Invalid email address"),cnic:Jr().refine(e=>/^\d{5}-\d{7}-\d{1}$/.test(e),{message:"CNIC must be in xxxxx-xxxxxxx-x format"}),password:Jr().min(6,"Password must be at least 6 characters")});Tc({email:Jr().email("Invalid email address"),password:Jr().min(1,"Password is required")});Tc({cnic:Jr().refine(e=>/^\d{5}-\d{7}-\d{1}$/.test(e),{message:"CNIC must be in xxxxx-xxxxxxx-x format"}),password:Jr().min(1,"Password is required")});const dE=Tc({identifier:Jr().min(1,"Email or PMDC is required").trim(),password:Jr().min(6,"Password must be at least 6 characters long")}),SB=()=>{const[e,t]=Z.useState("email"),{signIn:r,loading:s}=si(),[l,h]=Z.useState(!1),[C,N]=Z.useState(""),y=as(),{register:u,handleSubmit:R,formState:{errors:v},reset:b}=El({resolver:kl(dE),mode:"onChange"}),E=async _=>{const m=await r({identifier:_.identifier,password:_.password},y);m&&(h(!0),N(m)),b()};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:"Sign In to your account"}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>t("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="email"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Email Login"}),o.jsx("button",{onClick:()=>t("pmdc"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="pmdc"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"CNIC Login"})]})}),o.jsxs("form",{className:"space-y-6",onSubmit:R(E),children:[o.jsx(Yr,{label:e==="email"?"Email Address":"PMDC Number",type:"text",name:"identifier",...u("identifier"),error:v.identifier?.message,placeholder:e==="email"?"Enter email":"Enter PMDC number",autoComplete:"username"}),o.jsx(Yr,{label:"Password",type:"password",name:"password",...u("password"),error:v.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),o.jsx("button",{type:"submit",disabled:s,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:s?"Signing In...":`Sign In with ${e==="email"?"Email":"CNIC"}`})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("span",{className:"text-sm text-emerald-700",children:"Don't have an account?"}),o.jsx(Za,{to:"/register",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Register"})]}),o.jsx("div",{className:"text-center",children:o.jsx(Za,{to:"/forgot-password?type=auth",className:"ml-1 text-emerald-600 hover:underline font-medium",children:"Forgot Password"})})]}),o.jsx(Hp,{open:l,onOpenChange:h,title:"Login Status",description:C,children:o.jsx("button",{className:"mt-4 w-full rounded-lg bg-emerald-600 px-6 py-2 text-white font-semibold shadow-md hover:bg-emerald-700 transition duration-300 ease-in-out active:scale-95",onClick:()=>y("/doctor/upload-documents"),children:"Upload Documents"})})]})},RB=()=>{const e=as(),{signUpFun:t,loading:r}=si(),{register:s,handleSubmit:l,setValue:h,formState:{errors:C}}=El({resolver:kl(wB),defaultValues:{name:"",email:"",cnic:"",password:""}}),N=u=>{h("cnic",Um(u.target.value))},y=async u=>{try{await t(u,e)}catch(R){gt.error(R.response.data.data)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:"Create your account"}),o.jsxs("form",{className:"space-y-6",onSubmit:l(y),children:[o.jsx(Yr,{label:"Name",type:"text",...s("name"),error:C.name?.message,required:!0}),o.jsx(Yr,{label:"Email address",type:"email",...s("email"),error:C.email?.message,required:!0}),o.jsx(Yr,{label:"CNIC",...s("cnic"),error:C.cnic?.message,onChange:N,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15}),o.jsx(Yr,{label:"Password",type:"password",...s("password"),error:C.password?.message,required:!0}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md bg-emerald-600 text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Creating Account...":"Register"})})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("span",{className:"text-sm text-emerald-700",children:"Already have an account?"}),o.jsx(Za,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},to:"/login",className:"ml-1 text-emerald-600 hover:underline font-medium",children:"Login"})]})]})})},EB=()=>{const[e,t]=Z.useState("email"),{DoctorLogin:r,loading:s}=fs(),[l,h]=Z.useState(!1),[C,N]=Z.useState(""),y=as(),{register:u,handleSubmit:R,formState:{errors:v},reset:b}=El({resolver:kl(dE),mode:"onChange"}),E=async _=>{const m=await r({identifier:_.identifier,password:_.password},y);m&&(h(!0),N(m)),b()};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:"Login as a Doctor"}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>t("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="email"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Email Login"}),o.jsx("button",{onClick:()=>t("pmdc"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="pmdc"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"PMDC Login"})]})}),o.jsxs("form",{className:"space-y-6",onSubmit:R(E),children:[o.jsx(Yr,{label:e==="email"?"Email Address":"PMDC Number",type:"text",name:"identifier",...u("identifier"),error:v.identifier?.message,placeholder:e==="email"?"Enter email":"Enter PMDC number",autoComplete:"username"}),o.jsx(Yr,{label:"Password",type:"password",name:"password",...u("password"),error:v.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),o.jsx("button",{type:"submit",disabled:s,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:s?"Signing In...":`Sign In with ${e==="email"?"Email":"PMDC"}`})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("span",{className:"text-sm text-emerald-700",children:"Don't have an account?"}),o.jsx(Za,{to:"/register/doctor",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Register"})]}),o.jsx("div",{className:"text-center",children:o.jsx(Za,{className:"ml-1 text-emerald-600 hover:underline font-medium",to:"/forgot-password?type=doctor",children:"Forgot Password"})})]}),o.jsx(Hp,{open:l,onOpenChange:h,title:"Login Status",description:C,children:o.jsx("button",{className:"mt-4 w-full rounded-lg bg-emerald-600 px-6 py-2 text-white font-semibold shadow-md hover:bg-emerald-700 transition duration-300 ease-in-out active:scale-95",onClick:()=>y("/doctor/upload-documents"),children:"Upload Documents"})})]})},hE=({values:e={},errors:t={},onInputChange:r,onDropdownChange:s,onSpecialtyChange:l,onHospitalChange:h,onHospitalVerification:C,onCnicChange:N,options:y={},include:u={}})=>{const{allPublicHospital:R}=to(),v={degreeOptions:y.degreeOptions||w4,genders:y.genders||b4,religions:y.religions||x4,hospitals:R?.map(E=>E.name).filter((E,_,m)=>m.indexOf(E)===_)||y.hospitals||R4},b={password:u.password!==!1,confirmPassword:u.confirmPassword!==!1,agreement:u.agreement!==!1,city:u.city!==!1,hospital:u.hospital!==!1};return o.jsxs(o.Fragment,{children:[o.jsx(Yr,{label:"Full Name",name:"name",value:e.name||"",onChange:r?.("name"),error:t.name?.message||t.name,required:!0}),o.jsx(Yr,{label:"Email",type:"email",name:"email",value:e.email||"",onChange:r?.("email"),error:t.email?.message||t.email,required:!0,autoComplete:"email"}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(q6,{selectedSpecialties:e.speciality||[],onSpecialtiesChange:E=>l?.(E),placeholder:"Search and select your specialties...",maxSelections:5}),t.speciality&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.speciality?.message||t.speciality})]}),o.jsx(Yr,{label:"Phone",type:"tel",name:"phone",value:e.phone||"",onChange:r?.("phone"),error:t.phone?.message||t.phone,required:!0,placeholder:"03XXXXXXXXX",onlyNumbers:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Gender"}),o.jsx(cd,{options:v.genders,value:e.gender||"",onChange:E=>s?.("gender",E),placeholder:"Select Gender"}),t.gender&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.gender?.message||t.gender})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Religion"}),o.jsx(cd,{options:v.religions,value:e.religion||"",onChange:E=>s?.("religion",E),placeholder:"Select Religion"}),t.religion&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.religion?.message||t.religion})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Main Degree"}),o.jsx(cd,{options:v.degreeOptions,value:e.mainDegree||"",onChange:E=>s?.("mainDegree",E),placeholder:"Select Main Degree"}),t.mainDegree&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.mainDegree?.message||t.mainDegree})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Full Address"}),o.jsx("textarea",{name:"fullAddress",value:e.fullAddress||"",onChange:r?.("fullAddress"),required:!0,rows:1,className:`w-full px-3 py-2 border ${t.fullAddress?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`}),t.fullAddress&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.fullAddress?.message||t.fullAddress})]}),b.hospital&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-emerald-700 font-medium mb-1",children:["Hospital",e.hospital&&e.hospitalVerified&&o.jsx("span",{className:"ml-2 text-xs text-emerald-600 bg-emerald-100 px-2 py-1 rounded",children:" Verified"}),e.hospital&&!e.hospitalVerified&&o.jsx("span",{className:"ml-2 text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded",children:" New Hospital"})]}),o.jsx($6,{options:v.hospitals,value:e.hospital||"",onChange:E=>h?.(E),registeredOptions:v.hospitals,placeholder:"Search hospitals or add new one...",allowAddNew:!0}),t.hospital&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.hospital?.message||t.hospital})]}),b.city&&o.jsx(Yr,{label:"City",name:"city",value:e.city||"",onChange:r?.("city"),error:t.city?.message||t.city,placeholder:"Enter City Name"}),o.jsx(Yr,{label:"Experience (years)",type:"number",name:"experience",value:e.experience||"",onChange:r?.("experience"),error:t.experience?.message||t.experience,required:!0,min:0}),o.jsx(Yr,{label:"CNIC",name:"cnic",value:e.cnic||"",onChange:N,error:t.cnic?.message||t.cnic,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,onlyNumbers:!0,allowDashes:!0}),o.jsx(Yr,{label:"Fee",type:"number",name:"fee",value:e.fee||"",onChange:r?.("fee"),error:t.fee?.message||t.fee,required:!0,min:0,onlyNumbers:!0}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"availability",name:"availability",checked:e.availability||!1,onChange:r?.("availability"),className:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"availability",className:"text-emerald-700 font-medium",children:"Available for Consultations"})]}),t.availability&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.availability?.message||t.availability}),o.jsx(Yr,{label:"PMDC Number",name:"pmdcNumber",value:e.pmdcNumber||"",onChange:r?.("pmdcNumber"),error:t.pmdcNumber?.message||t.pmdcNumber,required:!0,placeholder:"Enter PMDC Number"}),b.password&&o.jsx(Yr,{label:"Password",type:"password",name:"password",value:e.password||"",onChange:r?.("password"),error:t.password?.message||t.password,required:!0}),b.confirmPassword&&o.jsx(Yr,{label:"Confirm Password",type:"password",name:"confirmPassword",value:e.confirmPassword||"",onChange:r?.("confirmPassword"),error:t.confirmPassword?.message||t.confirmPassword,required:!0}),b.agreement&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:col-span-2",children:[o.jsx("input",{type:"checkbox",id:"agreement",name:"agreement",checked:e.agreement||!1,onChange:r?.("agreement"),className:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300"}),o.jsx("label",{htmlFor:"agreement",className:"text-emerald-800 font-semibold text-base",children:" Please make sure all fields are filled correctly before submitting."})]}),t.agreement&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.agreement?.message||t.agreement})]})]})},kB=()=>{const[e,t]=Z.useState(!1),{DoctorSignUp:r,loading:s,error:l}=fs(),{allPublicHospital:h}=to(),C=as(),N=El({resolver:kl(gB),defaultValues:vB,mode:"onChange",criteriaMode:"all"}),{register:y,handleSubmit:u,formState:{errors:R,isValid:v},setValue:b,getValues:E,reset:_,clearErrors:m,watch:k,control:w}=N,F=k(),g=I=>{const U=Um(I.target.value);b("cnic",U,{shouldValidate:!0})},A=I=>{b("speciality",I,{shouldValidate:!0})},P=I=>{b("hospital",I,{shouldValidate:!0})},H=I=>{b("hospitalVerified",I)},D=I=>{const U=h?.find(z=>z.name===I);U?(b("hospital",I,{shouldValidate:!0}),b("hospitalId",U._id),b("hospitalVerified",!0)):(b("hospital",I,{shouldValidate:!0}),b("hospitalId",null),b("hospitalVerified",!1))},S=(I,U)=>{b(I,U,{shouldValidate:!0}),m(I)},x=I=>U=>{const z=U.target.type==="checkbox"?U.target.checked:U.target.value;b(I,z,{shouldValidate:!0})},d=I=>{const{confirmPassword:U,agreement:z,...$}=I;return(!$.hospitalId||$.hospitalId===""||$.hospitalId===null)&&delete $.hospitalId,{...$,name:$.name?.trim(),email:$.email?.trim(),phone:$.phone?.trim(),religion:$.religion?.trim(),pmdcNumber:$.pmdcNumber?.trim(),mainDegree:$.mainDegree?.trim(),fullAddress:$.fullAddress?.trim(),city:$.city?.trim()||"",hospital:$.hospital?.trim(),hospitalVerified:$.hospitalVerified||!1,cnic:$.cnic?.trim(),experience:Number($.experience),fee:Number($.fee)}},T=async I=>{try{const U=d(I);(await r(U,C))?.success&&(t(!0),_())}catch{}},O=()=>{_(),t(!1)};return{register:y,handleSubmit:u(T,I=>{const U=Object.keys(I)[0];U&&document.querySelector(`[name="${U}"]`)?.focus()}),formState:{errors:R,isValid:v},formValues:F,control:w,handleCnicChange:g,handleSpecialtyChange:A,handleHospitalChange:P,handleHospitalVerification:H,handleHospitalSelection:D,handleDropdownChange:S,handleInputChange:x,resetForm:O,prepareSubmissionData:d,showSuccess:e,setShowSuccess:t,loading:s,error:l}},CB=()=>{const[e,t]=Z.useState(!1),[r,s]=Z.useState(null),l=as(),{HospitalSignUp:h,loading:C}=to(),N=El({resolver:kl(bB),defaultValues:xB,mode:"onChange",criteriaMode:"all"}),{register:y,handleSubmit:u,formState:{errors:R,isValid:v},setValue:b,getValues:E,reset:_,clearErrors:m,watch:k,control:w}=N,F=k();return{register:y,handleSubmit:u,formState:{errors:R,isValid:v},setValue:b,getValues:E,reset:_,clearErrors:m,watch:k,control:w,formValues:F,handleCnicChange:M=>{const I=Um(M.target.value);b("cnic",I,{shouldValidate:!0})},handleDropdownChange:(M,I)=>{b(M,I,{shouldValidate:!0}),m(M)},handleServiceChange:(M,I)=>{const U=E("services")||{};b("services",{...U,[M]:I},{shouldValidate:!0})},handleImageChange:M=>{const I=M?.target?.files?M.target.files[0]:M;I instanceof File&&(b("image",I,{shouldValidate:!0}),m("image"))},handleDocumentChange:M=>{const I=M?.target?.files?M.target.files[0]:M;I instanceof File&&(b("documents",I,{shouldValidate:!0}),m("documents"))},removeDocument:M=>{const U=(E("documents")||[]).filter((z,$)=>$!==M);b("documents",U,{shouldValidate:!0})},handleInputChange:M=>I=>{const U=I.target.type==="checkbox"?I.target.checked:I.target.value;b(M,U,{shouldValidate:!0})},onSubmit:async M=>{const{confirmPassword:I,agreement:U,...z}=M;await h(z,l)},handleInvalidSubmit:M=>{const I=Object.keys(M)[0];I&&document.querySelector(`[name="${I}"]`)?.focus()},showSuccess:e,setShowSuccess:t,loading:C,error:r,setError:s,resetForm:()=>{_(),t(!1),s(null)}}},TB=()=>{const{handleSubmit:e,formState:{errors:t},formValues:r,handleCnicChange:s,handleSpecialtyChange:l,handleHospitalSelection:h,handleDropdownChange:C,handleInputChange:N,resetForm:y,showSuccess:u,setShowSuccess:R,loading:v}=kB();return o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 py-16 px-4",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-2xl w-full",children:u?o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Application Submitted Successfully!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your interest in joining our platform. Your application has been submitted and is currently under review by our admin team."}),o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6",children:[o.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:"What happens next?"}),o.jsxs("ul",{className:"text-sm text-emerald-700 space-y-1",children:[o.jsx("li",{children:" Our admin team will review your application"}),o.jsx("li",{children:" We'll verify your credentials and documents"}),o.jsx("li",{children:" You'll receive an email notification once approved"}),o.jsx("li",{children:" After approval, you can complete your profile setup"})]})]}),o.jsx("button",{onClick:()=>{R(!1),y()},className:"bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors",children:"Submit Another Application"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col items-center mb-4",children:[o.jsx("span",{className:"text-emerald-600 text-4xl mb-2",children:""}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-2 text-center",children:"Join as a Doctor"})]}),o.jsxs("form",{className:"space-y-4",onSubmit:e,children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:o.jsx(hE,{values:r,errors:t,onInputChange:b=>N(b),onDropdownChange:C,onSpecialtyChange:l,onHospitalChange:h,onCnicChange:s})}),o.jsx("button",{type:"submit",disabled:v,className:"w-full py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 font-medium transition-colors duration-200 mt-2 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Submitting...":"Submit"}),o.jsxs("div",{className:"w-full text-center",children:[o.jsx("span",{className:"text-sm font-semibold text-emerald-700",children:"Already have an account?"}),o.jsx(Za,{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),to:"/doctor/login",className:"ml-1 text-emerald-600 hover:underline font-medium",children:"Login"})]})]})]})})})},PB=()=>{const{register:e,handleSubmit:t,formState:{errors:r,isValid:s},formValues:l,handleDropdownChange:h,handleImageChange:C,handleDocumentChange:N,onSubmit:y,showSuccess:u,setShowSuccess:R,loading:v,error:b,handleCnicChange:E}=CB();return o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 py-16 px-4",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-4xl w-full",children:u?o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Application Submitted Successfully!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your interest in joining our platform. Your hospital application has been submitted and is currently under review by our admin team."}),o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6",children:[o.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:"What happens next?"}),o.jsxs("ul",{className:"text-sm text-emerald-700 space-y-1",children:[o.jsx("li",{children:" Our admin team will review your application"}),o.jsx("li",{children:" We'll verify your hospital license and documents"}),o.jsx("li",{children:" You'll receive an email notification once approved"}),o.jsx("li",{children:" After approval, you can complete your hospital profile setup"})]})]}),o.jsx("button",{onClick:()=>R(!1),className:"bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors",children:"Submit Another Application"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col items-center mb-4",children:[o.jsx("span",{className:"text-emerald-600 text-4xl mb-2",children:""}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-2 text-center",children:"Join as a Hospital"})]}),o.jsxs("form",{className:"space-y-4 grid grid-cols-1 md:grid-cols-2 gap-2",onSubmit:t(y),children:[o.jsx(Yr,{label:"Hospital Name",name:"name",...e("name"),error:r.name?.message,required:!0,placeholder:"Enter hospital name"}),o.jsx(Yr,{label:"Email",type:"email",name:"email",...e("email"),error:r.email?.message,required:!0,placeholder:"hospital@example.com",autoComplete:"email"}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Description"}),o.jsx("textarea",{...e("description"),rows:3,className:`w-full px-3 py-2 border ${r.description?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`,placeholder:"Brief description of your hospital..."}),r.description?.message&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.description.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Hospital Type"}),o.jsx(cd,{options:y4,value:l.hospitalType||"",onChange:_=>h("hospitalType",_),placeholder:"Select Hospital Type"}),r.hospitalType?.message&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.hospitalType.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Category"}),o.jsx(cd,{options:_4,value:l.category||"",onChange:_=>h("category",_),placeholder:"Select Category"}),r.category?.message&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.category.message})]}),o.jsx(Yr,{label:"Phone",type:"tel",name:"phone",...e("phone"),error:r.phone?.message,required:!0,placeholder:"03XXXXXXXXX",onlyNumbers:!0}),o.jsx(Yr,{label:"License Number",name:"licenseNumber",...e("licenseNumber"),error:r.licenseNumber?.message,required:!0,placeholder:"Enter hospital license number"}),o.jsx(Yr,{label:"Established Year",name:"establishedYear",type:"number",...e("establishedYear"),error:r.establishedYear?.message,required:!0,min:1900,max:new Date().getFullYear(),placeholder:"e.g., 1995"}),o.jsx(Yr,{label:"Total Beds",name:"totalBeds",type:"number",...e("totalBeds"),error:r.totalBeds?.message,required:!0,min:1,placeholder:"Number of beds"}),o.jsx(Yr,{label:"Operation Theaters",name:"operationTheaters",type:"number",...e("operationTheaters"),error:r.operationTheaters?.message,required:!0,min:0,placeholder:"Number of OTs"}),o.jsx(Yr,{label:"CNIC",name:"cnic",value:l.cnic||"",onChange:E,error:r.cnic?.message,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,onlyNumbers:!0,allowDashes:!0}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Address"}),o.jsx("textarea",{...e("address"),required:!0,rows:2,className:`w-full px-3 py-2 border ${r.address?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`,placeholder:"Full hospital address..."}),r.address?.message&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.address.message})]}),o.jsx(Yr,{label:"City",name:"city",...e("city"),error:r.city?.message,required:!0,placeholder:"Enter city name"}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-2",children:"Available Services"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"emergencyServices",...e("services.emergencyServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"emergencyServices",className:"ml-2 text-sm text-gray-700",children:"Emergency Services Available"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"ambulanceServices",...e("services.ambulanceServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"ambulanceServices",className:"ml-2 text-sm text-gray-700",children:"Ambulance Services Available"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"icuServices",...e("services.icuServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"icuServices",className:"ml-2 text-sm text-gray-700",children:"ICU Services Available"})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx(yx,{label:"Hospital Image",name:"image",onChange:C,error:r.image?.message,accept:"image/jpeg,image/png,image/jpg",maxSize:5e6,required:!0})}),o.jsx("div",{className:"md:col-span-2",children:o.jsx(yx,{label:"Hospital Documents",name:"documents",onChange:N,error:r.documents?.message,accept:"image/jpeg,image/png,image/jpg",maxSize:5e6,required:!0})}),o.jsx(Yr,{label:"Password",type:"password",name:"password",...e("password"),error:r.password?.message,required:!0}),o.jsx(Yr,{label:"Confirm Password",type:"password",name:"confirmPassword",...e("confirmPassword"),error:r.confirmPassword?.message,required:!0}),o.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:col-span-2",children:[o.jsx("input",{type:"checkbox",id:"agreement",...e("agreement"),className:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300",required:!0}),o.jsx("label",{htmlFor:"agreement",className:"text-emerald-800 font-semibold text-base",children:" Please make sure all fields are filled correctly before submitting."})]}),r.agreement?.message&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.agreement.message}),b&&o.jsx("div",{className:"md:col-span-2 bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("p",{className:"text-red-600 text-sm",children:b})}),o.jsx("button",{type:"submit",disabled:!s||v,className:"w-full md:col-span-2 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 font-medium transition-colors duration-200 mt-4 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Submitting...":"Submit"}),o.jsxs("div",{className:"w-full text-center md:col-span-2",children:[o.jsx("span",{className:"text-sm font-semibold text-emerald-700",children:"Already have an account?"}),o.jsx(Za,{to:"/hospital/login",className:"ml-1 text-emerald-600 hover:underline font-medium",children:"Login"})]})]})]})})})},NB=Tc({email:Jr().min(1,"Email is required").email("Enter a valid email").trim(),password:Jr().min(6,"Password must be at least 6 characters long")}),DB=()=>{const e=as(),{HospitalLogin:t,loading:r}=to(),[s,l]=Z.useState(""),{register:h,handleSubmit:C,formState:{errors:N},reset:y}=El({resolver:kl(NB),mode:"onChange"}),u=async R=>{l("");try{await t({email:R.email,password:R.password},e),y()}catch{l("Login failed. Please try again.")}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:"Login as a Hospital"}),o.jsxs("form",{className:"space-y-6",onSubmit:C(u),children:[o.jsx(Yr,{label:"Email Address",type:"email",name:"email",...h("email"),error:N.email?.message,placeholder:"Enter your email",autoComplete:"username"}),o.jsx(Yr,{label:"Password",type:"password",name:"password",...h("password"),error:N.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),s&&o.jsx("p",{className:"text-red-500 text-sm",children:s}),o.jsx("button",{type:"submit",disabled:r,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:r?"Signing In...":"Sign In"})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("span",{className:"text-sm text-emerald-700",children:"Don't have an account?"}),o.jsx(Za,{to:"/register/hospital",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Register"})]}),o.jsx("div",{className:"text-center",children:o.jsx(Za,{to:"/forgot-password?type=hospital",className:"ml-1 text-emerald-600 hover:underline font-medium",children:"Forgot Password"})})]})})};var Yf={exports:{}},q1;function AB(){if(q1)return Yf.exports;q1=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(P,H,D){return Function.prototype.apply.call(P,H,D)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:r=function(P){return Object.getOwnPropertyNames(P)};function s(A){console&&console.warn&&console.warn(A)}var l=Number.isNaN||function(P){return P!==P};function h(){h.init.call(this)}Yf.exports=h,Yf.exports.once=w,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var C=10;function N(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(A){if(typeof A!="number"||A<0||l(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");C=A}}),h.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||l(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function y(A){return A._maxListeners===void 0?h.defaultMaxListeners:A._maxListeners}h.prototype.getMaxListeners=function(){return y(this)},h.prototype.emit=function(P){for(var H=[],D=1;D<arguments.length;D++)H.push(arguments[D]);var S=P==="error",x=this._events;if(x!==void 0)S=S&&x.error===void 0;else if(!S)return!1;if(S){var d;if(H.length>0&&(d=H[0]),d instanceof Error)throw d;var T=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw T.context=d,T}var O=x[P];if(O===void 0)return!1;if(typeof O=="function")t(O,this,H);else for(var M=O.length,I=_(O,M),D=0;D<M;++D)t(I[D],this,H);return!0};function u(A,P,H,D){var S,x,d;if(N(H),x=A._events,x===void 0?(x=A._events=Object.create(null),A._eventsCount=0):(x.newListener!==void 0&&(A.emit("newListener",P,H.listener?H.listener:H),x=A._events),d=x[P]),d===void 0)d=x[P]=H,++A._eventsCount;else if(typeof d=="function"?d=x[P]=D?[H,d]:[d,H]:D?d.unshift(H):d.push(H),S=y(A),S>0&&d.length>S&&!d.warned){d.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");T.name="MaxListenersExceededWarning",T.emitter=A,T.type=P,T.count=d.length,s(T)}return A}h.prototype.addListener=function(P,H){return u(this,P,H,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(P,H){return u(this,P,H,!0)};function R(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(A,P,H){var D={fired:!1,wrapFn:void 0,target:A,type:P,listener:H},S=R.bind(D);return S.listener=H,D.wrapFn=S,S}h.prototype.once=function(P,H){return N(H),this.on(P,v(this,P,H)),this},h.prototype.prependOnceListener=function(P,H){return N(H),this.prependListener(P,v(this,P,H)),this},h.prototype.removeListener=function(P,H){var D,S,x,d,T;if(N(H),S=this._events,S===void 0)return this;if(D=S[P],D===void 0)return this;if(D===H||D.listener===H)--this._eventsCount===0?this._events=Object.create(null):(delete S[P],S.removeListener&&this.emit("removeListener",P,D.listener||H));else if(typeof D!="function"){for(x=-1,d=D.length-1;d>=0;d--)if(D[d]===H||D[d].listener===H){T=D[d].listener,x=d;break}if(x<0)return this;x===0?D.shift():m(D,x),D.length===1&&(S[P]=D[0]),S.removeListener!==void 0&&this.emit("removeListener",P,T||H)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(P){var H,D,S;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[P]),this;if(arguments.length===0){var x=Object.keys(D),d;for(S=0;S<x.length;++S)d=x[S],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(H=D[P],typeof H=="function")this.removeListener(P,H);else if(H!==void 0)for(S=H.length-1;S>=0;S--)this.removeListener(P,H[S]);return this};function b(A,P,H){var D=A._events;if(D===void 0)return[];var S=D[P];return S===void 0?[]:typeof S=="function"?H?[S.listener||S]:[S]:H?k(S):_(S,S.length)}h.prototype.listeners=function(P){return b(this,P,!0)},h.prototype.rawListeners=function(P){return b(this,P,!1)},h.listenerCount=function(A,P){return typeof A.listenerCount=="function"?A.listenerCount(P):E.call(A,P)},h.prototype.listenerCount=E;function E(A){var P=this._events;if(P!==void 0){var H=P[A];if(typeof H=="function")return 1;if(H!==void 0)return H.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function _(A,P){for(var H=new Array(P),D=0;D<P;++D)H[D]=A[D];return H}function m(A,P){for(;P+1<A.length;P++)A[P]=A[P+1];A.pop()}function k(A){for(var P=new Array(A.length),H=0;H<P.length;++H)P[H]=A[H].listener||A[H];return P}function w(A,P){return new Promise(function(H,D){function S(d){A.removeListener(P,x),D(d)}function x(){typeof A.removeListener=="function"&&A.removeListener("error",S),H([].slice.call(arguments))}g(A,P,x,{once:!0}),P!=="error"&&F(A,S,{once:!0})})}function F(A,P,H){typeof A.on=="function"&&g(A,"error",P,H)}function g(A,P,H,D){if(typeof A.on=="function")D.once?A.once(P,H):A.on(P,H);else if(typeof A.addEventListener=="function")A.addEventListener(P,function S(x){D.once&&A.removeEventListener(P,S),H(x)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return Yf.exports}var OB=AB();const MB=R0(OB);var qv={exports:{}},$1;function jB(){return $1||($1=1,function(e,t){var r={};/*! For license information please see videosdk.js.LICENSE.txt */(function(s,l){e.exports=l()})(self,()=>(()=>{var s={11:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Chrome74=void 0;const R=u(7363),v=u(2994),b=u(1765),E=u(8046),_=u(5544),m=u(5938),k=u(4256),w=u(4893),F=u(521),g=u(1305),A=u(3303),P=new v.Logger("Chrome74"),H={OS:1024,MIS:1024};class D extends F.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new D}constructor(){super()}get name(){return"Chrome74"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const x=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{x.addTransceiver("audio"),x.addTransceiver("video");const d=await x.createOffer();try{x.close()}catch{}const T=R.parse(d.sdp),O=_.extractRtpCapabilities({sdpObject:T});return k.addNackSupportForOpus(O),O}catch(d){try{x.close()}catch{}throw d}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:H}}run({direction:x,iceParameters:d,iceCandidates:T,dtlsParameters:O,sctpParameters:M,iceServers:I,iceTransportPolicy:U,additionalSettings:z,proprietaryConstraints:$,extendedRtpCapabilities:q}){P.debug("run()"),this._direction=x,this._remoteSdp=new g.RemoteSdp({iceParameters:d,iceCandidates:T,dtlsParameters:O,sctpParameters:M}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",q),video:E.getSendingRtpParameters("video",q)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",q),video:E.getSendingRemoteRtpParameters("video",q)},O.role&&O.role!=="auto"&&(this._forcedLocalDtlsRole=O.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:I??[],iceTransportPolicy:U??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...z},$),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ae=>{this.emit("@icecandidateerror",ae)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(x){this.assertNotClosed(),P.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=x,this._pc.setConfiguration(d)}async restartIce(x){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(x),this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const T={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:x,encodings:d,codecOptions:T,codec:O}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",x.kind,x.id),d&&d.length>1&&d.forEach((me,Ce)=>{me.rid=`r${Ce}`});const M=b.clone(this._sendingRtpParametersByKind[x.kind]);M.codecs=E.reduceCodecs(M.codecs,O);const I=b.clone(this._sendingRemoteRtpParametersByKind[x.kind]);I.codecs=E.reduceCodecs(I.codecs,O);const U=this._remoteSdp.getNextMediaSectionIdx(),z=this._pc.addTransceiver(x,{direction:"sendonly",streams:[this._sendStream],sendEncodings:d});let $,q=await this._pc.createOffer(),ae=R.parse(q.sdp);ae.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ae});let Q=!1;const ve=(0,A.parse)((d??[{}])[0].scalabilityMode);d&&d.length===1&&ve.spatialLayers>1&&M.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(P.debug("send() | enabling legacy simulcast for VP9 SVC"),Q=!0,ae=R.parse(q.sdp),$=ae.media[U.idx],m.addLegacySimulcast({offerMediaObject:$,numStreams:ve.spatialLayers}),q={type:"offer",sdp:R.write(ae)}),P.debug("send() | calling pc.setLocalDescription() [offer:%o]",q),await this._pc.setLocalDescription(q);const we=z.mid;if(M.mid=we,ae=R.parse(this._pc.localDescription.sdp),$=ae.media[U.idx],M.rtcp.cname=_.getCname({offerMediaObject:$}),d)if(d.length===1){let me=m.getRtpEncodings({offerMediaObject:$});Object.assign(me[0],d[0]),Q&&(me=[me[0]]),M.encodings=me}else M.encodings=d;else M.encodings=m.getRtpEncodings({offerMediaObject:$});if(M.encodings.length>1&&(M.codecs[0].mimeType.toLowerCase()==="video/vp8"||M.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const me of M.encodings)me.scalabilityMode?me.scalabilityMode=`L1T${ve.temporalLayers}`:me.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:$,reuseMid:U.reuseMid,offerRtpParameters:M,answerRtpParameters:I,codecOptions:T});const Re={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Re),await this._pc.setRemoteDescription(Re),this._mapMidTransceiver.set(we,z),{localId:we,rtpParameters:M,rtpSender:z.sender}}async stopSending(x){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",x),this._closed)return;const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");if(d.sender.replaceTrack(null),this._pc.removeTrack(d.sender),this._remoteSdp.closeMediaSection(d.mid))try{d.stop()}catch{}const T=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._mapMidTransceiver.delete(x)}async pauseSending(x){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",x);const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="inactive",this._remoteSdp.pauseMediaSection(x);const T=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async resumeSending(x){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",x);const d=this._mapMidTransceiver.get(x);if(this._remoteSdp.resumeSendingMediaSection(x),!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="sendonly";const T=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async replaceTrack(x,d){this.assertNotClosed(),this.assertSendDirection(),d?P.debug("replaceTrack() [localId:%s, track.id:%s]",x,d.id):P.debug("replaceTrack() [localId:%s, no track]",x);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");await T.sender.replaceTrack(d)}async setMaxSpatialLayer(x,d){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",x,d);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");const O=T.sender.getParameters();O.encodings.forEach((U,z)=>{U.active=z<=d}),await T.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(x,O.encodings);const M=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async setRtpEncodingParameters(x,d){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",x,d);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");const O=T.sender.getParameters();O.encodings.forEach((U,z)=>{O.encodings[z]={...U,...d}}),await T.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(x,O.encodings);const M=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async getSenderStats(x){this.assertNotClosed(),this.assertSendDirection();const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.sender.getStats()}async sendDataChannel({ordered:x,maxPacketLifeTime:d,maxRetransmits:T,label:O,protocol:M}){this.assertNotClosed(),this.assertSendDirection();const I={negotiated:!0,id:this._nextSendSctpStreamId,ordered:x,maxPacketLifeTime:d,maxRetransmits:T,protocol:M};P.debug("sendDataChannel() [options:%o]",I);const U=this._pc.createDataChannel(O,I);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%H.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),$=R.parse(z.sdp),q=$.media.find(Q=>Q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:q});const ae={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setRemoteDescription(ae),this._hasDataChannelMediaSection=!0}return{dataChannel:U,sctpStreamParameters:{streamId:I.id,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits}}}async receive(x){this.assertNotClosed(),this.assertRecvDirection();const d=[],T=new Map;for(const U of x){const{trackId:z,kind:$,rtpParameters:q,streamId:ae}=U;P.debug("receive() [trackId:%s, kind:%s]",z,$);const Q=q.mid??String(this._mapMidTransceiver.size);T.set(z,Q),this._remoteSdp.receive({mid:Q,kind:$,offerRtpParameters:q,streamId:ae??q.rtcp.cname,trackId:z})}const O={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);let M=await this._pc.createAnswer();const I=R.parse(M.sdp);for(const U of x){const{trackId:z,rtpParameters:$}=U,q=T.get(z),ae=I.media.find(Q=>String(Q.mid)===q);_.applyCodecParameters({offerRtpParameters:$,answerMediaObject:ae})}M={type:"answer",sdp:R.write(I)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",M),await this._pc.setLocalDescription(M);for(const U of x){const{trackId:z}=U,$=T.get(z),q=this._pc.getTransceivers().find(ae=>ae.mid===$);if(!q)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set($,q),d.push({localId:$,track:q.receiver.track,rtpReceiver:q.receiver})}return d}async stopReceiving(x){if(this.assertRecvDirection(),this._closed)return;for(const O of x){P.debug("stopReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(M.mid)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T);for(const O of x)this._mapMidTransceiver.delete(O)}async pauseReceiving(x){this.assertNotClosed(),this.assertRecvDirection();for(const O of x){P.debug("pauseReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="inactive",this._remoteSdp.pauseMediaSection(O)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async resumeReceiving(x){this.assertNotClosed(),this.assertRecvDirection();for(const O of x){P.debug("resumeReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(O)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async getReceiverStats(x){this.assertNotClosed(),this.assertRecvDirection();const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:x,label:d,protocol:T}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:O,ordered:M,maxPacketLifeTime:I,maxRetransmits:U}=x,z={negotiated:!0,id:O,ordered:M,maxPacketLifeTime:I,maxRetransmits:U,protocol:T};P.debug("receiveDataChannel() [options:%o]",z);const $=this._pc.createDataChannel(d,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const q={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",q),await this._pc.setRemoteDescription(q);const ae=await this._pc.createAnswer();if(!this._transportReady){const Q=R.parse(ae.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Q})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setLocalDescription(ae),this._hasDataChannelMediaSection=!0}return{dataChannel:$}}async setupTransport({localDtlsRole:x,localSdpObject:d}){d||(d=R.parse(this._pc.localDescription.sdp));const T=_.extractDtlsParameters({sdpObject:d});T.role=x,this._remoteSdp.updateDtlsRole(x==="client"?"server":"client"),await new Promise((O,M)=>{this.safeEmit("@connect",{dtlsParameters:T},O,M)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new w.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.Chrome74=D},19:function(N,y,u){var R,v,b,E,_,m,k,w,F;N.exports=(F=u(9021),u(3009),u(1025),v=(R=F).lib,b=v.Base,E=v.WordArray,_=R.algo,m=_.SHA256,k=_.HMAC,w=_.PBKDF2=b.extend({cfg:b.extend({keySize:4,hasher:m,iterations:25e4}),init:function(g){this.cfg=this.cfg.extend(g)},compute:function(g,A){for(var P=this.cfg,H=k.create(P.hasher,g),D=E.create(),S=E.create([1]),x=D.words,d=S.words,T=P.keySize,O=P.iterations;x.length<T;){var M=H.update(A).finalize(S);H.reset();for(var I=M.words,U=I.length,z=M,$=1;$<O;$++){z=H.finalize(z),H.reset();for(var q=z.words,ae=0;ae<U;ae++)I[ae]^=q[ae]}D.concat(M),d[0]++}return D.sigBytes=4*T,D}}),R.PBKDF2=function(g,A,P){return w.create(P).compute(g,A)},F.PBKDF2)},25:function(N,y,u){var R,v,b,E;N.exports=(E=u(9021),u(7165),v=(R=E).lib.CipherParams,b=R.enc.Hex,R.format.Hex={stringify:function(_){return _.ciphertext.toString(b)},parse:function(_){var m=b.parse(_);return v.create({ciphertext:m})}},E.format.Hex)},76:(N,y,u)=>{y.s$=y.pF=void 0,u(7833).default,u(8057);var R=u(6004);Object.defineProperty(y,"pF",{enumerable:!0,get:function(){return R.Device}});var v=u(3303);Object.defineProperty(y,"s$",{enumerable:!0,get:function(){return v.parse}}),u(8046),u(2731),u(5248)},182:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.version=y.validate=y.v7=y.v6ToV1=y.v6=y.v5=y.v4=y.v3=y.v1ToV6=y.v1=y.stringify=y.parse=y.NIL=y.MAX=void 0;var R=u(2196);Object.defineProperty(y,"MAX",{enumerable:!0,get:function(){return R.default}});var v=u(3465);Object.defineProperty(y,"NIL",{enumerable:!0,get:function(){return v.default}});var b=u(1797);Object.defineProperty(y,"parse",{enumerable:!0,get:function(){return b.default}});var E=u(6011);Object.defineProperty(y,"stringify",{enumerable:!0,get:function(){return E.default}});var _=u(1425);Object.defineProperty(y,"v1",{enumerable:!0,get:function(){return _.default}});var m=u(6568);Object.defineProperty(y,"v1ToV6",{enumerable:!0,get:function(){return m.default}});var k=u(591);Object.defineProperty(y,"v3",{enumerable:!0,get:function(){return k.default}});var w=u(8286);Object.defineProperty(y,"v4",{enumerable:!0,get:function(){return w.default}});var F=u(4557);Object.defineProperty(y,"v5",{enumerable:!0,get:function(){return F.default}});var g=u(6356);Object.defineProperty(y,"v6",{enumerable:!0,get:function(){return g.default}});var A=u(268);Object.defineProperty(y,"v6ToV1",{enumerable:!0,get:function(){return A.default}});var P=u(4299);Object.defineProperty(y,"v7",{enumerable:!0,get:function(){return P.default}});var H=u(9746);Object.defineProperty(y,"validate",{enumerable:!0,get:function(){return H.default}});var D=u(2770);Object.defineProperty(y,"version",{enumerable:!0,get:function(){return D.default}})},268:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0});const R=u(1797),v=u(6011);y.default=function(b){const E=function(_){return Uint8Array.of((15&_[3])<<4|_[4]>>4&15,(15&_[4])<<4|(240&_[5])>>4,(15&_[5])<<4|15&_[6],_[7],(15&_[1])<<4|(240&_[2])>>4,(15&_[2])<<4|(240&_[3])>>4,16|(240&_[0])>>4,(15&_[0])<<4|(240&_[1])>>4,_[8],_[9],_[10],_[11],_[12],_[13],_[14],_[15])}(typeof b=="string"?(0,R.default)(b):b);return typeof b=="string"?(0,v.unsafeStringify)(E):E}},296:(N,y,u)=>{u.d(y,{A:()=>v});var R=u(7800);function v(b,E){return function(_){if(Array.isArray(_))return _}(b)||function(_,m){var k=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(k!=null){var w,F,g,A,P=[],H=!0,D=!1;try{if(g=(k=k.call(_)).next,m===0){if(Object(k)!==k)return;H=!1}else for(;!(H=(w=g.call(k)).done)&&(P.push(w.value),P.length!==m);H=!0);}catch(S){D=!0,F=S}finally{try{if(!H&&k.return!=null&&(A=k.return(),Object(A)!==A))return}finally{if(D)throw F}}return P}}(b,E)||(0,R.A)(b,E)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},328:(N,y,u)=>{u(8624),N.exports=self.fetch.bind(self)},338:(N,y)=>{function u(k){return 14+(k+64>>>9<<4)+1}function R(k,w){const F=(65535&k)+(65535&w);return(k>>16)+(w>>16)+(F>>16)<<16|65535&F}function v(k,w,F,g,A,P){return R((H=R(R(w,k),R(g,P)))<<(D=A)|H>>>32-D,F);var H,D}function b(k,w,F,g,A,P,H){return v(w&F|~w&g,k,w,A,P,H)}function E(k,w,F,g,A,P,H){return v(w&g|F&~g,k,w,A,P,H)}function _(k,w,F,g,A,P,H){return v(w^F^g,k,w,A,P,H)}function m(k,w,F,g,A,P,H){return v(F^(w|~g),k,w,A,P,H)}Object.defineProperty(y,"__esModule",{value:!0}),y.default=function(k){return function(w){const F=new Uint8Array(4*w.length);for(let g=0;g<4*w.length;g++)F[g]=w[g>>2]>>>g%4*8&255;return F}(function(w,F){const g=new Uint32Array(u(F)).fill(0);g.set(w),g[F>>5]|=128<<F%32,g[g.length-1]=F,w=g;let A=1732584193,P=-271733879,H=-1732584194,D=271733878;for(let S=0;S<w.length;S+=16){const x=A,d=P,T=H,O=D;A=b(A,P,H,D,w[S],7,-680876936),D=b(D,A,P,H,w[S+1],12,-389564586),H=b(H,D,A,P,w[S+2],17,606105819),P=b(P,H,D,A,w[S+3],22,-1044525330),A=b(A,P,H,D,w[S+4],7,-176418897),D=b(D,A,P,H,w[S+5],12,1200080426),H=b(H,D,A,P,w[S+6],17,-1473231341),P=b(P,H,D,A,w[S+7],22,-45705983),A=b(A,P,H,D,w[S+8],7,1770035416),D=b(D,A,P,H,w[S+9],12,-1958414417),H=b(H,D,A,P,w[S+10],17,-42063),P=b(P,H,D,A,w[S+11],22,-1990404162),A=b(A,P,H,D,w[S+12],7,1804603682),D=b(D,A,P,H,w[S+13],12,-40341101),H=b(H,D,A,P,w[S+14],17,-1502002290),P=b(P,H,D,A,w[S+15],22,1236535329),A=E(A,P,H,D,w[S+1],5,-165796510),D=E(D,A,P,H,w[S+6],9,-1069501632),H=E(H,D,A,P,w[S+11],14,643717713),P=E(P,H,D,A,w[S],20,-373897302),A=E(A,P,H,D,w[S+5],5,-701558691),D=E(D,A,P,H,w[S+10],9,38016083),H=E(H,D,A,P,w[S+15],14,-660478335),P=E(P,H,D,A,w[S+4],20,-405537848),A=E(A,P,H,D,w[S+9],5,568446438),D=E(D,A,P,H,w[S+14],9,-1019803690),H=E(H,D,A,P,w[S+3],14,-187363961),P=E(P,H,D,A,w[S+8],20,1163531501),A=E(A,P,H,D,w[S+13],5,-1444681467),D=E(D,A,P,H,w[S+2],9,-51403784),H=E(H,D,A,P,w[S+7],14,1735328473),P=E(P,H,D,A,w[S+12],20,-1926607734),A=_(A,P,H,D,w[S+5],4,-378558),D=_(D,A,P,H,w[S+8],11,-2022574463),H=_(H,D,A,P,w[S+11],16,1839030562),P=_(P,H,D,A,w[S+14],23,-35309556),A=_(A,P,H,D,w[S+1],4,-1530992060),D=_(D,A,P,H,w[S+4],11,1272893353),H=_(H,D,A,P,w[S+7],16,-155497632),P=_(P,H,D,A,w[S+10],23,-1094730640),A=_(A,P,H,D,w[S+13],4,681279174),D=_(D,A,P,H,w[S],11,-358537222),H=_(H,D,A,P,w[S+3],16,-722521979),P=_(P,H,D,A,w[S+6],23,76029189),A=_(A,P,H,D,w[S+9],4,-640364487),D=_(D,A,P,H,w[S+12],11,-421815835),H=_(H,D,A,P,w[S+15],16,530742520),P=_(P,H,D,A,w[S+2],23,-995338651),A=m(A,P,H,D,w[S],6,-198630844),D=m(D,A,P,H,w[S+7],10,1126891415),H=m(H,D,A,P,w[S+14],15,-1416354905),P=m(P,H,D,A,w[S+5],21,-57434055),A=m(A,P,H,D,w[S+12],6,1700485571),D=m(D,A,P,H,w[S+3],10,-1894986606),H=m(H,D,A,P,w[S+10],15,-1051523),P=m(P,H,D,A,w[S+1],21,-2054922799),A=m(A,P,H,D,w[S+8],6,1873313359),D=m(D,A,P,H,w[S+15],10,-30611744),H=m(H,D,A,P,w[S+6],15,-1560198380),P=m(P,H,D,A,w[S+13],21,1309151649),A=m(A,P,H,D,w[S+4],6,-145523070),D=m(D,A,P,H,w[S+11],10,-1120210379),H=m(H,D,A,P,w[S+2],15,718787259),P=m(P,H,D,A,w[S+9],21,-343485551),A=R(A,x),P=R(P,d),H=R(H,T),D=R(D,O)}return Uint32Array.of(A,P,H,D)}(function(w){if(w.length===0)return new Uint32Array;const F=new Uint32Array(u(8*w.length)).fill(0);for(let g=0;g<w.length;g++)F[g>>2]|=(255&w[g])<<g%4*8;return F}(k),8*k.length))}},388:(N,y,u)=>{u.d(y,{A:()=>v});var R=u(2284);function v(b,E){if(E&&((0,R.A)(E)=="object"||typeof E=="function"))return E;if(E!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(b)}},467:(N,y,u)=>{function R(b,E,_,m,k,w,F){try{var g=b[w](F),A=g.value}catch(P){return void _(P)}g.done?E(A):Promise.resolve(A).then(m,k)}function v(b){return function(){var E=this,_=arguments;return new Promise(function(m,k){var w=b.apply(E,_);function F(A){R(w,m,k,F,g,"next",A)}function g(A){R(w,m,k,F,g,"throw",A)}F(void 0)})}}u.d(y,{A:()=>v})},477:()=>{},482:function(N,y,u){var R;N.exports=(R=u(9021),u(7165),R.pad.Iso97971={pad:function(v,b){v.concat(R.lib.WordArray.create([2147483648],1)),R.pad.ZeroPadding.pad(v,b)},unpad:function(v){R.pad.ZeroPadding.unpad(v),v.sigBytes--}},R.pad.Iso97971)},521:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.HandlerInterface=void 0;const R=u(3953);class v extends R.EnhancedEventEmitter{constructor(){super()}}y.HandlerInterface=v},579:(N,y,u)=>{var R=u(3738).default;N.exports=function(v){if(v!=null){var b=v[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],E=0;if(b)return b.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length))return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}}}throw new TypeError(R(v)+" is not iterable")},N.exports.__esModule=!0,N.exports.default=N.exports},591:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.URL=y.DNS=void 0;const R=u(338),v=u(2988);var b=u(2988);function E(_,m,k,w){return(0,v.default)(48,R.default,_,m,k,w)}Object.defineProperty(y,"DNS",{enumerable:!0,get:function(){return b.DNS}}),Object.defineProperty(y,"URL",{enumerable:!0,get:function(){return b.URL}}),E.DNS=v.DNS,E.URL=v.URL,y.default=E},736:(N,y,u)=>{N.exports=function(R){function v(_){let m,k,w,F=null;function g(...A){if(!g.enabled)return;const P=g,H=Number(new Date),D=H-(m||H);P.diff=D,P.prev=m,P.curr=H,m=H,A[0]=v.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let S=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(x,d)=>{if(x==="%%")return"%";S++;const T=v.formatters[d];if(typeof T=="function"){const O=A[S];x=T.call(P,O),A.splice(S,1),S--}return x}),v.formatArgs.call(P,A),(P.log||v.log).apply(P,A)}return g.namespace=_,g.useColors=v.useColors(),g.color=v.selectColor(_),g.extend=b,g.destroy=v.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>F!==null?F:(k!==v.namespaces&&(k=v.namespaces,w=v.enabled(_)),w),set:A=>{F=A}}),typeof v.init=="function"&&v.init(g),g}function b(_,m){const k=v(this.namespace+(m===void 0?":":m)+_);return k.log=this.log,k}function E(_,m){let k=0,w=0,F=-1,g=0;for(;k<_.length;)if(w<m.length&&(m[w]===_[k]||m[w]==="*"))m[w]==="*"?(F=w,g=k,w++):(k++,w++);else{if(F===-1)return!1;w=F+1,g++,k=g}for(;w<m.length&&m[w]==="*";)w++;return w===m.length}return v.debug=v,v.default=v,v.coerce=function(_){return _ instanceof Error?_.stack||_.message:_},v.disable=function(){const _=[...v.names,...v.skips.map(m=>"-"+m)].join(",");return v.enable(""),_},v.enable=function(_){v.save(_),v.namespaces=_,v.names=[],v.skips=[];const m=(typeof _=="string"?_:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const k of m)k[0]==="-"?v.skips.push(k.slice(1)):v.names.push(k)},v.enabled=function(_){for(const m of v.skips)if(E(_,m))return!1;for(const m of v.names)if(E(_,m))return!0;return!1},v.humanize=u(6585),v.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(R).forEach(_=>{v[_]=R[_]}),v.names=[],v.skips=[],v.formatters={},v.selectColor=function(_){let m=0;for(let k=0;k<_.length;k++)m=(m<<5)-m+_.charCodeAt(k),m|=0;return v.colors[Math.abs(m)%v.colors.length]},v.enable(v.load()),v}},754:function(N,y,u){var R;N.exports=(R=u(9021),function(){var v=R,b=v.lib.WordArray;function E(_,m,k){for(var w=[],F=0,g=0;g<m;g++)if(g%4){var A=k[_.charCodeAt(g-1)]<<g%4*2|k[_.charCodeAt(g)]>>>6-g%4*2;w[F>>>2]|=A<<24-F%4*8,F++}return b.create(w,F)}v.enc.Base64={stringify:function(_){var m=_.words,k=_.sigBytes,w=this._map;_.clamp();for(var F=[],g=0;g<k;g+=3)for(var A=(m[g>>>2]>>>24-g%4*8&255)<<16|(m[g+1>>>2]>>>24-(g+1)%4*8&255)<<8|m[g+2>>>2]>>>24-(g+2)%4*8&255,P=0;P<4&&g+.75*P<k;P++)F.push(w.charAt(A>>>6*(3-P)&63));var H=w.charAt(64);if(H)for(;F.length%4;)F.push(H);return F.join("")},parse:function(_){var m=_.length,k=this._map,w=this._reverseMap;if(!w){w=this._reverseMap=[];for(var F=0;F<k.length;F++)w[k.charCodeAt(F)]=F}var g=k.charAt(64);if(g){var A=_.indexOf(g);A!==-1&&(m=A)}return E(_,m,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),R.enc.Base64)},816:(N,y,u)=>{u.d(y,{A:()=>v});var R=u(2284);function v(b){var E=function(_,m){if((0,R.A)(_)!="object"||!_)return _;var k=_[Symbol.toPrimitive];if(k!==void 0){var w=k.call(_,m);if((0,R.A)(w)!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(_)}(b,"string");return(0,R.A)(E)=="symbol"?E:E+""}},887:(N,y,u)=>{var R=u(6993),v=u(1791);N.exports=function(b,E,_,m,k){return new v(R().w(b,E,_,m),k||Promise)},N.exports.__esModule=!0,N.exports.default=N.exports},955:function(N,y,u){var R;N.exports=(R=u(9021),u(754),u(4636),u(9506),u(7165),function(){var v=R,b=v.lib.BlockCipher,E=v.algo,_=[],m=[],k=[],w=[],F=[],g=[],A=[],P=[],H=[],D=[];(function(){for(var d=[],T=0;T<256;T++)d[T]=T<128?T<<1:T<<1^283;var O=0,M=0;for(T=0;T<256;T++){var I=M^M<<1^M<<2^M<<3^M<<4;I=I>>>8^255&I^99,_[O]=I,m[I]=O;var U=d[O],z=d[U],$=d[z],q=257*d[I]^16843008*I;k[O]=q<<24|q>>>8,w[O]=q<<16|q>>>16,F[O]=q<<8|q>>>24,g[O]=q,q=16843009*$^65537*z^257*U^16843008*O,A[I]=q<<24|q>>>8,P[I]=q<<16|q>>>16,H[I]=q<<8|q>>>24,D[I]=q,O?(O=U^d[d[d[$^U]]],M^=d[d[M]]):O=M=1}})();var S=[0,1,2,4,8,16,32,64,128,27,54],x=E.AES=b.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var d=this._keyPriorReset=this._key,T=d.words,O=d.sigBytes/4,M=4*((this._nRounds=O+6)+1),I=this._keySchedule=[],U=0;U<M;U++)U<O?I[U]=T[U]:(q=I[U-1],U%O?O>6&&U%O==4&&(q=_[q>>>24]<<24|_[q>>>16&255]<<16|_[q>>>8&255]<<8|_[255&q]):(q=_[(q=q<<8|q>>>24)>>>24]<<24|_[q>>>16&255]<<16|_[q>>>8&255]<<8|_[255&q],q^=S[U/O|0]<<24),I[U]=I[U-O]^q);for(var z=this._invKeySchedule=[],$=0;$<M;$++){if(U=M-$,$%4)var q=I[U];else q=I[U-4];z[$]=$<4||U<=4?q:A[_[q>>>24]]^P[_[q>>>16&255]]^H[_[q>>>8&255]]^D[_[255&q]]}}},encryptBlock:function(d,T){this._doCryptBlock(d,T,this._keySchedule,k,w,F,g,_)},decryptBlock:function(d,T){var O=d[T+1];d[T+1]=d[T+3],d[T+3]=O,this._doCryptBlock(d,T,this._invKeySchedule,A,P,H,D,m),O=d[T+1],d[T+1]=d[T+3],d[T+3]=O},_doCryptBlock:function(d,T,O,M,I,U,z,$){for(var q=this._nRounds,ae=d[T]^O[0],Q=d[T+1]^O[1],ve=d[T+2]^O[2],we=d[T+3]^O[3],Re=4,me=1;me<q;me++){var Ce=M[ae>>>24]^I[Q>>>16&255]^U[ve>>>8&255]^z[255&we]^O[Re++],Be=M[Q>>>24]^I[ve>>>16&255]^U[we>>>8&255]^z[255&ae]^O[Re++],be=M[ve>>>24]^I[we>>>16&255]^U[ae>>>8&255]^z[255&Q]^O[Re++],Ye=M[we>>>24]^I[ae>>>16&255]^U[Q>>>8&255]^z[255&ve]^O[Re++];ae=Ce,Q=Be,ve=be,we=Ye}Ce=($[ae>>>24]<<24|$[Q>>>16&255]<<16|$[ve>>>8&255]<<8|$[255&we])^O[Re++],Be=($[Q>>>24]<<24|$[ve>>>16&255]<<16|$[we>>>8&255]<<8|$[255&ae])^O[Re++],be=($[ve>>>24]<<24|$[we>>>16&255]<<16|$[ae>>>8&255]<<8|$[255&Q])^O[Re++],Ye=($[we>>>24]<<24|$[ae>>>16&255]<<16|$[Q>>>8&255]<<8|$[255&ve])^O[Re++],d[T]=Ce,d[T+1]=Be,d[T+2]=be,d[T+3]=Ye},keySize:8});v.AES=b._createHelper(x)}(),R.AES)},1025:function(N,y,u){var R,v,b,E;N.exports=(R=u(9021),b=(v=R).lib.Base,E=v.enc.Utf8,void(v.algo.HMAC=b.extend({init:function(_,m){_=this._hasher=new _.init,typeof m=="string"&&(m=E.parse(m));var k=_.blockSize,w=4*k;m.sigBytes>w&&(m=_.finalize(m)),m.clamp();for(var F=this._oKey=m.clone(),g=this._iKey=m.clone(),A=F.words,P=g.words,H=0;H<k;H++)A[H]^=1549556828,P[H]^=909522486;F.sigBytes=g.sigBytes=w,this.reset()},reset:function(){var _=this._hasher;_.reset(),_.update(this._iKey)},update:function(_){return this._hasher.update(_),this},finalize:function(_){var m=this._hasher,k=m.finalize(_);return m.reset(),m.finalize(this._oKey.clone().concat(k))}})))},1305:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.RemoteSdp=void 0;const R=u(7363),v=u(2994),b=u(3471),E=new v.Logger("RemoteSdp");y.RemoteSdp=class{_iceParameters;_iceCandidates;_dtlsParameters;_sctpParameters;_plainRtpParameters;_planB;_mediaSections=[];_midToIndex=new Map;_firstMid;_sdpObject;constructor({iceParameters:_,iceCandidates:m,dtlsParameters:k,sctpParameters:w,plainRtpParameters:F,planB:g=!1}){if(this._iceParameters=_,this._iceCandidates=m,this._dtlsParameters=k,this._sctpParameters=w,this._plainRtpParameters=F,this._planB=g,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},_?.iceLite&&(this._sdpObject.icelite="ice-lite"),k){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const A=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:k.fingerprints[A-1].algorithm,hash:k.fingerprints[A-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}F&&(this._sdpObject.origin.address=F.ip,this._sdpObject.origin.ipVer=F.ipVersion)}updateIceParameters(_){E.debug("updateIceParameters() [iceParameters:%o]",_),this._iceParameters=_,this._sdpObject.icelite=_.iceLite?"ice-lite":void 0;for(const m of this._mediaSections)m.setIceParameters(_)}updateDtlsRole(_){E.debug("updateDtlsRole() [role:%s]",_),this._dtlsParameters.role=_;for(const m of this._mediaSections)m.setDtlsRole(_)}setSessionExtmapAllowMixed(){E.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let _=0;_<this._mediaSections.length;++_){const m=this._mediaSections[_];if(m.closed)return{idx:_,reuseMid:m.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:_,reuseMid:m,offerRtpParameters:k,answerRtpParameters:w,codecOptions:F}){const g=new b.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:_,offerRtpParameters:k,answerRtpParameters:w,codecOptions:F});m?this._replaceMediaSection(g,m):this._midToIndex.has(g.mid)?this._replaceMediaSection(g):this._addMediaSection(g)}receive({mid:_,kind:m,offerRtpParameters:k,streamId:w,trackId:F}){const g=this._midToIndex.get(_);let A;if(g!==void 0&&(A=this._mediaSections[g]),this.setSessionExtmapAllowMixed(),A)A.planBReceive({offerRtpParameters:k,streamId:w,trackId:F}),this._replaceMediaSection(A);else{A=new b.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:_,kind:m,offerRtpParameters:k,streamId:w,trackId:F});const P=this._mediaSections.find(H=>H.closed);P?this._replaceMediaSection(A,P.mid):this._addMediaSection(A)}}pauseMediaSection(_){this._findMediaSection(_).pause()}resumeSendingMediaSection(_){this._findMediaSection(_).resume()}resumeReceivingMediaSection(_){this._findMediaSection(_).resume()}disableMediaSection(_){this._findMediaSection(_).disable()}closeMediaSection(_){const m=this._findMediaSection(_);return _===this._firstMid?(E.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",_),this.disableMediaSection(_),!1):(m.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(_,m){const k=this._findMediaSection(_);k.muxSimulcastStreams(m),this._replaceMediaSection(k)}planBStopReceiving({mid:_,offerRtpParameters:m}){const k=this._findMediaSection(_);k.planBStopReceiving({offerRtpParameters:m}),this._replaceMediaSection(k)}sendSctpAssociation({offerMediaObject:_}){const m=new b.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:_});this._addMediaSection(m)}receiveSctpAssociation({oldDataChannelSpec:_=!1}={}){const m=new b.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:_});this._addMediaSection(m)}getSdp(){return this._sdpObject.origin.sessionVersion++,R.write(this._sdpObject)}_addMediaSection(_){this._firstMid||(this._firstMid=_.mid),this._mediaSections.push(_),this._midToIndex.set(_.mid,this._mediaSections.length-1),this._sdpObject.media.push(_.getObject()),this._regenerateBundleMids()}_replaceMediaSection(_,m){if(typeof m=="string"){const k=this._midToIndex.get(m);if(k===void 0)throw new Error(`no media section found for reuseMid '${m}'`);const w=this._mediaSections[k];this._mediaSections[k]=_,this._midToIndex.delete(w.mid),this._midToIndex.set(_.mid,k),this._sdpObject.media[k]=_.getObject(),this._regenerateBundleMids()}else{const k=this._midToIndex.get(_.mid);if(k===void 0)throw new Error(`no media section found with mid '${_.mid}'`);this._mediaSections[k]=_,this._sdpObject.media[k]=_.getObject()}}_findMediaSection(_){const m=this._midToIndex.get(_);if(m===void 0)throw new Error(`no media section found with mid '${_}'`);return this._mediaSections[m]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(_=>!_.closed).map(_=>_.mid).join(" "))}}},1380:function(N,y,u){var R;N.exports=(R=u(9021),u(3240),function(){var v=R,b=v.lib.Hasher,E=v.x64,_=E.Word,m=E.WordArray,k=v.algo;function w(){return _.create.apply(_,arguments)}var F=[w(1116352408,3609767458),w(1899447441,602891725),w(3049323471,3964484399),w(3921009573,2173295548),w(961987163,4081628472),w(1508970993,3053834265),w(2453635748,2937671579),w(2870763221,3664609560),w(3624381080,2734883394),w(310598401,1164996542),w(607225278,1323610764),w(1426881987,3590304994),w(1925078388,4068182383),w(2162078206,991336113),w(2614888103,633803317),w(3248222580,3479774868),w(3835390401,2666613458),w(4022224774,944711139),w(264347078,2341262773),w(604807628,2007800933),w(770255983,1495990901),w(1249150122,1856431235),w(1555081692,3175218132),w(1996064986,2198950837),w(2554220882,3999719339),w(2821834349,766784016),w(2952996808,2566594879),w(3210313671,3203337956),w(3336571891,1034457026),w(3584528711,2466948901),w(113926993,3758326383),w(338241895,168717936),w(666307205,1188179964),w(773529912,1546045734),w(1294757372,1522805485),w(1396182291,2643833823),w(1695183700,2343527390),w(1986661051,1014477480),w(2177026350,1206759142),w(2456956037,344077627),w(2730485921,1290863460),w(2820302411,3158454273),w(3259730800,3505952657),w(3345764771,106217008),w(3516065817,3606008344),w(3600352804,1432725776),w(4094571909,1467031594),w(275423344,851169720),w(430227734,3100823752),w(506948616,1363258195),w(659060556,3750685593),w(883997877,3785050280),w(958139571,3318307427),w(1322822218,3812723403),w(1537002063,2003034995),w(1747873779,3602036899),w(1955562222,1575990012),w(2024104815,1125592928),w(2227730452,2716904306),w(2361852424,442776044),w(2428436474,593698344),w(2756734187,3733110249),w(3204031479,2999351573),w(3329325298,3815920427),w(3391569614,3928383900),w(3515267271,566280711),w(3940187606,3454069534),w(4118630271,4000239992),w(116418474,1914138554),w(174292421,2731055270),w(289380356,3203993006),w(460393269,320620315),w(685471733,587496836),w(852142971,1086792851),w(1017036298,365543100),w(1126000580,2618297676),w(1288033470,3409855158),w(1501505948,4234509866),w(1607167915,987167468),w(1816402316,1246189591)],g=[];(function(){for(var P=0;P<80;P++)g[P]=w()})();var A=k.SHA512=b.extend({_doReset:function(){this._hash=new m.init([new _.init(1779033703,4089235720),new _.init(3144134277,2227873595),new _.init(1013904242,4271175723),new _.init(2773480762,1595750129),new _.init(1359893119,2917565137),new _.init(2600822924,725511199),new _.init(528734635,4215389547),new _.init(1541459225,327033209)])},_doProcessBlock:function(P,H){for(var D=this._hash.words,S=D[0],x=D[1],d=D[2],T=D[3],O=D[4],M=D[5],I=D[6],U=D[7],z=S.high,$=S.low,q=x.high,ae=x.low,Q=d.high,ve=d.low,we=T.high,Re=T.low,me=O.high,Ce=O.low,Be=M.high,be=M.low,Ye=I.high,Qe=I.low,Ge=U.high,He=U.low,Te=z,dt=$,_t=q,on=ae,ln=Q,Pn=ve,En=we,rn=Re,Ne=me,Me=Ce,Ze=Be,Ft=be,Tt=Ye,St=Qe,un=Ge,Sn=He,Ut=0;Ut<80;Ut++){var nr,Ar,Sr=g[Ut];if(Ut<16)Ar=Sr.high=0|P[H+2*Ut],nr=Sr.low=0|P[H+2*Ut+1];else{var Ur=g[Ut-15],xr=Ur.high,Or=Ur.low,Kr=(xr>>>1|Or<<31)^(xr>>>8|Or<<24)^xr>>>7,va=(Or>>>1|xr<<31)^(Or>>>8|xr<<24)^(Or>>>7|xr<<25),ra=g[Ut-2],ua=ra.high,jn=ra.low,Ha=(ua>>>19|jn<<13)^(ua<<3|jn>>>29)^ua>>>6,Ea=(jn>>>19|ua<<13)^(jn<<3|ua>>>29)^(jn>>>6|ua<<26),Qr=g[Ut-7],gr=Qr.high,rt=Qr.low,ut=g[Ut-16],Zt=ut.high,Pt=ut.low;Ar=(Ar=(Ar=Kr+gr+((nr=va+rt)>>>0<va>>>0?1:0))+Ha+((nr+=Ea)>>>0<Ea>>>0?1:0))+Zt+((nr+=Pt)>>>0<Pt>>>0?1:0),Sr.high=Ar,Sr.low=nr}var sn,nn=Ne&Ze^~Ne&Tt,et=Me&Ft^~Me&St,On=Te&_t^Te&ln^_t&ln,Ln=dt&on^dt&Pn^on&Pn,Jn=(Te>>>28|dt<<4)^(Te<<30|dt>>>2)^(Te<<25|dt>>>7),vr=(dt>>>28|Te<<4)^(dt<<30|Te>>>2)^(dt<<25|Te>>>7),Qt=(Ne>>>14|Me<<18)^(Ne>>>18|Me<<14)^(Ne<<23|Me>>>9),Rt=(Me>>>14|Ne<<18)^(Me>>>18|Ne<<14)^(Me<<23|Ne>>>9),Un=F[Ut],In=Un.high,Nn=Un.low,Fr=un+Qt+((sn=Sn+Rt)>>>0<Sn>>>0?1:0),Mr=vr+Ln;un=Tt,Sn=St,Tt=Ze,St=Ft,Ze=Ne,Ft=Me,Ne=En+(Fr=(Fr=(Fr=Fr+nn+((sn+=et)>>>0<et>>>0?1:0))+In+((sn+=Nn)>>>0<Nn>>>0?1:0))+Ar+((sn+=nr)>>>0<nr>>>0?1:0))+((Me=rn+sn|0)>>>0<rn>>>0?1:0)|0,En=ln,rn=Pn,ln=_t,Pn=on,_t=Te,on=dt,Te=Fr+(Jn+On+(Mr>>>0<vr>>>0?1:0))+((dt=sn+Mr|0)>>>0<sn>>>0?1:0)|0}$=S.low=$+dt,S.high=z+Te+($>>>0<dt>>>0?1:0),ae=x.low=ae+on,x.high=q+_t+(ae>>>0<on>>>0?1:0),ve=d.low=ve+Pn,d.high=Q+ln+(ve>>>0<Pn>>>0?1:0),Re=T.low=Re+rn,T.high=we+En+(Re>>>0<rn>>>0?1:0),Ce=O.low=Ce+Me,O.high=me+Ne+(Ce>>>0<Me>>>0?1:0),be=M.low=be+Ft,M.high=Be+Ze+(be>>>0<Ft>>>0?1:0),Qe=I.low=Qe+St,I.high=Ye+Tt+(Qe>>>0<St>>>0?1:0),He=U.low=He+Sn,U.high=Ge+un+(He>>>0<Sn>>>0?1:0)},_doFinalize:function(){var P=this._data,H=P.words,D=8*this._nDataBytes,S=8*P.sigBytes;return H[S>>>5]|=128<<24-S%32,H[30+(S+128>>>10<<5)]=Math.floor(D/4294967296),H[31+(S+128>>>10<<5)]=D,P.sigBytes=4*H.length,this._process(),this._hash.toX32()},clone:function(){var P=b.clone.call(this);return P._hash=this._hash.clone(),P},blockSize:32});v.SHA512=b._createHelper(A),v.HmacSHA512=b._createHmacHelper(A)}(),R.SHA512)},1396:function(N,y,u){var R;N.exports=(R=u(9021),u(3240),u(6440),u(5503),u(754),u(4725),u(4636),u(5471),u(3009),u(6308),u(1380),u(9557),u(5953),u(8056),u(1025),u(19),u(9506),u(7165),u(2169),u(6939),u(6372),u(3797),u(8454),u(2073),u(4905),u(482),u(2155),u(8124),u(25),u(955),u(7628),u(7193),u(6298),u(2696),u(3128),R)},1425:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.updateV1State=void 0;const R=u(2291),v=u(6011),b={};function E(m,k,w){return m.msecs??=-1/0,m.nsecs??=0,k===m.msecs?(m.nsecs++,m.nsecs>=1e4&&(m.node=void 0,m.nsecs=0)):k>m.msecs?m.nsecs=0:k<m.msecs&&(m.node=void 0),m.node||(m.node=w.slice(10,16),m.node[0]|=1,m.clockseq=16383&(w[8]<<8|w[9])),m.msecs=k,m}function _(m,k,w,F,g,A,P=0){if(m.length<16)throw new Error("Random bytes length must be >= 16");if(A){if(P<0||P+16>A.length)throw new RangeError(`UUID byte range ${P}:${P+15} is out of buffer bounds`)}else A=new Uint8Array(16),P=0;k??=Date.now(),w??=0,F??=16383&(m[8]<<8|m[9]),g??=m.slice(10,16);const H=(1e4*(268435455&(k+=122192928e5))+w)%4294967296;A[P++]=H>>>24&255,A[P++]=H>>>16&255,A[P++]=H>>>8&255,A[P++]=255&H;const D=k/4294967296*1e4&268435455;A[P++]=D>>>8&255,A[P++]=255&D,A[P++]=D>>>24&15|16,A[P++]=D>>>16&255,A[P++]=F>>>8|128,A[P++]=255&F;for(let S=0;S<6;++S)A[P++]=g[S];return A}y.updateV1State=E,y.default=function(m,k,w){let F;const g=m?._v6??!1;if(m){const A=Object.keys(m);A.length===1&&A[0]==="_v6"&&(m=void 0)}if(m)F=_(m.random??m.rng?.()??(0,R.default)(),m.msecs,m.nsecs,m.clockseq,m.node,k,w);else{const A=Date.now(),P=(0,R.default)();E(b,A,P),F=_(P,b.msecs,b.nsecs,g?void 0:b.clockseq,g?void 0:b.node,k,w)}return k??(0,v.unsafeStringify)(F)}},1765:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.clone=function(u){return u===void 0?void 0:Number.isNaN(u)?NaN:typeof structuredClone=="function"?structuredClone(u):JSON.parse(JSON.stringify(u))},y.generateRandomNumber=function(){return Math.round(1e7*Math.random())},y.deepFreeze=function u(R){const v=Reflect.ownKeys(R);for(const b of v){const E=R[b];(E&&typeof E=="object"||typeof E=="function")&&u(E)}return Object.freeze(R)}},1767:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Firefox60=void 0;const R=u(7363),v=u(2994),b=u(4893),E=u(1765),_=u(8046),m=u(5544),k=u(5938),w=u(521),F=u(1305),g=u(3303),A=new v.Logger("Firefox60"),P={OS:16,MIS:2048};class H extends w.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new H}constructor(){super()}get name(){return"Firefox60"}close(){if(A.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){A.debug("getNativeRtpCapabilities()");const S=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),x=document.createElement("canvas");x.getContext("2d");const d=x.captureStream().getVideoTracks()[0];try{S.addTransceiver("audio",{direction:"sendrecv"});const T=S.addTransceiver(d,{direction:"sendrecv"}),O=T.sender.getParameters(),M=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];O.encodings=M,await T.sender.setParameters(O);const I=await S.createOffer();try{x.remove()}catch{}try{d.stop()}catch{}try{S.close()}catch{}const U=R.parse(I.sdp);return m.extractRtpCapabilities({sdpObject:U})}catch(T){try{x.remove()}catch{}try{d.stop()}catch{}try{S.close()}catch{}throw T}}async getNativeSctpCapabilities(){return A.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:S,iceParameters:x,iceCandidates:d,dtlsParameters:T,sctpParameters:O,iceServers:M,iceTransportPolicy:I,additionalSettings:U,proprietaryConstraints:z,extendedRtpCapabilities:$}){this.assertNotClosed(),A.debug("run()"),this._direction=S,this._remoteSdp=new F.RemoteSdp({iceParameters:x,iceCandidates:d,dtlsParameters:T,sctpParameters:O}),this._sendingRtpParametersByKind={audio:_.getSendingRtpParameters("audio",$),video:_.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:_.getSendingRemoteRtpParameters("audio",$),video:_.getSendingRemoteRtpParameters("video",$)},this._pc=new RTCPeerConnection({iceServers:M??[],iceTransportPolicy:I??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...U},z),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",q=>{this.emit("@icecandidateerror",q)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(A.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(S){throw this.assertNotClosed(),new b.UnsupportedError("not supported")}async restartIce(S){if(this.assertNotClosed(),A.debug("restartIce()"),this._remoteSdp.updateIceParameters(S),this._transportReady)if(this._direction==="send"){const x=await this._pc.createOffer({iceRestart:!0});A.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const d={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d)}else{const x={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const d=await this._pc.createAnswer();A.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:S,encodings:x,codecOptions:d,codec:T}){this.assertNotClosed(),this.assertSendDirection(),A.debug("send() [kind:%s, track.id:%s]",S.kind,S.id),x&&((x=E.clone(x)).forEach((ve,we)=>{ve.rid=`r${we}`}),x.reverse());const O=E.clone(this._sendingRtpParametersByKind[S.kind]);O.codecs=_.reduceCodecs(O.codecs,T);const M=E.clone(this._sendingRemoteRtpParametersByKind[S.kind]);M.codecs=_.reduceCodecs(M.codecs,T);const I=this._pc.addTransceiver(S,{direction:"sendonly",streams:[this._sendStream]});if(x){const ve=I.sender.getParameters();ve.encodings=x,await I.sender.setParameters(ve)}const U=await this._pc.createOffer();let z=R.parse(U.sdp);z.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:z});const $=(0,g.parse)((x??[{}])[0].scalabilityMode);A.debug("send() | calling pc.setLocalDescription() [offer:%o]",U),await this._pc.setLocalDescription(U);const q=I.mid;O.mid=q,z=R.parse(this._pc.localDescription.sdp);const ae=z.media[z.media.length-1];if(O.rtcp.cname=m.getCname({offerMediaObject:ae}),x)if(x.length===1){const ve=k.getRtpEncodings({offerMediaObject:ae});Object.assign(ve[0],x[0]),O.encodings=ve}else O.encodings=x.reverse();else O.encodings=k.getRtpEncodings({offerMediaObject:ae});if(O.encodings.length>1&&(O.codecs[0].mimeType.toLowerCase()==="video/vp8"||O.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ve of O.encodings)ve.scalabilityMode?ve.scalabilityMode=`L1T${$.temporalLayers}`:ve.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:ae,offerRtpParameters:O,answerRtpParameters:M,codecOptions:d});const Q={type:"answer",sdp:this._remoteSdp.getSdp()};return A.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Q),await this._pc.setRemoteDescription(Q),this._mapMidTransceiver.set(q,I),{localId:q,rtpParameters:O,rtpSender:I.sender}}async stopSending(S){if(this.assertSendDirection(),A.debug("stopSending() [localId:%s]",S),this._closed)return;const x=this._mapMidTransceiver.get(S);if(!x)throw new Error("associated transceiver not found");x.sender.replaceTrack(null),this._pc.removeTrack(x.sender),this._remoteSdp.disableMediaSection(x.mid);const d=await this._pc.createOffer();A.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const T={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T),this._mapMidTransceiver.delete(S)}async pauseSending(S){this.assertNotClosed(),this.assertSendDirection(),A.debug("pauseSending() [localId:%s]",S);const x=this._mapMidTransceiver.get(S);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(S);const d=await this._pc.createOffer();A.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const T={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}async resumeSending(S){this.assertNotClosed(),this.assertSendDirection(),A.debug("resumeSending() [localId:%s]",S);const x=this._mapMidTransceiver.get(S);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(S);const d=await this._pc.createOffer();A.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const T={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}async replaceTrack(S,x){this.assertNotClosed(),this.assertSendDirection(),x?A.debug("replaceTrack() [localId:%s, track.id:%s]",S,x.id):A.debug("replaceTrack() [localId:%s, no track]",S);const d=this._mapMidTransceiver.get(S);if(!d)throw new Error("associated RTCRtpTransceiver not found");await d.sender.replaceTrack(x)}async setMaxSpatialLayer(S,x){this.assertNotClosed(),this.assertSendDirection(),A.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",S,x);const d=this._mapMidTransceiver.get(S);if(!d)throw new Error("associated transceiver not found");const T=d.sender.getParameters();x=T.encodings.length-1-x,T.encodings.forEach((I,U)=>{I.active=U>=x}),await d.sender.setParameters(T),this._remoteSdp.muxMediaSectionSimulcast(S,T.encodings);const O=await this._pc.createOffer();A.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const M={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async setRtpEncodingParameters(S,x){this.assertNotClosed(),this.assertSendDirection(),A.debug("setRtpEncodingParameters() [localId:%s, params:%o]",S,x);const d=this._mapMidTransceiver.get(S);if(!d)throw new Error("associated RTCRtpTransceiver not found");const T=d.sender.getParameters();T.encodings.forEach((I,U)=>{T.encodings[U]={...I,...x}}),await d.sender.setParameters(T),this._remoteSdp.muxMediaSectionSimulcast(S,T.encodings);const O=await this._pc.createOffer();A.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const M={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async getSenderStats(S){this.assertNotClosed(),this.assertSendDirection();const x=this._mapMidTransceiver.get(S);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.sender.getStats()}async sendDataChannel({ordered:S,maxPacketLifeTime:x,maxRetransmits:d,label:T,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const M={negotiated:!0,id:this._nextSendSctpStreamId,ordered:S,maxPacketLifeTime:x,maxRetransmits:d,protocol:O};A.debug("sendDataChannel() [options:%o]",M);const I=this._pc.createDataChannel(T,M);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const U=await this._pc.createOffer(),z=R.parse(U.sdp),$=z.media.find(ae=>ae.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:z}),A.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",U),await this._pc.setLocalDescription(U),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const q={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._hasDataChannelMediaSection=!0}return{dataChannel:I,sctpStreamParameters:{streamId:M.id,ordered:M.ordered,maxPacketLifeTime:M.maxPacketLifeTime,maxRetransmits:M.maxRetransmits}}}async receive(S){this.assertNotClosed(),this.assertRecvDirection();const x=[],d=new Map;for(const I of S){const{trackId:U,kind:z,rtpParameters:$,streamId:q}=I;A.debug("receive() [trackId:%s, kind:%s]",U,z);const ae=$.mid??String(this._mapMidTransceiver.size);d.set(U,ae),this._remoteSdp.receive({mid:ae,kind:z,offerRtpParameters:$,streamId:q??$.rtcp.cname,trackId:U})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);let O=await this._pc.createAnswer();const M=R.parse(O.sdp);for(const I of S){const{trackId:U,rtpParameters:z}=I,$=d.get(U),q=M.media.find(ae=>String(ae.mid)===$);m.applyCodecParameters({offerRtpParameters:z,answerMediaObject:q}),O={type:"answer",sdp:R.write(M)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:M}),A.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const I of S){const{trackId:U}=I,z=d.get(U),$=this._pc.getTransceivers().find(q=>q.mid===z);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(z,$),x.push({localId:z,track:$.receiver.track,rtpReceiver:$.receiver})}return x}async stopReceiving(S){if(this.assertRecvDirection(),this._closed)return;for(const T of S){A.debug("stopReceiving() [localId:%s]",T);const O=this._mapMidTransceiver.get(T);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const d=await this._pc.createAnswer();A.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d);for(const T of S)this._mapMidTransceiver.delete(T)}async pauseReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const T of S){A.debug("pauseReceiving() [localId:%s]",T);const O=this._mapMidTransceiver.get(T);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(T)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const d=await this._pc.createAnswer();A.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async resumeReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const T of S){A.debug("resumeReceiving() [localId:%s]",T);const O=this._mapMidTransceiver.get(T);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(T)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const d=await this._pc.createAnswer();A.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async getReceiverStats(S){this.assertRecvDirection();const x=this._mapMidTransceiver.get(S);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:S,label:x,protocol:d}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:T,ordered:O,maxPacketLifeTime:M,maxRetransmits:I}=S,U={negotiated:!0,id:T,ordered:O,maxPacketLifeTime:M,maxRetransmits:I,protocol:d};A.debug("receiveDataChannel() [options:%o]",U);const z=this._pc.createDataChannel(x,U);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const q=await this._pc.createAnswer();if(!this._transportReady){const ae=R.parse(q.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:ae})}A.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setLocalDescription(q),this._hasDataChannelMediaSection=!0}return{dataChannel:z}}async setupTransport({localDtlsRole:S,localSdpObject:x}){x||(x=R.parse(this._pc.localDescription.sdp));const d=m.extractDtlsParameters({sdpObject:x});d.role=S,this._remoteSdp.updateDtlsRole(S==="client"?"server":"client"),await new Promise((T,O)=>{this.safeEmit("@connect",{dtlsParameters:d},T,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new b.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.Firefox60=H},1791:(N,y,u)=>{var R=u(5172),v=u(5546);N.exports=function b(E,_){function m(w,F,g,A){try{var P=E[w](F),H=P.value;return H instanceof R?_.resolve(H.v).then(function(D){m("next",D,g,A)},function(D){m("throw",D,g,A)}):_.resolve(H).then(function(D){P.value=D,g(P)},function(D){return m("throw",D,g,A)})}catch(D){A(D)}}var k;this.next||(v(b.prototype),v(b.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),v(this,"_invoke",function(w,F,g){function A(){return new _(function(P,H){m(w,g,P,H)})}return k=k?k.then(A,A):A()},!0)},N.exports.__esModule=!0,N.exports.default=N.exports},1797:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0});const R=u(9746);y.default=function(v){if(!(0,R.default)(v))throw TypeError("Invalid UUID");let b;return Uint8Array.of((b=parseInt(v.slice(0,8),16))>>>24,b>>>16&255,b>>>8&255,255&b,(b=parseInt(v.slice(9,13),16))>>>8,255&b,(b=parseInt(v.slice(14,18),16))>>>8,255&b,(b=parseInt(v.slice(19,23),16))>>>8,255&b,(b=parseInt(v.slice(24,36),16))/1099511627776&255,b/4294967296&255,b>>>24&255,b>>>16&255,b>>>8&255,255&b)}},1803:(N,y,u)=>{u.d(y,{ed:()=>O,sg:()=>M,v7:()=>x});var R=u(4467),v=u(296),b=u(9027);function E(I,U){var z=Object.keys(I);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(I);U&&($=$.filter(function(q){return Object.getOwnPropertyDescriptor(I,q).enumerable})),z.push.apply(z,$)}return z}var _={},m={},k={};for(var w in b.$.videoProfiles)b.$.videoProfiles[w].aspectRatio=="oneSixNine"&&(_[w]=b.$.videoProfiles[w],_[w].encoding={maxBitrate:_[w].bitRate,maxFramerate:_[w].frameRate}),b.$.videoProfiles[w].aspectRatio=="fourThree"&&(m[w]=b.$.videoProfiles[w],m[w].encoding={maxBitrate:m[w].bitRate,maxFramerate:m[w].frameRate});for(var w in b.$.screenShareProfiles)k[w]=b.$.screenShareProfiles[w],k[w].encoding={maxBitrate:k[w].bitRate,maxFramerate:k[w].frameRate};var F=Object.values(_),g=Object.values(m),A=Object.values(k),P=[_.h180p_w320p,_.h360p_w640p],H=[m.h180p_w240p,m.h360p_w480p],D=function(I){return[{scaleResolutionDownBy:2,fps:3}].map(function(U){var z;return{width:Math.floor(I.width/U.scaleResolutionDownBy),height:Math.floor(I.height/U.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(I.encoding.maxBitrate/(Math.pow(U.scaleResolutionDownBy,2)*(((z=I.encoding.maxFramerate)!==null&&z!==void 0?z:30)/U.fps)))),maxFramerate:U.fps}}})},S=["q","h","f"];function x(I,U,z,$,q){var ae=$&&$.videoEncoding;I&&(ae=$&&$.screenShareEncoding);var Q=$?.simulcast;if(ae||(ae=function(be,Ye,Qe){for(var Ge=function(on,ln,Pn){if(on)return A;var En=ln>Pn?ln/Pn:Pn/ln;return Math.abs(En-1.7777777777777777)<Math.abs(En-1.3333333333333333)?F:g}(be,Ye,Qe),He=Ge[0].encoding,Te=Math.max(Ye,Qe),dt=0;dt<Ge.length;dt+=1){var _t=Ge[dt];if(He=_t.encoding,_t.width>=Te)break}return He}(I,U,z)),!Q)return[ae];var ve,we={width:U,height:z,encoding:{maxBitrate:ae.maxBitrate,maxFramerate:ae.maxFramerate}},Re=[],me=(Re=d(I,we))[0];if(Re.length>1){var Ce=Re;ve=(0,v.A)(Ce,2)[1]}var Be=Math.max(U,z);return T(U,z,Be>=960&&ve?[me,ve,we]:Be>=480?[me,we]:[we],q)}function d(I,U){I&&D(U);var z=U.width,$=U.height,q=z>$?z/$:$/z;return Math.abs(q-1.7777777777777777)<Math.abs(q-1.3333333333333333)?P:H}function T(I,U,z,$){var q=[];return z.forEach(function(ae,Q){if(!(Q>=S.length)){var ve=$?null:{maxFramerate:ae.encoding.maxFramerate},we=Math.min(I,U),Re=function(me){for(var Ce=1;Ce<arguments.length;Ce++){var Be=arguments[Ce]!=null?arguments[Ce]:{};Ce%2?E(Object(Be),!0).forEach(function(be){(0,R.A)(me,be,Be[be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(Be)):E(Object(Be)).forEach(function(be){Object.defineProperty(me,be,Object.getOwnPropertyDescriptor(Be,be))})}return me}({rid:S[Q],scaleResolutionDownBy:we/Math.min(ae.width,ae.height),maxBitrate:ae.encoding.maxBitrate},ve);q.push(Re)}}),q}function O(I,U,z){if(!I)return{};var $=I.id,q=I.appData,ae=q.width,Q=q.height,ve=q.encodings;try{var we=function(Ye){var Qe=[];if(Ye&&Ye.length!=0){if(Ye.length===1){for(var Ge=0;Ge<3;Ge++)Qe.push(Math.pow(2,3-Ge-1));return Qe}var He=!1;return Ye.forEach(function(Te){Te.scaleResolutionDownBy!==void 0?(He=!0,Qe.push(Math.max(1,Te.scaleResolutionDownBy))):Qe.push(1)}),He||Ye.forEach(function(Te,dt){Qe[dt]=Math.pow(2,Ye.length-dt-1)}),Qe}}(ve);if(!we)return{};var Re=we.map(function(Ye){return{width:ae/Ye,height:Q/Ye}}).sort(function(Ye,Qe){return Ye.width-Qe.width}),me=Re.findIndex(function(Ye){return Ye.width>=U&&Ye.height>=z});me===-1&&(me=Re.length-1);var Ce=I.temporalLayers?I.temporalLayers:2;if(me===0&&Ce>0){var Be=ae/we[0],be=Q/we[0];U<.5*Be&&z<.5*be&&(Ce-=1),Ce>0&&U<.25*Be&&z<.25*be&&(Ce-=1)}return{consumerId:$,newPreferredSpatialLayer:Math.max(0,me),newPreferredTemporalLayer:Math.max(0,Ce)}}catch{return{}}}function M(I,U){var z;return function(){for(var $=this,q=arguments.length,ae=new Array(q),Q=0;Q<q;Q++)ae[Q]=arguments[Q];clearTimeout(z),z=setTimeout(function(){return I.apply($,ae)},U)}}},1806:(N,y,u)=>{u.d(y,{$Q:()=>R,T4:()=>v,Ts:()=>E,ue:()=>b});var R="vk_e2ee",v={sharedKey:!1,ratchetSalt:"VideoSDKEncryptionRatchetSalt",ratchetWindowSize:0,failureTolerance:10,keyringSize:16,discardFrameWhenCryptorNotReady:!1},b=["vp8","vp9","h264","av1"],E=["opus"]},1919:(N,y,u)=>{u.r(y),u.d(y,{default:()=>Vn});var R={};u.r(R),u.d(R,{Decoder:()=>Ln,Encoder:()=>et,PacketType:()=>nn,protocol:()=>sn});var v=u(296),b=u(5458),E=u(2284),_=u(467),m=u(3029),k=u(2901),w=u(4467),F=u(4756),g=u.n(F);const A=Object.create(null);A.open="0",A.close="1",A.ping="2",A.pong="3",A.message="4",A.upgrade="5",A.noop="6";const P=Object.create(null);Object.keys(A).forEach(ne=>{P[A[ne]]=ne});const H={type:"error",data:"parser error"},D=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",S=typeof ArrayBuffer=="function",x=ne=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(ne):ne&&ne.buffer instanceof ArrayBuffer,d=({type:ne,data:Y},J,ce)=>D&&Y instanceof Blob?J?ce(Y):T(Y,ce):S&&(Y instanceof ArrayBuffer||x(Y))?J?ce(Y):T(new Blob([Y]),ce):ce(A[ne]+(Y||"")),T=(ne,Y)=>{const J=new FileReader;return J.onload=function(){const ce=J.result.split(",")[1];Y("b"+(ce||""))},J.readAsDataURL(ne)};function O(ne){return ne instanceof Uint8Array?ne:ne instanceof ArrayBuffer?new Uint8Array(ne):new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength)}let M;const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let ne=0;ne<64;ne++)U[I.charCodeAt(ne)]=ne;const z=typeof ArrayBuffer=="function",$=(ne,Y)=>{if(typeof ne!="string")return{type:"message",data:ae(ne,Y)};const J=ne.charAt(0);return J==="b"?{type:"message",data:q(ne.substring(1),Y)}:P[J]?ne.length>1?{type:P[J],data:ne.substring(1)}:{type:P[J]}:H},q=(ne,Y)=>{if(z){const J=(ce=>{let je,at,Ct,It,wt,zn=.75*ce.length,Yt=ce.length,Gn=0;ce[ce.length-1]==="="&&(zn--,ce[ce.length-2]==="="&&zn--);const kn=new ArrayBuffer(zn),sa=new Uint8Array(kn);for(je=0;je<Yt;je+=4)at=U[ce.charCodeAt(je)],Ct=U[ce.charCodeAt(je+1)],It=U[ce.charCodeAt(je+2)],wt=U[ce.charCodeAt(je+3)],sa[Gn++]=at<<2|Ct>>4,sa[Gn++]=(15&Ct)<<4|It>>2,sa[Gn++]=(3&It)<<6|63&wt;return kn})(ne);return ae(J,Y)}return{base64:!0,data:ne}},ae=(ne,Y)=>Y==="blob"?ne instanceof Blob?ne:new Blob([ne]):ne instanceof ArrayBuffer?ne:ne.buffer,Q="";function ve(){return new TransformStream({transform(ne,Y){(function(J,ce){D&&J.data instanceof Blob?J.data.arrayBuffer().then(O).then(ce):S&&(J.data instanceof ArrayBuffer||x(J.data))?ce(O(J.data)):d(J,!1,je=>{M||(M=new TextEncoder),ce(M.encode(je))})})(ne,J=>{const ce=J.length;let je;if(ce<126)je=new Uint8Array(1),new DataView(je.buffer).setUint8(0,ce);else if(ce<65536){je=new Uint8Array(3);const at=new DataView(je.buffer);at.setUint8(0,126),at.setUint16(1,ce)}else{je=new Uint8Array(9);const at=new DataView(je.buffer);at.setUint8(0,127),at.setBigUint64(1,BigInt(ce))}ne.data&&typeof ne.data!="string"&&(je[0]|=128),Y.enqueue(je),Y.enqueue(J)})}})}let we;function Re(ne){return ne.reduce((Y,J)=>Y+J.length,0)}function me(ne,Y){if(ne[0].length===Y)return ne.shift();const J=new Uint8Array(Y);let ce=0;for(let je=0;je<Y;je++)J[je]=ne[0][ce++],ce===ne[0].length&&(ne.shift(),ce=0);return ne.length&&ce<ne[0].length&&(ne[0]=ne[0].slice(ce)),J}function Ce(ne){if(ne)return function(Y){for(var J in Ce.prototype)Y[J]=Ce.prototype[J];return Y}(ne)}Ce.prototype.on=Ce.prototype.addEventListener=function(ne,Y){return this._callbacks=this._callbacks||{},(this._callbacks["$"+ne]=this._callbacks["$"+ne]||[]).push(Y),this},Ce.prototype.once=function(ne,Y){function J(){this.off(ne,J),Y.apply(this,arguments)}return J.fn=Y,this.on(ne,J),this},Ce.prototype.off=Ce.prototype.removeListener=Ce.prototype.removeAllListeners=Ce.prototype.removeEventListener=function(ne,Y){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var J,ce=this._callbacks["$"+ne];if(!ce)return this;if(arguments.length==1)return delete this._callbacks["$"+ne],this;for(var je=0;je<ce.length;je++)if((J=ce[je])===Y||J.fn===Y){ce.splice(je,1);break}return ce.length===0&&delete this._callbacks["$"+ne],this},Ce.prototype.emit=function(ne){this._callbacks=this._callbacks||{};for(var Y=new Array(arguments.length-1),J=this._callbacks["$"+ne],ce=1;ce<arguments.length;ce++)Y[ce-1]=arguments[ce];if(J){ce=0;for(var je=(J=J.slice(0)).length;ce<je;++ce)J[ce].apply(this,Y)}return this},Ce.prototype.emitReserved=Ce.prototype.emit,Ce.prototype.listeners=function(ne){return this._callbacks=this._callbacks||{},this._callbacks["$"+ne]||[]},Ce.prototype.hasListeners=function(ne){return!!this.listeners(ne).length};const Be=typeof Promise=="function"&&typeof Promise.resolve=="function"?ne=>Promise.resolve().then(ne):(ne,Y)=>Y(ne,0),be=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Ye(ne,...Y){return Y.reduce((J,ce)=>(ne.hasOwnProperty(ce)&&(J[ce]=ne[ce]),J),{})}const Qe=be.setTimeout,Ge=be.clearTimeout;function He(ne,Y){Y.useNativeTimers?(ne.setTimeoutFn=Qe.bind(be),ne.clearTimeoutFn=Ge.bind(be)):(ne.setTimeoutFn=be.setTimeout.bind(be),ne.clearTimeoutFn=be.clearTimeout.bind(be))}function Te(ne){return typeof ne=="string"?function(Y){let J=0,ce=0;for(let je=0,at=Y.length;je<at;je++)J=Y.charCodeAt(je),J<128?ce+=1:J<2048?ce+=2:J<55296||J>=57344?ce+=3:(je++,ce+=4);return ce}(ne):Math.ceil(1.33*(ne.byteLength||ne.size))}function dt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class _t extends Error{constructor(Y,J,ce){super(Y),this.description=J,this.context=ce,this.type="TransportError"}}class on extends Ce{constructor(Y){super(),this.writable=!1,He(this,Y),this.opts=Y,this.query=Y.query,this.socket=Y.socket,this.supportsBinary=!Y.forceBase64}onError(Y,J,ce){return super.emitReserved("error",new _t(Y,J,ce)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this}send(Y){this.readyState==="open"&&this.write(Y)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(Y){const J=$(Y,this.socket.binaryType);this.onPacket(J)}onPacket(Y){super.emitReserved("packet",Y)}onClose(Y){this.readyState="closed",super.emitReserved("close",Y)}pause(Y){}createUri(Y,J={}){return Y+"://"+this._hostname()+this._port()+this.opts.path+this._query(J)}_hostname(){const Y=this.opts.hostname;return Y.indexOf(":")===-1?Y:"["+Y+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(Y){const J=function(ce){let je="";for(let at in ce)ce.hasOwnProperty(at)&&(je.length&&(je+="&"),je+=encodeURIComponent(at)+"="+encodeURIComponent(ce[at]));return je}(Y);return J.length?"?"+J:""}}class ln extends on{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(Y){this.readyState="pausing";const J=()=>{this.readyState="paused",Y()};if(this._polling||!this.writable){let ce=0;this._polling&&(ce++,this.once("pollComplete",function(){--ce||J()})),this.writable||(ce++,this.once("drain",function(){--ce||J()}))}else J()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(Y){((J,ce)=>{const je=J.split(Q),at=[];for(let Ct=0;Ct<je.length;Ct++){const It=$(je[Ct],ce);if(at.push(It),It.type==="error")break}return at})(Y,this.socket.binaryType).forEach(J=>{if(this.readyState==="opening"&&J.type==="open"&&this.onOpen(),J.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(J)}),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const Y=()=>{this.write([{type:"close"}])};this.readyState==="open"?Y():this.once("open",Y)}write(Y){this.writable=!1,((J,ce)=>{const je=J.length,at=new Array(je);let Ct=0;J.forEach((It,wt)=>{d(It,!1,zn=>{at[wt]=zn,++Ct===je&&ce(at.join(Q))})})})(Y,J=>{this.doWrite(J,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const Y=this.opts.secure?"https":"http",J=this.query||{};return this.opts.timestampRequests!==!1&&(J[this.opts.timestampParam]=dt()),this.supportsBinary||J.sid||(J.b64=1),this.createUri(Y,J)}}let Pn=!1;try{Pn=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const En=Pn;function rn(){}class Ne extends ln{constructor(Y){if(super(Y),typeof location<"u"){const J=location.protocol==="https:";let ce=location.port;ce||(ce=J?"443":"80"),this.xd=typeof location<"u"&&Y.hostname!==location.hostname||ce!==Y.port}}doWrite(Y,J){const ce=this.request({method:"POST",data:Y});ce.on("success",J),ce.on("error",(je,at)=>{this.onError("xhr post error",je,at)})}doPoll(){const Y=this.request();Y.on("data",this.onData.bind(this)),Y.on("error",(J,ce)=>{this.onError("xhr poll error",J,ce)}),this.pollXhr=Y}}class Me extends Ce{constructor(Y,J,ce){super(),this.createRequest=Y,He(this,ce),this._opts=ce,this._method=ce.method||"GET",this._uri=J,this._data=ce.data!==void 0?ce.data:null,this._create()}_create(){var Y;const J=Ye(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");J.xdomain=!!this._opts.xd;const ce=this._xhr=this.createRequest(J);try{ce.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){ce.setDisableHeaderCheck&&ce.setDisableHeaderCheck(!0);for(let je in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(je)&&ce.setRequestHeader(je,this._opts.extraHeaders[je])}}catch{}if(this._method==="POST")try{ce.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{ce.setRequestHeader("Accept","*/*")}catch{}(Y=this._opts.cookieJar)===null||Y===void 0||Y.addCookies(ce),"withCredentials"in ce&&(ce.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(ce.timeout=this._opts.requestTimeout),ce.onreadystatechange=()=>{var je;ce.readyState===3&&((je=this._opts.cookieJar)===null||je===void 0||je.parseCookies(ce.getResponseHeader("set-cookie"))),ce.readyState===4&&(ce.status===200||ce.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof ce.status=="number"?ce.status:0)},0))},ce.send(this._data)}catch(je){return void this.setTimeoutFn(()=>{this._onError(je)},0)}typeof document<"u"&&(this._index=Me.requestsCount++,Me.requests[this._index]=this)}_onError(Y){this.emitReserved("error",Y,this._xhr),this._cleanup(!0)}_cleanup(Y){if(this._xhr!==void 0&&this._xhr!==null){if(this._xhr.onreadystatechange=rn,Y)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Me.requests[this._index],this._xhr=null}}_onLoad(){const Y=this._xhr.responseText;Y!==null&&(this.emitReserved("data",Y),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Me.requestsCount=0,Me.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",Ze):typeof addEventListener=="function"&&addEventListener("onpagehide"in be?"pagehide":"unload",Ze,!1));function Ze(){for(let ne in Me.requests)Me.requests.hasOwnProperty(ne)&&Me.requests[ne].abort()}const Ft=function(){const ne=Tt({xdomain:!1});return ne&&ne.responseType!==null}();function Tt(ne){const Y=ne.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!Y||En))return new XMLHttpRequest}catch{}if(!Y)try{return new be[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const St=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class un extends on{get name(){return"websocket"}doOpen(){const Y=this.uri(),J=this.opts.protocols,ce=St?{}:Ye(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(ce.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(Y,J,ce)}catch(je){return this.emitReserved("error",je)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=Y=>this.onClose({description:"websocket connection closed",context:Y}),this.ws.onmessage=Y=>this.onData(Y.data),this.ws.onerror=Y=>this.onError("websocket error",Y)}write(Y){this.writable=!1;for(let J=0;J<Y.length;J++){const ce=Y[J],je=J===Y.length-1;d(ce,this.supportsBinary,at=>{try{this.doWrite(ce,at)}catch{}je&&Be(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const Y=this.opts.secure?"wss":"ws",J=this.query||{};return this.opts.timestampRequests&&(J[this.opts.timestampParam]=dt()),this.supportsBinary||(J.b64=1),this.createUri(Y,J)}}const Sn=be.WebSocket||be.MozWebSocket,Ut={websocket:class extends un{createSocket(ne,Y,J){return St?new Sn(ne,Y,J):Y?new Sn(ne,Y):new Sn(ne)}doWrite(ne,Y){this.ws.send(Y)}},webtransport:class extends on{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(ne){return this.emitReserved("error",ne)}this._transport.closed.then(()=>{this.onClose()}).catch(ne=>{this.onError("webtransport error",ne)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(ne=>{const Y=function(Ct,It){we||(we=new TextDecoder);const wt=[];let zn=0,Yt=-1,Gn=!1;return new TransformStream({transform(kn,sa){for(wt.push(kn);;){if(zn===0){if(Re(wt)<1)break;const Xr=me(wt,1);Gn=!(128&~Xr[0]),Yt=127&Xr[0],zn=Yt<126?3:Yt===126?1:2}else if(zn===1){if(Re(wt)<2)break;const Xr=me(wt,2);Yt=new DataView(Xr.buffer,Xr.byteOffset,Xr.length).getUint16(0),zn=3}else if(zn===2){if(Re(wt)<8)break;const Xr=me(wt,8),pa=new DataView(Xr.buffer,Xr.byteOffset,Xr.length),ia=pa.getUint32(0);if(ia>Math.pow(2,21)-1){sa.enqueue(H);break}Yt=ia*Math.pow(2,32)+pa.getUint32(4),zn=3}else{if(Re(wt)<Yt)break;const Xr=me(wt,Yt);sa.enqueue($(Gn?Xr:we.decode(Xr),It)),zn=0}if(Yt===0||Yt>Ct){sa.enqueue(H);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),J=ne.readable.pipeThrough(Y).getReader(),ce=ve();ce.readable.pipeTo(ne.writable),this._writer=ce.writable.getWriter();const je=()=>{J.read().then(({done:Ct,value:It})=>{Ct||(this.onPacket(It),je())}).catch(Ct=>{})};je();const at={type:"open"};this.query.sid&&(at.data=`{"sid":"${this.query.sid}"}`),this._writer.write(at).then(()=>this.onOpen())})})}write(ne){this.writable=!1;for(let Y=0;Y<ne.length;Y++){const J=ne[Y],ce=Y===ne.length-1;this._writer.write(J).then(()=>{ce&&Be(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var ne;(ne=this._transport)===null||ne===void 0||ne.close()}},polling:class extends Ne{constructor(ne){super(ne);const Y=ne&&ne.forceBase64;this.supportsBinary=Ft&&!Y}request(ne={}){return Object.assign(ne,{xd:this.xd},this.opts),new Me(Tt,this.uri(),ne)}}},nr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ar=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Sr(ne){if(ne.length>8e3)throw"URI too long";const Y=ne,J=ne.indexOf("["),ce=ne.indexOf("]");J!=-1&&ce!=-1&&(ne=ne.substring(0,J)+ne.substring(J,ce).replace(/:/g,";")+ne.substring(ce,ne.length));let je=nr.exec(ne||""),at={},Ct=14;for(;Ct--;)at[Ar[Ct]]=je[Ct]||"";return J!=-1&&ce!=-1&&(at.source=Y,at.host=at.host.substring(1,at.host.length-1).replace(/;/g,":"),at.authority=at.authority.replace("[","").replace("]","").replace(/;/g,":"),at.ipv6uri=!0),at.pathNames=function(It,wt){const zn=/\/{2,9}/g,Yt=wt.replace(zn,"/").split("/");return wt.slice(0,1)!="/"&&wt.length!==0||Yt.splice(0,1),wt.slice(-1)=="/"&&Yt.splice(Yt.length-1,1),Yt}(0,at.path),at.queryKey=function(It,wt){const zn={};return wt.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(Yt,Gn,kn){Gn&&(zn[Gn]=kn)}),zn}(0,at.query),at}const Ur=typeof addEventListener=="function"&&typeof removeEventListener=="function",xr=[];Ur&&addEventListener("offline",()=>{xr.forEach(ne=>ne())},!1);class Or extends Ce{constructor(Y,J){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,Y&&typeof Y=="object"&&(J=Y,Y=null),Y){const ce=Sr(Y);J.hostname=ce.host,J.secure=ce.protocol==="https"||ce.protocol==="wss",J.port=ce.port,ce.query&&(J.query=ce.query)}else J.host&&(J.hostname=Sr(J.host).host);He(this,J),this.secure=J.secure!=null?J.secure:typeof location<"u"&&location.protocol==="https:",J.hostname&&!J.port&&(J.port=this.secure?"443":"80"),this.hostname=J.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=J.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},J.transports.forEach(ce=>{const je=ce.prototype.name;this.transports.push(je),this._transportsByName[je]=ce}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},J),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=function(ce){let je={},at=ce.split("&");for(let Ct=0,It=at.length;Ct<It;Ct++){let wt=at[Ct].split("=");je[decodeURIComponent(wt[0])]=decodeURIComponent(wt[1])}return je}(this.opts.query)),Ur&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},xr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(Y){const J=Object.assign({},this.opts.query);J.EIO=4,J.transport=Y,this.id&&(J.sid=this.id);const ce=Object.assign({},this.opts,{query:J,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[Y]);return new this._transportsByName[Y](ce)}_open(){if(this.transports.length===0)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const Y=this.opts.rememberUpgrade&&Or.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const J=this.createTransport(Y);J.open(),this.setTransport(J)}setTransport(Y){this.transport&&this.transport.removeAllListeners(),this.transport=Y,Y.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",J=>this._onClose("transport close",J))}onOpen(){this.readyState="open",Or.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(Y){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",Y),this.emitReserved("heartbeat"),Y.type){case"open":this.onHandshake(JSON.parse(Y.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const J=new Error("server error");J.code=Y.data,this._onError(J);break;case"message":this.emitReserved("data",Y.data),this.emitReserved("message",Y.data)}}onHandshake(Y){this.emitReserved("handshake",Y),this.id=Y.sid,this.transport.query.sid=Y.sid,this._pingInterval=Y.pingInterval,this._pingTimeout=Y.pingTimeout,this._maxPayload=Y.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const Y=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+Y,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},Y),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const Y=this._getWritablePackets();this.transport.send(Y),this._prevBufferLen=Y.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let Y=1;for(let J=0;J<this.writeBuffer.length;J++){const ce=this.writeBuffer[J].data;if(ce&&(Y+=Te(ce)),J>0&&Y>this._maxPayload)return this.writeBuffer.slice(0,J);Y+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const Y=Date.now()>this._pingTimeoutTime;return Y&&(this._pingTimeoutTime=0,Be(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),Y}write(Y,J,ce){return this._sendPacket("message",Y,J,ce),this}send(Y,J,ce){return this._sendPacket("message",Y,J,ce),this}_sendPacket(Y,J,ce,je){if(typeof J=="function"&&(je=J,J=void 0),typeof ce=="function"&&(je=ce,ce=null),this.readyState==="closing"||this.readyState==="closed")return;(ce=ce||{}).compress=ce.compress!==!1;const at={type:Y,data:J,options:ce};this.emitReserved("packetCreate",at),this.writeBuffer.push(at),je&&this.once("flush",je),this.flush()}close(){const Y=()=>{this._onClose("forced close"),this.transport.close()},J=()=>{this.off("upgrade",J),this.off("upgradeError",J),Y()},ce=()=>{this.once("upgrade",J),this.once("upgradeError",J)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?ce():Y()}):this.upgrading?ce():Y()),this}_onError(Y){if(Or.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",Y),this._onClose("transport error",Y)}_onClose(Y,J){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ur&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const ce=xr.indexOf(this._offlineEventListener);ce!==-1&&xr.splice(ce,1)}this.readyState="closed",this.id=null,this.emitReserved("close",Y,J),this.writeBuffer=[],this._prevBufferLen=0}}}Or.protocol=4;class Kr extends Or{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let Y=0;Y<this._upgrades.length;Y++)this._probe(this._upgrades[Y])}_probe(Y){let J=this.createTransport(Y),ce=!1;Or.priorWebsocketSuccess=!1;const je=()=>{ce||(J.send([{type:"ping",data:"probe"}]),J.once("packet",Gn=>{if(!ce)if(Gn.type==="pong"&&Gn.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",J),!J)return;Or.priorWebsocketSuccess=J.name==="websocket",this.transport.pause(()=>{ce||this.readyState!=="closed"&&(Yt(),this.setTransport(J),J.send([{type:"upgrade"}]),this.emitReserved("upgrade",J),J=null,this.upgrading=!1,this.flush())})}else{const kn=new Error("probe error");kn.transport=J.name,this.emitReserved("upgradeError",kn)}}))};function at(){ce||(ce=!0,Yt(),J.close(),J=null)}const Ct=Gn=>{const kn=new Error("probe error: "+Gn);kn.transport=J.name,at(),this.emitReserved("upgradeError",kn)};function It(){Ct("transport closed")}function wt(){Ct("socket closed")}function zn(Gn){J&&Gn.name!==J.name&&at()}const Yt=()=>{J.removeListener("open",je),J.removeListener("error",Ct),J.removeListener("close",It),this.off("close",wt),this.off("upgrading",zn)};J.once("open",je),J.once("error",Ct),J.once("close",It),this.once("close",wt),this.once("upgrading",zn),this._upgrades.indexOf("webtransport")!==-1&&Y!=="webtransport"?this.setTimeoutFn(()=>{ce||J.open()},200):J.open()}onHandshake(Y){this._upgrades=this._filterUpgrades(Y.upgrades),super.onHandshake(Y)}_filterUpgrades(Y){const J=[];for(let ce=0;ce<Y.length;ce++)~this.transports.indexOf(Y[ce])&&J.push(Y[ce]);return J}}class va extends Kr{constructor(Y,J={}){const ce=typeof Y=="object"?Y:J;(!ce.transports||ce.transports&&typeof ce.transports[0]=="string")&&(ce.transports=(ce.transports||["polling","websocket","webtransport"]).map(je=>Ut[je]).filter(je=>!!je)),super(Y,ce)}}const ra=typeof ArrayBuffer=="function",ua=Object.prototype.toString,jn=typeof Blob=="function"||typeof Blob<"u"&&ua.call(Blob)==="[object BlobConstructor]",Ha=typeof File=="function"||typeof File<"u"&&ua.call(File)==="[object FileConstructor]";function Ea(ne){return ra&&(ne instanceof ArrayBuffer||(Y=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(Y):Y.buffer instanceof ArrayBuffer)(ne))||jn&&ne instanceof Blob||Ha&&ne instanceof File}function Qr(ne,Y){if(!ne||typeof ne!="object")return!1;if(Array.isArray(ne)){for(let J=0,ce=ne.length;J<ce;J++)if(Qr(ne[J]))return!0;return!1}if(Ea(ne))return!0;if(ne.toJSON&&typeof ne.toJSON=="function"&&arguments.length===1)return Qr(ne.toJSON(),!0);for(const J in ne)if(Object.prototype.hasOwnProperty.call(ne,J)&&Qr(ne[J]))return!0;return!1}function gr(ne){const Y=[],J=ne.data,ce=ne;return ce.data=rt(J,Y),ce.attachments=Y.length,{packet:ce,buffers:Y}}function rt(ne,Y){if(!ne)return ne;if(Ea(ne)){const J={_placeholder:!0,num:Y.length};return Y.push(ne),J}if(Array.isArray(ne)){const J=new Array(ne.length);for(let ce=0;ce<ne.length;ce++)J[ce]=rt(ne[ce],Y);return J}if(typeof ne=="object"&&!(ne instanceof Date)){const J={};for(const ce in ne)Object.prototype.hasOwnProperty.call(ne,ce)&&(J[ce]=rt(ne[ce],Y));return J}return ne}function ut(ne,Y){return ne.data=Zt(ne.data,Y),delete ne.attachments,ne}function Zt(ne,Y){if(!ne)return ne;if(ne&&ne._placeholder===!0){if(typeof ne.num=="number"&&ne.num>=0&&ne.num<Y.length)return Y[ne.num];throw new Error("illegal attachments")}if(Array.isArray(ne))for(let J=0;J<ne.length;J++)ne[J]=Zt(ne[J],Y);else if(typeof ne=="object")for(const J in ne)Object.prototype.hasOwnProperty.call(ne,J)&&(ne[J]=Zt(ne[J],Y));return ne}const Pt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],sn=5;var nn;(function(ne){ne[ne.CONNECT=0]="CONNECT",ne[ne.DISCONNECT=1]="DISCONNECT",ne[ne.EVENT=2]="EVENT",ne[ne.ACK=3]="ACK",ne[ne.CONNECT_ERROR=4]="CONNECT_ERROR",ne[ne.BINARY_EVENT=5]="BINARY_EVENT",ne[ne.BINARY_ACK=6]="BINARY_ACK"})(nn||(nn={}));class et{constructor(Y){this.replacer=Y}encode(Y){return Y.type!==nn.EVENT&&Y.type!==nn.ACK||!Qr(Y)?[this.encodeAsString(Y)]:this.encodeAsBinary({type:Y.type===nn.EVENT?nn.BINARY_EVENT:nn.BINARY_ACK,nsp:Y.nsp,data:Y.data,id:Y.id})}encodeAsString(Y){let J=""+Y.type;return Y.type!==nn.BINARY_EVENT&&Y.type!==nn.BINARY_ACK||(J+=Y.attachments+"-"),Y.nsp&&Y.nsp!=="/"&&(J+=Y.nsp+","),Y.id!=null&&(J+=Y.id),Y.data!=null&&(J+=JSON.stringify(Y.data,this.replacer)),J}encodeAsBinary(Y){const J=gr(Y),ce=this.encodeAsString(J.packet),je=J.buffers;return je.unshift(ce),je}}function On(ne){return Object.prototype.toString.call(ne)==="[object Object]"}class Ln extends Ce{constructor(Y){super(),this.reviver=Y}add(Y){let J;if(typeof Y=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");J=this.decodeString(Y);const ce=J.type===nn.BINARY_EVENT;ce||J.type===nn.BINARY_ACK?(J.type=ce?nn.EVENT:nn.ACK,this.reconstructor=new Jn(J),J.attachments===0&&super.emitReserved("decoded",J)):super.emitReserved("decoded",J)}else{if(!Ea(Y)&&!Y.base64)throw new Error("Unknown type: "+Y);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");J=this.reconstructor.takeBinaryData(Y),J&&(this.reconstructor=null,super.emitReserved("decoded",J))}}decodeString(Y){let J=0;const ce={type:Number(Y.charAt(0))};if(nn[ce.type]===void 0)throw new Error("unknown packet type "+ce.type);if(ce.type===nn.BINARY_EVENT||ce.type===nn.BINARY_ACK){const at=J+1;for(;Y.charAt(++J)!=="-"&&J!=Y.length;);const Ct=Y.substring(at,J);if(Ct!=Number(Ct)||Y.charAt(J)!=="-")throw new Error("Illegal attachments");ce.attachments=Number(Ct)}if(Y.charAt(J+1)==="/"){const at=J+1;for(;++J&&!(Y.charAt(J)===","||J===Y.length););ce.nsp=Y.substring(at,J)}else ce.nsp="/";const je=Y.charAt(J+1);if(je!==""&&Number(je)==je){const at=J+1;for(;++J;){const Ct=Y.charAt(J);if(Ct==null||Number(Ct)!=Ct){--J;break}if(J===Y.length)break}ce.id=Number(Y.substring(at,J+1))}if(Y.charAt(++J)){const at=this.tryParse(Y.substr(J));if(!Ln.isPayloadValid(ce.type,at))throw new Error("invalid payload");ce.data=at}return ce}tryParse(Y){try{return JSON.parse(Y,this.reviver)}catch{return!1}}static isPayloadValid(Y,J){switch(Y){case nn.CONNECT:return On(J);case nn.DISCONNECT:return J===void 0;case nn.CONNECT_ERROR:return typeof J=="string"||On(J);case nn.EVENT:case nn.BINARY_EVENT:return Array.isArray(J)&&(typeof J[0]=="number"||typeof J[0]=="string"&&Pt.indexOf(J[0])===-1);case nn.ACK:case nn.BINARY_ACK:return Array.isArray(J)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Jn{constructor(Y){this.packet=Y,this.buffers=[],this.reconPack=Y}takeBinaryData(Y){if(this.buffers.push(Y),this.buffers.length===this.reconPack.attachments){const J=ut(this.reconPack,this.buffers);return this.finishedReconstruction(),J}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function vr(ne,Y,J){return ne.on(Y,J),function(){ne.off(Y,J)}}const Qt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Rt extends Ce{constructor(Y,J,ce){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=Y,this.nsp=J,ce&&ce.auth&&(this.auth=ce.auth),this._opts=Object.assign({},ce),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const Y=this.io;this.subs=[vr(Y,"open",this.onopen.bind(this)),vr(Y,"packet",this.onpacket.bind(this)),vr(Y,"error",this.onerror.bind(this)),vr(Y,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this}open(){return this.connect()}send(...Y){return Y.unshift("message"),this.emit.apply(this,Y),this}emit(Y,...J){var ce,je,at;if(Qt.hasOwnProperty(Y))throw new Error('"'+Y.toString()+'" is a reserved event name');if(J.unshift(Y),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(J),this;const Ct={type:nn.EVENT,data:J,options:{}};if(Ct.options.compress=this.flags.compress!==!1,typeof J[J.length-1]=="function"){const zn=this.ids++,Yt=J.pop();this._registerAckCallback(zn,Yt),Ct.id=zn}const It=(je=(ce=this.io.engine)===null||ce===void 0?void 0:ce.transport)===null||je===void 0?void 0:je.writable,wt=this.connected&&!(!((at=this.io.engine)===null||at===void 0)&&at._hasPingExpired());return this.flags.volatile&&!It||(wt?(this.notifyOutgoingListeners(Ct),this.packet(Ct)):this.sendBuffer.push(Ct)),this.flags={},this}_registerAckCallback(Y,J){var ce;const je=(ce=this.flags.timeout)!==null&&ce!==void 0?ce:this._opts.ackTimeout;if(je===void 0)return void(this.acks[Y]=J);const at=this.io.setTimeoutFn(()=>{delete this.acks[Y];for(let It=0;It<this.sendBuffer.length;It++)this.sendBuffer[It].id===Y&&this.sendBuffer.splice(It,1);J.call(this,new Error("operation has timed out"))},je),Ct=(...It)=>{this.io.clearTimeoutFn(at),J.apply(this,It)};Ct.withError=!0,this.acks[Y]=Ct}emitWithAck(Y,...J){return new Promise((ce,je)=>{const at=(Ct,It)=>Ct?je(Ct):ce(It);at.withError=!0,J.push(at),this.emit(Y,...J)})}_addToQueue(Y){let J;typeof Y[Y.length-1]=="function"&&(J=Y.pop());const ce={id:this._queueSeq++,tryCount:0,pending:!1,args:Y,flags:Object.assign({fromQueue:!0},this.flags)};Y.push((je,...at)=>{if(ce===this._queue[0])return je!==null?ce.tryCount>this._opts.retries&&(this._queue.shift(),J&&J(je)):(this._queue.shift(),J&&J(null,...at)),ce.pending=!1,this._drainQueue()}),this._queue.push(ce),this._drainQueue()}_drainQueue(Y=!1){if(!this.connected||this._queue.length===0)return;const J=this._queue[0];J.pending&&!Y||(J.pending=!0,J.tryCount++,this.flags=J.flags,this.emit.apply(this,J.args))}packet(Y){Y.nsp=this.nsp,this.io._packet(Y)}onopen(){typeof this.auth=="function"?this.auth(Y=>{this._sendConnectPacket(Y)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(Y){this.packet({type:nn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},Y):Y})}onerror(Y){this.connected||this.emitReserved("connect_error",Y)}onclose(Y,J){this.connected=!1,delete this.id,this.emitReserved("disconnect",Y,J),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(Y=>{if(!this.sendBuffer.some(J=>String(J.id)===Y)){const J=this.acks[Y];delete this.acks[Y],J.withError&&J.call(this,new Error("socket has been disconnected"))}})}onpacket(Y){if(Y.nsp===this.nsp)switch(Y.type){case nn.CONNECT:Y.data&&Y.data.sid?this.onconnect(Y.data.sid,Y.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case nn.EVENT:case nn.BINARY_EVENT:this.onevent(Y);break;case nn.ACK:case nn.BINARY_ACK:this.onack(Y);break;case nn.DISCONNECT:this.ondisconnect();break;case nn.CONNECT_ERROR:this.destroy();const J=new Error(Y.data.message);J.data=Y.data.data,this.emitReserved("connect_error",J)}}onevent(Y){const J=Y.data||[];Y.id!=null&&J.push(this.ack(Y.id)),this.connected?this.emitEvent(J):this.receiveBuffer.push(Object.freeze(J))}emitEvent(Y){if(this._anyListeners&&this._anyListeners.length){const J=this._anyListeners.slice();for(const ce of J)ce.apply(this,Y)}super.emit.apply(this,Y),this._pid&&Y.length&&typeof Y[Y.length-1]=="string"&&(this._lastOffset=Y[Y.length-1])}ack(Y){const J=this;let ce=!1;return function(...je){ce||(ce=!0,J.packet({type:nn.ACK,id:Y,data:je}))}}onack(Y){const J=this.acks[Y.id];typeof J=="function"&&(delete this.acks[Y.id],J.withError&&Y.data.unshift(null),J.apply(this,Y.data))}onconnect(Y,J){this.id=Y,this.recovered=J&&this._pid===J,this._pid=J,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(Y=>this.emitEvent(Y)),this.receiveBuffer=[],this.sendBuffer.forEach(Y=>{this.notifyOutgoingListeners(Y),this.packet(Y)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(Y=>Y()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:nn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(Y){return this.flags.compress=Y,this}get volatile(){return this.flags.volatile=!0,this}timeout(Y){return this.flags.timeout=Y,this}onAny(Y){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(Y),this}prependAny(Y){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(Y),this}offAny(Y){if(!this._anyListeners)return this;if(Y){const J=this._anyListeners;for(let ce=0;ce<J.length;ce++)if(Y===J[ce])return J.splice(ce,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(Y){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(Y),this}prependAnyOutgoing(Y){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(Y),this}offAnyOutgoing(Y){if(!this._anyOutgoingListeners)return this;if(Y){const J=this._anyOutgoingListeners;for(let ce=0;ce<J.length;ce++)if(Y===J[ce])return J.splice(ce,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(Y){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const J=this._anyOutgoingListeners.slice();for(const ce of J)ce.apply(this,Y.data)}}}function Un(ne){ne=ne||{},this.ms=ne.min||100,this.max=ne.max||1e4,this.factor=ne.factor||2,this.jitter=ne.jitter>0&&ne.jitter<=1?ne.jitter:0,this.attempts=0}Un.prototype.duration=function(){var ne=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var Y=Math.random(),J=Math.floor(Y*this.jitter*ne);ne=1&Math.floor(10*Y)?ne+J:ne-J}return 0|Math.min(ne,this.max)},Un.prototype.reset=function(){this.attempts=0},Un.prototype.setMin=function(ne){this.ms=ne},Un.prototype.setMax=function(ne){this.max=ne},Un.prototype.setJitter=function(ne){this.jitter=ne};class In extends Ce{constructor(Y,J){var ce;super(),this.nsps={},this.subs=[],Y&&typeof Y=="object"&&(J=Y,Y=void 0),(J=J||{}).path=J.path||"/socket.io",this.opts=J,He(this,J),this.reconnection(J.reconnection!==!1),this.reconnectionAttempts(J.reconnectionAttempts||1/0),this.reconnectionDelay(J.reconnectionDelay||1e3),this.reconnectionDelayMax(J.reconnectionDelayMax||5e3),this.randomizationFactor((ce=J.randomizationFactor)!==null&&ce!==void 0?ce:.5),this.backoff=new Un({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(J.timeout==null?2e4:J.timeout),this._readyState="closed",this.uri=Y;const je=J.parser||R;this.encoder=new je.Encoder,this.decoder=new je.Decoder,this._autoConnect=J.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(Y){return arguments.length?(this._reconnection=!!Y,Y||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(Y){return Y===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=Y,this)}reconnectionDelay(Y){var J;return Y===void 0?this._reconnectionDelay:(this._reconnectionDelay=Y,(J=this.backoff)===null||J===void 0||J.setMin(Y),this)}randomizationFactor(Y){var J;return Y===void 0?this._randomizationFactor:(this._randomizationFactor=Y,(J=this.backoff)===null||J===void 0||J.setJitter(Y),this)}reconnectionDelayMax(Y){var J;return Y===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=Y,(J=this.backoff)===null||J===void 0||J.setMax(Y),this)}timeout(Y){return arguments.length?(this._timeout=Y,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(Y){if(~this._readyState.indexOf("open"))return this;this.engine=new va(this.uri,this.opts);const J=this.engine,ce=this;this._readyState="opening",this.skipReconnect=!1;const je=vr(J,"open",function(){ce.onopen(),Y&&Y()}),at=It=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",It),Y?Y(It):this.maybeReconnectOnOpen()},Ct=vr(J,"error",at);if(this._timeout!==!1){const It=this._timeout,wt=this.setTimeoutFn(()=>{je(),at(new Error("timeout")),J.close()},It);this.opts.autoUnref&&wt.unref(),this.subs.push(()=>{this.clearTimeoutFn(wt)})}return this.subs.push(je),this.subs.push(Ct),this}connect(Y){return this.open(Y)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const Y=this.engine;this.subs.push(vr(Y,"ping",this.onping.bind(this)),vr(Y,"data",this.ondata.bind(this)),vr(Y,"error",this.onerror.bind(this)),vr(Y,"close",this.onclose.bind(this)),vr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(Y){try{this.decoder.add(Y)}catch(J){this.onclose("parse error",J)}}ondecoded(Y){Be(()=>{this.emitReserved("packet",Y)},this.setTimeoutFn)}onerror(Y){this.emitReserved("error",Y)}socket(Y,J){let ce=this.nsps[Y];return ce?this._autoConnect&&!ce.active&&ce.connect():(ce=new Rt(this,Y,J),this.nsps[Y]=ce),ce}_destroy(Y){const J=Object.keys(this.nsps);for(const ce of J)if(this.nsps[ce].active)return;this._close()}_packet(Y){const J=this.encoder.encode(Y);for(let ce=0;ce<J.length;ce++)this.engine.write(J[ce],Y.options)}cleanup(){this.subs.forEach(Y=>Y()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(Y,J){var ce;this.cleanup(),(ce=this.engine)===null||ce===void 0||ce.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",Y,J),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const Y=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const J=this.backoff.duration();this._reconnecting=!0;const ce=this.setTimeoutFn(()=>{Y.skipReconnect||(this.emitReserved("reconnect_attempt",Y.backoff.attempts),Y.skipReconnect||Y.open(je=>{je?(Y._reconnecting=!1,Y.reconnect(),this.emitReserved("reconnect_error",je)):Y.onreconnect()}))},J);this.opts.autoUnref&&ce.unref(),this.subs.push(()=>{this.clearTimeoutFn(ce)})}}onreconnect(){const Y=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",Y)}}const Nn={};function Fr(ne,Y){typeof ne=="object"&&(Y=ne,ne=void 0);const J=function(wt,zn="",Yt){let Gn=wt;Yt=Yt||typeof location<"u"&&location,wt==null&&(wt=Yt.protocol+"//"+Yt.host),typeof wt=="string"&&(wt.charAt(0)==="/"&&(wt=wt.charAt(1)==="/"?Yt.protocol+wt:Yt.host+wt),/^(https?|wss?):\/\//.test(wt)||(wt=Yt!==void 0?Yt.protocol+"//"+wt:"https://"+wt),Gn=Sr(wt)),Gn.port||(/^(http|ws)$/.test(Gn.protocol)?Gn.port="80":/^(http|ws)s$/.test(Gn.protocol)&&(Gn.port="443")),Gn.path=Gn.path||"/";const kn=Gn.host.indexOf(":")!==-1?"["+Gn.host+"]":Gn.host;return Gn.id=Gn.protocol+"://"+kn+":"+Gn.port+zn,Gn.href=Gn.protocol+"://"+kn+(Yt&&Yt.port===Gn.port?"":":"+Gn.port),Gn}(ne,(Y=Y||{}).path||"/socket.io"),ce=J.source,je=J.id,at=J.path,Ct=Nn[je]&&at in Nn[je].nsps;let It;return Y.forceNew||Y["force new connection"]||Y.multiplex===!1||Ct?It=new In(ce,Y):(Nn[je]||(Nn[je]=new In(ce,Y)),It=Nn[je]),J.query&&!Y.query&&(Y.query=J.queryKey),It.socket(J.path,Y)}Object.assign(Fr,{Manager:In,Socket:Rt,io:Fr,connect:Fr});var Mr=u(76),Hr=u(7833),cr=u.n(Hr),Kn="mediasoup-demo",xa=function(){return(0,k.A)(function ne(Y){(0,m.A)(this,ne),Y?(this._debug=cr()("".concat(Kn,":").concat(Y)),this._warn=cr()("".concat(Kn,":WARN:").concat(Y)),this._error=cr()("".concat(Kn,":ERROR:").concat(Y))):(this._debug=cr()(Kn),this._warn=cr()("".concat(Kn,":WARN")),this._error=cr()("".concat(Kn,":ERROR"))),cr().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)},[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])}();function ma(ne,Y){var J=Object.keys(ne);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(ne);Y&&(ce=ce.filter(function(je){return Object.getOwnPropertyDescriptor(ne,je).enumerable})),J.push.apply(J,ce)}return J}function La(ne){for(var Y=1;Y<arguments.length;Y++){var J=arguments[Y]!=null?arguments[Y]:{};Y%2?ma(Object(J),!0).forEach(function(ce){(0,w.A)(ne,ce,J[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(J)):ma(Object(J)).forEach(function(ce){Object.defineProperty(ne,ce,Object.getOwnPropertyDescriptor(J,ce))})}return ne}var Va=u(1396),Ci=Va.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),xs=Va.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function ii(ne){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,_.A)(g().mark(function ne(Y){var J,ce,je,at,Ct,It,wt,zn,Yt,Gn,kn,sa,Xr,pa,ia,Wi,Zi;return g().wrap(function(bi){for(;;)switch(bi.prev=bi.next){case 0:return J=Y.roomId,ce=Y.secret,je=Y.signalingBaseUrl,at="call-api.videosdk.live",Ct=[],It=null,wt={},zn={},Yt={},Gn=null,kn=null,sa=null,bi.next=1,fetch("https://".concat(je,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:ce,"Content-Type":"application/json"},body:JSON.stringify({roomId:J})}).then(function(){var _o=(0,_.A)(g().mark(function bo(No){var ei;return g().wrap(function(di){for(;;)switch(di.prev=di.next){case 0:return di.next=1,No.json();case 1:return ei=di.sent,di.abrupt("return",La({success:No.status==200},ei));case 2:case"end":return di.stop()}},bo)}));return function(bo){return _o.apply(this,arguments)}}()).catch(function(_o){return{success:!1}});case 1:if(Xr=bi.sent,pa=Xr.data,ia=Xr.success,Wi=Xr.error,ia){bi.next=2;break}throw Error(Wi??"Error getting server configurations");case 2:return pa&&(at=pa.baseUrl,Zi=pa.observability,Ct=Fs(pa.iceServers),It=Zi.jwt,wt=Zi.traces,zn=Zi.logs,Yt=Zi.metaData,Gn=pa.signalingUrl,sa=pa.socketPath,kn=pa.socketUrl),bi.abrupt("return",{baseUrl:at,iceServers:Ct,observabilityJwt:It,traces:wt,logs:zn,metaData:Yt,signalingUrl:Gn,socketPath:sa,socketUrl:kn});case 3:case"end":return bi.stop()}},ne)})),Ti.apply(this,arguments)}function Fs(ne){try{var Y=Va.AES.decrypt(ne,Ci,{iv:xs,mode:Va.mode.CBC,padding:Va.pad.ZeroPadding}).toString(Va.enc.Utf8);return JSON.parse(Y)}catch{return[]}}var vi=u(2215),ea=u.n(vi),Hs="mediasoup-demo.user",Ks="mediasoup-demo.devices";function pn(ne){var Y=ne.displayName;ea().set(Hs,{displayName:Y})}function Xn(){return ea().getJSON(Ks)}var Wn=u(2211),dr=u.n(Wn),Dn=function(ne){return{type:"SET_ROOM_STATE",payload:{state:ne}}},Hn=function(ne){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:ne}}},Wr=function(ne){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:ne}}},Er=function(ne){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:ne.canSendMic,canSendWebcam:ne.canSendWebcam}}},Cr=function(ne){return{type:"SET_CAN_CHANGE_WEBCAM",payload:ne}},Fn=function(ne){return{type:"SET_DISPLAY_NAME",payload:{displayName:ne}}},Zr=function(ne){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:ne}}},Da=function(ne){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:ne}}},ya=function(ne){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:ne}}},Ca=function(ne){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:ne}}},Ga=function(ne){return{type:"ADD_PRODUCER",payload:{producer:ne}}},Ya=function(ne){return{type:"REMOVE_PRODUCER",payload:{producerId:ne}}},is=function(ne){return{type:"SET_PRODUCER_PAUSED",payload:{producerId:ne}}},Aa=function(ne){return{type:"SET_PRODUCER_RESUMED",payload:{producerId:ne}}},us=function(ne,Y){return{type:"SET_PRODUCER_TRACK",payload:{producerId:ne,track:Y}}},Ps=function(ne,Y){return{type:"SET_PRODUCER_SCORE",payload:{producerId:ne,score:Y}}},ro=function(ne){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:ne}}},yi=function(ne){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:ne}}},Pi=function(ne){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:ne}}},Ns=function(ne){return{type:"ADD_PEER",payload:{peer:ne}}},Eo=function(ne){return{type:"REMOVE_PEER",payload:{peerId:ne}}},mo=function(ne,Y){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:ne,peerId:Y}}},Hi=function(ne,Y){return{type:"ADD_CONSUMER",payload:{consumer:ne,peerId:Y}}},ao=function(ne,Y){return{type:"REMOVE_CONSUMER",payload:{consumerId:ne,peerId:Y}}},Ni=function(ne,Y){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:ne,originator:Y}}},_i=function(ne,Y){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:ne,originator:Y}}},Di=function(ne,Y,J){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:ne,spatialLayer:Y,temporalLayer:J}}},uc=function(ne,Y,J){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:ne,spatialLayer:Y,temporalLayer:J}}},Tr=function(ne,Y){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:ne,priority:Y}}},Vs=function(ne,Y){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:ne,score:Y}}},da=function(ne,Y){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:ne,peerId:Y}}},oi=function(ne,Y){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:ne,peerId:Y}}},so=function(){return{type:"REMOVE_ALL_NOTIFICATIONS"}},tr=function(ne){var Y=ne.type,J=Y===void 0?"info":Y,ce=ne.text,je=ne.title,at=ne.timeout;if(!at)switch(J){case"info":at=3e3;break;case"error":at=5e3}var Ct={id:dr()({length:6}).toLowerCase(),type:J,title:je,text:ce,timeout:at};return function(It){It(function(wt){return{type:"ADD_NOTIFICATION",payload:{notification:wt}}}(Ct)),setTimeout(function(){It({type:"REMOVE_NOTIFICATION",payload:{notificationId:Ct.id}})},at)}},Qs=u(7007),ci=u(1803),li=u(9027),_r=u(7080),qa="CONNECTING",Js="CONNECTED",Go="RECONNECTING",ms="FAILED",Vi="DISCONNECTED",go=u(5414),Xa=u(2107),Oc=u(5071),Xs=Array(32);function Vr(){for(var ne=0;ne<16;ne++)Xs[ne]=Math.floor(16*Math.random())+48,Xs[ne]>=58&&(Xs[ne]+=39);return String.fromCharCode.apply(null,Xs.slice(0,16))}function ui(){var ne=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(ne)}function gs(ne,Y){var J=Object.keys(ne);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(ne);Y&&(ce=ce.filter(function(je){return Object.getOwnPropertyDescriptor(ne,je).enumerable})),J.push.apply(J,ce)}return J}function qi(ne){for(var Y=1;Y<arguments.length;Y++){var J=arguments[Y]!=null?arguments[Y]:{};Y%2?gs(Object(J),!0).forEach(function(ce){(0,w.A)(ne,ce,J[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(J)):gs(Object(J)).forEach(function(ce){Object.defineProperty(ne,ce,Object.getOwnPropertyDescriptor(J,ce))})}return ne}var Yo=function(){return(0,k.A)(function ne(Y){var J=this,ce=Y.roomId,je=Y.peerId,at=Y.sdkName,Ct=Y.observabilityJwt,It=Y.metaData,wt=Y.traces;(0,m.A)(this,ne),this._traceId=function(){for(var Yt=0;Yt<32;Yt++)Xs[Yt]=Math.floor(16*Math.random())+48,Xs[Yt]>=58&&(Xs[Yt]+=39);return String.fromCharCode.apply(null,Xs.slice(0,32))}(),this._rootSpanId=Vr(),this._observabilityJwt=Ct,this._tracesEnabled=wt.enabled,this._tracesEndpoint=wt.endPoint;var zn=function(Yt){for(var Gn="0123456789abcdefghijklmnopqrstuvwxyz",kn="",sa=Yt;sa>0;sa--)kn+=Gn[Math.floor(36*Math.random())];return kn}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.2.14"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:zn},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(ce,je,at,It),setInterval(function(){J.processQueue()},4e3))},[{key:"addRootSpan",value:function(ne,Y,J,ce){var je={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(ne,"_peer_").concat(Y,"_sdk_").concat(J),kind:1,startTimeUnixNano:ui(),endTimeUnixNano:ui(),attributes:[{key:"roomId",value:{stringValue:ne}},{key:"peerId",value:{stringValue:Y}},{key:"sdkName",value:{stringValue:J}},{key:"userId",value:{stringValue:ce.userId}},{key:"email",value:{stringValue:ce.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(je)}},{key:"addSpanToTrace",value:function(ne){this._spans.push(ne)}},{key:"trace",value:function(ne){var Y=ne.spanName,J=ne.attributes,ce=J===void 0?{}:J,je=ne.span,at=je===void 0?void 0:je;if(this._tracesEnabled){var Ct=Vr(),It=ui(),wt={traceId:this._traceId,spanId:Ct,parentSpanId:at||this._rootSpanId,name:Y,kind:1,startTimeUnixNano:It,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(ce).length>0&&(wt.attributes=Object.entries(ce).map(function(zn){var Yt=(0,v.A)(zn,2);return{key:Yt[0],value:{stringValue:Yt[1]}}})),this.addSpanToTrace(wt),Ct}}},{key:"traceAutoComplete",value:function(ne){var Y=ne.spanName,J=ne.attributes,ce=J===void 0?{}:J,je=ne.status,at=je===void 0?1:je,Ct=ne.span,It=Ct===void 0?void 0:Ct,wt=ne.message,zn=wt===void 0?"SUCCESS":wt;if(this._tracesEnabled){var Yt=Vr(),Gn=ui(),kn=ui(),sa={traceId:this._traceId,spanId:Yt,parentSpanId:It||this._rootSpanId,name:Y,kind:1,startTimeUnixNano:Gn,endTimeUnixNano:kn,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:at,message:zn}};Object.keys(ce).length>0&&(sa.attributes=Object.entries(ce).map(function(Xr){var pa=(0,v.A)(Xr,2);return{key:pa[0],value:{stringValue:pa[1]}}})),this.addSpanToTrace(sa)}}},{key:"completeSpan",value:function(ne){var Y=ne.span,J=ne.status,ce=ne.message,je=ne.attributes,at=je===void 0?{}:je;if(this._tracesEnabled){var Ct=ui();this._spans=this._spans.map(function(It){if(It.spanId!==Y)return It;var wt=Object.entries(at).map(function(zn){var Yt=(0,v.A)(zn,2);return{key:Yt[0],value:{stringValue:Yt[1]}}});return It.attributes=It.attributes?[].concat((0,b.A)(It.attributes),(0,b.A)(wt)):wt,qi(qi({},It),{},{status:{code:J,message:ce},endTimeUnixNano:Ct})})}}},{key:"processQueue",value:function(){var ne=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var Y={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,Y).then(function(){var J=(0,_.A)(g().mark(function ce(je){return g().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return ne._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],at.next=1,je.text();case 1:return at.abrupt("return",at.sent);case 2:case"end":return at.stop()}},ce)}));return function(ce){return J.apply(this,arguments)}}()).then(function(J){}).catch(function(J){ne._spans=ne._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",J)})}}}])}();function Ko(ne,Y){var J=Object.keys(ne);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(ne);Y&&(ce=ce.filter(function(je){return Object.getOwnPropertyDescriptor(ne,je).enumerable})),J.push.apply(J,ce)}return J}function io(ne){for(var Y=1;Y<arguments.length;Y++){var J=arguments[Y]!=null?arguments[Y]:{};Y%2?Ko(Object(J),!0).forEach(function(ce){(0,w.A)(ne,ce,J[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(J)):Ko(Object(J)).forEach(function(ce){Object.defineProperty(ne,ce,Object.getOwnPropertyDescriptor(J,ce))})}return ne}var fn=function(){return(0,k.A)(function Y(J){var ce=J.roomId,je=J.peerId,at=J.logs,Ct=J.observabilityJwt,It=J.deviceInfo,wt=J.sessionId,zn=J.debugMode;(0,m.A)(this,Y);var Yt=It.browserUserAgent,Gn=It.deviceUserAgent,kn=It.platform;this._peerId=je,this._roomId=ce,this._logs=at,this._observabilityJwt=Ct,this._deviceInfo=It,this._sessionId=wt,this._debugMode=zn,this.browserOrDeviceInfo=Yt?{browserName:Yt.browser.name,browserVersion:Yt.browser.version,osName:Yt.os.name,osVersion:Yt.os.version,platform:kn}:Gn?io({platform:kn},Gn):null},[{key:"pushLogs",value:(ne=(0,_.A)(g().mark(function Y(J){var ce,je,at,Ct,It,wt,zn,Yt;return g().wrap(function(Gn){for(;;)switch(Gn.prev=Gn.next){case 0:if(ce=J.logType,je=J.logText,at=J.attributes,Ct=J.dashboardLog,It=Ct!==void 0&&Ct,wt=this._logs,zn=wt.enabled,Yt=wt.endPoint,!zn){Gn.next=2;break}return Gn.next=1,fetch(Yt,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:ce,logText:je,attributes:io(io({},at),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),debugMode:this._debugMode,dashboardLog:It})}).then(function(kn){return kn.json()}).catch(function(kn){return console.log("error",kn),{}});case 1:return Gn.abrupt("return",Gn.sent);case 2:return Gn.abrupt("return",null);case 3:case"end":return Gn.stop()}},Y,this)})),function(Y){return ne.apply(this,arguments)})}]);var ne}(),ye=u(4973),Ot=u(388),rr=u(3954),ha=u(5501),es=u(3662);function ws(){try{var ne=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ws=function(){return!!ne})()}function Cl(ne){var Y=typeof Map=="function"?new Map:void 0;return Cl=function(J){if(J===null||!function(je){try{return Function.toString.call(je).indexOf("[native code]")!==-1}catch{return typeof je=="function"}}(J))return J;if(typeof J!="function")throw new TypeError("Super expression must either be null or a function");if(Y!==void 0){if(Y.has(J))return Y.get(J);Y.set(J,ce)}function ce(){return function(je,at,Ct){if(ws())return Reflect.construct.apply(null,arguments);var It=[null];It.push.apply(It,at);var wt=new(je.bind.apply(je,It));return Ct&&(0,es.A)(wt,Ct.prototype),wt}(J,arguments,(0,rr.A)(this).constructor)}return ce.prototype=Object.create(J.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),(0,es.A)(ce,J)},Cl(ne)}function Tl(ne,Y,J){return Y=(0,rr.A)(Y),(0,Ot.A)(ne,Ir()?Reflect.construct(Y,J||[],(0,rr.A)(ne).constructor):Y.apply(ne,J))}function Ir(){try{var ne=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ir=function(){return!!ne})()}var Pl,dc=function(ne){function Y(J,ce){var je;return(0,m.A)(this,Y),je=Tl(this,Y,[ce||"an error has occured"]),(0,w.A)(je,"code",void 0),je.name="VideoSdkError",je.code=J,je}return(0,ha.A)(Y,ne),(0,k.A)(Y)}(Cl(Error));(function(ne){ne[ne.InvalidKey=0]="InvalidKey",ne[ne.MissingKey=1]="MissingKey",ne[ne.InternalError=2]="InternalError"})(Pl||(Pl={}));var ko=function(ne){function Y(J){var ce;return(0,m.A)(this,Y),(ce=Tl(this,Y,[21,J??"device is unsupported"])).name="DeviceUnsupportedError",ce}return(0,ha.A)(Y,ne),(0,k.A)(Y)}(dc),vo=u(1806),$i=u(6746),yo=u(8278);function il(ne,Y){return ne?Y=="audio"?"shareAudio":"share":Y}function Nl(ne,Y){var J=typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(!J){if(Array.isArray(ne)||(J=function(wt,zn){if(wt){if(typeof wt=="string")return Mc(wt,zn);var Yt={}.toString.call(wt).slice(8,-1);return Yt==="Object"&&wt.constructor&&(Yt=wt.constructor.name),Yt==="Map"||Yt==="Set"?Array.from(wt):Yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Yt)?Mc(wt,zn):void 0}}(ne))||Y){J&&(ne=J);var ce=0,je=function(){};return{s:je,n:function(){return ce>=ne.length?{done:!0}:{done:!1,value:ne[ce++]}},e:function(wt){throw wt},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var at,Ct=!0,It=!1;return{s:function(){J=J.call(ne)},n:function(){var wt=J.next();return Ct=wt.done,wt},e:function(wt){It=!0,at=wt},f:function(){try{Ct||J.return==null||J.return()}finally{if(It)throw at}}}}function Mc(ne,Y){(Y==null||Y>ne.length)&&(Y=ne.length);for(var J=0,ce=Array(Y);J<Y;J++)ce[J]=ne[J];return ce}function qs(){try{var ne=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qs=function(){return!!ne})()}var cu=function(ne){function Y(ce){var je,at,Ct,It;return(0,m.A)(this,Y),at=this,Ct=Y,Ct=(0,rr.A)(Ct),(je=(0,Ot.A)(at,qs()?Reflect.construct(Ct,[],(0,rr.A)(at).constructor):Ct.apply(at,It))).onWorkerMessage=function(wt){var zn,Yt=wt.data,Gn=Yt.kind,kn=Yt.data;switch(Gn){case"error":console.error(kn.error.message),je.emit($i.KS.EncryptionError,kn.error);break;case"initAck":kn.enabled&&je.keyProvider.getKeys().forEach(function(Xr){je.postKey(Xr)});break;case"enable":if(kn.enabled&&je.keyProvider.getKeys().forEach(function(Xr){je.postKey(Xr)}),je.encryptionEnabled!==kn.enabled&&kn.participantIdentity===je.room._peerId)je.emit($i.KS.ParticipantEncryptionStatusChanged,kn.enabled,je.room.localParticipant),je.encryptionEnabled=kn.enabled;else if(kn.participantIdentity){var sa=(zn=je.room)===null||zn===void 0?void 0:zn.getParticipantByIdentity(kn.participantIdentity);if(!sa)throw TypeError("couldn't set encryption status, participant not found".concat(kn.participantIdentity));je.emit($i.KS.ParticipantEncryptionStatusChanged,kn.enabled,sa)}break;case"ratchetKey":je.keyProvider.emit($i.fo.KeyRatcheted,kn.material,kn.keyIndex);break;case"e2eeStateChange":je.emit($i.KS.E2EEStateChange,kn);break;default:console.log("unknown message kind",wt)}},je.onWorkerError=function(wt){var zn;console.error("Worker encountered an error:",wt),console.error("Error message:",wt.message),console.error("Error filename:",wt.filename),console.error("Error line number:",wt.lineno),console.error("Error stack:",(zn=wt.error)===null||zn===void 0?void 0:zn.stack)},je.keyProvider=ce.keyProvider,je.worker=ce.worker,je.encryptionEnabled=!1,je}return(0,ha.A)(Y,ne),(0,k.A)(Y,[{key:"setup",value:function(ce){if(!(0,yo.Ag)())throw new ko("tried to setup end-to-end encryption on an unsupported browser");if(console.info("setting up e2ee"),ce!==this.room){this.room=ce,this.setupEventListeners(ce,this.keyProvider),this.handleE2EEManagerEvents();var je={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};console.log("msg",je),this.worker&&(console.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(je))}}},{key:"setParticipantCryptorEnabled",value:function(ce,je){console.debug("set e2ee to ".concat(ce," for participant ").concat(je)),this.postEnable(ce,je)}},{key:"setSifTrailer",value:function(ce){ce&&ce.length!==0?this.postSifTrailer(ce):console.warn("ignoring server sent trailer as it's empty")}},{key:"setupEventListeners",value:function(ce,je){var at=this;je.on($i.fo.SetKey,function(Ct){console.log("### keyInfo",Ct),at.postKey(Ct)}).on($i.fo.RatchetRequest,function(Ct,It){return at.postRatchetRequest(Ct,It)})}},{key:"postRatchetRequest",value:function(ce,je){if(!this.worker)throw Error("could not ratchet key, worker is missing");var at={kind:"ratchetRequest",data:{participantIdentity:ce,keyIndex:je}};this.worker.postMessage(at)}},{key:"postKey",value:function(ce){var je=ce.key,at=ce.participantIdentity,Ct=ce.keyIndex;if(!this.worker)throw Error("could not set key, worker is missing");var It={kind:"setKey",data:{participantIdentity:at,isPublisher:at===this.room._peerId,key:je,keyIndex:Ct}};this.worker.postMessage(It)}},{key:"postEnable",value:function(ce,je){if(!this.worker)throw new ReferenceError("failed to enable e2ee, worker is not ready");var at={kind:"enable",data:{enabled:ce,participantIdentity:je}};this.worker.postMessage(at)}},{key:"postRTPMap",value:function(ce){var je;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((je=this.room)===null||je===void 0)&&je._peerId))throw TypeError("could not post rtp map, local participant identity is missing");var at={kind:"setRTPMap",data:{map:ce,participantIdentity:this.room._peerId}};this.worker.postMessage(at)}},{key:"postSifTrailer",value:function(ce){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");var je={kind:"setSifTrailer",data:{trailer:ce}};this.worker.postMessage(je)}},{key:"setupE2EEReceiver",value:function(ce,je){var at;this.handleReceiver(ce,ce.rtpReceiver,ce.track.id,je,this.extractCodec(ce.rtpParameters.codecs),il((at=ce.appData)===null||at===void 0?void 0:at.share,ce.kind))}},{key:"setupE2EESender",value:function(ce){var je;ce?this.handleSender(ce.rtpSender,ce.track.id,this.extractCodec(ce.rtpParameters.codecs),il((je=ce.appData)===null||je===void 0?void 0:je.share,ce.kind),this.room._peerId):console.error("Producer is required to setup E2EE sender")}},{key:"handleReceiver",value:(J=(0,_.A)(g().mark(function ce(je,at,Ct,It,wt,zn){var Yt,Gn,kn,sa,Xr,pa;return g().wrap(function(ia){for(;;)switch(ia.prev=ia.next){case 0:if(this.worker){ia.next=1;break}return ia.abrupt("return");case 1:if(!(0,yo.Wm)()){ia.next=2;break}Yt={kind:"decode",participantIdentity:It,trackId:je.track.id,codec:wt},at.transform=new RTCRtpScriptTransform(this.worker,Yt),ia.next=5;break;case 2:if(!(vo.$Q in at)||!wt){ia.next=3;break}return kn={kind:"updateCodec",data:{trackId:Ct,codec:wt,participantIdentity:It}},this.worker.postMessage(kn),ia.abrupt("return");case 3:if(sa=at.writableStream,Xr=at.readableStream,sa&&Xr){ia.next=4;break}return console.error("no writable or readable stream"),ia.abrupt("return");case 4:pa={kind:"decode",data:{readableStream:Xr,writableStream:sa,trackId:Ct,codec:wt,participantIdentity:It,mediaKind:zn,peerId:(Gn=je.appData)===null||Gn===void 0?void 0:Gn.peerId}},this.worker.postMessage(pa,[Xr,sa]);case 5:at[vo.$Q]=!0;case 6:case"end":return ia.stop()}},ce,this)})),function(ce,je,at,Ct,It,wt){return J.apply(this,arguments)})},{key:"handleSender",value:function(ce,je,at,Ct,It){var wt;if(!(vo.$Q in ce)&&this.worker){if(!(!((wt=this.room)===null||wt===void 0)&&wt._peerId)||this.room._peerId==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if((0,yo.Wm)()){console.info("### initialize script transform");var zn={kind:"encode",participantIdentity:this.room._peerId,trackId:je,codec:at,mediaKind:Ct,peerId:It};ce.transform=new RTCRtpScriptTransform(this.worker,zn)}else try{var Yt=ce.senderStreams;if(Yt){var Gn={kind:"encode",data:{readableStream:Yt.readable,writableStream:Yt.writable,codec:at,trackId:je,participantIdentity:this.room._peerId,mediaKind:Ct,peerId:It}};this.worker.postMessage(Gn,[Yt.readable,Yt.writable])}else console.error("Error no sender streams found")}catch(kn){console.log("Error in handle sender ",kn)}ce[vo.$Q]=!0}else console.error("### sender already set up")}},{key:"handleE2EEManagerEvents",value:function(){var ce=this;this.on("NEW_CONSUMER",function(je){var at=je.consumer,Ct=je.peerId;console.log("NEW_CONSUMER",at),ce.setupE2EEReceiver(at,Ct)}),this.on("NEW_PRODUCER",function(je){ce.setupE2EESender(je)})}},{key:"extractCodec",value:function(ce){var je,at=Nl(ce);try{for(at.s();!(je=at.n()).done;){var Ct=je.value,It=Ct.mimeType.split("/")[1].toLowerCase();if(this.kind==="audio"){if(vo.Ts.includes(It)){Ct=It;break}}else if(vo.ue.includes(It)){Ct=It;break}}}catch(wt){at.e(wt)}finally{at.f()}return""}}]);var J}(Qs.EventEmitter);function jc(){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,_.A)(g().mark(function ne(){var Y,J,ce,je;return g().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.next=1,fetch("https://cdn.videosdk.live/e2ee/0.0.1/bundle.js");case 1:if((Y=at.sent).ok){at.next=2;break}throw new Error("Failed to load worker script: ".concat(Y.statusText));case 2:return at.next=3,Y.text();case 3:return J=at.sent,ce=new Blob([J],{type:"application/javascript"}),je=URL.createObjectURL(ce),at.abrupt("return",new Worker(je));case 4:case"end":return at.stop()}},ne)}))).apply(this,arguments)}var Co=u(9633);function lu(ne,Y){var J=Object.keys(ne);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(ne);Y&&(ce=ce.filter(function(je){return Object.getOwnPropertyDescriptor(ne,je).enumerable})),J.push.apply(J,ce)}return J}function Oa(ne){for(var Y=1;Y<arguments.length;Y++){var J=arguments[Y]!=null?arguments[Y]:{};Y%2?lu(Object(J),!0).forEach(function(ce){(0,w.A)(ne,ce,J[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(J)):lu(Object(J)).forEach(function(ce){Object.defineProperty(ne,ce,Object.getOwnPropertyDescriptor(J,ce))})}return ne}function $a(ne,Y){var J=typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(!J){if(Array.isArray(ne)||(J=function(wt,zn){if(wt){if(typeof wt=="string")return Dl(wt,zn);var Yt={}.toString.call(wt).slice(8,-1);return Yt==="Object"&&wt.constructor&&(Yt=wt.constructor.name),Yt==="Map"||Yt==="Set"?Array.from(wt):Yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Yt)?Dl(wt,zn):void 0}}(ne))||Y){J&&(ne=J);var ce=0,je=function(){};return{s:je,n:function(){return ce>=ne.length?{done:!0}:{done:!1,value:ne[ce++]}},e:function(wt){throw wt},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var at,Ct=!0,It=!1;return{s:function(){J=J.call(ne)},n:function(){var wt=J.next();return Ct=wt.done,wt},e:function(wt){It=!0,at=wt},f:function(){try{Ct||J.return==null||J.return()}finally{if(It)throw at}}}}function Dl(ne,Y){(Y==null||Y>ne.length)&&(Y=ne.length);for(var J=0,ce=Array(Y);J<Y;J++)ce[J]=ne[J];return ce}function Al(ne,Y){(function(J,ce){if(ce.has(J))throw new TypeError("Cannot initialize the same private elements twice on an object")})(ne,Y),Y.add(ne)}var vt,To={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},lr={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},Ic={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},Po=[{scalabilityMode:"S3T3_KEY"}],Ds=[{dtx:!0,maxFramerate:30}],fe=new xa("RoomClient"),Bn=new WeakSet,Vn=function(){return(0,k.A)(function ge(ee){var re,se,ie=ee.roomId,le=ee.peerId,De=ee.secret,Le=ee.displayName,Ue=ee.device,kt=ee.handlerName,Dt=ee.useSimulcast,qt=ee.forceTcp,bn=ee.mode,Vt=ee.forceH264,hn=ee.forceVP9,xn=ee.svc,Pe=ee.datachannel,ft=ee.externalVideo,Mt=ee.micEnabled,mt=ee.webcamEnabled,jt=ee.maxResolution,Ke=ee.useSpartialLayerAnalytics,Bt=ee._deviceInfo,dn=ee.customCameraVideoTrack,Kt=ee.customMicrophoneAudioTrack,gn=ee.autoConsume,an=ee.preferredProtocol,Cn=ee.signalingBaseUrl,mn=ee.metaData,Xt=ee.defaultCameraIndex,yr=ee.debugMode,ur=ee.keyProvider;switch((0,m.A)(this,ge),Al(this,Bn),(0,w.A)(this,"e2eeManager",null),fe.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',ie,le,Le,Ue.flag),this.useSpartialLayerAnalytics=Ke||!1,this._deviceInfo=Bt,this._eventEmitter=new Qs.EventEmitter,this._closed=!1,this._displayName=Le,this._device=Ue,this._forceTcp=qt,this._preferredProtocol=an,bn){case Xa.nI.CONFERENCE:case Xa.nI.SEND_AND_RECV:re=!0,se=!0;break;case Xa.nI.RECV_ONLY:re=!1,se=!0;break;default:re=!1,se=!1}if(this._mode=bn,this._produce=re,this._consume=se,this._useDataChannel=Pe,this._forceH264=!!Vt,this._forceVP9=!!hn,this._micEnabled=!!Mt,this._webcamEnabled=!!mt,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,ft&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=ft,this._externalVideo.play().catch(function(At){return fe.warn("externalVideo.play() failed:%o",At)})),this._handlerName=kt,this._useSimulcast=Dt,this._socketUrl="",this._secret=De,this._peerId=le,this._roomId=ie,this._baseUrl="",this._webSocket=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:jt||"hd"},this._pinnedParticipants=new Map,xn&&(Po[0].scalabilityMode="".concat(xn,"_KEY")),this.customCameraVideoTrack=dn,this.customMicrophoneAudioTrack=Kt,this._autoConsume=gn,this._iceServers=[],this._metrics=new go.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=Cn||"api.videosdk.live",this._metaData=mn,this._defaultCameraIndex=Xt,this._debugMode=!!yr,this._meetingConnectionState=null,this._sendTransportInternal=null,ur){if(!(ur instanceof Co.l))throw new Error("keyProvider should be an instance of ExternalE2EEKeyProvider");(function(At,An,Pr){if(typeof At=="function"?At===An:At.has(An))return arguments.length<3?An:Pr;throw new TypeError("Private element is not present on this object")})(Bn,this,hc).call(this,ur)}},[{key:"on",value:function(ge,ee){this._eventEmitter.on(ge,ee)}},{key:"softClose",value:function(){var ge,ee=(ge=this._openTelemetry)===null||ge===void 0?void 0:ge.trace({name:"softClose() Start "});try{var re,se,ie;this._eventEmitter.emit("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING");var le,De=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"Consumer Cleanup",parentSpan:ee,attributes:{"videosdk.consumers.count":this._consumers.size||0}}),Le=$a(this._consumers.values());try{for(Le.s();!(le=Le.n()).done;)le.value.close()}catch(kt){Le.e(kt)}finally{Le.f()}(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:De,status:1,message:"Closed ".concat(this._consumers.size," consumers successfully")}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ee,status:1,message:"Soft close completed successfully"})}catch(kt){var Ue;(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:ee,status:2,message:"Soft close failed: ".concat(kt.message)}),console.error(kt)}}},{key:"close",value:function(ge){var ee,re,se,ie,le,De,Le,Ue=ge.sendLeft,kt=Ue===void 0||Ue;if(kt&&((De=this._openTelemetry)===null||De===void 0||De.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1}),(Le=this._videosdkLogs)===null||Le===void 0||Le.pushLogs({logText:"Meeting is in CLOSING State",logType:"INFO"})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._sendTransportInternal&&clearInterval(this._sendTransportInternal),this._sendTransportInternal=null,this._webSocket.close(),this._metrics.running&&this._metrics.stopAllProbes(),fe.debug("close()");var Dt=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:Dt,status:1,message:"Closed Trasnport"}),vt.dispatch(Dn("closed")),kt&&this.emitMeetingStateChange(Vi),(se=this._openTelemetry)===null||se===void 0||se.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Meeting is in CLOSED State",logType:"INFO"}),kt&&this._eventEmitter.emit("MEETING_LEFT"),(le=this._openTelemetry)===null||le===void 0||le.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(Il=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe=this;return g().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.prev=0,ft.next=1,ii({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 1:ie=ft.sent,le=ie.baseUrl,De=ie.iceServers,Le=ie.logs,Ue=ie.observabilityJwt,kt=ie.traces,Dt=ie.metaData,qt=ie.signalingUrl,bn=ie.socketPath,Vt=ie.socketUrl,this._baseUrl=le,this._socketUrl="wss://".concat(Vt||this._baseUrl,"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode,"&lib=socket"),this._iceServers=De,this._tracesEnabled=kt.enabled,this._openTelemetry=new Yo((0,w.A)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:kt,logs:Le,observabilityJwt:Ue,metaData:Dt},"traces",kt)),this._joinSpan=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:qt||"signalingUrl not specify"}}),this._webSocket=Fr(this._socketUrl,{transports:["websocket"],reconnectionAttempts:10,reconnectionDelay:5e3,reconnection:!0,path:"".concat(bn??"","/socket.io")}),this.emitMeetingStateChange(qa),vt.dispatch(Dn("connecting")),(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Meeting is in CONNECTING State",logType:"INFO"}),this._webSocket.on("connect",function(){}),this._webSocket.on("connectionSuccess",function(){var Mt,mt;Pe._isWebsocketAlive=!0,Pe._closed=!1,Pe._mode===(Xa.nI.RECV_ONLY||Xa.nI.SIGNALLING_ONLY)&&Pe.emitMeetingStateChange(Js),(Mt=Pe._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:Pe._joinSpan,status:1}),(mt=Pe._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:"Meeting is in CONNECTED State",logType:"INFO"}),Pe.requestEntry()}),this._webSocket.on("disconnect",function(Mt){var mt,jt,Ke,Bt,dn;(mt=Pe._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:"Meeting is in Websocket Disconnect State",logType:"INFO",attributes:{reason:Mt},dashboardLog:!0}),(Mt==="transport close"||Mt==="transport error")&&(Pe.customMicrophoneAudioTrack&&((jt=Pe.customMicrophoneAudioTrack)===null||jt===void 0||jt.getTracks().forEach(function(Kt){Kt.stop()}),Pe.customMicrophoneAudioTrack=null),Pe.customCameraVideoTrack&&((Ke=Pe.customCameraVideoTrack)===null||Ke===void 0||Ke.getTracks().forEach(function(Kt){Kt.stop()}),Pe.customCameraVideoTrack=null),Pe._sendTransport&&((Bt=Pe._sendTransport)===null||Bt===void 0||Bt.close(),Pe._sendTransport=null),Pe._recvTransport&&((dn=Pe._recvTransport)===null||dn===void 0||dn.close(),Pe._recvTransport=null))}),this._webSocket.io.on("reconnect_failed",function(){Pe._closed||Pe.close({sendLeft:!0})}),this._webSocket.on("connect_error",function(Mt){var mt,jt,Ke,Bt,dn,Kt;Pe._webSocket.active&&Pe._webSocket.io._reconnecting?((mt=Pe._openTelemetry)===null||mt===void 0||mt.traceAutoComplete({spanName:"Meeting is in RECONNECTING State",span:Pe._joinSpan,status:1}),(jt=Pe._videosdkLogs)===null||jt===void 0||jt.pushLogs({logText:"Meeting is in RECONNECTING State",logType:"INFO",attributes:{error:Mt.message}}),vt.dispatch(tr({type:"error",text:"WebSocket Reconnecting"})),Pe.emitMeetingStateChange(Go),Pe._sendTransport&&((dn=Pe._sendTransport)===null||dn===void 0||dn.close(),Pe._sendTransport=null),Pe._recvTransport&&((Kt=Pe._recvTransport)===null||Kt===void 0||Kt.close(),Pe._recvTransport=null),(Ke=Pe.customMicrophoneAudioTrack)===null||Ke===void 0||Ke.getTracks().forEach(function(gn){gn.stop()}),Pe.customMicrophoneAudioTrack=null,(Bt=Pe.customCameraVideoTrack)===null||Bt===void 0||Bt.getTracks().forEach(function(gn){gn.stop()}),Pe.customCameraVideoTrack=null):console.log("Error while trying to reconnect",Mt.message)}),this._webSocket.on("close",function(){console.log("MEETING close"),Pe._closed||Pe.close({sendLeft:!0})}),this._webSocket.on("newConsumer",function(){var Mt=(0,_.A)(g().mark(function mt(jt,Ke){var Bt,dn,Kt,gn,an,Cn,mn,Xt,yr,ur,At,An,Pr,ta,oa,ja,Fa,Gr,G,K,X,de,Ee,xe,Se,$e,ke;return g().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(Kt=(Bt=Pe._openTelemetry)===null||Bt===void 0?void 0:Bt.trace({spanName:"Websocket REQ: newConsumer",attributes:{request:JSON.stringify(jt)}}),Pe._consume){Oe.next=1;break}return Ke({errorCode:403,message:"I do not want to consume",method:"newConsumer"}),(gn=Pe._openTelemetry)===null||gn===void 0||gn.completeSpan({span:Kt,status:2,message:"I do not want to consume"}),Oe.abrupt("return");case 1:return an=jt.peerId,Cn=jt.producerId,mn=jt.id,Xt=jt.kind,yr=jt.rtpParameters,ur=jt.type,At=jt.appData,An=jt.producerPaused,Pr=(dn=Pe._openTelemetry)===null||dn===void 0?void 0:dn.trace({spanName:"Creating Consumer",span:Kt}),Oe.prev=2,Oe.next=3,Pe._recvTransport.consume({id:mn,producerId:Cn,kind:Xt,rtpParameters:yr,appData:Oa(Oa({},At),{},{peerId:an}),onRtpReceiver:function(Je){if(Pe.e2eeManager){var We=Je.writableStream,Ae=Je.readableStream;if(!We||!Ae){var tt=Je.createEncodedStreams();Je.writableStream=tt.writable,We=tt.writable,Je.readableStream=tt.readable,Ae=tt.readable}}}});case 3:Gr=Oe.sent,G=Mr.s$(Gr.rtpParameters.encodings[0].scalabilityMode),K=G.spatialLayers,X=G.temporalLayers,Gr.spatialLayers=K,Gr.temporalLayers=X,Gr.currentSpatialLayers=K-1,Gr.currentTemporalLayers=X-1,Pe._consumers.set(Gr.id,Gr),Gr.on("transportclose",function(){Pe._consumers.delete(Gr.id);var Je=ao(Gr.id,an);vt.dispatch(Je),Pe._eventEmitter.emit(Je.type,Je.payload)}),(ta=Pe._openTelemetry)===null||ta===void 0||ta.completeSpan({span:Pr,status:1,message:"Consumer Created"}),Pr=(oa=Pe._openTelemetry)===null||oa===void 0?void 0:oa.trace({spanName:"Sending Stream Enabled Event",span:Kt}),de=Hi({id:Gr.id,type:ur,locallyPaused:!1,remotelyPaused:An,rtpParameters:Gr.rtpParameters,spatialLayers:K,temporalLayers:X,currentSpatialLayer:K-1,currentTemporalLayer:X-1,preferredSpatialLayer:K-1,preferredTemporalLayer:X-1,priority:1,codec:Gr.rtpParameters.codecs[0].mimeType.split("/")[1],track:Gr.track,appData:At,instance:Gr},an),vt.dispatch(de),Pe._eventEmitter.emit(de.type,de.payload),Ke(),Gr.kind==="video"&&vt.getState().me.audioOnly&&Pe._pauseConsumer(Gr),(ja=Pe._openTelemetry)===null||ja===void 0||ja.completeSpan({span:Pr,status:1,message:"Event Send Successfully"}),(Fa=Pe._openTelemetry)===null||Fa===void 0||Fa.completeSpan({span:Kt,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":Gr.id}}),Gr.kind=="video"&&Gr.appData.share&&((Ee=Pe._openTelemetry)===null||Ee===void 0||Ee.traceAutoComplete({spanName:"Presenter Changed",span:Kt,attributes:{"peer.id":an}})),Pe.e2eeManager&&Pe.e2eeManager.emit("NEW_CONSUMER",{consumer:Gr,peerId:Pe._peerId}),Oe.next=5;break;case 4:throw Oe.prev=4,ke=Oe.catch(2),(xe=Pe._openTelemetry)===null||xe===void 0||xe.completeSpan({span:Pr,status:2,message:"Error creating a Consumer: ".concat(ke)}),(Se=Pe._openTelemetry)===null||Se===void 0||Se.completeSpan({span:Kt,status:2,message:"Error creating a Consumer: ".concat(ke)}),vt.dispatch(tr({type:"error",text:"Error creating a Consumer: ".concat(ke)})),($e=Pe._videosdkLogs)===null||$e===void 0||$e.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:ke.message}}),ke;case 5:case"end":return Oe.stop()}},mt,null,[[2,4]])}));return function(mt,jt){return Mt.apply(this,arguments)}}()),this._webSocket.on("newDataConsumer",function(){var Mt=(0,_.A)(g().mark(function mt(jt,Ke){var Bt,dn,Kt,gn,an,Cn,mn,Xt,yr;return g().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(Pe._consume){ur.next=1;break}return Ke({errorCode:403,message:"I do not want to data consume",method:"newConsumer"}),ur.abrupt("return");case 1:if(Pe._useDataChannel){ur.next=2;break}return Ke({errorCode:403,message:"I do not want DataChannels",method:"newConsumer"}),ur.abrupt("return");case 2:return Bt=jt.peerId,dn=jt.dataProducerId,Kt=jt.id,gn=jt.sctpStreamParameters,an=jt.label,Cn=jt.protocol,mn=jt.appData,ur.prev=3,ur.next=4,Pe._recvTransport.consumeData({id:Kt,dataProducerId:dn,sctpStreamParameters:gn,label:an,protocol:Cn,appData:Oa(Oa({},mn),{},{peerId:Bt})});case 4:Xt=ur.sent,Pe._dataConsumers.set(Xt.id,Xt),Xt.on("transportclose",function(){Pe._dataConsumers.delete(Xt.id)}),Xt.on("open",function(){fe.debug('DataConsumer "open" event')}),Xt.on("close",function(){fe.warn('DataConsumer "close" event'),Pe._dataConsumers.delete(Xt.id),vt.dispatch(tr({type:"error",text:"DataConsumer closed"}))}),Xt.on("error",function(At){fe.error('DataConsumer "error" event:%o',At),vt.dispatch(tr({type:"error",text:"DataConsumer error: ".concat(At)}))}),Xt.on("message",function(At){if(fe.debug('DataConsumer "message" event [streamId:%d]',Xt.sctpStreamParameters.streamId),At instanceof ArrayBuffer){var An=new DataView(At).getUint32();return An==Math.pow(2,32)-1?(fe.warn("dataChannelTest finished!"),void(Pe._nextDataChannelTestNumber=0)):(An>Pe._nextDataChannelTestNumber&&fe.warn("dataChannelTest: %s packets missing",An-Pe._nextDataChannelTestNumber),void(Pe._nextDataChannelTestNumber=An+1))}if(typeof At=="string")switch(Xt.label){case"chat":var Pr=vt.getState().peers,ta=Object.keys(Pr).map(function(oa){return Pr[oa]}).find(function(oa){return oa.dataConsumers.includes(Xt.id)});if(!ta){fe.warn('DataConsumer "message" from unknown peer');break}vt.dispatch(tr({title:"".concat(ta.displayName," says:"),text:At,timeout:5e3})),Pe._eventEmitter.emit("CHAT_MESSAGE",{text:At,senderId:ta.id,timestamp:new Date().getTime()});break;case"bot":vt.dispatch(tr({title:"Message from Bot:",text:At,timeout:5e3}))}else fe.warn('ignoring DataConsumer "message" (not a string)')}),vt.dispatch(da({id:Xt.id,sctpStreamParameters:Xt.sctpStreamParameters,label:Xt.label,protocol:Xt.protocol},Bt)),Ke(),ur.next=6;break;case 5:ur.prev=5,yr=ur.catch(3),fe.error('"newDataConsumer" request failed:%o',yr),vt.dispatch(tr({type:"error",text:"Error creating a DataConsumer: ".concat(yr)}));case 6:case"end":return ur.stop()}},mt,null,[[3,5]])}));return function(mt,jt){return Mt.apply(this,arguments)}}()),this._webSocket.on("enableMic",function(){var Mt=(0,_.A)(g().mark(function mt(jt,Ke){var Bt,dn,Kt;return g().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:try{dn=jt.peerId,(Bt=Pe._openTelemetry)===null||Bt===void 0||Bt.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Websocket REQ: enableMic for ".concat(dn),status:1}),Pe._eventEmitter.emit("MIC_REQUESTED",{peerId:dn}),Ke()}catch(an){fe.error('"enableMic" request failed:%o',an),(Kt=Pe._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:an.message}}),Pe._emitError({code:3027,message:an.message})}case 1:case"end":return gn.stop()}},mt)}));return function(mt,jt){return Mt.apply(this,arguments)}}()),this._webSocket.on("disableMic",function(){var Mt=(0,_.A)(g().mark(function mt(jt,Ke){var Bt,dn,Kt,gn,an,Cn;return g().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return mn.prev=0,Bt=(dn=Pe._openTelemetry)===null||dn===void 0?void 0:dn.trace({spanName:"Websocket REQ: disableMic"}),mn.next=1,Pe.disableMic(!1,Bt);case 1:(Kt=Pe._openTelemetry)===null||Kt===void 0||Kt.completeSpan({span:Bt,status:1,message:"Request Completed"}),Ke(),mn.next=3;break;case 2:mn.prev=2,Cn=mn.catch(0),(gn=Pe._openTelemetry)===null||gn===void 0||gn.completeSpan({span:Bt,status:2,message:"disableMic request failed ".concat(Cn)}),(an=Pe._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:Cn.message}}),Pe._emitError({code:3028,message:Cn.message});case 3:case"end":return mn.stop()}},mt,null,[[0,2]])}));return function(mt,jt){return Mt.apply(this,arguments)}}()),this._webSocket.on("enableWebcam",function(){var Mt=(0,_.A)(g().mark(function mt(jt,Ke){var Bt,dn,Kt;return g().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:try{dn=jt.peerId,(Bt=Pe._openTelemetry)===null||Bt===void 0||Bt.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Websocket REQ: enableWebcam for ".concat(dn),status:1}),Pe._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:dn}),Ke()}catch(an){fe.error('"enableWebcam" request failed:%o',an),(Kt=Pe._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:an.message}}),Pe._emitError({code:3029,message:an.message})}case 1:case"end":return gn.stop()}},mt)}));return function(mt,jt){return Mt.apply(this,arguments)}}()),this._webSocket.on("disableWebcam",function(){var Mt=(0,_.A)(g().mark(function mt(jt,Ke){var Bt,dn,Kt,gn,an,Cn;return g().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return mn.prev=0,Bt=(dn=Pe._openTelemetry)===null||dn===void 0?void 0:dn.trace({spanName:"Websocket REQ: disableWebcam"}),mn.next=1,Pe.disableWebcam(Bt);case 1:(Kt=Pe._openTelemetry)===null||Kt===void 0||Kt.completeSpan({span:Bt,status:1,message:"Request Completed"}),Ke(),mn.next=3;break;case 2:mn.prev=2,Cn=mn.catch(0),(gn=Pe._openTelemetry)===null||gn===void 0||gn.completeSpan({span:Bt,status:2,message:"disableWebcam request failed ".concat(Cn)}),(an=Pe._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:Cn.message}}),Pe._emitError({code:3030,message:Cn.message});case 3:case"end":return mn.stop()}},mt,null,[[0,2]])}));return function(mt,jt){return Mt.apply(this,arguments)}}()),this._webSocket.on("pinStateChanged",function(){var Mt=(0,_.A)(g().mark(function mt(jt,Ke){var Bt,dn,Kt,gn,an,Cn,mn,Xt,yr,ur;return g().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:At.prev=0,gn=jt.peerId,an=jt.state,Cn=jt.pinnedBy,Bt=(dn=Pe._openTelemetry)===null||dn===void 0?void 0:dn.trace({spanName:"Websocket REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:gn,state:an,pinnedBy:Cn})}}),Pe._pinnedParticipants.has(gn)||Pe._pinnedParticipants.set(gn,{cam:!1,share:!1}),mn=Pe._pinnedParticipants.get(gn),an.cam!=null&&(mn.cam=an.cam),an.share!=null&&(mn.share=an.share),Pe._pinnedParticipants.set(gn,mn),Pe._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:gn,state:an,pinnedBy:Cn}),mn.share==0&&mn.cam==0&&Pe._pinnedParticipants.delete(gn),(Kt=Pe._openTelemetry)===null||Kt===void 0||Kt.completeSpan({span:Bt,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(Pe._pinnedParticipants)}}),Ke(),At.next=2;break;case 1:throw At.prev=1,ur=At.catch(0),(Xt=Pe._openTelemetry)===null||Xt===void 0||Xt.completeSpan({span:Bt,status:2,message:"pinStateChanged request failed"}),(yr=Pe._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:ur.message}}),ur;case 2:case"end":return At.stop()}},mt,null,[[0,1]])}));return function(mt,jt){return Mt.apply(this,arguments)}}()),this._webSocket.on("switchRoom",function(){var Mt=(0,_.A)(g().mark(function mt(jt,Ke){return g().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:Pe._eventEmitter.emit("SWITCH_ROOM",jt),Ke();case 1:case"end":return Bt.stop()}},mt)}));return function(mt,jt){return Mt.apply(this,arguments)}}()),this._webSocket.on("statsData",function(){var Mt=(0,_.A)(g().mark(function mt(jt,Ke){return g().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:Ke({peerId:Pe._peerId,statsData:Pe._stats}),Pe._stats={};case 1:case"end":return Bt.stop()}},mt)}));return function(mt,jt){return Mt.apply(this,arguments)}}()),this._webSocket.on("notification",function(){var Mt=(0,_.A)(g().mark(function mt(jt){var Ke,Bt,dn,Kt,gn,an,Cn,mn,Xt,yr,ur,At,An,Pr,ta,oa,ja,Fa,Gr,G,K,X,de,Ee,xe,Se,$e,ke,Oe,Je,We,Ae,tt,ue,pe,Ie,qe,nt,tn,bt,Nt,Mn,ct,Fe,xt,wn,cn,vn,or,Lr,Tn,yn,Nr,br,ar,$n,Rn,qr,wa,Ws,Li,uu,bd,Vu,Bl,xd,wd,wh,Sd,Sh,Rh,qu,Eh,Rd,$u,Ed,kd,Yp,Cd,kh,Ch,Td,Th,Ph,Kp,Qp,Nh,du,Pd,wr;return g().wrap(function(Qn){for(;;)switch(Qn.prev=Qn.next){case 0:Ke=jt,fe.debug('proto "notification" event [method:%s, data:%o]',jt.method,Ke),wr=jt.method,Qn.next=wr==="error"?1:wr==="participantMediaStateChanged"?2:wr==="producerScore"?3:wr==="entryRequested"?4:wr==="entryResponded"?5:wr==="newPeer"?8:wr==="peerClosed"?9:wr==="peerDisplayNameChanged"?10:wr==="consumerClosed"?11:wr==="consumerPaused"?13:wr==="consumerResumed"?15:wr==="consumerLayersChanged"?17:wr==="consumerScore"?19:wr==="dataConsumerClosed"?20:wr==="activeSpeaker"?22:wr==="consumerResumedSubManager"?23:wr==="consumerPausedSubManager"?24:wr==="transcriptionStateChanged"?25:wr==="transcriptionText"?26:wr==="recordingStateChanged"?27:wr==="recordingStarted"?28:wr==="recordingStopped"?29:wr==="livestreamStateChanged"?30:wr==="livestreamStarted"?31:wr==="livestreamStopped"?32:wr==="hlsStateChanged"?33:wr==="hlsPlayableStateChanged"?34:wr==="hlsStarted"?35:wr==="hlsStopped"?36:wr==="whiteboardStarted"?37:wr==="whiteboardStopped"?38:wr==="addCharacter"?39:wr==="removeCharacter"?40:wr==="characterStateChanged"?41:wr==="characterMessage"?42:wr==="userMessage"?43:wr==="characterData"?44:wr==="characterError"?45:wr==="videoStatusChanged"?46:wr==="videoSeeked"?47:wr==="connectionOpen"?48:wr==="connectionClose"?49:wr==="connectionChatMessage"?50:wr==="connectionParticipantJoined"?51:wr==="connectionParticipantLeft"?52:wr==="pubsubMessage"?53:wr==="peerModeChanged"?54:wr==="restartIce"?55:wr==="mediaRelayStarted"?56:wr==="mediaRelayStopped"?57:wr==="mediaRelayError"?58:wr==="mediaRelayRequestResponse"?59:wr==="mediaRelayRequestReceived"?60:61;break;case 1:return Kt=Ke,Pe._eventEmitter.emit("ERROR",Kt),(Bt=Pe._videosdkLogs)===null||Bt===void 0||Bt.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:Kt.message}}),(dn=Pe._openTelemetry)===null||dn===void 0||dn.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:Kt.message},status:2}),Qn.abrupt("continue",62);case 2:try{gn=Ke.peerId,an=Ke.kind,Cn=Ke.newState,Pe._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:gn,kind:an,newState:Cn}),an=="video"&&((mn=Pe._openTelemetry)===null||mn===void 0||mn.traceAutoComplete({spanName:"".concat(gn," has ").concat(Cn?"enable":"disable"," ").concat(an),status:1}))}catch(hu){fe.error('"newProducer" request failed:%o',hu),(Xt=Pe._videosdkLogs)===null||Xt===void 0||Xt.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:hu.message}})}case 3:return yr=Ke.producerId,ur=Ke.score,vt.dispatch(Ps(yr,ur)),Qn.abrupt("continue",62);case 4:return An=Ke.id,Pr=Ke.name,ta=(At=Pe._openTelemetry)===null||At===void 0?void 0:At.trace({spanName:"Websocket Noti: entryRequested",span:Pe._joinSpan,attributes:{data:JSON.stringify({id:An,name:Pr})}}),An!==Pe._peerId?(Pe._eventEmitter.emit("ENTRY_REQUESTED",{id:An,name:Pr}),(oa=Pe._openTelemetry)===null||oa===void 0||oa.completeSpan({span:ta,status:1,message:"EntryResponded Recieved"})):(ja=Pe._openTelemetry)===null||ja===void 0||ja.completeSpan({span:ta,status:2,message:"Entry Request Failed"}),Qn.abrupt("continue",62);case 5:if(G=Ke.id,K=Ke.decision,X=Ke.sessionId,de=Ke.switchingRoomId,Ee=(Fa=Pe._openTelemetry)===null||Fa===void 0?void 0:Fa.trace({name:"Entry Response Handling",attributes:{"peer.id":G,"entry.decision":K,switching_room:!!de}}),G===Pe._peerId&&K==="allowed"){Qn.next=6;break}return(xe=Pe._openTelemetry)===null||xe===void 0||xe.completeSpan({span:Pe._joinSpan,status:2,message:"Join Request Denied"}),(Se=Pe._openTelemetry)===null||Se===void 0||Se.completeSpan({span:Ee,status:2,message:"Entry denied for peer"}),Qn.abrupt("continue",62);case 6:if(Pe._eventEmitter.emit("ENTRY_RESPONDED",{id:G,decision:K}),!de){Qn.next=7;break}return($e=Pe._openTelemetry)===null||$e===void 0||$e.completeSpan({span:Ee,status:1,message:"Switching room initiated"}),Pe.softClose(),Pe.switchingRoom(de),Qn.abrupt("continue",62);case 7:return Pe._videosdkLogs=new fn({roomId:Pe._roomId,peerId:Pe._peerId,logs:Le,observabilityJwt:Ue,deviceInfo:Pe._deviceInfo,sessionId:X,debugMode:Pe._debugMode}),Pe.joinRoom(),(Gr=Pe._openTelemetry)===null||Gr===void 0||Gr.completeSpan({span:Ee,status:1,message:"Entry response handled successfully"}),Qn.abrupt("continue",62);case 8:Oe=Ns(Oa(Oa({},ke=Ke),{},{consumers:[],dataConsumers:[]})),vt.dispatch(Oe),Pe._eventEmitter.emit(Oe.type,Oe.payload),vt.dispatch(tr({text:"".concat(ke.displayName," has joined the room")}));try{(Je=Pe._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Websocket Noti: newPeer ".concat(ke.displayName),attributes:{peerData:JSON.stringify(ke)}})}catch(hu){(We=Pe._videosdkLogs)===null||We===void 0||We.pushLogs({logText:"Error Websocket Noti: newPeer",logType:"ERROR",attributes:{error:hu.message}}),console.error(hu)}return Qn.abrupt("continue",62);case 9:return tt=Ke.peerId,ue=Eo(tt),vt.dispatch(ue),Pe._eventEmitter.emit(ue.type,ue.payload),(Ae=Pe._openTelemetry)===null||Ae===void 0||Ae.traceAutoComplete({spanName:"Websocket Noti: peerClosed for ".concat(tt)}),Qn.abrupt("continue",62);case 10:return pe=Ke.peerId,Ie=Ke.displayName,qe=Ke.oldDisplayName,vt.dispatch(mo(Ie,pe)),vt.dispatch(tr({text:"".concat(qe," is now ").concat(Ie)})),Qn.abrupt("continue",62);case 11:if(tn=Ke.consumerId,bt=Pe._consumers.get(tn)){Qn.next=12;break}return Qn.abrupt("continue",62);case 12:return bt.close(),Pe._consumers.delete(tn),Nt=bt.appData.peerId,Mn=ao(tn,Nt),Pe._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"ended",peerId:Nt,streamId:bt._track.id}),vt.dispatch(Mn),Pe._eventEmitter.emit(Mn.type,Mn.payload),(nt=Pe._openTelemetry)===null||nt===void 0||nt.traceAutoComplete({spanName:"Websocket Noti: consumerClosed for id ".concat(tn),attributes:{consumerData:JSON.stringify(bt)}}),Qn.abrupt("continue",62);case 13:if(ct=Ke.consumerId,Fe=Pe._consumers.get(ct)){Qn.next=14;break}return Qn.abrupt("continue",62);case 14:return Fe.pause(),vt.dispatch(Ni(ct,"remote")),Pe._eventEmitter.emit("CONSUMER_PAUSED",{consumerId:ct,peerId:Fe.appData.peerId}),Qn.abrupt("continue",62);case 15:if(xt=Ke.consumerId,wn=Pe._consumers.get(xt),Pe._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"active",peerId:wn.appData.peerId,streamId:wn._track.id}),wn){Qn.next=16;break}return Qn.abrupt("continue",62);case 16:return wn.resume(),vt.dispatch(_i(xt,"remote")),Pe._eventEmitter.emit("CONSUMER_RESUMED",{consumerId:xt,peerId:wn.appData.peerId}),Qn.abrupt("continue",62);case 17:if(vn=Ke.consumerId,or=Ke.spatialLayer,Lr=Ke.temporalLayer,(Tn=Pe._consumers.get(vn)).currentSpatialLayer=or,Tn.currentTemporalLayer=Lr,Tn){Qn.next=18;break}return Qn.abrupt("continue",62);case 18:return((cn=Tn.appData)===null||cn===void 0||(cn=cn.encodings)===null||cn===void 0?void 0:cn.length)>1&&Pe._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Tn.appData.peerId,prevQuality:Tn.spatialLayers-1-Tn.currentSpatialLayer==0?"HIGH":Tn.spatialLayers-1-Tn.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:Tn.spatialLayers-1-or==0?"HIGH":Tn.spatialLayers-1-or==1?"MEDIUM":"LOW"}),Tn.currentSpatialLayer=or,Tn.currentTemporalLayer=Lr,vt.dispatch(Di(vn,or,Lr)),Qn.abrupt("continue",62);case 19:return yn=Ke.consumerId,Nr=Ke.score,vt.dispatch(Vs(yn,Nr)),Qn.abrupt("continue",62);case 20:if(br=Ke.dataConsumerId,ar=Pe._dataConsumers.get(br)){Qn.next=21;break}return Qn.abrupt("continue",62);case 21:return ar.close(),Pe._dataConsumers.delete(br),$n=ar.appData.peerId,vt.dispatch(oi(br,$n)),Qn.abrupt("continue",62);case 22:return Rn=Ke.peerId,qr=Hn(Rn),vt.dispatch(qr),Pe._eventEmitter.emit(qr.type,qr.payload),Qn.abrupt("continue",62);case 23:return Pe._eventEmitter.emit("SUB_MANAGER_RESUMED",Ke),Qn.abrupt("continue",62);case 24:return Pe._eventEmitter.emit("SUB_MANAGER_PAUSED",Ke),Qn.abrupt("continue",62);case 25:return Pe._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",Ke),(wa=Pe._openTelemetry)===null||wa===void 0||wa.traceAutoComplete({spanName:"Emitted TRANSCRIPTION_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 26:return Pe._eventEmitter.emit("TRANSCRIPTION_TEXT",Ke),Qn.abrupt("continue",62);case 27:return Pe._eventEmitter.emit("RECORDING_STATE_CHANGED",Ke),(Ws=Pe._openTelemetry)===null||Ws===void 0||Ws.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 28:return Pe._eventEmitter.emit("RECORDING_STARTED",{}),Qn.abrupt("continue",62);case 29:return Pe._eventEmitter.emit("RECORDING_STOPPED",{}),Qn.abrupt("continue",62);case 30:return Pe._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",Ke),(Li=Pe._openTelemetry)===null||Li===void 0||Li.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 31:return Pe._eventEmitter.emit("LIVESTREAM_STARTED",{}),Qn.abrupt("continue",62);case 32:return Pe._eventEmitter.emit("LIVESTREAM_STOPPED",{}),Qn.abrupt("continue",62);case 33:return Pe._eventEmitter.emit("HLS_STATE_CHANGED",Ke),(uu=Pe._openTelemetry)===null||uu===void 0||uu.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 34:return Ke.isPlayable&&(Pe._eventEmitter.emit("HLS_STATE_CHANGED",Oa(Oa({},Ke),{},{status:Oc.V.HLS_PLAYABLE})),(bd=Pe._openTelemetry)===null||bd===void 0||bd.traceAutoComplete({spanName:"Websocket Noti: hlsPlayableStateChanged",status:1})),Qn.abrupt("continue",62);case 35:return Vu=Ke.downstreamUrl,Pe._eventEmitter.emit("HLS_STARTED",Vu),Qn.abrupt("continue",62);case 36:return Pe._eventEmitter.emit("HLS_STOPPED",{}),Qn.abrupt("continue",62);case 37:return Bl=Ke.state,xd=Ke.url,Bl?Pe._eventEmitter.emit("WHITEBOARD_STARTED",{state:Bl}):xd&&Pe._eventEmitter.emit("WHITEBOARD_STARTED",{url:xd}),Qn.abrupt("continue",62);case 38:return Pe._eventEmitter.emit("WHITEBOARD_STOPPED",{}),Qn.abrupt("continue",62);case 39:return wh=Ns(Oa(Oa({},Ke),{},{consumers:[],dataConsumers:[]})),vt.dispatch(wh),Pe._eventEmitter.emit("ADD_CHARACTER",Ke),(wd=Pe._openTelemetry)===null||wd===void 0||wd.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(Ke),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 40:return Sh=Ke.id,Rh=Eo(Sh),vt.dispatch(Rh),Pe._eventEmitter.emit("REMOVE_CHARACTER",Ke),(Sd=Pe._openTelemetry)===null||Sd===void 0||Sd.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(Ke),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 41:return Pe._eventEmitter.emit("CHARACTER_STATE_CHANGED",Ke),(qu=Pe._openTelemetry)===null||qu===void 0||qu.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 42:return Pe._eventEmitter.emit("CHARACTER_MESSAGE",Ke),Qn.abrupt("continue",62);case 43:return Pe._eventEmitter.emit("USER_MESSAGE",Ke),Qn.abrupt("continue",62);case 44:return Pe._eventEmitter.emit("CHARACTER_DATA",Ke),Qn.abrupt("continue",62);case 45:return Pe._eventEmitter.emit("CHARACTER_ERROR",Ke),Qn.abrupt("continue",62);case 46:return Pe._eventEmitter.emit("VIDEO_STATE_CHANGED",Ke),Qn.abrupt("continue",62);case 47:return Eh=Ke.currentTime,Pe._eventEmitter.emit("VIDEO_SEEKED",{currentTime:Eh}),Qn.abrupt("continue",62);case 48:return Pe._eventEmitter.emit("CONNECTION_OPEN",Ke),Qn.abrupt("continue",62);case 49:return Pe._eventEmitter.emit("CONNECTION_CLOSE",Ke),Qn.abrupt("continue",62);case 50:return Pe._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",Ke),Qn.abrupt("continue",62);case 51:return Pe._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",Ke),Qn.abrupt("continue",62);case 52:return Pe._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",Ke),Qn.abrupt("continue",62);case 53:return Pe._eventEmitter.emit("PUBSUB_MESSAGE",Ke),Qn.abrupt("continue",62);case 54:return Pe._eventEmitter.emit("PEER_MODE_CHANGED",Ke),(Rd=Pe._openTelemetry)===null||Rd===void 0||Rd.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 55:return Ed=Ke.transportId,kd=Ke.iceParameters,Yp=($u=Pe._openTelemetry)===null||$u===void 0?void 0:$u.trace({spanName:"Websocket Noti: restartIce for transportId :".concat(Ed),attributes:{iceParameters:JSON.stringify(kd)}}),Pe.handleRemoteRestartIce({transportId:Ed,iceParameters:kd,internalSpan:Yp}),Qn.abrupt("continue",62);case 56:return Cd=jt.meetingId,Pe._eventEmitter.emit("MEDIA_RELAY_STARTED",{meetingId:Cd}),Qn.abrupt("continue",62);case 57:return kh=jt.meetingId,Ch=jt.reason,Pe._eventEmitter.emit("MEDIA_RELAY_STOPPED",{meetingId:kh,reason:Ch}),Qn.abrupt("continue",62);case 58:return Td=jt.meetingId,Th=jt.reason,Pe._eventEmitter.emit("MEDIA_RELAY_ERROR",{meetingId:Td,reason:Th}),Qn.abrupt("continue",62);case 59:return Ph=jt.decision,Kp=jt.decidedBy,Qp=jt.meetingId,Pe._eventEmitter.emit("MEDIA_RELAY_REQUEST_RESPONSE",{decision:Ph,decidedBy:Kp,meetingId:Qp}),Qn.abrupt("continue",62);case 60:return Nh=jt.peerId,du=jt.meetingId,Pd=jt.displayName,Pe._eventEmitter.emit("MEDIA_RELAY_REQUEST_RECEIVED",{peerId:Nh,meetingId:du,displayName:Pd}),Qn.abrupt("continue",62);case 61:fe.error('unknown Websocket notification.method "%s"',jt.method);case 62:case"end":return Qn.stop()}},mt)}));return function(mt){return Mt.apply(this,arguments)}}()),ft.next=3;break;case 2:ft.prev=2,xn=ft.catch(0),(hn=this._videosdkLogs)===null||hn===void 0||hn.pushLogs({logText:"Error initializing the meeting :: ".concat(xn),logType:"ERROR",attributes:{error:xn}}),this.emitMeetingStateChange(ms);case 3:case"end":return ft.stop()}},ge,this,[[0,2]])})),function(){return Il.apply(this,arguments)})},{key:"requestEntry",value:(_d=(0,_.A)(g().mark(function ge(){var ee,re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return se=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"Requesting Entry",span:this._joinSpan}),ie.next=1,this._socketRequest("requestEntry",{name:this._displayName});case 1:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:se,status:1,message:"Entry Requested Successfully"});case 2:case"end":return ie.stop()}},ge,this)})),function(){return _d.apply(this,arguments)})},{key:"respondEntry",value:(Hu=(0,_.A)(g().mark(function ge(ee,re){var se,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return le=(se=this._openTelemetry)===null||se===void 0?void 0:se.trace({spanName:"Responding Entry",attributes:{peerId:ee,decision:re},span:this._joinSpan}),De.next=1,this._socketRequest("respondEntry",{id:ee,decision:re});case 1:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({message:"Entry Responded Successfully",span:le,status:1});case 2:case"end":return De.stop()}},ge,this)})),function(ge,ee){return Hu.apply(this,arguments)})},{key:"startTranscription",value:(Fu=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le;return g().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return fe.debug("startTranscription()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"startTranscription() Start",attributes:{config:ee?JSON.stringify(ee):"config Not Specify"}}),Ue.prev=1,Ue.next=2,this._socketRequest("startTranscription",{config:ee});case 2:Ue.next=4;break;case 3:Ue.prev=3,Le=Ue.catch(1),fe.error("startTranscription() | failed:%o",Le),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"startTranscription() failed"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:Le.message}}),this._emitError({code:4031,message:Le.message});case 4:(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:ie,status:1,message:"startTranscription() End"});case 5:case"end":return Ue.stop()}},ge,this,[[1,3]])})),function(ge){return Fu.apply(this,arguments)})},{key:"stopTranscription",value:(Vc=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return fe.debug("stopTranscription()"),se=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"stopTranscription() Start"}),Le.prev=1,Le.next=2,this._socketRequest("stopTranscription",{});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:se,status:2,message:"stopTranscription() failed"}),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:De.message}}),this._emitError({code:4032,message:De.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:se,status:1,message:"stopTranscription() End"});case 5:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(){return Vc.apply(this,arguments)})},{key:"pauseAllConsumers",value:(wc=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn;return g().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"pauseAllConsumers() Start",attributes:{kind:ee||"Kind not specified"}}),Vt.prev=1,Vt.next=2,this._socketRequest("pauseAllConsumers",{kind:ee===void 0?"all":ee});case 2:if(De=Vt.sent,Le=!1,!((De==null||(le=De.consumersWithIssues)===null||le===void 0?void 0:le.length)>0)){Vt.next=4;break}return Vt.next=3,this._socketRequest("pauseAllConsumers",{kind:ee===void 0?"all":ee});case 3:((kt=Vt.sent)==null||(Ue=kt.consumersWithIssues)===null||Ue===void 0?void 0:Ue.length)===0&&(Le=!0),Vt.next=5;break;case 4:Le=!0;case 5:Le&&this._eventEmitter.emit("ALL_CONSUMERS_PAUSED",{kind:ee}),Vt.next=7;break;case 6:Vt.prev=6,bn=Vt.catch(1),fe.error("pauseAllConsumers() | failed:%o",bn),(Dt=this._openTelemetry)===null||Dt===void 0||Dt.completeSpan({span:ie,status:2,message:"pauseAllConsumers() failed"}),(qt=this._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"Error pauseAllConsumers() failed",logType:"ERROR",attributes:{error:bn.message}});case 7:(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:ie,status:1,message:"pauseAllConsumers() End"});case 8:case"end":return Vt.stop()}},ge,this,[[1,6]])})),function(ge){return wc.apply(this,arguments)})},{key:"resumeAllConsumers",value:(os=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn;return g().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"resumeAllConsumers() Start",attributes:{kind:ee||"Kind not specified"}}),Vt.prev=1,Vt.next=2,this._socketRequest("resumeAllConsumers",{kind:ee===void 0?"all":ee});case 2:if(De=Vt.sent,Le=!1,!((De==null||(le=De.consumersWithIssues)===null||le===void 0?void 0:le.length)>0)){Vt.next=4;break}return Vt.next=3,this._socketRequest("resumeAllConsumers",{kind:ee===void 0?"all":ee});case 3:((kt=Vt.sent)==null||(Ue=kt.consumersWithIssues)===null||Ue===void 0?void 0:Ue.length)===0&&(Le=!0),Vt.next=5;break;case 4:Le=!0;case 5:Le&&this._eventEmitter.emit("ALL_CONSUMERS_RESUMED",{kind:ee}),Vt.next=7;break;case 6:Vt.prev=6,bn=Vt.catch(1),fe.error("resumeAllConsumers() | failed:%o",bn),(Dt=this._openTelemetry)===null||Dt===void 0||Dt.completeSpan({span:ie,status:2,message:"resumeAllConsumers() failed"}),(qt=this._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"Error resumeAllConsumers() failed",logType:"ERROR",attributes:{error:bn.message}});case 7:(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:ie,status:1,message:"resumeAllConsumers() End"});case 8:case"end":return Vt.stop()}},ge,this,[[1,6]])})),function(ge){return os.apply(this,arguments)})},{key:"startRecording",value:(xc=(0,_.A)(g().mark(function ge(ee,re,se,ie){var le,De,Le,Ue,kt,Dt;return g().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return fe.debug("startRecording()"),Le=(le=this._openTelemetry)===null||le===void 0?void 0:le.trace({spanName:"startRecording() Start",attributes:{webhookUrl:ee||"webhookUrl Not Specify",awsDirPath:re||"awsDirPath Not Specify",config:se?JSON.stringify(se):"config Not Specify",transcription:ie?JSON.stringify(ie):"transcription Not Specify"}}),qt.prev=1,qt.next=2,this._socketRequest("startRecording",{webhookUrl:ee,awsDirPath:re,config:se,transcription:ie});case 2:qt.next=4;break;case 3:qt.prev=3,Dt=qt.catch(1),fe.error("startRecording() | failed:%o",Dt),(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:Le,status:2,message:"startRecording() failed"}),(kt=this._videosdkLogs)===null||kt===void 0||kt.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:Dt.message}}),this._emitError({code:4011,message:Dt.message});case 4:(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:Le,status:1,message:"startRecording() End"});case 5:case"end":return qt.stop()}},ge,this,[[1,3]])})),function(ge,ee,re,se){return xc.apply(this,arguments)})},{key:"stopRecording",value:(bc=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(!this._closed){Le.next=1;break}return Le.abrupt("return");case 1:return fe.debug("stopRecording()"),se=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"stopRecording() Start"}),Le.prev=2,Le.next=3,this._socketRequest("stopRecording",{});case 3:Le.next=5;break;case 4:Le.prev=4,De=Le.catch(2),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:se,status:2,message:"stopRecording() failed"}),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:De.message}}),this._emitError({code:4012,message:De.message});case 5:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:se,status:1,message:"stopRecording() End"});case 6:case"end":return Le.stop()}},ge,this,[[2,4]])})),function(){return bc.apply(this,arguments)})},{key:"startLivestream",value:(_c=(0,_.A)(g().mark(function ge(ee,re){var se,ie,le,De,Le,Ue;return g().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return fe.debug("startLivestream()"),le=(se=this._openTelemetry)===null||se===void 0?void 0:se.trace({spanName:"startLivestream() Start",attributes:{outputs:ee?JSON.stringify(ee):"outputs Not Specify",config:re?JSON.stringify(re):"config Not Specify"}}),kt.prev=1,kt.next=2,this._socketRequest("startLivestream",{outputs:ee,config:re});case 2:kt.next=4;break;case 3:kt.prev=3,Ue=kt.catch(1),(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:le,status:1,message:"startLivestream() End"}),(Le=this._videosdkLogs)===null||Le===void 0||Le.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:Ue.message}}),this._emitError({code:4013,message:Ue.message});case 4:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:le,status:1,message:"startLivestream() End"});case 5:case"end":return kt.stop()}},ge,this,[[1,3]])})),function(ge,ee){return _c.apply(this,arguments)})},{key:"stopLivestream",value:(Rs=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return fe.debug("stopLivestream()"),se=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"stopLivestream() Start"}),Le.prev=1,Le.next=2,this._socketRequest("stopLivestream",{});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:De.message}}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:se,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:4014,message:De.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:se,status:1,message:"stopLivestream() End"});case 5:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(){return Rs.apply(this,arguments)})},{key:"startHls",value:(Ll=(0,_.A)(g().mark(function ge(ee,re){var se,ie,le,De,Le,Ue;return g().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return ee=ee||{},re=re||{},fe.debug("startHls()"),le=(se=this._openTelemetry)===null||se===void 0?void 0:se.trace({spanName:"startHls() Start",attributes:{config:ee?JSON.stringify(ee):"config Not Specify",transcription:re?JSON.stringify(re):"transcription Not Specify"}}),kt.prev=1,kt.next=2,this._socketRequest("startHls",{config:ee,transcription:re});case 2:kt.next=4;break;case 3:kt.prev=3,Ue=kt.catch(1),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:Ue.message}}),(Le=this._openTelemetry)===null||Le===void 0||Le.completeSpan({span:le,status:2,message:"Error startHls() failed"}),this._emitError({code:4016,message:Ue.message}),fe.error("startHls() | failed:%o",Ue);case 4:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:le,status:1,message:"startHlsSpan() End"});case 5:case"end":return kt.stop()}},ge,this,[[1,3]])})),function(ge,ee){return Ll.apply(this,arguments)})},{key:"stopHls",value:(Uu=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return fe.debug("stopHls()"),se=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"stopHls() Start"}),Le.prev=1,Le.next=2,this._socketRequest("stopHls",{});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:De.message}}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:se,status:2,message:"Error stopHls() failed"}),this._emitError({code:4017,message:De.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:se,status:1,message:"stopHls() End"});case 5:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(){return Uu.apply(this,arguments)})},{key:"startWhiteboard",value:(zu=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return fe.debug("startWhiteboard()"),se=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"startWhiteboard() Start"}),De.prev=1,De.next=2,this._socketRequest("startWhiteboard",{version:"v2"});case 2:De.next=4;break;case 3:De.prev=3,le=De.catch(1),fe.error("startWhiteboard() | failed:%o",le),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:se,status:2,message:"Error startWhiteboard() failed"}),this._emitError({code:3021,message:le.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:se,status:1,message:"startWhiteboard() End"});case 5:case"end":return De.stop()}},ge,this,[[1,3]])})),function(){return zu.apply(this,arguments)})},{key:"stopWhiteboard",value:(Bu=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return fe.debug("stopWhiteboard()"),se=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"stopWhiteboard() Start"}),De.prev=1,De.next=2,this._socketRequest("stopWhiteboard",{});case 2:De.next=4;break;case 3:De.prev=3,le=De.catch(1),fe.error("stopWhiteboard() | failed:%o",le),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:se,status:2,message:"Error stopWhiteboard() failed"}),this._emitError({code:3022,message:le.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:se,status:1,message:"stopWhiteboard() End"});case 5:case"end":return De.stop()}},ge,this,[[1,3]])})),function(){return Bu.apply(this,arguments)})},{key:"joinCharacter",value:(jl=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le;return g().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return fe.debug("joinCharacter()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"joinCharacter() Start",attributes:{config:ee?JSON.stringify(ee):"config Not Specify"}}),Ue.prev=1,Ue.next=2,this._socketRequest("joinCharacter",{config:ee});case 2:return Ue.abrupt("return",Ue.sent);case 3:return Ue.prev=3,Le=Ue.catch(1),fe.error("joinCharacter() | failed:%o",Le),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"joinCharacter() failed"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:Le.message}}),this._emitError({code:4033,message:Le.message}),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:ie,status:1,message:"joinCharacter() End"}),Ue.abrupt("return",!1);case 4:case"end":return Ue.stop()}},ge,this,[[1,3]])})),function(ge){return jl.apply(this,arguments)})},{key:"switchTo",value:(Ss=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le,Ue,kt,Dt;return g().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return se=ee.meetingId,ie=ee.participantId,le=ee.token,De=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"switchTo() Start",attributes:{"peer.id":ie,meetingId:se}}),qt.prev=1,qt.next=2,this._socketRequest("switchToMeeting",{meetingId:se,participantId:ie,secret:le||this._secret});case 2:(Le=this._openTelemetry)===null||Le===void 0||Le.completeSpan({span:De,status:1,message:"switchTo() Success"}),qt.next=4;break;case 3:qt.prev=3,Dt=qt.catch(1),(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:De,status:2,message:"switchTo() failed"}),(kt=this._videosdkLogs)===null||kt===void 0||kt.pushLogs({logText:"Error switchTo() failed",logType:"ERROR",attributes:{error:Dt.message}});case 4:case"end":return qt.stop()}},ge,this,[[1,3]])})),function(ge){return Ss.apply(this,arguments)})},{key:"removeCharacter",value:(ji=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le;return g().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return fe.debug("removeCharacter()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"removeCharacter() Start"}),Ue.prev=1,Ue.next=2,this._socketRequest("leaveCharacter",{config:ee});case 2:Ue.next=4;break;case 3:return Ue.prev=3,Le=Ue.catch(1),fe.error("removeCharacter() | failed:%o",Le),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"removeCharacter() failed"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:Le.message}}),this._emitError({code:4034,message:Le.message}),Ue.abrupt("return",!1);case 4:return(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:ie,status:1,message:"removeCharacter() End"}),Ue.abrupt("return",!0);case 5:case"end":return Ue.stop()}},ge,this,[[1,3]])})),function(ge){return ji.apply(this,arguments)})},{key:"sendCharacterMessage",value:(cl=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return re=ee.interactionId,se=ee.text,fe.debug("sendCharacterMessage()"),le.prev=1,le.next=2,this._socketRequest("sendCharacterMessage",{interactionId:re,text:se});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),fe.error("sendCharacterMessage() | failed:%o",ie),this._emitError({code:4035,message:ie.message});case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return cl.apply(this,arguments)})},{key:"interruptCharacter",value:(Io=(0,_.A)(g().mark(function ge(ee){var re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=ee.interactionId,fe.debug("interruptCharacter()"),ie.prev=1,ie.next=2,this._socketRequest("interruptCharacter",{interactionId:re});case 2:ie.next=4;break;case 3:ie.prev=3,se=ie.catch(1),fe.error("interruptCharacter() | failed:%o",se),this._emitError({code:4036,message:se.message});case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return Io.apply(this,arguments)})},{key:"pinStateChange",value:(Hc=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return se=ee.peerId,ie=ee.state,(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Pin state Change for ".concat(se),attributes:{state:ie?JSON.stringify(ie):null},status:1}),Le.prev=1,Le.next=2,this._socketRequest("pinStateChanged",{peerId:se,state:ie});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:De.message}}),fe.error("pinStateChange() | failed");case 4:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(ge){return Hc.apply(this,arguments)})},{key:"startVideo",value:(yc=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return se=ee.link,fe.debug("startVideo()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),De.prev=1,De.next=2,this._socketRequest("startVideo",{link:se});case 2:De.next=4;break;case 3:De.prev=3,le=De.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:le.message}}),fe.error("startVideo() | failed:%o",le),this._emitError({code:3023,message:le.message});case 4:case"end":return De.stop()}},ge,this,[[1,3]])})),function(ge){return yc.apply(this,arguments)})},{key:"stopVideo",value:(ts=(0,_.A)(g().mark(function ge(){var ee,re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return fe.debug("stopVideo()"),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),ie.prev=1,ie.next=2,this._socketRequest("stopVideo",{});case 2:ie.next=4;break;case 3:ie.prev=3,se=ie.catch(1),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:se.message}}),fe.error("stopVideo() | failed:%o",se),this._emitError({code:3024,message:se.message});case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return ts.apply(this,arguments)})},{key:"pauseVideo",value:(So=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return fe.debug("pauseVideo()"),se.prev=1,se.next=2,this._socketRequest("pauseVideo",{currentTime:ee});case 2:se.next=4;break;case 3:se.prev=3,re=se.catch(1),fe.error("pauseVideo() | failed:%o",re),this._emitError({code:3025,message:re.message});case 4:case"end":return se.stop()}},ge,this,[[1,3]])})),function(ge){return So.apply(this,arguments)})},{key:"resumeVideo",value:(uo=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return fe.debug("resumeVideo()"),re.prev=1,re.next=2,this._socketRequest("resumeVideo",{});case 2:re.next=4;break;case 3:re.prev=3,ee=re.catch(1),fe.error("resumeVideo() | failed:%o",ee),this._emitError({code:3026,message:ee.message});case 4:case"end":return re.stop()}},ge,this,[[1,3]])})),function(){return uo.apply(this,arguments)})},{key:"seekVideo",value:(Si=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return fe.debug("seekVideo()"),se.prev=1,se.next=2,this._socketRequest("seekVideo",{currentTime:ee});case 2:se.next=4;break;case 3:se.prev=3,re=se.catch(1),fe.error("seekVideo() | failed:%o",re),this._emitError({code:3031,message:re.message});case 4:case"end":return se.stop()}},ge,this,[[1,3]])})),function(ge){return Si.apply(this,arguments)})},{key:"enablePeerMic",value:(Wa=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Enabling peer ".concat(ee," Mic"),status:1}),fe.debug("enablePeerMic()"),le.prev=1,le.next=2,this._socketRequest("enablePeerMic",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("enablePeerMic() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return Wa.apply(this,arguments)})},{key:"requestMediaRelay",value:(Mi=(0,_.A)(g().mark(function ge(ee,re,se){var ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.prev=0,De.next=1,this._socketRequest("mediaRelayRequestSent",{meetingId:ee,secret:re??this._secret,kinds:se??["audio","video","share","share_audio"]});case 1:De.next=3;break;case 2:De.prev=2,le=De.catch(0),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error relayRequest() failed",logType:"ERROR",attributes:{error:le.message}});case 3:case"end":return De.stop()}},ge,this,[[0,2]])})),function(ge,ee,re){return Mi.apply(this,arguments)})},{key:"handleRelayRequestResponse",value:(Fc=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return re=ee.decision,se=ee.peerId,ie=ee.meetingId,Le.prev=1,Le.next=2,this._socketRequest("respondToMediaRelayRequest",{decision:re,decidedBy:this._peerId,peerId:se,meetingId:ie});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error respondToMediaRelayRequest() failed",logType:"ERROR",attributes:{error:De.message}});case 4:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(ge){return Fc.apply(this,arguments)})},{key:"stopMediaRelay",value:(lo=(0,_.A)(g().mark(function ge(ee){var re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=1,this._socketRequest("mediaRelayRequestStop",{meetingId:ee});case 1:ie.next=3;break;case 2:ie.prev=2,se=ie.catch(0),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopMediaRelay() failed",logType:"ERROR",attributes:{error:se.message}});case 3:case"end":return ie.stop()}},ge,this,[[0,2]])})),function(ge){return lo.apply(this,arguments)})},{key:"enableRelayMedia",value:(Lo=(0,_.A)(g().mark(function ge(ee,re){var se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.prev=0,le.next=1,this._socketRequest("enableRelayMedia",{meetingId:ee,kind:re});case 1:le.next=3;break;case 2:le.prev=2,ie=le.catch(0),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error enableRelayMedia() failed",logType:"ERROR",attributes:{error:ie.message}});case 3:case"end":return le.stop()}},ge,this,[[0,2]])})),function(ge,ee){return Lo.apply(this,arguments)})},{key:"disableRelayMedia",value:(Ml=(0,_.A)(g().mark(function ge(ee,re){var se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.prev=0,le.next=1,this._socketRequest("disableRelayMedia",{meetingId:ee,kind:re});case 1:le.next=3;break;case 2:le.prev=2,ie=le.catch(0),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error disableRelayMedia() failed",logType:"ERROR",attributes:{error:ie.message}});case 3:case"end":return le.stop()}},ge,this,[[0,2]])})),function(ge,ee){return Ml.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(vc=(0,_.A)(g().mark(function ge(){var ee,re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.prev=0,se.next=1,this._socketRequest("enableAdaptiveSubscription");case 1:se.next=3;break;case 2:se.prev=2,re=se.catch(0),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error enableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:re.message}});case 3:case"end":return se.stop()}},ge,this,[[0,2]])})),function(){return vc.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(js=(0,_.A)(g().mark(function ge(){var ee,re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.prev=0,se.next=1,this._socketRequest("disableAdaptiveSubscription");case 1:se.next=3;break;case 2:se.prev=2,re=se.catch(0),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error disableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:re.message}});case 3:case"end":return se.stop()}},ge,this,[[0,2]])})),function(){return js.apply(this,arguments)})},{key:"disablePeerMic",value:(ds=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Disabling peer ".concat(ee," Mic"),status:1}),fe.debug("disablePeerMic()"),le.prev=1,le.next=2,this._socketRequest("disablePeerMic",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("disablePeerMic() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return ds.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(Ua=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return fe.debug("consumeWebcamStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:ee}}),le.prev=2,le.next=3,this._socketRequest("consumeVideoStreams",{peerId:ee});case 3:le.next=5;break;case 4:le.prev=4,ie=le.catch(2),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("consumeWebcamStreams() | failed:%o",ie);case 5:case"end":return le.stop()}},ge,this,[[2,4]])})),function(ge){return Ua.apply(this,arguments)})},{key:"consumeMicStreams",value:(ka=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return fe.debug("consumeMicStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:ee}}),le.prev=1,le.next=2,this._socketRequest("consumeAudioStreams",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("consumeMicStreams() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return ka.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(jr=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return fe.debug("stopConsumingAudioStreams()"),le.prev=2,le.next=3,this._socketRequest("stopConsumingAudioStreams",{peerId:ee});case 3:(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:ee}}),le.next=5;break;case 4:le.prev=4,ie=le.catch(2),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("stopConsumingMicStreams() | failed:%o",ie);case 5:case"end":return le.stop()}},ge,this,[[2,4]])})),function(ge){return jr.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(ir=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return fe.debug("stopConsumingWebcamStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:ee}}),le.prev=1,le.next=2,this._socketRequest("stopConsumingVideoStreams",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("stopConsumingWebcamStreams() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return ir.apply(this,arguments)})},{key:"changeMode",value:(Yn=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft,Mt,mt,jt=this;return g().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(se=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeMode() Calling with mode: ".concat(ee)}),ie=this._mode,Ke.prev=1,ie!==ee){Ke.next=2;break}throw(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:se,status:2,message:"changeMode() Ending"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"You are already in ".concat(ee," mode"),logType:"INFO"}),new Error("You are already in ".concat(ee," mode"));case 2:if(Le=function(){var Bt=(0,_.A)(g().mark(function dn(Kt,gn){return g().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return an.next=1,jt._socketRequest("createWebRtcTransport",{preferredProtocol:jt._preferredProtocol,producing:Kt,consuming:gn,sctpCapabilities:jt._useDataChannel?jt._mediasoupDevice.sctpCapabilities:void 0});case 1:return an.abrupt("return",an.sent);case 2:case"end":return an.stop()}},dn)}));return function(dn,Kt){return Bt.apply(this,arguments)}}(),!(0,Xa.kR)(ee)){Ke.next=10;break}return this._consume=!0,this._produce=!0,this._mode=ee,this._mediasoupDevice=new Mr.pF({handlerName:this._handlerName}),Ke.next=3,this._socketRequest("getRouterRtpCapabilities");case 3:return kt=Ke.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(kt.headerExtensions=(Dt=kt.headerExtensions)===null||Dt===void 0?void 0:Dt.filter(function(Bt){return Bt.uri!="urn:3gpp:video-orientation"})),Ke.next=4,this._mediasoupDevice.load({routerRtpCapabilities:kt});case 4:if(!this._produce){Ke.next=6;break}return Ke.next=5,Le(!0,!1);case 5:qt=Ke.sent,this.createProducerTransport(qt,se);case 6:if(ie===Xa.nI.RECV_ONLY||!this._consume){Ke.next=8;break}return Ke.next=7,Le(!1,!0);case 7:bn=Ke.sent,this.createConsumerTransport(bn,se);case 8:return(Ue=this._openTelemetry)===null||Ue===void 0||Ue.traceAutoComplete({spanName:"Sending changeMode request to server",span:se,status:1}),Ke.next=9,this._socketRequest("changeMode",{mode:ee});case 9:this._produce&&(vt.dispatch(Er({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),this._webcamEnabled&&this.enableWebcam(this.customCameraVideoTrack,se)),window.SHOW_INFO&&(Vt=vt.getState(),hn=Vt.me,vt.dispatch(Wr(hn.id))),Ke.next=17;break;case 10:if(!(0,Xa.kR)(ie)||ee!==Xa.nI.RECV_ONLY){Ke.next=12;break}return this._produce=!1,this._mode=ee,this._closeProducersAndTransport(),Ke.next=11,this._socketRequest("changeMode",{mode:ee});case 11:Ke.next=17;break;case 12:if(!(0,Xa.wZ)(ie)||ee!==Xa.nI.RECV_ONLY){Ke.next=15;break}return this._consume=!0,this._mode=ee,Ke.next=13,this._setupWebrtcTransport(se);case 13:return Ke.next=14,this._socketRequest("changeMode",{mode:ee});case 14:window.SHOW_INFO&&(xn=vt.getState(),Pe=xn.me,vt.dispatch(Wr(Pe.id))),Ke.next=17;break;case 15:if(!(0,Xa.wZ)(ee)){Ke.next=17;break}return Ke.next=16,this._socketRequest("changeMode",{mode:ee});case 16:this._consume=!1,this._produce=!1,this._mode=ee,this._dataConsumers.clear(),this._closeTransports();case 17:Ke.next=19;break;case 18:Ke.prev=18,mt=Ke.catch(1),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:"Error changeMode(".concat(ee,") | failed"),logType:"ERROR",attributes:{error:mt.message}}),(Mt=this._openTelemetry)===null||Mt===void 0||Mt.completeSpan({span:se,status:2,message:"changeMode(".concat(ee,") | failed")});case 19:case"end":return Ke.stop()}},ge,this,[[1,18]])})),function(ge){return Yn.apply(this,arguments)})},{key:"_closeProducersAndTransport",value:function(){var ge;this._webcamProducer&&(this._webcamProducer.close(),this._webcamProducer=null),this._micProducer&&(this._micProducer.close(),this._micProducer=null),this._shareProducer&&(this._shareProducer.close(),this._shareProducer=null),this._shareAudioProducer&&(this._shareAudioProducer.close(),this._shareAudioProducer=null),(ge=this._sendTransport)===null||ge===void 0||ge.close(),this._sendTransport=null}},{key:"_closeTransports",value:function(){var ge,ee;this._sendTransport&&((ge=this._sendTransport)===null||ge===void 0||ge.close(),this._sendTransport=null),this._recvTransport&&((ee=this._recvTransport)===null||ee===void 0||ee.close(),this._recvTransport=null)}},{key:"_setupWebrtcTransport",value:(qn=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return this._mediasoupDevice=new Mr.pF({handlerName:this._handlerName}),le.next=1,this._socketRequest("getRouterRtpCapabilities");case 1:return re=le.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(re.headerExtensions=(se=re.headerExtensions)===null||se===void 0?void 0:se.filter(function(De){return De.uri!="urn:3gpp:video-orientation"})),le.next=2,this._mediasoupDevice.load({routerRtpCapabilities:re});case 2:return le.next=3,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 3:ie=le.sent,this.createConsumerTransport(ie,ee);case 4:case"end":return le.stop()}},ge,this)})),function(ge){return qn.apply(this,arguments)})},{key:"enablePeerWebcam",value:(Jt=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Enabling peer ".concat(ee," Webcam"),status:1}),fe.debug("enablePeerWebcam()"),le.prev=1,le.next=2,this._socketRequest("enablePeerWebcam",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("enablePeerWebcam() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return Jt.apply(this,arguments)})},{key:"disablePeerWebcam",value:(ht=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Disabling peer ".concat(ee," Webcam"),status:1}),fe.debug("disablePeerWebcam()"),le.prev=1,le.next=2,this._socketRequest("disablePeerWebcam",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:ie.message}});case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return ht.apply(this,arguments)})},{key:"getMicStats",value:function(ge){var ee=this;if(this._micProducer){var re=0;ge.onStatsCollected=function(se){var ie;ee._stats.producerStats||(ee._stats.producerStats={}),ee._stats.producerStats.audio||(ee._stats.producerStats.audio=[]),ee._micProducer&&(ee._latestStats[(ie=ee._micProducer)===null||ie===void 0?void 0:ie.id]=[]),se.audio.forEach(function(le){var De;ee._micProducer&&ee._latestStats[(De=ee._micProducer)===null||De===void 0?void 0:De.id].push(le)}),re%5==0&&ee._micProducer!=null&&ee._stats.producerStats.audio.push(Oa({timestamp:new Date},ee._latestStats[ee._micProducer.id]?ee._latestStats[ee._micProducer.id][0]:{})),re++}}}},{key:"enableMic",value:(it=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft,Mt,mt,jt,Ke,Bt,dn,Kt,gn,an,Cn,mn,Xt,yr,ur,At,An,Pr,ta,oa,ja,Fa,Gr,G,K,X,de,Ee,xe,Se,$e,ke,Oe,Je,We,Ae,tt,ue,pe,Ie,qe,nt,tn,bt,Nt,Mn,ct,Fe,xt,wn,cn,vn,or,Lr,Tn,yn,Nr,br,ar=this,$n=arguments;return g().wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:if(De=$n.length>0&&$n[0]!==void 0?$n[0]:void 0,Le=$n.length>1&&$n[1]!==void 0?$n[1]:void 0,Ue=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"enableMic() Calling ".concat(De?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:De?JSON.stringify(De):"Not Specify Custom Track"},span:Le||null}),fe.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){Rn.next=4;break}if(qt=(kt=this._openTelemetry)===null||kt===void 0?void 0:kt.trace({spanName:"Mic Producer found",span:Ue}),De&&((bn=this._openTelemetry)===null||bn===void 0||bn.traceAutoComplete({spanName:"Stopping customAudioTrack",span:Ue,status:1}),De.getTracks().forEach(function(qr){qr.stop()})),(Dt=this._openTelemetry)===null||Dt===void 0||Dt.completeSpan({span:qt,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),Vt=this._micProducer,!this._sendTransport){Rn.next=2;break}return Rn.next=1,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions,appData:{isEncrypted:this.isE2EEEnabled},onRtpSender:function(qr){ar.e2eeManager&&(qr.senderStreams=qr.createEncodedStreams())}});case 1:this._micProducer=Rn.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),this._micProducer?(xn=Ga({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Vt._appData.encodings,codecOptions:Vt._appData.codecOptions,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),vt.dispatch(xn),this._eventEmitter.emit(xn.type,xn.payload),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:Ue,status:1,message:"Enable Mic Successful"})):(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:Ue,status:2,message:"Error in enableMic() :: micProducer null"}),Rn.next=3;break;case 2:return(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Rn.abrupt("return");case 3:return Mt=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this._micProducer.observer.on("pause",function(){Mt?.stop(),ar._latestStats[ar._micProducer.id]=[],ar._metrics.removeExistingProbe(Mt)}),this._micProducer.observer.on("close",function(){Mt?.stop(),ar._latestStats[ar._micProducer.id]=[],ar._metrics.removeExistingProbe(Mt)}),this.getMicStats(Mt),Mt.start(),Rn.abrupt("return");case 4:if(!this._mediasoupDevice){Rn.next=6;break}if(this._mediasoupDevice.canProduce("audio")){Rn.next=5;break}return Ke=this._deviceInfo.sdkType=="react-native"?_r.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:_r.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:Ke,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),fe.error("enableMic() | cannot produce audio"),(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({span:Ue,status:2,message:"Error in enableMic() :: ".concat(Ke)}),Rn.abrupt("return");case 5:Rn.next=7;break;case 6:return(Bt=this._videosdkLogs)===null||Bt===void 0||Bt.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(dn=this._openTelemetry)===null||dn===void 0||dn.completeSpan({span:Ue,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),Rn.abrupt("return");case 7:if(Rn.prev=7,this._externalVideo){Rn.next=24;break}return fe.debug("enableMic() | calling getUserMedia()"),Rn.next=8,this._updateMics(Ue);case 8:if(this._mic.device){Rn.next=9;break}throw new Error("Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).");case 9:try{De&&(Kt=De.getAudioTracks()[0]).readyState=="ended"&&(Kt=null,At=_r.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:At.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(At))}catch(qr){Pr=_r.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(An=this._videosdkLogs)===null||An===void 0||An.pushLogs({logText:Pr.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(Pr),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(qr))}if(Kt){Rn.next=23;break}return ja=(ta=this._openTelemetry)===null||ta===void 0?void 0:ta.trace({spanName:"Creating Track",span:Ue}),Rn.prev=10,Rn.next=11,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 11:Fa=Rn.sent,Rn.next=22;break;case 12:if(Rn.prev=12,yn=Rn.catch(10),(Gr=this._openTelemetry)===null||Gr===void 0||Gr.completeSpan({message:"Error in enableMic() :: ".concat(yn.message),span:ja,status:2}),yn.name!=="SecurityError"){Rn.next=13;break}X=_r.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,de=X.message,this._emitError(X),(G=this._videosdkLogs)===null||G===void 0||G.pushLogs({logText:de,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(de),span:Ue,status:2}),Rn.next=21;break;case 13:if(yn.name!=="DOMException"){Rn.next=14;break}Se=_r.q.ERROR_RN_MIC_NOT_FOUND,$e=Se.message,this._emitError(Se),(Ee=this._videosdkLogs)===null||Ee===void 0||Ee.pushLogs({logText:$e,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(xe=this._openTelemetry)===null||xe===void 0||xe.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat($e),span:Ue,status:2}),Rn.next=21;break;case 14:if(!(yn instanceof DOMException)){Rn.next=20;break}Nr=yn.name,Rn.next=Nr==="NotAllowedError"?15:Nr==="NotReadableError"?16:Nr==="NotFoundError"?17:18;break;case 15:return ke=this.handleNotAllowedError(yn,this._openTelemetry,this._videosdkLogs,Ue,"audio"),this._emitError(ke),Rn.abrupt("continue",19);case 16:return Oe=this.handleNotReadableError(yn,this._openTelemetry,this._videosdkLogs,Ue,"audio"),this._emitError(Oe),Rn.abrupt("continue",19);case 17:return Je=_r.q.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Je=_r.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),We=Je.message,this._emitError(Je),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:We,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(We),span:Ue,status:2}),Rn.abrupt("continue",19);case 18:return Ae="An error occurred in creating audio track, ".concat(yn.message),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:yn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ae)},dashboardLog:!0}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Error in enableMic() :: ".concat(Ae),span:Ue,status:2}),Rn.abrupt("continue",19);case 19:Rn.next=21;break;case 20:pe="An error occurred in creating audio track, ".concat(yn.message),(tt=this._videosdkLogs)===null||tt===void 0||tt.pushLogs({logText:yn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(pe)},dashboardLog:!0}),(ue=this._openTelemetry)===null||ue===void 0||ue.completeSpan({message:"Error in enableMic() :: ".concat(pe),span:Ue,status:2});case 21:return Rn.abrupt("return");case 22:Kt=Fa.getAudioTracks()[0],(oa=this._openTelemetry)===null||oa===void 0||oa.completeSpan({message:"Audio Track Generated",span:ja,status:1});case 23:Rn.next=26;break;case 24:return Rn.next=25,this._getExternalVideoStream();case 25:Ie=Rn.sent,Kt=Ie.getAudioTracks()[0].clone();case 26:if(gn=(an=this._openTelemetry)===null||an===void 0?void 0:an.trace({spanName:"Generating Producer Configuration",span:Ue}),qe={opusStereo:1,opusDtx:1},De&&(nt=De.encoderConfig?li.$.audioProfiles[De.encoderConfig]:li.$.audioProfiles.speech_standard,qe={opusStereo:nt.stereo?1:0,opusFec:nt.fec?1:0,opusDtx:nt.dtx?1:0,opusMaxPlaybackRate:nt.maxPlaybackRate,opusPtime:nt.packetTime}),bt={encodings:tn=[{networkPriority:"high"}],codecOptions:qe},(Cn=this._openTelemetry)===null||Cn===void 0||Cn.traceAutoComplete({spanName:"Generated AppData",span:gn,attributes:{appData:JSON.stringify(bt)},status:1}),(mn=this._openTelemetry)===null||mn===void 0||mn.completeSpan({span:gn,status:1,message:"Producer Configuration Generated"}),gn=(Xt=this._openTelemetry)===null||Xt===void 0?void 0:Xt.trace({spanName:"Creating Mic Producer",span:Ue}),(yr=Kt)===null||yr===void 0||yr.addEventListener("ended",function(){console.log("Track Ended Error");try{var qr,wa,Ws=ar._deviceInfo.sdkType=="react-native"?_r.q.ERROR_RN_MIC_TRACK_ENDED:_r.q.ERROR_MICROPHONE_TRACK_ENDED;(qr=ar._videosdkLogs)===null||qr===void 0||qr.pushLogs({logText:Ws.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(Ws.message)},dashboardLog:!0}),(wa=ar._openTelemetry)===null||wa===void 0||wa.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Ue,message:Ws.message,status:2}),vt.dispatch(tr({type:"error",text:"Microphone disconnected!"})),ar.disableMic(!0,Ue).catch(function(){})}catch(Li){console.error(Li)}}),!this._sendTransport){Rn.next=28;break}return Rn.next=27,this._sendTransport.produce({track:Kt,encodings:tn,codecOptions:qe,appData:Oa(Oa({},bt),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(qr){ar.e2eeManager&&(qr.senderStreams=qr.createEncodedStreams())}});case 27:this._micProducer=Rn.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),Rn.next=29;break;case 28:return(Nt=this._videosdkLogs)===null||Nt===void 0||Nt.pushLogs({logText:_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Rn.abrupt("return");case 29:this._micProducer?(Kt.getConstraints().deviceId&&(this._mic.device=this._mics.get(Kt.getConstraints().deviceId)),Fe=Ga({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:tn,codecOptions:qe,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),vt.dispatch(Fe),this._eventEmitter.emit(Fe.type,Fe.payload),(xt=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"})).start(),this.getMicStats(xt),this._micProducer.on("transportclose",function(){var qr,wa=Ya(ar._micProducer.id);vt.dispatch(wa),ar._eventEmitter.emit(wa.type,wa.payload),(qr=ar._micProducer)===null||qr===void 0||qr.close(),ar._micProducer=null}),this._micProducer.observer.on("pause",function(){xt?.stop(),ar._latestStats[ar._micProducer.id]=[],ar._metrics.removeExistingProbe(xt)}),this._micProducer.observer.on("close",function(){xt?.stop(),ar._latestStats[ar._micProducer.id]=[],ar._metrics.removeExistingProbe(xt)}),this._micProducer.on("trackended",function(){var qr,wa,Ws=ar._deviceInfo.sdkType=="react-native"?_r.q.ERROR_RN_MIC_TRACK_ENDED:_r.q.ERROR_MICROPHONE_TRACK_ENDED;(qr=ar._videosdkLogs)===null||qr===void 0||qr.pushLogs({logText:Ws.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ws.message)},dashboardLog:!0}),(wa=ar._openTelemetry)===null||wa===void 0||wa.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Ue,message:Ws.message,status:2}),vt.dispatch(tr({type:"error",text:"Microphone disconnected!"})),ar.disableMic(!0,Ue).catch(function(){})}),(Mn=this._openTelemetry)===null||Mn===void 0||Mn.completeSpan({span:gn,status:1,message:"Mic Producer Created"}),(ct=this._openTelemetry)===null||ct===void 0||ct.completeSpan({span:Ue,status:1,message:"Enable Mic Successful"})):((wn=this._videosdkLogs)===null||wn===void 0||wn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(cn=this._openTelemetry)===null||cn===void 0||cn.completeSpan({span:gn,status:2,message:"Error in enableMic() :: micProducer null"}),(vn=this._openTelemetry)===null||vn===void 0||vn.completeSpan({span:Ue,status:2,message:"Error in enableMic() :: micProducer null"})),Rn.next=32;break;case 30:return Rn.prev=30,br=Rn.catch(7),(or=this._openTelemetry)===null||or===void 0||or.completeSpan({span:gn,status:2,message:"Error in enableMic() :: occurred in creating mic producer, ".concat(br.message)}),(Lr=this._openTelemetry)===null||Lr===void 0||Lr.completeSpan({span:Ue,status:2,message:"Error in enableMic :: ".concat(br.message)}),(Tn=this._videosdkLogs)===null||Tn===void 0||Tn.pushLogs({logText:br.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(br.message)},dashboardLog:!0}),fe.error("enableMic() | failed:%o",br),vt.dispatch(tr({type:"error",text:"Error enabling microphone: ".concat(br)})),Rn.next=31,this._socketRequest("produceError",{mediaType:"audio",message:br.message});case 31:Kt&&Kt.stop();case 32:case"end":return Rn.stop()}},ge,this,[[7,30],[10,12]])})),function(){return it.apply(this,arguments)})},{key:"disableMic",value:(ze=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft,Mt,mt,jt,Ke,Bt,dn,Kt,gn,an,Cn,mn=arguments;return g().wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:if(se=mn.length>0&&mn[0]!==void 0&&mn[0],ie=mn.length>1&&mn[1]!==void 0?mn[1]:void 0,fe.debug("disableMic()"),le=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"disableMic() Calling",status:1,span:ie||null}),this._micProducer){Xt.next=1;break}return(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:le,status:2,message:"Error in disableMic() :: Mic Producer Not found"}),(Le=this._videosdkLogs)===null||Le===void 0||Le.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),Xt.abrupt("return");case 1:if(Ue=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Mic Producer",span:le,status:1}),this._micEnabled=!1,!this._micProducer||se){Xt.next=6;break}return bn=(kt=this._openTelemetry)===null||kt===void 0?void 0:kt.trace({spanName:"Pausing Mic Producer",span:Ue,status:1}),this._micProducer.pause(),Vt=Ya(this._micProducer.id),(Dt=this._openTelemetry)===null||Dt===void 0||Dt.completeSpan({span:bn,status:1,message:"Pause Mic Successfully"}),vt.dispatch(Vt),this._eventEmitter.emit(Vt.type,Vt.payload),Xt.prev=2,Xt.next=3,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 3:(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:Ue,status:1,message:"Requested Server to Close Producer"}),Xt.next=5;break;case 4:Xt.prev=4,an=Xt.catch(2),vt.dispatch(tr({type:"error",text:"Error closing server-side mic Producer: ".concat(an)})),Mt="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(se),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:Ue,status:2,message:"Error in disableMic() :: ".concat(an.message)}),(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:le,status:2,message:Mt}),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:Mt,logType:"ERROR",attributes:{error:an.message},dashboardLog:!0});case 5:return(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:le,status:1,message:"Mic Disabled Successfully"}),Xt.abrupt("return");case 6:return this._micProducer.close(),mt=Ya(this._micProducer.id),vt.dispatch(mt),this._eventEmitter.emit(mt.type,mt.payload),Xt.prev=7,Xt.next=8,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 8:(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({span:Ue,status:1,message:"Requested Server to Close Producer"}),(Ke=this._openTelemetry)===null||Ke===void 0||Ke.completeSpan({span:le,status:1,message:"Mic Disabled Successfully"}),Xt.next=10;break;case 9:Xt.prev=9,Cn=Xt.catch(7),vt.dispatch(tr({type:"error",text:"Error closing server-side mic Producer: ".concat(Cn)})),gn="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(se),(Bt=this._openTelemetry)===null||Bt===void 0||Bt.completeSpan({span:Ue,status:2,message:"Error in disableMic() :: ".concat(Cn.message)}),(dn=this._openTelemetry)===null||dn===void 0||dn.completeSpan({span:le,status:2,message:gn}),(Kt=this._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logText:gn,logType:"ERROR",attributes:{error:Cn.message},dashboardLog:!0});case 10:this._micProducer=null;case 11:case"end":return Xt.stop()}},ge,this,[[2,4],[7,9]])})),function(){return ze.apply(this,arguments)})},{key:"muteMic",value:(he=(0,_.A)(g().mark(function ge(){var ee,re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return fe.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),se.prev=1,se.next=2,this._socketRequest("pauseProducer",{producerId:this._micProducer.id});case 2:vt.dispatch(is(this._micProducer.id)),se.next=4;break;case 3:se.prev=3,re=se.catch(1),fe.error("muteMic() | failed: %o",re),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:re.message}}),vt.dispatch(tr({type:"error",text:"Error pausing server-side mic Producer: ".concat(re)}));case 4:case"end":return se.stop()}},ge,this,[[1,3]])})),function(){return he.apply(this,arguments)})},{key:"unmuteMic",value:(te=(0,_.A)(g().mark(function ge(){var ee,re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return fe.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),se.prev=1,se.next=2,this._socketRequest("resumeProducer",{producerId:this._micProducer.id});case 2:vt.dispatch(Aa(this._micProducer.id)),se.next=4;break;case 3:se.prev=3,re=se.catch(1),fe.error("unmuteMic() | failed: %o",re),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:re.message}}),vt.dispatch(tr({type:"error",text:"Error resuming server-side mic Producer: ".concat(re)}));case 4:case"end":return se.stop()}},ge,this,[[1,3]])})),function(){return te.apply(this,arguments)})},{key:"enableWebcam",value:(W=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft,Mt,mt,jt,Ke,Bt,dn,Kt,gn,an,Cn,mn,Xt,yr,ur,At,An,Pr,ta,oa,ja,Fa,Gr,G,K,X,de,Ee,xe,Se,$e,ke,Oe,Je,We,Ae,tt,ue,pe,Ie,qe,nt,tn,bt,Nt,Mn,ct,Fe,xt,wn,cn,vn,or,Lr,Tn,yn,Nr,br=this,ar=arguments;return g().wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:if(De=ar.length>0&&ar[0]!==void 0?ar[0]:void 0,Le=ar.length>1&&ar[1]!==void 0?ar[1]:void 0,Ue=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"enableWebcam() Calling ".concat(De?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:De?JSON.stringify(De):"Not Specify Custom Track"},span:Le||null}),fe.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){$n.next=1;break}return(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:Ue,status:2,message:"Error in enableWebcam() :: Webcam Producer found"}),(Dt=this._videosdkLogs)===null||Dt===void 0||Dt.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),$n.abrupt("return");case 1:if(!this._mediasoupDevice){$n.next=3;break}if(this._mediasoupDevice.canProduce("video")){$n.next=2;break}return Vt=this._deviceInfo.sdkType=="react-native"?_r.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:_r.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:Ue,status:2,message:"Error in enableWebcam() :: ".concat(Vt)}),(bn=this._videosdkLogs)===null||bn===void 0||bn.pushLogs({logText:Vt,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),fe.error("enableWebcam() | cannot produce video"),$n.abrupt("return");case 2:$n.next=4;break;case 3:return(hn=this._videosdkLogs)===null||hn===void 0||hn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:Ue,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),$n.abrupt("return");case 4:if(vt.dispatch(yi(!0)),Mt=this._webcam.resolution,$n.prev=5,this._externalVideo){$n.next=24;break}return $n.next=6,this._updateWebcams(Ue);case 6:if(ft=this._webcam.device){$n.next=7;break}throw new Error("Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).");case 7:fe.debug("enableWebcam() | calling getUserMedia()");try{De&&(Pe=De.getVideoTracks()[0]).readyState=="ended"&&(Pe=null,Kt=_r.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(dn=this._videosdkLogs)===null||dn===void 0||dn.pushLogs({logText:Kt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Kt))}catch(Rn){an=_r.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(gn=this._videosdkLogs)===null||gn===void 0||gn.pushLogs({logText:an.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._emitError(an),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(Rn))}if(Pe){$n.next=23;break}if(mn=(Cn=this._openTelemetry)===null||Cn===void 0?void 0:Cn.trace({spanName:"Creating Track",span:Ue}),Xt=null,$n.prev=8,this._webcam.resolution!="hd"){$n.next=10;break}return $n.next=9,this.createCameraVideoTrack({cameraId:ft.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:ft.facing});case 9:De=$n.sent,Xt=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),$n.next=12;break;case 10:return $n.next=11,this.createCameraVideoTrack({cameraId:ft.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:ft.facing});case 11:De=$n.sent,Xt=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 12:Pe=De.getVideoTracks()[0],(yr=this._openTelemetry)===null||yr===void 0||yr.completeSpan({message:"Video Track Generated",span:mn,attributes:{customVideoTrackConfig:Xt},status:1}),$n.next=23;break;case 13:if($n.prev=13,Tn=$n.catch(8),(ur=this._openTelemetry)===null||ur===void 0||ur.completeSpan({message:"Error in enableWebcam() :: ".concat(Tn.message),span:mn,status:2}),Tn.name!=="SecurityError"){$n.next=14;break}Pr=_r.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,ta=Pr.message,this._emitError(Pr),(At=this._videosdkLogs)===null||At===void 0||At.pushLogs({logText:ta,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(An=this._openTelemetry)===null||An===void 0||An.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(ta),span:enableMicSpan,status:2}),$n.next=22;break;case 14:if(Tn.name!=="DOMException"){$n.next=15;break}Fa=_r.q.ERROR_RN_CAMERA_NOT_FOUND,Gr=Fa.message,this._emitError(Fa),(oa=this._videosdkLogs)===null||oa===void 0||oa.pushLogs({logText:Gr,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(ja=this._openTelemetry)===null||ja===void 0||ja.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Gr),span:enableMicSpan,status:2}),$n.next=22;break;case 15:if(!(Tn instanceof DOMException)){$n.next=21;break}yn=Tn.name,$n.next=yn==="NotAllowedError"?16:yn==="NotReadableError"?17:yn==="NotFoundError"?18:19;break;case 16:return G=this.handleNotAllowedError(Tn,this._openTelemetry,this._videosdkLogs,Ue,"video"),this._emitError(G),$n.abrupt("continue",20);case 17:return K=this.handleNotReadableError(Tn,this._openTelemetry,this._videosdkLogs,Ue,"video"),this._emitError(K),$n.abrupt("continue",20);case 18:return X=_r.q.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(X=_r.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),de=X.message,this._emitError(X),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:de,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(de),span:Ue,status:2}),$n.abrupt("continue",20);case 19:return Ee="An error occurred in creating video track, ".concat(Tn.message),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:Tn.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Ee)},dashboardLog:!0}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Error in enableWebcam() :: ".concat(Ee),span:Ue,status:2}),$n.abrupt("continue",20);case 20:$n.next=22;break;case 21:$e="An error occurred in creating video track, ".concat(Tn.message),(xe=this._videosdkLogs)===null||xe===void 0||xe.pushLogs({logText:Tn.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat($e)},dashboardLog:!0}),(Se=this._openTelemetry)===null||Se===void 0||Se.completeSpan({message:"Error in enableWebcam() :: ".concat($e),span:Ue,status:2});case 22:return $n.abrupt("return");case 23:$n.next=26;break;case 24:return ft={label:"external video"},$n.next=25,this._getExternalVideoStream();case 25:ke=$n.sent,Pe=ke.getVideoTracks()[0].clone();case 26:if(Oe=(mt=this._openTelemetry)===null||mt===void 0?void 0:mt.trace({spanName:"Generating Producer Configuration",span:Ue}),Ae={videoGoogleStartBitrate:1e3},!this._forceH264){$n.next=28;break}if(We=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Rn){return Rn.mimeType.toLowerCase()==="video/h264"})){$n.next=27;break}throw new Error("The desired H.264 codec and configuration are not supported");case 27:$n.next=29;break;case 28:if(!this._forceVP9){$n.next=29;break}if(We=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Rn){return Rn.mimeType.toLowerCase()==="video/vp9"})){$n.next=29;break}throw new Error("The desired VP9 codec and configuration are not supported");case 29:Pe?(tt=Pe.getConstraints(),ue=this._deviceInfo.sdkType=="react-native"&&this._deviceInfo.platform=="ios",Je=(0,ci.v7)(!1,tt.width,tt.height,{simulcast:De.multiStream},ue)):this._useSimulcast&&(pe=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Rn){return Rn.kind==="video"}),Je=this._forceVP9&&We||pe.mimeType.toLowerCase()==="video/vp9"?Po:Ic[this._webcam.resolution]),Ie={};try{Ie={encodings:Je,width:De?(qe=Pe)===null||qe===void 0?void 0:qe.getConstraints().width:lr[Mt].width.ideal,height:De?(nt=Pe)===null||nt===void 0?void 0:nt.getConstraints().height:lr[Mt].height.ideal}}catch(Rn){(tn=this._videosdkLogs)===null||tn===void 0||tn.pushLogs({logText:Rn.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(Rn.message)},dashboardLog:!0}),console.log(Rn)}if((jt=this._openTelemetry)===null||jt===void 0||jt.traceAutoComplete({spanName:"Track Generated with height ".concat(Ie.height," and width ").concat(Ie.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(Ie)},span:Ue,status:1}),(Ke=this._openTelemetry)===null||Ke===void 0||Ke.completeSpan({span:Oe,status:1,message:"Producer Configuration Generated"}),Oe=(Bt=this._openTelemetry)===null||Bt===void 0?void 0:Bt.trace({spanName:"Creating Webcam Producer",span:Ue}),!this._sendTransport){$n.next=31;break}return $n.next=30,this._sendTransport.produce({track:Pe,encodings:Je,codecOptions:Ae,codec:We,appData:Oa(Oa({},Ie),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(Rn){br.e2eeManager&&(Rn.senderStreams=Rn.createEncodedStreams())}});case 30:this._webcamProducer=$n.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._webcamProducer),$n.next=32;break;case 31:return(bt=this._videosdkLogs)===null||bt===void 0||bt.pushLogs({logText:_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),$n.abrupt("return");case 32:Pe.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(Pe.getConstraints().deviceId)),this._webcamProducer?(ct=Ga({id:this._webcamProducer.id,deviceLabel:ft.label,type:this._getWebcamType(ft),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer,rtpSender:this._webcamProducer.rtpSender}),vt.dispatch(ct),this._eventEmitter.emit(ct.type,ct.payload),Fe=0,(xt=this._metrics.addNewProbe(this._webcamProducer,"producer")).onStatsCollected=function(Rn){try{var qr;br._stats.producerStats||(br._stats.producerStats={}),br._stats.producerStats.video||(br._stats.producerStats.video=[]),br._webcamProducer&&(br._latestStats[(qr=br._webcamProducer)===null||qr===void 0?void 0:qr.id]=[]),Rn.video.forEach(function(Ws){var Li;br._latestStats[(Li=br._webcamProducer)===null||Li===void 0?void 0:Li.id].push(Ws)}),Fe%5==0&&br._webcamProducer!=null&&br._stats.producerStats.video.push({timestamp:new Date,stats:br._latestStats[br._webcamProducer.id]}),Fe++}catch(Ws){var wa;(wa=br._videosdkLogs)===null||wa===void 0||wa.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ws.message}}),console.log("PRODUCER ERROR",Ws)}},xt.start(),this._webcamProducer.observer.on("close",function(){xt.stop(),br._metrics.removeExistingProbe(xt)}),this._webcamProducer.on("transportclose",function(){var Rn,qr=Ya(br._webcamProducer.id);vt.dispatch(qr),br._eventEmitter.emit(qr.type,qr.payload),(Rn=br._webcamProducer)===null||Rn===void 0||Rn.close(),br._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var Rn,qr,wa=br._deviceInfo.sdkType=="react-native"?_r.q.ERROR_RN_CAMERA_TRACK_ENDED:_r.q.ERROR_WEBCAM_TRACK_ENDED;(Rn=br._videosdkLogs)===null||Rn===void 0||Rn.pushLogs({logText:wa.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(wa.message)},dashboardLog:!0}),(qr=br._openTelemetry)===null||qr===void 0||qr.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:Ue,message:wa.message,status:2}),vt.dispatch(tr({type:"error",text:"Webcam disconnected!"})),br.disableWebcam(Ue).catch(function(){})}),(Nt=this._openTelemetry)===null||Nt===void 0||Nt.completeSpan({span:Oe,status:1,message:"Webcam Producer Created"}),(Mn=this._openTelemetry)===null||Mn===void 0||Mn.completeSpan({span:Ue,status:1,message:"Enable Webcam Successful"})):((wn=this._videosdkLogs)===null||wn===void 0||wn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(cn=this._openTelemetry)===null||cn===void 0||cn.completeSpan({span:Oe,status:2,message:"Error in enableWebcam() :: webcamProducer null"}),(vn=this._openTelemetry)===null||vn===void 0||vn.completeSpan({span:Ue,status:2,message:"Error in enableWebcam() :: webcamProducer null"})),$n.next=35;break;case 33:return $n.prev=33,Nr=$n.catch(5),(or=this._videosdkLogs)===null||or===void 0||or.pushLogs({logText:Nr.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Nr.message)},dashboardLog:!0}),(Lr=this._openTelemetry)===null||Lr===void 0||Lr.completeSpan({span:Ue,status:2,message:"Error in enableWebcam() :: ".concat(Nr.message)}),vt.dispatch(tr({type:"error",text:"Error enabling webcam: ".concat(Nr)})),$n.next=34,this._socketRequest("produceError",{mediaType:"video",message:Nr.message});case 34:Pe&&Pe.stop();case 35:vt.dispatch(yi(!1));case 36:case"end":return $n.stop()}},ge,this,[[5,33],[8,13]])})),function(){return W.apply(this,arguments)})},{key:"handleNotAllowedError",value:function(ge,ee,re,se,ie){var le={};return le=ge.message==="Permission denied"||ge.message==="Permission dismissed"?ie==="video"?_r.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:_r.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:ge.message.includes("The request is not allowed by the user agent")?ie==="video"?_r.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:_r.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:ge.message==="Permission denied by system"?ie==="video"?_r.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:_r.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:ie==="video"?_r.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:_r.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,re.pushLogs({logText:le.message,logType:"ERROR",attributes:{error:"Error in ".concat(ie==="video"?"enableWebcam()":"enableMic()"," :: ").concat(ge.message)},dashboardLog:!0}),ee.completeSpan({message:ie==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(le.message):"Error in enableMic() :: occurred in creating audio track, ".concat(le.message),span:se,status:2}),le}},{key:"handleNotReadableError",value:function(ge,ee,re,se,ie){var le={};return le=ge.message==="Device in use"?ie==="video"?_r.q.ERROR_CAMERA_IN_USE:_r.q.ERROR_MICROPHONE_IN_USE:ie==="video"?_r.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:_r.q.ERROR_MICROPHONE_IN_USE,re.pushLogs({logText:le.message,logType:"ERROR",attributes:{error:"Error in ".concat(ie==="video"?"enableWebcam()":"enableMic()"," :: ").concat(ge.message)},dashboardLog:!0}),ee.completeSpan({message:ie==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(le.message):"Error in enableMic() :: occurred in creating audio track, ".concat(le.message),span:se,status:2}),le}},{key:"createCameraVideoTrack",value:(j=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn;return g().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return re=ee.cameraId,se=re===void 0?void 0:re,ie=ee.encoderConfig,le=ie===void 0?void 0:ie,De=ee.facingMode,Le=De===void 0?void 0:De,Ue=ee.optimizationMode,kt=Ue===void 0?void 0:Ue,Dt=ee.multiStream,qt=Dt===void 0||Dt,bn=le?li.$.videoProfiles[le]:li.$.videoProfiles.h360p_w640p,Vt={video:{deviceId:se||void 0,facingMode:Le||void 0,width:bn.width,height:bn.height,frameRate:bn.frameRate}},xn.next=1,(0,ye.lp)(Vt);case 1:return hn=xn.sent,kt&&(hn.contentHint=kt),hn.encoderConfig=le||"h360p_w640p",hn.contentHint=kt||"",hn.multiStream=qt,hn.cameraId=se,xn.abrupt("return",hn);case 2:case"end":return xn.stop()}},ge)})),function(ge){return j.apply(this,arguments)})},{key:"disableWebcam",value:(p=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn=arguments;return g().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(se=xn.length>0&&xn[0]!==void 0?xn[0]:void 0,ie=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"disableWebcam() Calling",status:1,span:se||null}),fe.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){Pe.next=1;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"Error in disableWebcam() :: Webcam Producer Not found"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),Pe.abrupt("return");case 1:return Le=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Webcam Producer",span:ie,status:1}),this._webcamProducer.close(),Ue=Ya(this._webcamProducer.id),vt.dispatch(Ue),this._eventEmitter.emit(Ue.type,Ue.payload),Pe.prev=2,Pe.next=3,this._socketRequest("closeProducer",{producerId:this._webcamProducer.id});case 3:(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:Le,status:1,message:"Requested Server to Close Producer"}),this._webcamProducer=null,(Dt=this._openTelemetry)===null||Dt===void 0||Dt.completeSpan({span:ie,status:1,message:"Webcam Disabled Successfully"}),Pe.next=5;break;case 4:Pe.prev=4,hn=Pe.catch(2),(qt=this._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:hn.message},dashboardLog:!0}),(bn=this._openTelemetry)===null||bn===void 0||bn.completeSpan({span:Le,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(hn)}),(Vt=this._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:ie,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(hn)}),vt.dispatch(tr({type:"error",text:"Error closing server-side webcam Producer: ".concat(hn)}));case 5:case"end":return Pe.stop()}},ge,this,[[2,4]])})),function(){return p.apply(this,arguments)})},{key:"getMics",value:(i=(0,_.A)(g().mark(function ge(){var ee,re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ee=[],ie.prev=1,ie.next=2,this._updateMics();case 2:this._mics.forEach(function(le,De){ee.push({deviceId:De,label:le.label})}),ie.next=4;break;case 3:ie.prev=3,se=ie.catch(1),fe.error("getMics() | Error",se),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:se.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0});case 4:return ie.abrupt("return",ee);case 5:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return i.apply(this,arguments)})},{key:"changeMic",value:(Qi=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe;return g().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(se=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeMic() Calling"}),ft.prev=1,(0,E.A)(ee)!="object"){ft.next=4;break}return ft.next=2,this.disableMic(!0,se);case 2:return ft.next=3,this.enableMic(ee,se);case 3:ft.next=9;break;case 4:return Le=ee,ft.next=5,this._updateMics();case 5:if(Ue=Array.from(this._mics.keys()),kt=Ue.length,Dt=this._mic.device?this._mic.device.deviceId:void 0,Le!=null&&Le!=null?qt=Ue.indexOf(Le):(qt=Ue.indexOf(Dt))<kt-1?qt++:qt=0,this._mic.device=this._mics.get(Ue[qt]),bn=(ie=this._openTelemetry)===null||ie===void 0?void 0:ie.trace({spanName:"Getting Selected Mic",span:se,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){ft.next=6;break}throw(Vt=this._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 6:return ft.next=7,this.disableMic(!0,se);case 7:return ft.next=8,this.enableMic(void 0,se);case 8:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:bn,status:1,message:"Done"}),(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:se,status:1,message:"changeMic() Ending"});case 9:ft.next=11;break;case 10:ft.prev=10,Pe=ft.catch(1),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:se,status:2,message:"changeMic() | Error ".concat(Pe)}),(xn=this._videosdkLogs)===null||xn===void 0||xn.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:Pe.message}});case 11:case"end":return ft.stop()}},ge,this,[[1,10]])})),function(ge){return Qi.apply(this,arguments)})},{key:"getWebcams",value:(wi=(0,_.A)(g().mark(function ge(){var ee,re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ee=[],ie.prev=1,ie.next=2,this._updateWebcams();case 2:this._webcams.forEach(function(le,De){ee.push({deviceId:De,label:le.label,facingMode:le.facing||"environment"})}),ie.next=4;break;case 3:ie.prev=3,se=ie.catch(1),fe.error("getWebcams() | failed %o",se),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:se.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0});case 4:return ie.abrupt("return",ee);case 5:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return wi.apply(this,arguments)})},{key:"replaceWebcamStream",value:(jo=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!this._webcamProducer){se.next=2;break}return re=ee.getVideoTracks()[0],se.next=1,this._webcamProducer.replaceTrack({track:re});case 1:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),se.next=4;break;case 2:return se.next=3,this.disableWebcam();case 3:return se.next=4,this.enableWebcam(ee);case 4:case"end":return se.stop()}},ge,this)})),function(ge){return jo.apply(this,arguments)})},{key:"changeWebcam",value:(nc=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft;return g().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:if(se=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeWebcam() Calling"}),vt.dispatch(yi(!0)),(0,E.A)(ee)!=="object"){Mt.next=6;break}return Mt.prev=1,Mt.next=2,this.disableWebcam(se);case 2:return Mt.next=3,this.enableWebcam(ee,se);case 3:Mt.next=5;break;case 4:Mt.prev=4,Pe=Mt.catch(1),fe.error("changeWebcam() | failed: %o",Pe),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(ee),error:Pe.message}}),vt.dispatch(tr({type:"error",text:"Could not change webcam: ".concat(Pe)}));case 5:Mt.next=12;break;case 6:return Mt.prev=6,Mt.next=7,this._updateWebcams(se);case 7:if(Ue=Array.from(this._webcams.keys()),kt=Ue.length,Dt=this._webcam.device?this._webcam.device.deviceId:void 0,ee!=null&&ee!=null?qt=Ue.indexOf(ee):(qt=Ue.indexOf(Dt))<kt-1?qt++:qt=0,this._webcam.device=this._webcams.get(Ue[qt]),fe.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",bn=(le=this._openTelemetry)===null||le===void 0?void 0:le.trace({spanName:"Getting Selected Webcam",span:se,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){Mt.next=8;break}throw(Vt=this._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 8:return Mt.next=9,this.disableWebcam(se);case 9:return Mt.next=10,this.enableWebcam(void 0,se);case 10:return(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:bn,status:1,message:"Done"}),(Le=this._openTelemetry)===null||Le===void 0||Le.completeSpan({span:se,status:1,message:"changeWebcam() Ending"}),Mt.abrupt("return");case 11:Mt.prev=11,ft=Mt.catch(6),fe.error("changeWebcam() | failed: %o",ft),(hn=this._videosdkLogs)===null||hn===void 0||hn.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(ee),error:ft.message}}),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:se,status:2,message:"Could not change webcam ".concat(ft)}),vt.dispatch(tr({type:"error",text:"Could not change webcam: ".concat(ft)}));case 12:vt.dispatch(yi(!1));case 13:case"end":return Mt.stop()}},ge,this,[[1,4],[6,11]])})),function(ge){return nc.apply(this,arguments)})},{key:"changeWebcamResolution",value:(xi=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le;return g().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:fe.debug("changeWebcamResolution()"),vt.dispatch(yi(!0)),Ue.prev=1,le=this._webcam.resolution,Ue.next=le==="qvga"?2:le==="vga"?3:le==="hd"?4:5;break;case 2:return this._webcam.resolution="vga",Ue.abrupt("continue",6);case 3:return this._webcam.resolution="hd",Ue.abrupt("continue",6);case 4:return this._webcam.resolution="qvga",Ue.abrupt("continue",6);case 5:this._webcam.resolution="hd";case 6:return fe.debug("changeWebcamResolution() | calling getUserMedia()"),Ue.prev=7,Ue.next=8,navigator.mediaDevices.getUserMedia({video:Oa({deviceId:{exact:this._webcam.device.deviceId}},lr[this._webcam.resolution])});case 8:ee=Ue.sent,Ue.next=10;break;case 9:return Ue.prev=9,De=Ue.catch(7),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(De)}}),De.message==="Permission denied"||De.name==="NotAllowedError"?this._emitError(_r.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(_r.q.ERROR_GET_VIDEO_MEDIA),Ue.abrupt("return");case 10:return se=ee.getVideoTracks()[0],Ue.next=11,this._webcamProducer.replaceTrack({track:se});case 11:vt.dispatch(us(this._webcamProducer.id,se)),Ue.next=13;break;case 12:Ue.prev=12,Le=Ue.catch(1),fe.error("changeWebcamResolution() | failed: %o",Le),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:Le.message}}),vt.dispatch(tr({type:"error",text:"Could not change webcam resolution: ".concat(Le)}));case 13:vt.dispatch(yi(!1));case 14:case"end":return Ue.stop()}},ge,this,[[1,12],[7,9]])})),function(){return xi.apply(this,arguments)})},{key:"enableShare",value:(gc=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft,Mt,mt,jt,Ke,Bt,dn,Kt,gn,an,Cn,mn,Xt,yr,ur,At,An,Pr,ta,oa,ja,Fa,Gr,G,K,X,de,Ee,xe,Se=this,$e=arguments;return g().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(re=$e.length>0&&$e[0]!==void 0?$e[0]:void 0,se=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"enableShare() Calling ".concat(re?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:re?JSON.stringify(re):"Not Specify Custom Track"}}),fe.debug("enableShare()"),!this._shareProducer){ke.next=1;break}return(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:se,status:2,message:"Screen Share Producer found"}),ke.abrupt("return");case 1:if(this._mediasoupDevice.canProduce("video")){ke.next=2;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:se,status:2,message:"enableShare() | cannot produce video"}),fe.error("enableShare() | cannot produce video"),ke.abrupt("return");case 2:if(Ue=[],vt.dispatch(Pi(!0)),ke.prev=3,fe.debug("enableShare() | calling getUserMedia()"),xn=(kt=this._openTelemetry)===null||kt===void 0?void 0:kt.trace({spanName:"Creating Track",span:se}),!re||!re.active){ke.next=4;break}De=re.getVideoTracks()[0],Le=re.getAudioTracks()[0],re.multiStream?(Pe=De.getConstraints(),ft=Pe.height,Mt=Pe.frameRate,mt=li.$.screenShareProfiles["h".concat(ft,"p_").concat(Mt,"fps")],jt=[{maxBitrate:mt.bitrates.high,maxFramerate:Mt,scalabilityMode:"S3T3",dtx:!0},{maxBitrate:mt.bitrates.medium,maxFramerate:Mt,scalabilityMode:"S2T3",dtx:!0},{maxBitrate:mt.bitrates.low,maxFramerate:Mt,scalabilityMode:"S1T3",dtx:!0}],Ue=jt):Ue=Ds,ke.next=9;break;case 4:return ke.prev=4,ke.next=5,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 5:Bt=ke.sent,ke.next=7;break;case 6:return ke.prev=6,de=ke.catch(4),(dn=this._videosdkLogs)===null||dn===void 0||dn.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(de)}}),(Kt=this._openTelemetry)===null||Kt===void 0||Kt.completeSpan({span:se,status:2,message:"Error in getDisplayMedia for screen share ".concat(de)}),de.message==="Permission denied"||de.name==="NotAllowedError"?this._emitError(_r.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(_r.q.ERROR_GET_DISPLAY_MEDIA),ke.abrupt("return");case 7:if(Bt){ke.next=8;break}return vt.dispatch(Pi(!0)),(gn=this._openTelemetry)===null||gn===void 0||gn.completeSpan({span:se,status:2,message:"Stream not found"}),ke.abrupt("return");case 8:De=Bt.getVideoTracks()[0],Le=Bt.getAudioTracks()[0],Ue=Ds,(Ke=this._openTelemetry)===null||Ke===void 0||Ke.completeSpan({message:"Track Generated with height ".concat(De.getSettings().height," and width ").concat(De.getSettings().width),span:xn,status:1});case 9:if(an=(Dt=this._openTelemetry)===null||Dt===void 0?void 0:Dt.trace({spanName:"Generating Producer Configuration",span:se}),mn={videoGoogleStartBitrate:1e3},!this._forceH264){ke.next=11;break}if(Cn=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Oe){return Oe.mimeType.toLowerCase()==="video/h264"})){ke.next=10;break}throw(Xt=this._videosdkLogs)===null||Xt===void 0||Xt.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 10:ke.next=12;break;case 11:if(!this._forceVP9){ke.next=12;break}if(Cn=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Oe){return Oe.mimeType.toLowerCase()==="video/vp9"})){ke.next=12;break}throw(yr=this._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 12:return(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:an,status:1,message:"Producer Configuration Generated"}),an=(bn=this._openTelemetry)===null||bn===void 0?void 0:bn.trace({spanName:"Creating Share Producer",span:se}),ke.next=13,this._sendTransport.produce({track:De,encodings:Ue.length>0?Ue:Ds,codecOptions:mn,codec:Cn,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(Oe){Se.e2eeManager&&(Oe.senderStreams=Oe.createEncodedStreams())}});case 13:if(this._shareProducer=ke.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareProducer),ur=Ga({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareProducer,rtpSender:this._shareProducer.rtpSender}),vt.dispatch(ur),this._eventEmitter.emit(ur.type,ur.payload),this._shareProducer.on("transportclose",function(){var Oe,Je=Ya(Se._shareProducer.id);vt.dispatch(Je),Se._eventEmitter.emit(Je.type,Je.payload),(Oe=Se._shareProducer)===null||Oe===void 0||Oe.close(),Se._shareProducer=null}),this._shareProducer.on("trackended",function(){var Oe;(Oe=Se._openTelemetry)===null||Oe===void 0||Oe.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:se,status:2}),vt.dispatch(tr({type:"error",text:"Share disconnected!"})),Se.disableShare().catch(function(){})}),(Vt=this._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:an,status:1,message:"Share Producer Created"}),!Le){ke.next=18;break}return ke.prev=14,Pr={opusStereo:1,opusDtx:1},an=(At=this._openTelemetry)===null||At===void 0?void 0:At.trace({spanName:"Creating Share Audio Producer",span:se}),ke.next=15,this._sendTransport.produce({track:Le,codecOptions:Pr,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(Oe){Se.e2eeManager&&(Oe.senderStreams=Oe.createEncodedStreams())}});case 15:this._shareAudioProducer=ke.sent,ta=Ga({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareAudioProducer,rtpSender:this._shareAudioProducer.rtpSender}),vt.dispatch(ta),this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareAudioProducer),this._eventEmitter.emit(ta.type,ta.payload),this._shareAudioProducer.on("transportclose",function(){var Oe,Je=Ya(Se._shareAudioProducer.id);vt.dispatch(Je),Se._eventEmitter.emit(Je.type,Je.payload),(Oe=Se._shareAudioProducer)===null||Oe===void 0||Oe.close(),Se._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var Oe;(Oe=Se._openTelemetry)===null||Oe===void 0||Oe.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:se,status:2}),vt.dispatch(tr({type:"error",text:"Share disconnected!"}))}),(An=this._openTelemetry)===null||An===void 0||An.completeSpan({span:an,status:1,message:"Share Audio Producer Created"}),ke.next=18;break;case 16:return ke.prev=16,Ee=ke.catch(14),ke.next=17,this._socketRequest("produceError",{mediaType:"shareAudio",message:Ee.message});case 17:(oa=this._videosdkLogs)===null||oa===void 0||oa.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:Ee.message}});case 18:(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:se,status:1,message:"Enable Share Successful"}),ke.next=21;break;case 19:return ke.prev=19,xe=ke.catch(3),fe.error("enableShare() | failed:%o",xe),(ja=this._openTelemetry)===null||ja===void 0||ja.completeSpan({span:se,status:2,attributes:{error:xe.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",xe.message),(Fa=this._videosdkLogs)===null||Fa===void 0||Fa.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:xe.message}}),xe.name!=="NotAllowedError"&&vt.dispatch(tr({type:"error",text:"Error sharing: ".concat(xe)})),ke.next=20,this._socketRequest("produceError",{mediaType:"share",message:xe.message});case 20:De&&De.stop(),Le&&Le.stop();case 21:vt.dispatch(Pi(!1)),this._shareProducer&&(Gr=0,(G=this._metrics.addNewProbe(this._shareProducer,"share_producer")).onStatsCollected=function(Oe){try{var Je;Se._stats.producerStats||(Se._stats.producerStats={}),Se._stats.producerStats.share||(Se._stats.producerStats.share=[]),Se._shareProducer&&(Se._latestStats[(Je=Se._shareProducer)===null||Je===void 0?void 0:Je.id]=[]),Oe.video.forEach(function(Ae){var tt;Se._shareProducer&&Se._latestStats[(tt=Se._shareProducer)===null||tt===void 0?void 0:tt.id].push(Ae)}),Gr%5==0&&Se._shareProducer!=null&&Se._stats.producerStats.share.push({timestamp:new Date,stats:Se._latestStats[Se._shareProducer.id]}),Gr++}catch(Ae){var We;(We=Se._videosdkLogs)===null||We===void 0||We.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ae.message}}),console.log("PRODUCER ERROR",Ae)}},G.start(),this._shareProducer.observer.on("close",function(){G.stop(),Se._metrics.removeExistingProbe(G)})),this._shareAudioProducer&&(K=0,(X=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer")).onStatsCollected=function(Oe){try{var Je;Se._stats.producerStats||(Se._stats.producerStats={}),Se._stats.producerStats.shareAudio||(Se._stats.producerStats.shareAudio=[]),Se._shareAudioProducer&&(Se._latestStats[(Je=Se._shareAudioProducer)===null||Je===void 0?void 0:Je.id]=[]),Oe.audio.forEach(function(Ae){var tt;Se._shareAudioProducer&&Se._latestStats[(tt=Se._shareAudioProducer)===null||tt===void 0?void 0:tt.id].push(Ae)}),K%5==0&&Se._shareAudioProducer!=null&&Se._stats.producerStats.shareAudio.push(Oa({timestamp:new Date},Se._latestStats[Se._shareAudioProducer.id]?Se._latestStats[Se._shareAudioProducer.id][0]:{})),K++}catch(Ae){var We;(We=Se._videosdkLogs)===null||We===void 0||We.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ae.message}}),console.log("PRODUCER ERROR",Ae)}},X.start(),this._shareAudioProducer.observer.on("close",function(){X.stop(),Se._metrics.removeExistingProbe(X)}));case 22:case"end":return ke.stop()}},ge,this,[[3,19],[4,6],[14,16]])})),function(){return gc.apply(this,arguments)})},{key:"disableShare",value:(Uc=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn;return g().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:if(fe.debug("disableShare()"),ie=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){xn.next=1;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"Share Producer Not found"}),xn.abrupt("return");case 1:return De=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Share Producer",span:ie,status:1}),this._shareProducer.close(),Le=Ya(this._shareProducer.id),vt.dispatch(Le),this._eventEmitter.emit(Le.type,Le.payload),this._shareAudioProducer&&(Dt=(Ue=this._openTelemetry)===null||Ue===void 0?void 0:Ue.trace({spanName:"Closing Share Audio Producer",span:ie,status:1}),this._shareAudioProducer.close(),Le=Ya(this._shareAudioProducer.id),vt.dispatch(Le),this._eventEmitter.emit(Le.type,Le.payload),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:Dt,status:1,message:"Closed Share Audio Producer"})),xn.prev=2,xn.next=3,this._socketRequest("closeProducer",{producerId:this._shareProducer.id});case 3:if(!this._shareAudioProducer){xn.next=4;break}return xn.next=4,this._socketRequest("closeProducer",{producerId:this._shareAudioProducer.id});case 4:(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:De,status:1,message:"Requested Server to Close Producer"}),xn.next=6;break;case 5:xn.prev=5,hn=xn.catch(2),vt.dispatch(tr({type:"error",text:"Error closing server-side share Producer: ".concat(hn)})),(bn=this._openTelemetry)===null||bn===void 0||bn.completeSpan({span:ie,status:2,message:"Error closing server-side share Producer ".concat(hn)}),(Vt=this._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:hn.message}});case 6:this._shareProducer=null,this._shareAudioProducer=null,(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:ie,status:1,message:"Screen Share Disabled Successfully"});case 7:case"end":return xn.stop()}},ge,this,[[2,5]])})),function(){return Uc.apply(this,arguments)})},{key:"enableAudioOnly",value:(Ki=(0,_.A)(g().mark(function ge(){var ee,re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:fe.debug("enableAudioOnly()"),vt.dispatch(Da(!0)),this.disableWebcam(),ee=$a(this._consumers.values()),le.prev=1,ee.s();case 2:if((re=ee.n()).done){le.next=5;break}if((se=re.value).kind==="video"){le.next=3;break}return le.abrupt("continue",4);case 3:this._pauseConsumer(se);case 4:le.next=2;break;case 5:le.next=7;break;case 6:le.prev=6,ie=le.catch(1),ee.e(ie);case 7:return le.prev=7,ee.f(),le.finish(7);case 8:vt.dispatch(Zr(!0)),vt.dispatch(Da(!1));case 9:case"end":return le.stop()}},ge,this,[[1,6,7,8]])})),function(){return Ki.apply(this,arguments)})},{key:"disableAudioOnly",value:(tc=(0,_.A)(g().mark(function ge(){var ee,re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:fe.debug("disableAudioOnly()"),vt.dispatch(Da(!0)),!this._webcamProducer&&this._produce&&(Xn()||{}).webcamEnabled&&this.enableWebcam(),ee=$a(this._consumers.values()),le.prev=1,ee.s();case 2:if((re=ee.n()).done){le.next=5;break}if((se=re.value).kind==="video"){le.next=3;break}return le.abrupt("continue",4);case 3:this._resumeConsumer(se);case 4:le.next=2;break;case 5:le.next=7;break;case 6:le.prev=6,ie=le.catch(1),ee.e(ie);case 7:return le.prev=7,ee.f(),le.finish(7);case 8:vt.dispatch(Zr(!1)),vt.dispatch(Da(!1));case 9:case"end":return le.stop()}},ge,this,[[1,6,7,8]])})),function(){return tc.apply(this,arguments)})},{key:"muteAudio",value:(Ta=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:fe.debug("muteAudio()"),vt.dispatch(ya(!0));case 1:case"end":return ee.stop()}},ge)})),function(){return Ta.apply(this,arguments)})},{key:"unmuteAudio",value:(Ol=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:fe.debug("unmuteAudio()"),vt.dispatch(ya(!1));case 1:case"end":return ee.stop()}},ge)})),function(){return Ol.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(Mo=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le,Ue,kt,Dt;return g().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return ie=ee.iceParameters,le=ee.transportId,De=ee.internalSpan,le===((re=this._sendTransport)===null||re===void 0?void 0:re.id)&&this._sendTransport.restartIce({iceParameters:ie}),le===((se=this._recvTransport)===null||se===void 0?void 0:se.id)&&this._recvTransport.restartIce({iceParameters:ie}),qt.prev=1,qt.next=2,this._socketRequest("iceRestarted",{transportId:le});case 2:(Le=this._openTelemetry)===null||Le===void 0||Le.completeSpan({span:De,status:1,message:"iceRestarted"}),qt.next=4;break;case 3:qt.prev=3,Dt=qt.catch(1),(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:De,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(Dt)}),(kt=this._videosdkLogs)===null||kt===void 0||kt.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:Dt.message}}),vt.dispatch(tr({type:"error",text:"ICE restart failed: ".concat(Dt)}));case 4:case"end":return qt.stop()}},ge,this,[[1,3]])})),function(ge){return Mo.apply(this,arguments)})},{key:"restartIce",value:(Oi=(0,_.A)(g().mark(function ge(){var ee,re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(fe.debug("restartIce()"),vt.dispatch(Ca(!0)),le.prev=1,!this._sendTransport){le.next=3;break}return le.next=2,this._socketRequest("restartIce",{transportId:this._sendTransport.id});case 2:return ee=le.sent,le.next=3,this._sendTransport.restartIce({iceParameters:ee});case 3:if(!this._recvTransport){le.next=5;break}return le.next=4,this._socketRequest("restartIce",{transportId:this._recvTransport.id});case 4:return re=le.sent,le.next=5,this._recvTransport.restartIce({iceParameters:re});case 5:vt.dispatch(tr({text:"ICE restarted"})),le.next=7;break;case 6:le.prev=6,ie=le.catch(1),fe.error("restartIce() | failed:%o",ie),vt.dispatch(tr({type:"error",text:"ICE restart failed: ".concat(ie)})),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:ie.message}});case 7:vt.dispatch(Ca(!1));case 8:case"end":return le.stop()}},ge,this,[[1,6]])})),function(){return Oi.apply(this,arguments)})},{key:"_socketRequest",value:(ec=(0,_.A)(g().mark(function ge(ee){var re,se=this,ie=arguments;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return re=ie.length>1&&ie[1]!==void 0?ie[1]:{},le.abrupt("return",new Promise(function(De,Le){se._webSocket.emit("request",{method:ee,request:!0,data:re},function(Ue){Ue!=null&&Ue.error?Le(new Error(Ue.error)):De(Ue.data)})}));case 1:case"end":return le.stop()}},ge)})),function(ge){return ec.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(co=(0,_.A)(g().mark(function ge(ee){var re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",ee),ie.prev=1,!this._webcamProducer){ie.next=3;break}return ie.next=2,this._webcamProducer.setMaxSpatialLayer(ee);case 2:ie.next=4;break;case 3:if(!this._shareProducer){ie.next=4;break}return ie.next=4,this._shareProducer.setMaxSpatialLayer(ee);case 4:ie.next=6;break;case 5:ie.prev=5,se=ie.catch(1),fe.error("setMaxSendingSpatialLayer() | failed:%o",se),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:se.message}}),vt.dispatch(tr({type:"error",text:"Error setting max sending video spatial layer: ".concat(se)}));case 6:case"end":return ie.stop()}},ge,this,[[1,5]])})),function(ge){return co.apply(this,arguments)})},{key:"setWebcamQuality",value:(wo=(0,_.A)(g().mark(function ge(ee){var re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(this._webcamProducer){ie.next=1;break}return ie.abrupt("return");case 1:if(re=this._webcam.resolution,se=To[re][ee].s,this._webcamProducer.maxSpatialLayer!=se){ie.next=2;break}return ie.abrupt("return");case 2:return ie.next=3,this._webcamProducer.setMaxSpatialLayer(se);case 3:case"end":return ie.stop()}},ge,this)})),function(ge){return wo.apply(this,arguments)})},{key:"setConsumerScreenShareQuality",value:(Ms=(0,_.A)(g().mark(function ge(ee,re){var se,ie,le,De,Le,Ue;return g().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return De=(se=this._openTelemetry)===null||se===void 0?void 0:se.trace({spanName:'Setting "'.concat(re,'" Quality for Screen Share')}),Ue=(Le={high:{spatialLayer:2,temporalLayer:2},med:{spatialLayer:1,temporalLayer:2},low:{spatialLayer:0,temporalLayer:2}})[re]||Le.high,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:De,attributes:{selectedQuality:Ue},status:1}),kt.next=1,this.setConsumerPreferredLayers(ee,Ue.spatialLayer,Ue.temporalLayer);case 1:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Done",span:De,status:1});case 2:case"end":return kt.stop()}},ge,this)})),function(ge,ee){return Ms.apply(this,arguments)})},{key:"setConsumerQuality",value:(Oo=(0,_.A)(g().mark(function ge(ee,re){var se,ie,le,De,Le,Ue,kt;return g().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return De=this._webcam.resolution,Le=(se=this._openTelemetry)===null||se===void 0?void 0:se.trace({spanName:'Setting "'.concat(re,'" Quality')}),Ue=To[De][re].s,kt=To[De][re].t,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Le,attributes:{spatialLayers:JSON.parse(Ue),temporalLayers:JSON.parse(kt)},status:1}),Dt.next=1,this.setConsumerPreferredLayers(ee,Ue,kt);case 1:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Done",span:Le,status:1});case 2:case"end":return Dt.stop()}},ge,this)})),function(ge,ee){return Oo.apply(this,arguments)})},{key:"setViewPort",value:(fi=(0,_.A)(g().mark(function ge(ee,re,se){var ie,le,De,Le;return g().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if(this._consumers.get(ee.id)){Ue.next=1;break}return Ue.abrupt("return");case 1:if(ie=(0,ci.ed)(this._consumers.get(ee.id),re,se),le=ie.consumerId,De=ie.newPreferredSpatialLayer,Le=ie.newPreferredTemporalLayer,De!==ee.preferredSpatialLayer||Le!==ee.preferredTemporalLayer){Ue.next=2;break}return Ue.abrupt("return");case 2:if(!le){Ue.next=3;break}return Ue.next=3,this.setConsumerPreferredLayers(le,De,Le);case 3:case"end":return Ue.stop()}},ge,this)})),function(ge,ee,re){return fi.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(xo=(0,_.A)(g().mark(function ge(ee,re,se){var ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return fe.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",ee,re,se),Le.prev=1,(ie=this._consumers.get(ee)).spatialLayers>1&&(ie.preferredSpatialLayer=re,ie.preferredTemporalLayer=se),Le.next=2,this._socketRequest("setConsumerPreferredLayers",{consumerId:ee,spatialLayer:re,temporalLayer:se});case 2:vt.dispatch(uc(ee,re,se)),Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),fe.error("setConsumerPreferredLayers() | failed:%o",De),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:De.message}}),vt.dispatch(tr({type:"error",text:"Error setting Consumer preferred layers: ".concat(De)}));case 4:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(ge,ee,re){return xo.apply(this,arguments)})},{key:"setConsumerPriority",value:(Os=(0,_.A)(g().mark(function ge(ee,re){var se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return fe.debug("setConsumerPriority() [consumerId:%s, priority:%d]",ee,re),le.prev=1,le.next=2,this._socketRequest("setConsumerPriority",{consumerId:ee,priority:re});case 2:vt.dispatch(Tr(ee,re)),le.next=4;break;case 3:le.prev=3,ie=le.catch(1),fe.error("setConsumerPriority() | failed:%o",ie),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:ie.message}}),vt.dispatch(tr({type:"error",text:"Error setting Consumer priority: ".concat(ie)}));case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge,ee){return Os.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(vs=(0,_.A)(g().mark(function ge(ee){var re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return fe.debug("requestConsumerKeyFrame() [consumerId:%s]",ee),ie.prev=1,ie.next=2,this._socketRequest("requestConsumerKeyFrame",{consumerId:ee});case 2:vt.dispatch(tr({text:"Keyframe requested for video consumer"})),ie.next=4;break;case 3:ie.prev=3,se=ie.catch(1),fe.error("requestConsumerKeyFrame() | failed:%o",se),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:se.message}}),vt.dispatch(tr({type:"error",text:"Error requesting key frame for Consumer: ".concat(se)}));case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return vs.apply(this,arguments)})},{key:"enableChatDataProducer",value:(Ai=(0,_.A)(g().mark(function ge(){var ee,re,se=this;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("enableChatDataProducer()"),this._useDataChannel){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 2:this._chatDataProducer=ie.sent,vt.dispatch(ro({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){se._chatDataProducer=null}),this._chatDataProducer.on("open",function(){fe.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){fe.error('chat DataProducer "close" event'),se._chatDataProducer=null,vt.dispatch(tr({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(le){fe.error('chat DataProducer "error" event:%o',le),vt.dispatch(tr({type:"error",text:"Chat DataProducer error: ".concat(le)}))}),this._chatDataProducer.on("bufferedamountlow",function(){fe.debug('chat DataProducer "bufferedamountlow" event')}),ie.next=4;break;case 3:throw ie.prev=3,re=ie.catch(1),fe.error("enableChatDataProducer() | failed:%o",re),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:re.message}}),vt.dispatch(tr({type:"error",text:"Error enabling chat DataProducer: ".concat(re)})),re;case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return Ai.apply(this,arguments)})},{key:"enableBotDataProducer",value:(As=(0,_.A)(g().mark(function ge(){var ee,re,se=this;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("enableBotDataProducer()"),this._useDataChannel){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 2:this._botDataProducer=ie.sent,vt.dispatch(ro({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){se._botDataProducer=null}),this._botDataProducer.on("open",function(){fe.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){fe.error('bot DataProducer "close" event'),se._botDataProducer=null,vt.dispatch(tr({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(le){fe.error('bot DataProducer "error" event:%o',le),vt.dispatch(tr({type:"error",text:"Bot DataProducer error: ".concat(le)}))}),this._botDataProducer.on("bufferedamountlow",function(){fe.debug('bot DataProducer "bufferedamountlow" event')}),ie.next=4;break;case 3:throw ie.prev=3,re=ie.catch(1),fe.error("enableBotDataProducer() | failed:%o",re),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:re.message}}),vt.dispatch(tr({type:"error",text:"Error enabling bot DataProducer: ".concat(re)})),re;case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return As.apply(this,arguments)})},{key:"sendChatMessage",value:($s=(0,_.A)(g().mark(function ge(ee){return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug('sendChatMessage() [text:"%s]',ee),this._chatDataProducer){re.next=1;break}return vt.dispatch(tr({type:"error",text:"No chat DataProducer"})),re.abrupt("return");case 1:try{this._chatDataProducer.send(ee)}catch(se){fe.error("chat DataProducer.send() failed:%o",se),vt.dispatch(tr({type:"error",text:"chat DataProducer.send() failed: ".concat(se)}))}case 2:case"end":return re.stop()}},ge,this)})),function(ge){return $s.apply(this,arguments)})},{key:"sendBotMessage",value:(Xo=(0,_.A)(g().mark(function ge(ee){return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug('sendBotMessage() [text:"%s]',ee),this._botDataProducer){re.next=1;break}return vt.dispatch(tr({type:"error",text:"No bot DataProducer"})),re.abrupt("return");case 1:try{this._botDataProducer.send(ee)}catch(se){fe.error("bot DataProducer.send() failed:%o",se),vt.dispatch(tr({type:"error",text:"bot DataProducer.send() failed: ".concat(se)}))}case 2:case"end":return re.stop()}},ge,this)})),function(ge){return Xo.apply(this,arguments)})},{key:"changeDisplayName",value:(Ao=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return fe.debug('changeDisplayName() [displayName:"%s"]',ee),pn({displayName:ee}),se.prev=1,se.next=2,this._socketRequest("changeDisplayName",{displayName:ee});case 2:this._displayName=ee,vt.dispatch(Fn(ee)),vt.dispatch(tr({text:"Display name changed"})),se.next=4;break;case 3:se.prev=3,re=se.catch(1),fe.error("changeDisplayName() | failed: %o",re),vt.dispatch(tr({type:"error",text:"Could not change display name: ".concat(re)})),vt.dispatch(Fn());case 4:case"end":return se.stop()}},ge,this,[[1,3]])})),function(ge){return Ao.apply(this,arguments)})},{key:"openConnection",value:(mc=(0,_.A)(g().mark(function ge(ee){var re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=ee.roomId,se=ee.payload,ie.next=1,this._socketRequest("openConnection",{roomId:re,payload:se}).catch(function(le){throw new Error(le)});case 1:case"end":return ie.stop()}},ge,this)})),function(ge){return mc.apply(this,arguments)})},{key:"closeConnection",value:(Jo=(0,_.A)(g().mark(function ge(ee){return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=1,this._socketRequest("closeConnection",{roomId:ee});case 1:case"end":return re.stop()}},ge,this)})),function(ge){return Jo.apply(this,arguments)})},{key:"switchPeerRoom",value:(ol=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return re=ee.peerId,se=ee.roomId,ie=ee.payload,le=ee.token,De.next=1,this._socketRequest("switchPeerRoom",{roomId:se,peerId:re,payload:ie,token:le});case 1:case"end":return De.stop()}},ge,this)})),function(ge){return ol.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(Yi=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return re=ee.roomId,se=ee.connectionRoomId,ie=ee.peerId,le=ee.payload,De=ee.token,Le.next=1,this._socketRequest("connectionSwitchPeerRoom",{roomId:re,connectionRoomId:se,peerId:ie,payload:le,token:De});case 1:case"end":return Le.stop()}},ge,this)})),function(ge){return Yi.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(pi=(0,_.A)(g().mark(function ge(ee){var re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=ee.roomId,se=ee.message,ie.next=1,this._socketRequest("connectionSendChatMessage",{roomId:re,message:se});case 1:case"end":return ie.stop()}},ge,this)})),function(ge){return pi.apply(this,arguments)})},{key:"connectionEndMeeting",value:(fc=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return re=ee.roomId,se.next=1,this._socketRequest("connectionCloseRoom",{roomId:re});case 1:case"end":return se.stop()}},ge,this)})),function(ge){return fc.apply(this,arguments)})},{key:"pubsubPublish",value:(Gi=(0,_.A)(g().mark(function ge(ee,re,se,ie){var le,De,Le,Ue,kt,Dt,qt;return g().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:if(bn.prev=0,se!=null&&se.sendOnly){if(le=se.sendOnly,De=[],le){Le=$a(le);try{for(Le.s();!(Ue=Le.n()).done;)(kt=Ue.value)&&De.push(kt.toString())}catch(Vt){Le.e(Vt)}finally{Le.f()}}se.sendOnly=De}return bn.next=1,this._socketRequest("pubsubPublish",{topic:ee,message:re,options:se,payload:ie});case 1:bn.next=3;break;case 2:bn.prev=2,qt=bn.catch(0),(Dt=this._videosdkLogs)===null||Dt===void 0||Dt.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:qt.message}}),fe.error("pubsubPublish() | failed: %o",qt);case 3:case"end":return bn.stop()}},ge,this,[[0,2]])})),function(ge,ee,re,se){return Gi.apply(this,arguments)})},{key:"pubsubSubscribe",value:(zc=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return le.prev=1,le.next=2,this._socketRequest("pubsubSubscribe",{topic:ee});case 2:return re=le.sent,le.abrupt("return",re);case 3:le.prev=3,ie=le.catch(1),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("pubsubSubscribe() | failed: %o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return zc.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(Qo=(0,_.A)(g().mark(function ge(ee){var re,se,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return le.prev=1,le.next=2,this._socketRequest("pubsubUnsubscribe",{topic:ee});case 2:(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat(ee),logType:"INFO"}),le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("pubsubUnsubscribe() | failed: %o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return Qo.apply(this,arguments)})},{key:"closeRoom",value:(oo=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=1,this._socketRequest("closeRoom",{});case 1:case"end":return ee.stop()}},ge,this)})),function(){return oo.apply(this,arguments)})},{key:"removePeer",value:(hi=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if((re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Removing peer ".concat(ee),status:1}),ee!=null){se.next=1;break}return se.abrupt("return");case 1:return se.next=2,this._socketRequest("removePeer",{peerId:ee});case 2:case"end":return se.stop()}},ge,this)})),function(ge){return hi.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(pc=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(fe.debug("getSendTransportRemoteStats()"),this._sendTransport){ee.next=1;break}return ee.abrupt("return");case 1:return ee.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._sendTransport.id}));case 2:case"end":return ee.stop()}},ge,this)})),function(){return pc.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(Bc=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(fe.debug("getRecvTransportRemoteStats()"),this._recvTransport){ee.next=1;break}return ee.abrupt("return");case 1:return ee.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._recvTransport.id}));case 2:case"end":return ee.stop()}},ge,this)})),function(){return Bc.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(Do=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getAudioRemoteStats()"),ee=this._micProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[ee.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return Do.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(di=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getVideoRemoteStats()"),ee=this._webcamProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[ee.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return di.apply(this,arguments)})},{key:"getShareRemoteStats",value:(ei=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getVideoRemoteStats()"),ee=this._shareProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[ee.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return ei.apply(this,arguments)})},{key:"getShareAudioRemoteStats",value:(No=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(ee=this._shareAudioProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[ee.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return No.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(bo=(0,_.A)(g().mark(function ge(ee){var re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("getConsumerRemoteStats()"),re=this._consumers.get(ee)){ie.next=1;break}return ie.abrupt("return");case 1:return this._latestStats[ee]&&(this._latestStats[ee][0].currentSpatialLayer=re.currentSpatialLayer,this._latestStats[ee][0].currentTemporalLayer=re.currentTemporalLayer,this._latestStats[ee][0].preferredSpatialLayer=re.preferredSpatialLayer,this._latestStats[ee][0].preferredTemporalLayer=re.preferredTemporalLayer),se=re.track.id.replace(/[{}]/g,""),ie.abrupt("return",this._latestStats[se]);case 2:case"end":return ie.stop()}},ge,this)})),function(ge){return bo.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(_o=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getChatDataProducerRemoteStats()"),ee=this._chatDataProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:ee.id}));case 2:case"end":return re.stop()}},ge,this)})),function(){return _o.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(bi=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getBotDataProducerRemoteStats()"),ee=this._botDataProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:ee.id}));case 2:case"end":return re.stop()}},ge,this)})),function(){return bi.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(Zi=(0,_.A)(g().mark(function ge(ee){return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(ee)){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataConsumerStats",{dataConsumerId:ee}));case 2:case"end":return re.stop()}},ge,this)})),function(ge){return Zi.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(Wi=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(fe.debug("getSendTransportLocalStats()"),this._sendTransport){ee.next=1;break}return ee.abrupt("return");case 1:return ee.abrupt("return",this._sendTransport.getStats());case 2:case"end":return ee.stop()}},ge,this)})),function(){return Wi.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(ia=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(fe.debug("getRecvTransportLocalStats()"),this._recvTransport){ee.next=1;break}return ee.abrupt("return");case 1:return ee.abrupt("return",this._recvTransport.getStats());case 2:case"end":return ee.stop()}},ge,this)})),function(){return ia.apply(this,arguments)})},{key:"getAudioLocalStats",value:(pa=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(fe.debug("getAudioLocalStats()"),this._micProducer){ee.next=1;break}return ee.abrupt("return");case 1:return ee.abrupt("return",this._micProducer.getStats());case 2:case"end":return ee.stop()}},ge,this)})),function(){return pa.apply(this,arguments)})},{key:"getVideoLocalStats",value:(Xr=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getVideoLocalStats()"),ee=this._webcamProducer||this._shareProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",ee.getStats());case 2:case"end":return re.stop()}},ge,this)})),function(){return Xr.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(sa=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(re=this._consumers.get(ee)){se.next=1;break}return se.abrupt("return");case 1:return se.abrupt("return",re.getStats());case 2:case"end":return se.stop()}},ge,this)})),function(ge){return sa.apply(this,arguments)})},{key:"getTransportRemoteStats",value:(kn=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(ie=ee.participantId){Le.next=1;break}return Le.abrupt("return");case 1:return Le.next=2,this._socketRequest("getTransportStats",{peerId:ie});case 2:return le=Le.sent,De={availableBitrate:le==null||(re=le.recv)===null||re===void 0?void 0:re.availableBitrate,targetBitrate:le==null||(se=le.recv)===null||se===void 0?void 0:se.targetBitrate},Le.abrupt("return",De);case 3:case"end":return Le.stop()}},ge,this)})),function(ge){return kn.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(Gn=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return re=ee.uplink,se=ee.downlink,ie=ee.rtt,le=ee.secret,fe.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",re,se,ie),Le.prev=1,Le.next=2,this._socketRequest("applyNetworkThrottle",{uplink:re,downlink:se,rtt:ie,secret:le});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),fe.error("applyNetworkThrottle() | failed:%o",De),vt.dispatch(tr({type:"error",text:"Error applying network throttle: ".concat(De)}));case 4:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(ge){return Gn.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(Yt=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return re=ee.silent,se=re!==void 0&&re,ie=ee.secret,fe.debug("resetNetworkThrottle()"),De.prev=1,De.next=2,this._socketRequest("resetNetworkThrottle",{secret:ie});case 2:De.next=4;break;case 3:De.prev=3,le=De.catch(1),se||(fe.error("resetNetworkThrottle() | failed:%o",le),vt.dispatch(tr({type:"error",text:"Error resetting network throttle: ".concat(le)})));case 4:case"end":return De.stop()}},ge,this,[[1,3]])})),function(ge){return Yt.apply(this,arguments)})},{key:"createProducerTransport",value:(zn=(0,_.A)(g().mark(function ge(ee,re){var se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft=this;return g().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:le=ee.id,De=ee.iceParameters,Le=ee.iceCandidates,Ue=ee.dtlsParameters,kt=ee.sctpParameters,Dt=(se=this._openTelemetry)===null||se===void 0?void 0:se.trace({spanName:"Creating Send Transport",span:re||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:le,iceParameters:De,iceCandidates:Le,dtlsParameters:Ue,sctpParameters:kt,iceServers:this._iceServers}),qt=new Map,bn=new Map,hn=!1,xn=!1,Pe=!1,this._sendTransportInternal=setInterval((0,_.A)(g().mark(function mt(){var jt,Ke,Bt,dn,Kt,gn,an,Cn,mn,Xt,yr,ur;return g().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return jt=[],At.prev=1,At.next=2,ft._sendTransport.getStats();case 2:Ke=At.sent,At.next=4;break;case 3:return At.prev=3,ur=At.catch(1),console.error("Error fetching stats:",ur),At.abrupt("return");case 4:try{Ke.forEach(function(An){try{if(An.type==="outbound-rtp"){var Pr={qualityLimitationReason:An.qualityLimitationReason};qt.set(An.id,Pr)}if(An.type==="remote-inbound-rtp"&&An.totalRoundTripTime&&An.roundTripTimeMeasurements){var ta=bn.get(An.id);ta||(ta={totalRoundTripTime:0,roundTripTimeMeasurements:0},bn.set(An.id,ta));var oa=An.roundTripTimeMeasurements-ta.roundTripTimeMeasurements,ja=An.totalRoundTripTime-ta.totalRoundTripTime;if(oa>0&&ja>0){var Fa=ja/oa;ta.totalRoundTripTime=An.totalRoundTripTime,ta.roundTripTimeMeasurements=An.roundTripTimeMeasurements,jt.push(1e3*Fa)}}}catch{}});try{Bt=jt.reduce(function(An,Pr){return An+Pr},0)/jt.length,Number.isNaN(Bt)||(Vt||(Vt=Bt),dn=(0,b.A)(qt.values()).some(function(An){return An.qualityLimitationReason==="bandwidth"}),Kt=(0,b.A)(qt.values()).some(function(An){return An.qualityLimitationReason==="cpu"}),!hn&&dn&&Bt-Vt>50?((gn=ft._videosdkLogs)===null||gn===void 0||gn.pushLogs({logType:"WARN",attributes:{avgRoundTripTimeInMs:Bt,ewmaRttInMs:Vt},logText:"Send Transport Congestion detected, the network is bandwidth limited and the round trip time is increasing (ewmaRtt: ".concat(Vt,", avgRoundTripTime: ").concat(Bt,")")}),hn=!0,ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"congestion",state:"detected",timestamp:new Date().getTime()})):hn&&Bt-Vt<30&&((an=ft._videosdkLogs)===null||an===void 0||an.pushLogs({logType:"INFO",attributes:{avgRoundTripTimeInMs:Bt,ewmaRttInMs:Vt},logText:"Send Transport  Congestion resolved, the round trip time is back to normal (ewmaRtt: ".concat(Vt,", avgRoundTripTime: ").concat(Bt,")")}),hn=!1,ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"congestion",state:"resolved",timestamp:new Date().getTime()})),dn&&!Pe?((Cn=ft._videosdkLogs)===null||Cn===void 0||Cn.pushLogs({logType:"WARN",logText:"Bandwidth Limitation detected"}),ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"bandwidth",state:"detected",timestamp:new Date().getTime()}),Pe=!0):!dn&&Pe&&((mn=ft._videosdkLogs)===null||mn===void 0||mn.pushLogs({logType:"INFO",logText:"Bandwidth Limitation resolved"}),ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"bandwidth",state:"resolved",timestamp:new Date().getTime()}),Pe=!1),Vt=.9*Vt+.1*Bt,!xn&&Kt?(ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"cpu",state:"detected",timestamp:new Date().getTime()}),(Xt=ft._videosdkLogs)===null||Xt===void 0||Xt.pushLogs({logType:"WARN",logText:"CPU Limitation detected"}),xn=!0):xn&&!Kt&&(ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"cpu",state:"resolved",timestamp:new Date().getTime()}),(yr=ft._videosdkLogs)===null||yr===void 0||yr.pushLogs({logType:"INFO",logText:"CPU Limitation resolved"}),xn=!1))}catch{}}catch{}case 5:case"end":return At.stop()}},mt,null,[[1,3]])})),1e3),this._sendTransport.on("connect",function(mt,jt,Ke){var Bt,dn=mt.dtlsParameters;(Bt=ft._openTelemetry)===null||Bt===void 0||Bt.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:Dt,status:1}),ft._socketRequest("connectWebRtcTransport",{transportId:ft._sendTransport.id,dtlsParameters:dn}).then(function(){jt()}).catch(function(Kt){Ke(Kt)})}),this._sendTransport.on("produce",function(){var mt=(0,_.A)(g().mark(function jt(Ke,Bt,dn){var Kt,gn,an,Cn,mn,Xt,yr,ur;return g().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Kt=Ke.kind,gn=Ke.rtpParameters,an=Ke.appData,At.prev=1,(Cn=ft._openTelemetry)===null||Cn===void 0||Cn.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:Dt,status:1}),At.next=2,ft._socketRequest("produce",{transportId:ft._sendTransport.id,kind:Kt,rtpParameters:gn,appData:an});case 2:mn=At.sent,Xt=mn.id,Bt({id:Xt}),At.next=4;break;case 3:At.prev=3,ur=At.catch(1),(yr=ft._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:ur.message}}),dn(ur);case 4:case"end":return At.stop()}},jt,null,[[1,3]])}));return function(jt,Ke,Bt){return mt.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var mt=(0,_.A)(g().mark(function jt(Ke,Bt,dn){var Kt,gn,an,Cn,mn,Xt,yr,ur;return g().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return Kt=Ke.sctpStreamParameters,gn=Ke.label,an=Ke.protocol,Cn=Ke.appData,At.prev=1,At.next=2,ft._socketRequest("produceData",{transportId:ft._sendTransport.id,sctpStreamParameters:Kt,label:gn,protocol:an,appData:Cn});case 2:mn=At.sent,Xt=mn.id,Bt({id:Xt}),At.next=4;break;case 3:At.prev=3,ur=At.catch(1),(yr=ft._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:ur.message}}),dn(ur);case 4:case"end":return At.stop()}},jt,null,[[1,3]])}));return function(jt,Ke,Bt){return mt.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(){var mt=(0,_.A)(g().mark(function jt(Ke){var Bt,dn,Kt,gn,an,Cn;return g().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return an=Array,mn.next=1,ft._sendTransport.getStats();case 1:Cn=mn.sent,(dn=an.from.call(an,Cn).filter(function(Xt){var yr=(0,v.A)(Xt,2)[1];return yr.type==="local-candidate"||yr.type==="remote-candidate"}).map(function(Xt){return(0,v.A)(Xt,2)[1]})).length>0&&((Kt=ft._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logText:'Send Trasnport State Change "'.concat(Ke,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(dn)}})),Ke==="connected"&&ft.emitMeetingStateChange(Js),(Bt=ft._openTelemetry)===null||Bt===void 0||Bt.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(Ke),span:Dt,status:1}),Ke==="failed"&&((gn=ft._videosdkLogs)===null||gn===void 0||gn.pushLogs({logText:"ERROR_MEETING_MEDIA_CONNECTION_FAILED",logType:"ERROR",attributes:{error:"Unable to connect to the meeting or media. Please check your network connection, ensure your firewall or security settings are not blocking the application, or try connecting using a different network."},dashboardLog:!0}),ft.restartIce()),ft._transportState=Ke;case 2:case"end":return mn.stop()}},jt)}));return function(jt){return mt.apply(this,arguments)}}()),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:Dt,status:1,message:"Send Transport Created Successfully"});case 1:case"end":return Mt.stop()}},ge,this)})),function(ge,ee){return zn.apply(this,arguments)})},{key:"createConsumerTransport",value:(wt=(0,_.A)(g().mark(function ge(ee,re){var se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft=this;return g().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:le=ee.id,De=ee.iceParameters,Le=ee.iceCandidates,Ue=ee.dtlsParameters,kt=ee.sctpParameters,Dt=(se=this._openTelemetry)===null||se===void 0?void 0:se.trace({spanName:"Creating Recieve Transport",span:re||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:le,iceParameters:De,iceCandidates:Le,dtlsParameters:Ue,sctpParameters:kt,iceServers:this._iceServers}),this._recvTransport.on("connect",function(mt,jt,Ke){var Bt,dn=mt.dtlsParameters;(Bt=ft._openTelemetry)===null||Bt===void 0||Bt.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:Dt,status:1}),ft._socketRequest("connectWebRtcTransport",{transportId:ft._recvTransport.id,dtlsParameters:dn}).then(function(){jt()}).catch(function(Kt){Ke(Kt)})}),this._recvTransport.on("connectionstatechange",function(){var mt=(0,_.A)(g().mark(function jt(Ke){var Bt,dn,Kt,gn,an;return g().wrap(function(Cn){for(;;)switch(Cn.prev=Cn.next){case 0:return gn=Array,Cn.next=1,ft._recvTransport.getStats();case 1:an=Cn.sent,(dn=gn.from.call(gn,an).filter(function(mn){var Xt=(0,v.A)(mn,2)[1];return Xt.type==="local-candidate"||Xt.type==="remote-candidate"}).map(function(mn){return(0,v.A)(mn,2)[1]})).length>0&&((Kt=ft._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logText:'Recv Trasnport State Change "'.concat(Ke,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(dn)}})),(Bt=ft._openTelemetry)===null||Bt===void 0||Bt.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(Ke),span:Dt,status:1}),Ke==="failed"&&ft.restartIce(),ft._transportState=Ke;case 2:case"end":return Cn.stop()}},jt)}));return function(jt){return mt.apply(this,arguments)}}()),qt=0,bn=this._metrics.addNewProbe(this._recvTransport,"transport"),Vt=new Map,hn=new Map,xn=new Map,Pe=new Set,bn.onStatsCollected=function(mt){try{var jt=function(dn,Kt,gn){ft._stats.consumerStats||(ft._stats.consumerStats={});var an=Kt.appData.peerId;ft._stats.consumerStats[an]||(ft._stats.consumerStats[an]={}),ft._stats.consumerStats[an][gn]||(ft._stats.consumerStats[an][gn]=[]),ft._latestStats[Kt.track.id.replace(/[{}]/g,"")]=[dn],qt%5==0&&ft._stats.consumerStats[an][gn].push(dn)},Ke=function(dn){mt[dn].forEach(function(Kt){var gn,an=$a(ft._consumers);try{for(an.s();!(gn=an.n()).done;){var Cn=(0,v.A)(gn.value,2),mn=(Cn[0],Cn[1]),Xt=mn.track.id.replace(/[{}]/g,"");if(Xt===Kt.trackId){var yr=mn.appData.share?mn.kind==="audio"?"shareAudio":"share":mn.kind;if(jt(Kt,mn,yr),yr==="audio"||yr==="shareAudio")return;if(Kt.bitrate>0)Vt.has(Xt)&&Vt.delete(Xt);else{var ur=Vt.get(Xt);ur?ur.detected+5e3<Date.now()&&ft._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"stuck",peerId:mn.appData.peerId,streamId:Xt}):Vt.set(Xt,{detected:Date.now()})}var At=Kt.trackId,An=Kt.freezeCount;if(!At||An===void 0)return;var Pr=hn.get(At);if(Pr===void 0)return void hn.set(At,An);if(An>Pr)ft._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"freeze-detected",peerId:mn.appData.peerId,streamId:Xt}),xn.set(At,Date.now()),Pe.delete(At);else{var ta=xn.get(At);ta&&!Pe.has(At)&&Date.now()-ta>5e3&&(ft._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"freeze-resolved",peerId:mn.appData.peerId,streamId:Xt}),Pe.add(At))}hn.set(At,An)}}}catch(oa){an.e(oa)}finally{an.f()}})};Ke("audio"),Ke("video"),qt++}catch(dn){var Bt;(Bt=ft._videosdkLogs)===null||Bt===void 0||Bt.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:dn.message}}),console.log("CONSUMER CATCH",dn)}},bn.start(),this._recvTransport.observer.on("close",function(){bn.stop(),ft._metrics.removeExistingProbe(bn)}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:Dt,status:1,message:"Recieve Transport Created Successfully"});case 1:case"end":return Mt.stop()}},ge,this)})),function(ge,ee){return wt.apply(this,arguments)})},{key:"emitMeetingStateChange",value:function(ge){this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:ge}),this._meetingConnectionState=ge}},{key:"joinRoom",value:(It=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft,Mt,mt,jt,Ke,Bt,dn,Kt,gn,an,Cn,mn;return g().wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:return fe.debug("joinRoom()"),Xt.prev=1,Le=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new Mr.pF({handlerName:this._handlerName}),Xt.next=2,this._socketRequest("getRouterRtpCapabilities");case 2:return Ue=Xt.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(Ue.headerExtensions=(kt=Ue.headerExtensions)===null||kt===void 0?void 0:kt.filter(function(yr){return yr.uri!="urn:3gpp:video-orientation"})):Ue.headerExtensions=(Dt=Ue.headerExtensions)===null||Dt===void 0?void 0:Dt.filter(function(yr){return yr.uri!="urn:3gpp:video-orientation"}),Xt.next=3,this._mediasoupDevice.load({routerRtpCapabilities:Ue});case 3:if((re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:Le,status:1,attributes:{routerRtpCapabilities:JSON.stringify(Ue).toString()},message:"Router Capabilities Loaded"}),!this._produce){Xt.next=5;break}return Xt.next=4,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 4:qt=Xt.sent,this.createProducerTransport(qt,this._joinSpan);case 5:if(!this._consume){Xt.next=7;break}return Xt.next=6,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 6:bn=Xt.sent,this.createConsumerTransport(bn,this._joinSpan);case 7:return Xt.next=8,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(se=this._mediasoupDevice)===null||se===void 0?void 0:se.rtpCapabilities,sctpCapabilities:(ie=this._mediasoupDevice)===null||ie===void 0?void 0:ie.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData});case 8:Vt=Xt.sent,hn=Vt.peers,xn=Vt.poll,Pe=Vt.messages,vt.dispatch(Dn("connected")),(le=this._openTelemetry)===null||le===void 0||le.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:hn,poll:xn,messages:Pe,baseUrl:this._baseUrl}),vt.dispatch(so()),vt.dispatch(tr({text:"You are in the room!",timeout:3e3})),ft=$a(hn);try{for(ft.s();!(Mt=ft.n()).done;)mt=Mt.value,jt=Ns(Oa(Oa({},mt),{},{consumers:[],dataConsumers:[]})),vt.dispatch(jt),this._eventEmitter.emit(jt.type,jt.payload)}catch(yr){ft.e(yr)}finally{ft.f()}this._produce&&(vt.dispatch(Er({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((Ke=this._openTelemetry)===null||Ke===void 0||Ke.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(yr){yr.stop()})),Bt=Xn(),this._webcamEnabled&&(!Bt||Bt.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((dn=this._openTelemetry)===null||dn===void 0||dn.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(yr){yr.stop()}))),window.SHOW_INFO&&(Kt=vt.getState(),gn=Kt.me,vt.dispatch(Wr(gn.id))),(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),Xt.next=10;break;case 9:Xt.prev=9,mn=Xt.catch(1),fe.error("joinRoom() failed:%o",mn),(an=this._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:mn.message}}),(Cn=this._openTelemetry)===null||Cn===void 0||Cn.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(mn)}),vt.dispatch(tr({type:"error",text:"Could not join the room: ".concat(mn)})),this.close({sendLeft:!0});case 10:case"end":return Xt.stop()}},ge,this,[[1,9]])})),function(){return It.apply(this,arguments)})},{key:"switchingRoom",value:(Ct=(0,_.A)(g().mark(function ge(ee){var re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft,Mt,mt,jt;return g().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return se=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"switchingRoom() start",attributes:{"room.id":ee,"peer.id":this._peerId,display_name:this._displayName}}),Ke.prev=1,kt=(ie=this._openTelemetry)===null||ie===void 0?void 0:ie.trace({name:"switch room join request",parentSpan:se}),Ke.next=2,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(le=this._mediasoupDevice)===null||le===void 0?void 0:le.rtpCapabilities,sctpCapabilities:(De=this._mediasoupDevice)===null||De===void 0?void 0:De.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData,switchingRoom:!0});case 2:Dt=Ke.sent,qt=Dt.peers,bn=Dt.poll,Vt=Dt.messages,(Le=this._openTelemetry)===null||Le===void 0||Le.completeSpan({span:kt,status:1,message:"Join request successful in switched room"}),vt.dispatch(Dn("connected")),this._eventEmitter.emit("MEETING_JOINED",{switchRoomId:ee,peers:qt,poll:bn,messages:Vt,baseUrl:this._baseUrl}),vt.dispatch(so()),vt.dispatch(tr({text:"You are in the room!",timeout:3e3})),hn=$a(qt);try{for(hn.s();!(xn=hn.n()).done;)Pe=xn.value,ft=Ns(Oa(Oa({},Pe),{},{consumers:[],dataConsumers:[]})),vt.dispatch(ft),this._eventEmitter.emit(ft.type,ft.payload)}catch(Bt){hn.e(Bt)}finally{hn.f()}(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:se,status:1,message:"Room switch completed successfully"}),Ke.next=4;break;case 3:Ke.prev=3,jt=Ke.catch(1),fe.error("joinRoom() failed:%o",jt),(Mt=this._videosdkLogs)===null||Mt===void 0||Mt.pushLogs({logText:"Error Could not join the switched room",logType:"ERROR",attributes:{error:jt.message}}),(mt=this._openTelemetry)===null||mt===void 0||mt.completeSpan({span:se,status:2,message:"Room switch failed: ".concat(jt.message)}),vt.dispatch(tr({type:"error",text:"Could not join the switched room: ".concat(jt)})),this.close({sendLeft:!0});case 4:case"end":return Ke.stop()}},ge,this,[[1,3]])})),function(ge){return Ct.apply(this,arguments)})},{key:"_updateMics",value:(at=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft=arguments;return g().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return re=ft.length>0&&ft[0]!==void 0?ft[0]:void 0,this._mics=new Map,fe.debug("_updateMics() |"),se=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"_updateMics() Calling for Getting System Mic list",span:re||null}),Mt.prev=1,Mt.next=2,navigator.mediaDevices.enumerateDevices();case 2:De=Mt.sent,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting System Mic list",span:se,status:1,attributes:{systemDevice:De?JSON.stringify(De):"Device not found"}}),Le=$a(De);try{for(Le.s();!(Ue=Le.n()).done;)(kt=Ue.value).kind=="audioinput"&&this._mics.set(kt.deviceId,kt)}catch(mt){Le.e(mt)}finally{Le.f()}Dt=Array.from(this._mics.values()),qt=Dt.length,bn=this._mic.device?this._mic.device.deviceId:void 0,qt===0?this._mic.device=null:this._mics.has(bn)||(this._mic.device=Dt[0]),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:se,status:1,message:"Update Mic"}),Mt.next=5;break;case 3:if(Mt.prev=3,!((Pe=Mt.catch(1))instanceof TypeError)){Mt.next=5;break}if(Pe.name!=="TypeError"){Mt.next=4;break}throw hn=_r.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(hn),(Vt=this._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:se,status:2,message:"Error in updateMics() :: ".concat(hn.message)}),new Error(hn.message);case 4:throw(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:se,status:2,message:"Error in updateMics() :: ".concat(Pe.message)}),new Error(Pe.message);case 5:case"end":return Mt.stop()}},ge,this,[[1,3]])})),function(){return at.apply(this,arguments)})},{key:"_updateWebcams",value:(je=(0,_.A)(g().mark(function ge(){var ee,re,se,ie,le,De,Le,Ue,kt,Dt,qt,bn,Vt,hn,xn,Pe,ft,Mt=arguments;return g().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return re=Mt.length>0&&Mt[0]!==void 0?Mt[0]:void 0,fe.debug("_updateWebcams()"),this._webcams=new Map,fe.debug("_updateWebcams() | calling enumerateDevices()"),se=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",span:re||null}),mt.prev=1,mt.next=2,navigator.mediaDevices.enumerateDevices();case 2:De=mt.sent,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting System Webcam list",span:se,status:1,attributes:{systemDevice:De?JSON.stringify(De):"Device not found"}}),Le=$a(De),mt.prev=3,Le.s();case 4:if((Ue=Le.n()).done){mt.next=7;break}if((kt=Ue.value).kind==="videoinput"){mt.next=5;break}return mt.abrupt("continue",6);case 5:this._webcams.set(kt.deviceId,kt);case 6:mt.next=4;break;case 7:mt.next=9;break;case 8:mt.prev=8,Pe=mt.catch(3),Le.e(Pe);case 9:return mt.prev=9,Le.f(),mt.finish(9);case 10:Dt=Array.from(this._webcams.values()),qt=Dt.length,(bn=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=bn),fe.debug("_updateWebcams() [webcams:%o]",Dt),qt===0?this._webcam.device=null:this._webcams.has(bn)||(this._webcam.device=Dt[0]),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:se,status:1,message:"Update Webcam"}),vt.dispatch(Cr(this._webcams.size>1)),mt.next=13;break;case 11:if(mt.prev=11,!((ft=mt.catch(1))instanceof TypeError)){mt.next=13;break}if(ft.name!=="TypeError"){mt.next=12;break}throw hn=_r.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(hn),(Vt=this._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:se,status:2,message:"Error in updateWebcams() :: ".concat(hn.message)}),new Error(hn.message);case 12:throw(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:se,status:2,message:"Error in updateWebcams() :: ".concat(ft.message)}),new Error(ft.message);case 13:case"end":return mt.stop()}},ge,this,[[1,11],[3,8,9,10]])})),function(){return je.apply(this,arguments)})},{key:"_getWebcamType",value:function(ge){return/(back|rear)/i.test(ge.label)?(fe.debug("_getWebcamType() | it seems to be a back camera"),"back"):(fe.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(ce=(0,_.A)(g().mark(function ge(ee){var re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!ee.paused){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._socketRequest("pauseConsumer",{consumerId:ee.id});case 2:ee.pause(),vt.dispatch(Ni(ee.id,"local")),ie.next=4;break;case 3:ie.prev=3,se=ie.catch(1),fe.error("_pauseConsumer() | failed:%o",se),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:se.message}}),vt.dispatch(tr({type:"error",text:"Error pausing Consumer: ".concat(se)}));case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return ce.apply(this,arguments)})},{key:"_resumeConsumer",value:(J=(0,_.A)(g().mark(function ge(ee){var re,se;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(ee.paused){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._socketRequest("resumeConsumer",{consumerId:ee.id});case 2:ee.resume(),vt.dispatch(_i(ee.id,"local")),ie.next=4;break;case 3:ie.prev=3,se=ie.catch(1),fe.error("_resumeConsumer() | failed:%o",se),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:se.message}}),vt.dispatch(tr({type:"error",text:"Error resuming Consumer: ".concat(se)}));case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return J.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(Y=(0,_.A)(g().mark(function ge(){var ee=this;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!this._externalVideoStream){re.next=1;break}return re.abrupt("return",this._externalVideoStream);case 1:if(!(this._externalVideo.readyState<3)){re.next=2;break}return re.next=2,new Promise(function(se){return ee._externalVideo.addEventListener("canplay",se)});case 2:if(!this._externalVideo.captureStream){re.next=3;break}this._externalVideoStream=this._externalVideo.captureStream(),re.next=5;break;case 3:if(!this._externalVideo.mozCaptureStream){re.next=4;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),re.next=5;break;case 4:throw new Error("video.captureStream() not supported");case 5:return re.abrupt("return",this._externalVideoStream);case 6:case"end":return re.stop()}},ge,this)})),function(){return Y.apply(this,arguments)})},{key:"toggleE2EEEnabled",value:(ne=(0,_.A)(g().mark(function ge(ee){return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!this.e2eeManager){re.next=1;break}this._peerId&&this.e2eeManager.setParticipantCryptorEnabled(ee,this._peerId),this.isE2EEEnabled=ee,re.next=2;break;case 1:throw Error("e2ee not configured, please set e2ee settings within the room options");case 2:case"end":return re.stop()}},ge,this)})),function(ge){return ne.apply(this,arguments)})},{key:"_emitError",value:function(ge){this._eventEmitter.emit("ERROR",ge)}}],[{key:"init",value:function(ge){vt=ge.store}}]);var ne,Y,J,ce,je,at,Ct,It,wt,zn,Yt,Gn,kn,sa,Xr,pa,ia,Wi,Zi,bi,_o,bo,No,ei,di,Do,Bc,pc,hi,oo,Qo,zc,Gi,fc,pi,Yi,ol,Jo,mc,Ao,Xo,$s,As,Ai,vs,Os,xo,fi,Oo,Ms,wo,co,ec,Oi,Mo,Ol,Ta,tc,Ki,Uc,gc,xi,nc,jo,wi,Qi,i,p,j,W,te,he,ze,it,ht,Jt,qn,Yn,ir,jr,ka,Ua,ds,js,vc,Ml,Lo,lo,Fc,Mi,Wa,Si,uo,So,ts,yc,Hc,Io,cl,ji,Ss,jl,Bu,zu,Uu,Ll,Rs,_c,bc,xc,os,wc,Vc,Fu,Hu,_d,Il}();function hc(ne){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,_.A)(g().mark(function ne(Y){var J,ce,je,at,Ct,It,wt=this;return g().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:if(zn.prev=0,this.e2eeManager){zn.next=2;break}return ce=cu,je=Y,zn.next=1,jc();case 1:at=zn.sent,Ct={keyProvider:je,worker:at},this.e2eeManager=new ce(Ct),this.e2eeManager.on($i.KS.ParticipantEncryptionStatusChanged,function(Yt){wt.isE2EEEnabled=Yt}),this.e2eeManager.on($i.KS.E2EEStateChange,function(Yt){wt._eventEmitter.emit("E2EE_STATE_CHANGE",Yt)}),(J=this.e2eeManager)===null||J===void 0||J.setup(this),this.toggleE2EEEnabled(!0);case 2:zn.next=4;break;case 3:throw zn.prev=3,It=zn.catch(0),console.error("Error setting up E2EE: ",It),new Error("Error setting up E2EE: "+It.message);case 4:case"end":return zn.stop()}},ne,this,[[0,3]])}))).apply(this,arguments)}},2073:function(N,y,u){var R;N.exports=(R=u(9021),u(7165),R.pad.AnsiX923={pad:function(v,b){var E=v.sigBytes,_=4*b,m=_-E%_,k=E+m-1;v.clamp(),v.words[k>>>2]|=m<<24-k%4*8,v.sigBytes+=m},unpad:function(v){var b=255&v.words[v.sigBytes-1>>>2];v.sigBytes-=b}},R.pad.Ansix923)},2107:(N,y,u)=>{u.d(y,{kR:()=>v,nI:()=>R,wZ:()=>b});var R={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER",SEND_AND_RECV:"SEND_AND_RECV",SIGNALLING_ONLY:"SIGNALLING_ONLY",RECV_ONLY:"RECV_ONLY"};function v(E){return E===R.CONFERENCE||E===R.SEND_AND_RECV}function b(E){return E===R.VIEWER||E===R.SIGNALLING_ONLY}},2109:function(N,y,u){var R;(function(v,b){var E,_="user-agent",m="",k="function",w="undefined",F="object",g="string",A="browser",P="cpu",H="device",D="engine",S="os",x="result",d="name",T="type",O="vendor",M="version",I="architecture",U="major",z="model",$="console",q="mobile",ae="tablet",Q="smarttv",ve="wearable",we="xr",Re="embedded",me="inapp",Ce="brands",Be="formFactors",be="fullVersionList",Ye="platform",Qe="platformVersion",Ge="bitness",He="sec-ch-ua",Te=He+"-full-version-list",dt=He+"-arch",_t=He+"-"+Ge,on=He+"-form-factors",ln=He+"-"+q,Pn=He+"-"+z,En=He+"-"+Ye,rn=En+"-version",Ne=[Ce,be,q,z,Ye,Qe,I,Be,Ge],Me="Amazon",Ze="Apple",Ft="ASUS",Tt="BlackBerry",St="Google",un="Huawei",Sn="Lenovo",Ut="Honor",nr="LG",Ar="Microsoft",Sr="Motorola",Ur="Nvidia",xr="OnePlus",Or="OPPO",Kr="Samsung",va="Sharp",ra="Sony",ua="Xiaomi",jn="Zebra",Ha="Chrome",Ea="Chromium",Qr="Chromecast",gr="Edge",rt="Firefox",ut="Opera",Zt="Facebook",Pt="Sogou",sn="Mobile ",nn=" Browser",et="Windows",On=typeof v!==w,Ln=On&&v.navigator?v.navigator:b,Jn=Ln&&Ln.userAgentData?Ln.userAgentData:b,vr=function(pn){for(var Xn={},Wn=0;Wn<pn.length;Wn++)Xn[pn[Wn].toUpperCase()]=pn[Wn];return Xn},Qt=function(pn,Xn){if(typeof pn===F&&pn.length>0){for(var Wn in pn)if(Nn(Xn)==Nn(pn[Wn]))return!0;return!1}return!!Un(pn)&&Nn(Xn)==Nn(pn)},Rt=function(pn,Xn){for(var Wn in pn)return/^(browser|cpu|device|engine|os)$/.test(Wn)||!!Xn&&Rt(pn[Wn])},Un=function(pn){return typeof pn===g},In=function(pn){if(!pn)return b;for(var Xn=[],Wn=Hr(/\\?\"/g,pn).split(","),dr=0;dr<Wn.length;dr++)if(Wn[dr].indexOf(";")>-1){var Dn=Kn(Wn[dr]).split(";v=");Xn[dr]={brand:Dn[0],version:Dn[1]}}else Xn[dr]=Kn(Wn[dr]);return Xn},Nn=function(pn){return Un(pn)?pn.toLowerCase():pn},Fr=function(pn){return Un(pn)?Hr(/[^\d\.]/g,pn).split(".")[0]:b},Mr=function(pn){for(var Xn in pn){var Wn=pn[Xn];typeof Wn==F&&Wn.length==2?this[Wn[0]]=Wn[1]:this[Wn]=b}return this},Hr=function(pn,Xn){return Un(Xn)?Xn.replace(pn,m):Xn},cr=function(pn){return Hr(/\\?\"/g,pn)},Kn=function(pn,Xn){if(Un(pn))return pn=Hr(/^\s\s*/,pn),typeof Xn===w?pn:pn.substring(0,500)},xa=function(pn,Xn){if(pn&&Xn)for(var Wn,dr,Dn,Hn,Wr,Er,Cr=0;Cr<Xn.length&&!Wr;){var Fn=Xn[Cr],Zr=Xn[Cr+1];for(Wn=dr=0;Wn<Fn.length&&!Wr&&Fn[Wn];)if(Wr=Fn[Wn++].exec(pn))for(Dn=0;Dn<Zr.length;Dn++)Er=Wr[++dr],typeof(Hn=Zr[Dn])===F&&Hn.length>0?Hn.length===2?typeof Hn[1]==k?this[Hn[0]]=Hn[1].call(this,Er):this[Hn[0]]=Hn[1]:Hn.length>=3&&(typeof Hn[1]!==k||Hn[1].exec&&Hn[1].test?Hn.length==3?this[Hn[0]]=Er?Er.replace(Hn[1],Hn[2]):b:Hn.length==4?this[Hn[0]]=Er?Hn[3].call(this,Er.replace(Hn[1],Hn[2])):b:Hn.length>4&&(this[Hn[0]]=Er?Hn[3].apply(this,[Er.replace(Hn[1],Hn[2])].concat(Hn.slice(4))):b):Hn.length>3?this[Hn[0]]=Er?Hn[1].apply(this,Hn.slice(2)):b:this[Hn[0]]=Er?Hn[1].call(this,Er,Hn[2]):b):this[Hn]=Er||b;Cr+=2}},ma=function(pn,Xn){for(var Wn in Xn)if(typeof Xn[Wn]===F&&Xn[Wn].length>0){for(var dr=0;dr<Xn[Wn].length;dr++)if(Qt(Xn[Wn][dr],pn))return Wn==="?"?b:Wn}else if(Qt(Xn[Wn],pn))return Wn==="?"?b:Wn;return Xn.hasOwnProperty("*")?Xn["*"]:pn},La={ME:"4.90","NT 3.51":"3.51","NT 4.0":"4.0",2e3:["5.0","5.01"],XP:["5.1","5.2"],Vista:"6.0",7:"6.1",8:"6.2",8.1:"6.3",10:["6.4","10.0"],NT:""},Va={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":b},Ci={Chrome:"Google Chrome",Edge:"Microsoft Edge","Edge WebView2":"Microsoft Edge WebView2","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"},xs={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[M,[d,sn+"Chrome"]],[/webview.+edge\/([\w\.]+)/i],[M,[d,gr+" WebView"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[M,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,M],[/opios[\/ ]+([\w\.]+)/i],[M,[d,ut+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[M,[d,ut+" GX"]],[/\bopr\/([\w\.]+)/i],[M,[d,ut]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[M,[d,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[M,[d,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[d,M],[/quark(?:pc)?\/([-\w\.]+)/i],[M,[d,"Quark"]],[/\bddg\/([\w\.]+)/i],[M,[d,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[M,[d,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[M,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[M,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[M,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[M,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[M,[d,"Smart "+Sn+nn]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure"+nn],M],[/\bfocus\/([\w\.]+)/i],[M,[d,rt+" Focus"]],[/\bopt\/([\w\.]+)/i],[M,[d,ut+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[M,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[M,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[M,[d,ut+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[M,[d,"MIUI"+nn]],[/fxios\/([\w\.-]+)/i],[M,[d,sn+rt]],[/\bqihoobrowser\/?([\w\.]*)/i],[M,[d,"360"]],[/\b(qq)\/([\w\.]+)/i],[[d,/(.+)/,"$1Browser"],M],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1"+nn],M],[/samsungbrowser\/([\w\.]+)/i],[M,[d,Kr+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[M,[d,Pt+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,Pt+" Mobile"],M],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[d,M],[/(lbbrowser|rekonq)/i],[d],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[M,d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,Zt],M,[T,me]],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat|klarna)[\/ ]([-\w\.]+)/i],[d,M,[T,me]],[/\bgsa\/([\w\.]+) .*safari\//i],[M,[d,"GSA"],[T,me]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[M,[d,"TikTok"],[T,me]],[/\[(linkedin)app\]/i],[d,[T,me]],[/(chromium)[\/ ]([-\w\.]+)/i],[d,M],[/headlesschrome(?:\/([\w\.]+)| )/i],[M,[d,Ha+" Headless"]],[/wv\).+chrome\/([\w\.]+).+edgw\//i],[M,[d,gr+" WebView2"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,Ha+" WebView"],M],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[M,[d,"Android"+nn]],[/chrome\/([\w\.]+) mobile/i],[M,[d,sn+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,M],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[M,[d,sn+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[d,sn+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[M,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[M,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[d,M],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[d,sn+rt],M],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],M],[/(wolvic|librewolf)\/([\w\.]+)/i],[d,M],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[M,[d,rt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[d,[M,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[d,[M,/[^\d\.]+./,m]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[I,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[I,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[I,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[I,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[I,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[I,/ower/,m,Nn]],[/ sun4\w[;\)]/i],[[I,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[I,Nn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[z,[O,Kr],[T,ae]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr]|browser)[-\w]+)/i,/sec-(sgh\w+)/i],[z,[O,Kr],[T,q]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[z,[O,Ze],[T,q]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[z,[O,Ze],[T,ae]],[/(macintosh);/i],[z,[O,Ze]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[z,[O,va],[T,q]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[z,[O,Ut],[T,ae]],[/honor([-\w ]+)[;\)]/i],[z,[O,Ut],[T,q]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[z,[O,un],[T,ae]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[z,[O,un],[T,q]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[z,/_/g," "],[O,ua],[T,ae]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[z,/_/g," "],[O,ua],[T,q]],[/droid.+; (cph2[3-6]\d[13579]|((gm|hd)19|(ac|be|in|kb)20|(d[en]|eb|le|mt)21|ne22)[0-2]\d|p[g-k]\w[1m]10)\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[z,[O,xr],[T,q]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[z,[O,Or],[T,q]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[z,[O,ma,{OnePlus:["203","304","403","404","413","415"],"*":Or}],[T,ae]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[z,[O,"BLU"],[T,q]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[z,[O,"Vivo"],[T,q]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[z,[O,"Realme"],[T,q]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[z,[O,Sn],[T,ae]],[/lenovo[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i],[z,[O,Sn],[T,q]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ]([\w\s]+)(\)| bui)/i,/((?:moto(?! 360)[-\w\(\) ]+|xt\d{3,4}[cgkosw\+]?[-\d]*|nexus 6)(?= bui|\)))/i],[z,[O,Sr],[T,q]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[z,[O,Sr],[T,ae]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[z,[O,nr],[T,ae]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch|webos))(\w+)/i,/\blg-?([\d\w]+) bui/i],[z,[O,nr],[T,q]],[/(nokia) (t[12][01])/i],[O,z,[T,ae]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[z,/_/g," "],[T,q],[O,"Nokia"]],[/(pixel (c|tablet))\b/i],[z,[O,St],[T,ae]],[/droid.+;(?: google)? (g(01[13]a|020[aem]|025[jn]|1b60|1f8f|2ybb|4s1m|576d|5nz6|8hhn|8vou|a02099|c15s|d1yq|e2ae|ec77|gh2x|kv4x|p4bc|pj41|r83y|tt9q|ur25|wvk6)|pixel[\d ]*a?( pro)?( xl)?( fold)?( \(5g\))?)( bui|\))/i],[z,[O,St],[T,q]],[/(google) (pixelbook( go)?)/i],[O,z],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-\w\w\d\d)(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[z,[O,ra],[T,q]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[z,"Xperia Tablet"],[O,ra],[T,ae]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[z,[O,Me],[T,ae]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[z,/(.+)/g,"Fire Phone $1"],[O,Me],[T,q]],[/(playbook);[-\w\),; ]+(rim)/i],[z,O,[T,ae]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[z,[O,Tt],[T,q]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[z,[O,Ft],[T,ae]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[z,[O,Ft],[T,q]],[/(nexus 9)/i],[z,[O,"HTC"],[T,ae]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[O,[z,/_/g," "],[T,q]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[z,[O,"TCL"],[T,ae]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[z,[O,"TCL"],[T,q]],[/(itel) ((\w+))/i],[[O,Nn],z,[T,ma,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[z,[O,"Acer"],[T,ae]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[z,[O,"Meizu"],[T,q]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[z,[O,"Ulefone"],[T,q]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[z,[O,"Energizer"],[T,q]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[z,[O,"Cat"],[T,q]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[z,[O,"Smartfren"],[T,q]],[/droid.+; (a(in)?(0(15|59|6[35])|142)p?)/i],[z,[O,"Nothing"],[T,q]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[z,[O,"Archos"],[T,ae]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[z,[O,"Archos"],[T,q]],[/; (n159v)/i],[z,[O,"HMD"],[T,q]],[/(imo) (tab \w+)/i,/(infinix|tecno) (x1101b?|p904|dp(7c|8d|10a)( pro)?|p70[1-3]a?|p904|t1101)/i],[O,z,[T,ae]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|infinix|lava|oneplus|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(oppo) ?([\w ]+) bui/i],[O,z,[T,q]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[O,z,[T,ae]],[/(surface duo)/i],[z,[O,Ar],[T,ae]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[z,[O,"Fairphone"],[T,q]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[z,[O,Ur],[T,ae]],[/(sprint) (\w+)/i],[O,z,[T,q]],[/(kin\.[onetw]{3})/i],[[z,/\./g," "],[O,Ar],[T,q]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[z,[O,jn],[T,ae]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[z,[O,jn],[T,q]],[/smart-tv.+(samsung)/i],[O,[T,Q]],[/hbbtv.+maple;(\d+)/i],[[z,/^/,"SmartTV"],[O,Kr],[T,Q]],[/(vizio)(?: |.+model\/)(\w+-\w+)/i,/tcast.+(lg)e?. ([-\w]+)/i],[O,z,[T,Q]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[O,nr],[T,Q]],[/(apple) ?tv/i],[O,[z,Ze+" TV"],[T,Q]],[/crkey.*devicetype\/chromecast/i],[[z,Qr+" Third Generation"],[O,St],[T,Q]],[/crkey.*devicetype\/([^/]*)/i],[[z,/^/,"Chromecast "],[O,St],[T,Q]],[/fuchsia.*crkey/i],[[z,Qr+" Nest Hub"],[O,St],[T,Q]],[/crkey/i],[[z,Qr],[O,St],[T,Q]],[/(portaltv)/i],[z,[O,Zt],[T,Q]],[/droid.+aft(\w+)( bui|\))/i],[z,[O,Me],[T,Q]],[/(shield \w+ tv)/i],[z,[O,Ur],[T,Q]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[z,[O,va],[T,Q]],[/(bravia[\w ]+)( bui|\))/i],[z,[O,ra],[T,Q]],[/(mi(tv|box)-?\w+) bui/i],[z,[O,ua],[T,Q]],[/Hbbtv.*(technisat) (.*);/i],[O,z,[T,Q]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[O,/.+\/(\w+)/,"$1",ma,{LG:"lge"}],[z,Kn],[T,Q]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[z,[T,Q]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:|large screen[\w ]+safari)\b/i],[[T,Q]],[/(playstation \w+)/i],[z,[O,ra],[T,$]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[z,[O,Ar],[T,$]],[/(ouya)/i,/(nintendo) (\w+)/i,/(retroid) (pocket ([^\)]+))/i],[O,z,[T,$]],[/droid.+; (shield)( bui|\))/i],[z,[O,Ur],[T,$]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[z,[O,Kr],[T,ve]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[O,z,[T,ve]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[z,[O,Or],[T,ve]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[z,[O,Ze],[T,ve]],[/(opwwe\d{3})/i],[z,[O,xr],[T,ve]],[/(moto 360)/i],[z,[O,Sr],[T,ve]],[/(smartwatch 3)/i],[z,[O,ra],[T,ve]],[/(g watch r)/i],[z,[O,nr],[T,ve]],[/droid.+; (wt63?0{2,3})\)/i],[z,[O,jn],[T,ve]],[/droid.+; (glass) \d/i],[z,[O,St],[T,we]],[/(pico) (4|neo3(?: link|pro)?)/i],[O,z,[T,we]],[/(quest( \d| pro)?s?).+vr/i],[z,[O,Zt],[T,we]],[/mobile vr; rv.+firefox/i],[[T,we]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[O,[T,Re]],[/(aeobc)\b/i],[z,[O,Me],[T,Re]],[/(homepod).+mac os/i],[z,[O,Ze],[T,Re]],[/windows iot/i],[[T,Re]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[z,[T,ma,{mobile:"Mobile",xr:"VR","*":ae}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[T,ae]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[T,q]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[z,[O,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[M,[d,gr+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[d,M],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[M,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,M],[/ladybird\//i],[[d,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[M,d]],os:[[/(windows nt) (6\.[23]); arm/i],[[d,/N/,"R"],[M,ma,La]],[/(windows (?:phone|mobile|iot))(?: os)?[\/ ]?([\d\.]*( se)?)/i,/(windows)[\/ ](1[01]|2000|3\.1|7|8(\.1)?|9[58]|me|server 20\d\d( r2)?|vista|xp)/i],[d,M],[/windows nt ?([\d\.\)]*)(?!.+xbox)/i,/\bwin(?=3| ?9|n)(?:nt| 9x )?([\d\.;]*)/i],[[M,/(;|\))/g,"",ma,La],[d,et]],[/(windows ce)\/?([\d\.]*)/i],[d,M],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[M,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+(haiku|morphos))/i],[[d,"macOS"],[M,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[M,[d,Qr+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[M,[d,Qr+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[M,[d,Qr+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[M,[d,Qr+" Linux"]],[/crkey\/([\d\.]+)/i],[M,[d,Qr]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[M,d],[/(ubuntu) ([\w\.]+) like android/i],[[d,/(.+)/,"$1 Touch"],M],[/(harmonyos)[\/ ]?([\d\.]*)/i,/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen)\w*[-\/\.; ]?([\d\.]*)/i],[d,M],[/\(bb(10);/i],[M,[d,Tt]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[M,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[M,[d,rt+" OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i,/webos(?:[ \/]?|\.tv-20(?=2[2-9]))(\d[\d\.]*)/i],[M,[d,"webOS"]],[/web0s;.+?(?:chr[o0]me|safari)\/(\d+)/i],[[M,ma,{25:"120",24:"108",23:"94",22:"87",6:"79",5:"68",4:"53",3:"38",2:"538",1:"537","*":"TV"}],[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[M,[d,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,"Chrome OS"],M],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/linux.+(mint)[\/\(\) ]?([\w\.]*)/i,/(mageia|vectorlinux|fuchsia|arcaos|arch(?= ?linux))[;l ]([\d\.]*)/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire|knoppix)(?: gnu[\/ ]linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/\b(aix)[; ]([1-9\.]{0,4})/i,/(hurd|linux|morphos)(?: (?:arm|x86|ppc)\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) ?(r\d)?/i],[d,M],[/(sunos) ?([\d\.]*)/i],[[d,"Solaris"],M],[/\b(beos|os\/2|amigaos|openvms|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,M]]},ii=(Mr.call((E={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[A,[d,M,U,T]],[P,[I]],[H,[T,z,O]],[D,[d,M]],[S,[d,M]]]),Mr.call(E.isIgnore,[[A,[M,U]],[D,[M]],[S,[M]]]),Mr.call(E.isIgnoreRgx,[[A,/ ?browser$/i],[S,/ ?os$/i]]),Mr.call(E.toString,[[A,[d,M]],[P,[I]],[H,[O,z]],[D,[d,M]],[S,[d,M]]]),E),Ti=function(pn,Xn){var Wn=ii.init[Xn],dr=ii.isIgnore[Xn]||0,Dn=ii.isIgnoreRgx[Xn]||0,Hn=ii.toString[Xn]||0;function Wr(){Mr.call(this,Wn)}return Wr.prototype.getItem=function(){return pn},Wr.prototype.withClientHints=function(){return Jn?Jn.getHighEntropyValues(Ne).then(function(Er){return pn.setCH(new Fs(Er,!1)).parseCH().get()}):pn.parseCH().get()},Wr.prototype.withFeatureCheck=function(){return pn.detectFeature().get()},Xn!=x&&(Wr.prototype.is=function(Er){var Cr=!1;for(var Fn in this)if(this.hasOwnProperty(Fn)&&!Qt(dr,Fn)&&Nn(Dn?Hr(Dn,this[Fn]):this[Fn])==Nn(Dn?Hr(Dn,Er):Er)){if(Cr=!0,Er!=w)break}else if(Er==w&&Cr){Cr=!Cr;break}return Cr},Wr.prototype.toString=function(){var Er=m;for(var Cr in Hn)typeof this[Hn[Cr]]!==w&&(Er+=(Er?" ":m)+this[Hn[Cr]]);return Er||w}),Jn||(Wr.prototype.then=function(Er){var Cr=this,Fn=function(){for(var Da in Cr)Cr.hasOwnProperty(Da)&&(this[Da]=Cr[Da])};Fn.prototype={is:Wr.prototype.is,toString:Wr.prototype.toString};var Zr=new Fn;return Er(Zr),Zr}),new Wr};function Fs(pn,Xn){if(pn=pn||{},Mr.call(this,Ne),Xn)Mr.call(this,[[Ce,In(pn[He])],[be,In(pn[Te])],[q,/\?1/.test(pn[ln])],[z,cr(pn[Pn])],[Ye,cr(pn[En])],[Qe,cr(pn[rn])],[I,cr(pn[dt])],[Be,In(pn[on])],[Ge,cr(pn[_t])]]);else for(var Wn in pn)this.hasOwnProperty(Wn)&&typeof pn[Wn]!==w&&(this[Wn]=pn[Wn])}function vi(pn,Xn,Wn,dr){return this.get=function(Dn){return Dn?this.data.hasOwnProperty(Dn)?this.data[Dn]:b:this.data},this.set=function(Dn,Hn){return this.data[Dn]=Hn,this},this.setCH=function(Dn){return this.uaCH=Dn,this},this.detectFeature=function(){if(Ln&&Ln.userAgent==this.ua)switch(this.itemType){case A:Ln.brave&&typeof Ln.brave.isBrave==k&&this.set(d,"Brave");break;case H:!this.get(T)&&Jn&&Jn[q]&&this.set(T,q),this.get(z)=="Macintosh"&&Ln&&typeof Ln.standalone!==w&&Ln.maxTouchPoints&&Ln.maxTouchPoints>2&&this.set(z,"iPad").set(T,ae);break;case S:!this.get(d)&&Jn&&Jn[Ye]&&this.set(d,Jn[Ye]);break;case x:var Dn=this.data,Hn=function(Wr){return Dn[Wr].getItem().detectFeature().get()};this.set(A,Hn(A)).set(P,Hn(P)).set(H,Hn(H)).set(D,Hn(D)).set(S,Hn(S))}return this},this.parseUA=function(){return this.itemType!=x&&xa.call(this.data,this.ua,this.rgxMap),this.itemType==A&&this.set(U,Fr(this.get(M))),this},this.parseCH=function(){var Dn=this.uaCH,Hn=this.rgxMap;switch(this.itemType){case A:case D:var Wr,Er=Dn[be]||Dn[Ce];if(Er)for(var Cr in Er){var Fn=Er[Cr].brand||Er[Cr],Zr=Er[Cr].version;this.itemType==A&&!/not.a.brand/i.test(Fn)&&(!Wr||/Chrom/.test(Wr)&&Fn!=Ea||Wr==gr&&/WebView2/.test(Fn))&&(Fn=ma(Fn,Ci),(Wr=this.get(d))&&!/Chrom/.test(Wr)&&/Chrom/.test(Fn)||this.set(d,Fn).set(M,Zr).set(U,Fr(Zr)),Wr=Fn),this.itemType==D&&Fn==Ea&&this.set(M,Zr)}break;case P:var Da=Dn[I];Da&&(Da&&Dn[Ge]=="64"&&(Da+="64"),xa.call(this.data,Da+";",Hn));break;case H:if(Dn[q]&&this.set(T,q),Dn[z]&&(this.set(z,Dn[z]),!this.get(T)||!this.get(O))){var ya={};xa.call(ya,"droid 9; "+Dn[z]+")",Hn),!this.get(T)&&ya.type&&this.set(T,ya.type),!this.get(O)&&ya.vendor&&this.set(O,ya.vendor)}if(Dn[Be]){var Ca;if(typeof Dn[Be]!="string")for(var Ga=0;!Ca&&Ga<Dn[Be].length;)Ca=ma(Dn[Be][Ga++],Va);else Ca=ma(Dn[Be],Va);this.set(T,Ca)}break;case S:var Ya=Dn[Ye];if(Ya){var is=Dn[Qe];Ya==et&&(is=parseInt(Fr(is),10)>=13?"11":"10"),this.set(d,Ya).set(M,is)}this.get(d)==et&&Dn[z]=="Xbox"&&this.set(d,"Xbox").set(M,b);break;case x:var Aa=this.data,us=function(Ps){return Aa[Ps].getItem().setCH(Dn).parseCH().get()};this.set(A,us(A)).set(P,us(P)).set(H,us(H)).set(D,us(D)).set(S,us(S))}return this},Mr.call(this,[["itemType",pn],["ua",Xn],["uaCH",dr],["rgxMap",Wn],["data",Ti(this,pn)]]),this}function ea(pn,Xn,Wn){if(typeof pn===F?(Rt(pn,!0)?(typeof Xn===F&&(Wn=Xn),Xn=pn):(Wn=pn,Xn=b),pn=b):typeof pn!==g||Rt(Xn,!0)||(Wn=Xn,Xn=b),Wn&&typeof Wn.append===k){var dr={};Wn.forEach(function(Cr,Fn){dr[Fn]=Cr}),Wn=dr}if(!(this instanceof ea))return new ea(pn,Xn,Wn).getResult();var Dn=typeof pn===g?pn:Wn&&Wn[_]?Wn[_]:Ln&&Ln.userAgent?Ln.userAgent:m,Hn=new Fs(Wn,!0),Wr=Xn?function(Cr,Fn){var Zr={},Da=Fn;if(!Rt(Fn))for(var ya in Da={},Fn)for(var Ca in Fn[ya])Da[Ca]=Fn[ya][Ca].concat(Da[Ca]?Da[Ca]:[]);for(var Ga in Cr)Zr[Ga]=Da[Ga]&&Da[Ga].length%2==0?Da[Ga].concat(Cr[Ga]):Cr[Ga];return Zr}(xs,Xn):xs,Er=function(Cr){return Cr==x?function(){return new vi(Cr,Dn,Wr,Hn).set("ua",Dn).set(A,this.getBrowser()).set(P,this.getCPU()).set(H,this.getDevice()).set(D,this.getEngine()).set(S,this.getOS()).get()}:function(){return new vi(Cr,Dn,Wr[Cr],Hn).parseUA().get()}};return Mr.call(this,[["getBrowser",Er(A)],["getCPU",Er(P)],["getDevice",Er(H)],["getEngine",Er(D)],["getOS",Er(S)],["getResult",Er(x)],["getUA",function(){return Dn}],["setUA",function(Cr){return Un(Cr)&&(Dn=Cr.length>500?Kn(Cr,500):Cr),this}]]).setUA(Dn),this}ea.VERSION="2.0.4",ea.BROWSER=vr([d,M,U,T]),ea.CPU=vr([I]),ea.DEVICE=vr([z,O,T,$,q,Q,ae,ve,Re]),ea.ENGINE=ea.OS=vr([d,M]),typeof y!==w?(N.exports&&(y=N.exports=ea),y.UAParser=ea):u.amdO?(R=(function(){return ea}).call(y,u,y,N))===b||(N.exports=R):On&&(v.UAParser=ea);var Hs=On&&(v.jQuery||v.Zepto);if(Hs&&!Hs.ua){var Ks=new ea;Hs.ua=Ks.getResult(),Hs.ua.get=function(){return Ks.getUA()},Hs.ua.set=function(pn){Ks.setUA(pn);var Xn=Ks.getResult();for(var Wn in Xn)Hs.ua[Wn]=Xn[Wn]}}})(typeof window=="object"?window:this)},2155:function(N,y,u){var R;N.exports=(R=u(9021),u(7165),R.pad.ZeroPadding={pad:function(v,b){var E=4*b;v.clamp(),v.sigBytes+=E-(v.sigBytes%E||E)},unpad:function(v){var b=v.words,E=v.sigBytes-1;for(E=v.sigBytes-1;E>=0;E--)if(b[E>>>2]>>>24-E%4*8&255){v.sigBytes=E+1;break}}},R.pad.ZeroPadding)},2169:function(N,y,u){var R;N.exports=(R=u(9021),u(7165),R.mode.CFB=function(){var v=R.lib.BlockCipherMode.extend();function b(E,_,m,k){var w,F=this._iv;F?(w=F.slice(0),this._iv=void 0):w=this._prevBlock,k.encryptBlock(w,0);for(var g=0;g<m;g++)E[_+g]^=w[g]}return v.Encryptor=v.extend({processBlock:function(E,_){var m=this._cipher,k=m.blockSize;b.call(this,E,_,k,m),this._prevBlock=E.slice(_,_+k)}}),v.Decryptor=v.extend({processBlock:function(E,_){var m=this._cipher,k=m.blockSize,w=E.slice(_,_+k);b.call(this,E,_,k,m),this._prevBlock=w}}),v}(),R.mode.CFB)},2183:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Chrome111=void 0;const R=u(7363),v=u(2994),b=u(1765),E=u(8046),_=u(5544),m=u(5938),k=u(4256),w=u(4893),F=u(521),g=u(1305),A=u(3303),P=new v.Logger("Chrome111"),H={OS:1024,MIS:1024};class D extends F.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new D}constructor(){super()}get name(){return"Chrome111"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const x=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{x.addTransceiver("audio"),x.addTransceiver("video");const d=await x.createOffer();try{x.close()}catch{}const T=R.parse(d.sdp),O=_.extractRtpCapabilities({sdpObject:T});return k.addNackSupportForOpus(O),O}catch(d){try{x.close()}catch{}throw d}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:H}}run({direction:x,iceParameters:d,iceCandidates:T,dtlsParameters:O,sctpParameters:M,iceServers:I,iceTransportPolicy:U,additionalSettings:z,proprietaryConstraints:$,extendedRtpCapabilities:q}){this.assertNotClosed(),P.debug("run()"),this._direction=x,this._remoteSdp=new g.RemoteSdp({iceParameters:d,iceCandidates:T,dtlsParameters:O,sctpParameters:M}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",q),video:E.getSendingRtpParameters("video",q)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",q),video:E.getSendingRemoteRtpParameters("video",q)},O.role&&O.role!=="auto"&&(this._forcedLocalDtlsRole=O.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:I??[],iceTransportPolicy:U??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...z},$),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ae=>{this.emit("@icecandidateerror",ae)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(x){this.assertNotClosed(),P.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=x,this._pc.setConfiguration(d)}async restartIce(x){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(x),this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const T={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:x,encodings:d,codecOptions:T,codec:O,onRtpSender:M}){if(this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",x.kind,x.id),d&&d.length>1){let Re=1;for(const me of d){const Ce=me.scalabilityMode?(0,A.parse)(me.scalabilityMode).temporalLayers:3;Ce>Re&&(Re=Ce)}d.forEach((me,Ce)=>{me.rid=`r${Ce}`,me.scalabilityMode=`L1T${Re}`})}const I=b.clone(this._sendingRtpParametersByKind[x.kind]);I.codecs=E.reduceCodecs(I.codecs,O);const U=b.clone(this._sendingRemoteRtpParametersByKind[x.kind]);U.codecs=E.reduceCodecs(U.codecs,O);const z=this._remoteSdp.getNextMediaSectionIdx(),$=this._pc.addTransceiver(x,{direction:"sendonly",streams:[this._sendStream],sendEncodings:d});M&&M($.sender);const q=await this._pc.createOffer();let ae=R.parse(q.sdp);ae.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ae}),P.debug("send() | calling pc.setLocalDescription() [offer:%o]",q),await this._pc.setLocalDescription(q);const Q=$.mid;I.mid=Q,ae=R.parse(this._pc.localDescription.sdp);const ve=ae.media[z.idx];if(I.rtcp.cname=_.getCname({offerMediaObject:ve}),d)if(d.length===1){const Re=m.getRtpEncodings({offerMediaObject:ve});Object.assign(Re[0],d[0]),I.encodings=Re}else I.encodings=d;else I.encodings=m.getRtpEncodings({offerMediaObject:ve});this._remoteSdp.send({offerMediaObject:ve,reuseMid:z.reuseMid,offerRtpParameters:I,answerRtpParameters:U,codecOptions:T});const we={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",we),await this._pc.setRemoteDescription(we),this._mapMidTransceiver.set(Q,$),{localId:Q,rtpParameters:I,rtpSender:$.sender}}async stopSending(x){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",x),this._closed)return;const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");if(d.sender.replaceTrack(null),this._pc.removeTrack(d.sender),this._remoteSdp.closeMediaSection(d.mid))try{d.stop()}catch{}const T=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._mapMidTransceiver.delete(x)}async pauseSending(x){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",x);const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="inactive",this._remoteSdp.pauseMediaSection(x);const T=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async resumeSending(x){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",x);const d=this._mapMidTransceiver.get(x);if(this._remoteSdp.resumeSendingMediaSection(x),!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="sendonly";const T=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async replaceTrack(x,d){this.assertNotClosed(),this.assertSendDirection(),d?P.debug("replaceTrack() [localId:%s, track.id:%s]",x,d.id):P.debug("replaceTrack() [localId:%s, no track]",x);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");await T.sender.replaceTrack(d)}async setMaxSpatialLayer(x,d){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",x,d);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");const O=T.sender.getParameters();O.encodings.forEach((U,z)=>{U.active=z<=d}),await T.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(x,O.encodings);const M=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async setRtpEncodingParameters(x,d){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",x,d);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");const O=T.sender.getParameters();O.encodings.forEach((U,z)=>{O.encodings[z]={...U,...d}}),await T.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(x,O.encodings);const M=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async getSenderStats(x){this.assertNotClosed(),this.assertSendDirection();const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.sender.getStats()}async sendDataChannel({ordered:x,maxPacketLifeTime:d,maxRetransmits:T,label:O,protocol:M}){this.assertNotClosed(),this.assertSendDirection();const I={negotiated:!0,id:this._nextSendSctpStreamId,ordered:x,maxPacketLifeTime:d,maxRetransmits:T,protocol:M};P.debug("sendDataChannel() [options:%o]",I);const U=this._pc.createDataChannel(O,I);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%H.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),$=R.parse(z.sdp),q=$.media.find(Q=>Q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:q});const ae={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setRemoteDescription(ae),this._hasDataChannelMediaSection=!0}return{dataChannel:U,sctpStreamParameters:{streamId:I.id,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits}}}async receive(x){this.assertNotClosed(),this.assertRecvDirection();const d=[],T=new Map;for(const U of x){const{trackId:z,kind:$,rtpParameters:q,streamId:ae}=U;P.debug("receive() [trackId:%s, kind:%s]",z,$);const Q=q.mid??String(this._mapMidTransceiver.size);T.set(z,Q),this._remoteSdp.receive({mid:Q,kind:$,offerRtpParameters:q,streamId:ae??q.rtcp.cname,trackId:z})}const O={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);for(const U of x){const{trackId:z,onRtpReceiver:$}=U;if($){const q=T.get(z),ae=this._pc.getTransceivers().find(Q=>Q.mid===q);if(!ae)throw new Error("transceiver not found");$(ae.receiver)}}let M=await this._pc.createAnswer();const I=R.parse(M.sdp);for(const U of x){const{trackId:z,rtpParameters:$}=U,q=T.get(z),ae=I.media.find(Q=>String(Q.mid)===q);_.applyCodecParameters({offerRtpParameters:$,answerMediaObject:ae})}M={type:"answer",sdp:R.write(I)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",M),await this._pc.setLocalDescription(M);for(const U of x){const{trackId:z}=U,$=T.get(z),q=this._pc.getTransceivers().find(ae=>ae.mid===$);if(!q)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set($,q),d.push({localId:$,track:q.receiver.track,rtpReceiver:q.receiver})}return d}async stopReceiving(x){if(this.assertRecvDirection(),this._closed)return;for(const O of x){P.debug("stopReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(M.mid)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T);for(const O of x)this._mapMidTransceiver.delete(O)}async pauseReceiving(x){this.assertNotClosed(),this.assertRecvDirection();for(const O of x){P.debug("pauseReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="inactive",this._remoteSdp.pauseMediaSection(O)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async resumeReceiving(x){this.assertNotClosed(),this.assertRecvDirection();for(const O of x){P.debug("resumeReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(O)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async getReceiverStats(x){this.assertNotClosed(),this.assertRecvDirection();const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:x,label:d,protocol:T}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:O,ordered:M,maxPacketLifeTime:I,maxRetransmits:U}=x,z={negotiated:!0,id:O,ordered:M,maxPacketLifeTime:I,maxRetransmits:U,protocol:T};P.debug("receiveDataChannel() [options:%o]",z);const $=this._pc.createDataChannel(d,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const q={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",q),await this._pc.setRemoteDescription(q);const ae=await this._pc.createAnswer();if(!this._transportReady){const Q=R.parse(ae.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Q})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setLocalDescription(ae),this._hasDataChannelMediaSection=!0}return{dataChannel:$}}async setupTransport({localDtlsRole:x,localSdpObject:d}){d||(d=R.parse(this._pc.localDescription.sdp));const T=_.extractDtlsParameters({sdpObject:d});T.role=x,this._remoteSdp.updateDtlsRole(x==="client"?"server":"client"),await new Promise((O,M)=>{this.safeEmit("@connect",{dtlsParameters:T},O,M)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new w.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.Chrome111=D},2196:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},2211:N=>{N.exports=function(y){var u,R,v="",b=(y=function(_){return _||(_={}),{length:_.length||8,numeric:typeof _.numeric!="boolean"||_.numeric,letters:typeof _.letters!="boolean"||_.letters,special:typeof _.special=="boolean"&&_.special,exclude:Array.isArray(_.exclude)?_.exclude:[]}}(y)).length,E=(y.exclude,function(_){var m="";_.numeric&&(m+="0123456789"),_.letters&&(m+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),_.special&&(m+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var k=0;k<=_.exclude.length;k++)m=m.replace(_.exclude[k],"");return m}(y));for(u=1;u<=b;u++)v+=E.substring(R=Math.floor(Math.random()*E.length),R+1);return v}},2215:(N,y,u)=>{var R,v;(function(b){(v=typeof(R=b)=="function"?R.call(y,u,y,N):R)===void 0||(N.exports=v),N.exports=b()})(function(){function b(){for(var _=0,m={};_<arguments.length;_++){var k=arguments[_];for(var w in k)m[w]=k[w]}return m}function E(_){return _.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function _(m){function k(){}function w(g,A,P){if(typeof document<"u"){typeof(P=b({path:"/"},k.defaults,P)).expires=="number"&&(P.expires=new Date(1*new Date+864e5*P.expires)),P.expires=P.expires?P.expires.toUTCString():"";try{var H=JSON.stringify(A);/^[\{\[]/.test(H)&&(A=H)}catch{}A=m.write?m.write(A,g):encodeURIComponent(String(A)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),g=encodeURIComponent(String(g)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var D="";for(var S in P)P[S]&&(D+="; "+S,P[S]!==!0&&(D+="="+P[S].split(";")[0]));return document.cookie=g+"="+A+D}}function F(g,A){if(typeof document<"u"){for(var P={},H=document.cookie?document.cookie.split("; "):[],D=0;D<H.length;D++){var S=H[D].split("="),x=S.slice(1).join("=");A||x.charAt(0)!=='"'||(x=x.slice(1,-1));try{var d=E(S[0]);if(x=(m.read||m)(x,d)||E(x),A)try{x=JSON.parse(x)}catch{}if(P[d]=x,g===d)break}catch{}}return g?P[g]:P}}return k.set=w,k.get=function(g){return F(g,!1)},k.getJSON=function(g){return F(g,!0)},k.remove=function(g,A){w(g,"",b(A,{expires:-1}))},k.defaults={},k.withConverter=_,k}(function(){})})},2284:(N,y,u)=>{function R(v){return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},R(v)}u.d(y,{A:()=>R})},2291:(N,y)=>{let u;Object.defineProperty(y,"__esModule",{value:!0});const R=new Uint8Array(16);y.default=function(){if(!u){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");u=crypto.getRandomValues.bind(crypto)}return u(R)}},2292:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Firefox120=void 0;const R=u(7363),v=u(2994),b=u(4893),E=u(1765),_=u(8046),m=u(5544),k=u(5938),w=u(521),F=u(1305),g=u(3303),A=new v.Logger("Firefox120"),P={OS:16,MIS:2048};class H extends w.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new H}constructor(){super()}get name(){return"Firefox120"}close(){if(A.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){A.debug("getNativeRtpCapabilities()");const S=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),x=document.createElement("canvas");x.getContext("2d");const d=x.captureStream().getVideoTracks()[0];try{S.addTransceiver("audio",{direction:"sendrecv"}),S.addTransceiver(d,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const T=await S.createOffer();try{x.remove()}catch{}try{d.stop()}catch{}try{S.close()}catch{}const O=R.parse(T.sdp);return m.extractRtpCapabilities({sdpObject:O})}catch(T){try{x.remove()}catch{}try{d.stop()}catch{}try{S.close()}catch{}throw T}}async getNativeSctpCapabilities(){return A.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:S,iceParameters:x,iceCandidates:d,dtlsParameters:T,sctpParameters:O,iceServers:M,iceTransportPolicy:I,additionalSettings:U,proprietaryConstraints:z,extendedRtpCapabilities:$}){this.assertNotClosed(),A.debug("run()"),this._direction=S,this._remoteSdp=new F.RemoteSdp({iceParameters:x,iceCandidates:d,dtlsParameters:T,sctpParameters:O}),this._sendingRtpParametersByKind={audio:_.getSendingRtpParameters("audio",$),video:_.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:_.getSendingRemoteRtpParameters("audio",$),video:_.getSendingRemoteRtpParameters("video",$)},this._pc=new RTCPeerConnection({iceServers:M??[],iceTransportPolicy:I??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...U},z),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",q=>{this.emit("@icecandidateerror",q)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(A.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(S){throw this.assertNotClosed(),new b.UnsupportedError("not supported")}async restartIce(S){if(this.assertNotClosed(),A.debug("restartIce()"),this._remoteSdp.updateIceParameters(S),this._transportReady)if(this._direction==="send"){const x=await this._pc.createOffer({iceRestart:!0});A.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const d={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d)}else{const x={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const d=await this._pc.createAnswer();A.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:S,encodings:x,codecOptions:d,codec:T,onRtpSender:O}){this.assertNotClosed(),this.assertSendDirection(),A.debug("send() [kind:%s, track.id:%s]",S.kind,S.id),x&&x.length>1&&x.forEach((we,Re)=>{we.rid=`r${Re}`});const M=E.clone(this._sendingRtpParametersByKind[S.kind]);M.codecs=_.reduceCodecs(M.codecs,T);const I=E.clone(this._sendingRemoteRtpParametersByKind[S.kind]);I.codecs=_.reduceCodecs(I.codecs,T);const U=this._pc.addTransceiver(S,{direction:"sendonly",streams:[this._sendStream],sendEncodings:x});O&&O(U.sender);const z=await this._pc.createOffer();let $=R.parse(z.sdp);$.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:$});const q=(0,g.parse)((x??[{}])[0].scalabilityMode);A.debug("send() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z);const ae=U.mid;M.mid=ae,$=R.parse(this._pc.localDescription.sdp);const Q=$.media[$.media.length-1];if(M.rtcp.cname=m.getCname({offerMediaObject:Q}),x)if(x.length===1){const we=k.getRtpEncodings({offerMediaObject:Q});Object.assign(we[0],x[0]),M.encodings=we}else M.encodings=x;else M.encodings=k.getRtpEncodings({offerMediaObject:Q});if(M.encodings.length>1&&(M.codecs[0].mimeType.toLowerCase()==="video/vp8"||M.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const we of M.encodings)we.scalabilityMode?we.scalabilityMode=`L1T${q.temporalLayers}`:we.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Q,offerRtpParameters:M,answerRtpParameters:I,codecOptions:d});const ve={type:"answer",sdp:this._remoteSdp.getSdp()};return A.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ve),await this._pc.setRemoteDescription(ve),this._mapMidTransceiver.set(ae,U),{localId:ae,rtpParameters:M,rtpSender:U.sender}}async stopSending(S){if(this.assertSendDirection(),A.debug("stopSending() [localId:%s]",S),this._closed)return;const x=this._mapMidTransceiver.get(S);if(!x)throw new Error("associated transceiver not found");x.sender.replaceTrack(null),this._pc.removeTrack(x.sender),this._remoteSdp.disableMediaSection(x.mid);const d=await this._pc.createOffer();A.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const T={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T),this._mapMidTransceiver.delete(S)}async pauseSending(S){this.assertNotClosed(),this.assertSendDirection(),A.debug("pauseSending() [localId:%s]",S);const x=this._mapMidTransceiver.get(S);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(S);const d=await this._pc.createOffer();A.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const T={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}async resumeSending(S){this.assertNotClosed(),this.assertSendDirection(),A.debug("resumeSending() [localId:%s]",S);const x=this._mapMidTransceiver.get(S);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(S);const d=await this._pc.createOffer();A.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const T={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}async replaceTrack(S,x){this.assertNotClosed(),this.assertSendDirection(),x?A.debug("replaceTrack() [localId:%s, track.id:%s]",S,x.id):A.debug("replaceTrack() [localId:%s, no track]",S);const d=this._mapMidTransceiver.get(S);if(!d)throw new Error("associated RTCRtpTransceiver not found");await d.sender.replaceTrack(x)}async setMaxSpatialLayer(S,x){this.assertNotClosed(),this.assertSendDirection(),A.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",S,x);const d=this._mapMidTransceiver.get(S);if(!d)throw new Error("associated transceiver not found");const T=d.sender.getParameters();T.encodings.forEach((I,U)=>{I.active=U<=x}),await d.sender.setParameters(T),this._remoteSdp.muxMediaSectionSimulcast(S,T.encodings);const O=await this._pc.createOffer();A.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const M={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async setRtpEncodingParameters(S,x){this.assertNotClosed(),this.assertSendDirection(),A.debug("setRtpEncodingParameters() [localId:%s, params:%o]",S,x);const d=this._mapMidTransceiver.get(S);if(!d)throw new Error("associated RTCRtpTransceiver not found");const T=d.sender.getParameters();T.encodings.forEach((I,U)=>{T.encodings[U]={...I,...x}}),await d.sender.setParameters(T),this._remoteSdp.muxMediaSectionSimulcast(S,T.encodings);const O=await this._pc.createOffer();A.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const M={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async getSenderStats(S){this.assertNotClosed(),this.assertSendDirection();const x=this._mapMidTransceiver.get(S);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.sender.getStats()}async sendDataChannel({ordered:S,maxPacketLifeTime:x,maxRetransmits:d,label:T,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const M={negotiated:!0,id:this._nextSendSctpStreamId,ordered:S,maxPacketLifeTime:x,maxRetransmits:d,protocol:O};A.debug("sendDataChannel() [options:%o]",M);const I=this._pc.createDataChannel(T,M);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const U=await this._pc.createOffer(),z=R.parse(U.sdp),$=z.media.find(ae=>ae.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:z}),A.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",U),await this._pc.setLocalDescription(U),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const q={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._hasDataChannelMediaSection=!0}return{dataChannel:I,sctpStreamParameters:{streamId:M.id,ordered:M.ordered,maxPacketLifeTime:M.maxPacketLifeTime,maxRetransmits:M.maxRetransmits}}}async receive(S){this.assertNotClosed(),this.assertRecvDirection();const x=[],d=new Map;for(const I of S){const{trackId:U,kind:z,rtpParameters:$,streamId:q}=I;A.debug("receive() [trackId:%s, kind:%s]",U,z);const ae=$.mid??String(this._mapMidTransceiver.size);d.set(U,ae),this._remoteSdp.receive({mid:ae,kind:z,offerRtpParameters:$,streamId:q??$.rtcp.cname,trackId:U})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);for(const I of S){const{trackId:U,onRtpReceiver:z}=I;if(z){const $=d.get(U),q=this._pc.getTransceivers().find(ae=>ae.mid===$);if(!q)throw new Error("transceiver not found");z(q.receiver)}}let O=await this._pc.createAnswer();const M=R.parse(O.sdp);for(const I of S){const{trackId:U,rtpParameters:z}=I,$=d.get(U),q=M.media.find(ae=>String(ae.mid)===$);m.applyCodecParameters({offerRtpParameters:z,answerMediaObject:q}),O={type:"answer",sdp:R.write(M)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:M}),A.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const I of S){const{trackId:U}=I,z=d.get(U),$=this._pc.getTransceivers().find(q=>q.mid===z);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(z,$),x.push({localId:z,track:$.receiver.track,rtpReceiver:$.receiver})}return x}async stopReceiving(S){if(this.assertRecvDirection(),this._closed)return;for(const T of S){A.debug("stopReceiving() [localId:%s]",T);const O=this._mapMidTransceiver.get(T);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const d=await this._pc.createAnswer();A.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d);for(const T of S)this._mapMidTransceiver.delete(T)}async pauseReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const T of S){A.debug("pauseReceiving() [localId:%s]",T);const O=this._mapMidTransceiver.get(T);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(T)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const d=await this._pc.createAnswer();A.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async resumeReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const T of S){A.debug("resumeReceiving() [localId:%s]",T);const O=this._mapMidTransceiver.get(T);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(T)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const d=await this._pc.createAnswer();A.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async getReceiverStats(S){this.assertRecvDirection();const x=this._mapMidTransceiver.get(S);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:S,label:x,protocol:d}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:T,ordered:O,maxPacketLifeTime:M,maxRetransmits:I}=S,U={negotiated:!0,id:T,ordered:O,maxPacketLifeTime:M,maxRetransmits:I,protocol:d};A.debug("receiveDataChannel() [options:%o]",U);const z=this._pc.createDataChannel(x,U);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const q=await this._pc.createAnswer();if(!this._transportReady){const ae=R.parse(q.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:ae})}A.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setLocalDescription(q),this._hasDataChannelMediaSection=!0}return{dataChannel:z}}async setupTransport({localDtlsRole:S,localSdpObject:x}){x||(x=R.parse(this._pc.localDescription.sdp));const d=m.extractDtlsParameters({sdpObject:x});d.role=S,this._remoteSdp.updateDtlsRole(S==="client"?"server":"client"),await new Promise((T,O)=>{this.safeEmit("@connect",{dtlsParameters:d},T,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new b.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.Firefox120=H},2696:function(N,y,u){var R;N.exports=(R=u(9021),u(754),u(4636),u(9506),u(7165),function(){var v=R,b=v.lib.StreamCipher,E=v.algo,_=[],m=[],k=[],w=E.RabbitLegacy=b.extend({_doReset:function(){var g=this._key.words,A=this.cfg.iv,P=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],H=this._C=[g[2]<<16|g[2]>>>16,4294901760&g[0]|65535&g[1],g[3]<<16|g[3]>>>16,4294901760&g[1]|65535&g[2],g[0]<<16|g[0]>>>16,4294901760&g[2]|65535&g[3],g[1]<<16|g[1]>>>16,4294901760&g[3]|65535&g[0]];this._b=0;for(var D=0;D<4;D++)F.call(this);for(D=0;D<8;D++)H[D]^=P[D+4&7];if(A){var S=A.words,x=S[0],d=S[1],T=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),O=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),M=T>>>16|4294901760&O,I=O<<16|65535&T;for(H[0]^=T,H[1]^=M,H[2]^=O,H[3]^=I,H[4]^=T,H[5]^=M,H[6]^=O,H[7]^=I,D=0;D<4;D++)F.call(this)}},_doProcessBlock:function(g,A){var P=this._X;F.call(this),_[0]=P[0]^P[5]>>>16^P[3]<<16,_[1]=P[2]^P[7]>>>16^P[5]<<16,_[2]=P[4]^P[1]>>>16^P[7]<<16,_[3]=P[6]^P[3]>>>16^P[1]<<16;for(var H=0;H<4;H++)_[H]=16711935&(_[H]<<8|_[H]>>>24)|4278255360&(_[H]<<24|_[H]>>>8),g[A+H]^=_[H]},blockSize:4,ivSize:2});function F(){for(var g=this._X,A=this._C,P=0;P<8;P++)m[P]=A[P];for(A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<m[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<m[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<m[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<m[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<m[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<m[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<m[6]>>>0?1:0)|0,this._b=A[7]>>>0<m[7]>>>0?1:0,P=0;P<8;P++){var H=g[P]+A[P],D=65535&H,S=H>>>16,x=((D*D>>>17)+D*S>>>15)+S*S,d=((4294901760&H)*H|0)+((65535&H)*H|0);k[P]=x^d}g[0]=k[0]+(k[7]<<16|k[7]>>>16)+(k[6]<<16|k[6]>>>16)|0,g[1]=k[1]+(k[0]<<8|k[0]>>>24)+k[7]|0,g[2]=k[2]+(k[1]<<16|k[1]>>>16)+(k[0]<<16|k[0]>>>16)|0,g[3]=k[3]+(k[2]<<8|k[2]>>>24)+k[1]|0,g[4]=k[4]+(k[3]<<16|k[3]>>>16)+(k[2]<<16|k[2]>>>16)|0,g[5]=k[5]+(k[4]<<8|k[4]>>>24)+k[3]|0,g[6]=k[6]+(k[5]<<16|k[5]>>>16)+(k[4]<<16|k[4]>>>16)|0,g[7]=k[7]+(k[6]<<8|k[6]>>>24)+k[5]|0}v.RabbitLegacy=b._createHelper(w)}(),R.RabbitLegacy)},2731:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.FakeHandler=void 0;const R=u(5328),v=u(3953),b=u(2994),E=u(1765),_=u(8046),m=u(4893),k=u(521),w=new b.Logger("FakeHandler");class F extends v.EnhancedEventEmitter{id;ordered;maxPacketLifeTime;maxRetransmits;label;protocol;constructor({id:P,ordered:H,maxPacketLifeTime:D,maxRetransmits:S,label:x,protocol:d}){super(),this.id=P,this.ordered=H,this.maxPacketLifeTime=D,this.maxRetransmits=S,this.label=x,this.protocol=d}close(){this.safeEmit("close"),this.emit("@close")}send(P){this.safeEmit("message",P)}addEventListener(P,H){this.on(P,H)}}class g extends k.HandlerInterface{_closed=!1;fakeParameters;_rtpParametersByKind;_cname=`CNAME-${E.generateRandomNumber()}`;_transportReady=!1;_nextLocalId=1;_tracks=new Map;_nextSctpStreamId=0;static createFactory(P){return()=>new g(P)}constructor(P){super(),this.fakeParameters=P}get name(){return"FakeHandler"}close(){w.debug("close()"),this._closed||(this._closed=!0)}setIceGatheringState(P){this.emit("@icegatheringstatechange",P)}setConnectionState(P){this.emit("@connectionstatechange",P)}async getNativeRtpCapabilities(){return w.debug("getNativeRtpCapabilities()"),this.fakeParameters.generateNativeRtpCapabilities()}async getNativeSctpCapabilities(){return w.debug("getNativeSctpCapabilities()"),this.fakeParameters.generateNativeSctpCapabilities()}run({direction:P,iceParameters:H,iceCandidates:D,dtlsParameters:S,sctpParameters:x,iceServers:d,iceTransportPolicy:T,proprietaryConstraints:O,extendedRtpCapabilities:M}){this.assertNotClosed(),w.debug("run()"),this._rtpParametersByKind={audio:_.getSendingRtpParameters("audio",M),video:_.getSendingRtpParameters("video",M)}}async updateIceServers(P){this.assertNotClosed(),w.debug("updateIceServers()")}async restartIce(P){this.assertNotClosed(),w.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:P,encodings:H,codecOptions:D,codec:S}){this.assertNotClosed(),w.debug("send() [kind:%s, track.id:%s]",P.kind,P.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const x=E.clone(this._rtpParametersByKind[P.kind]),d=x.codecs.some(O=>/.+\/rtx$/i.test(O.mimeType));x.mid=`mid-${E.generateRandomNumber()}`,H||(H=[{}]);for(const O of H)O.ssrc=E.generateRandomNumber(),d&&(O.rtx={ssrc:E.generateRandomNumber()});x.encodings=H,x.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const T=this._nextLocalId++;return this._tracks.set(T,P),{localId:String(T),rtpParameters:x}}async stopSending(P){if(w.debug("stopSending() [localId:%s]",P),!this._closed){if(!this._tracks.has(Number(P)))throw new Error("local track not found");this._tracks.delete(Number(P))}}async pauseSending(P){this.assertNotClosed()}async resumeSending(P){this.assertNotClosed()}async replaceTrack(P,H){this.assertNotClosed(),H?w.debug("replaceTrack() [localId:%s, track.id:%s]",P,H.id):w.debug("replaceTrack() [localId:%s, no track]",P),this._tracks.delete(Number(P)),this._tracks.set(Number(P),H)}async setMaxSpatialLayer(P,H){this.assertNotClosed(),w.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",P,H)}async setRtpEncodingParameters(P,H){this.assertNotClosed(),w.debug("setRtpEncodingParameters() [localId:%s, params:%o]",P,H)}async getSenderStats(P){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:P,maxPacketLifeTime:H,maxRetransmits:D,label:S,protocol:x}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),w.debug("sendDataChannel()"),{dataChannel:new F({id:this._nextSctpStreamId++,ordered:P,maxPacketLifeTime:H,maxRetransmits:D,label:S,protocol:x}),sctpStreamParameters:{streamId:this._nextSctpStreamId,ordered:P,maxPacketLifeTime:H,maxRetransmits:D}}}async receive(P){this.assertNotClosed();const H=[];for(const D of P){const{trackId:S,kind:x}=D;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),w.debug("receive() [trackId:%s, kind:%s]",S,x);const d=this._nextLocalId++,T=new R.FakeMediaStreamTrack({kind:x});this._tracks.set(d,T),H.push({localId:String(d),track:T})}return H}async stopReceiving(P){if(!this._closed)for(const H of P)w.debug("stopReceiving() [localId:%s]",H),this._tracks.delete(Number(H))}async pauseReceiving(P){this.assertNotClosed()}async resumeReceiving(P){this.assertNotClosed()}async getReceiverStats(P){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:P,label:H,protocol:D}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),w.debug("receiveDataChannel()"),{dataChannel:new F({id:P.streamId,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits,label:H,protocol:D})}}async setupTransport({localDtlsRole:P,localSdpObject:H}){const D=E.clone(this.fakeParameters.generateLocalDtlsParameters());P&&(D.role=P),this.emit("@connectionstatechange","connecting"),await new Promise((S,x)=>this.emit("@connect",{dtlsParameters:D},S,x)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new m.InvalidStateError("method called in a closed handler")}}y.FakeHandler=g},2770:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0});const R=u(9746);y.default=function(v){if(!(0,R.default)(v))throw TypeError("Invalid UUID");return parseInt(v.slice(14,15),16)}},2829:(N,y)=>{function u(v,b,E,_){switch(v){case 0:return b&E^~b&_;case 1:case 3:return b^E^_;case 2:return b&E^b&_^E&_}}function R(v,b){return v<<b|v>>>32-b}Object.defineProperty(y,"__esModule",{value:!0}),y.default=function(v){const b=[1518500249,1859775393,2400959708,3395469782],E=[1732584193,4023233417,2562383102,271733878,3285377520],_=new Uint8Array(v.length+1);_.set(v),_[v.length]=128;const m=(v=_).length/4+2,k=Math.ceil(m/16),w=new Array(k);for(let F=0;F<k;++F){const g=new Uint32Array(16);for(let A=0;A<16;++A)g[A]=v[64*F+4*A]<<24|v[64*F+4*A+1]<<16|v[64*F+4*A+2]<<8|v[64*F+4*A+3];w[F]=g}w[k-1][14]=8*(v.length-1)/Math.pow(2,32),w[k-1][14]=Math.floor(w[k-1][14]),w[k-1][15]=8*(v.length-1)&4294967295;for(let F=0;F<k;++F){const g=new Uint32Array(80);for(let x=0;x<16;++x)g[x]=w[F][x];for(let x=16;x<80;++x)g[x]=R(g[x-3]^g[x-8]^g[x-14]^g[x-16],1);let A=E[0],P=E[1],H=E[2],D=E[3],S=E[4];for(let x=0;x<80;++x){const d=Math.floor(x/20),T=R(A,5)+u(d,P,H,D)+S+b[d]+g[x]>>>0;S=D,D=H,H=R(P,30)>>>0,P=A,A=T}E[0]=E[0]+A>>>0,E[1]=E[1]+P>>>0,E[2]=E[2]+H>>>0,E[3]=E[3]+D>>>0,E[4]=E[4]+S>>>0}return Uint8Array.of(E[0]>>24,E[0]>>16,E[0]>>8,E[0],E[1]>>24,E[1]>>16,E[1]>>8,E[1],E[2]>>24,E[2]>>16,E[2]>>8,E[2],E[3]>>24,E[3]>>16,E[3]>>8,E[3],E[4]>>24,E[4]>>16,E[4]>>8,E[4])}},2901:(N,y,u)=>{u.d(y,{A:()=>b});var R=u(816);function v(E,_){for(var m=0;m<_.length;m++){var k=_[m];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(E,(0,R.A)(k.key),k)}}function b(E,_,m){return _&&v(E.prototype,_),m&&v(E,m),Object.defineProperty(E,"prototype",{writable:!1}),E}},2988:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.URL=y.DNS=y.stringToBytes=void 0;const R=u(1797),v=u(6011);function b(E){E=unescape(encodeURIComponent(E));const _=new Uint8Array(E.length);for(let m=0;m<E.length;++m)_[m]=E.charCodeAt(m);return _}y.stringToBytes=b,y.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",y.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",y.default=function(E,_,m,k,w,F){const g=typeof m=="string"?b(m):m,A=typeof k=="string"?(0,R.default)(k):k;if(typeof k=="string"&&(k=(0,R.default)(k)),k?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let P=new Uint8Array(16+g.length);if(P.set(A),P.set(g,A.length),P=_(P),P[6]=15&P[6]|E,P[8]=63&P[8]|128,w){F=F||0;for(let H=0;H<16;++H)w[F+H]=P[H];return w}return(0,v.unsafeStringify)(P)}},2994:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Logger=void 0;const R=u(7833),v="mediasoup-client";y.Logger=class{_debug;_warn;_error;constructor(b){b?(this._debug=(0,R.default)(`${v}:${b}`),this._warn=(0,R.default)(`${v}:WARN:${b}`),this._error=(0,R.default)(`${v}:ERROR:${b}`)):(this._debug=(0,R.default)(v),this._warn=(0,R.default)(`${v}:WARN`),this._error=(0,R.default)(`${v}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3009:function(N,y,u){var R;N.exports=(R=u(9021),function(v){var b=R,E=b.lib,_=E.WordArray,m=E.Hasher,k=b.algo,w=[],F=[];(function(){function P(x){for(var d=v.sqrt(x),T=2;T<=d;T++)if(!(x%T))return!1;return!0}function H(x){return 4294967296*(x-(0|x))|0}for(var D=2,S=0;S<64;)P(D)&&(S<8&&(w[S]=H(v.pow(D,.5))),F[S]=H(v.pow(D,.3333333333333333)),S++),D++})();var g=[],A=k.SHA256=m.extend({_doReset:function(){this._hash=new _.init(w.slice(0))},_doProcessBlock:function(P,H){for(var D=this._hash.words,S=D[0],x=D[1],d=D[2],T=D[3],O=D[4],M=D[5],I=D[6],U=D[7],z=0;z<64;z++){if(z<16)g[z]=0|P[H+z];else{var $=g[z-15],q=($<<25|$>>>7)^($<<14|$>>>18)^$>>>3,ae=g[z-2],Q=(ae<<15|ae>>>17)^(ae<<13|ae>>>19)^ae>>>10;g[z]=q+g[z-7]+Q+g[z-16]}var ve=S&x^S&d^x&d,we=(S<<30|S>>>2)^(S<<19|S>>>13)^(S<<10|S>>>22),Re=U+((O<<26|O>>>6)^(O<<21|O>>>11)^(O<<7|O>>>25))+(O&M^~O&I)+F[z]+g[z];U=I,I=M,M=O,O=T+Re|0,T=d,d=x,x=S,S=Re+(we+ve)|0}D[0]=D[0]+S|0,D[1]=D[1]+x|0,D[2]=D[2]+d|0,D[3]=D[3]+T|0,D[4]=D[4]+O|0,D[5]=D[5]+M|0,D[6]=D[6]+I|0,D[7]=D[7]+U|0},_doFinalize:function(){var P=this._data,H=P.words,D=8*this._nDataBytes,S=8*P.sigBytes;return H[S>>>5]|=128<<24-S%32,H[14+(S+64>>>9<<4)]=v.floor(D/4294967296),H[15+(S+64>>>9<<4)]=D,P.sigBytes=4*H.length,this._process(),this._hash},clone:function(){var P=m.clone.call(this);return P._hash=this._hash.clone(),P}});b.SHA256=m._createHelper(A),b.HmacSHA256=m._createHmacHelper(A)}(Math),R.SHA256)},3029:(N,y,u)=>{function R(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}u.d(y,{A:()=>R})},3128:function(N,y,u){var R;N.exports=(R=u(9021),u(754),u(4636),u(9506),u(7165),function(){var v=R,b=v.lib.BlockCipher,E=v.algo;const _=16,m=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],k=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var w={pbox:[],sbox:[]};function F(D,S){let x=S>>24&255,d=S>>16&255,T=S>>8&255,O=255&S,M=D.sbox[0][x]+D.sbox[1][d];return M^=D.sbox[2][T],M+=D.sbox[3][O],M}function g(D,S,x){let d,T=S,O=x;for(let M=0;M<_;++M)T^=D.pbox[M],O=F(D,T)^O,d=T,T=O,O=d;return d=T,T=O,O=d,O^=D.pbox[_],T^=D.pbox[_+1],{left:T,right:O}}function A(D,S,x){let d,T=S,O=x;for(let M=_+1;M>1;--M)T^=D.pbox[M],O=F(D,T)^O,d=T,T=O,O=d;return d=T,T=O,O=d,O^=D.pbox[1],T^=D.pbox[0],{left:T,right:O}}function P(D,S,x){for(let I=0;I<4;I++){D.sbox[I]=[];for(let U=0;U<256;U++)D.sbox[I][U]=k[I][U]}let d=0;for(let I=0;I<_+2;I++)D.pbox[I]=m[I]^S[d],d++,d>=x&&(d=0);let T=0,O=0,M=0;for(let I=0;I<_+2;I+=2)M=g(D,T,O),T=M.left,O=M.right,D.pbox[I]=T,D.pbox[I+1]=O;for(let I=0;I<4;I++)for(let U=0;U<256;U+=2)M=g(D,T,O),T=M.left,O=M.right,D.sbox[I][U]=T,D.sbox[I][U+1]=O;return!0}var H=E.Blowfish=b.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var D=this._keyPriorReset=this._key,S=D.words,x=D.sigBytes/4;P(w,S,x)}},encryptBlock:function(D,S){var x=g(w,D[S],D[S+1]);D[S]=x.left,D[S+1]=x.right},decryptBlock:function(D,S){var x=A(w,D[S],D[S+1]);D[S]=x.left,D[S+1]=x.right},blockSize:2,keySize:4,ivSize:2});v.Blowfish=b._createHelper(H)}(),R.Blowfish)},3145:(N,y,u)=>{function R(v,b){(b==null||b>v.length)&&(b=v.length);for(var E=0,_=Array(b);E<b;E++)_[E]=v[E];return _}u.d(y,{A:()=>R})},3200:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ProfileLevelId=y.Level=y.Profile=void 0,y.parseProfileLevelId=g,y.profileLevelIdToString=A,y.profileToString=function(S){switch(S){case v.ConstrainedBaseline:return"ConstrainedBaseline";case v.Baseline:return"Baseline";case v.Main:return"Main";case v.ConstrainedHigh:return"ConstrainedHigh";case v.High:return"High";case v.PredictiveHigh444:return"PredictiveHigh444";default:return void R.warn(`profileToString() | unrecognized profile ${S}`)}},y.levelToString=function(S){switch(S){case b.L1_b:return"1b";case b.L1:return"1";case b.L1_1:return"1.1";case b.L1_2:return"1.2";case b.L1_3:return"1.3";case b.L2:return"2";case b.L2_1:return"2.1";case b.L2_2:return"2.2";case b.L3:return"3";case b.L3_1:return"3.1";case b.L3_2:return"3.2";case b.L4:return"4";case b.L4_1:return"4.1";case b.L4_2:return"4.2";case b.L5:return"5";case b.L5_1:return"5.1";case b.L5_2:return"5.2";default:return void R.warn(`levelToString() | unrecognized level ${S}`)}},y.parseSdpProfileLevelId=P,y.isSameProfile=function(S={},x={}){const d=P(S),T=P(x);return!!(d&&T&&d.profile===T.profile)},y.isSameProfileAndLevel=function(S={},x={}){const d=P(S),T=P(x);return!!(d&&T&&d.profile===T.profile&&d.level==T.level)},y.generateProfileLevelIdStringForAnswer=function(S={},x={}){if(!S["profile-level-id"]&&!x["profile-level-id"])return void R.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const d=P(S),T=P(x);if(!d)throw new TypeError("invalid local_profile_level_id");if(!T)throw new TypeError("invalid remote_profile_level_id");if(d.profile!==T.profile)throw new TypeError("H264 Profile mismatch");const O=D(S)&&D(x),M=d.level,I=T.level,U=($=M,q=I,function(ae,Q){return ae===b.L1_b?Q!==b.L1&&Q!==b.L1_b:Q===b.L1_b?ae!==b.L1:ae<Q}($,q)?$:q),z=O?M:U;var $,q;return R.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${d.profile}, level:${z}]`),A(new E(d.profile,z))},y.supportedLevel=function(S,x){for(let d=F.length-1;d>=0;--d){const T=F[d];if(256*T.max_macroblock_frame_size<=S&&T.max_macroblocks_per_second<=x*T.max_macroblock_frame_size)return R.debug(`supportedLevel() | result [max_frame_pixel_count:${S}, max_fps:${x}, level:${T.level}]`),T.level}return void R.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${S}, max_fps:${x}]`)};const R=new(u(3582)).Logger;var v,b;(function(S){S[S.ConstrainedBaseline=1]="ConstrainedBaseline",S[S.Baseline=2]="Baseline",S[S.Main=3]="Main",S[S.ConstrainedHigh=4]="ConstrainedHigh",S[S.High=5]="High",S[S.PredictiveHigh444=6]="PredictiveHigh444"})(v||(y.Profile=v={})),function(S){S[S.L1_b=0]="L1_b",S[S.L1=10]="L1",S[S.L1_1=11]="L1_1",S[S.L1_2=12]="L1_2",S[S.L1_3=13]="L1_3",S[S.L2=20]="L2",S[S.L2_1=21]="L2_1",S[S.L2_2=22]="L2_2",S[S.L3=30]="L3",S[S.L3_1=31]="L3_1",S[S.L3_2=32]="L3_2",S[S.L4=40]="L4",S[S.L4_1=41]="L4_1",S[S.L4_2=42]="L4_2",S[S.L5=50]="L5",S[S.L5_1=51]="L5_1",S[S.L5_2=52]="L5_2"}(b||(y.Level=b={}));class E{constructor(x,d){this.profile=x,this.level=d}}y.ProfileLevelId=E;const _=new E(v.ConstrainedBaseline,b.L3_1);class m{constructor(x){this.mask=~H("x",x),this.masked_value=H("1",x)}isMatch(x){return this.masked_value===(x&this.mask)}}class k{constructor(x,d,T){this.profile_idc=x,this.profile_iop=d,this.profile=T}}const w=[new k(66,new m("x1xx0000"),v.ConstrainedBaseline),new k(77,new m("1xxx0000"),v.ConstrainedBaseline),new k(88,new m("11xx0000"),v.ConstrainedBaseline),new k(66,new m("x0xx0000"),v.Baseline),new k(88,new m("10xx0000"),v.Baseline),new k(77,new m("0x0x0000"),v.Main),new k(100,new m("00000000"),v.High),new k(100,new m("00001100"),v.ConstrainedHigh),new k(244,new m("00000000"),v.PredictiveHigh444)],F=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:b.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:b.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:b.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:b.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:b.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:b.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:b.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:b.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:b.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:b.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:b.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:b.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:b.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:b.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:b.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:b.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:b.L5_2}];function g(S){if(typeof S!="string"||S.length!==6)return;const x=parseInt(S,16);if(x===0)return;const d=255&x,T=x>>8&255,O=x>>16&255;let M;switch(d){case b.L1_1:M=16&T?b.L1_b:b.L1_1;break;case b.L1:case b.L1_2:case b.L1_3:case b.L2:case b.L2_1:case b.L2_2:case b.L3:case b.L3_1:case b.L3_2:case b.L4:case b.L4_1:case b.L4_2:case b.L5:case b.L5_1:case b.L5_2:M=d;break;default:return void R.warn(`parseProfileLevelId() | unrecognized level_idc [str:${S}, level_idc:${d}]`)}for(const I of w)if(O===I.profile_idc&&I.profile_iop.isMatch(T))return R.debug(`parseProfileLevelId() | result [str:${S}, profile:${I.profile}, level:${M}]`),new E(I.profile,M);R.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${S}, profile_idc:${O}, profile_iop:${T}]`)}function A(S){if(S.level==b.L1_b)switch(S.profile){case v.ConstrainedBaseline:return"42f00b";case v.Baseline:return"42100b";case v.Main:return"4d100b";default:return void R.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${S.profile}`)}let x;switch(S.profile){case v.ConstrainedBaseline:x="42e0";break;case v.Baseline:x="4200";break;case v.Main:x="4d00";break;case v.ConstrainedHigh:x="640c";break;case v.High:x="6400";break;case v.PredictiveHigh444:x="f400";break;default:return void R.warn(`profileLevelIdToString() | unrecognized profile ${S.profile}`)}let d=S.level.toString(16);return d.length===1&&(d=`0${d}`),`${x}${d}`}function P(S={}){const x=S["profile-level-id"];return x?g(x):_}function H(S,x){return+(x[0]===S)<<7|+(x[1]===S)<<6|+(x[2]===S)<<5|+(x[3]===S)<<4|+(x[4]===S)<<3|+(x[5]===S)<<2|+(x[6]===S)<<1|+(x[7]===S)}function D(S={}){const x=S["level-asymmetry-allowed"];return x===!0||x===1||x==="1"}},3240:function(N,y,u){var R;N.exports=(R=u(9021),function(v){var b=R,E=b.lib,_=E.Base,m=E.WordArray,k=b.x64={};k.Word=_.extend({init:function(w,F){this.high=w,this.low=F}}),k.WordArray=_.extend({init:function(w,F){w=this.words=w||[],this.sigBytes=F!=v?F:8*w.length},toX32:function(){for(var w=this.words,F=w.length,g=[],A=0;A<F;A++){var P=w[A];g.push(P.high),g.push(P.low)}return m.create(g,this.sigBytes)},clone:function(){for(var w=_.clone.call(this),F=w.words=this.words.slice(0),g=F.length,A=0;A<g;A++)F[A]=F[A].clone();return w}})}(),R)},3303:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.parse=function(R){const v=u.exec(R??"");return v?{spatialLayers:Number(v[1]),temporalLayers:Number(v[2])}:{spatialLayers:1,temporalLayers:1}};const u=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})")},3465:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.default="00000000-0000-0000-0000-000000000000"},3471:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.OfferMediaSection=y.AnswerMediaSection=y.MediaSection=void 0;const R=u(7363),v=u(1765);class b{_mediaObject;_planB;constructor({iceParameters:m,iceCandidates:k,dtlsParameters:w,planB:F=!1}){if(this._mediaObject={},this._planB=F,m&&this.setIceParameters(m),k){this._mediaObject.candidates=[];for(const g of k){const A={component:1};A.foundation=g.foundation,A.ip=g.address??g.ip,A.port=g.port,A.priority=g.priority,A.transport=g.protocol,A.type=g.type,g.tcpType&&(A.tcptype=g.tcpType),this._mediaObject.candidates.push(A)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}w&&this.setDtlsRole(w.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(m){this._mediaObject.iceUfrag=m.usernameFragment,this._mediaObject.icePwd=m.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}y.MediaSection=b,y.AnswerMediaSection=class extends b{constructor({iceParameters:_,iceCandidates:m,dtlsParameters:k,sctpParameters:w,plainRtpParameters:F,planB:g=!1,offerMediaObject:A,offerRtpParameters:P,answerRtpParameters:H,codecOptions:D}){switch(super({iceParameters:_,iceCandidates:m,dtlsParameters:k,planB:g}),this._mediaObject.mid=String(A.mid),this._mediaObject.type=A.type,this._mediaObject.protocol=A.protocol,F?(this._mediaObject.connection={ip:F.ip,version:F.ipVersion},this._mediaObject.port=F.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),A.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const S of H.codecs){const x={payload:S.payloadType,codec:E(S),rate:S.clockRate};S.channels>1&&(x.encoding=S.channels),this._mediaObject.rtp.push(x);const d=v.clone(S.parameters)??{};let T=v.clone(S.rtcpFeedback)??[];if(D){const{opusStereo:M,opusFec:I,opusDtx:U,opusMaxPlaybackRate:z,opusMaxAverageBitrate:$,opusPtime:q,opusNack:ae,videoGoogleStartBitrate:Q,videoGoogleMaxBitrate:ve,videoGoogleMinBitrate:we}=D,Re=P.codecs.find(me=>me.payloadType===S.payloadType);switch(S.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":M!==void 0&&(Re.parameters["sprop-stereo"]=M?1:0,d.stereo=M?1:0),I!==void 0&&(Re.parameters.useinbandfec=I?1:0,d.useinbandfec=I?1:0),U!==void 0&&(Re.parameters.usedtx=U?1:0,d.usedtx=U?1:0),z!==void 0&&(d.maxplaybackrate=z),$!==void 0&&(d.maxaveragebitrate=$),q!==void 0&&(Re.parameters.ptime=q,d.ptime=q),ae||(Re.rtcpFeedback=Re.rtcpFeedback.filter(me=>me.type!=="nack"||me.parameter),T=T.filter(me=>me.type!=="nack"||me.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":Q!==void 0&&(d["x-google-start-bitrate"]=Q),ve!==void 0&&(d["x-google-max-bitrate"]=ve),we!==void 0&&(d["x-google-min-bitrate"]=we)}}const O={payload:S.payloadType,config:""};for(const M of Object.keys(d))O.config&&(O.config+=";"),O.config+=`${M}=${d[M]}`;O.config&&this._mediaObject.fmtp.push(O);for(const M of T)this._mediaObject.rtcpFb.push({payload:S.payloadType,type:M.type,subtype:M.parameter})}this._mediaObject.payloads=H.codecs.map(S=>S.payloadType).join(" "),this._mediaObject.ext=[];for(const S of H.headerExtensions)(A.ext??[]).some(x=>x.uri===S.uri)&&this._mediaObject.ext.push({uri:S.uri,value:S.id});if(A.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),A.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:A.simulcast.list1},this._mediaObject.rids=[];for(const S of A.rids??[])S.direction==="send"&&this._mediaObject.rids.push({id:S.id,direction:"recv"})}else if(A.simulcast_03){this._mediaObject.simulcast_03={value:A.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const S of A.rids??[])S.direction==="send"&&this._mediaObject.rids.push({id:S.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof A.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=w.port,this._mediaObject.maxMessageSize=w.maxMessageSize):A.sctpmap&&(this._mediaObject.payloads=w.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:w.port,maxMessageSize:w.maxMessageSize})}}setDtlsRole(_){switch(_){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(_){if(!this._mediaObject.simulcast?.list1)return;const m={};for(const F of _)F.rid&&(m[F.rid]=F);const k=this._mediaObject.simulcast.list1,w=R.parseSimulcastStreamList(k);for(const F of w)for(const g of F)g.paused=!m[g.scid]?.active;this._mediaObject.simulcast.list1=w.map(F=>F.map(g=>`${g.paused?"~":""}${g.scid}`).join(",")).join(";")}};function E(_){const m=new RegExp("^(audio|video)/(.+)","i").exec(_.mimeType);if(!m)throw new TypeError("invalid codec.mimeType");return m[2]}y.OfferMediaSection=class extends b{constructor({iceParameters:_,iceCandidates:m,dtlsParameters:k,sctpParameters:w,plainRtpParameters:F,planB:g=!1,mid:A,kind:P,offerRtpParameters:H,streamId:D,trackId:S,oldDataChannelSpec:x=!1}){switch(super({iceParameters:_,iceCandidates:m,dtlsParameters:k,planB:g}),this._mediaObject.mid=String(A),this._mediaObject.type=P,F?(this._mediaObject.connection={ip:F.ip,version:F.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=F.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=w?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",P){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${D??"-"} ${S}`);for(const M of H.codecs){const I={payload:M.payloadType,codec:E(M),rate:M.clockRate};M.channels>1&&(I.encoding=M.channels),this._mediaObject.rtp.push(I);const U={payload:M.payloadType,config:""};for(const z of Object.keys(M.parameters))U.config&&(U.config+=";"),U.config+=`${z}=${M.parameters[z]}`;U.config&&this._mediaObject.fmtp.push(U);for(const z of M.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:M.payloadType,type:z.type,subtype:z.parameter})}this._mediaObject.payloads=H.codecs.map(M=>M.payloadType).join(" "),this._mediaObject.ext=[];for(const M of H.headerExtensions)this._mediaObject.ext.push({uri:M.uri,value:M.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const d=H.encodings[0],T=d.ssrc,O=d.rtx?.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],H.rtcp.cname&&this._mediaObject.ssrcs.push({id:T,attribute:"cname",value:H.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:T,attribute:"msid",value:`${D??"-"} ${S}`}),O&&(H.rtcp.cname&&this._mediaObject.ssrcs.push({id:O,attribute:"cname",value:H.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:O,attribute:"msid",value:`${D??"-"} ${S}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${T} ${O}`}));break}case"application":x?(this._mediaObject.payloads=w.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:w.port,maxMessageSize:w.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=w.port,this._mediaObject.maxMessageSize=w.maxMessageSize)}}setDtlsRole(_){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:_,streamId:m,trackId:k}){const w=_.encodings[0],F=w.ssrc,g=w.rtx?.ssrc,A=this._mediaObject.payloads.split(" ");for(const P of _.codecs){if(A.includes(String(P.payloadType)))continue;const H={payload:P.payloadType,codec:E(P),rate:P.clockRate};P.channels>1&&(H.encoding=P.channels),this._mediaObject.rtp.push(H);const D={payload:P.payloadType,config:""};for(const S of Object.keys(P.parameters))D.config&&(D.config+=";"),D.config+=`${S}=${P.parameters[S]}`;D.config&&this._mediaObject.fmtp.push(D);for(const S of P.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:P.payloadType,type:S.type,subtype:S.parameter})}this._mediaObject.payloads+=` ${_.codecs.filter(P=>!this._mediaObject.payloads.includes(P.payloadType)).map(P=>P.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),_.rtcp.cname&&this._mediaObject.ssrcs.push({id:F,attribute:"cname",value:_.rtcp.cname}),this._mediaObject.ssrcs.push({id:F,attribute:"msid",value:`${m??"-"} ${k}`}),g&&(_.rtcp.cname&&this._mediaObject.ssrcs.push({id:g,attribute:"cname",value:_.rtcp.cname}),this._mediaObject.ssrcs.push({id:g,attribute:"msid",value:`${m??"-"} ${k}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${F} ${g}`}))}planBStopReceiving({offerRtpParameters:_}){const m=_.encodings[0],k=m.ssrc,w=m.rtx?.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(F=>F.id!==k&&F.id!==w),w&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(F=>F.ssrcs!==`${k} ${w}`))}}},3518:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Consumer=void 0;const R=u(2994),v=u(3953),b=u(4893),E=new R.Logger("Consumer");class _ extends v.EnhancedEventEmitter{_id;_localId;_producerId;_closed=!1;_rtpReceiver;_track;_rtpParameters;_paused;_appData;_observer=new v.EnhancedEventEmitter;constructor({id:k,localId:w,producerId:F,rtpReceiver:g,track:A,rtpParameters:P,appData:H}){super(),E.debug("constructor()"),this._id=k,this._localId=w,this._producerId=F,this._rtpReceiver=g,this._track=A,this._rtpParameters=P,this._paused=!A.enabled,this._appData=H??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(k){this._appData=k}get observer(){return this._observer}close(){this._closed||(E.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(E.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new b.InvalidStateError("closed");return new Promise((k,w)=>{this.safeEmit("@getstats",k,w)})}pause(){E.debug("pause()"),this._closed?E.error("pause() | Consumer closed"):this._paused?E.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){E.debug("resume()"),this._closed?E.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):E.debug("resume() | Consumer is already resumed")}onTrackEnded(){E.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}y.Consumer=_},3582:function(N,y,u){var R=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(y,"__esModule",{value:!0}),y.Logger=void 0;const v=R(u(7833)),b="h264-profile-level-id";y.Logger=class{constructor(E){E?(this._debug=(0,v.default)(`${b}:${E}`),this._warn=(0,v.default)(`${b}:WARN:${E}`),this._error=(0,v.default)(`${b}:ERROR:${E}`)):(this._debug=(0,v.default)(b),this._warn=(0,v.default)(`${b}:WARN`),this._error=(0,v.default)(`${b}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3662:(N,y,u)=>{function R(v,b){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,_){return E.__proto__=_,E},R(v,b)}u.d(y,{A:()=>R})},3738:N=>{function y(u){return N.exports=y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},N.exports.__esModule=!0,N.exports.default=N.exports,y(u)}N.exports=y,N.exports.__esModule=!0,N.exports.default=N.exports},3779:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0});const u=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);y.default={randomUUID:u}},3785:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.clone=function(u){return u===void 0?void 0:Number.isNaN(u)?NaN:typeof structuredClone=="function"?structuredClone(u):JSON.parse(JSON.stringify(u))}},3797:function(N,y,u){var R,v,b;N.exports=(b=u(9021),u(7165),b.mode.OFB=(R=b.lib.BlockCipherMode.extend(),v=R.Encryptor=R.extend({processBlock:function(E,_){var m=this._cipher,k=m.blockSize,w=this._iv,F=this._keystream;w&&(F=this._keystream=w.slice(0),this._iv=void 0),m.encryptBlock(F,0);for(var g=0;g<k;g++)E[_+g]^=F[g]}}),R.Decryptor=v,R),b.mode.OFB)},3804:(N,y,u)=>{var R=u(5602),v=/%[sdv%]/g,b=function(k){var w=1,F=arguments,g=F.length;return k.replace(v,function(A){if(w>=g)return A;var P=F[w];switch(w+=1,A){case"%%":return"%";case"%s":return String(P);case"%d":return Number(P);case"%v":return""}})},E=function(k,w,F){var g=[k+"="+(w.format instanceof Function?w.format(w.push?F:F[w.name]):w.format)];if(w.names)for(var A=0;A<w.names.length;A+=1){var P=w.names[A];w.name?g.push(F[w.name][P]):g.push(F[w.names[A]])}else g.push(F[w.name]);return b.apply(null,g)},_=["v","o","s","i","u","e","p","c","b","t","r","z","a"],m=["i","c","b","a"];N.exports=function(k,w){w=w||{},k.version==null&&(k.version=0),k.name==null&&(k.name=" "),k.media.forEach(function(P){P.payloads==null&&(P.payloads="")});var F=w.outerOrder||_,g=w.innerOrder||m,A=[];return F.forEach(function(P){R[P].forEach(function(H){H.name in k&&k[H.name]!=null?A.push(E(P,H,k)):H.push in k&&k[H.push]!=null&&k[H.push].forEach(function(D){A.push(E(P,H,D))})})}),k.media.forEach(function(P){A.push(E("m",R.m[0],P)),g.forEach(function(H){R[H].forEach(function(D){D.name in P&&P[D.name]!=null?A.push(E(H,D,P)):D.push in P&&P[D.push]!=null&&P[D.push].forEach(function(S){A.push(E(H,D,S))})})})}),A.join(`\r
`)+`\r
`}},3953:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.EnhancedEventEmitter=void 0;const R=u(9596),v=new(u(2994)).Logger("EnhancedEventEmitter");class b extends R.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(_,...m){return super.emit(_,...m)}safeEmit(_,...m){try{return super.emit(_,...m)}catch(k){v.error("safeEmit() | event listener threw an error [eventName:%s]:%o",_,k);try{super.emit("listenererror",_,k)}catch{}return!!super.listenerCount(_)}}on(_,m){return super.on(_,m),this}off(_,m){return super.off(_,m),this}addListener(_,m){return super.on(_,m),this}prependListener(_,m){return super.prependListener(_,m),this}once(_,m){return super.once(_,m),this}prependOnceListener(_,m){return super.prependOnceListener(_,m),this}removeListener(_,m){return super.off(_,m),this}removeAllListeners(_){return super.removeAllListeners(_),this}listenerCount(_){return super.listenerCount(_)}listeners(_){return super.listeners(_)}rawListeners(_){return super.rawListeners(_)}}y.EnhancedEventEmitter=b},3954:(N,y,u)=>{function R(v){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},R(v)}u.d(y,{A:()=>R})},4039:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ReactNativeUnifiedPlan=void 0;const R=u(7363),v=u(2994),b=u(1765),E=u(8046),_=u(5544),m=u(5938),k=u(4256),w=u(4893),F=u(521),g=u(1305),A=u(3303),P=new v.Logger("ReactNativeUnifiedPlan"),H={OS:1024,MIS:1024};class D extends F.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new D}constructor(){super()}get name(){return"ReactNativeUnifiedPlan"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const x=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{x.addTransceiver("audio"),x.addTransceiver("video");const d=await x.createOffer();try{x.close()}catch{}const T=R.parse(d.sdp),O=_.extractRtpCapabilities({sdpObject:T});return k.addNackSupportForOpus(O),O}catch(d){try{x.close()}catch{}throw d}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:H}}run({direction:x,iceParameters:d,iceCandidates:T,dtlsParameters:O,sctpParameters:M,iceServers:I,iceTransportPolicy:U,additionalSettings:z,proprietaryConstraints:$,extendedRtpCapabilities:q}){this.assertNotClosed(),P.debug("run()"),this._direction=x,this._remoteSdp=new g.RemoteSdp({iceParameters:d,iceCandidates:T,dtlsParameters:O,sctpParameters:M}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",q),video:E.getSendingRtpParameters("video",q)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",q),video:E.getSendingRemoteRtpParameters("video",q)},O.role&&O.role!=="auto"&&(this._forcedLocalDtlsRole=O.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:I??[],iceTransportPolicy:U??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...z},$),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ae=>{this.emit("@icecandidateerror",ae)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(x){this.assertNotClosed(),P.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=x,this._pc.setConfiguration(d)}async restartIce(x){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(x),this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const T={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:x,encodings:d,codecOptions:T,codec:O,onRtpSender:M}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",x.kind,x.id),d&&d.length>1&&d.forEach((Ce,Be)=>{Ce.rid=`r${Be}`});const I=b.clone(this._sendingRtpParametersByKind[x.kind]);I.codecs=E.reduceCodecs(I.codecs,O);const U=b.clone(this._sendingRemoteRtpParametersByKind[x.kind]);U.codecs=E.reduceCodecs(U.codecs,O);const z=this._remoteSdp.getNextMediaSectionIdx(),$=this._pc.addTransceiver(x,{direction:"sendonly",streams:[this._sendStream],sendEncodings:d});M&&M($.sender);let q,ae=await this._pc.createOffer(),Q=R.parse(ae.sdp);Q.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Q});let ve=!1;const we=(0,A.parse)((d??[{}])[0].scalabilityMode);d&&d.length===1&&we.spatialLayers>1&&I.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(P.debug("send() | enabling legacy simulcast for VP9 SVC"),ve=!0,Q=R.parse(ae.sdp),q=Q.media[z.idx],m.addLegacySimulcast({offerMediaObject:q,numStreams:we.spatialLayers}),ae={type:"offer",sdp:R.write(Q)}),P.debug("send() | calling pc.setLocalDescription() [offer:%o]",ae),await this._pc.setLocalDescription(ae);let Re=$.mid??void 0;if(Re||P.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),I.mid=Re,Q=R.parse(this._pc.localDescription.sdp),q=Q.media[z.idx],I.rtcp.cname=_.getCname({offerMediaObject:q}),d)if(d.length===1){let Ce=m.getRtpEncodings({offerMediaObject:q});Object.assign(Ce[0],d[0]),ve&&(Ce=[Ce[0]]),I.encodings=Ce}else I.encodings=d;else I.encodings=m.getRtpEncodings({offerMediaObject:q});if(I.encodings.length>1&&(I.codecs[0].mimeType.toLowerCase()==="video/vp8"||I.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Ce of I.encodings)Ce.scalabilityMode?Ce.scalabilityMode=`L1T${we.temporalLayers}`:Ce.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:q,reuseMid:z.reuseMid,offerRtpParameters:I,answerRtpParameters:U,codecOptions:T});const me={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",me),await this._pc.setRemoteDescription(me),Re||(Re=$.mid,I.mid=Re),this._mapMidTransceiver.set(Re,$),{localId:Re,rtpParameters:I,rtpSender:$.sender}}async stopSending(x){if(this.assertSendDirection(),this._closed)return;P.debug("stopSending() [localId:%s]",x);const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");if(d.sender.replaceTrack(null),this._pc.removeTrack(d.sender),this._remoteSdp.closeMediaSection(d.mid))try{d.stop()}catch{}const T=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._mapMidTransceiver.delete(x)}async pauseSending(x){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",x);const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="inactive",this._remoteSdp.pauseMediaSection(x);const T=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async resumeSending(x){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",x);const d=this._mapMidTransceiver.get(x);if(this._remoteSdp.resumeSendingMediaSection(x),!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="sendonly";const T=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async replaceTrack(x,d){this.assertNotClosed(),this.assertSendDirection(),d?P.debug("replaceTrack() [localId:%s, track.id:%s]",x,d.id):P.debug("replaceTrack() [localId:%s, no track]",x);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");await T.sender.replaceTrack(d)}async setMaxSpatialLayer(x,d){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",x,d);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");const O=T.sender.getParameters();O.encodings.forEach((U,z)=>{U.active=z<=d}),await T.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(x,O.encodings);const M=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async setRtpEncodingParameters(x,d){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",x,d);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");const O=T.sender.getParameters();O.encodings.forEach((U,z)=>{O.encodings[z]={...U,...d}}),await T.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(x,O.encodings);const M=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async getSenderStats(x){this.assertNotClosed(),this.assertSendDirection();const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.sender.getStats()}async sendDataChannel({ordered:x,maxPacketLifeTime:d,maxRetransmits:T,label:O,protocol:M}){this.assertNotClosed(),this.assertSendDirection();const I={negotiated:!0,id:this._nextSendSctpStreamId,ordered:x,maxPacketLifeTime:d,maxRetransmits:T,protocol:M};P.debug("sendDataChannel() [options:%o]",I);const U=this._pc.createDataChannel(O,I);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%H.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),$=R.parse(z.sdp),q=$.media.find(Q=>Q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:q});const ae={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setRemoteDescription(ae),this._hasDataChannelMediaSection=!0}return{dataChannel:U,sctpStreamParameters:{streamId:I.id,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits}}}async receive(x){this.assertNotClosed(),this.assertRecvDirection();const d=[],T=new Map;for(const U of x){const{trackId:z,kind:$,rtpParameters:q,streamId:ae}=U;P.debug("receive() [trackId:%s, kind:%s]",z,$);const Q=q.mid??String(this._mapMidTransceiver.size);T.set(z,Q),this._remoteSdp.receive({mid:Q,kind:$,offerRtpParameters:q,streamId:ae??q.rtcp.cname,trackId:z})}const O={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);for(const U of x){const{trackId:z,onRtpReceiver:$}=U;if($){const q=T.get(z),ae=this._pc.getTransceivers().find(Q=>Q.mid===q);if(!ae)throw new Error("transceiver not found");$(ae.receiver)}}let M=await this._pc.createAnswer();const I=R.parse(M.sdp);for(const U of x){const{trackId:z,rtpParameters:$}=U,q=T.get(z),ae=I.media.find(Q=>String(Q.mid)===q);_.applyCodecParameters({offerRtpParameters:$,answerMediaObject:ae})}M={type:"answer",sdp:R.write(I)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",M),await this._pc.setLocalDescription(M);for(const U of x){const{trackId:z}=U,$=T.get(z),q=this._pc.getTransceivers().find(ae=>ae.mid===$);if(!q)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set($,q),d.push({localId:$,track:q.receiver.track,rtpReceiver:q.receiver})}return d}async stopReceiving(x){if(this.assertRecvDirection(),this._closed)return;for(const O of x){P.debug("stopReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(M.mid)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T);for(const O of x)this._mapMidTransceiver.delete(O)}async pauseReceiving(x){this.assertNotClosed(),this.assertRecvDirection();for(const O of x){P.debug("pauseReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="inactive",this._remoteSdp.pauseMediaSection(O)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async resumeReceiving(x){this.assertNotClosed(),this.assertRecvDirection();for(const O of x){P.debug("resumeReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(O)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async getReceiverStats(x){this.assertNotClosed(),this.assertRecvDirection();const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:x,label:d,protocol:T}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:O,ordered:M,maxPacketLifeTime:I,maxRetransmits:U}=x,z={negotiated:!0,id:O,ordered:M,maxPacketLifeTime:I,maxRetransmits:U,protocol:T};P.debug("receiveDataChannel() [options:%o]",z);const $=this._pc.createDataChannel(d,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const q={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",q),await this._pc.setRemoteDescription(q);const ae=await this._pc.createAnswer();if(!this._transportReady){const Q=R.parse(ae.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Q})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setLocalDescription(ae),this._hasDataChannelMediaSection=!0}return{dataChannel:$}}async setupTransport({localDtlsRole:x,localSdpObject:d}){d||(d=R.parse(this._pc.localDescription.sdp));const T=_.extractDtlsParameters({sdpObject:d});T.role=x,this._remoteSdp.updateDtlsRole(x==="client"?"server":"client"),await new Promise((O,M)=>{this.safeEmit("@connect",{dtlsParameters:T},O,M)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new w.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.ReactNativeUnifiedPlan=D},4160:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0})},4253:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.AwaitQueueRemovedTaskError=y.AwaitQueueStoppedError=void 0;class u extends Error{constructor(b){super(b??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,u)}}y.AwaitQueueStoppedError=u;class R extends Error{constructor(b){super(b??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,R)}}y.AwaitQueueRemovedTaskError=R},4256:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.addNackSupportForOpus=function(u){for(const R of u.codecs??[])R.mimeType.toLowerCase()!=="audio/opus"&&R.mimeType.toLowerCase()!=="audio/multiopus"||R.rtcpFeedback?.some(v=>v.type==="nack"&&!v.parameter)||(R.rtcpFeedback||(R.rtcpFeedback=[]),R.rtcpFeedback.push({type:"nack"}))}},4299:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.updateV7State=void 0;const R=u(2291),v=u(6011),b={};function E(m,k,w){return m.msecs??=-1/0,m.seq??=0,k>m.msecs?(m.seq=w[6]<<23|w[7]<<16|w[8]<<8|w[9],m.msecs=k):(m.seq=m.seq+1|0,m.seq===0&&m.msecs++),m}function _(m,k,w,F,g=0){if(m.length<16)throw new Error("Random bytes length must be >= 16");if(F){if(g<0||g+16>F.length)throw new RangeError(`UUID byte range ${g}:${g+15} is out of buffer bounds`)}else F=new Uint8Array(16),g=0;return k??=Date.now(),w??=127*m[6]<<24|m[7]<<16|m[8]<<8|m[9],F[g++]=k/1099511627776&255,F[g++]=k/4294967296&255,F[g++]=k/16777216&255,F[g++]=k/65536&255,F[g++]=k/256&255,F[g++]=255&k,F[g++]=112|w>>>28&15,F[g++]=w>>>20&255,F[g++]=128|w>>>14&63,F[g++]=w>>>6&255,F[g++]=w<<2&255|3&m[10],F[g++]=m[11],F[g++]=m[12],F[g++]=m[13],F[g++]=m[14],F[g++]=m[15],F}y.updateV7State=E,y.default=function(m,k,w){let F;if(m)F=_(m.random??m.rng?.()??(0,R.default)(),m.msecs,m.seq,k,w);else{const g=Date.now(),A=(0,R.default)();E(b,g,A),F=_(A,b.msecs,b.seq,k,w)}return k??(0,v.unsafeStringify)(F)}},4373:N=>{N.exports=function(y){var u=Object(y),R=[];for(var v in u)R.unshift(v);return function b(){for(;R.length;)if((v=R.pop())in u)return b.value=v,b.done=!1,b;return b.done=!0,b}},N.exports.__esModule=!0,N.exports.default=N.exports},4467:(N,y,u)=>{u.d(y,{A:()=>v});var R=u(816);function v(b,E,_){return(E=(0,R.A)(E))in b?Object.defineProperty(b,E,{value:_,enumerable:!0,configurable:!0,writable:!0}):b[E]=_,b}},4496:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.getRtpEncodings=function({offerMediaObject:u,track:R}){const v=new Set;for(const _ of u.ssrcs??[])if(_.attribute==="msid"&&_.value.split(" ")[1]===R.id){const m=_.id;v.add(m)}if(v.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${R.id}]`);const b=new Map;for(const _ of u.ssrcGroups??[]){if(_.semantics!=="FID")continue;let[m,k]=_.ssrcs.split(/\s+/);m=Number(m),k=Number(k),v.has(m)&&(v.delete(m),v.delete(k),b.set(m,k))}for(const _ of v)b.set(_,null);const E=[];for(const[_,m]of b){const k={ssrc:_};m&&(k.rtx={ssrc:m}),E.push(k)}return E},y.addLegacySimulcast=function({offerMediaObject:u,track:R,numStreams:v}){if(v<=1)throw new TypeError("numStreams must be greater than 1");let b,E,_;if(!(u.ssrcs??[]).find(g=>g.attribute!=="msid"?!1:g.value.split(" ")[1]===R.id&&(b=g.id,_=g.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${R.id}]`);(u.ssrcGroups??[]).some(g=>{if(g.semantics!=="FID")return!1;const A=g.ssrcs.split(/\s+/);return Number(A[0])===b&&(E=Number(A[1]),!0)});const m=u.ssrcs.find(g=>g.attribute==="cname"&&g.id===b);if(!m)throw new Error(`a=ssrc line with cname information not found [track.id:${R.id}]`);const k=m.value,w=[],F=[];for(let g=0;g<v;++g)w.push(b+g),E&&F.push(E+g);u.ssrcGroups=u.ssrcGroups??[],u.ssrcs=u.ssrcs??[],u.ssrcGroups.push({semantics:"SIM",ssrcs:w.join(" ")});for(const g of w)u.ssrcs.push({id:g,attribute:"cname",value:k}),u.ssrcs.push({id:g,attribute:"msid",value:`${_} ${R.id}`});for(let g=0;g<F.length;++g){const A=w[g],P=F[g];u.ssrcs.push({id:P,attribute:"cname",value:k}),u.ssrcs.push({id:P,attribute:"msid",value:`${_} ${R.id}`}),u.ssrcGroups.push({semantics:"FID",ssrcs:`${A} ${P}`})}}},4557:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.URL=y.DNS=void 0;const R=u(2829),v=u(2988);var b=u(2988);function E(_,m,k,w){return(0,v.default)(80,R.default,_,m,k,w)}Object.defineProperty(y,"DNS",{enumerable:!0,get:function(){return b.DNS}}),Object.defineProperty(y,"URL",{enumerable:!0,get:function(){return b.URL}}),E.DNS=v.DNS,E.URL=v.URL,y.default=E},4633:(N,y,u)=>{var R=u(5172),v=u(6993),b=u(5869),E=u(887),_=u(1791),m=u(4373),k=u(579);function w(){var F=v(),g=F.m(w),A=(Object.getPrototypeOf?Object.getPrototypeOf(g):g.__proto__).constructor;function P(S){var x=typeof S=="function"&&S.constructor;return!!x&&(x===A||(x.displayName||x.name)==="GeneratorFunction")}var H={throw:1,return:2,break:3,continue:3};function D(S){var x,d;return function(T){x||(x={stop:function(){return d(T.a,2)},catch:function(){return T.v},abrupt:function(O,M){return d(T.a,H[O],M)},delegateYield:function(O,M,I){return x.resultName=M,d(T.d,k(O),I)},finish:function(O){return d(T.f,O)}},d=function(O,M,I){T.p=x.prev,T.n=x.next;try{return O(M,I)}finally{x.next=T.n}}),x.resultName&&(x[x.resultName]=T.v,x.resultName=void 0),x.sent=T.v,x.next=T.n;try{return S.call(this,x)}finally{T.p=x.prev,T.n=x.next}}}return(N.exports=w=function(){return{wrap:function(S,x,d,T){return F.w(D(S),x,d,T&&T.reverse())},isGeneratorFunction:P,mark:F.m,awrap:function(S,x){return new R(S,x)},AsyncIterator:_,async:function(S,x,d,T,O){return(P(x)?E:b)(D(S),x,d,T,O)},keys:m,values:k}},N.exports.__esModule=!0,N.exports.default=N.exports)()}N.exports=w,N.exports.__esModule=!0,N.exports.default=N.exports},4636:function(N,y,u){var R;N.exports=(R=u(9021),function(v){var b=R,E=b.lib,_=E.WordArray,m=E.Hasher,k=b.algo,w=[];(function(){for(var D=0;D<64;D++)w[D]=4294967296*v.abs(v.sin(D+1))|0})();var F=k.MD5=m.extend({_doReset:function(){this._hash=new _.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(D,S){for(var x=0;x<16;x++){var d=S+x,T=D[d];D[d]=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8)}var O=this._hash.words,M=D[S+0],I=D[S+1],U=D[S+2],z=D[S+3],$=D[S+4],q=D[S+5],ae=D[S+6],Q=D[S+7],ve=D[S+8],we=D[S+9],Re=D[S+10],me=D[S+11],Ce=D[S+12],Be=D[S+13],be=D[S+14],Ye=D[S+15],Qe=O[0],Ge=O[1],He=O[2],Te=O[3];Qe=g(Qe,Ge,He,Te,M,7,w[0]),Te=g(Te,Qe,Ge,He,I,12,w[1]),He=g(He,Te,Qe,Ge,U,17,w[2]),Ge=g(Ge,He,Te,Qe,z,22,w[3]),Qe=g(Qe,Ge,He,Te,$,7,w[4]),Te=g(Te,Qe,Ge,He,q,12,w[5]),He=g(He,Te,Qe,Ge,ae,17,w[6]),Ge=g(Ge,He,Te,Qe,Q,22,w[7]),Qe=g(Qe,Ge,He,Te,ve,7,w[8]),Te=g(Te,Qe,Ge,He,we,12,w[9]),He=g(He,Te,Qe,Ge,Re,17,w[10]),Ge=g(Ge,He,Te,Qe,me,22,w[11]),Qe=g(Qe,Ge,He,Te,Ce,7,w[12]),Te=g(Te,Qe,Ge,He,Be,12,w[13]),He=g(He,Te,Qe,Ge,be,17,w[14]),Qe=A(Qe,Ge=g(Ge,He,Te,Qe,Ye,22,w[15]),He,Te,I,5,w[16]),Te=A(Te,Qe,Ge,He,ae,9,w[17]),He=A(He,Te,Qe,Ge,me,14,w[18]),Ge=A(Ge,He,Te,Qe,M,20,w[19]),Qe=A(Qe,Ge,He,Te,q,5,w[20]),Te=A(Te,Qe,Ge,He,Re,9,w[21]),He=A(He,Te,Qe,Ge,Ye,14,w[22]),Ge=A(Ge,He,Te,Qe,$,20,w[23]),Qe=A(Qe,Ge,He,Te,we,5,w[24]),Te=A(Te,Qe,Ge,He,be,9,w[25]),He=A(He,Te,Qe,Ge,z,14,w[26]),Ge=A(Ge,He,Te,Qe,ve,20,w[27]),Qe=A(Qe,Ge,He,Te,Be,5,w[28]),Te=A(Te,Qe,Ge,He,U,9,w[29]),He=A(He,Te,Qe,Ge,Q,14,w[30]),Qe=P(Qe,Ge=A(Ge,He,Te,Qe,Ce,20,w[31]),He,Te,q,4,w[32]),Te=P(Te,Qe,Ge,He,ve,11,w[33]),He=P(He,Te,Qe,Ge,me,16,w[34]),Ge=P(Ge,He,Te,Qe,be,23,w[35]),Qe=P(Qe,Ge,He,Te,I,4,w[36]),Te=P(Te,Qe,Ge,He,$,11,w[37]),He=P(He,Te,Qe,Ge,Q,16,w[38]),Ge=P(Ge,He,Te,Qe,Re,23,w[39]),Qe=P(Qe,Ge,He,Te,Be,4,w[40]),Te=P(Te,Qe,Ge,He,M,11,w[41]),He=P(He,Te,Qe,Ge,z,16,w[42]),Ge=P(Ge,He,Te,Qe,ae,23,w[43]),Qe=P(Qe,Ge,He,Te,we,4,w[44]),Te=P(Te,Qe,Ge,He,Ce,11,w[45]),He=P(He,Te,Qe,Ge,Ye,16,w[46]),Qe=H(Qe,Ge=P(Ge,He,Te,Qe,U,23,w[47]),He,Te,M,6,w[48]),Te=H(Te,Qe,Ge,He,Q,10,w[49]),He=H(He,Te,Qe,Ge,be,15,w[50]),Ge=H(Ge,He,Te,Qe,q,21,w[51]),Qe=H(Qe,Ge,He,Te,Ce,6,w[52]),Te=H(Te,Qe,Ge,He,z,10,w[53]),He=H(He,Te,Qe,Ge,Re,15,w[54]),Ge=H(Ge,He,Te,Qe,I,21,w[55]),Qe=H(Qe,Ge,He,Te,ve,6,w[56]),Te=H(Te,Qe,Ge,He,Ye,10,w[57]),He=H(He,Te,Qe,Ge,ae,15,w[58]),Ge=H(Ge,He,Te,Qe,Be,21,w[59]),Qe=H(Qe,Ge,He,Te,$,6,w[60]),Te=H(Te,Qe,Ge,He,me,10,w[61]),He=H(He,Te,Qe,Ge,U,15,w[62]),Ge=H(Ge,He,Te,Qe,we,21,w[63]),O[0]=O[0]+Qe|0,O[1]=O[1]+Ge|0,O[2]=O[2]+He|0,O[3]=O[3]+Te|0},_doFinalize:function(){var D=this._data,S=D.words,x=8*this._nDataBytes,d=8*D.sigBytes;S[d>>>5]|=128<<24-d%32;var T=v.floor(x/4294967296),O=x;S[15+(d+64>>>9<<4)]=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8),S[14+(d+64>>>9<<4)]=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8),D.sigBytes=4*(S.length+1),this._process();for(var M=this._hash,I=M.words,U=0;U<4;U++){var z=I[U];I[U]=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8)}return M},clone:function(){var D=m.clone.call(this);return D._hash=this._hash.clone(),D}});function g(D,S,x,d,T,O,M){var I=D+(S&x|~S&d)+T+M;return(I<<O|I>>>32-O)+S}function A(D,S,x,d,T,O,M){var I=D+(S&d|x&~d)+T+M;return(I<<O|I>>>32-O)+S}function P(D,S,x,d,T,O,M){var I=D+(S^x^d)+T+M;return(I<<O|I>>>32-O)+S}function H(D,S,x,d,T,O,M){var I=D+(x^(S|~d))+T+M;return(I<<O|I>>>32-O)+S}b.MD5=m._createHelper(F),b.HmacMD5=m._createHmacHelper(F)}(Math),R.MD5)},4725:function(N,y,u){var R;N.exports=(R=u(9021),function(){var v=R,b=v.lib.WordArray;function E(_,m,k){for(var w=[],F=0,g=0;g<m;g++)if(g%4){var A=k[_.charCodeAt(g-1)]<<g%4*2|k[_.charCodeAt(g)]>>>6-g%4*2;w[F>>>2]|=A<<24-F%4*8,F++}return b.create(w,F)}v.enc.Base64url={stringify:function(_,m){m===void 0&&(m=!0);var k=_.words,w=_.sigBytes,F=m?this._safe_map:this._map;_.clamp();for(var g=[],A=0;A<w;A+=3)for(var P=(k[A>>>2]>>>24-A%4*8&255)<<16|(k[A+1>>>2]>>>24-(A+1)%4*8&255)<<8|k[A+2>>>2]>>>24-(A+2)%4*8&255,H=0;H<4&&A+.75*H<w;H++)g.push(F.charAt(P>>>6*(3-H)&63));var D=F.charAt(64);if(D)for(;g.length%4;)g.push(D);return g.join("")},parse:function(_,m){m===void 0&&(m=!0);var k=_.length,w=m?this._safe_map:this._map,F=this._reverseMap;if(!F){F=this._reverseMap=[];for(var g=0;g<w.length;g++)F[w.charCodeAt(g)]=g}var A=w.charAt(64);if(A){var P=_.indexOf(A);P!==-1&&(k=P)}return E(_,k,F)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),R.enc.Base64url)},4756:(N,y,u)=>{var R=u(4633)();N.exports=R;try{regeneratorRuntime=R}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=R:Function("r","regeneratorRuntime = r")(R)}},4893:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.InvalidStateError=y.UnsupportedError=void 0;class u extends Error{constructor(b){super(b),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,u):this.stack=new Error(b).stack}}y.UnsupportedError=u;class R extends Error{constructor(b){super(b),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,R):this.stack=new Error(b).stack}}y.InvalidStateError=R},4905:function(N,y,u){var R;N.exports=(R=u(9021),u(7165),R.pad.Iso10126={pad:function(v,b){var E=4*b,_=E-v.sigBytes%E;v.concat(R.lib.WordArray.random(_-1)).concat(R.lib.WordArray.create([_<<24],1))},unpad:function(v){var b=255&v.words[v.sigBytes-1>>>2];v.sigBytes-=b}},R.pad.Iso10126)},4973:(N,y,u)=>{u.d(y,{Zu:()=>_,lp:()=>E});var R=u(467),v=u(4756),b=u.n(v),E=(u(9027),function(){var m=(0,R.A)(b().mark(function k(w){return b().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(g){var A=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return A?new Promise(function(P,H){A.call(navigator,g,P,H)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),F.next=1,navigator.mediaDevices.getUserMedia(w);case 1:return F.abrupt("return",F.sent);case 2:case"end":return F.stop()}},k)}));return function(k){return m.apply(this,arguments)}}()),_=function(){var m=(0,R.A)(b().mark(function k(w){return b().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(g){var A=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return A?new Promise(function(P,H){A.call(navigator,g,P,H)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),F.next=1,navigator.mediaDevices.getDisplayMedia(w);case 1:return F.abrupt("return",F.sent);case 2:case"end":return F.stop()}},k)}));return function(k){return m.apply(this,arguments)}}()},5020:(N,y,u)=>{var R=function(m){return String(Number(m))===m?Number(m):m},v=function(m,k,w){var F=m.name&&m.names;m.push&&!k[m.push]?k[m.push]=[]:F&&!k[m.name]&&(k[m.name]={});var g=m.push?{}:F?k[m.name]:k;(function(A,P,H,D){if(D&&!H)P[D]=R(A[1]);else for(var S=0;S<H.length;S+=1)A[S+1]!=null&&(P[H[S]]=R(A[S+1]))})(w.match(m.reg),g,m.names,m.name),m.push&&k[m.push].push(g)},b=u(5602),E=RegExp.prototype.test.bind(/^([a-z])=(.*)/);y.parse=function(m){var k={},w=[],F=k;return m.split(/(\r\n|\r|\n)/).filter(E).forEach(function(g){var A=g[0],P=g.slice(2);A==="m"&&(w.push({rtp:[],fmtp:[]}),F=w[w.length-1]);for(var H=0;H<(b[A]||[]).length;H+=1){var D=b[A][H];if(D.reg.test(P))return v(D,F,P)}}),k.media=w,k};var _=function(m,k){var w=k.split(/=(.+)/,2);return w.length===2?m[w[0]]=R(w[1]):w.length===1&&k.length>1&&(m[w[0]]=void 0),m};y.parseParams=function(m){return m.split(/;\s?/).reduce(_,{})},y.parseFmtpConfig=y.parseParams,y.parsePayloads=function(m){return m.toString().split(" ").map(Number)},y.parseRemoteCandidates=function(m){for(var k=[],w=m.split(" ").map(R),F=0;F<w.length;F+=3)k.push({component:w[F],ip:w[F+1],port:w[F+2]});return k},y.parseImageAttributes=function(m){return m.split(" ").map(function(k){return k.substring(1,k.length-1).split(",").reduce(_,{})})},y.parseSimulcastStreamList=function(m){return m.split(";").map(function(k){return k.split(",").map(function(w){var F,g=!1;return w[0]!=="~"?F=R(w):(F=R(w.substring(1,w.length)),g=!0),{scid:F,paused:g}})})}},5071:(N,y,u)=>{u.d(y,{V:()=>R});var R={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},5172:N=>{N.exports=function(y,u){this.v=y,this.k=u},N.exports.__esModule=!0,N.exports.default=N.exports},5248:(N,y,u)=>{u(1765)},5328:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.FakeMediaStreamTrack=void 0;const R=u(182),v=u(5862),b=u(3785);class E extends v.FakeEventTarget{#m;#d;#h;#e;#n;#t;#r;#p;#a;#f;#s;#i=null;#o=null;#c=null;#l=null;#u=null;constructor({kind:m,id:k,label:w,contentHint:F,enabled:g,muted:A,readyState:P,capabilities:H,constraints:D,settings:S,data:x}){super(),this.#m=k??(0,R.v4)(),this.#d=m,this.#h=w??"",this.#r=F??"",this.#n=g??!0,this.#t=A??!1,this.#e=P??"live",this.#p=H??{},this.#a=D??{},this.#f=S??{},this.#s=x??{}}get id(){return this.#m}get kind(){return this.#d}get label(){return this.#h}get contentHint(){return this.#r}set contentHint(m){this.#r=m}get enabled(){return this.#n}set enabled(m){const k=this.#n!==m;this.#n=m,k&&this.dispatchEvent(new Event("enabledchange"))}get muted(){return this.#t}get readyState(){return this.#e}get data(){return this.#s}set data(m){this.#s=m}get onmute(){return this.#i}set onmute(m){this.#i&&this.removeEventListener("mute",this.#i),this.#i=m,m&&this.addEventListener("mute",m)}get onunmute(){return this.#o}set onunmute(m){this.#o&&this.removeEventListener("unmute",this.#o),this.#o=m,m&&this.addEventListener("unmute",m)}get onended(){return this.#c}set onended(m){this.#c&&this.removeEventListener("ended",this.#c),this.#c=m,m&&this.addEventListener("ended",m)}get onenabledchange(){return this.#l}set onenabledchange(m){this.#l&&this.removeEventListener("enabledchange",this.#l),this.#l=m,m&&this.addEventListener("enabledchange",m)}get onstopped(){return this.#u}set onstopped(m){this.#u&&this.removeEventListener("stopped",this.#u),this.#u=m,m&&this.addEventListener("stopped",m)}addEventListener(m,k,w){super.addEventListener(m,k,w)}removeEventListener(m,k){super.removeEventListener(m,k)}stop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new Event("stopped")))}clone({id:m,data:k}={}){return new E({id:m??(0,R.v4)(),kind:this.#d,label:this.#h,contentHint:this.#r,enabled:this.#n,muted:this.#t,readyState:this.#e,capabilities:(0,b.clone)(this.#p),constraints:(0,b.clone)(this.#a),settings:(0,b.clone)(this.#f),data:k??(0,b.clone)(this.#s)})}getCapabilities(){return this.#p}getConstraints(){return this.#a}async applyConstraints(m={}){return this.#a=m,Promise.resolve()}getSettings(){return this.#f}remoteStop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new Event("stopped")),this.dispatchEvent(new Event("ended")))}remoteMute(){this.#t||(this.#t=!0,this.dispatchEvent(new Event("mute")))}remoteUnmute(){this.#t&&(this.#t=!1,this.dispatchEvent(new Event("unmute")))}}y.FakeMediaStreamTrack=E},5370:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0})},5414:N=>{N.exports=(()=>{var y={43:function(b,E,_){var m,k;(function(){m=function(){var w=function(){},F="undefined",g=typeof window!==F&&typeof window.navigator!==F&&/Trident\/|MSIE /.test(window.navigator.userAgent),A=["trace","debug","info","warn","error"];function P(I,U){var z=I[U];if(typeof z.bind=="function")return z.bind(I);try{return Function.prototype.bind.call(z,I)}catch{return function(){return Function.prototype.apply.apply(z,[I,arguments])}}}function H(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function D(I,U){for(var z=0;z<A.length;z++){var $=A[z];this[$]=z<I?w:this.methodFactory($,I,U)}this.log=this.debug}function S(I,U,z){return function(){typeof console!==F&&(D.call(this,U,z),this[I].apply(this,arguments))}}function x(I,U,z){return function($){return $==="debug"&&($="log"),typeof console!==F&&($==="trace"&&g?H:console[$]!==void 0?P(console,$):console.log!==void 0?P(console,"log"):w)}(I)||S.apply(this,arguments)}function d(I,U,z){var $,q=this,ae="loglevel";function Q(){var we;if(typeof window!==F&&ae){try{we=window.localStorage[ae]}catch{}if(typeof we===F)try{var Re=window.document.cookie,me=Re.indexOf(encodeURIComponent(ae)+"=");me!==-1&&(we=/^([^;]+)/.exec(Re.slice(me))[1])}catch{}return q.levels[we]===void 0&&(we=void 0),we}}typeof I=="string"?ae+=":"+I:typeof I=="symbol"&&(ae=void 0),q.name=I,q.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},q.methodFactory=z||x,q.getLevel=function(){return $},q.setLevel=function(we,Re){if(typeof we=="string"&&q.levels[we.toUpperCase()]!==void 0&&(we=q.levels[we.toUpperCase()]),!(typeof we=="number"&&we>=0&&we<=q.levels.SILENT))throw"log.setLevel() called with invalid level: "+we;if($=we,Re!==!1&&function(me){var Ce=(A[me]||"silent").toUpperCase();if(typeof window!==F&&ae){try{return void(window.localStorage[ae]=Ce)}catch{}try{window.document.cookie=encodeURIComponent(ae)+"="+Ce+";"}catch{}}}(we),D.call(q,we,I),typeof console===F&&we<q.levels.SILENT)return"No console available for logging"},q.setDefaultLevel=function(we){Q()||q.setLevel(we,!1)},q.enableAll=function(we){q.setLevel(q.levels.TRACE,we)},q.disableAll=function(we){q.setLevel(q.levels.SILENT,we)};var ve=Q();ve==null&&(ve=U??"WARN"),q.setLevel(ve,!1)}var T=new d,O={};T.getLogger=function(I){if(typeof I!="symbol"&&typeof I!="string"||I==="")throw new TypeError("You must supply a name when creating a logger.");var U=O[I];return U||(U=O[I]=new d(I,T.getLevel(),T.methodFactory)),U};var M=typeof window!==F?window.log:void 0;return T.noConflict=function(){return typeof window!==F&&window.log===T&&(window.log=M),T},T.getLoggers=function(){return O},T.default=T,T},(k=m.call(E,_,E,b))===void 0||(b.exports=k)})()}},u={};function R(b){var E=u[b];if(E!==void 0)return E.exports;var _=u[b]={exports:{}};return y[b].call(_.exports,_,_.exports,R),_.exports}R.d=(b,E)=>{for(var _ in E)R.o(E,_)&&!R.o(b,_)&&Object.defineProperty(b,_,{enumerable:!0,get:E[_]})},R.o=(b,E)=>Object.prototype.hasOwnProperty.call(b,E),R.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var v={};return(()=>{R.r(v),R.d(v,{VideoSDKMetrics:()=>gr});const b="inbound",E="outbound",_={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:b},m={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:E},k={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:b},w={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:E},F="inbound-rtp",g="bytesReceived",A="bytesSent",P="clockRate",H="codecId",D="currentRoundTripTime",S="roundTripTime",x="fractionLost",d="frameHeight",T="frameWidth",O="qualityLimitationReason",M="qualityLimitationDurations",I="qualityLimitationResolutionChanges",U="id",z="jitter",$="kind",q="mimeType",ae="packetsLost",Q="packetsReceived",ve="packetsSent",we="responsesReceived",Re="ssrc",me="selected",Ce="timestamp",Be="totalRoundTripTime",be="roundTripTimeMeasurements",Ye="type",Qe="framesDecoded",Ge="framesEncoded",He="totalDecodeTime",Te="totalEncodeTime",dt="pliCount",_t="nackCount",on="trackId",ln="trackIdentifier",Pn="mediaSourceId",En="audio",rn="video",Ne={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},Me="audio",Ze="video",Ft="network",Tt="data";var St=R(43);const un=()=>`${new Date().toISOString()} | metrics`,Sn=(rt,ut,Zt)=>`${rt} | ${ut} | ${Zt}`;St.setDefaultLevel(St.levels.TRACE);const Ut=(rt,ut,Zt)=>{Zt?St.debug(Sn(un(),rt,ut),Zt):St.debug(Sn(un(),rt,ut))},nr=(rt,ut)=>{St.warn(Sn(un(),rt,ut))},Ar=(rt,ut)=>{St.error(Sn(un(),rt,ut))},Sr="extractor   ",Ur=(rt,ut,Zt)=>{if(!ut)return null;const Pt={};let sn=ut[En][rt];sn||(sn=Zt===b?{..._}:{...m}),Pt[En]=sn;let nn=ut[rn][rt];return nn||(nn=Zt===b?{...k}:{...w}),Pt[rn]=nn,Pt},xr=(rt,ut,Zt,Pt)=>{let sn=!1;const nn=Pt[ut].total_rtt_ms_out,et=Pt[ut].total_rtt_measure_out,On=Zt?Zt[ut].total_rtt_ms_out:0,Ln=Zt?Zt[ut].total_rtt_measure_out:0,Jn={rtt:null,totalRTT:nn,totalRTTMeasurements:et};if(rt[Ce]===Pt[ut].timestamp_out||!Object.prototype.hasOwnProperty.call(rt,S)||Object.prototype.hasOwnProperty.call(rt,be)&&(sn=!0,Number(rt[be])===0||Number(rt[be])-Ln===et))return Jn;const vr=1e3*Number(rt[S]);let Qt=nn+vr,Rt=et+1;return sn&&(Qt=1e3*Number(rt[Be])-On,Rt=Number(rt[be])-Ln),{rtt:vr,totalRTT:Qt,totalRTTMeasurements:Rt}},Or=(rt,ut,Zt)=>rt[Ce]===Zt[ut].timestamp_out?null:Object.prototype.hasOwnProperty.call(rt,z)?1e3*(Number(rt[z])||0):null,Kr=(rt,ut,Zt,Pt)=>{if(!Object.prototype.hasOwnProperty.call(rt,ve)||!Object.prototype.hasOwnProperty.call(rt,A))return{packetsSent:Zt[ut].total_packets_out,packetsLost:Zt[ut].total_packets_lost_out,bytesSent:Zt[ut].total_KBytes_out};const sn=Number(rt[ve])||0-(Pt?Pt[ut].total_packets_out:0),nn=sn-Zt[ut].total_packets_out,et=Number(rt[A])/1024-(Pt?Pt[ut].total_KBytes_out:0),On=et-Zt[ut].total_KBytes_out,Ln=rt[Ce]||Date.now(),Jn=Pt?Pt.timestamp:null;let vr=Zt.timestamp;!vr&&Jn&&(vr=Jn);const Qt=vr?Ln-vr:0;return{packetsSent:sn,deltaPacketsSent:nn,KBytesSent:et,deltaKBytesSent:On,kbsSent:Qt>0?.008*On*1024/Qt*1e3:0}},va=(rt,ut,Zt,Pt)=>{let sn=Zt[ut].total_packets_lost_out,nn=0,et=0;return Object.prototype.hasOwnProperty.call(rt,ae)&&(sn=Number(rt[ae])||0-(Pt?Pt[ut].total_packets_lost_out:0),nn=sn-Zt[ut].total_packets_lost_out),Object.prototype.hasOwnProperty.call(rt,x)&&(et=Number(100*rt[x])),{packetsLost:sn,deltaPacketsLost:nn,fractionLost:et}},ra=(rt,ut,Zt,Pt)=>{if(!Object.prototype.hasOwnProperty.call(rt,Q)||!Object.prototype.hasOwnProperty.call(rt,ae)||!Object.prototype.hasOwnProperty.call(rt,g))return{percent_packets_lost:Zt[ut].percent_packets_lost_in,packetsReceived:Zt[ut].total_packets_in,packetsLost:Zt[ut].total_packets_lost_in,bytesReceived:Zt[ut].total_KBytes_in};const sn=(Number(rt[Q])||0)-(Pt?Pt[ut].total_packets_in:0),nn=(Number(rt[ae])||0)-(Pt?Pt[ut].total_packets_lost_in:0),et=nn-Zt[ut].total_packets_lost_in,On=sn-Zt[ut].total_packets_in,Ln=sn!==Zt[ut].total_packets_in?100*et/(et+On):0,Jn=Number(rt[g])/1024-(Pt?Pt[ut].total_KBytes_in:0),vr=Jn-Zt[ut].total_KBytes_in,Qt=rt[Ce]||Date.now(),Rt=Pt?Pt.timestamp:null;let Un=Zt.timestamp;!Un&&Rt&&(Un=Rt);const In=Un?Qt-Un:0;return{percentPacketsLost:Ln,packetsReceived:sn,deltaPacketsReceived:On,packetsLost:nn,deltaPacketsLost:et,KBytesReceived:Jn,deltaKBytesReceived:vr,kbsReceived:In>0?.008*vr*1024/In*1e3:0}},ua=rt=>rt.candidateType!=="relay"?"":rt.relayProtocol||"",jn=rt=>Object.prototype.hasOwnProperty.call(rt,d)&&Object.prototype.hasOwnProperty.call(rt,T)?{width:rt[T]||null,height:rt[d]||null,framerate:rt.framesPerSecond}:{width:null,height:null,framerate:null};class Ha{constructor(ut,Zt){this._callbacks={onStatsCollected:null},this._id=`collector-${Zt}`,this._moduleName=this._id,this._probeId=Zt,this._config=ut,this._state="idle",this._statsReports=[]}registerCallback(ut,Zt,Pt){ut in this._callbacks?(this._callbacks[ut]={callback:Zt,context:Pt},Ut(this._moduleName,`registered callback '${ut}'`)):Ar(this._moduleName,`can't register callback for '${ut}' - not found`)}unregisterCallback(ut){ut in this._callbacks?(this._callbacks[ut]=null,delete this._callbacks[ut],Ut(this._moduleName,`unregistered callback '${ut}'`)):Ar(this._moduleName,`can't unregister callback for '${ut}' - not found`)}analyze(ut,Zt){const Pt=(nn=>{const et={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(nn){const On={...nn,audio:{},video:{},data:{...nn.data},network:{...nn.network}};return Object.keys(nn.audio).forEach(Ln=>{On.audio[Ln]={...nn.audio[Ln]}}),Object.keys(nn.video).forEach(Ln=>{On.video[Ln]={...nn.video[Ln]}}),On}return{...et,audio:{},video:{},data:{...et.data},network:{...et.network}}})(Zt);Pt.name=this._config.name,Pt.meetingId=this._config.meetingId,Pt.peerId=this._config.peerId,Pt.count=Zt?Zt.count+1:1;let sn=null;return ut.forEach(nn=>{!sn&&nn.timestamp&&(sn=nn.timestamp),((et,On,Ln,Jn)=>{if(!et)return[];switch(et[Ye]){case"candidate-pair":let vr=!1;if(et.nominated&&et.state==="succeeded"&&(vr=!0,Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et),me in et&&!et[me]&&(vr=!1)),vr){et.localCandidateId,et.remoteCandidateId;const Rt=((In,Nn,Fr)=>{const Mr=(In[g]||0)/1024-0,Hr=(In[A]||0)/1024-0,cr=In[Ce]||Date.now(),Kn=Mr-Nn.data.total_KBytes_in,xa=Hr-Nn.data.total_KBytes_out;let ma=Nn.timestamp;const La=ma?cr-ma:0;return{total_KBytes_received:Mr,total_KBytes_sent:Hr,delta_KBytes_received:Kn,delta_KBytes_sent:xa,kbs_speed_received:La>0?.008*Kn*1024/La*1e3:0,kbs_speed_sent:La>0?.008*xa*1024/La*1e3:0}})(et,On),Un=((In=>{In.availableIncomingBitrate,In.availableOutgoingBitrate})(et),((In,Nn,Fr,Mr)=>{if(!Object.prototype.hasOwnProperty.call(In,D))return{rtt:null,totalRTT:Mr[Nn].total_rtt_connectivity_ms,totalRTTMeasurements:Mr[Nn].total_rtt_connectivity_measure};const Hr=1e3*Number(In[D]);let cr=Mr[Nn].total_rtt_connectivity_ms+Hr,Kn=Mr[Nn].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(In,Be)&&(cr=1e3*Number(In[Be])-0),Object.prototype.hasOwnProperty.call(In,we)&&(Kn=Number(In[we])-0),{rtt:Hr,totalRTT:cr,totalRTTMeasurements:Kn}})(et,"data",Jn,On));return[{type:Tt,value:{total_KBytes_in:Rt.total_KBytes_received}},{type:Tt,value:{total_KBytes_out:Rt.total_KBytes_sent}},{type:Tt,value:{delta_KBytes_in:Rt.delta_KBytes_received}},{type:Tt,value:{delta_KBytes_out:Rt.delta_KBytes_sent}},{type:Tt,value:{delta_kbs_in:Rt.kbs_speed_received}},{type:Tt,value:{delta_kbs_out:Rt.kbs_speed_sent}},{type:Tt,value:{delta_rtt_connectivity_ms:Un.rtt}}]}break;case"local-candidate":if(et[U]===On.network.local_candidate_id)return[{type:Ft,value:{infrastructure:et.networkType}},{type:Ft,value:{local_candidate_protocol:et.protocol||""}},{type:Ft,value:{local_candidate_relay_protocol:ua(et)}}];break;case F:{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const Rt=et[Re],Un=Ur(Rt,On,b);Un&&(Un.timestamp=On.timestamp);const In=Ur(Rt,Jn,b);if(In&&(In.timestamp=Jn.timestamp),et[$]===En){const Nn=ra(et,En,Un,In),Fr=Or(et,En,Un),Mr=et[H]||"",Hr=((cr,Kn,xa)=>{const ma=Number(cr.concealmentEvents)||0,La=ma-(xa[Kn].total_concealment_events||0),Va=Number(cr.insertedSamplesForDeceleration)||0,Ci=Va-(xa[Kn].total_inserted_samples_for_decelaration||0),xs=Number(cr.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:ma,deltaConcealmentEvents:La,totalInsertedSamplesForDecelaration:Va,deltaInsertedSamplesForDecelaration:Ci,totalRemovedSamplesForAccelaration:xs,deltaRemovedSampleForAccelaration:xs-(xa[Kn].total_removed_samples_for_accelaration||0)}})(et,En,Un);return[{ssrc:Rt,type:Me,value:{codec_id_in:Mr}},{ssrc:Rt,type:Me,value:{total_packets_in:Nn.packetsReceived}},{ssrc:Rt,type:Me,value:{delta_packets_in:Nn.deltaPacketsReceived}},{ssrc:Rt,type:Me,value:{total_packets_lost_in:Nn.packetsLost}},{ssrc:Rt,type:Me,value:{delta_packets_lost_in:Nn.deltaPacketsLost}},{ssrc:Rt,type:Me,value:{percent_packets_lost_in:Nn.percentPacketsLost}},{ssrc:Rt,type:Me,value:{total_KBytes_in:Nn.KBytesReceived}},{ssrc:Rt,type:Me,value:{delta_KBytes_in:Nn.deltaKBytesReceived}},{ssrc:Rt,type:Me,value:{delta_kbs_in:Nn.kbsReceived}},{ssrc:Rt,type:Me,value:{delta_jitter_ms_in:Fr}},{ssrc:Rt,type:Me,value:{total_concealment_events:Hr.totalConcealmentEvents}},{ssrc:Rt,type:Me,value:{delta_concealment_events:Hr.deltaConcealmentEvents}},{ssrc:Rt,type:Me,value:{total_inserted_samples_for_decelaration:Hr.totalInsertedSamplesForDecelaration}},{ssrc:Rt,type:Me,value:{delta_inserted_samples_for_decelaration:Hr.deltaInsertedSamplesForDecelaration}},{ssrc:Rt,type:Me,value:{total_removed_samples_for_accelaration:Hr.totalRemovedSamplesForAccelaration}},{ssrc:Rt,type:Me,value:{delta_removed_samples_for_accelaration:Hr.deltaRemovedSampleForAccelaration}},{ssrc:Rt,type:Me,value:{track_in:et[on]}},{ssrc:Rt,type:Me,value:{track_id_in:et[ln]}},{ssrc:Rt,type:Me,value:{media_source_id:et[Pn]}}]}if(et[$]===rn){((cr,Kn)=>{if(!Object.prototype.hasOwnProperty.call(cr,Qe)||!Object.prototype.hasOwnProperty.call(cr,He))return{delta_ms_decode_frame:Kn[rn].delta_ms_decode_frame_in,frames_decoded:Kn[rn].total_frames_decoded_in,total_decode_time:Kn[rn].total_time_decoded_in};cr[Qe],cr[He],Kn[rn].total_time_decoded_in,Kn[rn].total_frames_decoded_in})(et,Un);const Nn=ra(et,rn,Un,In),Fr=Or(et,rn,Un),Mr=(et.decoderImplementation,et[H]||null),Hr=jn(et);return((cr,Kn,xa)=>{if(!Object.prototype.hasOwnProperty.call(cr,dt)||!Object.prototype.hasOwnProperty.call(cr,_t))return{pliCount:Kn.total_pli_sent_in,nackCount:Kn.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};cr[dt],xa&&xa[rn].total_pli_sent_in,cr[_t],xa&&xa[rn].total_nack_sent_in,Kn[rn].total_pli_sent_in,Kn[rn].total_nack_sent_in})(et,Un,In),[{ssrc:Rt,type:Ze,value:{codec_id_in:Mr}},{ssrc:Rt,type:Ze,value:{total_packets_in:Nn.packetsReceived}},{ssrc:Rt,type:Ze,value:{delta_packets_in:Nn.deltaPacketsReceived}},{ssrc:Rt,type:Ze,value:{total_packets_lost_in:Nn.packetsLost}},{ssrc:Rt,type:Ze,value:{delta_packets_lost_in:Nn.deltaPacketsLost}},{ssrc:Rt,type:Ze,value:{percent_packets_lost_in:Nn.percentPacketsLost}},{ssrc:Rt,type:Ze,value:{total_KBytes_in:Nn.KBytesReceived}},{ssrc:Rt,type:Ze,value:{delta_KBytes_in:Nn.deltaKBytesReceived}},{ssrc:Rt,type:Ze,value:{delta_kbs_in:Nn.kbsReceived}},{ssrc:Rt,type:Ze,value:{delta_jitter_ms_in:Fr}},{ssrc:Rt,type:Ze,value:{size_in:Hr}},{ssrc:Rt,type:Ze,value:{track_in:et[on]}},{ssrc:Rt,type:Ze,value:{track_id_in:et[ln]}},{ssrc:Rt,type:Ze,value:{media_source_id:et[Pn]}},{ssrc:Rt,type:Ze,value:{pause_count:et.pauseCount}},{ssrc:Rt,type:Ze,value:{total_pauses_duration:et.totalPausesDuration}},{ssrc:Rt,type:Ze,value:{freeze_count:et.freezeCount}},{ssrc:Rt,type:Ze,value:{total_freezes_duration:et.totalFreezesDuration}}]}break}case"outbound-rtp":{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const Rt=et[Re],Un=Ur(Rt,On,E);Un&&(Un.timestamp=On.timestamp);const In=Ur(Rt,Jn,E);if(In&&(In.timestamp=Jn.timestamp),et[$]===En){const Nn=et[H]||null,Fr=Kr(et,En,Un,In);return[{ssrc:Rt,type:Me,value:{codec_id_out:Nn}},{ssrc:Rt,type:Me,value:{total_packets_out:Fr.packetsSent}},{ssrc:Rt,type:Me,value:{delta_packets_out:Fr.deltaPacketsSent}},{ssrc:Rt,type:Me,value:{total_KBytes_out:Fr.KBytesSent}},{type:Me,value:{delta_KBytes_out:Fr.deltaKBytesSent}},{ssrc:Rt,type:Me,value:{delta_kbs_out:Fr.kbsSent}},{ssrc:Rt,type:Me,value:{track_out:et[on]}},{ssrc:Rt,type:Me,value:{track_id_out:et[ln]}},{ssrc:Rt,type:Me,value:{media_source_id:et[Pn]}}]}if(et[$]===rn){et.encoderImplementation;const Nn=et[H]||null,Fr=(((cr,Kn)=>{if(!Object.prototype.hasOwnProperty.call(cr,Ge)||!Object.prototype.hasOwnProperty.call(cr,Te))return{delta_ms_encode_frame:Kn[rn].delta_ms_encode_frame_out,frames_encoded:Kn[rn].total_frames_encoded_out,total_encode_time:Kn[rn].total_time_encoded_out};cr[Ge],cr[Te],Kn[rn].total_time_encoded_out,Kn[rn].total_frames_encoded_out})(et,Un),jn(et)),Mr=(cr=>{const Kn=Object.prototype.hasOwnProperty.call(cr,O)?cr[O]:null,xa=Object.prototype.hasOwnProperty.call(cr,I)?cr[I]:null,ma=Object.prototype.hasOwnProperty.call(cr,M)?cr[M]:null;return ma&&Object.keys(ma).forEach(La=>{ma[La]>1e3&&(ma[La]=Number(ma[La]/1e3))}),{reason:Kn,durations:ma,resolutionChanges:xa}})(et),Hr=(((cr,Kn,xa)=>{if(!Object.prototype.hasOwnProperty.call(cr,dt)||!Object.prototype.hasOwnProperty.call(cr,_t))return{pliCount:Kn.total_pli_received_out,nackCount:Kn.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};cr[dt],xa&&xa[rn].total_pli_received_out,cr[_t],xa&&xa[rn].total_nack_received_out,Kn[rn].total_pli_received_out,Kn[rn].total_nack_received_out})(et,Un,In),Kr(et,rn,Un,In));return[{ssrc:Rt,type:Ze,value:{codec_id_out:Nn}},{ssrc:Rt,type:Ze,value:{total_packets_out:Hr.packetsSent}},{ssrc:Rt,type:Ze,value:{delta_packets_out:Hr.deltaPacketsSent}},{ssrc:Rt,type:Ze,value:{total_KBytes_out:Hr.KBytesSent}},{ssrc:Rt,type:Ze,value:{delta_KBytes_out:Hr.deltaKBytesSent}},{ssrc:Rt,type:Ze,value:{delta_kbs_out:Hr.kbsSent}},{ssrc:Rt,type:Ze,value:{size_out:Fr}},{ssrc:Rt,type:Ze,value:{limitation_out:Mr}},{ssrc:Rt,type:Ze,value:{track_out:et[on]}},{ssrc:Rt,type:Ze,value:{track_id_out:et[ln]}},{ssrc:Rt,type:Ze,value:{media_source_id:et[Pn]}}]}break}case"media-source":{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const Rt=[];return Object.keys(On[En]).forEach(Un=>{const In=On[En][Un];if(In.media_source_id===et[U]){var Nn=et[ln];Rt.push({ssrc:In.ssrc,type:Me,value:{track_id_out:Nn}})}}),Object.keys(On[rn]).forEach(Un=>{const In=On[rn][Un];if(In.media_source_id===et[U]){var Nn=et[ln];Rt.push({ssrc:In.ssrc,type:Ze,value:{track_id_out:Nn}})}}),Rt}case"track":{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const Rt=[];return Object.keys(On[En]).forEach(Un=>{const In=On[En][Un];if(In.track_in===et[U]||In.track_out===et[U]){Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);var Nn=et[ln];et[U]===In.track_in?Rt.push({ssrc:In.ssrc,type:Me,value:{track_id_in:Nn}}):Rt.push({ssrc:In.ssrc,type:Me,value:{track_id_out:Nn}})}}),Object.keys(On[rn]).forEach(Un=>{const In=On[rn][Un];if(In.track_in===et[U]||In.track_out===et[U]){Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);var Nn=et[ln];et[U]===In.track_in?Rt.push({ssrc:In.ssrc,type:Ze,value:{track_id_in:Nn}}):Rt.push({ssrc:In.ssrc,type:Ze,value:{track_id_out:Nn}})}}),Rt}case"codec":const Qt=[];return Object.keys(On[En]).forEach(Rt=>{const Un=On[En][Rt];if(Un.codec_id_in===et[U]||Un.codec_id_out===et[U]){Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const In=(Nn=>({channels:Nn.channels||null,clock_rate:Nn[P]||null,mime_type:Nn[q]||null,sdp_fmtp_line:Nn.sdpFmtpLine||null}))(et);et[U]===Un.codec_id_in?Qt.push({ssrc:Un.ssrc,type:Me,value:{codec_in:In}}):Qt.push({ssrc:Un.ssrc,type:Me,value:{codec_out:In}})}}),Object.keys(On[rn]).forEach(Rt=>{const Un=On[rn][Rt];if(Un.codec_id_in===et[U]||Un.codec_id_out===et[U]){Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const In=(Nn=>({clock_rate:Nn[P]||null,mime_type:Nn[q]||null}))(et);et[U]===Un.codec_id_in?Qt.push({ssrc:Un.ssrc,type:Ze,value:{codec_in:In}}):Qt.push({ssrc:Un.ssrc,type:Ze,value:{codec_out:In}})}}),Qt;case"remote-inbound-rtp":{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const Rt=et[Re],Un=Ur(Rt,On,E),In=Ur(Rt,Jn,E);if(et[$]===En){const Nn=xr(et,En,In,Un),Fr=Or(et,En,Un),Mr=va(et,En,Un,In);return[{ssrc:Rt,type:Me,value:{delta_rtt_ms_out:Nn.rtt}},{ssrc:Rt,type:Me,value:{delta_jitter_ms_out:Fr}},{ssrc:Rt,type:Me,value:{timestamp_out:et[Ce]}},{ssrc:Rt,type:Me,value:{total_packets_lost_out:Mr.packetsLost}},{ssrc:Rt,type:Me,value:{delta_packets_lost_out:Mr.deltaPacketsLost}},{ssrc:Rt,type:Me,value:{percent_packets_lost_out:Mr.fractionLost}}]}if(et[$]===rn){const Nn=xr(et,rn,In,Un),Fr=Or(et,rn,Un),Mr=va(et,rn,Un,In);return[{ssrc:Rt,type:Ze,value:{delta_rtt_ms_out:Nn.rtt}},{ssrc:Rt,type:Ze,value:{delta_jitter_ms_out:Fr}},{ssrc:Rt,type:Ze,value:{timestamp_out:et[Ce]}},{ssrc:Rt,type:Ze,value:{total_packets_lost_out:Mr.packetsLost}},{ssrc:Rt,type:Ze,value:{delta_packets_lost_out:Mr.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const Rt=et[Re],Un=Ur(Rt,On,E),In=Ur(Rt,Jn,E);if(et[$]===En){const Nn=xr(et,En,In,Un);return[{ssrc:Rt,type:Me,value:{delta_rtt_ms_in:Nn.rtt}},{ssrc:Rt,type:Me,value:{timestamp_in:et[Ce]}}]}break}}return[]})(nn,Pt,Pt.name,null).forEach(et=>{if(et.value&&et.type)if(et.ssrc){let Jn=Pt[et.type][et.ssrc];Jn||(On=et.type,Ln=nn.type,Jn=On===En?Ln===F?{..._}:{...m}:Ln===F?{...k}:{...w},Jn.ssrc=et.ssrc,Pt[et.type][et.ssrc]=Jn),Object.keys(et.value).forEach(vr=>{et.value[vr]!==void 0&&(Jn[vr]=et.value[vr])})}else Object.keys(et.value).forEach(Jn=>{et.value[Jn]!==void 0&&(Pt[et.type][Jn]=et.value[Jn])});var On,Ln})}),Pt.timestamp=sn,Pt}async collectStats(){try{const ut=await this._config.monitoringObject.getStats(),Zt=this.analyze(ut,this._statsReports.slice().pop()||null);return this._statsReports.push(Zt),this.fireOnStatsCollected(Zt),ut}catch(ut){return Ar(this._moduleName,`got error ${ut}`),null}}fireOnStatsCollected(ut){if(this._callbacks.onStatsCollected){const Zt={};Zt.meetingId=ut.meetingId,Zt.peerId=ut.peerId,Zt.name=ut.name,Zt.audio=[],Zt.video=[],Object.values(ut.audio).forEach(Pt=>{const sn={};if(sn.network=Ne[ut.network.infrastructure],sn.timestamp=ut.timestamp,Pt.direction==b){sn.codec=Pt.codec_in.mime_type,sn.jitter=Pt.delta_jitter_ms_in,sn.bitrate=Pt.delta_kbs_in,sn.packetsLost=Pt.delta_packets_lost_in,sn.rtt=ut.data.delta_rtt_connectivity_ms||0,sn.totalPackets=Pt.delta_packets_in,sn.concealmentEvents=Pt.delta_concealment_events,sn.removedSampleForAccelaration=Pt.delta_removed_samples_for_accelaration,sn.insertedSamplesForDecelaration=Pt.delta_inserted_samples_for_decelaration;const nn=JSON.stringify(Pt.track_id_in).replace(/[{}"]/g,"");sn.trackId=nn}else Pt.direction==E&&(sn.codec=Pt.codec_out.mime_type,sn.jitter=Pt.delta_jitter_ms_out,sn.bitrate=Pt.delta_kbs_out,sn.packetsLost=Pt.delta_packets_lost_out,sn.rtt=ut.data.delta_rtt_connectivity_ms||0,sn.totalPackets=Pt.delta_packets_out,sn.trackId=Pt.track_id_out);Zt.audio.push(sn)}),Object.values(ut.video).forEach(Pt=>{const sn={};if(sn.network=Ne[ut.network.infrastructure],sn.timestamp=ut.timestamp,Pt.direction==b){sn.codec=Pt.codec_in.mime_type,sn.jitter=Pt.delta_jitter_ms_in,sn.bitrate=Pt.delta_kbs_in,sn.packetsLost=Pt.delta_packets_lost_in,sn.rtt=ut.data.delta_rtt_connectivity_ms||0,sn.totalPackets=Pt.delta_packets_in,sn.size=Pt.size_in,sn.pauseCount=Pt.pause_count,sn.totalPausesDuration=Pt.total_pauses_duration,sn.freezeCount=Pt.freeze_count,sn.totalFreezesDuration=Pt.total_freezes_duration;const nn=JSON.stringify(Pt.track_id_in).replace(/[{}"]/g,"");sn.trackId=nn}else Pt.direction==E&&(sn.codec=Pt.codec_out.mime_type,sn.jitter=Pt.delta_jitter_ms_out,sn.bitrate=Pt.delta_kbs_out,sn.packetsLost=Pt.delta_packets_lost_out,sn.rtt=ut.data.delta_rtt_connectivity_ms||0,sn.totalPackets=Pt.delta_packets_out,sn.limitation=Pt.limitation_out,sn.size=Pt.size_out,sn.trackId=Pt.track_id_out);Zt.video.push(sn)}),this._callbacks.onStatsCollected.callback(Zt)}}}class Ea{constructor(ut){this._id=ut.name&&ut.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=ut,this._collector=new Ha(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?nr("Probe already started."):(Ut(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{Ut(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),Ut(this._moduleName,"Probe Stopped")):nr("Probe not running, Please start first.")}set onStatsCollected(ut){ut?this._collector.registerCallback("onStatsCollected",ut):this._collector.unregisterCallback("onStatsCollected")}}const Qr={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class gr{constructor(ut){var Zt;this._config={defaultConfig:Qr,...ut},this._probes=[],Zt=this._config.verbose||!1,St.setLevel(Zt?St.levels.TRACE:St.levels.INFO),Ut("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(ut,Zt){if(!ut)throw new Error("undefined monitoring object");const Pt={monitoringObject:ut,...Zt,...this._config},sn=new Ea(Pt);return this._probes.push(sn),sn}removeExistingProbe(ut){if(!ut)throw new Error("undefined probe");ut.stop(),this._probes=this._probes.filter(Zt=>ut.id!==Zt.id)}getProbe(ut){for(let Zt of this.probes)if(Zt.id==ut)return Zt}startAllProbes(){this._probes.forEach((ut,Zt)=>{ut.start()})}stopAllProbes(){this._probes.forEach(ut=>ut.stop())}}})(),v})()},5458:(N,y,u)=>{u.d(y,{A:()=>b});var R=u(3145),v=u(7800);function b(E){return function(_){if(Array.isArray(_))return(0,R.A)(_)}(E)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(E)||(0,v.A)(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},5471:function(N,y,u){var R,v,b,E,_,m,k,w;N.exports=(w=u(9021),v=(R=w).lib,b=v.WordArray,E=v.Hasher,_=R.algo,m=[],k=_.SHA1=E.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(F,g){for(var A=this._hash.words,P=A[0],H=A[1],D=A[2],S=A[3],x=A[4],d=0;d<80;d++){if(d<16)m[d]=0|F[g+d];else{var T=m[d-3]^m[d-8]^m[d-14]^m[d-16];m[d]=T<<1|T>>>31}var O=(P<<5|P>>>27)+x+m[d];O+=d<20?1518500249+(H&D|~H&S):d<40?1859775393+(H^D^S):d<60?(H&D|H&S|D&S)-1894007588:(H^D^S)-899497514,x=S,S=D,D=H<<30|H>>>2,H=P,P=O}A[0]=A[0]+P|0,A[1]=A[1]+H|0,A[2]=A[2]+D|0,A[3]=A[3]+S|0,A[4]=A[4]+x|0},_doFinalize:function(){var F=this._data,g=F.words,A=8*this._nDataBytes,P=8*F.sigBytes;return g[P>>>5]|=128<<24-P%32,g[14+(P+64>>>9<<4)]=Math.floor(A/4294967296),g[15+(P+64>>>9<<4)]=A,F.sigBytes=4*g.length,this._process(),this._hash},clone:function(){var F=E.clone.call(this);return F._hash=this._hash.clone(),F}}),R.SHA1=E._createHelper(k),R.HmacSHA1=E._createHmacHelper(k),w.SHA1)},5501:(N,y,u)=>{u.d(y,{A:()=>v});var R=u(3662);function v(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(E&&E.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),E&&(0,R.A)(b,E)}},5503:function(N,y,u){var R;N.exports=(R=u(9021),function(){var v=R,b=v.lib.WordArray,E=v.enc;function _(m){return m<<8&4278255360|m>>>8&16711935}E.Utf16=E.Utf16BE={stringify:function(m){for(var k=m.words,w=m.sigBytes,F=[],g=0;g<w;g+=2){var A=k[g>>>2]>>>16-g%4*8&65535;F.push(String.fromCharCode(A))}return F.join("")},parse:function(m){for(var k=m.length,w=[],F=0;F<k;F++)w[F>>>1]|=m.charCodeAt(F)<<16-F%2*16;return b.create(w,2*k)}},E.Utf16LE={stringify:function(m){for(var k=m.words,w=m.sigBytes,F=[],g=0;g<w;g+=2){var A=_(k[g>>>2]>>>16-g%4*8&65535);F.push(String.fromCharCode(A))}return F.join("")},parse:function(m){for(var k=m.length,w=[],F=0;F<k;F++)w[F>>>1]|=_(m.charCodeAt(F)<<16-F%2*16);return b.create(w,2*k)}}}(),R.enc.Utf16)},5535:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Chrome70=void 0;const R=u(7363),v=u(2994),b=u(1765),E=u(8046),_=u(5544),m=u(5938),k=u(521),w=u(1305),F=u(3303),g=new v.Logger("Chrome70"),A={OS:1024,MIS:1024};class P extends k.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new P}constructor(){super()}get name(){return"Chrome70"}close(){if(g.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");const D=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{D.addTransceiver("audio"),D.addTransceiver("video");const S=await D.createOffer();try{D.close()}catch{}const x=R.parse(S.sdp);return _.extractRtpCapabilities({sdpObject:x})}catch(S){try{D.close()}catch{}throw S}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:A}}run({direction:D,iceParameters:S,iceCandidates:x,dtlsParameters:d,sctpParameters:T,iceServers:O,iceTransportPolicy:M,additionalSettings:I,proprietaryConstraints:U,extendedRtpCapabilities:z}){g.debug("run()"),this._direction=D,this._remoteSdp=new w.RemoteSdp({iceParameters:S,iceCandidates:x,dtlsParameters:d,sctpParameters:T}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",z),video:E.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",z),video:E.getSendingRemoteRtpParameters("video",z)},d.role&&d.role!=="auto"&&(this._forcedLocalDtlsRole=d.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...I},U),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",$=>{this.emit("@icecandidateerror",$)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(D){g.debug("updateIceServers()");const S=this._pc.getConfiguration();S.iceServers=D,this._pc.setConfiguration(S)}async restartIce(D){if(g.debug("restartIce()"),this._remoteSdp.updateIceParameters(D),this._transportReady)if(this._direction==="send"){const S=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const x={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const S={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const x=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this._pc.getStats()}async send({track:D,encodings:S,codecOptions:x,codec:d}){this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",D.kind,D.id);const T=b.clone(this._sendingRtpParametersByKind[D.kind]);T.codecs=E.reduceCodecs(T.codecs,d);const O=b.clone(this._sendingRemoteRtpParametersByKind[D.kind]);O.codecs=E.reduceCodecs(O.codecs,d);const M=this._remoteSdp.getNextMediaSectionIdx(),I=this._pc.addTransceiver(D,{direction:"sendonly",streams:[this._sendStream]});let U,z=await this._pc.createOffer(),$=R.parse(z.sdp);$.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),S&&S.length>1&&(g.debug("send() | enabling legacy simulcast"),$=R.parse(z.sdp),U=$.media[M.idx],m.addLegacySimulcast({offerMediaObject:U,numStreams:S.length}),z={type:"offer",sdp:R.write($)});let q=!1;const ae=(0,F.parse)((S??[{}])[0].scalabilityMode);if(S&&S.length===1&&ae.spatialLayers>1&&T.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(g.debug("send() | enabling legacy simulcast for VP9 SVC"),q=!0,$=R.parse(z.sdp),U=$.media[M.idx],m.addLegacySimulcast({offerMediaObject:U,numStreams:ae.spatialLayers}),z={type:"offer",sdp:R.write($)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),S){g.debug("send() | applying given encodings");const we=I.sender.getParameters();for(let Re=0;Re<(we.encodings??[]).length;++Re){const me=we.encodings[Re],Ce=S[Re];if(!Ce)break;we.encodings[Re]=Object.assign(me,Ce)}await I.sender.setParameters(we)}const Q=I.mid;if(T.mid=Q,$=R.parse(this._pc.localDescription.sdp),U=$.media[M.idx],T.rtcp.cname=_.getCname({offerMediaObject:U}),T.encodings=m.getRtpEncodings({offerMediaObject:U}),S)for(let we=0;we<T.encodings.length;++we)S[we]&&Object.assign(T.encodings[we],S[we]);if(q&&(T.encodings=[T.encodings[0]]),T.encodings.length>1&&(T.codecs[0].mimeType.toLowerCase()==="video/vp8"||T.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const we of T.encodings)we.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:U,reuseMid:M.reuseMid,offerRtpParameters:T,answerRtpParameters:O,codecOptions:x});const ve={type:"answer",sdp:this._remoteSdp.getSdp()};return g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ve),await this._pc.setRemoteDescription(ve),this._mapMidTransceiver.set(Q,I),{localId:Q,rtpParameters:T,rtpSender:I.sender}}async stopSending(D){this.assertSendDirection(),g.debug("stopSending() [localId:%s]",D);const S=this._mapMidTransceiver.get(D);if(!S)throw new Error("associated RTCRtpTransceiver not found");if(S.sender.replaceTrack(null),this._pc.removeTrack(S.sender),this._remoteSdp.closeMediaSection(S.mid))try{S.stop()}catch{}const x=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const d={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._mapMidTransceiver.delete(D)}async pauseSending(D){}async resumeSending(D){}async replaceTrack(D,S){this.assertSendDirection(),S?g.debug("replaceTrack() [localId:%s, track.id:%s]",D,S.id):g.debug("replaceTrack() [localId:%s, no track]",D);const x=this._mapMidTransceiver.get(D);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(S)}async setMaxSpatialLayer(D,S){this.assertSendDirection(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",D,S);const x=this._mapMidTransceiver.get(D);if(!x)throw new Error("associated RTCRtpTransceiver not found");const d=x.sender.getParameters();d.encodings.forEach((M,I)=>{M.active=I<=S}),await x.sender.setParameters(d),this._remoteSdp.muxMediaSectionSimulcast(D,d.encodings);const T=await this._pc.createOffer();g.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async setRtpEncodingParameters(D,S){this.assertSendDirection(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",D,S);const x=this._mapMidTransceiver.get(D);if(!x)throw new Error("associated RTCRtpTransceiver not found");const d=x.sender.getParameters();d.encodings.forEach((M,I)=>{d.encodings[I]={...M,...S}}),await x.sender.setParameters(d),this._remoteSdp.muxMediaSectionSimulcast(D,d.encodings);const T=await this._pc.createOffer();g.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async getSenderStats(D){this.assertSendDirection();const S=this._mapMidTransceiver.get(D);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.sender.getStats()}async sendDataChannel({ordered:D,maxPacketLifeTime:S,maxRetransmits:x,label:d,protocol:T}){this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:D,maxPacketLifeTime:S,maxRetransmitTime:S,maxRetransmits:x,protocol:T};g.debug("sendDataChannel() [options:%o]",O);const M=this._pc.createDataChannel(d,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%A.MIS,!this._hasDataChannelMediaSection){const I=await this._pc.createOffer(),U=R.parse(I.sdp),z=U.media.find(q=>q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const $={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(D){this.assertRecvDirection();const S=[],x=new Map;for(const M of D){const{trackId:I,kind:U,rtpParameters:z,streamId:$}=M;g.debug("receive() [trackId:%s, kind:%s]",I,U);const q=z.mid??String(this._mapMidTransceiver.size);x.set(I,q),this._remoteSdp.receive({mid:q,kind:U,offerRtpParameters:z,streamId:$??z.rtcp.cname,trackId:I})}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);let T=await this._pc.createAnswer();const O=R.parse(T.sdp);for(const M of D){const{trackId:I,rtpParameters:U}=M,z=x.get(I),$=O.media.find(q=>String(q.mid)===z);_.applyCodecParameters({offerRtpParameters:U,answerMediaObject:$})}T={type:"answer",sdp:R.write(O)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T);for(const M of D){const{trackId:I}=M,U=x.get(I),z=this._pc.getTransceivers().find($=>$.mid===U);if(!z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(U,z),S.push({localId:U,track:z.receiver.track,rtpReceiver:z.receiver})}return S}async stopReceiving(D){this.assertRecvDirection();for(const d of D){g.debug("stopReceiving() [localId:%s]",d);const T=this._mapMidTransceiver.get(d);if(!T)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(T.mid)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const x=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const d of D)this._mapMidTransceiver.delete(d)}async pauseReceiving(D){}async resumeReceiving(D){}async getReceiverStats(D){this.assertRecvDirection();const S=this._mapMidTransceiver.get(D);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:D,label:S,protocol:x}){this.assertRecvDirection();const{streamId:d,ordered:T,maxPacketLifeTime:O,maxRetransmits:M}=D,I={negotiated:!0,id:d,ordered:T,maxPacketLifeTime:O,maxRetransmitTime:O,maxRetransmits:M,protocol:x};g.debug("receiveDataChannel() [options:%o]",I);const U=this._pc.createDataChannel(S,I);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const z={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const $=await this._pc.createAnswer();if(!this._transportReady){const q=R.parse($.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:q})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setLocalDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:U}}async setupTransport({localDtlsRole:D,localSdpObject:S}){S||(S=R.parse(this._pc.localDescription.sdp));const x=_.extractDtlsParameters({sdpObject:S});x.role=D,this._remoteSdp.updateDtlsRole(D==="client"?"server":"client"),await new Promise((d,T)=>{this.safeEmit("@connect",{dtlsParameters:x},d,T)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.Chrome70=P},5544:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.extractRtpCapabilities=function({sdpObject:v}){const b=new Map,E=[];let _=!1,m=!1;for(const k of v.media){const w=k.type;switch(w){case"audio":if(_)continue;_=!0;break;case"video":if(m)continue;m=!0;break;default:continue}for(const F of k.rtp){const g={kind:w,mimeType:`${w}/${F.codec}`,preferredPayloadType:F.payload,clockRate:F.rate,channels:F.encoding,parameters:{},rtcpFeedback:[]};b.set(g.preferredPayloadType,g)}for(const F of k.fmtp??[]){const g=R.parseParams(F.config),A=b.get(F.payload);A&&(g?.hasOwnProperty("profile-level-id")&&(g["profile-level-id"]=String(g["profile-level-id"])),A.parameters=g)}for(const F of k.rtcpFb??[]){const g={type:F.type,parameter:F.subtype};if(g.parameter||delete g.parameter,F.payload!=="*"){const A=b.get(F.payload);if(!A)continue;A.rtcpFeedback.push(g)}else for(const A of b.values())A.kind!==w||/.+\/rtx$/i.test(A.mimeType)||A.rtcpFeedback.push(g)}for(const F of k.ext??[]){if(F["encrypt-uri"])continue;const g={kind:w,uri:F.uri,preferredId:F.value};E.push(g)}}return{codecs:Array.from(b.values()),headerExtensions:E}},y.extractDtlsParameters=function({sdpObject:v}){let b,E=v.setup,_=v.fingerprint;if(!E||!_){const m=(v.media??[]).find(k=>k.port!==0);m&&(E??=m.setup,_??=m.fingerprint)}if(!E)throw new Error("no a=setup found at SDP session or media level");if(!_)throw new Error("no a=fingerprint found at SDP session or media level");switch(E){case"active":b="client";break;case"passive":b="server";break;case"actpass":b="auto"}return{role:b,fingerprints:[{algorithm:_.type,value:_.hash}]}},y.getCname=function({offerMediaObject:v}){const b=(v.ssrcs??[]).find(E=>E.attribute==="cname");return b?b.value:""},y.applyCodecParameters=function({offerRtpParameters:v,answerMediaObject:b}){for(const E of v.codecs){const _=E.mimeType.toLowerCase();if(_!=="audio/opus"||!(b.rtp??[]).find(w=>w.payload===E.payloadType))continue;b.fmtp=b.fmtp??[];let m=b.fmtp.find(w=>w.payload===E.payloadType);m||(m={payload:E.payloadType,config:""},b.fmtp.push(m));const k=R.parseParams(m.config);switch(_){case"audio/opus":{const w=E.parameters["sprop-stereo"];w!==void 0&&(k.stereo=Number(w)?1:0);break}}m.config="";for(const w of Object.keys(k))m.config&&(m.config+=";"),m.config+=`${w}=${k[w]}`}};const R=u(7363)},5546:N=>{function y(u,R,v,b){var E=Object.defineProperty;try{E({},"",{})}catch{E=0}N.exports=y=function(_,m,k,w){if(m)E?E(_,m,{value:k,enumerable:!w,configurable:!w,writable:!w}):_[m]=k;else{var F=function(g,A){y(_,g,function(P){return this._invoke(g,A,P)})};F("next",0),F("throw",1),F("return",2)}},N.exports.__esModule=!0,N.exports.default=N.exports,y(u,R,v,b)}N.exports=y,N.exports.__esModule=!0,N.exports.default=N.exports},5601:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Transport=void 0;const R=u(8876),v=u(2994),b=u(3953),E=u(4893),_=u(1765),m=u(8046),k=u(9792),w=u(3518),F=u(7504),g=u(9166),A=new v.Logger("Transport");class P{consumerOptions;promise;resolve;reject;constructor(S){this.consumerOptions=S,this.promise=new Promise((x,d)=>{this.resolve=x,this.reject=d})}}class H extends b.EnhancedEventEmitter{_id;_closed=!1;_direction;_extendedRtpCapabilities;_canProduceByKind;_maxSctpMessageSize;_handler;_iceGatheringState="new";_connectionState="new";_appData;_producers=new Map;_consumers=new Map;_dataProducers=new Map;_dataConsumers=new Map;_probatorConsumerCreated=!1;_awaitQueue=new R.AwaitQueue;_pendingConsumerTasks=[];_consumerCreationInProgress=!1;_pendingPauseConsumers=new Map;_consumerPauseInProgress=!1;_pendingResumeConsumers=new Map;_consumerResumeInProgress=!1;_pendingCloseConsumers=new Map;_consumerCloseInProgress=!1;_observer=new b.EnhancedEventEmitter;constructor({direction:S,id:x,iceParameters:d,iceCandidates:T,dtlsParameters:O,sctpParameters:M,iceServers:I,iceTransportPolicy:U,additionalSettings:z,proprietaryConstraints:$,appData:q,handlerFactory:ae,extendedRtpCapabilities:Q,canProduceByKind:ve}){super(),A.debug("constructor() [id:%s, direction:%s]",x,S),this._id=x,this._direction=S,this._extendedRtpCapabilities=Q,this._canProduceByKind=ve,this._maxSctpMessageSize=M?M.maxMessageSize:null;const we=_.clone(z)??{};delete we.iceServers,delete we.iceTransportPolicy,delete we.bundlePolicy,delete we.rtcpMuxPolicy,delete we.sdpSemantics,this._handler=ae(),this._handler.run({direction:S,iceParameters:d,iceCandidates:T,dtlsParameters:O,sctpParameters:M,iceServers:I,iceTransportPolicy:U,additionalSettings:we,proprietaryConstraints:$,extendedRtpCapabilities:Q}),this._appData=q??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(S){this._appData=S}get observer(){return this._observer}close(){if(!this._closed){A.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const S of this._producers.values())S.transportClosed();this._producers.clear();for(const S of this._consumers.values())S.transportClosed();this._consumers.clear();for(const S of this._dataProducers.values())S.transportClosed();this._dataProducers.clear();for(const S of this._dataConsumers.values())S.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new E.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:S}){if(A.debug("restartIce()"),this._closed)throw new E.InvalidStateError("closed");if(!S)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(S),"transport.restartIce()")}async updateIceServers({iceServers:S}={}){if(A.debug("updateIceServers()"),this._closed)throw new E.InvalidStateError("closed");if(!Array.isArray(S))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(S),"transport.updateIceServers()")}async produce({track:S,encodings:x,codecOptions:d,codec:T,stopTracks:O=!0,disableTrackOnPause:M=!0,zeroRtpOnPause:I=!1,onRtpSender:U,appData:z={}}={}){if(A.debug("produce() [track:%o]",S),this._closed)throw new E.InvalidStateError("closed");if(!S)throw new TypeError("missing track");if(this._direction!=="send")throw new E.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[S.kind])throw new E.UnsupportedError(`cannot produce ${S.kind}`);if(S.readyState==="ended")throw new E.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(z&&typeof z!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let $;if(x&&!Array.isArray(x))throw TypeError("encodings must be an array");x&&x.length===0?$=void 0:x&&($=x.map(ve=>{const we={active:!0};return ve.active===!1&&(we.active=!1),typeof ve.dtx=="boolean"&&(we.dtx=ve.dtx),typeof ve.scalabilityMode=="string"&&(we.scalabilityMode=ve.scalabilityMode),typeof ve.scaleResolutionDownBy=="number"&&(we.scaleResolutionDownBy=ve.scaleResolutionDownBy),typeof ve.maxBitrate=="number"&&(we.maxBitrate=ve.maxBitrate),typeof ve.maxFramerate=="number"&&(we.maxFramerate=ve.maxFramerate),typeof ve.adaptivePtime=="boolean"&&(we.adaptivePtime=ve.adaptivePtime),typeof ve.priority=="string"&&(we.priority=ve.priority),typeof ve.networkPriority=="string"&&(we.networkPriority=ve.networkPriority),we}));const{localId:q,rtpParameters:ae,rtpSender:Q}=await this._handler.send({track:S,encodings:$,codecOptions:d,codec:T,onRtpSender:U});try{m.validateRtpParameters(ae);const{id:ve}=await new Promise((Re,me)=>{this.safeEmit("produce",{kind:S.kind,rtpParameters:ae,appData:z},Re,me)}),we=new k.Producer({id:ve,localId:q,rtpSender:Q,track:S,rtpParameters:ae,stopTracks:O,disableTrackOnPause:M,zeroRtpOnPause:I,appData:z});return this._producers.set(we.id,we),this.handleProducer(we),this._observer.safeEmit("newproducer",we),we}catch(ve){throw this._handler.stopSending(q).catch(()=>{}),ve}},"transport.produce()").catch($=>{if(O)try{S.stop()}catch{}throw $})}async consume({id:S,producerId:x,kind:d,rtpParameters:T,streamId:O,onRtpReceiver:M,appData:I={}}){if(A.debug("consume()"),this._closed)throw new E.InvalidStateError("closed");if(this._direction!=="recv")throw new E.UnsupportedError("not a receiving Transport");if(typeof S!="string")throw new TypeError("missing id");if(typeof x!="string")throw new TypeError("missing producerId");if(d!=="audio"&&d!=="video")throw new TypeError(`invalid kind '${d}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(I&&typeof I!="object")throw new TypeError("if given, appData must be an object");const U=_.clone(T);if(!m.canReceive(U,this._extendedRtpCapabilities))throw new E.UnsupportedError("cannot consume this Producer");const z=new P({id:S,producerId:x,kind:d,rtpParameters:U,streamId:O,onRtpReceiver:M,appData:I});return this._pendingConsumerTasks.push(z),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),z.promise}async produceData({ordered:S=!0,maxPacketLifeTime:x,maxRetransmits:d,label:T="",protocol:O="",appData:M={}}={}){if(A.debug("produceData()"),this._closed)throw new E.InvalidStateError("closed");if(this._direction!=="send")throw new E.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new E.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(M&&typeof M!="object")throw new TypeError("if given, appData must be an object");return(x||d)&&(S=!1),this._awaitQueue.push(async()=>{const{dataChannel:I,sctpStreamParameters:U}=await this._handler.sendDataChannel({ordered:S,maxPacketLifeTime:x,maxRetransmits:d,label:T,protocol:O});m.validateSctpStreamParameters(U);const{id:z}=await new Promise((q,ae)=>{this.safeEmit("producedata",{sctpStreamParameters:U,label:T,protocol:O,appData:M},q,ae)}),$=new F.DataProducer({id:z,dataChannel:I,sctpStreamParameters:U,appData:M});return this._dataProducers.set($.id,$),this.handleDataProducer($),this._observer.safeEmit("newdataproducer",$),$},"transport.produceData()")}async consumeData({id:S,dataProducerId:x,sctpStreamParameters:d,label:T="",protocol:O="",appData:M={}}){if(A.debug("consumeData()"),this._closed)throw new E.InvalidStateError("closed");if(this._direction!=="recv")throw new E.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new E.UnsupportedError("SCTP not enabled by remote Transport");if(typeof S!="string")throw new TypeError("missing id");if(typeof x!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(M&&typeof M!="object")throw new TypeError("if given, appData must be an object");const I=_.clone(d);return m.validateSctpStreamParameters(I),this._awaitQueue.push(async()=>{const{dataChannel:U}=await this._handler.receiveDataChannel({sctpStreamParameters:I,label:T,protocol:O}),z=new g.DataConsumer({id:S,dataProducerId:x,dataChannel:U,sctpStreamParameters:I,appData:M});return this._dataConsumers.set(z.id,z),this.handleDataConsumer(z),this._observer.safeEmit("newdataconsumer",z),z},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void A.debug("createPendingConsumers() | there is no Consumer to be created");const S=[...this._pendingConsumerTasks];let x;this._pendingConsumerTasks=[];const d=[];for(const T of S){const{id:O,kind:M,rtpParameters:I,streamId:U,onRtpReceiver:z}=T.consumerOptions;d.push({trackId:O,kind:M,rtpParameters:I,streamId:U,onRtpReceiver:z})}try{const T=await this._handler.receive(d);for(let O=0;O<T.length;++O){const M=S[O],I=T[O],{id:U,producerId:z,kind:$,rtpParameters:q,appData:ae}=M.consumerOptions,{localId:Q,rtpReceiver:ve,track:we}=I,Re=new w.Consumer({id:U,localId:Q,producerId:z,rtpReceiver:ve,track:we,rtpParameters:q,appData:ae});this._consumers.set(Re.id,Re),this.handleConsumer(Re),this._probatorConsumerCreated||x||$!=="video"||(x=Re),this._observer.safeEmit("newconsumer",Re),M.resolve(Re)}}catch(T){for(const O of S)O.reject(T)}if(x)try{const T=m.generateProbatorRtpParameters(x.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:T}]),A.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(T){A.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",T)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void A.debug("pausePendingConsumers() | there is no Consumer to be paused");const S=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const x=S.map(d=>d.localId);await this._handler.pauseReceiving(x)}catch(x){A.error("pausePendingConsumers() | failed to pause Consumers:",x)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void A.debug("resumePendingConsumers() | there is no Consumer to be resumed");const S=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const x=S.map(d=>d.localId);await this._handler.resumeReceiving(x)}catch(x){A.error("resumePendingConsumers() | failed to resume Consumers:",x)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void A.debug("closePendingConsumers() | there is no Consumer to be closed");const S=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(S.map(x=>x.localId))}catch(x){A.error("closePendingConsumers() | failed to close Consumers:",x)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const S=this._handler;S.on("@connect",({dtlsParameters:x},d,T)=>{this._closed?T(new E.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:x},d,T)}),S.on("@icegatheringstatechange",x=>{x!==this._iceGatheringState&&(A.debug("ICE gathering state changed to %s",x),this._iceGatheringState=x,this._closed||this.safeEmit("icegatheringstatechange",x))}),S.on("@icecandidateerror",x=>{A.warn(`ICE candidate error [url:${x.url}, localAddress:${x.address}, localPort:${x.port}]: ${x.errorCode} "${x.errorText}"`),this.safeEmit("icecandidateerror",x)}),S.on("@connectionstatechange",x=>{x!==this._connectionState&&(A.debug("connection state changed to %s",x),this._connectionState=x,this._closed||this.safeEmit("connectionstatechange",x))})}handleProducer(S){S.on("@close",()=>{this._producers.delete(S.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(S.localId),"producer @close event").catch(x=>A.warn("producer.close() failed:%o",x))}),S.on("@pause",(x,d)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(S.localId),"producer @pause event").then(x).catch(d)}),S.on("@resume",(x,d)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(S.localId),"producer @resume event").then(x).catch(d)}),S.on("@replacetrack",(x,d,T)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(S.localId,x),"producer @replacetrack event").then(d).catch(T)}),S.on("@setmaxspatiallayer",(x,d,T)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(S.localId,x),"producer @setmaxspatiallayer event").then(d).catch(T)}),S.on("@setrtpencodingparameters",(x,d,T)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(S.localId,x),"producer @setrtpencodingparameters event").then(d).catch(T)}),S.on("@getstats",(x,d)=>{if(this._closed)return d(new E.InvalidStateError("closed"));this._handler.getSenderStats(S.localId).then(x).catch(d)})}handleConsumer(S){S.on("@close",()=>{this._consumers.delete(S.id),this._pendingPauseConsumers.delete(S.id),this._pendingResumeConsumers.delete(S.id),this._closed||(this._pendingCloseConsumers.set(S.id,S),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),S.on("@pause",()=>{this._pendingResumeConsumers.has(S.id)&&this._pendingResumeConsumers.delete(S.id),this._pendingPauseConsumers.set(S.id,S),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),S.on("@resume",()=>{this._pendingPauseConsumers.has(S.id)&&this._pendingPauseConsumers.delete(S.id),this._pendingResumeConsumers.set(S.id,S),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),S.on("@getstats",(x,d)=>{if(this._closed)return d(new E.InvalidStateError("closed"));this._handler.getReceiverStats(S.localId).then(x).catch(d)})}handleDataProducer(S){S.on("@close",()=>{this._dataProducers.delete(S.id)})}handleDataConsumer(S){S.on("@close",()=>{this._dataConsumers.delete(S.id)})}}y.Transport=H},5602:N=>{var y=N.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(u){return u.encoding?"rtpmap:%d %s/%s/%s":u.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(u){return u.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(u){return u.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(u){return"extmap:%d"+(u.direction?"/%s":"%v")+(u["encrypt-uri"]?" %s":"%v")+" %s"+(u.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(u){return u.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(u){var R="candidate:%s %d %s %d %s %d typ %s";return R+=u.raddr!=null?" raddr %s rport %d":"%v%v",R+=u.tcptype!=null?" tcptype %s":"%v",u.generation!=null&&(R+=" generation %d"),R+=u["network-id"]!=null?" network-id %d":"%v",R+=u["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(u){var R="ssrc:%d";return u.attribute!=null&&(R+=" %s",u.value!=null&&(R+=":%s")),R}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(u){return u.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(u){return u.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(u){return"imageattr:%s %s %s"+(u.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(u){return"simulcast:%s %s"+(u.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(u){return"ts-refclk:%s"+(u.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(u){var R="mediaclk:";return R+=u.id!=null?"id=%s %s":"%v%s",R+=u.mediaClockValue!=null?"=%s":"",R+=u.rateNumerator!=null?" rate=%s":"",R+=u.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(y).forEach(function(u){y[u].forEach(function(R){R.reg||(R.reg=/(.*)/),R.format||(R.format="%s")})})},5765:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Safari12=void 0;const R=u(7363),v=u(2994),b=u(1765),E=u(8046),_=u(5544),m=u(5938),k=u(4256),w=u(4893),F=u(521),g=u(1305),A=u(3303),P=new v.Logger("Safari12"),H={OS:1024,MIS:1024};class D extends F.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new D}constructor(){super()}get name(){return"Safari12"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const x=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{x.addTransceiver("audio"),x.addTransceiver("video");const d=await x.createOffer();try{x.close()}catch{}const T=R.parse(d.sdp),O=_.extractRtpCapabilities({sdpObject:T});return k.addNackSupportForOpus(O),O}catch(d){try{x.close()}catch{}throw d}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:H}}run({direction:x,iceParameters:d,iceCandidates:T,dtlsParameters:O,sctpParameters:M,iceServers:I,iceTransportPolicy:U,additionalSettings:z,proprietaryConstraints:$,extendedRtpCapabilities:q}){this.assertNotClosed(),P.debug("run()"),this._direction=x,this._remoteSdp=new g.RemoteSdp({iceParameters:d,iceCandidates:T,dtlsParameters:O,sctpParameters:M}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",q),video:E.getSendingRtpParameters("video",q)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",q),video:E.getSendingRemoteRtpParameters("video",q)},O.role&&O.role!=="auto"&&(this._forcedLocalDtlsRole=O.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:I??[],iceTransportPolicy:U??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...z},$),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ae=>{this.emit("@icecandidateerror",ae)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(x){this.assertNotClosed(),P.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=x,this._pc.setConfiguration(d)}async restartIce(x){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(x),this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const T={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:x,encodings:d,codecOptions:T,codec:O,onRtpSender:M}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",x.kind,x.id);const I=b.clone(this._sendingRtpParametersByKind[x.kind]);I.codecs=E.reduceCodecs(I.codecs,O);const U=b.clone(this._sendingRemoteRtpParametersByKind[x.kind]);U.codecs=E.reduceCodecs(U.codecs,O);const z=this._remoteSdp.getNextMediaSectionIdx(),$=this._pc.addTransceiver(x,{direction:"sendonly",streams:[this._sendStream]});M&&M($.sender);let q,ae=await this._pc.createOffer(),Q=R.parse(ae.sdp);Q.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Q});const ve=(0,A.parse)((d??[{}])[0].scalabilityMode);d&&d.length>1&&(P.debug("send() | enabling legacy simulcast"),Q=R.parse(ae.sdp),q=Q.media[z.idx],m.addLegacySimulcast({offerMediaObject:q,numStreams:d.length}),ae={type:"offer",sdp:R.write(Q)}),P.debug("send() | calling pc.setLocalDescription() [offer:%o]",ae),await this._pc.setLocalDescription(ae);const we=$.mid;if(I.mid=we,Q=R.parse(this._pc.localDescription.sdp),q=Q.media[z.idx],I.rtcp.cname=_.getCname({offerMediaObject:q}),I.encodings=m.getRtpEncodings({offerMediaObject:q}),d)for(let me=0;me<I.encodings.length;++me)d[me]&&Object.assign(I.encodings[me],d[me]);if(I.encodings.length>1&&(I.codecs[0].mimeType.toLowerCase()==="video/vp8"||I.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const me of I.encodings)me.scalabilityMode?me.scalabilityMode=`L1T${ve.temporalLayers}`:me.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:q,reuseMid:z.reuseMid,offerRtpParameters:I,answerRtpParameters:U,codecOptions:T});const Re={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Re),await this._pc.setRemoteDescription(Re),this._mapMidTransceiver.set(we,$),{localId:we,rtpParameters:I,rtpSender:$.sender}}async stopSending(x){if(this.assertSendDirection(),this._closed)return;P.debug("stopSending() [localId:%s]",x);const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");if(d.sender.replaceTrack(null),this._pc.removeTrack(d.sender),this._remoteSdp.closeMediaSection(d.mid))try{d.stop()}catch{}const T=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._mapMidTransceiver.delete(x)}async pauseSending(x){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",x);const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="inactive",this._remoteSdp.pauseMediaSection(x);const T=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async resumeSending(x){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",x);const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(x);const T=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async replaceTrack(x,d){this.assertNotClosed(),this.assertSendDirection(),d?P.debug("replaceTrack() [localId:%s, track.id:%s]",x,d.id):P.debug("replaceTrack() [localId:%s, no track]",x);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");await T.sender.replaceTrack(d)}async setMaxSpatialLayer(x,d){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",x,d);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");const O=T.sender.getParameters();O.encodings.forEach((U,z)=>{U.active=z<=d}),await T.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(x,O.encodings);const M=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async setRtpEncodingParameters(x,d){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",x,d);const T=this._mapMidTransceiver.get(x);if(!T)throw new Error("associated RTCRtpTransceiver not found");const O=T.sender.getParameters();O.encodings.forEach((U,z)=>{O.encodings[z]={...U,...d}}),await T.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(x,O.encodings);const M=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async getSenderStats(x){this.assertNotClosed(),this.assertSendDirection();const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.sender.getStats()}async sendDataChannel({ordered:x,maxPacketLifeTime:d,maxRetransmits:T,label:O,protocol:M}){this.assertNotClosed(),this.assertSendDirection();const I={negotiated:!0,id:this._nextSendSctpStreamId,ordered:x,maxPacketLifeTime:d,maxRetransmits:T,protocol:M};P.debug("sendDataChannel() [options:%o]",I);const U=this._pc.createDataChannel(O,I);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%H.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),$=R.parse(z.sdp),q=$.media.find(Q=>Q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:q});const ae={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setRemoteDescription(ae),this._hasDataChannelMediaSection=!0}return{dataChannel:U,sctpStreamParameters:{streamId:I.id,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits}}}async receive(x){this.assertNotClosed(),this.assertRecvDirection();const d=[],T=new Map;for(const U of x){const{trackId:z,kind:$,rtpParameters:q,streamId:ae}=U;P.debug("receive() [trackId:%s, kind:%s]",z,$);const Q=q.mid??String(this._mapMidTransceiver.size);T.set(z,Q),this._remoteSdp.receive({mid:Q,kind:$,offerRtpParameters:q,streamId:ae??q.rtcp.cname,trackId:z})}const O={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);for(const U of x){const{trackId:z,onRtpReceiver:$}=U;if($){const q=T.get(z),ae=this._pc.getTransceivers().find(Q=>Q.mid===q);if(!ae)throw new Error("transceiver not found");$(ae.receiver)}}let M=await this._pc.createAnswer();const I=R.parse(M.sdp);for(const U of x){const{trackId:z,rtpParameters:$}=U,q=T.get(z),ae=I.media.find(Q=>String(Q.mid)===q);_.applyCodecParameters({offerRtpParameters:$,answerMediaObject:ae})}M={type:"answer",sdp:R.write(I)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",M),await this._pc.setLocalDescription(M);for(const U of x){const{trackId:z}=U,$=T.get(z),q=this._pc.getTransceivers().find(ae=>ae.mid===$);if(!q)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set($,q),d.push({localId:$,track:q.receiver.track,rtpReceiver:q.receiver})}return d}async stopReceiving(x){if(this.assertRecvDirection(),this._closed)return;for(const O of x){P.debug("stopReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(M.mid)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T);for(const O of x)this._mapMidTransceiver.delete(O)}async pauseReceiving(x){this.assertNotClosed(),this.assertRecvDirection();for(const O of x){P.debug("pauseReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="inactive",this._remoteSdp.pauseMediaSection(O)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async resumeReceiving(x){this.assertNotClosed(),this.assertRecvDirection();for(const O of x){P.debug("resumeReceiving() [localId:%s]",O);const M=this._mapMidTransceiver.get(O);if(!M)throw new Error("associated RTCRtpTransceiver not found");M.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(O)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const T=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async getReceiverStats(x){this.assertNotClosed(),this.assertRecvDirection();const d=this._mapMidTransceiver.get(x);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:x,label:d,protocol:T}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:O,ordered:M,maxPacketLifeTime:I,maxRetransmits:U}=x,z={negotiated:!0,id:O,ordered:M,maxPacketLifeTime:I,maxRetransmits:U,protocol:T};P.debug("receiveDataChannel() [options:%o]",z);const $=this._pc.createDataChannel(d,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const q={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",q),await this._pc.setRemoteDescription(q);const ae=await this._pc.createAnswer();if(!this._transportReady){const Q=R.parse(ae.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Q})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setLocalDescription(ae),this._hasDataChannelMediaSection=!0}return{dataChannel:$}}async setupTransport({localDtlsRole:x,localSdpObject:d}){d||(d=R.parse(this._pc.localDescription.sdp));const T=_.extractDtlsParameters({sdpObject:d});T.role=x,this._remoteSdp.updateDtlsRole(x==="client"?"server":"client"),await new Promise((O,M)=>{this.safeEmit("@connect",{dtlsParameters:T},O,M)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new w.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.Safari12=D},5862:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.FakeEventTarget=void 0,y.FakeEventTarget=class{listeners={};addEventListener(u,R,v={}){R&&(this.listeners[u]??=[],this.listeners[u].push({callback:R,once:v.once===!0}))}removeEventListener(u,R){this.listeners[u]&&(this.listeners[u]=this.listeners[u].filter(v=>v.callback!==R))}dispatchEvent(u){if(!u||typeof u.type!="string")throw new Error("invalid event object");const R=this.listeners[u.type];if(!R)return!0;for(const v of[...R]){try{v.callback.call(this,u)}catch(b){setTimeout(()=>{throw b},0)}v.once&&this.removeEventListener(u.type,v.callback)}return!u.defaultPrevented}}},5869:(N,y,u)=>{var R=u(887);N.exports=function(v,b,E,_,m){var k=R(v,b,E,_,m);return k.next().then(function(w){return w.done?w.value:k.next()})},N.exports.__esModule=!0,N.exports.default=N.exports},5938:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.getRtpEncodings=function({offerMediaObject:u}){const R=new Set;for(const E of u.ssrcs??[]){const _=E.id;R.add(_)}if(R.size===0)throw new Error("no a=ssrc lines found");const v=new Map;for(const E of u.ssrcGroups??[]){if(E.semantics!=="FID")continue;let[_,m]=E.ssrcs.split(/\s+/);_=Number(_),m=Number(m),R.has(_)&&(R.delete(_),R.delete(m),v.set(_,m))}for(const E of R)v.set(E,null);const b=[];for(const[E,_]of v){const m={ssrc:E};_&&(m.rtx={ssrc:_}),b.push(m)}return b},y.addLegacySimulcast=function({offerMediaObject:u,numStreams:R}){if(R<=1)throw new TypeError("numStreams must be greater than 1");const v=(u.ssrcs??[]).find(A=>A.attribute==="msid");if(!v)throw new Error("a=ssrc line with msid information not found");const[b,E]=v.value.split(" "),_=Number(v.id);let m;(u.ssrcGroups??[]).some(A=>{if(A.semantics!=="FID")return!1;const P=A.ssrcs.split(/\s+/);return Number(P[0])===_&&(m=Number(P[1]),!0)});const k=u.ssrcs.find(A=>A.attribute==="cname");if(!k)throw new Error("a=ssrc line with cname information not found");const w=k.value,F=[],g=[];for(let A=0;A<R;++A)F.push(_+A),m&&g.push(m+A);u.ssrcGroups=[],u.ssrcs=[],u.ssrcGroups.push({semantics:"SIM",ssrcs:F.join(" ")});for(const A of F)u.ssrcs.push({id:A,attribute:"cname",value:w}),u.ssrcs.push({id:A,attribute:"msid",value:`${b} ${E}`});for(let A=0;A<g.length;++A){const P=F[A],H=g[A];u.ssrcs.push({id:H,attribute:"cname",value:w}),u.ssrcs.push({id:H,attribute:"msid",value:`${b} ${E}`}),u.ssrcGroups.push({semantics:"FID",ssrcs:`${P} ${H}`})}}},5953:function(N,y,u){var R;N.exports=(R=u(9021),u(3240),function(v){var b=R,E=b.lib,_=E.WordArray,m=E.Hasher,k=b.x64.Word,w=b.algo,F=[],g=[],A=[];(function(){for(var D=1,S=0,x=0;x<24;x++){F[D+5*S]=(x+1)*(x+2)/2%64;var d=(2*D+3*S)%5;D=S%5,S=d}for(D=0;D<5;D++)for(S=0;S<5;S++)g[D+5*S]=S+(2*D+3*S)%5*5;for(var T=1,O=0;O<24;O++){for(var M=0,I=0,U=0;U<7;U++){if(1&T){var z=(1<<U)-1;z<32?I^=1<<z:M^=1<<z-32}128&T?T=T<<1^113:T<<=1}A[O]=k.create(M,I)}})();var P=[];(function(){for(var D=0;D<25;D++)P[D]=k.create()})();var H=w.SHA3=m.extend({cfg:m.cfg.extend({outputLength:512}),_doReset:function(){for(var D=this._state=[],S=0;S<25;S++)D[S]=new k.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(D,S){for(var x=this._state,d=this.blockSize/2,T=0;T<d;T++){var O=D[S+2*T],M=D[S+2*T+1];O=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8),M=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),(He=x[T]).high^=M,He.low^=O}for(var I=0;I<24;I++){for(var U=0;U<5;U++){for(var z=0,$=0,q=0;q<5;q++)z^=(He=x[U+5*q]).high,$^=He.low;var ae=P[U];ae.high=z,ae.low=$}for(U=0;U<5;U++){var Q=P[(U+4)%5],ve=P[(U+1)%5],we=ve.high,Re=ve.low;for(z=Q.high^(we<<1|Re>>>31),$=Q.low^(Re<<1|we>>>31),q=0;q<5;q++)(He=x[U+5*q]).high^=z,He.low^=$}for(var me=1;me<25;me++){var Ce=(He=x[me]).high,Be=He.low,be=F[me];be<32?(z=Ce<<be|Be>>>32-be,$=Be<<be|Ce>>>32-be):(z=Be<<be-32|Ce>>>64-be,$=Ce<<be-32|Be>>>64-be);var Ye=P[g[me]];Ye.high=z,Ye.low=$}var Qe=P[0],Ge=x[0];for(Qe.high=Ge.high,Qe.low=Ge.low,U=0;U<5;U++)for(q=0;q<5;q++){var He=x[me=U+5*q],Te=P[me],dt=P[(U+1)%5+5*q],_t=P[(U+2)%5+5*q];He.high=Te.high^~dt.high&_t.high,He.low=Te.low^~dt.low&_t.low}He=x[0];var on=A[I];He.high^=on.high,He.low^=on.low}},_doFinalize:function(){var D=this._data,S=D.words,x=(this._nDataBytes,8*D.sigBytes),d=32*this.blockSize;S[x>>>5]|=1<<24-x%32,S[(v.ceil((x+1)/d)*d>>>5)-1]|=128,D.sigBytes=4*S.length,this._process();for(var T=this._state,O=this.cfg.outputLength/8,M=O/8,I=[],U=0;U<M;U++){var z=T[U],$=z.high,q=z.low;$=16711935&($<<8|$>>>24)|4278255360&($<<24|$>>>8),q=16711935&(q<<8|q>>>24)|4278255360&(q<<24|q>>>8),I.push(q),I.push($)}return new _.init(I,O)},clone:function(){for(var D=m.clone.call(this),S=D._state=this._state.slice(0),x=0;x<25;x++)S[x]=S[x].clone();return D}});b.SHA3=m._createHelper(H),b.HmacSHA3=m._createHmacHelper(H)}(Math),R.SHA3)},6004:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Device=void 0,y.detectDevice=I;const R=u(2109),v=u(2994),b=u(3953),E=u(4893),_=u(1765),m=u(8046),k=u(5601),w=u(2183),F=u(11),g=u(5535),A=u(8155),P=u(7402),H=u(2292),D=u(1767),S=u(5765),x=u(9676),d=u(8633),T=u(4039),O=u(9352),M=new v.Logger("Device");function I(U){if(!U&&typeof navigator=="object"&&navigator.product==="ReactNative")return M.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void M.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?(M.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(M.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(U||typeof navigator=="object"&&typeof navigator.userAgent=="string"){U??=navigator.userAgent;const z=new R.UAParser(U);M.debug("detectDevice() | browser detected [userAgent:%s, parsed:%o]",U,z.getResult());const $=z.getBrowser(),q=$.name?.toLowerCase(),ae=parseInt($.major??"0"),Q=z.getEngine(),ve=Q.name?.toLowerCase(),we=z.getOS(),Re=we.name?.toLowerCase(),me=parseFloat(we.version??"0"),Ce=z.getDevice(),Be=Ce.model?.toLowerCase(),be=Re==="ios"||Be==="ipad",Ye=q&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(q),Qe=q&&["firefox","mobile firefox","mobile focus"].includes(q),Ge=q&&["safari","mobile safari"].includes(q),He=q&&["edge"].includes(q);if((Ye||He)&&!be&&ae>=111)return"Chrome111";if(Ye&&!be&&ae>=74||He&&!be&&ae>=88)return"Chrome74";if(Ye&&!be&&ae>=70)return"Chrome70";if(Ye&&!be&&ae>=67)return"Chrome67";if(Ye&&!be&&ae>=55)return"Chrome55";if(Qe&&!be&&ae>=120)return"Firefox120";if(Qe&&!be&&ae>=60)return"Firefox60";if(Qe&&be&&me>=14.3||Ge&&ae>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Ge&&ae>=11)return"Safari11";if(He&&!be&&ae>=11&&ae<=18)return"Edge11";if(ve==="webkit"&&be&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(ve==="blink"){const Te=U.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(Te){const dt=Number(Te[1]);return dt>=111?"Chrome111":dt>=74?"Chrome74":dt>=70?"Chrome70":dt>=67?"Chrome67":"Chrome55"}return"Chrome111"}return void M.warn("detectDevice() | browser not supported [name:%s, version:%s]",q,ae)}M.warn("detectDevice() | unknown device")}y.Device=class{_handlerFactory;_handlerName;_loaded=!1;_extendedRtpCapabilities;_recvRtpCapabilities;_canProduceByKind;_sctpCapabilities;_observer=new b.EnhancedEventEmitter;constructor({handlerName:U,handlerFactory:z}={}){if(M.debug("constructor()"),U&&z)throw new TypeError("just one of handlerName or handlerInterface can be given");if(z)this._handlerFactory=z;else{if(U)M.debug("constructor() | handler given: %s",U);else{if(!(U=I()))throw new E.UnsupportedError("device not supported");M.debug("constructor() | detected handler: %s",U)}switch(U){case"Chrome111":this._handlerFactory=w.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=F.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=g.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=A.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=P.Chrome55.createFactory();break;case"Firefox120":this._handlerFactory=H.Firefox120.createFactory();break;case"Firefox60":this._handlerFactory=D.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=S.Safari12.createFactory();break;case"Safari11":this._handlerFactory=x.Safari11.createFactory();break;case"Edge11":this._handlerFactory=d.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=T.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=O.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${U}"`)}}const $=this._handlerFactory();this._handlerName=$.name,$.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new E.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new E.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:U}){let z;M.debug("load() [routerRtpCapabilities:%o]",U);try{if(this._loaded)throw new E.InvalidStateError("already loaded");const $=_.clone(U);m.validateRtpCapabilities($),z=this._handlerFactory();const q=await z.getNativeRtpCapabilities();M.debug("load() | got native RTP capabilities:%o",q);const ae=_.clone(q);m.validateRtpCapabilities(ae),this._extendedRtpCapabilities=m.getExtendedRtpCapabilities(ae,$),M.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=m.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=m.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=m.getRecvRtpCapabilities(this._extendedRtpCapabilities),m.validateRtpCapabilities(this._recvRtpCapabilities),M.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await z.getNativeSctpCapabilities(),M.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),m.validateSctpCapabilities(this._sctpCapabilities),M.debug("load() succeeded"),this._loaded=!0,z.close()}catch($){throw z&&z.close(),$}}canProduce(U){if(!this._loaded)throw new E.InvalidStateError("not loaded");if(U!=="audio"&&U!=="video")throw new TypeError(`invalid kind "${U}"`);return this._canProduceByKind[U]}createSendTransport({id:U,iceParameters:z,iceCandidates:$,dtlsParameters:q,sctpParameters:ae,iceServers:Q,iceTransportPolicy:ve,additionalSettings:we,proprietaryConstraints:Re,appData:me}){return M.debug("createSendTransport()"),this.createTransport({direction:"send",id:U,iceParameters:z,iceCandidates:$,dtlsParameters:q,sctpParameters:ae,iceServers:Q,iceTransportPolicy:ve,additionalSettings:we,proprietaryConstraints:Re,appData:me})}createRecvTransport({id:U,iceParameters:z,iceCandidates:$,dtlsParameters:q,sctpParameters:ae,iceServers:Q,iceTransportPolicy:ve,additionalSettings:we,proprietaryConstraints:Re,appData:me}){return M.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:U,iceParameters:z,iceCandidates:$,dtlsParameters:q,sctpParameters:ae,iceServers:Q,iceTransportPolicy:ve,additionalSettings:we,proprietaryConstraints:Re,appData:me})}createTransport({direction:U,id:z,iceParameters:$,iceCandidates:q,dtlsParameters:ae,sctpParameters:Q,iceServers:ve,iceTransportPolicy:we,additionalSettings:Re,proprietaryConstraints:me,appData:Ce}){if(!this._loaded)throw new E.InvalidStateError("not loaded");if(typeof z!="string")throw new TypeError("missing id");if(typeof $!="object")throw new TypeError("missing iceParameters");if(!Array.isArray(q))throw new TypeError("missing iceCandidates");if(typeof ae!="object")throw new TypeError("missing dtlsParameters");if(Q&&typeof Q!="object")throw new TypeError("wrong sctpParameters");if(Ce&&typeof Ce!="object")throw new TypeError("if given, appData must be an object");const Be=new k.Transport({direction:U,id:z,iceParameters:$,iceCandidates:q,dtlsParameters:ae,sctpParameters:Q,iceServers:ve,iceTransportPolicy:we,additionalSettings:Re,proprietaryConstraints:me,appData:Ce,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",Be),Be}}},6011:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.unsafeStringify=void 0;const R=u(9746),v=[];for(let E=0;E<256;++E)v.push((E+256).toString(16).slice(1));function b(E,_=0){return(v[E[_+0]]+v[E[_+1]]+v[E[_+2]]+v[E[_+3]]+"-"+v[E[_+4]]+v[E[_+5]]+"-"+v[E[_+6]]+v[E[_+7]]+"-"+v[E[_+8]]+v[E[_+9]]+"-"+v[E[_+10]]+v[E[_+11]]+v[E[_+12]]+v[E[_+13]]+v[E[_+14]]+v[E[_+15]]).toLowerCase()}y.unsafeStringify=b,y.default=function(E,_=0){const m=b(E,_);if(!(0,R.default)(m))throw TypeError("Stringified UUID is invalid");return m}},6298:function(N,y,u){var R;N.exports=(R=u(9021),u(754),u(4636),u(9506),u(7165),function(){var v=R,b=v.lib.StreamCipher,E=v.algo,_=[],m=[],k=[],w=E.Rabbit=b.extend({_doReset:function(){for(var g=this._key.words,A=this.cfg.iv,P=0;P<4;P++)g[P]=16711935&(g[P]<<8|g[P]>>>24)|4278255360&(g[P]<<24|g[P]>>>8);var H=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],D=this._C=[g[2]<<16|g[2]>>>16,4294901760&g[0]|65535&g[1],g[3]<<16|g[3]>>>16,4294901760&g[1]|65535&g[2],g[0]<<16|g[0]>>>16,4294901760&g[2]|65535&g[3],g[1]<<16|g[1]>>>16,4294901760&g[3]|65535&g[0]];for(this._b=0,P=0;P<4;P++)F.call(this);for(P=0;P<8;P++)D[P]^=H[P+4&7];if(A){var S=A.words,x=S[0],d=S[1],T=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),O=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),M=T>>>16|4294901760&O,I=O<<16|65535&T;for(D[0]^=T,D[1]^=M,D[2]^=O,D[3]^=I,D[4]^=T,D[5]^=M,D[6]^=O,D[7]^=I,P=0;P<4;P++)F.call(this)}},_doProcessBlock:function(g,A){var P=this._X;F.call(this),_[0]=P[0]^P[5]>>>16^P[3]<<16,_[1]=P[2]^P[7]>>>16^P[5]<<16,_[2]=P[4]^P[1]>>>16^P[7]<<16,_[3]=P[6]^P[3]>>>16^P[1]<<16;for(var H=0;H<4;H++)_[H]=16711935&(_[H]<<8|_[H]>>>24)|4278255360&(_[H]<<24|_[H]>>>8),g[A+H]^=_[H]},blockSize:4,ivSize:2});function F(){for(var g=this._X,A=this._C,P=0;P<8;P++)m[P]=A[P];for(A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<m[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<m[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<m[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<m[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<m[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<m[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<m[6]>>>0?1:0)|0,this._b=A[7]>>>0<m[7]>>>0?1:0,P=0;P<8;P++){var H=g[P]+A[P],D=65535&H,S=H>>>16,x=((D*D>>>17)+D*S>>>15)+S*S,d=((4294901760&H)*H|0)+((65535&H)*H|0);k[P]=x^d}g[0]=k[0]+(k[7]<<16|k[7]>>>16)+(k[6]<<16|k[6]>>>16)|0,g[1]=k[1]+(k[0]<<8|k[0]>>>24)+k[7]|0,g[2]=k[2]+(k[1]<<16|k[1]>>>16)+(k[0]<<16|k[0]>>>16)|0,g[3]=k[3]+(k[2]<<8|k[2]>>>24)+k[1]|0,g[4]=k[4]+(k[3]<<16|k[3]>>>16)+(k[2]<<16|k[2]>>>16)|0,g[5]=k[5]+(k[4]<<8|k[4]>>>24)+k[3]|0,g[6]=k[6]+(k[5]<<16|k[5]>>>16)+(k[4]<<16|k[4]>>>16)|0,g[7]=k[7]+(k[6]<<8|k[6]>>>24)+k[5]|0}v.Rabbit=b._createHelper(w)}(),R.Rabbit)},6308:function(N,y,u){var R,v,b,E,_,m;N.exports=(m=u(9021),u(3009),v=(R=m).lib.WordArray,b=R.algo,E=b.SHA256,_=b.SHA224=E.extend({_doReset:function(){this._hash=new v.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var k=E._doFinalize.call(this);return k.sigBytes-=4,k}}),R.SHA224=E._createHelper(_),R.HmacSHA224=E._createHmacHelper(_),m.SHA224)},6356:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0});const R=u(6011),v=u(1425),b=u(6568);y.default=function(E,_,m){E??={},m??=0;let k=(0,v.default)({...E,_v6:!0},new Uint8Array(16));if(k=(0,b.default)(k),_){for(let w=0;w<16;w++)_[m+w]=k[w];return _}return(0,R.unsafeStringify)(k)}},6372:function(N,y,u){var R;N.exports=(R=u(9021),u(7165),R.mode.CTRGladman=function(){var v=R.lib.BlockCipherMode.extend();function b(m){if(255&~(m>>24))m+=16777216;else{var k=m>>16&255,w=m>>8&255,F=255&m;k===255?(k=0,w===255?(w=0,F===255?F=0:++F):++w):++k,m=0,m+=k<<16,m+=w<<8,m+=F}return m}function E(m){return(m[0]=b(m[0]))===0&&(m[1]=b(m[1])),m}var _=v.Encryptor=v.extend({processBlock:function(m,k){var w=this._cipher,F=w.blockSize,g=this._iv,A=this._counter;g&&(A=this._counter=g.slice(0),this._iv=void 0),E(A);var P=A.slice(0);w.encryptBlock(P,0);for(var H=0;H<F;H++)m[k+H]^=P[H]}});return v.Decryptor=_,v}(),R.mode.CTRGladman)},6440:function(N,y,u){var R;N.exports=(R=u(9021),function(){if(typeof ArrayBuffer=="function"){var v=R.lib.WordArray,b=v.init,E=v.init=function(_){if(_ instanceof ArrayBuffer&&(_=new Uint8Array(_)),(_ instanceof Int8Array||typeof Uint8ClampedArray<"u"&&_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array||_ instanceof Float64Array)&&(_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength)),_ instanceof Uint8Array){for(var m=_.byteLength,k=[],w=0;w<m;w++)k[w>>>2]|=_[w]<<24-w%4*8;b.call(this,k,m)}else b.apply(this,arguments)};E.prototype=v}}(),R.lib.WordArray)},6568:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0});const R=u(1797),v=u(6011);y.default=function(b){const E=function(_){return Uint8Array.of((15&_[6])<<4|_[7]>>4&15,(15&_[7])<<4|(240&_[4])>>4,(15&_[4])<<4|(240&_[5])>>4,(15&_[5])<<4|(240&_[0])>>4,(15&_[0])<<4|(240&_[1])>>4,(15&_[1])<<4|(240&_[2])>>4,96|15&_[2],_[3],_[8],_[9],_[10],_[11],_[12],_[13],_[14],_[15])}(typeof b=="string"?(0,R.default)(b):b);return typeof b=="string"?(0,v.unsafeStringify)(E):E}},6585:N=>{var y=1e3,u=60*y,R=60*u,v=24*R,b=7*v,E=365.25*v;function _(m,k,w,F){var g=k>=1.5*w;return Math.round(m/w)+" "+F+(g?"s":"")}N.exports=function(m,k){k=k||{};var w=typeof m;if(w==="string"&&m.length>0)return function(F){if(!((F=String(F)).length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(g){var A=parseFloat(g[1]);switch((g[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return A*E;case"weeks":case"week":case"w":return A*b;case"days":case"day":case"d":return A*v;case"hours":case"hour":case"hrs":case"hr":case"h":return A*R;case"minutes":case"minute":case"mins":case"min":case"m":return A*u;case"seconds":case"second":case"secs":case"sec":case"s":return A*y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return A;default:return}}}}(m);if(w==="number"&&isFinite(m))return k.long?function(F){var g=Math.abs(F);return g>=v?_(F,g,v,"day"):g>=R?_(F,g,R,"hour"):g>=u?_(F,g,u,"minute"):g>=y?_(F,g,y,"second"):F+" ms"}(m):function(F){var g=Math.abs(F);return g>=v?Math.round(F/v)+"d":g>=R?Math.round(F/R)+"h":g>=u?Math.round(F/u)+"m":g>=y?Math.round(F/y)+"s":F+"ms"}(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))}},6697:(N,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},6746:(N,y,u)=>{u.d(y,{KS:()=>v,fo:()=>R});var R=Object.freeze({SetKey:"setKey",RatchetRequest:"ratchetRequest",KeyRatcheted:"keyRatcheted"}),v=Object.freeze({ParticipantEncryptionStatusChanged:"participantEncryptionStatusChanged",EncryptionError:"encryptionError",E2EEStateChange:"e2eeStateChange"})},6880:function(N){N.exports=function(y){var u={};function R(v){if(u[v])return u[v].exports;var b=u[v]={i:v,l:!1,exports:{}};return y[v].call(b.exports,b,b.exports,R),b.l=!0,b.exports}return R.m=y,R.c=u,R.d=function(v,b,E){R.o(v,b)||Object.defineProperty(v,b,{enumerable:!0,get:E})},R.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},R.t=function(v,b){if(1&b&&(v=R(v)),8&b||4&b&&typeof v=="object"&&v&&v.__esModule)return v;var E=Object.create(null);if(R.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:v}),2&b&&typeof v!="string")for(var _ in v)R.d(E,_,(function(m){return v[m]}).bind(null,_));return E},R.n=function(v){var b=v&&v.__esModule?function(){return v.default}:function(){return v};return R.d(b,"a",b),b},R.o=function(v,b){return Object.prototype.hasOwnProperty.call(v,b)},R.p="",R(R.s=90)}({17:function(y,u,R){u.__esModule=!0,u.default=void 0;var v=R(18),b=function(){function E(){}return E.getFirstMatch=function(_,m){var k=m.match(_);return k&&k.length>0&&k[1]||""},E.getSecondMatch=function(_,m){var k=m.match(_);return k&&k.length>1&&k[2]||""},E.matchAndReturnConst=function(_,m,k){if(_.test(m))return k},E.getWindowsVersionName=function(_){switch(_){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},E.getMacOSVersionName=function(_){var m=_.split(".").splice(0,2).map(function(k){return parseInt(k,10)||0});if(m.push(0),m[0]===10)switch(m[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},E.getAndroidVersionName=function(_){var m=_.split(".").splice(0,2).map(function(k){return parseInt(k,10)||0});if(m.push(0),!(m[0]===1&&m[1]<5))return m[0]===1&&m[1]<6?"Cupcake":m[0]===1&&m[1]>=6?"Donut":m[0]===2&&m[1]<2?"Eclair":m[0]===2&&m[1]===2?"Froyo":m[0]===2&&m[1]>2?"Gingerbread":m[0]===3?"Honeycomb":m[0]===4&&m[1]<1?"Ice Cream Sandwich":m[0]===4&&m[1]<4?"Jelly Bean":m[0]===4&&m[1]>=4?"KitKat":m[0]===5?"Lollipop":m[0]===6?"Marshmallow":m[0]===7?"Nougat":m[0]===8?"Oreo":m[0]===9?"Pie":void 0},E.getVersionPrecision=function(_){return _.split(".").length},E.compareVersions=function(_,m,k){k===void 0&&(k=!1);var w=E.getVersionPrecision(_),F=E.getVersionPrecision(m),g=Math.max(w,F),A=0,P=E.map([_,m],function(H){var D=g-E.getVersionPrecision(H),S=H+new Array(D+1).join(".0");return E.map(S.split("."),function(x){return new Array(20-x.length).join("0")+x}).reverse()});for(k&&(A=g-Math.min(w,F)),g-=1;g>=A;){if(P[0][g]>P[1][g])return 1;if(P[0][g]===P[1][g]){if(g===A)return 0;g-=1}else if(P[0][g]<P[1][g])return-1}},E.map=function(_,m){var k,w=[];if(Array.prototype.map)return Array.prototype.map.call(_,m);for(k=0;k<_.length;k+=1)w.push(m(_[k]));return w},E.find=function(_,m){var k,w;if(Array.prototype.find)return Array.prototype.find.call(_,m);for(k=0,w=_.length;k<w;k+=1){var F=_[k];if(m(F,k))return F}},E.assign=function(_){for(var m,k,w=_,F=arguments.length,g=new Array(F>1?F-1:0),A=1;A<F;A++)g[A-1]=arguments[A];if(Object.assign)return Object.assign.apply(Object,[_].concat(g));var P=function(){var H=g[m];typeof H=="object"&&H!==null&&Object.keys(H).forEach(function(D){w[D]=H[D]})};for(m=0,k=g.length;m<k;m+=1)P();return _},E.getBrowserAlias=function(_){return v.BROWSER_ALIASES_MAP[_]},E.getBrowserTypeByAlias=function(_){return v.BROWSER_MAP[_]||""},E}();u.default=b,y.exports=u.default},18:function(y,u,R){u.__esModule=!0,u.ENGINE_MAP=u.OS_MAP=u.PLATFORMS_MAP=u.BROWSER_MAP=u.BROWSER_ALIASES_MAP=void 0,u.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},u.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},u.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},u.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},u.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(y,u,R){u.__esModule=!0,u.default=void 0;var v,b=(v=R(91))&&v.__esModule?v:{default:v},E=R(18);function _(k,w){for(var F=0;F<w.length;F++){var g=w[F];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(k,g.key,g)}}var m=function(){function k(){}var w,F,g;return k.getParser=function(A,P){if(P===void 0&&(P=!1),typeof A!="string")throw new Error("UserAgent should be a string");return new b.default(A,P)},k.parse=function(A){return new b.default(A).getResult()},w=k,g=[{key:"BROWSER_MAP",get:function(){return E.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return E.ENGINE_MAP}},{key:"OS_MAP",get:function(){return E.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return E.PLATFORMS_MAP}}],(F=null)&&_(w.prototype,F),g&&_(w,g),k}();u.default=m,y.exports=u.default},91:function(y,u,R){u.__esModule=!0,u.default=void 0;var v=k(R(92)),b=k(R(93)),E=k(R(94)),_=k(R(95)),m=k(R(17));function k(F){return F&&F.__esModule?F:{default:F}}var w=function(){function F(A,P){if(P===void 0&&(P=!1),A==null||A==="")throw new Error("UserAgent parameter can't be empty");this._ua=A,this.parsedResult={},P!==!0&&this.parse()}var g=F.prototype;return g.getUA=function(){return this._ua},g.test=function(A){return A.test(this._ua)},g.parseBrowser=function(){var A=this;this.parsedResult.browser={};var P=m.default.find(v.default,function(H){if(typeof H.test=="function")return H.test(A);if(H.test instanceof Array)return H.test.some(function(D){return A.test(D)});throw new Error("Browser's test function is not valid")});return P&&(this.parsedResult.browser=P.describe(this.getUA())),this.parsedResult.browser},g.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},g.getBrowserName=function(A){return A?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},g.getBrowserVersion=function(){return this.getBrowser().version},g.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},g.parseOS=function(){var A=this;this.parsedResult.os={};var P=m.default.find(b.default,function(H){if(typeof H.test=="function")return H.test(A);if(H.test instanceof Array)return H.test.some(function(D){return A.test(D)});throw new Error("Browser's test function is not valid")});return P&&(this.parsedResult.os=P.describe(this.getUA())),this.parsedResult.os},g.getOSName=function(A){var P=this.getOS().name;return A?String(P).toLowerCase()||"":P||""},g.getOSVersion=function(){return this.getOS().version},g.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},g.getPlatformType=function(A){A===void 0&&(A=!1);var P=this.getPlatform().type;return A?String(P).toLowerCase()||"":P||""},g.parsePlatform=function(){var A=this;this.parsedResult.platform={};var P=m.default.find(E.default,function(H){if(typeof H.test=="function")return H.test(A);if(H.test instanceof Array)return H.test.some(function(D){return A.test(D)});throw new Error("Browser's test function is not valid")});return P&&(this.parsedResult.platform=P.describe(this.getUA())),this.parsedResult.platform},g.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},g.getEngineName=function(A){return A?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},g.parseEngine=function(){var A=this;this.parsedResult.engine={};var P=m.default.find(_.default,function(H){if(typeof H.test=="function")return H.test(A);if(H.test instanceof Array)return H.test.some(function(D){return A.test(D)});throw new Error("Browser's test function is not valid")});return P&&(this.parsedResult.engine=P.describe(this.getUA())),this.parsedResult.engine},g.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},g.getResult=function(){return m.default.assign({},this.parsedResult)},g.satisfies=function(A){var P=this,H={},D=0,S={},x=0;if(Object.keys(A).forEach(function($){var q=A[$];typeof q=="string"?(S[$]=q,x+=1):typeof q=="object"&&(H[$]=q,D+=1)}),D>0){var d=Object.keys(H),T=m.default.find(d,function($){return P.isOS($)});if(T){var O=this.satisfies(H[T]);if(O!==void 0)return O}var M=m.default.find(d,function($){return P.isPlatform($)});if(M){var I=this.satisfies(H[M]);if(I!==void 0)return I}}if(x>0){var U=Object.keys(S),z=m.default.find(U,function($){return P.isBrowser($,!0)});if(z!==void 0)return this.compareVersion(S[z])}},g.isBrowser=function(A,P){P===void 0&&(P=!1);var H=this.getBrowserName().toLowerCase(),D=A.toLowerCase(),S=m.default.getBrowserTypeByAlias(D);return P&&S&&(D=S.toLowerCase()),D===H},g.compareVersion=function(A){var P=[0],H=A,D=!1,S=this.getBrowserVersion();if(typeof S=="string")return A[0]===">"||A[0]==="<"?(H=A.substr(1),A[1]==="="?(D=!0,H=A.substr(2)):P=[],A[0]===">"?P.push(1):P.push(-1)):A[0]==="="?H=A.substr(1):A[0]==="~"&&(D=!0,H=A.substr(1)),P.indexOf(m.default.compareVersions(S,H,D))>-1},g.isOS=function(A){return this.getOSName(!0)===String(A).toLowerCase()},g.isPlatform=function(A){return this.getPlatformType(!0)===String(A).toLowerCase()},g.isEngine=function(A){return this.getEngineName(!0)===String(A).toLowerCase()},g.is=function(A,P){return P===void 0&&(P=!1),this.isBrowser(A,P)||this.isOS(A)||this.isPlatform(A)},g.some=function(A){var P=this;return A===void 0&&(A=[]),A.some(function(H){return P.is(H)})},F}();u.default=w,y.exports=u.default},92:function(y,u,R){u.__esModule=!0,u.default=void 0;var v,b=(v=R(17))&&v.__esModule?v:{default:v},E=/version\/(\d+(\.?_?\d+)+)/i,_=[{test:[/googlebot/i],describe:function(m){var k={name:"Googlebot"},w=b.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/opera/i],describe:function(m){var k={name:"Opera"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/opr\/|opios/i],describe:function(m){var k={name:"Opera"},w=b.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/SamsungBrowser/i],describe:function(m){var k={name:"Samsung Internet for Android"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/Whale/i],describe:function(m){var k={name:"NAVER Whale Browser"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/MZBrowser/i],describe:function(m){var k={name:"MZ Browser"},w=b.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/focus/i],describe:function(m){var k={name:"Focus"},w=b.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/swing/i],describe:function(m){var k={name:"Swing"},w=b.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/coast/i],describe:function(m){var k={name:"Opera Coast"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(m){var k={name:"Opera Touch"},w=b.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/yabrowser/i],describe:function(m){var k={name:"Yandex Browser"},w=b.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/ucbrowser/i],describe:function(m){var k={name:"UC Browser"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/Maxthon|mxios/i],describe:function(m){var k={name:"Maxthon"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/epiphany/i],describe:function(m){var k={name:"Epiphany"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/puffin/i],describe:function(m){var k={name:"Puffin"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/sleipnir/i],describe:function(m){var k={name:"Sleipnir"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/k-meleon/i],describe:function(m){var k={name:"K-Meleon"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/micromessenger/i],describe:function(m){var k={name:"WeChat"},w=b.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/qqbrowser/i],describe:function(m){var k={name:/qqbrowserlite/i.test(m)?"QQ Browser Lite":"QQ Browser"},w=b.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/msie|trident/i],describe:function(m){var k={name:"Internet Explorer"},w=b.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/\sedg\//i],describe:function(m){var k={name:"Microsoft Edge"},w=b.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/edg([ea]|ios)/i],describe:function(m){var k={name:"Microsoft Edge"},w=b.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/vivaldi/i],describe:function(m){var k={name:"Vivaldi"},w=b.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/seamonkey/i],describe:function(m){var k={name:"SeaMonkey"},w=b.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/sailfish/i],describe:function(m){var k={name:"Sailfish"},w=b.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,m);return w&&(k.version=w),k}},{test:[/silk/i],describe:function(m){var k={name:"Amazon Silk"},w=b.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/phantom/i],describe:function(m){var k={name:"PhantomJS"},w=b.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/slimerjs/i],describe:function(m){var k={name:"SlimerJS"},w=b.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(m){var k={name:"BlackBerry"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/(web|hpw)[o0]s/i],describe:function(m){var k={name:"WebOS Browser"},w=b.default.getFirstMatch(E,m)||b.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/bada/i],describe:function(m){var k={name:"Bada"},w=b.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/tizen/i],describe:function(m){var k={name:"Tizen"},w=b.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/qupzilla/i],describe:function(m){var k={name:"QupZilla"},w=b.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/firefox|iceweasel|fxios/i],describe:function(m){var k={name:"Firefox"},w=b.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/electron/i],describe:function(m){var k={name:"Electron"},w=b.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/MiuiBrowser/i],describe:function(m){var k={name:"Miui"},w=b.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/chromium/i],describe:function(m){var k={name:"Chromium"},w=b.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,m)||b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/chrome|crios|crmo/i],describe:function(m){var k={name:"Chrome"},w=b.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/GSA/i],describe:function(m){var k={name:"Google Search"},w=b.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:function(m){var k=!m.test(/like android/i),w=m.test(/android/i);return k&&w},describe:function(m){var k={name:"Android Browser"},w=b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/playstation 4/i],describe:function(m){var k={name:"PlayStation 4"},w=b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/safari|applewebkit/i],describe:function(m){var k={name:"Safari"},w=b.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/.*/i],describe:function(m){var k=m.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:b.default.getFirstMatch(k,m),version:b.default.getSecondMatch(k,m)}}}];u.default=_,y.exports=u.default},93:function(y,u,R){u.__esModule=!0,u.default=void 0;var v,b=(v=R(17))&&v.__esModule?v:{default:v},E=R(18),_=[{test:[/Roku\/DVP/],describe:function(m){var k=b.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,m);return{name:E.OS_MAP.Roku,version:k}}},{test:[/windows phone/i],describe:function(m){var k=b.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,m);return{name:E.OS_MAP.WindowsPhone,version:k}}},{test:[/windows /i],describe:function(m){var k=b.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,m),w=b.default.getWindowsVersionName(k);return{name:E.OS_MAP.Windows,version:k,versionName:w}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(m){var k={name:E.OS_MAP.iOS},w=b.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,m);return w&&(k.version=w),k}},{test:[/macintosh/i],describe:function(m){var k=b.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,m).replace(/[_\s]/g,"."),w=b.default.getMacOSVersionName(k),F={name:E.OS_MAP.MacOS,version:k};return w&&(F.versionName=w),F}},{test:[/(ipod|iphone|ipad)/i],describe:function(m){var k=b.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,m).replace(/[_\s]/g,".");return{name:E.OS_MAP.iOS,version:k}}},{test:function(m){var k=!m.test(/like android/i),w=m.test(/android/i);return k&&w},describe:function(m){var k=b.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,m),w=b.default.getAndroidVersionName(k),F={name:E.OS_MAP.Android,version:k};return w&&(F.versionName=w),F}},{test:[/(web|hpw)[o0]s/i],describe:function(m){var k=b.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,m),w={name:E.OS_MAP.WebOS};return k&&k.length&&(w.version=k),w}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(m){var k=b.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,m)||b.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,m)||b.default.getFirstMatch(/\bbb(\d+)/i,m);return{name:E.OS_MAP.BlackBerry,version:k}}},{test:[/bada/i],describe:function(m){var k=b.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,m);return{name:E.OS_MAP.Bada,version:k}}},{test:[/tizen/i],describe:function(m){var k=b.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,m);return{name:E.OS_MAP.Tizen,version:k}}},{test:[/linux/i],describe:function(){return{name:E.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:E.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(m){var k=b.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,m);return{name:E.OS_MAP.PlayStation4,version:k}}}];u.default=_,y.exports=u.default},94:function(y,u,R){u.__esModule=!0,u.default=void 0;var v,b=(v=R(17))&&v.__esModule?v:{default:v},E=R(18),_=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(m){var k=b.default.getFirstMatch(/(can-l01)/i,m)&&"Nova",w={type:E.PLATFORMS_MAP.mobile,vendor:"Huawei"};return k&&(w.model=k),w}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet}}},{test:function(m){var k=m.test(/ipod|iphone/i),w=m.test(/like (ipod|iphone)/i);return k&&!w},describe:function(m){var k=b.default.getFirstMatch(/(ipod|iphone)/i,m);return{type:E.PLATFORMS_MAP.mobile,vendor:"Apple",model:k}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(m){return m.getBrowserName(!0)==="blackberry"},describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(m){return m.getBrowserName(!0)==="bada"},describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(m){return m.getBrowserName()==="windows phone"},describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(m){var k=Number(String(m.getOSVersion()).split(".")[0]);return m.getOSName(!0)==="android"&&k>=3},describe:function(){return{type:E.PLATFORMS_MAP.tablet}}},{test:function(m){return m.getOSName(!0)==="android"},describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(m){return m.getOSName(!0)==="macos"},describe:function(){return{type:E.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(m){return m.getOSName(!0)==="windows"},describe:function(){return{type:E.PLATFORMS_MAP.desktop}}},{test:function(m){return m.getOSName(!0)==="linux"},describe:function(){return{type:E.PLATFORMS_MAP.desktop}}},{test:function(m){return m.getOSName(!0)==="playstation 4"},describe:function(){return{type:E.PLATFORMS_MAP.tv}}},{test:function(m){return m.getOSName(!0)==="roku"},describe:function(){return{type:E.PLATFORMS_MAP.tv}}}];u.default=_,y.exports=u.default},95:function(y,u,R){u.__esModule=!0,u.default=void 0;var v,b=(v=R(17))&&v.__esModule?v:{default:v},E=R(18),_=[{test:function(m){return m.getBrowserName(!0)==="microsoft edge"},describe:function(m){if(/\sedg\//i.test(m))return{name:E.ENGINE_MAP.Blink};var k=b.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,m);return{name:E.ENGINE_MAP.EdgeHTML,version:k}}},{test:[/trident/i],describe:function(m){var k={name:E.ENGINE_MAP.Trident},w=b.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:function(m){return m.test(/presto/i)},describe:function(m){var k={name:E.ENGINE_MAP.Presto},w=b.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:function(m){var k=m.test(/gecko/i),w=m.test(/like gecko/i);return k&&!w},describe:function(m){var k={name:E.ENGINE_MAP.Gecko},w=b.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:E.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(m){var k={name:E.ENGINE_MAP.WebKit},w=b.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}}];u.default=_,y.exports=u.default}})},6939:function(N,y,u){var R,v,b;N.exports=(b=u(9021),u(7165),b.mode.CTR=(R=b.lib.BlockCipherMode.extend(),v=R.Encryptor=R.extend({processBlock:function(E,_){var m=this._cipher,k=m.blockSize,w=this._iv,F=this._counter;w&&(F=this._counter=w.slice(0),this._iv=void 0);var g=F.slice(0);m.encryptBlock(g,0),F[k-1]=F[k-1]+1|0;for(var A=0;A<k;A++)E[_+A]^=g[A]}}),R.Decryptor=v,R),b.mode.CTR)},6993:(N,y,u)=>{var R=u(5546);function v(){var b,E,_=typeof Symbol=="function"?Symbol:{},m=_.iterator||"@@iterator",k=_.toStringTag||"@@toStringTag";function w(x,d,T,O){var M=d&&d.prototype instanceof g?d:g,I=Object.create(M.prototype);return R(I,"_invoke",function(U,z,$){var q,ae,Q,ve=0,we=$||[],Re=!1,me={p:0,n:0,v:b,a:Ce,f:Ce.bind(b,4),d:function(Be,be){return q=Be,ae=0,Q=b,me.n=be,F}};function Ce(Be,be){for(ae=Be,Q=be,E=0;!Re&&ve&&!Ye&&E<we.length;E++){var Ye,Qe=we[E],Ge=me.p,He=Qe[2];Be>3?(Ye=He===be)&&(Q=Qe[(ae=Qe[4])?5:(ae=3,3)],Qe[4]=Qe[5]=b):Qe[0]<=Ge&&((Ye=Be<2&&Ge<Qe[1])?(ae=0,me.v=be,me.n=Qe[1]):Ge<He&&(Ye=Be<3||Qe[0]>be||be>He)&&(Qe[4]=Be,Qe[5]=be,me.n=He,ae=0))}if(Ye||Be>1)return F;throw Re=!0,be}return function(Be,be,Ye){if(ve>1)throw TypeError("Generator is already running");for(Re&&be===1&&Ce(be,Ye),ae=be,Q=Ye;(E=ae<2?b:Q)||!Re;){q||(ae?ae<3?(ae>1&&(me.n=-1),Ce(ae,Q)):me.n=Q:me.v=Q);try{if(ve=2,q){if(ae||(Be="next"),E=q[Be]){if(!(E=E.call(q,Q)))throw TypeError("iterator result is not an object");if(!E.done)return E;Q=E.value,ae<2&&(ae=0)}else ae===1&&(E=q.return)&&E.call(q),ae<2&&(Q=TypeError("The iterator does not provide a '"+Be+"' method"),ae=1);q=b}else if((E=(Re=me.n<0)?Q:U.call(z,me))!==F)break}catch(Qe){q=b,ae=1,Q=Qe}finally{ve=1}}return{value:E,done:Re}}}(x,T,O),!0),I}var F={};function g(){}function A(){}function P(){}E=Object.getPrototypeOf;var H=[][m]?E(E([][m]())):(R(E={},m,function(){return this}),E),D=P.prototype=g.prototype=Object.create(H);function S(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,P):(x.__proto__=P,R(x,k,"GeneratorFunction")),x.prototype=Object.create(D),x}return A.prototype=P,R(D,"constructor",P),R(P,"constructor",A),A.displayName="GeneratorFunction",R(P,k,"GeneratorFunction"),R(D),R(D,k,"Generator"),R(D,m,function(){return this}),R(D,"toString",function(){return"[object Generator]"}),(N.exports=v=function(){return{w,m:S}},N.exports.__esModule=!0,N.exports.default=N.exports)()}N.exports=v,N.exports.__esModule=!0,N.exports.default=N.exports},7007:N=>{var y,u=typeof Reflect=="object"?Reflect:null,R=u&&typeof u.apply=="function"?u.apply:function(D,S,x){return Function.prototype.apply.call(D,S,x)};y=u&&typeof u.ownKeys=="function"?u.ownKeys:Object.getOwnPropertySymbols?function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:function(D){return Object.getOwnPropertyNames(D)};var v=Number.isNaN||function(D){return D!=D};function b(){b.init.call(this)}N.exports=b,N.exports.once=function(D,S){return new Promise(function(x,d){function T(M){D.removeListener(S,O),d(M)}function O(){typeof D.removeListener=="function"&&D.removeListener("error",T),x([].slice.call(arguments))}H(D,S,O,{once:!0}),S!=="error"&&function(M,I,U){typeof M.on=="function"&&H(M,"error",I,U)}(D,T,{once:!0})})},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var E=10;function _(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}function m(D){return D._maxListeners===void 0?b.defaultMaxListeners:D._maxListeners}function k(D,S,x,d){var T,O,M,I;if(_(x),(O=D._events)===void 0?(O=D._events=Object.create(null),D._eventsCount=0):(O.newListener!==void 0&&(D.emit("newListener",S,x.listener?x.listener:x),O=D._events),M=O[S]),M===void 0)M=O[S]=x,++D._eventsCount;else if(typeof M=="function"?M=O[S]=d?[x,M]:[M,x]:d?M.unshift(x):M.push(x),(T=m(D))>0&&M.length>T&&!M.warned){M.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=D,U.type=S,U.count=M.length,I=U,console&&console.warn&&console.warn(I)}return D}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F(D,S,x){var d={fired:!1,wrapFn:void 0,target:D,type:S,listener:x},T=w.bind(d);return T.listener=x,d.wrapFn=T,T}function g(D,S,x){var d=D._events;if(d===void 0)return[];var T=d[S];return T===void 0?[]:typeof T=="function"?x?[T.listener||T]:[T]:x?function(O){for(var M=new Array(O.length),I=0;I<M.length;++I)M[I]=O[I].listener||O[I];return M}(T):P(T,T.length)}function A(D){var S=this._events;if(S!==void 0){var x=S[D];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}function P(D,S){for(var x=new Array(S),d=0;d<S;++d)x[d]=D[d];return x}function H(D,S,x,d){if(typeof D.on=="function")d.once?D.once(S,x):D.on(S,x);else{if(typeof D.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof D);D.addEventListener(S,function T(O){d.once&&D.removeEventListener(S,T),x(O)})}}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(D){if(typeof D!="number"||D<0||v(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");E=D}}),b.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||v(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this},b.prototype.getMaxListeners=function(){return m(this)},b.prototype.emit=function(D){for(var S=[],x=1;x<arguments.length;x++)S.push(arguments[x]);var d=D==="error",T=this._events;if(T!==void 0)d=d&&T.error===void 0;else if(!d)return!1;if(d){var O;if(S.length>0&&(O=S[0]),O instanceof Error)throw O;var M=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw M.context=O,M}var I=T[D];if(I===void 0)return!1;if(typeof I=="function")R(I,this,S);else{var U=I.length,z=P(I,U);for(x=0;x<U;++x)R(z[x],this,S)}return!0},b.prototype.addListener=function(D,S){return k(this,D,S,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(D,S){return k(this,D,S,!0)},b.prototype.once=function(D,S){return _(S),this.on(D,F(this,D,S)),this},b.prototype.prependOnceListener=function(D,S){return _(S),this.prependListener(D,F(this,D,S)),this},b.prototype.removeListener=function(D,S){var x,d,T,O,M;if(_(S),(d=this._events)===void 0)return this;if((x=d[D])===void 0)return this;if(x===S||x.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete d[D],d.removeListener&&this.emit("removeListener",D,x.listener||S));else if(typeof x!="function"){for(T=-1,O=x.length-1;O>=0;O--)if(x[O]===S||x[O].listener===S){M=x[O].listener,T=O;break}if(T<0)return this;T===0?x.shift():function(I,U){for(;U+1<I.length;U++)I[U]=I[U+1];I.pop()}(x,T),x.length===1&&(d[D]=x[0]),d.removeListener!==void 0&&this.emit("removeListener",D,M||S)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(D){var S,x,d;if((x=this._events)===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[D]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[D]),this;if(arguments.length===0){var T,O=Object.keys(x);for(d=0;d<O.length;++d)(T=O[d])!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(S=x[D])=="function")this.removeListener(D,S);else if(S!==void 0)for(d=S.length-1;d>=0;d--)this.removeListener(D,S[d]);return this},b.prototype.listeners=function(D){return g(this,D,!0)},b.prototype.rawListeners=function(D){return g(this,D,!1)},b.listenerCount=function(D,S){return typeof D.listenerCount=="function"?D.listenerCount(S):A.call(D,S)},b.prototype.listenerCount=A,b.prototype.eventNames=function(){return this._eventsCount>0?y(this._events):[]}},7080:(N,y,u)=>{u.d(y,{q:()=>v,s:()=>R});var R={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},v={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}},7165:function(N,y,u){var R;N.exports=(R=u(9021),u(9506),void(R.lib.Cipher||function(v){var b=R,E=b.lib,_=E.Base,m=E.WordArray,k=E.BufferedBlockAlgorithm,w=b.enc,F=(w.Utf8,w.Base64),g=b.algo.EvpKDF,A=E.Cipher=k.extend({cfg:_.extend(),createEncryptor:function(I,U){return this.create(this._ENC_XFORM_MODE,I,U)},createDecryptor:function(I,U){return this.create(this._DEC_XFORM_MODE,I,U)},init:function(I,U,z){this.cfg=this.cfg.extend(z),this._xformMode=I,this._key=U,this.reset()},reset:function(){k.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){return I&&this._append(I),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function I(U){return typeof U=="string"?M:T}return function(U){return{encrypt:function(z,$,q){return I($).encrypt(U,z,$,q)},decrypt:function(z,$,q){return I($).decrypt(U,z,$,q)}}}}()}),P=(E.StreamCipher=A.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),b.mode={}),H=E.BlockCipherMode=_.extend({createEncryptor:function(I,U){return this.Encryptor.create(I,U)},createDecryptor:function(I,U){return this.Decryptor.create(I,U)},init:function(I,U){this._cipher=I,this._iv=U}}),D=P.CBC=function(){var I=H.extend();function U(z,$,q){var ae,Q=this._iv;Q?(ae=Q,this._iv=v):ae=this._prevBlock;for(var ve=0;ve<q;ve++)z[$+ve]^=ae[ve]}return I.Encryptor=I.extend({processBlock:function(z,$){var q=this._cipher,ae=q.blockSize;U.call(this,z,$,ae),q.encryptBlock(z,$),this._prevBlock=z.slice($,$+ae)}}),I.Decryptor=I.extend({processBlock:function(z,$){var q=this._cipher,ae=q.blockSize,Q=z.slice($,$+ae);q.decryptBlock(z,$),U.call(this,z,$,ae),this._prevBlock=Q}}),I}(),S=(b.pad={}).Pkcs7={pad:function(I,U){for(var z=4*U,$=z-I.sigBytes%z,q=$<<24|$<<16|$<<8|$,ae=[],Q=0;Q<$;Q+=4)ae.push(q);var ve=m.create(ae,$);I.concat(ve)},unpad:function(I){var U=255&I.words[I.sigBytes-1>>>2];I.sigBytes-=U}},x=(E.BlockCipher=A.extend({cfg:A.cfg.extend({mode:D,padding:S}),reset:function(){var I;A.reset.call(this);var U=this.cfg,z=U.iv,$=U.mode;this._xformMode==this._ENC_XFORM_MODE?I=$.createEncryptor:(I=$.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,z&&z.words):(this._mode=I.call($,this,z&&z.words),this._mode.__creator=I)},_doProcessBlock:function(I,U){this._mode.processBlock(I,U)},_doFinalize:function(){var I,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),U.unpad(I)),I},blockSize:4}),E.CipherParams=_.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}})),d=(b.format={}).OpenSSL={stringify:function(I){var U=I.ciphertext,z=I.salt;return(z?m.create([1398893684,1701076831]).concat(z).concat(U):U).toString(F)},parse:function(I){var U,z=F.parse(I),$=z.words;return $[0]==1398893684&&$[1]==1701076831&&(U=m.create($.slice(2,4)),$.splice(0,4),z.sigBytes-=16),x.create({ciphertext:z,salt:U})}},T=E.SerializableCipher=_.extend({cfg:_.extend({format:d}),encrypt:function(I,U,z,$){$=this.cfg.extend($);var q=I.createEncryptor(z,$),ae=q.finalize(U),Q=q.cfg;return x.create({ciphertext:ae,key:z,iv:Q.iv,algorithm:I,mode:Q.mode,padding:Q.padding,blockSize:I.blockSize,formatter:$.format})},decrypt:function(I,U,z,$){return $=this.cfg.extend($),U=this._parse(U,$.format),I.createDecryptor(z,$).finalize(U.ciphertext)},_parse:function(I,U){return typeof I=="string"?U.parse(I,this):I}}),O=(b.kdf={}).OpenSSL={execute:function(I,U,z,$,q){if($||($=m.random(8)),q)ae=g.create({keySize:U+z,hasher:q}).compute(I,$);else var ae=g.create({keySize:U+z}).compute(I,$);var Q=m.create(ae.words.slice(U),4*z);return ae.sigBytes=4*U,x.create({key:ae,iv:Q,salt:$})}},M=E.PasswordBasedCipher=T.extend({cfg:T.cfg.extend({kdf:O}),encrypt:function(I,U,z,$){var q=($=this.cfg.extend($)).kdf.execute(z,I.keySize,I.ivSize,$.salt,$.hasher);$.iv=q.iv;var ae=T.encrypt.call(this,I,U,q.key,$);return ae.mixIn(q),ae},decrypt:function(I,U,z,$){$=this.cfg.extend($),U=this._parse(U,$.format);var q=$.kdf.execute(z,I.keySize,I.ivSize,U.salt,$.hasher);return $.iv=q.iv,T.decrypt.call(this,I,U,q.key,$)}})}()))},7193:function(N,y,u){var R;N.exports=(R=u(9021),u(754),u(4636),u(9506),u(7165),function(){var v=R,b=v.lib.StreamCipher,E=v.algo,_=E.RC4=b.extend({_doReset:function(){for(var w=this._key,F=w.words,g=w.sigBytes,A=this._S=[],P=0;P<256;P++)A[P]=P;P=0;for(var H=0;P<256;P++){var D=P%g,S=F[D>>>2]>>>24-D%4*8&255;H=(H+A[P]+S)%256;var x=A[P];A[P]=A[H],A[H]=x}this._i=this._j=0},_doProcessBlock:function(w,F){w[F]^=m.call(this)},keySize:8,ivSize:0});function m(){for(var w=this._S,F=this._i,g=this._j,A=0,P=0;P<4;P++){g=(g+w[F=(F+1)%256])%256;var H=w[F];w[F]=w[g],w[g]=H,A|=w[(w[F]+w[g])%256]<<24-8*P}return this._i=F,this._j=g,A}v.RC4=b._createHelper(_);var k=E.RC4Drop=_.extend({cfg:_.cfg.extend({drop:192}),_doReset:function(){_._doReset.call(this);for(var w=this.cfg.drop;w>0;w--)m.call(this)}});v.RC4Drop=b._createHelper(k)}(),R.RC4)},7363:(N,y,u)=>{var R=u(5020),v=u(3804),b=u(5602);y.grammar=b,y.write=v,y.parse=R.parse,y.parseParams=R.parseParams,y.parseFmtpConfig=R.parseFmtpConfig,y.parsePayloads=R.parsePayloads,y.parseRemoteCandidates=R.parseRemoteCandidates,y.parseImageAttributes=R.parseImageAttributes,y.parseSimulcastStreamList=R.parseSimulcastStreamList},7402:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Chrome55=void 0;const R=u(7363),v=u(2994),b=u(4893),E=u(1765),_=u(8046),m=u(5544),k=u(4496),w=u(521),F=u(1305),g=new v.Logger("Chrome55"),A={OS:1024,MIS:1024};class P extends w.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdTrack=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new P}constructor(){super()}get name(){return"Chrome55"}close(){if(g.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");const D=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const S=await D.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{D.close()}catch{}const x=R.parse(S.sdp);return m.extractRtpCapabilities({sdpObject:x})}catch(S){try{D.close()}catch{}throw S}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:A}}run({direction:D,iceParameters:S,iceCandidates:x,dtlsParameters:d,sctpParameters:T,iceServers:O,iceTransportPolicy:M,additionalSettings:I,proprietaryConstraints:U,extendedRtpCapabilities:z}){g.debug("run()"),this._direction=D,this._remoteSdp=new F.RemoteSdp({iceParameters:S,iceCandidates:x,dtlsParameters:d,sctpParameters:T,planB:!0}),this._sendingRtpParametersByKind={audio:_.getSendingRtpParameters("audio",z),video:_.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:_.getSendingRemoteRtpParameters("audio",z),video:_.getSendingRemoteRtpParameters("video",z)},d.role&&d.role!=="auto"&&(this._forcedLocalDtlsRole=d.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...I},U),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",$=>{this.emit("@icecandidateerror",$)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(D){g.debug("updateIceServers()");const S=this._pc.getConfiguration();S.iceServers=D,this._pc.setConfiguration(S)}async restartIce(D){if(g.debug("restartIce()"),this._remoteSdp.updateIceParameters(D),this._transportReady)if(this._direction==="send"){const S=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const x={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const S={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const x=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this._pc.getStats()}async send({track:D,encodings:S,codecOptions:x,codec:d}){this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",D.kind,D.id),d&&g.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(D),this._pc.addStream(this._sendStream);let T,O=await this._pc.createOffer(),M=R.parse(O.sdp);M.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const I=E.clone(this._sendingRtpParametersByKind[D.kind]);I.codecs=_.reduceCodecs(I.codecs);const U=E.clone(this._sendingRemoteRtpParametersByKind[D.kind]);if(U.codecs=_.reduceCodecs(U.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),D.kind==="video"&&S&&S.length>1&&(g.debug("send() | enabling simulcast"),M=R.parse(O.sdp),T=M.media.find(q=>q.type==="video"),k.addLegacySimulcast({offerMediaObject:T,track:D,numStreams:S.length}),O={type:"offer",sdp:R.write(M)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),M=R.parse(this._pc.localDescription.sdp),T=M.media.find(q=>q.type===D.kind),I.rtcp.cname=m.getCname({offerMediaObject:T}),I.encodings=k.getRtpEncodings({offerMediaObject:T,track:D}),S)for(let q=0;q<I.encodings.length;++q)S[q]&&Object.assign(I.encodings[q],S[q]);if(I.encodings.length>1&&I.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const q of I.encodings)q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:T,offerRtpParameters:I,answerRtpParameters:U,codecOptions:x});const z={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z);const $=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set($,D),{localId:$,rtpParameters:I}}async stopSending(D){this.assertSendDirection(),g.debug("stopSending() [localId:%s]",D);const S=this._mapSendLocalIdTrack.get(D);if(!S)throw new Error("track not found");this._mapSendLocalIdTrack.delete(D),this._sendStream.removeTrack(S),this._pc.addStream(this._sendStream);const x=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",x);try{await this._pc.setLocalDescription(x)}catch(T){if(this._sendStream.getTracks().length===0)return void g.warn("stopSending() | ignoring expected error due no sending tracks: %s",T.toString());throw T}if(this._pc.signalingState==="stable")return;const d={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d)}async pauseSending(D){}async resumeSending(D){}async replaceTrack(D,S){throw new b.UnsupportedError("not implemented")}async setMaxSpatialLayer(D,S){throw new b.UnsupportedError(" not implemented")}async setRtpEncodingParameters(D,S){throw new b.UnsupportedError("not supported")}async getSenderStats(D){throw new b.UnsupportedError("not implemented")}async sendDataChannel({ordered:D,maxPacketLifeTime:S,maxRetransmits:x,label:d,protocol:T}){this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:D,maxPacketLifeTime:S,maxRetransmitTime:S,maxRetransmits:x,protocol:T};g.debug("sendDataChannel() [options:%o]",O);const M=this._pc.createDataChannel(d,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%A.MIS,!this._hasDataChannelMediaSection){const I=await this._pc.createOffer(),U=R.parse(I.sdp),z=U.media.find(q=>q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const $={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(D){this.assertRecvDirection();const S=[];for(const O of D){const{trackId:M,kind:I,rtpParameters:U,streamId:z}=O;g.debug("receive() [trackId:%s, kind:%s]",M,I);const $=I;this._remoteSdp.receive({mid:$,kind:I,offerRtpParameters:U,streamId:z??U.rtcp.cname,trackId:M})}const x={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);let d=await this._pc.createAnswer();const T=R.parse(d.sdp);for(const O of D){const{kind:M,rtpParameters:I}=O,U=M,z=T.media.find($=>String($.mid)===U);m.applyCodecParameters({offerRtpParameters:I,answerMediaObject:z})}d={type:"answer",sdp:R.write(T)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:T}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d);for(const O of D){const{kind:M,trackId:I,rtpParameters:U}=O,z=M,$=I,q=O.streamId??U.rtcp.cname,ae=this._pc.getRemoteStreams().find(Q=>Q.id===q).getTrackById($);if(!ae)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set($,{mid:z,rtpParameters:U}),S.push({localId:$,track:ae})}return S}async stopReceiving(D){this.assertRecvDirection();for(const d of D){g.debug("stopReceiving() [localId:%s]",d);const{mid:T,rtpParameters:O}=this._mapRecvLocalIdInfo.get(d)??{};this._mapRecvLocalIdInfo.delete(d),this._remoteSdp.planBStopReceiving({mid:T,offerRtpParameters:O})}const S={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const x=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async pauseReceiving(D){}async resumeReceiving(D){}async getReceiverStats(D){throw new b.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:D,label:S,protocol:x}){this.assertRecvDirection();const{streamId:d,ordered:T,maxPacketLifeTime:O,maxRetransmits:M}=D,I={negotiated:!0,id:d,ordered:T,maxPacketLifeTime:O,maxRetransmitTime:O,maxRetransmits:M,protocol:x};g.debug("receiveDataChannel() [options:%o]",I);const U=this._pc.createDataChannel(S,I);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const z={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const $=await this._pc.createAnswer();if(!this._transportReady){const q=R.parse($.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:q})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setLocalDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:U}}async setupTransport({localDtlsRole:D,localSdpObject:S}){S||(S=R.parse(this._pc.localDescription.sdp));const x=m.extractDtlsParameters({sdpObject:S});x.role=D,this._remoteSdp.updateDtlsRole(D==="client"?"server":"client"),await new Promise((d,T)=>{this.safeEmit("@connect",{dtlsParameters:x},d,T)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.Chrome55=P},7504:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DataProducer=void 0;const R=u(2994),v=u(3953),b=u(4893),E=new R.Logger("DataProducer");class _ extends v.EnhancedEventEmitter{_id;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new v.EnhancedEventEmitter;constructor({id:k,dataChannel:w,sctpStreamParameters:F,appData:g}){super(),E.debug("constructor()"),this._id=k,this._dataChannel=w,this._sctpStreamParameters=F,this._appData=g??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(k){this._dataChannel.bufferedAmountLowThreshold=k}get appData(){return this._appData}set appData(k){this._appData=k}get observer(){return this._observer}close(){this._closed||(E.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(E.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(k){if(E.debug("send()"),this._closed)throw new b.InvalidStateError("closed");this._dataChannel.send(k)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(E.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",k=>{if(this._closed)return;let{error:w}=k;w||(w=new Error("unknown DataChannel error")),w.errorDetail==="sctp-failure"?E.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",w.sctpCauseCode,w.message):E.error('DataChannel "error" event: %o',w),this.safeEmit("error",w)}),this._dataChannel.addEventListener("close",()=>{this._closed||(E.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||E.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}y.DataProducer=_},7628:function(N,y,u){var R;N.exports=(R=u(9021),u(754),u(4636),u(9506),u(7165),function(){var v=R,b=v.lib,E=b.WordArray,_=b.BlockCipher,m=v.algo,k=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],w=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],F=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],g=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],A=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],P=m.DES=_.extend({_doReset:function(){for(var x=this._key.words,d=[],T=0;T<56;T++){var O=k[T]-1;d[T]=x[O>>>5]>>>31-O%32&1}for(var M=this._subKeys=[],I=0;I<16;I++){var U=M[I]=[],z=F[I];for(T=0;T<24;T++)U[T/6|0]|=d[(w[T]-1+z)%28]<<31-T%6,U[4+(T/6|0)]|=d[28+(w[T+24]-1+z)%28]<<31-T%6;for(U[0]=U[0]<<1|U[0]>>>31,T=1;T<7;T++)U[T]=U[T]>>>4*(T-1)+3;U[7]=U[7]<<5|U[7]>>>27}var $=this._invSubKeys=[];for(T=0;T<16;T++)$[T]=M[15-T]},encryptBlock:function(x,d){this._doCryptBlock(x,d,this._subKeys)},decryptBlock:function(x,d){this._doCryptBlock(x,d,this._invSubKeys)},_doCryptBlock:function(x,d,T){this._lBlock=x[d],this._rBlock=x[d+1],H.call(this,4,252645135),H.call(this,16,65535),D.call(this,2,858993459),D.call(this,8,16711935),H.call(this,1,1431655765);for(var O=0;O<16;O++){for(var M=T[O],I=this._lBlock,U=this._rBlock,z=0,$=0;$<8;$++)z|=g[$][((U^M[$])&A[$])>>>0];this._lBlock=U,this._rBlock=I^z}var q=this._lBlock;this._lBlock=this._rBlock,this._rBlock=q,H.call(this,1,1431655765),D.call(this,8,16711935),D.call(this,2,858993459),H.call(this,16,65535),H.call(this,4,252645135),x[d]=this._lBlock,x[d+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function H(x,d){var T=(this._lBlock>>>x^this._rBlock)&d;this._rBlock^=T,this._lBlock^=T<<x}function D(x,d){var T=(this._rBlock>>>x^this._lBlock)&d;this._lBlock^=T,this._rBlock^=T<<x}v.DES=_._createHelper(P);var S=m.TripleDES=_.extend({_doReset:function(){var x=this._key.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var d=x.slice(0,2),T=x.length<4?x.slice(0,2):x.slice(2,4),O=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=P.createEncryptor(E.create(d)),this._des2=P.createEncryptor(E.create(T)),this._des3=P.createEncryptor(E.create(O))},encryptBlock:function(x,d){this._des1.encryptBlock(x,d),this._des2.decryptBlock(x,d),this._des3.encryptBlock(x,d)},decryptBlock:function(x,d){this._des3.decryptBlock(x,d),this._des2.encryptBlock(x,d),this._des1.decryptBlock(x,d)},keySize:6,ivSize:2,blockSize:2});v.TripleDES=_._createHelper(S)}(),R.TripleDES)},7654:(N,y,u)=>{var R="__lodash_hash_undefined__",v="[object Function]",b="[object GeneratorFunction]",E=/^\[object .+?Constructor\]$/,_=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g,m=typeof self=="object"&&self&&self.Object===Object&&self,k=_||m||Function("return this")(),w,F=Array.prototype,g=Function.prototype,A=Object.prototype,P=k["__core-js_shared__"],H=(w=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",D=g.toString,S=A.hasOwnProperty,x=A.toString,d=RegExp("^"+D.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=F.splice,O=Q(k,"Map"),M=Q(Object,"create");function I(me){var Ce=-1,Be=me?me.length:0;for(this.clear();++Ce<Be;){var be=me[Ce];this.set(be[0],be[1])}}function U(me){var Ce=-1,Be=me?me.length:0;for(this.clear();++Ce<Be;){var be=me[Ce];this.set(be[0],be[1])}}function z(me){var Ce=-1,Be=me?me.length:0;for(this.clear();++Ce<Be;){var be=me[Ce];this.set(be[0],be[1])}}function $(me,Ce){for(var Be=me.length;Be--;)if(we(me[Be][0],Ce))return Be;return-1}function q(me){if(!Re(me)||(Ce=me,H&&H in Ce))return!1;var Ce,Be=function(be){var Ye=Re(be)?x.call(be):"";return Ye==v||Ye==b}(me)||function(be){var Ye=!1;if(be!=null&&typeof be.toString!="function")try{Ye=!!(be+"")}catch{}return Ye}(me)?d:E;return Be.test(function(be){if(be!=null){try{return D.call(be)}catch{}try{return be+""}catch{}}return""}(me))}function ae(me,Ce){var Be,be,Ye=me.__data__;return((be=typeof(Be=Ce))=="string"||be=="number"||be=="symbol"||be=="boolean"?Be!=="__proto__":Be===null)?Ye[typeof Ce=="string"?"string":"hash"]:Ye.map}function Q(me,Ce){var Be=function(be,Ye){return be?.[Ye]}(me,Ce);return q(Be)?Be:void 0}function ve(me,Ce){if(typeof me!="function"||Ce&&typeof Ce!="function")throw new TypeError("Expected a function");var Be=function(){var be=arguments,Ye=Ce?Ce.apply(this,be):be[0],Qe=Be.cache;if(Qe.has(Ye))return Qe.get(Ye);var Ge=me.apply(this,be);return Be.cache=Qe.set(Ye,Ge),Ge};return Be.cache=new(ve.Cache||z),Be}function we(me,Ce){return me===Ce||me!=me&&Ce!=Ce}function Re(me){var Ce=typeof me;return!!me&&(Ce=="object"||Ce=="function")}I.prototype.clear=function(){this.__data__=M?M(null):{}},I.prototype.delete=function(me){return this.has(me)&&delete this.__data__[me]},I.prototype.get=function(me){var Ce=this.__data__;if(M){var Be=Ce[me];return Be===R?void 0:Be}return S.call(Ce,me)?Ce[me]:void 0},I.prototype.has=function(me){var Ce=this.__data__;return M?Ce[me]!==void 0:S.call(Ce,me)},I.prototype.set=function(me,Ce){return this.__data__[me]=M&&Ce===void 0?R:Ce,this},U.prototype.clear=function(){this.__data__=[]},U.prototype.delete=function(me){var Ce=this.__data__,Be=$(Ce,me);return!(Be<0)&&(Be==Ce.length-1?Ce.pop():T.call(Ce,Be,1),!0)},U.prototype.get=function(me){var Ce=this.__data__,Be=$(Ce,me);return Be<0?void 0:Ce[Be][1]},U.prototype.has=function(me){return $(this.__data__,me)>-1},U.prototype.set=function(me,Ce){var Be=this.__data__,be=$(Be,me);return be<0?Be.push([me,Ce]):Be[be][1]=Ce,this},z.prototype.clear=function(){this.__data__={hash:new I,map:new(O||U),string:new I}},z.prototype.delete=function(me){return ae(this,me).delete(me)},z.prototype.get=function(me){return ae(this,me).get(me)},z.prototype.has=function(me){return ae(this,me).has(me)},z.prototype.set=function(me,Ce){return ae(this,me).set(me,Ce),this},ve.Cache=z,N.exports=ve},7800:(N,y,u)=>{u.d(y,{A:()=>v});var R=u(3145);function v(b,E){if(b){if(typeof b=="string")return(0,R.A)(b,E);var _={}.toString.call(b).slice(8,-1);return _==="Object"&&b.constructor&&(_=b.constructor.name),_==="Map"||_==="Set"?Array.from(b):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?(0,R.A)(b,E):void 0}}},7833:(N,y,u)=>{y.formatArgs=function(v){if(v[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+v[0]+(this.useColors?"%c ":" ")+"+"+N.exports.humanize(this.diff),!this.useColors)return;const b="color: "+this.color;v.splice(1,0,b,"color: inherit");let E=0,_=0;v[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(E++,m==="%c"&&(_=E))}),v.splice(_,0,b)},y.save=function(v){try{v?y.storage.setItem("debug",v):y.storage.removeItem("debug")}catch{}},y.load=function(){let v;try{v=y.storage.getItem("debug")||y.storage.getItem("DEBUG")}catch{}return!v&&typeof process<"u"&&"env"in process&&(v=r.DEBUG),v},y.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let v;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(v=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(v[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},y.storage=function(){try{return localStorage}catch{}}(),y.destroy=(()=>{let v=!1;return()=>{v||(v=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),y.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],y.log=console.debug||console.log||(()=>{}),N.exports=u(736)(y);const{formatters:R}=N.exports;R.j=function(v){try{return JSON.stringify(v)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}}},8046:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.validateRtpCapabilities=function(d){if(typeof d!="object")throw new TypeError("caps is not an object");if(d.codecs&&!Array.isArray(d.codecs))throw new TypeError("caps.codecs is not an array");d.codecs||(d.codecs=[]);for(const T of d.codecs)k(T);if(d.headerExtensions&&!Array.isArray(d.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");d.headerExtensions||(d.headerExtensions=[]);for(const T of d.headerExtensions)F(T)},y.validateRtpParameters=m,y.validateSctpStreamParameters=function(d){if(typeof d!="object")throw new TypeError("params is not an object");if(typeof d.streamId!="number")throw new TypeError("missing params.streamId");let T=!1;if(typeof d.ordered=="boolean"?T=!0:d.ordered=!0,d.maxPacketLifeTime&&typeof d.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(d.maxRetransmits&&typeof d.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(d.maxPacketLifeTime&&d.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(T&&d.ordered&&(d.maxPacketLifeTime||d.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(T||!d.maxPacketLifeTime&&!d.maxRetransmits||(d.ordered=!1),d.label&&typeof d.label!="string")throw new TypeError("invalid params.label");if(d.protocol&&typeof d.protocol!="string")throw new TypeError("invalid params.protocol")},y.validateSctpCapabilities=function(d){if(typeof d!="object")throw new TypeError("caps is not an object");if(!d.numStreams||typeof d.numStreams!="object")throw new TypeError("missing caps.numStreams");(function(T){if(typeof T!="object")throw new TypeError("numStreams is not an object");if(typeof T.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof T.MIS!="number")throw new TypeError("missing numStreams.MIS")})(d.numStreams)},y.getExtendedRtpCapabilities=function(d,T){const O={codecs:[],headerExtensions:[]};for(const M of T.codecs??[]){if(H(M))continue;const I=(d.codecs??[]).find(z=>D(z,M,{strict:!0,modify:!0}));if(!I)continue;const U={mimeType:I.mimeType,kind:I.kind,clockRate:I.clockRate,channels:I.channels,localPayloadType:I.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:M.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:I.parameters,remoteParameters:M.parameters,rtcpFeedback:x(I,M)};O.codecs.push(U)}for(const M of O.codecs){const I=d.codecs.find(z=>H(z)&&z.parameters.apt===M.localPayloadType),U=T.codecs.find(z=>H(z)&&z.parameters.apt===M.remotePayloadType);I&&U&&(M.localRtxPayloadType=I.preferredPayloadType,M.remoteRtxPayloadType=U.preferredPayloadType)}for(const M of T.headerExtensions){const I=d.headerExtensions.find(z=>S(z,M));if(!I)continue;const U={kind:M.kind,uri:M.uri,sendId:I.preferredId,recvId:M.preferredId,encrypt:I.preferredEncrypt,direction:"sendrecv"};switch(M.direction){case"sendrecv":U.direction="sendrecv";break;case"recvonly":U.direction="sendonly";break;case"sendonly":U.direction="recvonly";break;case"inactive":U.direction="inactive"}O.headerExtensions.push(U)}return O},y.getRecvRtpCapabilities=function(d){const T={codecs:[],headerExtensions:[]};for(const O of d.codecs){const M={mimeType:O.mimeType,kind:O.kind,preferredPayloadType:O.remotePayloadType,clockRate:O.clockRate,channels:O.channels,parameters:O.localParameters,rtcpFeedback:O.rtcpFeedback};if(T.codecs.push(M),!O.remoteRtxPayloadType)continue;const I={mimeType:`${O.kind}/rtx`,kind:O.kind,preferredPayloadType:O.remoteRtxPayloadType,clockRate:O.clockRate,parameters:{apt:O.remotePayloadType},rtcpFeedback:[]};T.codecs.push(I)}for(const O of d.headerExtensions){if(O.direction!=="sendrecv"&&O.direction!=="recvonly")continue;const M={kind:O.kind,uri:O.uri,preferredId:O.recvId,preferredEncrypt:O.encrypt,direction:O.direction};T.headerExtensions.push(M)}return T},y.getSendingRtpParameters=function(d,T){const O={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const M of T.codecs){if(M.kind!==d)continue;const I={mimeType:M.mimeType,payloadType:M.localPayloadType,clockRate:M.clockRate,channels:M.channels,parameters:M.localParameters,rtcpFeedback:M.rtcpFeedback};if(O.codecs.push(I),M.localRtxPayloadType){const U={mimeType:`${M.kind}/rtx`,payloadType:M.localRtxPayloadType,clockRate:M.clockRate,parameters:{apt:M.localPayloadType},rtcpFeedback:[]};O.codecs.push(U)}}for(const M of T.headerExtensions){if(M.kind&&M.kind!==d||M.direction!=="sendrecv"&&M.direction!=="sendonly")continue;const I={uri:M.uri,id:M.sendId,encrypt:M.encrypt,parameters:{}};O.headerExtensions.push(I)}return O},y.getSendingRemoteRtpParameters=function(d,T){const O={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const M of T.codecs){if(M.kind!==d)continue;const I={mimeType:M.mimeType,payloadType:M.localPayloadType,clockRate:M.clockRate,channels:M.channels,parameters:M.remoteParameters,rtcpFeedback:M.rtcpFeedback};if(O.codecs.push(I),M.localRtxPayloadType){const U={mimeType:`${M.kind}/rtx`,payloadType:M.localRtxPayloadType,clockRate:M.clockRate,parameters:{apt:M.localPayloadType},rtcpFeedback:[]};O.codecs.push(U)}}for(const M of T.headerExtensions){if(M.kind&&M.kind!==d||M.direction!=="sendrecv"&&M.direction!=="sendonly")continue;const I={uri:M.uri,id:M.sendId,encrypt:M.encrypt,parameters:{}};O.headerExtensions.push(I)}if(O.headerExtensions.some(M=>M.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const M of O.codecs)M.rtcpFeedback=(M.rtcpFeedback??[]).filter(I=>I.type!=="goog-remb");else if(O.headerExtensions.some(M=>M.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const M of O.codecs)M.rtcpFeedback=(M.rtcpFeedback??[]).filter(I=>I.type!=="transport-cc");else for(const M of O.codecs)M.rtcpFeedback=(M.rtcpFeedback??[]).filter(I=>I.type!=="transport-cc"&&I.type!=="goog-remb");return O},y.reduceCodecs=function(d,T){const O=[];if(T){for(let M=0;M<d.length;++M)if(D(d[M],T,{strict:!0})){O.push(d[M]),H(d[M+1])&&O.push(d[M+1]);break}if(O.length===0)throw new TypeError("no matching codec found")}else O.push(d[0]),H(d[1])&&O.push(d[1]);return O},y.generateProbatorRtpParameters=function(d){m(d=v.clone(d));const T={mid:b,codecs:[],headerExtensions:[],encodings:[{ssrc:E}],rtcp:{cname:"probator"}};return T.codecs.push(d.codecs[0]),T.codecs[0].payloadType=_,T.headerExtensions=d.headerExtensions,T},y.canSend=function(d,T){return T.codecs.some(O=>O.kind===d)},y.canReceive=function(d,T){if(m(d),d.codecs.length===0)return!1;const O=d.codecs[0];return T.codecs.some(M=>M.remotePayloadType===O.payloadType)};const R=u(3200),v=u(1765),b="probator",E=1234,_=127;function m(d){if(typeof d!="object")throw new TypeError("params is not an object");if(d.mid&&typeof d.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(d.codecs))throw new TypeError("missing params.codecs");for(const T of d.codecs)g(T);if(d.headerExtensions&&!Array.isArray(d.headerExtensions))throw new TypeError("params.headerExtensions is not an array");d.headerExtensions||(d.headerExtensions=[]);for(const T of d.headerExtensions)A(T);if(d.encodings&&!Array.isArray(d.encodings))throw new TypeError("params.encodings is not an array");d.encodings||(d.encodings=[]);for(const T of d.encodings)P(T);if(d.rtcp&&typeof d.rtcp!="object")throw new TypeError("params.rtcp is not an object");d.rtcp||(d.rtcp={}),function(T){if(typeof T!="object")throw new TypeError("rtcp is not an object");if(T.cname&&typeof T.cname!="string")throw new TypeError("invalid rtcp.cname");T.reducedSize&&typeof T.reducedSize=="boolean"||(T.reducedSize=!0)}(d.rtcp)}function k(d){const T=new RegExp("^(audio|video)/(.+)","i");if(typeof d!="object")throw new TypeError("codec is not an object");if(!d.mimeType||typeof d.mimeType!="string")throw new TypeError("missing codec.mimeType");const O=T.exec(d.mimeType);if(!O)throw new TypeError("invalid codec.mimeType");if(d.kind=O[1].toLowerCase(),d.preferredPayloadType&&typeof d.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof d.clockRate!="number")throw new TypeError("missing codec.clockRate");d.kind==="audio"?typeof d.channels!="number"&&(d.channels=1):delete d.channels,d.parameters&&typeof d.parameters=="object"||(d.parameters={});for(const M of Object.keys(d.parameters)){let I=d.parameters[M];if(I===void 0&&(d.parameters[M]="",I=""),typeof I!="string"&&typeof I!="number")throw new TypeError(`invalid codec parameter [key:${M}s, value:${I}]`);if(M==="apt"&&typeof I!="number")throw new TypeError("invalid codec apt parameter")}d.rtcpFeedback&&Array.isArray(d.rtcpFeedback)||(d.rtcpFeedback=[]);for(const M of d.rtcpFeedback)w(M)}function w(d){if(typeof d!="object")throw new TypeError("fb is not an object");if(!d.type||typeof d.type!="string")throw new TypeError("missing fb.type");d.parameter&&typeof d.parameter=="string"||(d.parameter="")}function F(d){if(typeof d!="object")throw new TypeError("ext is not an object");if(d.kind!=="audio"&&d.kind!=="video")throw new TypeError("invalid ext.kind");if(!d.uri||typeof d.uri!="string")throw new TypeError("missing ext.uri");if(typeof d.preferredId!="number")throw new TypeError("missing ext.preferredId");if(d.preferredEncrypt&&typeof d.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(d.preferredEncrypt||(d.preferredEncrypt=!1),d.direction&&typeof d.direction!="string")throw new TypeError("invalid ext.direction");d.direction||(d.direction="sendrecv")}function g(d){const T=new RegExp("^(audio|video)/(.+)","i");if(typeof d!="object")throw new TypeError("codec is not an object");if(!d.mimeType||typeof d.mimeType!="string")throw new TypeError("missing codec.mimeType");const O=T.exec(d.mimeType);if(!O)throw new TypeError("invalid codec.mimeType");if(typeof d.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof d.clockRate!="number")throw new TypeError("missing codec.clockRate");O[1].toLowerCase()==="audio"?typeof d.channels!="number"&&(d.channels=1):delete d.channels,d.parameters&&typeof d.parameters=="object"||(d.parameters={});for(const M of Object.keys(d.parameters)){let I=d.parameters[M];if(I===void 0&&(d.parameters[M]="",I=""),typeof I!="string"&&typeof I!="number")throw new TypeError(`invalid codec parameter [key:${M}s, value:${I}]`);if(M==="apt"&&typeof I!="number")throw new TypeError("invalid codec apt parameter")}d.rtcpFeedback&&Array.isArray(d.rtcpFeedback)||(d.rtcpFeedback=[]);for(const M of d.rtcpFeedback)w(M)}function A(d){if(typeof d!="object")throw new TypeError("ext is not an object");if(!d.uri||typeof d.uri!="string")throw new TypeError("missing ext.uri");if(typeof d.id!="number")throw new TypeError("missing ext.id");if(d.encrypt&&typeof d.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");d.encrypt||(d.encrypt=!1),d.parameters&&typeof d.parameters=="object"||(d.parameters={});for(const T of Object.keys(d.parameters)){let O=d.parameters[T];if(O===void 0&&(d.parameters[T]="",O=""),typeof O!="string"&&typeof O!="number")throw new TypeError("invalid header extension parameter")}}function P(d){if(typeof d!="object")throw new TypeError("encoding is not an object");if(d.ssrc&&typeof d.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(d.rid&&typeof d.rid!="string")throw new TypeError("invalid encoding.rid");if(d.rtx&&typeof d.rtx!="object")throw new TypeError("invalid encoding.rtx");if(d.rtx&&typeof d.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(d.dtx&&typeof d.dtx=="boolean"||(d.dtx=!1),d.scalabilityMode&&typeof d.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function H(d){return!!d&&/.+\/rtx$/i.test(d.mimeType)}function D(d,T,{strict:O=!1,modify:M=!1}={}){const I=d.mimeType.toLowerCase();if(I!==T.mimeType.toLowerCase()||d.clockRate!==T.clockRate||d.channels!==T.channels)return!1;switch(I){case"video/h264":if(O){if((d.parameters["packetization-mode"]??0)!==(T.parameters["packetization-mode"]??0)||!R.isSameProfile(d.parameters,T.parameters))return!1;let U;try{U=R.generateProfileLevelIdStringForAnswer(d.parameters,T.parameters)}catch{return!1}M&&(U?(d.parameters["profile-level-id"]=U,T.parameters["profile-level-id"]=U):(delete d.parameters["profile-level-id"],delete T.parameters["profile-level-id"]))}break;case"video/vp9":if(O&&(d.parameters["profile-id"]??0)!==(T.parameters["profile-id"]??0))return!1}return!0}function S(d,T){return(!d.kind||!T.kind||d.kind===T.kind)&&d.uri===T.uri}function x(d,T){const O=[];for(const M of d.rtcpFeedback??[]){const I=(T.rtcpFeedback??[]).find(U=>U.type===M.type&&(U.parameter===M.parameter||!U.parameter&&!M.parameter));I&&O.push(I)}return O}},8056:function(N,y,u){var R;N.exports=(R=u(9021),function(){var v=R,b=v.lib,E=b.WordArray,_=b.Hasher,m=v.algo,k=E.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),w=E.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),F=E.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=E.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),A=E.create([0,1518500249,1859775393,2400959708,2840853838]),P=E.create([1352829926,1548603684,1836072691,2053994217,0]),H=m.RIPEMD160=_.extend({_doReset:function(){this._hash=E.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,I){for(var U=0;U<16;U++){var z=I+U,$=M[z];M[z]=16711935&($<<8|$>>>24)|4278255360&($<<24|$>>>8)}var q,ae,Q,ve,we,Re,me,Ce,Be,be,Ye,Qe=this._hash.words,Ge=A.words,He=P.words,Te=k.words,dt=w.words,_t=F.words,on=g.words;for(Re=q=Qe[0],me=ae=Qe[1],Ce=Q=Qe[2],Be=ve=Qe[3],be=we=Qe[4],U=0;U<80;U+=1)Ye=q+M[I+Te[U]]|0,Ye+=U<16?D(ae,Q,ve)+Ge[0]:U<32?S(ae,Q,ve)+Ge[1]:U<48?x(ae,Q,ve)+Ge[2]:U<64?d(ae,Q,ve)+Ge[3]:T(ae,Q,ve)+Ge[4],Ye=(Ye=O(Ye|=0,_t[U]))+we|0,q=we,we=ve,ve=O(Q,10),Q=ae,ae=Ye,Ye=Re+M[I+dt[U]]|0,Ye+=U<16?T(me,Ce,Be)+He[0]:U<32?d(me,Ce,Be)+He[1]:U<48?x(me,Ce,Be)+He[2]:U<64?S(me,Ce,Be)+He[3]:D(me,Ce,Be)+He[4],Ye=(Ye=O(Ye|=0,on[U]))+be|0,Re=be,be=Be,Be=O(Ce,10),Ce=me,me=Ye;Ye=Qe[1]+Q+Be|0,Qe[1]=Qe[2]+ve+be|0,Qe[2]=Qe[3]+we+Re|0,Qe[3]=Qe[4]+q+me|0,Qe[4]=Qe[0]+ae+Ce|0,Qe[0]=Ye},_doFinalize:function(){var M=this._data,I=M.words,U=8*this._nDataBytes,z=8*M.sigBytes;I[z>>>5]|=128<<24-z%32,I[14+(z+64>>>9<<4)]=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),M.sigBytes=4*(I.length+1),this._process();for(var $=this._hash,q=$.words,ae=0;ae<5;ae++){var Q=q[ae];q[ae]=16711935&(Q<<8|Q>>>24)|4278255360&(Q<<24|Q>>>8)}return $},clone:function(){var M=_.clone.call(this);return M._hash=this._hash.clone(),M}});function D(M,I,U){return M^I^U}function S(M,I,U){return M&I|~M&U}function x(M,I,U){return(M|~I)^U}function d(M,I,U){return M&U|I&~U}function T(M,I,U){return M^(I|~U)}function O(M,I){return M<<I|M>>>32-I}v.RIPEMD160=_._createHelper(H),v.HmacRIPEMD160=_._createHmacHelper(H)}(),R.RIPEMD160)},8057:function(N,y,u){var R=this&&this.__createBinding||(Object.create?function(b,E,_,m){m===void 0&&(m=_);var k=Object.getOwnPropertyDescriptor(E,_);k&&!("get"in k?!E.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return E[_]}}),Object.defineProperty(b,m,k)}:function(b,E,_,m){m===void 0&&(m=_),b[m]=E[_]}),v=this&&this.__exportStar||function(b,E){for(var _ in b)_==="default"||Object.prototype.hasOwnProperty.call(E,_)||R(E,b,_)};Object.defineProperty(y,"__esModule",{value:!0}),v(u(6004),y),v(u(5601),y),v(u(9792),y),v(u(3518),y),v(u(7504),y),v(u(9166),y),v(u(5370),y),v(u(4160),y),v(u(521),y),v(u(4893),y)},8124:function(N,y,u){var R;N.exports=(R=u(9021),u(7165),R.pad.NoPadding={pad:function(){},unpad:function(){}},R.pad.NoPadding)},8155:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Chrome67=void 0;const R=u(7363),v=u(2994),b=u(1765),E=u(8046),_=u(5544),m=u(4496),k=u(521),w=u(1305),F=new v.Logger("Chrome67"),g={OS:1024,MIS:1024};class A extends k.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdRtpSender=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new A}constructor(){super()}get name(){return"Chrome67"}close(){if(F.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){F.debug("getNativeRtpCapabilities()");const H=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const D=await H.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{H.close()}catch{}const S=R.parse(D.sdp);return _.extractRtpCapabilities({sdpObject:S})}catch(D){try{H.close()}catch{}throw D}}async getNativeSctpCapabilities(){return F.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:H,iceParameters:D,iceCandidates:S,dtlsParameters:x,sctpParameters:d,iceServers:T,iceTransportPolicy:O,additionalSettings:M,proprietaryConstraints:I,extendedRtpCapabilities:U}){F.debug("run()"),this._direction=H,this._remoteSdp=new w.RemoteSdp({iceParameters:D,iceCandidates:S,dtlsParameters:x,sctpParameters:d,planB:!0}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",U),video:E.getSendingRtpParameters("video",U)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",U),video:E.getSendingRemoteRtpParameters("video",U)},x.role&&x.role!=="auto"&&(this._forcedLocalDtlsRole=x.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:T??[],iceTransportPolicy:O??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...M},I),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",z=>{this.emit("@icecandidateerror",z)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(F.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(H){F.debug("updateIceServers()");const D=this._pc.getConfiguration();D.iceServers=H,this._pc.setConfiguration(D)}async restartIce(H){if(F.debug("restartIce()"),this._remoteSdp.updateIceParameters(H),this._transportReady)if(this._direction==="send"){const D=await this._pc.createOffer({iceRestart:!0});F.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const S={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}else{const D={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",D),await this._pc.setRemoteDescription(D);const S=await this._pc.createAnswer();F.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}}async getTransportStats(){return this._pc.getStats()}async send({track:H,encodings:D,codecOptions:S,codec:x}){this.assertSendDirection(),F.debug("send() [kind:%s, track.id:%s]",H.kind,H.id),x&&F.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(H),this._pc.addTrack(H,this._sendStream);let d,T=await this._pc.createOffer(),O=R.parse(T.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const M=b.clone(this._sendingRtpParametersByKind[H.kind]);M.codecs=E.reduceCodecs(M.codecs);const I=b.clone(this._sendingRemoteRtpParametersByKind[H.kind]);if(I.codecs=E.reduceCodecs(I.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),H.kind==="video"&&D&&D.length>1&&(F.debug("send() | enabling simulcast"),O=R.parse(T.sdp),d=O.media.find(q=>q.type==="video"),m.addLegacySimulcast({offerMediaObject:d,track:H,numStreams:D.length}),T={type:"offer",sdp:R.write(O)}),F.debug("send() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T),O=R.parse(this._pc.localDescription.sdp),d=O.media.find(q=>q.type===H.kind),M.rtcp.cname=_.getCname({offerMediaObject:d}),M.encodings=m.getRtpEncodings({offerMediaObject:d,track:H}),D)for(let q=0;q<M.encodings.length;++q)D[q]&&Object.assign(M.encodings[q],D[q]);if(M.encodings.length>1&&M.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const q of M.encodings)q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:d,offerRtpParameters:M,answerRtpParameters:I,codecOptions:S});const U={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("send() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setRemoteDescription(U);const z=String(this._nextSendLocalId);this._nextSendLocalId++;const $=this._pc.getSenders().find(q=>q.track===H);return this._mapSendLocalIdRtpSender.set(z,$),{localId:z,rtpParameters:M,rtpSender:$}}async stopSending(H){this.assertSendDirection(),F.debug("stopSending() [localId:%s]",H);const D=this._mapSendLocalIdRtpSender.get(H);if(!D)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(D),D.track&&this._sendStream.removeTrack(D.track),this._mapSendLocalIdRtpSender.delete(H);const S=await this._pc.createOffer();F.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",S);try{await this._pc.setLocalDescription(S)}catch(d){if(this._sendStream.getTracks().length===0)return void F.warn("stopSending() | ignoring expected error due no sending tracks: %s",d.toString());throw d}if(this._pc.signalingState==="stable")return;const x={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async pauseSending(H){}async resumeSending(H){}async replaceTrack(H,D){this.assertSendDirection(),D?F.debug("replaceTrack() [localId:%s, track.id:%s]",H,D.id):F.debug("replaceTrack() [localId:%s, no track]",H);const S=this._mapSendLocalIdRtpSender.get(H);if(!S)throw new Error("associated RTCRtpSender not found");const x=S.track;await S.replaceTrack(D),x&&this._sendStream.removeTrack(x),D&&this._sendStream.addTrack(D)}async setMaxSpatialLayer(H,D){this.assertSendDirection(),F.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",H,D);const S=this._mapSendLocalIdRtpSender.get(H);if(!S)throw new Error("associated RTCRtpSender not found");const x=S.getParameters();x.encodings.forEach((d,T)=>{d.active=T<=D}),await S.setParameters(x)}async setRtpEncodingParameters(H,D){this.assertSendDirection(),F.debug("setRtpEncodingParameters() [localId:%s, params:%o]",H,D);const S=this._mapSendLocalIdRtpSender.get(H);if(!S)throw new Error("associated RTCRtpSender not found");const x=S.getParameters();x.encodings.forEach((d,T)=>{x.encodings[T]={...d,...D}}),await S.setParameters(x)}async getSenderStats(H){this.assertSendDirection();const D=this._mapSendLocalIdRtpSender.get(H);if(!D)throw new Error("associated RTCRtpSender not found");return D.getStats()}async sendDataChannel({ordered:H,maxPacketLifeTime:D,maxRetransmits:S,label:x,protocol:d}){this.assertSendDirection();const T={negotiated:!0,id:this._nextSendSctpStreamId,ordered:H,maxPacketLifeTime:D,maxRetransmitTime:D,maxRetransmits:S,protocol:d};F.debug("sendDataChannel() [options:%o]",T);const O=this._pc.createDataChannel(x,T);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),I=R.parse(M.sdp),U=I.media.find($=>$.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),F.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const z={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:T.id,ordered:T.ordered,maxPacketLifeTime:T.maxPacketLifeTime,maxRetransmits:T.maxRetransmits}}}async receive(H){this.assertRecvDirection();const D=[];for(const T of H){const{trackId:O,kind:M,rtpParameters:I,streamId:U}=T;F.debug("receive() [trackId:%s, kind:%s]",O,M);const z=M;this._remoteSdp.receive({mid:z,kind:M,offerRtpParameters:I,streamId:U??I.rtcp.cname,trackId:O})}const S={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);let x=await this._pc.createAnswer();const d=R.parse(x.sdp);for(const T of H){const{kind:O,rtpParameters:M}=T,I=O,U=d.media.find(z=>String(z.mid)===I);_.applyCodecParameters({offerRtpParameters:M,answerMediaObject:U})}x={type:"answer",sdp:R.write(d)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),F.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const T of H){const{kind:O,trackId:M,rtpParameters:I}=T,U=M,z=O,$=this._pc.getReceivers().find(q=>q.track&&q.track.id===U);if(!$)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(U,{mid:z,rtpParameters:I,rtpReceiver:$}),D.push({localId:U,track:$.track,rtpReceiver:$})}return D}async stopReceiving(H){this.assertRecvDirection();for(const x of H){F.debug("stopReceiving() [localId:%s]",x);const{mid:d,rtpParameters:T}=this._mapRecvLocalIdInfo.get(x)??{};this._mapRecvLocalIdInfo.delete(x),this._remoteSdp.planBStopReceiving({mid:d,offerRtpParameters:T})}const D={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",D),await this._pc.setRemoteDescription(D);const S=await this._pc.createAnswer();F.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}async pauseReceiving(H){}async resumeReceiving(H){}async getReceiverStats(H){this.assertRecvDirection();const{rtpReceiver:D}=this._mapRecvLocalIdInfo.get(H)??{};if(!D)throw new Error("associated RTCRtpReceiver not found");return D.getStats()}async receiveDataChannel({sctpStreamParameters:H,label:D,protocol:S}){this.assertRecvDirection();const{streamId:x,ordered:d,maxPacketLifeTime:T,maxRetransmits:O}=H,M={negotiated:!0,id:x,ordered:d,maxPacketLifeTime:T,maxRetransmitTime:T,maxRetransmits:O,protocol:S};F.debug("receiveDataChannel() [options:%o]",M);const I=this._pc.createDataChannel(D,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const U={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",U),await this._pc.setRemoteDescription(U);const z=await this._pc.createAnswer();if(!this._transportReady){const $=R.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$})}F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:I}}async setupTransport({localDtlsRole:H,localSdpObject:D}){D||(D=R.parse(this._pc.localDescription.sdp));const S=_.extractDtlsParameters({sdpObject:D});S.role=H,this._remoteSdp.updateDtlsRole(H==="client"?"server":"client"),await new Promise((x,d)=>{this.safeEmit("@connect",{dtlsParameters:S},x,d)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.Chrome67=A},8274:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Logger=void 0;const R=u(7833),v="awaitqueue";y.Logger=class{_debug;_warn;_error;constructor(b){b?(this._debug=R(`${v}:${b}`),this._warn=R(`${v}:WARN:${b}`),this._error=R(`${v}:ERROR:${b}`)):(this._debug=R(v),this._warn=R(`${v}:WARN`),this._error=R(`${v}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},8278:(N,y,u)=>{u.d(y,{Ag:()=>E,Wm:()=>_,sn:()=>m,tr:()=>w});var R=u(467),v=u(4756),b=u.n(v);u(1806);function E(){return window.RTCRtpSender!==void 0&&window.RTCRtpSender.prototype.createEncodedStreams!==void 0||_()}function _(){return window.RTCRtpScriptTransform!==void 0}function m(g){return k.apply(this,arguments)}function k(){return(k=(0,R.A)(b().mark(function g(A){var P,H;return b().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return P=new TextEncoder,D.next=1,crypto.subtle.importKey("raw",P.encode(A),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 1:return H=D.sent,D.abrupt("return",H);case 2:case"end":return D.stop()}},g)}))).apply(this,arguments)}function w(g){return F.apply(this,arguments)}function F(){return(F=(0,R.A)(b().mark(function g(A){var P;return b().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=1,crypto.subtle.importKey("raw",A,"HKDF",!1,["deriveBits","deriveKey"]);case 1:return P=H.sent,H.abrupt("return",P);case 2:case"end":return H.stop()}},g)}))).apply(this,arguments)}},8286:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0});const R=u(3779),v=u(2291),b=u(6011);y.default=function(E,_,m){if(R.default.randomUUID&&!_&&!E)return R.default.randomUUID();const k=(E=E||{}).random??E.rng?.()??(0,v.default)();if(k.length<16)throw new Error("Random bytes length must be >= 16");if(k[6]=15&k[6]|64,k[8]=63&k[8]|128,_){if((m=m||0)<0||m+16>_.length)throw new RangeError(`UUID byte range ${m}:${m+15} is out of buffer bounds`);for(let w=0;w<16;++w)_[m+w]=k[w];return _}return(0,b.unsafeStringify)(k)}},8454:function(N,y,u){var R,v;N.exports=(v=u(9021),u(7165),v.mode.ECB=((R=v.lib.BlockCipherMode.extend()).Encryptor=R.extend({processBlock:function(b,E){this._cipher.encryptBlock(b,E)}}),R.Decryptor=R.extend({processBlock:function(b,E){this._cipher.decryptBlock(b,E)}}),R),v.mode.ECB)},8624:(N,y,u)=>{u.r(y),u.d(y,{DOMException:()=>O,Headers:()=>w,Request:()=>S,Response:()=>d,fetch:()=>M});var R=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||u.g!==void 0&&u.g||{},v={searchParams:"URLSearchParams"in R,iterable:"Symbol"in R&&"iterator"in Symbol,blob:"FileReader"in R&&"Blob"in R&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in R,arrayBuffer:"ArrayBuffer"in R};if(v.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=ArrayBuffer.isView||function(I){return I&&b.indexOf(Object.prototype.toString.call(I))>-1};function _(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function m(I){return typeof I!="string"&&(I=String(I)),I}function k(I){var U={next:function(){var z=I.shift();return{done:z===void 0,value:z}}};return v.iterable&&(U[Symbol.iterator]=function(){return U}),U}function w(I){this.map={},I instanceof w?I.forEach(function(U,z){this.append(z,U)},this):Array.isArray(I)?I.forEach(function(U){if(U.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+U.length);this.append(U[0],U[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(U){this.append(U,I[U])},this)}function F(I){if(!I._noBody)return I.bodyUsed?Promise.reject(new TypeError("Already read")):void(I.bodyUsed=!0)}function g(I){return new Promise(function(U,z){I.onload=function(){U(I.result)},I.onerror=function(){z(I.error)}})}function A(I){var U=new FileReader,z=g(U);return U.readAsArrayBuffer(I),z}function P(I){if(I.slice)return I.slice(0);var U=new Uint8Array(I.byteLength);return U.set(new Uint8Array(I)),U.buffer}function H(){return this.bodyUsed=!1,this._initBody=function(I){var U;this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:v.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:v.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:v.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():v.arrayBuffer&&v.blob&&(U=I)&&DataView.prototype.isPrototypeOf(U)?(this._bodyArrayBuffer=P(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):v.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||E(I))?this._bodyArrayBuffer=P(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var I=F(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=F(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(v.blob)return this.blob().then(A);throw new Error("could not read as ArrayBuffer")},this.text=function(){var I,U,z,$,q,ae=F(this);if(ae)return ae;if(this._bodyBlob)return I=this._bodyBlob,U=new FileReader,z=g(U),$=/charset=([A-Za-z0-9_-]+)/.exec(I.type),q=$?$[1]:"utf-8",U.readAsText(I,q),z;if(this._bodyArrayBuffer)return Promise.resolve(function(Q){for(var ve=new Uint8Array(Q),we=new Array(ve.length),Re=0;Re<ve.length;Re++)we[Re]=String.fromCharCode(ve[Re]);return we.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}w.prototype.append=function(I,U){I=_(I),U=m(U);var z=this.map[I];this.map[I]=z?z+", "+U:U},w.prototype.delete=function(I){delete this.map[_(I)]},w.prototype.get=function(I){return I=_(I),this.has(I)?this.map[I]:null},w.prototype.has=function(I){return this.map.hasOwnProperty(_(I))},w.prototype.set=function(I,U){this.map[_(I)]=m(U)},w.prototype.forEach=function(I,U){for(var z in this.map)this.map.hasOwnProperty(z)&&I.call(U,this.map[z],z,this)},w.prototype.keys=function(){var I=[];return this.forEach(function(U,z){I.push(z)}),k(I)},w.prototype.values=function(){var I=[];return this.forEach(function(U){I.push(U)}),k(I)},w.prototype.entries=function(){var I=[];return this.forEach(function(U,z){I.push([z,U])}),k(I)},v.iterable&&(w.prototype[Symbol.iterator]=w.prototype.entries);var D=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function S(I,U){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var z,$,q=(U=U||{}).body;if(I instanceof S){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,U.headers||(this.headers=new w(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,q||I._bodyInit==null||(q=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=U.credentials||this.credentials||"same-origin",!U.headers&&this.headers||(this.headers=new w(U.headers)),this.method=(z=U.method||this.method||"GET",$=z.toUpperCase(),D.indexOf($)>-1?$:z),this.mode=U.mode||this.mode||null,this.signal=U.signal||this.signal||function(){if("AbortController"in R)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&q)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(q),!(this.method!=="GET"&&this.method!=="HEAD"||U.cache!=="no-store"&&U.cache!=="no-cache")){var ae=/([?&])_=[^&]*/;ae.test(this.url)?this.url=this.url.replace(ae,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function x(I){var U=new FormData;return I.trim().split("&").forEach(function(z){if(z){var $=z.split("="),q=$.shift().replace(/\+/g," "),ae=$.join("=").replace(/\+/g," ");U.append(decodeURIComponent(q),decodeURIComponent(ae))}}),U}function d(I,U){if(!(this instanceof d))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(U||(U={}),this.type="default",this.status=U.status===void 0?200:U.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=U.statusText===void 0?"":""+U.statusText,this.headers=new w(U.headers),this.url=U.url||"",this._initBody(I)}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})},H.call(S.prototype),H.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},d.error=function(){var I=new d(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var T=[301,302,303,307,308];d.redirect=function(I,U){if(T.indexOf(U)===-1)throw new RangeError("Invalid status code");return new d(null,{status:U,headers:{location:I}})};var O=R.DOMException;try{new O}catch{(O=function(U,z){this.message=U,this.name=z;var $=Error(U);this.stack=$.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function M(I,U){return new Promise(function(z,$){var q=new S(I,U);if(q.signal&&q.signal.aborted)return $(new O("Aborted","AbortError"));var ae=new XMLHttpRequest;function Q(){ae.abort()}if(ae.onload=function(){var we,Re,me={statusText:ae.statusText,headers:(we=ae.getAllResponseHeaders()||"",Re=new w,we.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(Be){return Be.indexOf(`
`)===0?Be.substr(1,Be.length):Be}).forEach(function(Be){var be=Be.split(":"),Ye=be.shift().trim();if(Ye){var Qe=be.join(":").trim();try{Re.append(Ye,Qe)}catch(Ge){console.warn("Response "+Ge.message)}}}),Re)};q.url.indexOf("file://")===0&&(ae.status<200||ae.status>599)?me.status=200:me.status=ae.status,me.url="responseURL"in ae?ae.responseURL:me.headers.get("X-Request-URL");var Ce="response"in ae?ae.response:ae.responseText;setTimeout(function(){z(new d(Ce,me))},0)},ae.onerror=function(){setTimeout(function(){$(new TypeError("Network request failed"))},0)},ae.ontimeout=function(){setTimeout(function(){$(new TypeError("Network request timed out"))},0)},ae.onabort=function(){setTimeout(function(){$(new O("Aborted","AbortError"))},0)},ae.open(q.method,function(we){try{return we===""&&R.location.href?R.location.href:we}catch{return we}}(q.url),!0),q.credentials==="include"?ae.withCredentials=!0:q.credentials==="omit"&&(ae.withCredentials=!1),"responseType"in ae&&(v.blob?ae.responseType="blob":v.arrayBuffer&&(ae.responseType="arraybuffer")),U&&typeof U.headers=="object"&&!(U.headers instanceof w||R.Headers&&U.headers instanceof R.Headers)){var ve=[];Object.getOwnPropertyNames(U.headers).forEach(function(we){ve.push(_(we)),ae.setRequestHeader(we,m(U.headers[we]))}),q.headers.forEach(function(we,Re){ve.indexOf(Re)===-1&&ae.setRequestHeader(Re,we)})}else q.headers.forEach(function(we,Re){ae.setRequestHeader(Re,we)});q.signal&&(q.signal.addEventListener("abort",Q),ae.onreadystatechange=function(){ae.readyState===4&&q.signal.removeEventListener("abort",Q)}),ae.send(q._bodyInit===void 0?null:q._bodyInit)})}M.polyfill=!0,R.fetch||(R.fetch=M,R.Headers=w,R.Request=S,R.Response=d)},8633:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Edge11=void 0;const R=u(2994),v=u(4893),b=u(1765),E=u(8046),_=u(8751),m=u(521),k=new R.Logger("Edge11");class w extends m.HandlerInterface{_sendingRtpParametersByKind;_remoteIceParameters;_remoteIceCandidates;_remoteDtlsParameters;_iceGatherer;_iceTransport;_dtlsTransport;_rtpSenders=new Map;_rtpReceivers=new Map;_nextSendLocalId=0;_cname;_transportReady=!1;static createFactory(){return()=>new w}constructor(){super()}get name(){return"Edge11"}close(){k.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const g of this._rtpSenders.values())try{g.stop()}catch{}for(const g of this._rtpReceivers.values())try{g.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return k.debug("getNativeRtpCapabilities()"),_.getCapabilities()}async getNativeSctpCapabilities(){return k.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:g,iceParameters:A,iceCandidates:P,dtlsParameters:H,sctpParameters:D,iceServers:S,iceTransportPolicy:x,additionalSettings:d,proprietaryConstraints:T,extendedRtpCapabilities:O}){k.debug("run()"),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",O),video:E.getSendingRtpParameters("video",O)},this._remoteIceParameters=A,this._remoteIceCandidates=P,this._remoteDtlsParameters=H,this._cname=`CNAME-${b.generateRandomNumber()}`,this.setIceGatherer({iceServers:S,iceTransportPolicy:x}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(g){throw new v.UnsupportedError("not supported")}async restartIce(g){if(k.debug("restartIce()"),this._remoteIceParameters=g,this._transportReady){k.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,g,"controlling");for(const A of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(A);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:g,encodings:A,codecOptions:P,codec:H}){k.debug("send() [kind:%s, track.id:%s]",g.kind,g.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),k.debug("send() | calling new RTCRtpSender()");const D=new RTCRtpSender(g,this._dtlsTransport),S=b.clone(this._sendingRtpParametersByKind[g.kind]);S.codecs=E.reduceCodecs(S.codecs,H);const x=S.codecs.some(O=>/.+\/rtx$/i.test(O.mimeType));A||(A=[{}]);for(const O of A)O.ssrc=b.generateRandomNumber(),x&&(O.rtx={ssrc:b.generateRandomNumber()});S.encodings=A,S.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const d=_.mangleRtpParameters(S);k.debug("send() | calling rtpSender.send() [params:%o]",d),await D.send(d);const T=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(T,D),{localId:T,rtpParameters:S,rtpSender:D}}async stopSending(g){k.debug("stopSending() [localId:%s]",g);const A=this._rtpSenders.get(g);if(!A)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(g);try{k.debug("stopSending() | calling rtpSender.stop()"),A.stop()}catch(P){throw k.warn("stopSending() | rtpSender.stop() failed:%o",P),P}}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,A){A?k.debug("replaceTrack() [localId:%s, track.id:%s]",g,A.id):k.debug("replaceTrack() [localId:%s, no track]",g);const P=this._rtpSenders.get(g);if(!P)throw new Error("RTCRtpSender not found");P.setTrack(A)}async setMaxSpatialLayer(g,A){k.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",g,A);const P=this._rtpSenders.get(g);if(!P)throw new Error("RTCRtpSender not found");const H=P.getParameters();H.encodings.forEach((D,S)=>{D.active=S<=A}),await P.setParameters(H)}async setRtpEncodingParameters(g,A){k.debug("setRtpEncodingParameters() [localId:%s, params:%o]",g,A);const P=this._rtpSenders.get(g);if(!P)throw new Error("RTCRtpSender not found");const H=P.getParameters();H.encodings.forEach((D,S)=>{H.encodings[S]={...D,...A}}),await P.setParameters(H)}async getSenderStats(g){const A=this._rtpSenders.get(g);if(!A)throw new Error("RTCRtpSender not found");return A.getStats()}async sendDataChannel(g){throw new v.UnsupportedError("not implemented")}async receive(g){const A=[];for(const P of g){const{trackId:H,kind:D}=P;k.debug("receive() [trackId:%s, kind:%s]",H,D)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const P of g){const{trackId:H,kind:D,rtpParameters:S}=P;k.debug("receive() | calling new RTCRtpReceiver()");const x=new RTCRtpReceiver(this._dtlsTransport,D);x.addEventListener("error",O=>{k.error('rtpReceiver "error" event [event:%o]',O)});const d=_.mangleRtpParameters(S);k.debug("receive() | calling rtpReceiver.receive() [params:%o]",d),await x.receive(d);const T=H;this._rtpReceivers.set(T,x),A.push({localId:T,track:x.track,rtpReceiver:x})}return A}async stopReceiving(g){for(const A of g){k.debug("stopReceiving() [localId:%s]",A);const P=this._rtpReceivers.get(A);if(!P)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(A);try{k.debug("stopReceiving() | calling rtpReceiver.stop()"),P.stop()}catch(H){k.warn("stopReceiving() | rtpReceiver.stop() failed:%o",H)}}}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){const A=this._rtpReceivers.get(g);if(!A)throw new Error("RTCRtpReceiver not found");return A.getStats()}async receiveDataChannel(g){throw new v.UnsupportedError("not implemented")}setIceGatherer({iceServers:g,iceTransportPolicy:A}){const P=new RTCIceGatherer({iceServers:g??[],gatherPolicy:A??"all"});P.addEventListener("error",H=>{k.error('iceGatherer "error" event [event:%o]',H)});try{P.gather()}catch(H){k.debug("setIceGatherer() | iceGatherer.gather() failed: %s",H.toString())}this._iceGatherer=P}setIceTransport(){const g=new RTCIceTransport(this._iceGatherer);g.addEventListener("statechange",()=>{switch(g.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),g.addEventListener("icestatechange",()=>{switch(g.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),g.addEventListener("candidatepairchange",A=>{k.debug('iceTransport "candidatepairchange" event [pair:%o]',A.pair)}),this._iceTransport=g}setDtlsTransport(){const g=new RTCDtlsTransport(this._iceTransport);g.addEventListener("statechange",()=>{k.debug('dtlsTransport "statechange" event [state:%s]',g.state)}),g.addEventListener("dtlsstatechange",()=>{k.debug('dtlsTransport "dtlsstatechange" event [state:%s]',g.state),g.state==="closed"&&this.emit("@connectionstatechange","closed")}),g.addEventListener("error",A=>{k.error('dtlsTransport "error" event [event:%o]',A)}),this._dtlsTransport=g}async setupTransport({localDtlsRole:g}){k.debug("setupTransport()");const A=this._dtlsTransport.getLocalParameters();A.role=g,await new Promise((P,H)=>{this.safeEmit("@connect",{dtlsParameters:A},P,H)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const P of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(P);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(P=>P.algorithm==="sha-256"||P.algorithm==="sha-384"||P.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}y.Edge11=w},8751:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.getCapabilities=function(){const v=RTCRtpReceiver.getCapabilities(),b=R.clone(v);for(const E of b.codecs??[]){if(E.channels=E.numChannels,delete E.numChannels,E.mimeType=E.mimeType??`${E.kind}/${E.name}`,E.parameters){const _=E.parameters;_.apt&&(_.apt=Number(_.apt)),_["packetization-mode"]&&(_["packetization-mode"]=Number(_["packetization-mode"]))}for(const _ of E.rtcpFeedback??[])_.parameter||(_.parameter="")}return b},y.mangleRtpParameters=function(v){const b=R.clone(v);b.mid&&(b.muxId=b.mid,delete b.mid);for(const E of b.codecs)E.channels&&(E.numChannels=E.channels,delete E.channels),E.mimeType&&!E.name&&(E.name=E.mimeType.split("/")[1]),delete E.mimeType;return b};const R=u(1765)},8876:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.AwaitQueueRemovedTaskError=y.AwaitQueueStoppedError=y.AwaitQueue=void 0;var R=u(9275);Object.defineProperty(y,"AwaitQueue",{enumerable:!0,get:function(){return R.AwaitQueue}});var v=u(4253);Object.defineProperty(y,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return v.AwaitQueueStoppedError}}),Object.defineProperty(y,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return v.AwaitQueueRemovedTaskError}})},9021:function(N,y,u){var R;N.exports=(R=R||function(v,b){var E;if(typeof window<"u"&&window.crypto&&(E=window.crypto),typeof self<"u"&&self.crypto&&(E=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(E=globalThis.crypto),!E&&typeof window<"u"&&window.msCrypto&&(E=window.msCrypto),!E&&u.g!==void 0&&u.g.crypto&&(E=u.g.crypto),!E)try{E=u(477)}catch{}var _=function(){if(E){if(typeof E.getRandomValues=="function")try{return E.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof E.randomBytes=="function")try{return E.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},m=Object.create||function(){function d(){}return function(T){var O;return d.prototype=T,O=new d,d.prototype=null,O}}(),k={},w=k.lib={},F=w.Base={extend:function(d){var T=m(this);return d&&T.mixIn(d),T.hasOwnProperty("init")&&this.init!==T.init||(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var T in d)d.hasOwnProperty(T)&&(this[T]=d[T]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}},g=w.WordArray=F.extend({init:function(d,T){d=this.words=d||[],this.sigBytes=T!=b?T:4*d.length},toString:function(d){return(d||P).stringify(this)},concat:function(d){var T=this.words,O=d.words,M=this.sigBytes,I=d.sigBytes;if(this.clamp(),M%4)for(var U=0;U<I;U++){var z=O[U>>>2]>>>24-U%4*8&255;T[M+U>>>2]|=z<<24-(M+U)%4*8}else for(var $=0;$<I;$+=4)T[M+$>>>2]=O[$>>>2];return this.sigBytes+=I,this},clamp:function(){var d=this.words,T=this.sigBytes;d[T>>>2]&=4294967295<<32-T%4*8,d.length=v.ceil(T/4)},clone:function(){var d=F.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var T=[],O=0;O<d;O+=4)T.push(_());return new g.init(T,d)}}),A=k.enc={},P=A.Hex={stringify:function(d){for(var T=d.words,O=d.sigBytes,M=[],I=0;I<O;I++){var U=T[I>>>2]>>>24-I%4*8&255;M.push((U>>>4).toString(16)),M.push((15&U).toString(16))}return M.join("")},parse:function(d){for(var T=d.length,O=[],M=0;M<T;M+=2)O[M>>>3]|=parseInt(d.substr(M,2),16)<<24-M%8*4;return new g.init(O,T/2)}},H=A.Latin1={stringify:function(d){for(var T=d.words,O=d.sigBytes,M=[],I=0;I<O;I++){var U=T[I>>>2]>>>24-I%4*8&255;M.push(String.fromCharCode(U))}return M.join("")},parse:function(d){for(var T=d.length,O=[],M=0;M<T;M++)O[M>>>2]|=(255&d.charCodeAt(M))<<24-M%4*8;return new g.init(O,T)}},D=A.Utf8={stringify:function(d){try{return decodeURIComponent(escape(H.stringify(d)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(d){return H.parse(unescape(encodeURIComponent(d)))}},S=w.BufferedBlockAlgorithm=F.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=D.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var T,O=this._data,M=O.words,I=O.sigBytes,U=this.blockSize,z=I/(4*U),$=(z=d?v.ceil(z):v.max((0|z)-this._minBufferSize,0))*U,q=v.min(4*$,I);if($){for(var ae=0;ae<$;ae+=U)this._doProcessBlock(M,ae);T=M.splice(0,$),O.sigBytes-=q}return new g.init(T,q)},clone:function(){var d=F.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0}),x=(w.Hasher=S.extend({cfg:F.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){S.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){return d&&this._append(d),this._doFinalize()},blockSize:16,_createHelper:function(d){return function(T,O){return new d.init(O).finalize(T)}},_createHmacHelper:function(d){return function(T,O){return new x.HMAC.init(d,O).finalize(T)}}}),k.algo={});return k}(Math),R)},9027:(N,y,u)=>{u.d(y,{$:()=>R});var R={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"osneSixNine"},h360p_w640p_150kbps:{width:640,height:360,bitRate:15e4,frameRate:15,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{resolution:{width:640,height:360},frameRate:30,bitrates:{high:4e5,medium:2e5,low:1e5}},h480p_15fps:{resolution:{width:854,height:480},frameRate:15,bitrates:{high:3e5,medium:15e4,low:75e3}},h480p_30fps:{resolution:{width:854,height:480},frameRate:30,bitrates:{high:5e5,medium:25e4,low:125e3}},h720p_5fps:{resolution:{width:1280,height:720},frameRate:5,bitrates:{high:4e5,medium:2e5,low:1e5}},h720p_15fps:{resolution:{width:1280,height:720},frameRate:15,bitrates:{high:1e6,medium:5e5,low:25e4}},h720p_30fps:{resolution:{width:1280,height:720},frameRate:30,bitrates:{high:15e5,medium:75e4,low:375e3}},h1080p_15fps:{resolution:{width:1920,height:1080},frameRate:15,bitrates:{high:15e5,medium:75e4,low:3e5}},h1080p_30fps:{resolution:{width:1920,height:1080},frameRate:30,bitrates:{high:2e6,medium:1e6,low:5e5}}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},9166:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DataConsumer=void 0;const R=u(2994),v=u(3953),b=new R.Logger("DataConsumer");class E extends v.EnhancedEventEmitter{_id;_dataProducerId;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new v.EnhancedEventEmitter;constructor({id:m,dataProducerId:k,dataChannel:w,sctpStreamParameters:F,appData:g}){super(),b.debug("constructor()"),this._id=m,this._dataProducerId=k,this._dataChannel=w,this._sctpStreamParameters=F,this._appData=g??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(m){this._dataChannel.binaryType=m}get appData(){return this._appData}set appData(m){this._appData=m}get observer(){return this._observer}close(){this._closed||(b.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(b.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(b.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",m=>{if(this._closed)return;let{error:k}=m;k||(k=new Error("unknown DataChannel error")),k.errorDetail==="sctp-failure"?b.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",k.sctpCauseCode,k.message):b.error('DataChannel "error" event: %o',k),this.safeEmit("error",k)}),this._dataChannel.addEventListener("close",()=>{this._closed||(b.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",m=>{this._closed||this.safeEmit("message",m.data)})}}y.DataConsumer=E},9275:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.AwaitQueue=void 0;const R=u(8274),v=u(4253),b=new R.Logger("AwaitQueue");y.AwaitQueue=class{pendingTasks=new Map;nextTaskId=0;stopping=!1;constructor(){b.debug("constructor()")}get size(){return this.pendingTasks.size}async push(E,_){if(_=_??E.name,b.debug(`push() [name:${_}]`),typeof E!="function")throw new TypeError("given task is not a function");if(_)try{Object.defineProperty(E,"name",{value:_})}catch{}return new Promise((m,k)=>{const w={id:this.nextTaskId++,task:E,name:_,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:F=>{if(w.completed)return;w.completed=!0,this.pendingTasks.delete(w.id),b.debug(`resolving task [name:${w.name}]`),m(F);const[g]=this.pendingTasks.values();g&&!g.executedAt&&this.execute(g)},reject:F=>{if(!w.completed&&(w.completed=!0,this.pendingTasks.delete(w.id),b.debug(`rejecting task [name:${w.name}]: %s`,String(F)),k(F),!this.stopping)){const[g]=this.pendingTasks.values();g&&!g.executedAt&&this.execute(g)}}};this.pendingTasks.set(w.id,w),this.pendingTasks.size===1&&this.execute(w)})}stop(){b.debug("stop()"),this.stopping=!0;for(const E of this.pendingTasks.values())b.debug(`stop() | stopping task [name:${E.name}]`),E.reject(new v.AwaitQueueStoppedError);this.stopping=!1}remove(E){b.debug(`remove() [taskIdx:${E}]`);const _=Array.from(this.pendingTasks.values())[E];_?_.reject(new v.AwaitQueueRemovedTaskError):b.debug(`stop() | no task with given idx [taskIdx:${E}]`)}dump(){const E=Date.now();let _=0;return Array.from(this.pendingTasks.values()).map(m=>({idx:_++,task:m.task,name:m.name,enqueuedTime:m.executedAt?m.executedAt-m.enqueuedAt:E-m.enqueuedAt,executionTime:m.executedAt?E-m.executedAt:0}))}async execute(E){if(b.debug(`execute() [name:${E.name}]`),E.executedAt)throw new Error("task already being executed");E.executedAt=Date.now();try{const _=await E.task();E.resolve(_)}catch(_){E.reject(_)}}}},9352:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ReactNative=void 0;const R=u(7363),v=u(2994),b=u(4893),E=u(1765),_=u(8046),m=u(5544),k=u(4496),w=u(521),F=u(1305),g=new v.Logger("ReactNative"),A={OS:1024,MIS:1024};class P extends w.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdTrack=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new P}constructor(){super()}get name(){return"ReactNative"}close(){if(g.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");const D=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const S=await D.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{D.close()}catch{}const x=R.parse(S.sdp);return m.extractRtpCapabilities({sdpObject:x})}catch(S){try{D.close()}catch{}throw S}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:A}}run({direction:D,iceParameters:S,iceCandidates:x,dtlsParameters:d,sctpParameters:T,iceServers:O,iceTransportPolicy:M,additionalSettings:I,proprietaryConstraints:U,extendedRtpCapabilities:z}){g.debug("run()"),this._direction=D,this._remoteSdp=new F.RemoteSdp({iceParameters:S,iceCandidates:x,dtlsParameters:d,sctpParameters:T,planB:!0}),this._sendingRtpParametersByKind={audio:_.getSendingRtpParameters("audio",z),video:_.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:_.getSendingRemoteRtpParameters("audio",z),video:_.getSendingRemoteRtpParameters("video",z)},d.role&&d.role!=="auto"&&(this._forcedLocalDtlsRole=d.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...I},U),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",$=>{this.emit("@icecandidateerror",$)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(D){g.debug("updateIceServers()");const S=this._pc.getConfiguration();S.iceServers=D,this._pc.setConfiguration(S)}async restartIce(D){if(g.debug("restartIce()"),this._remoteSdp.updateIceParameters(D),this._transportReady)if(this._direction==="send"){const S=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const x={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const S={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const x=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this._pc.getStats()}async send({track:D,encodings:S,codecOptions:x,codec:d}){this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",D.kind,D.id),d&&g.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(D),this._pc.addStream(this._sendStream);let T,O=await this._pc.createOffer(),M=R.parse(O.sdp);M.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const I=E.clone(this._sendingRtpParametersByKind[D.kind]);I.codecs=_.reduceCodecs(I.codecs);const U=E.clone(this._sendingRemoteRtpParametersByKind[D.kind]);if(U.codecs=_.reduceCodecs(U.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),D.kind==="video"&&S&&S.length>1&&(g.debug("send() | enabling simulcast"),M=R.parse(O.sdp),T=M.media.find(q=>q.type==="video"),k.addLegacySimulcast({offerMediaObject:T,track:D,numStreams:S.length}),O={type:"offer",sdp:R.write(M)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),M=R.parse(this._pc.localDescription.sdp),T=M.media.find(q=>q.type===D.kind),I.rtcp.cname=m.getCname({offerMediaObject:T}),I.encodings=k.getRtpEncodings({offerMediaObject:T,track:D}),S)for(let q=0;q<I.encodings.length;++q)S[q]&&Object.assign(I.encodings[q],S[q]);if(I.encodings.length>1&&(I.codecs[0].mimeType.toLowerCase()==="video/vp8"||I.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const q of I.encodings)q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:T,offerRtpParameters:I,answerRtpParameters:U,codecOptions:x});const z={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z);const $=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set($,D),{localId:$,rtpParameters:I}}async stopSending(D){this.assertSendDirection(),g.debug("stopSending() [localId:%s]",D);const S=this._mapSendLocalIdTrack.get(D);if(!S)throw new Error("track not found");this._mapSendLocalIdTrack.delete(D),this._sendStream.removeTrack(S),this._pc.addStream(this._sendStream);const x=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",x);try{await this._pc.setLocalDescription(x)}catch(T){if(this._sendStream.getTracks().length===0)return void g.warn("stopSending() | ignoring expected error due no sending tracks: %s",T.toString());throw T}if(this._pc.signalingState==="stable")return;const d={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d)}async pauseSending(D){}async resumeSending(D){}async replaceTrack(D,S){throw new b.UnsupportedError("not implemented")}async setMaxSpatialLayer(D,S){throw new b.UnsupportedError("not implemented")}async setRtpEncodingParameters(D,S){throw new b.UnsupportedError("not implemented")}async getSenderStats(D){throw new b.UnsupportedError("not implemented")}async sendDataChannel({ordered:D,maxPacketLifeTime:S,maxRetransmits:x,label:d,protocol:T}){this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:D,maxPacketLifeTime:S,maxRetransmitTime:S,maxRetransmits:x,protocol:T};g.debug("sendDataChannel() [options:%o]",O);const M=this._pc.createDataChannel(d,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%A.MIS,!this._hasDataChannelMediaSection){const I=await this._pc.createOffer(),U=R.parse(I.sdp),z=U.media.find(q=>q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const $={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(D){this.assertRecvDirection();const S=[],x=new Map;for(const M of D){const{trackId:I,kind:U,rtpParameters:z}=M;g.debug("receive() [trackId:%s, kind:%s]",I,U);const $=U;let q=M.streamId??z.rtcp.cname;g.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),q+=`-hack-${E.generateRandomNumber()}`,x.set(I,q),this._remoteSdp.receive({mid:$,kind:U,offerRtpParameters:z,streamId:q,trackId:I})}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);let T=await this._pc.createAnswer();const O=R.parse(T.sdp);for(const M of D){const{kind:I,rtpParameters:U}=M,z=I,$=O.media.find(q=>String(q.mid)===z);m.applyCodecParameters({offerRtpParameters:U,answerMediaObject:$})}T={type:"answer",sdp:R.write(O)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T);for(const M of D){const{kind:I,trackId:U,rtpParameters:z}=M,$=U,q=I,ae=x.get(U),Q=this._pc.getRemoteStreams().find(ve=>ve.id===ae).getTrackById($);if(!Q)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set($,{mid:q,rtpParameters:z}),S.push({localId:$,track:Q})}return S}async stopReceiving(D){this.assertRecvDirection();for(const d of D){g.debug("stopReceiving() [localId:%s]",d);const{mid:T,rtpParameters:O}=this._mapRecvLocalIdInfo.get(d)??{};this._mapRecvLocalIdInfo.delete(d),this._remoteSdp.planBStopReceiving({mid:T,offerRtpParameters:O})}const S={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const x=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async pauseReceiving(D){}async resumeReceiving(D){}async getReceiverStats(D){throw new b.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:D,label:S,protocol:x}){this.assertRecvDirection();const{streamId:d,ordered:T,maxPacketLifeTime:O,maxRetransmits:M}=D,I={negotiated:!0,id:d,ordered:T,maxPacketLifeTime:O,maxRetransmitTime:O,maxRetransmits:M,protocol:x};g.debug("receiveDataChannel() [options:%o]",I);const U=this._pc.createDataChannel(S,I);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const z={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const $=await this._pc.createAnswer();if(!this._transportReady){const q=R.parse($.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:q})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setLocalDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:U}}async setupTransport({localDtlsRole:D,localSdpObject:S}){S||(S=R.parse(this._pc.localDescription.sdp));const x=m.extractDtlsParameters({sdpObject:S});x.role=D,this._remoteSdp.updateDtlsRole(D==="client"?"server":"client"),await new Promise((d,T)=>{this.safeEmit("@connect",{dtlsParameters:x},d,T)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.ReactNative=P},9506:function(N,y,u){var R,v,b,E,_,m,k,w;N.exports=(w=u(9021),u(5471),u(1025),v=(R=w).lib,b=v.Base,E=v.WordArray,_=R.algo,m=_.MD5,k=_.EvpKDF=b.extend({cfg:b.extend({keySize:4,hasher:m,iterations:1}),init:function(F){this.cfg=this.cfg.extend(F)},compute:function(F,g){for(var A,P=this.cfg,H=P.hasher.create(),D=E.create(),S=D.words,x=P.keySize,d=P.iterations;S.length<x;){A&&H.update(A),A=H.update(F).finalize(g),H.reset();for(var T=1;T<d;T++)A=H.finalize(A),H.reset();D.concat(A)}return D.sigBytes=4*x,D}}),R.EvpKDF=function(F,g,A){return k.create(A).compute(F,g)},w.EvpKDF)},9557:function(N,y,u){var R,v,b,E,_,m,k,w;N.exports=(w=u(9021),u(3240),u(1380),v=(R=w).x64,b=v.Word,E=v.WordArray,_=R.algo,m=_.SHA512,k=_.SHA384=m.extend({_doReset:function(){this._hash=new E.init([new b.init(3418070365,3238371032),new b.init(1654270250,914150663),new b.init(2438529370,812702999),new b.init(355462360,4144912697),new b.init(1731405415,4290775857),new b.init(2394180231,1750603025),new b.init(3675008525,1694076839),new b.init(1203062813,3204075428)])},_doFinalize:function(){var F=m._doFinalize.call(this);return F.sigBytes-=16,F}}),R.SHA384=m._createHelper(k),R.HmacSHA384=m._createHmacHelper(k),w.SHA384)},9596:N=>{var y,u=typeof Reflect=="object"?Reflect:null,R=u&&typeof u.apply=="function"?u.apply:function(D,S,x){return Function.prototype.apply.call(D,S,x)};y=u&&typeof u.ownKeys=="function"?u.ownKeys:Object.getOwnPropertySymbols?function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:function(D){return Object.getOwnPropertyNames(D)};var v=Number.isNaN||function(D){return D!=D};function b(){b.init.call(this)}N.exports=b,N.exports.once=function(D,S){return new Promise(function(x,d){function T(M){D.removeListener(S,O),d(M)}function O(){typeof D.removeListener=="function"&&D.removeListener("error",T),x([].slice.call(arguments))}H(D,S,O,{once:!0}),S!=="error"&&function(M,I,U){typeof M.on=="function"&&H(M,"error",I,U)}(D,T,{once:!0})})},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var E=10;function _(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}function m(D){return D._maxListeners===void 0?b.defaultMaxListeners:D._maxListeners}function k(D,S,x,d){var T,O,M,I;if(_(x),(O=D._events)===void 0?(O=D._events=Object.create(null),D._eventsCount=0):(O.newListener!==void 0&&(D.emit("newListener",S,x.listener?x.listener:x),O=D._events),M=O[S]),M===void 0)M=O[S]=x,++D._eventsCount;else if(typeof M=="function"?M=O[S]=d?[x,M]:[M,x]:d?M.unshift(x):M.push(x),(T=m(D))>0&&M.length>T&&!M.warned){M.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=D,U.type=S,U.count=M.length,I=U,console&&console.warn&&console.warn(I)}return D}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F(D,S,x){var d={fired:!1,wrapFn:void 0,target:D,type:S,listener:x},T=w.bind(d);return T.listener=x,d.wrapFn=T,T}function g(D,S,x){var d=D._events;if(d===void 0)return[];var T=d[S];return T===void 0?[]:typeof T=="function"?x?[T.listener||T]:[T]:x?function(O){for(var M=new Array(O.length),I=0;I<M.length;++I)M[I]=O[I].listener||O[I];return M}(T):P(T,T.length)}function A(D){var S=this._events;if(S!==void 0){var x=S[D];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}function P(D,S){for(var x=new Array(S),d=0;d<S;++d)x[d]=D[d];return x}function H(D,S,x,d){if(typeof D.on=="function")d.once?D.once(S,x):D.on(S,x);else{if(typeof D.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof D);D.addEventListener(S,function T(O){d.once&&D.removeEventListener(S,T),x(O)})}}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(D){if(typeof D!="number"||D<0||v(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");E=D}}),b.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||v(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this},b.prototype.getMaxListeners=function(){return m(this)},b.prototype.emit=function(D){for(var S=[],x=1;x<arguments.length;x++)S.push(arguments[x]);var d=D==="error",T=this._events;if(T!==void 0)d=d&&T.error===void 0;else if(!d)return!1;if(d){var O;if(S.length>0&&(O=S[0]),O instanceof Error)throw O;var M=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw M.context=O,M}var I=T[D];if(I===void 0)return!1;if(typeof I=="function")R(I,this,S);else{var U=I.length,z=P(I,U);for(x=0;x<U;++x)R(z[x],this,S)}return!0},b.prototype.addListener=function(D,S){return k(this,D,S,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(D,S){return k(this,D,S,!0)},b.prototype.once=function(D,S){return _(S),this.on(D,F(this,D,S)),this},b.prototype.prependOnceListener=function(D,S){return _(S),this.prependListener(D,F(this,D,S)),this},b.prototype.removeListener=function(D,S){var x,d,T,O,M;if(_(S),(d=this._events)===void 0)return this;if((x=d[D])===void 0)return this;if(x===S||x.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete d[D],d.removeListener&&this.emit("removeListener",D,x.listener||S));else if(typeof x!="function"){for(T=-1,O=x.length-1;O>=0;O--)if(x[O]===S||x[O].listener===S){M=x[O].listener,T=O;break}if(T<0)return this;T===0?x.shift():function(I,U){for(;U+1<I.length;U++)I[U]=I[U+1];I.pop()}(x,T),x.length===1&&(d[D]=x[0]),d.removeListener!==void 0&&this.emit("removeListener",D,M||S)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(D){var S,x,d;if((x=this._events)===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[D]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[D]),this;if(arguments.length===0){var T,O=Object.keys(x);for(d=0;d<O.length;++d)(T=O[d])!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(S=x[D])=="function")this.removeListener(D,S);else if(S!==void 0)for(d=S.length-1;d>=0;d--)this.removeListener(D,S[d]);return this},b.prototype.listeners=function(D){return g(this,D,!0)},b.prototype.rawListeners=function(D){return g(this,D,!1)},b.listenerCount=function(D,S){return typeof D.listenerCount=="function"?D.listenerCount(S):A.call(D,S)},b.prototype.listenerCount=A,b.prototype.eventNames=function(){return this._eventsCount>0?y(this._events):[]}},9633:(N,y,u)=>{u.d(y,{l:()=>S});var R=u(467),v=u(3029),b=u(2901),E=u(388),_=u(3954),m=u(5501),k=u(4756),w=u.n(k),F=u(7007),g=u(1806),A=u(6746),P=u(8278);function H(x,d,T){return d=(0,_.A)(d),(0,E.A)(x,D()?Reflect.construct(d,T||[],(0,_.A)(x).constructor):d.apply(x,T))}function D(){try{var x=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D=function(){return!!x})()}var S=function(x){function d(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,v.A)(this,d),H(this,d,[Object.assign(Object.assign({},O),{sharedKey:!0,ratchetWindowSize:0,failureTolerance:-1})])}return(0,m.A)(d,x),(0,b.A)(d,[{key:"setSharedKey",value:(T=(0,R.A)(w().mark(function O(M){var I,U;return w().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(typeof M!="string"){z.next=2;break}return z.next=1,(0,P.sn)(M);case 1:U=z.sent,z.next=4;break;case 2:return z.next=3,(0,P.tr)(M);case 3:U=z.sent;case 4:I=U,this.onSetEncryptionKey(I);case 5:case"end":return z.stop()}},O,this)})),function(O){return T.apply(this,arguments)})}]);var T}(function(x){function d(){var T,O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,v.A)(this,d),(T=H(this,d)).onKeyRatcheted=function(M,I){console.debug("key ratcheted event received",{material:M,keyIndex:I})},T.keyInfoMap=new Map,T.options=Object.assign(Object.assign({},g.T4),O),T.on(A.fo.KeyRatcheted,T.onKeyRatcheted),T}return(0,m.A)(d,x),(0,b.A)(d,[{key:"onSetEncryptionKey",value:function(T,O,M){var I={key:T,participantIdentity:O,keyIndex:M};if(!this.options.sharedKey&&!O)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(O??"shared","-").concat(M??0),I),this.emit(A.fo.SetKey,I)}},{key:"getKeys",value:function(){return Array.from(this.keyInfoMap.values())}},{key:"getOptions",value:function(){return this.options}},{key:"ratchetKey",value:function(T,O){this.emit(A.fo.RatchetRequest,T,O)}}])}(F.EventEmitter))},9676:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Safari11=void 0;const R=u(7363),v=u(2994),b=u(1765),E=u(8046),_=u(5544),m=u(4496),k=u(521),w=u(1305),F=new v.Logger("Safari11"),g={OS:1024,MIS:1024};class A extends k.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdRtpSender=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new A}constructor(){super()}get name(){return"Safari11"}close(){if(F.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){F.debug("getNativeRtpCapabilities()");const H=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const D=await H.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{H.close()}catch{}const S=R.parse(D.sdp);return _.extractRtpCapabilities({sdpObject:S})}catch(D){try{H.close()}catch{}throw D}}async getNativeSctpCapabilities(){return F.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:H,iceParameters:D,iceCandidates:S,dtlsParameters:x,sctpParameters:d,iceServers:T,iceTransportPolicy:O,additionalSettings:M,proprietaryConstraints:I,extendedRtpCapabilities:U}){F.debug("run()"),this._direction=H,this._remoteSdp=new w.RemoteSdp({iceParameters:D,iceCandidates:S,dtlsParameters:x,sctpParameters:d,planB:!0}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",U),video:E.getSendingRtpParameters("video",U)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",U),video:E.getSendingRemoteRtpParameters("video",U)},x.role&&x.role!=="auto"&&(this._forcedLocalDtlsRole=x.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:T??[],iceTransportPolicy:O??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...M},I),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",z=>{this.emit("@icecandidateerror",z)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(F.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(H){F.debug("updateIceServers()");const D=this._pc.getConfiguration();D.iceServers=H,this._pc.setConfiguration(D)}async restartIce(H){if(F.debug("restartIce()"),this._remoteSdp.updateIceParameters(H),this._transportReady)if(this._direction==="send"){const D=await this._pc.createOffer({iceRestart:!0});F.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const S={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}else{const D={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",D),await this._pc.setRemoteDescription(D);const S=await this._pc.createAnswer();F.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}}async getTransportStats(){return this._pc.getStats()}async send({track:H,encodings:D,codecOptions:S,codec:x}){this.assertSendDirection(),F.debug("send() [kind:%s, track.id:%s]",H.kind,H.id),x&&F.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(H),this._pc.addTrack(H,this._sendStream);let d,T=await this._pc.createOffer(),O=R.parse(T.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const M=b.clone(this._sendingRtpParametersByKind[H.kind]);M.codecs=E.reduceCodecs(M.codecs);const I=b.clone(this._sendingRemoteRtpParametersByKind[H.kind]);if(I.codecs=E.reduceCodecs(I.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),H.kind==="video"&&D&&D.length>1&&(F.debug("send() | enabling simulcast"),O=R.parse(T.sdp),d=O.media.find(q=>q.type==="video"),m.addLegacySimulcast({offerMediaObject:d,track:H,numStreams:D.length}),T={type:"offer",sdp:R.write(O)}),F.debug("send() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T),O=R.parse(this._pc.localDescription.sdp),d=O.media.find(q=>q.type===H.kind),M.rtcp.cname=_.getCname({offerMediaObject:d}),M.encodings=m.getRtpEncodings({offerMediaObject:d,track:H}),D)for(let q=0;q<M.encodings.length;++q)D[q]&&Object.assign(M.encodings[q],D[q]);if(M.encodings.length>1&&M.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const q of M.encodings)q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:d,offerRtpParameters:M,answerRtpParameters:I,codecOptions:S});const U={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("send() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setRemoteDescription(U);const z=String(this._nextSendLocalId);this._nextSendLocalId++;const $=this._pc.getSenders().find(q=>q.track===H);return this._mapSendLocalIdRtpSender.set(z,$),{localId:z,rtpParameters:M,rtpSender:$}}async stopSending(H){this.assertSendDirection();const D=this._mapSendLocalIdRtpSender.get(H);if(!D)throw new Error("associated RTCRtpSender not found");D.track&&this._sendStream.removeTrack(D.track),this._mapSendLocalIdRtpSender.delete(H);const S=await this._pc.createOffer();F.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",S);try{await this._pc.setLocalDescription(S)}catch(d){if(this._sendStream.getTracks().length===0)return void F.warn("stopSending() | ignoring expected error due no sending tracks: %s",d.toString());throw d}if(this._pc.signalingState==="stable")return;const x={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async pauseSending(H){}async resumeSending(H){}async replaceTrack(H,D){this.assertSendDirection(),D?F.debug("replaceTrack() [localId:%s, track.id:%s]",H,D.id):F.debug("replaceTrack() [localId:%s, no track]",H);const S=this._mapSendLocalIdRtpSender.get(H);if(!S)throw new Error("associated RTCRtpSender not found");const x=S.track;await S.replaceTrack(D),x&&this._sendStream.removeTrack(x),D&&this._sendStream.addTrack(D)}async setMaxSpatialLayer(H,D){this.assertSendDirection(),F.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",H,D);const S=this._mapSendLocalIdRtpSender.get(H);if(!S)throw new Error("associated RTCRtpSender not found");const x=S.getParameters();x.encodings.forEach((d,T)=>{d.active=T<=D}),await S.setParameters(x)}async setRtpEncodingParameters(H,D){this.assertSendDirection(),F.debug("setRtpEncodingParameters() [localId:%s, params:%o]",H,D);const S=this._mapSendLocalIdRtpSender.get(H);if(!S)throw new Error("associated RTCRtpSender not found");const x=S.getParameters();x.encodings.forEach((d,T)=>{x.encodings[T]={...d,...D}}),await S.setParameters(x)}async getSenderStats(H){this.assertSendDirection();const D=this._mapSendLocalIdRtpSender.get(H);if(!D)throw new Error("associated RTCRtpSender not found");return D.getStats()}async sendDataChannel({ordered:H,maxPacketLifeTime:D,maxRetransmits:S,label:x,protocol:d}){this.assertSendDirection();const T={negotiated:!0,id:this._nextSendSctpStreamId,ordered:H,maxPacketLifeTime:D,maxRetransmits:S,protocol:d};F.debug("sendDataChannel() [options:%o]",T);const O=this._pc.createDataChannel(x,T);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),I=R.parse(M.sdp),U=I.media.find($=>$.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),F.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const z={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:T.id,ordered:T.ordered,maxPacketLifeTime:T.maxPacketLifeTime,maxRetransmits:T.maxRetransmits}}}async receive(H){this.assertRecvDirection();const D=[];for(const T of H){const{trackId:O,kind:M,rtpParameters:I,streamId:U}=T;F.debug("receive() [trackId:%s, kind:%s]",O,M);const z=M;this._remoteSdp.receive({mid:z,kind:M,offerRtpParameters:I,streamId:U??I.rtcp.cname,trackId:O})}const S={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);let x=await this._pc.createAnswer();const d=R.parse(x.sdp);for(const T of H){const{kind:O,rtpParameters:M}=T,I=O,U=d.media.find(z=>String(z.mid)===I);_.applyCodecParameters({offerRtpParameters:M,answerMediaObject:U})}x={type:"answer",sdp:R.write(d)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),F.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const T of H){const{kind:O,trackId:M,rtpParameters:I}=T,U=O,z=M,$=this._pc.getReceivers().find(q=>q.track&&q.track.id===z);if(!$)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(z,{mid:U,rtpParameters:I,rtpReceiver:$}),D.push({localId:z,track:$.track,rtpReceiver:$})}return D}async stopReceiving(H){this.assertRecvDirection();for(const x of H){F.debug("stopReceiving() [localId:%s]",x);const{mid:d,rtpParameters:T}=this._mapRecvLocalIdInfo.get(x)??{};this._mapRecvLocalIdInfo.delete(x),this._remoteSdp.planBStopReceiving({mid:d,offerRtpParameters:T})}const D={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",D),await this._pc.setRemoteDescription(D);const S=await this._pc.createAnswer();F.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}async getReceiverStats(H){this.assertRecvDirection();const{rtpReceiver:D}=this._mapRecvLocalIdInfo.get(H)??{};if(!D)throw new Error("associated RTCRtpReceiver not found");return D.getStats()}async pauseReceiving(H){}async resumeReceiving(H){}async receiveDataChannel({sctpStreamParameters:H,label:D,protocol:S}){this.assertRecvDirection();const{streamId:x,ordered:d,maxPacketLifeTime:T,maxRetransmits:O}=H,M={negotiated:!0,id:x,ordered:d,maxPacketLifeTime:T,maxRetransmits:O,protocol:S};F.debug("receiveDataChannel() [options:%o]",M);const I=this._pc.createDataChannel(D,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const U={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",U),await this._pc.setRemoteDescription(U);const z=await this._pc.createAnswer();if(!this._transportReady){const $=R.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$})}F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:I}}async setupTransport({localDtlsRole:H,localSdpObject:D}){D||(D=R.parse(this._pc.localDescription.sdp));const S=_.extractDtlsParameters({sdpObject:D});S.role=H,this._remoteSdp.updateDtlsRole(H==="client"?"server":"client"),await new Promise((x,d)=>{this.safeEmit("@connect",{dtlsParameters:S},x,d)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}y.Safari11=A},9746:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0});const R=u(6697);y.default=function(v){return typeof v=="string"&&R.default.test(v)}},9792:(N,y,u)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.Producer=void 0;const R=u(2994),v=u(3953),b=u(4893),E=new R.Logger("Producer");class _ extends v.EnhancedEventEmitter{_id;_localId;_closed=!1;_rtpSender;_track;_kind;_rtpParameters;_paused;_maxSpatialLayer;_stopTracks;_disableTrackOnPause;_zeroRtpOnPause;_appData;_observer=new v.EnhancedEventEmitter;constructor({id:k,localId:w,rtpSender:F,track:g,rtpParameters:A,stopTracks:P,disableTrackOnPause:H,zeroRtpOnPause:D,appData:S}){super(),E.debug("constructor()"),this._id=k,this._localId=w,this._rtpSender=F,this._track=g,this._kind=g.kind,this._rtpParameters=A,this._paused=!!H&&!g.enabled,this._maxSpatialLayer=void 0,this._stopTracks=P,this._disableTrackOnPause=H,this._zeroRtpOnPause=D,this._appData=S??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(k){this._appData=k}get observer(){return this._observer}close(){this._closed||(E.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(E.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new b.InvalidStateError("closed");return new Promise((k,w)=>{this.safeEmit("@getstats",k,w)})}pause(){E.debug("pause()"),this._closed?E.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((k,w)=>{this.safeEmit("@pause",k,w)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){E.debug("resume()"),this._closed?E.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((k,w)=>{this.safeEmit("@resume",k,w)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:k}){if(E.debug("replaceTrack() [track:%o]",k),this._closed){if(k&&this._stopTracks)try{k.stop()}catch{}throw new b.InvalidStateError("closed")}if(k&&k.readyState==="ended")throw new b.InvalidStateError("track ended");k!==this._track?(await new Promise((w,F)=>{this.safeEmit("@replacetrack",k,w,F)}),this.destroyTrack(),this._track=k,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):E.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(k){if(this._closed)throw new b.InvalidStateError("closed");if(this._kind!=="video")throw new b.UnsupportedError("not a video Producer");if(typeof k!="number")throw new TypeError("invalid spatialLayer");k!==this._maxSpatialLayer&&(await new Promise((w,F)=>{this.safeEmit("@setmaxspatiallayer",k,w,F)}).catch(()=>{}),this._maxSpatialLayer=k)}async setRtpEncodingParameters(k){if(this._closed)throw new b.InvalidStateError("closed");if(typeof k!="object")throw new TypeError("invalid params");await new Promise((w,F)=>{this.safeEmit("@setrtpencodingparameters",k,w,F)})}onTrackEnded(){E.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}y.Producer=_}},l={};function h(N){var y=l[N];if(y!==void 0)return y.exports;var u=l[N]={exports:{}};return s[N].call(u.exports,u,u.exports,h),u.exports}h.amdO={},h.n=N=>{var y=N&&N.__esModule?()=>N.default:()=>N;return h.d(y,{a:y}),y},h.d=(N,y)=>{for(var u in y)h.o(y,u)&&!h.o(N,u)&&Object.defineProperty(N,u,{enumerable:!0,get:y[u]})},h.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),h.o=(N,y)=>Object.prototype.hasOwnProperty.call(N,y),h.r=N=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})};var C={};return(()=>{h.r(C),h.d(C,{CameraDeviceInfo:()=>il,DeviceInfo:()=>yo,ExternalE2EEKeyProvider:()=>ur.l,MicrophoneDeviceInfo:()=>Nl,VideoSDK:()=>oa,ZujoSDK:()=>Gr});var N=h(2284),y=h(467),u=h(3029),R=h(2901),v=h(4467),b=h(4756),E=h.n(b),_=h(6880),m=h.n(_);function k(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function w(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?k(Object(X),!0).forEach(function(de){(0,v.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):k(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}function F(G){return"Minified Redux error #"+G+"; visit https://redux.js.org/Errors?code="+G+" for the full message or use the non-minified dev environment for full errors. "}var g=typeof Symbol=="function"&&Symbol.observable||"@@observable",A=function(){return Math.random().toString(36).substring(7).split("").join(".")},P={INIT:"@@redux/INIT"+A(),REPLACE:"@@redux/REPLACE"+A(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+A()}};function H(G){if(typeof G!="object"||G===null)return!1;for(var K=G;Object.getPrototypeOf(K)!==null;)K=Object.getPrototypeOf(K);return Object.getPrototypeOf(G)===K}function D(G,K,X){var de;if(typeof K=="function"&&typeof X=="function"||typeof X=="function"&&typeof arguments[3]=="function")throw new Error(F(0));if(typeof K=="function"&&X===void 0&&(X=K,K=void 0),X!==void 0){if(typeof X!="function")throw new Error(F(1));return X(D)(G,K)}if(typeof G!="function")throw new Error(F(2));var Ee=G,xe=K,Se=[],$e=Se,ke=!1;function Oe(){$e===Se&&($e=Se.slice())}function Je(){if(ke)throw new Error(F(3));return xe}function We(tt){if(typeof tt!="function")throw new Error(F(4));if(ke)throw new Error(F(5));var ue=!0;return Oe(),$e.push(tt),function(){if(ue){if(ke)throw new Error(F(6));ue=!1,Oe();var pe=$e.indexOf(tt);$e.splice(pe,1),Se=null}}}function Ae(tt){if(!H(tt))throw new Error(F(7));if(tt.type===void 0)throw new Error(F(8));if(ke)throw new Error(F(9));try{ke=!0,xe=Ee(xe,tt)}finally{ke=!1}for(var ue=Se=$e,pe=0;pe<ue.length;pe++)(0,ue[pe])();return tt}return Ae({type:P.INIT}),(de={dispatch:Ae,subscribe:We,getState:Je,replaceReducer:function(tt){if(typeof tt!="function")throw new Error(F(10));Ee=tt,Ae({type:P.REPLACE})}})[g]=function(){var tt,ue=We;return(tt={subscribe:function(pe){if(typeof pe!="object"||pe===null)throw new Error(F(11));function Ie(){pe.next&&pe.next(Je())}return Ie(),{unsubscribe:ue(Ie)}}})[g]=function(){return this},tt},de}function S(){for(var G=arguments.length,K=new Array(G),X=0;X<G;X++)K[X]=arguments[X];return K.length===0?function(de){return de}:K.length===1?K[0]:K.reduce(function(de,Ee){return function(){return de(Ee.apply(void 0,arguments))}})}function x(){for(var G=arguments.length,K=new Array(G),X=0;X<G;X++)K[X]=arguments[X];return function(de){return function(){var Ee=de.apply(void 0,arguments),xe=function(){throw new Error(F(15))},Se={getState:Ee.getState,dispatch:function(){return xe.apply(void 0,arguments)}},$e=K.map(function(ke){return ke(Se)});return xe=S.apply(void 0,$e)(Ee.dispatch),w(w({},Ee),{},{dispatch:xe})}}}function d(G){return function(K){var X=K.dispatch,de=K.getState;return function(Ee){return function(xe){return typeof xe=="function"?xe(X,de,G):Ee(xe)}}}}var T=d();T.withExtraArgument=d;const O=T;var M=h(2211),I=h.n(M);function U(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function z(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?U(Object(X),!0).forEach(function(de){(0,v.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):U(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var $={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const q=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_URL":var X=K.payload.url;return z(z({},G),{},{url:X});case"SET_ROOM_STATE":var de=K.payload.state;return z(z({},G),{},de==="connected"?{state:de}:{state:de,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var Ee=K.payload.peerId;return z(z({},G),{},{activeSpeakerId:Ee});case"SET_ROOM_STATS_PEER_ID":var xe=K.payload.peerId;return G.statsPeerId===xe?z(z({},G),{},{statsPeerId:null}):z(z({},G),{},{statsPeerId:xe});case"SET_FACE_DETECTION":var Se=K.payload;return z(z({},G),{},{faceDetection:Se});case"REMOVE_PEER":var $e=K.payload.peerId,ke=z({},G);return $e&&$e===G.activeSpeakerId&&(ke.activeSpeakerId=null),$e&&$e===G.statsPeerId&&(ke.statsPeerId=null),ke;default:return G}};function ae(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function Q(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?ae(Object(X),!0).forEach(function(de){(0,v.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):ae(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var ve={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const we=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ve,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?Q(Q({},G),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):G;case"SET_ME":var X=K.payload,de=X.peerId,Ee=X.displayName,xe=X.displayNameSet,Se=X.device;return Q(Q({},G),{},{id:de,displayName:Ee,displayNameSet:xe,device:Se});case"SET_MEDIA_CAPABILITIES":var $e=K.payload,ke=$e.canSendMic,Oe=$e.canSendWebcam;return Q(Q({},G),{},{canSendMic:ke,canSendWebcam:Oe});case"SET_CAN_CHANGE_WEBCAM":var Je=K.payload;return Q(Q({},G),{},{canChangeWebcam:Je});case"SET_WEBCAM_IN_PROGRESS":var We=K.payload.flag;return Q(Q({},G),{},{webcamInProgress:We});case"SET_SHARE_IN_PROGRESS":var Ae=K.payload.flag;return Q(Q({},G),{},{shareInProgress:Ae});case"SET_DISPLAY_NAME":var tt=K.payload.displayName;return tt||(tt=G.displayName),Q(Q({},G),{},{displayName:tt,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var ue=K.payload.enabled;return Q(Q({},G),{},{audioOnly:ue});case"SET_AUDIO_ONLY_IN_PROGRESS":var pe=K.payload.flag;return Q(Q({},G),{},{audioOnlyInProgress:pe});case"SET_AUDIO_MUTED_STATE":var Ie=K.payload.enabled;return Q(Q({},G),{},{audioMuted:Ie});case"SET_RESTART_ICE_IN_PROGRESS":var qe=K.payload.flag;return Q(Q({},G),{},{restartIceInProgress:qe});default:return G}};function Re(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function me(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?Re(Object(X),!0).forEach(function(de){(0,v.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):Re(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var Ce={};const Be=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:G;case"ADD_PRODUCER":var X=K.payload.producer;return me(me({},G),{},(0,v.A)({},X.id,X));case"REMOVE_PRODUCER":var de=K.payload.producerId,Ee=me({},G);return delete Ee[de],Ee;case"SET_PRODUCER_PAUSED":var xe=K.payload.producerId,Se=me(me({},G[xe]),{},{paused:!0});return me(me({},G),{},(0,v.A)({},xe,Se));case"SET_PRODUCER_RESUMED":var $e=K.payload.producerId,ke=me(me({},G[$e]),{},{paused:!1});return me(me({},G),{},(0,v.A)({},$e,ke));case"SET_PRODUCER_TRACK":var Oe=K.payload,Je=Oe.producerId,We=Oe.track,Ae=me(me({},G[Je]),{},{track:We});return me(me({},G),{},(0,v.A)({},Je,Ae));case"SET_PRODUCER_SCORE":var tt=K.payload,ue=tt.producerId,pe=tt.score,Ie=G[ue];if(!Ie)return G;var qe=me(me({},Ie),{},{score:pe});return me(me({},G),{},(0,v.A)({},ue,qe));default:return G}};function be(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function Ye(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?be(Object(X),!0).forEach(function(de){(0,v.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):be(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var Qe={};const Ge=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qe,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:G;case"ADD_DATA_PRODUCER":var X=K.payload.dataProducer;return Ye(Ye({},G),{},(0,v.A)({},X.id,X));case"REMOVE_DATA_PRODUCER":var de=K.payload.dataProducerId,Ee=Ye({},G);return delete Ee[de],Ee;default:return G}};var He=h(5458);function Te(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function dt(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?Te(Object(X),!0).forEach(function(de){(0,v.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):Te(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var _t={};function on(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function ln(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?on(Object(X),!0).forEach(function(de){(0,v.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):on(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var Pn={};function En(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function rn(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?En(Object(X),!0).forEach(function(de){(0,v.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):En(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var Ne={},Me=[];const Ze=function(G){for(var K=Object.keys(G),X={},de=0;de<K.length;de++){var Ee=K[de];typeof G[Ee]=="function"&&(X[Ee]=G[Ee])}var xe,Se=Object.keys(X);try{(function($e){Object.keys($e).forEach(function(ke){var Oe=$e[ke];if(Oe(void 0,{type:P.INIT})===void 0)throw new Error(F(12));if(Oe(void 0,{type:P.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(F(13))})})(X)}catch($e){xe=$e}return function($e,ke){if($e===void 0&&($e={}),xe)throw xe;for(var Oe=!1,Je={},We=0;We<Se.length;We++){var Ae=Se[We],tt=X[Ae],ue=$e[Ae],pe=tt(ue,ke);if(pe===void 0)throw ke&&ke.type,new Error(F(14));Je[Ae]=pe,Oe=Oe||pe!==ue}return(Oe=Oe||Se.length!==Object.keys($e).length)?Je:$e}}({room:q,me:we,producers:Be,dataProducers:Ge,peers:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_t,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:G;case"ADD_PEER":var X=K.payload.peer;return dt(dt({},G),{},(0,v.A)({},X.id,X));case"REMOVE_PEER":var de=K.payload.peerId,Ee=dt({},G);return delete Ee[de],Ee;case"SET_PEER_DISPLAY_NAME":var xe=K.payload,Se=xe.displayName,$e=G[xe.peerId];if(!$e)throw new Error("no Peer found");var ke=dt(dt({},$e),{},{displayName:Se});return dt(dt({},G),{},(0,v.A)({},ke.id,ke));case"ADD_CONSUMER":var Oe=K.payload,Je=Oe.consumer,We=G[Oe.peerId];if(!We)return dt({},G);var Ae=[].concat((0,He.A)(We.consumers),[Je.id]),tt=dt(dt({},We),{},{consumers:Ae});return dt(dt({},G),{},(0,v.A)({},tt.id,tt));case"REMOVE_CONSUMER":var ue=K.payload,pe=ue.consumerId,Ie=G[ue.peerId];if(!Ie)return G;var qe=Ie.consumers.indexOf(pe);if(qe===-1)return dt({},G);var nt=Ie.consumers.slice();nt.splice(qe,1);var tn=dt(dt({},Ie),{},{consumers:nt});return dt(dt({},G),{},(0,v.A)({},tn.id,tn));case"ADD_DATA_CONSUMER":var bt=K.payload,Nt=bt.dataConsumer,Mn=bt.peerId;if(!Mn)return G;var ct=G[Mn];if(!ct)return dt({},G);var Fe=[].concat((0,He.A)(ct.dataConsumers),[Nt.id]),xt=dt(dt({},ct),{},{dataConsumers:Fe});return dt(dt({},G),{},(0,v.A)({},xt.id,xt));case"REMOVE_DATA_CONSUMER":var wn=K.payload,cn=wn.dataConsumerId,vn=wn.peerId;if(!vn)return G;var or=G[vn];if(!or)return G;var Lr=or.dataConsumers.indexOf(cn);if(Lr===-1)return dt({},G);var Tn=or.dataConsumers.slice();Tn.splice(Lr,1);var yn=dt(dt({},or),{},{dataConsumers:Tn});return dt(dt({},G),{},(0,v.A)({},yn.id,yn));default:return G}},consumers:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pn,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:G;case"ADD_CONSUMER":var X=K.payload.consumer;return ln(ln({},G),{},(0,v.A)({},X.id,X));case"REMOVE_CONSUMER":var de=K.payload.consumerId,Ee=ln({},G);return delete Ee[de],Ee;case"SET_CONSUMER_PAUSED":var xe,Se=K.payload,$e=Se.consumerId,ke=Se.originator,Oe=G[$e];return xe=ln(ln({},Oe),{},ke==="local"?{locallyPaused:!0,paused:!0}:{remotelyPaused:!0,paused:!0}),ln(ln({},G),{},(0,v.A)({},$e,xe));case"SET_CONSUMER_RESUMED":var Je,We=K.payload,Ae=We.consumerId,tt=We.originator,ue=G[Ae];return Je=ln(ln({},ue),{},tt==="local"?{locallyPaused:!1,paused:!1}:{remotelyPaused:!1,paused:!1}),ln(ln({},G),{},(0,v.A)({},Ae,Je));case"SET_CONSUMER_CURRENT_LAYERS":var pe=K.payload,Ie=pe.consumerId,qe=pe.spatialLayer,nt=pe.temporalLayer,tn=ln(ln({},G[Ie]),{},{currentSpatialLayer:qe,currentTemporalLayer:nt});return ln(ln({},G),{},(0,v.A)({},Ie,tn));case"SET_CONSUMER_PREFERRED_LAYERS":var bt=K.payload,Nt=bt.consumerId,Mn=bt.spatialLayer,ct=bt.temporalLayer,Fe=ln(ln({},G[Nt]),{},{preferredSpatialLayer:Mn,preferredTemporalLayer:ct});return ln(ln({},G),{},(0,v.A)({},Nt,Fe));case"SET_CONSUMER_PRIORITY":var xt=K.payload,wn=xt.consumerId,cn=xt.priority,vn=ln(ln({},G[wn]),{},{priority:cn});return ln(ln({},G),{},(0,v.A)({},wn,vn));case"SET_CONSUMER_TRACK":var or=K.payload,Lr=or.consumerId,Tn=or.track,yn=ln(ln({},G[Lr]),{},{track:Tn});return ln(ln({},G),{},(0,v.A)({},Lr,yn));case"SET_CONSUMER_SCORE":var Nr=K.payload,br=Nr.consumerId,ar=Nr.score,$n=G[br];if(!$n)return G;var Rn=ln(ln({},$n),{},{score:ar});return ln(ln({},G),{},(0,v.A)({},br,Rn));default:return G}},dataConsumers:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ne,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:G;case"ADD_DATA_CONSUMER":var X=K.payload.dataConsumer;return rn(rn({},G),{},(0,v.A)({},X.id,X));case"REMOVE_DATA_CONSUMER":var de=K.payload.dataConsumerId,Ee=rn({},G);return delete Ee[de],Ee;default:return G}},notifications:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Me,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"ADD_NOTIFICATION":var X=K.payload.notification;return[].concat((0,He.A)(G),[X]);case"REMOVE_NOTIFICATION":var de=K.payload.notificationId;return G.filter(function(Ee){return Ee.id!==de});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return G}}});var Ft=h(1919),Tt=h(7007),St=h(296),un=(h(1919).default,(0,R.A)(function G(){(0,u.A)(this,G),this.roomClient=null})),Sn=new(function(){function G(){(0,u.A)(this,G),G.instance||(G.instance=new un)}return(0,R.A)(G,[{key:"getInstance",value:function(){return G.instance}}])}());Object.freeze(Sn);var Ut=Sn.getInstance(),nr="state",Ar=function(){return(0,R.A)(function G(K){(0,u.A)(this,G),(0,v.A)(this,"pausedBy",void 0),this.id=K.id,this.kind=K.track.kind,this.codec=K.codec,this.track=K.track,this.producerOrConsumer=K.instance,K.appData&&K.appData.share===!0&&K.track.kind==="video"&&(this.kind="share"),K.appData&&K.appData.share===!0&&K.track.kind==="audio"&&(this.kind="shareAudio"),this.rtpSender=K.rtpSender,this.rtpReceiver=K.rtpReceiver,this.eventEmitter=new Tt},[{key:"pause",value:function(){Ut.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){Ut.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"handleStateChanged",value:function(G){var K=G.state;G.streamId,this.eventEmitter.emit(nr,{state:K,timestamp:new Date().getTime()})}},{key:"paused",get:function(){return this.producerOrConsumer.paused}},{key:"on",value:function(G,K){if(G!==nr)throw new Error("Invalid event type from STREAM onn");this.eventEmitter.on(G,K)}},{key:"off",value:function(G,K){if(G!==nr)throw new Error("Invalid event type from STREAM off");this.eventEmitter.off(G,K)}}])}(),Sr=h(1803);function Ur(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function xr(G,K){var X=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!X){if(Array.isArray(G)||(X=function(ke,Oe){if(ke){if(typeof ke=="string")return Or(ke,Oe);var Je={}.toString.call(ke).slice(8,-1);return Je==="Object"&&ke.constructor&&(Je=ke.constructor.name),Je==="Map"||Je==="Set"?Array.from(ke):Je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Je)?Or(ke,Oe):void 0}}(G))||K){X&&(G=X);var de=0,Ee=function(){};return{s:Ee,n:function(){return de>=G.length?{done:!0}:{done:!1,value:G[de++]}},e:function(ke){throw ke},f:Ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe,Se=!0,$e=!1;return{s:function(){X=X.call(G)},n:function(){var ke=X.next();return Se=ke.done,ke},e:function(ke){$e=!0,xe=ke},f:function(){try{Se||X.return==null||X.return()}finally{if($e)throw xe}}}}function Or(G,K){(K==null||K>G.length)&&(K=G.length);for(var X=0,de=Array(K);X<K;X++)de[X]=G[X];return de}var Kr="stream-enabled",va="stream-disabled",ra="media-status-changed",ua="video-quality-changed",jn="stream-paused",Ha="stream-resumed",Ea="producer-added",Qr="producer-removed",gr="consumer-added",rt="consumer-removed",ut="e2ee-state-change",Zt=function(){return(0,R.A)(function xe(Se){var $e=this;(0,u.A)(this,xe),(0,v.A)(this,"captureImage",(0,y.A)(E().mark(function ke(){var Oe,Je,We,Ae,tt,ue,pe,Ie,qe,nt,tn=arguments;return E().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:Je=(Oe=tn.length>0&&tn[0]!==void 0?tn[0]:{}).height,We=Oe.width,bt.prev=1,Ae=(0,He.A)($e.streams.values()),tt=xr(Ae),bt.prev=2,pe=E().mark(function Nt(){var Mn,ct,Fe,xt,wn,cn;return E().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:if((Mn=ue.value).kind!="video"){vn.next=4;break}return vn.prev=1,(ct=new MediaStream).addTrack(Mn.track),(Fe=document.createElement("video")).srcObject=ct,Fe.playsInline=!0,(xt=document.createElement("canvas")).id="canvasId",vn.next=2,new Promise(function(or,Lr){Fe.addEventListener("loadeddata",(0,y.A)(E().mark(function Tn(){var yn,Nr,br,ar,$n,Rn,qr;return E().wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:return yn=Fe.videoWidth,Nr=Fe.videoHeight,br=16/9,Je==null&&We==null&&(Je=Nr,We=yn),Je==null&&Je==null||(Je<=0||Je>Nr)&&(Je=Nr),We==null&&We==null||(We<=0||We>yn)&&(We=yn),Je==null&&(Je=We/br),We==null&&(We=Je*br),xt.width=We,xt.height=Je,wa.prev=1,wa.next=2,Fe.play();case 2:document.body.appendChild(Fe),ar=(xt.width-yn*br)/2,$n=(xt.height-Nr*br)/2,xt.getContext("2d").clearRect(0,0,ar/2,$n/2),xt.getContext("2d").drawImage(Fe,0,0),Rn=xt.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(xt),document.body.removeChild(xt),document.body.removeChild(Fe),or(Rn),wa.next=4;break;case 3:wa.prev=3,qr=wa.catch(1),Lr(qr),console.log("error in video",qr);case 4:case"end":return wa.stop()}},Tn,null,[[1,3]])})))});case 2:return wn=vn.sent,vn.abrupt("return",{v:wn});case 3:vn.prev=3,cn=vn.catch(1),console.error("err on image capture",cn);case 4:case"end":return vn.stop()}},Nt,null,[[1,3]])}),tt.s();case 3:if((ue=tt.n()).done){bt.next=6;break}return bt.delegateYield(pe(),"t0",4);case 4:if(!(Ie=bt.t0)){bt.next=5;break}return bt.abrupt("return",Ie.v);case 5:bt.next=3;break;case 6:bt.next=8;break;case 7:bt.prev=7,qe=bt.catch(2),tt.e(qe);case 8:return bt.prev=8,tt.f(),bt.finish(8);case 9:throw new Error("Camera must be on to capture an image");case 10:bt.prev=10,nt=bt.catch(1),console.error("Error in captureImage::",nt),Ut.roomClient._videosdkLogs&&Ut.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:nt.message}});case 11:case"end":return bt.stop()}},ke,null,[[1,10],[2,7,8,9]])}))),this.id=Se.id,this.displayName=Se.displayName,this.streams=new Map,this.quality="low",this.screenShareQuality="high",this.local=Se.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=Se.mode,this.metaData=Se.metaData,this.eventEmitter=new Tt.EventEmitter,this.participantVideoElements=new Map,this.participantAudioElements=new Map,this.videoVisible=!1,this.height=null,this.width=null,this.resizeObserver=null},[{key:"_setPinState",value:function(xe){xe.cam!=null&&(this.pinState.cam=xe.cam),xe.share!=null&&(this.pinState.share=xe.share)}},{key:"remove",value:function(){Ut.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){Ut.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){Ut.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Ut.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Ut.roomClient.disablePeerWebcam(this.id)}},{key:"getTransportStats",value:function(){return Ut.roomClient.getTransportRemoteStats({participantId:this.id})}},{key:"handleStreamStateChanged",value:function(xe){var Se=xe.state,$e=(xe.peerId,xe.streamId),ke=this.streams.get($e);ke!=null&&(ke.kind!=="video"&&ke.kind!=="share"||ke.handleStateChanged({state:Se,streamId:$e}))}},{key:"addStream",value:function(xe){if(xe){this.streams.set(xe.id,xe),xe.kind!=="video"||this.local||Ut.roomClient.setConsumerQuality(xe.id,this.quality);var Se=new MediaStream;Se.addTrack(xe.track);try{if(["video","share"].includes(xe.kind)){var $e=this.participantVideoElements.get(xe.kind);if($e){var ke={display:"block",objectFit:xe.kind==="share"?"contain":"cover",width:"100%"};Object.assign($e.style,ke),$e.srcObject=Se,$e.play().catch(function(Je){console.error("Failed to play ".concat(xe.kind," stream:"),Je)}),(xe.kind==="share"||xe.kind==="video"&&this.videoVisible)&&xe.resume()}}if((xe.kind==="audio"||xe.kind==="shareAudio")&&!this.local){var Oe=this.participantAudioElements.get(xe.kind);Oe&&(Oe.srcObject=Se,Oe.play().catch(function(Je){console.error("Failed to play ".concat(xe.kind," audio:"),Je)}))}this.eventEmitter.emit(Kr,xe),xe.kind==="video"&&!this.local&&this.height&&this.width&&this.setViewPort(this.width,this.height)}catch(Je){console.error("Error in addStream:",Je)}}else console.warn("Attempted to add null/undefined stream")}},{key:"updateStream",value:function(xe){this.streams.set(xe.id,xe),this.eventEmitter.emit(Kr,xe)}},{key:"deleteStream",value:function(xe){var Se=this.streams.get(xe);if(Se!=null){this.streams.delete(xe);var $e={video:{collection:this.participantVideoElements,type:"video"},share:{collection:this.participantVideoElements,type:"share"},audio:{collection:this.participantAudioElements,type:"audio"},shareAudio:{collection:this.participantAudioElements,type:"shareAudio"}}[Se.kind];if($e){var ke=$e.collection.get($e.type);ke&&(ke.style.display="none")}return this.eventEmitter.emit(va,Se),Se}}},{key:"streamResumed",value:function(xe){this.streams.get(xe)}},{key:"streamPaused",value:function(xe){this.streams.get(xe)}},{key:"updateParticipantMediaState",value:function(xe,Se){xe=="audio"?this.micOn=Se:xe=="video"&&(this.webcamOn=Se),this.eventEmitter.emit(ra,{peerId:this.id,kind:xe,newStatus:Se})}},{key:"handleParticipantPause",value:function(xe){if(xe!=null&&xe.consumerId){var Se=this.streams.get(xe.consumerId);Se?Se.pausedBy="SUB_MANAGER":console.warn("Stream with consumerId ".concat(xe.consumerId," not found."))}this.eventEmitter.emit(jn,{kind:xe?.kind,reason:xe?.reason})}},{key:"handleParticipantResume",value:function(xe){if(xe!=null&&xe.consumerId){var Se=this.streams.get(xe.consumerId);Se?Se.pausedBy=void 0:console.warn("Stream with consumerId ".concat(xe.consumerId," not found."))}this.eventEmitter.emit(Ha,{kind:xe?.kind,reason:xe?.reason})}},{key:"handleE2EEStateChange",value:function(xe){xe==null||delete xe.peerId,this.eventEmitter.emit(ut,xe)}},{key:"videoQualityChanged",value:function(xe,Se){this.eventEmitter.emit(ua,{peerId:this.id,prevQuality:xe,currentQuality:Se})}},{key:"setQuality",value:function(xe){if(!this.local){if(typeof document<"u"&&this.resizeObserver){var Se=document.querySelector("#f-".concat(this.id));Se&&this.resizeObserver.unobserve(Se)}this.quality=xe,(0,He.A)(this.streams.entries()).forEach(function($e){var ke=$e[1];ke.kind==="video"&&Ut.roomClient.setConsumerQuality(ke.id,xe)})}}},{key:"setScreenShareQuality",value:function(xe){this.local||(this.screenShareQuality=xe,this.streams.forEach(function(Se){Se.kind==="share"&&Ut.roomClient.setConsumerScreenShareQuality(Se.id,xe)}))}},{key:"setViewPort",value:function(xe,Se){(0,He.A)(this.streams.entries()).forEach(function($e){var ke=$e[1];ke.kind==="video"&&Ut.roomClient.setViewPort(ke.producerOrConsumer,xe,Se)})}},{key:"pin",value:function(xe){switch(xe){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}Ut.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(xe){switch(xe){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}Ut.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(Ee=(0,y.A)(E().mark(function xe(Se){var $e,ke,Oe;return E().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return $e=Se.meetingId,ke=Se.payload,Oe=Se.token,Je.next=1,Ut.roomClient.switchPeerRoom({peerId:this.id,roomId:$e,payload:ke,token:Oe});case 1:case"end":return Je.stop()}},xe,this)})),function(xe){return Ee.apply(this,arguments)})},{key:"getVideoStats",value:(de=(0,y.A)(E().mark(function xe(){var Se,$e,ke,Oe,Je,We;return E().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(!this.local){Ae.next=2;break}return Ae.next=1,Ut.roomClient.getVideoRemoteStats();case 1:return Ae.abrupt("return",Ae.sent);case 2:Se=(0,He.A)(this.streams.entries()),$e=xr(Se),Ae.prev=3,$e.s();case 4:if((ke=$e.n()).done){Ae.next=7;break}if(Oe=(0,St.A)(ke.value,2),Je=Oe[0],Oe[1].kind!="video"){Ae.next=6;break}return Ae.next=5,Ut.roomClient.getConsumerRemoteStats(Je);case 5:return Ae.abrupt("return",Ae.sent);case 6:Ae.next=4;break;case 7:Ae.next=9;break;case 8:Ae.prev=8,We=Ae.catch(3),$e.e(We);case 9:return Ae.prev=9,$e.f(),Ae.finish(9);case 10:case"end":return Ae.stop()}},xe,this,[[3,8,9,10]])})),function(){return de.apply(this,arguments)})},{key:"getShareStats",value:(X=(0,y.A)(E().mark(function xe(){var Se,$e,ke,Oe,Je,We;return E().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(!this.local){Ae.next=2;break}return Ae.next=1,Ut.roomClient.getShareRemoteStats();case 1:return Ae.abrupt("return",Ae.sent);case 2:Se=(0,He.A)(this.streams.entries()),$e=xr(Se),Ae.prev=3,$e.s();case 4:if((ke=$e.n()).done){Ae.next=7;break}if(Oe=(0,St.A)(ke.value,2),Je=Oe[0],Oe[1].kind!="share"){Ae.next=6;break}return Ae.next=5,Ut.roomClient.getConsumerRemoteStats(Je);case 5:return Ae.abrupt("return",Ae.sent);case 6:Ae.next=4;break;case 7:Ae.next=9;break;case 8:Ae.prev=8,We=Ae.catch(3),$e.e(We);case 9:return Ae.prev=9,$e.f(),Ae.finish(9);case 10:case"end":return Ae.stop()}},xe,this,[[3,8,9,10]])})),function(){return X.apply(this,arguments)})},{key:"getShareAudioStats",value:(K=(0,y.A)(E().mark(function xe(){var Se,$e,ke,Oe,Je,We;return E().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(!this.local){Ae.next=2;break}return Ae.next=1,Ut.roomClient.getShareAudioRemoteStats();case 1:return Ae.abrupt("return",Ae.sent);case 2:Se=(0,He.A)(this.streams.entries()),$e=xr(Se),Ae.prev=3,$e.s();case 4:if((ke=$e.n()).done){Ae.next=7;break}if(Oe=(0,St.A)(ke.value,2),Je=Oe[0],Oe[1].kind!="shareAudio"){Ae.next=6;break}return Ae.next=5,Ut.roomClient.getConsumerRemoteStats(Je);case 5:return Ae.abrupt("return",Ae.sent);case 6:Ae.next=4;break;case 7:Ae.next=9;break;case 8:Ae.prev=8,We=Ae.catch(3),$e.e(We);case 9:return Ae.prev=9,$e.f(),Ae.finish(9);case 10:case"end":return Ae.stop()}},xe,this,[[3,8,9,10]])})),function(){return K.apply(this,arguments)})},{key:"getAudioStats",value:(G=(0,y.A)(E().mark(function xe(){var Se,$e,ke,Oe,Je,We;return E().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(this.micOn){Ae.next=1;break}return Ae.abrupt("return",[]);case 1:if(!this.local){Ae.next=3;break}return Ae.next=2,Ut.roomClient.getAudioRemoteStats();case 2:return Ae.abrupt("return",Ae.sent);case 3:Se=(0,He.A)(this.streams.entries()),$e=xr(Se),Ae.prev=4,$e.s();case 5:if((ke=$e.n()).done){Ae.next=8;break}if(Oe=(0,St.A)(ke.value,2),Je=Oe[0],Oe[1].kind!="audio"){Ae.next=7;break}return Ae.next=6,Ut.roomClient.getConsumerRemoteStats(Je);case 6:return Ae.abrupt("return",Ae.sent);case 7:Ae.next=5;break;case 8:Ae.next=10;break;case 9:Ae.prev=9,We=Ae.catch(4),$e.e(We);case 10:return Ae.prev=10,$e.f(),Ae.finish(10);case 11:case"end":return Ae.stop()}},xe,this,[[4,9,10,11]])})),function(){return G.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){Ut.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){Ut.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){Ut.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){Ut.roomClient.stopConsumingMicStreams(this.id)}},{key:"renderVideo",value:function(xe){for(var Se,$e=this,ke=xe.type,Oe=ke===void 0?"video":ke,Je=xe.maxQuality,We=Je===void 0?"auto":Je,Ae=xe.videostyle,tt=Ae===void 0?{}:Ae,ue=xe.containerStyle,pe=ue===void 0?{}:ue,Ie=0,qe=(0,He.A)(this.streams.values());Ie<qe.length;Ie++){var nt=qe[Ie];nt.kind==Oe&&(Se=new MediaStream).addTrack(nt.track)}if(this.participantVideoElements.get(Oe)){if(Se){var tn=this.participantVideoElements.get(Oe);tn&&(tn.srcObject=Se,tn.play().catch(function(xt){return console.error("videoElem.play() failed",xt)}))}return this.participantVideoElements.get(Oe)}try{var bt=document.createElement("div");bt.classList.add("video-container","participant-video-".concat(this.id)),bt.setAttribute("id","f-".concat(this.id).concat(Oe==="share"?"-share":"")),bt.style.setProperty("position","relative"),Object.assign(bt.style,pe);var Nt=document.createElement("video");if(Nt.setAttribute("id","v-".concat(this.id).concat(Oe==="share"?"-share":"")),Nt.setAttribute("playsinline",""),Nt.setAttribute("webkit-playsinline",""),Nt.setAttribute("x5-playsinline",""),Nt.playsinline=!0,Nt.muted=!0,Nt.autoplay=!0,Nt.onerror=function(xt){console.log(xt,"participant video error")},Object.assign(Nt.style,function(xt){for(var wn=1;wn<arguments.length;wn++){var cn=arguments[wn]!=null?arguments[wn]:{};wn%2?Ur(Object(cn),!0).forEach(function(vn){(0,v.A)(xt,vn,cn[vn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xt,Object.getOwnPropertyDescriptors(cn)):Ur(Object(cn)).forEach(function(vn){Object.defineProperty(xt,vn,Object.getOwnPropertyDescriptor(cn,vn))})}return xt}({width:"100%",height:"100%",objectFit:Oe==="share"?"contain":"cover"},tt)),Se&&(Nt.srcObject=Se,Nt.play().then(function(xt){console.log("videoElem.play() success",xt)}).catch(function(xt){return console.error("videoElem.play() failed",xt)})),bt.appendChild(Nt),this.participantVideoElements.set(Oe,Nt),this.videoVisible=!1,!this.local&&Oe==="video"){var Mn=(0,Sr.sg)(function(xt){if(xt.length!=0)if(xt[xt.length-1].intersectionRatio>0){$e.videoVisible=!0;for(var wn=0,cn=(0,He.A)($e.streams.values());wn<cn.length;wn++){var vn=cn[wn];vn.kind=="video"&&vn.pausedBy!=="SUB_MANAGER"&&vn.paused&&vn.resume()}}else{$e.videoVisible=!1;for(var or=0,Lr=(0,He.A)($e.streams.values());or<Lr.length;or++){var Tn=Lr[or];Tn.kind=="video"&&Tn.pause()}}},500);if(new IntersectionObserver(Mn,{root:null,rootMargin:"0px",threshold:0}).observe(bt),We=="auto"&&Oe==="video"){var ct=(0,Sr.sg)(function(xt){var wn=xt[0].contentRect,cn=wn.width,vn=wn.height;cn>0&&vn>0&&($e.height=vn,$e.width=cn,$e.setViewPort(cn,vn))},500),Fe=new ResizeObserver(ct);Fe.observe(bt),this.resizeObserver=Fe}}return Oe!=="video"||We==="auto"||this.local||this.setQuality(We),bt}catch(xt){console.log("Render video Exception",xt)}}},{key:"renderAudio",value:function(xe){var Se=xe.type,$e=Se===void 0?"audio":Se;if(this.local)return null;try{if(this.participantAudioElements.get($e)){var ke=this.participantAudioElements.get($e),Oe=this.getAudioStream($e);return Oe&&ke&&(ke.srcObject=Oe,ke.play().catch(function(Ae){return console.error("Failed to play existing audio:",Ae)})),ke}var Je=document.createElement("audio");Je.setAttribute("id","a-".concat(this.id,"-").concat($e)),Je.autoplay=!1,Je.playsInline=!0,Je.controls=!1,Je.style.display="none",Je.onerror=function(Ae){return console.log("Audio element error:",Ae)};var We=this.getAudioStream($e);return We&&(Je.srcObject=We,Je.play().catch(function(Ae){return console.error("Failed to play new audio:",Ae)})),this.participantAudioElements.set($e,Je),Je}catch(Ae){return console.error("Render audio exception:",Ae),null}}},{key:"getAudioStream",value:function(){var xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"audio",Se=(0,He.A)(this.streams.values()).find(function(ke){return ke.kind===xe});if(Se){var $e=new MediaStream;return $e.addTrack(Se.track),Se.resume(),$e}return null}},{key:"addProducer",value:function(xe){this.eventEmitter.emit(Ea,xe)}},{key:"removeProducer",value:function(xe){this.eventEmitter.emit(Qr,xe)}},{key:"addConsumer",value:function(xe){this.eventEmitter.emit(gr,xe)}},{key:"removeConsumer",value:function(xe){this.eventEmitter.emit(rt,xe)}},{key:"on",value:function(xe,Se){switch(xe){case Kr:case va:case ra:case ua:case jn:case Ha:case Ea:case Qr:case gr:case rt:case ut:this.eventEmitter.on(xe,Se);break;default:throw new Error("Invalid event type from participant onn")}}},{key:"off",value:function(xe,Se){switch(xe){case Kr:case va:case ra:case ua:case jn:case Ha:case Ea:case Qr:case gr:case rt:case ut:this.eventEmitter.off(xe,Se);break;default:throw new Error("Invalid event type from participant off")}}}]);var G,K,X,de,Ee}(),Pt=h(388),sn=h(3954),nn=h(5501),et={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"},On=h(2107);function Ln(){try{var G=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ln=function(){return!!G})()}function Jn(G,K,X){vr(G,K),K.set(G,X)}function vr(G,K){if(K.has(G))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qt(G,K){return G.get(Un(G,K))}function Rt(G,K,X){return G.set(Un(G,K),X),X}function Un(G,K,X){if(typeof G=="function"?G===K:G.has(K))return arguments.length<3?K:X;throw new TypeError("Private element is not present on this object")}var In="stream-enabled",Nn="stream-disabled",Fr="character-joined",Mr="character-left",Hr="media-status-changed",cr="video-quality-changed",Kn="character-state-changed",xa="character-message",ma="user-message",La="data",Va="error",Ci=new WeakMap,xs=new WeakMap,ii=new WeakMap,Ti=new WeakMap,Fs=new WeakMap,vi=new WeakMap,ea=new WeakMap,Hs=new WeakSet,Ks=function(G){function K(ke){var Oe,Je,We,Ae;return(0,u.A)(this,K),Je=this,We=K,Ae=[{id:ke.id,displayName:ke.displayName,mode:On.nI.SEND_AND_RECV,metaData:ke.metaData}],We=(0,sn.A)(We),function(tt,ue){vr(tt,ue),ue.add(tt)}(Oe=(0,Pt.A)(Je,Ln()?Reflect.construct(We,Ae||[],(0,sn.A)(Je).constructor):We.apply(Je,Ae)),Hs),Jn(Oe,Ci,void 0),Jn(Oe,xs,void 0),Jn(Oe,ii,void 0),Jn(Oe,Ti,void 0),Jn(Oe,Fs,void 0),Jn(Oe,vi,void 0),Jn(Oe,ea,void 0),(0,v.A)(Oe,"captureImage",(0,y.A)(E().mark(function tt(){var ue,pe=arguments;return E().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:throw(ue=pe.length>0&&pe[0]!==void 0?pe[0]:{}).height,ue.width,new Error("captureImage method is not supported on character");case 1:case"end":return Ie.stop()}},tt)}))),Rt(Fs,Oe,ke.interactionId||null),Oe.id=ke.id||null,Rt(Ci,Oe,ke.characterRole),Rt(xs,Oe,ke.characterMode),Rt(ii,Oe,ke.knowledgeBases||[]),Oe.displayName=ke.displayName,Rt(Ti,Oe,ke.language),Rt(vi,Oe,ke.state||et.CHARACTER_LISTENING),Rt(ea,Oe,ke.roomClient),Oe}return(0,nn.A)(K,G),(0,R.A)(K,[{key:"join",value:($e=(0,y.A)(E().mark(function ke(){var Oe;return E().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Je.next=1,Qt(ea,this).joinCharacter({interactionId:Qt(Fs,this),characterId:this.id,characterRole:Qt(Ci,this),displayName:this.displayName,characterMode:Qt(xs,this),knowledgeBases:Qt(ii,this),language:Qt(Ti,this),metaData:this.metaData});case 1:(Oe=Je.sent)&&(this.id=Oe.characterId,this.displayName=Oe.displayName,Rt(xs,this,Oe.characterMode),Rt(Ci,this,Oe.characterRole),Rt(Fs,this,Oe.interactionId),Rt(ii,this,Oe.knowledgeBases),Rt(Ti,this,Oe.language),Qt(ea,this)._eventEmitter.emit("INIT_CHARACTER",this));case 2:case"end":return Je.stop()}},ke,this)})),function(){return $e.apply(this,arguments)})},{key:"leave",value:(Se=(0,y.A)(E().mark(function ke(){return E().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=1,Qt(ea,this).removeCharacter();case 1:case"end":return Oe.stop()}},ke,this)})),function(){return Se.apply(this,arguments)})},{key:"remove",value:(xe=(0,y.A)(E().mark(function ke(){return E().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return Oe.stop()}},ke)})),function(){return xe.apply(this,arguments)})},{key:"sendMessage",value:(Ee=(0,y.A)(E().mark(function ke(Oe){return E().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Je.next=1,Qt(ea,this).sendCharacterMessage({interactionId:Qt(Fs,this),text:Oe});case 1:case"end":return Je.stop()}},ke,this)})),function(ke){return Ee.apply(this,arguments)})},{key:"handleCharacterStateChanged",value:function(ke){Object.keys(et).includes(ke.status)&&(Un(Hs,this,pn).call(this,ke.status),this.eventEmitter.emit(Kn,ke))}},{key:"handleCharacterMessage",value:function(ke){this.eventEmitter.emit(xa,ke)}},{key:"interrupt",value:(de=(0,y.A)(E().mark(function ke(){return E().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=1,Qt(ea,this).interruptCharacter({interactionId:Qt(Fs,this)});case 1:case"end":return Oe.stop()}},ke,this)})),function(){return de.apply(this,arguments)})},{key:"handleUserMessage",value:function(ke){this.eventEmitter.emit(ma,ke)}},{key:"handleCharacterData",value:function(ke){var Oe=ke.topic,Je=ke.data;this.eventEmitter.emit(La,Oe,Je)}},{key:"handleCharacterError",value:function(ke){var Oe=ke.data;this.eventEmitter.listenerCount(Va)>0&&this.eventEmitter.emit(Va,Oe)}},{key:"enableMic",value:function(){Qt(ea,this).enablePeerMic(this.id)}},{key:"disableMic",value:function(){Qt(ea,this).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Qt(ea,this).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Qt(ea,this).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(ke){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(X=(0,y.A)(E().mark(function ke(Oe){return E().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:throw Oe.meetingId,Oe.payload,Oe.token,new Error("switchTo method is not supported on character");case 1:case"end":return Je.stop()}},ke)})),function(ke){return X.apply(this,arguments)})},{key:"pin",value:function(ke){throw new Error("pin method is not supported on character")}},{key:"on",value:function(ke,Oe){switch(ke){case In:case Nn:case Fr:case Mr:case Hr:case cr:case Kn:case xa:case ma:case La:case Va:this.eventEmitter.on(ke,Oe);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(ke,Oe){switch(ke){case In:case Nn:case Fr:case Mr:case Hr:case cr:case Kn:case xa:case ma:case La:case Va:this.eventEmitter.off(ke,Oe);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return Qt(vi,this)}},{key:"knowledgeBases",get:function(){return Qt(ii,this)}},{key:"characterMode",get:function(){return Qt(xs,this)}},{key:"characterRole",get:function(){return Qt(Ci,this)}},{key:"interactionId",get:function(){return Qt(Fs,this)}},{key:"language",get:function(){return Qt(Ti,this)}}]);var X,de,Ee,xe,Se,$e}(Zt);function pn(G){Rt(vi,this,G)}function Xn(G,K,X){(function(de,Ee){if(Ee.has(de))throw new TypeError("Cannot initialize the same private elements twice on an object")})(G,K),K.set(G,X)}function Wn(G,K){return G.get(dr(G,K))}function dr(G,K,X){if(typeof G=="function"?G===K:G.has(K))return arguments.length<3?K:X;throw new TypeError("Private element is not present on this object")}var Dn=new WeakMap,Hn=function(){return(0,R.A)(function K(X,de){var Ee,xe,Se,$e=X.id,ke=X.displayName;(0,u.A)(this,K),Xn(this,Dn,void 0),this.id=$e,this.displayName=ke,xe=this,Se=de,(Ee=Dn).set(dr(Ee,xe),Se)},[{key:"switchTo",value:(G=(0,y.A)(E().mark(function K(X){var de,Ee,xe;return E().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return de=X.meetingId,Ee=X.payload,xe=X.token,Se.next=1,Ut.roomClient.connectionSwitchPeerRoom({roomId:de,connectionRoomId:Wn(Dn,this),payload:Ee,peerId:this.id,token:xe});case 1:case"end":return Se.stop()}},K,this)})),function(K){return G.apply(this,arguments)})}]);var G}(),Wr="participant-joined",Er="participant-left",Cr="chat-message",Fn=function(){return(0,R.A)(function K(X,de){var Ee=this;(0,u.A)(this,K),this.eventEmitter=new Tt.EventEmitter,this.id=X,this.participants=new Map,de.forEach(function(xe){Ee.participants.set(xe.id,new Hn(xe,Ee.id))})},[{key:"participantJoin",value:function(K){var X=new Hn(K,this.id);this.participants.set(K.id,X),this.eventEmitter.emit(Wr,X)}},{key:"participantLeft",value:function(K){this.participants.delete(K),this.eventEmitter.emit(Er,K)}},{key:"sendChatMessage",value:function(K){Ut.roomClient.connectionSendChatMessage({roomId:this.id,message:K})}},{key:"sendChatMessageEvent",value:function(K){var X=K.participantId,de=K.message;this.eventEmitter.emit(Cr,{participantId:X,message:de})}},{key:"end",value:(G=(0,y.A)(E().mark(function K(){return E().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=1,Ut.roomClient.connectionEndMeeting({roomId:this.id});case 1:case"end":return X.stop()}},K,this)})),function(){return G.apply(this,arguments)})},{key:"on",value:function(K,X){switch(K){case Wr:case Er:case Cr:this.eventEmitter.on(K,X);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(K,X){switch(K){case Wr:case Er:case Cr:this.eventEmitter.off(K,X);break;default:throw new Error("Invalid event type")}}}]);var G}(),Zr=function(){return(0,R.A)(function G(K){var X=K.roomId,de=K.peers,Ee=K.payload;(0,u.A)(this,G),this.id=X,this.payload=Ee,this.meeting=new Fn(X,de)},[{key:"close",value:function(){Ut.roomClient.closeConnection(this.id)}}])}();function Da(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function ya(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?Da(Object(X),!0).forEach(function(de){(0,v.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):Da(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}function Ca(G,K){if(K.has(G))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ga(G,K){return G.get(Ya(G,K))}function Ya(G,K,X){if(typeof G=="function"?G===K:G.has(K))return arguments.length<3?K:X;throw new TypeError("Private element is not present on this object")}var is="error",Aa="meeting-joined",us="meeting-left",Ps="participant-mode-changed",ro="participant-joined",yi="participant-left",Pi="speaker-changed",Ns="presenter-changed",Eo="main-participant-changed",mo="chat-message",Hi="entry-requested",ao="entry-responded",Ni="recording-state-changed",_i="recording-started",Di="recording-stopped",uc="livestream-state-changed",Tr="livestream-started",Vs="livestream-stopped",da="hls-state-changed",oi="hls-started",so="hls-stopped",tr="whiteboard-started",Qs="whiteboard-stopped",ci="video-state-changed",li="video-seeked",_r="mic-requested",qa="webcam-requested",Js="stream-enabled",Go="stream-disabled",ms="pin-state-changed",Vi="connection-open",go="connection-close",Xa="switch-meeting",Oc="meeting-state-changed",Xs="quality-limitation",Vr="paused-all-streams",ui="resumed-all-streams",gs="transcription-state-changed",qi="transcription-text",Yo="character-joined",Ko="character-left",io="media-relay-started",fn="media-relay-stopped",ye="media-relay-error",Ot="media-relay-request-response",rr="media-relay-request-received",ha=new WeakMap,es=new WeakSet,ws=function(){return(0,R.A)(function ue(pe,Ie,qe){var nt,tn,bt,Nt,Mn,ct=this;(0,u.A)(this,ue),Ca(nt=this,tn=es),tn.add(nt),function(Fe,xt,wn){Ca(Fe,xt),xt.set(Fe,wn)}(this,ha,void 0),(0,v.A)(this,"pubSub",{publish:(Mn=(0,y.A)(E().mark(function Fe(xt,wn,cn,vn){return E().wrap(function(or){for(;;)switch(or.prev=or.next){case 0:if(vn==null){or.next=1;break}if((0,N.A)(vn)=="object"){or.next=1;break}throw new Error('"payload" can only be object.');case 1:return or.next=2,ct.roomClient.pubsubPublish(xt,wn,cn,vn);case 2:case"end":return or.stop()}},Fe)})),function(Fe,xt,wn,cn){return Mn.apply(this,arguments)}),subscribe:(Nt=(0,y.A)(E().mark(function Fe(xt,wn){var cn;return E().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:if(!Ga(ha,ct).listeners(xt).includes(wn)){vn.next=1;break}return vn.abrupt("return");case 1:return vn.next=2,ct.roomClient.pubsubSubscribe(xt);case 2:return cn=vn.sent,Ga(ha,ct).on(xt,wn),vn.abrupt("return",cn);case 3:case"end":return vn.stop()}},Fe)})),function(Fe,xt){return Nt.apply(this,arguments)}),unsubscribe:(bt=(0,y.A)(E().mark(function Fe(xt,wn){return E().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:if(Ga(ha,ct).off(xt,wn),Ga(ha,ct).listeners(xt).length!=0){cn.next=1;break}return cn.next=1,ct.roomClient.pubsubUnsubscribe(xt);case 1:case"end":return cn.stop()}},Fe)})),function(Fe,xt){return bt.apply(this,arguments)})}),(0,v.A)(this,"uploadBase64File",function(){var Fe=(0,y.A)(E().mark(function xt(wn){var cn,vn,or,Lr,Tn,yn,Nr,br;return E().wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:if(cn=wn.base64Data,vn=wn.token,or=wn.fileName,ar.prev=1,cn&&vn&&or){ar.next=2;break}throw new Error("please provide base64Data, token and fileName");case 2:return Lr="https://".concat(ct.baseUrl,"/base64-upload?roomId=").concat(ct.id),Tn={fileName:or,base64Data:cn},ar.next=3,fetch(Lr,{method:"POST",body:JSON.stringify(Tn),headers:{"Content-Type":"application/json",Authorization:vn}});case 3:return yn=ar.sent,ar.next=4,yn.json();case 4:return Nr=ar.sent,ar.abrupt("return",Nr.url);case 5:ar.prev=5,br=ar.catch(1),console.error("Error while Uploading Base64 File::",br),ct.roomClient._videosdkLogs&&ct.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:br.message}});case 6:case"end":return ar.stop()}},xt,null,[[1,5]])}));return function(xt){return Fe.apply(this,arguments)}}()),(0,v.A)(this,"fetchBase64File",function(){var Fe=(0,y.A)(E().mark(function xt(wn){var cn,vn,or,Lr,Tn,yn;return E().wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:if(cn=wn.url,vn=wn.token,Nr.prev=1,cn&&vn){Nr.next=2;break}throw new Error("please provide url and token");case 2:return Nr.next=3,fetch(cn,{headers:{Authorization:vn}});case 3:return or=Nr.sent,Nr.next=4,or.arrayBuffer();case 4:return Lr=Nr.sent,Tn=window.btoa(new Uint8Array(Lr).reduce(function(br,ar){return br+String.fromCharCode(ar)},"")),Nr.abrupt("return",Tn);case 5:Nr.prev=5,yn=Nr.catch(1),console.error("Error while fetching Base64 File::",yn),ct.roomClient._videosdkLogs&&ct.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:yn.message}});case 6:case"end":return Nr.stop()}},xt,null,[[1,5]])}));return function(xt){return Fe.apply(this,arguments)}}()),this.id=pe,this.roomClient=qe,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=Ie,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new Tt.EventEmitter,function(Fe,xt,wn){Fe.set(Ya(Fe,xt),wn)}(ha,this,new Tt.EventEmitter),this.eventEmitter.setMaxListeners(9999),Ga(ha,this).setMaxListeners(9999),this.roomClient.on("ERROR",function(Fe){return ct.handleError(Fe)}),this.roomClient.on("ADD_PEER",function(Fe){return ct.handlePeerAdd(Fe)}),this.roomClient.on("REMOVE_PEER",function(Fe){return ct.handlePeerRemove(Fe)}),this.roomClient.on("STREAM_STATE_CHANGED",function(Fe){return ct.handleStreamState(Fe)}),this.roomClient.on("ADD_PRODUCER",function(Fe){return ct.handleProducerAdd(Fe)}),this.roomClient.on("UPDATE_PRODUCER",function(Fe){return ct.handleUpdateProducer(Fe)}),this.roomClient.on("REMOVE_PRODUCER",function(Fe){return ct.handleProducerRemove(Fe)}),this.roomClient.on("ADD_CONSUMER",function(Fe){return ct.handleConsumerAdd(Fe)}),this.roomClient.on("REMOVE_CONSUMER",function(Fe){return ct.handleConsumerRemove(Fe)}),this.roomClient.on("CONSUMER_RESUMED",function(Fe){return ct.handleConsumerResume(Fe)}),this.roomClient.on("CONSUMER_PAUSED",function(Fe){return ct.handleConsumerPause(Fe)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(Fe){return ct.handleParticipantMediaStateChanged(Fe)}),this.roomClient.on("CHAT_MESSAGE",function(Fe){return ct.handleNewChatMessage(Fe)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(Fe){return ct.handleSpeakerChange(Fe)}),this.roomClient.on("ENTRY_REQUESTED",function(Fe){return ct.handleEntryRequested(Fe)}),this.roomClient.on("ENTRY_RESPONDED",function(Fe){return ct.handleEntryResponded(Fe)}),this.roomClient.on("MEETING_JOINED",function(Fe){return ct.handleMeetingJoined(Fe)}),this.roomClient.on("MEETING_LEFT",function(Fe){return ct.handleMeetingLeft(Fe)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(Fe){ct.handleRecordingStateChanged(Fe)}),this.roomClient.on("RECORDING_STARTED",function(Fe){return ct.handleRecordingStarted(Fe)}),this.roomClient.on("RECORDING_STOPPED",function(Fe){return ct.handleRecordingStopped(Fe)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(Fe){ct.handleLivestreamStateChanged(Fe)}),this.roomClient.on("LIVESTREAM_STARTED",function(Fe){return ct.handleLivestreamStarted(Fe)}),this.roomClient.on("LIVESTREAM_STOPPED",function(Fe){return ct.handleLivestreamStopped(Fe)}),this.roomClient.on("HLS_STATE_CHANGED",function(Fe){ct.handleHlsStateChanged(Fe)}),this.roomClient.on("HLS_STARTED",function(Fe){ct.handleHlsStarted(Fe)}),this.roomClient.on("HLS_STOPPED",function(Fe){ct.handleHlsStopped(Fe)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(Fe){ct.handleTranscriptionStateChanged(Fe)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(Fe){ct.handleTranscriptionText(Fe)}),this.roomClient.on("SUB_MANAGER_RESUMED",function(Fe){ct.handleParticipantResumeBySubManager(Fe)}),this.roomClient.on("SUB_MANAGER_PAUSED",function(Fe){ct.handleParticipantPausedBySubManager(Fe)}),this.roomClient.on("WHITEBOARD_STARTED",function(Fe){return ct.handleWhiteboardStarted(Fe)}),this.roomClient.on("WHITEBOARD_STOPPED",function(Fe){return ct.handleWhiteboardStopped(Fe)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(Fe){return ct.handleVideoStateChanged(Fe)}),this.roomClient.on("VIDEO_SEEKED",function(Fe){return ct.handleVideoSeeked(Fe)}),this.roomClient.on("PIN_STATE_CHANGED",function(Fe){ct.handlePinStateChanged(Fe)}),this.roomClient.on("MIC_REQUESTED",function(Fe){return ct.handleMicRequested(Fe)}),this.roomClient.on("WEBCAM_REQUESTED",function(Fe){return ct.handleWebcamRequested(Fe)}),this.roomClient.on("CONNECTION_OPEN",function(Fe){return ct.handleConnectionOpen(Fe)}),this.roomClient.on("CONNECTION_CLOSE",function(Fe){return ct.handleConnectionClose(Fe)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(Fe){return ct.handleConnectionParticipantJoin(Fe)}),this.roomClient.on("SWITCH_ROOM",function(Fe){return ct.handleSwitchMeeting(Fe)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(Fe){return ct.handleConnectionChatMessage(Fe)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(Fe){ct.handleConnectionParticipantLeft(Fe)}),this.roomClient.on("PUBSUB_MESSAGE",function(Fe){return Ya(es,ct,Cl).call(ct,Fe)}),this.roomClient.on("PEER_MODE_CHANGED",function(Fe){return Ya(es,ct,Tl).call(ct,Fe)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(Fe){return ct.handleMeetingStateChanged(Fe)}),this.roomClient.on("QUALITY_LIMITATION_INTERNAL",function(Fe){return ct.handleQualityChanged(Fe)}),this.roomClient.on("ALL_CONSUMERS_PAUSED",function(Fe){return ct.handleConsumersPaused(Fe)}),this.roomClient.on("ALL_CONSUMERS_RESUMED",function(Fe){return ct.handleConsumersResumed(Fe)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(Fe){return ct.handleVideoQualityChanged(Fe)}),this.roomClient.on("ADD_CHARACTER",function(Fe){return ct.handleAddCharacter(Fe)}),this.roomClient.on("INIT_CHARACTER",function(Fe){return ct.handleInitCharacter(Fe)}),this.roomClient.on("REMOVE_CHARACTER",function(Fe){return ct.handleRemoveCharacter(Fe)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(Fe){return ct.handleCharacterStateChanged(Fe)}),this.roomClient.on("CHARACTER_MESSAGE",function(Fe){return ct.handleCharacterMessage(Fe)}),this.roomClient.on("USER_MESSAGE",function(Fe){return ct.handleUserMessage(Fe)}),this.roomClient.on("CHARACTER_DATA",function(Fe){return ct.handleOnCharacterData(Fe)}),this.roomClient.on("CHARACTER_ERROR",function(Fe){return ct.handleOnCharacterError(Fe)}),this.roomClient.on("E2EE_STATE_CHANGE",function(Fe){return ct.handleE2EEStateChange(Fe)}),this.roomClient.on("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING",function(){return ct.handleOnRemoveCurrentMeetingParticipant()}),this.roomClient.on("MEDIA_RELAY_STARTED",function(Fe){return ct.handleMediaRelayStart(Fe)}),this.roomClient.on("MEDIA_RELAY_STOPPED",function(Fe){return ct.handleMediaRelayStop(Fe)}),this.roomClient.on("MEDIA_RELAY_ERROR",function(Fe){return ct.handleMediaRelayError(Fe)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RESPONSE",function(Fe){return ct.handleMediaRelayRequestResponse(Fe)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RECEIVED",function(Fe){return ct.handleMediaRelayRequest(Fe)})},[{key:"isE2EEEnabled",get:function(){return this.roomClient.isE2EEEnabled}},{key:"handleError",value:function(ue){this.eventEmitter.listenerCount(is)>0&&this.eventEmitter.emit(is,ue)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(ue){this.roomClient.changeMode(ue)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(ue,pe){this.roomClient.respondEntry(ue,pe)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(ue)}},{key:"publishAudio",value:(tt=(0,y.A)(E().mark(function ue(){var pe,Ie=arguments;return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return pe=Ie.length>0&&Ie[0]!==void 0?Ie[0]:void 0,qe.next=1,this.roomClient.enableMic(pe);case 1:return qe.abrupt("return");case 2:case"end":return qe.stop()}},ue,this)})),function(){return tt.apply(this,arguments)})},{key:"unpublishAudio",value:(Ae=(0,y.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.disableMic();case 1:return pe.abrupt("return");case 2:case"end":return pe.stop()}},ue,this)})),function(){return Ae.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(ue)}},{key:"publishVideo",value:(We=(0,y.A)(E().mark(function ue(){var pe,Ie=arguments;return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return pe=Ie.length>0&&Ie[0]!==void 0?Ie[0]:void 0,this.roomClient.enableWebcam(pe),qe.abrupt("return");case 1:case"end":return qe.stop()}},ue,this)})),function(){return We.apply(this,arguments)})},{key:"unpublishVideo",value:(Je=(0,y.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return this.roomClient.disableWebcam(),pe.abrupt("return");case 1:case"end":return pe.stop()}},ue,this)})),function(){return Je.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(ue)}},{key:"pubblishScreenShare",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(ue)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(ue){this.roomClient.sendChatMessage(ue);var pe={text:ue,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(pe)}},{key:"pauseAllStreams",value:function(ue){this.roomClient.pauseAllConsumers(ue)}},{key:"resumeAllStreams",value:function(ue){this.roomClient.resumeAllConsumers(ue)}},{key:"startRecording",value:function(ue,pe,Ie,qe){this.roomClient.startRecording(ue,pe,Ie,qe)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(ue){this.roomClient.startTranscription(ue)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startLivestream",value:function(ue,pe){this.roomClient.startLivestream(ue,pe)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(Oe=(0,y.A)(E().mark(function ue(pe,Ie){return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=1,this.roomClient.startHls(pe,Ie);case 1:case"end":return qe.stop()}},ue,this)})),function(ue,pe){return Oe.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(ue){if(!ue.interactionId&&!ue.id)throw new Error("InteractionId or id is required");return new Ks(ya(ya({},ue),{},{roomClient:this.roomClient}))}},{key:"getMics",value:(ke=(0,y.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.getMics();case 1:return pe.abrupt("return",pe.sent);case 2:case"end":return pe.stop()}},ue,this)})),function(){return ke.apply(this,arguments)})},{key:"getWebcams",value:($e=(0,y.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.getWebcams();case 1:return pe.abrupt("return",pe.sent);case 2:case"end":return pe.stop()}},ue,this)})),function(){return $e.apply(this,arguments)})},{key:"changeMic",value:function(ue){this.roomClient.changeMic(ue)}},{key:"changeWebcam",value:function(ue){this.roomClient.changeWebcam(ue)}},{key:"replaceWebcamStream",value:function(ue){this.roomClient.replaceWebcamStream(ue)}},{key:"setWebcamQuality",value:function(ue){this.roomClient.setWebcamQuality(ue)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(ue){var pe=ue.link;this.roomClient.startVideo({link:pe})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(ue){var pe=ue.currentTime;this.roomClient.pauseVideo(pe)}},{key:"seekVideo",value:function(ue){var pe=ue.currentTime;this.roomClient.seekVideo(pe)}},{key:"handlePeerAdd",value:function(ue){var pe=ue.peer,Ie=new Zt(pe);this.participants.set(Ie.id,Ie),this.eventEmitter.emit(ro,Ie),this.participants.size===1&&this.updateMainParticipant(Ie.id)}},{key:"handleStreamState",value:function(ue){var pe=ue.state,Ie=ue.peerId,qe=ue.streamId,nt=this.participants.get(Ie);nt?.handleStreamStateChanged({state:pe,peerId:Ie,streamId:qe})}},{key:"handlePeerRemove",value:function(ue){var pe=ue.peerId,Ie=this.participants.get(pe);Ie!=null&&(this.participants.delete(pe),this.eventEmitter.emit(yi,Ie),this.activePresenterId===Ie.id&&(this.activePresenterId=null,this.eventEmitter.emit(Ns,this.activePresenterId)),this.mainParticipantId===Ie.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(ue){var pe=ue.producer,Ie={id:pe.id,rtpSender:pe.rtpSender};this.localParticipant.addProducer(Ie);var qe=new Ar(pe);this.localParticipant.addStream(qe),qe.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(Ns,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(ue){var pe=ue.producer,Ie=new Ar(pe);this.localParticipant.updateStream(Ie)}},{key:"handleProducerRemove",value:function(ue){var pe=ue.producerId;this.localParticipant.removeProducer(pe);var Ie=this.localParticipant.deleteStream(pe);if(Ie&&Ie.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(Ns,this.activePresenterId);var qe=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||qe||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(ue){var pe=ue.consumer,Ie=ue.peerId,qe=this.participants.get(Ie)||this.characters.get(Ie);if(qe){var nt={id:pe.id,rtpReceiver:pe.rtpReceiver};qe.addConsumer(nt);var tn=new Ar(pe);qe.addStream(tn),this.eventEmitter.emit(Js,tn),tn.kind==="share"&&(this.activePresenterId=qe.id,this.eventEmitter.emit(Ns,this.activePresenterId),this.updateMainParticipant(qe.id))}}},{key:"handleConsumerResume",value:function(ue){var pe=ue.consumerId,Ie=ue.peerId,qe=this.participants.get(Ie);qe&&qe.streamResumed(pe)}},{key:"handleConsumerPause",value:function(ue){var pe=ue.consumerId,Ie=ue.peerId,qe=this.participants.get(Ie);qe&&qe.streamPaused(pe)}},{key:"handleConsumerRemove",value:function(ue){var pe=ue.consumerId,Ie=ue.peerId,qe=this.participants.get(Ie)||this.characters.get(Ie);if(qe!=null&&qe){qe.removeConsumer(pe);var nt=qe.deleteStream(pe);if(this.eventEmitter.emit(Go,nt),nt&&nt.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(Ns,this.activePresenterId);var tn=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||tn||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(ue){var pe=ue.peerId,Ie=ue.kind,qe=ue.newState,nt=this.participants.get(pe)||this.characters.get(pe);this.localParticipant.id==pe&&(nt=this.localParticipant),nt&&nt&&(Ie=="audio"?nt.micOn=qe:Ie=="video"&&(nt.webcamOn=qe),nt.updateParticipantMediaState(Ie,qe))}},{key:"handleParticipantPausedBySubManager",value:function(ue){var pe=this.participants.get(ue.peerId);pe&&pe&&pe.handleParticipantPause(ue)}},{key:"handleParticipantResumeBySubManager",value:function(ue){var pe=this.participants.get(ue.peerId);pe&&pe&&pe.handleParticipantResume(ue)}},{key:"handleSpeakerChange",value:function(ue){var pe=ue.peerId;this.activeSpeakerId!==pe&&(this.activeSpeakerId=pe,this.eventEmitter.emit(Pi,pe),pe&&pe!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&pe!==this.mainParticipantId&&this.updateMainParticipant(pe))}},{key:"handleNewChatMessage",value:function(ue){var pe=ue.senderId,Ie={senderId:pe,text:ue.text,timestamp:ue.timestamp};if(this.localParticipant.id===pe)Ie.senderName=this.localParticipant.displayName;else{var qe=this.participants.get(pe);qe&&(Ie.senderName=qe.displayName)}this.messages.push(Ie),this.eventEmitter.emit(mo,Ie)}},{key:"updateMainParticipant",value:function(ue){this.mainParticipantId=ue;var pe=null;pe=ue===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(Eo,pe)}},{key:"handleEntryRequested",value:function(ue){var pe=this,Ie=ue.id,qe=ue.name;this.eventEmitter.emit(Hi,{participantId:Ie,name:qe,allow:function(){pe.roomClient.respondEntry(Ie,"allowed")},deny:function(){pe.roomClient.respondEntry(Ie,"denied")}})}},{key:"handleEntryResponded",value:function(ue){var pe=ue.id,Ie=ue.decision;this.eventEmitter.emit(ao,pe,Ie)}},{key:"handleMeetingJoined",value:function(ue){var pe=ue.peers,Ie=ue.poll,qe=ue.messages,nt=ue.baseUrl,tn=ue.switchRoomId;typeof tn=="string"&&(this.id=tn),this.baseUrl=nt,qe.length>0&&(this.messages=qe),this.eventEmitter.emit(Aa,{switchRoomId:tn||null,peers:pe,poll:Ie,messages:qe})}},{key:"handleMeetingLeft",value:function(ue){this.eventEmitter.emit(us,ue)}},{key:"handleRecordingStateChanged",value:function(ue){this.recordingState=ue.status,this.eventEmitter.emit(Ni,ue)}},{key:"handleLivestreamStateChanged",value:function(ue){this.livestreamState=ue.status,this.eventEmitter.emit(uc,ue)}},{key:"handleHlsStateChanged",value:function(ue){this.hlsState=ue.status,ue.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:ue.downstreamUrl,playbackHlsUrl:ue.playbackHlsUrl,livestreamUrl:ue.livestreamUrl}:ue.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(da,ue)}},{key:"handleTranscriptionStateChanged",value:function(ue){this.transcriptionState=ue.status,this.eventEmitter.emit(gs,ue)}},{key:"handleTranscriptionText",value:function(ue){this.eventEmitter.emit(qi,ue)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(_i)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(Di)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(Tr)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(Vs)}},{key:"handleHlsStarted",value:function(ue){this.eventEmitter.emit(oi,ue)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(so)}},{key:"handleWhiteboardStarted",value:function(ue){this.eventEmitter.emit(tr,ue)}},{key:"handleWhiteboardStopped",value:function(ue){(function(pe){if(pe==null)throw new TypeError("Cannot destructure "+pe)})(ue),this.eventEmitter.emit(Qs)}},{key:"handleAddCharacter",value:function(ue){var pe,Ie=ue.id,qe=(pe=this.characters.get(Ie))!==null&&pe!==void 0?pe:new Ks(ya(ya({},ue),{},{state:et.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(Ie,qe),this.eventEmitter.emit(Yo,qe),qe.eventEmitter.emit(Yo)}},{key:"handleInitCharacter",value:function(ue){this.characters.set(ue.id,ue)}},{key:"handleRemoveCharacter",value:function(ue){var pe=ue.id;if(this.characters.has(pe)){var Ie=this.characters.get(pe);this.eventEmitter.emit(Ko,Ie),Ie.eventEmitter.emit(Ko),this.characters.delete(pe)}}},{key:"handleCharacterStateChanged",value:function(ue){var pe=ue.id;this.characters.has(pe)&&this.characters.get(pe).handleCharacterStateChanged(ue)}},{key:"handleCharacterMessage",value:function(ue){var pe=ue.id;this.characters.has(pe)&&this.characters.get(pe).handleCharacterMessage(ue)}},{key:"handleUserMessage",value:function(ue){var pe=ue.id;this.characters.has(pe)&&this.characters.get(pe).handleUserMessage(ue)}},{key:"handleOnCharacterData",value:function(ue){var pe=ue.id;this.characters.has(pe)&&this.characters.get(pe).handleCharacterData(ue)}},{key:"handleOnCharacterError",value:function(ue){var pe=ue.id;this.characters.has(pe)&&this.characters.get(pe).handleCharacterError(ue)}},{key:"handleOnRemoveCurrentMeetingParticipant",value:function(){var ue=this;(0,He.A)(this.participants.keys()).forEach(function(pe){pe!==ue.localParticipant.id&&ue.handlePeerRemove({peerId:pe})})}},{key:"handleVideoStateChanged",value:function(ue){this.eventEmitter.emit(ci,ue)}},{key:"handleVideoSeeked",value:function(ue){var pe=ue.currentTime;this.eventEmitter.emit(li,{currentTime:pe})}},{key:"handlePinStateChanged",value:function(ue){var pe=ue.peerId,Ie=ue.state,qe=ue.pinnedBy;this.eventEmitter.emit(ms,{participantId:pe,state:Ie,pinnedBy:qe})}},{key:"handleMeetingStateChanged",value:function(ue){var pe=ue.state;this.eventEmitter.emit(Oc,{state:pe})}},{key:"handleQualityChanged",value:function(ue){var pe=ue.type,Ie=ue.state,qe=ue.timestamp;this.eventEmitter.emit(Xs,{type:pe,state:Ie,timestamp:qe})}},{key:"handleConsumersPaused",value:function(ue){var pe=ue.kind;this.eventEmitter.emit(Vr,{kind:pe})}},{key:"handleConsumersResumed",value:function(ue){var pe=ue.kind;this.eventEmitter.emit(ui,{kind:pe})}},{key:"handleVideoQualityChanged",value:function(ue){var pe=ue.peerId,Ie=ue.prevQuality,qe=ue.currentQuality,nt=this.participants.get(pe)||this.characters.get(pe);nt&&nt&&nt.videoQualityChanged(Ie,qe)}},{key:"handleMicRequested",value:function(ue){var pe=this,Ie=ue.peerId;this.eventEmitter.emit(_r,{participantId:Ie,accept:function(){return pe.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(ue){var pe=this,Ie=ue.peerId;this.eventEmitter.emit(qa,{participantId:Ie,accept:function(){return pe.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(ue){var pe=ue.roomId,Ie=ue.peer,qe=this.connections.get(pe);qe?.meeting.participantJoin(Ie)}},{key:"handleConnectionParticipantLeft",value:function(ue){var pe=ue.roomId,Ie=ue.peerId,qe=this.connections.get(pe);qe?.meeting.participantLeft(Ie)}},{key:"handleConnectionOpen",value:function(ue){var pe=ue.peers,Ie=ue.roomId,qe=ue.payload,nt=new Zr({roomId:Ie,peers:pe,payload:qe});this.connections.set(nt.id,nt),this.eventEmitter.emit(Vi,nt)}},{key:"handleConnectionClose",value:function(ue){var pe=ue.roomId;this.connections.get(pe)!=null&&(this.connections.delete(pe),this.eventEmitter.emit(go,pe))}},{key:"handleMediaRelayError",value:function(ue){var pe=ue.meetingId,Ie=ue.error;this.eventEmitter.emit(ye,{meetingId:pe,error:Ie})}},{key:"handleMediaRelayRequest",value:function(ue){var pe=this,Ie=ue.peerId,qe=ue.meetingId,nt=ue.displayName;this.eventEmitter.emit(rr,{participantId:Ie,meetingId:qe,displayName:nt,accept:function(){return pe.roomClient.handleRelayRequestResponse({decision:"allowed",meetingId:qe,peerId:Ie})},reject:function(){return pe.roomClient.handleRelayRequestResponse({decision:"denied",meetingId:qe,peerId:Ie})}})}},{key:"handleMediaRelayRequestResponse",value:function(ue){var pe=ue.decision,Ie=ue.decidedBy,qe=ue.meetingId;this.eventEmitter.emit(Ot,{decision:pe,decidedBy:Ie,meetingId:qe})}},{key:"handleMediaRelayStart",value:function(ue){var pe=ue.meetingId;this.eventEmitter.emit(io,{meetingId:pe})}},{key:"handleMediaRelayStop",value:function(ue){var pe=ue.meetingId,Ie=ue.reason;this.eventEmitter.emit(fn,{meetingId:pe,reason:Ie})}},{key:"requestMediaRelay",value:(Se=(0,y.A)(E().mark(function ue(pe){var Ie,qe,nt;return E().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(Ie=pe.destinationMeetingId,qe=pe.token,nt=pe.kinds,Ie){tn.next=1;break}throw new Error("Parameter destinationMeetingId is required when calling requestMediaRelay.");case 1:return tn.next=2,this.roomClient.requestMediaRelay(Ie,qe,nt);case 2:case"end":return tn.stop()}},ue,this)})),function(ue){return Se.apply(this,arguments)})},{key:"stopMediaRelay",value:(xe=(0,y.A)(E().mark(function ue(pe){return E().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(pe){Ie.next=1;break}throw new Error("Parameter destinationMeetingId is required when calling stopMediaRelay.");case 1:return Ie.next=2,this.roomClient.stopMediaRelay(pe);case 2:case"end":return Ie.stop()}},ue,this)})),function(ue){return xe.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(Ee=(0,y.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.enableAdaptiveSubscription();case 1:case"end":return pe.stop()}},ue,this)})),function(){return Ee.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(de=(0,y.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.disableAdaptiveSubscription();case 1:case"end":return pe.stop()}},ue,this)})),function(){return de.apply(this,arguments)})},{key:"enableE2EE",value:(X=(0,y.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.toggleE2EEEnabled(!0);case 1:case"end":return pe.stop()}},ue,this)})),function(){return X.apply(this,arguments)})},{key:"disableE2EE",value:(K=(0,y.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.toggleE2EEEnabled(!1);case 1:case"end":return pe.stop()}},ue,this)})),function(){return K.apply(this,arguments)})},{key:"handleSwitchMeeting",value:function(ue){var pe=ue.roomId,Ie=ue.token,qe=ue.payload,nt=ue.peerId,tn=ue.connectionPeerId,bt=ue.connectionRoomId,Nt=nt?{meetingId:pe,payload:qe,token:Ie,participantId:nt}:{meetingId:pe,payload:qe,token:Ie,connectionParticipantId:tn,connectionMeetingId:bt};this.eventEmitter.emit(Xa,Nt)}},{key:"handleConnectionChatMessage",value:function(ue){var pe=ue.roomId,Ie=ue.peerId,qe=ue.message,nt=this.connections.get(pe);nt?.meeting.sendChatMessageEvent({participantId:Ie,message:qe})}},{key:"handleE2EEStateChange",value:function(ue){var pe=ue.peerId,Ie=this.localParticipant.id==pe?this.localParticipant:this.participants.get(pe)||this.characters.get(pe);Ie&&Ie&&Ie.handleE2EEStateChange(ue)}},{key:"connectTo",value:(G=(0,y.A)(E().mark(function ue(pe){var Ie,qe;return E().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return Ie=pe.meetingId,qe=pe.payload,nt.next=1,this.roomClient.openConnection({roomId:Ie,payload:qe});case 1:case"end":return nt.stop()}},ue,this)})),function(ue){return G.apply(this,arguments)})},{key:"switchTo",value:function(ue){var pe=ue.meetingId,Ie=ue.token;if(!pe||typeof pe!="string"||pe.trim()==="")throw new Error("Invalid meetingId: must be a non-empty string");this.roomClient.switchTo({meetingId:pe,token:Ie,participantId:this.localParticipant.id})}},{key:"selectedCameraDevice",get:function(){var ue;return(ue=this.roomClient._webcam)===null||ue===void 0?void 0:ue.device}},{key:"selectedMicrophoneDevice",get:function(){var ue;return(ue=this.roomClient._mic)===null||ue===void 0?void 0:ue.device}},{key:"on",value:function(ue,pe){switch(ue){case ro:case yi:case Pi:case Ns:case Eo:case mo:case Hi:case ao:case Ni:case _i:case Di:case uc:case Tr:case Vs:case oi:case so:case da:case gs:case qi:case Js:case Go:case tr:case Qs:case Yo:case Ko:case Aa:case us:case ci:case li:case _r:case qa:case ms:case Vi:case go:case Xa:case Oc:case Ps:case Vr:case ui:case io:case fn:case ye:case rr:case Ot:case is:case Xs:this.eventEmitter.on(ue,pe);break;default:throw new Error("Invalid event type "+ue)}}},{key:"off",value:function(ue,pe){switch(ue){case ro:case yi:case Pi:case Ns:case Eo:case mo:case Hi:case ao:case Ni:case _i:case Di:case uc:case Tr:case Vs:case da:case oi:case so:case gs:case qi:case Js:case Go:case tr:case Qs:case Yo:case Ko:case Aa:case us:case ci:case li:case _r:case qa:case ms:case Vi:case go:case Xa:case Oc:case is:case io:case fn:case ye:case rr:case Ot:case Ps:case Vr:case ui:case Xs:this.eventEmitter.off(ue,pe);break;default:throw new Error("Invalid event type.")}}}]);var G,K,X,de,Ee,xe,Se,$e,ke,Oe,Je,We,Ae,tt}();function Cl(G){var K=G.topic,X=G.message,de=G.senderId,Ee=G.timestamp,xe=G.senderName,Se=G.id,$e=G.payload;K&&X&&Ga(ha,this).emit(K,{message:X,senderId:de,timestamp:Ee,topic:K,senderName:xe,id:Se,payload:$e})}function Tl(G){var K=G.peerId,X=G.mode;K===this.localParticipant.id?this.localParticipant.mode=X:this.participants.get(K).mode=X,this.activePresenterId!==this.localParticipant.id||(0,On.kR)(X)||(this.activePresenterId=null,this.eventEmitter.emit(Ns,this.activePresenterId)),this.eventEmitter.emit(Ps,{participantId:K,mode:X})}var Ir=h(7080),Pl=h(5071),dc=h(4973),ko=h(9027);function vo(G,K,X){return K=(0,sn.A)(K),(0,Pt.A)(G,$i()?Reflect.construct(K,X||[],(0,sn.A)(G).constructor):K.apply(G,X))}function $i(){try{var G=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($i=function(){return!!G})()}var yo=function(G){function K(X,de,Ee,xe){return(0,u.A)(this,K),vo(this,K,[X,de,Ee,xe])}return(0,nn.A)(K,G),(0,R.A)(K)}((0,R.A)(function G(K,X,de,Ee){(0,u.A)(this,G),this.deviceId=K,this.groupId=X,this.kind=de,this.label=Ee})),il=function(G){function K(X,de,Ee,xe){return(0,u.A)(this,K),vo(this,K,[X,de,Ee,xe])}return(0,nn.A)(K,G),(0,R.A)(K)}(yo),Nl=function(G){function K(X,de,Ee,xe){return(0,u.A)(this,K),vo(this,K,[X,de,Ee,xe])}return(0,nn.A)(K,G),(0,R.A)(K)}(yo),Mc=function(G){function K(X,de,Ee,xe){return(0,u.A)(this,K),vo(this,K,[X,de,Ee,xe])}return(0,nn.A)(K,G),(0,R.A)(K)}(yo),qs={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},cu=(h(328),h(7654));function jc(G,K){return G==null||K==null?NaN:G<K?-1:G>K?1:G>=K?0:NaN}function Lc(G,K){return G==null||K==null?NaN:K<G?-1:K>G?1:K>=G?0:NaN}function Co(G){let K,X,de;function Ee(xe,Se,$e=0,ke=xe.length){if($e<ke){if(K(Se,Se)!==0)return ke;do{const Oe=$e+ke>>>1;X(xe[Oe],Se)<0?$e=Oe+1:ke=Oe}while($e<ke)}return $e}return G.length!==2?(K=jc,X=(xe,Se)=>jc(G(xe),Se),de=(xe,Se)=>G(xe)-Se):(K=G===jc||G===Lc?G:lu,X=G,de=G),{left:Ee,center:function(xe,Se,$e=0,ke=xe.length){const Oe=Ee(xe,Se,$e,ke-1);return Oe>$e&&de(xe[Oe-1],Se)>-de(xe[Oe],Se)?Oe-1:Oe},right:function(xe,Se,$e=0,ke=xe.length){if($e<ke){if(K(Se,Se)!==0)return ke;do{const Oe=$e+ke>>>1;X(xe[Oe],Se)<=0?$e=Oe+1:ke=Oe}while($e<ke)}return $e}}}function lu(){return 0}const Oa=Co(jc),$a=Oa.right,Dl=(Co(function(G){return G===null?NaN:+G}).center,$a);function Al(G,K){switch(arguments.length){case 0:break;case 1:this.range(G);break;default:this.range(K).domain(G)}return this}function vt(){var G,K=[.5],X=[0,1],de=1;function Ee(xe){return xe!=null&&xe<=xe?X[Dl(K,xe,0,de)]:G}return Ee.domain=function(xe){return arguments.length?(K=Array.from(xe),de=Math.min(K.length,X.length-1),Ee):K.slice()},Ee.range=function(xe){return arguments.length?(X=Array.from(xe),de=Math.min(K.length,X.length-1),Ee):X.slice()},Ee.invertExtent=function(xe){var Se=X.indexOf(xe);return[K[Se-1],K[Se]]},Ee.unknown=function(xe){return arguments.length?(G=xe,Ee):G},Ee.copy=function(){return vt().domain(K).range(X).unknown(G)},Al.apply(Ee,arguments)}function To(G,K){(K==null||K>G.length)&&(K=G.length);for(var X=0,de=Array(K);X<K;X++)de[X]=G[X];return de}function lr(G,K,X){if(typeof G=="function"?G===K:G.has(K))return arguments.length<3?K:X;throw new TypeError("Private element is not present on this object")}function Ic(G,K,X){return K=J(K),function(de,Ee){if(Ee&&(typeof Ee=="object"||typeof Ee=="function"))return Ee;if(Ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(xe){if(xe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe}(de)}(G,je()?Reflect.construct(K,X||[],J(G).constructor):K.apply(G,X))}function Po(G,K){if(K.has(G))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ds(G,K){if(!(G instanceof K))throw new TypeError("Cannot call a class as a function")}function fe(G,K){return G.get(lr(G,K))}function Bn(G,K,X){Po(G,K),K.set(G,X)}function Vn(G,K,X){return G.set(lr(G,K),X),X}function hc(G,K){Po(G,K),K.add(G)}function Ma(G,K,X){return K&&function(de,Ee){for(var xe=0;xe<Ee.length;xe++){var Se=Ee[xe];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(de,Xr(Se.key),Se)}}(G.prototype,K),Object.defineProperty(G,"prototype",{writable:!1}),G}function ne(G,K,X){return(K=Xr(K))in G?Object.defineProperty(G,K,{value:X,enumerable:!0,configurable:!0,writable:!0}):G[K]=X,G}function Y(){return Y=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(G,K,X){var de=Gn(G,K);if(de){var Ee=Object.getOwnPropertyDescriptor(de,K);return Ee.get?Ee.get.call(arguments.length<3?G:X):Ee.value}},Y.apply(null,arguments)}function J(G){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(K){return K.__proto__||Object.getPrototypeOf(K)},J(G)}function ce(G,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(K&&K.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),K&&zn(G,K)}function je(){try{var G=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(je=function(){return!!G})()}function at(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function Ct(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?at(Object(X),!0).forEach(function(de){ne(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):at(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}function It(G,K){if(G==null)return{};var X,de,Ee=function(Se,$e){if(Se==null)return{};var ke={};for(var Oe in Se)if({}.hasOwnProperty.call(Se,Oe)){if($e.indexOf(Oe)!==-1)continue;ke[Oe]=Se[Oe]}return ke}(G,K);if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(G);for(de=0;de<xe.length;de++)X=xe[de],K.indexOf(X)===-1&&{}.propertyIsEnumerable.call(G,X)&&(Ee[X]=G[X])}return Ee}function wt(G,K,X,de){return wt=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(Ee,xe,Se,$e){var ke,Oe=Gn(Ee,xe);if(Oe){if((ke=Object.getOwnPropertyDescriptor(Oe,xe)).set)return ke.set.call($e,Se),!0;if(!ke.writable)return!1}if(ke=Object.getOwnPropertyDescriptor($e,xe)){if(!ke.writable)return!1;ke.value=Se,Object.defineProperty($e,xe,ke)}else ne($e,xe,Se);return!0},wt(G,K,X,de)}function zn(G,K){return zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,de){return X.__proto__=de,X},zn(G,K)}function Yt(G,K){return function(X){if(Array.isArray(X))return X}(G)||function(X,de){var Ee=X==null?null:typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(Ee!=null){var xe,Se,$e,ke,Oe=[],Je=!0,We=!1;try{if($e=(Ee=Ee.call(X)).next,de===0){if(Object(Ee)!==Ee)return;Je=!1}else for(;!(Je=(xe=$e.call(Ee)).done)&&(Oe.push(xe.value),Oe.length!==de);Je=!0);}catch(Ae){We=!0,Se=Ae}finally{try{if(!Je&&Ee.return!=null&&(ke=Ee.return(),Object(ke)!==ke))return}finally{if(We)throw Se}}return Oe}}(G,K)||pa(G,K)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gn(G,K){for(;!{}.hasOwnProperty.call(G,K)&&(G=J(G))!==null;);return G}function kn(G,K,X,de,Ee,xe){return function(Se,$e,ke,Oe,Je){if(!wt(Se,$e,ke,Oe||Se)&&Je)throw new TypeError("failed to set property");return ke}(J(G.prototype),K,X,de,Ee)}function sa(G){return function(K){if(Array.isArray(K))return To(K)}(G)||function(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}(G)||pa(G)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xr(G){var K=function(X,de){if(typeof X!="object"||!X)return X;var Ee=X[Symbol.toPrimitive];if(Ee!==void 0){var xe=Ee.call(X,de);if(typeof xe!="object")return xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(X)}(G,"string");return typeof K=="symbol"?K:K+""}function pa(G,K){if(G){if(typeof G=="string")return To(G,K);var X={}.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?To(G,K):void 0}}var ia="https://speed.cloudflare.com",Wi={autoStart:!0,downloadApiUrl:"".concat(ia,"/__down"),uploadApiUrl:"".concat(ia,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(ia,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(ia,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},Zi={aimMeasurementScoring:{packetLoss:vt([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:vt([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:vt([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:vt([10,20,100,500],[10,5,0,-10,-20]),download:vt([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:vt([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},bi=function(G){var K=G.headers.get("server-timing");if(K){var X=K.match(/dur=([0-9.]+)/);if(X)return+X[1]}},_o=function(G){return G.responseStart-G.requestStart},bo=function(G){return G.responseEnd-G.responseStart},No=function(G){return G.ping+G.payloadDownloadTime},ei=function(G){return G.ttfb},di=function(G,K){var X=G.duration,de=G.transferSize,Ee=X/1e3;return Ee?8*(de||1.005*+K)/Ee:void 0},Do=function(G,K){var X=G.duration/1e3;return X?8*K*1.005/X:void 0},Bc=cu(function(G){return"0".repeat(G)}),pc=new WeakMap,hi=new WeakMap,oo=new WeakMap,Qo=new WeakMap,zc=new WeakMap,Gi=new WeakMap,fc=new WeakMap,pi=new WeakMap,Yi=new WeakMap,ol=new WeakMap,Jo=new WeakMap,mc=new WeakMap,Ao=new WeakMap,Xo=new WeakMap,$s=new WeakMap,As=new WeakMap,Ai=new WeakMap,vs=new WeakMap,Os=new WeakMap,xo=new WeakMap,fi=new WeakMap,Oo=new WeakMap,Ms=new WeakSet,wo=function(){return Ma(function G(K){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=X.downloadApiUrl,Ee=X.uploadApiUrl,xe=X.throttleMs,Se=xe===void 0?0:xe,$e=X.estimatedServerTime,ke=$e===void 0?0:$e;if(Ds(this,G),hc(this,Ms),Bn(this,pc,{}),Bn(this,hi,{}),ne(this,"finishRequestDuration",1e3),ne(this,"getServerTime",bi),Bn(this,oo,function(Oe){return Oe}),Bn(this,Qo,function(){}),Bn(this,zc,function(){}),Bn(this,Gi,function(){}),Bn(this,fc,function(){}),Bn(this,pi,function(){}),Bn(this,Yi,void 0),Bn(this,ol,void 0),Bn(this,Jo,void 0),Bn(this,mc,!1),Bn(this,Ao,{down:!1,up:!1}),Bn(this,Xo,{down:{},up:{}}),Bn(this,$s,0),Bn(this,As,0),Bn(this,Ai,0),Bn(this,vs,-1/0),Bn(this,Os,0),Bn(this,xo,0),Bn(this,fi,void 0),Bn(this,Oo,void 0),!K)throw new Error("Missing measurements argument");if(!de)throw new Error("Missing downloadApiUrl argument");if(!Ee)throw new Error("Missing uploadApiUrl argument");Vn(Yi,this,K),Vn(ol,this,de),Vn(Jo,this,Ee),Vn(Os,this,Se),Vn(xo,this,Math.max(0,ke))},[{key:"results",get:function(){return fe(Xo,this)}},{key:"qsParams",get:function(){return fe(pc,this)},set:function(G){Vn(pc,this,G)}},{key:"fetchOptions",get:function(){return fe(hi,this)},set:function(G){Vn(hi,this,G)}},{key:"responseHook",set:function(G){Vn(oo,this,G)}},{key:"onRunningChange",set:function(G){Vn(Qo,this,G)}},{key:"onNewMeasurementStarted",set:function(G){Vn(zc,this,G)}},{key:"onMeasurementResult",set:function(G){Vn(Gi,this,G)}},{key:"onFinished",set:function(G){Vn(fc,this,G)}},{key:"onConnectionError",set:function(G){Vn(pi,this,G)}},{key:"pause",value:function(){clearTimeout(fe(Oo,this)),lr(Ms,this,Mo).call(this),lr(Ms,this,co).call(this,!1)}},{key:"play",value:function(){fe(mc,this)||(lr(Ms,this,co).call(this,!0),lr(Ms,this,Oi).call(this))}}])}();function co(G){var K=this;G!==fe(mc,this)&&(Vn(mc,this,G),setTimeout(function(){return fe(Qo,K).call(K,fe(mc,K))}))}function ec(G,K){var X=this,de=fe(Yi,this)[G],Ee=de.bytes,xe=de.dir,Se=fe(Xo,this),$e=Se[xe].hasOwnProperty(Ee)?Se[xe][Ee]:{timings:[],numMeasurements:fe(Yi,this).filter(function(ke){var Oe=ke.bytes,Je=ke.dir;return Ee===Oe&&xe===Je}).map(function(ke){return ke.count}).reduce(function(ke,Oe){return ke+Oe},0)};K&&$e.timings.push(K),$e.timings=$e.timings.slice(-$e.numMeasurements),Se[xe][Ee]=$e,K?setTimeout(function(){fe(Gi,X).call(X,Ct({type:xe,bytes:Ee},K),Se)}):fe(zc,this).call(this,fe(Yi,this)[G],Se)}function Oi(){var G=this,K=fe(Yi,this),X=K[fe($s,this)];if(fe(As,this)>=X.count){var de=fe(Ao,this);if(fe(vs,this)>this.finishRequestDuration&&!X.bypassMinDuration){var Ee=X.dir;fe(Ao,this)[Ee]=!0,Object.values(fe(Ao,this)).every(function(pe){return pe})&&fe(fc,this).call(this,fe(Xo,this))}Vn(As,this,0),Vn(vs,this,-1/0),performance.clearResourceTimings();do Vn($s,this,fe($s,this)+1);while(fe($s,this)<K.length&&de[K[fe($s,this)].dir]);if(fe($s,this)>=K.length)return Vn(Ao,this,{down:!0,up:!0}),lr(Ms,this,co).call(this,!1),void fe(fc,this).call(this,fe(Xo,this));X=K[fe($s,this)]}var xe=fe($s,this);fe(As,this)===0&&lr(Ms,this,ec).call(this,xe);var Se=X,$e=Se.bytes,ke=Se.dir==="down",Oe=fe(ke?ol:Jo,this),Je=Object.assign({},fe(pc,this));ke&&(Je.bytes="".concat($e));var We,Ae="".concat(Oe.startsWith("http")||Oe.startsWith("//")?"":window.location.origin).concat(Oe,"?").concat(Object.entries(Je).map(function(pe){var Ie=Yt(pe,2),qe=Ie[0],nt=Ie[1];return"".concat(qe,"=").concat(nt)}).join("&")),tt=Object.assign({},ke?{}:{method:"POST",body:Bc($e)},fe(hi,this)),ue=Vn(fi,this,fetch(Ae,tt).then(function(pe){if(pe.ok)return pe;throw Error(pe.statusText)}).then(function(pe){return G.getServerTime&&(We=G.getServerTime(pe)),pe}).then(function(pe){return pe.text().then(function(Ie){return fe(oo,G)&&fe(oo,G).call(G,{url:Ae,headers:pe.headers,body:Ie}),Ie})}).then(function(pe,Ie){if(ue._cancel)Ie("cancelled");else{var qe=performance.getEntriesByName(Ae).slice(-1)[0],nt={transferSize:qe.transferSize,ttfb:_o(qe),payloadDownloadTime:bo(qe),serverTime:We||-1,measTime:new Date};if(nt.ping=Math.max(.01,nt.ttfb-(We||fe(xo,G))),nt.duration=(ke?No:ei)(nt),nt.bps=(ke?di:Do)(nt,$e),ke&&$e){var tn=+$e;nt.transferSize&&(nt.transferSize<tn||nt.transferSize/tn>1.05)&&console.warn("Requested ".concat(tn,"B but received ").concat(nt.transferSize,"B (").concat(Math.round(nt.transferSize/tn*1e4)/100,"%)."))}lr(Ms,G,ec).call(G,xe,nt);var bt=nt.duration;Vn(vs,G,fe(vs,G)<0?bt:Math.min(fe(vs,G),bt)),Vn(As,G,fe(As,G)+1),Vn(Ai,G,0),fe(Os,G)?Vn(Oo,G,setTimeout(function(){return lr(Ms,G,Oi).call(G)},fe(Os,G))):lr(Ms,G,Oi).call(G)}}).catch(function(pe){var Ie,qe;ue._cancel||(console.warn("Error fetching ".concat(Ae,": ").concat(pe)),Vn(Ai,G,(Ie=fe(Ai,G),qe=Ie++,Ie)),qe<20?lr(Ms,G,Oi).call(G):(Vn(Ai,G,0),lr(Ms,G,co).call(G,!1),fe(pi,G).call(G,"Connection failed to ".concat(Ae,". Gave up after ").concat(20," retries."))))}))}function Mo(){var G=fe(fi,this);G&&(G._cancel=!0)}var Ol=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],Ta=new WeakMap,tc=new WeakSet,Ki=function(G){function K(X){var de,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=Ee.measureParallelLatency,Se=xe!==void 0&&xe,$e=Ee.parallelLatencyThrottleMs,ke=$e===void 0?100:$e,Oe=Ee.downloadApiUrl,Je=Ee.uploadApiUrl,We=Ee.estimatedServerTime,Ae=We===void 0?0:We,tt=It(Ee,Ol);return Ds(this,K),hc(de=Ic(this,K,[X,Ct({downloadApiUrl:Oe,uploadApiUrl:Je,estimatedServerTime:Ae},tt)]),tc),Bn(de,Ta,void 0),Se&&(Vn(Ta,de,new wo([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:Oe,uploadApiUrl:Je,estimatedServerTime:Ae,throttleMs:ke})),fe(Ta,de).qsParams={during:"".concat(X[0].dir,"load")},kn(K,"onRunningChange",lr(tc,de,Uc),de,1),kn(K,"onConnectionError",function(){return fe(Ta,de).pause()},de,1)),de}return ce(K,G),Ma(K,[{key:"latencyResults",get:function(){return fe(Ta,this)&&fe(Ta,this).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(X){fe(Ta,this)&&(fe(Ta,this).onMeasurementResult=function(de){return X(de)})}},{key:"fetchOptions",get:function(){return X="fetchOptions",de=this,Ee=1,xe=Y(J(K.prototype),X,de),2&Ee&&typeof xe=="function"?function(Se){return xe.apply(de,Se)}:xe;var X,de,Ee,xe},set:function(X){kn(K,"fetchOptions",X,this,1),fe(Ta,this)&&(fe(Ta,this).fetchOptions=X)}},{key:"onRunningChange",set:function(X){var de=this;kn(K,"onRunningChange",function(Ee){lr(tc,de,Uc).call(de,Ee),X(Ee)},this,1)}},{key:"onConnectionError",set:function(X){var de=this;kn(K,"onConnectionError",function(){fe(Ta,de)&&fe(Ta,de).pause(),X.apply(void 0,arguments)},this,1)}}])}(wo);function Uc(G){var K=this;fe(Ta,this)&&(G?setTimeout(function(){return fe(Ta,K).play()},20):fe(Ta,this).pause())}var gc=["measurementId","logApiUrl"],xi=new WeakMap,nc=new WeakMap,jo=new WeakMap,wi=new WeakMap,Qi=new WeakSet,i=function(G){function K(X){var de,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=Ee.measurementId,Se=Ee.logApiUrl,$e=It(Ee,gc);return Ds(this,K),hc(de=Ic(this,K,[X,$e]),Qi),Bn(de,xi,void 0),Bn(de,nc,void 0),Bn(de,jo,void 0),Bn(de,wi,void 0),Vn(xi,de,xe),Vn(wi,de,Se),kn(K,"qsParams",Se?{measId:fe(xi,de)}:{},de,1),kn(K,"responseHook",function(ke){return lr(Qi,de,p).call(de,ke)},de,1),kn(K,"onMeasurementResult",function(ke){return lr(Qi,de,j).call(de,ke)},de,1),de}return ce(K,G),Ma(K,[{key:"qsParams",set:function(X){kn(K,"qsParams",fe(wi,this)?Ct({measId:fe(xi,this)},X):X,this,1)}},{key:"responseHook",set:function(X){var de=this;kn(K,"responseHook",function(Ee){X(Ee),lr(Qi,de,p).call(de,Ee)},this,1)}},{key:"onMeasurementResult",set:function(X){var de=this;kn(K,"onMeasurementResult",function(Ee){for(var xe=arguments.length,Se=new Array(xe>1?xe-1:0),$e=1;$e<xe;$e++)Se[$e-1]=arguments[$e];X.apply(void 0,[Ee].concat(Se)),lr(Qi,de,j).call(de,Ee)},this,1)}}])}(Ki);function p(G){fe(wi,this)&&(Vn(jo,this,+G.headers.get("cf-meta-request-time")),Vn(nc,this,G.body.slice(-300).split("___").pop()))}function j(G){if(fe(wi,this)){var K={type:G.type,bytes:G.bytes,ping:Math.round(G.ping),ttfb:Math.round(G.ttfb),payloadDownloadTime:Math.round(G.payloadDownloadTime),duration:Math.round(G.duration),transferSize:Math.round(G.transferSize),serverTime:Math.round(G.serverTime),token:fe(nc,this),requestTime:fe(jo,this),measId:fe(xi,this)};Vn(nc,this,null),Vn(jo,this,null),fetch(fe(wi,this),Ct({method:"POST",body:JSON.stringify(K)},this.fetchOptions))}}var W=new WeakMap,te=new WeakMap,he=new WeakMap,ze=new WeakSet,it=function(){return Ma(function G(K){if(Ds(this,G),hc(this,ze),Bn(this,W,!1),Bn(this,te,void 0),Bn(this,he,void 0),!K)throw new Error("Missing operation to perform");Vn(he,this,K),this.play()},[{key:"pause",value:function(){lr(ze,this,qn).call(this),lr(ze,this,ht).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){fe(W,this)||(lr(ze,this,ht).call(this,!0),lr(ze,this,Jt).call(this))}}])}();function ht(G){G!==fe(W,this)&&Vn(W,this,G)}function Jt(){var G=this,K=Vn(te,this,fe(he,this).call(this).then(function(){!K._cancel&&lr(ze,G,Jt).call(G)}))}function qn(){var G=fe(te,this);G&&(G._cancel=!0)}var Yn=new WeakMap,ir=function(){return Ma(function G(){var K=this,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=X.download,Ee=X.upload;if(Ds(this,G),ne(this,"qsParams",{}),ne(this,"fetchOptions",{}),Bn(this,Yn,[]),!de&&!Ee)throw new Error("Missing at least one of download/upload config");[[de,"download"],[Ee,"upload"]].filter(function(Se){return Yt(Se,1)[0]}).forEach(function(Se){var $e=Yt(Se,2),ke=$e[0],Oe=$e[1],Je=ke.apiUrl,We=ke.chunkSize;if(!Je)throw new Error("Missing ".concat(Oe," apiUrl argument"));if(!We)throw new Error("Missing ".concat(Oe," chunkSize argument"))});var xe=function(Se){var $e=Se.apiUrl,ke=Se.qsParams,Oe=ke===void 0?{}:ke,Je=Se.fetchOptions,We=Je===void 0?{}:Je;return new it(function(){var Ae=Object.assign({},Oe,K.qsParams),tt="".concat($e.startsWith("http")||$e.startsWith("//")?"":window.location.origin).concat($e,"?").concat(Object.entries(Ae).map(function(pe){var Ie=Yt(pe,2),qe=Ie[0],nt=Ie[1];return"".concat(qe,"=").concat(nt)}).join("&")),ue=Object.assign({},We,K.fetchOptions);return fetch(tt,ue).then(function(pe){if(pe.ok)return pe;throw Error(pe.statusText)}).then(function(pe){return pe.text()})})};de&&fe(Yn,this).push(xe({apiUrl:de.apiUrl,qsParams:{bytes:"".concat(de.chunkSize)}})),Ee&&fe(Yn,this).push(xe({apiUrl:Ee.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(Ee.chunkSize)}}))},[{key:"pause",value:function(){fe(Yn,this).forEach(function(G){return G.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){fe(Yn,this).forEach(function(G){return G.play()})}}])}(),jr=["iceServers","acceptIceCandidate","dataChannelCfg"],ka=new WeakMap,Ua=new WeakMap,ds=new WeakMap,js=new WeakMap,vc=new WeakMap,Ml=function(){return Ma(function G(){var K=this,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=X.iceServers,Ee=de===void 0?[]:de,xe=X.acceptIceCandidate,Se=xe===void 0?function(tt){var ue=tt.protocol||"";if(!ue&&tt.candidate){var pe=tt.candidate.split(" ");pe.length>=3&&(ue=pe[2])}return ue.toLowerCase()==="udp"}:xe,$e=X.dataChannelCfg,ke=$e===void 0?{ordered:!1,maxRetransmits:0}:$e,Oe=It(X,jr);Ds(this,G),ne(this,"onOpen",function(){}),ne(this,"onClose",function(){}),ne(this,"onMessageReceived",function(){}),Bn(this,ka,!1),Bn(this,Ua,void 0),Bn(this,ds,void 0),Bn(this,js,void 0),Bn(this,vc,void 0);var Je=new RTCPeerConnection(Ct({iceServers:Ee},Oe)),We=new RTCPeerConnection(Ct({iceServers:Ee},Oe)),Ae=Je.createDataChannel("channel",ke);Ae.onopen=function(){Vn(ka,K,!0),K.onOpen()},Ae.onclose=function(){return K.close()},We.ondatachannel=function(tt){var ue=tt.channel;ue.onclose=function(){return K.close()},ue.onmessage=function(pe){return K.onMessageReceived(pe.data)},Vn(vc,K,ue)},Je.onicecandidate=function(tt){tt.candidate&&Se(tt.candidate)&&We.addIceCandidate(tt.candidate)},We.onicecandidate=function(tt){tt.candidate&&Se(tt.candidate)&&Je.addIceCandidate(tt.candidate)},Je.createOffer().then(function(tt){return Je.setLocalDescription(tt)}).then(function(){return We.setRemoteDescription(Je.localDescription)}).then(function(){return We.createAnswer()}).then(function(tt){return We.setLocalDescription(tt)}).then(function(){return Je.setRemoteDescription(We.localDescription)}),Vn(Ua,this,Je),Vn(ds,this,We),Vn(js,this,Ae),Vn(ka,this,!1)},[{key:"send",value:function(G){return fe(js,this).send(G)}},{key:"close",value:function(){return fe(Ua,this)&&fe(Ua,this).close(),fe(ds,this)&&fe(ds,this).close(),fe(js,this)&&fe(js,this).close(),fe(vc,this)&&fe(vc,this).close(),fe(ka,this)&&this.onClose(),Vn(ka,this,!1),this}}])}(),Lo=new WeakMap,lo=new WeakMap,Fc=new WeakMap,Mi=new WeakMap,Wa=new WeakMap,Si=new WeakMap,uo=function(){return Ma(function G(){var K=this,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=X.turnServerUri,Ee=X.turnServerCredsApi,xe=X.turnServerCredsApiParser,Se=xe===void 0?function(Nt){return{turnServerUser:Nt.username,turnServerPass:Nt.credential,turnServerUri:Nt.server}}:xe,$e=X.turnServerCredsApiIncludeCredentials,ke=$e!==void 0&&$e,Oe=X.turnServerUser,Je=X.turnServerPass,We=X.numMsgs,Ae=We===void 0?100:We,tt=X.batchSize,ue=tt===void 0?10:tt,pe=X.batchWaitTime,Ie=pe===void 0?10:pe,qe=X.responsesWaitTime,nt=qe===void 0?5e3:qe,tn=X.connectionTimeout,bt=tn===void 0?5e3:tn;if(Ds(this,G),Bn(this,Lo,function(){}),Bn(this,lo,function(){}),Bn(this,Fc,function(){}),ne(this,"onMsgSent",function(){}),ne(this,"onAllMsgsSent",function(){}),ne(this,"onMsgReceived",function(){}),Bn(this,Mi,{}),Bn(this,Wa,void 0),Bn(this,Si,void 0),!de&&!Ee)throw new Error("Missing turnServerCredsApi or turnServerUri argument");if(!(Oe&&Je||Ee))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");Vn(Si,this,Ae),(Oe&&Je?Promise.resolve({turnServerUser:Oe,turnServerPass:Je}):fetch(Ee,{credentials:ke?"include":void 0}).then(function(Nt){return Nt.json()}).then(function(Nt){if(Nt.error)throw Nt.error;return Nt}).then(Se)).catch(function(Nt){return fe(Lo,K).call(K,Nt)}).then(function(Nt){var Mn=Nt.turnServerUser,ct=Nt.turnServerPass,Fe=Nt.turnServerUri,xt=Vn(Wa,K,new Ml({iceServers:[{urls:"turn:".concat(Fe||de,"?transport=udp"),username:Mn,credential:ct}],iceTransportPolicy:"relay"})),wn=!1;setTimeout(function(){wn||(xt.close(),fe(lo,K).call(K,"ICE connection timeout!"))},bt);var cn=fe(Mi,K);xt.onOpen=function(){wn=!0;var vn=K;(function or(Lr){if(Lr<=Ae){for(var Tn=Lr;Tn<=Math.min(Ae,Lr+ue-1);)cn[Tn]=!1,xt.send(Tn),vn.onMsgSent(Tn),Tn++;setTimeout(function(){return or(Tn)},Ie)}else{vn.onAllMsgsSent(Object.keys(cn).length);var yn=function(){xt.close(),fe(Fc,vn).call(vn,vn.results)},Nr=setTimeout(yn,nt),br=Object.values(fe(Mi,vn)).filter(function(ar){return!ar}).length;xt.onMessageReceived=function(ar){clearTimeout(Nr),cn[ar]=!0,vn.onMsgReceived(ar),--br<=0&&Object.values(fe(Mi,vn)).every(function($n){return $n})?yn():Nr=setTimeout(yn,nt)}}})(1)},xt.onMessageReceived=function(vn){cn[vn]=!0,K.onMsgReceived(vn)}}).catch(function(Nt){return fe(lo,K).call(K,Nt.toString())})},[{key:"onCredentialsFailure",set:function(G){Vn(Lo,this,G)}},{key:"onConnectionError",set:function(G){Vn(lo,this,G)}},{key:"onFinished",set:function(G){Vn(Fc,this,G)}},{key:"results",get:function(){var G=fe(Si,this),K=Object.keys(fe(Mi,this)).length,X=Object.entries(fe(Mi,this)).filter(function(de){return!Yt(de,2)[1]}).map(function(de){return+Yt(de,1)[0]});return{totalMessages:G,numMessagesSent:K,packetLoss:X.length/K,lostMessages:X}}}])}(),So=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],ts=new WeakMap,yc=function(G){function K(){var X,de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ee=de.downloadChunkSize,xe=de.uploadChunkSize,Se=de.downloadApiUrl,$e=de.uploadApiUrl,ke=It(de,So);return Ds(this,K),Bn(X=Ic(this,K,[ke]),ts,void 0),(Ee||xe)&&(Vn(ts,X,new ir({download:Ee?{apiUrl:Se,chunkSize:Ee}:null,upload:xe?{apiUrl:$e,chunkSize:xe}:null})),kn(K,"onCredentialsFailure",kn(K,"onConnectionError",kn(K,"onFinished",function(){return fe(ts,X).stop()},X,1),X,1),X,1)),X}return ce(K,G),Ma(K,[{key:"qsParams",set:function(X){fe(ts,this)&&(fe(ts,this).qsParams=X)}},{key:"fetchOptions",set:function(X){fe(ts,this)&&(fe(ts,this).fetchOptions=X)}},{key:"onCredentialsFailure",set:function(X){var de=this;kn(K,"onCredentialsFailure",function(){X.apply(void 0,arguments),fe(ts,de)&&fe(ts,de).stop()},this,1)}},{key:"onConnectionError",set:function(X){var de=this;kn(K,"onConnectionError",function(){X.apply(void 0,arguments),fe(ts,de)&&fe(ts,de).stop()},this,1)}},{key:"onFinished",set:function(X){var de=this;kn(K,"onFinished",function(){X.apply(void 0,arguments),fe(ts,de)&&fe(ts,de).stop()},this,1)}}])}(uo),Hc=["reachable"],Io=Ma(function G(K){var X=this,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ee=de.timeout,xe=Ee===void 0?-1:Ee,Se=de.fetchOptions,$e=Se===void 0?{}:Se;Ds(this,G),ne(this,"onFinished",function(){});var ke=!1,Oe=function(Je){var We=Je.reachable,Ae=It(Je,Hc);ke||(ke=!0,X.onFinished(Ct({targetUrl:K,reachable:We},Ae)))};fetch(K,$e).then(function(Je){Oe({reachable:!0,response:Je})}).catch(function(Je){Oe({reachable:!1,error:Je})}),xe>0&&setTimeout(function(){return Oe({reachable:!1,error:"Request timeout"})},xe)}),cl=function(G){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!G.length)return 0;var X=G.slice().sort(function(Se,$e){return Se-$e}),de=(G.length-1)*K,Ee=de%1;if(Ee===0)return X[Math.round(de)];var xe=[Math.floor,Math.ceil].map(function(Se){return X[Se(de)]});return xe[0]+(xe[1]-xe[0])*Ee},ji=new WeakMap,Ss=new WeakMap,jl=function(){return Ma(function G(K){var X=this;Ds(this,G),ne(this,"getLatencyPoints",function(de){return de.timings.map(function(Ee){return Ee.ping})}),ne(this,"getLatency",function(de){return cl(X.getLatencyPoints(de),fe(ji,X).latencyPercentile)}),ne(this,"getBandwidthPoints",function(de){return Object.entries(de).map(function(Ee){var xe=Yt(Ee,2),Se=xe[0];return xe[1].timings.map(function($e){var ke=$e.bps,Oe=$e.duration,Je=$e.ping,We=$e.measTime,Ae=$e.serverTime,tt=$e.transferSize;return{bytes:+Se,bps:ke,duration:Oe,ping:Je,measTime:We,serverTime:Ae,transferSize:tt}})}).flat()}),ne(this,"getBandwidth",function(de){return cl(X.getBandwidthPoints(de).filter(function(Ee){return Ee.duration>=fe(ji,X).bandwidthMinRequestDuration}).map(function(Ee){return Ee.bps}).filter(function(Ee){return Ee}),fe(ji,X).bandwidthPercentile)}),ne(this,"getLoadedLatency",function(de){return X.getLatency({timings:fe(Ss,X).call(X,de)})}),ne(this,"getLoadedJitter",function(de){return X.getJitter({timings:fe(Ss,X).call(X,de)})}),ne(this,"getLoadedLatencyPoints",function(de){return X.getLatencyPoints({timings:fe(Ss,X).call(X,de)})}),ne(this,"getPacketLoss",function(de){return de.packetLoss}),ne(this,"getPacketLossDetails",function(de){return de}),ne(this,"getReachability",function(de){return!!de.reachable}),ne(this,"getReachabilityDetails",function(de){return{host:de.host,reachable:de.reachable}}),Bn(this,ji,void 0),Bn(this,Ss,function(de){return Object.values(de).filter(function(Ee){return Ee.timings.length&&Math.min.apply(Math,sa(Ee.timings.map(function(xe){return xe.duration})))>=fe(ji,X).loadedRequestMinDuration}).map(function(Ee){return Ee.sideLatency||[]}).flat().slice(-fe(ji,X).loadedLatencyMaxPoints)}),Vn(ji,this,K)},[{key:"getJitter",value:function(G){var K=this.getLatencyPoints(G);return K.length<2?null:K.reduce(function(X,de){var Ee=X.sumDeltas,xe=Ee===void 0?0:Ee,Se=X.prevLatency;return{sumDeltas:xe+(Se!==void 0?Math.abs(Se-de):0),prevLatency:de}},{}).sumDeltas/(K.length-1)}}])}(),Bu=["bad","poor","average","good","great"],zu={loadedLatencyIncrease:function(G){return G.latency&&(G.downLoadedLatency||G.upLoadedLatency)?Math.max(G.downLoadedLatency,G.upLoadedLatency)-G.latency:void 0}},Uu={packetLoss:0},Ll=new WeakMap,Rs=function(){return Ma(function G(K){Ds(this,G),Bn(this,Ll,void 0),Vn(Ll,this,K)},[{key:"getScores",value:function(G){var K=Object.assign.apply(Object,sa(Object.entries(fe(Ll,this).aimMeasurementScoring).map(function(X){var de=Yt(X,2),Ee=de[0],xe=de[1],Se=zu.hasOwnProperty(Ee)?zu[Ee](G):G[Ee];return Se===void 0?Uu.hasOwnProperty(Ee)?ne({},Ee,Uu[Ee]):{}:ne({},Ee,Se===void 0?0:+xe(Se))})));return Object.assign.apply(Object,[{}].concat(sa(Object.entries(fe(Ll,this).aimExperiencesDefs).filter(function(X){return Yt(X,2)[1].input.every(function(de){return K.hasOwnProperty(de)})}).map(function(X){var de,Ee=Yt(X,2),xe=Ee[0],Se=Ee[1],$e=Se.input,ke=Se.pointThresholds,Oe=Math.max(0,(de=$e.map(function(We){return K[We]}),de.reduce(function(We,Ae){return We+Ae},0))),Je=vt(ke,[0,1,2,3,4])(Oe);return ne({},xe,{points:Oe,classificationIdx:Je,classificationName:Bu[Je]})}))))}}])}(),_c=new WeakMap,bc=new WeakMap,xc=new WeakMap,os=new WeakMap,wc=new WeakMap,Vc=new WeakMap,Fu=new WeakMap,Hu=new WeakMap,_d=function(){return Ma(function G(K){var X=this;Ds(this,G),ne(this,"raw",void 0),ne(this,"getUnloadedLatency",function(){return fe(os,X).call(X,"getLatency","latency")}),ne(this,"getUnloadedJitter",function(){return fe(os,X).call(X,"getJitter","latency")}),ne(this,"getUnloadedLatencyPoints",function(){return fe(os,X).call(X,"getLatencyPoints","latency",[])}),ne(this,"getDownLoadedLatency",function(){return fe(os,X).call(X,"getLoadedLatency","download")}),ne(this,"getDownLoadedJitter",function(){return fe(os,X).call(X,"getLoadedJitter","download")}),ne(this,"getDownLoadedLatencyPoints",function(){return fe(os,X).call(X,"getLoadedLatencyPoints","download",[])}),ne(this,"getUpLoadedLatency",function(){return fe(os,X).call(X,"getLoadedLatency","upload")}),ne(this,"getUpLoadedJitter",function(){return fe(os,X).call(X,"getLoadedJitter","upload")}),ne(this,"getUpLoadedLatencyPoints",function(){return fe(os,X).call(X,"getLoadedLatencyPoints","upload",[])}),ne(this,"getDownloadBandwidth",function(){return fe(os,X).call(X,"getBandwidth","download")}),ne(this,"getDownloadBandwidthPoints",function(){return fe(os,X).call(X,"getBandwidthPoints","download",[])}),ne(this,"getUploadBandwidth",function(){return fe(os,X).call(X,"getBandwidth","upload")}),ne(this,"getUploadBandwidthPoints",function(){return fe(os,X).call(X,"getBandwidthPoints","upload",[])}),ne(this,"getPacketLoss",function(){return fe(os,X).call(X,"getPacketLoss","packetLoss")}),ne(this,"getPacketLossDetails",function(){return fe(os,X).call(X,"getPacketLossDetails","packetLoss",void 0,!0)}),ne(this,"getScores",function(){return fe(xc,X).getScores(X.getSummary())}),Bn(this,_c,void 0),Bn(this,bc,void 0),Bn(this,xc,void 0),Bn(this,os,function(de,Ee){var xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Se=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return X.raw.hasOwnProperty(Ee)&&X.raw[Ee].started?Se&&X.raw[Ee].error?{error:X.raw[Ee].error}:fe(bc,X)[de](X.raw[Ee].results):xe}),Bn(this,wc,function(){return fe(os,X).call(X,"getReachability","v4Reachability")}),Bn(this,Vc,function(){return fe(os,X).call(X,"getReachabilityDetails","v4Reachability")}),Bn(this,Fu,function(){return fe(os,X).call(X,"getReachability","v6Reachability")}),Bn(this,Hu,function(){return fe(os,X).call(X,"getReachabilityDetails","v6Reachability")}),Vn(_c,this,K),this.clear(),Vn(bc,this,new jl(fe(_c,this))),Vn(xc,this,new Rs(fe(_c,this)))},[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(G){return G.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(sa(sa(new Set(fe(_c,this).measurements.map(function(G){return G.type}))).map(function(G){return ne({},G,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var G={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:fe(wc,this),v6Reachability:fe(Fu,this)};return Object.assign.apply(Object,sa(Object.entries(G).map(function(K){var X=Yt(K,2),de=X[0],Ee=(0,X[1])();return Ee===void 0?{}:ne({},de,Ee)})))}}])}(),Il=function(G){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return G&&Math.round(G*Math.pow(10,K))/Math.pow(10,K)},ge=function(G){return G.map(function(K){return Il(K,2)})},ee=function(G){return G.map(function(K){return{bytes:+K.bytes,bps:Il(K.bps)}})},re={latencyMs:["getUnloadedLatencyPoints",ge],download:["getDownloadBandwidthPoints",ee],upload:["getUploadBandwidthPoints",ee],downLoadedLatencyMs:["getDownLoadedLatencyPoints",ge],upLoadedLatencyMs:["getUpLoadedLatencyPoints",ge],packetLoss:["getPacketLossDetails",function(G){return G.error?void 0:{numMessages:G.numMessagesSent,lossRatio:Il(G.packetLoss,4)}}]},se=["type"],ie=["numPackets"],le=["bytes"],De=["latency","latencyUnderLoad","download","upload"],Le=function(){return"".concat(Math.round(1e16*Math.random()))},Ue=new WeakMap,kt=new WeakMap,Dt=new WeakMap,qt=new WeakMap,bn=new WeakMap,Vt=new WeakMap,hn=new WeakMap,xn=new WeakMap,Pe=new WeakMap,ft=new WeakMap,Mt=new WeakMap,mt=new WeakSet,jt=function(){return Ma(function G(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ds(this,G),hc(this,mt),ne(this,"onRunningChange",function(){}),ne(this,"onResultsChange",function(){}),Bn(this,Ue,function(){}),Bn(this,kt,function(){}),Bn(this,Dt,void 0),Bn(this,qt,void 0),Bn(this,bn,Le()),Bn(this,Vt,-1),Bn(this,hn,void 0),Bn(this,xn,1e6),Bn(this,Pe,1e6),Bn(this,ft,!1),Bn(this,Mt,!1),Vn(Dt,this,Object.assign({},Wi,K,Zi)),Vn(qt,this,new _d(fe(Dt,this))),fe(Dt,this).autoStart&&this.play()},[{key:"results",get:function(){return fe(qt,this)}},{key:"isRunning",get:function(){return fe(ft,this)}},{key:"isFinished",get:function(){return fe(Mt,this)}},{key:"onFinish",set:function(G){Vn(Ue,this,G)}},{key:"onError",set:function(G){Vn(kt,this,G)}},{key:"pause",value:function(){De.includes(lr(mt,this,dn).call(this))&&fe(hn,this).pause(),lr(mt,this,Ke).call(this,!1)}},{key:"play",value:function(){fe(ft,this)||(lr(mt,this,Ke).call(this,!0),lr(mt,this,Cn).call(this))}},{key:"restart",value:function(){lr(mt,this,gn).call(this),this.play()}}])}();function Ke(G){G!==fe(ft,this)&&(Vn(ft,this,G),this.onRunningChange(fe(ft,this)))}function Bt(G){var K=this;G!==fe(Mt,this)&&(Vn(Mt,this,G),G&&setTimeout(function(){return fe(Ue,K).call(K,K.results)}))}function dn(){return fe(Vt,this)<0||fe(Vt,this)>=fe(Dt,this).measurements.length?null:fe(Dt,this).measurements[fe(Vt,this)].type}function Kt(){return fe(qt,this).raw[lr(mt,this,dn).call(this)]||void 0}function gn(){lr(mt,this,an).call(this),Vn(bn,this,Le()),Vn(Vt,this,-1),Vn(hn,this,void 0),lr(mt,this,Ke).call(this,!1),lr(mt,this,Bt).call(this,!1),fe(qt,this).clear()}function an(){var G=fe(hn,this);G&&(G.onFinished=G.onConnectionError=G.onFail=G.onMsgReceived=G.onCredentialsFailure=G.onMeasurementResult=function(){},De.includes(lr(mt,this,dn).call(this))&&G.pause())}function Cn(){var G,K=this;if(!(De.includes(lr(mt,this,dn).call(this))&&lr(mt,this,Kt).call(this)&&lr(mt,this,Kt).call(this).started)||lr(mt,this,Kt).call(this).finished||lr(mt,this,Kt).call(this).finishedCurrentRound||lr(mt,this,Kt).call(this).error){if(Vn(Vt,this,(G=fe(Vt,this),++G)),fe(Vt,this)>=fe(Dt,this).measurements.length)return lr(mt,this,Ke).call(this,!1),void lr(mt,this,Bt).call(this,!0);var X,de=fe(Dt,this).measurements[fe(Vt,this)],Ee=de.type,xe=It(de,se),Se=lr(mt,this,Kt).call(this),$e=fe(Dt,this),ke=$e.downloadApiUrl,Oe=$e.uploadApiUrl,Je=$e.estimatedServerTime;switch(Ee){case"v4Reachability":case"v6Reachability":(X=new Io("https://".concat(xe.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(bt){Se.finished=!0,Se.results=Ct({host:xe.host},bt),K.onResultsChange({type:Ee}),lr(mt,K,Cn).call(K)};break;case"rpki":(X=new Io("https://".concat(fe(Dt,this).rpkiInvalidHost),{timeout:5e3})).onFinished=function(bt){(bt.response?bt.response.json():Promise.resolve()).then(function(Nt){Se.finished=!0,Se.results=Ct({host:fe(Dt,K).rpkiInvalidHost,filteringInvalids:!bt.reachable},Nt?{asn:Nt.asn,name:Nt.name}:{}),K.onResultsChange({type:Ee}),lr(mt,K,Cn).call(K)})};break;case"nxdomain":(X=new Io("https://".concat(xe.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(bt){Se.finished=!0,Se.results={host:xe.nxhost,reachable:bt.reachable},K.onResultsChange({type:Ee}),lr(mt,K,Cn).call(K)};break;case"packetLoss":case"packetLossUnderLoad":Se.finished=!1;var We=xe.numPackets,Ae=It(xe,ie),tt=fe(Dt,this),ue=tt.turnServerUri,pe=tt.turnServerCredsApiUrl,Ie=tt.turnServerUser,qe=tt.turnServerPass,nt=tt.includeCredentials;(X=new yc(Ct({turnServerUri:ue,turnServerCredsApi:pe,turnServerCredsApiIncludeCredentials:nt,turnServerUser:Ie,turnServerPass:qe,numMsgs:We,downloadChunkSize:xe.loadDown?fe(xn,this):void 0,uploadChunkSize:xe.loadUp?fe(Pe,this):void 0,downloadApiUrl:ke,uploadApiUrl:Oe},Ae))).onMsgReceived=function(){Se.results=Object.assign({},X.results),K.onResultsChange({type:Ee})},X.onFinished=function(){Se.finished=!0,K.onResultsChange({type:Ee}),lr(mt,K,Cn).call(K)},X.onConnectionError=function(bt){Se.error=bt,K.onResultsChange({type:Ee}),fe(kt,K).call(K,"Connection error while measuring packet loss: ".concat(bt)),lr(mt,K,Cn).call(K)},X.onCredentialsFailure=function(){Se.error="unable to get turn server credentials",K.onResultsChange({type:Ee}),fe(kt,K).call(K,"Error while measuring packet loss: unable to get turn server credentials."),lr(mt,K,Cn).call(K)};break;case"latency":case"latencyUnderLoad":Se.finished=!1,(X=new i([{dir:"down",bytes:0,count:xe.numPackets,bypassMinDuration:!0}],{downloadApiUrl:ke,uploadApiUrl:Oe,estimatedServerTime:Je,logApiUrl:fe(Dt,this).logMeasurementApiUrl,measurementId:fe(bn,this),downloadChunkSize:xe.loadDown?fe(xn,this):void 0,uploadChunkSize:xe.loadUp?fe(Pe,this):void 0})).fetchOptions={credentials:fe(Dt,this).includeCredentials?"include":void 0},X.onMeasurementResult=X.onNewMeasurementStarted=function(bt,Nt){Se.results=Object.assign({},Nt.down[0]),K.onResultsChange({type:Ee})},X.onFinished=function(){Se.finished=!0,K.onResultsChange({type:Ee}),fe(ft,K)&&lr(mt,K,Cn).call(K)},X.onConnectionError=function(bt){Se.error=bt,K.onResultsChange({type:Ee}),fe(kt,K).call(K,"Connection error while measuring latency: ".concat(bt)),lr(mt,K,Cn).call(K)},X.play();break;case"download":case"upload":if(Se.finished||Se.error)lr(mt,this,Cn).call(this);else{delete Se.finishedCurrentRound;var tn=fe(Dt,this)["measure".concat(Ee==="download"?"Down":"Up","loadLoadedLatency")];(X=new i([Ct({dir:Ee==="download"?"down":"up"},xe)],{downloadApiUrl:ke,uploadApiUrl:Oe,estimatedServerTime:Je,logApiUrl:fe(Dt,this).logMeasurementApiUrl,measurementId:fe(bn,this),measureParallelLatency:tn,parallelLatencyThrottleMs:fe(Dt,this).loadedLatencyThrottle})).fetchOptions={credentials:fe(Dt,this).includeCredentials?"include":void 0},X.finishRequestDuration=fe(Dt,this).bandwidthFinishRequestDuration,X.onNewMeasurementStarted=function(bt){var Nt=bt.count,Mn=bt.bytes,ct=Se.results=Object.assign({},Se.results);!ct.hasOwnProperty(Mn)&&(ct[Mn]={timings:[],numMeasurements:0,sideLatency:tn?[]:void 0}),ct[Mn].numMeasurements-ct[Mn].timings.length!==Nt&&(ct[Mn].numMeasurements+=Nt,K.onResultsChange({type:Ee}))},X.onMeasurementResult=function(bt){var Nt=bt.bytes,Mn=It(bt,le);Se.results[Nt].timings.push(Mn),Se.results=Object.assign({},Se.results),K.onResultsChange({type:Ee})},X.onParallelLatencyResult=function(bt){Se.results[xe.bytes].sideLatency.push(bt),Se.results=Object.assign({},Se.results),K.onResultsChange({type:Ee})},X.onFinished=function(bt){var Nt=!fe(Dt,K).measurements.slice(fe(Vt,K)+1).map(function(Fe){return Fe.type}).includes(Ee),Mn=Math.min.apply(Math,sa(Object.values(Ee==="download"?bt.down:bt.up).slice(-1)[0].timings.map(function(Fe){return Fe.duration})));if(Nt||!xe.bypassMinDuration&&Mn>fe(Dt,K).bandwidthFinishRequestDuration){Se.finished=!0,K.onResultsChange({type:Ee});var ct=.5*Object.keys(Se.results).map(function(Fe){return+Fe}).sort(function(Fe,xt){return xt-Fe})[0];Ee==="download"&&Vn(xn,K,ct),Ee==="upload"&&Vn(Pe,K,ct)}else Se.finishedCurrentRound=!0;fe(ft,K)&&lr(mt,K,Cn).call(K)},X.onConnectionError=function(bt){Se.error=bt,K.onResultsChange({type:Ee}),fe(kt,K).call(K,"Connection error while measuring ".concat(Ee,": ").concat(bt)),lr(mt,K,Cn).call(K)},X.play()}}Vn(hn,this,X),Se.started=!0,this.onResultsChange({type:Ee})}else fe(hn,this).play()}var mn=new WeakMap,Xt=new WeakMap,yr=function(G){function K(X){var de;Ds(this,K);for(var Ee=arguments.length,xe=new Array(Ee>1?Ee-1:0),Se=1;Se<Ee;Se++)xe[Se-1]=arguments[Se];return Bn(de=Ic(this,K,[X].concat(xe)),mn,void 0),Bn(de,Xt,function($e){fe(mn,de)&&function(ke,Oe){var Je=Oe.apiUrl,We={};Object.entries(re).forEach(function(tt){var ue=Yt(tt,2),pe=ue[0],Ie=Yt(ue[1],2),qe=Ie[0],nt=Ie[1],tn=nt===void 0?function(Nt){return Nt}:nt,bt=ke[qe]();bt&&(We[pe]=tn(bt))});var Ae=ke.getScores();Ae&&(We.scores=Object.assign.apply(Object,[{}].concat(sa(Object.entries(Ae).map(function(tt){var ue,pe=Yt(tt,2);return ne({},pe[0],{points:(ue=pe[1]).points,classification:ue.classificationName})}))))),fetch(Je,{method:"POST",body:JSON.stringify(We)})}($e,{apiUrl:fe(mn,de)})}),kn(K,"onFinish",fe(Xt,de),de,1),Vn(mn,de,Object.assign({},Wi,X,Zi).logAimApiUrl),de}return ce(K,G),Ma(K,[{key:"onFinish",set:function(X){var de=this;kn(K,"onFinish",function(Ee){X(Ee),fe(Xt,de).call(de,Ee)},this,1)}}])}(jt),ur=h(9633);function At(G,K){var X=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!X){if(Array.isArray(G)||(X=function(ke,Oe){if(ke){if(typeof ke=="string")return An(ke,Oe);var Je={}.toString.call(ke).slice(8,-1);return Je==="Object"&&ke.constructor&&(Je=ke.constructor.name),Je==="Map"||Je==="Set"?Array.from(ke):Je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Je)?An(ke,Oe):void 0}}(G))||K){X&&(G=X);var de=0,Ee=function(){};return{s:Ee,n:function(){return de>=G.length?{done:!0}:{done:!1,value:G[de++]}},e:function(ke){throw ke},f:Ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe,Se=!0,$e=!1;return{s:function(){X=X.call(G)},n:function(){var ke=X.next();return Se=ke.done,ke},e:function(ke){$e=!0,xe=ke},f:function(){try{Se||X.return==null||X.return()}finally{if($e)throw xe}}}}function An(G,K){(K==null||K>G.length)&&(K=G.length);for(var X=0,de=Array(K);X<K;X++)de[X]=G[X];return de}var Pr=[O],ta=!1,oa=function(){return(0,R.A)(function We(){(0,u.A)(this,We),(0,v.A)(this,"keyProvider",null)},null,[{key:"setKeyProvider",value:function(We){this.keyProvider=We}},{key:"getKeyProvider",value:function(){return this.keyProvider}},{key:"config",value:function(We){if(!We)throw new Error("'token' is empty, please provide it in config");this.apiKey=We;var Ae=D(Ze,void 0,x.apply(void 0,Pr));window.STORE=Ae,Ft.default.init({store:Ae})}},{key:"getCameras",value:(Je=(0,y.A)(E().mark(function We(){var Ae,tt,ue,pe,Ie;return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(qe.prev=0,Ae=navigator.userAgent.includes("Firefox"),tt=[],!Ae){qe.next=2;break}return qe.next=1,new Promise(function(nt,tn){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(){var bt=(0,y.A)(E().mark(function Nt(Mn){var ct;return E().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Fe.sent,tt=ct.filter(function(xt){return xt.kind==="videoinput"}).map(function(xt){return new il(xt.deviceId,xt.groupId,xt.kind,xt.label)}),nt(tt),Mn.getTracks().forEach(function(xt){return xt.stop()});case 2:case"end":return Fe.stop()}},Nt)}));return function(Nt){return bt.apply(this,arguments)}}()).catch(function(bt){console.error("Error in getCameras()",bt),tn(bt)})});case 1:qe.next=4;break;case 2:return qe.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=qe.sent,tt=ue.filter(function(nt){return nt.kind==="videoinput"}).map(function(nt){return new il(nt.deviceId,nt.groupId,nt.kind,nt.label)});case 4:return qe.abrupt("return",tt);case 5:qe.prev=5,Ie=qe.catch(0),pe=Ie.message,Ie instanceof TypeError&&Ie.name==="TypeError"&&(pe=Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(pe));case 6:case"end":return qe.stop()}},We,null,[[0,5]])})),function(){return Je.apply(this,arguments)})},{key:"getMicrophones",value:(Oe=(0,y.A)(E().mark(function We(){var Ae,tt,ue,pe,Ie;return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(qe.prev=0,Ae=navigator.userAgent.includes("Firefox"),tt=[],!Ae){qe.next=2;break}return qe.next=1,new Promise(function(nt,tn){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var bt=(0,y.A)(E().mark(function Nt(Mn){var ct;return E().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Fe.sent,tt=ct.filter(function(xt){return xt.kind==="audioinput"}).map(function(xt){return new Nl(xt.deviceId,xt.groupId,xt.kind,xt.label)}),nt(tt),Mn.getTracks().forEach(function(xt){return xt.stop()});case 2:case"end":return Fe.stop()}},Nt)}));return function(Nt){return bt.apply(this,arguments)}}()).catch(function(bt){console.error("Error in getMicrophones()",bt),tn(bt)})});case 1:qe.next=4;break;case 2:return qe.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=qe.sent,tt=ue.filter(function(nt){return nt.kind==="audioinput"}).map(function(nt){return new Nl(nt.deviceId,nt.groupId,nt.kind,nt.label)});case 4:return qe.abrupt("return",tt);case 5:qe.prev=5,Ie=qe.catch(0),pe=Ie.message,Ie instanceof TypeError&&Ie.name==="TypeError"&&(pe=Ir.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(pe));case 6:case"end":return qe.stop()}},We,null,[[0,5]])})),function(){return Oe.apply(this,arguments)})},{key:"getPlaybackDevices",value:(ke=(0,y.A)(E().mark(function We(){var Ae,tt,ue,pe,Ie;return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(qe.prev=0,Ae=navigator.userAgent.includes("Firefox"),tt=[],!Ae){qe.next=2;break}return qe.next=1,new Promise(function(nt,tn){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var bt=(0,y.A)(E().mark(function Nt(Mn){var ct;return E().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Fe.sent,tt=ct.filter(function(xt){return xt.kind==="audiooutput"}).map(function(xt){return new Mc(xt.deviceId,xt.groupId,xt.kind,xt.label)}),nt(tt),Mn.getTracks().forEach(function(xt){return xt.stop()});case 2:case"end":return Fe.stop()}},Nt)}));return function(Nt){return bt.apply(this,arguments)}}()).catch(function(bt){console.error("Error in getPlaybackDevices()",bt),tn(bt)})});case 1:qe.next=4;break;case 2:return qe.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=qe.sent,tt=ue.filter(function(nt){return nt.kind==="audiooutput"}).map(function(nt){return new Mc(nt.deviceId,nt.groupId,nt.kind,nt.label)});case 4:return qe.abrupt("return",tt);case 5:qe.prev=5,Ie=qe.catch(0),pe=Ie.message,Ie instanceof TypeError&&Ie.name==="TypeError"&&(pe="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(pe));case 6:case"end":return qe.stop()}},We,null,[[0,5]])})),function(){return ke.apply(this,arguments)})},{key:"getDevices",value:($e=(0,y.A)(E().mark(function We(){var Ae,tt,ue,pe,Ie,qe,nt;return E().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tn.prev=0,tn.next=1,navigator.mediaDevices.enumerateDevices();case 1:Ae=tn.sent,tt=[],ue=At(Ae);try{for(ue.s();!(pe=ue.n()).done;)Ie=pe.value,tt.push(new yo(Ie.deviceId,Ie.groupId,Ie.kind,Ie.label))}catch(bt){ue.e(bt)}finally{ue.f()}return tn.abrupt("return",tt);case 2:tn.prev=2,nt=tn.catch(0),qe=nt.message,nt instanceof TypeError&&(qe=nt.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":nt.message),console.error("An error occurred in getDevices(), ".concat(qe));case 3:case"end":return tn.stop()}},We,null,[[0,2]])})),function(){return $e.apply(this,arguments)})},{key:"on",value:function(We,Ae){if(We!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on(We,Ae)}},{key:"addDeviceChangeEvent",value:function(){var We=this;if(!ta){this.getDevices().then(function(tt){We.devices=tt});try{navigator.mediaDevices.addEventListener("devicechange",function(){var tt=(0,y.A)(E().mark(function ue(pe){var Ie,qe,nt,tn,bt,Nt;return E().wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:return Ie=We.devices,Mn.next=1,We.getDevices();case 1:We.devices=Mn.sent,qe=new Array,nt=At(We.devices),Mn.prev=2,bt=E().mark(function ct(){var Fe;return E().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:Fe=tn.value,Ie.filter(function(wn){return wn.deviceId==Fe.deviceId&&wn.kind==Fe.kind}).length==0?qe.push(Fe):Ie=Ie.filter(function(wn){return!(wn.deviceId==Fe.deviceId&&wn.kind==Fe.kind)});case 1:case"end":return xt.stop()}},ct)}),nt.s();case 3:if((tn=nt.n()).done){Mn.next=5;break}return Mn.delegateYield(bt(),"t0",4);case 4:Mn.next=3;break;case 5:Mn.next=7;break;case 6:Mn.prev=6,Nt=Mn.catch(2),nt.e(Nt);case 7:return Mn.prev=7,nt.f(),Mn.finish(7);case 8:qe.length!=0&&We.eventEmitter.emit("device-changed",{devices:We.devices}),Ie.length!=0&&We.eventEmitter.emit("device-changed",{devices:We.devices});case 9:case"end":return Mn.stop()}},ue,null,[[2,6,7,8]])}));return function(ue){return tt.apply(this,arguments)}}()),ta=!0}catch(tt){var Ae=tt.message;tt instanceof TypeError&&(Ae=tt.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":tt.message),console.error("An error occurred in device-change event, ".concat(Ae))}}}},{key:"off",value:function(We,Ae){if(We!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off(We,Ae)}},{key:"checkPermissions",value:(Se=(0,y.A)(E().mark(function We(Ae){var tt,ue,pe,Ie,qe;return E().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(Ae||(Ae=qs.AUDIO_AND_VIDEO),tt=new Map,!Ae.includes(qs.AUDIO)&&!Ae.includes(qs.AUDIO_AND_VIDEO)){nt.next=5;break}return ue=!0,nt.prev=1,nt.next=2,navigator.permissions.query({name:"microphone"});case 2:(pe=nt.sent).state!="prompt"&&pe.state!="denied"||(ue=!1),nt.next=4;break;case 3:throw nt.prev=3,nt.catch(1),Error("Browser does not support microphone permission check");case 4:tt.set(qs.AUDIO,ue);case 5:if(!Ae.includes(qs.VIDEO)&&!Ae.includes(qs.AUDIO_AND_VIDEO)){nt.next=10;break}return Ie=!0,nt.prev=6,nt.next=7,navigator.permissions.query({name:"camera"});case 7:(qe=nt.sent).state!="prompt"&&qe.state!="denied"||(Ie=!1),nt.next=9;break;case 8:throw nt.prev=8,nt.catch(6),Error("Browser does not support camera permission check");case 9:tt.set(qs.VIDEO,Ie);case 10:return nt.abrupt("return",tt);case 11:case"end":return nt.stop()}},We,null,[[1,3],[6,8]])})),function(We){return Se.apply(this,arguments)})},{key:"requestPermission",value:(xe=(0,y.A)(E().mark(function We(Ae){var tt,ue,pe,Ie,qe,nt,tn,bt,Nt,Mn,ct,Fe,xt,wn,cn,vn,or,Lr,Tn;return E().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:if(Ae||(Ae=qs.AUDIO_AND_VIDEO),tt=new Map,!Ae.includes(qs.AUDIO_AND_VIDEO)){yn.next=12;break}return pe={audio:!0,video:!0},Ie=!0,yn.prev=1,yn.next=2,navigator.mediaDevices.getUserMedia(pe);case 2:ue=yn.sent,yn.next=11;break;case 3:if(yn.prev=3,!((wn=yn.catch(1))instanceof DOMException)){yn.next=9;break}cn=wn.name,yn.next=cn==="NotAllowedError"?4:cn==="NotReadableError"?5:cn==="NotFoundError"?6:7;break;case 4:return wn.message==="Permission denied by system"&&(qe=Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",8);case 5:return qe=Fa(wn,"video"),yn.abrupt("continue",8);case 6:return qe=Ir.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(qe=Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",8);case 7:qe=wn.message;case 8:yn.next=10;break;case 9:qe=wn instanceof TypeError&&wn.name==="TypeError"?Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:wn.message;case 10:Ie=!1,qe&&console.error("An error occurred in request permission, ".concat(qe));case 11:ue&&setTimeout(function(){ue.getTracks().forEach(function(Nr){Nr.stop()})},100),tt.set(qs.AUDIO_AND_VIDEO,Ie);case 12:if(!Ae.includes(qs.VIDEO)){yn.next=24;break}return tn={audio:!1,video:!0},bt=!0,yn.prev=13,yn.next=14,navigator.mediaDevices.getUserMedia(tn);case 14:nt=yn.sent,yn.next=23;break;case 15:if(yn.prev=15,!((vn=yn.catch(13))instanceof DOMException)){yn.next=21;break}or=vn.name,yn.next=or==="NotAllowedError"?16:or==="NotReadableError"?17:or==="NotFoundError"?18:19;break;case 16:return vn.message==="Permission denied by system"&&(Nt=Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",20);case 17:return Nt=Fa(vn,"video"),yn.abrupt("continue",20);case 18:return Nt=Ir.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Nt=Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",20);case 19:Nt=vn.message;case 20:yn.next=22;break;case 21:Nt=vn instanceof TypeError&&vn.name==="TypeError"?Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:vn.message;case 22:bt=!1,Nt&&console.error("An error occurred in request permission, ".concat(Nt));case 23:nt&&nt.getTracks().forEach(function(Nr){Nr.stop()}),tt.set(qs.VIDEO,bt);case 24:if(!Ae.includes(qs.AUDIO)){yn.next=36;break}return ct={audio:!0,video:!1},Fe=!0,yn.prev=25,yn.next=26,navigator.mediaDevices.getUserMedia(ct);case 26:Mn=yn.sent,yn.next=35;break;case 27:if(yn.prev=27,!((Lr=yn.catch(25))instanceof DOMException)){yn.next=33;break}Tn=Lr.name,yn.next=Tn==="NotAllowedError"?28:Tn==="NotReadableError"?29:Tn==="NotFoundError"?30:31;break;case 28:return Lr.message==="Permission denied by system"&&(xt=Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",32);case 29:return xt=Fa(Lr,"audio"),yn.abrupt("continue",32);case 30:return xt=Ir.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(xt=Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",32);case 31:xt=Lr.message;case 32:yn.next=34;break;case 33:xt=Lr instanceof TypeError&&Lr.name==="TypeError"?Ir.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:Lr.message;case 34:Fe=!1,xt&&console.error("An error occurred in request permission, ".concat(xt));case 35:Mn&&Mn.getTracks().forEach(function(Nr){Nr.stop()}),tt.set(qs.AUDIO,Fe);case 36:return yn.abrupt("return",tt);case 37:case"end":return yn.stop()}},We,null,[[1,3],[13,15],[25,27]])})),function(We){return xe.apply(this,arguments)})},{key:"isInt",value:function(We){return typeof We=="number"&&We%1==0}},{key:"getNetworkStats",value:(Ee=(0,y.A)(E().mark(function We(){var Ae,tt,ue,pe,Ie,qe,nt=arguments;return E().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tt=(Ae=nt.length>0&&nt[0]!==void 0?nt[0]:{}).timeoutDuration,ue=Ae.baseUrl,pe=ue===void 0?"api.videosdk.live":ue,tt&&this.isInt(tt)||(tt=6e4),Ie=new Promise(function(bt,Nt){setTimeout(function(){Nt("Not able to get NetworkStats due to timeout")},tt)}),qe=new Promise(function(bt,Nt){if(navigator.onLine){var Mn=new yr({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}],uploadApiUrl:"https://".concat(pe,"/test-upload-speed"),downloadApiUrl:"https://".concat(pe,"/test-download-speed")});Mn.isRunning?(Mn.onFinish=function(ct){bt({downloadSpeed:parseFloat(Number(ct.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(ct.getUploadBandwidth()/1048576).toFixed(2))})},Mn.onError=function(ct){Nt("Not able to get NetworkStats")}):Nt("Not able to get NetworkStats")}else Nt("Not able to get NetworkStats due to no Network")}),tn.abrupt("return",Promise.race([qe,Ie]));case 1:case"end":return tn.stop()}},We,this)})),function(){return Ee.apply(this,arguments)})},{key:"checkConnection",value:(de=(0,y.A)(E().mark(function We(){var Ae,tt,ue,pe,Ie,qe,nt=arguments;return E().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tt=(Ae=nt.length>0&&nt[0]!==void 0?nt[0]:{}).timeoutDuration,ue=Ae.baseUrl,pe=ue===void 0?"api.videosdk.live":ue,tt&&this.isInt(tt)||(tt=6e4),Ie=new Promise(function(bt,Nt){setTimeout(function(){Nt("TimeoutError: NetworkStats timeout")},tt)}),qe=new Promise(function(bt,Nt){navigator.onLine?fetch("https://".concat(pe,"/ping")).then(function(Mn){Mn.text().then(function(ct){ct=="pong"?bt("Connection established"):Nt("ConnectionError: Server unreachable")})}).catch(function(Mn){Nt("ConnectionError: Server unreachable")}):Nt("NetworkError: Offline")}),tn.abrupt("return",Promise.race([qe,Ie]));case 1:case"end":return tn.stop()}},We,this)})),function(){return de.apply(this,arguments)})},{key:"analytics",value:function(We){var Ae,tt,ue;!We&&navigator&&navigator.userAgent&&(tt=navigator.userAgent,delete(ue=m().parse(tt)).engine);try{var pe;(pe=We)!==null&&pe!==void 0&&pe.browserUserAgent||(tt=navigator.userAgent,delete(ue=m().parse(tt)).engine)}catch{}We&&We.rawUserAgent&&(tt=We.rawUserAgent,delete(ue=m().parse(tt)).engine),We||(We={});var Ie={};Ie.sdkType=We.sdkType||"javascript",Ie.sdkVersion=We.sdkVersion||"0.2.14",Ie.platform=We.platform||((Ae=ue)===null||Ae===void 0||(Ae=Ae.platform)===null||Ae===void 0?void 0:Ae.type)||"",We.browserUserAgent=="null"?Ie.browserUserAgent=void 0:Ie.browserUserAgent=ue,We.deviceUserAgent&&(Ie.deviceUserAgent=We.deviceUserAgent),this._deviceInfo=Ie}},{key:"initMeeting",value:function(We){var Ae,tt=We.meetingId,ue=We.customCameraVideoTrack,pe=ue===void 0?void 0:ue,Ie=We.customMicrophoneAudioTrack,qe=Ie===void 0?void 0:Ie,nt=We.autoConsume,tn=nt===void 0||nt,bt=We.preferredProtocol,Nt=We.mode,Mn=We.multiStream,ct=Mn===void 0||Mn,Fe=We.participantId,xt=We.name,wn=We.micEnabled,cn=We.webcamEnabled,vn=We.maxResolution,or=We.metaData,Lr=We.chatEnabled,Tn=We.useSpartialLayerAnalytics,yn=We.signalingBaseUrl,Nr=We.defaultCamera,br=We.debugMode,ar=br===void 0||br;if(!tt)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var $n=Fe?Fe.toString():I()({length:8}).toLowerCase(),Rn=xt||I()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof bt!="string"&&(bt="UDP_OVER_TCP"),(Ae=bt)===null||Ae===void 0?void 0:Ae.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":bt=bt.toUpperCase();break;default:bt="UDP_OVER_TCP"}if(Nt||(Nt=On.nI.SEND_AND_RECV),Nt!==On.nI.SEND_AND_RECV&&Nt!==On.nI.SIGNALLING_ONLY&&Nt!==On.nI.RECV_ONLY&&Nt!==On.nI.VIEWER&&Nt!==On.nI.CONFERENCE)throw new Error('"mode" can only be either '.concat(On.nI.SEND_AND_RECV," or ").concat(On.nI.SIGNALLING_ONLY," or ").concat(On.nI.RECV_ONLY," "));if(or!=null&&(0,N.A)(or)!="object")throw new Error('"metaData" can only be object.');var qr=this._deviceInfo.sdkType==="react-native",wa=qr?Nr?Nr==="front"?1:0:pe?pe.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:qr?1:0:0,Ws=new Ft.default({roomId:tt,peerId:$n,secret:this.apiKey,device:"unknown",displayName:Rn,mode:Nt,useSimulcast:ct,produce:!0,consume:!0,datachannel:Lr!==!1,micEnabled:wn!==!1,webcamEnabled:cn!==!1,maxResolution:vn||"hd",useSpartialLayerAnalytics:Tn,_deviceInfo:this._deviceInfo,customCameraVideoTrack:pe,customMicrophoneAudioTrack:qe,autoConsume:tn,preferredProtocol:bt,signalingBaseUrl:yn,metaData:or,defaultCameraIndex:wa,debugMode:ar,keyProvider:this.keyProvider});Ut.roomClient=Ws;var Li=new Zt({id:$n,displayName:Rn,local:!0,mode:Nt,metaData:or});return new ws(tt,Li,Ws)}},{key:"createCameraVideoTrack",value:(X=(0,y.A)(E().mark(function We(Ae){var tt,ue,pe,Ie,qe,nt,tn,bt,Nt,Mn,ct,Fe,xt,wn,cn,vn,or,Lr;return E().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:if(tt=Ae.cameraId,ue=tt===void 0?void 0:tt,pe=Ae.encoderConfig,Ie=pe===void 0?void 0:pe,qe=Ae.facingMode,nt=qe===void 0?void 0:qe,tn=Ae.optimizationMode,bt=tn===void 0?void 0:tn,Nt=Ae.multiStream,Mn=Nt===void 0||Nt,!ue){Tn.next=2;break}return Tn.next=1,this.getCameras();case 1:(ct=Tn.sent)&&ct.some(function(yn){return yn.deviceId})&&(ct.some(function(yn){return yn.deviceId===ue})||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."));case 2:return Tn.prev=2,Fe=Ie?ko.$.videoProfiles[Ie]:ko.$.videoProfiles.h360p_w640p,console.log("VIDEO PROFILE",{videoProfile:Fe,encoderConfig:Ie}),xt={video:{deviceId:ue||void 0,facingMode:nt||void 0,width:Fe.width,height:Fe.height,frameRate:Fe.frameRate}},Tn.next=3,(0,dc.lp)(xt);case 3:return wn=Tn.sent,bt&&(wn.contentHint=bt),wn.encoderConfig=Ie||"h360p_w640p",wn.contentHint=bt||"",wn.multiStream=Mn,wn.cameraId=ue,Tn.abrupt("return",wn);case 4:if(Tn.prev=4,(or=Tn.catch(2)).name!=="SecurityError"){Tn.next=5;break}cn=Ir.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,Tn.next=13;break;case 5:if(or.name!=="DOMException"){Tn.next=6;break}cn=Ir.q.ERROR_RN_CAMERA_NOT_FOUND.message,Tn.next=13;break;case 6:if(!(or instanceof DOMException)){Tn.next=12;break}Lr=or.name,Tn.next=Lr==="NotAllowedError"?7:Lr==="NotReadableError"?8:Lr==="NotFoundError"?9:10;break;case 7:return cn=ja(or,"video"),Tn.abrupt("continue",11);case 8:return cn=Fa(or,"video"),Tn.abrupt("continue",11);case 9:return cn=Ir.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(cn=Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Tn.abrupt("continue",11);case 10:return cn=or.message,Tn.abrupt("continue",11);case 11:Tn.next=13;break;case 12:or.message=="getUserMedia is not implemented in this browser"?(vn=Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,cn=vn.message):cn=or.message;case 13:console.error("An error occurred in creating video track, ".concat(cn));case 14:case"end":return Tn.stop()}},We,this,[[2,4]])})),function(We){return X.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(K=(0,y.A)(E().mark(function We(Ae){var tt,ue,pe,Ie,qe,nt,tn,bt,Nt,Mn,ct;return E().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return tt=Ae.encoderConfig,ue=tt===void 0?void 0:tt,pe=Ae.optimizationMode,Ie=pe===void 0?void 0:pe,qe=Ae.withAudio,nt=qe===void 0?"enable":qe,tn=Ae.multiStream,bt=tn!==void 0&&tn,Nt=ue?ko.$.screenShareProfiles[ue]:ko.$.screenShareProfiles.h720p_15fps,Mn={audio:nt==="enable",video:{width:Nt.resolution.width,height:Nt.resolution.height,frameRate:Nt.frameRate}},Fe.next=1,(0,dc.Zu)(Mn);case 1:return ct=Fe.sent,Ie&&(ct.contentHint=Ie),ct.multiStream=bt,Fe.abrupt("return",ct);case 2:case"end":return Fe.stop()}},We)})),function(We){return K.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(G=(0,y.A)(E().mark(function We(Ae){var tt,ue,pe,Ie,qe,nt,tn,bt,Nt,Mn,ct,Fe,xt,wn;return E().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:if(tt=Ae.noiseConfig,ue=tt===void 0?void 0:tt,pe=Ae.encoderConfig,Ie=pe===void 0?void 0:pe,qe=Ae.microphoneId,!(nt=qe===void 0?void 0:qe)){cn.next=2;break}return cn.next=1,this.getMicrophones();case 1:(tn=cn.sent)&&tn.some(function(vn){return vn.deviceId})&&(tn.some(function(vn){return vn.deviceId===nt})||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 2:return cn.prev=2,bt=Ie?ko.$.audioProfiles[Ie]:ko.$.audioProfiles.speech_standard,Nt={audio:{deviceId:nt,sampleRate:bt.sampleRate,echoCancellation:ue?ue&&ue.acousticEchoCancellation:bt.echoCancellation,autoGainControl:ue?ue&&ue.autoGainControl:bt.autoGainControl,noiseSuppression:ue?ue&&ue.noiseSuppression:bt.noiseSuppression,channelCount:bt.channelCount}},cn.next=3,(0,dc.lp)(Nt);case 3:return(Mn=cn.sent).encoderConfig=Ie||"speech_standard",Mn.microphoneId=nt,cn.abrupt("return",Mn);case 4:if(cn.prev=4,(xt=cn.catch(2)).name!=="SecurityError"){cn.next=5;break}ct=Ir.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,cn.next=13;break;case 5:if(xt.name!=="DOMException"){cn.next=6;break}ct=Ir.q.ERROR_RN_MIC_NOT_FOUND.message,cn.next=13;break;case 6:if(!(xt instanceof DOMException)){cn.next=12;break}wn=xt.name,cn.next=wn==="NotAllowedError"?7:wn==="NotReadableError"?8:wn==="NotFoundError"?9:10;break;case 7:return ct=ja(xt,"audio"),cn.abrupt("continue",11);case 8:return ct=Fa(xt,"audio"),cn.abrupt("continue",11);case 9:return ct=Ir.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(ct=Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),cn.abrupt("continue",11);case 10:return ct=xt.message,cn.abrupt("continue",11);case 11:cn.next=13;break;case 12:xt.message=="getUserMedia is not implemented in this browser"?(Fe=Ir.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,ct=Fe.message):ct=xt.message;case 13:console.error("An error occurred in creating audio track, ".concat(ct));case 14:case"end":return cn.stop()}},We,this,[[2,4]])})),function(We){return G.apply(this,arguments)})}]);var G,K,X,de,Ee,xe,Se,$e,ke,Oe,Je}();function ja(G,K){return(G.message==="Permission denied"||G.message==="Permission dismissed"?K==="video"?Ir.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:Ir.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:G.message.includes("The request is not allowed by the user agent")?K==="video"?Ir.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:Ir.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:G.message==="Permission denied by system"?K==="video"?Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:K==="video"?Ir.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:Ir.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED).message}function Fa(G,K){return(G.message==="Device in use"?K==="video"?Ir.q.ERROR_CAMERA_IN_USE:Ir.q.ERROR_MICROPHONE_IN_USE:K==="video"?Ir.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:Ir.q.ERROR_MICROPHONE_IN_USE).message}(0,v.A)(oa,"devices",[]),(0,v.A)(oa,"eventEmitter",new Tt),(0,v.A)(oa,"Constants",{errors:Ir.s,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},characterState:et,characterMode:{TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},hlsEvents:Pl.V,transcriptionEvents:{TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},modes:On.nI,permission:qs});var Gr=oa})(),C})())}(qv)),qv.exports}var Au=jB();function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Nm.apply(null,arguments)}var na="videosdk-live-react-sdk",zt={"participant-joined":na+"-participant-joined","participant-left":na+"-participant-left","speaker-changed":na+"-speaker-changed","presenter-changed":na+"-presenter-changed","main-participant-changed":na+"-main-participant-changed","entry-requested":na+"-entry-requested","entry-responded":na+"-entry-responded","recording-started":na+"-recording-started","recording-stopped":na+"-recording-stopped","chat-message":na+"-chat-message","meeting-joined":na+"-meeting-joined","meeting-left":na+"-meeting-left","live-stream-started":na+"-live-stream-started","live-stream-stopped":na+"-live-stream-stopped","video-state-changed":na+"-video-state-changed","video-seeked":na+"-video-seeked","webcam-requested":na+"-webcam-requested","mic-requested":na+"-mic-requested","pin-state-changed":na+"-pin-state-changed","connection-open":na+"-connection-open","connection-close":na+"-connection-close","switch-meeting":na+"-switch-meeting",error:na+"-error","hls-started":na+"-hls-started","hls-stopped":na+"-hls-stopped","hls-state-changed":na+"-hls-state-changed","recording-state-changed":na+"-recording-state-changed","livestream-state-changed":na+"-livestream-state-changed","meeting-state-changed":na+"-meeting-state-changed","participant-mode-changed":na+"-participant-mode-changed","transcription-state-changed":na+"-transcription-state-changed","transcription-text":na+"-transcription-text","character-joined":na+"-character-joined","character-left":na+"-character-left","whiteboard-started":na+"-whiteboard-started","whiteboard-stopped":na+"-whiteboard-stopped","paused-all-streams":na+"-paused-all-streams","resumed-all-streams":na+"-resumed-all-streams","media-relay-started":na+"-media-relay-started","media-relay-stopped":na+"-media-relay-stopped","media-relay-error":na+"-media-relay-error","media-relay-request-response":na+"-media-relay-request-response","media-relay-request-received":na+"-media-relay-request-received"},Lt=new MB;Lt.setMaxListeners(9999);var pE=Z.createContext(),dg=function(t){var r=t===void 0?{}:t,s=r.onParticipantJoined,l=s===void 0?function(){}:s,h=r.onParticipantLeft,C=h===void 0?function(){}:h,N=r.onSpeakerChanged,y=N===void 0?function(){}:N,u=r.onPresenterChanged,R=u===void 0?function(){}:u,v=r.onMainParticipantChanged,b=v===void 0?function(){}:v,E=r.onEntryRequested,_=E===void 0?function(){}:E,m=r.onEntryResponded,k=m===void 0?function(){}:m,w=r.onPausedAllStreams,F=w===void 0?function(){}:w,g=r.onResumedAllStreams,A=g===void 0?function(){}:g,P=r.onRecordingStarted,H=P===void 0?function(){}:P,D=r.onRecordingStopped,S=D===void 0?function(){}:D,x=r.onChatMessage,d=x===void 0?function(){}:x,T=r.onMeetingJoined,O=T===void 0?function(){}:T,M=r.onMeetingLeft,I=M===void 0?function(){}:M,U=r.onLiveStreamStarted,z=U===void 0?function(){}:U,$=r.onLiveStreamStopped,q=$===void 0?function(){}:$,ae=r.onVideoStateChanged,Q=ae===void 0?function(){}:ae,ve=r.onVideoSeeked,we=ve===void 0?function(){}:ve,Re=r.onWebcamRequested,me=Re===void 0?function(){}:Re,Ce=r.onMicRequested,Be=Ce===void 0?function(){}:Ce,be=r.onPinStateChanged,Ye=be===void 0?function(){}:be,Qe=r.onConnectionOpen,Ge=Qe===void 0?function(){}:Qe,He=r.onConnetionClose,Te=He===void 0?function(){}:He,dt=r.onSwitchMeeting,_t=dt===void 0?function(){}:dt,on=r.onError,ln=on===void 0?function(){}:on,Pn=r.onHlsStarted,En=Pn===void 0?function(){}:Pn,rn=r.onHlsStopped,Ne=rn===void 0?function(){}:rn,Me=r.onHlsStateChanged,Ze=Me===void 0?function(){}:Me,Ft=r.onRecordingStateChanged,Tt=Ft===void 0?function(){}:Ft,St=r.onLivestreamStateChanged,un=St===void 0?function(){}:St,Sn=r.onMeetingStateChanged,Ut=Sn===void 0?function(){}:Sn,nr=r.onParticipantModeChanged,Ar=nr===void 0?function(){}:nr,Sr=r.onCharacterJoined,Ur=Sr===void 0?function(){}:Sr,xr=r.onCharacterLeft,Or=xr===void 0?function(){}:xr,Kr=r.onMediaRelayStarted,va=Kr===void 0?function(){}:Kr,ra=r.onMediaRelayStopped,ua=ra===void 0?function(){}:ra,jn=r.onMediaRelayError,Ha=jn===void 0?function(){}:jn,Ea=r.onMediaRelayRequestResponse,Qr=Ea===void 0?function(){}:Ea,gr=r.onMediaRelayRequestReceived,rt=gr===void 0?function(){}:gr;return Z.useEffect(function(){return Lt.on(zt["participant-joined"],l),Lt.on(zt["participant-left"],C),Lt.on(zt["speaker-changed"],y),Lt.on(zt["presenter-changed"],R),Lt.on(zt["main-participant-changed"],b),Lt.on(zt["entry-requested"],_),Lt.on(zt["entry-responded"],k),Lt.on(zt["paused-all-streams"],F),Lt.on(zt["resumed-all-streams"],A),Lt.on(zt["recording-started"],H),Lt.on(zt["recording-stopped"],S),Lt.on(zt["chat-message"],d),Lt.on(zt["meeting-joined"],O),Lt.on(zt["meeting-left"],I),Lt.on(zt["live-stream-started"],z),Lt.on(zt["live-stream-stopped"],q),Lt.on(zt["video-state-changed"],Q),Lt.on(zt["video-seeked"],we),Lt.on(zt["webcam-requested"],me),Lt.on(zt["mic-requested"],Be),Lt.on(zt["pin-state-changed"],Ye),Lt.on(zt["connection-open"],Ge),Lt.on(zt["connection-close"],Te),Lt.on(zt["switch-meeting"],_t),Lt.on(zt.error,ln),Lt.on(zt["hls-started"],En),Lt.on(zt["hls-stopped"],Ne),Lt.on(zt["hls-state-changed"],Ze),Lt.on(zt["recording-state-changed"],Tt),Lt.on(zt["livestream-state-changed"],un),Lt.on(zt["meeting-state-changed"],Ut),Lt.on(zt["participant-mode-changed"],Ar),Lt.on(zt["character-joined"],Ur),Lt.on(zt["character-left"],Or),Lt.on(zt["media-relay-started"],va),Lt.on(zt["media-relay-stopped"],ua),Lt.on(zt["media-relay-error"],Ha),Lt.on(zt["media-relay-request-response"],Qr),Lt.on(zt["media-relay-request-received"],rt),function(){Lt.off(zt["meeting-state-changed"],Ut),Lt.off(zt["participant-joined"],l),Lt.off(zt["participant-left"],C),Lt.off(zt["speaker-changed"],y),Lt.off(zt["presenter-changed"],R),Lt.off(zt["main-participant-changed"],b),Lt.off(zt["entry-requested"],_),Lt.off(zt["entry-responded"],k),Lt.off(zt["paused-all-streams"],F),Lt.off(zt["resumed-all-streams"],A),Lt.off(zt["recording-started"],H),Lt.off(zt["recording-stopped"],S),Lt.off(zt["chat-message"],d),Lt.off(zt["meeting-joined"],O),Lt.off(zt["meeting-left"],I),Lt.off(zt["live-stream-started"],z),Lt.off(zt["live-stream-stopped"],q),Lt.off(zt["video-state-changed"],Q),Lt.off(zt["video-seeked"],we),Lt.off(zt["webcam-requested"],me),Lt.off(zt["mic-requested"],Be),Lt.off(zt["pin-state-changed"],Ye),Lt.off(zt["connection-open"],Ge),Lt.off(zt["connection-close"],Te),Lt.off(zt["switch-meeting"],_t),Lt.off(zt.error,ln),Lt.off(zt["hls-started"],En),Lt.off(zt["hls-stopped"],Ne),Lt.off(zt["hls-state-changed"],Ze),Lt.off(zt["recording-state-changed"],Tt),Lt.off(zt["livestream-state-changed"],un),Lt.off(zt["participant-mode-changed"],Ar),Lt.off(zt["character-joined"],Ur),Lt.off(zt["character-left"],Or),Lt.off(zt["media-relay-started"],va),Lt.off(zt["media-relay-stopped"],ua),Lt.off(zt["media-relay-error"],Ha),Lt.off(zt["media-relay-request-response"],Qr),Lt.off(zt["media-relay-request-received"],rt)}},[]),Z.useContext(pE)},LB="0.3.14",IB=function(t){var r=t.children,s=t.config,l=t.token,h=t.joinWithoutUserInteraction,C=t.reinitialiseMeetingOnConfigChange,N=t.deviceInfo,y=t.keyProvider,u=Z.useState(null),R=u[0],v=u[1],b=Z.useState(null),E=b[0],_=b[1],m=Z.useState(null),k=m[0],w=m[1],F=Z.useState(null),g=F[0],A=F[1],P=Z.useState(null),H=P[0],D=P[1],S=Z.useState(!1),x=S[0],d=S[1],T=Z.useState(!1),O=T[0],M=T[1],I=Z.useState(!1),U=I[0],z=I[1],$=Z.useState(!1),q=$[0],ae=$[1],Q=Z.useState([]),ve=Q[0],we=Q[1],Re=Z.useState(new Map),me=Re[0],Ce=Re[1],Be=Z.useState(new Map),be=Be[0],Ye=Be[1],Qe=Z.useState(new Map),Ge=Qe[0],He=Qe[1],Te=Z.useState(!1),dt=Te[0],_t=Te[1],on=Z.useState(new Map),ln=on[0],Pn=on[1],En=Z.useState(!1),rn=En[0],Ne=En[1],Me=Z.useState(!1),Ze=Me[0],Ft=Me[1],Tt=Z.useState("RECORDING_STOPPED"),St=Tt[0],un=Tt[1],Sn=Z.useState("LIVESTREAM_STOPPED"),Ut=Sn[0],nr=Sn[1],Ar=Z.useState("HLS_STOPPED"),Sr=Ar[0],Ur=Ar[1],xr=Z.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Or=xr[0],Kr=xr[1],va=Z.useState("TRANSCRIPTION_STOPPED"),ra=va[0],ua=va[1],jn=Z.useRef(),Ha=Z.useRef(),Ea=Z.useRef(),Qr=Z.useRef(),gr=Z.useRef(),rt=Z.useRef(y),ut=Z.useRef(s),Zt=Z.useRef(l),Pt=Z.useRef(!1),sn=Z.useRef(),nn=Z.useMemo(function(){return C},[]);Z.useEffect(function(){jn.current=R},[R]),Z.useEffect(function(){Ha.current=x},[x]),Z.useEffect(function(){Ea.current=O},[O]),Z.useEffect(function(){Qr.current=U},[U]),Z.useEffect(function(){gr.current=q},[q]),Z.useEffect(function(){ut.current=s},[s]),Z.useEffect(function(){Zt.current=l},[l]),Z.useEffect(function(){sn.current=Ze},[Ze]);var et=function(){v(null),_(null),w(null),A(null),D(null),d(!1),M(!1),z(!1),ae(!1),we([]),_t(!1),Ce(new Map),Ye(new Map),He(new Map),Pn(new Map),Ne(!1),Ft(!1),un("RECORDING_STOPPED"),nr("LIVESTREAM_STOPPED"),Ur("HLS_STOPPED"),ua("TRANSCRIPTION_STOPPED"),Kr({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},On=function(ye){Ce(function(Ot){Ot.set(ye.id,ye);var rr=new Map(Ot);return rr}),Lt.emit(zt["participant-joined"],ye)},Ln=function(ye){Ce(function(Ot){Ot.delete(ye.id);var rr=new Map(Ot);return rr}),Lt.emit(zt["participant-left"],ye)},Jn=function(ye){var Ot,rr;D(ye),z(ye===(jn==null||(Ot=jn.current)===null||Ot===void 0||(rr=Ot.localParticipant)===null||rr===void 0?void 0:rr.id)),Lt.emit(zt["presenter-changed"],ye)},vr=function(ye){w(ye),Lt.emit(zt["main-participant-changed"],ye)},Qt=function(ye){A(ye),Lt.emit(zt["speaker-changed"],ye)},Rt=function(ye){we(function(Ot){return[].concat(Ot,[ye])}),Lt.emit(zt["chat-message"],ye)},Un=function(ye){Lt.emit(zt["entry-requested"],ye)},In=function(ye,Ot){Lt.emit(zt["entry-responded"],ye,Ot)},Nn=function(){ae(!0),Lt.emit(zt["recording-started"])},Fr=function(){ae(!1),Lt.emit(zt["recording-stopped"])},Mr=function(ye){ye.track.readyState==="live"&&(ye.kind==="video"?M(!0):ye.kind==="audio"&&d(!0))},Hr=function(ye){ye.kind==="video"?M(!1):ye.kind==="audio"&&d(!1)},cr=function(ye){_t(!0),Lt.emit(zt["live-stream-started"],ye)},Kn=function(){_t(!1),Lt.emit(zt["live-stream-stopped"])},xa=function(ye){Ft(!0),Lt.emit(zt["hls-started"],ye)},ma=function(){Ft(!1),Lt.emit(zt["hls-stopped"])},La=function(ye){Lt.emit(zt["video-state-changed"],ye)},Va=function(ye){Lt.emit(zt["video-seeked"],ye)},Ci=function(ye){Lt.emit(zt["webcam-requested"],ye)},xs=function(ye){Lt.emit(zt["mic-requested"],ye)},ii=function(ye){ye.switchRoomId?(we(function(Ot){return[].concat(Ot,ye.messages)}),Lt.emit(zt["meeting-joined"],ye)):(Pt.current=!0,we(function(Ot){return[].concat(Ot,ye.messages)}),Lt.emit(zt["meeting-joined"],ye),Ne(!0))},Ti=function(){Lt.emit(zt["meeting-left"]);var ye=jn.current;if(ye){var Ot;typeof ye?.off=="function"&&(ye.off("meeting-state-changed",Hn),ye.off("participant-joined",On),ye.off("participant-left",Ln),ye.off("presenter-changed",Jn),ye.off("main-participant-changed",vr),ye.off("speaker-changed",Qt),ye.off("entry-requested",Un),ye.off("entry-responded",In),ye.off("chat-message",Rt),ye.off("recording-started",Nn),ye.off("recording-stopped",Fr),ye.off("meeting-joined",ii),ye.off("meeting-left",Ti),ye.off("livestream-started",cr),ye.off("livestream-stopped",Kn),ye.off("video-state-changed",La),ye.off("video-seeked",Va),ye.off("webcam-requested",Ci),ye.off("mic-requested",xs),ye.off("pin-state-changed",Fs),ye.off("paused-all-streams",vi),ye.off("resumed-all-streams",ea),ye.off("connection-open",Hs),ye.off("connection-close",Ks),ye.off("switch-meeting",pn),ye.off("error",Xn),ye.off("hls-started",xa),ye.off("hls-stopped",ma),ye.off("recording-state-changed",Wn),ye.off("livestream-state-changed",dr),ye.off("hls-state-changed",Dn),ye.off("participant-mode-changed",ya),ye.off("whiteboard-stopped",Fn),ye.off("whiteboard-started",Cr),ye.off("transcription-state-changed",Wr),ye.off("character-joined",Zr),ye.off("character-left",Da)),typeof(ye==null||(Ot=ye.localParticipant)===null||Ot===void 0?void 0:Ot.off)=="function"&&(ye.localParticipant.off("stream-enabled",Mr),ye.localParticipant.off("stream-disabled",Hr)),et()}},Fs=function(ye){var Ot=ye.participantId,rr=ye.state,ha=ye.pinnedBy;He(function(es){!rr.cam&&!rr.share?es.delete(Ot):es.set(Ot,rr);var ws=new Map(es);return ws}),Lt.emit(zt["pin-state-changed"],{participantId:Ot,state:rr,pinnedBy:ha})},vi=function(ye){var Ot=ye.kind;Lt.emit(zt["paused-all-streams"],{kind:Ot})},ea=function(ye){var Ot=ye.kind;Lt.emit(zt["resumed-all-streams"],{kind:Ot})},Hs=function(ye){Pn(function(Ot){Ot.set(ye.id,ye);var rr=new Map(Ot);return rr}),Lt.emit(zt["connection-open"],ye)},Ks=function(ye){Pn(function(Ot){Ot.delete(ye);var rr=new Map(Ot);return rr}),Lt.emit(zt["connection-close"],ye)},pn=function(ye){Lt.emit(zt["switch-meeting"],ye)},Xn=function(ye){Lt.emit(zt.error,ye)},Wn=function(ye){un(ye?.status),Lt.emit(zt["recording-state-changed"],ye)},dr=function(ye){nr(ye?.status),Lt.emit(zt["livestream-state-changed"],ye)},Dn=function(ye){Ur(ye?.status),ye?.status=="HLS_PLAYABLE"?Kr({downstreamUrl:ye?.downstreamUrl,playbackHlsUrl:ye?.playbackHlsUrl,livestreamUrl:ye?.livestreamUrl}):ye?.status=="HLS_STOPPED"&&Kr({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Lt.emit(zt["hls-state-changed"],ye)},Hn=function(ye){Lt.emit(zt["meeting-state-changed"],ye)},Wr=function(ye){ua(ye?.status),Lt.emit(zt["transcription-state-changed"],ye)},Er=function(ye){Lt.emit(zt["transcription-text"],ye)},Cr=function(ye){Lt.emit(zt["whiteboard-started"],ye)},Fn=function(ye){Lt.emit(zt["whiteboard-stopped"],ye)},Zr=function(ye){Ye(function(Ot){Ot.set(ye.id,ye);var rr=new Map(Ot);return rr}),Lt.emit(zt["character-joined"],ye)},Da=function(ye){Ye(function(Ot){Ot.delete(ye.id);var rr=new Map(Ot);return rr}),Lt.emit(zt["character-left"],ye)},ya=function(ye){var Ot,rr;Ce(function(ha){var es=ha.get(ye.participantId);es.mode=ye.mode,ha.set(es.id,es);var ws=new Map(ha);return ws}),ye.participantId===(jn==null||(Ot=jn.current)===null||Ot===void 0||(rr=Ot.localParticipant)===null||rr===void 0?void 0:rr.id)&&_(function(ha){return ha.mode=ye.mode,ha}),Lt.emit(zt["participant-mode-changed"],ye)},Ca=function(ye){Lt.emit(zt["media-relay-started"],ye)},Ga=function(ye){Lt.emit(zt["media-relay-stopped"],ye)},Ya=function(ye){Lt.emit(zt["media-relay-error"],ye)},is=function(ye){Lt.emit(zt["media-relay-request-response"],ye)},Aa=function(ye){Lt.emit(zt["media-relay-request-received"],ye)},us=function(){var ye=Au.VideoSDK&&Au.VideoSDK.initMeeting(ut.current);v(ye);var Ot=ye.localParticipant,rr=ye.participants,ha=ye.characters;rr.set(Ot.id,Ot),Ce(rr),Ye(ha),_(Ot),ye.on("meeting-state-changed",Hn),ye.on("participant-joined",On),ye.on("participant-left",Ln),ye.on("presenter-changed",Jn),ye.on("main-participant-changed",vr),ye.on("speaker-changed",Qt),ye.on("entry-requested",Un),ye.on("entry-responded",In),ye.on("chat-message",Rt),ye.on("recording-started",Nn),ye.on("recording-stopped",Fr),ye.on("meeting-joined",ii),ye.on("meeting-left",Ti),ye.on("livestream-started",cr),ye.on("livestream-stopped",Kn),ye.on("video-state-changed",La),ye.on("video-seeked",Va),ye.on("webcam-requested",Ci),ye.on("mic-requested",xs),ye.on("pin-state-changed",Fs),ye.on("paused-all-streams",vi),ye.on("resumed-all-streams",ea),ye.on("connection-open",Hs),ye.on("connection-close",Ks),ye.on("switch-meeting",pn),ye.on("error",Xn),ye.on("hls-started",xa),ye.on("hls-stopped",ma),ye.on("recording-state-changed",Wn),ye.on("livestream-state-changed",dr),ye.on("hls-state-changed",Dn),ye.on("participant-mode-changed",ya),ye.on("transcription-state-changed",Wr),ye.on("transcription-text",Er),ye.on("whiteboard-started",Cr),ye.on("whiteboard-stopped",Fn),ye.on("character-joined",Zr),ye.on("character-left",Da),ye.on("media-relay-started",Ca),ye.on("media-relay-stopped",Ga),ye.on("media-relay-error",Ya),ye.on("media-relay-request-response",is),ye.on("media-relay-request-received",Aa),ye.localParticipant.on("stream-enabled",Mr),ye.localParticipant.on("stream-disabled",Hr),ye.join()},Ps=function(){var ye=jn.current;ye&&ye.leave()},ro=function(){var ye=jn.current;ye&&ye.end()},yi=function(ye){var Ot=jn.current;Ot&&Ot.pauseAllStreams(ye)},Pi=function(ye){var Ot=jn.current;Ot&&Ot.resumeAllStreams(ye)},Ns=function(ye,Ot,rr,ha){var es=jn.current;es&&es.startRecording(ye,Ot,rr,ha)},Eo=function(){var ye=jn.current;if(ye){var Ot=gr.current;Ot&&ye.stopRecording()}},mo=function(ye){ye===void 0&&(ye=void 0);var Ot=jn.current;Ot&&Ot.unmuteMic(ye)},Hi=function(){var ye=jn.current;ye&&ye.muteMic()},ao=function(ye){ye===void 0&&(ye=void 0);var Ot=Ha.current;Ot?Hi():mo(ye)},Ni=function(){var ye=jn.current;ye&&ye.disableWebcam()},_i=function(ye){ye===void 0&&(ye=void 0);var Ot=jn.current;Ot&&Ot.enableWebcam(ye)},Di=function(ye){ye===void 0&&(ye=void 0);var Ot=Ea.current;Ot?Ni():_i(ye)},uc=function(ye){var Ot=ye.meetingId,rr=ye.token,ha=jn.current;ha&&ha.switchTo({meetingId:Ot,token:rr})},Tr=function(){var ye=jn.current;ye&&ye.disableScreenShare()},Vs=function(ye){ye===void 0&&(ye=void 0);var Ot=jn.current;Ot&&Ot.enableScreenShare(ye)},da=function(ye){ye===void 0&&(ye=void 0);var Ot=Qr.current;Ot?Tr():Vs(ye)},oi=function(ye){var Ot=jn.current;Ot&&Ot.changeMode(ye)},so=function(ye){var Ot=jn.current;Ot&&Ot.sendChatMessage(ye)},tr=function(ye,Ot){var rr=jn.current;rr&&rr.respondEntry(ye,Ot)},Qs=function(){try{var ye=jn.current;return Promise.resolve(function(){if(ye)return Promise.resolve(ye.getMics())}())}catch(Ot){return Promise.reject(Ot)}},ci=function(){try{var ye=jn.current;return Promise.resolve(function(){if(ye)return Promise.resolve(ye.getWebcams())}())}catch(Ot){return Promise.reject(Ot)}},li=function(ye){var Ot=jn.current;Ot&&Ot.changeWebcam(ye)},_r=function(ye){var Ot=jn.current;Ot&&Ot.replaceWebcamStream(ye)},qa=function(ye){var Ot=jn.current;Ot&&Ot.changeMic(ye)},Js=function(ye){var Ot=ye.link,rr=jn.current;rr&&rr.startVideo({link:Ot})},Go=function(){var ye=jn.current;ye&&ye.stopVideo()},ms=function(){var ye=jn.current;ye&&ye.resumeVideo()},Vi=function(ye){var Ot=ye.currentTime,rr=jn.current;rr&&rr.pauseVideo({currentTime:Ot})},go=function(){var ye=jn.current;ye&&ye.enableAdaptiveSubscription()},Xa=function(){var ye=jn.current;ye&&ye.disableAdaptiveSubscription()},Oc=function(ye){var Ot=ye.destinationMeetingId,rr=ye.token,ha=ye.kinds,es=jn.current;es&&es.requestMediaRelay({destinationMeetingId:Ot,token:rr,kinds:ha})},Xs=function(ye){var Ot=jn.current;Ot&&Ot.stopMediaRelay(ye)},Vr=function(ye){var Ot=ye.currentTime,rr=jn.current;rr&&rr.seekVideo({currentTime:Ot})},ui=function(ye,Ot){var rr=jn.current;rr&&rr.startLivestream(ye,Ot)},gs=function(){var ye=jn.current;ye&&ye.stopLivestream()},qi=function(ye){var Ot=ye.meetingId,rr=ye.payload;try{var ha=jn.current,es=function(){if(ha)return Promise.resolve(ha.connectTo({meetingId:Ot,payload:rr})).then(function(){})}();return Promise.resolve(es&&es.then?es.then(function(){}):void 0)}catch(ws){return Promise.reject(ws)}},Yo=function(ye,Ot){var rr=jn.current;rr&&rr.startHls(ye,Ot)},Ko=function(){var ye=jn.current;ye&&ye.stopHls()},io=function(){Au.VideoSDK.config(Zt.current),rt.current&&Au.VideoSDK.setKeyProvider(rt.current),N?Au.VideoSDK.analytics(N):Au.VideoSDK.analytics({sdkType:"react-web",sdkVersion:LB}),h&&us()};return Z.useEffect(function(){io()},[]),Z.useEffect(function(){nn&&Pt.current&&(Ps(),io(),!h&&us())},[s.meetingId,l,nn]),$t.createElement(pE.Provider,{value:{meetingId:R?.id,meeting:R,baseUrl:R?.baseUrl,localParticipant:E,mainParticipant:k,activeSpeakerId:g,participants:me,characters:be,presenterId:H,localMicOn:x,localWebcamOn:O,localScreenShareOn:U,messages:ve,isRecording:q,isLiveStreaming:dt,pinnedParticipants:Ge,connections:ln,isHls:Ze,recordingState:St,livestreamState:Ut,hlsState:Sr,hlsUrls:Or,transcriptionState:ra,isMeetingJoined:rn,selectedCameraDevice:R?.selectedCameraDevice,selectedMicrophoneDevice:R?.selectedMicrophoneDevice,join:us,leave:Ps,end:ro,pauseAllStreams:yi,resumeAllStreams:Pi,startRecording:Ns,stopRecording:Eo,sendChatMessage:so,respondEntry:tr,muteMic:Hi,unmuteMic:mo,toggleMic:ao,disableWebcam:Ni,enableWebcam:_i,toggleWebcam:Di,disableScreenShare:Tr,enableScreenShare:Vs,toggleScreenShare:da,switchTo:uc,getMics:Qs,getWebcams:ci,changeWebcam:li,replaceWebcamStream:_r,changeMic:qa,changeMode:oi,startVideo:Js,stopVideo:Go,resumeVideo:ms,pauseVideo:Vi,seekVideo:Vr,startLivestream:ui,stopLivestream:gs,connectTo:qi,startHls:Yo,stopHls:Ko,enableAdaptiveSubscription:go,disableAdaptiveSubscription:Xa,requestMediaRelay:Oc,stopMediaRelay:Xs}},r)},fE=function(t,r){var s={},l=s.onStreamEnabled,h=l===void 0?function(){}:l,C=s.onStreamDisabled,N=C===void 0?function(){}:C,y=s.onMediaStatusChanged,u=y===void 0?function(){}:y,R=s.onVideoQualityChanged,v=R===void 0?function(){}:R,b=s.onStreamPaused,E=b===void 0?function(){}:b,_=s.onStreamResumed,m=_===void 0?function(){}:_,k=s.onProducerAdded,w=k===void 0?function(){}:k,F=s.onProducerRemoved,g=F===void 0?function(){}:F,A=s.onConsumerAdded,P=A===void 0?function(){}:A,H=s.onConsumerRemoved,D=H===void 0?function(){}:H,S=Z.useState(null),x=S[0],d=S[1],T=Z.useState(null),O=T[0],M=T[1],I=Z.useState(null),U=I[0],z=I[1],$=Z.useState(null),q=$[0],ae=$[1],Q=dg(),ve=Z.useMemo(function(){var gr,rt=Q?.participants,ut=Q?.localParticipant,Zt=Q?.activeSpeakerId,Pt=Q?.mainParticipant,sn=(Q==null||(gr=Q.pinnedParticipants)===null||gr===void 0?void 0:gr.get(t))||{cam:!1,share:!1};return{participants:rt,localParticipant:ut,activeSpeakerId:Zt,mainParticipant:Pt,pinState:sn}},[Q]),we=ve.participants,Re=ve.localParticipant,me=ve.activeSpeakerId,Ce=ve.mainParticipant,Be=ve.pinState,be=we?.get(t),Ye=Z.useState(be?.webcamOn),Qe=Ye[0],Ge=Ye[1],He=Z.useState(be?.micOn),Te=He[0],dt=He[1],_t=Z.useState(be?.mode),on=_t[0],ln=_t[1],Pn=function(rt){if(rt.track.readyState==="live")switch(rt.kind){case"video":x!=null&&d(null),d(rt);break;case"audio":O!=null&&M(null),M(rt);break;case"share":U!=null&&z(null),z(rt);break;case"shareAudio":q!=null&&ae(null),ae(rt);break}},En=function(rt){switch(rt.kind){case"video":d(null);break;case"audio":M(null);break;case"share":z(null);break;case"shareAudio":ae(null);break}},rn=function(rt){Pn(rt),h(rt)},Ne=function(rt){t===rt.participantId&&ln(rt.mode)},Me=function(rt){En(rt),N(rt)},Ze=function(rt){var ut=rt.peerId,Zt=rt.prevQuality,Pt=rt.currentQuality;v({peerId:ut,prevQuality:Zt,currentQuality:Pt})},Ft=function(rt){var ut=rt.kind,Zt=rt.peerId,Pt=rt.newStatus;ut=="audio"?dt(Pt):ut=="video"&&Ge(Pt),u({kind:ut,peerId:Zt,newStatus:Pt})},Tt=function(rt){be?.setQuality(rt)},St=function(rt,ut){be?.setViewPort(rt,ut)},un=function(rt){be?.setScreenShareQuality(rt)},Sn=function(){be?.enableMic()},Ut=function(){be?.disableMic()},nr=function(){be?.enableWebcam()},Ar=function(){be?.disableWebcam()},Sr=function(rt){be?.pin(rt)},Ur=function(rt){be?.unpin(rt)},xr=function(){be?.remove()},Or=function(rt){var ut=rt===void 0?{}:rt,Zt=ut.height,Pt=ut.width;return Promise.resolve(be?.captureImage({height:Zt,width:Pt}))},Kr=function(){return Promise.resolve(be?.getAudioStats())},va=function(){return Promise.resolve(be?.getVideoStats())},ra=function(){return Promise.resolve(be?.getShareStats())},ua=function(){return Promise.resolve(be?.getShareAudioStats())},jn=function(){be?.consumeWebcamStreams()},Ha=function(){be?.consumeMicStreams()},Ea=function(){be?.stopConsumingWebcamStreams()},Qr=function(){be?.stopConsumingMicStreams()};return Z.useEffect(function(){var gr=be?.streams;return gr&&gr.forEach(function(rt){Pn(rt)}),be!=null&&be.micOn&&dt(Te),be!=null&&be.webcamOn&&Ge(Qe),be?.on("stream-enabled",rn),be?.on("stream-disabled",Me),be?.on("stream-paused",function(rt){E(rt)}),be?.on("stream-resumed",function(rt){m(rt)}),be?.on("media-status-changed",Ft),be?.on("video-quality-changed",Ze),be?.on("producer-added",function(rt){w(rt)}),be?.on("producer-removed",function(rt){g(rt)}),be?.on("consumer-added",function(rt){P(rt)}),be?.on("consumer-removed",function(rt){D(rt)}),Lt.on(zt["participant-mode-changed"],Ne),function(){be?.off("stream-enabled",rn),be?.off("stream-disabled",Me),be?.off("media-status-changed",Ft),be?.off("video-quality-changed",Ze),Lt.off(zt["participant-mode-changed"],Ne)}},[be]),{displayName:be?.displayName,participant:be,webcamStream:x,micStream:O,screenShareStream:U,screenShareAudioStream:q,webcamOn:Qe||!!x,micOn:Te||!!O,mode:on,metaData:be?.metaData,screenShareOn:!!U,isLocal:Re?.id===t,isActiveSpeaker:me===t,isMainParticipant:Ce?.id===t,pinState:Be,consumeMicStreams:Ha,consumeWebcamStreams:jn,stopConsumingMicStreams:Qr,stopConsumingWebcamStreams:Ea,setQuality:Tt,setScreenShareQuality:un,setViewPort:St,enableMic:Sn,disableMic:Ut,enableWebcam:nr,disableWebcam:Ar,captureImage:Or,pin:Sr,unpin:Ur,remove:xr,getAudioStats:Kr,getVideoStats:va,getShareStats:ra,getShareAudioStats:ua}},BB=function(t,r){var s=r===void 0?{}:r,l=s.onMessageReceived,h=l===void 0?function(){}:l,C=s.onOldMessagesReceived,N=C===void 0?function(){}:C,y=dg(),u=y.meeting,R=y.isMeetingJoined,v=Z.useState([]),b=v[0],E=v[1],_=Z.useRef(!1),m=function(g,A,P){u&&u.pubSub.publish(t,g,A,P)},k=function(g){E(function(A){return[].concat(A,[g])}),h(g)},w=function(g){try{var A;return Promise.resolve(g==null||(A=g.pubSub)===null||A===void 0?void 0:A.subscribe(t,k)).then(function(P){P&&(N(P.messages),E(P.messages))})}catch(P){return Promise.reject(P)}};return Z.useEffect(function(){if(u&&!_.current&&R)return _.current=!0,w(u),function(){var F;u==null||(F=u.pubSub)===null||F===void 0||F.unsubscribe(t,k)}},[u,R]),{publish:m,messages:b}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));Au.VideoSDK.Constants;var zB=function(t){var r=t.cameraId,s=r===void 0?void 0:r,l=t.encoderConfig,h=l===void 0?void 0:l,C=t.facingMode,N=C===void 0?void 0:C,y=t.optimizationMode,u=y===void 0?void 0:y,R=t.multiStream,v=R===void 0?!0:R;try{return Promise.resolve(Au.VideoSDK.createCameraVideoTrack({cameraId:s,encoderConfig:h,facingMode:N,optimizationMode:u,multiStream:v}))}catch(b){return Promise.reject(b)}};Z.forwardRef(function(e,t){var r=e.participantId,s=e.type,l=s===void 0?"video":s,h=e.containerStyle,C=h===void 0?{}:h,N=e.className,y=N===void 0?"":N,u=e.classNameVideo,R=u===void 0?"":u,v=e.videoStyle,b=v===void 0?{}:v,E=fE(r),_=E.webcamOn,m=E.webcamStream,k=E.isLocal,w=E.screenShareStream,F=E.screenShareOn,g=Z.useRef(null);return Z.useEffect(function(){var A=l==="share"?w:m,P=l==="share"?F:_;if(g.current)if(P&&A){var H=new MediaStream;H.addTrack(A.track),g.current.srcObject=H,g.current.setAttribute("playsinline",""),g.current.setAttribute("x5-playsinline",""),g.current.setAttribute("webkit-playsinline",""),g.current.play().catch(function(D){return console.error("videoRef.current.play() failed",D)})}else g.current.srcObject=null},[l].concat(l==="share"?[F,w]:l==="video"?[_,m]:[])),$t.createElement("div",{ref:t,className:"video-container participant-video-"+r+" "+(y||""),style:Nm({objectFit:l==="share"?"contain":"none",height:"100%"},C)},$t.createElement("video",{width:"100%",height:"100%",ref:g,autoPlay:!0,className:R,style:k&&l!=="share"?Nm({transform:"scaleX(-1)",WebkitTransform:"scaleX(-1)"},b):b}))});const W1=({participantId:e,mirror:t=!1})=>{const r=Z.useRef(null),s=Z.useRef(null),{webcamStream:l,micStream:h,webcamOn:C,micOn:N,isLocal:y,displayName:u}=fE(e);Z.useEffect(()=>{if(s.current&&C&&l){const v=new MediaStream;try{v.addTrack(l.track),s.current.srcObject=v,s.current.play().catch(b=>gt.error(b.response.data.data))}catch(b){gt.error(b.response.data.data)}}else s.current&&(s.current.srcObject=null)},[l,C,u]),Z.useEffect(()=>{if(r.current)if(N&&h){const v=new MediaStream;try{v.addTrack(h.track),r.current.srcObject=v,r.current.play().catch(b=>gt.error(b.response.data.data))}catch(b){gt.error(b.response.data.data)}}else r.current.srcObject=null},[h,N]);const R=()=>C&&l?o.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:y,className:"w-full h-full object-contain",style:y||t?{transform:"scaleX(-1)"}:{transform:"none"},onLoadedMetadata:()=>{},onError:v=>gt.error(v.response.data.data)}):o.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-700",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx("span",{className:"text-2xl font-medium",children:(u||"U").charAt(0).toUpperCase()})}),o.jsx("p",{className:"text-sm",children:u||"User"}),o.jsx("p",{className:"text-xs text-gray-400",children:"Camera off"})]})});return o.jsxs("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden",children:[o.jsx("audio",{ref:r,autoPlay:!0,playsInline:!0,muted:y}),R(),o.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 px-2 py-1 rounded",children:o.jsxs("span",{className:"text-white text-xs",children:[u||"User"," ",y?"(You)":""]})}),o.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[!N&&o.jsx("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx(tS,{})}),!C&&o.jsx("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx(nS,{})})]})]})},UB=({onLeave:e,setShowChat:t,showChat:r,setShowParticipants:s,showParticipants:l})=>{const[h,C]=Z.useState(!0),[N,y]=Z.useState(!0),[u,R]=Z.useState({mic:!1,webcam:!1}),{leave:v,toggleMic:b,toggleWebcam:E,localParticipant:_}=dg(),m=async()=>{if(!u.mic){R(g=>({...g,mic:!0}));try{await b(),C(g=>!g)}catch(g){toast.error(g.response.data.data)}finally{R(g=>({...g,mic:!1}))}}},k=async()=>{if(!u.webcam){R(g=>({...g,webcam:!0}));try{await E(),y(g=>!g)}catch(g){toast.error(g.response.data.data)}finally{R(g=>({...g,webcam:!1}))}}},w=async()=>{try{await v(),e&&e()}catch(g){toast.error(g.response.data.data),e&&e()}};$t.useEffect(()=>{_&&(C(_.micOn),y(_.webcamOn))},[_?.micOn,_?.webcamOn]);const F=[{icon:h?o.jsx(O4,{}):o.jsx(tS,{}),onClick:m,title:h?"Turn off microphone":"Turn on microphone",bgColor:h?"bg-gray-700 hover:bg-gray-600":"bg-red-600 hover:bg-red-700",disabled:u.mic},{icon:N?o.jsx(M4,{}):o.jsx(nS,{}),onClick:k,title:N?"Turn off camera":"Turn on camera",bgColor:N?"bg-gray-700 hover:bg-gray-600":"bg-red-600 hover:bg-red-700",disabled:u.webcam},{icon:o.jsx(j4,{}),onClick:()=>t(!r),title:r?"Hide chat":"Show chat",bgColor:r?"bg-blue-600 hover:bg-blue-700":"bg-gray-700 hover:bg-gray-600",disabled:!1},{icon:o.jsx(L4,{}),onClick:()=>s(!l),title:l?"Hide participants":"Show participants",bgColor:l?"bg-blue-600 hover:bg-blue-700":"bg-gray-700 hover:bg-gray-600",disabled:!1},{icon:o.jsx(P4,{}),onClick:w,title:"Leave meeting",bgColor:"bg-red-600 hover:bg-red-700",disabled:!1}];return o.jsxs("div",{className:"bg-gray-800 p-4",children:[o.jsx("div",{className:"flex items-center justify-center space-x-4",children:F.map((g,A)=>o.jsx("button",{onClick:g.onClick,disabled:g.disabled,className:`p-3 rounded-full text-white transition-colors ${g.bgColor} ${g.disabled?"opacity-50 cursor-not-allowed":""}`,title:g.title,children:g.disabled&&(A===0||A===1)?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):g.icon},A))}),o.jsxs("div",{className:"flex items-center justify-center mt-2 space-x-4 text-xs text-gray-400",children:[o.jsx("span",{className:h?"text-green-400":"text-red-400",children:h?" Mic On":" Mic Off"}),o.jsx("span",{className:N?"text-green-400":"text-red-400",children:N?" Camera On":" Camera Off"})]})]})},FB=({meetingId:e,localParticipant:t,isVisible:r})=>{const[s,l]=Z.useState(""),h=Z.useRef(null),{publish:C,messages:N}=BB("CHAT",{onMessageReceived:v=>{v.senderId!==t?.id&&gt.info(`${v.senderName} sent a message`)}});Z.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[N]);const y=async()=>{if(s.trim()){if(!C){gt.error("Chat not available. Please try again.");return}try{await C(s.trim(),{persist:!0}),l("")}catch{gt.error("Failed to send message. Please try again.")}}},u=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),y())},R=v=>v?new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return r?o.jsxs("div",{className:"h-full flex flex-col bg-gray-800",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700",children:[o.jsxs("h3",{className:"text-white font-semibold flex items-center",children:[o.jsx("span",{className:"mr-2",children:""}),"Chat"]}),o.jsxs("p",{className:"text-gray-400 text-xs",children:["Meeting: ",e]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",ref:h,children:N.length===0?o.jsxs("div",{className:"text-center text-gray-400 text-sm py-8",children:[o.jsx("div",{className:"mb-2",children:""}),o.jsx("p",{children:"No messages yet"}),o.jsx("p",{className:"text-xs mt-1",children:"Start the conversation!"})]}):N.map(v=>{const b=v.senderId===t?.id;return o.jsxs("div",{className:`p-3 rounded-lg max-w-xs ${b?"bg-blue-600 ml-auto":"bg-gray-700 mr-auto"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsx("span",{className:`font-medium text-sm ${b?"text-blue-100":"text-blue-400"}`,children:b?"You":v.senderName||"Unknown"}),o.jsx("span",{className:"text-gray-300 text-xs ml-2",children:R(v.timestamp)})]}),o.jsx("p",{className:"text-sm text-white break-words",children:v.message})]},v.id)})}),o.jsxs("div",{className:"p-4 border-t border-gray-700",children:[o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("input",{type:"text",value:s,onChange:v=>l(v.target.value),onKeyPress:u,placeholder:"Type a message...",className:"w-full px-3 py-2 pr-12 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",maxLength:500,disabled:!C}),o.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-400",children:[s.length,"/500"]})]}),o.jsx("button",{onClick:y,disabled:!s.trim()||!C,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Press Enter to send, Shift+Enter for new line"})]})]}):null},HB=({participants:e,localParticipant:t,participantName:r,isDoctor:s,isVisible:l})=>{if(!l)return null;const h=[{id:t?.id,name:r,isLocal:!0,role:s?"Doctor":"Patient"},...Array.from(e.entries()).map(([C,N])=>({id:C,name:N.displayName||"Unknown",isLocal:!1,role:"Participant"}))];return o.jsxs("div",{className:"h-full flex flex-col bg-gray-800",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700",children:[o.jsxs("h3",{className:"text-white font-semibold flex items-center",children:[o.jsx("span",{className:"mr-2",children:""}),"Participants"]}),o.jsxs("p",{className:"text-gray-400 text-xs",children:[h.length," online"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[h.map(C=>o.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg ${C.isLocal?"bg-blue-700":"bg-gray-700"}`,children:[o.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-medium",children:C.name?.charAt(0)?.toUpperCase()||"U"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("span",{className:"text-white text-sm",children:[C.name," ",C.isLocal&&"(You)"]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${C.role==="Doctor"?"bg-green-600 text-white":C.role==="Patient"?"bg-blue-600 text-white":"bg-gray-600 text-white"}`,children:C.role}),C.isLocal&&o.jsx("span",{className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded-full",children:"Host"})]})]})]},C.id)),e.size===0&&o.jsxs("div",{className:"text-center text-gray-400 text-sm py-8",children:[o.jsx("div",{className:"mb-2",children:""}),o.jsx("p",{children:"Waiting for others to join..."}),o.jsx("p",{className:"text-xs mt-1",children:"Share the meeting code to invite participants"})]})]})]})};function VB({onLeave:e,meetingId:t,participantName:r,isDoctor:s}){const[l,h]=Z.useState(null),[C,N]=Z.useState(!0),[y,u]=Z.useState(!1),[R,v]=Z.useState(!1),{join:b,participants:E,localParticipant:_,enableWebcam:m,disableWebcam:k}=dg({onMeetingJoined:async()=>{h("JOINED"),gt.success("Joined meeting successfully!"),await w()},onMeetingLeft:()=>{e()},onParticipantJoined:A=>{gt.info(`${A.displayName||"Someone"} joined the meeting`)},onParticipantLeft:A=>{gt.info(`${A.displayName||"Someone"} left the meeting`)},onError:A=>{gt.error("Meeting error occurred")}}),w=async()=>{if(!R)try{if(k)try{await k(),await new Promise(P=>setTimeout(P,500))}catch{}const A=await zB({encoderConfig:"h720p_30fps",optimizationMode:"motion",facingMode:"user"});m&&(await m(A),v(!0),gt.success("HD camera enabled"))}catch(A){console.warn("Could not enable HD webcam, using default:",A);try{m&&await m()}catch(P){gt.error(P.response.data.data)}}},F=()=>{h("JOINING"),b()},g=()=>{navigator.clipboard&&t?(navigator.clipboard.writeText(t),gt.success("Meeting code copied to clipboard!")):gt.error("Failed to copy meeting code")};if(l==="JOINING")return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{children:"Joining the meeting..."}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Please wait..."})]})});if(l==="JOINED"){const A=[...E.keys()].filter(P=>P!==_?.id);return o.jsxs("div",{className:"flex h-screen bg-gray-900",children:[o.jsxs("div",{className:"flex-1 flex flex-col",children:[s&&t&&o.jsxs("div",{className:"bg-blue-600 text-white p-3 text-center",children:[o.jsx("p",{className:"text-sm font-medium",children:"Share this meeting code with patient:"}),o.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[o.jsx("code",{className:"bg-blue-700 px-3 py-1 rounded font-mono text-lg",children:t}),o.jsx("button",{onClick:g,className:"bg-blue-800 hover:bg-blue-900 px-3 py-1 rounded text-sm transition-colors",title:"Copy meeting code",children:" Copy"})]})]}),o.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 overflow-auto",children:[_&&o.jsx(W1,{participantId:_.id,mirror:!0}),A.map(P=>o.jsx(W1,{participantId:P,mirror:!0},P)),A.length===0&&o.jsx("div",{className:"bg-gray-800 rounded-lg flex items-center justify-center min-h-[300px]",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-lg font-medium mb-2",children:s?"Waiting for patient...":"Waiting for doctor..."}),o.jsx("p",{className:"text-sm text-gray-400",children:"Share the meeting code to invite others"}),!s&&o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Make sure you have the correct meeting code"})]})})]}),o.jsx(UB,{onLeave:e,setShowChat:N,showChat:C,setShowParticipants:u,showParticipants:y})]}),(C||y)&&o.jsxs("div",{className:"w-80 bg-gray-800 border-l border-gray-700",children:[o.jsx(FB,{meetingId:t,localParticipant:_,isVisible:C}),o.jsx(HB,{participants:E,localParticipant:_,participantName:r,isDoctor:s,isVisible:y})]})]})}return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white max-w-md mx-auto p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:s?"Doctor Portal":"Patient Portal"}),o.jsx("p",{className:"text-gray-400",children:s?"Ready to start your consultation":"Ready to join your consultation"})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Meeting Details"}),o.jsxs("div",{className:"text-sm text-gray-300",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Meeting ID:"})," ",t]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Participant:"})," ",r]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Role:"})," ",s?"Doctor":"Patient"]})]})]}),o.jsx("button",{onClick:F,className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium text-lg",children:"Join Meeting"}),o.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"By joining, you agree to allow camera and microphone access"})]})})}const mE=({meetingId:e,doctorId:t,userId:r,userName:s,isPatient:l=!0,onLeave:h})=>{const C=as(),{user:N}=si(),{doctor:y}=fs(),[u,R]=Z.useState(null),[v,b]=Z.useState(e),[E,_]=Z.useState(!0),[m,k]=Z.useState(null),w=h||(()=>C("/")),F=!l,g=F?y:N,A=g?.name||s||"User";Z.useEffect(()=>{(async()=>{try{_(!0),k(null);const D=await z0(g?._id||r,A,F?["allow_join","allow_mod"]:["allow_join"],F?"doctor":"patient");if(R(D),F)if(e==="new"||!e){const S=await hm(D);b(S.roomId),gt.success(`New meeting created: ${S.roomId}`)}else try{if((await lx(D,e)).isValid)b(e);else throw new Error("Invalid meeting")}catch{console.warn("Meeting validation failed, creating new meeting");const x=await hm(D);b(x.roomId),gt.success(`New meeting created: ${x.roomId}`)}else{if(!e||e==="new")throw new Error("Meeting ID is required for patients");try{(await lx(D,e)).isValid||console.warn("Validation reported invalid, attempting to join anyway")}catch(S){console.warn("Validation request failed, proceeding to join",S)}b(e)}}catch(D){k(D.message||"Failed to initialize meeting"),gt.error(D.message||"Failed to initialize meeting")}finally{_(!1)}})()},[e,F,g,r,A]);const P=()=>{k(null),window.location.reload()};return E?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{className:"text-lg",children:"Initializing meeting..."}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Setting up your video call"})]})}):m||!u||!v?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white max-w-md mx-auto p-6",children:[o.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("h2",{className:"text-xl font-bold mb-2",children:"Connection Failed"}),o.jsx("p",{className:"text-gray-300 mb-6",children:m||"Unable to initialize meeting. Please try again."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:P,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry Connection"}),o.jsx("button",{onClick:w,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Go Back"})]})]})}):o.jsx(IB,{config:{meetingId:v,name:A,micEnabled:!0,webcamEnabled:!0,participantId:g?._id||r,maxResolution:"hd",multiStream:!0},token:u,joinWithoutUserInteraction:!1,children:o.jsx(VB,{onLeave:w,meetingId:v,participantName:A,isDoctor:F})})},qB=({doctorId:e,doctorName:t,isDoctor:r=!1})=>{const s=as(),{user:l,isAuthenticated:h}=si(),[C,N]=Z.useState(!1),[y,u]=Z.useState(!1),[R,v]=Z.useState(""),b=async()=>{if(!h){gt.error("Please login to start consultation"),s("/login");return}if(!r){gt.error("Only doctors can create meetings. Please ask the doctor for a meeting code.");return}try{N(!0);const _=await z0(l._id,l.name),m=await hm(_);if(m&&m.roomId){const k=m.roomId;s(`/doctor/consultation/${k}/${l._id}`),gt.success("Consultation started successfully!")}else throw new Error("Failed to create meeting")}catch{gt.error("Failed to start consultation. Please try again.")}finally{N(!1)}},E=async()=>{if(!h){gt.error("Please login to join consultation"),s("/login");return}if(!R.trim()){gt.error("Please enter a consultation code");return}try{u(!0),s(r?`/doctor/consultation/${R}/patient_waiting`:`/consultation/${R}/${e}`),gt.success("Joining consultation...")}catch{gt.error("Failed to join consultation")}finally{u(!1)}};return o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[o.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Video Consultation"}),o.jsxs("p",{className:"text-blue-700 text-sm mb-4",children:["Connect with ",t," via video call. Make sure you have a stable internet connection and allow camera/microphone access."]}),o.jsxs("div",{className:"space-y-3",children:[r?o.jsx("button",{onClick:b,disabled:C,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Creating Meeting...":"Start Video Consultation"}):o.jsxs("div",{className:"text-center p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[o.jsxs("p",{className:"text-yellow-800 text-sm mb-2",children:[o.jsx("strong",{children:"Note:"})," Only doctors can create meetings"]}),o.jsx("p",{className:"text-yellow-700 text-xs",children:"Please ask the doctor to start the consultation and provide you with a meeting code."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:R,onChange:_=>v(_.target.value),placeholder:r?"Enter meeting code to join":"Enter meeting code from doctor",className:"flex-1 px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("button",{onClick:E,disabled:y||!R.trim(),className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Joining...":"Join"})]})]}),o.jsxs("div",{className:"mt-4 text-xs text-blue-600",children:[o.jsx("p",{children:" Ensure stable internet connection"}),o.jsx("p",{children:" Allow camera and microphone access"}),o.jsx("p",{children:" Find a quiet, private space"}),o.jsx("p",{children:" Meeting codes are generated automatically when starting a consultation"})]})]})},$B=()=>{const{slug:e}=xl(),t=as(),{user:r,isAuthenticated:s}=si(),{admin:l}=$o(),{allDoctors:h,loading:C,updateDoctorRating:N,doctor:y}=fs(),[u,R]=Z.useState(null),[v,b]=Z.useState(!1),[E,_]=Z.useState("video"),{addDoctorRating:m,updateDoctorRating:k,deleteDoctorRating:w}=$w(),F=u?._id===y?._id;Z.useEffect(()=>{window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},[e]),Z.useEffect(()=>{if(h&&h.length>0){const d=e.split("-").pop(),T=h.find(O=>O._id===d);T&&R(T)}},[h,e]);const g=()=>{t(`/doctor/book/${e}`)},A=({rating:d})=>{const T=O=>{R(M=>({...M,rating:O})),N(u._id,O)};m({rating:d},u._id,T),b(!1)},P=({rating:d})=>{const T=O=>{R(M=>({...M,rating:O})),N(u._id,O)};k({rating:d},u._id,T),b(!1)},H=()=>{const d=T=>{R(O=>({...O,rating:T})),N(u._id,T)};w(u._id,d),b(!1)};if(C)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),o.jsx("p",{className:"text-emerald-700",children:"Loading doctor profile..."})]})});if(!u)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-emerald-700 text-lg",children:"Doctor not found."}),o.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Go Home"})]})});const D=d=>Array.isArray(d)?d.join(", "):d||"General Medicine",S=d=>d&&typeof d=="object"?d.average||0:d||0,x=d=>d&&typeof d=="object"&&d.count||0;return o.jsx("div",{className:"min-h-screen bg-emerald-50 py-16 px-4",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"text-center lg:text-left",children:[o.jsx("img",{src:u.profilePicture||`https://ui-avatars.com/api/?name=${encodeURIComponent(u.name)}&background=random`,alt:u.name,className:"w-32 h-32 rounded-full object-cover border-4 border-emerald-100 shadow-lg mx-auto lg:mx-0 mb-4"}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-2",children:u.name}),o.jsx("p",{className:"text-emerald-700 text-lg mb-2",children:D(u.speciality)}),o.jsx("p",{className:"text-gray-600 mb-2",children:u.mainDegree}),o.jsxs("div",{className:"flex items-center justify-center lg:justify-start space-x-2",children:[o.jsx("span",{className:"text-yellow-500",children:""}),o.jsx("span",{className:"font-medium",children:S(u.rating)}),o.jsxs("span",{className:"text-gray-500",children:["(",x(u.rating)," reviews)"]})]}),o.jsxs("div",{className:"flex items-center justify-center lg:justify-start space-x-2 mt-2",children:[o.jsx("button",{onClick:()=>{r||l||y?t(`/doctor/book/${e}`):setIsOpen(!0)},disabled:F,className:"px-3 py-2 text-sm bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 text-center",children:F?"Not allowed":"Book Now"}),!F&&o.jsx(M2,{trigger:o.jsx("button",{className:"px-3 py-2 text-sm bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-colors duration-200 text-center",children:"Add Rating"}),showActionButtons:!0,mode:"rating-only",onSubmit:A,onUpdate:P,onDelete:H,open:v,onOpenChange:b,title:"Rate this Service",description:"Tap the stars to leave a quick rating",submitLabel:"Add Rating"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-emerald-700 mb-3",children:"Professional Information"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Experience:"}),o.jsxs("span",{className:"font-medium",children:[u.experience||0," years"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"PMDC Number:"}),o.jsx("span",{className:"font-medium",children:u.pmdcNumber||"Not specified"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Status:"}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${u.status==="verified"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:u.status||"Pending"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-emerald-700 mb-3",children:"Contact Information"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-gray-600",children:""}),o.jsx("span",{children:u.email})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-gray-600",children:""}),o.jsx("span",{children:u.phone})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-gray-600",children:""}),o.jsx("span",{children:u.hospital||"Not specified"})]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[o.jsx("h3",{className:"font-semibold text-blue-800 mb-3",children:"Consultation Fee"}),o.jsxs("p",{className:"text-2xl font-bold text-blue-600 mb-2",children:["Rs. ",u.fee||"Not specified"]}),o.jsxs("div",{className:"text-sm text-blue-700",children:[o.jsx("p",{children:" Video consultation available"}),o.jsx("p",{children:" In-person appointments"}),o.jsx("p",{children:" Professional medical advice"})]})]}),o.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[o.jsx("h3",{className:"font-semibold text-emerald-800 mb-3",children:"Availability"}),o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx("span",{className:`w-3 h-3 rounded-full ${u.availability?"bg-green-500":"bg-red-500"}`}),o.jsx("span",{className:u.availability?"text-green-700":"text-red-700",children:u.availability?"Available for consultations":"Currently unavailable"})]}),u.availability&&o.jsx("button",{onClick:g,className:"w-full bg-emerald-600 text-white py-2 px-4 rounded-lg hover:bg-emerald-700 transition-colors",children:"Book Appointment"})]})]})]})}),u.availability&&!F&&o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-emerald-800 mb-6 text-center",children:"Start Video Consultation"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700",children:"Why Choose Video Consultation?"}),o.jsxs("ul",{className:"space-y-2 text-gray-600",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-emerald-500 mt-1",children:""}),o.jsx("span",{children:"Consult from the comfort of your home"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-emerald-500 mt-1",children:""}),o.jsx("span",{children:"No travel time or waiting in queues"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-emerald-500 mt-1",children:""}),o.jsx("span",{children:"Secure and private consultation"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-emerald-500 mt-1",children:""}),o.jsx("span",{children:"Easy follow-up appointments"})]})]}),o.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[o.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Before Your Consultation"}),o.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[o.jsx("li",{children:" Ensure stable internet connection"}),o.jsx("li",{children:" Find a quiet, private space"}),o.jsx("li",{children:" Have your medical history ready"}),o.jsx("li",{children:" Test your camera and microphone"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700",children:"Ready to Start?"}),s?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-yellow-800 text-sm",children:[o.jsx("strong",{children:"Note:"})," The doctor will start the video consultation and provide you with a meeting code to join."]})}),o.jsx(qB,{doctorId:u._id,doctorName:u.name,isDoctor:!1})]}):o.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg text-center",children:[o.jsx("p",{className:"text-gray-600 mb-4",children:"Please login to start a video consultation"}),o.jsx("button",{onClick:()=>t("/login"),className:"bg-emerald-600 text-white py-2 px-6 rounded-lg hover:bg-emerald-700 transition-colors",children:"Login Now"})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-emerald-800 mb-6",children:"Additional Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 border-b border-emerald-200 pb-2",children:"Personal Details"}),o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Gender:"}),o.jsx("span",{className:"font-medium",children:u.gender||"Not specified"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Religion:"}),o.jsx("span",{className:"font-medium",children:u.religion||"Not specified"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"CNIC:"}),o.jsx("span",{className:"font-medium",children:u.cnic||"Not specified"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 border-b border-emerald-200 pb-2",children:"Address"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("p",{className:"text-gray-600 mb-2",children:"Full Address:"}),o.jsx("p",{className:"text-gray-800",children:u.fullAddress||"Address not specified"})]})]})]}),o.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:"Verification Status"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:`w-4 h-4 rounded-full ${u.pmdcVerified?"bg-green-500":"bg-red-500"}`}),o.jsxs("span",{className:"text-sm",children:["PMDC Verification:"," ",u.pmdcVerified?"Verified":"Not Verified"]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:`w-4 h-4 rounded-full ${u.hospitalVerified?"bg-green-500":"bg-red-500"}`}),o.jsxs("span",{className:"text-sm",children:["Hospital Verification:"," ",u.hospitalVerified?"Verified":"Not Verified"]})]})]})]})]})]})})},WB=()=>{const{allDoctors:e}=fs(),{slug:t}=xl(),r=nl(),s=new URLSearchParams(r.search),l=(s.get("city")||"").toLowerCase(),N=(()=>{const R={};return Qw.forEach(v=>{const b=v.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/\//g,"-").replace(/&/g,"and");R[b]=v}),R})()[t],y=e?.filter(R=>N?Array.isArray(R.speciality)?R.speciality.some(v=>v&&v.toLowerCase()===N.toLowerCase()):typeof R.speciality=="string"?R.speciality.toLowerCase()===N.toLowerCase():!1:!1)||[],u=l?y.filter(R=>{const v=(R.city||R.fullAddress||"").toString().toLowerCase();return R.city?R.city.toLowerCase()===l:v.includes(l)}):y;return N?u.length===0?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"No Doctors Found"}),o.jsxs("p",{className:"text-emerald-700 text-lg",children:["No doctors found for ",N,l?` in ${s.get("city")}`:"","."]}),o.jsx("p",{className:"text-emerald-600 text-sm mt-2",children:"Please check back later or contact us for assistance."})]})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsxs("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:[N," Doctors"]}),o.jsxs("p",{className:"text-center text-emerald-600 mb-8",children:["Found ",u.length," doctor",u.length!==1?"s":""," in ",N,l?`, City: ${s.get("city")}`:""]}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:u.map((R,v)=>o.jsx(Ym,{doctor:R},R._id||v))})]}):o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Invalid Specialty"}),o.jsxs("p",{className:"text-emerald-700 text-lg",children:['The requested specialty "',t.replace(/-/g," "),'" was not found.']})]})})},ZB=()=>{const{allDoctors:e}=fs();return o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:"All Doctors"}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:e.map((t,r)=>o.jsx(Ym,{doctor:t},r))})]})},GB=()=>{const{allPublicHospital:e,loading:t}=to();return t?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):!e||e.length===0?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"No Public Hospitals"}),o.jsx("p",{className:"text-emerald-700 text-lg",children:"No public hospitals available at the moment."})]})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:"All Public Hospitals"}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:e.map(r=>o.jsx(j2,{hospital:r},r._id))})]})},YB=()=>o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:"All Labs"}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:Xw.map((e,t)=>o.jsx(L2,{lab:e},t))})]}),KB=()=>o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:"All Medicines"}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:Jw.map((e,t)=>o.jsx(I2,{medicine:e},t))})]}),QB=()=>{const{allPublicHospital:e}=to(),{slug:t}=xl(),r=e.filter(s=>s.city?.toLowerCase().replace(/\s+/g,"-")===t);return Z.useEffect(()=>{window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},[t]),r?o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:"All Public Hospitals"}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:r.map(s=>o.jsx(j2,{hospital:s},s._id))})]}):o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Hospital Not Found"}),o.jsx("p",{className:"text-emerald-700 text-lg",children:"The hospital profile you are looking for does not exist."})]})})},JB=()=>{const{slug:e}=xl(),{allPublicHospital:t}=to(),r=e.split("-").pop(),s=t.find(h=>h._id===r),l=Array.isArray(s?.doctors)?s.doctors:[];return!s||l.length===0?o.jsx("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4 flex items-center justify-center",children:o.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No doctors found for this hospital."})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsxs("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize",children:["Doctors at ",s.name," (",l.length,")"]}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:l.map(h=>o.jsx(Ym,{doctor:h},h._id))})]})},XB=()=>{const{slug:e}=xl(),t=Xw.filter(r=>r.slug?r.slug===e:r.city.toLowerCase().replace(/\s+/g,"-")===e||r.name.toLowerCase().replace(/\s+/g,"-")===e);return t.length===0?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"No Labs Found"}),o.jsx("p",{className:"text-emerald-700 text-lg",children:"No labs found for this area."})]})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsxs("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize",children:[e.replace(/-/g," ")," Labs"]}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:t.map((r,s)=>o.jsx(L2,{lab:r},s))})]})},ez=()=>{const{slug:e}=xl(),t=Jw.filter(r=>(r.slug?r.slug===e:r.name.toLowerCase().replace(/\s+/g,"-")===e)||r.type.toLowerCase().replace(/\s+/g,"-")===e);return t.length===0?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"No Medicines Found"}),o.jsx("p",{className:"text-emerald-700 text-lg",children:"No medicines found for this type."})]})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsxs("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize",children:[e.replace(/-/g," ")," Medicines"]}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:t.map((r,s)=>o.jsx(I2,{medicine:r},s))})]})},tz=()=>{const{slug:e}=xl(),t=as(),{user:r,isAuthenticated:s}=si(),{allDoctors:l,loading:h}=fs(),[C,N]=Z.useState({date:"",time:"",symptoms:"",notes:""}),[y,u]=Z.useState(!1),[R,v]=Z.useState("in-person"),[b,E]=Z.useState(null),{doctor:_}=fs(),{sendMessage:m}=Yw();Z.useEffect(()=>{if(l&&l.length>0){const S=e.split("-").pop(),x=l.find(d=>d._id===S);x&&E(x)}},[l,e]),Z.useEffect(()=>{window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},[e]);const k=S=>{N({...C,[S.target.name]:S.target.value})},{checkDoctorAvailabilitySlots:w,loading:F,userBookingAppointments:g,slots:A}=U0();Z.useEffect(()=>{b?._id&&C.date&&w(b._id,C.date).catch(()=>{})},[b?._id,C.date]);const P=S=>{if(!S||typeof S!="string")return S||"";const x=S.split(":"),d=parseInt(x[0],10),T=x[1]||"00";if(Number.isNaN(d))return S;const O=d>=12?"PM":"AM";return`${d%12===0?12:d%12}:${T} ${O}`},H=async S=>{if(S.preventDefault(),!s){gt.error("Please login to book an appointment"),t("/login");return}try{await g({doctorId:b._id,date:C.date,time:C.time,fee:b.fee,symptoms:C.symptoms,notes:C.notes}),u(!0)}catch{}},D=()=>{if(!s||!b){gt.error("Please login to request a video consultation"),t("/login");return}m(b._id,"I would like to request a video consultation."),t("/user/message"),gt.success("Video consultation request sent successfully")};return h?o.jsx("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),o.jsx("p",{className:"text-emerald-700",children:"Loading doctor information..."})]})}):b?o.jsx("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-4xl w-full",children:[o.jsxs("h2",{className:"text-2xl font-bold text-emerald-800 mb-6 text-center",children:["Book Appointment with ",b.name]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("img",{src:b.profilePicture||`https://ui-avatars.com/api/?name=${encodeURIComponent(b.name)}&background=random`,alt:b.name,className:"w-24 h-24 rounded-full object-cover border-4 border-emerald-100 shadow mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-emerald-800 mb-2",children:b.name}),o.jsx("p",{className:"text-emerald-700 text-sm mb-2",children:Array.isArray(b.speciality)?b.speciality.join(", "):b.speciality}),o.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:[b.experience||0," years experience"]}),o.jsxs("p",{className:"text-green-600 font-semibold",children:["Rs. ",b.fee||"Not specified"]}),b.mainDegree&&o.jsx("p",{className:"text-gray-600 text-sm",children:b.mainDegree})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:"Choose Consultation Type"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"consultationType",value:"in-person",checked:R==="in-person",onChange:S=>v(S.target.value),className:"text-emerald-600 focus:ring-emerald-500"}),o.jsx("span",{className:"text-gray-700",children:"In-Person Consultation"})]}),o.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"consultationType",value:"video",checked:R==="video",onChange:S=>v(S.target.value),className:"text-emerald-600 focus:ring-emerald-500"}),o.jsx("span",{className:"text-gray-700",children:"Video Consultation"})]})]})]}),R==="video"?o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[o.jsxs("p",{children:["Request a video consultation with ",b.name,". You will be notified via email when the doctor is available."]}),o.jsx("button",{className:" mt-3 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-md",onClick:D,children:"Request Consultation"})]}):o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:"Book In-Person Appointment"}),y?o.jsx("div",{className:"text-green-700 text-center font-semibold p-4 bg-green-50 rounded-lg",children:"Appointment booked successfully!"}):o.jsxs("form",{onSubmit:H,className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{name:"date",type:"date",value:C.date,onChange:k,required:!0,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("button",{type:"button",onClick:()=>b?._id&&C.date&&w(b._id,C.date),className:"whitespace-nowrap px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 text-sm",children:F?.checkDoctorAvailabilitySlots?"Checking...":"Check Availability"})]}),o.jsx("input",{name:"time",type:"time",value:C.time,onChange:k,required:!0,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),C.date&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-medium text-emerald-700",children:"Available Slots"}),F?.checkDoctorAvailabilitySlots?o.jsx("div",{className:"text-gray-600 text-sm",children:"Loading slots..."}):Array.isArray(A)&&A.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:A.map((S,x)=>{const d=typeof S=="string"?S:S?.time||S?.start||S?.slot||"";return o.jsx("button",{type:"button",onClick:()=>N({...C,time:d}),className:`px-3 py-1 rounded border text-sm transition-colors ${C.time===d?"bg-emerald-600 text-white border-emerald-600":"bg-white text-gray-700 hover:bg-emerald-50 border-gray-300"}`,children:P(d)},`${d}-${x}`)})}):o.jsx("div",{className:"text-gray-600 text-sm",children:"No slots available for the selected date."})]}),o.jsx("textarea",{name:"symptoms",placeholder:"Describe your symptoms (optional)",value:C.symptoms,onChange:k,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("textarea",{name:"notes",placeholder:"Additional notes (optional)",value:C.notes,onChange:k,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-2 rounded hover:bg-emerald-700 transition-colors",children:F?.userBookingAppointments?"Booking...":"Book Appointment"})]})]})]})]}),o.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-3",children:"Important Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-emerald-700 mb-2",children:"For Video Consultations:"}),o.jsxs("ul",{className:"space-y-1",children:[o.jsx("li",{children:" Ensure stable internet connection"}),o.jsx("li",{children:" Find a quiet, private space"}),o.jsx("li",{children:" Have your medical history ready"}),o.jsx("li",{children:" Test your camera and microphone"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-emerald-700 mb-2",children:"For In-Person Appointments:"}),o.jsxs("ul",{className:"space-y-1",children:[o.jsx("li",{children:" Arrive 10 minutes early"}),o.jsx("li",{children:" Bring your ID and medical records"}),o.jsx("li",{children:" Wear a mask if required"}),o.jsx("li",{children:" Follow clinic safety protocols"})]})]})]})]})]})}):o.jsx("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-emerald-700 text-lg",children:"Doctor not found."}),o.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Go Home"})]})})},nz=()=>{const e=as(),{user:t,loading:r,signOut:s}=si(),[l,h]=Z.useState(!1),{usersAppointments:C,loading:N,userAppointments:y,userCancelAppointment:u}=U0();$t.useEffect(()=>{y().catch(()=>{})},[]);const[R,v]=Z.useState({name:t?.name||"",email:t?.email||"",cnic:t?.cnic||""}),b=k=>{const{name:w,value:F}=k.target;v(w==="cnic"?g=>({...g,[w]:Um(F)}):g=>({...g,[w]:F}))},E=async()=>{try{gt.success("Profile updated successfully!"),h(!1)}catch{gt.error("Failed to update profile")}},_=()=>{v({name:t?.name||"",email:t?.email||"",cnic:t?.cnic||""}),h(!1)},m=()=>{s(e)};return t?o.jsx("div",{className:"min-h-screen bg-emerald-50 py-16 px-4",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800",children:"User Profile"}),o.jsxs("div",{className:"flex space-x-3",children:[l?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:E,disabled:r,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:r?"Saving...":"Save Changes"}),o.jsx("button",{onClick:_,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Edit Profile"}),o.jsx("button",{onClick:()=>e("/change-password?type=user"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Change Password"})]}),o.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2",children:"Personal Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Yr,{label:"Full Name",name:"name",value:R.name,onChange:b,disabled:!l,required:!0}),o.jsx(Yr,{label:"Email Address",type:"email",name:"email",value:R.email,onChange:b,disabled:!l,required:!0}),o.jsx(Yr,{label:"CNIC",name:"cnic",value:R.cnic,onChange:b,disabled:!l,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,required:!0})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2",children:"Account Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User ID"}),o.jsx("p",{className:"text-gray-900 font-mono text-sm",children:t._id})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),o.jsx("p",{className:"text-gray-900 capitalize",children:t.role})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Member Since"}),o.jsx("p",{className:"text-gray-900",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():""})]})]})]})]}),o.jsxs("div",{className:"mt-12",children:[o.jsx("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2 mb-6",children:"Your Appointments"}),N?.userAppointments?o.jsx("div",{className:"text-gray-600",children:"Loading your appointments..."}):C?.length?o.jsx("div",{className:"space-y-3",children:C.map(k=>o.jsx(AR,{appointment:k,role:"user",showCancel:k.status!=="cancelled",onCancel:()=>u(k._id)},k._id))}):o.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg text-center",children:[o.jsx("p",{className:"text-gray-600 mb-1",children:"No appointments yet."}),o.jsx("p",{className:"text-sm text-gray-500",children:"Book your first appointment from the doctor page."})]})]})]})})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg text-emerald-700",children:"Please login to view your profile"})})})},rz=()=>{const{meetingId:e,doctorId:t}=xl(),r=as(),{user:s,isAuthenticated:l}=si(),[h,C]=Z.useState(!1),[N,y]=Z.useState(null),[u,R]=Z.useState(!0);Z.useEffect(()=>{if(!l){gt.error("Please login to join consultation"),r("/login");return}if(!e){gt.error("Invalid consultation link"),r("/");return}v()},[e,l]);const v=async()=>{try{R(!0),y({meetingId:e,doctorId:t,patientId:s?._id,patientName:s?.name,startTime:new Date().toISOString()}),C(!0)}catch{gt.error("Failed to start consultation"),r("/")}finally{R(!1)}},b=()=>{C(!1),gt.info("Consultation ended"),r("/")};return u?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{children:"Initializing consultation..."})]})}):N?o.jsx("div",{className:"h-screen",children:h&&o.jsx(mE,{meetingId:N.meetingId,doctorId:N.doctorId,userId:N.patientId,userName:N.patientName,isPatient:!0,onLeave:b})}):o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("p",{children:"Failed to load consultation"}),o.jsx("button",{onClick:()=>r("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go Home"})]})})},Z1=()=>{const{meetingId:e,patientId:t}=xl(),r=as(),{user:s,isAuthenticated:l}=si(),[h,C]=Z.useState(!1),[N,y]=Z.useState(null),[u,R]=Z.useState(!0),{doctor:v}=fs();Z.useEffect(()=>{if(!v){gt.error("Please login to host consultation"),r("/doctor/login");return}b()},[e,l]);const b=async()=>{try{R(!0),y({meetingId:e,doctorId:s?._id,doctorName:s?.name,patientId:t,startTime:new Date().toISOString()}),C(!0)}catch{gt.error("Failed to start consultation"),r("/")}finally{R(!1)}},E=()=>{C(!1),gt.info("Consultation ended"),r("/doctor/messages")};return u?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{children:"Initializing consultation..."})]})}):N?o.jsx("div",{className:"h-screen",children:h&&o.jsx(mE,{meetingId:N.meetingId,doctorId:N.doctorId,userId:N.doctorId,userName:N.doctorName,isPatient:!1,onLeave:E})}):o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("p",{children:"Failed to load consultation"}),o.jsx("button",{onClick:()=>r("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go Home"})]})})},az=Tc({email:Jr().email("Invalid email"),password:Jr().min(6,"Password must be at least 6 characters")}),sz=()=>{const{login:e,loading:t,error:r}=$o(),s=as(),{register:l,handleSubmit:h,formState:{errors:C}}=El({resolver:kl(az)}),N=async y=>{await e(y,s)};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"text-4xl mb-2",children:""}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800",children:"Admin Login"}),o.jsx("p",{className:"text-emerald-600",children:"Access the admin dashboard"})]}),o.jsxs("form",{onSubmit:h(N),className:"space-y-4",children:[o.jsx(Yr,{label:"Email",name:"email",type:"email",...l("email"),error:C.email?.message,autoComplete:"email",required:!0}),o.jsx(Yr,{label:"Password",name:"password",type:"password",...l("password"),error:C.password?.message,autoComplete:"current-password",required:!0}),o.jsx("button",{type:"submit",className:"w-full py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition disabled:opacity-50",disabled:t.login,children:t.login?"Signing in...":"Sign In"})]})]})})},iz=({statistics:e})=>{const{hospitalStatistics:t}=$o();return o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:E4(e,t).map((r,s)=>o.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full ${r.bgColor} ${r.textColor}`,children:o.jsx("span",{className:"text-lg md:text-xl",children:r.icon})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-xs font-medium text-gray-600",children:r.title}),o.jsx("p",{className:"text-xl font-semibold text-gray-900",children:r.count||0})]})]})},s))})},oz=({label:e,value:t})=>o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[e,":"]}),o.jsx("span",{className:"text-sm text-gray-900",children:t||"Not provided"})]}),lp=({condition:e,trueLabel:t,falseLabel:r})=>o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e?t:r}),cz=({status:e})=>{const t={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t[e]||"bg-gray-100 text-gray-800"}`,children:e?.charAt(0).toUpperCase()+e?.slice(1)||"Unknown"})},lz=({isRejected:e,isApproved:t,isOpen:r,doctor:s,onClose:l,onApprove:h,onReject:C,handleDoctorReject:N,onToggleActive:y,onProfileImageUpload:u})=>{const[R,v]=Z.useState(null),[b,E]=Z.useState(!1),[_,m]=Z.useState(""),[k,w]=Z.useState(s.documents||[]),[F,g]=Z.useState(!1),{DoctorDocumentUpload:A,doctorProfilePicture:P,updateDoctorDetails:H,doctorAction:D}=$o(),S=$t.useRef(),x=$t.useRef(),[d,T]=Z.useState(null),[O,M]=Z.useState(!1),[I,U]=Z.useState({}),[z,$]=Z.useState(!1);$t.useEffect(()=>{w(s.documents||[]),U({name:s.name||"",speciality:Array.isArray(s.speciality)?s.speciality:[s.speciality||""],phone:s.phone||"",mainDegree:s.mainDegree||"",fullAddress:s.fullAddress||"",hospital:s.hospital||"",experience:s.experience||"",fee:s.fee||"",availability:s.availability||!1,pmdcNumber:s.pmdcNumber||"",cnic:s.cnic||"",email:s.email||"",gender:s.gender||""})},[s.documents,s]);const q=(Ge,He)=>{U(Te=>({...Te,[Ge]:He}))},ae=async()=>{$(!0);try{const Ge=I.speciality.filter(Te=>Te.trim()!==""),He={...I,speciality:Ge,experience:parseInt(I.experience)||0,fee:parseInt(I.fee)||0};H(s._id,He),M(!1)}catch{gt.error("Failed to save changes")}finally{$(!1)}},Q=()=>{M(!1),U({name:s.name||"",speciality:Array.isArray(s.speciality)?s.speciality:[s.speciality||""],phone:s.phone||"",mainDegree:s.mainDegree||"",fullAddress:s.fullAddress||"",hospital:s.hospital||"",hospitalVerified:!!s.hospitalVerified,experience:s.experience||"",fee:s.fee||"",availability:s.availability||!1,pmdcNumber:s.pmdcNumber||"",cnic:s.cnic||"",email:s.email||"",gender:s.gender||""})},ve=async Ge=>{Ge.preventDefault();const He=Ge.target.files[0];if(He){g(!0);try{const Te=URL.createObjectURL(He),dt=new FormData;dt.append("documents",He),await A(dt,s._id)}catch(Te){gt.error(Te.response.data.data)}finally{g(!1)}}},we=async()=>{s.isActive?await D(s._id,{action:!1}):await D(s._id,{action:!0})},Re=async Ge=>{const He=Ge.target.files[0];if(He){const Te=URL.createObjectURL(He);T(Te);const dt=new FormData;dt.append("image",He),await P(s._id,dt)}};if(!r||!s)return null;const me=Ge=>DR(Ge,"LLL"),Ce=Ge=>{if(!Ge){gt.error("No image URL provided");return}v(Ge),E(!0)},Be=()=>{E(!1),v(null)};$t.useEffect(()=>{const Ge=He=>{He.key==="Escape"&&b&&Be()};return b&&document.addEventListener("keydown",Ge),()=>{document.removeEventListener("keydown",Ge)}},[b]);const be=(Ge,He)=>o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:Ge}),o.jsx("div",{className:"space-y-3",children:He.map(({key:Te,label:dt,value:_t})=>o.jsx(oz,{label:dt,value:_t},Te))})]}),Ye=[{key:"created",label:"Created",value:me(s.createdAt)},{key:"updated",label:"Updated",value:me(s.updatedAt)},...s.PaymentCompleted?[{key:"payment",label:"Payment Completed",value:me(s.PaymentCompleted)}]:[]],Qe=[{key:"avg",label:"Average Rating",value:s.rating?.average?`${s.rating.average}/5`:"No ratings"},{key:"reviews",label:"Total Reviews",value:s.rating?.count||0}];return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center relative overflow-hidden",children:[d||s.profilePicture||s.profileImageUrl?o.jsx("img",{src:d||s.profilePicture||s.profileImageUrl,alt:"Profile",className:"h-12 w-12 object-cover rounded-full",onError:Ge=>{Ge.currentTarget.src=""}}):o.jsx("span",{className:"text-emerald-600 font-medium text-lg",children:s.name?.split(" ")?.map(Ge=>Ge[0])?.join("")||"DR"}),o.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 shadow hover:bg-gray-100",title:"Edit Profile Image",onClick:()=>x.current&&x.current.click(),children:o.jsx(I4,{})}),o.jsx("input",{type:"file",accept:"image/*",ref:x,className:"hidden",onChange:Re})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.name||"Unknown Doctor"}),o.jsx("p",{className:"text-sm text-gray-500",children:s.email||"No email"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>M(!O),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${O?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:O?"View Mode":"Edit Mode"}),o.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:o.jsx(hx,{})})]})]}),o.jsxs("div",{className:"px-6 py-4 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[O?o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(hE,{values:I,errors:{},include:{password:!1,confirmPassword:!1,agreement:!1,city:!1,hospital:!1,hospitalVerified:!1},onInputChange:Ge=>He=>{const Te=He?.target?.type==="checkbox"?He.target.checked:He?.target?.value;q(Ge,Te)},onDropdownChange:(Ge,He)=>q(Ge,He),onSpecialtyChange:Ge=>q("speciality",Ge),onCnicChange:Ge=>{const He=Ge?.target?.value||"";q("cnic",He)}}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"availability",checked:I.availability||!1,onChange:Ge=>q("availability",Ge.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"availability",className:"text-sm text-gray-700",children:"Available for appointments"})]})]})}):o.jsxs(o.Fragment,{children:[be("Personal Information",k4(s)),be("Professional Information",C4(s))]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Verification Status"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Status:"}),o.jsx(cz,{status:s.status})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"PMDC Verified:"}),o.jsx(lp,{condition:s.pmdcVerified,trueLabel:"Verified",falseLabel:"Not Verified"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Hospital Verified:"}),o.jsx(lp,{condition:s.hospitalVerified,trueLabel:"Verified",falseLabel:"Not Verified"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Availability:"}),o.jsx(lp,{condition:s.availability,trueLabel:"Available",falseLabel:"Not Available"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Active:"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(lp,{condition:s.isActive,trueLabel:"Active",falseLabel:"Inactive"}),o.jsx("button",{type:"button",className:"ml-2 px-2 py-1 text-xs font-medium text-blue-600 bg-blue-100 rounded hover:bg-blue-200",onClick:we,title:"Toggle Active Status",children:"Edit"})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Blocked:"}),o.jsx(lp,{condition:!s.isBlocked,trueLabel:"Not Blocked",falseLabel:"Blocked"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:["Documents (",k?.length||0,")"]}),k?.length?k.map((Ge,He)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-8 w-8 bg-emerald-100 rounded flex items-center justify-center",children:o.jsx(B4,{})}),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Document ",He+1]})]}),o.jsx("button",{onClick:()=>{Ce(Ge.documentUrl)},className:"text-emerald-600 hover:text-emerald-800 text-sm font-medium",children:"View"})]},He)):o.jsx("p",{className:"text-sm text-gray-500",children:"No documents uploaded"}),o.jsx("input",{id:"documents",type:"file",name:"documents",accept:"image/*",onChange:ve,className:"hidden",ref:S}),o.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",onClick:()=>S.current&&S.current.click(),disabled:F,children:F?"Uploading...":"Add Documents"}),_&&o.jsx("p",{className:"text-sm text-red-600",children:_})]}),be("Timestamps",Ye),be("Rating",Qe)]}),s.verificationNotes&&o.jsxs("div",{className:"px-6 pb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Verification Notes"}),o.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.verificationNotes})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[O&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:Q,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{onClick:ae,className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",disabled:z,children:z?"Saving...":"Save Changes"})]}),o.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"}),!e&&o.jsx("button",{onClick:()=>N(s._id),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Reject"}),!t&&o.jsx("button",{onClick:()=>h(s._id),className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",children:"Approve"})]})]}),b&&R&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60]",onClick:Be,children:o.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] mx-4",onClick:Ge=>Ge.stopPropagation(),children:[o.jsx("button",{onClick:Be,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2",children:o.jsx(hx,{})}),o.jsx("button",{onClick:()=>{const Ge=document.createElement("a");Ge.href=R,Ge.download=`document_${Date.now()}.jpg`,Ge.click()},className:"absolute top-4 right-16 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2",children:o.jsx(z4,{})}),o.jsx("img",{src:R,alt:"Document",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onError:Ge=>{Ge.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCAxMDBDNTAgNzIuODM4IDcyLjgzOCA1MCAxMDAgNTBDMTI3LjE2MiA1MCAxNTAgNzIuODM4IDE1MCAxMDBDMTUwIDEyNy4xNjIgMTI3LjE2MiAxNTAgMTAwIDE1MEM3Mi44MzggMTUwIDUwIDEyNy4xNjIgNTAgMTAwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDEyNUMxMTMuODA3IDEyNSAxMjUgMTEzLjgwNyAxMjUgMTAwQzEyNSA4Ni4xOTMgMTEzLjgwNyA3NSAxMDAgNzVDODYuMTkzIDc1IDc1IDg2LjE5MyA3NSAxMEM3NSAxMTMuODA3IDg2LjE5MyAxMjUgMTAwIDEyNVoiIGZpbGw9IiM2QjcyNzkiLz4KPHN2Zz4K",Ge.target.alt="Image not available"}}),o.jsx("div",{className:"absolute bottom-4 left-4 text-white text-sm bg-black bg-opacity-50 px-3 py-2 rounded-lg",children:"Click outside or press ESC to close"})]})})]})},uz=({label:e,value:t})=>o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[e,":"]}),o.jsx("span",{className:"text-sm text-gray-900",children:t||"Not provided"})]}),$v=({condition:e,trueLabel:t,falseLabel:r})=>o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e?t:r}),dz=({status:e})=>{const t={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t[e]||"bg-gray-100 text-gray-800"}`,children:e?.charAt(0).toUpperCase()+e?.slice(1)||"Unknown"})},hz=({isRejected:e,isOpen:t,hospital:r,onClose:s,onApprove:l,onReject:h,handleHospitalReject:C})=>{const[N,y]=Z.useState(null),[u,R]=Z.useState(!1),[v,b]=Z.useState(""),[E,_]=Z.useState(r.documents||[]),{loading:m,hospitalProfilePicture:k,HospitalDocumentUpload:w}=$o();$t.useRef();const F=$t.useRef(),[g,A]=Z.useState(null);$t.useEffect(()=>{_(r.documents||[])},[r.documents,r]);const P=async M=>{const I=M.target.files[0];if(I){const U=URL.createObjectURL(I);A(U);const z=new FormData;z.append("image",I),await k(r._id,z)}};if(!t||!r)return null;const H=M=>DR(M,"LLL"),D=()=>{R(!1),y(null)};$t.useEffect(()=>{const M=I=>{I.key==="Escape"&&u&&D()};return u&&document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[u]);const S=[{key:"name",label:"Hospital Name",value:r.name},{key:"email",label:"Email",value:r.email},{key:"phone",label:"Phone",value:r.phone},{key:"cnic",label:"CNIC",value:r.cnic},{key:"address",label:"Address",value:r.address},{key:"city",label:"City",value:r.city}],x=[{key:"type",label:"Hospital Type",value:r.hospitalType},{key:"category",label:"Category",value:r.category},{key:"license",label:"License Number",value:r.licenseNumber},{key:"established",label:"Established Year",value:r.establishedYear?`${r.establishedYear}`:"Not specified"},{key:"beds",label:"Total Beds",value:r.totalBeds},{key:"ot",label:"Operation Theaters",value:r.operationTheaters}],d=(M,I)=>o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:M}),o.jsx("div",{className:"space-y-3",children:I.map(({key:U,label:z,value:$})=>o.jsx(uz,{label:z,value:$},U))})]}),T=[{key:"created",label:"Created",value:H(r.createdAt)},{key:"updated",label:"Updated",value:H(r.updatedAt)}],O=[{key:"avg",label:"Average Rating",value:r.rating?.average?`${r.rating.average}/5`:"No ratings"},{key:"reviews",label:"Total Reviews",value:r.rating?.count||0}];return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center relative overflow-hidden",children:[g||r.profilePicture||r.profileImageUrl||r.image?o.jsx("img",{src:g||r.profilePicture||r.profileImageUrl||r.image,alt:"Hospital",className:"h-12 w-12 object-cover rounded-full",onError:M=>{M.currentTarget.src=""}}):o.jsx("span",{className:"text-emerald-600 font-medium text-lg",children:""}),o.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 shadow hover:bg-gray-100",title:"Edit Hospital Image",onClick:()=>F.current&&F.current.click(),children:o.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2H7a2 2 0 01-2-2v-1.586a1 1 0 01.293-.707l9.414-9.414a1 1 0 011.414 0l1.586 1.586a1 1 0 010 1.414l-9.414 9.414A1 1 0 017 19v-1.586z"})})}),o.jsx("input",{type:"file",accept:"image/*",ref:F,className:"hidden",onChange:P})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r.name||"Unknown Hospital"}),o.jsx("p",{className:"text-sm text-gray-500",children:r.email||"No email"})]})]}),o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),o.jsxs("div",{className:"px-6 py-4 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d("Basic Information",S),d("Hospital Information",x),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Verification Status"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Status:"}),o.jsx(dz,{status:r.status})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"License Verified:"}),o.jsx($v,{condition:r.licenseVerified,trueLabel:"Verified",falseLabel:"Not Verified"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Active:"}),o.jsx($v,{condition:r.isActive,trueLabel:"Active",falseLabel:"Inactive"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Blocked:"}),o.jsx($v,{condition:!r.isBlocked,trueLabel:"Not Blocked",falseLabel:"Blocked"})]})]})]}),d("Timestamps",T),d("Rating",O)]}),r.verificationNotes&&o.jsxs("div",{className:"px-6 pb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Verification Notes"}),o.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:r.verificationNotes})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[o.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"}),!e&&o.jsx("button",{onClick:()=>C(r._id),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Reject"}),o.jsx("button",{onClick:()=>l(r._id),className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",children:"Approve"})]})]}),u&&N&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60]",onClick:D,children:o.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] mx-4",onClick:M=>M.stopPropagation(),children:[o.jsx("button",{onClick:D,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsx("button",{onClick:()=>{const M=document.createElement("a");M.href=N,M.download=`document_${Date.now()}.jpg`,M.click()},className:"absolute top-4 right-16 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),o.jsx("img",{src:N,alt:"Document",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onError:M=>{M.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCAxMDBDNTAgNzIuODM4IDcyLjgzOCA1MCAxMDAgNTBDMTI3LjE2MiA1MCAxNTAgNzIuODM4IDE1MCAxMDBDMTUwIDEyNy4xNjIgMTI3LjE2MiAxNTAgMTAwIDE1MEM3Mi44MzggMTUwIDUwIDEyNy4xNjIgNTAgMTAwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDEyNUMxMTMuODA3IDEyNSAxMjUgMTEzLjgwNyAxMjUgMTAwQzEyNSA4Ni4xOTMgMTEzLjgwNyA3NSAxMDAgNzVDODYuMTkzIDc1IDc1IDg2LjE5MyA3NSAxMEM3NSAxMTMuODA3IDg2LjE5MyAxMjUgMTAwIDEyNVoiIGZpbGw9IiM2QjcyNzkiLz4KPHN2Zz4K",M.target.alt="Image not available"}}),o.jsx("div",{className:"absolute bottom-4 left-4 text-white text-sm bg-black bg-opacity-50 px-3 py-2 rounded-lg",children:"Click outside or press ESC to close"})]})})]})},pz=({logout:e,navigate:t})=>{const r=()=>{e(),t("/admin/login")};return o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-emerald-600 text-2xl mr-3",children:""}),o.jsx("h1",{className:"text-2xl font-bold text-emerald-800",children:"Admin Dashboard"})]}),o.jsx("div",{className:"flex items-center space-x-4",children:o.jsx("button",{onClick:r,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})})]})})})},eh=({pendingItems:e,type:t,title:r="",onApprove:s,onReject:l,isRejected:h,isApproved:C,onOpenRejectModal:N,onActivatePayment:y})=>{const[u,R]=Z.useState(null),[v,b]=Z.useState(!1),[E,_]=Z.useState(null),[m,k]=Z.useState(!1),[w,F]=Z.useState(""),[g,A]=Z.useState(1),P=5;Z.useEffect(()=>{A(1)},[e,w]);const H=Z.useMemo(()=>{const U=w.trim().toLowerCase();return U?(e||[]).filter(z=>(z.name||"").toLowerCase().includes(U)):e||[]},[e,w]),D=Math.max(1,Math.ceil(H.length/P)),S=Z.useMemo(()=>{const U=(g-1)*P;return H.slice(U,U+P)},[H,g]);if(!e||e.length===0)return o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("span",{className:"text-4xl mb-4 block",children:t==="doctor"?"":""}),o.jsxs("p",{className:"text-gray-600",children:["No pending ",t," applications to review!"]})]});const x=U=>{t==="doctor"?(R(U),b(!0)):(_(U),k(!0))},d=()=>{b(!1),R(null),k(!1),_(null)},T=U=>{s(U),d()},O=(U="")=>{const z=U.split(" ").map(q=>q[0]||"").join("").slice(0,3),$=z.length<=2?"text-base":z.length===3?"text-sm":"text-xs";return o.jsx("span",{className:`text-emerald-600 font-medium ${$}`,children:z})},I=t==="doctor"?[{key:"name",label:"Doctor",render:U=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:o.jsxs("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center overflow-hidden",children:[U.profilePicture||U.profileImageUrl?o.jsx("img",{src:U.profilePicture||U.profileImageUrl,alt:"Profile",className:"h-10 w-10 object-cover rounded-full",onError:z=>{z.currentTarget.style.display="none",z.currentTarget.nextElementSibling.style.display="flex"}}):null,o.jsx("div",{className:`h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center ${U.profilePicture||U.profileImageUrl?"hidden":""}`,children:O(U.name)})]})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.name}),o.jsx("div",{className:"text-sm text-gray-500",children:U.email})]})]})},{key:"speciality",label:"Speciality",render:U=>o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900",children:U.speciality}),o.jsx("div",{className:"text-sm text-gray-500",children:U.mainDegree})]})},{key:"contact",label:"Contact",render:U=>o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900",children:U.phone}),o.jsx("div",{className:"text-sm text-gray-500",children:U.hospital})]})},{key:"pmdc",label:"PMDC Status",render:U=>o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${U.pmdcVerified?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.pmdcVerified?"Verified":"Not Verified"})},{key:"paymentStatus",label:"Payment Status",render:U=>o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${U.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.isActive?"Active":"Inactive"})}]:[{key:"name",label:"Hospital",render:U=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:o.jsxs("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center overflow-hidden",children:[U.profilePicture||U.profileImageUrl||U.image?o.jsx("img",{src:U.profilePicture||U.profileImageUrl||U.image,alt:"Profile",className:"h-10 w-10 object-cover rounded-full",onError:z=>{z.currentTarget.style.display="none",z.currentTarget.nextElementSibling.style.display="flex"}}):null,o.jsx("div",{className:`h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center ${U.profilePicture||U.profileImageUrl||U.image?"hidden":""}`,children:O(U.name)})]})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.name}),o.jsx("div",{className:"text-sm text-gray-500",children:U.email})]})]})},{key:"type",label:"Type & Category",render:U=>o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900",children:U.hospitalType}),o.jsx("div",{className:"text-sm text-gray-500",children:U.category})]})},{key:"contact",label:"Contact",render:U=>o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900",children:U.phone}),o.jsx("div",{className:"text-sm text-gray-500",children:U.city})]})}];return o.jsxs("div",{className:"bg-white",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between gap-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r}),o.jsx("div",{className:"ml-auto w-full sm:w-64",children:o.jsx("input",{type:"text",value:w,onChange:U=>F(U.target.value),placeholder:"Search by name",className:"w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-300","aria-label":"Search by name"})})]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[I.map(U=>o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:U.label},U.key)),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[S.map(U=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[I.map(z=>o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z.render(U)},z.key)),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex space-x-2",children:[!C&&o.jsx("button",{onClick:()=>s(U._id),className:"bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700 transition-colors",children:"Approve"}),!h&&o.jsx("button",{onClick:()=>l(U._id),className:"bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",children:"Reject"}),o.jsx("button",{onClick:()=>x(U),className:"bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors",children:"View Details"})]})})]},U._id)),H.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:I.length+1,className:"px-6 py-8 text-center text-gray-500",children:"No results found."})})]})]})}),o.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",H.length===0?0:S.length," of"," ",H.length," result(s)"]}),o.jsxs("div",{className:"inline-flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>A(U=>Math.max(1,U-1)),disabled:g===1,className:"px-3 py-1 rounded border text-sm disabled:opacity-50",children:"Prev"}),o.jsx("div",{className:"inline-flex items-center space-x-1",children:Array.from({length:D},(U,z)=>z+1).map(U=>o.jsx("button",{onClick:()=>A(U),"aria-current":U===g?"page":void 0,className:`px-3 py-1 rounded text-sm border ${U===g?"bg-emerald-600 text-white border-emerald-600":""}`,children:U},U))}),o.jsx("button",{onClick:()=>A(U=>Math.min(D,U+1)),disabled:g===D,className:"px-3 py-1 rounded border text-sm disabled:opacity-50",children:"Next"})]})]}),v&&u&&o.jsx(lz,{isOpen:v,onClose:d,onApprove:T,doctor:u,handleDoctorReject:l,isRejected:h,isApproved:C}),m&&E&&o.jsx(hz,{isOpen:m,onClose:d,onApprove:T,hospital:E,handleHospitalReject:l,isRejected:h,isApproved:C})]})},fz=()=>{const{pendingDoctors:e,approvedDoctors:t,rejectedDoctors:r,pendingHospitals:s,approvedHospitals:l,rejectedHospitals:h,approveDoctor:C,rejectDoctor:N,approveHospital:y,rejectHospital:u,statistics:R,logout:v}=$o(),b=as(),E=async w=>await C(w),_=async w=>await y(w),m=async w=>await N(w),k=async w=>await u(w);return o.jsxs("div",{className:"min-h-screen bg-emerald-50",children:[o.jsx(pz,{logout:v,navigate:b}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx(iz,{statistics:R}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(eh,{title:"Pending Doctor Applications",pendingItems:e,type:"doctor",onApprove:w=>E(w),onReject:w=>m(w)})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(eh,{title:"Pending Hospital Applications",pendingItems:s,type:"hospital",onApprove:w=>_(w),onReject:w=>k(w)})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(eh,{title:"Approved Doctor Applications",pendingItems:t,type:"doctor",onApprove:w=>E(w),onReject:w=>m(w),isApproved:!0})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(eh,{title:"Approved Hospital Applications",pendingItems:l,type:"hospital",onApprove:w=>_(w),onReject:w=>k(w),isApproved:!0})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(eh,{title:"Rejected Doctor Applications",pendingItems:r,type:"doctor",onApprove:w=>E(w),onReject:w=>m(w),isRejected:!0})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(eh,{title:"Rejected Hospital Applications",pendingItems:h,type:"hospital",onApprove:w=>_(w),onReject:w=>k(w),isRejected:!0})})]})]})},mz=()=>{const[e,t]=Z.useState(null),[r,s]=Z.useState(null),[l,h]=Z.useState(null),[C,N]=Z.useState(""),[y,u]=Z.useState(!1),R=as(),{UpdateProfilePic:v,DoctorDocumentUpload:b,loading:E,doctor:_}=fs();Z.useEffect(()=>()=>{l&&URL.revokeObjectURL(l)},[l]),Z.useEffect(()=>{C&&u(!0)},[C]);const m=F=>{const g=F.target.files;g.length>0?t(g):t(null)},k=F=>{const g=F.target.files[0];if(s(g),g){const A=URL.createObjectURL(g);h(A);const P=new FormData;P.append("image",g),v(P)}},w=F=>{if(F.preventDefault(),!e){N("Please upload at least one image document.");return}const g=new FormData;Array.from(e).forEach(A=>{g.append("documents",A)}),b(g,R),N("Login successful but account is still in pending verification. We are reviewing your profile and will contact you via email.")};return _?.hasDocuments?o.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",children:o.jsxs("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-lg p-8 text-center",children:[o.jsx("div",{className:"flex justify-center mb-6",children:o.jsx(n6,{className:"w-20 h-20 text-emerald-500"})}),o.jsx("h2",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Documents Already Uploaded"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your documents have been successfully uploaded and are currently under review. You cannot upload additional documents at this time."}),o.jsx("button",{onClick:()=>R("/"),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-3 px-6 rounded-md shadow transition",children:"Go to Home"})]})}):o.jsxs("div",{className:"min-h-screen  flex items-center justify-center px-4 py-12",children:[o.jsxs("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-lg p-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-center text-emerald-800 mb-6",children:"Upload Your Documents"}),o.jsxs("form",{onSubmit:w,className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col items-center gap-2",children:o.jsxs("label",{htmlFor:"profileImage",className:"cursor-pointer group",children:[o.jsx("div",{className:"w-28 h-28 mx-auto rounded-full border-4 border-dashed border-emerald-400 flex items-center justify-center bg-gray-50 overflow-hidden transition hover:border-emerald-600",children:l?o.jsx("img",{src:l,alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(a6,{className:"w-16 h-16 text-gray-300 group-hover:text-emerald-400"})}),o.jsx("input",{id:"profileImage",type:"file",name:"profileImage",accept:"image/*",onChange:k,className:"hidden"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2 group-hover:text-emerald-700 transition",children:"Click to upload profile image (optional)"})]})}),o.jsxs("div",{className:"w-full",children:[o.jsxs("label",{className:"block text-sm font-medium text-emerald-700 mb-1",children:["Upload Supporting Documents"," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("div",{className:"flex items-center justify-center w-full",children:o.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-emerald-300 rounded-lg cursor-pointer bg-emerald-50 hover:bg-emerald-100 transition",children:[o.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[o.jsx(aS,{className:"w-8 h-8 mb-2 text-emerald-500"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[o.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag & drop image(s)"]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Only image formats are allowed (JPG, PNG, etc.)"})]}),o.jsx("input",{type:"file",name:"documents",accept:"image/*",onChange:m,className:"hidden",multiple:!0,required:!0})]})}),e&&o.jsx("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside space-y-1",children:Array.from(e).map((F,g)=>o.jsx("li",{children:F.name},g))})]}),o.jsx("button",{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-2 px-4 rounded-md shadow transition",children:E?"Submitting...":"Submit Documents"})]})]}),y&&o.jsx(Hp,{open:y,onOpenChange:u,title:"Verification Pending",description:"Login successful but account is still in pending verification. We are reviewing your profile and will contact you via email.",children:o.jsx("button",{className:"w-fit mx-auto px-5 py-2 rounded-lg bg-emerald-600 text-white font-semibold shadow-md hover:bg-emerald-700 transition-all duration-300",onClick:()=>R("/"),children:"Home"})})]})},gz=()=>{const{doctor:e,logout:t,DoctorProfileUpdate:r,UpdateProfilePic:s,pendingValidation:l}=fs(),[h,C]=Z.useState(!1),[N,y]=Z.useState(""),[u,R]=Z.useState(!1),[v,b]=Z.useState(""),[E,_]=Z.useState([]),[m,k]=Z.useState({workingDays:[],startTime:"09:00",endTime:"17:00",appointmentDuration:30}),[w,F]=Z.useState({phone:e?.phone||"",availability:!0,fee:e?.fee||"",fullAddress:e?.fullAddress||"",experience:e?.experience||""}),g=as(),{doctorsAppointments:A,loading:P,doctorAppointments:H,appointmentStatus:D,doctorAppointmentsCancel:S,getSchedule:x,doctorAppointmentsSchedule:d}=U0();Z.useEffect(()=>{const $=()=>{_([{patientName:"John Doe",date:new Date,meetingId:"meeting_1754952068034_88yzffp2o",patientId:"patient_001",symptoms:"Fever and headache"}])};$();const q=setInterval($,3e4);return()=>clearInterval(q)},[]),Z.useEffect(()=>{H().catch(()=>{}),e?._id&&x(e._id).then($=>{$&&k({workingDays:$.workingDays||[],startTime:$.startTime||"09:00",endTime:$.endTime||"17:00",appointmentDuration:$.appointmentDuration||30})}).catch(()=>{})},[e?._id]);const T=$=>{D($)},O=async $=>{$.preventDefault(),r(w)},M=$=>{const q=$.target.files[0];if(q){const ae=URL.createObjectURL(q);y(ae);const Q=new FormData;Q.append("image",q),s(Q)}},I=()=>{t(g)},U=$=>{k(q=>{const Q=q.workingDays?.includes($)?q.workingDays.filter(ve=>ve!==$):[...q.workingDays||[],$];return{...q,workingDays:Q}})},z=async $=>{$?.preventDefault?.();const q=new Set(m.workingDays||[]),ae={workingDays:{monday:q.has("Mon"),tuesday:q.has("Tue"),wednesday:q.has("Wed"),thursday:q.has("Thu"),friday:q.has("Fri"),saturday:q.has("Sat"),sunday:q.has("Sun")},startTime:m.startTime,endTime:m.endTime,appointmentDuration:Number(m.appointmentDuration)||30};await d(ae),e?._id&&await x(e._id)};return!e&&!l?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsx("h2",{className:"text-2xl text-emerald-700 font-semibold",children:"No doctor found."})}):l?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 p-4",children:o.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-2xl w-full text-center",children:o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:"w-20 h-20 mx-auto bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:o.jsx("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h2",{className:"text-3xl font-bold text-yellow-700 mb-4",children:"Application Pending"}),o.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Your account is pending verification. We will notify you via email once verified."}),o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[o.jsxs("p",{className:"text-sm text-yellow-800",children:[o.jsx("strong",{children:"Current Status:"})," Pending Verification"]}),o.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:[o.jsx("strong",{children:"Name:"})," ",e?.name]}),o.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:[o.jsx("strong",{children:"Speciality:"})," ",e?.speciality?.join(", ")||"Not specified"]}),o.jsx("button",{onClick:I,className:"bg-red-600 text-white mt-4 px-4 py-2 rounded-lg hover:bg-red-700",children:"Logout"})]})]})})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4 flex justify-center",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-2xl w-full",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-4",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800",children:"Doctor Profile"}),o.jsxs("div",{className:"flex flex-wrap gap-2 justify-center sm:justify-end",children:[E.length>0&&o.jsx("div",{className:"relative",children:o.jsxs("button",{onClick:()=>{document.querySelector("[data-consultation-section]")?.scrollIntoView({behavior:"smooth"})},className:"bg-red-100 text-red-700 px-4 py-2 rounded-lg hover:bg-red-200 transition-colors relative font-medium",children:[o.jsx("span",{children:"Pending Consultations"}),o.jsx("span",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold",children:E.length})]})}),o.jsx("button",{onClick:()=>C(!h),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors font-medium",children:h?"Cancel":"Edit"})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 justify-center sm:justify-end",children:[o.jsx("button",{onClick:()=>g("/change-password?type=doctor"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Change Password"}),o.jsx("button",{onClick:I,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Logout"})]})]}),h?o.jsxs("form",{onSubmit:O,className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:N||e.profilePicture,alt:e.name,className:"w-28 h-28 rounded-full object-cover mb-4 border-4 border-emerald-100"}),o.jsxs("label",{className:"absolute bottom-4 right-0 bg-emerald-600 text-white p-2 rounded-full cursor-pointer hover:bg-emerald-700",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),o.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"hidden"})]})]}),o.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:e.name}),o.jsx("p",{className:"text-sm text-emerald-700",children:e.speciality?.join(", ")||e.specialty})]}),o.jsx(Yr,{label:"Phone Number",name:"phone",type:"tel",value:w.phone,onChange:$=>F(q=>({...q,phone:$.target.value})),placeholder:"Enter phone number"}),o.jsx(Yr,{label:"Consultation Fee (Rs.)",name:"fee",type:"text",value:w.fee,onChange:$=>F(q=>({...q,fee:$.target.value})),placeholder:"Enter consultation fee"}),o.jsx(Yr,{label:"Experience",name:"experience",type:"text",value:w.experience,onChange:$=>F(q=>({...q,experience:$.target.value})),placeholder:"Enter years of experience"}),o.jsx(Yr,{label:"Full Address",name:"fullAddress",type:"text",value:w.fullAddress,onChange:$=>F(q=>({...q,fullAddress:$.target.value})),placeholder:"Enter full address"}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("button",{type:"button",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700",onClick:()=>R(!0),children:"Update More Details"}),o.jsx("button",{type:"submit",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700",children:"Save Changes"})]})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("img",{src:e.profilePicture,alt:e.name,className:"w-28 h-28 rounded-full object-cover mb-2 border-4 border-emerald-100"}),o.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:e.name}),o.jsx("p",{className:"text-sm text-emerald-700",children:e.speciality?.join(", ")||e.specialty})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Experience:"})," ",e.experience," years"]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Hospital:"})," ",e.hospital]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Location:"})," ",e.fullAddress]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Rating:"}),"  ",e?.rating?.average||0," (",e?.rating?.count||0," reviews)"]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Fee:"})," Rs. ",e.fee||"Not set"]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Availability:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.availability?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.availability?"Available":"Not Available"})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"PMDC Number:"})," ",e.pmdcNumber]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Main Degree:"})," ",e.mainDegree]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Status:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.status==="verified"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.status})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Documents Uploaded:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.hasDocuments?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.hasDocuments?"Yes":"No"})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Hospital Verified:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.hospitalVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.hospitalVerified?"Yes":"No"})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"PMDC Verified:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.pmdcVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.pmdcVerified?"Yes":"No"})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Member of Registered Hospital:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.memberofRegisterdHospital?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.memberofRegisterdHospital?"Yes":"No"})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"CNIC:"})," ",e.cnic]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Phone:"})," ",e.phone]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Email:"})," ",e.email]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Gender:"})," ",e.gender]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Religion:"})," ",e.religion]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Payment Completed:"})," ",e.PaymentCompleted?new Date(e.PaymentCompleted).toLocaleDateString():""]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Created:"})," ",e.createdAt?new Date(e.createdAt).toLocaleDateString():""]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Last Updated:"})," ",e.updatedAt?new Date(e.updatedAt).toLocaleDateString():""]})]}),o.jsxs("div",{className:"mt-8 border-t pt-6","data-consultation-section":!0,children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-800 mb-4",children:"Video Consultation Management"}),o.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-green-800 mb-3",children:" Start New Consultation"}),o.jsx("p",{className:"text-green-700 text-sm mb-3",children:"Create a new video consultation room for patients to join."}),o.jsx("button",{onClick:()=>{g("/doctor/consultation/new/new_patient")},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Start New Consultation"})]})]}),o.jsxs("div",{className:"mt-8 border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-800 mb-4",children:"Appointments"}),o.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:P?.doctorAppointments?o.jsx("div",{className:"text-gray-600 text-sm",children:"Loading appointments..."}):A?.length?o.jsx("div",{className:"space-y-3",children:A.map($=>o.jsx(AR,{appointment:$,role:"doctor",showConfirm:$.status!=="confirmed",showCancel:$.status!=="cancelled",onConfirm:()=>T($._id),onCancel:()=>S($._id)},$._id))}):o.jsx("div",{className:"text-gray-600 text-sm",children:"No appointments yet."})})]}),o.jsxs("div",{className:"mt-8 border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-800 mb-4",children:"Weekly Schedule"}),o.jsxs("form",{onSubmit:z,className:"space-y-3",children:[o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map($=>o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:m.workingDays?.includes($),onChange:()=>U($)}),o.jsx("span",{children:$})]},$))}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Start Time"}),o.jsx("input",{type:"time",value:m.startTime,onChange:$=>k(q=>({...q,startTime:$.target.value})),className:"w-full border rounded px-2 py-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"End Time"}),o.jsx("input",{type:"time",value:m.endTime,onChange:$=>k(q=>({...q,endTime:$.target.value})),className:"w-full border rounded px-2 py-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Duration (minutes)"}),o.jsx("input",{type:"number",min:"5",step:"5",value:m.appointmentDuration,onChange:$=>k(q=>({...q,appointmentDuration:Number($.target.value)||30})),className:"w-full border rounded px-2 py-1"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700",children:"Save Schedule"})})]})]})]})]}),o.jsx(Hp,{open:u,onOpenChange:R,title:"Need to Update More Details?",description:"We're here to help! For additional profile updates, please reach out to our support team. You can contact us directly at +92 348 8597922 or connect with our admin team for personalized assistance."})]})},vz=()=>{const{allPublicHospital:e}=to(),[t,r]=Z.useState(null),{slug:s}=xl();return Z.useEffect(()=>{if(e&&e.length>0){const l=s.split("-").pop(),h=e.find(C=>C._id===l);h&&r(h)}},[e,s]),o.jsx("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:o.jsx("div",{className:"max-w-5xl mx-auto",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[o.jsx("img",{src:t?.profilePicture||t?.image||"https://ui-avatars.com/api/?name=Hospital&background=random",alt:t?.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow"}),o.jsxs("div",{className:"flex-1 w-full",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800",children:t?.name}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[t?.hospitalType&&o.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full",children:t?.hospitalType}),t?.status&&o.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs px-3 py-1 rounded-full capitalize",children:t?.status}),t?.city&&o.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full",children:t?.city})]})]}),t?.description&&o.jsx("p",{className:"text-gray-700 mt-3",children:t?.description}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6",children:[o.jsxs("div",{className:"text-gray-700",children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Address:"})," ",t?.address||""]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Contact:"})," ",t?.phone||t?.contact||""]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Email:"})," ",t?.email||""]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Established:"})," ",t?.establishedYear||""]})]}),o.jsxs("div",{className:"text-gray-700",children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Total Beds:"})," ",t?.totalBeds??t?.beds??""]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Operation Theaters:"})," ",t?.operationTheaters??""]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Active:"})," ",t?.isActive?"Yes":"No"]}),Array.isArray(t?.doctors)&&o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Doctors:"})," ",t?.doctors.length]})]})]}),t?.services&&o.jsxs("div",{className:"mt-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-emerald-800 mb-2",children:"Services"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[t?.services?.emergencyServices&&o.jsx("span",{className:"inline-block bg-red-100 text-red-700 text-xs px-3 py-1 rounded-full",children:"Emergency"}),t?.services?.ambulanceServices&&o.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-700 text-xs px-3 py-1 rounded-full",children:"Ambulance"}),t?.services?.icuServices&&o.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 text-xs px-3 py-1 rounded-full",children:"ICU"})]})]}),o.jsx("div",{className:"mt-8 flex flex-col sm:flex-row gap-3",children:o.jsxs(Za,{to:`/hospitals/${s}/doctors`,className:"px-5 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium text-center",children:["View Doctors",Array.isArray(t?.doctors)?` (${t.doctors.length})`:""]})})]})]})})})})},yz=()=>{const e=as(),[t]=A0(),r=t.get("type")||"auth",{ForgotPassword:s,loading:l}=si(),{DoctorForgotPassword:h,loading:C}=fs(),{HospitalForgotPassword:N,loading:y}=to(),u=()=>{switch(r){case"doctor":return{forgotPassword:h,loading:C,title:"Doctor Forgot Password",resetRoute:"/reset-password?type=doctor",loginRoute:"/doctor/login"};case"hospital":return{forgotPassword:N,loading:y,title:"Hospital Forgot Password",resetRoute:"/reset-password?type=hospital",loginRoute:"/hospital/login"};default:return{forgotPassword:s,loading:l,title:"Forgot Password",resetRoute:"/reset-password",loginRoute:"/login"}}},{forgotPassword:R,loading:v,title:b,resetRoute:E,loginRoute:_}=u(),[m,k]=Z.useState(""),w=Tc({email:Jr().min(1,"Email is required").email("Invalid email address")}),{register:F,handleSubmit:g,formState:{errors:A}}=El({resolver:kl(w),mode:"onChange"}),P=async H=>{k("");try{await R(H,()=>e(E))}catch{k("Failed to send reset email. Please try again.")}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:b}),o.jsx("p",{className:"mb-6 text-center text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."}),o.jsxs("form",{className:"space-y-6",onSubmit:g(P),children:[o.jsx(Yr,{label:"Email Address",type:"email",name:"email",...F("email"),error:A.email?.message,placeholder:"Enter your email",autoComplete:"username"}),m&&o.jsx("p",{className:"text-red-500 text-sm text-center",children:m}),o.jsx("button",{type:"submit",disabled:v,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:v?"Sending OTP...":"Send OTP"}),o.jsx("div",{className:"text-center",children:o.jsx(Za,{to:_,className:"text-emerald-600 hover:text-emerald-700 text-sm",children:"Back to Login"})})]})]})})},_z=()=>{const e=as(),[t]=A0(),r=t.get("type")||"auth",{ResetPassword:s,loading:l}=si(),{DoctorResetPassword:h,loading:C}=fs(),{HospitalResetPassword:N,loading:y}=to(),u=()=>{switch(r){case"doctor":return{resetPassword:h,loading:C,title:"Doctor Reset Password",forgotRoute:"/forgot-password?type=doctor",loginRoute:"/doctor/login"};case"hospital":return{resetPassword:N,loading:y,title:"Hospital Reset Password",forgotRoute:"/forgot-password?type=hospital",loginRoute:"/hospital/login"};default:return{resetPassword:s,loading:l,title:"Reset Password",forgotRoute:"/forgot-password",loginRoute:"/login"}}},{resetPassword:R,loading:v,title:b,forgotRoute:E,loginRoute:_}=u(),[m,k]=Z.useState(""),[w,F]=Z.useState(""),g=Tc({email:Jr().min(1,"Email is required").email("Invalid email address"),password:Jr().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),confirmPassword:Jr().min(1,"Please confirm your password")}).refine(x=>x.password===x.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),{register:A,handleSubmit:P,formState:{errors:H},watch:D}=El({resolver:kl(g),mode:"onChange"});D("password");const S=async x=>{if(!w||w.length!==6){k("Please enter a valid 6-digit OTP");return}k("");try{const d={email:x.email,forgotPasswordCode:w,newPassword:x.password};await R(d,()=>e(_))}catch{k("Failed to reset password. Please try again.")}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:b}),o.jsx("p",{className:"mb-6 text-center text-gray-600",children:"Enter your new password and the OTP sent to your email."}),o.jsxs("form",{className:"space-y-6",onSubmit:P(S),children:[o.jsx(Yr,{label:"Email Address",type:"email",name:"email",...A("email"),error:H.email?.message,placeholder:"Enter your email",autoComplete:"username"}),o.jsx(Yr,{label:"New Password",type:"password",name:"password",...A("password"),error:H.password?.message,placeholder:"Enter your new password",autoComplete:"new-password"}),o.jsx(Yr,{label:"Confirm New Password",type:"password",name:"confirmPassword",...A("confirmPassword"),error:H.confirmPassword?.message,placeholder:"Confirm your new password",autoComplete:"new-password"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"OTP Code"}),o.jsx(KA,{value:w,onChange:F,error:m&&!w?"OTP is required":"",placeholder:"Enter the 6-digit OTP sent to your email"})]}),m&&o.jsx("p",{className:"text-red-500 text-sm text-center",children:m}),o.jsx("button",{type:"submit",disabled:v,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:v?"Resetting Password...":"Reset Password"}),o.jsx("div",{className:"text-center",children:o.jsx(Za,{to:E,className:"text-emerald-600 hover:text-emerald-700 text-sm",children:"Back to Forgot Password"})})]})]})})},bz=()=>{const e=as(),[t]=A0(),r=t.get("type")||"auth",{ChangePassword:s,loading:l}=si(),{DoctorChangePassword:h,loading:C}=fs(),{HospitalChangePassword:N,loading:y}=to(),u=()=>{switch(r){case"doctor":return{changePassword:h,loading:C,title:"Doctor Change Password",profileRoute:"/doctor/profile"};case"hospital":return{changePassword:N,loading:y,title:"Hospital Change Password",profileRoute:"/hospital/profile"};default:return{changePassword:s,loading:l,title:"Change Password",profileRoute:"/profile"}}},{changePassword:R,loading:v,title:b,profileRoute:E}=u(),[_,m]=Z.useState(""),k=Tc({currentPassword:Jr().min(1,"Current password is required"),newPassword:Jr().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),confirmPassword:Jr().min(1,"Please confirm your password")}).refine(H=>H.newPassword===H.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),{register:w,handleSubmit:F,formState:{errors:g},watch:A}=El({resolver:kl(k),mode:"onChange"});A("newPassword");const P=async H=>{m("");try{const D={currentPassword:H.currentPassword,newPassword:H.newPassword};await R(D,()=>e(E))}catch{m("Failed to change password. Please try again.")}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:b}),o.jsx("p",{className:"mb-6 text-center text-gray-600",children:"Enter your current password and choose a new password."}),o.jsxs("form",{className:"space-y-6",onSubmit:F(P),children:[o.jsx(Yr,{label:"Current Password",type:"password",name:"currentPassword",...w("currentPassword"),error:g.currentPassword?.message,placeholder:"Enter your current password",autoComplete:"current-password"}),o.jsx(Yr,{label:"New Password",type:"password",name:"newPassword",...w("newPassword"),error:g.newPassword?.message,placeholder:"Enter your new password",autoComplete:"new-password"}),o.jsx(Yr,{label:"Confirm New Password",type:"password",name:"confirmPassword",...w("confirmPassword"),error:g.confirmPassword?.message,placeholder:"Confirm your new password",autoComplete:"new-password"}),_&&o.jsx("p",{className:"text-red-500 text-sm text-center",children:_}),o.jsx("button",{type:"submit",disabled:v,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:v?"Changing Password...":"Change Password"}),o.jsx("div",{className:"text-center",children:o.jsx(Za,{to:E,className:"text-emerald-600 hover:text-emerald-700 text-sm",children:"Back to Profile"})})]})]})})},xz=()=>{const{hospital:e,setHospital:t}=to(),r=as();if(!e)return o.jsx("div",{className:"min-h-screen bg-emerald-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})});const s=()=>{r("/change-password?type=hospital")},l=C=>{switch(C){case"pending":return"bg-yellow-100 text-yellow-800";case"verified":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=()=>{localStorage.removeItem("token"),t(null),r("/")};return o.jsx("div",{className:"min-h-screen bg-emerald-50 py-8 px-4",children:o.jsx("div",{className:"max-w-2xl mx-auto",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:h,className:"px-4 ms-auto py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})}),o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-emerald-100 flex items-center justify-center",children:e.profilePicture||e.image?o.jsx("img",{src:e.profilePicture||e.image,alt:"Hospital",className:"w-24 h-24 rounded-full object-cover"}):o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.name}),o.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium mt-2 ${l(e.status)}`,children:e.status?.charAt(0).toUpperCase()+e.status?.slice(1)||"Unknown"})]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),o.jsx("p",{className:"font-medium",children:e.email})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),o.jsx("p",{className:"font-medium",children:e.phone||"Not provided"})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"City"}),o.jsx("p",{className:"font-medium",children:e.city||"Not provided"})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Type"}),o.jsx("p",{className:"font-medium",children:e.hospitalType||"Not specified"})]})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),o.jsx("p",{className:"font-medium",children:e.address||"Not provided"})]})]}),o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e&&o.jsxs(Za,{to:`/hospitals/${`${e.name?.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${e._id}`}/doctors`,className:"px-6 py-2 border border-emerald-600 text-emerald-600 rounded-lg hover:bg-emerald-50 transition-colors",children:["View Doctors",Array.isArray(e?.doctors)?` (${e.doctors.length})`:""]}),o.jsx("button",{onClick:s,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Change Password"})]}),e.status==="pending"&&o.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:o.jsx("p",{className:"text-yellow-800 text-sm text-center",children:"Your profile is currently under review. You'll be notified once verified."})})]})})})},wz=({allDoctors:e,allUsers:t=[],threads:r,threadsLoading:s=!1,searchQuery:l,setSearchQuery:h,selectedDoctor:C,onDoctorSelect:N,onThreadSelect:y,currentThread:u,user:R,isDoctorRoute:v,isUserRoute:b})=>{const E=e.filter(w=>w.name?.toLowerCase().includes(l.toLowerCase())||w.specialty?.toLowerCase().includes(l.toLowerCase())),_=w=>(w.participants||[]).filter(F=>F.userId!==R?._id),m=w=>{const g=_(w)[0],A=g?.userId,P=e.find(x=>x._id===A);if(P)return{...P,isDoctor:!0};const H=t.find(x=>x._id===A);if(H)return{_id:H._id,name:H.name,profileImage:H.profileImage||H.avatar||null,specialty:"",isDoctor:!1};const D=g?.name||g?.displayName||w?.name||"Unknown",S=g?.avatar||g?.profileImage||w?.avatar||null;return{_id:A||w._id,name:D,profileImage:S,specialty:g?.role||w?.subtitle||"",isDoctor:!1}},k=w=>w.lastMessage?.text||w.lastMessage?.content||w.lastMessage?.preview||w.preview||"";return o.jsxs("div",{className:"w-full h-full flex flex-col bg-white",children:[o.jsx("div",{className:"p-4 border-b bg-green-600 text-white",children:o.jsx("h2",{className:"text-lg font-semibold",children:"Chats"})}),o.jsx("div",{className:"p-3 border-b",children:o.jsxs("div",{className:"relative",children:[o.jsx(C6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),o.jsx(gA,{placeholder:"Search doctors...",value:l,onChange:w=>h(w.target.value),className:"pl-10 bg-gray-50 border-0 focus:bg-white"})]})}),s&&o.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:Array.from({length:6}).map((w,F)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ad,{className:"h-12 w-12 rounded-full"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(ad,{className:"h-4 w-2/3"}),o.jsx(ad,{className:"h-3 w-1/2"})]})]},F))}),!s&&r.length>0&&o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o.jsx("div",{className:"p-3 border-b bg-gray-50",children:o.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Recent Chats"})}),[...r].sort((w,F)=>{const g=new Date(w?.updatedAt||w?.lastMessage?.createdAt||0).getTime();return new Date(F?.updatedAt||F?.lastMessage?.createdAt||0).getTime()-g}).map(w=>{const F=m(w);return!l||F?.name?.toLowerCase().includes(l.toLowerCase())||F?.specialty?.toLowerCase().includes(l.toLowerCase())?o.jsx("div",{onClick:()=>y(w,F),className:`p-3 border-b cursor-pointer hover:bg-gray-50 transition-colors ${u===w._id?"bg-green-50 border-l-4 border-l-green-500":""}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ep,{className:"h-12 w-12",children:F.profileImage?o.jsx(kp,{src:F.profileImage}):o.jsx(Cp,{className:"bg-green-100 text-green-600",children:F.name?.charAt(0)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-medium text-gray-900 truncate",children:F.isDoctor?`Dr ${F.name}`:F.name}),o.jsx("span",{className:"text-xs text-gray-500",children:PR(w.updatedAt)})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:k(w)||F.specialty})]})]})},w._id):null})]}),!s&&l&&o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o.jsx("div",{className:"p-3 border-b bg-gray-50",children:o.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Available Doctors"})}),E.slice(0,3).map(w=>o.jsx("div",{onClick:()=>N(w),className:`p-3 border-b cursor-pointer hover:bg-gray-50 transition-colors ${C?._id===w._id?"bg-green-50 border-l-4 border-l-green-500":""}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Ep,{className:"h-12 w-12",children:[o.jsx(kp,{src:w.profileImage}),o.jsx(Cp,{className:"bg-green-100 text-green-600",children:w.name?.charAt(0)})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-gray-900 truncate",children:`Dr ${w.name}`}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:w.specialty})]}),o.jsx(v6,{className:"h-5 w-5 text-green-500"})]})},w._id))]}),l&&E.length===0&&o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:o.jsx("p",{children:"No doctors found"})})]})},Sz=({messages:e=[],user:t,allDoctors:r=[],allUsers:s=[],participants:l=[],otherParticipant:h=null,onConfirmConsultation:C,onCancelConsultation:N,isDoctorRoute:y=!1,doctorSelf:u})=>{const R=Z.useRef(null),v=as(),b=Array.isArray(e)?[...e].sort((d,T)=>{const O=new Date(d.createdAt||d.created_at||d.timestamp||0).getTime(),M=new Date(T.createdAt||T.created_at||T.timestamp||0).getTime();return O-M}):[];if(Z.useEffect(()=>{R.current&&R.current.scrollIntoView({behavior:"auto",block:"end"})},[]),Z.useEffect(()=>{R.current&&R.current.scrollIntoView({behavior:"smooth",block:"end"})},[b.length]),!b||b.length===0)return o.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx("p",{className:"font-medium",children:"No messages yet"}),o.jsx("p",{className:"text-sm",children:"Start the conversation!"})]})});const E=d=>{const T=O=>O?typeof O=="string"?O:typeof O=="object"&&(O._id||O.id)||null:null;return T(d.userId)||T(d.senderId)||T(d.sender)||T(d.user)||T(d.from)||T(d.by)||T(d.authorId)||T(d.createdBy)||null},_=d=>{const T=E(d);if(String(T)===String(t?._id))return t;const O=l?.find(z=>{const $=z.userId&&(z.userId._id||z.userId.id||z.userId)||z._id||z.id;return String($)===String(T)});if(O){const z=O.userId&&typeof O.userId=="object"?O.userId:null,$=z&&(z._id||z.id)||O.userId||O._id||O.id,q=r?.find(we=>String(we._id)===String($)),ae=s?.find(we=>String(we._id)===String($)),Q=O.name||O.displayName||O.fullName||(O.firstName&&O.lastName?`${O.firstName} ${O.lastName}`:null)||O.username||O.userName||z&&(z.name||z.fullName||(z.firstName&&z.lastName?`${z.firstName} ${z.lastName}`:null)||z.username||z.userName)||q?.name||ae?.name||"Unknown",ve=O.avatar||O.profileImage||O.avatarUrl||O.photo||z&&(z.avatar||z.profileImage||z.avatarUrl||z.photo)||q?.profileImage||ae?.profileImage||null;return{_id:$,name:Q,profileImage:ve}}const M=r?.find(z=>String(z._id)===String(T));if(M)return M;const I=s?.find(z=>String(z._id)===String(T));if(I)return{_id:I._id,name:I.name,profileImage:I.profileImage||I.avatar||null};if(h&&String(T)!==String(t?._id))return{_id:h._id,name:h.name||"Unknown",profileImage:h.profileImage||h.avatar||null};const U={_id:T,name:d.sender?.name||d.senderName||d.name||d.sender?.fullName||d.user?.name||(d.user?.firstName&&d.user?.lastName?`${d.user.firstName} ${d.user.lastName}`:null)||"Unknown",profileImage:d.sender?.avatar||d.sender?.profileImage||d.sender?.avatarUrl||d.user?.avatar||d.user?.profileImage||d.avatar||d.profileImage||null};return String(T)!==String(t?._id)&&h&&String(h._id)===String(T)?{_id:h._id,name:h.name||U.name,profileImage:h.profileImage||h.avatar||U.profileImage}:U},m=d=>{if(!d)return"";const T=[d.text,d.content,d.message,d.body,d.msg,d.payload?.text,d.data?.text];for(const O of T)if(typeof O=="string"&&O.trim()!=="")return O;return Array.isArray(d.attachments)&&d.attachments.length>0?d.attachments.map((O,M)=>O.name||O.filename||`Attachment ${M+1}`).join(", "):""},k=d=>m(d).includes("I would like to request a video consultation."),w=d=>{if(!d)return null;const T=d.match(/Join\s*Link\s*:\s*\**\s*(\S+)/i);return T?T[1]:null},F=()=>{const d=u&&(u._id||u.id)||t?._id;return D(d)},g=d=>{if(!d)return null;const T=d.match(/\/consultation\/([^/]+)/)||d.match(/\/doctor\/consultation\/([^/]+)/);return T?T[1]:null},A=d=>{if(!d||typeof d!="string")return null;const T=d.match(/meeting\s*id\s*[:\-]?\s*([A-Za-z0-9\-]{6,})/i);if(T&&T[1])return T[1];const O=d.match(/code\s*[:\-]?\s*([A-Za-z0-9\-]{6,})/i);if(O&&O[1])return O[1];const M=d.trim();return/^[A-Za-z0-9\-]{6,}$/.test(M)&&M.split(/\s+/).length===1?M:null},P=d=>{const T=w(d);if(!T){const $=A(d);if(!$)return o.jsx("div",{className:"whitespace-pre-wrap",children:d});const q=ae=>{ae.preventDefault();let Q;const ve=$;if(y){const we=F();Q=we?`/doctor/consultation/${ve}/${we}`:`/doctor/consultation/${ve}`}else{const we=F();Q=we?`/consultation/${ve}/${we}`:`/consultation/${ve}`}v(Q)};return o.jsxs("div",{className:"whitespace-pre-wrap",children:[d,o.jsx("div",{className:"mt-2",children:o.jsx("a",{href:"#",onClick:q,className:"underline text-blue-600 hover:text-blue-700",children:"Join with this meeting ID"})})]})}const O=d.split(/Join\s*Link\s*:\s*/i),M=O[0]||"",U=(O[1]||"").replace(/^\**\s*\S+/,"").trimStart(),z=$=>{$.preventDefault();let q=T.replace(/\/+$/,"");const ae=/^\/consultation\//.test(q),Q=/^\/doctor\/consultation\//.test(q),ve=g(q);if(y&&ae&&ve){const we=F();we&&(q=`/doctor/consultation/${ve}/${we}`)}if(!y&&Q&&ve){const we=F();we&&(q=`/consultation/${ve}/${we}`)}v(q)};return o.jsxs("div",{className:"whitespace-pre-wrap",children:[M,"Join Link: ",o.jsx("a",{href:T,onClick:z,className:"underline text-blue-600 hover:text-blue-700",children:T}),U?` ${U}`:""]})},H=d=>{if(!d)return null;if(typeof d=="string")return d;if(d.userId){const T=d.userId;if(typeof T=="string")return T;if(typeof T=="object")return T._id||T.id||null}return d._id||d.id||null},D=d=>(l||[]).map(H).filter(Boolean).find(M=>String(M)!==String(d))||null,S=d=>{if(C){const T=_(d)||{},O=E(d)||d?.userId||d?.senderId||(typeof d?.user=="object"?d.user._id||d.user.id:d?.user)||(typeof d?.sender=="object"?d.sender._id||d.sender.id:d?.sender)||null,M=T._id||O;if(!M)return;const I=u&&(u._id||u.id)||D(M)||t?._id||null;if(!I)return;const U=u||r.find($=>String($._id)===String(I))||{_id:I,name:"Doctor",profileImage:null},z={_id:d._id||Date.now().toString(),doctorId:I,doctorProfile:{_id:U._id||U.id,name:U.name,profileImage:U.profileImage||U.avatar||null},patientId:M,message:m(d),status:"pending",createdAt:d.createdAt||new Date().toISOString(),patientProfile:Object.keys(T).length?T:{_id:M,name:"Patient",profileImage:null}};C(z)}},x=d=>{if(N){const T=_(d)||{},O=E(d)||d?.userId||d?.senderId||(typeof d?.user=="object"?d.user._id||d.user.id:d?.user)||(typeof d?.sender=="object"?d.sender._id||d.sender.id:d?.sender)||null,M=T._id||O;if(!M)return;const I=u&&(u._id||u.id)||D(M)||t?._id||null;if(!I)return;const U=u||r.find($=>String($._id)===String(I))||{_id:I,name:"Doctor",profileImage:null},z={_id:d._id||Date.now().toString(),doctorId:I,doctorProfile:{_id:U._id||U.id,name:U.name,profileImage:U.profileImage||U.avatar||null},patientId:M,message:m(d),status:"pending",createdAt:d.createdAt||new Date().toISOString(),patientProfile:Object.keys(T).length?T:{_id:M,name:"Patient",profileImage:null}};N(z)}};return o.jsx("div",{className:"h-full",children:o.jsx(IA,{className:"h-full",children:o.jsxs("div",{className:"flex flex-col px-4 py-4 gap-4",children:[b.map(d=>{const T=_(d),O=y?u&&(u._id||u.id):t?._id,M=String(E(d))===String(O),I=m(d),U=k(d);return o.jsxs("div",{className:`flex items-end ${M?"justify-end":"justify-start"}`,children:[!M&&o.jsx("div",{className:"mr-3",children:o.jsx(Ep,{className:"h-9 w-9 shadow-sm",children:T?.profileImage?o.jsx(kp,{src:T.profileImage}):o.jsx(Cp,{className:"bg-green-100 text-green-600",children:String(T?.name||"U").charAt(0)})})}),o.jsxs("div",{className:"max-w-[80%]",children:[!M&&o.jsx("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:T?.name}),o.jsxs("div",{className:`px-4 py-2 break-words text-sm leading-6 ${M?"bg-gradient-to-r from-green-600 to-green-500 text-white rounded-2xl rounded-br-none shadow":U?"bg-blue-50 border border-blue-200 text-blue-900 rounded-2xl rounded-bl-none":"bg-gray-100 text-gray-900 rounded-2xl rounded-bl-none"}`,children:[I?P(I):o.jsx("div",{className:"whitespace-pre-wrap text-gray-400 italic",children:"[No text]"}),U&&!M&&y&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",children:[o.jsx("div",{className:"text-xs text-blue-700 mb-2 font-medium",children:"Video Consultation Request"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Yc,{size:"sm",onClick:()=>S(d),className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 h-8",children:[o.jsx(X4,{className:"h-3 w-3 mr-1"}),"Confirm"]}),o.jsxs(Yc,{size:"sm",variant:"outline",onClick:()=>x(d),className:"text-red-600 border-red-300 hover:bg-red-50 text-xs px-3 py-1 h-8",children:[o.jsx(Fm,{className:"h-3 w-3 mr-1"}),"Decline"]})]})]}),d.attachments?.length>0&&o.jsx("div",{className:"mt-2 space-y-1",children:d.attachments.map((z,$)=>o.jsx("a",{href:z.url||"#",target:"_blank",rel:"noreferrer",className:"block text-xs underline",children:z.name||z.filename||`Attachment ${$+1}`},$))})]}),o.jsx("div",{className:`flex items-center mt-1 ${M?"justify-end":"justify-start"}`,children:o.jsx("span",{className:"text-[11px] text-gray-400",children:NR(d.createdAt)})})]}),M&&o.jsx("div",{className:"ml-3",children:o.jsx(Ep,{className:"h-9 w-9 shadow-sm",children:t?.profileImage?o.jsx(kp,{src:t.profileImage}):o.jsx(Cp,{className:"bg-white text-green-600",children:String(t?.name||"M").charAt(0)})})})]},d._id||d.id||Math.random())}),o.jsx("div",{ref:R})]})})})},Rz=({selectedDoctor:e,messages:t=[],newMessage:r,setNewMessage:s,onSendMessage:l,loading:h,messagesLoading:C=!1,currentThread:N,allDoctors:y=[],allUsers:u=[],user:R,doctorSelf:v,participants:b=[],onConfirmConsultation:E,onCancelConsultation:_,isDoctorRoute:m=!1})=>{const k=Z.useRef(null),[w,F]=Z.useState(!1),g=()=>{!r?.trim()||h||l()},A=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),g())},P=e?.specialty||e?.role||"";return o.jsxs("div",{className:"flex flex-col bg-white shadow-inner w-full h-full rounded-md overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-green-50 to-white flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Ep,{className:"h-11 w-11",children:[o.jsx(kp,{src:e?.profileImage}),o.jsx(Cp,{className:"bg-green-100 text-green-600",children:e?.name?.charAt(0)||"?"})]}),o.jsxs("div",{className:"min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:e?.name||"Select a chat"}),e&&o.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-green-400",title:"Online"})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:P})]})]}),e&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yc,{size:"sm",variant:"ghost",className:"hover:bg-gray-100",children:o.jsx(E6,{className:"h-4 w-4"})}),o.jsx(Yc,{size:"sm",variant:"ghost",className:"hover:bg-gray-100",children:o.jsx(H6,{className:"h-4 w-4"})}),o.jsx(Yc,{size:"sm",variant:"ghost",className:"hover:bg-gray-100",children:o.jsx(l6,{className:"h-4 w-4"})})]})]}),o.jsx("div",{className:"flex-1 min-h-0 overflow-hidden relative",children:C?o.jsx("div",{className:"h-full overflow-y-auto",children:o.jsx("div",{className:"flex flex-col px-4 py-4 gap-4",children:Array.from({length:10}).map((H,D)=>o.jsx("div",{className:`flex ${D%2===0?"justify-start":"justify-end"}`,children:o.jsxs("div",{className:"flex items-end gap-3 max-w-[80%]",children:[D%2===0&&o.jsx(ad,{className:"h-9 w-9 rounded-full"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ad,{className:"h-4 w-[240px]"}),o.jsx(ad,{className:"h-3 w-16"})]}),D%2===1&&o.jsx(ad,{className:"h-9 w-9 rounded-full"})]})},D))})}):t.length===0&&!e?o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center px-6",children:[o.jsx("div",{className:"p-6 rounded-full bg-green-50 shadow-inner mb-4",children:o.jsx(_6,{className:"h-10 w-10 text-green-500"})}),o.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Welcome to qukMed Chat"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Select a doctor from the sidebar to start chatting."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Sz,{messages:t,user:R,allDoctors:y,allUsers:u,participants:b,otherParticipant:e,doctorSelf:v,onConfirmConsultation:E,onCancelConsultation:_,isDoctorRoute:m}),o.jsx("div",{ref:k,id:"messages-end"})]})}),e&&o.jsx("div",{className:"p-4 border-t bg-white flex-shrink-0",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-full shadow-sm transition-all ${w?"ring-2 ring-green-200 bg-white":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 pl-3",children:[o.jsx("button",{type:"button",className:"p-2 rounded-md hover:bg-gray-100",title:"Attach",children:o.jsx(S6,{className:"h-4 w-4 text-gray-500"})}),o.jsx("button",{type:"button",className:"p-2 rounded-md hover:bg-gray-100",title:"Emoji",children:o.jsx(A6,{className:"h-4 w-4 text-gray-500"})})]}),o.jsx("textarea",{rows:1,value:r,onChange:H=>s(H.target.value),onKeyDown:A,onFocus:()=>F(!0),onBlur:()=>F(!1),placeholder:"Write a message...",className:"flex-1 resize-none outline-none bg-transparent text-sm leading-6 px-2 py-2 placeholder-gray-400"}),o.jsx("div",{className:"flex items-center gap-2 pr-2",children:o.jsx(Yc,{onClick:g,disabled:!r.trim()||h,className:`rounded-full p-2 ${!r.trim()||h?"opacity-50 cursor-not-allowed":"shadow-md"}`,title:"Send message",children:o.jsx(sS,{className:"h-4 w-4"})})})]}),o.jsx("div",{className:"mt-2 text-xs text-gray-400 px-4",children:o.jsx("span",{children:h?"Sending...":""})})]})})]})},G1=()=>{const{allDoctors:e,doctor:t}=fs(),{sendMessage:r,loading:s,threads:l,messages:h,getAllThreads:C,getMessageOfSingleThread:N,startPolling:y,stopPolling:u,currentThread:R,threadsLoading:v,messagesLoading:b,confirmConsultation:E,cancelConsultation:_}=Yw(),{user:m,allUsers:k}=si(),w=nl(),[F,g]=Z.useState(""),[A,P]=Z.useState(null),[H,D]=Z.useState(""),[S,x]=Z.useState(!1),d=w.pathname==="/doctor/messages",T=w.pathname==="/user/message";Z.useEffect(()=>{C({showLoading:!0})},[]),Z.useEffect(()=>{if(!S&&!(!l||l.length===0)){try{const U=localStorage.getItem("chat:lastDoctorId"),z=localStorage.getItem("chat:lastThreadId"),$=d?t&&(t._id||t.id):m&&(m._id||m.id),q=d?k:e;if(z){const ae=l.find(Q=>String(Q._id)===String(z));if(ae){const Q=ae.participants?.find(Re=>{const me=Re.userId&&(Re.userId._id||Re.userId)||Re._id||Re.id;return String(me)!==String($)}),ve=Q&&(Q.userId&&(Q.userId._id||Q.userId)||Q._id||Q.id)||U,we=q.find(Re=>String(Re._id)===String(ve));if(we){P(we),N(ae._id,{showLoading:!0}),y(ae._id),x(!0);return}}}if(U){const ae=q.find(Q=>String(Q._id)===String(U));if(ae){P(ae),x(!0);return}}}catch{}x(!0)}},[l,e,k,m,t,d,S]);const O=async U=>{P(U),D("");try{localStorage.setItem("chat:lastDoctorId",U._id)}catch{}const z=l.find($=>$.participants.some(q=>q.userId===U._id));if(z){await N(z._id,{showLoading:!0}),y(z._id);try{localStorage.setItem("chat:lastThreadId",z._id)}catch{}}else u()},M=async(U,z)=>{P(z),D(""),await N(U._id,{showLoading:!0}),y(U._id);try{localStorage.setItem("chat:lastDoctorId",z._id),localStorage.setItem("chat:lastThreadId",U._id)}catch{}},I=async()=>{if(!(!H.trim()||!A))try{await r(A._id,H),D(""),await C({showLoading:!1});const U=l.find(z=>z.participants.some($=>$.userId===A._id));if(U){y(U._id),await N(U._id,{showLoading:!0});try{localStorage.setItem("chat:lastThreadId",U._id)}catch{}}}catch(U){gt.error(U.response.data.data)}};return o.jsxs("div",{className:"h-screen flex bg-gray-100",children:[o.jsx("div",{className:"w-80 bg-white border-r",children:o.jsx(wz,{allDoctors:e,allUsers:k,threads:l,threadsLoading:v,searchQuery:F,setSearchQuery:g,selectedDoctor:A,onDoctorSelect:O,onThreadSelect:M,currentThread:R,user:m,isDoctorRoute:d,isUserRoute:T})}),o.jsx("div",{className:"flex-1",children:o.jsx(Rz,{selectedDoctor:A,messages:h,newMessage:H,setNewMessage:D,onSendMessage:I,loading:s,messagesLoading:b,currentThread:R,allDoctors:e,allUsers:k,user:m,doctorSelf:t,participants:l.find(U=>U._id===R)?.participants||[],onConfirmConsultation:E,onCancelConsultation:_,isDoctorRoute:d})})]})},Ez=({children:e})=>{const{admin:t}=$o();return t?e:o.jsx(ph,{to:"/admin/login",replace:!0})},up=({children:e})=>{const{user:t}=si();return t?e:o.jsx(ph,{to:"/login",replace:!0})},Kf=({children:e})=>{const{doctor:t,pendingValidation:r}=fs();return!t&&!r?o.jsx(ph,{to:"/doctor/login",replace:!0}):e},kz=({children:e})=>{const{hospital:t}=to();return t?e:o.jsx(ph,{to:"/hospital/login",replace:!0})},nd=({children:e})=>{const{user:t}=si(),{doctor:r}=fs(),{hospital:s}=to(),{admin:l}=$o();return t||r||s||l?o.jsx(ph,{to:"/",replace:!0}):e},Cz=({children:e})=>{const{doctorDocumentsPending:t}=fs();return t?e:o.jsx(ph,{to:"/",replace:!0})},Tz=()=>o.jsxs(bC,{children:[o.jsxs(Sa,{element:o.jsx(XA,{}),children:[o.jsx(Sa,{path:"/",element:o.jsx(zL,{})}),o.jsx(Sa,{path:"/doctors",element:o.jsx(ZB,{})}),o.jsx(Sa,{path:"/hospitals",element:o.jsx(GB,{})}),o.jsx(Sa,{path:"/labs",element:o.jsx(YB,{})}),o.jsx(Sa,{path:"/medicines",element:o.jsx(KB,{})}),o.jsx(Sa,{path:"/hospitals/:slug",element:o.jsx(QB,{})}),o.jsx(Sa,{path:"/medicine/:slug",element:o.jsx(ez,{})}),o.jsx(Sa,{path:"/lab/:slug",element:o.jsx(XB,{})}),o.jsx(Sa,{path:"/doctor/:slug",element:o.jsx(WB,{})}),o.jsx(Sa,{path:"/hospitals/:slug/doctors",element:o.jsx(JB,{})}),o.jsx(Sa,{path:"/user/message",element:o.jsx(up,{children:o.jsx(G1,{})})}),o.jsx(Sa,{path:"/doctor/messages",element:o.jsx(Kf,{children:o.jsx(G1,{})})}),o.jsx(Sa,{path:"/profile",element:o.jsx(up,{children:o.jsx(nz,{})})}),o.jsx(Sa,{path:"/doctor/profile/",element:o.jsx(Kf,{children:o.jsx(gz,{})})}),o.jsx(Sa,{path:"/hospital/profile",element:o.jsx(kz,{children:o.jsx(xz,{})})}),o.jsx(Sa,{path:"/doctor/book/:slug",element:o.jsx(up,{children:o.jsx(tz,{})})}),o.jsx(Sa,{path:"/admin/dashboard",element:o.jsx(Ez,{children:o.jsx(fz,{})})})]}),o.jsx(Sa,{path:"/consultation/:meetingId/:doctorId",element:o.jsx(up,{children:o.jsx(rz,{})})}),o.jsx(Sa,{path:"/doctor/consultation/:meetingId/:patientId",element:o.jsx(Kf,{children:o.jsx(Z1,{})})}),o.jsx(Sa,{path:"/doctor/consultation/new/:patientId",element:o.jsx(Kf,{children:o.jsx(Z1,{})})}),o.jsxs(Sa,{element:o.jsx(eO,{}),children:[o.jsx(Sa,{path:"/register/doctor",element:o.jsx(TB,{})}),o.jsx(Sa,{path:"/register/hospital",element:o.jsx(PB,{})}),o.jsx(Sa,{path:"/login",element:o.jsx(nd,{children:o.jsx(SB,{})})}),o.jsx(Sa,{path:"/hospital/login",element:o.jsx(nd,{children:o.jsx(DB,{})})}),o.jsx(Sa,{path:"/doctor/login",element:o.jsx(nd,{children:o.jsx(EB,{})})}),o.jsx(Sa,{path:"/admin/login",element:o.jsx(nd,{children:o.jsx(sz,{})})}),o.jsx(Sa,{path:"/register",element:o.jsx(nd,{children:o.jsx(RB,{})})}),o.jsx(Sa,{path:"/forgot-password",element:o.jsx(nd,{children:o.jsx(yz,{})})}),o.jsx(Sa,{path:"/reset-password",element:o.jsx(nd,{children:o.jsx(_z,{})})}),o.jsx(Sa,{path:"/change-password",element:o.jsx(up,{children:o.jsx(bz,{})})}),o.jsx(Sa,{path:"/doctor/upload-documents",element:o.jsx(Cz,{children:o.jsx(mz,{})})})]}),o.jsx(Sa,{path:"/doctor/profile/:slug",element:o.jsx($B,{})}),o.jsx(Sa,{path:"/hospital/profile/:slug",element:o.jsx(vz,{})})]});function Pz(){return o.jsx(c4,{children:o.jsx(o4,{children:o.jsx(qC,{basename:"/quickMed",children:o.jsx(h4,{children:o.jsx(i4,{children:o.jsx(s4,{children:o.jsx(d4,{children:o.jsx(l4,{children:o.jsx(u4,{children:o.jsx(Tz,{})})})})})})})})})})}Tk.createRoot(document.getElementById("root")).render(o.jsxs(Z.StrictMode,{children:[o.jsx(Pz,{}),o.jsx(a4,{})]}))});export default Nz();

var yk=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Sz=yk((Zz,om)=>{function _k(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in e)){const d=Object.getOwnPropertyDescriptor(s,l);d&&Object.defineProperty(e,l,d.get?d:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const C of d.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&s(C)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}})();function S0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lv={exports:{}},Xh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function bk(){if(Cb)return Xh;Cb=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,l,d){var C=null;if(d!==void 0&&(C=""+d),l.key!==void 0&&(C=""+l.key),"key"in l){d={};for(var T in l)T!=="key"&&(d[T]=l[T])}else d=l;return l=d.ref,{$$typeof:e,type:s,key:C,ref:l!==void 0?l:null,props:d}}return Xh.Fragment=t,Xh.jsx=r,Xh.jsxs=r,Xh}var Tb;function xk(){return Tb||(Tb=1,lv.exports=bk()),lv.exports}var o=xk(),uv={exports:{}},ca={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb;function wk(){if(Pb)return ca;Pb=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),f=Symbol.iterator;function y(J){return J===null||typeof J!="object"?null:(J=f&&J[f]||J["@@iterator"],typeof J=="function"?J:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,m={};function k(J,be,Re){this.props=J,this.context=be,this.refs=m,this.updater=Re||E}k.prototype.isReactComponent={},k.prototype.setState=function(J,be){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,be,"setState")},k.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function w(){}w.prototype=k.prototype;function U(J,be,Re){this.props=J,this.context=be,this.refs=m,this.updater=Re||E}var g=U.prototype=new w;g.constructor=U,_(g,k.prototype),g.isPureReactComponent=!0;var A=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function N(J,be,Re,Se,me,Ce){return Re=Ce.ref,{$$typeof:e,type:J,key:be,ref:Re!==void 0?Re:null,props:Ce}}function R(J,be){return N(J.type,be,void 0,void 0,void 0,J.props)}function S(J){return typeof J=="object"&&J!==null&&J.$$typeof===e}function p(J){var be={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Re){return be[Re]})}var D=/\/+/g;function O(J,be){return typeof J=="object"&&J!==null&&J.key!=null?p(""+J.key):be.toString(36)}function j(){}function I(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(j,j):(J.status="pending",J.then(function(be){J.status==="pending"&&(J.status="fulfilled",J.value=be)},function(be){J.status==="pending"&&(J.status="rejected",J.reason=be)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function H(J,be,Re,Se,me){var Ce=typeof J;(Ce==="undefined"||Ce==="boolean")&&(J=null);var Be=!1;if(J===null)Be=!0;else switch(Ce){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(J.$$typeof){case e:case t:Be=!0;break;case x:return Be=J._init,H(Be(J._payload),be,Re,Se,me)}}if(Be)return me=me(J),Be=Se===""?"."+O(J,0):Se,A(me)?(Re="",Be!=null&&(Re=Be.replace(D,"$&/")+"/"),H(me,be,Re,"",function(Qe){return Qe})):me!=null&&(S(me)&&(me=R(me,Re+(me.key==null||J&&J.key===me.key?"":(""+me.key).replace(D,"$&/")+"/")+Be)),be.push(me)),1;Be=0;var _e=Se===""?".":Se+":";if(A(J))for(var Ye=0;Ye<J.length;Ye++)Se=J[Ye],Ce=_e+O(Se,Ye),Be+=H(Se,be,Re,Ce,me);else if(Ye=y(J),typeof Ye=="function")for(J=Ye.call(J),Ye=0;!(Se=J.next()).done;)Se=Se.value,Ce=_e+O(Se,Ye++),Be+=H(Se,be,Re,Ce,me);else if(Ce==="object"){if(typeof J.then=="function")return H(I(J),be,Re,Se,me);throw be=String(J),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return Be}function F(J,be,Re){if(J==null)return J;var Se=[],me=0;return H(J,Se,"","",function(Ce){return be.call(Re,Ce,me++)}),Se}function $(J){if(J._status===-1){var be=J._result;be=be(),be.then(function(Re){(J._status===0||J._status===-1)&&(J._status=1,J._result=Re)},function(Re){(J._status===0||J._status===-1)&&(J._status=2,J._result=Re)}),J._status===-1&&(J._status=0,J._result=be)}if(J._status===1)return J._result.default;throw J._result}var q=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function se(){}return ca.Children={map:F,forEach:function(J,be,Re){F(J,function(){be.apply(this,arguments)},Re)},count:function(J){var be=0;return F(J,function(){be++}),be},toArray:function(J){return F(J,function(be){return be})||[]},only:function(J){if(!S(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},ca.Component=k,ca.Fragment=r,ca.Profiler=l,ca.PureComponent=U,ca.StrictMode=s,ca.Suspense=b,ca.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ca.__COMPILER_RUNTIME={__proto__:null,c:function(J){return P.H.useMemoCache(J)}},ca.cache=function(J){return function(){return J.apply(null,arguments)}},ca.cloneElement=function(J,be,Re){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Se=_({},J.props),me=J.key,Ce=void 0;if(be!=null)for(Be in be.ref!==void 0&&(Ce=void 0),be.key!==void 0&&(me=""+be.key),be)!z.call(be,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&be.ref===void 0||(Se[Be]=be[Be]);var Be=arguments.length-2;if(Be===1)Se.children=Re;else if(1<Be){for(var _e=Array(Be),Ye=0;Ye<Be;Ye++)_e[Ye]=arguments[Ye+2];Se.children=_e}return N(J.type,me,void 0,void 0,Ce,Se)},ca.createContext=function(J){return J={$$typeof:C,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:d,_context:J},J},ca.createElement=function(J,be,Re){var Se,me={},Ce=null;if(be!=null)for(Se in be.key!==void 0&&(Ce=""+be.key),be)z.call(be,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(me[Se]=be[Se]);var Be=arguments.length-2;if(Be===1)me.children=Re;else if(1<Be){for(var _e=Array(Be),Ye=0;Ye<Be;Ye++)_e[Ye]=arguments[Ye+2];me.children=_e}if(J&&J.defaultProps)for(Se in Be=J.defaultProps,Be)me[Se]===void 0&&(me[Se]=Be[Se]);return N(J,Ce,void 0,void 0,null,me)},ca.createRef=function(){return{current:null}},ca.forwardRef=function(J){return{$$typeof:T,render:J}},ca.isValidElement=S,ca.lazy=function(J){return{$$typeof:x,_payload:{_status:-1,_result:J},_init:$}},ca.memo=function(J,be){return{$$typeof:u,type:J,compare:be===void 0?null:be}},ca.startTransition=function(J){var be=P.T,Re={};P.T=Re;try{var Se=J(),me=P.S;me!==null&&me(Re,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(se,q)}catch(Ce){q(Ce)}finally{P.T=be}},ca.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ca.use=function(J){return P.H.use(J)},ca.useActionState=function(J,be,Re){return P.H.useActionState(J,be,Re)},ca.useCallback=function(J,be){return P.H.useCallback(J,be)},ca.useContext=function(J){return P.H.useContext(J)},ca.useDebugValue=function(){},ca.useDeferredValue=function(J,be){return P.H.useDeferredValue(J,be)},ca.useEffect=function(J,be,Re){var Se=P.H;if(typeof Re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Se.useEffect(J,be)},ca.useId=function(){return P.H.useId()},ca.useImperativeHandle=function(J,be,Re){return P.H.useImperativeHandle(J,be,Re)},ca.useInsertionEffect=function(J,be){return P.H.useInsertionEffect(J,be)},ca.useLayoutEffect=function(J,be){return P.H.useLayoutEffect(J,be)},ca.useMemo=function(J,be){return P.H.useMemo(J,be)},ca.useOptimistic=function(J,be){return P.H.useOptimistic(J,be)},ca.useReducer=function(J,be,Re){return P.H.useReducer(J,be,Re)},ca.useRef=function(J){return P.H.useRef(J)},ca.useState=function(J){return P.H.useState(J)},ca.useSyncExternalStore=function(J,be,Re){return P.H.useSyncExternalStore(J,be,Re)},ca.useTransition=function(){return P.H.useTransition()},ca.version="19.1.0",ca}var Nb;function Pm(){return Nb||(Nb=1,uv.exports=wk()),uv.exports}var Z=Pm();const Wt=S0(Z),V1=_k({__proto__:null,default:Wt},[Z]);var dv={exports:{}},Jh={},hv={exports:{}},pv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function Sk(){return Db||(Db=1,function(e){function t(F,$){var q=F.length;F.push($);e:for(;0<q;){var se=q-1>>>1,J=F[se];if(0<l(J,$))F[se]=$,F[q]=J,q=se;else break e}}function r(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var $=F[0],q=F.pop();if(q!==$){F[0]=q;e:for(var se=0,J=F.length,be=J>>>1;se<be;){var Re=2*(se+1)-1,Se=F[Re],me=Re+1,Ce=F[me];if(0>l(Se,q))me<J&&0>l(Ce,Se)?(F[se]=Ce,F[me]=q,se=me):(F[se]=Se,F[Re]=q,se=Re);else if(me<J&&0>l(Ce,q))F[se]=Ce,F[me]=q,se=me;else break e}}return $}function l(F,$){var q=F.sortIndex-$.sortIndex;return q!==0?q:F.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var C=Date,T=C.now();e.unstable_now=function(){return C.now()-T}}var b=[],u=[],x=1,f=null,y=3,E=!1,_=!1,m=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;function A(F){for(var $=r(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=F)s(u),$.sortIndex=$.expirationTime,t(b,$);else break;$=r(u)}}function P(F){if(m=!1,A(F),!_)if(r(b)!==null)_=!0,z||(z=!0,O());else{var $=r(u);$!==null&&H(P,$.startTime-F)}}var z=!1,N=-1,R=5,S=-1;function p(){return k?!0:!(e.unstable_now()-S<R)}function D(){if(k=!1,z){var F=e.unstable_now();S=F;var $=!0;try{e:{_=!1,m&&(m=!1,U(N),N=-1),E=!0;var q=y;try{t:{for(A(F),f=r(b);f!==null&&!(f.expirationTime>F&&p());){var se=f.callback;if(typeof se=="function"){f.callback=null,y=f.priorityLevel;var J=se(f.expirationTime<=F);if(F=e.unstable_now(),typeof J=="function"){f.callback=J,A(F),$=!0;break t}f===r(b)&&s(b),A(F)}else s(b);f=r(b)}if(f!==null)$=!0;else{var be=r(u);be!==null&&H(P,be.startTime-F),$=!1}}break e}finally{f=null,y=q,E=!1}$=void 0}}finally{$?O():z=!1}}}var O;if(typeof g=="function")O=function(){g(D)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,I=j.port2;j.port1.onmessage=D,O=function(){I.postMessage(null)}}else O=function(){w(D,0)};function H(F,$){N=w(function(){F(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(F){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var q=y;y=$;try{return F()}finally{y=q}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(F,$){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=y;y=F;try{return $()}finally{y=q}},e.unstable_scheduleCallback=function(F,$,q){var se=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,F){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,F={id:x++,callback:$,priorityLevel:F,startTime:q,expirationTime:J,sortIndex:-1},q>se?(F.sortIndex=q,t(u,F),r(b)===null&&F===r(u)&&(m?(U(N),N=-1):m=!0,H(P,q-se))):(F.sortIndex=J,t(b,F),_||E||(_=!0,z||(z=!0,O()))),F},e.unstable_shouldYield=p,e.unstable_wrapCallback=function(F){var $=y;return function(){var q=y;y=$;try{return F.apply(this,arguments)}finally{y=q}}}}(pv)),pv}var Ab;function Rk(){return Ab||(Ab=1,hv.exports=Sk()),hv.exports}var fv={exports:{}},ho={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob;function Ek(){if(Ob)return ho;Ob=1;var e=Pm();function t(b){var u="https://react.dev/errors/"+b;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)u+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+b+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(b,u,x){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:f==null?null:""+f,children:b,containerInfo:u,implementation:x}}var C=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(b,u){if(b==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ho.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ho.createPortal=function(b,u){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return d(b,u,null,x)},ho.flushSync=function(b){var u=C.T,x=s.p;try{if(C.T=null,s.p=2,b)return b()}finally{C.T=u,s.p=x,s.d.f()}},ho.preconnect=function(b,u){typeof b=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,s.d.C(b,u))},ho.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},ho.preinit=function(b,u){if(typeof b=="string"&&u&&typeof u.as=="string"){var x=u.as,f=T(x,u.crossOrigin),y=typeof u.integrity=="string"?u.integrity:void 0,E=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;x==="style"?s.d.S(b,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:y,fetchPriority:E}):x==="script"&&s.d.X(b,{crossOrigin:f,integrity:y,fetchPriority:E,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ho.preinitModule=function(b,u){if(typeof b=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var x=T(u.as,u.crossOrigin);s.d.M(b,{crossOrigin:x,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&s.d.M(b)},ho.preload=function(b,u){if(typeof b=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var x=u.as,f=T(x,u.crossOrigin);s.d.L(b,x,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ho.preloadModule=function(b,u){if(typeof b=="string")if(u){var x=T(u.as,u.crossOrigin);s.d.m(b,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:x,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else s.d.m(b)},ho.requestFormReset=function(b){s.d.r(b)},ho.unstable_batchedUpdates=function(b,u){return b(u)},ho.useFormState=function(b,u,x){return C.H.useFormState(b,u,x)},ho.useFormStatus=function(){return C.H.useHostTransitionStatus()},ho.version="19.1.0",ho}var Mb;function q1(){if(Mb)return fv.exports;Mb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fv.exports=Ek(),fv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function kk(){if(jb)return Jh;jb=1;var e=Rk(),t=Pm(),r=q1();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function d(n){var a=n,c=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(c=a.return),n=a.return;while(n)}return a.tag===3?c:null}function C(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function T(n){if(d(n)!==n)throw Error(s(188))}function b(n){var a=n.alternate;if(!a){if(a=d(n),a===null)throw Error(s(188));return a!==n?null:n}for(var c=n,v=a;;){var B=c.return;if(B===null)break;var V=B.alternate;if(V===null){if(v=B.return,v!==null){c=v;continue}break}if(B.child===V.child){for(V=B.child;V;){if(V===c)return T(B),n;if(V===v)return T(B),a;V=V.sibling}throw Error(s(188))}if(c.return!==v.return)c=B,v=V;else{for(var oe=!1,ye=B.child;ye;){if(ye===c){oe=!0,c=B,v=V;break}if(ye===v){oe=!0,v=B,c=V;break}ye=ye.sibling}if(!oe){for(ye=V.child;ye;){if(ye===c){oe=!0,c=V,v=B;break}if(ye===v){oe=!0,v=V,c=B;break}ye=ye.sibling}if(!oe)throw Error(s(189))}}if(c.alternate!==v)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?n:a}function u(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=u(n),a!==null)return a;n=n.sibling}return null}var x=Object.assign,f=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),g=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),p=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var j=Symbol.for("react.client.reference");function I(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===j?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _:return"Fragment";case k:return"Profiler";case m:return"StrictMode";case P:return"Suspense";case z:return"SuspenseList";case S:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case E:return"Portal";case g:return(n.displayName||"Context")+".Provider";case U:return(n._context.displayName||"Context")+".Consumer";case A:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return a=n.displayName||null,a!==null?a:I(n.type)||"Memo";case R:a=n._payload,n=n._init;try{return I(n(a))}catch{}}return null}var H=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},se=[],J=-1;function be(n){return{current:n}}function Re(n){0>J||(n.current=se[J],se[J]=null,J--)}function Se(n,a){J++,se[J]=n.current,n.current=a}var me=be(null),Ce=be(null),Be=be(null),_e=be(null);function Ye(n,a){switch(Se(Be,a),Se(Ce,n),Se(me,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?tb(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=tb(a),n=nb(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Re(me),Se(me,n)}function Qe(){Re(me),Re(Ce),Re(Be)}function Ge(n){n.memoizedState!==null&&Se(_e,n);var a=me.current,c=nb(a,n.type);a!==c&&(Se(Ce,n),Se(me,c))}function He(n){Ce.current===n&&(Re(me),Re(Ce)),_e.current===n&&(Re(_e),Zh._currentValue=q)}var Te=Object.prototype.hasOwnProperty,dt=e.unstable_scheduleCallback,yt=e.unstable_cancelCallback,on=e.unstable_shouldYield,ln=e.unstable_requestPaint,Pn=e.unstable_now,En=e.unstable_getCurrentPriorityLevel,rn=e.unstable_ImmediatePriority,Ne=e.unstable_UserBlockingPriority,Me=e.unstable_NormalPriority,Ze=e.unstable_LowPriority,Ft=e.unstable_IdlePriority,Ct=e.log,wt=e.unstable_setDisableYieldValue,un=null,Sn=null;function Ut(n){if(typeof Ct=="function"&&wt(n),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(un,n)}catch{}}var nr=Math.clz32?Math.clz32:Ur,Ar=Math.log,Sr=Math.LN2;function Ur(n){return n>>>=0,n===0?32:31-(Ar(n)/Sr|0)|0}var xr=256,Or=4194304;function Kr(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function va(n,a,c){var v=n.pendingLanes;if(v===0)return 0;var B=0,V=n.suspendedLanes,oe=n.pingedLanes;n=n.warmLanes;var ye=v&134217727;return ye!==0?(v=ye&~V,v!==0?B=Kr(v):(oe&=ye,oe!==0?B=Kr(oe):c||(c=ye&~n,c!==0&&(B=Kr(c))))):(ye=v&~V,ye!==0?B=Kr(ye):oe!==0?B=Kr(oe):c||(c=v&~n,c!==0&&(B=Kr(c)))),B===0?0:a!==0&&a!==B&&(a&V)===0&&(V=B&-B,c=a&-a,V>=c||V===32&&(c&4194048)!==0)?a:B}function ra(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function ua(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jn(){var n=xr;return xr<<=1,(xr&4194048)===0&&(xr=256),n}function Ha(){var n=Or;return Or<<=1,(Or&62914560)===0&&(Or=4194304),n}function Ea(n){for(var a=[],c=0;31>c;c++)a.push(n);return a}function Qr(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gr(n,a,c,v,B,V){var oe=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var ye=n.entanglements,Ve=n.expirationTimes,lt=n.hiddenUpdates;for(c=oe&~c;0<c;){var Ht=31-nr(c),en=1<<Ht;ye[Ht]=0,Ve[Ht]=-1;var pt=lt[Ht];if(pt!==null)for(lt[Ht]=null,Ht=0;Ht<pt.length;Ht++){var vt=pt[Ht];vt!==null&&(vt.lane&=-536870913)}c&=~en}v!==0&&rt(n,v,0),V!==0&&B===0&&n.tag!==0&&(n.suspendedLanes|=V&~(oe&~a))}function rt(n,a,c){n.pendingLanes|=a,n.suspendedLanes&=~a;var v=31-nr(a);n.entangledLanes|=a,n.entanglements[v]=n.entanglements[v]|1073741824|c&4194090}function ut(n,a){var c=n.entangledLanes|=a;for(n=n.entanglements;c;){var v=31-nr(c),B=1<<v;B&a|n[v]&a&&(n[v]|=a),c&=~B}}function $t(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Tt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function sn(){var n=$.p;return n!==0?n:(n=window.event,n===void 0?32:xb(n.type))}function nn(n,a){var c=$.p;try{return $.p=n,a()}finally{$.p=c}}var et=Math.random().toString(36).slice(2),On="__reactFiber$"+et,Ln="__reactProps$"+et,Xn="__reactContainer$"+et,vr="__reactEvents$"+et,Qt="__reactListeners$"+et,St="__reactHandles$"+et,Un="__reactResources$"+et,In="__reactMarker$"+et;function Nn(n){delete n[On],delete n[Ln],delete n[vr],delete n[Qt],delete n[St]}function Fr(n){var a=n[On];if(a)return a;for(var c=n.parentNode;c;){if(a=c[Xn]||c[On]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(n=ib(n);n!==null;){if(c=n[On])return c;n=ib(n)}return a}n=c,c=n.parentNode}return null}function Mr(n){if(n=n[On]||n[Xn]){var a=n.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return n}return null}function Hr(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function cr(n){var a=n[Un];return a||(a=n[Un]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Kn(n){n[In]=!0}var xa=new Set,ma={};function La(n,a){Va(n,a),Va(n+"Capture",a)}function Va(n,a){for(ma[n]=a,n=0;n<a.length;n++)xa.add(a[n])}var Ci=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bs={},ii={};function Ti(n){return Te.call(ii,n)?!0:Te.call(bs,n)?!1:Ci.test(n)?ii[n]=!0:(bs[n]=!0,!1)}function Us(n,a,c){if(Ti(a))if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var v=a.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+c)}}function vi(n,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+c)}}function ea(n,a,c,v){if(v===null)n.removeAttribute(c);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(a,c,""+v)}}var Fs,Ks;function pn(n){if(Fs===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Fs=a&&a[1]||"",Ks=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fs+n+Ks}var Jn=!1;function $n(n,a){if(!n||Jn)return"";Jn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(a){var en=function(){throw Error()};if(Object.defineProperty(en.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(en,[])}catch(vt){var pt=vt}Reflect.construct(n,[],en)}else{try{en.call()}catch(vt){pt=vt}n.call(en.prototype)}}else{try{throw Error()}catch(vt){pt=vt}(en=n())&&typeof en.catch=="function"&&en.catch(function(){})}}catch(vt){if(vt&&pt&&typeof vt.stack=="string")return[vt.stack,pt.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var B=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");B&&B.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=v.DetermineComponentFrameRoot(),oe=V[0],ye=V[1];if(oe&&ye){var Ve=oe.split(`
`),lt=ye.split(`
`);for(B=v=0;v<Ve.length&&!Ve[v].includes("DetermineComponentFrameRoot");)v++;for(;B<lt.length&&!lt[B].includes("DetermineComponentFrameRoot");)B++;if(v===Ve.length||B===lt.length)for(v=Ve.length-1,B=lt.length-1;1<=v&&0<=B&&Ve[v]!==lt[B];)B--;for(;1<=v&&0<=B;v--,B--)if(Ve[v]!==lt[B]){if(v!==1||B!==1)do if(v--,B--,0>B||Ve[v]!==lt[B]){var Ht=`
`+Ve[v].replace(" at new "," at ");return n.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",n.displayName)),Ht}while(1<=v&&0<=B);break}}}finally{Jn=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?pn(c):""}function dr(n){switch(n.tag){case 26:case 27:case 5:return pn(n.type);case 16:return pn("Lazy");case 13:return pn("Suspense");case 19:return pn("SuspenseList");case 0:case 15:return $n(n.type,!1);case 11:return $n(n.type.render,!1);case 1:return $n(n.type,!0);case 31:return pn("Activity");default:return""}}function Dn(n){try{var a="";do a+=dr(n),n=n.return;while(n);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Hn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $r(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Er(n){var a=$r(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),v=""+n[a];if(!n.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var B=c.get,V=c.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return B.call(this)},set:function(oe){v=""+oe,V.call(this,oe)}}),Object.defineProperty(n,a,{enumerable:c.enumerable}),{getValue:function(){return v},setValue:function(oe){v=""+oe},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function kr(n){n._valueTracker||(n._valueTracker=Er(n))}function Fn(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var c=a.getValue(),v="";return n&&(v=$r(n)?n.checked?"true":"false":n.value),n=v,n!==c?(a.setValue(n),!0):!1}function Zr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Da=/[\n"\\]/g;function ya(n){return n.replace(Da,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ca(n,a,c,v,B,V,oe,ye){n.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?n.type=oe:n.removeAttribute("type"),a!=null?oe==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+Hn(a)):n.value!==""+Hn(a)&&(n.value=""+Hn(a)):oe!=="submit"&&oe!=="reset"||n.removeAttribute("value"),a!=null?Ga(n,oe,Hn(a)):c!=null?Ga(n,oe,Hn(c)):v!=null&&n.removeAttribute("value"),B==null&&V!=null&&(n.defaultChecked=!!V),B!=null&&(n.checked=B&&typeof B!="function"&&typeof B!="symbol"),ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?n.name=""+Hn(ye):n.removeAttribute("name")}function Za(n,a,c,v,B,V,oe,ye){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(n.type=V),a!=null||c!=null){if(!(V!=="submit"&&V!=="reset"||a!=null))return;c=c!=null?""+Hn(c):"",a=a!=null?""+Hn(a):c,ye||a===n.value||(n.value=a),n.defaultValue=a}v=v??B,v=typeof v!="function"&&typeof v!="symbol"&&!!v,n.checked=ye?n.checked:!!v,n.defaultChecked=!!v,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(n.name=oe)}function Ga(n,a,c){a==="number"&&Zr(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function ss(n,a,c,v){if(n=n.options,a){a={};for(var B=0;B<c.length;B++)a["$"+c[B]]=!0;for(c=0;c<n.length;c++)B=a.hasOwnProperty("$"+n[c].value),n[c].selected!==B&&(n[c].selected=B),B&&v&&(n[c].defaultSelected=!0)}else{for(c=""+Hn(c),a=null,B=0;B<n.length;B++){if(n[B].value===c){n[B].selected=!0,v&&(n[B].defaultSelected=!0);return}a!==null||n[B].disabled||(a=n[B])}a!==null&&(a.selected=!0)}}function Aa(n,a,c){if(a!=null&&(a=""+Hn(a),a!==n.value&&(n.value=a),c==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=c!=null?""+Hn(c):""}function ls(n,a,c,v){if(a==null){if(v!=null){if(c!=null)throw Error(s(92));if(H(v)){if(1<v.length)throw Error(s(93));v=v[0]}c=v}c==null&&(c=""),a=c}c=Hn(a),n.defaultValue=c,v=n.textContent,v===c&&v!==""&&v!==null&&(n.value=v)}function Ps(n,a){if(a){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=a;return}}n.textContent=a}var ro=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yi(n,a,c){var v=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?v?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":v?n.setProperty(a,c):typeof c!="number"||c===0||ro.has(a)?a==="float"?n.cssFloat=c:n[a]=(""+c).trim():n[a]=c+"px"}function Pi(n,a,c){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,c!=null){for(var v in c)!c.hasOwnProperty(v)||a!=null&&a.hasOwnProperty(v)||(v.indexOf("--")===0?n.setProperty(v,""):v==="float"?n.cssFloat="":n[v]="");for(var B in a)v=a[B],a.hasOwnProperty(B)&&c[B]!==v&&yi(n,B,v)}else for(var V in a)a.hasOwnProperty(V)&&yi(n,V,a[V])}function Ns(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hi(n){return mo.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ao=null;function Ni(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _i=null,Di=null;function uc(n){var a=Mr(n);if(a&&(n=a.stateNode)){var c=n[Ln]||null;e:switch(n=a.stateNode,a.type){case"input":if(Ca(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ya(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var v=c[a];if(v!==n&&v.form===n.form){var B=v[Ln]||null;if(!B)throw Error(s(90));Ca(v,B.value,B.defaultValue,B.defaultValue,B.checked,B.defaultChecked,B.type,B.name)}}for(a=0;a<c.length;a++)v=c[a],v.form===n.form&&Fn(v)}break e;case"textarea":Aa(n,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&ss(n,!!c.multiple,a,!1)}}}var Cr=!1;function Hs(n,a,c){if(Cr)return n(a,c);Cr=!0;try{var v=n(a);return v}finally{if(Cr=!1,(_i!==null||Di!==null)&&(uf(),_i&&(a=_i,n=Di,Di=_i=null,uc(a),n)))for(a=0;a<n.length;a++)uc(n[a])}}function da(n,a){var c=n.stateNode;if(c===null)return null;var v=c[Ln]||null;if(v===null)return null;c=v[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(n=n.type,v=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!v;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(s(231,a,typeof c));return c}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),so=!1;if(oi)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){so=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{so=!1}var Qs=null,ci=null,li=null;function _r(){if(li)return li;var n,a=ci,c=a.length,v,B="value"in Qs?Qs.value:Qs.textContent,V=B.length;for(n=0;n<c&&a[n]===B[n];n++);var oe=c-n;for(v=1;v<=oe&&a[c-v]===B[V-v];v++);return li=B.slice(n,1<v?1-v:void 0)}function qa(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Xs(){return!0}function Zo(){return!1}function ms(n){function a(c,v,B,V,oe){this._reactName=c,this._targetInst=B,this.type=v,this.nativeEvent=V,this.target=oe,this.currentTarget=null;for(var ye in n)n.hasOwnProperty(ye)&&(c=n[ye],this[ye]=c?c(V):V[ye]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Xs:Zo,this.isPropagationStopped=Zo,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),a}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},go=ms(Vi),Qa=x({},Vi,{view:0,detail:0}),Oc=ms(Qa),Js,Vr,ui,gs=x({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ui&&(ui&&n.type==="mousemove"?(Js=n.screenX-ui.screenX,Vr=n.screenY-ui.screenY):Vr=Js=0,ui=n),Js)},movementY:function(n){return"movementY"in n?n.movementY:Vr}}),qi=ms(gs),Go=x({},gs,{dataTransfer:0}),Yo=ms(Go),io=x({},Qa,{relatedTarget:0}),fn=ms(io),ve=x({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),At=ms(ve),rr=x({},Vi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ha=ms(rr),Xa=x({},Vi,{data:0}),xs=ms(Xa),kl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ir={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tl(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Ir[n])?!!a[n]:!1}function dc(){return Tl}var ko=x({},Qa,{key:function(n){if(n.key){var a=kl[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=qa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Cl[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(n){return n.type==="keypress"?qa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),vo=ms(ko),Wi=x({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yo=ms(Wi),sl=x({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),Pl=ms(sl),Mc=x({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vs=ms(Mc),ou=x({},gs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),jc=ms(ou),Lc=x({},Vi,{newState:0,oldState:0}),Co=ms(Lc),cu=[9,13,27,32],Oa=oi&&"CompositionEvent"in window,Wa=null;oi&&"documentMode"in document&&(Wa=document.documentMode);var Nl=oi&&"TextEvent"in window&&!Wa,Dl=oi&&(!Oa||Wa&&8<Wa&&11>=Wa),gt=" ",To=!1;function lr(n,a){switch(n){case"keyup":return cu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ic(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Po=!1;function Ds(n,a){switch(n){case"compositionend":return Ic(a);case"keypress":return a.which!==32?null:(To=!0,gt);case"textInput":return n=a.data,n===gt&&To?null:n;default:return null}}function fe(n,a){if(Po)return n==="compositionend"||!Oa&&lr(n,a)?(n=_r(),li=ci=Qs=null,Po=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Dl&&a.locale!=="ko"?null:a.data;default:return null}}var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!Bn[n.type]:a==="textarea"}function hc(n,a,c,v){_i?Di?Di.push(v):Di=[v]:_i=v,a=gf(a,"onChange"),0<a.length&&(c=new go("onChange","change",null,c,v),n.push({event:c,listeners:a}))}var Ma=null,ne=null;function Y(n){K_(n,0)}function Q(n){var a=Hr(n);if(Fn(a))return n}function ce(n,a){if(n==="change")return a}var je=!1;if(oi){var at;if(oi){var kt="oninput"in document;if(!kt){var Lt=document.createElement("div");Lt.setAttribute("oninput","return;"),kt=typeof Lt.oninput=="function"}at=kt}else at=!1;je=at&&(!document.documentMode||9<document.documentMode)}function xt(){Ma&&(Ma.detachEvent("onpropertychange",zn),ne=Ma=null)}function zn(n){if(n.propertyName==="value"&&Q(ne)){var a=[];hc(a,ne,n,Ni(n)),Hs(Y,a)}}function Gt(n,a,c){n==="focusin"?(xt(),Ma=a,ne=c,Ma.attachEvent("onpropertychange",zn)):n==="focusout"&&xt()}function Gn(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Q(ne)}function kn(n,a){if(n==="click")return Q(a)}function sa(n,a){if(n==="input"||n==="change")return Q(a)}function Jr(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var pa=typeof Object.is=="function"?Object.is:Jr;function ia(n,a){if(pa(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var c=Object.keys(n),v=Object.keys(a);if(c.length!==v.length)return!1;for(v=0;v<c.length;v++){var B=c[v];if(!Te.call(a,B)||!pa(n[B],a[B]))return!1}return!0}function $i(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Zi(n,a){var c=$i(n);n=0;for(var v;c;){if(c.nodeType===3){if(v=n+c.textContent.length,n<=a&&v>=a)return{node:c,offset:a-n};n=v}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=$i(c)}}function bi(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?bi(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function _o(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=Zr(n.document);a instanceof n.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)n=a.contentWindow;else break;a=Zr(n.document)}return a}function bo(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var No=oi&&"documentMode"in document&&11>=document.documentMode,ei=null,di=null,Do=null,Bc=!1;function pc(n,a,c){var v=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Bc||ei==null||ei!==Zr(v)||(v=ei,"selectionStart"in v&&bo(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Do&&ia(Do,v)||(Do=v,v=gf(di,"onSelect"),0<v.length&&(a=new go("onSelect","select",null,a,c),n.push({event:a,listeners:v}),a.target=ei)))}function hi(n,a){var c={};return c[n.toLowerCase()]=a.toLowerCase(),c["Webkit"+n]="webkit"+a,c["Moz"+n]="moz"+a,c}var oo={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},Ko={},zc={};oi&&(zc=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function Gi(n){if(Ko[n])return Ko[n];if(!oo[n])return n;var a=oo[n],c;for(c in a)if(a.hasOwnProperty(c)&&c in zc)return Ko[n]=a[c];return n}var fc=Gi("animationend"),pi=Gi("animationiteration"),Yi=Gi("animationstart"),il=Gi("transitionrun"),Qo=Gi("transitionstart"),mc=Gi("transitioncancel"),Ao=Gi("transitionend"),Xo=new Map,qs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qs.push("scrollEnd");function As(n,a){Xo.set(n,a),La(a,[n])}var Ai=new WeakMap;function vs(n,a){if(typeof n=="object"&&n!==null){var c=Ai.get(n);return c!==void 0?c:(a={value:n,source:a,stack:Dn(a)},Ai.set(n,a),a)}return{value:n,source:a,stack:Dn(a)}}var Os=[],xo=0,fi=0;function Oo(){for(var n=xo,a=fi=xo=0;a<n;){var c=Os[a];Os[a++]=null;var v=Os[a];Os[a++]=null;var B=Os[a];Os[a++]=null;var V=Os[a];if(Os[a++]=null,v!==null&&B!==null){var oe=v.pending;oe===null?B.next=B:(B.next=oe.next,oe.next=B),v.pending=B}V!==0&&Jo(c,B,V)}}function Ms(n,a,c,v){Os[xo++]=n,Os[xo++]=a,Os[xo++]=c,Os[xo++]=v,fi|=v,n.lanes|=v,n=n.alternate,n!==null&&(n.lanes|=v)}function wo(n,a,c,v){return Ms(n,a,c,v),Oi(n)}function co(n,a){return Ms(n,null,null,a),Oi(n)}function Jo(n,a,c){n.lanes|=c;var v=n.alternate;v!==null&&(v.lanes|=c);for(var B=!1,V=n.return;V!==null;)V.childLanes|=c,v=V.alternate,v!==null&&(v.childLanes|=c),V.tag===22&&(n=V.stateNode,n===null||n._visibility&1||(B=!0)),n=V,V=V.return;return n.tag===3?(V=n.stateNode,B&&a!==null&&(B=31-nr(c),n=V.hiddenUpdates,v=n[B],v===null?n[B]=[a]:v.push(a),a.lane=c|536870912),V):null}function Oi(n){if(50<zh)throw zh=0,Og=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Mo={};function Al(n,a,c,v){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(n,a,c,v){return new Al(n,a,c,v)}function ec(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ki(n,a){var c=n.alternate;return c===null?(c=Ta(n.tag,a,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=a,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,a=n.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function Uc(n,a){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,a=c.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function gc(n,a,c,v,B,V){var oe=0;if(v=n,typeof n=="function")ec(n)&&(oe=1);else if(typeof n=="string")oe=sk(n,c,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case S:return n=Ta(31,c,a,B),n.elementType=S,n.lanes=V,n;case _:return xi(c.children,B,V,a);case m:oe=8,B|=24;break;case k:return n=Ta(12,c,a,B|2),n.elementType=k,n.lanes=V,n;case P:return n=Ta(13,c,a,B),n.elementType=P,n.lanes=V,n;case z:return n=Ta(19,c,a,B),n.elementType=z,n.lanes=V,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case w:case g:oe=10;break e;case U:oe=9;break e;case A:oe=11;break e;case N:oe=14;break e;case R:oe=16,v=null;break e}oe=29,c=Error(s(130,n===null?"null":typeof n,"")),v=null}return a=Ta(oe,c,a,B),a.elementType=n,a.type=v,a.lanes=V,a}function xi(n,a,c,v){return n=Ta(7,n,v,a),n.lanes=c,n}function tc(n,a,c){return n=Ta(6,n,null,a),n.lanes=c,n}function jo(n,a,c){return a=Ta(4,n.children!==null?n.children:[],n.key,a),a.lanes=c,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var wi=[],Qi=0,i=null,h=0,M=[],W=0,te=null,he=1,ze="";function it(n,a){wi[Qi++]=h,wi[Qi++]=i,i=n,h=a}function ht(n,a,c){M[W++]=he,M[W++]=ze,M[W++]=te,te=n;var v=he;n=ze;var B=32-nr(v)-1;v&=~(1<<B),c+=1;var V=32-nr(a)+B;if(30<V){var oe=B-B%5;V=(v&(1<<oe)-1).toString(32),v>>=oe,B-=oe,he=1<<32-nr(a)+B|c<<B|v,ze=V+n}else he=1<<V|c<<B|v,ze=n}function Xt(n){n.return!==null&&(it(n,1),ht(n,1,0))}function qn(n){for(;n===i;)i=wi[--Qi],wi[Qi]=null,h=wi[--Qi],wi[Qi]=null;for(;n===te;)te=M[--W],M[W]=null,ze=M[--W],M[W]=null,he=M[--W],M[W]=null}var Yn=null,ir=null,jr=!1,ka=null,Ua=!1,us=Error(s(519));function js(n){var a=Error(s(418,""));throw Mi(vs(a,n)),us}function vc(n){var a=n.stateNode,c=n.type,v=n.memoizedProps;switch(a[On]=n,a[Ln]=v,c){case"dialog":ba("cancel",a),ba("close",a);break;case"iframe":case"object":case"embed":ba("load",a);break;case"video":case"audio":for(c=0;c<Fh.length;c++)ba(Fh[c],a);break;case"source":ba("error",a);break;case"img":case"image":case"link":ba("error",a),ba("load",a);break;case"details":ba("toggle",a);break;case"input":ba("invalid",a),Za(a,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),kr(a);break;case"select":ba("invalid",a);break;case"textarea":ba("invalid",a),ls(a,v.value,v.defaultValue,v.children),kr(a)}c=v.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||v.suppressHydrationWarning===!0||eb(a.textContent,c)?(v.popover!=null&&(ba("beforetoggle",a),ba("toggle",a)),v.onScroll!=null&&ba("scroll",a),v.onScrollEnd!=null&&ba("scrollend",a),v.onClick!=null&&(a.onclick=vf),a=!0):a=!1,a||js(n)}function Ol(n){for(Yn=n.return;Yn;)switch(Yn.tag){case 5:case 13:Ua=!1;return;case 27:case 3:Ua=!0;return;default:Yn=Yn.return}}function Lo(n){if(n!==Yn)return!1;if(!jr)return Ol(n),jr=!0,!1;var a=n.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||Yg(n.type,n.memoizedProps)),c=!c),c&&ir&&js(n),Ol(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8)if(c=n.data,c==="/$"){if(a===0){ir=Wc(n.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;n=n.nextSibling}ir=null}}else a===27?(a=ir,wu(n.type)?(n=Jg,Jg=null,ir=n):ir=a):ir=Yn?Wc(n.stateNode.nextSibling):null;return!0}function lo(){ir=Yn=null,jr=!1}function Fc(){var n=ka;return n!==null&&(zo===null?zo=n:zo.push.apply(zo,n),ka=null),n}function Mi(n){ka===null?ka=[n]:ka.push(n)}var $a=be(null),Si=null,uo=null;function So(n,a,c){Se($a,a._currentValue),a._currentValue=c}function Ja(n){n._currentValue=$a.current,Re($a)}function yc(n,a,c){for(;n!==null;){var v=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,v!==null&&(v.childLanes|=a)):v!==null&&(v.childLanes&a)!==a&&(v.childLanes|=a),n===c)break;n=n.return}}function Hc(n,a,c,v){var B=n.child;for(B!==null&&(B.return=n);B!==null;){var V=B.dependencies;if(V!==null){var oe=B.child;V=V.firstContext;e:for(;V!==null;){var ye=V;V=B;for(var Ve=0;Ve<a.length;Ve++)if(ye.context===a[Ve]){V.lanes|=c,ye=V.alternate,ye!==null&&(ye.lanes|=c),yc(V.return,c,n),v||(oe=null);break e}V=ye.next}}else if(B.tag===18){if(oe=B.return,oe===null)throw Error(s(341));oe.lanes|=c,V=oe.alternate,V!==null&&(V.lanes|=c),yc(oe,c,n),oe=null}else oe=B.child;if(oe!==null)oe.return=B;else for(oe=B;oe!==null;){if(oe===n){oe=null;break}if(B=oe.sibling,B!==null){B.return=oe.return,oe=B;break}oe=oe.return}B=oe}}function Io(n,a,c,v){n=null;for(var B=a,V=!1;B!==null;){if(!V){if((B.flags&524288)!==0)V=!0;else if((B.flags&262144)!==0)break}if(B.tag===10){var oe=B.alternate;if(oe===null)throw Error(s(387));if(oe=oe.memoizedProps,oe!==null){var ye=B.type;pa(B.pendingProps.value,oe.value)||(n!==null?n.push(ye):n=[ye])}}else if(B===_e.current){if(oe=B.alternate,oe===null)throw Error(s(387));oe.memoizedState.memoizedState!==B.memoizedState.memoizedState&&(n!==null?n.push(Zh):n=[Zh])}B=B.return}n!==null&&Hc(a,n,c,v),a.flags|=262144}function ol(n){for(n=n.firstContext;n!==null;){if(!pa(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ji(n){Si=n,uo=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ws(n){return Iu(Si,n)}function Ml(n,a){return Si===null&&ji(n),Iu(n,a)}function Iu(n,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},uo===null){if(n===null)throw Error(s(308));uo=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else uo=uo.next=a;return c}var Bu=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(c,v){n.push(v)}};this.abort=function(){a.aborted=!0,n.forEach(function(c){return c()})}},zu=e.unstable_scheduleCallback,jl=e.unstable_NormalPriority,Ss={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _c(){return{controller:new Bu,data:new Map,refCount:0}}function bc(n){n.refCount--,n.refCount===0&&zu(jl,function(){n.controller.abort()})}var xc=null,is=0,wc=0,Vc=null;function Uu(n,a){if(xc===null){var c=xc=[];is=0,wc=Ug(),Vc={status:"pending",value:void 0,then:function(v){c.push(v)}}}return is++,a.then(Fu,Fu),a}function Fu(){if(--is===0&&xc!==null){Vc!==null&&(Vc.status="fulfilled");var n=xc;xc=null,wc=0,Vc=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function _d(n,a){var c=[],v={status:"pending",value:null,reason:null,then:function(B){c.push(B)}};return n.then(function(){v.status="fulfilled",v.value=a;for(var B=0;B<c.length;B++)(0,c[B])(a)},function(B){for(v.status="rejected",v.reason=B,B=0;B<c.length;B++)(0,c[B])(void 0)}),v}var Ll=F.S;F.S=function(n,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Uu(n,a),Ll!==null&&Ll(n,a)};var ge=be(null);function ee(){var n=ge.current;return n!==null?n:ds.pooledCache}function re(n,a){a===null?Se(ge,ge.current):Se(ge,a.pool)}function ae(){var n=ee();return n===null?null:{parent:Ss._currentValue,pool:n}}var ie=Error(s(460)),le=Error(s(474)),De=Error(s(542)),Le={then:function(){}};function Ue(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Et(){}function Nt(n,a,c){switch(c=n[c],c===void 0?n.push(a):c!==a&&(a.then(Et,Et),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Vt(n),n;default:if(typeof a.status=="string")a.then(Et,Et);else{if(n=ds,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(v){if(a.status==="pending"){var B=a;B.status="fulfilled",B.value=v}},function(v){if(a.status==="pending"){var B=a;B.status="rejected",B.reason=v}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Vt(n),n}throw qt=a,ie}}var qt=null;function bn(){if(qt===null)throw Error(s(459));var n=qt;return qt=null,n}function Vt(n){if(n===ie||n===De)throw Error(s(483))}var hn=!1;function xn(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pe(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ft(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ot(n,a,c){var v=n.updateQueue;if(v===null)return null;if(v=v.shared,(Ya&2)!==0){var B=v.pending;return B===null?a.next=a:(a.next=B.next,B.next=a),v.pending=a,a=Oi(n),Jo(n,null,c),a}return Ms(n,v,a,c),Oi(n)}function mt(n,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var v=a.lanes;v&=n.pendingLanes,c|=v,a.lanes=c,ut(n,c)}}function Mt(n,a){var c=n.updateQueue,v=n.alternate;if(v!==null&&(v=v.updateQueue,c===v)){var B=null,V=null;if(c=c.firstBaseUpdate,c!==null){do{var oe={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};V===null?B=V=oe:V=V.next=oe,c=c.next}while(c!==null);V===null?B=V=a:V=V.next=a}else B=V=a;c={baseState:v.baseState,firstBaseUpdate:B,lastBaseUpdate:V,shared:v.shared,callbacks:v.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=a:n.next=a,c.lastBaseUpdate=a}var Ke=!1;function It(){if(Ke){var n=Vc;if(n!==null)throw n}}function dn(n,a,c,v){Ke=!1;var B=n.updateQueue;hn=!1;var V=B.firstBaseUpdate,oe=B.lastBaseUpdate,ye=B.shared.pending;if(ye!==null){B.shared.pending=null;var Ve=ye,lt=Ve.next;Ve.next=null,oe===null?V=lt:oe.next=lt,oe=Ve;var Ht=n.alternate;Ht!==null&&(Ht=Ht.updateQueue,ye=Ht.lastBaseUpdate,ye!==oe&&(ye===null?Ht.firstBaseUpdate=lt:ye.next=lt,Ht.lastBaseUpdate=Ve))}if(V!==null){var en=B.baseState;oe=0,Ht=lt=Ve=null,ye=V;do{var pt=ye.lane&-536870913,vt=pt!==ye.lane;if(vt?(Pa&pt)===pt:(v&pt)===pt){pt!==0&&pt===wc&&(Ke=!0),Ht!==null&&(Ht=Ht.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var Wr=n,Br=ye;pt=a;var ts=c;switch(Br.tag){case 1:if(Wr=Br.payload,typeof Wr=="function"){en=Wr.call(ts,en,pt);break e}en=Wr;break e;case 3:Wr.flags=Wr.flags&-65537|128;case 0:if(Wr=Br.payload,pt=typeof Wr=="function"?Wr.call(ts,en,pt):Wr,pt==null)break e;en=x({},en,pt);break e;case 2:hn=!0}}pt=ye.callback,pt!==null&&(n.flags|=64,vt&&(n.flags|=8192),vt=B.callbacks,vt===null?B.callbacks=[pt]:vt.push(pt))}else vt={lane:pt,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},Ht===null?(lt=Ht=vt,Ve=en):Ht=Ht.next=vt,oe|=pt;if(ye=ye.next,ye===null){if(ye=B.shared.pending,ye===null)break;vt=ye,ye=vt.next,vt.next=null,B.lastBaseUpdate=vt,B.shared.pending=null}}while(!0);Ht===null&&(Ve=en),B.baseState=Ve,B.firstBaseUpdate=lt,B.lastBaseUpdate=Ht,V===null&&(B.shared.lanes=0),yu|=oe,n.lanes=oe,n.memoizedState=en}}function Yt(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function gn(n,a){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)Yt(c[n],a)}var an=be(null),Cn=be(0);function mn(n,a){n=Vl,Se(Cn,n),Se(an,a),Vl=n|a.baseLanes}function Jt(){Se(Cn,Vl),Se(an,an.current)}function yr(){Vl=Cn.current,Re(an),Re(Cn)}var ur=0,Dt=null,An=null,Tr=null,ta=!1,oa=!1,ja=!1,Fa=0,Gr=0,G=null,K=0;function X(){throw Error(s(321))}function de(n,a){if(a===null)return!1;for(var c=0;c<a.length&&c<n.length;c++)if(!pa(n[c],a[c]))return!1;return!0}function Ee(n,a,c,v,B,V){return ur=V,Dt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=n===null||n.memoizedState===null?My:jy,ja=!1,V=c(v,B),ja=!1,oa&&(V=we(a,c,v,B)),xe(n),V}function xe(n){F.H=Kp;var a=An!==null&&An.next!==null;if(ur=0,Tr=An=Dt=null,ta=!1,Gr=0,G=null,a)throw Error(s(300));n===null||Ii||(n=n.dependencies,n!==null&&ol(n)&&(Ii=!0))}function we(n,a,c,v){Dt=n;var B=0;do{if(oa&&(G=null),Gr=0,oa=!1,25<=B)throw Error(s(301));if(B+=1,Tr=An=null,n.updateQueue!=null){var V=n.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}F.H=gE,V=a(c,v)}while(oa);return V}function We(){var n=F.H,a=n.useState()[0];return a=typeof a.then=="function"?ue(a):a,n=n.useState()[0],(An!==null?An.memoizedState:null)!==n&&(Dt.flags|=1024),a}function ke(){var n=Fa!==0;return Fa=0,n}function Oe(n,a,c){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~c}function Xe(n){if(ta){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ta=!1}ur=0,Tr=An=Dt=null,oa=!1,Gr=Fa=0,G=null}function $e(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tr===null?Dt.memoizedState=Tr=n:Tr=Tr.next=n,Tr}function Ae(){if(An===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=An.next;var a=Tr===null?Dt.memoizedState:Tr.next;if(a!==null)Tr=a,An=n;else{if(n===null)throw Dt.alternate===null?Error(s(467)):Error(s(310));An=n,n={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Tr===null?Dt.memoizedState=Tr=n:Tr=Tr.next=n}return Tr}function tt(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ue(n){var a=Gr;return Gr+=1,G===null&&(G=[]),n=Nt(G,n,a),a=Dt,(Tr===null?a.memoizedState:Tr.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?My:jy),n}function pe(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ue(n);if(n.$$typeof===g)return ws(n)}throw Error(s(438,String(n)))}function Ie(n){var a=null,c=Dt.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var v=Dt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(a={data:v.data.map(function(B){return B.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=tt(),Dt.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(n),v=0;v<n;v++)c[v]=p;return a.index++,c}function qe(n,a){return typeof a=="function"?a(n):a}function nt(n){var a=Ae();return tn(a,An,n)}function tn(n,a,c){var v=n.queue;if(v===null)throw Error(s(311));v.lastRenderedReducer=c;var B=n.baseQueue,V=v.pending;if(V!==null){if(B!==null){var oe=B.next;B.next=V.next,V.next=oe}a.baseQueue=B=V,v.pending=null}if(V=n.baseState,B===null)n.memoizedState=V;else{a=B.next;var ye=oe=null,Ve=null,lt=a,Ht=!1;do{var en=lt.lane&-536870913;if(en!==lt.lane?(Pa&en)===en:(ur&en)===en){var pt=lt.revertLane;if(pt===0)Ve!==null&&(Ve=Ve.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),en===wc&&(Ht=!0);else if((ur&pt)===pt){lt=lt.next,pt===wc&&(Ht=!0);continue}else en={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Ve===null?(ye=Ve=en,oe=V):Ve=Ve.next=en,Dt.lanes|=pt,yu|=pt;en=lt.action,ja&&c(V,en),V=lt.hasEagerState?lt.eagerState:c(V,en)}else pt={lane:en,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Ve===null?(ye=Ve=pt,oe=V):Ve=Ve.next=pt,Dt.lanes|=en,yu|=en;lt=lt.next}while(lt!==null&&lt!==a);if(Ve===null?oe=V:Ve.next=ye,!pa(V,n.memoizedState)&&(Ii=!0,Ht&&(c=Vc,c!==null)))throw c;n.memoizedState=V,n.baseState=oe,n.baseQueue=Ve,v.lastRenderedState=V}return B===null&&(v.lanes=0),[n.memoizedState,v.dispatch]}function _t(n){var a=Ae(),c=a.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=n;var v=c.dispatch,B=c.pending,V=a.memoizedState;if(B!==null){c.pending=null;var oe=B=B.next;do V=n(V,oe.action),oe=oe.next;while(oe!==B);pa(V,a.memoizedState)||(Ii=!0),a.memoizedState=V,a.baseQueue===null&&(a.baseState=V),c.lastRenderedState=V}return[V,v]}function Pt(n,a,c){var v=Dt,B=Ae(),V=jr;if(V){if(c===void 0)throw Error(s(407));c=c()}else c=a();var oe=!pa((An||B).memoizedState,c);oe&&(B.memoizedState=c,Ii=!0),B=B.queue;var ye=Fe.bind(null,v,B,n);if(Il(2048,8,ye,[n]),B.getSnapshot!==a||oe||Tr!==null&&Tr.memoizedState.tag&1){if(v.flags|=2048,Li(9,lu(),ct.bind(null,v,B,c,a),null),ds===null)throw Error(s(349));V||(ur&124)!==0||Mn(v,a,c)}return c}function Mn(n,a,c){n.flags|=16384,n={getSnapshot:a,value:c},a=Dt.updateQueue,a===null?(a=tt(),Dt.updateQueue=a,a.stores=[n]):(c=a.stores,c===null?a.stores=[n]:c.push(n))}function ct(n,a,c,v){a.value=c,a.getSnapshot=v,bt(a)&&wn(n)}function Fe(n,a,c){return c(function(){bt(a)&&wn(n)})}function bt(n){var a=n.getSnapshot;n=n.value;try{var c=a();return!pa(n,c)}catch{return!0}}function wn(n){var a=co(n,2);a!==null&&ic(a,n,2)}function cn(n){var a=$e();if(typeof n=="function"){var c=n;if(n=c(),ja){Ut(!0);try{c()}finally{Ut(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:n},a}function vn(n,a,c,v){return n.baseState=c,tn(n,An,typeof v=="function"?v:qe)}function or(n,a,c,v,B){if(wr(n))throw Error(s(485));if(n=a.action,n!==null){var V={payload:B,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){V.listeners.push(oe)}};F.T!==null?c(!0):V.isTransition=!1,v(V),c=a.pending,c===null?(V.next=a.pending=V,Lr(a,V)):(V.next=c.next,a.pending=c.next=V)}}function Lr(n,a){var c=a.action,v=a.payload,B=n.state;if(a.isTransition){var V=F.T,oe={};F.T=oe;try{var ye=c(B,v),Ve=F.S;Ve!==null&&Ve(oe,ye),Tn(n,a,ye)}catch(lt){Pr(n,a,lt)}finally{F.T=V}}else try{V=c(B,v),Tn(n,a,V)}catch(lt){Pr(n,a,lt)}}function Tn(n,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(v){yn(n,a,v)},function(v){return Pr(n,a,v)}):yn(n,a,c)}function yn(n,a,c){a.status="fulfilled",a.value=c,br(a),n.state=c,a=n.pending,a!==null&&(c=a.next,c===a?n.pending=null:(c=c.next,a.next=c,Lr(n,c)))}function Pr(n,a,c){var v=n.pending;if(n.pending=null,v!==null){v=v.next;do a.status="rejected",a.reason=c,br(a),a=a.next;while(a!==v)}n.action=null}function br(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function ar(n,a){return a}function Wn(n,a){if(jr){var c=ds.formState;if(c!==null){e:{var v=Dt;if(jr){if(ir){t:{for(var B=ir,V=Ua;B.nodeType!==8;){if(!V){B=null;break t}if(B=Wc(B.nextSibling),B===null){B=null;break t}}V=B.data,B=V==="F!"||V==="F"?B:null}if(B){ir=Wc(B.nextSibling),v=B.data==="F!";break e}}js(v)}v=!1}v&&(a=c[0])}}return c=$e(),c.memoizedState=c.baseState=a,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:a},c.queue=v,c=Ph.bind(null,Dt,v),v.dispatch=c,v=cn(!1),V=Pd.bind(null,Dt,!1,v.queue),v=$e(),B={state:a,dispatch:null,action:n,pending:null},v.queue=B,c=or.bind(null,Dt,B,V,c),B.dispatch=c,v.memoizedState=n,[a,c,!1]}function Rn(n){var a=Ae();return qr(a,An,n)}function qr(n,a,c){if(a=tn(n,a,ar)[0],n=nt(qe)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var v=ue(a)}catch(oe){throw oe===ie?De:oe}else v=a;a=Ae();var B=a.queue,V=B.dispatch;return c!==a.memoizedState&&(Dt.flags|=2048,Li(9,lu(),wa.bind(null,B,c),null)),[v,V,n]}function wa(n,a){n.action=a}function Ws(n){var a=Ae(),c=An;if(c!==null)return qr(a,c,n);Ae(),a=a.memoizedState,c=Ae();var v=c.queue.dispatch;return c.memoizedState=n,[a,v,!1]}function Li(n,a,c,v){return n={tag:n,create:c,deps:v,inst:a,next:null},a=Dt.updateQueue,a===null&&(a=tt(),Dt.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=n.next=n:(v=c.next,c.next=n,n.next=v,a.lastEffect=n),n}function lu(){return{destroy:void 0,resource:void 0}}function bd(){return Ae().memoizedState}function Hu(n,a,c,v){var B=$e();v=v===void 0?null:v,Dt.flags|=n,B.memoizedState=Li(1|a,lu(),c,v)}function Il(n,a,c,v){var B=Ae();v=v===void 0?null:v;var V=B.memoizedState.inst;An!==null&&v!==null&&de(v,An.memoizedState.deps)?B.memoizedState=Li(a,V,c,v):(Dt.flags|=n,B.memoizedState=Li(1|a,V,c,v))}function xd(n,a){Hu(8390656,8,n,a)}function wd(n,a){Il(2048,8,n,a)}function xh(n,a){return Il(4,2,n,a)}function Sd(n,a){return Il(4,4,n,a)}function wh(n,a){if(typeof a=="function"){n=n();var c=a(n);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Sh(n,a,c){c=c!=null?c.concat([n]):null,Il(4,4,wh.bind(null,a,n),c)}function Vu(){}function Rh(n,a){var c=Ae();a=a===void 0?null:a;var v=c.memoizedState;return a!==null&&de(a,v[1])?v[0]:(c.memoizedState=[n,a],n)}function Rd(n,a){var c=Ae();a=a===void 0?null:a;var v=c.memoizedState;if(a!==null&&de(a,v[1]))return v[0];if(v=n(),ja){Ut(!0);try{n()}finally{Ut(!1)}}return c.memoizedState=[v,a],v}function qu(n,a,c){return c===void 0||(ur&1073741824)!==0?n.memoizedState=a:(n.memoizedState=c,n=C_(),Dt.lanes|=n,yu|=n,c)}function Ed(n,a,c,v){return pa(c,a)?c:an.current!==null?(n=qu(n,c,v),pa(n,a)||(Ii=!0),n):(ur&42)===0?(Ii=!0,n.memoizedState=c):(n=C_(),Dt.lanes|=n,yu|=n,a)}function kd(n,a,c,v,B){var V=$.p;$.p=V!==0&&8>V?V:8;var oe=F.T,ye={};F.T=ye,Pd(n,!1,a,c);try{var Ve=B(),lt=F.S;if(lt!==null&&lt(ye,Ve),Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var Ht=_d(Ve,v);uu(n,a,Ht,sc(n))}else uu(n,a,v,sc(n))}catch(en){uu(n,a,{then:function(){},status:"rejected",reason:en},sc())}finally{$.p=V,F.T=oe}}function Zp(){}function Cd(n,a,c,v){if(n.tag!==5)throw Error(s(476));var B=Eh(n).queue;kd(n,B,a,q,c===null?Zp:function(){return kh(n),c(v)})}function Eh(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:q},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:c},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function kh(n){var a=Eh(n).next.queue;uu(n,a,{},sc())}function Td(){return ws(Zh)}function Ch(){return Ae().memoizedState}function Th(){return Ae().memoizedState}function Gp(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var c=sc();n=ft(c);var v=Ot(a,n,c);v!==null&&(ic(v,a,c),mt(v,a,c)),a={cache:_c()},n.payload=a;return}a=a.return}}function Yp(n,a,c){var v=sc();c={lane:v,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},wr(n)?Qn(a,c):(c=wo(n,a,c,v),c!==null&&(ic(c,n,v),du(c,a,v)))}function Ph(n,a,c){var v=sc();uu(n,a,c,v)}function uu(n,a,c,v){var B={lane:v,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(wr(n))Qn(a,B);else{var V=n.alternate;if(n.lanes===0&&(V===null||V.lanes===0)&&(V=a.lastRenderedReducer,V!==null))try{var oe=a.lastRenderedState,ye=V(oe,c);if(B.hasEagerState=!0,B.eagerState=ye,pa(ye,oe))return Ms(n,a,B,0),ds===null&&Oo(),!1}catch{}finally{}if(c=wo(n,a,B,v),c!==null)return ic(c,n,v),du(c,a,v),!0}return!1}function Pd(n,a,c,v){if(v={lane:2,revertLane:Ug(),action:v,hasEagerState:!1,eagerState:null,next:null},wr(n)){if(a)throw Error(s(479))}else a=wo(n,c,v,2),a!==null&&ic(a,n,2)}function wr(n){var a=n.alternate;return n===Dt||a!==null&&a===Dt}function Qn(n,a){oa=ta=!0;var c=n.pending;c===null?a.next=a:(a.next=c.next,c.next=a),n.pending=a}function du(n,a,c){if((c&4194048)!==0){var v=a.lanes;v&=n.pendingLanes,c|=v,a.lanes=c,ut(n,c)}}var Kp={readContext:ws,use:pe,useCallback:X,useContext:X,useEffect:X,useImperativeHandle:X,useLayoutEffect:X,useInsertionEffect:X,useMemo:X,useReducer:X,useRef:X,useState:X,useDebugValue:X,useDeferredValue:X,useTransition:X,useSyncExternalStore:X,useId:X,useHostTransitionStatus:X,useFormState:X,useActionState:X,useOptimistic:X,useMemoCache:X,useCacheRefresh:X},My={readContext:ws,use:pe,useCallback:function(n,a){return $e().memoizedState=[n,a===void 0?null:a],n},useContext:ws,useEffect:xd,useImperativeHandle:function(n,a,c){c=c!=null?c.concat([n]):null,Hu(4194308,4,wh.bind(null,a,n),c)},useLayoutEffect:function(n,a){return Hu(4194308,4,n,a)},useInsertionEffect:function(n,a){Hu(4,2,n,a)},useMemo:function(n,a){var c=$e();a=a===void 0?null:a;var v=n();if(ja){Ut(!0);try{n()}finally{Ut(!1)}}return c.memoizedState=[v,a],v},useReducer:function(n,a,c){var v=$e();if(c!==void 0){var B=c(a);if(ja){Ut(!0);try{c(a)}finally{Ut(!1)}}}else B=a;return v.memoizedState=v.baseState=B,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:B},v.queue=n,n=n.dispatch=Yp.bind(null,Dt,n),[v.memoizedState,n]},useRef:function(n){var a=$e();return n={current:n},a.memoizedState=n},useState:function(n){n=cn(n);var a=n.queue,c=Ph.bind(null,Dt,a);return a.dispatch=c,[n.memoizedState,c]},useDebugValue:Vu,useDeferredValue:function(n,a){var c=$e();return qu(c,n,a)},useTransition:function(){var n=cn(!1);return n=kd.bind(null,Dt,n.queue,!0,!1),$e().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,c){var v=Dt,B=$e();if(jr){if(c===void 0)throw Error(s(407));c=c()}else{if(c=a(),ds===null)throw Error(s(349));(Pa&124)!==0||Mn(v,a,c)}B.memoizedState=c;var V={value:c,getSnapshot:a};return B.queue=V,xd(Fe.bind(null,v,V,n),[n]),v.flags|=2048,Li(9,lu(),ct.bind(null,v,V,c,a),null),c},useId:function(){var n=$e(),a=ds.identifierPrefix;if(jr){var c=ze,v=he;c=(v&~(1<<32-nr(v)-1)).toString(32)+c,a=""+a+"R"+c,c=Fa++,0<c&&(a+="H"+c.toString(32)),a+=""}else c=K++,a=""+a+"r"+c.toString(32)+"";return n.memoizedState=a},useHostTransitionStatus:Td,useFormState:Wn,useActionState:Wn,useOptimistic:function(n){var a=$e();a.memoizedState=a.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Pd.bind(null,Dt,!0,c),c.dispatch=a,[n,a]},useMemoCache:Ie,useCacheRefresh:function(){return $e().memoizedState=Gp.bind(null,Dt)}},jy={readContext:ws,use:pe,useCallback:Rh,useContext:ws,useEffect:wd,useImperativeHandle:Sh,useInsertionEffect:xh,useLayoutEffect:Sd,useMemo:Rd,useReducer:nt,useRef:bd,useState:function(){return nt(qe)},useDebugValue:Vu,useDeferredValue:function(n,a){var c=Ae();return Ed(c,An.memoizedState,n,a)},useTransition:function(){var n=nt(qe)[0],a=Ae().memoizedState;return[typeof n=="boolean"?n:ue(n),a]},useSyncExternalStore:Pt,useId:Ch,useHostTransitionStatus:Td,useFormState:Rn,useActionState:Rn,useOptimistic:function(n,a){var c=Ae();return vn(c,An,n,a)},useMemoCache:Ie,useCacheRefresh:Th},gE={readContext:ws,use:pe,useCallback:Rh,useContext:ws,useEffect:wd,useImperativeHandle:Sh,useInsertionEffect:xh,useLayoutEffect:Sd,useMemo:Rd,useReducer:_t,useRef:bd,useState:function(){return _t(qe)},useDebugValue:Vu,useDeferredValue:function(n,a){var c=Ae();return An===null?qu(c,n,a):Ed(c,An.memoizedState,n,a)},useTransition:function(){var n=_t(qe)[0],a=Ae().memoizedState;return[typeof n=="boolean"?n:ue(n),a]},useSyncExternalStore:Pt,useId:Ch,useHostTransitionStatus:Td,useFormState:Ws,useActionState:Ws,useOptimistic:function(n,a){var c=Ae();return An!==null?vn(c,An,n,a):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:Ie,useCacheRefresh:Th},Nd=null,Nh=0;function Qp(n){var a=Nh;return Nh+=1,Nd===null&&(Nd=[]),Nt(Nd,n,a)}function Dh(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function Xp(n,a){throw a.$$typeof===f?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function Ly(n){var a=n._init;return a(n._payload)}function Iy(n){function a(st,Je){if(n){var ot=st.deletions;ot===null?(st.deletions=[Je],st.flags|=16):ot.push(Je)}}function c(st,Je){if(!n)return null;for(;Je!==null;)a(st,Je),Je=Je.sibling;return null}function v(st){for(var Je=new Map;st!==null;)st.key!==null?Je.set(st.key,st):Je.set(st.index,st),st=st.sibling;return Je}function B(st,Je){return st=Ki(st,Je),st.index=0,st.sibling=null,st}function V(st,Je,ot){return st.index=ot,n?(ot=st.alternate,ot!==null?(ot=ot.index,ot<Je?(st.flags|=67108866,Je):ot):(st.flags|=67108866,Je)):(st.flags|=1048576,Je)}function oe(st){return n&&st.alternate===null&&(st.flags|=67108866),st}function ye(st,Je,ot,Zt){return Je===null||Je.tag!==6?(Je=tc(ot,st.mode,Zt),Je.return=st,Je):(Je=B(Je,ot),Je.return=st,Je)}function Ve(st,Je,ot,Zt){var hr=ot.type;return hr===_?Ht(st,Je,ot.props.children,Zt,ot.key):Je!==null&&(Je.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===R&&Ly(hr)===Je.type)?(Je=B(Je,ot.props),Dh(Je,ot),Je.return=st,Je):(Je=gc(ot.type,ot.key,ot.props,null,st.mode,Zt),Dh(Je,ot),Je.return=st,Je)}function lt(st,Je,ot,Zt){return Je===null||Je.tag!==4||Je.stateNode.containerInfo!==ot.containerInfo||Je.stateNode.implementation!==ot.implementation?(Je=jo(ot,st.mode,Zt),Je.return=st,Je):(Je=B(Je,ot.children||[]),Je.return=st,Je)}function Ht(st,Je,ot,Zt,hr){return Je===null||Je.tag!==7?(Je=xi(ot,st.mode,Zt,hr),Je.return=st,Je):(Je=B(Je,ot),Je.return=st,Je)}function en(st,Je,ot){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Je=tc(""+Je,st.mode,ot),Je.return=st,Je;if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case y:return ot=gc(Je.type,Je.key,Je.props,null,st.mode,ot),Dh(ot,Je),ot.return=st,ot;case E:return Je=jo(Je,st.mode,ot),Je.return=st,Je;case R:var Zt=Je._init;return Je=Zt(Je._payload),en(st,Je,ot)}if(H(Je)||O(Je))return Je=xi(Je,st.mode,ot,null),Je.return=st,Je;if(typeof Je.then=="function")return en(st,Qp(Je),ot);if(Je.$$typeof===g)return en(st,Ml(st,Je),ot);Xp(st,Je)}return null}function pt(st,Je,ot,Zt){var hr=Je!==null?Je.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return hr!==null?null:ye(st,Je,""+ot,Zt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case y:return ot.key===hr?Ve(st,Je,ot,Zt):null;case E:return ot.key===hr?lt(st,Je,ot,Zt):null;case R:return hr=ot._init,ot=hr(ot._payload),pt(st,Je,ot,Zt)}if(H(ot)||O(ot))return hr!==null?null:Ht(st,Je,ot,Zt,null);if(typeof ot.then=="function")return pt(st,Je,Qp(ot),Zt);if(ot.$$typeof===g)return pt(st,Je,Ml(st,ot),Zt);Xp(st,ot)}return null}function vt(st,Je,ot,Zt,hr){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return st=st.get(ot)||null,ye(Je,st,""+Zt,hr);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case y:return st=st.get(Zt.key===null?ot:Zt.key)||null,Ve(Je,st,Zt,hr);case E:return st=st.get(Zt.key===null?ot:Zt.key)||null,lt(Je,st,Zt,hr);case R:var ga=Zt._init;return Zt=ga(Zt._payload),vt(st,Je,ot,Zt,hr)}if(H(Zt)||O(Zt))return st=st.get(ot)||null,Ht(Je,st,Zt,hr,null);if(typeof Zt.then=="function")return vt(st,Je,ot,Qp(Zt),hr);if(Zt.$$typeof===g)return vt(st,Je,ot,Ml(Je,Zt),hr);Xp(Je,Zt)}return null}function Wr(st,Je,ot,Zt){for(var hr=null,ga=null,Rr=Je,zr=Je=0,zi=null;Rr!==null&&zr<ot.length;zr++){Rr.index>zr?(zi=Rr,Rr=null):zi=Rr.sibling;var Ia=pt(st,Rr,ot[zr],Zt);if(Ia===null){Rr===null&&(Rr=zi);break}n&&Rr&&Ia.alternate===null&&a(st,Rr),Je=V(Ia,Je,zr),ga===null?hr=Ia:ga.sibling=Ia,ga=Ia,Rr=zi}if(zr===ot.length)return c(st,Rr),jr&&it(st,zr),hr;if(Rr===null){for(;zr<ot.length;zr++)Rr=en(st,ot[zr],Zt),Rr!==null&&(Je=V(Rr,Je,zr),ga===null?hr=Rr:ga.sibling=Rr,ga=Rr);return jr&&it(st,zr),hr}for(Rr=v(Rr);zr<ot.length;zr++)zi=vt(Rr,st,zr,ot[zr],Zt),zi!==null&&(n&&zi.alternate!==null&&Rr.delete(zi.key===null?zr:zi.key),Je=V(zi,Je,zr),ga===null?hr=zi:ga.sibling=zi,ga=zi);return n&&Rr.forEach(function(Cu){return a(st,Cu)}),jr&&it(st,zr),hr}function Br(st,Je,ot,Zt){if(ot==null)throw Error(s(151));for(var hr=null,ga=null,Rr=Je,zr=Je=0,zi=null,Ia=ot.next();Rr!==null&&!Ia.done;zr++,Ia=ot.next()){Rr.index>zr?(zi=Rr,Rr=null):zi=Rr.sibling;var Cu=pt(st,Rr,Ia.value,Zt);if(Cu===null){Rr===null&&(Rr=zi);break}n&&Rr&&Cu.alternate===null&&a(st,Rr),Je=V(Cu,Je,zr),ga===null?hr=Cu:ga.sibling=Cu,ga=Cu,Rr=zi}if(Ia.done)return c(st,Rr),jr&&it(st,zr),hr;if(Rr===null){for(;!Ia.done;zr++,Ia=ot.next())Ia=en(st,Ia.value,Zt),Ia!==null&&(Je=V(Ia,Je,zr),ga===null?hr=Ia:ga.sibling=Ia,ga=Ia);return jr&&it(st,zr),hr}for(Rr=v(Rr);!Ia.done;zr++,Ia=ot.next())Ia=vt(Rr,st,zr,Ia.value,Zt),Ia!==null&&(n&&Ia.alternate!==null&&Rr.delete(Ia.key===null?zr:Ia.key),Je=V(Ia,Je,zr),ga===null?hr=Ia:ga.sibling=Ia,ga=Ia);return n&&Rr.forEach(function(vk){return a(st,vk)}),jr&&it(st,zr),hr}function ts(st,Je,ot,Zt){if(typeof ot=="object"&&ot!==null&&ot.type===_&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case y:e:{for(var hr=ot.key;Je!==null;){if(Je.key===hr){if(hr=ot.type,hr===_){if(Je.tag===7){c(st,Je.sibling),Zt=B(Je,ot.props.children),Zt.return=st,st=Zt;break e}}else if(Je.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===R&&Ly(hr)===Je.type){c(st,Je.sibling),Zt=B(Je,ot.props),Dh(Zt,ot),Zt.return=st,st=Zt;break e}c(st,Je);break}else a(st,Je);Je=Je.sibling}ot.type===_?(Zt=xi(ot.props.children,st.mode,Zt,ot.key),Zt.return=st,st=Zt):(Zt=gc(ot.type,ot.key,ot.props,null,st.mode,Zt),Dh(Zt,ot),Zt.return=st,st=Zt)}return oe(st);case E:e:{for(hr=ot.key;Je!==null;){if(Je.key===hr)if(Je.tag===4&&Je.stateNode.containerInfo===ot.containerInfo&&Je.stateNode.implementation===ot.implementation){c(st,Je.sibling),Zt=B(Je,ot.children||[]),Zt.return=st,st=Zt;break e}else{c(st,Je);break}else a(st,Je);Je=Je.sibling}Zt=jo(ot,st.mode,Zt),Zt.return=st,st=Zt}return oe(st);case R:return hr=ot._init,ot=hr(ot._payload),ts(st,Je,ot,Zt)}if(H(ot))return Wr(st,Je,ot,Zt);if(O(ot)){if(hr=O(ot),typeof hr!="function")throw Error(s(150));return ot=hr.call(ot),Br(st,Je,ot,Zt)}if(typeof ot.then=="function")return ts(st,Je,Qp(ot),Zt);if(ot.$$typeof===g)return ts(st,Je,Ml(st,ot),Zt);Xp(st,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint"?(ot=""+ot,Je!==null&&Je.tag===6?(c(st,Je.sibling),Zt=B(Je,ot),Zt.return=st,st=Zt):(c(st,Je),Zt=tc(ot,st.mode,Zt),Zt.return=st,st=Zt),oe(st)):c(st,Je)}return function(st,Je,ot,Zt){try{Nh=0;var hr=ts(st,Je,ot,Zt);return Nd=null,hr}catch(Rr){if(Rr===ie||Rr===De)throw Rr;var ga=Ta(29,Rr,null,st.mode);return ga.lanes=Zt,ga.return=st,ga}finally{}}}var Dd=Iy(!0),By=Iy(!1),Sc=be(null),cl=null;function hu(n){var a=n.alternate;Se(Ri,Ri.current&1),Se(Sc,n),cl===null&&(a===null||an.current!==null||a.memoizedState!==null)&&(cl=n)}function zy(n){if(n.tag===22){if(Se(Ri,Ri.current),Se(Sc,n),cl===null){var a=n.alternate;a!==null&&a.memoizedState!==null&&(cl=n)}}else pu()}function pu(){Se(Ri,Ri.current),Se(Sc,Sc.current)}function Bl(n){Re(Sc),cl===n&&(cl=null),Re(Ri)}var Ri=be(0);function Jp(n){for(var a=n;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Xg(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function lg(n,a,c,v){a=n.memoizedState,c=c(v,a),c=c==null?a:x({},a,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var ug={enqueueSetState:function(n,a,c){n=n._reactInternals;var v=sc(),B=ft(v);B.payload=a,c!=null&&(B.callback=c),a=Ot(n,B,v),a!==null&&(ic(a,n,v),mt(a,n,v))},enqueueReplaceState:function(n,a,c){n=n._reactInternals;var v=sc(),B=ft(v);B.tag=1,B.payload=a,c!=null&&(B.callback=c),a=Ot(n,B,v),a!==null&&(ic(a,n,v),mt(a,n,v))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var c=sc(),v=ft(c);v.tag=2,a!=null&&(v.callback=a),a=Ot(n,v,c),a!==null&&(ic(a,n,c),mt(a,n,c))}};function Uy(n,a,c,v,B,V,oe){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(v,V,oe):a.prototype&&a.prototype.isPureReactComponent?!ia(c,v)||!ia(B,V):!0}function Fy(n,a,c,v){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,v),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,v),a.state!==n&&ug.enqueueReplaceState(a,a.state,null)}function Wu(n,a){var c=a;if("ref"in a){c={};for(var v in a)v!=="ref"&&(c[v]=a[v])}if(n=n.defaultProps){c===a&&(c=x({},c));for(var B in n)c[B]===void 0&&(c[B]=n[B])}return c}var ef=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Hy(n){ef(n)}function Vy(n){console.error(n)}function qy(n){ef(n)}function tf(n,a){try{var c=n.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(v){setTimeout(function(){throw v})}}function Wy(n,a,c){try{var v=n.onCaughtError;v(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(B){setTimeout(function(){throw B})}}function dg(n,a,c){return c=ft(c),c.tag=3,c.payload={element:null},c.callback=function(){tf(n,a)},c}function $y(n){return n=ft(n),n.tag=3,n}function Zy(n,a,c,v){var B=c.type.getDerivedStateFromError;if(typeof B=="function"){var V=v.value;n.payload=function(){return B(V)},n.callback=function(){Wy(a,c,v)}}var oe=c.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(n.callback=function(){Wy(a,c,v),typeof B!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var ye=v.stack;this.componentDidCatch(v.value,{componentStack:ye!==null?ye:""})})}function vE(n,a,c,v,B){if(c.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(a=c.alternate,a!==null&&Io(a,c,B,!0),c=Sc.current,c!==null){switch(c.tag){case 13:return cl===null?jg():c.alternate===null&&$s===0&&($s=3),c.flags&=-257,c.flags|=65536,c.lanes=B,v===Le?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([v]):a.add(v),Ig(n,v,B)),!1;case 22:return c.flags|=65536,v===Le?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([v])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([v]):c.add(v)),Ig(n,v,B)),!1}throw Error(s(435,c.tag))}return Ig(n,v,B),jg(),!1}if(jr)return a=Sc.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=B,v!==us&&(n=Error(s(422),{cause:v}),Mi(vs(n,c)))):(v!==us&&(a=Error(s(423),{cause:v}),Mi(vs(a,c))),n=n.current.alternate,n.flags|=65536,B&=-B,n.lanes|=B,v=vs(v,c),B=dg(n.stateNode,v,B),Mt(n,B),$s!==4&&($s=2)),!1;var V=Error(s(520),{cause:v});if(V=vs(V,c),Bh===null?Bh=[V]:Bh.push(V),$s!==4&&($s=2),a===null)return!0;v=vs(v,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,n=B&-B,c.lanes|=n,n=dg(c.stateNode,v,n),Mt(c,n),!1;case 1:if(a=c.type,V=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(_u===null||!_u.has(V))))return c.flags|=65536,B&=-B,c.lanes|=B,B=$y(B),Zy(B,n,c,v),Mt(c,B),!1}c=c.return}while(c!==null);return!1}var Gy=Error(s(461)),Ii=!1;function Xi(n,a,c,v){a.child=n===null?By(a,null,c,v):Dd(a,n.child,c,v)}function Yy(n,a,c,v,B){c=c.render;var V=a.ref;if("ref"in v){var oe={};for(var ye in v)ye!=="ref"&&(oe[ye]=v[ye])}else oe=v;return ji(a),v=Ee(n,a,c,oe,V,B),ye=ke(),n!==null&&!Ii?(Oe(n,a,B),zl(n,a,B)):(jr&&ye&&Xt(a),a.flags|=1,Xi(n,a,v,B),a.child)}function Ky(n,a,c,v,B){if(n===null){var V=c.type;return typeof V=="function"&&!ec(V)&&V.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=V,Qy(n,a,V,v,B)):(n=gc(c.type,null,v,a,a.mode,B),n.ref=a.ref,n.return=a,a.child=n)}if(V=n.child,!_g(n,B)){var oe=V.memoizedProps;if(c=c.compare,c=c!==null?c:ia,c(oe,v)&&n.ref===a.ref)return zl(n,a,B)}return a.flags|=1,n=Ki(V,v),n.ref=a.ref,n.return=a,a.child=n}function Qy(n,a,c,v,B){if(n!==null){var V=n.memoizedProps;if(ia(V,v)&&n.ref===a.ref)if(Ii=!1,a.pendingProps=v=V,_g(n,B))(n.flags&131072)!==0&&(Ii=!0);else return a.lanes=n.lanes,zl(n,a,B)}return hg(n,a,c,v,B)}function Xy(n,a,c){var v=a.pendingProps,B=v.children,V=n!==null?n.memoizedState:null;if(v.mode==="hidden"){if((a.flags&128)!==0){if(v=V!==null?V.baseLanes|c:c,n!==null){for(B=a.child=n.child,V=0;B!==null;)V=V|B.lanes|B.childLanes,B=B.sibling;a.childLanes=V&~v}else a.childLanes=0,a.child=null;return Jy(n,a,v,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&re(a,V!==null?V.cachePool:null),V!==null?mn(a,V):Jt(),zy(a);else return a.lanes=a.childLanes=536870912,Jy(n,a,V!==null?V.baseLanes|c:c,c)}else V!==null?(re(a,V.cachePool),mn(a,V),pu(),a.memoizedState=null):(n!==null&&re(a,null),Jt(),pu());return Xi(n,a,B,c),a.child}function Jy(n,a,c,v){var B=ee();return B=B===null?null:{parent:Ss._currentValue,pool:B},a.memoizedState={baseLanes:c,cachePool:B},n!==null&&re(a,null),Jt(),zy(a),n!==null&&Io(n,a,v,!0),null}function nf(n,a){var c=a.ref;if(c===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(n===null||n.ref!==c)&&(a.flags|=4194816)}}function hg(n,a,c,v,B){return ji(a),c=Ee(n,a,c,v,void 0,B),v=ke(),n!==null&&!Ii?(Oe(n,a,B),zl(n,a,B)):(jr&&v&&Xt(a),a.flags|=1,Xi(n,a,c,B),a.child)}function e_(n,a,c,v,B,V){return ji(a),a.updateQueue=null,c=we(a,v,c,B),xe(n),v=ke(),n!==null&&!Ii?(Oe(n,a,V),zl(n,a,V)):(jr&&v&&Xt(a),a.flags|=1,Xi(n,a,c,V),a.child)}function t_(n,a,c,v,B){if(ji(a),a.stateNode===null){var V=Mo,oe=c.contextType;typeof oe=="object"&&oe!==null&&(V=ws(oe)),V=new c(v,V),a.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=ug,a.stateNode=V,V._reactInternals=a,V=a.stateNode,V.props=v,V.state=a.memoizedState,V.refs={},xn(a),oe=c.contextType,V.context=typeof oe=="object"&&oe!==null?ws(oe):Mo,V.state=a.memoizedState,oe=c.getDerivedStateFromProps,typeof oe=="function"&&(lg(a,c,oe,v),V.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(oe=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),oe!==V.state&&ug.enqueueReplaceState(V,V.state,null),dn(a,v,V,B),It(),V.state=a.memoizedState),typeof V.componentDidMount=="function"&&(a.flags|=4194308),v=!0}else if(n===null){V=a.stateNode;var ye=a.memoizedProps,Ve=Wu(c,ye);V.props=Ve;var lt=V.context,Ht=c.contextType;oe=Mo,typeof Ht=="object"&&Ht!==null&&(oe=ws(Ht));var en=c.getDerivedStateFromProps;Ht=typeof en=="function"||typeof V.getSnapshotBeforeUpdate=="function",ye=a.pendingProps!==ye,Ht||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ye||lt!==oe)&&Fy(a,V,v,oe),hn=!1;var pt=a.memoizedState;V.state=pt,dn(a,v,V,B),It(),lt=a.memoizedState,ye||pt!==lt||hn?(typeof en=="function"&&(lg(a,c,en,v),lt=a.memoizedState),(Ve=hn||Uy(a,c,Ve,v,pt,lt,oe))?(Ht||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(a.flags|=4194308)):(typeof V.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=v,a.memoizedState=lt),V.props=v,V.state=lt,V.context=oe,v=Ve):(typeof V.componentDidMount=="function"&&(a.flags|=4194308),v=!1)}else{V=a.stateNode,Pe(n,a),oe=a.memoizedProps,Ht=Wu(c,oe),V.props=Ht,en=a.pendingProps,pt=V.context,lt=c.contextType,Ve=Mo,typeof lt=="object"&&lt!==null&&(Ve=ws(lt)),ye=c.getDerivedStateFromProps,(lt=typeof ye=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(oe!==en||pt!==Ve)&&Fy(a,V,v,Ve),hn=!1,pt=a.memoizedState,V.state=pt,dn(a,v,V,B),It();var vt=a.memoizedState;oe!==en||pt!==vt||hn||n!==null&&n.dependencies!==null&&ol(n.dependencies)?(typeof ye=="function"&&(lg(a,c,ye,v),vt=a.memoizedState),(Ht=hn||Uy(a,c,Ht,v,pt,vt,Ve)||n!==null&&n.dependencies!==null&&ol(n.dependencies))?(lt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(v,vt,Ve),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(v,vt,Ve)),typeof V.componentDidUpdate=="function"&&(a.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof V.componentDidUpdate!="function"||oe===n.memoizedProps&&pt===n.memoizedState||(a.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||oe===n.memoizedProps&&pt===n.memoizedState||(a.flags|=1024),a.memoizedProps=v,a.memoizedState=vt),V.props=v,V.state=vt,V.context=Ve,v=Ht):(typeof V.componentDidUpdate!="function"||oe===n.memoizedProps&&pt===n.memoizedState||(a.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||oe===n.memoizedProps&&pt===n.memoizedState||(a.flags|=1024),v=!1)}return V=v,nf(n,a),v=(a.flags&128)!==0,V||v?(V=a.stateNode,c=v&&typeof c.getDerivedStateFromError!="function"?null:V.render(),a.flags|=1,n!==null&&v?(a.child=Dd(a,n.child,null,B),a.child=Dd(a,null,c,B)):Xi(n,a,c,B),a.memoizedState=V.state,n=a.child):n=zl(n,a,B),n}function n_(n,a,c,v){return lo(),a.flags|=256,Xi(n,a,c,v),a.child}var pg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fg(n){return{baseLanes:n,cachePool:ae()}}function mg(n,a,c){return n=n!==null?n.childLanes&~c:0,a&&(n|=Rc),n}function r_(n,a,c){var v=a.pendingProps,B=!1,V=(a.flags&128)!==0,oe;if((oe=V)||(oe=n!==null&&n.memoizedState===null?!1:(Ri.current&2)!==0),oe&&(B=!0,a.flags&=-129),oe=(a.flags&32)!==0,a.flags&=-33,n===null){if(jr){if(B?hu(a):pu(),jr){var ye=ir,Ve;if(Ve=ye){e:{for(Ve=ye,ye=Ua;Ve.nodeType!==8;){if(!ye){ye=null;break e}if(Ve=Wc(Ve.nextSibling),Ve===null){ye=null;break e}}ye=Ve}ye!==null?(a.memoizedState={dehydrated:ye,treeContext:te!==null?{id:he,overflow:ze}:null,retryLane:536870912,hydrationErrors:null},Ve=Ta(18,null,null,0),Ve.stateNode=ye,Ve.return=a,a.child=Ve,Yn=a,ir=null,Ve=!0):Ve=!1}Ve||js(a)}if(ye=a.memoizedState,ye!==null&&(ye=ye.dehydrated,ye!==null))return Xg(ye)?a.lanes=32:a.lanes=536870912,null;Bl(a)}return ye=v.children,v=v.fallback,B?(pu(),B=a.mode,ye=rf({mode:"hidden",children:ye},B),v=xi(v,B,c,null),ye.return=a,v.return=a,ye.sibling=v,a.child=ye,B=a.child,B.memoizedState=fg(c),B.childLanes=mg(n,oe,c),a.memoizedState=pg,v):(hu(a),gg(a,ye))}if(Ve=n.memoizedState,Ve!==null&&(ye=Ve.dehydrated,ye!==null)){if(V)a.flags&256?(hu(a),a.flags&=-257,a=vg(n,a,c)):a.memoizedState!==null?(pu(),a.child=n.child,a.flags|=128,a=null):(pu(),B=v.fallback,ye=a.mode,v=rf({mode:"visible",children:v.children},ye),B=xi(B,ye,c,null),B.flags|=2,v.return=a,B.return=a,v.sibling=B,a.child=v,Dd(a,n.child,null,c),v=a.child,v.memoizedState=fg(c),v.childLanes=mg(n,oe,c),a.memoizedState=pg,a=B);else if(hu(a),Xg(ye)){if(oe=ye.nextSibling&&ye.nextSibling.dataset,oe)var lt=oe.dgst;oe=lt,v=Error(s(419)),v.stack="",v.digest=oe,Mi({value:v,source:null,stack:null}),a=vg(n,a,c)}else if(Ii||Io(n,a,c,!1),oe=(c&n.childLanes)!==0,Ii||oe){if(oe=ds,oe!==null&&(v=c&-c,v=(v&42)!==0?1:$t(v),v=(v&(oe.suspendedLanes|c))!==0?0:v,v!==0&&v!==Ve.retryLane))throw Ve.retryLane=v,co(n,v),ic(oe,n,v),Gy;ye.data==="$?"||jg(),a=vg(n,a,c)}else ye.data==="$?"?(a.flags|=192,a.child=n.child,a=null):(n=Ve.treeContext,ir=Wc(ye.nextSibling),Yn=a,jr=!0,ka=null,Ua=!1,n!==null&&(M[W++]=he,M[W++]=ze,M[W++]=te,he=n.id,ze=n.overflow,te=a),a=gg(a,v.children),a.flags|=4096);return a}return B?(pu(),B=v.fallback,ye=a.mode,Ve=n.child,lt=Ve.sibling,v=Ki(Ve,{mode:"hidden",children:v.children}),v.subtreeFlags=Ve.subtreeFlags&65011712,lt!==null?B=Ki(lt,B):(B=xi(B,ye,c,null),B.flags|=2),B.return=a,v.return=a,v.sibling=B,a.child=v,v=B,B=a.child,ye=n.child.memoizedState,ye===null?ye=fg(c):(Ve=ye.cachePool,Ve!==null?(lt=Ss._currentValue,Ve=Ve.parent!==lt?{parent:lt,pool:lt}:Ve):Ve=ae(),ye={baseLanes:ye.baseLanes|c,cachePool:Ve}),B.memoizedState=ye,B.childLanes=mg(n,oe,c),a.memoizedState=pg,v):(hu(a),c=n.child,n=c.sibling,c=Ki(c,{mode:"visible",children:v.children}),c.return=a,c.sibling=null,n!==null&&(oe=a.deletions,oe===null?(a.deletions=[n],a.flags|=16):oe.push(n)),a.child=c,a.memoizedState=null,c)}function gg(n,a){return a=rf({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function rf(n,a){return n=Ta(22,n,null,a),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function vg(n,a,c){return Dd(a,n.child,null,c),n=gg(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function a_(n,a,c){n.lanes|=a;var v=n.alternate;v!==null&&(v.lanes|=a),yc(n.return,a,c)}function yg(n,a,c,v,B){var V=n.memoizedState;V===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:v,tail:c,tailMode:B}:(V.isBackwards=a,V.rendering=null,V.renderingStartTime=0,V.last=v,V.tail=c,V.tailMode=B)}function s_(n,a,c){var v=a.pendingProps,B=v.revealOrder,V=v.tail;if(Xi(n,a,v.children,c),v=Ri.current,(v&2)!==0)v=v&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&a_(n,c,a);else if(n.tag===19)a_(n,c,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}v&=1}switch(Se(Ri,v),B){case"forwards":for(c=a.child,B=null;c!==null;)n=c.alternate,n!==null&&Jp(n)===null&&(B=c),c=c.sibling;c=B,c===null?(B=a.child,a.child=null):(B=c.sibling,c.sibling=null),yg(a,!1,B,c,V);break;case"backwards":for(c=null,B=a.child,a.child=null;B!==null;){if(n=B.alternate,n!==null&&Jp(n)===null){a.child=B;break}n=B.sibling,B.sibling=c,c=B,B=n}yg(a,!0,c,null,V);break;case"together":yg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function zl(n,a,c){if(n!==null&&(a.dependencies=n.dependencies),yu|=a.lanes,(c&a.childLanes)===0)if(n!==null){if(Io(n,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,c=Ki(n,n.pendingProps),a.child=c,c.return=a;n.sibling!==null;)n=n.sibling,c=c.sibling=Ki(n,n.pendingProps),c.return=a;c.sibling=null}return a.child}function _g(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&ol(n)))}function yE(n,a,c){switch(a.tag){case 3:Ye(a,a.stateNode.containerInfo),So(a,Ss,n.memoizedState.cache),lo();break;case 27:case 5:Ge(a);break;case 4:Ye(a,a.stateNode.containerInfo);break;case 10:So(a,a.type,a.memoizedProps.value);break;case 13:var v=a.memoizedState;if(v!==null)return v.dehydrated!==null?(hu(a),a.flags|=128,null):(c&a.child.childLanes)!==0?r_(n,a,c):(hu(a),n=zl(n,a,c),n!==null?n.sibling:null);hu(a);break;case 19:var B=(n.flags&128)!==0;if(v=(c&a.childLanes)!==0,v||(Io(n,a,c,!1),v=(c&a.childLanes)!==0),B){if(v)return s_(n,a,c);a.flags|=128}if(B=a.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),Se(Ri,Ri.current),v)break;return null;case 22:case 23:return a.lanes=0,Xy(n,a,c);case 24:So(a,Ss,n.memoizedState.cache)}return zl(n,a,c)}function i_(n,a,c){if(n!==null)if(n.memoizedProps!==a.pendingProps)Ii=!0;else{if(!_g(n,c)&&(a.flags&128)===0)return Ii=!1,yE(n,a,c);Ii=(n.flags&131072)!==0}else Ii=!1,jr&&(a.flags&1048576)!==0&&ht(a,h,a.index);switch(a.lanes=0,a.tag){case 16:e:{n=a.pendingProps;var v=a.elementType,B=v._init;if(v=B(v._payload),a.type=v,typeof v=="function")ec(v)?(n=Wu(v,n),a.tag=1,a=t_(null,a,v,n,c)):(a.tag=0,a=hg(null,a,v,n,c));else{if(v!=null){if(B=v.$$typeof,B===A){a.tag=11,a=Yy(null,a,v,n,c);break e}else if(B===N){a.tag=14,a=Ky(null,a,v,n,c);break e}}throw a=I(v)||v,Error(s(306,a,""))}}return a;case 0:return hg(n,a,a.type,a.pendingProps,c);case 1:return v=a.type,B=Wu(v,a.pendingProps),t_(n,a,v,B,c);case 3:e:{if(Ye(a,a.stateNode.containerInfo),n===null)throw Error(s(387));v=a.pendingProps;var V=a.memoizedState;B=V.element,Pe(n,a),dn(a,v,null,c);var oe=a.memoizedState;if(v=oe.cache,So(a,Ss,v),v!==V.cache&&Hc(a,[Ss],c,!0),It(),v=oe.element,V.isDehydrated)if(V={element:v,isDehydrated:!1,cache:oe.cache},a.updateQueue.baseState=V,a.memoizedState=V,a.flags&256){a=n_(n,a,v,c);break e}else if(v!==B){B=vs(Error(s(424)),a),Mi(B),a=n_(n,a,v,c);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ir=Wc(n.firstChild),Yn=a,jr=!0,ka=null,Ua=!0,c=By(a,null,v,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(lo(),v===B){a=zl(n,a,c);break e}Xi(n,a,v,c)}a=a.child}return a;case 26:return nf(n,a),n===null?(c=ub(a.type,null,a.pendingProps,null))?a.memoizedState=c:jr||(c=a.type,n=a.pendingProps,v=yf(Be.current).createElement(c),v[On]=a,v[Ln]=n,eo(v,c,n),Kn(v),a.stateNode=v):a.memoizedState=ub(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Ge(a),n===null&&jr&&(v=a.stateNode=ob(a.type,a.pendingProps,Be.current),Yn=a,Ua=!0,B=ir,wu(a.type)?(Jg=B,ir=Wc(v.firstChild)):ir=B),Xi(n,a,a.pendingProps.children,c),nf(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&jr&&((B=v=ir)&&(v=$E(v,a.type,a.pendingProps,Ua),v!==null?(a.stateNode=v,Yn=a,ir=Wc(v.firstChild),Ua=!1,B=!0):B=!1),B||js(a)),Ge(a),B=a.type,V=a.pendingProps,oe=n!==null?n.memoizedProps:null,v=V.children,Yg(B,V)?v=null:oe!==null&&Yg(B,oe)&&(a.flags|=32),a.memoizedState!==null&&(B=Ee(n,a,We,null,null,c),Zh._currentValue=B),nf(n,a),Xi(n,a,v,c),a.child;case 6:return n===null&&jr&&((n=c=ir)&&(c=ZE(c,a.pendingProps,Ua),c!==null?(a.stateNode=c,Yn=a,ir=null,n=!0):n=!1),n||js(a)),null;case 13:return r_(n,a,c);case 4:return Ye(a,a.stateNode.containerInfo),v=a.pendingProps,n===null?a.child=Dd(a,null,v,c):Xi(n,a,v,c),a.child;case 11:return Yy(n,a,a.type,a.pendingProps,c);case 7:return Xi(n,a,a.pendingProps,c),a.child;case 8:return Xi(n,a,a.pendingProps.children,c),a.child;case 12:return Xi(n,a,a.pendingProps.children,c),a.child;case 10:return v=a.pendingProps,So(a,a.type,v.value),Xi(n,a,v.children,c),a.child;case 9:return B=a.type._context,v=a.pendingProps.children,ji(a),B=ws(B),v=v(B),a.flags|=1,Xi(n,a,v,c),a.child;case 14:return Ky(n,a,a.type,a.pendingProps,c);case 15:return Qy(n,a,a.type,a.pendingProps,c);case 19:return s_(n,a,c);case 31:return v=a.pendingProps,c=a.mode,v={mode:v.mode,children:v.children},n===null?(c=rf(v,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=Ki(n.child,v),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return Xy(n,a,c);case 24:return ji(a),v=ws(Ss),n===null?(B=ee(),B===null&&(B=ds,V=_c(),B.pooledCache=V,V.refCount++,V!==null&&(B.pooledCacheLanes|=c),B=V),a.memoizedState={parent:v,cache:B},xn(a),So(a,Ss,B)):((n.lanes&c)!==0&&(Pe(n,a),dn(a,null,null,c),It()),B=n.memoizedState,V=a.memoizedState,B.parent!==v?(B={parent:v,cache:v},a.memoizedState=B,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=B),So(a,Ss,v)):(v=V.cache,So(a,Ss,v),v!==B.cache&&Hc(a,[Ss],c,!0))),Xi(n,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Ul(n){n.flags|=4}function o_(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!mb(a)){if(a=Sc.current,a!==null&&((Pa&4194048)===Pa?cl!==null:(Pa&62914560)!==Pa&&(Pa&536870912)===0||a!==cl))throw qt=Le,le;n.flags|=8192}}function af(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?Ha():536870912,n.lanes|=a,jd|=a)}function Ah(n,a){if(!jr)switch(n.tailMode){case"hidden":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var v=null;c!==null;)c.alternate!==null&&(v=c),c=c.sibling;v===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:v.sibling=null}}function Ls(n){var a=n.alternate!==null&&n.alternate.child===n.child,c=0,v=0;if(a)for(var B=n.child;B!==null;)c|=B.lanes|B.childLanes,v|=B.subtreeFlags&65011712,v|=B.flags&65011712,B.return=n,B=B.sibling;else for(B=n.child;B!==null;)c|=B.lanes|B.childLanes,v|=B.subtreeFlags,v|=B.flags,B.return=n,B=B.sibling;return n.subtreeFlags|=v,n.childLanes=c,a}function _E(n,a,c){var v=a.pendingProps;switch(qn(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ls(a),null;case 1:return Ls(a),null;case 3:return c=a.stateNode,v=null,n!==null&&(v=n.memoizedState.cache),a.memoizedState.cache!==v&&(a.flags|=2048),Ja(Ss),Qe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Lo(a)?Ul(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Fc())),Ls(a),null;case 26:return c=a.memoizedState,n===null?(Ul(a),c!==null?(Ls(a),o_(a,c)):(Ls(a),a.flags&=-16777217)):c?c!==n.memoizedState?(Ul(a),Ls(a),o_(a,c)):(Ls(a),a.flags&=-16777217):(n.memoizedProps!==v&&Ul(a),Ls(a),a.flags&=-16777217),null;case 27:He(a),c=Be.current;var B=a.type;if(n!==null&&a.stateNode!=null)n.memoizedProps!==v&&Ul(a);else{if(!v){if(a.stateNode===null)throw Error(s(166));return Ls(a),null}n=me.current,Lo(a)?vc(a):(n=ob(B,v,c),a.stateNode=n,Ul(a))}return Ls(a),null;case 5:if(He(a),c=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==v&&Ul(a);else{if(!v){if(a.stateNode===null)throw Error(s(166));return Ls(a),null}if(n=me.current,Lo(a))vc(a);else{switch(B=yf(Be.current),n){case 1:n=B.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:n=B.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":n=B.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":n=B.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":n=B.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof v.is=="string"?B.createElement("select",{is:v.is}):B.createElement("select"),v.multiple?n.multiple=!0:v.size&&(n.size=v.size);break;default:n=typeof v.is=="string"?B.createElement(c,{is:v.is}):B.createElement(c)}}n[On]=a,n[Ln]=v;e:for(B=a.child;B!==null;){if(B.tag===5||B.tag===6)n.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===a)break e;for(;B.sibling===null;){if(B.return===null||B.return===a)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}a.stateNode=n;e:switch(eo(n,c,v),c){case"button":case"input":case"select":case"textarea":n=!!v.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ul(a)}}return Ls(a),a.flags&=-16777217,null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==v&&Ul(a);else{if(typeof v!="string"&&a.stateNode===null)throw Error(s(166));if(n=Be.current,Lo(a)){if(n=a.stateNode,c=a.memoizedProps,v=null,B=Yn,B!==null)switch(B.tag){case 27:case 5:v=B.memoizedProps}n[On]=a,n=!!(n.nodeValue===c||v!==null&&v.suppressHydrationWarning===!0||eb(n.nodeValue,c)),n||js(a)}else n=yf(n).createTextNode(v),n[On]=a,a.stateNode=n}return Ls(a),null;case 13:if(v=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(B=Lo(a),v!==null&&v.dehydrated!==null){if(n===null){if(!B)throw Error(s(318));if(B=a.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(s(317));B[On]=a}else lo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ls(a),B=!1}else B=Fc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=B),B=!0;if(!B)return a.flags&256?(Bl(a),a):(Bl(a),null)}if(Bl(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=v!==null,n=n!==null&&n.memoizedState!==null,c){v=a.child,B=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(B=v.alternate.memoizedState.cachePool.pool);var V=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(V=v.memoizedState.cachePool.pool),V!==B&&(v.flags|=2048)}return c!==n&&c&&(a.child.flags|=8192),af(a,a.updateQueue),Ls(a),null;case 4:return Qe(),n===null&&qg(a.stateNode.containerInfo),Ls(a),null;case 10:return Ja(a.type),Ls(a),null;case 19:if(Re(Ri),B=a.memoizedState,B===null)return Ls(a),null;if(v=(a.flags&128)!==0,V=B.rendering,V===null)if(v)Ah(B,!1);else{if($s!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(V=Jp(n),V!==null){for(a.flags|=128,Ah(B,!1),n=V.updateQueue,a.updateQueue=n,af(a,n),a.subtreeFlags=0,n=c,c=a.child;c!==null;)Uc(c,n),c=c.sibling;return Se(Ri,Ri.current&1|2),a.child}n=n.sibling}B.tail!==null&&Pn()>cf&&(a.flags|=128,v=!0,Ah(B,!1),a.lanes=4194304)}else{if(!v)if(n=Jp(V),n!==null){if(a.flags|=128,v=!0,n=n.updateQueue,a.updateQueue=n,af(a,n),Ah(B,!0),B.tail===null&&B.tailMode==="hidden"&&!V.alternate&&!jr)return Ls(a),null}else 2*Pn()-B.renderingStartTime>cf&&c!==536870912&&(a.flags|=128,v=!0,Ah(B,!1),a.lanes=4194304);B.isBackwards?(V.sibling=a.child,a.child=V):(n=B.last,n!==null?n.sibling=V:a.child=V,B.last=V)}return B.tail!==null?(a=B.tail,B.rendering=a,B.tail=a.sibling,B.renderingStartTime=Pn(),a.sibling=null,n=Ri.current,Se(Ri,v?n&1|2:n&1),a):(Ls(a),null);case 22:case 23:return Bl(a),yr(),v=a.memoizedState!==null,n!==null?n.memoizedState!==null!==v&&(a.flags|=8192):v&&(a.flags|=8192),v?(c&536870912)!==0&&(a.flags&128)===0&&(Ls(a),a.subtreeFlags&6&&(a.flags|=8192)):Ls(a),c=a.updateQueue,c!==null&&af(a,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),v=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(v=a.memoizedState.cachePool.pool),v!==c&&(a.flags|=2048),n!==null&&Re(ge),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Ja(Ss),Ls(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function bE(n,a){switch(qn(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Ja(Ss),Qe(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return He(a),null;case 13:if(Bl(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));lo()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return Re(Ri),null;case 4:return Qe(),null;case 10:return Ja(a.type),null;case 22:case 23:return Bl(a),yr(),n!==null&&Re(ge),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Ja(Ss),null;case 25:return null;default:return null}}function c_(n,a){switch(qn(a),a.tag){case 3:Ja(Ss),Qe();break;case 26:case 27:case 5:He(a);break;case 4:Qe();break;case 13:Bl(a);break;case 19:Re(Ri);break;case 10:Ja(a.type);break;case 22:case 23:Bl(a),yr(),n!==null&&Re(ge);break;case 24:Ja(Ss)}}function Oh(n,a){try{var c=a.updateQueue,v=c!==null?c.lastEffect:null;if(v!==null){var B=v.next;c=B;do{if((c.tag&n)===n){v=void 0;var V=c.create,oe=c.inst;v=V(),oe.destroy=v}c=c.next}while(c!==B)}}catch(ye){os(a,a.return,ye)}}function fu(n,a,c){try{var v=a.updateQueue,B=v!==null?v.lastEffect:null;if(B!==null){var V=B.next;v=V;do{if((v.tag&n)===n){var oe=v.inst,ye=oe.destroy;if(ye!==void 0){oe.destroy=void 0,B=a;var Ve=c,lt=ye;try{lt()}catch(Ht){os(B,Ve,Ht)}}}v=v.next}while(v!==V)}}catch(Ht){os(a,a.return,Ht)}}function l_(n){var a=n.updateQueue;if(a!==null){var c=n.stateNode;try{gn(a,c)}catch(v){os(n,n.return,v)}}}function u_(n,a,c){c.props=Wu(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(v){os(n,a,v)}}function Mh(n,a){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var v=n.stateNode;break;case 30:v=n.stateNode;break;default:v=n.stateNode}typeof c=="function"?n.refCleanup=c(v):c.current=v}}catch(B){os(n,a,B)}}function ll(n,a){var c=n.ref,v=n.refCleanup;if(c!==null)if(typeof v=="function")try{v()}catch(B){os(n,a,B)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(B){os(n,a,B)}else c.current=null}function d_(n){var a=n.type,c=n.memoizedProps,v=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&v.focus();break e;case"img":c.src?v.src=c.src:c.srcSet&&(v.srcset=c.srcSet)}}catch(B){os(n,n.return,B)}}function bg(n,a,c){try{var v=n.stateNode;FE(v,n.type,c,a),v[Ln]=a}catch(B){os(n,n.return,B)}}function h_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&wu(n.type)||n.tag===4}function xg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||h_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&wu(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wg(n,a,c){var v=n.tag;if(v===5||v===6)n=n.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(n),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=vf));else if(v!==4&&(v===27&&wu(n.type)&&(c=n.stateNode,a=null),n=n.child,n!==null))for(wg(n,a,c),n=n.sibling;n!==null;)wg(n,a,c),n=n.sibling}function sf(n,a,c){var v=n.tag;if(v===5||v===6)n=n.stateNode,a?c.insertBefore(n,a):c.appendChild(n);else if(v!==4&&(v===27&&wu(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(sf(n,a,c),n=n.sibling;n!==null;)sf(n,a,c),n=n.sibling}function p_(n){var a=n.stateNode,c=n.memoizedProps;try{for(var v=n.type,B=a.attributes;B.length;)a.removeAttributeNode(B[0]);eo(a,v,c),a[On]=n,a[Ln]=c}catch(V){os(n,n.return,V)}}var Fl=!1,ti=!1,Sg=!1,f_=typeof WeakSet=="function"?WeakSet:Set,Bi=null;function xE(n,a){if(n=n.containerInfo,Zg=Rf,n=_o(n),bo(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var v=c.getSelection&&c.getSelection();if(v&&v.rangeCount!==0){c=v.anchorNode;var B=v.anchorOffset,V=v.focusNode;v=v.focusOffset;try{c.nodeType,V.nodeType}catch{c=null;break e}var oe=0,ye=-1,Ve=-1,lt=0,Ht=0,en=n,pt=null;t:for(;;){for(var vt;en!==c||B!==0&&en.nodeType!==3||(ye=oe+B),en!==V||v!==0&&en.nodeType!==3||(Ve=oe+v),en.nodeType===3&&(oe+=en.nodeValue.length),(vt=en.firstChild)!==null;)pt=en,en=vt;for(;;){if(en===n)break t;if(pt===c&&++lt===B&&(ye=oe),pt===V&&++Ht===v&&(Ve=oe),(vt=en.nextSibling)!==null)break;en=pt,pt=en.parentNode}en=vt}c=ye===-1||Ve===-1?null:{start:ye,end:Ve}}else c=null}c=c||{start:0,end:0}}else c=null;for(Gg={focusedElem:n,selectionRange:c},Rf=!1,Bi=a;Bi!==null;)if(a=Bi,n=a.child,(a.subtreeFlags&1024)!==0&&n!==null)n.return=a,Bi=n;else for(;Bi!==null;){switch(a=Bi,V=a.alternate,n=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&V!==null){n=void 0,c=a,B=V.memoizedProps,V=V.memoizedState,v=c.stateNode;try{var Wr=Wu(c.type,B,c.elementType===c.type);n=v.getSnapshotBeforeUpdate(Wr,V),v.__reactInternalSnapshotBeforeUpdate=n}catch(Br){os(c,c.return,Br)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,c=n.nodeType,c===9)Qg(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Qg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,Bi=n;break}Bi=a.return}}function m_(n,a,c){var v=c.flags;switch(c.tag){case 0:case 11:case 15:mu(n,c),v&4&&Oh(5,c);break;case 1:if(mu(n,c),v&4)if(n=c.stateNode,a===null)try{n.componentDidMount()}catch(oe){os(c,c.return,oe)}else{var B=Wu(c.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(B,a,n.__reactInternalSnapshotBeforeUpdate)}catch(oe){os(c,c.return,oe)}}v&64&&l_(c),v&512&&Mh(c,c.return);break;case 3:if(mu(n,c),v&64&&(n=c.updateQueue,n!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{gn(n,a)}catch(oe){os(c,c.return,oe)}}break;case 27:a===null&&v&4&&p_(c);case 26:case 5:mu(n,c),a===null&&v&4&&d_(c),v&512&&Mh(c,c.return);break;case 12:mu(n,c);break;case 13:mu(n,c),v&4&&y_(n,c),v&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=NE.bind(null,c),GE(n,c))));break;case 22:if(v=c.memoizedState!==null||Fl,!v){a=a!==null&&a.memoizedState!==null||ti,B=Fl;var V=ti;Fl=v,(ti=a)&&!V?gu(n,c,(c.subtreeFlags&8772)!==0):mu(n,c),Fl=B,ti=V}break;case 30:break;default:mu(n,c)}}function g_(n){var a=n.alternate;a!==null&&(n.alternate=null,g_(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Nn(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Rs=null,Bo=!1;function Hl(n,a,c){for(c=c.child;c!==null;)v_(n,a,c),c=c.sibling}function v_(n,a,c){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(un,c)}catch{}switch(c.tag){case 26:ti||ll(c,a),Hl(n,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ti||ll(c,a);var v=Rs,B=Bo;wu(c.type)&&(Rs=c.stateNode,Bo=!1),Hl(n,a,c),Vh(c.stateNode),Rs=v,Bo=B;break;case 5:ti||ll(c,a);case 6:if(v=Rs,B=Bo,Rs=null,Hl(n,a,c),Rs=v,Bo=B,Rs!==null)if(Bo)try{(Rs.nodeType===9?Rs.body:Rs.nodeName==="HTML"?Rs.ownerDocument.body:Rs).removeChild(c.stateNode)}catch(V){os(c,a,V)}else try{Rs.removeChild(c.stateNode)}catch(V){os(c,a,V)}break;case 18:Rs!==null&&(Bo?(n=Rs,sb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),Qh(n)):sb(Rs,c.stateNode));break;case 4:v=Rs,B=Bo,Rs=c.stateNode.containerInfo,Bo=!0,Hl(n,a,c),Rs=v,Bo=B;break;case 0:case 11:case 14:case 15:ti||fu(2,c,a),ti||fu(4,c,a),Hl(n,a,c);break;case 1:ti||(ll(c,a),v=c.stateNode,typeof v.componentWillUnmount=="function"&&u_(c,a,v)),Hl(n,a,c);break;case 21:Hl(n,a,c);break;case 22:ti=(v=ti)||c.memoizedState!==null,Hl(n,a,c),ti=v;break;default:Hl(n,a,c)}}function y_(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Qh(n)}catch(c){os(a,a.return,c)}}function wE(n){switch(n.tag){case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new f_),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new f_),a;default:throw Error(s(435,n.tag))}}function Rg(n,a){var c=wE(n);a.forEach(function(v){var B=DE.bind(null,n,v);c.has(v)||(c.add(v),v.then(B,B))})}function nc(n,a){var c=a.deletions;if(c!==null)for(var v=0;v<c.length;v++){var B=c[v],V=n,oe=a,ye=oe;e:for(;ye!==null;){switch(ye.tag){case 27:if(wu(ye.type)){Rs=ye.stateNode,Bo=!1;break e}break;case 5:Rs=ye.stateNode,Bo=!1;break e;case 3:case 4:Rs=ye.stateNode.containerInfo,Bo=!0;break e}ye=ye.return}if(Rs===null)throw Error(s(160));v_(V,oe,B),Rs=null,Bo=!1,V=B.alternate,V!==null&&(V.return=null),B.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)__(a,n),a=a.sibling}var qc=null;function __(n,a){var c=n.alternate,v=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:nc(a,n),rc(n),v&4&&(fu(3,n,n.return),Oh(3,n),fu(5,n,n.return));break;case 1:nc(a,n),rc(n),v&512&&(ti||c===null||ll(c,c.return)),v&64&&Fl&&(n=n.updateQueue,n!==null&&(v=n.callbacks,v!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?v:c.concat(v))));break;case 26:var B=qc;if(nc(a,n),rc(n),v&512&&(ti||c===null||ll(c,c.return)),v&4){var V=c!==null?c.memoizedState:null;if(v=n.memoizedState,c===null)if(v===null)if(n.stateNode===null){e:{v=n.type,c=n.memoizedProps,B=B.ownerDocument||B;t:switch(v){case"title":V=B.getElementsByTagName("title")[0],(!V||V[In]||V[On]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=B.createElement(v),B.head.insertBefore(V,B.querySelector("head > title"))),eo(V,v,c),V[On]=n,Kn(V),v=V;break e;case"link":var oe=pb("link","href",B).get(v+(c.href||""));if(oe){for(var ye=0;ye<oe.length;ye++)if(V=oe[ye],V.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&V.getAttribute("rel")===(c.rel==null?null:c.rel)&&V.getAttribute("title")===(c.title==null?null:c.title)&&V.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){oe.splice(ye,1);break t}}V=B.createElement(v),eo(V,v,c),B.head.appendChild(V);break;case"meta":if(oe=pb("meta","content",B).get(v+(c.content||""))){for(ye=0;ye<oe.length;ye++)if(V=oe[ye],V.getAttribute("content")===(c.content==null?null:""+c.content)&&V.getAttribute("name")===(c.name==null?null:c.name)&&V.getAttribute("property")===(c.property==null?null:c.property)&&V.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&V.getAttribute("charset")===(c.charSet==null?null:c.charSet)){oe.splice(ye,1);break t}}V=B.createElement(v),eo(V,v,c),B.head.appendChild(V);break;default:throw Error(s(468,v))}V[On]=n,Kn(V),v=V}n.stateNode=v}else fb(B,n.type,n.stateNode);else n.stateNode=hb(B,v,n.memoizedProps);else V!==v?(V===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):V.count--,v===null?fb(B,n.type,n.stateNode):hb(B,v,n.memoizedProps)):v===null&&n.stateNode!==null&&bg(n,n.memoizedProps,c.memoizedProps)}break;case 27:nc(a,n),rc(n),v&512&&(ti||c===null||ll(c,c.return)),c!==null&&v&4&&bg(n,n.memoizedProps,c.memoizedProps);break;case 5:if(nc(a,n),rc(n),v&512&&(ti||c===null||ll(c,c.return)),n.flags&32){B=n.stateNode;try{Ps(B,"")}catch(vt){os(n,n.return,vt)}}v&4&&n.stateNode!=null&&(B=n.memoizedProps,bg(n,B,c!==null?c.memoizedProps:B)),v&1024&&(Sg=!0);break;case 6:if(nc(a,n),rc(n),v&4){if(n.stateNode===null)throw Error(s(162));v=n.memoizedProps,c=n.stateNode;try{c.nodeValue=v}catch(vt){os(n,n.return,vt)}}break;case 3:if(xf=null,B=qc,qc=_f(a.containerInfo),nc(a,n),qc=B,rc(n),v&4&&c!==null&&c.memoizedState.isDehydrated)try{Qh(a.containerInfo)}catch(vt){os(n,n.return,vt)}Sg&&(Sg=!1,b_(n));break;case 4:v=qc,qc=_f(n.stateNode.containerInfo),nc(a,n),rc(n),qc=v;break;case 12:nc(a,n),rc(n);break;case 13:nc(a,n),rc(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ng=Pn()),v&4&&(v=n.updateQueue,v!==null&&(n.updateQueue=null,Rg(n,v)));break;case 22:B=n.memoizedState!==null;var Ve=c!==null&&c.memoizedState!==null,lt=Fl,Ht=ti;if(Fl=lt||B,ti=Ht||Ve,nc(a,n),ti=Ht,Fl=lt,rc(n),v&8192)e:for(a=n.stateNode,a._visibility=B?a._visibility&-2:a._visibility|1,B&&(c===null||Ve||Fl||ti||$u(n)),c=null,a=n;;){if(a.tag===5||a.tag===26){if(c===null){Ve=c=a;try{if(V=Ve.stateNode,B)oe=V.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{ye=Ve.stateNode;var en=Ve.memoizedProps.style,pt=en!=null&&en.hasOwnProperty("display")?en.display:null;ye.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(vt){os(Ve,Ve.return,vt)}}}else if(a.tag===6){if(c===null){Ve=a;try{Ve.stateNode.nodeValue=B?"":Ve.memoizedProps}catch(vt){os(Ve,Ve.return,vt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}v&4&&(v=n.updateQueue,v!==null&&(c=v.retryQueue,c!==null&&(v.retryQueue=null,Rg(n,c))));break;case 19:nc(a,n),rc(n),v&4&&(v=n.updateQueue,v!==null&&(n.updateQueue=null,Rg(n,v)));break;case 30:break;case 21:break;default:nc(a,n),rc(n)}}function rc(n){var a=n.flags;if(a&2){try{for(var c,v=n.return;v!==null;){if(h_(v)){c=v;break}v=v.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var B=c.stateNode,V=xg(n);sf(n,V,B);break;case 5:var oe=c.stateNode;c.flags&32&&(Ps(oe,""),c.flags&=-33);var ye=xg(n);sf(n,ye,oe);break;case 3:case 4:var Ve=c.stateNode.containerInfo,lt=xg(n);wg(n,lt,Ve);break;default:throw Error(s(161))}}catch(Ht){os(n,n.return,Ht)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function b_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;b_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function mu(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)m_(n,a.alternate,a),a=a.sibling}function $u(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:fu(4,a,a.return),$u(a);break;case 1:ll(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&u_(a,a.return,c),$u(a);break;case 27:Vh(a.stateNode);case 26:case 5:ll(a,a.return),$u(a);break;case 22:a.memoizedState===null&&$u(a);break;case 30:$u(a);break;default:$u(a)}n=n.sibling}}function gu(n,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var v=a.alternate,B=n,V=a,oe=V.flags;switch(V.tag){case 0:case 11:case 15:gu(B,V,c),Oh(4,V);break;case 1:if(gu(B,V,c),v=V,B=v.stateNode,typeof B.componentDidMount=="function")try{B.componentDidMount()}catch(lt){os(v,v.return,lt)}if(v=V,B=v.updateQueue,B!==null){var ye=v.stateNode;try{var Ve=B.shared.hiddenCallbacks;if(Ve!==null)for(B.shared.hiddenCallbacks=null,B=0;B<Ve.length;B++)Yt(Ve[B],ye)}catch(lt){os(v,v.return,lt)}}c&&oe&64&&l_(V),Mh(V,V.return);break;case 27:p_(V);case 26:case 5:gu(B,V,c),c&&v===null&&oe&4&&d_(V),Mh(V,V.return);break;case 12:gu(B,V,c);break;case 13:gu(B,V,c),c&&oe&4&&y_(B,V);break;case 22:V.memoizedState===null&&gu(B,V,c),Mh(V,V.return);break;case 30:break;default:gu(B,V,c)}a=a.sibling}}function Eg(n,a){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&bc(c))}function kg(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&bc(n))}function ul(n,a,c,v){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)x_(n,a,c,v),a=a.sibling}function x_(n,a,c,v){var B=a.flags;switch(a.tag){case 0:case 11:case 15:ul(n,a,c,v),B&2048&&Oh(9,a);break;case 1:ul(n,a,c,v);break;case 3:ul(n,a,c,v),B&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&bc(n)));break;case 12:if(B&2048){ul(n,a,c,v),n=a.stateNode;try{var V=a.memoizedProps,oe=V.id,ye=V.onPostCommit;typeof ye=="function"&&ye(oe,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Ve){os(a,a.return,Ve)}}else ul(n,a,c,v);break;case 13:ul(n,a,c,v);break;case 23:break;case 22:V=a.stateNode,oe=a.alternate,a.memoizedState!==null?V._visibility&2?ul(n,a,c,v):jh(n,a):V._visibility&2?ul(n,a,c,v):(V._visibility|=2,Ad(n,a,c,v,(a.subtreeFlags&10256)!==0)),B&2048&&Eg(oe,a);break;case 24:ul(n,a,c,v),B&2048&&kg(a.alternate,a);break;default:ul(n,a,c,v)}}function Ad(n,a,c,v,B){for(B=B&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var V=n,oe=a,ye=c,Ve=v,lt=oe.flags;switch(oe.tag){case 0:case 11:case 15:Ad(V,oe,ye,Ve,B),Oh(8,oe);break;case 23:break;case 22:var Ht=oe.stateNode;oe.memoizedState!==null?Ht._visibility&2?Ad(V,oe,ye,Ve,B):jh(V,oe):(Ht._visibility|=2,Ad(V,oe,ye,Ve,B)),B&&lt&2048&&Eg(oe.alternate,oe);break;case 24:Ad(V,oe,ye,Ve,B),B&&lt&2048&&kg(oe.alternate,oe);break;default:Ad(V,oe,ye,Ve,B)}a=a.sibling}}function jh(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=n,v=a,B=v.flags;switch(v.tag){case 22:jh(c,v),B&2048&&Eg(v.alternate,v);break;case 24:jh(c,v),B&2048&&kg(v.alternate,v);break;default:jh(c,v)}a=a.sibling}}var Lh=8192;function Od(n){if(n.subtreeFlags&Lh)for(n=n.child;n!==null;)w_(n),n=n.sibling}function w_(n){switch(n.tag){case 26:Od(n),n.flags&Lh&&n.memoizedState!==null&&ok(qc,n.memoizedState,n.memoizedProps);break;case 5:Od(n);break;case 3:case 4:var a=qc;qc=_f(n.stateNode.containerInfo),Od(n),qc=a;break;case 22:n.memoizedState===null&&(a=n.alternate,a!==null&&a.memoizedState!==null?(a=Lh,Lh=16777216,Od(n),Lh=a):Od(n));break;default:Od(n)}}function S_(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function Ih(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var v=a[c];Bi=v,E_(v,n)}S_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)R_(n),n=n.sibling}function R_(n){switch(n.tag){case 0:case 11:case 15:Ih(n),n.flags&2048&&fu(9,n,n.return);break;case 3:Ih(n);break;case 12:Ih(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,of(n)):Ih(n);break;default:Ih(n)}}function of(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var v=a[c];Bi=v,E_(v,n)}S_(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:fu(8,a,a.return),of(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,of(a));break;default:of(a)}n=n.sibling}}function E_(n,a){for(;Bi!==null;){var c=Bi;switch(c.tag){case 0:case 11:case 15:fu(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var v=c.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:bc(c.memoizedState.cache)}if(v=c.child,v!==null)v.return=c,Bi=v;else e:for(c=n;Bi!==null;){v=Bi;var B=v.sibling,V=v.return;if(g_(v),v===c){Bi=null;break e}if(B!==null){B.return=V,Bi=B;break e}Bi=V}}}var SE={getCacheForType:function(n){var a=ws(Ss),c=a.data.get(n);return c===void 0&&(c=n(),a.data.set(n,c)),c}},RE=typeof WeakMap=="function"?WeakMap:Map,Ya=0,ds=null,_a=null,Pa=0,Ka=0,ac=null,vu=!1,Md=!1,Cg=!1,Vl=0,$s=0,yu=0,Zu=0,Tg=0,Rc=0,jd=0,Bh=null,zo=null,Pg=!1,Ng=0,cf=1/0,lf=null,_u=null,Ji=0,bu=null,Ld=null,Id=0,Dg=0,Ag=null,k_=null,zh=0,Og=null;function sc(){if((Ya&2)!==0&&Pa!==0)return Pa&-Pa;if(F.T!==null){var n=wc;return n!==0?n:Ug()}return sn()}function C_(){Rc===0&&(Rc=(Pa&536870912)===0||jr?jn():536870912);var n=Sc.current;return n!==null&&(n.flags|=32),Rc}function ic(n,a,c){(n===ds&&(Ka===2||Ka===9)||n.cancelPendingCommit!==null)&&(Bd(n,0),xu(n,Pa,Rc,!1)),Qr(n,c),((Ya&2)===0||n!==ds)&&(n===ds&&((Ya&2)===0&&(Zu|=c),$s===4&&xu(n,Pa,Rc,!1)),dl(n))}function T_(n,a,c){if((Ya&6)!==0)throw Error(s(327));var v=!c&&(a&124)===0&&(a&n.expiredLanes)===0||ra(n,a),B=v?CE(n,a):Lg(n,a,!0),V=v;do{if(B===0){Md&&!v&&xu(n,a,0,!1);break}else{if(c=n.current.alternate,V&&!EE(c)){B=Lg(n,a,!1),V=!1;continue}if(B===2){if(V=a,n.errorRecoveryDisabledLanes&V)var oe=0;else oe=n.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){a=oe;e:{var ye=n;B=Bh;var Ve=ye.current.memoizedState.isDehydrated;if(Ve&&(Bd(ye,oe).flags|=256),oe=Lg(ye,oe,!1),oe!==2){if(Cg&&!Ve){ye.errorRecoveryDisabledLanes|=V,Zu|=V,B=4;break e}V=zo,zo=B,V!==null&&(zo===null?zo=V:zo.push.apply(zo,V))}B=oe}if(V=!1,B!==2)continue}}if(B===1){Bd(n,0),xu(n,a,0,!0);break}e:{switch(v=n,V=B,V){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:xu(v,a,Rc,!vu);break e;case 2:zo=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(B=Ng+300-Pn(),10<B)){if(xu(v,a,Rc,!vu),va(v,0,!0)!==0)break e;v.timeoutHandle=rb(P_.bind(null,v,c,zo,lf,Pg,a,Rc,Zu,jd,vu,V,2,-0,0),B);break e}P_(v,c,zo,lf,Pg,a,Rc,Zu,jd,vu,V,0,-0,0)}}break}while(!0);dl(n)}function P_(n,a,c,v,B,V,oe,ye,Ve,lt,Ht,en,pt,vt){if(n.timeoutHandle=-1,en=a.subtreeFlags,(en&8192||(en&16785408)===16785408)&&($h={stylesheets:null,count:0,unsuspend:ik},w_(a),en=ck(),en!==null)){n.cancelPendingCommit=en(L_.bind(null,n,a,V,c,v,B,oe,ye,Ve,Ht,1,pt,vt)),xu(n,V,oe,!lt);return}L_(n,a,V,c,v,B,oe,ye,Ve)}function EE(n){for(var a=n;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var v=0;v<c.length;v++){var B=c[v],V=B.getSnapshot;B=B.value;try{if(!pa(V(),B))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function xu(n,a,c,v){a&=~Tg,a&=~Zu,n.suspendedLanes|=a,n.pingedLanes&=~a,v&&(n.warmLanes|=a),v=n.expirationTimes;for(var B=a;0<B;){var V=31-nr(B),oe=1<<V;v[V]=-1,B&=~oe}c!==0&&rt(n,c,a)}function uf(){return(Ya&6)===0?(Uh(0),!1):!0}function Mg(){if(_a!==null){if(Ka===0)var n=_a.return;else n=_a,uo=Si=null,Xe(n),Nd=null,Nh=0,n=_a;for(;n!==null;)c_(n.alternate,n),n=n.return;_a=null}}function Bd(n,a){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,VE(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),Mg(),ds=n,_a=c=Ki(n.current,null),Pa=a,Ka=0,ac=null,vu=!1,Md=ra(n,a),Cg=!1,jd=Rc=Tg=Zu=yu=$s=0,zo=Bh=null,Pg=!1,(a&8)!==0&&(a|=a&32);var v=n.entangledLanes;if(v!==0)for(n=n.entanglements,v&=a;0<v;){var B=31-nr(v),V=1<<B;a|=n[B],v&=~V}return Vl=a,Oo(),c}function N_(n,a){Dt=null,F.H=Kp,a===ie||a===De?(a=bn(),Ka=3):a===le?(a=bn(),Ka=4):Ka=a===Gy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ac=a,_a===null&&($s=1,tf(n,vs(a,n.current)))}function D_(){var n=F.H;return F.H=Kp,n===null?Kp:n}function A_(){var n=F.A;return F.A=SE,n}function jg(){$s=4,vu||(Pa&4194048)!==Pa&&Sc.current!==null||(Md=!0),(yu&134217727)===0&&(Zu&134217727)===0||ds===null||xu(ds,Pa,Rc,!1)}function Lg(n,a,c){var v=Ya;Ya|=2;var B=D_(),V=A_();(ds!==n||Pa!==a)&&(lf=null,Bd(n,a)),a=!1;var oe=$s;e:do try{if(Ka!==0&&_a!==null){var ye=_a,Ve=ac;switch(Ka){case 8:Mg(),oe=6;break e;case 3:case 2:case 9:case 6:Sc.current===null&&(a=!0);var lt=Ka;if(Ka=0,ac=null,zd(n,ye,Ve,lt),c&&Md){oe=0;break e}break;default:lt=Ka,Ka=0,ac=null,zd(n,ye,Ve,lt)}}kE(),oe=$s;break}catch(Ht){N_(n,Ht)}while(!0);return a&&n.shellSuspendCounter++,uo=Si=null,Ya=v,F.H=B,F.A=V,_a===null&&(ds=null,Pa=0,Oo()),oe}function kE(){for(;_a!==null;)O_(_a)}function CE(n,a){var c=Ya;Ya|=2;var v=D_(),B=A_();ds!==n||Pa!==a?(lf=null,cf=Pn()+500,Bd(n,a)):Md=ra(n,a);e:do try{if(Ka!==0&&_a!==null){a=_a;var V=ac;t:switch(Ka){case 1:Ka=0,ac=null,zd(n,a,V,1);break;case 2:case 9:if(Ue(V)){Ka=0,ac=null,M_(a);break}a=function(){Ka!==2&&Ka!==9||ds!==n||(Ka=7),dl(n)},V.then(a,a);break e;case 3:Ka=7;break e;case 4:Ka=5;break e;case 7:Ue(V)?(Ka=0,ac=null,M_(a)):(Ka=0,ac=null,zd(n,a,V,7));break;case 5:var oe=null;switch(_a.tag){case 26:oe=_a.memoizedState;case 5:case 27:var ye=_a;if(!oe||mb(oe)){Ka=0,ac=null;var Ve=ye.sibling;if(Ve!==null)_a=Ve;else{var lt=ye.return;lt!==null?(_a=lt,df(lt)):_a=null}break t}}Ka=0,ac=null,zd(n,a,V,5);break;case 6:Ka=0,ac=null,zd(n,a,V,6);break;case 8:Mg(),$s=6;break e;default:throw Error(s(462))}}TE();break}catch(Ht){N_(n,Ht)}while(!0);return uo=Si=null,F.H=v,F.A=B,Ya=c,_a!==null?0:(ds=null,Pa=0,Oo(),$s)}function TE(){for(;_a!==null&&!on();)O_(_a)}function O_(n){var a=i_(n.alternate,n,Vl);n.memoizedProps=n.pendingProps,a===null?df(n):_a=a}function M_(n){var a=n,c=a.alternate;switch(a.tag){case 15:case 0:a=e_(c,a,a.pendingProps,a.type,void 0,Pa);break;case 11:a=e_(c,a,a.pendingProps,a.type.render,a.ref,Pa);break;case 5:Xe(a);default:c_(c,a),a=_a=Uc(a,Vl),a=i_(c,a,Vl)}n.memoizedProps=n.pendingProps,a===null?df(n):_a=a}function zd(n,a,c,v){uo=Si=null,Xe(a),Nd=null,Nh=0;var B=a.return;try{if(vE(n,B,a,c,Pa)){$s=1,tf(n,vs(c,n.current)),_a=null;return}}catch(V){if(B!==null)throw _a=B,V;$s=1,tf(n,vs(c,n.current)),_a=null;return}a.flags&32768?(jr||v===1?n=!0:Md||(Pa&536870912)!==0?n=!1:(vu=n=!0,(v===2||v===9||v===3||v===6)&&(v=Sc.current,v!==null&&v.tag===13&&(v.flags|=16384))),j_(a,n)):df(a)}function df(n){var a=n;do{if((a.flags&32768)!==0){j_(a,vu);return}n=a.return;var c=_E(a.alternate,a,Vl);if(c!==null){_a=c;return}if(a=a.sibling,a!==null){_a=a;return}_a=a=n}while(a!==null);$s===0&&($s=5)}function j_(n,a){do{var c=bE(n.alternate,n);if(c!==null){c.flags&=32767,_a=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(n=n.sibling,n!==null)){_a=n;return}_a=n=c}while(n!==null);$s=6,_a=null}function L_(n,a,c,v,B,V,oe,ye,Ve){n.cancelPendingCommit=null;do hf();while(Ji!==0);if((Ya&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(V=a.lanes|a.childLanes,V|=fi,gr(n,c,V,oe,ye,Ve),n===ds&&(_a=ds=null,Pa=0),Ld=a,bu=n,Id=c,Dg=V,Ag=B,k_=v,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,AE(Me,function(){return F_(),null})):(n.callbackNode=null,n.callbackPriority=0),v=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||v){v=F.T,F.T=null,B=$.p,$.p=2,oe=Ya,Ya|=4;try{xE(n,a,c)}finally{Ya=oe,$.p=B,F.T=v}}Ji=1,I_(),B_(),z_()}}function I_(){if(Ji===1){Ji=0;var n=bu,a=Ld,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=F.T,F.T=null;var v=$.p;$.p=2;var B=Ya;Ya|=4;try{__(a,n);var V=Gg,oe=_o(n.containerInfo),ye=V.focusedElem,Ve=V.selectionRange;if(oe!==ye&&ye&&ye.ownerDocument&&bi(ye.ownerDocument.documentElement,ye)){if(Ve!==null&&bo(ye)){var lt=Ve.start,Ht=Ve.end;if(Ht===void 0&&(Ht=lt),"selectionStart"in ye)ye.selectionStart=lt,ye.selectionEnd=Math.min(Ht,ye.value.length);else{var en=ye.ownerDocument||document,pt=en&&en.defaultView||window;if(pt.getSelection){var vt=pt.getSelection(),Wr=ye.textContent.length,Br=Math.min(Ve.start,Wr),ts=Ve.end===void 0?Br:Math.min(Ve.end,Wr);!vt.extend&&Br>ts&&(oe=ts,ts=Br,Br=oe);var st=Zi(ye,Br),Je=Zi(ye,ts);if(st&&Je&&(vt.rangeCount!==1||vt.anchorNode!==st.node||vt.anchorOffset!==st.offset||vt.focusNode!==Je.node||vt.focusOffset!==Je.offset)){var ot=en.createRange();ot.setStart(st.node,st.offset),vt.removeAllRanges(),Br>ts?(vt.addRange(ot),vt.extend(Je.node,Je.offset)):(ot.setEnd(Je.node,Je.offset),vt.addRange(ot))}}}}for(en=[],vt=ye;vt=vt.parentNode;)vt.nodeType===1&&en.push({element:vt,left:vt.scrollLeft,top:vt.scrollTop});for(typeof ye.focus=="function"&&ye.focus(),ye=0;ye<en.length;ye++){var Zt=en[ye];Zt.element.scrollLeft=Zt.left,Zt.element.scrollTop=Zt.top}}Rf=!!Zg,Gg=Zg=null}finally{Ya=B,$.p=v,F.T=c}}n.current=a,Ji=2}}function B_(){if(Ji===2){Ji=0;var n=bu,a=Ld,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=F.T,F.T=null;var v=$.p;$.p=2;var B=Ya;Ya|=4;try{m_(n,a.alternate,a)}finally{Ya=B,$.p=v,F.T=c}}Ji=3}}function z_(){if(Ji===4||Ji===3){Ji=0,ln();var n=bu,a=Ld,c=Id,v=k_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ji=5:(Ji=0,Ld=bu=null,U_(n,n.pendingLanes));var B=n.pendingLanes;if(B===0&&(_u=null),Tt(c),a=a.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(un,a,void 0,(a.current.flags&128)===128)}catch{}if(v!==null){a=F.T,B=$.p,$.p=2,F.T=null;try{for(var V=n.onRecoverableError,oe=0;oe<v.length;oe++){var ye=v[oe];V(ye.value,{componentStack:ye.stack})}}finally{F.T=a,$.p=B}}(Id&3)!==0&&hf(),dl(n),B=n.pendingLanes,(c&4194090)!==0&&(B&42)!==0?n===Og?zh++:(zh=0,Og=n):zh=0,Uh(0)}}function U_(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,bc(a)))}function hf(n){return I_(),B_(),z_(),F_()}function F_(){if(Ji!==5)return!1;var n=bu,a=Dg;Dg=0;var c=Tt(Id),v=F.T,B=$.p;try{$.p=32>c?32:c,F.T=null,c=Ag,Ag=null;var V=bu,oe=Id;if(Ji=0,Ld=bu=null,Id=0,(Ya&6)!==0)throw Error(s(331));var ye=Ya;if(Ya|=4,R_(V.current),x_(V,V.current,oe,c),Ya=ye,Uh(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(un,V)}catch{}return!0}finally{$.p=B,F.T=v,U_(n,a)}}function H_(n,a,c){a=vs(c,a),a=dg(n.stateNode,a,2),n=Ot(n,a,2),n!==null&&(Qr(n,2),dl(n))}function os(n,a,c){if(n.tag===3)H_(n,n,c);else for(;a!==null;){if(a.tag===3){H_(a,n,c);break}else if(a.tag===1){var v=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(_u===null||!_u.has(v))){n=vs(c,n),c=$y(2),v=Ot(a,c,2),v!==null&&(Zy(c,v,a,n),Qr(v,2),dl(v));break}}a=a.return}}function Ig(n,a,c){var v=n.pingCache;if(v===null){v=n.pingCache=new RE;var B=new Set;v.set(a,B)}else B=v.get(a),B===void 0&&(B=new Set,v.set(a,B));B.has(c)||(Cg=!0,B.add(c),n=PE.bind(null,n,a,c),a.then(n,n))}function PE(n,a,c){var v=n.pingCache;v!==null&&v.delete(a),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,ds===n&&(Pa&c)===c&&($s===4||$s===3&&(Pa&62914560)===Pa&&300>Pn()-Ng?(Ya&2)===0&&Bd(n,0):Tg|=c,jd===Pa&&(jd=0)),dl(n)}function V_(n,a){a===0&&(a=Ha()),n=co(n,a),n!==null&&(Qr(n,a),dl(n))}function NE(n){var a=n.memoizedState,c=0;a!==null&&(c=a.retryLane),V_(n,c)}function DE(n,a){var c=0;switch(n.tag){case 13:var v=n.stateNode,B=n.memoizedState;B!==null&&(c=B.retryLane);break;case 19:v=n.stateNode;break;case 22:v=n.stateNode._retryCache;break;default:throw Error(s(314))}v!==null&&v.delete(a),V_(n,c)}function AE(n,a){return dt(n,a)}var pf=null,Ud=null,Bg=!1,ff=!1,zg=!1,Gu=0;function dl(n){n!==Ud&&n.next===null&&(Ud===null?pf=Ud=n:Ud=Ud.next=n),ff=!0,Bg||(Bg=!0,ME())}function Uh(n,a){if(!zg&&ff){zg=!0;do for(var c=!1,v=pf;v!==null;){if(n!==0){var B=v.pendingLanes;if(B===0)var V=0;else{var oe=v.suspendedLanes,ye=v.pingedLanes;V=(1<<31-nr(42|n)+1)-1,V&=B&~(oe&~ye),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(c=!0,Z_(v,V))}else V=Pa,V=va(v,v===ds?V:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(V&3)===0||ra(v,V)||(c=!0,Z_(v,V));v=v.next}while(c);zg=!1}}function OE(){q_()}function q_(){ff=Bg=!1;var n=0;Gu!==0&&(HE()&&(n=Gu),Gu=0);for(var a=Pn(),c=null,v=pf;v!==null;){var B=v.next,V=W_(v,a);V===0?(v.next=null,c===null?pf=B:c.next=B,B===null&&(Ud=c)):(c=v,(n!==0||(V&3)!==0)&&(ff=!0)),v=B}Uh(n)}function W_(n,a){for(var c=n.suspendedLanes,v=n.pingedLanes,B=n.expirationTimes,V=n.pendingLanes&-62914561;0<V;){var oe=31-nr(V),ye=1<<oe,Ve=B[oe];Ve===-1?((ye&c)===0||(ye&v)!==0)&&(B[oe]=ua(ye,a)):Ve<=a&&(n.expiredLanes|=ye),V&=~ye}if(a=ds,c=Pa,c=va(n,n===a?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),v=n.callbackNode,c===0||n===a&&(Ka===2||Ka===9)||n.cancelPendingCommit!==null)return v!==null&&v!==null&&yt(v),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||ra(n,c)){if(a=c&-c,a===n.callbackPriority)return a;switch(v!==null&&yt(v),Tt(c)){case 2:case 8:c=Ne;break;case 32:c=Me;break;case 268435456:c=Ft;break;default:c=Me}return v=$_.bind(null,n),c=dt(c,v),n.callbackPriority=a,n.callbackNode=c,a}return v!==null&&v!==null&&yt(v),n.callbackPriority=2,n.callbackNode=null,2}function $_(n,a){if(Ji!==0&&Ji!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(hf()&&n.callbackNode!==c)return null;var v=Pa;return v=va(n,n===ds?v:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),v===0?null:(T_(n,v,a),W_(n,Pn()),n.callbackNode!=null&&n.callbackNode===c?$_.bind(null,n):null)}function Z_(n,a){if(hf())return null;T_(n,a,!0)}function ME(){qE(function(){(Ya&6)!==0?dt(rn,OE):q_()})}function Ug(){return Gu===0&&(Gu=jn()),Gu}function G_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Hi(""+n)}function Y_(n,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,n.id&&c.setAttribute("form",n.id),a.parentNode.insertBefore(c,a),n=new FormData(n),c.parentNode.removeChild(c),n}function jE(n,a,c,v,B){if(a==="submit"&&c&&c.stateNode===B){var V=G_((B[Ln]||null).action),oe=v.submitter;oe&&(a=(a=oe[Ln]||null)?G_(a.formAction):oe.getAttribute("formAction"),a!==null&&(V=a,oe=null));var ye=new go("action","action",null,v,B);n.push({event:ye,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Gu!==0){var Ve=oe?Y_(B,oe):new FormData(B);Cd(c,{pending:!0,data:Ve,method:B.method,action:V},null,Ve)}}else typeof V=="function"&&(ye.preventDefault(),Ve=oe?Y_(B,oe):new FormData(B),Cd(c,{pending:!0,data:Ve,method:B.method,action:V},V,Ve))},currentTarget:B}]})}}for(var Fg=0;Fg<qs.length;Fg++){var Hg=qs[Fg],LE=Hg.toLowerCase(),IE=Hg[0].toUpperCase()+Hg.slice(1);As(LE,"on"+IE)}As(fc,"onAnimationEnd"),As(pi,"onAnimationIteration"),As(Yi,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(il,"onTransitionRun"),As(Qo,"onTransitionStart"),As(mc,"onTransitionCancel"),As(Ao,"onTransitionEnd"),Va("onMouseEnter",["mouseout","mouseover"]),Va("onMouseLeave",["mouseout","mouseover"]),Va("onPointerEnter",["pointerout","pointerover"]),Va("onPointerLeave",["pointerout","pointerover"]),La("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),La("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),La("onBeforeInput",["compositionend","keypress","textInput","paste"]),La("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),La("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),La("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fh));function K_(n,a){a=(a&4)!==0;for(var c=0;c<n.length;c++){var v=n[c],B=v.event;v=v.listeners;e:{var V=void 0;if(a)for(var oe=v.length-1;0<=oe;oe--){var ye=v[oe],Ve=ye.instance,lt=ye.currentTarget;if(ye=ye.listener,Ve!==V&&B.isPropagationStopped())break e;V=ye,B.currentTarget=lt;try{V(B)}catch(Ht){ef(Ht)}B.currentTarget=null,V=Ve}else for(oe=0;oe<v.length;oe++){if(ye=v[oe],Ve=ye.instance,lt=ye.currentTarget,ye=ye.listener,Ve!==V&&B.isPropagationStopped())break e;V=ye,B.currentTarget=lt;try{V(B)}catch(Ht){ef(Ht)}B.currentTarget=null,V=Ve}}}}function ba(n,a){var c=a[vr];c===void 0&&(c=a[vr]=new Set);var v=n+"__bubble";c.has(v)||(Q_(a,n,2,!1),c.add(v))}function Vg(n,a,c){var v=0;a&&(v|=4),Q_(c,n,v,a)}var mf="_reactListening"+Math.random().toString(36).slice(2);function qg(n){if(!n[mf]){n[mf]=!0,xa.forEach(function(c){c!=="selectionchange"&&(BE.has(c)||Vg(c,!1,n),Vg(c,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[mf]||(a[mf]=!0,Vg("selectionchange",!1,a))}}function Q_(n,a,c,v){switch(xb(a)){case 2:var B=dk;break;case 8:B=hk;break;default:B=av}c=B.bind(null,a,c,n),B=void 0,!so||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(B=!0),v?B!==void 0?n.addEventListener(a,c,{capture:!0,passive:B}):n.addEventListener(a,c,!0):B!==void 0?n.addEventListener(a,c,{passive:B}):n.addEventListener(a,c,!1)}function Wg(n,a,c,v,B){var V=v;if((a&1)===0&&(a&2)===0&&v!==null)e:for(;;){if(v===null)return;var oe=v.tag;if(oe===3||oe===4){var ye=v.stateNode.containerInfo;if(ye===B)break;if(oe===4)for(oe=v.return;oe!==null;){var Ve=oe.tag;if((Ve===3||Ve===4)&&oe.stateNode.containerInfo===B)return;oe=oe.return}for(;ye!==null;){if(oe=Fr(ye),oe===null)return;if(Ve=oe.tag,Ve===5||Ve===6||Ve===26||Ve===27){v=V=oe;continue e}ye=ye.parentNode}}v=v.return}Hs(function(){var lt=V,Ht=Ni(c),en=[];e:{var pt=Xo.get(n);if(pt!==void 0){var vt=go,Wr=n;switch(n){case"keypress":if(qa(c)===0)break e;case"keydown":case"keyup":vt=vo;break;case"focusin":Wr="focus",vt=fn;break;case"focusout":Wr="blur",vt=fn;break;case"beforeblur":case"afterblur":vt=fn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vt=qi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vt=Yo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vt=Pl;break;case fc:case pi:case Yi:vt=At;break;case Ao:vt=Vs;break;case"scroll":case"scrollend":vt=Oc;break;case"wheel":vt=jc;break;case"copy":case"cut":case"paste":vt=ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vt=yo;break;case"toggle":case"beforetoggle":vt=Co}var Br=(a&4)!==0,ts=!Br&&(n==="scroll"||n==="scrollend"),st=Br?pt!==null?pt+"Capture":null:pt;Br=[];for(var Je=lt,ot;Je!==null;){var Zt=Je;if(ot=Zt.stateNode,Zt=Zt.tag,Zt!==5&&Zt!==26&&Zt!==27||ot===null||st===null||(Zt=da(Je,st),Zt!=null&&Br.push(Hh(Je,Zt,ot))),ts)break;Je=Je.return}0<Br.length&&(pt=new vt(pt,Wr,null,c,Ht),en.push({event:pt,listeners:Br}))}}if((a&7)===0){e:{if(pt=n==="mouseover"||n==="pointerover",vt=n==="mouseout"||n==="pointerout",pt&&c!==ao&&(Wr=c.relatedTarget||c.fromElement)&&(Fr(Wr)||Wr[Xn]))break e;if((vt||pt)&&(pt=Ht.window===Ht?Ht:(pt=Ht.ownerDocument)?pt.defaultView||pt.parentWindow:window,vt?(Wr=c.relatedTarget||c.toElement,vt=lt,Wr=Wr?Fr(Wr):null,Wr!==null&&(ts=d(Wr),Br=Wr.tag,Wr!==ts||Br!==5&&Br!==27&&Br!==6)&&(Wr=null)):(vt=null,Wr=lt),vt!==Wr)){if(Br=qi,Zt="onMouseLeave",st="onMouseEnter",Je="mouse",(n==="pointerout"||n==="pointerover")&&(Br=yo,Zt="onPointerLeave",st="onPointerEnter",Je="pointer"),ts=vt==null?pt:Hr(vt),ot=Wr==null?pt:Hr(Wr),pt=new Br(Zt,Je+"leave",vt,c,Ht),pt.target=ts,pt.relatedTarget=ot,Zt=null,Fr(Ht)===lt&&(Br=new Br(st,Je+"enter",Wr,c,Ht),Br.target=ot,Br.relatedTarget=ts,Zt=Br),ts=Zt,vt&&Wr)t:{for(Br=vt,st=Wr,Je=0,ot=Br;ot;ot=Fd(ot))Je++;for(ot=0,Zt=st;Zt;Zt=Fd(Zt))ot++;for(;0<Je-ot;)Br=Fd(Br),Je--;for(;0<ot-Je;)st=Fd(st),ot--;for(;Je--;){if(Br===st||st!==null&&Br===st.alternate)break t;Br=Fd(Br),st=Fd(st)}Br=null}else Br=null;vt!==null&&X_(en,pt,vt,Br,!1),Wr!==null&&ts!==null&&X_(en,ts,Wr,Br,!0)}}e:{if(pt=lt?Hr(lt):window,vt=pt.nodeName&&pt.nodeName.toLowerCase(),vt==="select"||vt==="input"&&pt.type==="file")var hr=ce;else if(Vn(pt))if(je)hr=sa;else{hr=Gn;var ga=Gt}else vt=pt.nodeName,!vt||vt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?lt&&Ns(lt.elementType)&&(hr=ce):hr=kn;if(hr&&(hr=hr(n,lt))){hc(en,hr,c,Ht);break e}ga&&ga(n,pt,lt),n==="focusout"&&lt&&pt.type==="number"&&lt.memoizedProps.value!=null&&Ga(pt,"number",pt.value)}switch(ga=lt?Hr(lt):window,n){case"focusin":(Vn(ga)||ga.contentEditable==="true")&&(ei=ga,di=lt,Do=null);break;case"focusout":Do=di=ei=null;break;case"mousedown":Bc=!0;break;case"contextmenu":case"mouseup":case"dragend":Bc=!1,pc(en,c,Ht);break;case"selectionchange":if(No)break;case"keydown":case"keyup":pc(en,c,Ht)}var Rr;if(Oa)e:{switch(n){case"compositionstart":var zr="onCompositionStart";break e;case"compositionend":zr="onCompositionEnd";break e;case"compositionupdate":zr="onCompositionUpdate";break e}zr=void 0}else Po?lr(n,c)&&(zr="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(zr="onCompositionStart");zr&&(Dl&&c.locale!=="ko"&&(Po||zr!=="onCompositionStart"?zr==="onCompositionEnd"&&Po&&(Rr=_r()):(Qs=Ht,ci="value"in Qs?Qs.value:Qs.textContent,Po=!0)),ga=gf(lt,zr),0<ga.length&&(zr=new xs(zr,n,null,c,Ht),en.push({event:zr,listeners:ga}),Rr?zr.data=Rr:(Rr=Ic(c),Rr!==null&&(zr.data=Rr)))),(Rr=Nl?Ds(n,c):fe(n,c))&&(zr=gf(lt,"onBeforeInput"),0<zr.length&&(ga=new xs("onBeforeInput","beforeinput",null,c,Ht),en.push({event:ga,listeners:zr}),ga.data=Rr)),jE(en,n,lt,c,Ht)}K_(en,a)})}function Hh(n,a,c){return{instance:n,listener:a,currentTarget:c}}function gf(n,a){for(var c=a+"Capture",v=[];n!==null;){var B=n,V=B.stateNode;if(B=B.tag,B!==5&&B!==26&&B!==27||V===null||(B=da(n,c),B!=null&&v.unshift(Hh(n,B,V)),B=da(n,a),B!=null&&v.push(Hh(n,B,V))),n.tag===3)return v;n=n.return}return[]}function Fd(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function X_(n,a,c,v,B){for(var V=a._reactName,oe=[];c!==null&&c!==v;){var ye=c,Ve=ye.alternate,lt=ye.stateNode;if(ye=ye.tag,Ve!==null&&Ve===v)break;ye!==5&&ye!==26&&ye!==27||lt===null||(Ve=lt,B?(lt=da(c,V),lt!=null&&oe.unshift(Hh(c,lt,Ve))):B||(lt=da(c,V),lt!=null&&oe.push(Hh(c,lt,Ve)))),c=c.return}oe.length!==0&&n.push({event:a,listeners:oe})}var zE=/\r\n?/g,UE=/\u0000|\uFFFD/g;function J_(n){return(typeof n=="string"?n:""+n).replace(zE,`
`).replace(UE,"")}function eb(n,a){return a=J_(a),J_(n)===a}function vf(){}function es(n,a,c,v,B,V){switch(c){case"children":typeof v=="string"?a==="body"||a==="textarea"&&v===""||Ps(n,v):(typeof v=="number"||typeof v=="bigint")&&a!=="body"&&Ps(n,""+v);break;case"className":vi(n,"class",v);break;case"tabIndex":vi(n,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":vi(n,c,v);break;case"style":Pi(n,v,V);break;case"data":if(a!=="object"){vi(n,"data",v);break}case"src":case"href":if(v===""&&(a!=="a"||c!=="href")){n.removeAttribute(c);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){n.removeAttribute(c);break}v=Hi(""+v),n.setAttribute(c,v);break;case"action":case"formAction":if(typeof v=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(c==="formAction"?(a!=="input"&&es(n,a,"name",B.name,B,null),es(n,a,"formEncType",B.formEncType,B,null),es(n,a,"formMethod",B.formMethod,B,null),es(n,a,"formTarget",B.formTarget,B,null)):(es(n,a,"encType",B.encType,B,null),es(n,a,"method",B.method,B,null),es(n,a,"target",B.target,B,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){n.removeAttribute(c);break}v=Hi(""+v),n.setAttribute(c,v);break;case"onClick":v!=null&&(n.onclick=vf);break;case"onScroll":v!=null&&ba("scroll",n);break;case"onScrollEnd":v!=null&&ba("scrollend",n);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(s(61));if(c=v.__html,c!=null){if(B.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"multiple":n.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":n.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){n.removeAttribute("xlink:href");break}c=Hi(""+v),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?n.setAttribute(c,""+v):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":v===!0?n.setAttribute(c,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?n.setAttribute(c,v):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?n.setAttribute(c,v):n.removeAttribute(c);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?n.removeAttribute(c):n.setAttribute(c,v);break;case"popover":ba("beforetoggle",n),ba("toggle",n),Us(n,"popover",v);break;case"xlinkActuate":ea(n,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ea(n,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ea(n,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ea(n,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ea(n,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ea(n,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ea(n,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ea(n,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ea(n,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Us(n,"is",v);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Eo.get(c)||c,Us(n,c,v))}}function $g(n,a,c,v,B,V){switch(c){case"style":Pi(n,v,V);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(s(61));if(c=v.__html,c!=null){if(B.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"children":typeof v=="string"?Ps(n,v):(typeof v=="number"||typeof v=="bigint")&&Ps(n,""+v);break;case"onScroll":v!=null&&ba("scroll",n);break;case"onScrollEnd":v!=null&&ba("scrollend",n);break;case"onClick":v!=null&&(n.onclick=vf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ma.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(B=c.endsWith("Capture"),a=c.slice(2,B?c.length-7:void 0),V=n[Ln]||null,V=V!=null?V[c]:null,typeof V=="function"&&n.removeEventListener(a,V,B),typeof v=="function")){typeof V!="function"&&V!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(a,v,B);break e}c in n?n[c]=v:v===!0?n.setAttribute(c,""):Us(n,c,v)}}}function eo(n,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ba("error",n),ba("load",n);var v=!1,B=!1,V;for(V in c)if(c.hasOwnProperty(V)){var oe=c[V];if(oe!=null)switch(V){case"src":v=!0;break;case"srcSet":B=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:es(n,a,V,oe,c,null)}}B&&es(n,a,"srcSet",c.srcSet,c,null),v&&es(n,a,"src",c.src,c,null);return;case"input":ba("invalid",n);var ye=V=oe=B=null,Ve=null,lt=null;for(v in c)if(c.hasOwnProperty(v)){var Ht=c[v];if(Ht!=null)switch(v){case"name":B=Ht;break;case"type":oe=Ht;break;case"checked":Ve=Ht;break;case"defaultChecked":lt=Ht;break;case"value":V=Ht;break;case"defaultValue":ye=Ht;break;case"children":case"dangerouslySetInnerHTML":if(Ht!=null)throw Error(s(137,a));break;default:es(n,a,v,Ht,c,null)}}Za(n,V,ye,Ve,lt,oe,B,!1),kr(n);return;case"select":ba("invalid",n),v=oe=V=null;for(B in c)if(c.hasOwnProperty(B)&&(ye=c[B],ye!=null))switch(B){case"value":V=ye;break;case"defaultValue":oe=ye;break;case"multiple":v=ye;default:es(n,a,B,ye,c,null)}a=V,c=oe,n.multiple=!!v,a!=null?ss(n,!!v,a,!1):c!=null&&ss(n,!!v,c,!0);return;case"textarea":ba("invalid",n),V=B=v=null;for(oe in c)if(c.hasOwnProperty(oe)&&(ye=c[oe],ye!=null))switch(oe){case"value":v=ye;break;case"defaultValue":B=ye;break;case"children":V=ye;break;case"dangerouslySetInnerHTML":if(ye!=null)throw Error(s(91));break;default:es(n,a,oe,ye,c,null)}ls(n,v,B,V),kr(n);return;case"option":for(Ve in c)if(c.hasOwnProperty(Ve)&&(v=c[Ve],v!=null))switch(Ve){case"selected":n.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:es(n,a,Ve,v,c,null)}return;case"dialog":ba("beforetoggle",n),ba("toggle",n),ba("cancel",n),ba("close",n);break;case"iframe":case"object":ba("load",n);break;case"video":case"audio":for(v=0;v<Fh.length;v++)ba(Fh[v],n);break;case"image":ba("error",n),ba("load",n);break;case"details":ba("toggle",n);break;case"embed":case"source":case"link":ba("error",n),ba("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in c)if(c.hasOwnProperty(lt)&&(v=c[lt],v!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:es(n,a,lt,v,c,null)}return;default:if(Ns(a)){for(Ht in c)c.hasOwnProperty(Ht)&&(v=c[Ht],v!==void 0&&$g(n,a,Ht,v,c,void 0));return}}for(ye in c)c.hasOwnProperty(ye)&&(v=c[ye],v!=null&&es(n,a,ye,v,c,null))}function FE(n,a,c,v){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var B=null,V=null,oe=null,ye=null,Ve=null,lt=null,Ht=null;for(vt in c){var en=c[vt];if(c.hasOwnProperty(vt)&&en!=null)switch(vt){case"checked":break;case"value":break;case"defaultValue":Ve=en;default:v.hasOwnProperty(vt)||es(n,a,vt,null,v,en)}}for(var pt in v){var vt=v[pt];if(en=c[pt],v.hasOwnProperty(pt)&&(vt!=null||en!=null))switch(pt){case"type":V=vt;break;case"name":B=vt;break;case"checked":lt=vt;break;case"defaultChecked":Ht=vt;break;case"value":oe=vt;break;case"defaultValue":ye=vt;break;case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(s(137,a));break;default:vt!==en&&es(n,a,pt,vt,v,en)}}Ca(n,oe,ye,Ve,lt,Ht,V,B);return;case"select":vt=oe=ye=pt=null;for(V in c)if(Ve=c[V],c.hasOwnProperty(V)&&Ve!=null)switch(V){case"value":break;case"multiple":vt=Ve;default:v.hasOwnProperty(V)||es(n,a,V,null,v,Ve)}for(B in v)if(V=v[B],Ve=c[B],v.hasOwnProperty(B)&&(V!=null||Ve!=null))switch(B){case"value":pt=V;break;case"defaultValue":ye=V;break;case"multiple":oe=V;default:V!==Ve&&es(n,a,B,V,v,Ve)}a=ye,c=oe,v=vt,pt!=null?ss(n,!!c,pt,!1):!!v!=!!c&&(a!=null?ss(n,!!c,a,!0):ss(n,!!c,c?[]:"",!1));return;case"textarea":vt=pt=null;for(ye in c)if(B=c[ye],c.hasOwnProperty(ye)&&B!=null&&!v.hasOwnProperty(ye))switch(ye){case"value":break;case"children":break;default:es(n,a,ye,null,v,B)}for(oe in v)if(B=v[oe],V=c[oe],v.hasOwnProperty(oe)&&(B!=null||V!=null))switch(oe){case"value":pt=B;break;case"defaultValue":vt=B;break;case"children":break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(91));break;default:B!==V&&es(n,a,oe,B,v,V)}Aa(n,pt,vt);return;case"option":for(var Wr in c)if(pt=c[Wr],c.hasOwnProperty(Wr)&&pt!=null&&!v.hasOwnProperty(Wr))switch(Wr){case"selected":n.selected=!1;break;default:es(n,a,Wr,null,v,pt)}for(Ve in v)if(pt=v[Ve],vt=c[Ve],v.hasOwnProperty(Ve)&&pt!==vt&&(pt!=null||vt!=null))switch(Ve){case"selected":n.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:es(n,a,Ve,pt,v,vt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Br in c)pt=c[Br],c.hasOwnProperty(Br)&&pt!=null&&!v.hasOwnProperty(Br)&&es(n,a,Br,null,v,pt);for(lt in v)if(pt=v[lt],vt=c[lt],v.hasOwnProperty(lt)&&pt!==vt&&(pt!=null||vt!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(s(137,a));break;default:es(n,a,lt,pt,v,vt)}return;default:if(Ns(a)){for(var ts in c)pt=c[ts],c.hasOwnProperty(ts)&&pt!==void 0&&!v.hasOwnProperty(ts)&&$g(n,a,ts,void 0,v,pt);for(Ht in v)pt=v[Ht],vt=c[Ht],!v.hasOwnProperty(Ht)||pt===vt||pt===void 0&&vt===void 0||$g(n,a,Ht,pt,v,vt);return}}for(var st in c)pt=c[st],c.hasOwnProperty(st)&&pt!=null&&!v.hasOwnProperty(st)&&es(n,a,st,null,v,pt);for(en in v)pt=v[en],vt=c[en],!v.hasOwnProperty(en)||pt===vt||pt==null&&vt==null||es(n,a,en,pt,v,vt)}var Zg=null,Gg=null;function yf(n){return n.nodeType===9?n:n.ownerDocument}function tb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nb(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function Yg(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Kg=null;function HE(){var n=window.event;return n&&n.type==="popstate"?n===Kg?!1:(Kg=n,!0):(Kg=null,!1)}var rb=typeof setTimeout=="function"?setTimeout:void 0,VE=typeof clearTimeout=="function"?clearTimeout:void 0,ab=typeof Promise=="function"?Promise:void 0,qE=typeof queueMicrotask=="function"?queueMicrotask:typeof ab<"u"?function(n){return ab.resolve(null).then(n).catch(WE)}:rb;function WE(n){setTimeout(function(){throw n})}function wu(n){return n==="head"}function sb(n,a){var c=a,v=0,B=0;do{var V=c.nextSibling;if(n.removeChild(c),V&&V.nodeType===8)if(c=V.data,c==="/$"){if(0<v&&8>v){c=v;var oe=n.ownerDocument;if(c&1&&Vh(oe.documentElement),c&2&&Vh(oe.body),c&4)for(c=oe.head,Vh(c),oe=c.firstChild;oe;){var ye=oe.nextSibling,Ve=oe.nodeName;oe[In]||Ve==="SCRIPT"||Ve==="STYLE"||Ve==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||c.removeChild(oe),oe=ye}}if(B===0){n.removeChild(V),Qh(a);return}B--}else c==="$"||c==="$?"||c==="$!"?B++:v=c.charCodeAt(0)-48;else v=0;c=V}while(c);Qh(a)}function Qg(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Qg(c),Nn(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function $E(n,a,c,v){for(;n.nodeType===1;){var B=c;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!v&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(v){if(!n[In])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(V=n.getAttribute("rel"),V==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(V!==B.rel||n.getAttribute("href")!==(B.href==null||B.href===""?null:B.href)||n.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin)||n.getAttribute("title")!==(B.title==null?null:B.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(V=n.getAttribute("src"),(V!==(B.src==null?null:B.src)||n.getAttribute("type")!==(B.type==null?null:B.type)||n.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin))&&V&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var V=B.name==null?null:""+B.name;if(B.type==="hidden"&&n.getAttribute("name")===V)return n}else return n;if(n=Wc(n.nextSibling),n===null)break}return null}function ZE(n,a,c){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=Wc(n.nextSibling),n===null))return null;return n}function Xg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function GE(n,a){var c=n.ownerDocument;if(n.data!=="$?"||c.readyState==="complete")a();else{var v=function(){a(),c.removeEventListener("DOMContentLoaded",v)};c.addEventListener("DOMContentLoaded",v),n._reactRetry=v}}function Wc(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return n}var Jg=null;function ib(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return n;a--}else c==="/$"&&a++}n=n.previousSibling}return null}function ob(n,a,c){switch(a=yf(c),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Vh(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Nn(n)}var Ec=new Map,cb=new Set;function _f(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ql=$.d;$.d={f:YE,r:KE,D:QE,C:XE,L:JE,m:ek,X:nk,S:tk,M:rk};function YE(){var n=ql.f(),a=uf();return n||a}function KE(n){var a=Mr(n);a!==null&&a.tag===5&&a.type==="form"?kh(a):ql.r(n)}var Hd=typeof document>"u"?null:document;function lb(n,a,c){var v=Hd;if(v&&typeof a=="string"&&a){var B=ya(a);B='link[rel="'+n+'"][href="'+B+'"]',typeof c=="string"&&(B+='[crossorigin="'+c+'"]'),cb.has(B)||(cb.add(B),n={rel:n,crossOrigin:c,href:a},v.querySelector(B)===null&&(a=v.createElement("link"),eo(a,"link",n),Kn(a),v.head.appendChild(a)))}}function QE(n){ql.D(n),lb("dns-prefetch",n,null)}function XE(n,a){ql.C(n,a),lb("preconnect",n,a)}function JE(n,a,c){ql.L(n,a,c);var v=Hd;if(v&&n&&a){var B='link[rel="preload"][as="'+ya(a)+'"]';a==="image"&&c&&c.imageSrcSet?(B+='[imagesrcset="'+ya(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(B+='[imagesizes="'+ya(c.imageSizes)+'"]')):B+='[href="'+ya(n)+'"]';var V=B;switch(a){case"style":V=Vd(n);break;case"script":V=qd(n)}Ec.has(V)||(n=x({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:n,as:a},c),Ec.set(V,n),v.querySelector(B)!==null||a==="style"&&v.querySelector(qh(V))||a==="script"&&v.querySelector(Wh(V))||(a=v.createElement("link"),eo(a,"link",n),Kn(a),v.head.appendChild(a)))}}function ek(n,a){ql.m(n,a);var c=Hd;if(c&&n){var v=a&&typeof a.as=="string"?a.as:"script",B='link[rel="modulepreload"][as="'+ya(v)+'"][href="'+ya(n)+'"]',V=B;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=qd(n)}if(!Ec.has(V)&&(n=x({rel:"modulepreload",href:n},a),Ec.set(V,n),c.querySelector(B)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Wh(V)))return}v=c.createElement("link"),eo(v,"link",n),Kn(v),c.head.appendChild(v)}}}function tk(n,a,c){ql.S(n,a,c);var v=Hd;if(v&&n){var B=cr(v).hoistableStyles,V=Vd(n);a=a||"default";var oe=B.get(V);if(!oe){var ye={loading:0,preload:null};if(oe=v.querySelector(qh(V)))ye.loading=5;else{n=x({rel:"stylesheet",href:n,"data-precedence":a},c),(c=Ec.get(V))&&ev(n,c);var Ve=oe=v.createElement("link");Kn(Ve),eo(Ve,"link",n),Ve._p=new Promise(function(lt,Ht){Ve.onload=lt,Ve.onerror=Ht}),Ve.addEventListener("load",function(){ye.loading|=1}),Ve.addEventListener("error",function(){ye.loading|=2}),ye.loading|=4,bf(oe,a,v)}oe={type:"stylesheet",instance:oe,count:1,state:ye},B.set(V,oe)}}}function nk(n,a){ql.X(n,a);var c=Hd;if(c&&n){var v=cr(c).hoistableScripts,B=qd(n),V=v.get(B);V||(V=c.querySelector(Wh(B)),V||(n=x({src:n,async:!0},a),(a=Ec.get(B))&&tv(n,a),V=c.createElement("script"),Kn(V),eo(V,"link",n),c.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},v.set(B,V))}}function rk(n,a){ql.M(n,a);var c=Hd;if(c&&n){var v=cr(c).hoistableScripts,B=qd(n),V=v.get(B);V||(V=c.querySelector(Wh(B)),V||(n=x({src:n,async:!0,type:"module"},a),(a=Ec.get(B))&&tv(n,a),V=c.createElement("script"),Kn(V),eo(V,"link",n),c.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},v.set(B,V))}}function ub(n,a,c,v){var B=(B=Be.current)?_f(B):null;if(!B)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Vd(c.href),c=cr(B).hoistableStyles,v=c.get(a),v||(v={type:"style",instance:null,count:0,state:null},c.set(a,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=Vd(c.href);var V=cr(B).hoistableStyles,oe=V.get(n);if(oe||(B=B.ownerDocument||B,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(n,oe),(V=B.querySelector(qh(n)))&&!V._p&&(oe.instance=V,oe.state.loading=5),Ec.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ec.set(n,c),V||ak(B,n,c,oe.state))),a&&v===null)throw Error(s(528,""));return oe}if(a&&v!==null)throw Error(s(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=qd(c),c=cr(B).hoistableScripts,v=c.get(a),v||(v={type:"script",instance:null,count:0,state:null},c.set(a,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Vd(n){return'href="'+ya(n)+'"'}function qh(n){return'link[rel="stylesheet"]['+n+"]"}function db(n){return x({},n,{"data-precedence":n.precedence,precedence:null})}function ak(n,a,c,v){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?v.loading=1:(a=n.createElement("link"),v.preload=a,a.addEventListener("load",function(){return v.loading|=1}),a.addEventListener("error",function(){return v.loading|=2}),eo(a,"link",c),Kn(a),n.head.appendChild(a))}function qd(n){return'[src="'+ya(n)+'"]'}function Wh(n){return"script[async]"+n}function hb(n,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var v=n.querySelector('style[data-href~="'+ya(c.href)+'"]');if(v)return a.instance=v,Kn(v),v;var B=x({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return v=(n.ownerDocument||n).createElement("style"),Kn(v),eo(v,"style",B),bf(v,c.precedence,n),a.instance=v;case"stylesheet":B=Vd(c.href);var V=n.querySelector(qh(B));if(V)return a.state.loading|=4,a.instance=V,Kn(V),V;v=db(c),(B=Ec.get(B))&&ev(v,B),V=(n.ownerDocument||n).createElement("link"),Kn(V);var oe=V;return oe._p=new Promise(function(ye,Ve){oe.onload=ye,oe.onerror=Ve}),eo(V,"link",v),a.state.loading|=4,bf(V,c.precedence,n),a.instance=V;case"script":return V=qd(c.src),(B=n.querySelector(Wh(V)))?(a.instance=B,Kn(B),B):(v=c,(B=Ec.get(V))&&(v=x({},c),tv(v,B)),n=n.ownerDocument||n,B=n.createElement("script"),Kn(B),eo(B,"link",v),n.head.appendChild(B),a.instance=B);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(v=a.instance,a.state.loading|=4,bf(v,c.precedence,n));return a.instance}function bf(n,a,c){for(var v=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),B=v.length?v[v.length-1]:null,V=B,oe=0;oe<v.length;oe++){var ye=v[oe];if(ye.dataset.precedence===a)V=ye;else if(V!==B)break}V?V.parentNode.insertBefore(n,V.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(n,a.firstChild))}function ev(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function tv(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var xf=null;function pb(n,a,c){if(xf===null){var v=new Map,B=xf=new Map;B.set(c,v)}else B=xf,v=B.get(c),v||(v=new Map,B.set(c,v));if(v.has(n))return v;for(v.set(n,null),c=c.getElementsByTagName(n),B=0;B<c.length;B++){var V=c[B];if(!(V[In]||V[On]||n==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=V.getAttribute(a)||"";oe=n+oe;var ye=v.get(oe);ye?ye.push(V):v.set(oe,[V])}}return v}function fb(n,a,c){n=n.ownerDocument||n,n.head.insertBefore(c,a==="title"?n.querySelector("head > title"):null)}function sk(n,a,c){if(c===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function mb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var $h=null;function ik(){}function ok(n,a,c){if($h===null)throw Error(s(475));var v=$h;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var B=Vd(c.href),V=n.querySelector(qh(B));if(V){n=V._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(v.count++,v=wf.bind(v),n.then(v,v)),a.state.loading|=4,a.instance=V,Kn(V);return}V=n.ownerDocument||n,c=db(c),(B=Ec.get(B))&&ev(c,B),V=V.createElement("link"),Kn(V);var oe=V;oe._p=new Promise(function(ye,Ve){oe.onload=ye,oe.onerror=Ve}),eo(V,"link",c),a.instance=V}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(v.count++,a=wf.bind(v),n.addEventListener("load",a),n.addEventListener("error",a))}}function ck(){if($h===null)throw Error(s(475));var n=$h;return n.stylesheets&&n.count===0&&nv(n,n.stylesheets),0<n.count?function(a){var c=setTimeout(function(){if(n.stylesheets&&nv(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(c)}}:null}function wf(){if(this.count--,this.count===0){if(this.stylesheets)nv(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Sf=null;function nv(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Sf=new Map,a.forEach(lk,n),Sf=null,wf.call(n))}function lk(n,a){if(!(a.state.loading&4)){var c=Sf.get(n);if(c)var v=c.get(null);else{c=new Map,Sf.set(n,c);for(var B=n.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<B.length;V++){var oe=B[V];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(c.set(oe.dataset.precedence,oe),v=oe)}v&&c.set(null,v)}B=a.instance,oe=B.getAttribute("data-precedence"),V=c.get(oe)||v,V===v&&c.set(null,B),c.set(oe,B),this.count++,v=wf.bind(this),B.addEventListener("load",v),B.addEventListener("error",v),V?V.parentNode.insertBefore(B,V.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(B,n.firstChild)),a.state.loading|=4}}var Zh={$$typeof:g,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function uk(n,a,c,v,B,V,oe,ye){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ea(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ea(0),this.hiddenUpdates=Ea(null),this.identifierPrefix=v,this.onUncaughtError=B,this.onCaughtError=V,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function gb(n,a,c,v,B,V,oe,ye,Ve,lt,Ht,en){return n=new uk(n,a,c,oe,ye,Ve,lt,en),a=1,V===!0&&(a|=24),V=Ta(3,null,null,a),n.current=V,V.stateNode=n,a=_c(),a.refCount++,n.pooledCache=a,a.refCount++,V.memoizedState={element:v,isDehydrated:c,cache:a},xn(V),n}function vb(n){return n?(n=Mo,n):Mo}function yb(n,a,c,v,B,V){B=vb(B),v.context===null?v.context=B:v.pendingContext=B,v=ft(a),v.payload={element:c},V=V===void 0?null:V,V!==null&&(v.callback=V),c=Ot(n,v,a),c!==null&&(ic(c,n,a),mt(c,n,a))}function _b(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<a?c:a}}function rv(n,a){_b(n,a),(n=n.alternate)&&_b(n,a)}function bb(n){if(n.tag===13){var a=co(n,67108864);a!==null&&ic(a,n,67108864),rv(n,67108864)}}var Rf=!0;function dk(n,a,c,v){var B=F.T;F.T=null;var V=$.p;try{$.p=2,av(n,a,c,v)}finally{$.p=V,F.T=B}}function hk(n,a,c,v){var B=F.T;F.T=null;var V=$.p;try{$.p=8,av(n,a,c,v)}finally{$.p=V,F.T=B}}function av(n,a,c,v){if(Rf){var B=sv(v);if(B===null)Wg(n,a,v,Ef,c),wb(n,v);else if(fk(B,n,a,c,v))v.stopPropagation();else if(wb(n,v),a&4&&-1<pk.indexOf(n)){for(;B!==null;){var V=Mr(B);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var oe=Kr(V.pendingLanes);if(oe!==0){var ye=V;for(ye.pendingLanes|=2,ye.entangledLanes|=2;oe;){var Ve=1<<31-nr(oe);ye.entanglements[1]|=Ve,oe&=~Ve}dl(V),(Ya&6)===0&&(cf=Pn()+500,Uh(0))}}break;case 13:ye=co(V,2),ye!==null&&ic(ye,V,2),uf(),rv(V,2)}if(V=sv(v),V===null&&Wg(n,a,v,Ef,c),V===B)break;B=V}B!==null&&v.stopPropagation()}else Wg(n,a,v,null,c)}}function sv(n){return n=Ni(n),iv(n)}var Ef=null;function iv(n){if(Ef=null,n=Fr(n),n!==null){var a=d(n);if(a===null)n=null;else{var c=a.tag;if(c===13){if(n=C(a),n!==null)return n;n=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Ef=n,null}function xb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(En()){case rn:return 2;case Ne:return 8;case Me:case Ze:return 32;case Ft:return 268435456;default:return 32}default:return 32}}var ov=!1,Su=null,Ru=null,Eu=null,Gh=new Map,Yh=new Map,ku=[],pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wb(n,a){switch(n){case"focusin":case"focusout":Su=null;break;case"dragenter":case"dragleave":Ru=null;break;case"mouseover":case"mouseout":Eu=null;break;case"pointerover":case"pointerout":Gh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yh.delete(a.pointerId)}}function Kh(n,a,c,v,B,V){return n===null||n.nativeEvent!==V?(n={blockedOn:a,domEventName:c,eventSystemFlags:v,nativeEvent:V,targetContainers:[B]},a!==null&&(a=Mr(a),a!==null&&bb(a)),n):(n.eventSystemFlags|=v,a=n.targetContainers,B!==null&&a.indexOf(B)===-1&&a.push(B),n)}function fk(n,a,c,v,B){switch(a){case"focusin":return Su=Kh(Su,n,a,c,v,B),!0;case"dragenter":return Ru=Kh(Ru,n,a,c,v,B),!0;case"mouseover":return Eu=Kh(Eu,n,a,c,v,B),!0;case"pointerover":var V=B.pointerId;return Gh.set(V,Kh(Gh.get(V)||null,n,a,c,v,B)),!0;case"gotpointercapture":return V=B.pointerId,Yh.set(V,Kh(Yh.get(V)||null,n,a,c,v,B)),!0}return!1}function Sb(n){var a=Fr(n.target);if(a!==null){var c=d(a);if(c!==null){if(a=c.tag,a===13){if(a=C(c),a!==null){n.blockedOn=a,nn(n.priority,function(){if(c.tag===13){var v=sc();v=$t(v);var B=co(c,v);B!==null&&ic(B,c,v),rv(c,v)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function kf(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var c=sv(n.nativeEvent);if(c===null){c=n.nativeEvent;var v=new c.constructor(c.type,c);ao=v,c.target.dispatchEvent(v),ao=null}else return a=Mr(c),a!==null&&bb(a),n.blockedOn=c,!1;a.shift()}return!0}function Rb(n,a,c){kf(n)&&c.delete(a)}function mk(){ov=!1,Su!==null&&kf(Su)&&(Su=null),Ru!==null&&kf(Ru)&&(Ru=null),Eu!==null&&kf(Eu)&&(Eu=null),Gh.forEach(Rb),Yh.forEach(Rb)}function Cf(n,a){n.blockedOn===a&&(n.blockedOn=null,ov||(ov=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mk)))}var Tf=null;function Eb(n){Tf!==n&&(Tf=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Tf===n&&(Tf=null);for(var a=0;a<n.length;a+=3){var c=n[a],v=n[a+1],B=n[a+2];if(typeof v!="function"){if(iv(v||c)===null)continue;break}var V=Mr(c);V!==null&&(n.splice(a,3),a-=3,Cd(V,{pending:!0,data:B,method:c.method,action:v},v,B))}}))}function Qh(n){function a(Ve){return Cf(Ve,n)}Su!==null&&Cf(Su,n),Ru!==null&&Cf(Ru,n),Eu!==null&&Cf(Eu,n),Gh.forEach(a),Yh.forEach(a);for(var c=0;c<ku.length;c++){var v=ku[c];v.blockedOn===n&&(v.blockedOn=null)}for(;0<ku.length&&(c=ku[0],c.blockedOn===null);)Sb(c),c.blockedOn===null&&ku.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(v=0;v<c.length;v+=3){var B=c[v],V=c[v+1],oe=B[Ln]||null;if(typeof V=="function")oe||Eb(c);else if(oe){var ye=null;if(V&&V.hasAttribute("formAction")){if(B=V,oe=V[Ln]||null)ye=oe.formAction;else if(iv(B)!==null)continue}else ye=oe.action;typeof ye=="function"?c[v+1]=ye:(c.splice(v,3),v-=3),Eb(c)}}}function cv(n){this._internalRoot=n}Pf.prototype.render=cv.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var c=a.current,v=sc();yb(c,v,n,a,null,null)},Pf.prototype.unmount=cv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;yb(n.current,2,null,n,null,null),uf(),a[Xn]=null}};function Pf(n){this._internalRoot=n}Pf.prototype.unstable_scheduleHydration=function(n){if(n){var a=sn();n={blockedOn:null,target:n,priority:a};for(var c=0;c<ku.length&&a!==0&&a<ku[c].priority;c++);ku.splice(c,0,n),c===0&&Sb(n)}};var kb=t.version;if(kb!=="19.1.0")throw Error(s(527,kb,"19.1.0"));$.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=b(a),n=n!==null?u(n):null,n=n===null?null:n.stateNode,n};var gk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{un=Nf.inject(gk),Sn=Nf}catch{}}return Jh.createRoot=function(n,a){if(!l(n))throw Error(s(299));var c=!1,v="",B=Hy,V=Vy,oe=qy,ye=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onUncaughtError!==void 0&&(B=a.onUncaughtError),a.onCaughtError!==void 0&&(V=a.onCaughtError),a.onRecoverableError!==void 0&&(oe=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(ye=a.unstable_transitionCallbacks)),a=gb(n,1,!1,null,null,c,v,B,V,oe,ye,null),n[Xn]=a.current,qg(n),new cv(a)},Jh.hydrateRoot=function(n,a,c){if(!l(n))throw Error(s(299));var v=!1,B="",V=Hy,oe=Vy,ye=qy,Ve=null,lt=null;return c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(B=c.identifierPrefix),c.onUncaughtError!==void 0&&(V=c.onUncaughtError),c.onCaughtError!==void 0&&(oe=c.onCaughtError),c.onRecoverableError!==void 0&&(ye=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Ve=c.unstable_transitionCallbacks),c.formState!==void 0&&(lt=c.formState)),a=gb(n,1,!0,a,c??null,v,B,V,oe,ye,Ve,lt),a.context=vb(null),c=a.current,v=sc(),v=$t(v),B=ft(v),B.callback=null,Ot(c,B,v),c=v,a.current.lanes=c,Qr(a,c),dl(a),n[Xn]=a.current,qg(n),new Pf(a)},Jh.version="19.1.0",Jh}var Lb;function Ck(){if(Lb)return dv.exports;Lb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dv.exports=kk(),dv.exports}var Tk=Ck();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ib="popstate";function Pk(e={}){function t(s,l){let{pathname:d,search:C,hash:T}=s.location;return qv("",{pathname:d,search:C,hash:T},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(s,l){return typeof l=="string"?l:yp(l)}return Dk(t,r,null,e)}function ks(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Nk(){return Math.random().toString(36).substring(2,10)}function Bb(e,t){return{usr:e.state,key:e.key,idx:t}}function qv(e,t,r=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?lh(t):t,state:r,key:t&&t.key||s||Nk()}}function yp({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function lh(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function Dk(e,t,r,s={}){let{window:l=document.defaultView,v5Compat:d=!1}=s,C=l.history,T="POP",b=null,u=x();u==null&&(u=0,C.replaceState({...C.state,idx:u},""));function x(){return(C.state||{idx:null}).idx}function f(){T="POP";let k=x(),w=k==null?null:k-u;u=k,b&&b({action:T,location:m.location,delta:w})}function y(k,w){T="PUSH";let U=qv(m.location,k,w);u=x()+1;let g=Bb(U,u),A=m.createHref(U);try{C.pushState(g,"",A)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;l.location.assign(A)}d&&b&&b({action:T,location:m.location,delta:1})}function E(k,w){T="REPLACE";let U=qv(m.location,k,w);u=x();let g=Bb(U,u),A=m.createHref(U);C.replaceState(g,"",A),d&&b&&b({action:T,location:m.location,delta:0})}function _(k){return Ak(k)}let m={get action(){return T},get location(){return e(l,C)},listen(k){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(Ib,f),b=k,()=>{l.removeEventListener(Ib,f),b=null}},createHref(k){return t(l,k)},createURL:_,encodeLocation(k){let w=_(k);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:y,replace:E,go(k){return C.go(k)}};return m}function Ak(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ks(r,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:yp(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function W1(e,t,r="/"){return Ok(e,t,r,!1)}function Ok(e,t,r,s){let l=typeof t=="string"?lh(t):t,d=ru(l.pathname||"/",r);if(d==null)return null;let C=$1(e);Mk(C);let T=null;for(let b=0;T==null&&b<C.length;++b){let u=Wk(d);T=Vk(C[b],u,s)}return T}function $1(e,t=[],r=[],s=""){let l=(d,C,T)=>{let b={relativePath:T===void 0?d.path||"":T,caseSensitive:d.caseSensitive===!0,childrenIndex:C,route:d};b.relativePath.startsWith("/")&&(ks(b.relativePath.startsWith(s),`Absolute route path "${b.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(s.length));let u=eu([s,b.relativePath]),x=r.concat(b);d.children&&d.children.length>0&&(ks(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),$1(d.children,t,x,u)),!(d.path==null&&!d.index)&&t.push({path:u,score:Fk(u,d.index),routesMeta:x})};return e.forEach((d,C)=>{if(d.path===""||!d.path?.includes("?"))l(d,C);else for(let T of Z1(d.path))l(d,C,T)}),t}function Z1(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,l=r.endsWith("?"),d=r.replace(/\?$/,"");if(s.length===0)return l?[d,""]:[d];let C=Z1(s.join("/")),T=[];return T.push(...C.map(b=>b===""?d:[d,b].join("/"))),l&&T.push(...C),T.map(b=>e.startsWith("/")&&b===""?"/":b)}function Mk(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Hk(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var jk=/^:[\w-]+$/,Lk=3,Ik=2,Bk=1,zk=10,Uk=-2,zb=e=>e==="*";function Fk(e,t){let r=e.split("/"),s=r.length;return r.some(zb)&&(s+=Uk),t&&(s+=Ik),r.filter(l=>!zb(l)).reduce((l,d)=>l+(jk.test(d)?Lk:d===""?Bk:zk),s)}function Hk(e,t){return e.length===t.length&&e.slice(0,-1).every((s,l)=>s===t[l])?e[e.length-1]-t[t.length-1]:0}function Vk(e,t,r=!1){let{routesMeta:s}=e,l={},d="/",C=[];for(let T=0;T<s.length;++T){let b=s[T],u=T===s.length-1,x=d==="/"?t:t.slice(d.length)||"/",f=cm({path:b.relativePath,caseSensitive:b.caseSensitive,end:u},x),y=b.route;if(!f&&u&&r&&!s[s.length-1].route.index&&(f=cm({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},x)),!f)return null;Object.assign(l,f.params),C.push({params:l,pathname:eu([d,f.pathname]),pathnameBase:Yk(eu([d,f.pathnameBase])),route:y}),f.pathnameBase!=="/"&&(d=eu([d,f.pathnameBase]))}return C}function cm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=qk(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let d=l[0],C=d.replace(/(.)\/+$/,"$1"),T=l.slice(1);return{params:s.reduce((u,{paramName:x,isOptional:f},y)=>{if(x==="*"){let _=T[y]||"";C=d.slice(0,d.length-_.length).replace(/(.)\/+$/,"$1")}const E=T[y];return f&&!E?u[x]=void 0:u[x]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:d,pathnameBase:C,pattern:e}}function qk(e,t=!1,r=!0){Cc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(C,T,b)=>(s.push({paramName:T,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),s]}function Wk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ru(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function $k(e,t="/"){let{pathname:r,search:s="",hash:l=""}=typeof e=="string"?lh(e):e;return{pathname:r?r.startsWith("/")?r:Zk(r,t):t,search:Kk(s),hash:Qk(l)}}function Zk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function mv(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gk(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function R0(e){let t=Gk(e);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function E0(e,t,r,s=!1){let l;typeof e=="string"?l=lh(e):(l={...e},ks(!l.pathname||!l.pathname.includes("?"),mv("?","pathname","search",l)),ks(!l.pathname||!l.pathname.includes("#"),mv("#","pathname","hash",l)),ks(!l.search||!l.search.includes("#"),mv("#","search","hash",l)));let d=e===""||l.pathname==="",C=d?"/":l.pathname,T;if(C==null)T=r;else{let f=t.length-1;if(!s&&C.startsWith("..")){let y=C.split("/");for(;y[0]==="..";)y.shift(),f-=1;l.pathname=y.join("/")}T=f>=0?t[f]:"/"}let b=$k(l,T),u=C&&C!=="/"&&C.endsWith("/"),x=(d||C===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(u||x)&&(b.pathname+="/"),b}var eu=e=>e.join("/").replace(/\/\/+/g,"/"),Yk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Kk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Xk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var G1=["POST","PUT","PATCH","DELETE"];new Set(G1);var Jk=["GET",...G1];new Set(Jk);var uh=Z.createContext(null);uh.displayName="DataRouter";var Nm=Z.createContext(null);Nm.displayName="DataRouterState";Z.createContext(!1);var Y1=Z.createContext({isTransitioning:!1});Y1.displayName="ViewTransition";var eC=Z.createContext(new Map);eC.displayName="Fetchers";var tC=Z.createContext(null);tC.displayName="Await";var el=Z.createContext(null);el.displayName="Navigation";var Ap=Z.createContext(null);Ap.displayName="Location";var Pc=Z.createContext({outlet:null,matches:[],isDataRoute:!1});Pc.displayName="Route";var k0=Z.createContext(null);k0.displayName="RouteError";function nC(e,{relative:t}={}){ks(dh(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=Z.useContext(el),{hash:l,pathname:d,search:C}=Op(e,{relative:t}),T=d;return r!=="/"&&(T=d==="/"?r:eu([r,d])),s.createHref({pathname:T,search:C,hash:l})}function dh(){return Z.useContext(Ap)!=null}function tl(){return ks(dh(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(Ap).location}var K1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Q1(e){Z.useContext(el).static||Z.useLayoutEffect(e)}function fs(){let{isDataRoute:e}=Z.useContext(Pc);return e?vC():rC()}function rC(){ks(dh(),"useNavigate() may be used only in the context of a <Router> component.");let e=Z.useContext(uh),{basename:t,navigator:r}=Z.useContext(el),{matches:s}=Z.useContext(Pc),{pathname:l}=tl(),d=JSON.stringify(R0(s)),C=Z.useRef(!1);return Q1(()=>{C.current=!0}),Z.useCallback((b,u={})=>{if(Cc(C.current,K1),!C.current)return;if(typeof b=="number"){r.go(b);return}let x=E0(b,JSON.parse(d),l,u.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:eu([t,x.pathname])),(u.replace?r.replace:r.push)(x,u.state,u)},[t,r,d,l,e])}var aC=Z.createContext(null);function sC(e){let t=Z.useContext(Pc).outlet;return t&&Z.createElement(aC.Provider,{value:e},t)}function bl(){let{matches:e}=Z.useContext(Pc),t=e[e.length-1];return t?t.params:{}}function Op(e,{relative:t}={}){let{matches:r}=Z.useContext(Pc),{pathname:s}=tl(),l=JSON.stringify(R0(r));return Z.useMemo(()=>E0(e,JSON.parse(l),s,t==="path"),[e,l,s,t])}function iC(e,t){return X1(e,t)}function X1(e,t,r,s){ks(dh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=Z.useContext(el),{matches:d}=Z.useContext(Pc),C=d[d.length-1],T=C?C.params:{},b=C?C.pathname:"/",u=C?C.pathnameBase:"/",x=C&&C.route;{let w=x&&x.path||"";J1(b,!x||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=tl(),y;if(t){let w=typeof t=="string"?lh(t):t;ks(u==="/"||w.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),y=w}else y=f;let E=y.pathname||"/",_=E;if(u!=="/"){let w=u.replace(/^\//,"").split("/");_="/"+E.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=W1(e,{pathname:_});Cc(x||m!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Cc(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=dC(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},T,w.params),pathname:eu([u,l.encodeLocation?l.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:eu([u,l.encodeLocation?l.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),d,r,s);return t&&k?Z.createElement(Ap.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},k):k}function oC(){let e=gC(),t=Xk(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},d={padding:"2px 4px",backgroundColor:s},C=null;return console.error("Error handled by React Router default ErrorBoundary:",e),C=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:d},"ErrorBoundary")," or"," ",Z.createElement("code",{style:d},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},t),r?Z.createElement("pre",{style:l},r):null,C)}var cC=Z.createElement(oC,null),lC=class extends Z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Z.createElement(Pc.Provider,{value:this.props.routeContext},Z.createElement(k0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uC({routeContext:e,match:t,children:r}){let s=Z.useContext(uh);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),Z.createElement(Pc.Provider,{value:e},r)}function dC(e,t=[],r=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,d=r?.errors;if(d!=null){let b=l.findIndex(u=>u.route.id&&d?.[u.route.id]!==void 0);ks(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,b+1))}let C=!1,T=-1;if(r)for(let b=0;b<l.length;b++){let u=l[b];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(T=b),u.route.id){let{loaderData:x,errors:f}=r,y=u.route.loader&&!x.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||y){C=!0,T>=0?l=l.slice(0,T+1):l=[l[0]];break}}}return l.reduceRight((b,u,x)=>{let f,y=!1,E=null,_=null;r&&(f=d&&u.route.id?d[u.route.id]:void 0,E=u.route.errorElement||cC,C&&(T<0&&x===0?(J1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,_=null):T===x&&(y=!0,_=u.route.hydrateFallbackElement||null)));let m=t.concat(l.slice(0,x+1)),k=()=>{let w;return f?w=E:y?w=_:u.route.Component?w=Z.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=b,Z.createElement(uC,{match:u,routeContext:{outlet:b,matches:m,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||x===0)?Z.createElement(lC,{location:r.location,revalidation:r.revalidation,component:E,error:f,children:k(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):k()},null)}function C0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hC(e){let t=Z.useContext(uh);return ks(t,C0(e)),t}function pC(e){let t=Z.useContext(Nm);return ks(t,C0(e)),t}function fC(e){let t=Z.useContext(Pc);return ks(t,C0(e)),t}function T0(e){let t=fC(e),r=t.matches[t.matches.length-1];return ks(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function mC(){return T0("useRouteId")}function gC(){let e=Z.useContext(k0),t=pC("useRouteError"),r=T0("useRouteError");return e!==void 0?e:t.errors?.[r]}function vC(){let{router:e}=hC("useNavigate"),t=T0("useNavigate"),r=Z.useRef(!1);return Q1(()=>{r.current=!0}),Z.useCallback(async(l,d={})=>{Cc(r.current,K1),r.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...d}))},[e,t])}var Ub={};function J1(e,t,r){!t&&!Ub[e]&&(Ub[e]=!0,Cc(!1,r))}Z.memo(yC);function yC({routes:e,future:t,state:r}){return X1(e,void 0,r,t)}function hh({to:e,replace:t,state:r,relative:s}){ks(dh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=Z.useContext(el);Cc(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=Z.useContext(Pc),{pathname:C}=tl(),T=fs(),b=E0(e,R0(d),C,s==="path"),u=JSON.stringify(b);return Z.useEffect(()=>{T(JSON.parse(u),{replace:t,state:r,relative:s})},[T,u,s,t,r]),null}function ew(e){return sC(e.context)}function Sa(e){ks(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _C({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:l,static:d=!1}){ks(!dh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let C=e.replace(/^\/*/,"/"),T=Z.useMemo(()=>({basename:C,navigator:l,static:d,future:{}}),[C,l,d]);typeof r=="string"&&(r=lh(r));let{pathname:b="/",search:u="",hash:x="",state:f=null,key:y="default"}=r,E=Z.useMemo(()=>{let _=ru(b,C);return _==null?null:{location:{pathname:_,search:u,hash:x,state:f,key:y},navigationType:s}},[C,b,u,x,f,y,s]);return Cc(E!=null,`<Router basename="${C}"> is not able to match the URL "${b}${u}${x}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:Z.createElement(el.Provider,{value:T},Z.createElement(Ap.Provider,{children:t,value:E}))}function bC({children:e,location:t}){return iC(Wv(e),t)}function Wv(e,t=[]){let r=[];return Z.Children.forEach(e,(s,l)=>{if(!Z.isValidElement(s))return;let d=[...t,l];if(s.type===Z.Fragment){r.push.apply(r,Wv(s.props.children,d));return}ks(s.type===Sa,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ks(!s.props.index||!s.props.children,"An index route cannot have child routes.");let C={id:s.props.id||d.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(C.children=Wv(s.props.children,d)),r.push(C)}),r}var Kf="get",Qf="application/x-www-form-urlencoded";function Dm(e){return e!=null&&typeof e.tagName=="string"}function xC(e){return Dm(e)&&e.tagName.toLowerCase()==="button"}function wC(e){return Dm(e)&&e.tagName.toLowerCase()==="form"}function SC(e){return Dm(e)&&e.tagName.toLowerCase()==="input"}function RC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function EC(e,t){return e.button===0&&(!t||t==="_self")&&!RC(e)}function $v(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(l=>[r,l]):[[r,s]])},[]))}function kC(e,t){let r=$v(e);return t&&t.forEach((s,l)=>{r.has(l)||t.getAll(l).forEach(d=>{r.append(l,d)})}),r}var Df=null;function CC(){if(Df===null)try{new FormData(document.createElement("form"),0),Df=!1}catch{Df=!0}return Df}var TC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gv(e){return e!=null&&!TC.has(e)?(Cc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qf}"`),null):e}function PC(e,t){let r,s,l,d,C;if(wC(e)){let T=e.getAttribute("action");s=T?ru(T,t):null,r=e.getAttribute("method")||Kf,l=gv(e.getAttribute("enctype"))||Qf,d=new FormData(e)}else if(xC(e)||SC(e)&&(e.type==="submit"||e.type==="image")){let T=e.form;if(T==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=e.getAttribute("formaction")||T.getAttribute("action");if(s=b?ru(b,t):null,r=e.getAttribute("formmethod")||T.getAttribute("method")||Kf,l=gv(e.getAttribute("formenctype"))||gv(T.getAttribute("enctype"))||Qf,d=new FormData(T,e),!CC()){let{name:u,type:x,value:f}=e;if(x==="image"){let y=u?`${u}.`:"";d.append(`${y}x`,"0"),d.append(`${y}y`,"0")}else u&&d.append(u,f)}}else{if(Dm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Kf,s=null,l=Qf,C=e}return d&&l==="text/plain"&&(C=d,d=void 0),{action:s,method:r.toLowerCase(),encType:l,formData:d,body:C}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function P0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function NC(e,t,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&ru(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function DC(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AC(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function OC(e,t,r){let s=await Promise.all(e.map(async l=>{let d=t.routes[l.route.id];if(d){let C=await DC(d,r);return C.links?C.links():[]}return[]}));return IC(s.flat(1).filter(AC).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Fb(e,t,r,s,l,d){let C=(b,u)=>r[u]?b.route.id!==r[u].route.id:!0,T=(b,u)=>r[u].pathname!==b.pathname||r[u].route.path?.endsWith("*")&&r[u].params["*"]!==b.params["*"];return d==="assets"?t.filter((b,u)=>C(b,u)||T(b,u)):d==="data"?t.filter((b,u)=>{let x=s.routes[b.route.id];if(!x||!x.hasLoader)return!1;if(C(b,u)||T(b,u))return!0;if(b.route.shouldRevalidate){let f=b.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function MC(e,t,{includeHydrateFallback:r}={}){return jC(e.map(s=>{let l=t.routes[s.route.id];if(!l)return[];let d=[l.module];return l.clientActionModule&&(d=d.concat(l.clientActionModule)),l.clientLoaderModule&&(d=d.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(d=d.concat(l.hydrateFallbackModule)),l.imports&&(d=d.concat(l.imports)),d}).flat(1))}function jC(e){return[...new Set(e)]}function LC(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}function IC(e,t){let r=new Set;return new Set(t),e.reduce((s,l)=>{let d=JSON.stringify(LC(l));return r.has(d)||(r.add(d),s.push({key:d,link:l})),s},[])}function tw(){let e=Z.useContext(uh);return P0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function BC(){let e=Z.useContext(Nm);return P0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var N0=Z.createContext(void 0);N0.displayName="FrameworkContext";function nw(){let e=Z.useContext(N0);return P0(e,"You must render this element inside a <HydratedRouter> element"),e}function zC(e,t){let r=Z.useContext(N0),[s,l]=Z.useState(!1),[d,C]=Z.useState(!1),{onFocus:T,onBlur:b,onMouseEnter:u,onMouseLeave:x,onTouchStart:f}=t,y=Z.useRef(null);Z.useEffect(()=>{if(e==="render"&&C(!0),e==="viewport"){let m=w=>{w.forEach(U=>{C(U.isIntersecting)})},k=new IntersectionObserver(m,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[e]),Z.useEffect(()=>{if(s){let m=setTimeout(()=>{C(!0)},100);return()=>{clearTimeout(m)}}},[s]);let E=()=>{l(!0)},_=()=>{l(!1),C(!1)};return r?e!=="intent"?[d,y,{}]:[d,y,{onFocus:ep(T,E),onBlur:ep(b,_),onMouseEnter:ep(u,E),onMouseLeave:ep(x,_),onTouchStart:ep(f,E)}]:[!1,y,{}]}function ep(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function UC({page:e,...t}){let{router:r}=tw(),s=Z.useMemo(()=>W1(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?Z.createElement(HC,{page:e,matches:s,...t}):null}function FC(e){let{manifest:t,routeModules:r}=nw(),[s,l]=Z.useState([]);return Z.useEffect(()=>{let d=!1;return OC(e,t,r).then(C=>{d||l(C)}),()=>{d=!0}},[e,t,r]),s}function HC({page:e,matches:t,...r}){let s=tl(),{manifest:l,routeModules:d}=nw(),{basename:C}=tw(),{loaderData:T,matches:b}=BC(),u=Z.useMemo(()=>Fb(e,t,b,l,s,"data"),[e,t,b,l,s]),x=Z.useMemo(()=>Fb(e,t,b,l,s,"assets"),[e,t,b,l,s]),f=Z.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let _=new Set,m=!1;if(t.forEach(w=>{let U=l.routes[w.route.id];!U||!U.hasLoader||(!u.some(g=>g.route.id===w.route.id)&&w.route.id in T&&d[w.route.id]?.shouldRevalidate||U.hasClientLoader?m=!0:_.add(w.route.id))}),_.size===0)return[];let k=NC(e,C,"data");return m&&_.size>0&&k.searchParams.set("_routes",t.filter(w=>_.has(w.route.id)).map(w=>w.route.id).join(",")),[k.pathname+k.search]},[C,T,s,l,u,t,e,d]),y=Z.useMemo(()=>MC(x,l),[x,l]),E=FC(x);return Z.createElement(Z.Fragment,null,f.map(_=>Z.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...r})),y.map(_=>Z.createElement("link",{key:_,rel:"modulepreload",href:_,...r})),E.map(({key:_,link:m})=>Z.createElement("link",{key:_,...m})))}function VC(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var rw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rw&&(window.__reactRouterVersion="7.7.0")}catch{}function qC({basename:e,children:t,window:r}){let s=Z.useRef();s.current==null&&(s.current=Pk({window:r,v5Compat:!0}));let l=s.current,[d,C]=Z.useState({action:l.action,location:l.location}),T=Z.useCallback(b=>{Z.startTransition(()=>C(b))},[C]);return Z.useLayoutEffect(()=>l.listen(T),[l,T]),Z.createElement(_C,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:l})}var aw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ns=Z.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:l,reloadDocument:d,replace:C,state:T,target:b,to:u,preventScrollReset:x,viewTransition:f,...y},E){let{basename:_}=Z.useContext(el),m=typeof u=="string"&&aw.test(u),k,w=!1;if(typeof u=="string"&&m&&(k=u,rw))try{let S=new URL(window.location.href),p=u.startsWith("//")?new URL(S.protocol+u):new URL(u),D=ru(p.pathname,_);p.origin===S.origin&&D!=null?u=D+p.search+p.hash:w=!0}catch{Cc(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=nC(u,{relative:l}),[g,A,P]=zC(s,y),z=GC(u,{replace:C,state:T,target:b,preventScrollReset:x,relative:l,viewTransition:f});function N(S){t&&t(S),S.defaultPrevented||z(S)}let R=Z.createElement("a",{...y,...P,href:k||U,onClick:w||d?t:N,ref:VC(E,A),target:b,"data-discover":!m&&r==="render"?"true":void 0});return g&&!m?Z.createElement(Z.Fragment,null,R,Z.createElement(UC,{page:U})):R});ns.displayName="Link";var WC=Z.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:l=!1,style:d,to:C,viewTransition:T,children:b,...u},x){let f=Op(C,{relative:u.relative}),y=tl(),E=Z.useContext(Nm),{navigator:_,basename:m}=Z.useContext(el),k=E!=null&&JC(f)&&T===!0,w=_.encodeLocation?_.encodeLocation(f).pathname:f.pathname,U=y.pathname,g=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(U=U.toLowerCase(),g=g?g.toLowerCase():null,w=w.toLowerCase()),g&&m&&(g=ru(g,m)||g);const A=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let P=U===w||!l&&U.startsWith(w)&&U.charAt(A)==="/",z=g!=null&&(g===w||!l&&g.startsWith(w)&&g.charAt(w.length)==="/"),N={isActive:P,isPending:z,isTransitioning:k},R=P?t:void 0,S;typeof s=="function"?S=s(N):S=[s,P?"active":null,z?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let p=typeof d=="function"?d(N):d;return Z.createElement(ns,{...u,"aria-current":R,className:S,ref:x,style:p,to:C,viewTransition:T},typeof b=="function"?b(N):b)});WC.displayName="NavLink";var $C=Z.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:l,state:d,method:C=Kf,action:T,onSubmit:b,relative:u,preventScrollReset:x,viewTransition:f,...y},E)=>{let _=QC(),m=XC(T,{relative:u}),k=C.toLowerCase()==="get"?"get":"post",w=typeof T=="string"&&aw.test(T),U=g=>{if(b&&b(g),g.defaultPrevented)return;g.preventDefault();let A=g.nativeEvent.submitter,P=A?.getAttribute("formmethod")||C;_(A||g.currentTarget,{fetcherKey:t,method:P,navigate:r,replace:l,state:d,relative:u,preventScrollReset:x,viewTransition:f})};return Z.createElement("form",{ref:E,method:k,action:m,onSubmit:s?b:U,...y,"data-discover":!w&&e==="render"?"true":void 0})});$C.displayName="Form";function ZC(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sw(e){let t=Z.useContext(uh);return ks(t,ZC(e)),t}function GC(e,{target:t,replace:r,state:s,preventScrollReset:l,relative:d,viewTransition:C}={}){let T=fs(),b=tl(),u=Op(e,{relative:d});return Z.useCallback(x=>{if(EC(x,t)){x.preventDefault();let f=r!==void 0?r:yp(b)===yp(u);T(e,{replace:f,state:s,preventScrollReset:l,relative:d,viewTransition:C})}},[b,T,u,r,s,t,e,l,d,C])}function D0(e){Cc(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=Z.useRef($v(e)),r=Z.useRef(!1),s=tl(),l=Z.useMemo(()=>kC(s.search,r.current?null:t.current),[s.search]),d=fs(),C=Z.useCallback((T,b)=>{const u=$v(typeof T=="function"?T(new URLSearchParams(l)):T);r.current=!0,d("?"+u,b)},[d,l]);return[l,C]}var YC=0,KC=()=>`__${String(++YC)}__`;function QC(){let{router:e}=sw("useSubmit"),{basename:t}=Z.useContext(el),r=mC();return Z.useCallback(async(s,l={})=>{let{action:d,method:C,encType:T,formData:b,body:u}=PC(s,t);if(l.navigate===!1){let x=l.fetcherKey||KC();await e.fetch(x,r,l.action||d,{preventScrollReset:l.preventScrollReset,formData:b,body:u,formMethod:l.method||C,formEncType:l.encType||T,flushSync:l.flushSync})}else await e.navigate(l.action||d,{preventScrollReset:l.preventScrollReset,formData:b,body:u,formMethod:l.method||C,formEncType:l.encType||T,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,r])}function XC(e,{relative:t}={}){let{basename:r}=Z.useContext(el),s=Z.useContext(Pc);ks(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),d={...Op(e||".",{relative:t})},C=tl();if(e==null){d.search=C.search;let T=new URLSearchParams(d.search),b=T.getAll("index");if(b.some(x=>x==="")){T.delete("index"),b.filter(f=>f).forEach(f=>T.append("index",f));let x=T.toString();d.search=x?`?${x}`:""}}return(!e||e===".")&&l.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:eu([r,d.pathname])),yp(d)}function JC(e,t={}){let r=Z.useContext(Y1);ks(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=sw("useViewTransitionState"),l=Op(e,{relative:t.relative});if(!r.isTransitioning)return!1;let d=ru(r.currentLocation.pathname,s)||r.currentLocation.pathname,C=ru(r.nextLocation.pathname,s)||r.nextLocation.pathname;return cm(l.pathname,C)!=null||cm(l.pathname,d)!=null}var iw=q1();const ow=S0(iw);function cw(e,t){return function(){return e.apply(t,arguments)}}const{toString:eT}=Object.prototype,{getPrototypeOf:A0}=Object,{iterator:Am,toStringTag:lw}=Symbol,Om=(e=>t=>{const r=eT.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),nl=e=>(e=e.toLowerCase(),t=>Om(t)===e),Mm=e=>t=>typeof t===e,{isArray:ph}=Array,_p=Mm("undefined");function Mp(e){return e!==null&&!_p(e)&&e.constructor!==null&&!_p(e.constructor)&&Vo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const uw=nl("ArrayBuffer");function tT(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&uw(e.buffer),t}const nT=Mm("string"),Vo=Mm("function"),dw=Mm("number"),jp=e=>e!==null&&typeof e=="object",rT=e=>e===!0||e===!1,Xf=e=>{if(Om(e)!=="object")return!1;const t=A0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(lw in e)&&!(Am in e)},aT=e=>{if(!jp(e)||Mp(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},sT=nl("Date"),iT=nl("File"),oT=nl("Blob"),cT=nl("FileList"),lT=e=>jp(e)&&Vo(e.pipe),uT=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Vo(e.append)&&((t=Om(e))==="formdata"||t==="object"&&Vo(e.toString)&&e.toString()==="[object FormData]"))},dT=nl("URLSearchParams"),[hT,pT,fT,mT]=["ReadableStream","Request","Response","Headers"].map(nl),gT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lp(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,l;if(typeof e!="object"&&(e=[e]),ph(e))for(s=0,l=e.length;s<l;s++)t.call(null,e[s],s,e);else{if(Mp(e))return;const d=r?Object.getOwnPropertyNames(e):Object.keys(e),C=d.length;let T;for(s=0;s<C;s++)T=d[s],t.call(null,e[T],T,e)}}function hw(e,t){if(Mp(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,l;for(;s-- >0;)if(l=r[s],t===l.toLowerCase())return l;return null}const nd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pw=e=>!_p(e)&&e!==nd;function Zv(){const{caseless:e}=pw(this)&&this||{},t={},r=(s,l)=>{const d=e&&hw(t,l)||l;Xf(t[d])&&Xf(s)?t[d]=Zv(t[d],s):Xf(s)?t[d]=Zv({},s):ph(s)?t[d]=s.slice():t[d]=s};for(let s=0,l=arguments.length;s<l;s++)arguments[s]&&Lp(arguments[s],r);return t}const vT=(e,t,r,{allOwnKeys:s}={})=>(Lp(t,(l,d)=>{r&&Vo(l)?e[d]=cw(l,r):e[d]=l},{allOwnKeys:s}),e),yT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_T=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},bT=(e,t,r,s)=>{let l,d,C;const T={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),d=l.length;d-- >0;)C=l[d],(!s||s(C,e,t))&&!T[C]&&(t[C]=e[C],T[C]=!0);e=r!==!1&&A0(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},xT=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},wT=e=>{if(!e)return null;if(ph(e))return e;let t=e.length;if(!dw(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},ST=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&A0(Uint8Array)),RT=(e,t)=>{const s=(e&&e[Am]).call(e);let l;for(;(l=s.next())&&!l.done;){const d=l.value;t.call(e,d[0],d[1])}},ET=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},kT=nl("HTMLFormElement"),CT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,l){return s.toUpperCase()+l}),Hb=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),TT=nl("RegExp"),fw=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Lp(r,(l,d)=>{let C;(C=t(l,d,e))!==!1&&(s[d]=C||l)}),Object.defineProperties(e,s)},PT=e=>{fw(e,(t,r)=>{if(Vo(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(Vo(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},NT=(e,t)=>{const r={},s=l=>{l.forEach(d=>{r[d]=!0})};return ph(e)?s(e):s(String(e).split(t)),r},DT=()=>{},AT=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function OT(e){return!!(e&&Vo(e.append)&&e[lw]==="FormData"&&e[Am])}const MT=e=>{const t=new Array(10),r=(s,l)=>{if(jp(s)){if(t.indexOf(s)>=0)return;if(Mp(s))return s;if(!("toJSON"in s)){t[l]=s;const d=ph(s)?[]:{};return Lp(s,(C,T)=>{const b=r(C,l+1);!_p(b)&&(d[T]=b)}),t[l]=void 0,d}}return s};return r(e,0)},jT=nl("AsyncFunction"),LT=e=>e&&(jp(e)||Vo(e))&&Vo(e.then)&&Vo(e.catch),mw=((e,t)=>e?setImmediate:t?((r,s)=>(nd.addEventListener("message",({source:l,data:d})=>{l===nd&&d===r&&s.length&&s.shift()()},!1),l=>{s.push(l),nd.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Vo(nd.postMessage)),IT=typeof queueMicrotask<"u"?queueMicrotask.bind(nd):typeof process<"u"&&process.nextTick||mw,BT=e=>e!=null&&Vo(e[Am]),Rt={isArray:ph,isArrayBuffer:uw,isBuffer:Mp,isFormData:uT,isArrayBufferView:tT,isString:nT,isNumber:dw,isBoolean:rT,isObject:jp,isPlainObject:Xf,isEmptyObject:aT,isReadableStream:hT,isRequest:pT,isResponse:fT,isHeaders:mT,isUndefined:_p,isDate:sT,isFile:iT,isBlob:oT,isRegExp:TT,isFunction:Vo,isStream:lT,isURLSearchParams:dT,isTypedArray:ST,isFileList:cT,forEach:Lp,merge:Zv,extend:vT,trim:gT,stripBOM:yT,inherits:_T,toFlatObject:bT,kindOf:Om,kindOfTest:nl,endsWith:xT,toArray:wT,forEachEntry:RT,matchAll:ET,isHTMLForm:kT,hasOwnProperty:Hb,hasOwnProp:Hb,reduceDescriptors:fw,freezeMethods:PT,toObjectSet:NT,toCamelCase:CT,noop:DT,toFiniteNumber:AT,findKey:hw,global:nd,isContextDefined:pw,isSpecCompliantForm:OT,toJSONObject:MT,isAsyncFn:jT,isThenable:LT,setImmediate:mw,asap:IT,isIterable:BT};function aa(e,t,r,s,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),l&&(this.response=l,this.status=l.status?l.status:null)}Rt.inherits(aa,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Rt.toJSONObject(this.config),code:this.code,status:this.status}}});const gw=aa.prototype,vw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{vw[e]={value:e}});Object.defineProperties(aa,vw);Object.defineProperty(gw,"isAxiosError",{value:!0});aa.from=(e,t,r,s,l,d)=>{const C=Object.create(gw);return Rt.toFlatObject(e,C,function(b){return b!==Error.prototype},T=>T!=="isAxiosError"),aa.call(C,e.message,t,r,s,l),C.cause=e,C.name=e.name,d&&Object.assign(C,d),C};const zT=null;function Gv(e){return Rt.isPlainObject(e)||Rt.isArray(e)}function yw(e){return Rt.endsWith(e,"[]")?e.slice(0,-2):e}function Vb(e,t,r){return e?e.concat(t).map(function(l,d){return l=yw(l),!r&&d?"["+l+"]":l}).join(r?".":""):t}function UT(e){return Rt.isArray(e)&&!e.some(Gv)}const FT=Rt.toFlatObject(Rt,{},null,function(t){return/^is[A-Z]/.test(t)});function jm(e,t,r){if(!Rt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Rt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,k){return!Rt.isUndefined(k[m])});const s=r.metaTokens,l=r.visitor||x,d=r.dots,C=r.indexes,b=(r.Blob||typeof Blob<"u"&&Blob)&&Rt.isSpecCompliantForm(t);if(!Rt.isFunction(l))throw new TypeError("visitor must be a function");function u(_){if(_===null)return"";if(Rt.isDate(_))return _.toISOString();if(Rt.isBoolean(_))return _.toString();if(!b&&Rt.isBlob(_))throw new aa("Blob is not supported. Use a Buffer instead.");return Rt.isArrayBuffer(_)||Rt.isTypedArray(_)?b&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function x(_,m,k){let w=_;if(_&&!k&&typeof _=="object"){if(Rt.endsWith(m,"{}"))m=s?m:m.slice(0,-2),_=JSON.stringify(_);else if(Rt.isArray(_)&&UT(_)||(Rt.isFileList(_)||Rt.endsWith(m,"[]"))&&(w=Rt.toArray(_)))return m=yw(m),w.forEach(function(g,A){!(Rt.isUndefined(g)||g===null)&&t.append(C===!0?Vb([m],A,d):C===null?m:m+"[]",u(g))}),!1}return Gv(_)?!0:(t.append(Vb(k,m,d),u(_)),!1)}const f=[],y=Object.assign(FT,{defaultVisitor:x,convertValue:u,isVisitable:Gv});function E(_,m){if(!Rt.isUndefined(_)){if(f.indexOf(_)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(_),Rt.forEach(_,function(w,U){(!(Rt.isUndefined(w)||w===null)&&l.call(t,w,Rt.isString(U)?U.trim():U,m,y))===!0&&E(w,m?m.concat(U):[U])}),f.pop()}}if(!Rt.isObject(e))throw new TypeError("data must be an object");return E(e),t}function qb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function O0(e,t){this._pairs=[],e&&jm(e,this,t)}const _w=O0.prototype;_w.append=function(t,r){this._pairs.push([t,r])};_w.toString=function(t){const r=t?function(s){return t.call(this,s,qb)}:qb;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function HT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bw(e,t,r){if(!t)return e;const s=r&&r.encode||HT;Rt.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let d;if(l?d=l(t,r):d=Rt.isURLSearchParams(t)?t.toString():new O0(t,r).toString(s),d){const C=e.indexOf("#");C!==-1&&(e=e.slice(0,C)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class Wb{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Rt.forEach(this.handlers,function(s){s!==null&&t(s)})}}const xw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},VT=typeof URLSearchParams<"u"?URLSearchParams:O0,qT=typeof FormData<"u"?FormData:null,WT=typeof Blob<"u"?Blob:null,$T={isBrowser:!0,classes:{URLSearchParams:VT,FormData:qT,Blob:WT},protocols:["http","https","file","blob","url","data"]},M0=typeof window<"u"&&typeof document<"u",Yv=typeof navigator=="object"&&navigator||void 0,ZT=M0&&(!Yv||["ReactNative","NativeScript","NS"].indexOf(Yv.product)<0),GT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",YT=M0&&window.location.href||"http://localhost",KT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:M0,hasStandardBrowserEnv:ZT,hasStandardBrowserWebWorkerEnv:GT,navigator:Yv,origin:YT},Symbol.toStringTag,{value:"Module"})),po={...KT,...$T};function QT(e,t){return jm(e,new po.classes.URLSearchParams,{visitor:function(r,s,l,d){return po.isNode&&Rt.isBuffer(r)?(this.append(s,r.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...t})}function XT(e){return Rt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function JT(e){const t={},r=Object.keys(e);let s;const l=r.length;let d;for(s=0;s<l;s++)d=r[s],t[d]=e[d];return t}function ww(e){function t(r,s,l,d){let C=r[d++];if(C==="__proto__")return!0;const T=Number.isFinite(+C),b=d>=r.length;return C=!C&&Rt.isArray(l)?l.length:C,b?(Rt.hasOwnProp(l,C)?l[C]=[l[C],s]:l[C]=s,!T):((!l[C]||!Rt.isObject(l[C]))&&(l[C]=[]),t(r,s,l[C],d)&&Rt.isArray(l[C])&&(l[C]=JT(l[C])),!T)}if(Rt.isFormData(e)&&Rt.isFunction(e.entries)){const r={};return Rt.forEachEntry(e,(s,l)=>{t(XT(s),l,r,0)}),r}return null}function e4(e,t,r){if(Rt.isString(e))try{return(t||JSON.parse)(e),Rt.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const Ip={transitional:xw,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",l=s.indexOf("application/json")>-1,d=Rt.isObject(t);if(d&&Rt.isHTMLForm(t)&&(t=new FormData(t)),Rt.isFormData(t))return l?JSON.stringify(ww(t)):t;if(Rt.isArrayBuffer(t)||Rt.isBuffer(t)||Rt.isStream(t)||Rt.isFile(t)||Rt.isBlob(t)||Rt.isReadableStream(t))return t;if(Rt.isArrayBufferView(t))return t.buffer;if(Rt.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let T;if(d){if(s.indexOf("application/x-www-form-urlencoded")>-1)return QT(t,this.formSerializer).toString();if((T=Rt.isFileList(t))||s.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return jm(T?{"files[]":t}:t,b&&new b,this.formSerializer)}}return d||l?(r.setContentType("application/json",!1),e4(t)):t}],transformResponse:[function(t){const r=this.transitional||Ip.transitional,s=r&&r.forcedJSONParsing,l=this.responseType==="json";if(Rt.isResponse(t)||Rt.isReadableStream(t))return t;if(t&&Rt.isString(t)&&(s&&!this.responseType||l)){const C=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(t)}catch(T){if(C)throw T.name==="SyntaxError"?aa.from(T,aa.ERR_BAD_RESPONSE,this,null,this.response):T}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:po.classes.FormData,Blob:po.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Rt.forEach(["delete","get","head","post","put","patch"],e=>{Ip.headers[e]={}});const t4=Rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),n4=e=>{const t={};let r,s,l;return e&&e.split(`
`).forEach(function(C){l=C.indexOf(":"),r=C.substring(0,l).trim().toLowerCase(),s=C.substring(l+1).trim(),!(!r||t[r]&&t4[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},$b=Symbol("internals");function tp(e){return e&&String(e).trim().toLowerCase()}function Jf(e){return e===!1||e==null?e:Rt.isArray(e)?e.map(Jf):String(e)}function r4(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const a4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function vv(e,t,r,s,l){if(Rt.isFunction(s))return s.call(this,t,r);if(l&&(t=r),!!Rt.isString(t)){if(Rt.isString(s))return t.indexOf(s)!==-1;if(Rt.isRegExp(s))return s.test(t)}}function s4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function i4(e,t){const r=Rt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(l,d,C){return this[s].call(this,t,l,d,C)},configurable:!0})})}let qo=class{constructor(t){t&&this.set(t)}set(t,r,s){const l=this;function d(T,b,u){const x=tp(b);if(!x)throw new Error("header name must be a non-empty string");const f=Rt.findKey(l,x);(!f||l[f]===void 0||u===!0||u===void 0&&l[f]!==!1)&&(l[f||b]=Jf(T))}const C=(T,b)=>Rt.forEach(T,(u,x)=>d(u,x,b));if(Rt.isPlainObject(t)||t instanceof this.constructor)C(t,r);else if(Rt.isString(t)&&(t=t.trim())&&!a4(t))C(n4(t),r);else if(Rt.isObject(t)&&Rt.isIterable(t)){let T={},b,u;for(const x of t){if(!Rt.isArray(x))throw TypeError("Object iterator must return a key-value pair");T[u=x[0]]=(b=T[u])?Rt.isArray(b)?[...b,x[1]]:[b,x[1]]:x[1]}C(T,r)}else t!=null&&d(r,t,s);return this}get(t,r){if(t=tp(t),t){const s=Rt.findKey(this,t);if(s){const l=this[s];if(!r)return l;if(r===!0)return r4(l);if(Rt.isFunction(r))return r.call(this,l,s);if(Rt.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=tp(t),t){const s=Rt.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||vv(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let l=!1;function d(C){if(C=tp(C),C){const T=Rt.findKey(s,C);T&&(!r||vv(s,s[T],T,r))&&(delete s[T],l=!0)}}return Rt.isArray(t)?t.forEach(d):d(t),l}clear(t){const r=Object.keys(this);let s=r.length,l=!1;for(;s--;){const d=r[s];(!t||vv(this,this[d],d,t,!0))&&(delete this[d],l=!0)}return l}normalize(t){const r=this,s={};return Rt.forEach(this,(l,d)=>{const C=Rt.findKey(s,d);if(C){r[C]=Jf(l),delete r[d];return}const T=t?s4(d):String(d).trim();T!==d&&delete r[d],r[T]=Jf(l),s[T]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Rt.forEach(this,(s,l)=>{s!=null&&s!==!1&&(r[l]=t&&Rt.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(l=>s.set(l)),s}static accessor(t){const s=(this[$b]=this[$b]={accessors:{}}).accessors,l=this.prototype;function d(C){const T=tp(C);s[T]||(i4(l,C),s[T]=!0)}return Rt.isArray(t)?t.forEach(d):d(t),this}};qo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Rt.reduceDescriptors(qo.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});Rt.freezeMethods(qo);function yv(e,t){const r=this||Ip,s=t||r,l=qo.from(s.headers);let d=s.data;return Rt.forEach(e,function(T){d=T.call(r,d,l.normalize(),t?t.status:void 0)}),l.normalize(),d}function Sw(e){return!!(e&&e.__CANCEL__)}function fh(e,t,r){aa.call(this,e??"canceled",aa.ERR_CANCELED,t,r),this.name="CanceledError"}Rt.inherits(fh,aa,{__CANCEL__:!0});function Rw(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new aa("Request failed with status code "+r.status,[aa.ERR_BAD_REQUEST,aa.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function o4(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function c4(e,t){e=e||10;const r=new Array(e),s=new Array(e);let l=0,d=0,C;return t=t!==void 0?t:1e3,function(b){const u=Date.now(),x=s[d];C||(C=u),r[l]=b,s[l]=u;let f=d,y=0;for(;f!==l;)y+=r[f++],f=f%e;if(l=(l+1)%e,l===d&&(d=(d+1)%e),u-C<t)return;const E=x&&u-x;return E?Math.round(y*1e3/E):void 0}}function l4(e,t){let r=0,s=1e3/t,l,d;const C=(u,x=Date.now())=>{r=x,l=null,d&&(clearTimeout(d),d=null),e(...u)};return[(...u)=>{const x=Date.now(),f=x-r;f>=s?C(u,x):(l=u,d||(d=setTimeout(()=>{d=null,C(l)},s-f)))},()=>l&&C(l)]}const lm=(e,t,r=3)=>{let s=0;const l=c4(50,250);return l4(d=>{const C=d.loaded,T=d.lengthComputable?d.total:void 0,b=C-s,u=l(b),x=C<=T;s=C;const f={loaded:C,total:T,progress:T?C/T:void 0,bytes:b,rate:u||void 0,estimated:u&&T&&x?(T-C)/u:void 0,event:d,lengthComputable:T!=null,[t?"download":"upload"]:!0};e(f)},r)},Zb=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Gb=e=>(...t)=>Rt.asap(()=>e(...t)),u4=po.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,po.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(po.origin),po.navigator&&/(msie|trident)/i.test(po.navigator.userAgent)):()=>!0,d4=po.hasStandardBrowserEnv?{write(e,t,r,s,l,d){const C=[e+"="+encodeURIComponent(t)];Rt.isNumber(r)&&C.push("expires="+new Date(r).toGMTString()),Rt.isString(s)&&C.push("path="+s),Rt.isString(l)&&C.push("domain="+l),d===!0&&C.push("secure"),document.cookie=C.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function h4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function p4(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ew(e,t,r){let s=!h4(t);return e&&(s||r==!1)?p4(e,t):t}const Yb=e=>e instanceof qo?{...e}:e;function dd(e,t){t=t||{};const r={};function s(u,x,f,y){return Rt.isPlainObject(u)&&Rt.isPlainObject(x)?Rt.merge.call({caseless:y},u,x):Rt.isPlainObject(x)?Rt.merge({},x):Rt.isArray(x)?x.slice():x}function l(u,x,f,y){if(Rt.isUndefined(x)){if(!Rt.isUndefined(u))return s(void 0,u,f,y)}else return s(u,x,f,y)}function d(u,x){if(!Rt.isUndefined(x))return s(void 0,x)}function C(u,x){if(Rt.isUndefined(x)){if(!Rt.isUndefined(u))return s(void 0,u)}else return s(void 0,x)}function T(u,x,f){if(f in t)return s(u,x);if(f in e)return s(void 0,u)}const b={url:d,method:d,data:d,baseURL:C,transformRequest:C,transformResponse:C,paramsSerializer:C,timeout:C,timeoutMessage:C,withCredentials:C,withXSRFToken:C,adapter:C,responseType:C,xsrfCookieName:C,xsrfHeaderName:C,onUploadProgress:C,onDownloadProgress:C,decompress:C,maxContentLength:C,maxBodyLength:C,beforeRedirect:C,transport:C,httpAgent:C,httpsAgent:C,cancelToken:C,socketPath:C,responseEncoding:C,validateStatus:T,headers:(u,x,f)=>l(Yb(u),Yb(x),f,!0)};return Rt.forEach(Object.keys({...e,...t}),function(x){const f=b[x]||l,y=f(e[x],t[x],x);Rt.isUndefined(y)&&f!==T||(r[x]=y)}),r}const kw=e=>{const t=dd({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:l,xsrfCookieName:d,headers:C,auth:T}=t;t.headers=C=qo.from(C),t.url=bw(Ew(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),T&&C.set("Authorization","Basic "+btoa((T.username||"")+":"+(T.password?unescape(encodeURIComponent(T.password)):"")));let b;if(Rt.isFormData(r)){if(po.hasStandardBrowserEnv||po.hasStandardBrowserWebWorkerEnv)C.setContentType(void 0);else if((b=C.getContentType())!==!1){const[u,...x]=b?b.split(";").map(f=>f.trim()).filter(Boolean):[];C.setContentType([u||"multipart/form-data",...x].join("; "))}}if(po.hasStandardBrowserEnv&&(s&&Rt.isFunction(s)&&(s=s(t)),s||s!==!1&&u4(t.url))){const u=l&&d&&d4.read(d);u&&C.set(l,u)}return t},f4=typeof XMLHttpRequest<"u",m4=f4&&function(e){return new Promise(function(r,s){const l=kw(e);let d=l.data;const C=qo.from(l.headers).normalize();let{responseType:T,onUploadProgress:b,onDownloadProgress:u}=l,x,f,y,E,_;function m(){E&&E(),_&&_(),l.cancelToken&&l.cancelToken.unsubscribe(x),l.signal&&l.signal.removeEventListener("abort",x)}let k=new XMLHttpRequest;k.open(l.method.toUpperCase(),l.url,!0),k.timeout=l.timeout;function w(){if(!k)return;const g=qo.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),P={data:!T||T==="text"||T==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:g,config:e,request:k};Rw(function(N){r(N),m()},function(N){s(N),m()},P),k=null}"onloadend"in k?k.onloadend=w:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(w)},k.onabort=function(){k&&(s(new aa("Request aborted",aa.ECONNABORTED,e,k)),k=null)},k.onerror=function(){s(new aa("Network Error",aa.ERR_NETWORK,e,k)),k=null},k.ontimeout=function(){let A=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const P=l.transitional||xw;l.timeoutErrorMessage&&(A=l.timeoutErrorMessage),s(new aa(A,P.clarifyTimeoutError?aa.ETIMEDOUT:aa.ECONNABORTED,e,k)),k=null},d===void 0&&C.setContentType(null),"setRequestHeader"in k&&Rt.forEach(C.toJSON(),function(A,P){k.setRequestHeader(P,A)}),Rt.isUndefined(l.withCredentials)||(k.withCredentials=!!l.withCredentials),T&&T!=="json"&&(k.responseType=l.responseType),u&&([y,_]=lm(u,!0),k.addEventListener("progress",y)),b&&k.upload&&([f,E]=lm(b),k.upload.addEventListener("progress",f),k.upload.addEventListener("loadend",E)),(l.cancelToken||l.signal)&&(x=g=>{k&&(s(!g||g.type?new fh(null,e,k):g),k.abort(),k=null)},l.cancelToken&&l.cancelToken.subscribe(x),l.signal&&(l.signal.aborted?x():l.signal.addEventListener("abort",x)));const U=o4(l.url);if(U&&po.protocols.indexOf(U)===-1){s(new aa("Unsupported protocol "+U+":",aa.ERR_BAD_REQUEST,e));return}k.send(d||null)})},g4=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,l;const d=function(u){if(!l){l=!0,T();const x=u instanceof Error?u:this.reason;s.abort(x instanceof aa?x:new fh(x instanceof Error?x.message:x))}};let C=t&&setTimeout(()=>{C=null,d(new aa(`timeout ${t} of ms exceeded`,aa.ETIMEDOUT))},t);const T=()=>{e&&(C&&clearTimeout(C),C=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(d):u.removeEventListener("abort",d)}),e=null)};e.forEach(u=>u.addEventListener("abort",d));const{signal:b}=s;return b.unsubscribe=()=>Rt.asap(T),b}},v4=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,l;for(;s<r;)l=s+t,yield e.slice(s,l),s=l},y4=async function*(e,t){for await(const r of _4(e))yield*v4(r,t)},_4=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},Kb=(e,t,r,s)=>{const l=y4(e,t);let d=0,C,T=b=>{C||(C=!0,s&&s(b))};return new ReadableStream({async pull(b){try{const{done:u,value:x}=await l.next();if(u){T(),b.close();return}let f=x.byteLength;if(r){let y=d+=f;r(y)}b.enqueue(new Uint8Array(x))}catch(u){throw T(u),u}},cancel(b){return T(b),l.return()}},{highWaterMark:2})},Lm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Cw=Lm&&typeof ReadableStream=="function",b4=Lm&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Tw=(e,...t)=>{try{return!!e(...t)}catch{return!1}},x4=Cw&&Tw(()=>{let e=!1;const t=new Request(po.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Qb=64*1024,Kv=Cw&&Tw(()=>Rt.isReadableStream(new Response("").body)),um={stream:Kv&&(e=>e.body)};Lm&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!um[t]&&(um[t]=Rt.isFunction(e[t])?r=>r[t]():(r,s)=>{throw new aa(`Response type '${t}' is not supported`,aa.ERR_NOT_SUPPORT,s)})})})(new Response);const w4=async e=>{if(e==null)return 0;if(Rt.isBlob(e))return e.size;if(Rt.isSpecCompliantForm(e))return(await new Request(po.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Rt.isArrayBufferView(e)||Rt.isArrayBuffer(e))return e.byteLength;if(Rt.isURLSearchParams(e)&&(e=e+""),Rt.isString(e))return(await b4(e)).byteLength},S4=async(e,t)=>{const r=Rt.toFiniteNumber(e.getContentLength());return r??w4(t)},R4=Lm&&(async e=>{let{url:t,method:r,data:s,signal:l,cancelToken:d,timeout:C,onDownloadProgress:T,onUploadProgress:b,responseType:u,headers:x,withCredentials:f="same-origin",fetchOptions:y}=kw(e);u=u?(u+"").toLowerCase():"text";let E=g4([l,d&&d.toAbortSignal()],C),_;const m=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let k;try{if(b&&x4&&r!=="get"&&r!=="head"&&(k=await S4(x,s))!==0){let P=new Request(t,{method:"POST",body:s,duplex:"half"}),z;if(Rt.isFormData(s)&&(z=P.headers.get("content-type"))&&x.setContentType(z),P.body){const[N,R]=Zb(k,lm(Gb(b)));s=Kb(P.body,Qb,N,R)}}Rt.isString(f)||(f=f?"include":"omit");const w="credentials"in Request.prototype;_=new Request(t,{...y,signal:E,method:r.toUpperCase(),headers:x.normalize().toJSON(),body:s,duplex:"half",credentials:w?f:void 0});let U=await fetch(_,y);const g=Kv&&(u==="stream"||u==="response");if(Kv&&(T||g&&m)){const P={};["status","statusText","headers"].forEach(S=>{P[S]=U[S]});const z=Rt.toFiniteNumber(U.headers.get("content-length")),[N,R]=T&&Zb(z,lm(Gb(T),!0))||[];U=new Response(Kb(U.body,Qb,N,()=>{R&&R(),m&&m()}),P)}u=u||"text";let A=await um[Rt.findKey(um,u)||"text"](U,e);return!g&&m&&m(),await new Promise((P,z)=>{Rw(P,z,{data:A,headers:qo.from(U.headers),status:U.status,statusText:U.statusText,config:e,request:_})})}catch(w){throw m&&m(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new aa("Network Error",aa.ERR_NETWORK,e,_),{cause:w.cause||w}):aa.from(w,w&&w.code,e,_)}}),Qv={http:zT,xhr:m4,fetch:R4};Rt.forEach(Qv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Xb=e=>`- ${e}`,E4=e=>Rt.isFunction(e)||e===null||e===!1,Pw={getAdapter:e=>{e=Rt.isArray(e)?e:[e];const{length:t}=e;let r,s;const l={};for(let d=0;d<t;d++){r=e[d];let C;if(s=r,!E4(r)&&(s=Qv[(C=String(r)).toLowerCase()],s===void 0))throw new aa(`Unknown adapter '${C}'`);if(s)break;l[C||"#"+d]=s}if(!s){const d=Object.entries(l).map(([T,b])=>`adapter ${T} `+(b===!1?"is not supported by the environment":"is not available in the build"));let C=t?d.length>1?`since :
`+d.map(Xb).join(`
`):" "+Xb(d[0]):"as no adapter specified";throw new aa("There is no suitable adapter to dispatch the request "+C,"ERR_NOT_SUPPORT")}return s},adapters:Qv};function _v(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fh(null,e)}function Jb(e){return _v(e),e.headers=qo.from(e.headers),e.data=yv.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Pw.getAdapter(e.adapter||Ip.adapter)(e).then(function(s){return _v(e),s.data=yv.call(e,e.transformResponse,s),s.headers=qo.from(s.headers),s},function(s){return Sw(s)||(_v(e),s&&s.response&&(s.response.data=yv.call(e,e.transformResponse,s.response),s.response.headers=qo.from(s.response.headers))),Promise.reject(s)})}const Nw="1.11.0",Im={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Im[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const ex={};Im.transitional=function(t,r,s){function l(d,C){return"[Axios v"+Nw+"] Transitional option '"+d+"'"+C+(s?". "+s:"")}return(d,C,T)=>{if(t===!1)throw new aa(l(C," has been removed"+(r?" in "+r:"")),aa.ERR_DEPRECATED);return r&&!ex[C]&&(ex[C]=!0,console.warn(l(C," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(d,C,T):!0}};Im.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function k4(e,t,r){if(typeof e!="object")throw new aa("options must be an object",aa.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let l=s.length;for(;l-- >0;){const d=s[l],C=t[d];if(C){const T=e[d],b=T===void 0||C(T,d,e);if(b!==!0)throw new aa("option "+d+" must be "+b,aa.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new aa("Unknown option "+d,aa.ERR_BAD_OPTION)}}const em={assertOptions:k4,validators:Im},hl=em.validators;let od=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Wb,response:new Wb}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";try{s.stack?d&&!String(s.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+d):s.stack=d}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=dd(this.defaults,r);const{transitional:s,paramsSerializer:l,headers:d}=r;s!==void 0&&em.assertOptions(s,{silentJSONParsing:hl.transitional(hl.boolean),forcedJSONParsing:hl.transitional(hl.boolean),clarifyTimeoutError:hl.transitional(hl.boolean)},!1),l!=null&&(Rt.isFunction(l)?r.paramsSerializer={serialize:l}:em.assertOptions(l,{encode:hl.function,serialize:hl.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),em.assertOptions(r,{baseUrl:hl.spelling("baseURL"),withXsrfToken:hl.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let C=d&&Rt.merge(d.common,d[r.method]);d&&Rt.forEach(["delete","get","head","post","put","patch","common"],_=>{delete d[_]}),r.headers=qo.concat(C,d);const T=[];let b=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(b=b&&m.synchronous,T.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let x,f=0,y;if(!b){const _=[Jb.bind(this),void 0];for(_.unshift(...T),_.push(...u),y=_.length,x=Promise.resolve(r);f<y;)x=x.then(_[f++],_[f++]);return x}y=T.length;let E=r;for(f=0;f<y;){const _=T[f++],m=T[f++];try{E=_(E)}catch(k){m.call(this,k);break}}try{x=Jb.call(this,E)}catch(_){return Promise.reject(_)}for(f=0,y=u.length;f<y;)x=x.then(u[f++],u[f++]);return x}getUri(t){t=dd(this.defaults,t);const r=Ew(t.baseURL,t.url,t.allowAbsoluteUrls);return bw(r,t.params,t.paramsSerializer)}};Rt.forEach(["delete","get","head","options"],function(t){od.prototype[t]=function(r,s){return this.request(dd(s||{},{method:t,url:r,data:(s||{}).data}))}});Rt.forEach(["post","put","patch"],function(t){function r(s){return function(d,C,T){return this.request(dd(T||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:d,data:C}))}}od.prototype[t]=r(),od.prototype[t+"Form"]=r(!0)});let C4=class Dw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(d){r=d});const s=this;this.promise.then(l=>{if(!s._listeners)return;let d=s._listeners.length;for(;d-- >0;)s._listeners[d](l);s._listeners=null}),this.promise.then=l=>{let d;const C=new Promise(T=>{s.subscribe(T),d=T}).then(l);return C.cancel=function(){s.unsubscribe(d)},C},t(function(d,C,T){s.reason||(s.reason=new fh(d,C,T),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Dw(function(l){t=l}),cancel:t}}};function T4(e){return function(r){return e.apply(null,r)}}function P4(e){return Rt.isObject(e)&&e.isAxiosError===!0}const Xv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xv).forEach(([e,t])=>{Xv[t]=e});function Aw(e){const t=new od(e),r=cw(od.prototype.request,t);return Rt.extend(r,od.prototype,t,{allOwnKeys:!0}),Rt.extend(r,t,null,{allOwnKeys:!0}),r.create=function(l){return Aw(dd(e,l))},r}const Bs=Aw(Ip);Bs.Axios=od;Bs.CanceledError=fh;Bs.CancelToken=C4;Bs.isCancel=Sw;Bs.VERSION=Nw;Bs.toFormData=jm;Bs.AxiosError=aa;Bs.Cancel=Bs.CanceledError;Bs.all=function(t){return Promise.all(t)};Bs.spread=T4;Bs.isAxiosError=P4;Bs.mergeConfig=dd;Bs.AxiosHeaders=qo;Bs.formToJSON=e=>ww(Rt.isHTMLForm(e)?new FormData(e):e);Bs.getAdapter=Pw.getAdapter;Bs.HttpStatusCode=Xv;Bs.default=Bs;const{Axios:Cz,AxiosError:Tz,CanceledError:Pz,isCancel:Nz,CancelToken:Dz,VERSION:Az,all:Oz,Cancel:Mz,isAxiosError:jz,spread:Lz,toFormData:Iz,AxiosHeaders:Bz,HttpStatusCode:zz,formToJSON:Uz,getAdapter:Fz,mergeConfig:Hz}=Bs,er=Bs.create({baseURL:"https://quickmedpk-87e7d3c6e100.herokuapp.com",headers:{"Content-Type":"application/json"}});if(typeof window<"u"){const e=localStorage.getItem("token");e&&(er.defaults.headers.Authorization=`${e}`)}const j0=e=>{if(!e)return;const t=e;localStorage.setItem("token",e),er.defaults.headers.common.Authorization=t},L0=()=>localStorage.removeItem("token"),Bm=e=>{let t=e.replace(/\D/g,"");return t=t.slice(0,13),t.length<=5?t:t.length<=12?t.slice(0,5)+"-"+t.slice(5):t.slice(0,5)+"-"+t.slice(5,12)+"-"+t.slice(12)},Ow=e=>/^\d{5}-\d{7}-\d{1}$/.test(e),Yu={validateToken:()=>er.get("/auth/me"),signInRequest:e=>er.post("/auth/login",e),signUpRequest:e=>er.post("/auth/signup",e),forgotPassword:e=>er.post("/auth/forgot-password",e),resetPassword:e=>er.post("/auth/reset-password",e),changePassword:e=>er.post("/auth/change-password",e),allUsers:()=>er.get("/auth/users")},$c={validateToken:()=>er.get("/doctor/me"),signUp:e=>er.post("/doctor/signup",e),login:e=>er.post("/doctor/login",e),forgotPassword:e=>er.post("/doctor/forgot-password",e),resetPassword:e=>er.post("/doctor/reset-password",e),changePassword:e=>er.post("/doctor/change-password",e),updateProfile:e=>er.post("/doctor/picture",e,{headers:{"Content-Type":"multipart/form-data"}}),uploadDocuments:e=>er.post("/doctor/documents",e,{headers:{"Content-Type":"multipart/form-data"}}),updateDoctorProfile:e=>er.put("/doctor",e),getAllPublicDoctors:()=>er.get("/auth/doctors"),recommendationsApiSearch:e=>er.post("")},Wl={validateToken:()=>er.get("/hospital/me"),signUp:e=>er.post("/hospital/signup",e,{headers:{"Content-Type":"multipart/form-data"}}),login:e=>er.post("/hospital/login",e),forgotPassword:e=>er.post("/hospital/forgot-password",e),resetPassword:e=>er.post("/hospital/reset-password",e),changePassword:e=>er.post("/hospital/change-password",e),updateProfile:(e,t)=>er.put(`/hospital/profile/${e}`,t),getProfile:e=>er.get(`/hospital/profile/${e}`),getAllPublicHospital:()=>er.get("/auth/hospitals")},Zs={validateToken:()=>er.get("/admin/me"),login:e=>er.post("/admin/login",e),getAllDoctor:()=>er.get("/admin/doctors"),getPendingDoctors:()=>er.get("/admin/doctors/pending"),getPendingHospitals:()=>er.get("/admin/hospitals/pending"),getApprovedDoctors:()=>er.get("/admin/doctors/verified"),getApprovedHospitals:()=>er.get("/admin/hospitals/verified"),getRejectedDoctors:()=>er.get("/admin/doctors/rejected"),getRejectedHospitals:()=>er.get("/admin/hospitals/rejected"),getDoctorsStatistics:()=>er.get("/admin/doctors/stats"),getHospitalStatistics:()=>er.get("/admin/hospitals/stats"),approveDoctor:e=>er.post(`/admin/doctors/verification/${e}`,{status:"verified"}),rejectDoctor:e=>er.post(`/admin/doctors/verification/${e}`,{status:"rejected"}),approveHospital:e=>er.post(`/admin/hospitals/verification/${e}`,{status:"verified"}),rejectHospital:(e,t)=>er.post(`/admin/hospitals/verification/${e}`,{status:"rejected",reason:t}),doctorAction:(e,t)=>er.post(`/admin/doctors/action/${e}`,{action:t}),hospitalAction:(e,t)=>er.post(`/admin/hospitals/action/${e}`,{action:t}),uploadDocuments:(e,t)=>er.post(`/admin/doctor/documents/${t}`,e,{headers:{"Content-Type":"multipart/form-data"}}),uploadHospitalsDocuments:(e,t)=>er.post(`/admin/hospitals/documents/${t}`,e,{headers:{"Content-Type":"multipart/form-data"}}),doctorProfilePicture:(e,t)=>er.post(`/admin/doctor/picture/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}}),hospitalProfilePicture:(e,t)=>er.post(`/admin/hospital/picture/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}}),updateDoctorDetails:(e,t)=>er.put(`/admin/doctor/${e}`,t)},Ku={getPlatformRatings:()=>er.get("/auth/platform-rating"),addDoctorRating:(e,t)=>er.post(`/auth/doctor-rating/${t}`,e),addPlatformRating:e=>er.post("/auth/platform-rating",e),updateDoctorRating:(e,t)=>er.put(`/auth/doctor-rating/${e}`,t),deleteDoctorRating:e=>er.delete(`/auth/doctor-rating/${e}`),updatePlatformRating:e=>er.put("/auth/platform-rating",e),deletePlatformRating:()=>er.delete("/auth/platform-rating")},N4={getDoctorRecommendations:e=>(console.log("syptoms",e),er.post("/ai/doctor-recommendations",{symptoms:e}))},bv={sendMessage:async(e,t)=>(console.log("Sending message to:",e,"Message:",t),(await er.post(`/chat/send/${e}`,{message:t})).data),getAllThreads:async()=>(await er.get("/chat/threads")).data,getMessageOfSingleThread:async e=>(await er.get(`/chat/messages/${e}`)).data},$l={doctorAppointmentsSchedule:e=>er.put("/appointments/doctor/schedule",e),checkDoctorAvailabilitySlots:(e,t)=>er.get(`/appointments/doctors/${e}/slots?date=${t}`),userBookingAppointments:e=>er.post("/appointments/book",e),userAppointments:()=>er.get("/appointments/user"),userCancelAppointment:e=>er.put(`/appointments/user/${e}/cancel`),doctorAppointments:()=>er.get("/appointments/doctor"),appointmentStatus:e=>er.put(`/appointments/doctor/${e}/confirm`),doctorAppointmentsCancel:e=>er.put(`/appointments/doctor/${e}/cancel`),getSchedule:e=>er.get(`/appointments/schedule/${e}`)},Qu={validateToken:()=>Yu.validateToken(),signInRequest:e=>Yu.signInRequest(e),signUpRequest:e=>Yu.signUpRequest(e),forgotPassword:e=>Yu.forgotPassword(e),resetPassword:e=>Yu.resetPassword(e),changePassword:e=>Yu.changePassword(e),allUsers:()=>Yu.allUsers()},pl={validateToken:()=>$c.validateToken(),signUp:e=>$c.signUp(e),login:e=>$c.login(e),forgotPassword:e=>$c.forgotPassword(e),resetPassword:e=>$c.resetPassword(e),changePassword:e=>$c.changePassword(e),updateProfile:e=>$c.updateProfile(e),uploadDocuments:e=>$c.uploadDocuments(e),updateDoctorProfile:e=>$c.updateDoctorProfile(e),getAllPublicDoctors:()=>$c.getAllPublicDoctors(),recommendationsApiSearch:e=>$c.recommendationsApiSearch()},Tu={validateToken:()=>Wl.validateToken(),signUp:e=>Wl.signUp(e),login:e=>Wl.login(e),forgotPassword:e=>Wl.forgotPassword(e),resetPassword:e=>Wl.resetPassword(e),changePassword:e=>Wl.changePassword(e),updateProfile:(e,t)=>{const r=localStorage.getItem("token");return Wl.updateProfile(e,t,r)},getProfile:e=>{const t=localStorage.getItem("token");return Wl.getProfile(e,t)},getAllPublicHospital:()=>Wl.getAllPublicHospital()},ni={validateToken:()=>Zs.validateToken(),login:e=>Zs.login(e),getAllDoctor:()=>Zs.getAllDoctor(),getPendingDoctors:()=>Zs.getPendingDoctors(),getPendingHospitals:()=>Zs.getPendingHospitals(),getApprovedDoctors:()=>Zs.getApprovedDoctors(),getApprovedHospitals:()=>Zs.getApprovedHospitals(),getRejectedDoctors:()=>Zs.getRejectedDoctors(),getDoctorsStatistics:()=>Zs.getDoctorsStatistics(),getHospitalStatistics:()=>Zs.getHospitalStatistics(),getRejectedHospitals:()=>Zs.getRejectedHospitals(),approveDoctor:e=>Zs.approveDoctor(e),rejectDoctor:e=>Zs.rejectDoctor(e),approveHospital:e=>Zs.approveHospital(e),rejectHospital:(e,t)=>Zs.rejectHospital(e,t),doctorAction:(e,t)=>Zs.doctorAction(e,t),hospitalAction:(e,t)=>Zs.hospitalAction(e,t),uploadDocuments:(e,t)=>Zs.uploadDocuments(e,t),uploadHospitalsDocuments:(e,t)=>Zs.uploadHospitalsDocuments(e,t),doctorProfilePicture:(e,t)=>Zs.doctorProfilePicture(e,t),hospitalProfilePicture:(e,t)=>Zs.hospitalProfilePicture(e,t),updateDoctorDetails:(e,t)=>Zs.updateDoctorDetails(e,t)},Xu={getPlatformRatings:()=>Ku.getPlatformRatings(),addDoctorRating:(e,t)=>Ku.addDoctorRating(e,t),addPlatformRating:e=>Ku.addPlatformRating(e),updateDoctorRating:(e,t)=>Ku.updateDoctorRating(e,t),updatePlatformRating:e=>Ku.updatePlatformRating(e),deleteDoctorRating:e=>Ku.deleteDoctorRating(e),deletePlatformRating:()=>Ku.deletePlatformRating()},D4={getDoctorRecommendations:e=>N4.getDoctorRecommendations(e)},Wd={getDoctorRecommendations:async e=>{try{return await D4.getDoctorRecommendations(e)}catch(t){throw console.error("Error in quickHelpService.getDoctorRecommendations:",t),t}},createUserMessage:e=>({id:Date.now(),type:"user",content:e.trim(),timestamp:new Date}),createBotMessage:(e,t=null,r=null)=>({id:Date.now()+1,type:"bot",content:e,timestamp:new Date,recommendations:t,apiResponse:r}),createErrorMessage:e=>({id:Date.now()+1,type:"bot",content:e,timestamp:new Date,isError:!0}),validateMessage:(e,t=11)=>e.trim().length>=t,formatUrlFriendly:e=>e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),getAnalysisSummary:e=>{const t=e?.totalDoctorsAnalyzed||e?.data?.totalDoctorsAnalyzed||e?.recommendations?.totalDoctorsAnalyzed||e?.recommendations?.analysis?.totalDoctorsAnalyzed||0,r=e?.timestamp||e?.recommendations?.timestamp||new Date;return{totalDoctors:t,timestamp:new Date(r)}}},xv={sendMessage:(e,t)=>bv.sendMessage(e,t),getAllThreads:()=>bv.getAllThreads(),getMessageOfSingleThread:e=>bv.getMessageOfSingleThread(e)},Zl={doctorAppointmentsSchedule:e=>$l.doctorAppointmentsSchedule(e),checkDoctorAvailabilitySlots:(e,t)=>$l.checkDoctorAvailabilitySlots(e,t),userBookingAppointments:e=>$l.userBookingAppointments(e),userAppointments:()=>$l.userAppointments(),userCancelAppointment:e=>$l.userCancelAppointment(e),doctorAppointments:()=>$l.doctorAppointments(),appointmentStatus:e=>$l.appointmentStatus(e),doctorAppointmentsCancel:e=>$l.doctorAppointmentsCancel(e),getSchedule:e=>$l.getSchedule(e)};function A4(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const O4=e=>{switch(e){case"success":return L4;case"info":return B4;case"warning":return I4;case"error":return z4;default:return null}},M4=Array(12).fill(0),j4=({visible:e,className:t})=>Wt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Wt.createElement("div",{className:"sonner-spinner"},M4.map((r,s)=>Wt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),L4=Wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Wt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),I4=Wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Wt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),B4=Wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Wt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),z4=Wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Wt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),U4=Wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Wt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Wt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),F4=()=>{const[e,t]=Wt.useState(document.hidden);return Wt.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let Jv=1;class H4{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:s,...l}=t,d=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Jv++,C=this.toasts.find(b=>b.id===d),T=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(d)&&this.dismissedToasts.delete(d),C?this.toasts=this.toasts.map(b=>b.id===d?(this.publish({...b,...t,id:d,title:s}),{...b,...t,id:d,dismissible:T,title:s}):b):this.addToast({title:s,...l,dismissible:T,id:d}),d},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(s=>s({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let s;r.loading!==void 0&&(s=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const l=Promise.resolve(t instanceof Function?t():t);let d=s!==void 0,C;const T=l.then(async u=>{if(C=["resolve",u],Wt.isValidElement(u))d=!1,this.create({id:s,type:"default",message:u});else if(q4(u)&&!u.ok){d=!1;const f=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,y=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,_=typeof f=="object"&&!Wt.isValidElement(f)?f:{message:f};this.create({id:s,type:"error",description:y,..._})}else if(u instanceof Error){d=!1;const f=typeof r.error=="function"?await r.error(u):r.error,y=typeof r.description=="function"?await r.description(u):r.description,_=typeof f=="object"&&!Wt.isValidElement(f)?f:{message:f};this.create({id:s,type:"error",description:y,..._})}else if(r.success!==void 0){d=!1;const f=typeof r.success=="function"?await r.success(u):r.success,y=typeof r.description=="function"?await r.description(u):r.description,_=typeof f=="object"&&!Wt.isValidElement(f)?f:{message:f};this.create({id:s,type:"success",description:y,..._})}}).catch(async u=>{if(C=["reject",u],r.error!==void 0){d=!1;const x=typeof r.error=="function"?await r.error(u):r.error,f=typeof r.description=="function"?await r.description(u):r.description,E=typeof x=="object"&&!Wt.isValidElement(x)?x:{message:x};this.create({id:s,type:"error",description:f,...E})}}).finally(()=>{d&&(this.dismiss(s),s=void 0),r.finally==null||r.finally.call(r)}),b=()=>new Promise((u,x)=>T.then(()=>C[0]==="reject"?x(C[1]):u(C[1])).catch(x));return typeof s!="string"&&typeof s!="number"?{unwrap:b}:Object.assign(s,{unwrap:b})},this.custom=(t,r)=>{const s=r?.id||Jv++;return this.create({jsx:t(s),id:s,...r}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ho=new H4,V4=(e,t)=>{const r=t?.id||Jv++;return Ho.addToast({title:e,...t,id:r}),r},q4=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",W4=V4,$4=()=>Ho.toasts,Z4=()=>Ho.getActiveToasts(),zt=Object.assign(W4,{success:Ho.success,info:Ho.info,warning:Ho.warning,error:Ho.error,custom:Ho.custom,message:Ho.message,promise:Ho.promise,dismiss:Ho.dismiss,loading:Ho.loading},{getHistory:$4,getToasts:Z4});A4("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Af(e){return e.label!==void 0}const G4=3,Y4="24px",K4="16px",tx=4e3,Q4=356,X4=14,J4=45,e6=200;function fl(...e){return e.filter(Boolean).join(" ")}function t6(e){const[t,r]=e.split("-"),s=[];return t&&s.push(t),r&&s.push(r),s}const n6=e=>{var t,r,s,l,d,C,T,b,u;const{invert:x,toast:f,unstyled:y,interacting:E,setHeights:_,visibleToasts:m,heights:k,index:w,toasts:U,expanded:g,removeToast:A,defaultRichColors:P,closeButton:z,style:N,cancelButtonStyle:R,actionButtonStyle:S,className:p="",descriptionClassName:D="",duration:O,position:j,gap:I,expandByDefault:H,classNames:F,icons:$,closeButtonAriaLabel:q="Close toast"}=e,[se,J]=Wt.useState(null),[be,Re]=Wt.useState(null),[Se,me]=Wt.useState(!1),[Ce,Be]=Wt.useState(!1),[_e,Ye]=Wt.useState(!1),[Qe,Ge]=Wt.useState(!1),[He,Te]=Wt.useState(!1),[dt,yt]=Wt.useState(0),[on,ln]=Wt.useState(0),Pn=Wt.useRef(f.duration||O||tx),En=Wt.useRef(null),rn=Wt.useRef(null),Ne=w===0,Me=w+1<=m,Ze=f.type,Ft=f.dismissible!==!1,Ct=f.className||"",wt=f.descriptionClassName||"",un=Wt.useMemo(()=>k.findIndex(rt=>rt.toastId===f.id)||0,[k,f.id]),Sn=Wt.useMemo(()=>{var rt;return(rt=f.closeButton)!=null?rt:z},[f.closeButton,z]),Ut=Wt.useMemo(()=>f.duration||O||tx,[f.duration,O]),nr=Wt.useRef(0),Ar=Wt.useRef(0),Sr=Wt.useRef(0),Ur=Wt.useRef(null),[xr,Or]=j.split("-"),Kr=Wt.useMemo(()=>k.reduce((rt,ut,$t)=>$t>=un?rt:rt+ut.height,0),[k,un]),va=F4(),ra=f.invert||x,ua=Ze==="loading";Ar.current=Wt.useMemo(()=>un*I+Kr,[un,Kr]),Wt.useEffect(()=>{Pn.current=Ut},[Ut]),Wt.useEffect(()=>{me(!0)},[]),Wt.useEffect(()=>{const rt=rn.current;if(rt){const ut=rt.getBoundingClientRect().height;return ln(ut),_($t=>[{toastId:f.id,height:ut,position:f.position},...$t]),()=>_($t=>$t.filter(Tt=>Tt.toastId!==f.id))}},[_,f.id]),Wt.useLayoutEffect(()=>{if(!Se)return;const rt=rn.current,ut=rt.style.height;rt.style.height="auto";const $t=rt.getBoundingClientRect().height;rt.style.height=ut,ln($t),_(Tt=>Tt.find(nn=>nn.toastId===f.id)?Tt.map(nn=>nn.toastId===f.id?{...nn,height:$t}:nn):[{toastId:f.id,height:$t,position:f.position},...Tt])},[Se,f.title,f.description,_,f.id,f.jsx,f.action,f.cancel]);const jn=Wt.useCallback(()=>{Be(!0),yt(Ar.current),_(rt=>rt.filter(ut=>ut.toastId!==f.id)),setTimeout(()=>{A(f)},e6)},[f,A,_,Ar]);Wt.useEffect(()=>{if(f.promise&&Ze==="loading"||f.duration===1/0||f.type==="loading")return;let rt;return g||E||va?(()=>{if(Sr.current<nr.current){const Tt=new Date().getTime()-nr.current;Pn.current=Pn.current-Tt}Sr.current=new Date().getTime()})():(()=>{Pn.current!==1/0&&(nr.current=new Date().getTime(),rt=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),jn()},Pn.current))})(),()=>clearTimeout(rt)},[g,E,f,Ze,va,jn]),Wt.useEffect(()=>{f.delete&&(jn(),f.onDismiss==null||f.onDismiss.call(f,f))},[jn,f.delete]);function Ha(){var rt;if($?.loading){var ut;return Wt.createElement("div",{className:fl(F?.loader,f==null||(ut=f.classNames)==null?void 0:ut.loader,"sonner-loader"),"data-visible":Ze==="loading"},$.loading)}return Wt.createElement(j4,{className:fl(F?.loader,f==null||(rt=f.classNames)==null?void 0:rt.loader),visible:Ze==="loading"})}const Ea=f.icon||$?.[Ze]||O4(Ze);var Qr,gr;return Wt.createElement("li",{tabIndex:0,ref:rn,className:fl(p,Ct,F?.toast,f==null||(t=f.classNames)==null?void 0:t.toast,F?.default,F?.[Ze],f==null||(r=f.classNames)==null?void 0:r[Ze]),"data-sonner-toast":"","data-rich-colors":(Qr=f.richColors)!=null?Qr:P,"data-styled":!(f.jsx||f.unstyled||y),"data-mounted":Se,"data-promise":!!f.promise,"data-swiped":He,"data-removed":Ce,"data-visible":Me,"data-y-position":xr,"data-x-position":Or,"data-index":w,"data-front":Ne,"data-swiping":_e,"data-dismissible":Ft,"data-type":Ze,"data-invert":ra,"data-swipe-out":Qe,"data-swipe-direction":be,"data-expanded":!!(g||H&&Se),"data-testid":f.testId,style:{"--index":w,"--toasts-before":w,"--z-index":U.length-w,"--offset":`${Ce?dt:Ar.current}px`,"--initial-height":H?"auto":`${on}px`,...N,...f.style},onDragEnd:()=>{Ye(!1),J(null),Ur.current=null},onPointerDown:rt=>{rt.button!==2&&(ua||!Ft||(En.current=new Date,yt(Ar.current),rt.target.setPointerCapture(rt.pointerId),rt.target.tagName!=="BUTTON"&&(Ye(!0),Ur.current={x:rt.clientX,y:rt.clientY})))},onPointerUp:()=>{var rt,ut,$t;if(Qe||!Ft)return;Ur.current=null;const Tt=Number(((rt=rn.current)==null?void 0:rt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),sn=Number(((ut=rn.current)==null?void 0:ut.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),nn=new Date().getTime()-(($t=En.current)==null?void 0:$t.getTime()),et=se==="x"?Tt:sn,On=Math.abs(et)/nn;if(Math.abs(et)>=J4||On>.11){yt(Ar.current),f.onDismiss==null||f.onDismiss.call(f,f),Re(se==="x"?Tt>0?"right":"left":sn>0?"down":"up"),jn(),Ge(!0);return}else{var Ln,Xn;(Ln=rn.current)==null||Ln.style.setProperty("--swipe-amount-x","0px"),(Xn=rn.current)==null||Xn.style.setProperty("--swipe-amount-y","0px")}Te(!1),Ye(!1),J(null)},onPointerMove:rt=>{var ut,$t,Tt;if(!Ur.current||!Ft||((ut=window.getSelection())==null?void 0:ut.toString().length)>0)return;const nn=rt.clientY-Ur.current.y,et=rt.clientX-Ur.current.x;var On;const Ln=(On=e.swipeDirections)!=null?On:t6(j);!se&&(Math.abs(et)>1||Math.abs(nn)>1)&&J(Math.abs(et)>Math.abs(nn)?"x":"y");let Xn={x:0,y:0};const vr=Qt=>1/(1.5+Math.abs(Qt)/20);if(se==="y"){if(Ln.includes("top")||Ln.includes("bottom"))if(Ln.includes("top")&&nn<0||Ln.includes("bottom")&&nn>0)Xn.y=nn;else{const Qt=nn*vr(nn);Xn.y=Math.abs(Qt)<Math.abs(nn)?Qt:nn}}else if(se==="x"&&(Ln.includes("left")||Ln.includes("right")))if(Ln.includes("left")&&et<0||Ln.includes("right")&&et>0)Xn.x=et;else{const Qt=et*vr(et);Xn.x=Math.abs(Qt)<Math.abs(et)?Qt:et}(Math.abs(Xn.x)>0||Math.abs(Xn.y)>0)&&Te(!0),($t=rn.current)==null||$t.style.setProperty("--swipe-amount-x",`${Xn.x}px`),(Tt=rn.current)==null||Tt.style.setProperty("--swipe-amount-y",`${Xn.y}px`)}},Sn&&!f.jsx&&Ze!=="loading"?Wt.createElement("button",{"aria-label":q,"data-disabled":ua,"data-close-button":!0,onClick:ua||!Ft?()=>{}:()=>{jn(),f.onDismiss==null||f.onDismiss.call(f,f)},className:fl(F?.closeButton,f==null||(s=f.classNames)==null?void 0:s.closeButton)},(gr=$?.close)!=null?gr:U4):null,(Ze||f.icon||f.promise)&&f.icon!==null&&($?.[Ze]!==null||f.icon)?Wt.createElement("div",{"data-icon":"",className:fl(F?.icon,f==null||(l=f.classNames)==null?void 0:l.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Ha():null,f.type!=="loading"?Ea:null):null,Wt.createElement("div",{"data-content":"",className:fl(F?.content,f==null||(d=f.classNames)==null?void 0:d.content)},Wt.createElement("div",{"data-title":"",className:fl(F?.title,f==null||(C=f.classNames)==null?void 0:C.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?Wt.createElement("div",{"data-description":"",className:fl(D,wt,F?.description,f==null||(T=f.classNames)==null?void 0:T.description)},typeof f.description=="function"?f.description():f.description):null),Wt.isValidElement(f.cancel)?f.cancel:f.cancel&&Af(f.cancel)?Wt.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||R,onClick:rt=>{Af(f.cancel)&&Ft&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,rt),jn())},className:fl(F?.cancelButton,f==null||(b=f.classNames)==null?void 0:b.cancelButton)},f.cancel.label):null,Wt.isValidElement(f.action)?f.action:f.action&&Af(f.action)?Wt.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||S,onClick:rt=>{Af(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,rt),!rt.defaultPrevented&&jn())},className:fl(F?.actionButton,f==null||(u=f.classNames)==null?void 0:u.actionButton)},f.action.label):null)};function nx(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function r6(e,t){const r={};return[e,t].forEach((s,l)=>{const d=l===1,C=d?"--mobile-offset":"--offset",T=d?K4:Y4;function b(u){["top","right","bottom","left"].forEach(x=>{r[`${C}-${x}`]=typeof u=="number"?`${u}px`:u})}typeof s=="number"||typeof s=="string"?b(s):typeof s=="object"?["top","right","bottom","left"].forEach(u=>{s[u]===void 0?r[`${C}-${u}`]=T:r[`${C}-${u}`]=typeof s[u]=="number"?`${s[u]}px`:s[u]}):b(T)}),r}const a6=Wt.forwardRef(function(t,r){const{id:s,invert:l,position:d="bottom-right",hotkey:C=["altKey","KeyT"],expand:T,closeButton:b,className:u,offset:x,mobileOffset:f,theme:y="light",richColors:E,duration:_,style:m,visibleToasts:k=G4,toastOptions:w,dir:U=nx(),gap:g=X4,icons:A,containerAriaLabel:P="Notifications"}=t,[z,N]=Wt.useState([]),R=Wt.useMemo(()=>s?z.filter(Se=>Se.toasterId===s):z.filter(Se=>!Se.toasterId),[z,s]),S=Wt.useMemo(()=>Array.from(new Set([d].concat(R.filter(Se=>Se.position).map(Se=>Se.position)))),[R,d]),[p,D]=Wt.useState([]),[O,j]=Wt.useState(!1),[I,H]=Wt.useState(!1),[F,$]=Wt.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=Wt.useRef(null),se=C.join("+").replace(/Key/g,"").replace(/Digit/g,""),J=Wt.useRef(null),be=Wt.useRef(!1),Re=Wt.useCallback(Se=>{N(me=>{var Ce;return(Ce=me.find(Be=>Be.id===Se.id))!=null&&Ce.delete||Ho.dismiss(Se.id),me.filter(({id:Be})=>Be!==Se.id)})},[]);return Wt.useEffect(()=>Ho.subscribe(Se=>{if(Se.dismiss){requestAnimationFrame(()=>{N(me=>me.map(Ce=>Ce.id===Se.id?{...Ce,delete:!0}:Ce))});return}setTimeout(()=>{ow.flushSync(()=>{N(me=>{const Ce=me.findIndex(Be=>Be.id===Se.id);return Ce!==-1?[...me.slice(0,Ce),{...me[Ce],...Se},...me.slice(Ce+1)]:[Se,...me]})})})}),[z]),Wt.useEffect(()=>{if(y!=="system"){$(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;const Se=window.matchMedia("(prefers-color-scheme: dark)");try{Se.addEventListener("change",({matches:me})=>{$(me?"dark":"light")})}catch{Se.addListener(({matches:Ce})=>{try{$(Ce?"dark":"light")}catch(Be){console.error(Be)}})}},[y]),Wt.useEffect(()=>{z.length<=1&&j(!1)},[z]),Wt.useEffect(()=>{const Se=me=>{var Ce;if(C.every(Ye=>me[Ye]||me.code===Ye)){var _e;j(!0),(_e=q.current)==null||_e.focus()}me.code==="Escape"&&(document.activeElement===q.current||(Ce=q.current)!=null&&Ce.contains(document.activeElement))&&j(!1)};return document.addEventListener("keydown",Se),()=>document.removeEventListener("keydown",Se)},[C]),Wt.useEffect(()=>{if(q.current)return()=>{J.current&&(J.current.focus({preventScroll:!0}),J.current=null,be.current=!1)}},[q.current]),Wt.createElement("section",{ref:r,"aria-label":`${P} ${se}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((Se,me)=>{var Ce;const[Be,_e]=Se.split("-");return R.length?Wt.createElement("ol",{key:Se,dir:U==="auto"?nx():U,tabIndex:-1,ref:q,className:u,"data-sonner-toaster":!0,"data-sonner-theme":F,"data-y-position":Be,"data-x-position":_e,style:{"--front-toast-height":`${((Ce=p[0])==null?void 0:Ce.height)||0}px`,"--width":`${Q4}px`,"--gap":`${g}px`,...m,...r6(x,f)},onBlur:Ye=>{be.current&&!Ye.currentTarget.contains(Ye.relatedTarget)&&(be.current=!1,J.current&&(J.current.focus({preventScroll:!0}),J.current=null))},onFocus:Ye=>{Ye.target instanceof HTMLElement&&Ye.target.dataset.dismissible==="false"||be.current||(be.current=!0,J.current=Ye.relatedTarget)},onMouseEnter:()=>j(!0),onMouseMove:()=>j(!0),onMouseLeave:()=>{I||j(!1)},onDragEnd:()=>j(!1),onPointerDown:Ye=>{Ye.target instanceof HTMLElement&&Ye.target.dataset.dismissible==="false"||H(!0)},onPointerUp:()=>H(!1)},R.filter(Ye=>!Ye.position&&me===0||Ye.position===Se).map((Ye,Qe)=>{var Ge,He;return Wt.createElement(n6,{key:Ye.id,icons:A,index:Qe,toast:Ye,defaultRichColors:E,duration:(Ge=w?.duration)!=null?Ge:_,className:w?.className,descriptionClassName:w?.descriptionClassName,invert:l,visibleToasts:k,closeButton:(He=w?.closeButton)!=null?He:b,interacting:I,position:Se,style:w?.style,unstyled:w?.unstyled,classNames:w?.classNames,cancelButtonStyle:w?.cancelButtonStyle,actionButtonStyle:w?.actionButtonStyle,closeButtonAriaLabel:w?.closeButtonAriaLabel,removeToast:Re,toasts:R.filter(Te=>Te.position==Ye.position),heights:p.filter(Te=>Te.position==Ye.position),setHeights:D,expandByDefault:T,gap:g,expanded:O,swipeDirections:t.swipeDirections})})):null}))}),Mw=Z.createContext(),s6=({children:e})=>{const[t,r]=Z.useState(null),[s,l]=Z.useState([]),[d,C]=Z.useState(!1),[T,b]=Z.useState(!1),[u,x]=Z.useState(!0),[f,y]=Z.useState([]),[E,_]=Z.useState(null);console.log(f);const m=async()=>{try{const{data:N}=await Qu.validateToken();r(N.data),C(!0)}catch(N){console.log(N)}finally{x(!1)}};Z.useEffect(()=>{m(),z()},[]);const k=async(N,R)=>{b(!0);try{const{data:S}=await Qu.signInRequest(N);j0(S.data.token),r(S?.data?.user),C(!0),zt.success("Login successful"),R&&R("/")}catch(S){zt.error(S.response?.data?.data||"Login failed"),_(S)}finally{b(!1)}},w=async(N,R)=>{console.log(N),b(!0);try{const{data:S}=await Qu.signUpRequest(N);r(S.data.user),C(!0),zt.success("Signup successful"),R&&R("/login")}catch(S){zt.error(S?.response?.data?.data||"Signup failed"),_(S)}finally{b(!1)}},U=async(N,R)=>{b(!0);try{const{data:S}=await Qu.forgotPassword(N);zt.success("Password reset email sent"),R&&R("/reset-password")}catch(S){zt.error(S.response?.data?.data||"Failed to send reset email"),_(S)}finally{b(!1)}},g=async(N,R)=>{b(!0);try{const{data:S}=await Qu.resetPassword(N);zt.success("Password reset successful"),R&&R("/login")}catch(S){zt.error(S.response?.data?.data||"Password reset failed"),_(S)}finally{b(!1)}},A=async(N,R)=>{b(!0);try{const{data:S}=await Qu.changePassword(N);zt.success("Password changed successfully"),R&&R("/profile")}catch(S){zt.error(S.response?.data?.data||"Password change failed"),_(S)}finally{b(!1)}},P=async N=>{b(!0);try{L0(),r(null),C(!1),zt.success("Logged out successfully"),N("/login")}catch(R){console.error("Sign Out Error:",R)}finally{b(!1)}},z=async()=>{b(!0);try{const{data:N}=await Qu.allUsers();return y(N.data),N.data}catch(N){zt.error(N.response?.data?.data||"Failed to fetch user"),_(N)}finally{b(!1)}};return o.jsx(Mw.Provider,{value:{setUser:r,user:t,isAuthenticated:d,signIn:k,signUpFun:w,signOut:P,loading:T,error:E,ForgotPassword:U,ResetPassword:g,ChangePassword:A,isAuthLoading:u,validateSession:m,allUsers:f},children:e})},si=()=>Z.useContext(Mw),jw=Z.createContext(),i6=({children:e})=>{const[t,r]=Z.useState(null),[s,l]=Z.useState(!1),[d,C]=Z.useState(null),[T,b]=Z.useState(null),[u,x]=Z.useState([]),[f,y]=Z.useState(!1),[E,_]=Z.useState(!1),m=fs(),k=async()=>{l(!0);try{const{data:O}=await pl.validateToken();r(O.data)}catch(O){O.response?.data?.data==="Your documents have been uploaded. Please wait until verification is complete or contact support at <b> quickmed0023.info@gmail.com </b>"?(y(!0),zt.error("Your Request is in pending once it complete then you will receive an email"),m("/doctor/profile")):O.response.data.data==="Please upload your documents and profile picture for verification."&&(_(!0),m("/doctor/upload-documents"))}finally{l(!1)}};Z.useEffect(()=>{k(),S()},[]);const w=async(O,j)=>{l(!0),C(null);try{const I=await pl.login(O);return j0(I.data.data.token),I.data.data.user.hasDocuments?(r(I.data.data.user),j("/")):(_(!0),j("/doctor/upload-documents")),zt.success("Login Successfully"),I.response.data.message}catch(I){console.log(I),zt.error(I.response.data.data)}finally{l(!1)}},U=async(O,j)=>{l(!0),C(null);try{await pl.signUp(O),zt.success("Form Submitted Successfully"),j("/doctor/login")}catch(I){console.log(I),zt.error(I.response.data.data)}finally{l(!1)}},g=async(O,j)=>{console.log(O,"credentials"),l(!0);try{const{data:I}=await pl.forgotPassword(O);zt.success("Password reset email sent"),j&&j("/doctor/reset-password")}catch(I){zt.error(I.response?.data?.data||"Failed to send reset email"),C(I)}finally{l(!1)}},A=async(O,j)=>{console.log(O,"credentials"),l(!0);try{const{data:I}=await pl.resetPassword(O);zt.success("Password reset successful"),j&&j("/doctor/login")}catch(I){zt.error(I.response?.data?.data||"Password reset failed"),C(I)}finally{l(!1)}},P=async(O,j)=>{console.log(O,"credentials"),l(!0);try{const{data:I}=await pl.changePassword(O);zt.success("Password changed successfully"),j&&j("/doctor/profile")}catch(I){zt.error(I.response?.data?.data||"Password change failed"),C(I)}finally{l(!1)}},z=async O=>{try{const j=await pl.updateProfile(O);return zt.success(j.data.data.message),j}catch(j){zt.error(j.response.data.data)}},N=async(O,j)=>{l(!0);try{const I=await pl.uploadDocuments(O);return console.log("document",I),console.log(I.data.data.documents[0].documentUrl),j(""),zt.success("Documents Uploaded"),I}catch(I){zt.error(I.response.data.data)}finally{l(!1)}},R=async O=>{try{const j=await pl.updateDoctorProfile(O);return zt.success("Doctor Profile Updated Successfully"),j}catch(j){zt.error(j.response.data.data)}},S=async()=>{try{const O=await pl.getAllPublicDoctors();return x(O.data.data.doctors),O}catch(O){console.log(O)}},p=(O,j)=>{x(I=>I.map(H=>H._id===O?{...H,rating:j}:H))},D=O=>{O("/doctor/login"),L0(),r(null)};return o.jsx(jw.Provider,{value:{doctor:t,loading:s,error:d,DoctorLogin:w,DoctorSignUp:U,DoctorForgotPassword:g,DoctorResetPassword:A,DoctorChangePassword:P,UpdateProfilePic:z,DoctorProfileUpdate:R,DoctorDocumentUpload:N,logout:D,allDoctors:u,updateDoctorRating:p,pendingValidation:f,doctorDocumentsPending:E},children:e})},ps=()=>Z.useContext(jw),Lw=Z.createContext(),o6=({children:e})=>{const[t,r]=Z.useState(null),[s,l]=Z.useState([]),[d,C]=Z.useState(!1),[T,b]=Z.useState(null),[u,x]=Z.useState(!1),f=async()=>{C(!0);try{const{data:g}=await Tu.validateToken();console.log(g.data,"data"),r(g.data)}catch(g){console.log(g)}finally{C(!1)}};Z.useEffect(()=>{f(),U()},[]);const y=async(g,A)=>{C(!0);try{const{data:P}=await Tu.login(g);return console.log(P.data.token),localStorage.setItem("token",P.data.token),r(P.data.hospital),zt.success("Login Successfully"),A("/hospital/profile"),P.data.message}catch(P){zt.error(P.response.data.data||"Login failed"),console.log(P),b(P)}finally{C(!1)}},E=async(g,A)=>{console.log("hospital SignUp",g),C(!0),b(null);try{await Tu.signUp(g),zt.success("Form Submitted Successfully"),A("/hospital/login")}catch(P){console.log("err",P.response.data.data),zt.error(P.response.data.data)}finally{C(!1)}},_=async(g,A)=>{C(!0);try{const{data:P}=await Tu.forgotPassword(g);zt.success("Password reset email sent"),A&&A("/hospital/reset-password")}catch(P){zt.error(P.response?.data?.data||"Failed to send reset email"),b(P)}finally{C(!1)}},m=async(g,A)=>{C(!0);try{const{data:P}=await Tu.resetPassword(g);zt.success("Password reset successful"),A&&A("/hospital/login")}catch(P){zt.error(P.response?.data?.data||"Password reset failed"),b(P)}finally{C(!1)}},k=async(g,A)=>{C(!0);try{const{data:P}=await Tu.changePassword(g);zt.success("Password changed successfully"),A&&A("/hospital/profile")}catch(P){zt.error(P.response?.data?.data||"Password change failed"),b(P)}finally{C(!1)}},w=async(g,A)=>{try{const P=await Tu.updateProfile(g,A);return zt.success("Profile updated successfully"),P.data}catch(P){zt.error(P.response?.data?.data||"Update failed"),b(P)}finally{C(!1)}},U=async()=>{try{const g=await Tu.getAllPublicHospital();l(g.data.data.hospitals)}catch(g){console.log(g.response.data.data)}finally{C(!1)}};return o.jsx(Lw.Provider,{value:{hospital:t,allPublicHospital:s,loading:d,error:T,HospitalLogin:y,HospitalSignUp:E,HospitalForgotPassword:_,HospitalResetPassword:m,HospitalChangePassword:k,HospitalProfile:w,setHospital:r},children:e})},to=()=>Z.useContext(Lw),Iw=Z.createContext(),c6=({children:e})=>{const[t,r]=Z.useState(null),[s,l]=Z.useState([]),[d,C]=Z.useState([]),[T,b]=Z.useState([]),[u,x]=Z.useState([]),[f,y]=Z.useState([]),[E,_]=Z.useState([]),[m,k]=Z.useState(null),[w,U]=Z.useState(null),[g,A]=Z.useState({}),[P,z]=Z.useState({}),N=(Te,dt)=>A(yt=>({...yt,[Te]:dt})),R=(Te,dt)=>z(yt=>({...yt,[Te]:dt})),S=async()=>{N("session",!0);try{const{data:Te}=await ni.validateToken(),dt=Te?.data;console.log(dt),r(dt),dt?.role==="admin"&&await J()}catch(Te){R("session",Te)}finally{N("session",!1)}},p=async(Te,dt)=>{N("login",!0);try{const yt=await ni.login(Te),on=yt?.data?.data?.token;j0(on);const ln=yt?.data?.data?.user;return r(ln),zt.success("Admin login successfully"),await J(),dt("/admin/dashboard"),yt}catch(yt){throw zt.error(yt.response.data.data),R("login",yt),yt}finally{N("login",!1)}},D=()=>{L0(),r(null)},O=async()=>{N("pendingDoctors",!0);try{const Te=await ni.getPendingDoctors();l(Te.data.data.doctors),R("pendingDoctors",null)}catch(Te){R("pendingDoctors",Te)}finally{N("pendingDoctors",!1)}},j=async()=>{N("approvedDoctors",!0);try{const Te=await ni.getApprovedDoctors();C(Te.data.data.doctors),R("approvedDoctors",null)}catch(Te){R("approvedDoctors",Te)}finally{N("approvedDoctors",!1)}},I=async()=>{N("rejectedDoctors",!0);try{const Te=await ni.getRejectedDoctors();b(Te.data.data.doctors),R("rejectedDoctors",null)}catch(Te){R("rejectedDoctors",Te)}finally{N("rejectedDoctors",!1)}},H=async()=>{N("pendingHospitals",!0);try{const Te=await ni.getPendingHospitals();x(Te.data.data.hospitals),R("pendingHospitals",null)}catch(Te){R("pendingHospitals",Te)}finally{N("pendingHospitals",!1)}},F=async()=>{N("approvedHospitals",!0);try{const Te=await ni.getApprovedHospitals();y(Te.data.data.hospitals),R("approvedHospitals",null)}catch(Te){R("approvedHospitals",Te)}finally{N("approvedHospitals",!1)}},$=async()=>{N("rejectedHospitals",!0);try{const Te=await ni.getRejectedHospitals();_(Te.data.data.hospitals),R("rejectedHospitals",null)}catch(Te){R("rejectedHospitals",Te)}finally{N("rejectedHospitals",!1)}},q=async()=>{N("statistics",!0);try{const Te=await ni.getDoctorsStatistics();k(Te.data.data.statistics),R("statistics",null)}catch(Te){R("statistics",Te)}finally{N("statistics",!1)}},se=async()=>{N("hospitalStatistics",!0);try{const Te=await ni.getHospitalStatistics();U(Te.data.data.statistics),R("hospitalStatistics",null)}catch(Te){R("hospitalStatistics",Te)}finally{N("hospitalStatistics",!1)}},J=async()=>{await Promise.all([q(),se(),O(),j(),I(),H(),F(),$()])},be=async Te=>{try{await ni.approveDoctor(Te),zt.success("Doctor approved successfully"),await J()}catch(dt){zt.error(dt.response.data.data)}},Re=async Te=>{try{await ni.approveHospital(Te),zt.success("Hospital approved successfully"),await J()}catch(dt){zt.error(dt.response.data.data)}},Se=async Te=>{try{await ni.rejectDoctor(Te),zt.success("Doctor rejected successfully"),await J()}catch(dt){zt.error(dt.response.data.data)}},me=async(Te,dt)=>{try{await ni.rejectHospital(Te,dt),zt.success("Hospital rejected successfully"),await J()}catch(yt){zt.error(yt.response.data.data)}},Ce=async(Te,dt)=>{try{await ni.doctorAction(Te,dt),zt.success("Doctor action updated successfully")}catch(yt){zt.error(yt.response.data.data)}},Be=async(Te,dt)=>{try{await ni.hospitalAction(Te,dt),zt.success("Hospital action updated successfully")}catch(yt){zt.error(yt.response.data.data)}},_e=async(Te,dt)=>{try{const yt=await ni.uploadDocuments(Te,dt);return zt.success("Doctor documents uploaded"),yt}catch(yt){zt.error(yt.response.data.data)}},Ye=async(Te,dt)=>{try{const yt=await ni.uploadHospitalsDocuments(Te,dt);return zt.success("Hospital documents uploaded"),yt}catch(yt){zt.error(yt.response.data.data)}},Qe=async(Te,dt)=>{try{await ni.doctorProfilePicture(Te,dt),zt.success("Doctor profile picture updated")}catch(yt){zt.error(yt.response.data.data)}},Ge=async(Te,dt)=>{try{await ni.hospitalProfilePicture(Te,dt),zt.success("Hospital profile picture updated")}catch(yt){zt.error(yt.response.data.data)}},He=async(Te,dt)=>{try{const on=(await ni.updateDoctorDetails(Te,dt))?.data?.data?.doctor||{},ln=Pn=>({...Pn,...dt,...on});l(Pn=>Pn.map(En=>En._id===Te?ln(En):En)),C(Pn=>Pn.map(En=>En._id===Te?ln(En):En)),b(Pn=>Pn.map(En=>En._id===Te?ln(En):En)),zt.success("Doctor details updated")}catch(yt){zt.error(yt.response.data.data)}};return Z.useEffect(()=>{S()},[]),o.jsx(Iw.Provider,{value:{admin:t,login:p,logout:D,loading:g,error:P,pendingDoctors:s,approvedDoctors:d,rejectedDoctors:T,pendingHospitals:u,approvedHospitals:f,rejectedHospitals:E,statistics:m,hospitalStatistics:w,fetchPendingDoctors:O,fetchApprovedDoctors:j,fetchRejectedDoctors:I,fetchPendingHospitals:H,fetchApprovedHospitals:F,fetchRejectedHospitals:$,DoctorsStatistics:q,HospitalStatistics:se,approveDoctor:be,approveHospital:Re,rejectDoctor:Se,rejectHospital:me,doctorAction:Ce,HospitalAction:Be,DoctorDocumentUpload:_e,HospitalDocumentUpload:Ye,doctorProfilePicture:Qe,hospitalProfilePicture:Ge,updateDoctorDetails:He},children:e})},cc=()=>Z.useContext(Iw),Bw=Z.createContext(),l6=({children:e})=>{const[t,r]=Z.useState([]),s=async()=>{try{const x=await Xu.getPlatformRatings();r(x.data.data)}catch(x){console.log(x)}},l=async(x,f,y)=>{try{const _=(await Xu.addDoctorRating(x,f))?.data?.data?.rating??null;y&&_!==null&&y(_),zt.success("Rating added!")}catch(E){E.response?.data?.data==="You have already rated this doctor"&&zt.error("You've already rated this doctor. Update or delete instead.")}},d=async x=>{try{await Xu.addPlatformRating(x),zt.success("Rating added!")}catch(f){zt.error(f.response.data.data)}},C=async(x,f,y)=>{try{const _=(await Xu.updateDoctorRating(f,x))?.data?.data?.rating??null;y&&_!==null&&y(_),zt.success("Rating Updated Successfully!")}catch(E){zt.error(E.response?.data?.data)}},T=async x=>{try{await Xu.updatePlatformRating(x),zt.success("Platform Rating Updated Successfully!")}catch(f){zt.error(f.response.data.data)}},b=async(x,f)=>{try{const E=(await Xu.deleteDoctorRating(x))?.data?.data?.rating??null;f&&E!==null&&f(E),zt.success("Rating Deleted !")}catch(y){zt.error(y.response?.data?.data)}},u=async()=>{try{await Xu.deletePlatformRating(),zt.success("Rating Deleted Successfully")}catch{zt.error(err.response.data.data)}};return Z.useEffect(()=>{s()},[]),o.jsx(Bw.Provider,{value:{ratings:t,addDoctorRating:l,addPlatformRating:d,updateDoctorRating:C,deleteDoctorRating:b,updatePlatformRating:T,deletePlatformRating:u,getPlatformRatings:s},children:e})},zw=()=>Z.useContext(Bw),Uw=Z.createContext(),u6=({children:e})=>{const[t,r]=Z.useState([]),[s,l]=Z.useState(""),[d,C]=Z.useState(!1),[T,b]=Z.useState(!1),u=Z.useRef(null),x=11,f=s.trim().length>=x;Z.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[t]),Z.useEffect(()=>{T&&t.length===0&&r([{id:1,type:"bot",content:"Hello! I'm Dr. AI, your virtual health assistant. I'm here to help you find the right doctor based on your symptoms. Please describe what you're experiencing in detail (minimum 11 characters).",timestamp:new Date}])},[T,t.length]);const y=async()=>{if(!s.trim()||d||!f)return;const A=Wd.createUserMessage(s);r(P=>[...P,A]),l(""),C(!0);try{const P=await Wd.getDoctorRecommendations(s);console.log("Full API response:",P);const z=P?.data?.data,N=Wd.createBotMessage("Based on your symptoms, here's my detailed medical analysis and recommendations:",z,P?.data);r(R=>[...R,N])}catch(P){console.error("Error getting recommendations:",P);const z=Wd.createErrorMessage("I apologize, but I'm having trouble processing your request right now. Please try again in a moment.");r(N=>[...N,z]),zt.error(P.response.data.data)}finally{C(!1)}},E=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),f?y():zt.error(`Please enter at least ${x} characters to describe your symptoms.`))},_=()=>{b(!0)},m=()=>{b(!1)},g={messages:t,inputMessage:s,loading:d,isModalOpen:T,chatContainerRef:u,isInputValid:f,MIN_CHARACTERS:x,setInputMessage:l,handleSendMessage:y,handleKeyDown:E,openModal:_,closeModal:m,clearChat:()=>{r([]),l("")},handleSpecialtyClick:A=>{new URLSearchParams({specialty:A,source:"ai-recommendation"}),m();const P=Wd.formatUrlFriendly(A);window.location.href=`/quickMed/doctor/${P}`,zt.success(`Searching for ${A} specialists...`)},handleDoctorClick:A=>{m();const z=`/quickMed/doctor/profile/${Wd.formatUrlFriendly(A.name)}-${A.doctorId}`;window.location.href=z,zt.success(`Viewing ${A.name}'s profile...`)}};return o.jsx(Uw.Provider,{value:g,children:e})},Fw=()=>{const e=Z.useContext(Uw);if(!e)throw new Error("useQuickHelp must be used within a QuickHelpProvider");return e},Hw=Z.createContext(),d6=({children:e})=>{const[t,r]=Z.useState([]),[s,l]=Z.useState(null),[d,C]=Z.useState([]),[T,b]=Z.useState(!1),[u,x]=Z.useState(!1),[f,y]=Z.useState(!1),[E,_]=Z.useState([]),m=Z.useRef(null),k=async(P,z)=>{try{b(!0);const N=await xv.sendMessage(P,z);return N.status==="success"&&(await w(),zt.success("Message sent successfully")),N}catch(N){console.log(N,"errrrrrrrrrrr"),zt.error("Failed to send message")}finally{b(!1)}},w=async({showLoading:P=!0}={})=>{try{P&&x(!0);const z=await xv.getAllThreads();return z.status==="success"&&_(z.data),z}catch(z){throw console.error("ChatContext - getAllThreads error:",z),z}finally{P&&x(!1)}},U=async(P,{showLoading:z=!0}={})=>{try{z&&y(!0);const N=await xv.getMessageOfSingleThread(P);return N.status==="success"&&(C(N.data),l(P)),N}catch(N){throw console.error("ChatContext - getMessageOfSingleThread error:",N),N}finally{z&&y(!1)}},g=P=>{m.current&&clearInterval(m.current),m.current=setInterval(async()=>{P&&await U(P,{showLoading:!1})},5e3)},A=()=>{m.current&&(clearInterval(m.current),m.current=null)};return Z.useEffect(()=>()=>{A()},[]),o.jsx(Hw.Provider,{value:{chats:t,setChats:r,currentThread:s,messages:d,setMessages:C,threads:E,loading:T,threadsLoading:u,messagesLoading:f,sendMessage:k,getAllThreads:w,getMessageOfSingleThread:U,startPolling:g,stopPolling:A},children:e})},h6=()=>{const e=Z.useContext(Hw);if(!e)throw new Error("useChat must be used within a ChatProvider");return e},Vw=Z.createContext(),p6=({children:e})=>{const[t,r]=Z.useState([]),[s,l]=Z.useState([]),[d,C]=Z.useState(null),[T,b]=Z.useState([]),[u,x]=Z.useState({}),[f,y]=Z.useState({});Z.useEffect(()=>{U().catch(()=>{}),A().catch(()=>{})},[]);const E=(R,S)=>x(p=>({...p,[R]:S})),_=(R,S)=>y(p=>({...p,[R]:S})),m=async R=>{E("doctorAppointmentsSchedule",!0);try{const S=await Zl.doctorAppointmentsSchedule(R);return zt.success("Schedule updated"),S?.data}catch(S){throw _("doctorAppointmentsSchedule",S?.message||"Failed"),zt.error("Failed to update schedule"),S}finally{E("doctorAppointmentsSchedule",!1)}},k=async(R,S)=>{E("checkDoctorAvailabilitySlots",!0);try{const p=await Zl.checkDoctorAvailabilitySlots(R,S),D=p?.data?.data||p?.data||[];return b(Array.isArray(D)?D:[]),D}catch(p){throw _("checkDoctorAvailabilitySlots",p?.message||"Failed"),p}finally{E("checkDoctorAvailabilitySlots",!1)}},w=async R=>{E("userBookingAppointments",!0);try{const S=await Zl.userBookingAppointments(R);return zt.success("Appointment booked"),await U(),S?.data}catch(S){throw _("userBookingAppointments",S?.message||"Failed"),zt.error(S?.response?.data?.data||"Failed to book appointment"),S}finally{E("userBookingAppointments",!1)}},U=async()=>{E("userAppointments",!0);try{const R=await Zl.userAppointments();console.log("user appointments ",R);const S=R?.data?.data||R?.data||[];return r(Array.isArray(S)?S:[]),S}catch(R){throw _("userAppointments",R?.message||"Failed"),R}finally{E("userAppointments",!1)}},g=async R=>{E("userCancelAppointment",!0);try{await Zl.userCancelAppointment(R),zt.success("Appointment cancelled"),await U()}catch(S){throw _("userCancelAppointment",S?.message||"Failed"),zt.error("Failed to cancel appointment"),S}finally{E("userCancelAppointment",!1)}},A=async()=>{E("doctorAppointments",!0);try{const R=await Zl.doctorAppointments();console.log("Appointments Response",R);const S=R?.data?.data||R?.data||[];return l(Array.isArray(S)?S:[]),S}catch(R){throw _("doctorAppointments",R?.message||"Failed"),R}finally{E("doctorAppointments",!1)}},P=async R=>{E("appointmentStatus",!0);try{await Zl.appointmentStatus(R),zt.success("Appointment updated"),await A()}catch(S){throw _("appointmentStatus",S?.message||"Failed"),zt.error("Failed to update appointment"),S}finally{E("appointmentStatus",!1)}},z=async R=>{E("doctorAppointmentsCancel",!0);try{await Zl.doctorAppointmentsCancel(R),zt.success("Appointment cancelled"),await A()}catch(S){throw _("doctorAppointmentsCancel",S?.message||"Failed"),zt.error("Failed to cancel appointment"),S}finally{E("doctorAppointmentsCancel",!1)}},N=async R=>{E("getSchedule",!0);try{const S=await Zl.getSchedule(R),p=S?.data?.schedule||S?.data?.data||S?.data||null;return C(p),p}catch(S){throw _("getSchedule",S?.message||"Failed"),S}finally{E("getSchedule",!1)}};return o.jsx(Vw.Provider,{value:{usersAppointments:t,doctorsAppointments:s,schedule:d,slots:T,loading:u,error:f,doctorAppointmentsSchedule:m,checkDoctorAvailabilitySlots:k,userBookingAppointments:w,userAppointments:U,userCancelAppointment:g,doctorAppointments:A,appointmentStatus:P,doctorAppointmentsCancel:z,getSchedule:N},children:e})},I0=()=>Z.useContext(Vw),rx=[{label:"Find Doctors",dropdown:[{label:"All Specialities",href:"/doctors"},{label:"Allergy & Immunology",href:"doctor/allergy-immunology"},{label:"Anesthesiology & Critical Care",href:"doctor/anesthesiology-critical-care"},{label:"Cardiology",href:"doctor/cardiology"},{label:"Cardiothoracic Surgery",href:"doctor/cardiothoracic-surgery"},{label:"Clinical Biochemical Genetics",href:"doctor/clinical-biochemical-genetics"},{label:"Dermatology",href:"doctor/dermatology"},{label:"Emergency Medicine",href:"doctor/emergency-medicine"},{label:"Endocrinology",href:"doctor/endocrinology"},{label:"Family Medicine",href:"doctor/family-medicine"},{label:"Forensic Pathology",href:"doctor/forensic-pathology"},{label:"Gastroenterology & Hepatology",href:"doctor/gastroenterology-hepatology"},{label:"Geriatric Medicine",href:"doctor/geriatric-medicine"},{label:"Hematology / Medical Oncology",href:"doctor/hematology-oncology"},{label:"Infectious Diseases",href:"doctor/infectious-diseases"},{label:"Internal Medicine",href:"doctor/internal-medicine"},{label:"Interventional Cardiology",href:"doctor/interventional-cardiology"},{label:"Neonatology (Pediatric Subspecialty)",href:"doctor/neonatology"},{label:"Nephrology",href:"doctor/nephrology"},{label:"Neurology",href:"doctor/neurology"},{label:"Neurosurgery",href:"doctor/neurosurgery"},{label:"Nuclear Medicine",href:"doctor/nuclear-medicine"},{label:"Obstetrics & Gynecology (OB/GYN)",href:"doctor/obstetrics-gynecology"},{label:"Ophthalmology",href:"doctor/ophthalmology"},{label:"Oral & Maxillofacial Surgery",href:"doctor/oral-maxillofacial-surgery"},{label:"Otorhinolaryngology (ENT)",href:"doctor/otorhinolaryngology"},{label:"Orthopedic Surgery",href:"doctor/orthopedic-surgery"},{label:"Palliative Medicine",href:"doctor/palliative-medicine"},{label:"Pathology (Anatomical & Clinical)",href:"doctor/pathology"},{label:"Physical Medicine & Rehabilitation (PM&R)",href:"doctor/physical-medicine-rehabilitation"},{label:"Plastic, Reconstructive & Aesthetic Surgery",href:"doctor/plastic-surgery"},{label:"Preventive & Lifestyle Medicine",href:"doctor/preventive-lifestyle-medicine"},{label:"Psychiatry & Child-Adolescent Psychiatry",href:"doctor/psychiatry"},{label:"Public Health & Occupational Medicine",href:"doctor/public-health-occupational-medicine"},{label:"Pulmonology / Respiratory Medicine",href:"doctor/pulmonology"},{label:"Radiation Oncology",href:"doctor/radiation-oncology"},{label:"Radiology & Interventional Radiology",href:"doctor/radiology"},{label:"Rheumatology",href:"doctor/rheumatology"},{label:"Sleep Medicine",href:"doctor/sleep-medicine"},{label:"Sports Medicine",href:"doctor/sports-medicine"},{label:"Thoracic Surgery",href:"doctor/thoracic-surgery"},{label:"Toxicology",href:"doctor/toxicology"},{label:"Transfusion Medicine",href:"doctor/transfusion-medicine"},{label:"Urology",href:"doctor/urology"},{label:"Vascular Surgery & Interventional Radiologists",href:"doctor/vascular-surgery"},{label:"Research Physicians",href:"doctor/research-physicians"}]},{label:"Hospitals",dropdown:[]}],f6=[{icon:"",title:"PMC Verified Doctors",description:"All doctors are verified by Pakistan Medical Commission",stat:"PMC Verified"},{icon:"",title:"16,000+ Doctors Available",description:"Largest network of qualified doctors across Pakistan",stat:"16,000+"},{icon:"",title:"24/7 Customer Support",description:"Well trained & supportive team available round the clock",stat:"24/7"},{icon:"",title:"Secure Online Payments",description:"SSL-encrypted secure payment gateway for your safety",stat:"SSL Encrypted"}],m6=[{title:"For Patients",links:[{name:"Find Doctors",href:"#"},{name:"Book Appointment",href:"#"},{name:"Online Consultation",href:"#"},{name:"Lab Tests",href:"#"},{name:"Medicines",href:"#"}]},{title:"For Doctors",links:[{name:"Join as Doctor",href:"#"},{name:"Doctor Login",href:"#"},{name:"List Your Practice",href:"#"},{name:"Doctor Resources",href:"#"}]},{title:"Pages",links:[{name:"About Us",href:"#"},{name:"Careers",href:"#"},{name:"Press",href:"#"},{name:"Blog",href:"#"},{name:"Contact Us",href:"#"}]}],g6=[{name:"Facebook",href:"#",icon:""},{name:"Twitter",href:"#",icon:""},{name:"Instagram",href:"#",icon:""},{name:"LinkedIn",href:"#",icon:""}],v6=[{title:"Fever",icon:"",description:"Find doctors for fever treatment",href:"#"},{title:"Heart Attack",icon:"",description:"Emergency cardiac care",href:"#"},{title:"Pregnancy",icon:"",description:"Prenatal and maternity care",href:"#"},{title:"High Blood Pressure",icon:"",description:"Hypertension management",href:"#"},{title:"Breathlessness",icon:"",description:"Respiratory care",href:"#"},{title:"Diarrhea",icon:"",description:"Digestive health",href:"#"},{title:"Hairfall",icon:"",description:"Hair and scalp treatment",href:"#"},{title:"Anxiety/Depression",icon:"",description:"Mental health support",href:"#"},{title:"Dengue Fever",icon:"",description:"Dengue prevention and treatment",href:"#"},{title:"Typhoid Fever",icon:"",description:"Typhoid care",href:"#"},{title:"Piles",icon:"",description:"Hemorrhoid treatment",href:"#"},{title:"Gastritis",icon:"",description:"Stomach care",href:"#"}],y6=["Allergy & Immunology -       ","Anesthesiology & Critical Care -     ","Cardiology -   ","Cardiothoracic Surgery -   ","Clinical Biochemical Genetics -   ","Dermatology -     ","Emergency Medicine -  ","Endocrinology -    ","Family Medicine -   ( )","Forensic Pathology -   ","Gastroenterology & Hepatology -      ","Geriatric Medicine -     ","Hematology / Medical Oncology -       ","Infectious Diseases -    ","Internal Medicine -     ","Interventional Cardiology -   ","Neonatology (Pediatric Subspecialty) -    ","Nephrology -     ","Neurology -      ","Neurosurgery -  (    )","Nuclear Medicine -     ","Obstetrics & Gynecology (OB/GYN) -       ","Ophthalmology -     ","Oral & Maxillofacial Surgery -     ","Otorhinolaryngology (ENT) -     ","Orthopedic Surgery -     ","Palliative Medicine -   ","Pathology (Anatomical & Clinical) -  ","Physical Medicine & Rehabilitation (PM&R) -    ","Plastic, Reconstructive & Aesthetic Surgery -    ","Preventive & Lifestyle Medicine -      ","Psychiatry & Child-Adolescent Psychiatry -  ","Public Health & Occupational Medicine -      ","Pulmonology / Respiratory Medicine -     ","Radiation Oncology -    ","Radiology & Interventional Radiology -    ","Rheumatology -      ","Sleep Medicine -     ","Sports Medicine -     ","Thoracic Surgery -       ","Toxicology -       ","Transfusion Medicine -      ","Urology -         ","Vascular Surgery & Interventional Radiologists -     ","Research Physicians -     "],qw=["Allergy & Immunology","Anesthesiology & Critical Care","Cardiology","Cardiothoracic Surgery","Clinical Biochemical Genetics","Dermatology","Emergency Medicine","Endocrinology","Family Medicine","Forensic Pathology","Gastroenterology & Hepatology","Geriatric Medicine","Hematology / Medical Oncology","Infectious Diseases","Internal Medicine","Interventional Cardiology","Neonatology (Pediatric Subspecialty)","Nephrology","Neurology","Neurosurgery","Nuclear Medicine","Obstetrics & Gynecology (OB/GYN)","Ophthalmology","Oral & Maxillofacial Surgery","Otorhinolaryngology (ENT)","Orthopedic Surgery","Palliative Medicine","Pathology (Anatomical & Clinical)","Physical Medicine & Rehabilitation (PM&R)","Plastic, Reconstructive & Aesthetic Surgery","Preventive & Lifestyle Medicine","Psychiatry & Child-Adolescent Psychiatry","Public Health & Occupational Medicine","Pulmonology / Respiratory Medicine","Radiation Oncology","Radiology & Interventional Radiology","Rheumatology","Sleep Medicine","Sports Medicine","Thoracic Surgery","Toxicology","Transfusion Medicine","Urology","Vascular Surgery & Interventional Radiologists","Research Physicians"],Ww=[{name:"Paracetamol",slug:"paracetamol",type:"Tablet",description:"Pain reliever and fever reducer.",price:50,image:"/quickMed//images/medicine1.jpg"},{name:"Amoxicillin",slug:"amoxicillin",type:"Capsule",description:"Antibiotic for bacterial infections.",price:120,image:"/quickMed//images/medicine2.jpg"}],$w=[{name:"Chughtai Lab",slug:"chughtai-lab",city:"Lahore",address:"Main Boulevard, Lahore",contact:"042-111-456-789",tests:120,image:"/quickMed//images/lab1.jpg"},{name:"Excel Labs",slug:"excel-labs",city:"Islamabad",address:"Blue Area, Islamabad",contact:"051-111-222-333",tests:80,image:"/quickMed//images/lab2.jpg"}],_6=["Public","Private","Semi-Private","Military","Charity"],b6=["General","Specialized","Teaching","Research","Emergency"],x6=["Male","Female","Other"],w6=["Islam","Christianity","Hinduism","Sikhism","Buddhism","Other"],S6=["MBBS","BDS"],R6={Karachi:[24.86,67.01],Lahore:[31.56,74.35],Faisalabad:[31.41,73.11],Rawalpindi:[33.6,73.04],Gujranwala:[32.16,74.18],Multan:[30.2,71.45],Hyderabad:[25.38,68.37],Peshawar:[34.01,71.54],Quetta:[30.21,67.02],Islamabad:[33.72,73.06],Sargodha:[32.08,72.67],Sialkot:[32.52,74.55],Bahawalpur:[29.39,71.67],Sukkur:[27.7,68.85],Jhang:[31.28,72.32],Sheikhupura:[31.72,73.98],Larkana:[27.56,68.21],Gujrat:[32.58,74.07],Mardan:[34.2,72.04],Kasur:[31.12,74.45],RahimYarKhan:[28.42,70.3],Sahiwal:[30.67,73.11],Okara:[30.81,73.45],WahCantonment:[33.77,72.75],DeraGhaziKhan:[30.06,70.64],MirpurKhas:[25.53,69.01],Nawabshah:[26.24,68.4],Mingora:[34.78,72.36],Chiniot:[31.72,72.98],Kamoke:[31.98,74.21],Burewala:[30.16,72.67],Jhelum:[32.94,73.72],Sadiqabad:[28.3,70.13],Jacobabad:[28.28,68.43],Shikarpur:[27.96,68.64],Khanewal:[30.31,71.82],Hafizabad:[32.07,73.68],Kohat:[33.6,71.44],Muzaffargarh:[30.07,71.18],Khanpur:[28.65,70.65],Gojra:[31.15,72.69],Bahawalnagar:[30,73.25],Muridke:[31.81,74.25],Pakpattan:[30.35,73.38],Abbottabad:[34.15,73.2],TandoAdam:[25.76,68.66],Khairpur:[27.53,68.74],Chishtian:[29.79,72.84],Daska:[32.33,74.36],Dadu:[26.73,67.77],MandiBahauddin:[32.59,73.48],AhmadpurEast:[29.15,71.26],Kamalia:[30.73,72.64],Khuzdar:[27.8,66.6],Vehari:[30.05,72.34],DeraIsmailKhan:[31.83,70.9],Wazirabad:[32.45,74.1],Nowshera:[34.01,71.99],Khushab:[32.3,72.34],Swabi:[34.1167,72.4667],Layyah:[30.9647,70.9399],Bhakkar:[31.6333,71.0667],TobaTekSingh:[30.9777,72.4861],Jaranwala:[31.3454,73.4298],Thatta:[24.7497,67.9116],Badin:[24.6552,68.8402],Umerkot:[25.3655,69.7401],Shahdadkot:[27.9,67.93],Ghotki:[28,69.34],Kotri:[25.43,68.32],TandoAllahyar:[25.462,68.7198],Moro:[26.7286,68.0234],Taxila:[33.7475,72.8073],Turbat:[26.0028,63.0506],Zhob:[31.3397,69.4477],UchSharif:[29.2389,71.0615],Benazirabad:[26.65,68],Kotli:[33.15,73.75],Bhimber:[32.9667,74.0833],Mansehra:[34.3333,73.2],Chakwal:[32.93,72.86],Mianwali:[32.5833,71.5333],Samundri:[30.4728,72.97],Sambrial:[32.5167,74.4667],Narowal:[32.1,74.8833],Mirpur:[33.15,73.75],KotAddu:[30.5333,70.95],Lodhran:[29.53,71.64],ShakarGarh:[32.3,74.52],SeraiAlamgir:[32.9,73.73],TaunsaSharif:[30.4333,70.6347],Hasilpur:[29.69,73.69],Hub:[25.0675,66.5814],DeraMuradJamali:[28.0347,67.9179],Dalbandin:[28.9,64.4333],Chaman:[30.9211,66.4506],Loralai:[29.3667,68.4167],Pasni:[25.2828,63.3328],Sibi:[29.5444,67.8778],Pishin:[30.5833,67.9997],Qalat:[29.0167,66.9],Kharian:[32.8167,73.85],Muree:[33.9011,73.3944]},wv=["Karachi","Lahore","Islamabad","Multan","Peshawar","Faisalabad","Rawalpindi","Gujranwala","Hyderabad","Quetta","Sargodha","Sialkot","Bahawalpur","Sukkur","Jhang","Sheikhupura","Larkana","Gujrat","Mardan","Kasur","RahimYarKhan","Sahiwal","Okara","WahCantonment","DeraGhaziKhan","MirpurKhas","Nawabshah","Mingora","Chiniot","Kamoke","Burewala","Jhelum","Sadiqabad","Jacobabad","Shikarpur","Khanewal","Hafizabad","Kohat","Muzaffargarh","Khanpur","Gojra","Bahawalnagar","Muridke","Pakpattan","Abbottabad","TandoAdam","Khairpur","Chishtian","Daska","Dadu","MandiBahauddin","AhmadpurEast","Kamalia","Khuzdar","Vehari","DeraIsmailKhan","Wazirabad","Nowshera","Khushab","Swabi","Layyah","Bhakkar","TobaTekSingh","Jaranwala","Thatta","Badin","Umerkot","Shahdadkot","Ghotki","Kotri","TandoAllahyar","Moro","Taxila","Turbat","Zhob","UchSharif","Benazirabad","Kotli","Bhimber","Mansehra","Chakwal","Mianwali","Samundri","Sambrial","Narowal","Mirpur","KotAddu","Lodhran","ShakarGarh","SeraiAlamgir","TaunsaSharif","Hasilpur","Hub","DeraMuradJamali","Dalbandin","Chaman","Loralai","Pasni","Sibi","Pishin","Qalat","Kharian","Muree"],E6=["Aga Khan University Hospital","Shaukat Khanum Memorial Cancer Hospital","Lahore General Hospital","Services Hospital Lahore","Mayo Hospital Lahore","Jinnah Hospital Lahore","Combined Military Hospital (CMH)","National Institute of Cardiovascular Disease","Pakistan Institute of Medical Sciences (PIMS)","Ziauddin Hospital"],k6=(e,t)=>[{title:"Total Doctors",count:e?.total,icon:"",bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Pending Doctors Reviews",count:e?.pending,icon:"",bgColor:"bg-yellow-100",textColor:"text-yellow-600"},{title:"Approved Doctors",count:e?.verified,icon:"",bgColor:"bg-green-100",textColor:"text-green-600"},{title:"Rejected Doctors",count:e?.rejected,icon:"",bgColor:"bg-red-100",textColor:"text-red-600"},{title:"Total Hospitals",count:t?.total,icon:"",bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Pending Hospitals Reviews",count:t?.pending,icon:"",bgColor:"bg-yellow-100",textColor:"text-yellow-600"},{title:"Approved Hospitals",count:t?.verified,icon:"",bgColor:"bg-green-100",textColor:"text-green-600"},{title:"Rejected Hospitals",count:t?.rejected,icon:"",bgColor:"bg-red-100",textColor:"text-red-600"}],C6=e=>[{key:"name",label:"Name",value:e.name},{key:"email",label:"Email",value:e.email},{key:"phone",label:"Phone",value:e.phone},{key:"cnic",label:"CNIC",value:e.cnic},{key:"gender",label:"Gender",value:e.gender},{key:"address",label:"Address",value:e.fullAddress}],T6=e=>[{key:"degree",label:"Main Degree",value:e.mainDegree},{key:"speciality",label:"Speciality",value:Array.isArray(e.speciality)?e.speciality.join(", "):e.speciality},{key:"experience",label:"Experience",value:e.experience?`${e.experience} years`:"Not specified"},{key:"fee",label:"Fee",value:e.fee?`Rs. ${e.fee}`:"Not set"},{key:"hospital",label:"Hospital",value:e.hospital},{key:"pmdc",label:"PMDC Number",value:e.pmdcNumber}],Zw=()=>o.jsx("svg",{className:"ml-1",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",viewBox:"0 0 16 16",children:o.jsx("path",{fillRule:"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"})}),P6=()=>o.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),N6=()=>o.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h2l.4 2M7 7h10l1 2m-1 8v2a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-2m12-8V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v2"})}),D6=()=>o.jsx("svg",{className:"ml-0",width:"14.01",height:"17.513",viewBox:"0 0 18 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M9 0C6.61392 0.00270323 4.32637 0.914156 2.63915 2.53442C0.951939 4.15468 0.0028245 6.35146 9.57508e-06 8.64286C-0.00284824 10.5154 0.634084 12.3371 1.8131 13.8286C1.8131 13.8286 2.05855 14.1389 2.09864 14.1837L9 22L15.9046 14.1798C15.9406 14.1381 16.1869 13.8286 16.1869 13.8286L16.1877 13.8262C17.3661 12.3354 18.0028 10.5145 18 8.64286C17.9972 6.35146 17.0481 4.15468 15.3608 2.53442C13.6736 0.914156 11.3861 0.00270323 9 0V0ZM9 11.7857C8.35272 11.7857 7.71997 11.6014 7.18177 11.256C6.64358 10.9107 6.2241 10.4199 5.9764 9.84558C5.72869 9.27129 5.66388 8.63937 5.79016 8.02972C5.91644 7.42006 6.22814 6.86006 6.68583 6.42052C7.14353 5.98098 7.72668 5.68166 8.36152 5.56039C8.99637 5.43912 9.6544 5.50136 10.2524 5.73924C10.8504 5.97711 11.3616 6.37994 11.7212 6.89678C12.0808 7.41362 12.2727 8.02126 12.2727 8.64286C12.2716 9.47608 11.9265 10.2749 11.313 10.864C10.6994 11.4532 9.86765 11.7847 9 11.7857V11.7857Z",fill:"#014E78"})}),ax=()=>o.jsx("svg",{width:"19",height:"19",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M19.8499 19.0004C21.7248 16.9042 22.7082 14.1594 22.5908 11.3495C22.4735 8.53962 21.2647 5.88632 19.2215 3.95379C17.1784 2.02125 14.4619 0.961924 11.6499 1.00105C8.8378 1.04017 6.1519 2.17466 4.16328 4.16328C2.17466 6.1519 1.04017 8.8378 1.00105 11.6499C0.961924 14.4619 2.02125 17.1784 3.95379 19.2215C5.88632 21.2647 8.53962 22.4735 11.3495 22.5908C14.1594 22.7082 16.9042 21.7248 19.0004 19.8499L23.9764 24.8258C24.0892 24.9377 24.2417 25.0003 24.4006 25C24.5595 24.9997 24.7117 24.9364 24.8241 24.8241C24.9364 24.7117 24.9997 24.5595 25 24.4006C25.0003 24.2417 24.9377 24.0892 24.8258 23.9764L19.8499 19.0004ZM4.99921 18.5876C4.09652 17.7009 3.37786 16.6447 2.88446 15.4795C2.39106 14.3143 2.13265 13.0632 2.12407 11.7979C2.11548 10.5326 2.35688 9.27802 2.83442 8.10625C3.31195 6.93448 4.01621 5.86857 4.90678 4.96969C5.79734 4.07082 6.85667 3.35669 8.02396 2.8683C9.19124 2.3799 10.4435 2.12686 11.7088 2.1237C12.9742 2.12054 14.2277 2.36732 15.3974 2.84988C16.5671 3.33243 17.63 4.04126 18.525 4.93567L18.5885 4.99921C19.4808 5.89149 20.1885 6.95078 20.6714 8.11659C21.1542 9.2824 21.4027 10.5319 21.4027 11.7937C21.4026 13.0556 21.154 14.3051 20.6711 15.4708C20.1882 16.6366 19.4804 17.6959 18.5881 18.5881C17.6958 19.4803 16.6365 20.1881 15.4707 20.6709C14.3049 21.1538 13.0554 21.4023 11.7936 21.4022C9.24515 21.4021 6.80115 20.3897 4.99921 18.5876Z",fill:"#014E78",stroke:"#014E78"})}),A6=()=>o.jsx("svg",{className:"w-4 h-4 text-emerald-600 group-hover:text-emerald-800 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),O6=()=>o.jsxs("svg",{className:"animate-spin h-16 w-16 text-emerald-600 drop-shadow-lg",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),M6=()=>o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})}),Gw=()=>o.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),j6=()=>o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),Yw=()=>o.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),L6=()=>o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),I6=()=>o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M13 7a3 3 0 11-6 0 3 3 0 016 0zm-6 8a6 6 0 1112 0H7z"})}),sx=()=>o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),B6=()=>o.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2H7a2 2 0 01-2-2v-1.586a1 1 0 01.293-.707l9.414-9.414a1 1 0 011.414 0l1.586 1.586a1 1 0 010 1.414l-9.414 9.414A1 1 0 017 19v-1.586z"})}),z6=()=>o.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),U6=()=>o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),F6=(e,t=!1)=>{const r=["Backspace","ArrowLeft","ArrowRight","Delete","Tab"],s=/^[0-9]$/.test(e.key),l=t&&e.key==="-";return s||l||r.includes(e.key)},Yr=({label:e,type:t="text",name:r,error:s,className:l="",onlyNumbers:d=!1,allowDashes:C=!1,checked:T,required:b=!1,onBlur:u,...x})=>{const f=y=>{d&&!F6(y,C)&&y.preventDefault()};return o.jsxs("div",{children:[e&&o.jsx("label",{htmlFor:r,className:"block text-emerald-700 font-medium mb-1",children:e}),o.jsx("input",{id:r,name:r,type:t,required:b,onKeyDown:f,className:`w-full px-3 py-2 border ${s?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500 ${l}`,inputMode:d?"numeric":void 0,pattern:d?C?"[0-9-]*":"[0-9]*":void 0,...x}),s&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:s})]})},ix=({link:e,idx:t,openDropdown:r,setOpenDropdown:s,isMobile:l,onLinkClick:d})=>{const C=r===t,T=()=>{window.scrollTo({top:0,behavior:"smooth"}),d?.()},b=()=>s(C?null:t);return o.jsxs("div",{className:`relative ${l?"mb-2":"group"}`,onMouseEnter:l?void 0:()=>s(t),onMouseLeave:l?void 0:()=>s(null),children:[o.jsxs("button",{onClick:l?b:void 0,className:"flex items-center w-full px-3 py-2 xl:text-[15px] text-[14px] font-medium text-[#014e78] bg-white hover:bg-[#014e78] hover:text-white rounded transition-colors duration-150",children:[o.jsx("span",{children:e.label}),o.jsx(Zw,{})]}),o.jsx("div",{className:`${l?C?"block":"hidden":C?"absolute left-0 w-64 min-w-fit z-20":"hidden"} bg-[#f9f9f9] mt-1 shadow-lg rounded transition-all duration-200 ${e.label==="Find Doctors"?"max-h-96 overflow-y-auto":""}`,children:e.dropdown.map((u,x)=>o.jsx(ns,{to:u.href,onClick:T,className:`block px-4 py-2.5 text-[#014e78] hover:bg-[#f1f1f1] font-medium whitespace-nowrap ${e.label==="Find Doctors"?"text-sm":"text-[15px]"} ${x===0?"border-b border-gray-200":""}`,children:u.label},u.label))})]})},Ui=({href:e,label:t,onClick:r,className:s})=>{const l=()=>{window.scrollTo({top:0,behavior:"smooth"}),r&&r()};return o.jsx(ns,{onClick:l,to:e,className:`${s} px-3 py-2 text-[15px] font-medium text-[#014e78] hover:bg-[#f7f7f7] rounded transition-colors duration-150`,children:t})},H6=(e="")=>e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-"),ox=({idx:e=0,openDropdown:t,setOpenDropdown:r,isMobile:s=!1,onLinkClick:l})=>{const d=t===e,{allPublicHospital:C=[]}=to(),T=()=>{window.scrollTo({top:0,behavior:"smooth"}),l?.()},b=Z.useMemo(()=>{const y={};return C.forEach(E=>{const _=E.city&&String(E.city).trim()||E.location&&E.location.city&&String(E.location.city).trim()||"Unknown";y[_]||(y[_]=0),y[_]+=1}),y},[C]),u=Z.useMemo(()=>Object.keys(b).sort(),[b]),x=y=>`/hospitals/${H6(y)}`,f=()=>r(d?null:e);return o.jsxs("div",{className:`relative ${s?"mb-2":"group"}`,onMouseEnter:s?void 0:()=>r(e),onMouseLeave:s?void 0:()=>r(null),children:[o.jsxs("button",{onClick:s?f:void 0,className:"flex items-center w-full px-3 py-2 xl:text-[15px] text-[14px] font-medium text-[#014e78] bg-white hover:bg-[#014e78] hover:text-white rounded transition-colors duration-150","aria-expanded":d,"aria-haspopup":"true",children:[o.jsx("span",{children:"Hospitals"}),o.jsx(Zw,{})]}),o.jsxs("div",{className:`${s?d?"block":"hidden":d?"absolute left-0 w-64 min-w-fit z-20":"hidden"} bg-[#f9f9f9] mt-1 shadow-lg rounded transition-all duration-200 ${Object.keys(b).length>6?"max-h-96 overflow-y-auto":""}`,children:[o.jsx(ns,{to:"/hospitals",onClick:T,className:"block px-4 py-2.5 text-[#014e78] hover:bg-[#f1f1f1] font-medium whitespace-nowrap text-[15px] border-b border-gray-200",children:"All Hospitals (City wise)"}),u.length===0?o.jsx("div",{className:"px-4 py-3 text-sm text-gray-600",children:"No hospitals found."}):o.jsx("div",{className:"pt-0",children:u.map(y=>o.jsx(ns,{to:x(y),onClick:T,className:"block px-4 py-2.5 text-[#014e78] hover:bg-[#f1f1f1] font-medium whitespace-nowrap text-[15px]",children:y},y))})]})]})};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q6=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),cx=e=>{const t=q6(e);return t.charAt(0).toUpperCase()+t.slice(1)},Kw=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),W6=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=Z.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:l="",children:d,iconNode:C,...T},b)=>Z.createElement("svg",{ref:b,...$6,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:Kw("lucide",l),...!d&&!W6(T)&&{"aria-hidden":"true"},...T},[...C.map(([u,x])=>Z.createElement(u,x)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=(e,t)=>{const r=Z.forwardRef(({className:s,...l},d)=>Z.createElement(Z6,{ref:d,iconNode:t,className:Kw(`lucide-${V6(cx(e))}`,`lucide-${e}`,s),...l}));return r.displayName=cx(e),r};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],lx=rs("activity",G6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],K6=rs("arrow-left",Y6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],X6=rs("arrow-right",Q6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ux=rs("circle-alert",J6);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tP=rs("circle-check-big",eP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],rP=rs("circle-user",nP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sP=rs("clock",aP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Qw=rs("cloud-upload",iP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],cP=rs("ellipsis-vertical",oP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],uP=rs("file-text",lP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],hP=rs("heart",dP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],fP=rs("image",pP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],gP=rs("message-circle",mP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]],yP=rs("message-square-text",vP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["path",{d:"M5 12h14",key:"1ays0h"}]],bP=rs("minus",_P);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],wP=rs("paperclip",xP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],RP=rs("phone",SP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kP=rs("search",EP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Xw=rs("send",CP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],PP=rs("shield",TP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],DP=rs("smile",NP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],e0=rs("sparkles",AP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],lp=rs("stethoscope",OP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],jP=rs("trending-up",MP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],IP=rs("user",LP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zP=rs("users",BP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],FP=rs("video",UP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],B0=rs("x",HP),dx=({label:e,name:t,onChange:r,error:s,accept:l="*/*",multiple:d=!1,maxSize:C=5e6,preview:T=!1,required:b=!1})=>{const[u,x]=Z.useState(!1),[f,y]=Z.useState([]),E=A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?x(!0):A.type==="dragleave"&&x(!1)},_=A=>{A.preventDefault(),A.stopPropagation(),x(!1);const P=Array.from(A.dataTransfer.files);m(P)},m=A=>{const P=A.filter(z=>z.size>C?(alert(`File ${z.name} is too large. Maximum size is ${C/1e6}MB`),!1):!0);d?(y(z=>[...z,...P]),r(P)):(y(P),r(P[0]))},k=A=>{const P=Array.from(A.target.files);m(P)},w=A=>{if(d){const P=f.filter((z,N)=>N!==A);y(P),r(P)}else y([]),r(null)},U=A=>{if(A===0)return"0 Bytes";const P=1024,z=["Bytes","KB","MB","GB"],N=Math.floor(Math.log(A)/Math.log(P));return parseFloat((A/Math.pow(P,N)).toFixed(2))+" "+z[N]},g=A=>A.type.startsWith("image/")?o.jsx(fP,{className:"w-4 h-4"}):o.jsx(uP,{className:"w-4 h-4"});return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e,b&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ${u?"border-emerald-400 bg-emerald-50":"border-gray-300 hover:border-gray-400"} ${s?"border-red-300 bg-red-50":""}`,onDragEnter:E,onDragLeave:E,onDragOver:E,onDrop:_,children:[o.jsx("input",{type:"file",name:t,onChange:k,accept:l,multiple:d,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Qw,{className:"mx-auto h-12 w-12 text-gray-400"}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx("span",{className:"font-medium text-emerald-600 hover:text-emerald-500",children:"Click to upload"})," ","or drag and drop"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[l!=="*/*"&&`Accepted formats: ${l}`,o.jsx("br",{}),"Max size: ",C/1e6,"MB"]})]})]}),s&&o.jsx("p",{className:"text-sm text-red-600",children:s}),f.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Selected Files:"}),o.jsx("div",{className:"space-y-2",children:f.map((A,P)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[g(A),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.name}),o.jsx("p",{className:"text-xs text-gray-500",children:U(A.size)})]})]}),o.jsx("button",{type:"button",onClick:()=>w(P),className:"text-red-500 hover:text-red-700",children:o.jsx(B0,{className:"w-4 h-4"})})]},P))})]})]})},cd=({options:e=[],value:t="",onChange:r=()=>{},placeholder:s="Select",icon:l,showUrdu:d=!1,inputStyle:C="",placeholderStyle:T="",urduTextStyle:b="",englishTextStyle:u="",disabled:x=!1})=>{const[f,y]=Z.useState(!1),E=Z.useRef(null);Z.useEffect(()=>{const k=w=>{E.current&&!E.current.contains(w.target)&&y(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const _=k=>{r(k),y(!1)},m=()=>{if(d&&t.includes(" - ")){const[k,w]=t.split(" - ");return o.jsxs(o.Fragment,{children:[k,o.jsx("span",{className:"font-JameelNoori font-bold ml-2",children:w})]})}return t||s};return o.jsxs("div",{className:"relative w-full",ref:E,children:[o.jsxs("button",{type:"button",className:`w-full flex items-center h-11 border border-gray-300 rounded-md px-3 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500 ${x?"bg-gray-100 text-gray-400 cursor-not-allowed":"text-gray-700 bg-white hover:border-gray-400"}`,onClick:()=>!x&&y(k=>!k),disabled:x,children:[o.jsx("span",{className:`flex-1 text-left ${t?C:T}`,children:m()}),l&&o.jsx(l,{})]}),f&&o.jsx("div",{className:"absolute left-0 mt-1 w-full bg-white h-36 overflow-y-auto border border-gray-200 rounded shadow z-10",children:e.map(k=>{const w=d&&typeof k=="string"&&k.includes(" - "),[U,g]=w?k.split(" - "):[k];return o.jsxs("div",{className:"px-4 py-2 hover:bg-emerald-100 text-gray-700 cursor-pointer font-medium flex items-center gap-2",onClick:()=>_(k),children:[o.jsx("span",{className:u,children:U}),w&&o.jsx("span",{className:`font-JameelNoori font-bold text-xl ${b}`,children:g})]},k)})})]})},VP=({selectedSpecialties:e=[],onSpecialtiesChange:t,placeholder:r="Select specialties...",maxSelections:s=5,className:l=""})=>{const d=T=>{e.includes(T)?t(e.filter(b=>b!==T)):e.length<s&&t([...e,T])},C=T=>{t(e.filter(b=>b!==T))};return o.jsxs("div",{className:`relative ${l}`,children:[o.jsxs("label",{className:"block text-emerald-700 font-medium mb-2",children:["Specialties"," ",e.length>0&&o.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",e.length,"/",s,")"]})]}),e.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.map((T,b)=>o.jsxs("div",{onClick:()=>C(T),className:"group flex items-center gap-1 bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full text-sm font-medium hover:bg-emerald-200 cursor-pointer",children:[o.jsx("span",{className:"truncate max-w-[200px]",children:T}),o.jsx(A6,{})]},b))}),o.jsx(cd,{options:qw,value:r,onChange:d,placeholder:r,disabled:e.length>=s}),e.length>=s&&o.jsxs("div",{className:"mt-2 text-xs text-amber-600 bg-amber-50 border border-amber-200 rounded px-3 py-2",children:["Maximum ",s," specialties allowed"]})]})},qP=({options:e=[],value:t="",onChange:r=()=>{},placeholder:s="Select or add...",icon:l,disabled:d=!1,allowAddNew:C=!1,onVerificationChange:T=()=>{},registeredOptions:b=[]})=>{const[u,x]=Z.useState(!1),[f,y]=Z.useState(""),[E,_]=Z.useState([]),m=Z.useRef(null);Z.useEffect(()=>{const P=e.filter(z=>z.toLowerCase().includes(f.toLowerCase()));_(P)},[f,e]),Z.useEffect(()=>{const P=z=>{m.current&&!m.current.contains(z.target)&&(x(!1),y(""))};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const k=P=>{const z=P.target.value;if(y(z),x(!0),C){r(z);const N=b.includes(z);T(N)}},w=P=>{if(y(""),x(!1),r(P),C){const z=b.includes(P);T(z)}},U=()=>{f.trim()&&(x(!1),r(f.trim()),T(!1),y(""))},g=C&&f.trim()&&!E.some(P=>P.toLowerCase()===f.toLowerCase()),A=t||s;return o.jsxs("div",{className:"relative w-full",ref:m,children:[u?o.jsx("input",{type:"text",value:f,onChange:k,onBlur:()=>{setTimeout(()=>x(!1),150)},placeholder:s,className:"w-full px-3 py-2 border border-emerald-200 rounded focus:outline-none focus:ring-2 focus:ring-emerald-500",autoFocus:!0}):o.jsxs("button",{type:"button",className:`w-full flex items-center h-11 border border-emerald-200 rounded-md px-3 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500 ${d?"bg-gray-100 text-gray-400 cursor-not-allowed":"text-gray-700 bg-white hover:border-emerald-400"}`,onClick:()=>!d&&x(!0),disabled:d,children:[o.jsx("span",{className:`flex-1 text-left ${t?"":"text-gray-500"}`,children:A}),l&&o.jsx(l,{})]}),u&&o.jsxs("div",{className:"absolute left-0 mt-1 w-full bg-white max-h-60 overflow-y-auto border border-gray-200 rounded shadow z-10",children:[E.map(P=>o.jsxs("div",{className:"px-4 py-2 hover:bg-emerald-100 text-gray-700 cursor-pointer font-medium flex items-center justify-between",onClick:()=>w(P),children:[o.jsx("span",{children:P}),C&&b.includes(P)&&o.jsx("span",{className:"text-xs text-emerald-600 bg-emerald-100 px-2 py-1 rounded",children:" Verified"})]},P)),g&&o.jsxs("div",{onClick:U,className:"px-4 py-2 hover:bg-gray-50 cursor-pointer flex items-center justify-between border-t border-gray-100",children:[o.jsxs("span",{children:['Add "',f,'"']}),o.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:"+ New"})]}),E.length===0&&!g&&f&&o.jsx("div",{className:"px-4 py-2 text-gray-500 text-sm",children:"No options found"})]})]})},WP=({onCitySelect:e})=>{const[t,r]=Z.useState(""),[s,l]=Z.useState(""),[d,C]=Z.useState([]),T=Z.useRef(null),b=fs(),{allDoctors:u}=ps(),[x,f]=Z.useState(""),[y,E]=Z.useState([]),_=Z.useRef(null);Z.useEffect(()=>{const R=S=>{T.current&&!T.current.contains(S.target)&&C([]),_.current&&!_.current.contains(S.target)&&E([])};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const m=R=>{const S=R.target.value;r(S),C(S?wv.filter(p=>p.toLowerCase().includes(S.toLowerCase())):[])},k=R=>{r(R),C([]);const S=R6[R]||[24.8607,67.0011];e?.(R,S)},w=R=>{if(R.key==="Enter"){const S=d[0]||wv.includes(t)&&t;S&&k(S)}},U=R=>R.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/\//g,"-").replace(/&/g,"and"),g=R=>{if(l(R),!t)return;const S=typeof R=="string"&&R.includes(" - ")?R.split(" - ")[0]:R,p=U(S||"");p&&b(`/doctor/${p}?city=${encodeURIComponent(t)}`)},A=(R,S)=>`${(R||"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${S}`,P=R=>{const S=R.target.value;if(f(S),!S){E([]);return}const p=S.toLowerCase(),D=(u||[]).filter(O=>(O?.name||"").toLowerCase().includes(p)).filter(O=>{if(!t)return!0;const j=(O.city||O.fullAddress||"").toString().toLowerCase();return O.city?O.city.toLowerCase()===t.toLowerCase():j.includes(t.toLowerCase())}).slice(0,20);E(D)},z=R=>{if(R.key==="Enter"&&y.length>0){const S=y[0],p=A(S.name,S._id);b(`/doctor/profile/${p}`)}},N=R=>{const S=A(R.name,R._id);f(""),E([]),b(`/doctor/profile/${S}`)};return o.jsxs("div",{className:"p-6 max-w-4xl mx-auto mb-6 mt-10",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-4",children:[o.jsxs("div",{className:"relative w-full md:w-1/2",ref:T,children:[o.jsx("input",{type:"text",value:t,placeholder:"Enter City",onChange:m,onFocus:()=>C(wv),onKeyDown:w,autoComplete:"off",className:"w-full h-11 border bg-white px-3 pr-12 py-2 rounded-md text-gray-700 font-medium border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("div",{className:"absolute right-0 top-0 h-full w-10 flex items-center justify-center bg-[#f2fafe] border-l border-gray-300 rounded-e-md",children:o.jsx(D6,{})}),d.length>0&&o.jsx("div",{className:"absolute left-0 mt-1 w-full max-h-32 overflow-y-auto bg-white border border-gray-200 rounded shadow z-50",children:d.map(R=>o.jsx("div",{onMouseDown:()=>k(R),className:"px-4 py-2 cursor-pointer hover:bg-blue-100 text-gray-700 font-medium",children:R},R))})]}),o.jsxs("div",{className:"relative w-full md:w-[500px]",children:[o.jsx(cd,{options:y6,value:s,onChange:g,placeholder:"Search by Doctors",showUrdu:!0,inputStyle:"text-[12px]",placeholderStyle:"text-[16px]"}),o.jsx("div",{className:"absolute right-0 top-0 h-full w-10 flex items-center justify-center bg-[#f2fafe] border-l border-gray-300 rounded-e-md pointer-events-none",children:o.jsx(ax,{})})]})]}),o.jsx("div",{className:"mt-3",children:o.jsxs("div",{className:"relative w-full",ref:_,children:[o.jsx("input",{type:"text",value:x,placeholder:"Search doctor by name",onChange:P,onKeyDown:z,autoComplete:"off",className:"w-full h-11 border bg-white px-3 pr-12 py-2 rounded-md text-gray-700 font-medium border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("div",{className:"absolute right-0 top-0 h-full w-10 flex items-center justify-center bg-[#f2fafe] border-l border-gray-300 rounded-e-md pointer-events-none",children:o.jsx(ax,{})}),y.length>0&&o.jsx("div",{className:"absolute left-0 mt-1 w-full max-h-40 overflow-y-auto bg-white border border-gray-200 rounded shadow z-50",children:y.map(R=>o.jsxs("div",{onMouseDown:()=>N(R),className:"px-4 py-2 cursor-pointer hover:bg-blue-100 text-gray-700 font-medium flex items-center justify-between",children:[o.jsx("span",{children:R.name}),o.jsx("span",{className:"text-xs text-gray-500",children:(Array.isArray(R.speciality)?R.speciality[0]:R.speciality)||""})]},R._id))})]})})]})},Jw=()=>o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(O6,{}),o.jsx("span",{className:"mt-4 text-lg font-semibold text-emerald-700 animate-pulse",children:"Loading..."})]})});function hx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function eS(...e){return t=>{let r=!1;const s=e.map(l=>{const d=hx(l,t);return!r&&typeof d=="function"&&(r=!0),d});if(r)return()=>{for(let l=0;l<s.length;l++){const d=s[l];typeof d=="function"?d():hx(e[l],null)}}}}function Wo(...e){return Z.useCallback(eS(...e),e)}function z0(e){const t=ZP(e),r=Z.forwardRef((s,l)=>{const{children:d,...C}=s,T=Z.Children.toArray(d),b=T.find(YP);if(b){const u=b.props.children,x=T.map(f=>f===b?Z.Children.count(u)>1?Z.Children.only(null):Z.isValidElement(u)?u.props.children:null:f);return o.jsx(t,{...C,ref:l,children:Z.isValidElement(u)?Z.cloneElement(u,void 0,x):null})}return o.jsx(t,{...C,ref:l,children:d})});return r.displayName=`${e}.Slot`,r}var $P=z0("Slot");function ZP(e){const t=Z.forwardRef((r,s)=>{const{children:l,...d}=r;if(Z.isValidElement(l)){const C=QP(l),T=KP(d,l.props);return l.type!==Z.Fragment&&(T.ref=s?eS(s,C):C),Z.cloneElement(l,T)}return Z.Children.count(l)>1?Z.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var GP=Symbol("radix.slottable");function YP(e){return Z.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===GP}function KP(e,t){const r={...t};for(const s in t){const l=e[s],d=t[s];/^on[A-Z]/.test(s)?l&&d?r[s]=(...T)=>{const b=d(...T);return l(...T),b}:l&&(r[s]=l):s==="style"?r[s]={...l,...d}:s==="className"&&(r[s]=[l,d].filter(Boolean).join(" "))}return{...e,...r}}function QP(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function tS(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=tS(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function nS(){for(var e,t,r=0,s="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=tS(e))&&(s&&(s+=" "),s+=t);return s}const px=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,fx=nS,XP=(e,t)=>r=>{var s;if(t?.variants==null)return fx(e,r?.class,r?.className);const{variants:l,defaultVariants:d}=t,C=Object.keys(l).map(u=>{const x=r?.[u],f=d?.[u];if(x===null)return null;const y=px(x)||px(f);return l[u][y]}),T=r&&Object.entries(r).reduce((u,x)=>{let[f,y]=x;return y===void 0||(u[f]=y),u},{}),b=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,x)=>{let{class:f,className:y,...E}=x;return Object.entries(E).every(_=>{let[m,k]=_;return Array.isArray(k)?k.includes({...d,...T}[m]):{...d,...T}[m]===k})?[...u,f,y]:u},[]);return fx(e,C,b,r?.class,r?.className)},U0="-",JP=e=>{const t=tN(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:C=>{const T=C.split(U0);return T[0]===""&&T.length!==1&&T.shift(),rS(T,t)||eN(C)},getConflictingClassGroupIds:(C,T)=>{const b=r[C]||[];return T&&s[C]?[...b,...s[C]]:b}}},rS=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),l=s?rS(e.slice(1),s):void 0;if(l)return l;if(t.validators.length===0)return;const d=e.join(U0);return t.validators.find(({validator:C})=>C(d))?.classGroupId},mx=/^\[(.+)\]$/,eN=e=>{if(mx.test(e)){const t=mx.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},tN=e=>{const{theme:t,classGroups:r}=e,s={nextPart:new Map,validators:[]};for(const l in r)t0(r[l],s,l,t);return s},t0=(e,t,r,s)=>{e.forEach(l=>{if(typeof l=="string"){const d=l===""?t:gx(t,l);d.classGroupId=r;return}if(typeof l=="function"){if(nN(l)){t0(l(s),t,r,s);return}t.validators.push({validator:l,classGroupId:r});return}Object.entries(l).forEach(([d,C])=>{t0(C,gx(t,d),r,s)})})},gx=(e,t)=>{let r=e;return t.split(U0).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},nN=e=>e.isThemeGetter,rN=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const l=(d,C)=>{r.set(d,C),t++,t>e&&(t=0,s=r,r=new Map)};return{get(d){let C=r.get(d);if(C!==void 0)return C;if((C=s.get(d))!==void 0)return l(d,C),C},set(d,C){r.has(d)?r.set(d,C):l(d,C)}}},n0="!",r0=":",aN=r0.length,sN=e=>{const{prefix:t,experimentalParseClassName:r}=e;let s=l=>{const d=[];let C=0,T=0,b=0,u;for(let _=0;_<l.length;_++){let m=l[_];if(C===0&&T===0){if(m===r0){d.push(l.slice(b,_)),b=_+aN;continue}if(m==="/"){u=_;continue}}m==="["?C++:m==="]"?C--:m==="("?T++:m===")"&&T--}const x=d.length===0?l:l.substring(b),f=iN(x),y=f!==x,E=u&&u>b?u-b:void 0;return{modifiers:d,hasImportantModifier:y,baseClassName:f,maybePostfixModifierPosition:E}};if(t){const l=t+r0,d=s;s=C=>C.startsWith(l)?d(C.substring(l.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:C,maybePostfixModifierPosition:void 0}}if(r){const l=s;s=d=>r({className:d,parseClassName:l})}return s},iN=e=>e.endsWith(n0)?e.substring(0,e.length-1):e.startsWith(n0)?e.substring(1):e,oN=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const l=[];let d=[];return s.forEach(C=>{C[0]==="["||t[C]?(l.push(...d.sort(),C),d=[]):d.push(C)}),l.push(...d.sort()),l}},cN=e=>({cache:rN(e.cacheSize),parseClassName:sN(e),sortModifiers:oN(e),...JP(e)}),lN=/\s+/,uN=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:l,sortModifiers:d}=t,C=[],T=e.trim().split(lN);let b="";for(let u=T.length-1;u>=0;u-=1){const x=T[u],{isExternal:f,modifiers:y,hasImportantModifier:E,baseClassName:_,maybePostfixModifierPosition:m}=r(x);if(f){b=x+(b.length>0?" "+b:b);continue}let k=!!m,w=s(k?_.substring(0,m):_);if(!w){if(!k){b=x+(b.length>0?" "+b:b);continue}if(w=s(_),!w){b=x+(b.length>0?" "+b:b);continue}k=!1}const U=d(y).join(":"),g=E?U+n0:U,A=g+w;if(C.includes(A))continue;C.push(A);const P=l(w,k);for(let z=0;z<P.length;++z){const N=P[z];C.push(g+N)}b=x+(b.length>0?" "+b:b)}return b};function dN(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=aS(t))&&(s&&(s+=" "),s+=r);return s}const aS=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=aS(e[s]))&&(r&&(r+=" "),r+=t);return r};function hN(e,...t){let r,s,l,d=C;function C(b){const u=t.reduce((x,f)=>f(x),e());return r=cN(u),s=r.cache.get,l=r.cache.set,d=T,T(b)}function T(b){const u=s(b);if(u)return u;const x=uN(b,r);return l(b,x),x}return function(){return d(dN.apply(null,arguments))}}const Ei=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},sS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,iS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,pN=/^\d+\/\d+$/,fN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,vN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$d=e=>pN.test(e),fa=e=>!!e&&!Number.isNaN(Number(e)),Pu=e=>!!e&&Number.isInteger(Number(e)),Sv=e=>e.endsWith("%")&&fa(e.slice(0,-1)),Gl=e=>fN.test(e),_N=()=>!0,bN=e=>mN.test(e)&&!gN.test(e),oS=()=>!1,xN=e=>vN.test(e),wN=e=>yN.test(e),SN=e=>!pr(e)&&!fr(e),RN=e=>mh(e,uS,oS),pr=e=>sS.test(e),Ju=e=>mh(e,dS,bN),Rv=e=>mh(e,PN,fa),vx=e=>mh(e,cS,oS),EN=e=>mh(e,lS,wN),Of=e=>mh(e,hS,xN),fr=e=>iS.test(e),np=e=>gh(e,dS),kN=e=>gh(e,NN),yx=e=>gh(e,cS),CN=e=>gh(e,uS),TN=e=>gh(e,lS),Mf=e=>gh(e,hS,!0),mh=(e,t,r)=>{const s=sS.exec(e);return s?s[1]?t(s[1]):r(s[2]):!1},gh=(e,t,r=!1)=>{const s=iS.exec(e);return s?s[1]?t(s[1]):r:!1},cS=e=>e==="position"||e==="percentage",lS=e=>e==="image"||e==="url",uS=e=>e==="length"||e==="size"||e==="bg-size",dS=e=>e==="length",PN=e=>e==="number",NN=e=>e==="family-name",hS=e=>e==="shadow",DN=()=>{const e=Ei("color"),t=Ei("font"),r=Ei("text"),s=Ei("font-weight"),l=Ei("tracking"),d=Ei("leading"),C=Ei("breakpoint"),T=Ei("container"),b=Ei("spacing"),u=Ei("radius"),x=Ei("shadow"),f=Ei("inset-shadow"),y=Ei("text-shadow"),E=Ei("drop-shadow"),_=Ei("blur"),m=Ei("perspective"),k=Ei("aspect"),w=Ei("ease"),U=Ei("animate"),g=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...A(),fr,pr],z=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],R=()=>[fr,pr,b],S=()=>[$d,"full","auto",...R()],p=()=>[Pu,"none","subgrid",fr,pr],D=()=>["auto",{span:["full",Pu,fr,pr]},Pu,fr,pr],O=()=>[Pu,"auto",fr,pr],j=()=>["auto","min","max","fr",fr,pr],I=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],H=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...R()],$=()=>[$d,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],q=()=>[e,fr,pr],se=()=>[...A(),yx,vx,{position:[fr,pr]}],J=()=>["no-repeat",{repeat:["","x","y","space","round"]}],be=()=>["auto","cover","contain",CN,RN,{size:[fr,pr]}],Re=()=>[Sv,np,Ju],Se=()=>["","none","full",u,fr,pr],me=()=>["",fa,np,Ju],Ce=()=>["solid","dashed","dotted","double"],Be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_e=()=>[fa,Sv,yx,vx],Ye=()=>["","none",_,fr,pr],Qe=()=>["none",fa,fr,pr],Ge=()=>["none",fa,fr,pr],He=()=>[fa,fr,pr],Te=()=>[$d,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Gl],breakpoint:[Gl],color:[_N],container:[Gl],"drop-shadow":[Gl],ease:["in","out","in-out"],font:[SN],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Gl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Gl],shadow:[Gl],spacing:["px",fa],text:[Gl],"text-shadow":[Gl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",$d,pr,fr,k]}],container:["container"],columns:[{columns:[fa,pr,fr,T]}],"break-after":[{"break-after":g()}],"break-before":[{"break-before":g()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:S()}],"inset-x":[{"inset-x":S()}],"inset-y":[{"inset-y":S()}],start:[{start:S()}],end:[{end:S()}],top:[{top:S()}],right:[{right:S()}],bottom:[{bottom:S()}],left:[{left:S()}],visibility:["visible","invisible","collapse"],z:[{z:[Pu,"auto",fr,pr]}],basis:[{basis:[$d,"full","auto",T,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[fa,$d,"auto","initial","none",pr]}],grow:[{grow:["",fa,fr,pr]}],shrink:[{shrink:["",fa,fr,pr]}],order:[{order:[Pu,"first","last","none",fr,pr]}],"grid-cols":[{"grid-cols":p()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":p()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...I(),"normal"]}],"justify-items":[{"justify-items":[...H(),"normal"]}],"justify-self":[{"justify-self":["auto",...H()]}],"align-content":[{content:["normal",...I()]}],"align-items":[{items:[...H(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...H(),{baseline:["","last"]}]}],"place-content":[{"place-content":I()}],"place-items":[{"place-items":[...H(),"baseline"]}],"place-self":[{"place-self":["auto",...H()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[T,"screen",...$()]}],"min-w":[{"min-w":[T,"screen","none",...$()]}],"max-w":[{"max-w":[T,"screen","none","prose",{screen:[C]},...$()]}],h:[{h:["screen","lh",...$()]}],"min-h":[{"min-h":["screen","lh","none",...$()]}],"max-h":[{"max-h":["screen","lh",...$()]}],"font-size":[{text:["base",r,np,Ju]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,fr,Rv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Sv,pr]}],"font-family":[{font:[kN,pr,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,fr,pr]}],"line-clamp":[{"line-clamp":[fa,"none",fr,Rv]}],leading:[{leading:[d,...R()]}],"list-image":[{"list-image":["none",fr,pr]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",fr,pr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[fa,"from-font","auto",fr,Ju]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[fa,"auto",fr,pr]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fr,pr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fr,pr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:J()}],"bg-size":[{bg:be()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Pu,fr,pr],radial:["",fr,pr],conic:[Pu,fr,pr]},TN,EN]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:Re()}],"gradient-via-pos":[{via:Re()}],"gradient-to-pos":[{to:Re()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:Se()}],"rounded-s":[{"rounded-s":Se()}],"rounded-e":[{"rounded-e":Se()}],"rounded-t":[{"rounded-t":Se()}],"rounded-r":[{"rounded-r":Se()}],"rounded-b":[{"rounded-b":Se()}],"rounded-l":[{"rounded-l":Se()}],"rounded-ss":[{"rounded-ss":Se()}],"rounded-se":[{"rounded-se":Se()}],"rounded-ee":[{"rounded-ee":Se()}],"rounded-es":[{"rounded-es":Se()}],"rounded-tl":[{"rounded-tl":Se()}],"rounded-tr":[{"rounded-tr":Se()}],"rounded-br":[{"rounded-br":Se()}],"rounded-bl":[{"rounded-bl":Se()}],"border-w":[{border:me()}],"border-w-x":[{"border-x":me()}],"border-w-y":[{"border-y":me()}],"border-w-s":[{"border-s":me()}],"border-w-e":[{"border-e":me()}],"border-w-t":[{"border-t":me()}],"border-w-r":[{"border-r":me()}],"border-w-b":[{"border-b":me()}],"border-w-l":[{"border-l":me()}],"divide-x":[{"divide-x":me()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":me()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ce(),"hidden","none"]}],"divide-style":[{divide:[...Ce(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...Ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[fa,fr,pr]}],"outline-w":[{outline:["",fa,np,Ju]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",x,Mf,Of]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",f,Mf,Of]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:me()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[fa,Ju]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":me()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",y,Mf,Of]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[fa,fr,pr]}],"mix-blend":[{"mix-blend":[...Be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[fa]}],"mask-image-linear-from-pos":[{"mask-linear-from":_e()}],"mask-image-linear-to-pos":[{"mask-linear-to":_e()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":_e()}],"mask-image-t-to-pos":[{"mask-t-to":_e()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":_e()}],"mask-image-r-to-pos":[{"mask-r-to":_e()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":_e()}],"mask-image-b-to-pos":[{"mask-b-to":_e()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":_e()}],"mask-image-l-to-pos":[{"mask-l-to":_e()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":_e()}],"mask-image-x-to-pos":[{"mask-x-to":_e()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":_e()}],"mask-image-y-to-pos":[{"mask-y-to":_e()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[fr,pr]}],"mask-image-radial-from-pos":[{"mask-radial-from":_e()}],"mask-image-radial-to-pos":[{"mask-radial-to":_e()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[fa]}],"mask-image-conic-from-pos":[{"mask-conic-from":_e()}],"mask-image-conic-to-pos":[{"mask-conic-to":_e()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:J()}],"mask-size":[{mask:be()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",fr,pr]}],filter:[{filter:["","none",fr,pr]}],blur:[{blur:Ye()}],brightness:[{brightness:[fa,fr,pr]}],contrast:[{contrast:[fa,fr,pr]}],"drop-shadow":[{"drop-shadow":["","none",E,Mf,Of]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",fa,fr,pr]}],"hue-rotate":[{"hue-rotate":[fa,fr,pr]}],invert:[{invert:["",fa,fr,pr]}],saturate:[{saturate:[fa,fr,pr]}],sepia:[{sepia:["",fa,fr,pr]}],"backdrop-filter":[{"backdrop-filter":["","none",fr,pr]}],"backdrop-blur":[{"backdrop-blur":Ye()}],"backdrop-brightness":[{"backdrop-brightness":[fa,fr,pr]}],"backdrop-contrast":[{"backdrop-contrast":[fa,fr,pr]}],"backdrop-grayscale":[{"backdrop-grayscale":["",fa,fr,pr]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[fa,fr,pr]}],"backdrop-invert":[{"backdrop-invert":["",fa,fr,pr]}],"backdrop-opacity":[{"backdrop-opacity":[fa,fr,pr]}],"backdrop-saturate":[{"backdrop-saturate":[fa,fr,pr]}],"backdrop-sepia":[{"backdrop-sepia":["",fa,fr,pr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",fr,pr]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[fa,"initial",fr,pr]}],ease:[{ease:["linear","initial",w,fr,pr]}],delay:[{delay:[fa,fr,pr]}],animate:[{animate:["none",U,fr,pr]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,fr,pr]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:Qe()}],"rotate-x":[{"rotate-x":Qe()}],"rotate-y":[{"rotate-y":Qe()}],"rotate-z":[{"rotate-z":Qe()}],scale:[{scale:Ge()}],"scale-x":[{"scale-x":Ge()}],"scale-y":[{"scale-y":Ge()}],"scale-z":[{"scale-z":Ge()}],"scale-3d":["scale-3d"],skew:[{skew:He()}],"skew-x":[{"skew-x":He()}],"skew-y":[{"skew-y":He()}],transform:[{transform:[fr,pr,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Te()}],"translate-x":[{"translate-x":Te()}],"translate-y":[{"translate-y":Te()}],"translate-z":[{"translate-z":Te()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fr,pr]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fr,pr]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[fa,np,Ju,Rv]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},AN=hN(DN);function Gs(...e){return AN(nS(e))}const ON=XP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function rd({className:e,variant:t,size:r,asChild:s=!1,...l}){const d=s?$P:"button";return o.jsx(d,{"data-slot":"button",className:Gs(ON({variant:t,size:r,className:e})),...l})}function MN(e){return Object.prototype.toString.call(e)==="[object Object]"}function _x(e){return MN(e)||Array.isArray(e)}function jN(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function F0(e,t){const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;const l=JSON.stringify(Object.keys(e.breakpoints||{})),d=JSON.stringify(Object.keys(t.breakpoints||{}));return l!==d?!1:r.every(C=>{const T=e[C],b=t[C];return typeof T=="function"?`${T}`==`${b}`:!_x(T)||!_x(b)?T===b:F0(T,b)})}function bx(e){return e.concat().sort((t,r)=>t.name>r.name?1:-1).map(t=>t.options)}function LN(e,t){if(e.length!==t.length)return!1;const r=bx(e),s=bx(t);return r.every((l,d)=>{const C=s[d];return F0(l,C)})}function H0(e){return typeof e=="number"}function a0(e){return typeof e=="string"}function zm(e){return typeof e=="boolean"}function xx(e){return Object.prototype.toString.call(e)==="[object Object]"}function Is(e){return Math.abs(e)}function V0(e){return Math.sign(e)}function hp(e,t){return Is(e-t)}function IN(e,t){if(e===0||t===0||Is(e)<=Is(t))return 0;const r=hp(Is(e),Is(t));return Is(r/e)}function BN(e){return Math.round(e*100)/100}function bp(e){return xp(e).map(Number)}function Kc(e){return e[Bp(e)]}function Bp(e){return Math.max(0,e.length-1)}function q0(e,t){return t===Bp(e)}function wx(e,t=0){return Array.from(Array(e),(r,s)=>t+s)}function xp(e){return Object.keys(e)}function pS(e,t){return[e,t].reduce((r,s)=>(xp(s).forEach(l=>{const d=r[l],C=s[l],T=xx(d)&&xx(C);r[l]=T?pS(d,C):C}),r),{})}function s0(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function zN(e,t){const r={start:s,center:l,end:d};function s(){return 0}function l(b){return d(b)/2}function d(b){return t-b}function C(b,u){return a0(e)?r[e](b):e(t,b,u)}return{measure:C}}function wp(){let e=[];function t(l,d,C,T={passive:!0}){let b;if("addEventListener"in l)l.addEventListener(d,C,T),b=()=>l.removeEventListener(d,C,T);else{const u=l;u.addListener(C),b=()=>u.removeListener(C)}return e.push(b),s}function r(){e=e.filter(l=>l())}const s={add:t,clear:r};return s}function UN(e,t,r,s){const l=wp(),d=1e3/60;let C=null,T=0,b=0;function u(){l.add(e,"visibilitychange",()=>{e.hidden&&_()})}function x(){E(),l.clear()}function f(k){if(!b)return;C||(C=k,r(),r());const w=k-C;for(C=k,T+=w;T>=d;)r(),T-=d;const U=T/d;s(U),b&&(b=t.requestAnimationFrame(f))}function y(){b||(b=t.requestAnimationFrame(f))}function E(){t.cancelAnimationFrame(b),C=null,T=0,b=0}function _(){C=null,T=0}return{init:u,destroy:x,start:y,stop:E,update:r,render:s}}function FN(e,t){const r=t==="rtl",s=e==="y",l=s?"y":"x",d=s?"x":"y",C=!s&&r?-1:1,T=x(),b=f();function u(_){const{height:m,width:k}=_;return s?m:k}function x(){return s?"top":r?"right":"left"}function f(){return s?"bottom":r?"left":"right"}function y(_){return _*C}return{scroll:l,cross:d,startEdge:T,endEdge:b,measureSize:u,direction:y}}function hd(e=0,t=0){const r=Is(e-t);function s(u){return u<e}function l(u){return u>t}function d(u){return s(u)||l(u)}function C(u){return d(u)?s(u)?e:t:u}function T(u){return r?u-r*Math.ceil((u-t)/r):u}return{length:r,max:t,min:e,constrain:C,reachedAny:d,reachedMax:l,reachedMin:s,removeOffset:T}}function fS(e,t,r){const{constrain:s}=hd(0,e),l=e+1;let d=C(t);function C(y){return r?Is((l+y)%l):s(y)}function T(){return d}function b(y){return d=C(y),f}function u(y){return x().set(T()+y)}function x(){return fS(e,T(),r)}const f={get:T,set:b,add:u,clone:x};return f}function HN(e,t,r,s,l,d,C,T,b,u,x,f,y,E,_,m,k,w,U){const{cross:g,direction:A}=e,P=["INPUT","SELECT","TEXTAREA"],z={passive:!1},N=wp(),R=wp(),S=hd(50,225).constrain(E.measure(20)),p={mouse:300,touch:400},D={mouse:500,touch:600},O=_?43:25;let j=!1,I=0,H=0,F=!1,$=!1,q=!1,se=!1;function J(Te){if(!U)return;function dt(on){(zm(U)||U(Te,on))&&Be(on)}const yt=t;N.add(yt,"dragstart",on=>on.preventDefault(),z).add(yt,"touchmove",()=>{},z).add(yt,"touchend",()=>{}).add(yt,"touchstart",dt).add(yt,"mousedown",dt).add(yt,"touchcancel",Ye).add(yt,"contextmenu",Ye).add(yt,"click",Qe,!0)}function be(){N.clear(),R.clear()}function Re(){const Te=se?r:t;R.add(Te,"touchmove",_e,z).add(Te,"touchend",Ye).add(Te,"mousemove",_e,z).add(Te,"mouseup",Ye)}function Se(Te){const dt=Te.nodeName||"";return P.includes(dt)}function me(){return(_?D:p)[se?"mouse":"touch"]}function Ce(Te,dt){const yt=f.add(V0(Te)*-1),on=x.byDistance(Te,!_).distance;return _||Is(Te)<S?on:k&&dt?on*.5:x.byIndex(yt.get(),0).distance}function Be(Te){const dt=s0(Te,s);se=dt,q=_&&dt&&!Te.buttons&&j,j=hp(l.get(),C.get())>=2,!(dt&&Te.button!==0)&&(Se(Te.target)||(F=!0,d.pointerDown(Te),u.useFriction(0).useDuration(0),l.set(C),Re(),I=d.readPoint(Te),H=d.readPoint(Te,g),y.emit("pointerDown")))}function _e(Te){if(!s0(Te,s)&&Te.touches.length>=2)return Ye(Te);const yt=d.readPoint(Te),on=d.readPoint(Te,g),ln=hp(yt,I),Pn=hp(on,H);if(!$&&!se&&(!Te.cancelable||($=ln>Pn,!$)))return Ye(Te);const En=d.pointerMove(Te);ln>m&&(q=!0),u.useFriction(.3).useDuration(.75),T.start(),l.add(A(En)),Te.preventDefault()}function Ye(Te){const yt=x.byDistance(0,!1).index!==f.get(),on=d.pointerUp(Te)*me(),ln=Ce(A(on),yt),Pn=IN(on,ln),En=O-10*Pn,rn=w+Pn/50;$=!1,F=!1,R.clear(),u.useDuration(En).useFriction(rn),b.distance(ln,!_),se=!1,y.emit("pointerUp")}function Qe(Te){q&&(Te.stopPropagation(),Te.preventDefault(),q=!1)}function Ge(){return F}return{init:J,destroy:be,pointerDown:Ge}}function VN(e,t){let s,l;function d(f){return f.timeStamp}function C(f,y){const _=`client${(y||e.scroll)==="x"?"X":"Y"}`;return(s0(f,t)?f:f.touches[0])[_]}function T(f){return s=f,l=f,C(f)}function b(f){const y=C(f)-C(l),E=d(f)-d(s)>170;return l=f,E&&(s=f),y}function u(f){if(!s||!l)return 0;const y=C(l)-C(s),E=d(f)-d(s),_=d(f)-d(l)>170,m=y/E;return E&&!_&&Is(m)>.1?m:0}return{pointerDown:T,pointerMove:b,pointerUp:u,readPoint:C}}function qN(){function e(r){const{offsetTop:s,offsetLeft:l,offsetWidth:d,offsetHeight:C}=r;return{top:s,right:l+d,bottom:s+C,left:l,width:d,height:C}}return{measure:e}}function WN(e){function t(s){return e*(s/100)}return{measure:t}}function $N(e,t,r,s,l,d,C){const T=[e].concat(s);let b,u,x=[],f=!1;function y(k){return l.measureSize(C.measure(k))}function E(k){if(!d)return;u=y(e),x=s.map(y);function w(U){for(const g of U){if(f)return;const A=g.target===e,P=s.indexOf(g.target),z=A?u:x[P],N=y(A?e:s[P]);if(Is(N-z)>=.5){k.reInit(),t.emit("resize");break}}}b=new ResizeObserver(U=>{(zm(d)||d(k,U))&&w(U)}),r.requestAnimationFrame(()=>{T.forEach(U=>b.observe(U))})}function _(){f=!0,b&&b.disconnect()}return{init:E,destroy:_}}function ZN(e,t,r,s,l,d){let C=0,T=0,b=l,u=d,x=e.get(),f=0;function y(){const z=s.get()-e.get(),N=!b;let R=0;return N?(C=0,r.set(s),e.set(s),R=z):(r.set(e),C+=z/b,C*=u,x+=C,e.add(C),R=x-f),T=V0(R),f=x,P}function E(){const z=s.get()-t.get();return Is(z)<.001}function _(){return b}function m(){return T}function k(){return C}function w(){return g(l)}function U(){return A(d)}function g(z){return b=z,P}function A(z){return u=z,P}const P={direction:m,duration:_,velocity:k,seek:y,settled:E,useBaseFriction:U,useBaseDuration:w,useFriction:A,useDuration:g};return P}function GN(e,t,r,s,l){const d=l.measure(10),C=l.measure(50),T=hd(.1,.99);let b=!1;function u(){return!(b||!e.reachedAny(r.get())||!e.reachedAny(t.get()))}function x(E){if(!u())return;const _=e.reachedMin(t.get())?"min":"max",m=Is(e[_]-t.get()),k=r.get()-t.get(),w=T.constrain(m/C);r.subtract(k*w),!E&&Is(k)<d&&(r.set(e.constrain(r.get())),s.useDuration(25).useBaseFriction())}function f(E){b=!E}return{shouldConstrain:u,constrain:x,toggleActive:f}}function YN(e,t,r,s,l){const d=hd(-t+e,0),C=f(),T=x(),b=y();function u(_,m){return hp(_,m)<=1}function x(){const _=C[0],m=Kc(C),k=C.lastIndexOf(_),w=C.indexOf(m)+1;return hd(k,w)}function f(){return r.map((_,m)=>{const{min:k,max:w}=d,U=d.constrain(_),g=!m,A=q0(r,m);return g?w:A||u(k,U)?k:u(w,U)?w:U}).map(_=>parseFloat(_.toFixed(3)))}function y(){if(t<=e+l)return[d.max];if(s==="keepSnaps")return C;const{min:_,max:m}=T;return C.slice(_,m)}return{snapsContained:b,scrollContainLimit:T}}function KN(e,t,r){const s=t[0],l=r?s-e:Kc(t);return{limit:hd(l,s)}}function QN(e,t,r,s){const d=t.min+.1,C=t.max+.1,{reachedMin:T,reachedMax:b}=hd(d,C);function u(y){return y===1?b(r.get()):y===-1?T(r.get()):!1}function x(y){if(!u(y))return;const E=e*(y*-1);s.forEach(_=>_.add(E))}return{loop:x}}function XN(e){const{max:t,length:r}=e;function s(d){const C=d-t;return r?C/-r:0}return{get:s}}function JN(e,t,r,s,l){const{startEdge:d,endEdge:C}=e,{groupSlides:T}=l,b=f().map(t.measure),u=y(),x=E();function f(){return T(s).map(m=>Kc(m)[C]-m[0][d]).map(Is)}function y(){return s.map(m=>r[d]-m[d]).map(m=>-Is(m))}function E(){return T(u).map(m=>m[0]).map((m,k)=>m+b[k])}return{snaps:u,snapsAligned:x}}function e3(e,t,r,s,l,d){const{groupSlides:C}=l,{min:T,max:b}=s,u=x();function x(){const y=C(d),E=!e||t==="keepSnaps";return r.length===1?[d]:E?y:y.slice(T,b).map((_,m,k)=>{const w=!m,U=q0(k,m);if(w){const g=Kc(k[0])+1;return wx(g)}if(U){const g=Bp(d)-Kc(k)[0]+1;return wx(g,Kc(k)[0])}return _})}return{slideRegistry:u}}function t3(e,t,r,s,l){const{reachedAny:d,removeOffset:C,constrain:T}=s;function b(_){return _.concat().sort((m,k)=>Is(m)-Is(k))[0]}function u(_){const m=e?C(_):T(_),k=t.map((U,g)=>({diff:x(U-m,0),index:g})).sort((U,g)=>Is(U.diff)-Is(g.diff)),{index:w}=k[0];return{index:w,distance:m}}function x(_,m){const k=[_,_+r,_-r];if(!e)return _;if(!m)return b(k);const w=k.filter(U=>V0(U)===m);return w.length?b(w):Kc(k)-r}function f(_,m){const k=t[_]-l.get(),w=x(k,m);return{index:_,distance:w}}function y(_,m){const k=l.get()+_,{index:w,distance:U}=u(k),g=!e&&d(k);if(!m||g)return{index:w,distance:_};const A=t[w]-U,P=_+x(A,0);return{index:w,distance:P}}return{byDistance:y,byIndex:f,shortcut:x}}function n3(e,t,r,s,l,d,C){function T(f){const y=f.distance,E=f.index!==t.get();d.add(y),y&&(s.duration()?e.start():(e.update(),e.render(1),e.update())),E&&(r.set(t.get()),t.set(f.index),C.emit("select"))}function b(f,y){const E=l.byDistance(f,y);T(E)}function u(f,y){const E=t.clone().set(f),_=l.byIndex(E.get(),y);T(_)}return{distance:b,index:u}}function r3(e,t,r,s,l,d,C,T){const b={passive:!0,capture:!0};let u=0;function x(E){if(!T)return;function _(m){if(new Date().getTime()-u>10)return;C.emit("slideFocusStart"),e.scrollLeft=0;const U=r.findIndex(g=>g.includes(m));H0(U)&&(l.useDuration(0),s.index(U,0),C.emit("slideFocus"))}d.add(document,"keydown",f,!1),t.forEach((m,k)=>{d.add(m,"focus",w=>{(zm(T)||T(E,w))&&_(k)},b)})}function f(E){E.code==="Tab"&&(u=new Date().getTime())}return{init:x}}function up(e){let t=e;function r(){return t}function s(b){t=C(b)}function l(b){t+=C(b)}function d(b){t-=C(b)}function C(b){return H0(b)?b:b.get()}return{get:r,set:s,add:l,subtract:d}}function mS(e,t){const r=e.scroll==="x"?C:T,s=t.style;let l=null,d=!1;function C(y){return`translate3d(${y}px,0px,0px)`}function T(y){return`translate3d(0px,${y}px,0px)`}function b(y){if(d)return;const E=BN(e.direction(y));E!==l&&(s.transform=r(E),l=E)}function u(y){d=!y}function x(){d||(s.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:x,to:b,toggleActive:u}}function a3(e,t,r,s,l,d,C,T,b){const x=bp(l),f=bp(l).reverse(),y=w().concat(U());function E(N,R){return N.reduce((S,p)=>S-l[p],R)}function _(N,R){return N.reduce((S,p)=>E(S,R)>0?S.concat([p]):S,[])}function m(N){return d.map((R,S)=>({start:R-s[S]+.5+N,end:R+t-.5+N}))}function k(N,R,S){const p=m(R);return N.map(D=>{const O=S?0:-r,j=S?r:0,I=S?"end":"start",H=p[D][I];return{index:D,loopPoint:H,slideLocation:up(-1),translate:mS(e,b[D]),target:()=>T.get()>H?O:j}})}function w(){const N=C[0],R=_(f,N);return k(R,r,!1)}function U(){const N=t-C[0]-1,R=_(x,N);return k(R,-r,!0)}function g(){return y.every(({index:N})=>{const R=x.filter(S=>S!==N);return E(R,t)<=.1})}function A(){y.forEach(N=>{const{target:R,translate:S,slideLocation:p}=N,D=R();D!==p.get()&&(S.to(D),p.set(D))})}function P(){y.forEach(N=>N.translate.clear())}return{canLoop:g,clear:P,loop:A,loopPoints:y}}function s3(e,t,r){let s,l=!1;function d(b){if(!r)return;function u(x){for(const f of x)if(f.type==="childList"){b.reInit(),t.emit("slidesChanged");break}}s=new MutationObserver(x=>{l||(zm(r)||r(b,x))&&u(x)}),s.observe(e,{childList:!0})}function C(){s&&s.disconnect(),l=!0}return{init:d,destroy:C}}function i3(e,t,r,s){const l={};let d=null,C=null,T,b=!1;function u(){T=new IntersectionObserver(_=>{b||(_.forEach(m=>{const k=t.indexOf(m.target);l[k]=m}),d=null,C=null,r.emit("slidesInView"))},{root:e.parentElement,threshold:s}),t.forEach(_=>T.observe(_))}function x(){T&&T.disconnect(),b=!0}function f(_){return xp(l).reduce((m,k)=>{const w=parseInt(k),{isIntersecting:U}=l[w];return(_&&U||!_&&!U)&&m.push(w),m},[])}function y(_=!0){if(_&&d)return d;if(!_&&C)return C;const m=f(_);return _&&(d=m),_||(C=m),m}return{init:u,destroy:x,get:y}}function o3(e,t,r,s,l,d){const{measureSize:C,startEdge:T,endEdge:b}=e,u=r[0]&&l,x=_(),f=m(),y=r.map(C),E=k();function _(){if(!u)return 0;const U=r[0];return Is(t[T]-U[T])}function m(){if(!u)return 0;const U=d.getComputedStyle(Kc(s));return parseFloat(U.getPropertyValue(`margin-${b}`))}function k(){return r.map((U,g,A)=>{const P=!g,z=q0(A,g);return P?y[g]+x:z?y[g]+f:A[g+1][T]-U[T]}).map(Is)}return{slideSizes:y,slideSizesWithGaps:E,startGap:x,endGap:f}}function c3(e,t,r,s,l,d,C,T,b){const{startEdge:u,endEdge:x,direction:f}=e,y=H0(r);function E(w,U){return bp(w).filter(g=>g%U===0).map(g=>w.slice(g,g+U))}function _(w){return w.length?bp(w).reduce((U,g,A)=>{const P=Kc(U)||0,z=P===0,N=g===Bp(w),R=l[u]-d[P][u],S=l[u]-d[g][x],p=!s&&z?f(C):0,D=!s&&N?f(T):0,O=Is(S-D-(R+p));return A&&O>t+b&&U.push(g),N&&U.push(w.length),U},[]).map((U,g,A)=>{const P=Math.max(A[g-1]||0);return w.slice(P,U)}):[]}function m(w){return y?E(w,r):_(w)}return{groupSlides:m}}function l3(e,t,r,s,l,d,C){const{align:T,axis:b,direction:u,startIndex:x,loop:f,duration:y,dragFree:E,dragThreshold:_,inViewThreshold:m,slidesToScroll:k,skipSnaps:w,containScroll:U,watchResize:g,watchSlides:A,watchDrag:P,watchFocus:z}=d,N=2,R=qN(),S=R.measure(t),p=r.map(R.measure),D=FN(b,u),O=D.measureSize(S),j=WN(O),I=zN(T,O),H=!f&&!!U,F=f||!!U,{slideSizes:$,slideSizesWithGaps:q,startGap:se,endGap:J}=o3(D,S,p,r,F,l),be=c3(D,O,k,f,S,p,se,J,N),{snaps:Re,snapsAligned:Se}=JN(D,I,S,p,be),me=-Kc(Re)+Kc(q),{snapsContained:Ce,scrollContainLimit:Be}=YN(O,me,Se,U,N),_e=H?Ce:Se,{limit:Ye}=KN(me,_e,f),Qe=fS(Bp(_e),x,f),Ge=Qe.clone(),He=bp(r),Te=({dragHandler:Ar,scrollBody:Sr,scrollBounds:Ur,options:{loop:xr}})=>{xr||Ur.constrain(Ar.pointerDown()),Sr.seek()},dt=({scrollBody:Ar,translate:Sr,location:Ur,offsetLocation:xr,previousLocation:Or,scrollLooper:Kr,slideLooper:va,dragHandler:ra,animation:ua,eventHandler:jn,scrollBounds:Ha,options:{loop:Ea}},Qr)=>{const gr=Ar.settled(),rt=!Ha.shouldConstrain(),ut=Ea?gr:gr&&rt,$t=ut&&!ra.pointerDown();$t&&ua.stop();const Tt=Ur.get()*Qr+Or.get()*(1-Qr);xr.set(Tt),Ea&&(Kr.loop(Ar.direction()),va.loop()),Sr.to(xr.get()),$t&&jn.emit("settle"),ut||jn.emit("scroll")},yt=UN(s,l,()=>Te(nr),Ar=>dt(nr,Ar)),on=.68,ln=_e[Qe.get()],Pn=up(ln),En=up(ln),rn=up(ln),Ne=up(ln),Me=ZN(Pn,rn,En,Ne,y,on),Ze=t3(f,_e,me,Ye,Ne),Ft=n3(yt,Qe,Ge,Me,Ze,Ne,C),Ct=XN(Ye),wt=wp(),un=i3(t,r,C,m),{slideRegistry:Sn}=e3(H,U,_e,Be,be,He),Ut=r3(e,r,Sn,Ft,Me,wt,C,z),nr={ownerDocument:s,ownerWindow:l,eventHandler:C,containerRect:S,slideRects:p,animation:yt,axis:D,dragHandler:HN(D,e,s,l,Ne,VN(D,l),Pn,yt,Ft,Me,Ze,Qe,C,j,E,_,w,on,P),eventStore:wt,percentOfView:j,index:Qe,indexPrevious:Ge,limit:Ye,location:Pn,offsetLocation:rn,previousLocation:En,options:d,resizeHandler:$N(t,C,l,r,D,g,R),scrollBody:Me,scrollBounds:GN(Ye,rn,Ne,Me,j),scrollLooper:QN(me,Ye,rn,[Pn,rn,En,Ne]),scrollProgress:Ct,scrollSnapList:_e.map(Ct.get),scrollSnaps:_e,scrollTarget:Ze,scrollTo:Ft,slideLooper:a3(D,O,me,$,q,Re,_e,rn,r),slideFocus:Ut,slidesHandler:s3(t,C,A),slidesInView:un,slideIndexes:He,slideRegistry:Sn,slidesToScroll:be,target:Ne,translate:mS(D,t)};return nr}function u3(){let e={},t;function r(u){t=u}function s(u){return e[u]||[]}function l(u){return s(u).forEach(x=>x(t,u)),b}function d(u,x){return e[u]=s(u).concat([x]),b}function C(u,x){return e[u]=s(u).filter(f=>f!==x),b}function T(){e={}}const b={init:r,emit:l,off:C,on:d,clear:T};return b}const d3={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function h3(e){function t(d,C){return pS(d,C||{})}function r(d){const C=d.breakpoints||{},T=xp(C).filter(b=>e.matchMedia(b).matches).map(b=>C[b]).reduce((b,u)=>t(b,u),{});return t(d,T)}function s(d){return d.map(C=>xp(C.breakpoints||{})).reduce((C,T)=>C.concat(T),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:r,optionsMediaQueries:s}}function p3(e){let t=[];function r(d,C){return t=C.filter(({options:T})=>e.optionsAtMedia(T).active!==!1),t.forEach(T=>T.init(d,e)),C.reduce((T,b)=>Object.assign(T,{[b.name]:b}),{})}function s(){t=t.filter(d=>d.destroy())}return{init:r,destroy:s}}function dm(e,t,r){const s=e.ownerDocument,l=s.defaultView,d=h3(l),C=p3(d),T=wp(),b=u3(),{mergeOptions:u,optionsAtMedia:x,optionsMediaQueries:f}=d,{on:y,off:E,emit:_}=b,m=D;let k=!1,w,U=u(d3,dm.globalOptions),g=u(U),A=[],P,z,N;function R(){const{container:He,slides:Te}=g;z=(a0(He)?e.querySelector(He):He)||e.children[0];const yt=a0(Te)?z.querySelectorAll(Te):Te;N=[].slice.call(yt||z.children)}function S(He){const Te=l3(e,z,N,s,l,He,b);if(He.loop&&!Te.slideLooper.canLoop()){const dt=Object.assign({},He,{loop:!1});return S(dt)}return Te}function p(He,Te){k||(U=u(U,He),g=x(U),A=Te||A,R(),w=S(g),f([U,...A.map(({options:dt})=>dt)]).forEach(dt=>T.add(dt,"change",D)),g.active&&(w.translate.to(w.location.get()),w.animation.init(),w.slidesInView.init(),w.slideFocus.init(Ge),w.eventHandler.init(Ge),w.resizeHandler.init(Ge),w.slidesHandler.init(Ge),w.options.loop&&w.slideLooper.loop(),z.offsetParent&&N.length&&w.dragHandler.init(Ge),P=C.init(Ge,A)))}function D(He,Te){const dt=be();O(),p(u({startIndex:dt},He),Te),b.emit("reInit")}function O(){w.dragHandler.destroy(),w.eventStore.clear(),w.translate.clear(),w.slideLooper.clear(),w.resizeHandler.destroy(),w.slidesHandler.destroy(),w.slidesInView.destroy(),w.animation.destroy(),C.destroy(),T.clear()}function j(){k||(k=!0,T.clear(),O(),b.emit("destroy"),b.clear())}function I(He,Te,dt){!g.active||k||(w.scrollBody.useBaseFriction().useDuration(Te===!0?0:g.duration),w.scrollTo.index(He,dt||0))}function H(He){const Te=w.index.add(1).get();I(Te,He,-1)}function F(He){const Te=w.index.add(-1).get();I(Te,He,1)}function $(){return w.index.add(1).get()!==be()}function q(){return w.index.add(-1).get()!==be()}function se(){return w.scrollSnapList}function J(){return w.scrollProgress.get(w.offsetLocation.get())}function be(){return w.index.get()}function Re(){return w.indexPrevious.get()}function Se(){return w.slidesInView.get()}function me(){return w.slidesInView.get(!1)}function Ce(){return P}function Be(){return w}function _e(){return e}function Ye(){return z}function Qe(){return N}const Ge={canScrollNext:$,canScrollPrev:q,containerNode:Ye,internalEngine:Be,destroy:j,off:E,on:y,emit:_,plugins:Ce,previousScrollSnap:Re,reInit:m,rootNode:_e,scrollNext:H,scrollPrev:F,scrollProgress:J,scrollSnapList:se,scrollTo:I,selectedScrollSnap:be,slideNodes:Qe,slidesInView:Se,slidesNotInView:me};return p(t,r),setTimeout(()=>b.emit("init"),0),Ge}dm.globalOptions=void 0;function W0(e={},t=[]){const r=Z.useRef(e),s=Z.useRef(t),[l,d]=Z.useState(),[C,T]=Z.useState(),b=Z.useCallback(()=>{l&&l.reInit(r.current,s.current)},[l]);return Z.useEffect(()=>{F0(r.current,e)||(r.current=e,b())},[e,b]),Z.useEffect(()=>{LN(s.current,t)||(s.current=t,b())},[t,b]),Z.useEffect(()=>{if(jN()&&C){dm.globalOptions=W0.globalOptions;const u=dm(C,r.current,s.current);return d(u),()=>u.destroy()}else d(void 0)},[C,d]),[T,l]}W0.globalOptions=void 0;const gS=Z.createContext(null);function Um(){const e=Z.useContext(gS);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}function f3({orientation:e="horizontal",opts:t,setApi:r,plugins:s,className:l,children:d,...C}){const[T,b]=W0({...t,axis:e==="horizontal"?"x":"y"},s),[u,x]=Z.useState(!1),[f,y]=Z.useState(!1),E=Z.useCallback(w=>{w&&(x(w.canScrollPrev()),y(w.canScrollNext()))},[]),_=Z.useCallback(()=>{b?.scrollPrev()},[b]),m=Z.useCallback(()=>{b?.scrollNext()},[b]),k=Z.useCallback(w=>{w.key==="ArrowLeft"?(w.preventDefault(),_()):w.key==="ArrowRight"&&(w.preventDefault(),m())},[_,m]);return Z.useEffect(()=>{!b||!r||r(b)},[b,r]),Z.useEffect(()=>{if(b)return E(b),b.on("reInit",E),b.on("select",E),()=>{b?.off("select",E)}},[b,E]),o.jsx(gS.Provider,{value:{carouselRef:T,api:b,opts:t,orientation:e||(t?.axis==="y"?"vertical":"horizontal"),scrollPrev:_,scrollNext:m,canScrollPrev:u,canScrollNext:f},children:o.jsx("div",{onKeyDownCapture:k,className:Gs("relative",l),role:"region","aria-roledescription":"carousel","data-slot":"carousel",...C,children:d})})}function m3({className:e,...t}){const{carouselRef:r,orientation:s}=Um();return o.jsx("div",{ref:r,className:"overflow-hidden","data-slot":"carousel-content",children:o.jsx("div",{className:Gs("flex",s==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})}function g3({className:e,...t}){const{orientation:r}=Um();return o.jsx("div",{role:"group","aria-roledescription":"slide","data-slot":"carousel-item",className:Gs("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",e),...t})}function v3({className:e,variant:t="outline",size:r="icon",...s}){const{orientation:l,scrollPrev:d,canScrollPrev:C}=Um();return o.jsxs(rd,{"data-slot":"carousel-previous",variant:t,size:r,className:Gs("absolute size-8 rounded-full",l==="horizontal"?"top-1/2 -left-12 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!C,onClick:d,...s,children:[o.jsx(K6,{}),o.jsx("span",{className:"sr-only",children:"Previous slide"})]})}function y3({className:e,variant:t="outline",size:r="icon",...s}){const{orientation:l,scrollNext:d,canScrollNext:C}=Um();return o.jsxs(rd,{"data-slot":"carousel-next",variant:t,size:r,className:Gs("absolute size-8 rounded-full",l==="horizontal"?"top-1/2 -right-12 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!C,onClick:d,...s,children:[o.jsx(X6,{}),o.jsx("span",{className:"sr-only",children:"Next slide"})]})}function ju(e,t,{checkForDefaultPrevented:r=!0}={}){return function(l){if(e?.(l),r===!1||!l.defaultPrevented)return t?.(l)}}function _3(e,t){const r=Z.createContext(t),s=d=>{const{children:C,...T}=d,b=Z.useMemo(()=>T,Object.values(T));return o.jsx(r.Provider,{value:b,children:C})};s.displayName=e+"Provider";function l(d){const C=Z.useContext(r);if(C)return C;if(t!==void 0)return t;throw new Error(`\`${d}\` must be used within \`${e}\``)}return[s,l]}function $0(e,t=[]){let r=[];function s(d,C){const T=Z.createContext(C),b=r.length;r=[...r,C];const u=f=>{const{scope:y,children:E,..._}=f,m=y?.[e]?.[b]||T,k=Z.useMemo(()=>_,Object.values(_));return o.jsx(m.Provider,{value:k,children:E})};u.displayName=d+"Provider";function x(f,y){const E=y?.[e]?.[b]||T,_=Z.useContext(E);if(_)return _;if(C!==void 0)return C;throw new Error(`\`${f}\` must be used within \`${d}\``)}return[u,x]}const l=()=>{const d=r.map(C=>Z.createContext(C));return function(T){const b=T?.[e]||d;return Z.useMemo(()=>({[`__scope${e}`]:{...T,[e]:b}}),[T,b])}};return l.scopeName=e,[s,b3(l,...t)]}function b3(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(d){const C=s.reduce((T,{useScope:b,scopeName:u})=>{const f=b(d)[`__scope${u}`];return{...T,...f}},{});return Z.useMemo(()=>({[`__scope${t.scopeName}`]:C}),[C])}};return r.scopeName=t.scopeName,r}var Qc=globalThis?.document?Z.useLayoutEffect:()=>{},x3=V1[" useId ".trim().toString()]||(()=>{}),w3=0;function Ev(e){const[t,r]=Z.useState(x3());return Qc(()=>{r(s=>s??String(w3++))},[e]),e||(t?`radix-${t}`:"")}var S3=V1[" useInsertionEffect ".trim().toString()]||Qc;function R3({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[l,d,C]=E3({defaultProp:t,onChange:r}),T=e!==void 0,b=T?e:l;{const x=Z.useRef(e!==void 0);Z.useEffect(()=>{const f=x.current;f!==T&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${T?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=T},[T,s])}const u=Z.useCallback(x=>{if(T){const f=k3(x)?x(e):x;f!==e&&C.current?.(f)}else d(x)},[T,e,d,C]);return[b,u]}function E3({defaultProp:e,onChange:t}){const[r,s]=Z.useState(e),l=Z.useRef(r),d=Z.useRef(t);return S3(()=>{d.current=t},[t]),Z.useEffect(()=>{l.current!==r&&(d.current?.(r),l.current=r)},[r,l]),[r,s,d]}function k3(e){return typeof e=="function"}var C3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],no=C3.reduce((e,t)=>{const r=z0(`Primitive.${t}`),s=Z.forwardRef((l,d)=>{const{asChild:C,...T}=l,b=C?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(b,{...T,ref:d})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function T3(e,t){e&&iw.flushSync(()=>e.dispatchEvent(t))}function oc(e){const t=Z.useRef(e);return Z.useEffect(()=>{t.current=e}),Z.useMemo(()=>(...r)=>t.current?.(...r),[])}function P3(e,t=globalThis?.document){const r=oc(e);Z.useEffect(()=>{const s=l=>{l.key==="Escape"&&r(l)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var N3="DismissableLayer",i0="dismissableLayer.update",D3="dismissableLayer.pointerDownOutside",A3="dismissableLayer.focusOutside",Sx,vS=Z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yS=Z.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:C,onDismiss:T,...b}=e,u=Z.useContext(vS),[x,f]=Z.useState(null),y=x?.ownerDocument??globalThis?.document,[,E]=Z.useState({}),_=Wo(t,N=>f(N)),m=Array.from(u.layers),[k]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=m.indexOf(k),U=x?m.indexOf(x):-1,g=u.layersWithOutsidePointerEventsDisabled.size>0,A=U>=w,P=j3(N=>{const R=N.target,S=[...u.branches].some(p=>p.contains(R));!A||S||(l?.(N),C?.(N),N.defaultPrevented||T?.())},y),z=L3(N=>{const R=N.target;[...u.branches].some(p=>p.contains(R))||(d?.(N),C?.(N),N.defaultPrevented||T?.())},y);return P3(N=>{U===u.layers.size-1&&(s?.(N),!N.defaultPrevented&&T&&(N.preventDefault(),T()))},y),Z.useEffect(()=>{if(x)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Sx=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(x)),u.layers.add(x),Rx(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Sx)}},[x,y,r,u]),Z.useEffect(()=>()=>{x&&(u.layers.delete(x),u.layersWithOutsidePointerEventsDisabled.delete(x),Rx())},[x,u]),Z.useEffect(()=>{const N=()=>E({});return document.addEventListener(i0,N),()=>document.removeEventListener(i0,N)},[]),o.jsx(no.div,{...b,ref:_,style:{pointerEvents:g?A?"auto":"none":void 0,...e.style},onFocusCapture:ju(e.onFocusCapture,z.onFocusCapture),onBlurCapture:ju(e.onBlurCapture,z.onBlurCapture),onPointerDownCapture:ju(e.onPointerDownCapture,P.onPointerDownCapture)})});yS.displayName=N3;var O3="DismissableLayerBranch",M3=Z.forwardRef((e,t)=>{const r=Z.useContext(vS),s=Z.useRef(null),l=Wo(t,s);return Z.useEffect(()=>{const d=s.current;if(d)return r.branches.add(d),()=>{r.branches.delete(d)}},[r.branches]),o.jsx(no.div,{...e,ref:l})});M3.displayName=O3;function j3(e,t=globalThis?.document){const r=oc(e),s=Z.useRef(!1),l=Z.useRef(()=>{});return Z.useEffect(()=>{const d=T=>{if(T.target&&!s.current){let b=function(){_S(D3,r,u,{discrete:!0})};const u={originalEvent:T};T.pointerType==="touch"?(t.removeEventListener("click",l.current),l.current=b,t.addEventListener("click",l.current,{once:!0})):b()}else t.removeEventListener("click",l.current);s.current=!1},C=window.setTimeout(()=>{t.addEventListener("pointerdown",d)},0);return()=>{window.clearTimeout(C),t.removeEventListener("pointerdown",d),t.removeEventListener("click",l.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function L3(e,t=globalThis?.document){const r=oc(e),s=Z.useRef(!1);return Z.useEffect(()=>{const l=d=>{d.target&&!s.current&&_S(A3,r,{originalEvent:d},{discrete:!1})};return t.addEventListener("focusin",l),()=>t.removeEventListener("focusin",l)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Rx(){const e=new CustomEvent(i0);document.dispatchEvent(e)}function _S(e,t,r,{discrete:s}){const l=r.originalEvent.target,d=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&l.addEventListener(e,t,{once:!0}),s?T3(l,d):l.dispatchEvent(d)}var kv="focusScope.autoFocusOnMount",Cv="focusScope.autoFocusOnUnmount",Ex={bubbles:!1,cancelable:!0},I3="FocusScope",bS=Z.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:l,onUnmountAutoFocus:d,...C}=e,[T,b]=Z.useState(null),u=oc(l),x=oc(d),f=Z.useRef(null),y=Wo(t,m=>b(m)),E=Z.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Z.useEffect(()=>{if(s){let m=function(g){if(E.paused||!T)return;const A=g.target;T.contains(A)?f.current=A:Nu(f.current,{select:!0})},k=function(g){if(E.paused||!T)return;const A=g.relatedTarget;A!==null&&(T.contains(A)||Nu(f.current,{select:!0}))},w=function(g){if(document.activeElement===document.body)for(const P of g)P.removedNodes.length>0&&Nu(T)};document.addEventListener("focusin",m),document.addEventListener("focusout",k);const U=new MutationObserver(w);return T&&U.observe(T,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",k),U.disconnect()}}},[s,T,E.paused]),Z.useEffect(()=>{if(T){Cx.add(E);const m=document.activeElement;if(!T.contains(m)){const w=new CustomEvent(kv,Ex);T.addEventListener(kv,u),T.dispatchEvent(w),w.defaultPrevented||(B3(V3(xS(T)),{select:!0}),document.activeElement===m&&Nu(T))}return()=>{T.removeEventListener(kv,u),setTimeout(()=>{const w=new CustomEvent(Cv,Ex);T.addEventListener(Cv,x),T.dispatchEvent(w),w.defaultPrevented||Nu(m??document.body,{select:!0}),T.removeEventListener(Cv,x),Cx.remove(E)},0)}}},[T,u,x,E]);const _=Z.useCallback(m=>{if(!r&&!s||E.paused)return;const k=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,w=document.activeElement;if(k&&w){const U=m.currentTarget,[g,A]=z3(U);g&&A?!m.shiftKey&&w===A?(m.preventDefault(),r&&Nu(g,{select:!0})):m.shiftKey&&w===g&&(m.preventDefault(),r&&Nu(A,{select:!0})):w===U&&m.preventDefault()}},[r,s,E.paused]);return o.jsx(no.div,{tabIndex:-1,...C,ref:y,onKeyDown:_})});bS.displayName=I3;function B3(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(Nu(s,{select:t}),document.activeElement!==r)return}function z3(e){const t=xS(e),r=kx(t,e),s=kx(t.reverse(),e);return[r,s]}function xS(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const l=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||l?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function kx(e,t){for(const r of e)if(!U3(r,{upTo:t}))return r}function U3(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function F3(e){return e instanceof HTMLInputElement&&"select"in e}function Nu(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&F3(e)&&t&&e.select()}}var Cx=H3();function H3(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=Tx(e,t),e.unshift(t)},remove(t){e=Tx(e,t),e[0]?.resume()}}}function Tx(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function V3(e){return e.filter(t=>t.tagName!=="A")}var q3="Portal",wS=Z.forwardRef((e,t)=>{const{container:r,...s}=e,[l,d]=Z.useState(!1);Qc(()=>d(!0),[]);const C=r||l&&globalThis?.document?.body;return C?ow.createPortal(o.jsx(no.div,{...s,ref:t}),C):null});wS.displayName=q3;function W3(e,t){return Z.useReducer((r,s)=>t[r][s]??r,e)}var Fm=e=>{const{present:t,children:r}=e,s=$3(t),l=typeof r=="function"?r({present:s.isPresent}):Z.Children.only(r),d=Wo(s.ref,Z3(l));return typeof r=="function"||s.isPresent?Z.cloneElement(l,{ref:d}):null};Fm.displayName="Presence";function $3(e){const[t,r]=Z.useState(),s=Z.useRef(null),l=Z.useRef(e),d=Z.useRef("none"),C=e?"mounted":"unmounted",[T,b]=W3(C,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Z.useEffect(()=>{const u=jf(s.current);d.current=T==="mounted"?u:"none"},[T]),Qc(()=>{const u=s.current,x=l.current;if(x!==e){const y=d.current,E=jf(u);e?b("MOUNT"):E==="none"||u?.display==="none"?b("UNMOUNT"):b(x&&y!==E?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,b]),Qc(()=>{if(t){let u;const x=t.ownerDocument.defaultView??window,f=E=>{const m=jf(s.current).includes(E.animationName);if(E.target===t&&m&&(b("ANIMATION_END"),!l.current)){const k=t.style.animationFillMode;t.style.animationFillMode="forwards",u=x.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=k)})}},y=E=>{E.target===t&&(d.current=jf(s.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{x.clearTimeout(u),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else b("ANIMATION_END")},[t,b]),{isPresent:["mounted","unmountSuspended"].includes(T),ref:Z.useCallback(u=>{s.current=u?getComputedStyle(u):null,r(u)},[])}}function jf(e){return e?.animationName||"none"}function Z3(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Tv=0;function G3(){Z.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Px()),document.body.insertAdjacentElement("beforeend",e[1]??Px()),Tv++,()=>{Tv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Tv--}},[])}function Px(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var gl=function(){return gl=Object.assign||function(t){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(t[d]=r[d])}return t},gl.apply(this,arguments)};function SS(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(r[s[l]]=e[s[l]]);return r}function Y3(e,t,r){if(r||arguments.length===2)for(var s=0,l=t.length,d;s<l;s++)(d||!(s in t))&&(d||(d=Array.prototype.slice.call(t,0,s)),d[s]=t[s]);return e.concat(d||Array.prototype.slice.call(t))}var tm="right-scroll-bar-position",nm="width-before-scroll-bar",K3="with-scroll-bars-hidden",Q3="--removed-body-scroll-bar-size";function Pv(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function X3(e,t){var r=Z.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var l=r.value;l!==s&&(r.value=s,r.callback(s,l))}}}})[0];return r.callback=t,r.facade}var J3=typeof window<"u"?Z.useLayoutEffect:Z.useEffect,Nx=new WeakMap;function eD(e,t){var r=X3(null,function(s){return e.forEach(function(l){return Pv(l,s)})});return J3(function(){var s=Nx.get(r);if(s){var l=new Set(s),d=new Set(e),C=r.current;l.forEach(function(T){d.has(T)||Pv(T,null)}),d.forEach(function(T){l.has(T)||Pv(T,C)})}Nx.set(r,e)},[e]),r}function tD(e){return e}function nD(e,t){t===void 0&&(t=tD);var r=[],s=!1,l={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(d){var C=t(d,s);return r.push(C),function(){r=r.filter(function(T){return T!==C})}},assignSyncMedium:function(d){for(s=!0;r.length;){var C=r;r=[],C.forEach(d)}r={push:function(T){return d(T)},filter:function(){return r}}},assignMedium:function(d){s=!0;var C=[];if(r.length){var T=r;r=[],T.forEach(d),C=r}var b=function(){var x=C;C=[],x.forEach(d)},u=function(){return Promise.resolve().then(b)};u(),r={push:function(x){C.push(x),u()},filter:function(x){return C=C.filter(x),r}}}};return l}function rD(e){e===void 0&&(e={});var t=nD(null);return t.options=gl({async:!0,ssr:!1},e),t}var RS=function(e){var t=e.sideCar,r=SS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return Z.createElement(s,gl({},r))};RS.isSideCarExport=!0;function aD(e,t){return e.useMedium(t),RS}var ES=rD(),Nv=function(){},Hm=Z.forwardRef(function(e,t){var r=Z.useRef(null),s=Z.useState({onScrollCapture:Nv,onWheelCapture:Nv,onTouchMoveCapture:Nv}),l=s[0],d=s[1],C=e.forwardProps,T=e.children,b=e.className,u=e.removeScrollBar,x=e.enabled,f=e.shards,y=e.sideCar,E=e.noRelative,_=e.noIsolation,m=e.inert,k=e.allowPinchZoom,w=e.as,U=w===void 0?"div":w,g=e.gapMode,A=SS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=y,z=eD([r,t]),N=gl(gl({},A),l);return Z.createElement(Z.Fragment,null,x&&Z.createElement(P,{sideCar:ES,removeScrollBar:u,shards:f,noRelative:E,noIsolation:_,inert:m,setCallbacks:d,allowPinchZoom:!!k,lockRef:r,gapMode:g}),C?Z.cloneElement(Z.Children.only(T),gl(gl({},N),{ref:z})):Z.createElement(U,gl({},N,{className:b,ref:z}),T))});Hm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hm.classNames={fullWidth:nm,zeroRight:tm};var sD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=sD();return t&&e.setAttribute("nonce",t),e}function oD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function cD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var lD=function(){var e=0,t=null;return{add:function(r){e==0&&(t=iD())&&(oD(t,r),cD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},uD=function(){var e=lD();return function(t,r){Z.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},kS=function(){var e=uD(),t=function(r){var s=r.styles,l=r.dynamic;return e(s,l),null};return t},dD={left:0,top:0,right:0,gap:0},Dv=function(e){return parseInt(e||"",10)||0},hD=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],l=t[e==="padding"?"paddingRight":"marginRight"];return[Dv(r),Dv(s),Dv(l)]},pD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return dD;var t=hD(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},fD=kS(),rh="data-scroll-locked",mD=function(e,t,r,s){var l=e.left,d=e.top,C=e.right,T=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(K3,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(T,"px ").concat(s,`;
  }
  body[`).concat(rh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(d,`px;
    padding-right: `).concat(C,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(T,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(T,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tm,` {
    right: `).concat(T,"px ").concat(s,`;
  }
  
  .`).concat(nm,` {
    margin-right: `).concat(T,"px ").concat(s,`;
  }
  
  .`).concat(tm," .").concat(tm,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(nm," .").concat(nm,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(rh,`] {
    `).concat(Q3,": ").concat(T,`px;
  }
`)},Dx=function(){var e=parseInt(document.body.getAttribute(rh)||"0",10);return isFinite(e)?e:0},gD=function(){Z.useEffect(function(){return document.body.setAttribute(rh,(Dx()+1).toString()),function(){var e=Dx()-1;e<=0?document.body.removeAttribute(rh):document.body.setAttribute(rh,e.toString())}},[])},vD=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,l=s===void 0?"margin":s;gD();var d=Z.useMemo(function(){return pD(l)},[l]);return Z.createElement(fD,{styles:mD(d,!t,l,r?"":"!important")})},o0=!1;if(typeof window<"u")try{var Lf=Object.defineProperty({},"passive",{get:function(){return o0=!0,!0}});window.addEventListener("test",Lf,Lf),window.removeEventListener("test",Lf,Lf)}catch{o0=!1}var Zd=o0?{passive:!1}:!1,yD=function(e){return e.tagName==="TEXTAREA"},CS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!yD(e)&&r[t]==="visible")},_D=function(e){return CS(e,"overflowY")},bD=function(e){return CS(e,"overflowX")},Ax=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var l=TS(e,s);if(l){var d=PS(e,s),C=d[1],T=d[2];if(C>T)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},xD=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},wD=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},TS=function(e,t){return e==="v"?_D(t):bD(t)},PS=function(e,t){return e==="v"?xD(t):wD(t)},SD=function(e,t){return e==="h"&&t==="rtl"?-1:1},RD=function(e,t,r,s,l){var d=SD(e,window.getComputedStyle(t).direction),C=d*s,T=r.target,b=t.contains(T),u=!1,x=C>0,f=0,y=0;do{if(!T)break;var E=PS(e,T),_=E[0],m=E[1],k=E[2],w=m-k-d*_;(_||w)&&TS(e,T)&&(f+=w,y+=_);var U=T.parentNode;T=U&&U.nodeType===Node.DOCUMENT_FRAGMENT_NODE?U.host:U}while(!b&&T!==document.body||b&&(t.contains(T)||t===T));return(x&&Math.abs(f)<1||!x&&Math.abs(y)<1)&&(u=!0),u},If=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ox=function(e){return[e.deltaX,e.deltaY]},Mx=function(e){return e&&"current"in e?e.current:e},ED=function(e,t){return e[0]===t[0]&&e[1]===t[1]},kD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},CD=0,Gd=[];function TD(e){var t=Z.useRef([]),r=Z.useRef([0,0]),s=Z.useRef(),l=Z.useState(CD++)[0],d=Z.useState(kS)[0],C=Z.useRef(e);Z.useEffect(function(){C.current=e},[e]),Z.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var m=Y3([e.lockRef.current],(e.shards||[]).map(Mx),!0).filter(Boolean);return m.forEach(function(k){return k.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),m.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var T=Z.useCallback(function(m,k){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!C.current.allowPinchZoom;var w=If(m),U=r.current,g="deltaX"in m?m.deltaX:U[0]-w[0],A="deltaY"in m?m.deltaY:U[1]-w[1],P,z=m.target,N=Math.abs(g)>Math.abs(A)?"h":"v";if("touches"in m&&N==="h"&&z.type==="range")return!1;var R=Ax(N,z);if(!R)return!0;if(R?P=N:(P=N==="v"?"h":"v",R=Ax(N,z)),!R)return!1;if(!s.current&&"changedTouches"in m&&(g||A)&&(s.current=P),!P)return!0;var S=s.current||P;return RD(S,k,m,S==="h"?g:A)},[]),b=Z.useCallback(function(m){var k=m;if(!(!Gd.length||Gd[Gd.length-1]!==d)){var w="deltaY"in k?Ox(k):If(k),U=t.current.filter(function(P){return P.name===k.type&&(P.target===k.target||k.target===P.shadowParent)&&ED(P.delta,w)})[0];if(U&&U.should){k.cancelable&&k.preventDefault();return}if(!U){var g=(C.current.shards||[]).map(Mx).filter(Boolean).filter(function(P){return P.contains(k.target)}),A=g.length>0?T(k,g[0]):!C.current.noIsolation;A&&k.cancelable&&k.preventDefault()}}},[]),u=Z.useCallback(function(m,k,w,U){var g={name:m,delta:k,target:w,should:U,shadowParent:PD(w)};t.current.push(g),setTimeout(function(){t.current=t.current.filter(function(A){return A!==g})},1)},[]),x=Z.useCallback(function(m){r.current=If(m),s.current=void 0},[]),f=Z.useCallback(function(m){u(m.type,Ox(m),m.target,T(m,e.lockRef.current))},[]),y=Z.useCallback(function(m){u(m.type,If(m),m.target,T(m,e.lockRef.current))},[]);Z.useEffect(function(){return Gd.push(d),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:y}),document.addEventListener("wheel",b,Zd),document.addEventListener("touchmove",b,Zd),document.addEventListener("touchstart",x,Zd),function(){Gd=Gd.filter(function(m){return m!==d}),document.removeEventListener("wheel",b,Zd),document.removeEventListener("touchmove",b,Zd),document.removeEventListener("touchstart",x,Zd)}},[]);var E=e.removeScrollBar,_=e.inert;return Z.createElement(Z.Fragment,null,_?Z.createElement(d,{styles:kD(l)}):null,E?Z.createElement(vD,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function PD(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ND=aD(ES,TD);var NS=Z.forwardRef(function(e,t){return Z.createElement(Hm,gl({},e,{ref:t,sideCar:ND}))});NS.classNames=Hm.classNames;var DD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Yd=new WeakMap,Bf=new WeakMap,zf={},Av=0,DS=function(e){return e&&(e.host||DS(e.parentNode))},AD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=DS(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},OD=function(e,t,r,s){var l=AD(t,Array.isArray(e)?e:[e]);zf[r]||(zf[r]=new WeakMap);var d=zf[r],C=[],T=new Set,b=new Set(l),u=function(f){!f||T.has(f)||(T.add(f),u(f.parentNode))};l.forEach(u);var x=function(f){!f||b.has(f)||Array.prototype.forEach.call(f.children,function(y){if(T.has(y))x(y);else try{var E=y.getAttribute(s),_=E!==null&&E!=="false",m=(Yd.get(y)||0)+1,k=(d.get(y)||0)+1;Yd.set(y,m),d.set(y,k),C.push(y),m===1&&_&&Bf.set(y,!0),k===1&&y.setAttribute(r,"true"),_||y.setAttribute(s,"true")}catch(w){console.error("aria-hidden: cannot operate on ",y,w)}})};return x(t),T.clear(),Av++,function(){C.forEach(function(f){var y=Yd.get(f)-1,E=d.get(f)-1;Yd.set(f,y),d.set(f,E),y||(Bf.has(f)||f.removeAttribute(s),Bf.delete(f)),E||f.removeAttribute(r)}),Av--,Av||(Yd=new WeakMap,Yd=new WeakMap,Bf=new WeakMap,zf={})}},MD=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),l=DD(e);return l?(s.push.apply(s,Array.from(l.querySelectorAll("[aria-live], script"))),OD(s,l,r,"aria-hidden")):function(){return null}},Vm="Dialog",[AS,Vz]=$0(Vm),[jD,rl]=AS(Vm),OS=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:l,onOpenChange:d,modal:C=!0}=e,T=Z.useRef(null),b=Z.useRef(null),[u,x]=R3({prop:s,defaultProp:l??!1,onChange:d,caller:Vm});return o.jsx(jD,{scope:t,triggerRef:T,contentRef:b,contentId:Ev(),titleId:Ev(),descriptionId:Ev(),open:u,onOpenChange:x,onOpenToggle:Z.useCallback(()=>x(f=>!f),[x]),modal:C,children:r})};OS.displayName=Vm;var MS="DialogTrigger",jS=Z.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,l=rl(MS,r),d=Wo(t,l.triggerRef);return o.jsx(no.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Y0(l.open),...s,ref:d,onClick:ju(e.onClick,l.onOpenToggle)})});jS.displayName=MS;var Z0="DialogPortal",[LD,LS]=AS(Z0,{forceMount:void 0}),IS=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:l}=e,d=rl(Z0,t);return o.jsx(LD,{scope:t,forceMount:r,children:Z.Children.map(s,C=>o.jsx(Fm,{present:r||d.open,children:o.jsx(wS,{asChild:!0,container:l,children:C})}))})};IS.displayName=Z0;var hm="DialogOverlay",BS=Z.forwardRef((e,t)=>{const r=LS(hm,e.__scopeDialog),{forceMount:s=r.forceMount,...l}=e,d=rl(hm,e.__scopeDialog);return d.modal?o.jsx(Fm,{present:s||d.open,children:o.jsx(BD,{...l,ref:t})}):null});BS.displayName=hm;var ID=z0("DialogOverlay.RemoveScroll"),BD=Z.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,l=rl(hm,r);return o.jsx(NS,{as:ID,allowPinchZoom:!0,shards:[l.contentRef],children:o.jsx(no.div,{"data-state":Y0(l.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),pd="DialogContent",zS=Z.forwardRef((e,t)=>{const r=LS(pd,e.__scopeDialog),{forceMount:s=r.forceMount,...l}=e,d=rl(pd,e.__scopeDialog);return o.jsx(Fm,{present:s||d.open,children:d.modal?o.jsx(zD,{...l,ref:t}):o.jsx(UD,{...l,ref:t})})});zS.displayName=pd;var zD=Z.forwardRef((e,t)=>{const r=rl(pd,e.__scopeDialog),s=Z.useRef(null),l=Wo(t,r.contentRef,s);return Z.useEffect(()=>{const d=s.current;if(d)return MD(d)},[]),o.jsx(US,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ju(e.onCloseAutoFocus,d=>{d.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:ju(e.onPointerDownOutside,d=>{const C=d.detail.originalEvent,T=C.button===0&&C.ctrlKey===!0;(C.button===2||T)&&d.preventDefault()}),onFocusOutside:ju(e.onFocusOutside,d=>d.preventDefault())})}),UD=Z.forwardRef((e,t)=>{const r=rl(pd,e.__scopeDialog),s=Z.useRef(!1),l=Z.useRef(!1);return o.jsx(US,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:d=>{e.onCloseAutoFocus?.(d),d.defaultPrevented||(s.current||r.triggerRef.current?.focus(),d.preventDefault()),s.current=!1,l.current=!1},onInteractOutside:d=>{e.onInteractOutside?.(d),d.defaultPrevented||(s.current=!0,d.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const C=d.target;r.triggerRef.current?.contains(C)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&l.current&&d.preventDefault()}})}),US=Z.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:l,onCloseAutoFocus:d,...C}=e,T=rl(pd,r),b=Z.useRef(null),u=Wo(t,b);return G3(),o.jsxs(o.Fragment,{children:[o.jsx(bS,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:l,onUnmountAutoFocus:d,children:o.jsx(yS,{role:"dialog",id:T.contentId,"aria-describedby":T.descriptionId,"aria-labelledby":T.titleId,"data-state":Y0(T.open),...C,ref:u,onDismiss:()=>T.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(FD,{titleId:T.titleId}),o.jsx(VD,{contentRef:b,descriptionId:T.descriptionId})]})]})}),G0="DialogTitle",FS=Z.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,l=rl(G0,r);return o.jsx(no.h2,{id:l.titleId,...s,ref:t})});FS.displayName=G0;var HS="DialogDescription",VS=Z.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,l=rl(HS,r);return o.jsx(no.p,{id:l.descriptionId,...s,ref:t})});VS.displayName=HS;var qS="DialogClose",WS=Z.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,l=rl(qS,r);return o.jsx(no.button,{type:"button",...s,ref:t,onClick:ju(e.onClick,()=>l.onOpenChange(!1))})});WS.displayName=qS;function Y0(e){return e?"open":"closed"}var $S="DialogTitleWarning",[qz,ZS]=_3($S,{contentName:pd,titleName:G0,docsSlug:"dialog"}),FD=({titleId:e})=>{const t=ZS($S),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return Z.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},HD="DialogDescriptionWarning",VD=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ZS(HD).contentName}}.`;return Z.useEffect(()=>{const l=e.current?.getAttribute("aria-describedby");t&&l&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},qD=OS,WD=jS,$D=IS,ZD=BS,GD=zS,YD=FS,KD=VS,QD=WS;function GS({...e}){return o.jsx(qD,{"data-slot":"dialog",...e})}function YS({...e}){return o.jsx(WD,{"data-slot":"dialog-trigger",...e})}function XD({...e}){return o.jsx($D,{"data-slot":"dialog-portal",...e})}function JD({className:e,...t}){return o.jsx(ZD,{"data-slot":"dialog-overlay",className:Gs("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function KS({className:e,children:t,showCloseButton:r=!0,...s}){return o.jsxs(XD,{"data-slot":"dialog-portal",children:[o.jsx(JD,{}),o.jsxs(GD,{"data-slot":"dialog-content",className:Gs("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...s,children:[t,r&&o.jsxs(QD,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[o.jsx(B0,{}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function QS({className:e,...t}){return o.jsx("div",{"data-slot":"dialog-header",className:Gs("flex flex-col gap-2 text-center sm:text-left",e),...t})}function XS({className:e,...t}){return o.jsx(YD,{"data-slot":"dialog-title",className:Gs("text-lg leading-none font-semibold",e),...t})}function JS({className:e,...t}){return o.jsx(KD,{"data-slot":"dialog-description",className:Gs("text-muted-foreground text-sm",e),...t})}var eA=Object.defineProperty,tA=Object.defineProperties,nA=Object.getOwnPropertyDescriptors,pm=Object.getOwnPropertySymbols,e2=Object.prototype.hasOwnProperty,t2=Object.prototype.propertyIsEnumerable,jx=(e,t,r)=>t in e?eA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rA=(e,t)=>{for(var r in t||(t={}))e2.call(t,r)&&jx(e,r,t[r]);if(pm)for(var r of pm(t))t2.call(t,r)&&jx(e,r,t[r]);return e},aA=(e,t)=>tA(e,nA(t)),sA=(e,t)=>{var r={};for(var s in e)e2.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&pm)for(var s of pm(e))t.indexOf(s)<0&&t2.call(e,s)&&(r[s]=e[s]);return r};function iA(e){let t=setTimeout(e,0),r=setTimeout(e,10),s=setTimeout(e,50);return[t,r,s]}function oA(e){let t=Z.useRef();return Z.useEffect(()=>{t.current=e}),t.current}var cA=18,n2=40,lA=`${n2}px`,uA=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function dA({containerRef:e,inputRef:t,pushPasswordManagerStrategy:r,isFocused:s}){let[l,d]=Z.useState(!1),[C,T]=Z.useState(!1),[b,u]=Z.useState(!1),x=Z.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&l&&C,[l,C,r]),f=Z.useCallback(()=>{let y=e.current,E=t.current;if(!y||!E||b||r==="none")return;let _=y,m=_.getBoundingClientRect().left+_.offsetWidth,k=_.getBoundingClientRect().top+_.offsetHeight/2,w=m-cA,U=k;document.querySelectorAll(uA).length===0&&document.elementFromPoint(w,U)===y||(d(!0),u(!0))},[e,t,b,r]);return Z.useEffect(()=>{let y=e.current;if(!y||r==="none")return;function E(){let m=window.innerWidth-y.getBoundingClientRect().right;T(m>=n2)}E();let _=setInterval(E,1e3);return()=>{clearInterval(_)}},[e,r]),Z.useEffect(()=>{let y=s||document.activeElement===t.current;if(r==="none"||!y)return;let E=setTimeout(f,0),_=setTimeout(f,2e3),m=setTimeout(f,5e3),k=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(E),clearTimeout(_),clearTimeout(m),clearTimeout(k)}},[t,s,r,f]),{hasPWMBadge:l,willPushPWMBadge:x,PWM_BADGE_SPACE_WIDTH:lA}}var r2=Z.createContext({}),a2=Z.forwardRef((e,t)=>{var r=e,{value:s,onChange:l,maxLength:d,textAlign:C="left",pattern:T,placeholder:b,inputMode:u="numeric",onComplete:x,pushPasswordManagerStrategy:f="increase-width",pasteTransformer:y,containerClassName:E,noScriptCSSFallback:_=hA,render:m,children:k}=r,w=sA(r,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),U,g,A,P,z;let[N,R]=Z.useState(typeof w.defaultValue=="string"?w.defaultValue:""),S=s??N,p=oA(S),D=Z.useCallback(yt=>{l?.(yt),R(yt)},[l]),O=Z.useMemo(()=>T?typeof T=="string"?new RegExp(T):T:null,[T]),j=Z.useRef(null),I=Z.useRef(null),H=Z.useRef({value:S,onChange:D,isIOS:typeof window<"u"&&((g=(U=window?.CSS)==null?void 0:U.supports)==null?void 0:g.call(U,"-webkit-touch-callout","none"))}),F=Z.useRef({prev:[(A=j.current)==null?void 0:A.selectionStart,(P=j.current)==null?void 0:P.selectionEnd,(z=j.current)==null?void 0:z.selectionDirection]});Z.useImperativeHandle(t,()=>j.current,[]),Z.useEffect(()=>{let yt=j.current,on=I.current;if(!yt||!on)return;H.current.value!==yt.value&&H.current.onChange(yt.value),F.current.prev=[yt.selectionStart,yt.selectionEnd,yt.selectionDirection];function ln(){if(document.activeElement!==yt){Re(null),me(null);return}let rn=yt.selectionStart,Ne=yt.selectionEnd,Me=yt.selectionDirection,Ze=yt.maxLength,Ft=yt.value,Ct=F.current.prev,wt=-1,un=-1,Sn;if(Ft.length!==0&&rn!==null&&Ne!==null){let Sr=rn===Ne,Ur=rn===Ft.length&&Ft.length<Ze;if(Sr&&!Ur){let xr=rn;if(xr===0)wt=0,un=1,Sn="forward";else if(xr===Ze)wt=xr-1,un=xr,Sn="backward";else if(Ze>1&&Ft.length>1){let Or=0;if(Ct[0]!==null&&Ct[1]!==null){Sn=xr<Ct[1]?"backward":"forward";let Kr=Ct[0]===Ct[1]&&Ct[0]<Ze;Sn==="backward"&&!Kr&&(Or=-1)}wt=Or+xr,un=Or+xr+1}}wt!==-1&&un!==-1&&wt!==un&&j.current.setSelectionRange(wt,un,Sn)}let Ut=wt!==-1?wt:rn,nr=un!==-1?un:Ne,Ar=Sn??Me;Re(Ut),me(nr),F.current.prev=[Ut,nr,Ar]}if(document.addEventListener("selectionchange",ln,{capture:!0}),ln(),document.activeElement===yt&&J(!0),!document.getElementById("input-otp-style")){let rn=document.createElement("style");if(rn.id="input-otp-style",document.head.appendChild(rn),rn.sheet){let Ne="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";rp(rn.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),rp(rn.sheet,`[data-input-otp]:autofill { ${Ne} }`),rp(rn.sheet,`[data-input-otp]:-webkit-autofill { ${Ne} }`),rp(rn.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),rp(rn.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Pn=()=>{on&&on.style.setProperty("--root-height",`${yt.clientHeight}px`)};Pn();let En=new ResizeObserver(Pn);return En.observe(yt),()=>{document.removeEventListener("selectionchange",ln,{capture:!0}),En.disconnect()}},[]);let[$,q]=Z.useState(!1),[se,J]=Z.useState(!1),[be,Re]=Z.useState(null),[Se,me]=Z.useState(null);Z.useEffect(()=>{iA(()=>{var yt,on,ln,Pn;(yt=j.current)==null||yt.dispatchEvent(new Event("input"));let En=(on=j.current)==null?void 0:on.selectionStart,rn=(ln=j.current)==null?void 0:ln.selectionEnd,Ne=(Pn=j.current)==null?void 0:Pn.selectionDirection;En!==null&&rn!==null&&(Re(En),me(rn),F.current.prev=[En,rn,Ne])})},[S,se]),Z.useEffect(()=>{p!==void 0&&S!==p&&p.length<d&&S.length===d&&x?.(S)},[d,x,p,S]);let Ce=dA({containerRef:I,inputRef:j,pushPasswordManagerStrategy:f,isFocused:se}),Be=Z.useCallback(yt=>{let on=yt.currentTarget.value.slice(0,d);if(on.length>0&&O&&!O.test(on)){yt.preventDefault();return}typeof p=="string"&&on.length<p.length&&document.dispatchEvent(new Event("selectionchange")),D(on)},[d,D,p,O]),_e=Z.useCallback(()=>{var yt;if(j.current){let on=Math.min(j.current.value.length,d-1),ln=j.current.value.length;(yt=j.current)==null||yt.setSelectionRange(on,ln),Re(on),me(ln)}J(!0)},[d]),Ye=Z.useCallback(yt=>{var on,ln;let Pn=j.current;if(!y&&(!H.current.isIOS||!yt.clipboardData||!Pn))return;let En=yt.clipboardData.getData("text/plain"),rn=y?y(En):En;yt.preventDefault();let Ne=(on=j.current)==null?void 0:on.selectionStart,Me=(ln=j.current)==null?void 0:ln.selectionEnd,Ze=(Ne!==Me?S.slice(0,Ne)+rn+S.slice(Me):S.slice(0,Ne)+rn+S.slice(Ne)).slice(0,d);if(Ze.length>0&&O&&!O.test(Ze))return;Pn.value=Ze,D(Ze);let Ft=Math.min(Ze.length,d-1),Ct=Ze.length;Pn.setSelectionRange(Ft,Ct),Re(Ft),me(Ct)},[d,D,O,S]),Qe=Z.useMemo(()=>({position:"relative",cursor:w.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[w.disabled]),Ge=Z.useMemo(()=>({position:"absolute",inset:0,width:Ce.willPushPWMBadge?`calc(100% + ${Ce.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Ce.willPushPWMBadge?`inset(0 ${Ce.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:C,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Ce.PWM_BADGE_SPACE_WIDTH,Ce.willPushPWMBadge,C]),He=Z.useMemo(()=>Z.createElement("input",aA(rA({autoComplete:w.autoComplete||"one-time-code"},w),{"data-input-otp":!0,"data-input-otp-placeholder-shown":S.length===0||void 0,"data-input-otp-mss":be,"data-input-otp-mse":Se,inputMode:u,pattern:O?.source,"aria-placeholder":b,style:Ge,maxLength:d,value:S,ref:j,onPaste:yt=>{var on;Ye(yt),(on=w.onPaste)==null||on.call(w,yt)},onChange:Be,onMouseOver:yt=>{var on;q(!0),(on=w.onMouseOver)==null||on.call(w,yt)},onMouseLeave:yt=>{var on;q(!1),(on=w.onMouseLeave)==null||on.call(w,yt)},onFocus:yt=>{var on;_e(),(on=w.onFocus)==null||on.call(w,yt)},onBlur:yt=>{var on;J(!1),(on=w.onBlur)==null||on.call(w,yt)}})),[Be,_e,Ye,u,Ge,d,Se,be,w,O?.source,S]),Te=Z.useMemo(()=>({slots:Array.from({length:d}).map((yt,on)=>{var ln;let Pn=se&&be!==null&&Se!==null&&(be===Se&&on===be||on>=be&&on<Se),En=S[on]!==void 0?S[on]:null,rn=S[0]!==void 0?null:(ln=b?.[on])!=null?ln:null;return{char:En,placeholderChar:rn,isActive:Pn,hasFakeCaret:Pn&&En===null}}),isFocused:se,isHovering:!w.disabled&&$}),[se,$,d,Se,be,w.disabled,S]),dt=Z.useMemo(()=>m?m(Te):Z.createElement(r2.Provider,{value:Te},k),[k,Te,m]);return Z.createElement(Z.Fragment,null,_!==null&&Z.createElement("noscript",null,Z.createElement("style",null,_)),Z.createElement("div",{ref:I,"data-input-otp-container":!0,style:Qe,className:E},dt,Z.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},He)))});a2.displayName="Input";function rp(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var hA=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;function pA({className:e,containerClassName:t,...r}){return o.jsx(a2,{"data-slot":"input-otp",containerClassName:Gs("flex items-center gap-2 has-disabled:opacity-50",t),className:Gs("disabled:cursor-not-allowed",e),...r})}function Lx({className:e,...t}){return o.jsx("div",{"data-slot":"input-otp-group",className:Gs("flex items-center",e),...t})}function Kd({index:e,className:t,...r}){const s=Z.useContext(r2),{char:l,hasFakeCaret:d,isActive:C}=s?.slots[e]??{};return o.jsxs("div",{"data-slot":"input-otp-slot","data-active":C,className:Gs("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",t),...r,children:[l,d&&o.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}function fA({...e}){return o.jsx("div",{"data-slot":"input-otp-separator",role:"separator",...e,children:o.jsx(bP,{})})}function mA({className:e,type:t,...r}){return o.jsx("input",{type:t,"data-slot":"input",className:Gs("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}function gA(e,t){return Z.useReducer((r,s)=>t[r][s]??r,e)}var zp=e=>{const{present:t,children:r}=e,s=vA(t),l=typeof r=="function"?r({present:s.isPresent}):Z.Children.only(r),d=Wo(s.ref,yA(l));return typeof r=="function"||s.isPresent?Z.cloneElement(l,{ref:d}):null};zp.displayName="Presence";function vA(e){const[t,r]=Z.useState(),s=Z.useRef(null),l=Z.useRef(e),d=Z.useRef("none"),C=e?"mounted":"unmounted",[T,b]=gA(C,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Z.useEffect(()=>{const u=Uf(s.current);d.current=T==="mounted"?u:"none"},[T]),Qc(()=>{const u=s.current,x=l.current;if(x!==e){const y=d.current,E=Uf(u);e?b("MOUNT"):E==="none"||u?.display==="none"?b("UNMOUNT"):b(x&&y!==E?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,b]),Qc(()=>{if(t){let u;const x=t.ownerDocument.defaultView??window,f=E=>{const m=Uf(s.current).includes(CSS.escape(E.animationName));if(E.target===t&&m&&(b("ANIMATION_END"),!l.current)){const k=t.style.animationFillMode;t.style.animationFillMode="forwards",u=x.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=k)})}},y=E=>{E.target===t&&(d.current=Uf(s.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{x.clearTimeout(u),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else b("ANIMATION_END")},[t,b]),{isPresent:["mounted","unmountSuspended"].includes(T),ref:Z.useCallback(u=>{s.current=u?getComputedStyle(u):null,r(u)},[])}}function Uf(e){return e?.animationName||"none"}function yA(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var _A=Z.createContext(void 0);function bA(e){const t=Z.useContext(_A);return e||t||"ltr"}function xA(e,[t,r]){return Math.min(r,Math.max(t,e))}function ld(e,t,{checkForDefaultPrevented:r=!0}={}){return function(l){if(e?.(l),r===!1||!l.defaultPrevented)return t?.(l)}}function wA(e,t){return Z.useReducer((r,s)=>t[r][s]??r,e)}var K0="ScrollArea",[s2,Wz]=$0(K0),[SA,Nc]=s2(K0),i2=Z.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:l,scrollHideDelay:d=600,...C}=e,[T,b]=Z.useState(null),[u,x]=Z.useState(null),[f,y]=Z.useState(null),[E,_]=Z.useState(null),[m,k]=Z.useState(null),[w,U]=Z.useState(0),[g,A]=Z.useState(0),[P,z]=Z.useState(!1),[N,R]=Z.useState(!1),S=Wo(t,D=>b(D)),p=bA(l);return o.jsx(SA,{scope:r,type:s,dir:p,scrollHideDelay:d,scrollArea:T,viewport:u,onViewportChange:x,content:f,onContentChange:y,scrollbarX:E,onScrollbarXChange:_,scrollbarXEnabled:P,onScrollbarXEnabledChange:z,scrollbarY:m,onScrollbarYChange:k,scrollbarYEnabled:N,onScrollbarYEnabledChange:R,onCornerWidthChange:U,onCornerHeightChange:A,children:o.jsx(no.div,{dir:p,...C,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":g+"px",...e.style}})})});i2.displayName=K0;var o2="ScrollAreaViewport",c2=Z.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:l,...d}=e,C=Nc(o2,r),T=Z.useRef(null),b=Wo(t,T,C.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),o.jsx(no.div,{"data-radix-scroll-area-viewport":"",...d,ref:b,style:{overflowX:C.scrollbarXEnabled?"scroll":"hidden",overflowY:C.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:C.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});c2.displayName=o2;var xl="ScrollAreaScrollbar",l2=Z.forwardRef((e,t)=>{const{forceMount:r,...s}=e,l=Nc(xl,e.__scopeScrollArea),{onScrollbarXEnabledChange:d,onScrollbarYEnabledChange:C}=l,T=e.orientation==="horizontal";return Z.useEffect(()=>(T?d(!0):C(!0),()=>{T?d(!1):C(!1)}),[T,d,C]),l.type==="hover"?o.jsx(RA,{...s,ref:t,forceMount:r}):l.type==="scroll"?o.jsx(EA,{...s,ref:t,forceMount:r}):l.type==="auto"?o.jsx(u2,{...s,ref:t,forceMount:r}):l.type==="always"?o.jsx(Q0,{...s,ref:t}):null});l2.displayName=xl;var RA=Z.forwardRef((e,t)=>{const{forceMount:r,...s}=e,l=Nc(xl,e.__scopeScrollArea),[d,C]=Z.useState(!1);return Z.useEffect(()=>{const T=l.scrollArea;let b=0;if(T){const u=()=>{window.clearTimeout(b),C(!0)},x=()=>{b=window.setTimeout(()=>C(!1),l.scrollHideDelay)};return T.addEventListener("pointerenter",u),T.addEventListener("pointerleave",x),()=>{window.clearTimeout(b),T.removeEventListener("pointerenter",u),T.removeEventListener("pointerleave",x)}}},[l.scrollArea,l.scrollHideDelay]),o.jsx(zp,{present:r||d,children:o.jsx(u2,{"data-state":d?"visible":"hidden",...s,ref:t})})}),EA=Z.forwardRef((e,t)=>{const{forceMount:r,...s}=e,l=Nc(xl,e.__scopeScrollArea),d=e.orientation==="horizontal",C=Wm(()=>b("SCROLL_END"),100),[T,b]=wA("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return Z.useEffect(()=>{if(T==="idle"){const u=window.setTimeout(()=>b("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(u)}},[T,l.scrollHideDelay,b]),Z.useEffect(()=>{const u=l.viewport,x=d?"scrollLeft":"scrollTop";if(u){let f=u[x];const y=()=>{const E=u[x];f!==E&&(b("SCROLL"),C()),f=E};return u.addEventListener("scroll",y),()=>u.removeEventListener("scroll",y)}},[l.viewport,d,b,C]),o.jsx(zp,{present:r||T!=="hidden",children:o.jsx(Q0,{"data-state":T==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:ld(e.onPointerEnter,()=>b("POINTER_ENTER")),onPointerLeave:ld(e.onPointerLeave,()=>b("POINTER_LEAVE"))})})}),u2=Z.forwardRef((e,t)=>{const r=Nc(xl,e.__scopeScrollArea),{forceMount:s,...l}=e,[d,C]=Z.useState(!1),T=e.orientation==="horizontal",b=Wm(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,x=r.viewport.offsetHeight<r.viewport.scrollHeight;C(T?u:x)}},10);return oh(r.viewport,b),oh(r.content,b),o.jsx(zp,{present:s||d,children:o.jsx(Q0,{"data-state":d?"visible":"hidden",...l,ref:t})})}),Q0=Z.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,l=Nc(xl,e.__scopeScrollArea),d=Z.useRef(null),C=Z.useRef(0),[T,b]=Z.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=m2(T.viewport,T.content),x={...s,sizes:T,onSizesChange:b,hasThumb:u>0&&u<1,onThumbChange:y=>d.current=y,onThumbPointerUp:()=>C.current=0,onThumbPointerDown:y=>C.current=y};function f(y,E){return DA(y,C.current,T,E)}return r==="horizontal"?o.jsx(kA,{...x,ref:t,onThumbPositionChange:()=>{if(l.viewport&&d.current){const y=l.viewport.scrollLeft,E=Ix(y,T,l.dir);d.current.style.transform=`translate3d(${E}px, 0, 0)`}},onWheelScroll:y=>{l.viewport&&(l.viewport.scrollLeft=y)},onDragScroll:y=>{l.viewport&&(l.viewport.scrollLeft=f(y,l.dir))}}):r==="vertical"?o.jsx(CA,{...x,ref:t,onThumbPositionChange:()=>{if(l.viewport&&d.current){const y=l.viewport.scrollTop,E=Ix(y,T);d.current.style.transform=`translate3d(0, ${E}px, 0)`}},onWheelScroll:y=>{l.viewport&&(l.viewport.scrollTop=y)},onDragScroll:y=>{l.viewport&&(l.viewport.scrollTop=f(y))}}):null}),kA=Z.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...l}=e,d=Nc(xl,e.__scopeScrollArea),[C,T]=Z.useState(),b=Z.useRef(null),u=Wo(t,b,d.onScrollbarXChange);return Z.useEffect(()=>{b.current&&T(getComputedStyle(b.current))},[b]),o.jsx(h2,{"data-orientation":"horizontal",...l,ref:u,sizes:r,style:{bottom:0,left:d.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:d.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":qm(r)+"px",...e.style},onThumbPointerDown:x=>e.onThumbPointerDown(x.x),onDragScroll:x=>e.onDragScroll(x.x),onWheelScroll:(x,f)=>{if(d.viewport){const y=d.viewport.scrollLeft+x.deltaX;e.onWheelScroll(y),v2(y,f)&&x.preventDefault()}},onResize:()=>{b.current&&d.viewport&&C&&s({content:d.viewport.scrollWidth,viewport:d.viewport.offsetWidth,scrollbar:{size:b.current.clientWidth,paddingStart:mm(C.paddingLeft),paddingEnd:mm(C.paddingRight)}})}})}),CA=Z.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...l}=e,d=Nc(xl,e.__scopeScrollArea),[C,T]=Z.useState(),b=Z.useRef(null),u=Wo(t,b,d.onScrollbarYChange);return Z.useEffect(()=>{b.current&&T(getComputedStyle(b.current))},[b]),o.jsx(h2,{"data-orientation":"vertical",...l,ref:u,sizes:r,style:{top:0,right:d.dir==="ltr"?0:void 0,left:d.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":qm(r)+"px",...e.style},onThumbPointerDown:x=>e.onThumbPointerDown(x.y),onDragScroll:x=>e.onDragScroll(x.y),onWheelScroll:(x,f)=>{if(d.viewport){const y=d.viewport.scrollTop+x.deltaY;e.onWheelScroll(y),v2(y,f)&&x.preventDefault()}},onResize:()=>{b.current&&d.viewport&&C&&s({content:d.viewport.scrollHeight,viewport:d.viewport.offsetHeight,scrollbar:{size:b.current.clientHeight,paddingStart:mm(C.paddingTop),paddingEnd:mm(C.paddingBottom)}})}})}),[TA,d2]=s2(xl),h2=Z.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:l,onThumbChange:d,onThumbPointerUp:C,onThumbPointerDown:T,onThumbPositionChange:b,onDragScroll:u,onWheelScroll:x,onResize:f,...y}=e,E=Nc(xl,r),[_,m]=Z.useState(null),k=Wo(t,S=>m(S)),w=Z.useRef(null),U=Z.useRef(""),g=E.viewport,A=s.content-s.viewport,P=oc(x),z=oc(b),N=Wm(f,10);function R(S){if(w.current){const p=S.clientX-w.current.left,D=S.clientY-w.current.top;u({x:p,y:D})}}return Z.useEffect(()=>{const S=p=>{const D=p.target;_?.contains(D)&&P(p,A)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[g,_,A,P]),Z.useEffect(z,[s,z]),oh(_,N),oh(E.content,N),o.jsx(TA,{scope:r,scrollbar:_,hasThumb:l,onThumbChange:oc(d),onThumbPointerUp:oc(C),onThumbPositionChange:z,onThumbPointerDown:oc(T),children:o.jsx(no.div,{...y,ref:k,style:{position:"absolute",...y.style},onPointerDown:ld(e.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),w.current=_.getBoundingClientRect(),U.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E.viewport&&(E.viewport.style.scrollBehavior="auto"),R(S))}),onPointerMove:ld(e.onPointerMove,R),onPointerUp:ld(e.onPointerUp,S=>{const p=S.target;p.hasPointerCapture(S.pointerId)&&p.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=U.current,E.viewport&&(E.viewport.style.scrollBehavior=""),w.current=null})})})}),fm="ScrollAreaThumb",p2=Z.forwardRef((e,t)=>{const{forceMount:r,...s}=e,l=d2(fm,e.__scopeScrollArea);return o.jsx(zp,{present:r||l.hasThumb,children:o.jsx(PA,{ref:t,...s})})}),PA=Z.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...l}=e,d=Nc(fm,r),C=d2(fm,r),{onThumbPositionChange:T}=C,b=Wo(t,f=>C.onThumbChange(f)),u=Z.useRef(void 0),x=Wm(()=>{u.current&&(u.current(),u.current=void 0)},100);return Z.useEffect(()=>{const f=d.viewport;if(f){const y=()=>{if(x(),!u.current){const E=AA(f,T);u.current=E,T()}};return T(),f.addEventListener("scroll",y),()=>f.removeEventListener("scroll",y)}},[d.viewport,x,T]),o.jsx(no.div,{"data-state":C.hasThumb?"visible":"hidden",...l,ref:b,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ld(e.onPointerDownCapture,f=>{const E=f.target.getBoundingClientRect(),_=f.clientX-E.left,m=f.clientY-E.top;C.onThumbPointerDown({x:_,y:m})}),onPointerUp:ld(e.onPointerUp,C.onThumbPointerUp)})});p2.displayName=fm;var X0="ScrollAreaCorner",f2=Z.forwardRef((e,t)=>{const r=Nc(X0,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?o.jsx(NA,{...e,ref:t}):null});f2.displayName=X0;var NA=Z.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,l=Nc(X0,r),[d,C]=Z.useState(0),[T,b]=Z.useState(0),u=!!(d&&T);return oh(l.scrollbarX,()=>{const x=l.scrollbarX?.offsetHeight||0;l.onCornerHeightChange(x),b(x)}),oh(l.scrollbarY,()=>{const x=l.scrollbarY?.offsetWidth||0;l.onCornerWidthChange(x),C(x)}),u?o.jsx(no.div,{...s,ref:t,style:{width:d,height:T,position:"absolute",right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function mm(e){return e?parseInt(e,10):0}function m2(e,t){const r=e/t;return isNaN(r)?0:r}function qm(e){const t=m2(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function DA(e,t,r,s="ltr"){const l=qm(r),d=l/2,C=t||d,T=l-C,b=r.scrollbar.paddingStart+C,u=r.scrollbar.size-r.scrollbar.paddingEnd-T,x=r.content-r.viewport,f=s==="ltr"?[0,x]:[x*-1,0];return g2([b,u],f)(e)}function Ix(e,t,r="ltr"){const s=qm(t),l=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,d=t.scrollbar.size-l,C=t.content-t.viewport,T=d-s,b=r==="ltr"?[0,C]:[C*-1,0],u=xA(e,b);return g2([0,C],[0,T])(u)}function g2(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function v2(e,t){return e>0&&e<t}var AA=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function l(){const d={left:e.scrollLeft,top:e.scrollTop},C=r.left!==d.left,T=r.top!==d.top;(C||T)&&t(),r=d,s=window.requestAnimationFrame(l)}(),()=>window.cancelAnimationFrame(s)};function Wm(e,t){const r=oc(e),s=Z.useRef(0);return Z.useEffect(()=>()=>window.clearTimeout(s.current),[]),Z.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function oh(e,t){const r=oc(t);Qc(()=>{let s=0;if(e){const l=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return l.observe(e),()=>{window.cancelAnimationFrame(s),l.unobserve(e)}}},[e,r])}var OA=i2,MA=c2,jA=f2;function LA({className:e,children:t,...r}){return o.jsxs(OA,{"data-slot":"scroll-area",className:Gs("relative",e),...r,children:[o.jsx(MA,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),o.jsx(IA,{}),o.jsx(jA,{})]})}function IA({className:e,orientation:t="vertical",...r}){return o.jsx(l2,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Gs("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...r,children:o.jsx(p2,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var Ov={exports:{}},Mv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function BA(){if(Bx)return Mv;Bx=1;var e=Pm();function t(f,y){return f===y&&(f!==0||1/f===1/y)||f!==f&&y!==y}var r=typeof Object.is=="function"?Object.is:t,s=e.useState,l=e.useEffect,d=e.useLayoutEffect,C=e.useDebugValue;function T(f,y){var E=y(),_=s({inst:{value:E,getSnapshot:y}}),m=_[0].inst,k=_[1];return d(function(){m.value=E,m.getSnapshot=y,b(m)&&k({inst:m})},[f,E,y]),l(function(){return b(m)&&k({inst:m}),f(function(){b(m)&&k({inst:m})})},[f]),C(E),E}function b(f){var y=f.getSnapshot;f=f.value;try{var E=y();return!r(f,E)}catch{return!0}}function u(f,y){return y()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:T;return Mv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:x,Mv}var zx;function zA(){return zx||(zx=1,Ov.exports=BA()),Ov.exports}var UA=zA();function FA(){return UA.useSyncExternalStore(HA,()=>!0,()=>!1)}function HA(){return()=>{}}var J0="Avatar",[VA,$z]=$0(J0),[qA,y2]=VA(J0),_2=Z.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[l,d]=Z.useState("idle");return o.jsx(qA,{scope:r,imageLoadingStatus:l,onImageLoadingStatusChange:d,children:o.jsx(no.span,{...s,ref:t})})});_2.displayName=J0;var b2="AvatarImage",x2=Z.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:l=()=>{},...d}=e,C=y2(b2,r),T=WA(s,d),b=oc(u=>{l(u),C.onImageLoadingStatusChange(u)});return Qc(()=>{T!=="idle"&&b(T)},[T,b]),T==="loaded"?o.jsx(no.img,{...d,ref:t,src:s}):null});x2.displayName=b2;var w2="AvatarFallback",S2=Z.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...l}=e,d=y2(w2,r),[C,T]=Z.useState(s===void 0);return Z.useEffect(()=>{if(s!==void 0){const b=window.setTimeout(()=>T(!0),s);return()=>window.clearTimeout(b)}},[s]),C&&d.imageLoadingStatus!=="loaded"?o.jsx(no.span,{...l,ref:t}):null});S2.displayName=w2;function Ux(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function WA(e,{referrerPolicy:t,crossOrigin:r}){const s=FA(),l=Z.useRef(null),d=s?(l.current||(l.current=new window.Image),l.current):null,[C,T]=Z.useState(()=>Ux(d,e));return Qc(()=>{T(Ux(d,e))},[d,e]),Qc(()=>{const b=f=>()=>{T(f)};if(!d)return;const u=b("loaded"),x=b("error");return d.addEventListener("load",u),d.addEventListener("error",x),t&&(d.referrerPolicy=t),typeof r=="string"&&(d.crossOrigin=r),()=>{d.removeEventListener("load",u),d.removeEventListener("error",x)}},[d,r,t]),C}var $A=_2,ZA=x2,GA=S2;function Sp({className:e,...t}){return o.jsx($A,{"data-slot":"avatar",className:Gs("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function Rp({className:e,...t}){return o.jsx(ZA,{"data-slot":"avatar-image",className:Gs("aspect-square size-full",e),...t})}function Ep({className:e,...t}){return o.jsx(GA,{"data-slot":"avatar-fallback",className:Gs("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function ad({className:e,...t}){return o.jsx("div",{"data-slot":"skeleton",className:Gs("bg-accent animate-pulse rounded-md",e),...t})}const YA=({value:e,onChange:t,maxLength:r=6,disabled:s=!1,error:l,placeholder:d="Enter your one-time password"})=>{const[C,T]=Z.useState(e||""),b=u=>{T(u),t&&t(u)};return o.jsxs("div",{className:"space-y-2",children:[o.jsxs(pA,{maxLength:r,value:C,onChange:b,disabled:s,children:[o.jsxs(Lx,{children:[o.jsx(Kd,{index:0}),o.jsx(Kd,{index:1}),o.jsx(Kd,{index:2})]}),o.jsx(fA,{}),o.jsxs(Lx,{children:[o.jsx(Kd,{index:3}),o.jsx(Kd,{index:4}),o.jsx(Kd,{index:5})]})]}),l&&o.jsx("p",{className:"text-red-500 text-sm text-center",children:l}),o.jsx("div",{className:"text-center text-sm text-gray-600",children:C===""?o.jsx(o.Fragment,{children:d}):o.jsxs(o.Fragment,{children:["You entered: ",C]})})]})},Fx=({onClick:e,className:t="",disabled:r})=>o.jsx(ns,{to:r?"#":"/login",onClick:r?s=>s.preventDefault():e,className:`px-4 py-2 border-2 border-[#004d71] text-[#004d71] bg-white rounded font-bold hover:bg-[#f7f7f7] transition-colors duration-150 ${r?"pointer-events-none opacity-50":""} ${t}`,children:"Login"}),R2=()=>{const[e,t]=Z.useState(!1),[r,s]=Z.useState(null),{admin:l}=cc(),d=Z.useRef(null),{doctor:C,pendingValidation:T}=ps(),{hospital:b,allPublicHospital:u}=to(),{user:x}=si(),f=!!(C||T),y=l||C||T||b||x,E=()=>window.scrollTo({top:0,behavior:"smooth"}),_=()=>t(g=>!g),m=()=>{t(!1),s(null)};Z.useEffect(()=>{const g=A=>{d.current&&!d.current.contains(A.target)&&m()};return e&&document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[e]);const k=(g=!1)=>l?o.jsx(Ui,{href:"/admin/dashboard",label:"Admin Dashboard",onClick:g?m:void 0}):o.jsx(Ui,{href:y?"#":"/admin/login",label:"Admin",onClick:g?m:void 0,className:y?"pointer-events-none opacity-50":""}),w=()=>o.jsxs("nav",{className:"hidden lg:flex items-center space-x-4 ml-4 xl:ml-8 flex-1",children:[rx.map((g,A)=>g.label==="Hospitals"?o.jsx(ox,{idx:A,openDropdown:r,setOpenDropdown:s,isMobile:!1,onLinkClick:m},g.label):g.dropdown?o.jsx(ix,{link:g,idx:A,openDropdown:r,setOpenDropdown:s},g.label):o.jsx(Ui,{href:g.href,label:g.label},`${g.label}-${A}`)),o.jsxs("div",{className:"flex justify-end space-x-3 w-fit ms-auto",children:[o.jsx(Fx,{className:"ml-2",disabled:y}),o.jsx(Ui,{href:y?"#":"/doctor/login",label:"Doctor",className:f||y?"pointer-events-none opacity-50":""}),o.jsx(Ui,{href:y?"#":"/hospital/login",label:"Hospital",className:y?"pointer-events-none opacity-50":""}),k(!1),f&&o.jsx(Ui,{href:"/doctor/profile",label:"My Profile"}),C&&o.jsx(Ui,{href:"/doctor/messages",label:"Messages"}),b&&o.jsx(Ui,{href:"/hospital/profile",label:"My Hospital Profile"}),x&&o.jsx(Ui,{href:"/profile",label:"My Profile"}),x&&o.jsx(Ui,{href:"/user/message",label:"Messages"})]})]}),U=()=>e&&o.jsxs("nav",{ref:d,className:"absolute top-full left-0 w-full bg-white shadow-lg z-40 flex flex-col py-4 px-4 lg:hidden animate-fade-in max-h-[80vh] overflow-y-auto",children:[rx.map((g,A)=>g.label==="Hospitals"?o.jsx(ox,{idx:A,openDropdown:r,setOpenDropdown:s,isMobile:!0,onLinkClick:m},g.label):g.dropdown?o.jsx(ix,{link:g,idx:A,openDropdown:r,setOpenDropdown:s,isMobile:!0,onLinkClick:m},g.label):o.jsx(Ui,{href:g.href,label:g.label,onClick:m},g.label)),o.jsx(Fx,{onClick:m,className:"mt-2",disabled:y}),o.jsx(Ui,{href:y?"#":"/doctor/login",label:"Doctor",onClick:m,className:f||y?"pointer-events-none opacity-50":""}),o.jsx(Ui,{href:y?"#":"/register/hospital",label:"Register Hospital",className:`flex items-center gap-2 px-4 py-2 bg-[#004d71] text-white rounded border border-[#004d71] font-medium hover:bg-sky-500 transition-colors duration-150 ${y?"pointer-events-none opacity-50":""}`}),k(!0),f&&o.jsx(Ui,{href:"/doctor/profile",label:"My Profile",onClick:m}),f&&o.jsx(Ui,{href:"/doctor/messages",label:"Messages",onClick:m}),b&&o.jsx(Ui,{href:"/doctor/profile",label:"My Hospital Profile",onClick:m}),x&&o.jsx(Ui,{href:"/profile",label:"My Profile",onClick:m}),x&&o.jsx(Ui,{href:"/user/message",label:"Messages",onClick:m})]});return o.jsx("header",{className:"bg-white shadow-md sticky top-0 z-50 w-full",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between h-20 relative",children:[o.jsx(ns,{to:"/","aria-label":"quickMed Logo",className:"flex items-center",onClick:E,children:o.jsx("img",{src:"/quickMed//images/logo.png",alt:"logo",className:"w-[120px] h-auto"})}),o.jsx(w,{}),o.jsx("button",{onClick:_,className:"lg:hidden inline-flex items-center justify-center p-2 rounded-md text-[#014e78] hover:text-white hover:bg-[#014e78]",children:o.jsx(P6,{})}),o.jsx(U,{}),o.jsx("a",{target:"_self",href:"https://wa.me/923488597922","aria-label":"Sadeeq Helpline",className:"lg:hidden absolute right-16 top-1/2 -translate-y-1/2 text-[#014e78] hover:text-[#004d71]"})]})})})},KA=()=>o.jsx("footer",{className:"bg-emerald-900 text-emerald-100",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:m6.map((e,t)=>o.jsxs("div",{className:"rounded-xl bg-emerald-800 bg-opacity-60 p-6 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4 text-emerald-50",children:e.title}),o.jsx("ul",{className:"space-y-2",children:e.links.map((r,s)=>o.jsx("li",{children:r.href.startsWith("/")?o.jsx(ns,{to:r.href,className:"text-emerald-200 hover:text-white transition-colors duration-200",children:r.name}):o.jsx("a",{href:r.href,className:"text-emerald-200 hover:text-white transition-colors duration-200",children:r.name})},s))})]},t))}),o.jsxs("div",{className:"border-t border-emerald-700 mt-12 pt-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[o.jsxs("div",{className:"mb-4 md:mb-0",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{className:"h-8 w-8 text-emerald-100 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2H4a1 1 0 01-1-1V4z",clipRule:"evenodd"})}),o.jsx("span",{className:"text-xl font-bold text-emerald-50",children:"quickMed"})]}),o.jsx("p",{className:"text-emerald-200 mt-2",children:"Pakistan's most trusted healthcare platform"})]}),o.jsx("div",{className:"flex space-x-4",children:g6.map((e,t)=>o.jsx("a",{href:e.href,className:"text-2xl hover:text-emerald-200 transition-colors duration-200",title:e.name,children:e.icon},t))})]}),o.jsx("div",{className:"text-center mt-8 pt-8 border-t border-emerald-700",children:o.jsxs("p",{className:"text-emerald-200 text-sm",children:[" 2024 Sadeeq and Haider. All rights reserved. |",o.jsx(ns,{to:"#",className:"hover:text-white ml-1",children:"Privacy Policy"})," ","|",o.jsx(ns,{to:"#",className:"hover:text-white ml-1",children:"Terms of Service"})]})})]})]})}),E2=({className:e="",size:t="default"})=>{const{openModal:r}=Fw(),s={small:"w-10 h-10",default:"w-12 h-12",large:"w-14 h-14"},l={small:"w-5 h-5",default:"w-6 h-6",large:"w-7 h-7"};return o.jsx("button",{onClick:r,className:`${s[t]} ${e} fixed bottom-6 right-6 bg-gradient-to-r from-emerald-500 to-blue-600 text-white rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center justify-center z-40`,"aria-label":"Open AI Health Assistant",children:o.jsxs("div",{className:"relative",children:[o.jsx(lp,{className:l[t]}),o.jsx(e0,{className:"absolute -top-1 -right-1 w-3 h-3 text-yellow-300 animate-pulse"})]})})},QA=()=>{const{messages:e,inputMessage:t,loading:r,isModalOpen:s,chatContainerRef:l,isInputValid:d,MIN_CHARACTERS:C,setInputMessage:T,handleSendMessage:b,handleKeyDown:u,closeModal:x,handleSpecialtyClick:f,handleDoctorClick:y}=Fw(),E=Z.useRef(null);return Z.useEffect(()=>{const _=m=>{s&&E.current&&!E.current.contains(m.target)&&x()};return s&&document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[s,x]),s?o.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none flex justify-end",children:o.jsxs("div",{ref:E,className:"pointer-events-auto relative w-full max-w-sm h-full bg-white shadow-xl flex flex-col",role:"dialog","aria-modal":"true","aria-label":"Quick help chat",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-emerald-600 to-blue-600 text-white",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(lp,{className:"w-6 h-6"}),o.jsx(e0,{className:"absolute -top-1 -right-1 w-3 h-3 text-yellow-300 animate-pulse"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sm",children:"Dr. AI Assistant"}),o.jsx("p",{className:"text-xs opacity-90",children:"Virtual Health Consultation"})]})]}),o.jsx("button",{onClick:x,className:"p-2 hover:bg-white/20 rounded-full transition-colors","aria-label":"Close quick help",children:o.jsx(B0,{className:"w-5 h-5"})})]}),o.jsxs("div",{ref:l,className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gradient-to-b from-blue-50/30 to-white",children:[e.map(_=>{const m=_.type==="user";return o.jsx("div",{className:`flex ${m?"justify-end":"justify-start"} mb-3`,children:o.jsxs("div",{className:`flex items-start gap-3 max-w-[88%] ${m?"flex-row-reverse":"flex-row"}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${m?"bg-gradient-to-br from-emerald-500 to-emerald-600 shadow-lg":"bg-gradient-to-br from-blue-500 to-blue-600 shadow-lg"}`,children:m?o.jsx(IP,{className:"w-5 h-5 text-white"}):o.jsxs("div",{className:"relative",children:[o.jsx(lp,{className:"w-5 h-5 text-white"}),o.jsx(e0,{className:"absolute -top-1 -right-1 w-2 h-2 text-yellow-300"})]})}),o.jsxs("div",{className:`rounded-2xl px-4 py-3 shadow-sm ${m?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white":_.isError?"bg-red-50 border border-red-200 text-red-800":"bg-white border border-gray-200 text-gray-800 shadow-md"}`,children:[o.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:_.content}),_.apiResponse&&o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-xl border border-purple-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(jP,{className:"w-4 h-4 text-purple-600"}),o.jsx("h4",{className:"font-semibold text-purple-800 text-sm",children:"Analysis Summary"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zP,{className:"w-3 h-3 text-purple-600"}),o.jsx("span",{className:"text-purple-700",children:`${_.apiResponse?.totalDoctorsAnalyzed||_.apiResponse?.data?.totalDoctorsAnalyzed||_.recommendations?.totalDoctorsAnalyzed||_.recommendations?.analysis?.totalDoctorsAnalyzed||0} doctors analyzed`})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sP,{className:"w-3 h-3 text-purple-600"}),o.jsx("span",{className:"text-purple-700",children:(()=>{const k=_.apiResponse?.timestamp||_.recommendations?.timestamp||new Date;return new Date(k).toLocaleTimeString()})()})]})]})]}),_.recommendations?.analysis?.symptomAnalysis&&o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-xl border border-blue-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(lx,{className:"w-4 h-4 text-blue-600"}),o.jsx("h4",{className:"font-semibold text-blue-800 text-sm",children:"Symptom Analysis"})]}),o.jsx("p",{className:"text-blue-700 text-xs leading-relaxed",children:_.recommendations.analysis.symptomAnalysis})]}),_.recommendations?.analysis?.generalAdvice&&o.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 p-4 rounded-xl border border-yellow-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(hP,{className:"w-4 h-4 text-yellow-600"}),o.jsx("h4",{className:"font-semibold text-yellow-800 text-sm",children:"Health Advice"})]}),o.jsx("p",{className:"text-yellow-700 text-xs leading-relaxed",children:_.recommendations.analysis.generalAdvice})]}),_.recommendations?.analysis?.recommendedSpecialities&&o.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-emerald-100 p-4 rounded-xl border border-emerald-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(PP,{className:"w-4 h-4 text-emerald-600"}),o.jsx("h4",{className:"font-semibold text-emerald-800 text-sm",children:"Recommended Specialties"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:_.recommendations.analysis.recommendedSpecialities.map((k,w)=>o.jsx("button",{onClick:()=>f(k),className:"inline-block bg-emerald-200 text-emerald-800 text-xs px-3 py-1.5 rounded-full font-medium border border-emerald-300 hover:bg-emerald-300 hover:border-emerald-400 transition-all duration-200 cursor-pointer",children:k},w))})]}),_.recommendations?.analysis?.recommendations&&o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(lp,{className:"w-4 h-4 text-gray-600"}),o.jsxs("h4",{className:"font-semibold text-gray-800 text-sm",children:["Top Doctors (",_.recommendations.analysis.recommendations.length,")"]})]}),o.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:_.recommendations.analysis.recommendations.slice(0,3).map((k,w)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gradient-to-r from-gray-50 to-white hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>y(k),children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h5",{className:"font-semibold text-gray-800 text-sm",children:k.name}),o.jsxs("span",{className:"text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full",children:[k.relevanceScore,"/10"]})]}),o.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:k.speciality.slice(0,2).map((U,g)=>o.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-md font-medium",children:U},g))}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(lx,{className:"w-3 h-3"}),k.experience," years"]}),o.jsx("span",{children:""}),o.jsx("span",{children:k.city||"Location N/A"})]}),o.jsx("div",{className:"mt-2 text-xs text-gray-500",children:k.reasoning})]},w))})]})]}),o.jsx("span",{className:"text-xs opacity-70 mt-2 block",children:_.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},_.id)}),r&&o.jsx("div",{className:"flex justify-start mb-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:o.jsx(lp,{className:"w-5 h-5 text-white"})}),o.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl px-4 py-3 shadow-md",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),o.jsx("span",{className:"text-sm text-gray-600 ml-2",children:"Analyzing symptoms..."})]})})]})})]}),o.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:[o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("textarea",{value:t,onChange:_=>T(_.target.value),onKeyDown:u,placeholder:`Describe your symptoms in detail (minimum ${C} characters)...`,className:`w-full px-4 py-3 text-sm border rounded-xl focus:outline-none focus:ring-2 resize-none shadow-sm transition-all duration-200 ${t.length>0&&!d?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-emerald-500 focus:border-transparent"}`,rows:1,maxLength:500,disabled:r}),o.jsxs("div",{className:"absolute right-3 bottom-2 flex items-center gap-2",children:[t.length>0&&!d&&o.jsx(ux,{className:"w-4 h-4 text-red-400"}),o.jsxs("div",{className:`text-xs ${t.length>0&&!d?"text-red-400":t.length>=C?"text-emerald-500":"text-gray-400"}`,children:[t.length,"/",C]})]})]}),o.jsx("button",{onClick:b,disabled:!t.trim()||r||!d,className:`px-4 py-3 rounded-xl transition-all duration-200 flex items-center justify-center shadow-lg transform hover:scale-105 ${d&&t.trim()?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white hover:from-emerald-600 hover:to-emerald-700 hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-label":"Send message",children:o.jsx(Xw,{className:"w-4 h-4"})})]}),t.length>0&&!d&&o.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-red-500",children:[o.jsx(ux,{className:"w-3 h-3"}),o.jsxs("span",{children:["Please enter at least ",C," characters to describe your symptoms"]})]})]})]})}):null},XA=()=>{const{loading:e}=cc();return e.session?o.jsx(Jw,{}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(R2,{}),o.jsx("main",{className:"flex-1",children:o.jsx(ew,{})}),o.jsx(KA,{}),o.jsx(E2,{}),o.jsx(QA,{})]})},JA=()=>{const{loading:e}=cc(),{loading:t}=ps(),{user:r}=si();return e.session?o.jsx(Jw,{}):o.jsxs(o.Fragment,{children:[o.jsx(R2,{}),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50",children:o.jsx(ew,{})})]})};function eO(e,t){const r=Z.useRef(t);Z.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}const tO=1;function nO(e){return Object.freeze({__version:tO,map:e})}const k2=Z.createContext(null);function C2(){const e=Z.use(k2);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function rO(e){function t(r,s){const{instance:l}=e(r).current;return Z.useImperativeHandle(s,()=>l),null}return Z.forwardRef(t)}function aO(e,t){const r=Z.useRef(void 0);Z.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function T2(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}var dp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var sO=dp.exports,Hx;function iO(){return Hx||(Hx=1,function(e,t){(function(r,s){s(t)})(sO,function(r){var s="1.9.4";function l(i){var h,M,W,te;for(M=1,W=arguments.length;M<W;M++){te=arguments[M];for(h in te)i[h]=te[h]}return i}var d=Object.create||function(){function i(){}return function(h){return i.prototype=h,new i}}();function C(i,h){var M=Array.prototype.slice;if(i.bind)return i.bind.apply(i,M.call(arguments,1));var W=M.call(arguments,2);return function(){return i.apply(h,W.length?W.concat(M.call(arguments)):arguments)}}var T=0;function b(i){return"_leaflet_id"in i||(i._leaflet_id=++T),i._leaflet_id}function u(i,h,M){var W,te,he,ze;return ze=function(){W=!1,te&&(he.apply(M,te),te=!1)},he=function(){W?te=arguments:(i.apply(M,arguments),setTimeout(ze,h),W=!0)},he}function x(i,h,M){var W=h[1],te=h[0],he=W-te;return i===W&&M?i:((i-te)%he+he)%he+te}function f(){return!1}function y(i,h){if(h===!1)return i;var M=Math.pow(10,h===void 0?6:h);return Math.round(i*M)/M}function E(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function _(i){return E(i).split(/\s+/)}function m(i,h){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?d(i.options):{});for(var M in h)i.options[M]=h[M];return i.options}function k(i,h,M){var W=[];for(var te in i)W.push(encodeURIComponent(M?te.toUpperCase():te)+"="+encodeURIComponent(i[te]));return(!h||h.indexOf("?")===-1?"?":"&")+W.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function U(i,h){return i.replace(w,function(M,W){var te=h[W];if(te===void 0)throw new Error("No value provided for variable "+M);return typeof te=="function"&&(te=te(h)),te})}var g=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function A(i,h){for(var M=0;M<i.length;M++)if(i[M]===h)return M;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var N=0;function R(i){var h=+new Date,M=Math.max(0,16-(h-N));return N=h+M,window.setTimeout(i,M)}var S=window.requestAnimationFrame||z("RequestAnimationFrame")||R,p=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function D(i,h,M){if(M&&S===R)i.call(h);else return S.call(window,C(i,h))}function O(i){i&&p.call(window,i)}var j={__proto__:null,extend:l,create:d,bind:C,get lastId(){return T},stamp:b,throttle:u,wrapNum:x,falseFn:f,formatNum:y,trim:E,splitWords:_,setOptions:m,getParamString:k,template:U,isArray:g,indexOf:A,emptyImageUrl:P,requestFn:S,cancelFn:p,requestAnimFrame:D,cancelAnimFrame:O};function I(){}I.extend=function(i){var h=function(){m(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},M=h.__super__=this.prototype,W=d(M);W.constructor=h,h.prototype=W;for(var te in this)Object.prototype.hasOwnProperty.call(this,te)&&te!=="prototype"&&te!=="__super__"&&(h[te]=this[te]);return i.statics&&l(h,i.statics),i.includes&&(H(i.includes),l.apply(null,[W].concat(i.includes))),l(W,i),delete W.statics,delete W.includes,W.options&&(W.options=M.options?d(M.options):{},l(W.options,i.options)),W._initHooks=[],W.callInitHooks=function(){if(!this._initHooksCalled){M.callInitHooks&&M.callInitHooks.call(this),this._initHooksCalled=!0;for(var he=0,ze=W._initHooks.length;he<ze;he++)W._initHooks[he].call(this)}},h},I.include=function(i){var h=this.prototype.options;return l(this.prototype,i),i.options&&(this.prototype.options=h,this.mergeOptions(i.options)),this},I.mergeOptions=function(i){return l(this.prototype.options,i),this},I.addInitHook=function(i){var h=Array.prototype.slice.call(arguments,1),M=typeof i=="function"?i:function(){this[i].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(M),this};function H(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=g(i)?i:[i];for(var h=0;h<i.length;h++)i[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var F={on:function(i,h,M){if(typeof i=="object")for(var W in i)this._on(W,i[W],h);else{i=_(i);for(var te=0,he=i.length;te<he;te++)this._on(i[te],h,M)}return this},off:function(i,h,M){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var W in i)this._off(W,i[W],h);else{i=_(i);for(var te=arguments.length===1,he=0,ze=i.length;he<ze;he++)te?this._off(i[he]):this._off(i[he],h,M)}return this},_on:function(i,h,M,W){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(i,h,M)===!1){M===this&&(M=void 0);var te={fn:h,ctx:M};W&&(te.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(te)}},_off:function(i,h,M){var W,te,he;if(this._events&&(W=this._events[i],!!W)){if(arguments.length===1){if(this._firingCount)for(te=0,he=W.length;te<he;te++)W[te].fn=f;delete this._events[i];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var ze=this._listens(i,h,M);if(ze!==!1){var it=W[ze];this._firingCount&&(it.fn=f,this._events[i]=W=W.slice()),W.splice(ze,1)}}},fire:function(i,h,M){if(!this.listens(i,M))return this;var W=l({},h,{type:i,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var te=this._events[i];if(te){this._firingCount=this._firingCount+1||1;for(var he=0,ze=te.length;he<ze;he++){var it=te[he],ht=it.fn;it.once&&this.off(i,ht,it.ctx),ht.call(it.ctx||this,W)}this._firingCount--}}return M&&this._propagateEvent(W),this},listens:function(i,h,M,W){typeof i!="string"&&console.warn('"string" type argument expected');var te=h;typeof h!="function"&&(W=!!h,te=void 0,M=void 0);var he=this._events&&this._events[i];if(he&&he.length&&this._listens(i,te,M)!==!1)return!0;if(W){for(var ze in this._eventParents)if(this._eventParents[ze].listens(i,h,M,W))return!0}return!1},_listens:function(i,h,M){if(!this._events)return!1;var W=this._events[i]||[];if(!h)return!!W.length;M===this&&(M=void 0);for(var te=0,he=W.length;te<he;te++)if(W[te].fn===h&&W[te].ctx===M)return te;return!1},once:function(i,h,M){if(typeof i=="object")for(var W in i)this._on(W,i[W],h,!0);else{i=_(i);for(var te=0,he=i.length;te<he;te++)this._on(i[te],h,M,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[b(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[b(i)],this},_propagateEvent:function(i){for(var h in this._eventParents)this._eventParents[h].fire(i.type,l({layer:i.target,propagatedFrom:i.target},i),!0)}};F.addEventListener=F.on,F.removeEventListener=F.clearAllEventListeners=F.off,F.addOneTimeEventListener=F.once,F.fireEvent=F.fire,F.hasEventListeners=F.listens;var $=I.extend(F);function q(i,h,M){this.x=M?Math.round(i):i,this.y=M?Math.round(h):h}var se=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(i){return this.clone()._add(J(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(J(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new q(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new q(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=se(this.x),this.y=se(this.y),this},distanceTo:function(i){i=J(i);var h=i.x-this.x,M=i.y-this.y;return Math.sqrt(h*h+M*M)},equals:function(i){return i=J(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=J(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function J(i,h,M){return i instanceof q?i:g(i)?new q(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new q(i.x,i.y):new q(i,h,M)}function be(i,h){if(i)for(var M=h?[i,h]:i,W=0,te=M.length;W<te;W++)this.extend(M[W])}be.prototype={extend:function(i){var h,M;if(!i)return this;if(i instanceof q||typeof i[0]=="number"||"x"in i)h=M=J(i);else if(i=Re(i),h=i.min,M=i.max,!h||!M)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=M.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(M.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(M.y,this.max.y)),this},getCenter:function(i){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var h,M;return typeof i[0]=="number"||i instanceof q?i=J(i):i=Re(i),i instanceof be?(h=i.min,M=i.max):h=M=i,h.x>=this.min.x&&M.x<=this.max.x&&h.y>=this.min.y&&M.y<=this.max.y},intersects:function(i){i=Re(i);var h=this.min,M=this.max,W=i.min,te=i.max,he=te.x>=h.x&&W.x<=M.x,ze=te.y>=h.y&&W.y<=M.y;return he&&ze},overlaps:function(i){i=Re(i);var h=this.min,M=this.max,W=i.min,te=i.max,he=te.x>h.x&&W.x<M.x,ze=te.y>h.y&&W.y<M.y;return he&&ze},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var h=this.min,M=this.max,W=Math.abs(h.x-M.x)*i,te=Math.abs(h.y-M.y)*i;return Re(J(h.x-W,h.y-te),J(M.x+W,M.y+te))},equals:function(i){return i?(i=Re(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function Re(i,h){return!i||i instanceof be?i:new be(i,h)}function Se(i,h){if(i)for(var M=h?[i,h]:i,W=0,te=M.length;W<te;W++)this.extend(M[W])}Se.prototype={extend:function(i){var h=this._southWest,M=this._northEast,W,te;if(i instanceof Ce)W=i,te=i;else if(i instanceof Se){if(W=i._southWest,te=i._northEast,!W||!te)return this}else return i?this.extend(Be(i)||me(i)):this;return!h&&!M?(this._southWest=new Ce(W.lat,W.lng),this._northEast=new Ce(te.lat,te.lng)):(h.lat=Math.min(W.lat,h.lat),h.lng=Math.min(W.lng,h.lng),M.lat=Math.max(te.lat,M.lat),M.lng=Math.max(te.lng,M.lng)),this},pad:function(i){var h=this._southWest,M=this._northEast,W=Math.abs(h.lat-M.lat)*i,te=Math.abs(h.lng-M.lng)*i;return new Se(new Ce(h.lat-W,h.lng-te),new Ce(M.lat+W,M.lng+te))},getCenter:function(){return new Ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Ce||"lat"in i?i=Be(i):i=me(i);var h=this._southWest,M=this._northEast,W,te;return i instanceof Se?(W=i.getSouthWest(),te=i.getNorthEast()):W=te=i,W.lat>=h.lat&&te.lat<=M.lat&&W.lng>=h.lng&&te.lng<=M.lng},intersects:function(i){i=me(i);var h=this._southWest,M=this._northEast,W=i.getSouthWest(),te=i.getNorthEast(),he=te.lat>=h.lat&&W.lat<=M.lat,ze=te.lng>=h.lng&&W.lng<=M.lng;return he&&ze},overlaps:function(i){i=me(i);var h=this._southWest,M=this._northEast,W=i.getSouthWest(),te=i.getNorthEast(),he=te.lat>h.lat&&W.lat<M.lat,ze=te.lng>h.lng&&W.lng<M.lng;return he&&ze},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,h){return i?(i=me(i),this._southWest.equals(i.getSouthWest(),h)&&this._northEast.equals(i.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function me(i,h){return i instanceof Se?i:new Se(i,h)}function Ce(i,h,M){if(isNaN(i)||isNaN(h))throw new Error("Invalid LatLng object: ("+i+", "+h+")");this.lat=+i,this.lng=+h,M!==void 0&&(this.alt=+M)}Ce.prototype={equals:function(i,h){if(!i)return!1;i=Be(i);var M=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return M<=(h===void 0?1e-9:h)},toString:function(i){return"LatLng("+y(this.lat,i)+", "+y(this.lng,i)+")"},distanceTo:function(i){return Ye.distance(this,Be(i))},wrap:function(){return Ye.wrapLatLng(this)},toBounds:function(i){var h=180*i/40075017,M=h/Math.cos(Math.PI/180*this.lat);return me([this.lat-h,this.lng-M],[this.lat+h,this.lng+M])},clone:function(){return new Ce(this.lat,this.lng,this.alt)}};function Be(i,h,M){return i instanceof Ce?i:g(i)&&typeof i[0]!="object"?i.length===3?new Ce(i[0],i[1],i[2]):i.length===2?new Ce(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Ce(i.lat,"lng"in i?i.lng:i.lon,i.alt):h===void 0?null:new Ce(i,h,M)}var _e={latLngToPoint:function(i,h){var M=this.projection.project(i),W=this.scale(h);return this.transformation._transform(M,W)},pointToLatLng:function(i,h){var M=this.scale(h),W=this.transformation.untransform(i,M);return this.projection.unproject(W)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var h=this.projection.bounds,M=this.scale(i),W=this.transformation.transform(h.min,M),te=this.transformation.transform(h.max,M);return new be(W,te)},infinite:!1,wrapLatLng:function(i){var h=this.wrapLng?x(i.lng,this.wrapLng,!0):i.lng,M=this.wrapLat?x(i.lat,this.wrapLat,!0):i.lat,W=i.alt;return new Ce(M,h,W)},wrapLatLngBounds:function(i){var h=i.getCenter(),M=this.wrapLatLng(h),W=h.lat-M.lat,te=h.lng-M.lng;if(W===0&&te===0)return i;var he=i.getSouthWest(),ze=i.getNorthEast(),it=new Ce(he.lat-W,he.lng-te),ht=new Ce(ze.lat-W,ze.lng-te);return new Se(it,ht)}},Ye=l({},_e,{wrapLng:[-180,180],R:6371e3,distance:function(i,h){var M=Math.PI/180,W=i.lat*M,te=h.lat*M,he=Math.sin((h.lat-i.lat)*M/2),ze=Math.sin((h.lng-i.lng)*M/2),it=he*he+Math.cos(W)*Math.cos(te)*ze*ze,ht=2*Math.atan2(Math.sqrt(it),Math.sqrt(1-it));return this.R*ht}}),Qe=6378137,Ge={R:Qe,MAX_LATITUDE:85.0511287798,project:function(i){var h=Math.PI/180,M=this.MAX_LATITUDE,W=Math.max(Math.min(M,i.lat),-M),te=Math.sin(W*h);return new q(this.R*i.lng*h,this.R*Math.log((1+te)/(1-te))/2)},unproject:function(i){var h=180/Math.PI;return new Ce((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*h,i.x*h/this.R)},bounds:function(){var i=Qe*Math.PI;return new be([-i,-i],[i,i])}()};function He(i,h,M,W){if(g(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=h,this._c=M,this._d=W}He.prototype={transform:function(i,h){return this._transform(i.clone(),h)},_transform:function(i,h){return h=h||1,i.x=h*(this._a*i.x+this._b),i.y=h*(this._c*i.y+this._d),i},untransform:function(i,h){return h=h||1,new q((i.x/h-this._b)/this._a,(i.y/h-this._d)/this._c)}};function Te(i,h,M,W){return new He(i,h,M,W)}var dt=l({},Ye,{code:"EPSG:3857",projection:Ge,transformation:function(){var i=.5/(Math.PI*Ge.R);return Te(i,.5,-i,.5)}()}),yt=l({},dt,{code:"EPSG:900913"});function on(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function ln(i,h){var M="",W,te,he,ze,it,ht;for(W=0,he=i.length;W<he;W++){for(it=i[W],te=0,ze=it.length;te<ze;te++)ht=it[te],M+=(te?"L":"M")+ht.x+" "+ht.y;M+=h?Qt.svg?"z":"x":""}return M||"M0 0"}var Pn=document.documentElement.style,En="ActiveXObject"in window,rn=En&&!document.addEventListener,Ne="msLaunchUri"in navigator&&!("documentMode"in document),Me=vr("webkit"),Ze=vr("android"),Ft=vr("android 2")||vr("android 3"),Ct=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),wt=Ze&&vr("Google")&&Ct<537&&!("AudioNode"in window),un=!!window.opera,Sn=!Ne&&vr("chrome"),Ut=vr("gecko")&&!Me&&!un&&!En,nr=!Sn&&vr("safari"),Ar=vr("phantom"),Sr="OTransition"in Pn,Ur=navigator.platform.indexOf("Win")===0,xr=En&&"transition"in Pn,Or="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ft,Kr="MozPerspective"in Pn,va=!window.L_DISABLE_3D&&(xr||Or||Kr)&&!Sr&&!Ar,ra=typeof orientation<"u"||vr("mobile"),ua=ra&&Me,jn=ra&&Or,Ha=!window.PointerEvent&&window.MSPointerEvent,Ea=!!(window.PointerEvent||Ha),Qr="ontouchstart"in window||!!window.TouchEvent,gr=!window.L_NO_TOUCH&&(Qr||Ea),rt=ra&&un,ut=ra&&Ut,$t=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var i=!1;try{var h=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",f,h),window.removeEventListener("testPassiveEventSupport",f,h)}catch{}return i}(),sn=function(){return!!document.createElement("canvas").getContext}(),nn=!!(document.createElementNS&&on("svg").createSVGRect),et=!!nn&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),On=!nn&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var h=i.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Ln=navigator.platform.indexOf("Mac")===0,Xn=navigator.platform.indexOf("Linux")===0;function vr(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Qt={ie:En,ielt9:rn,edge:Ne,webkit:Me,android:Ze,android23:Ft,androidStock:wt,opera:un,chrome:Sn,gecko:Ut,safari:nr,phantom:Ar,opera12:Sr,win:Ur,ie3d:xr,webkit3d:Or,gecko3d:Kr,any3d:va,mobile:ra,mobileWebkit:ua,mobileWebkit3d:jn,msPointer:Ha,pointer:Ea,touch:gr,touchNative:Qr,mobileOpera:rt,mobileGecko:ut,retina:$t,passiveEvents:Tt,canvas:sn,svg:nn,vml:On,inlineSvg:et,mac:Ln,linux:Xn},St=Qt.msPointer?"MSPointerDown":"pointerdown",Un=Qt.msPointer?"MSPointerMove":"pointermove",In=Qt.msPointer?"MSPointerUp":"pointerup",Nn=Qt.msPointer?"MSPointerCancel":"pointercancel",Fr={touchstart:St,touchmove:Un,touchend:In,touchcancel:Nn},Mr={touchstart:ii,touchmove:bs,touchend:bs,touchcancel:bs},Hr={},cr=!1;function Kn(i,h,M){return h==="touchstart"&&Ci(),Mr[h]?(M=Mr[h].bind(this,M),i.addEventListener(Fr[h],M,!1),M):(console.warn("wrong event specified:",h),f)}function xa(i,h,M){if(!Fr[h]){console.warn("wrong event specified:",h);return}i.removeEventListener(Fr[h],M,!1)}function ma(i){Hr[i.pointerId]=i}function La(i){Hr[i.pointerId]&&(Hr[i.pointerId]=i)}function Va(i){delete Hr[i.pointerId]}function Ci(){cr||(document.addEventListener(St,ma,!0),document.addEventListener(Un,La,!0),document.addEventListener(In,Va,!0),document.addEventListener(Nn,Va,!0),cr=!0)}function bs(i,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var M in Hr)h.touches.push(Hr[M]);h.changedTouches=[h],i(h)}}function ii(i,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&qa(h),bs(i,h)}function Ti(i){var h={},M,W;for(W in i)M=i[W],h[W]=M&&M.bind?M.bind(i):M;return i=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Us=200;function vi(i,h){i.addEventListener("dblclick",h);var M=0,W;function te(he){if(he.detail!==1){W=he.detail;return}if(!(he.pointerType==="mouse"||he.sourceCapabilities&&!he.sourceCapabilities.firesTouchEvents)){var ze=Zo(he);if(!(ze.some(function(ht){return ht instanceof HTMLLabelElement&&ht.attributes.for})&&!ze.some(function(ht){return ht instanceof HTMLInputElement||ht instanceof HTMLSelectElement}))){var it=Date.now();it-M<=Us?(W++,W===2&&h(Ti(he))):W=1,M=it}}}return i.addEventListener("click",te),{dblclick:h,simDblclick:te}}function ea(i,h){i.removeEventListener("dblclick",h.dblclick),i.removeEventListener("click",h.simDblclick)}var Fs=Ga(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ks=Ga(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pn=Ks==="webkitTransition"||Ks==="OTransition"?Ks+"End":"transitionend";function Jn(i){return typeof i=="string"?document.getElementById(i):i}function $n(i,h){var M=i.style[h]||i.currentStyle&&i.currentStyle[h];if((!M||M==="auto")&&document.defaultView){var W=document.defaultView.getComputedStyle(i,null);M=W?W[h]:null}return M==="auto"?null:M}function dr(i,h,M){var W=document.createElement(i);return W.className=h||"",M&&M.appendChild(W),W}function Dn(i){var h=i.parentNode;h&&h.removeChild(i)}function Hn(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function $r(i){var h=i.parentNode;h&&h.lastChild!==i&&h.appendChild(i)}function Er(i){var h=i.parentNode;h&&h.firstChild!==i&&h.insertBefore(i,h.firstChild)}function kr(i,h){if(i.classList!==void 0)return i.classList.contains(h);var M=ya(i);return M.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(M)}function Fn(i,h){if(i.classList!==void 0)for(var M=_(h),W=0,te=M.length;W<te;W++)i.classList.add(M[W]);else if(!kr(i,h)){var he=ya(i);Da(i,(he?he+" ":"")+h)}}function Zr(i,h){i.classList!==void 0?i.classList.remove(h):Da(i,E((" "+ya(i)+" ").replace(" "+h+" "," ")))}function Da(i,h){i.className.baseVal===void 0?i.className=h:i.className.baseVal=h}function ya(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Ca(i,h){"opacity"in i.style?i.style.opacity=h:"filter"in i.style&&Za(i,h)}function Za(i,h){var M=!1,W="DXImageTransform.Microsoft.Alpha";try{M=i.filters.item(W)}catch{if(h===1)return}h=Math.round(h*100),M?(M.Enabled=h!==100,M.Opacity=h):i.style.filter+=" progid:"+W+"(opacity="+h+")"}function Ga(i){for(var h=document.documentElement.style,M=0;M<i.length;M++)if(i[M]in h)return i[M];return!1}function ss(i,h,M){var W=h||new q(0,0);i.style[Fs]=(Qt.ie3d?"translate("+W.x+"px,"+W.y+"px)":"translate3d("+W.x+"px,"+W.y+"px,0)")+(M?" scale("+M+")":"")}function Aa(i,h){i._leaflet_pos=h,Qt.any3d?ss(i,h):(i.style.left=h.x+"px",i.style.top=h.y+"px")}function ls(i){return i._leaflet_pos||new q(0,0)}var Ps,ro,yi;if("onselectstart"in document)Ps=function(){Cr(window,"selectstart",qa)},ro=function(){da(window,"selectstart",qa)};else{var Pi=Ga(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ps=function(){if(Pi){var i=document.documentElement.style;yi=i[Pi],i[Pi]="none"}},ro=function(){Pi&&(document.documentElement.style[Pi]=yi,yi=void 0)}}function Ns(){Cr(window,"dragstart",qa)}function Eo(){da(window,"dragstart",qa)}var mo,Hi;function ao(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Ni(),mo=i,Hi=i.style.outlineStyle,i.style.outlineStyle="none",Cr(window,"keydown",Ni))}function Ni(){mo&&(mo.style.outlineStyle=Hi,mo=void 0,Hi=void 0,da(window,"keydown",Ni))}function _i(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Di(i){var h=i.getBoundingClientRect();return{x:h.width/i.offsetWidth||1,y:h.height/i.offsetHeight||1,boundingClientRect:h}}var uc={__proto__:null,TRANSFORM:Fs,TRANSITION:Ks,TRANSITION_END:pn,get:Jn,getStyle:$n,create:dr,remove:Dn,empty:Hn,toFront:$r,toBack:Er,hasClass:kr,addClass:Fn,removeClass:Zr,setClass:Da,getClass:ya,setOpacity:Ca,testProp:Ga,setTransform:ss,setPosition:Aa,getPosition:ls,get disableTextSelection(){return Ps},get enableTextSelection(){return ro},disableImageDrag:Ns,enableImageDrag:Eo,preventOutline:ao,restoreOutline:Ni,getSizedParentNode:_i,getScale:Di};function Cr(i,h,M,W){if(h&&typeof h=="object")for(var te in h)tr(i,te,h[te],M);else{h=_(h);for(var he=0,ze=h.length;he<ze;he++)tr(i,h[he],M,W)}return this}var Hs="_leaflet_events";function da(i,h,M,W){if(arguments.length===1)oi(i),delete i[Hs];else if(h&&typeof h=="object")for(var te in h)Qs(i,te,h[te],M);else if(h=_(h),arguments.length===2)oi(i,function(it){return A(h,it)!==-1});else for(var he=0,ze=h.length;he<ze;he++)Qs(i,h[he],M,W);return this}function oi(i,h){for(var M in i[Hs]){var W=M.split(/\d/)[0];(!h||h(W))&&Qs(i,W,null,null,M)}}var so={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function tr(i,h,M,W){var te=h+b(M)+(W?"_"+b(W):"");if(i[Hs]&&i[Hs][te])return this;var he=function(it){return M.call(W||i,it||window.event)},ze=he;!Qt.touchNative&&Qt.pointer&&h.indexOf("touch")===0?he=Kn(i,h,he):Qt.touch&&h==="dblclick"?he=vi(i,he):"addEventListener"in i?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?i.addEventListener(so[h]||h,he,Qt.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(he=function(it){it=it||window.event,Qa(i,it)&&ze(it)},i.addEventListener(so[h],he,!1)):i.addEventListener(h,ze,!1):i.attachEvent("on"+h,he),i[Hs]=i[Hs]||{},i[Hs][te]=he}function Qs(i,h,M,W,te){te=te||h+b(M)+(W?"_"+b(W):"");var he=i[Hs]&&i[Hs][te];if(!he)return this;!Qt.touchNative&&Qt.pointer&&h.indexOf("touch")===0?xa(i,h,he):Qt.touch&&h==="dblclick"?ea(i,he):"removeEventListener"in i?i.removeEventListener(so[h]||h,he,!1):i.detachEvent("on"+h,he),i[Hs][te]=null}function ci(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function li(i){return tr(i,"wheel",ci),this}function _r(i){return Cr(i,"mousedown touchstart dblclick contextmenu",ci),i._leaflet_disable_click=!0,this}function qa(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Xs(i){return qa(i),ci(i),this}function Zo(i){if(i.composedPath)return i.composedPath();for(var h=[],M=i.target;M;)h.push(M),M=M.parentNode;return h}function ms(i,h){if(!h)return new q(i.clientX,i.clientY);var M=Di(h),W=M.boundingClientRect;return new q((i.clientX-W.left)/M.x-h.clientLeft,(i.clientY-W.top)/M.y-h.clientTop)}var Vi=Qt.linux&&Qt.chrome?window.devicePixelRatio:Qt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function go(i){return Qt.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Vi:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Qa(i,h){var M=h.relatedTarget;if(!M)return!0;try{for(;M&&M!==i;)M=M.parentNode}catch{return!1}return M!==i}var Oc={__proto__:null,on:Cr,off:da,stopPropagation:ci,disableScrollPropagation:li,disableClickPropagation:_r,preventDefault:qa,stop:Xs,getPropagationPath:Zo,getMousePosition:ms,getWheelDelta:go,isExternalTarget:Qa,addListener:Cr,removeListener:da},Js=$.extend({run:function(i,h,M,W){this.stop(),this._el=i,this._inProgress=!0,this._duration=M||.25,this._easeOutPower=1/Math.max(W||.5,.2),this._startPos=ls(i),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(i){var h=+new Date-this._startTime,M=this._duration*1e3;h<M?this._runFrame(this._easeOut(h/M),i):(this._runFrame(1),this._complete())},_runFrame:function(i,h){var M=this._startPos.add(this._offset.multiplyBy(i));h&&M._round(),Aa(this._el,M),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Vr=$.extend({options:{crs:dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,h){h=m(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=C(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(Be(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ks&&Qt.any3d&&!Qt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Cr(this._proxy,pn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,h,M){if(h=h===void 0?this._zoom:this._limitZoom(h),i=this._limitCenter(Be(i),h,this.options.maxBounds),M=M||{},this._stop(),this._loaded&&!M.reset&&M!==!0){M.animate!==void 0&&(M.zoom=l({animate:M.animate},M.zoom),M.pan=l({animate:M.animate,duration:M.duration},M.pan));var W=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,h,M.zoom):this._tryAnimatedPan(i,M.pan);if(W)return clearTimeout(this._sizeTimer),this}return this._resetView(i,h,M.pan&&M.pan.noMoveStart),this},setZoom:function(i,h){return this._loaded?this.setView(this.getCenter(),i,{zoom:h}):(this._zoom=i,this)},zoomIn:function(i,h){return i=i||(Qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,h)},zoomOut:function(i,h){return i=i||(Qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,h)},setZoomAround:function(i,h,M){var W=this.getZoomScale(h),te=this.getSize().divideBy(2),he=i instanceof q?i:this.latLngToContainerPoint(i),ze=he.subtract(te).multiplyBy(1-1/W),it=this.containerPointToLatLng(te.add(ze));return this.setView(it,h,{zoom:M})},_getBoundsCenterZoom:function(i,h){h=h||{},i=i.getBounds?i.getBounds():me(i);var M=J(h.paddingTopLeft||h.padding||[0,0]),W=J(h.paddingBottomRight||h.padding||[0,0]),te=this.getBoundsZoom(i,!1,M.add(W));if(te=typeof h.maxZoom=="number"?Math.min(h.maxZoom,te):te,te===1/0)return{center:i.getCenter(),zoom:te};var he=W.subtract(M).divideBy(2),ze=this.project(i.getSouthWest(),te),it=this.project(i.getNorthEast(),te),ht=this.unproject(ze.add(it).divideBy(2).add(he),te);return{center:ht,zoom:te}},fitBounds:function(i,h){if(i=me(i),!i.isValid())throw new Error("Bounds are not valid.");var M=this._getBoundsCenterZoom(i,h);return this.setView(M.center,M.zoom,h)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,h){return this.setView(i,this._zoom,{pan:h})},panBy:function(i,h){if(i=J(i).round(),h=h||{},!i.x&&!i.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Js,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Fn(this._mapPane,"leaflet-pan-anim");var M=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,M,h.duration||.25,h.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,h,M){if(M=M||{},M.animate===!1||!Qt.any3d)return this.setView(i,h,M);this._stop();var W=this.project(this.getCenter()),te=this.project(i),he=this.getSize(),ze=this._zoom;i=Be(i),h=h===void 0?ze:h;var it=Math.max(he.x,he.y),ht=it*this.getZoomScale(ze,h),Xt=te.distanceTo(W)||1,qn=1.42,Yn=qn*qn;function ir($a){var Si=$a?-1:1,uo=$a?ht:it,So=ht*ht-it*it+Si*Yn*Yn*Xt*Xt,Ja=2*uo*Yn*Xt,yc=So/Ja,Hc=Math.sqrt(yc*yc+1)-yc,Io=Hc<1e-9?-18:Math.log(Hc);return Io}function jr($a){return(Math.exp($a)-Math.exp(-$a))/2}function ka($a){return(Math.exp($a)+Math.exp(-$a))/2}function Ua($a){return jr($a)/ka($a)}var us=ir(0);function js($a){return it*(ka(us)/ka(us+qn*$a))}function vc($a){return it*(ka(us)*Ua(us+qn*$a)-jr(us))/Yn}function Ol($a){return 1-Math.pow(1-$a,1.5)}var Lo=Date.now(),lo=(ir(1)-us)/qn,Fc=M.duration?1e3*M.duration:1e3*lo*.8;function Mi(){var $a=(Date.now()-Lo)/Fc,Si=Ol($a)*lo;$a<=1?(this._flyToFrame=D(Mi,this),this._move(this.unproject(W.add(te.subtract(W).multiplyBy(vc(Si)/Xt)),ze),this.getScaleZoom(it/js(Si),ze),{flyTo:!0})):this._move(i,h)._moveEnd(!0)}return this._moveStart(!0,M.noMoveStart),Mi.call(this),this},flyToBounds:function(i,h){var M=this._getBoundsCenterZoom(i,h);return this.flyTo(M.center,M.zoom,h)},setMaxBounds:function(i){return i=me(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var h=this.options.minZoom;return this.options.minZoom=i,this._loaded&&h!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var h=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&h!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,h){this._enforcingBounds=!0;var M=this.getCenter(),W=this._limitCenter(M,this._zoom,me(i));return M.equals(W)||this.panTo(W,h),this._enforcingBounds=!1,this},panInside:function(i,h){h=h||{};var M=J(h.paddingTopLeft||h.padding||[0,0]),W=J(h.paddingBottomRight||h.padding||[0,0]),te=this.project(this.getCenter()),he=this.project(i),ze=this.getPixelBounds(),it=Re([ze.min.add(M),ze.max.subtract(W)]),ht=it.getSize();if(!it.contains(he)){this._enforcingBounds=!0;var Xt=he.subtract(it.getCenter()),qn=it.extend(he).getSize().subtract(ht);te.x+=Xt.x<0?-qn.x:qn.x,te.y+=Xt.y<0?-qn.y:qn.y,this.panTo(this.unproject(te),h),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=l({animate:!1,pan:!0},i===!0?{animate:!0}:i);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var M=this.getSize(),W=h.divideBy(2).round(),te=M.divideBy(2).round(),he=W.subtract(te);return!he.x&&!he.y?this:(i.animate&&i.pan?this.panBy(he):(i.pan&&this._rawPanBy(he),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(C(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:M}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=l({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=C(this._handleGeolocationResponse,this),M=C(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,M,i):navigator.geolocation.getCurrentPosition(h,M,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var h=i.code,M=i.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+M+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var h=i.coords.latitude,M=i.coords.longitude,W=new Ce(h,M),te=W.toBounds(i.coords.accuracy*2),he=this._locateOptions;if(he.setView){var ze=this.getBoundsZoom(te);this.setView(W,he.maxZoom?Math.min(ze,he.maxZoom):ze)}var it={latlng:W,bounds:te,timestamp:i.timestamp};for(var ht in i.coords)typeof i.coords[ht]=="number"&&(it[ht]=i.coords[ht]);this.fire("locationfound",it)}},addHandler:function(i,h){if(!h)return this;var M=this[i]=new h(this);return this._handlers.push(M),this.options[i]&&M.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Dn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Dn(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,h){var M="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),W=dr("div",M,h||this._mapPane);return i&&(this._panes[i]=W),W},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),h=this.unproject(i.getBottomLeft()),M=this.unproject(i.getTopRight());return new Se(h,M)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,h,M){i=me(i),M=J(M||[0,0]);var W=this.getZoom()||0,te=this.getMinZoom(),he=this.getMaxZoom(),ze=i.getNorthWest(),it=i.getSouthEast(),ht=this.getSize().subtract(M),Xt=Re(this.project(it,W),this.project(ze,W)).getSize(),qn=Qt.any3d?this.options.zoomSnap:1,Yn=ht.x/Xt.x,ir=ht.y/Xt.y,jr=h?Math.max(Yn,ir):Math.min(Yn,ir);return W=this.getScaleZoom(jr,W),qn&&(W=Math.round(W/(qn/100))*(qn/100),W=h?Math.ceil(W/qn)*qn:Math.floor(W/qn)*qn),Math.max(te,Math.min(he,W))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,h){var M=this._getTopLeftPoint(i,h);return new be(M,M.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,h){var M=this.options.crs;return h=h===void 0?this._zoom:h,M.scale(i)/M.scale(h)},getScaleZoom:function(i,h){var M=this.options.crs;h=h===void 0?this._zoom:h;var W=M.zoom(i*M.scale(h));return isNaN(W)?1/0:W},project:function(i,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(Be(i),h)},unproject:function(i,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(J(i),h)},layerPointToLatLng:function(i){var h=J(i).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(i){var h=this.project(Be(i))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Be(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(me(i))},distance:function(i,h){return this.options.crs.distance(Be(i),Be(h))},containerPointToLayerPoint:function(i){return J(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return J(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var h=this.containerPointToLayerPoint(J(i));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Be(i)))},mouseEventToContainerPoint:function(i){return ms(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var h=this._container=Jn(i);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Cr(h,"scroll",this._onScroll,this),this._containerId=b(h)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Qt.any3d,Fn(i,"leaflet-container"+(Qt.touch?" leaflet-touch":"")+(Qt.retina?" leaflet-retina":"")+(Qt.ielt9?" leaflet-oldie":"")+(Qt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=$n(i,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Aa(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Fn(i.markerPane,"leaflet-zoom-hide"),Fn(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,h,M){Aa(this._mapPane,new q(0,0));var W=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var te=this._zoom!==h;this._moveStart(te,M)._move(i,h)._moveEnd(te),this.fire("viewreset"),W&&this.fire("load")},_moveStart:function(i,h){return i&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(i,h,M,W){h===void 0&&(h=this._zoom);var te=this._zoom!==h;return this._zoom=h,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),W?M&&M.pinch&&this.fire("zoom",M):((te||M&&M.pinch)&&this.fire("zoom",M),this.fire("move",M)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Aa(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[b(this._container)]=this;var h=i?da:Cr;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Qt.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,h){for(var M=[],W,te=h==="mouseout"||h==="mouseover",he=i.target||i.srcElement,ze=!1;he;){if(W=this._targets[b(he)],W&&(h==="click"||h==="preclick")&&this._draggableMoved(W)){ze=!0;break}if(W&&W.listens(h,!0)&&(te&&!Qa(he,i)||(M.push(W),te))||he===this._container)break;he=he.parentNode}return!M.length&&!ze&&!te&&this.listens(h,!0)&&(M=[this]),M},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var h=i.target||i.srcElement;if(!(!this._loaded||h._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(h))){var M=i.type;M==="mousedown"&&ao(h),this._fireDOMEvent(i,M)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,h,M){if(i.type==="click"){var W=l({},i);W.type="preclick",this._fireDOMEvent(W,W.type,M)}var te=this._findEventTargets(i,h);if(M){for(var he=[],ze=0;ze<M.length;ze++)M[ze].listens(h,!0)&&he.push(M[ze]);te=he.concat(te)}if(te.length){h==="contextmenu"&&qa(i);var it=te[0],ht={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Xt=it.getLatLng&&(!it._radius||it._radius<=10);ht.containerPoint=Xt?this.latLngToContainerPoint(it.getLatLng()):this.mouseEventToContainerPoint(i),ht.layerPoint=this.containerPointToLayerPoint(ht.containerPoint),ht.latlng=Xt?it.getLatLng():this.layerPointToLatLng(ht.layerPoint)}for(ze=0;ze<te.length;ze++)if(te[ze].fire(h,ht,!0),ht.originalEvent._stopped||te[ze].options.bubblingMouseEvents===!1&&A(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,h=this._handlers.length;i<h;i++)this._handlers[i].disable()},whenReady:function(i,h){return this._loaded?i.call(h||this,{target:this}):this.on("load",i,h),this},_getMapPanePos:function(){return ls(this._mapPane)||new q(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,h){var M=i&&h!==void 0?this._getNewPixelOrigin(i,h):this.getPixelOrigin();return M.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,h){var M=this.getSize()._divideBy(2);return this.project(i,h)._subtract(M)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,h,M){var W=this._getNewPixelOrigin(M,h);return this.project(i,h)._subtract(W)},_latLngBoundsToNewLayerBounds:function(i,h,M){var W=this._getNewPixelOrigin(M,h);return Re([this.project(i.getSouthWest(),h)._subtract(W),this.project(i.getNorthWest(),h)._subtract(W),this.project(i.getSouthEast(),h)._subtract(W),this.project(i.getNorthEast(),h)._subtract(W)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,h,M){if(!M)return i;var W=this.project(i,h),te=this.getSize().divideBy(2),he=new be(W.subtract(te),W.add(te)),ze=this._getBoundsOffset(he,M,h);return Math.abs(ze.x)<=1&&Math.abs(ze.y)<=1?i:this.unproject(W.add(ze),h)},_limitOffset:function(i,h){if(!h)return i;var M=this.getPixelBounds(),W=new be(M.min.add(i),M.max.add(i));return i.add(this._getBoundsOffset(W,h))},_getBoundsOffset:function(i,h,M){var W=Re(this.project(h.getNorthEast(),M),this.project(h.getSouthWest(),M)),te=W.min.subtract(i.min),he=W.max.subtract(i.max),ze=this._rebound(te.x,-he.x),it=this._rebound(te.y,-he.y);return new q(ze,it)},_rebound:function(i,h){return i+h>0?Math.round(i-h)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(h))},_limitZoom:function(i){var h=this.getMinZoom(),M=this.getMaxZoom(),W=Qt.any3d?this.options.zoomSnap:1;return W&&(i=Math.round(i/W)*W),Math.max(h,Math.min(M,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Zr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,h){var M=this._getCenterOffset(i)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(M)?!1:(this.panBy(M,h),!0)},_createAnimProxy:function(){var i=this._proxy=dr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(h){var M=Fs,W=this._proxy.style[M];ss(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),W===this._proxy.style[M]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Dn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),h=this.getZoom();ss(this._proxy,this.project(i,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,h,M){if(this._animatingZoom)return!0;if(M=M||{},!this._zoomAnimated||M.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var W=this.getZoomScale(h),te=this._getCenterOffset(i)._divideBy(1-1/W);return M.animate!==!0&&!this.getSize().contains(te)?!1:(D(function(){this._moveStart(!0,M.noMoveStart||!1)._animateZoom(i,h,!0)},this),!0)},_animateZoom:function(i,h,M,W){this._mapPane&&(M&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=h,Fn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:h,noUpdate:W}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(C(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Zr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ui(i,h){return new Vr(i,h)}var gs=I.extend({options:{position:"topright"},initialize:function(i){m(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var h=this._map;return h&&h.removeControl(this),this.options.position=i,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var h=this._container=this.onAdd(i),M=this.getPosition(),W=i._controlCorners[M];return Fn(h,"leaflet-control"),M.indexOf("bottom")!==-1?W.insertBefore(h,W.firstChild):W.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Dn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),qi=function(i){return new gs(i)};Vr.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},h="leaflet-",M=this._controlContainer=dr("div",h+"control-container",this._container);function W(te,he){var ze=h+te+" "+h+he;i[te+he]=dr("div",ze,M)}W("top","left"),W("top","right"),W("bottom","left"),W("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Dn(this._controlCorners[i]);Dn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Go=gs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,h,M,W){return M<W?-1:W<M?1:0}},initialize:function(i,h,M){m(this,M),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var W in i)this._addLayer(i[W],W);for(W in h)this._addLayer(h[W],W,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return gs.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,h){return this._addLayer(i,h),this._map?this._update():this},addOverlay:function(i,h){return this._addLayer(i,h,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var h=this._getLayer(b(i));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Fn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Fn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Zr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Zr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",h=this._container=dr("div",i),M=this.options.collapsed;h.setAttribute("aria-haspopup",!0),_r(h),li(h);var W=this._section=dr("section",i+"-list");M&&(this._map.on("click",this.collapse,this),Cr(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var te=this._layersLink=dr("a",i+"-toggle",h);te.href="#",te.title="Layers",te.setAttribute("role","button"),Cr(te,{keydown:function(he){he.keyCode===13&&this._expandSafely()},click:function(he){qa(he),this._expandSafely()}},this),M||this.expand(),this._baseLayersList=dr("div",i+"-base",W),this._separator=dr("div",i+"-separator",W),this._overlaysList=dr("div",i+"-overlays",W),h.appendChild(W)},_getLayer:function(i){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&b(this._layers[h].layer)===i)return this._layers[h]},_addLayer:function(i,h,M){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:h,overlay:M}),this.options.sortLayers&&this._layers.sort(C(function(W,te){return this.options.sortFunction(W.layer,te.layer,W.name,te.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Hn(this._baseLayersList),Hn(this._overlaysList),this._layerControlInputs=[];var i,h,M,W,te=0;for(M=0;M<this._layers.length;M++)W=this._layers[M],this._addItem(W),h=h||W.overlay,i=i||!W.overlay,te+=W.overlay?0:1;return this.options.hideSingleBase&&(i=i&&te>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=h&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var h=this._getLayer(b(i.target)),M=h.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;M&&this._map.fire(M,h)},_createRadioElement:function(i,h){var M='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(h?' checked="checked"':"")+"/>",W=document.createElement("div");return W.innerHTML=M,W.firstChild},_addItem:function(i){var h=document.createElement("label"),M=this._map.hasLayer(i.layer),W;i.overlay?(W=document.createElement("input"),W.type="checkbox",W.className="leaflet-control-layers-selector",W.defaultChecked=M):W=this._createRadioElement("leaflet-base-layers_"+b(this),M),this._layerControlInputs.push(W),W.layerId=b(i.layer),Cr(W,"click",this._onInputClick,this);var te=document.createElement("span");te.innerHTML=" "+i.name;var he=document.createElement("span");h.appendChild(he),he.appendChild(W),he.appendChild(te);var ze=i.overlay?this._overlaysList:this._baseLayersList;return ze.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,h,M,W=[],te=[];this._handlingClick=!0;for(var he=i.length-1;he>=0;he--)h=i[he],M=this._getLayer(h.layerId).layer,h.checked?W.push(M):h.checked||te.push(M);for(he=0;he<te.length;he++)this._map.hasLayer(te[he])&&this._map.removeLayer(te[he]);for(he=0;he<W.length;he++)this._map.hasLayer(W[he])||this._map.addLayer(W[he]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,h,M,W=this._map.getZoom(),te=i.length-1;te>=0;te--)h=i[te],M=this._getLayer(h.layerId).layer,h.disabled=M.options.minZoom!==void 0&&W<M.options.minZoom||M.options.maxZoom!==void 0&&W>M.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Cr(i,"click",qa),this.expand();var h=this;setTimeout(function(){da(i,"click",qa),h._preventClick=!1})}}),Yo=function(i,h,M){return new Go(i,h,M)},io=gs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var h="leaflet-control-zoom",M=dr("div",h+" leaflet-bar"),W=this.options;return this._zoomInButton=this._createButton(W.zoomInText,W.zoomInTitle,h+"-in",M,this._zoomIn),this._zoomOutButton=this._createButton(W.zoomOutText,W.zoomOutTitle,h+"-out",M,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),M},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,h,M,W,te){var he=dr("a",M,W);return he.innerHTML=i,he.href="#",he.title=h,he.setAttribute("role","button"),he.setAttribute("aria-label",h),_r(he),Cr(he,"click",Xs),Cr(he,"click",te,this),Cr(he,"click",this._refocusOnMap,this),he},_updateDisabled:function(){var i=this._map,h="leaflet-disabled";Zr(this._zoomInButton,h),Zr(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Fn(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Fn(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Vr.mergeOptions({zoomControl:!0}),Vr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new io,this.addControl(this.zoomControl))});var fn=function(i){return new io(i)},ve=gs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var h="leaflet-control-scale",M=dr("div",h),W=this.options;return this._addScales(W,h+"-line",M),i.on(W.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),M},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,h,M){i.metric&&(this._mScale=dr("div",h,M)),i.imperial&&(this._iScale=dr("div",h,M))},_update:function(){var i=this._map,h=i.getSize().y/2,M=i.distance(i.containerPointToLatLng([0,h]),i.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(M)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var h=this._getRoundNum(i),M=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,M,h/i)},_updateImperial:function(i){var h=i*3.2808399,M,W,te;h>5280?(M=h/5280,W=this._getRoundNum(M),this._updateScale(this._iScale,W+" mi",W/M)):(te=this._getRoundNum(h),this._updateScale(this._iScale,te+" ft",te/h))},_updateScale:function(i,h,M){i.style.width=Math.round(this.options.maxWidth*M)+"px",i.innerHTML=h},_getRoundNum:function(i){var h=Math.pow(10,(Math.floor(i)+"").length-1),M=i/h;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:1,h*M}}),At=function(i){return new ve(i)},rr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ha=gs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Qt.inlineSvg?rr+" ":"")+"Leaflet</a>"},initialize:function(i){m(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=dr("div","leaflet-control-attribution"),_r(this._container);for(var h in i._layers)i._layers[h].getAttribution&&this.addAttribution(i._layers[h].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var h in this._attributions)this._attributions[h]&&i.push(h);var M=[];this.options.prefix&&M.push(this.options.prefix),i.length&&M.push(i.join(", ")),this._container.innerHTML=M.join(' <span aria-hidden="true">|</span> ')}}});Vr.mergeOptions({attributionControl:!0}),Vr.addInitHook(function(){this.options.attributionControl&&new ha().addTo(this)});var Xa=function(i){return new ha(i)};gs.Layers=Go,gs.Zoom=io,gs.Scale=ve,gs.Attribution=ha,qi.layers=Yo,qi.zoom=fn,qi.scale=At,qi.attribution=Xa;var xs=I.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xs.addTo=function(i,h){return i.addHandler(h,this),this};var kl={Events:F},Cl=Qt.touch?"touchstart mousedown":"mousedown",Ir=$.extend({options:{clickTolerance:3},initialize:function(i,h,M,W){m(this,W),this._element=i,this._dragStartTarget=h||i,this._preventOutline=M},enable:function(){this._enabled||(Cr(this._dragStartTarget,Cl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ir._dragging===this&&this.finishDrag(!0),da(this._dragStartTarget,Cl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!kr(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Ir._dragging===this&&this.finishDrag();return}if(!(Ir._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Ir._dragging=this,this._preventOutline&&ao(this._element),Ns(),Ps(),!this._moving)){this.fire("down");var h=i.touches?i.touches[0]:i,M=_i(this._element);this._startPoint=new q(h.clientX,h.clientY),this._startPos=ls(this._element),this._parentScale=Di(M);var W=i.type==="mousedown";Cr(document,W?"mousemove":"touchmove",this._onMove,this),Cr(document,W?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var h=i.touches&&i.touches.length===1?i.touches[0]:i,M=new q(h.clientX,h.clientY)._subtract(this._startPoint);!M.x&&!M.y||Math.abs(M.x)+Math.abs(M.y)<this.options.clickTolerance||(M.x/=this._parentScale.x,M.y/=this._parentScale.y,qa(i),this._moved||(this.fire("dragstart"),this._moved=!0,Fn(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Fn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(M),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Aa(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){Zr(document.body,"leaflet-dragging"),this._lastTarget&&(Zr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),da(document,"mousemove touchmove",this._onMove,this),da(document,"mouseup touchend touchcancel",this._onUp,this),Eo(),ro();var h=this._moved&&this._moving;this._moving=!1,Ir._dragging=!1,h&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Tl(i,h,M){var W,te=[1,4,2,8],he,ze,it,ht,Xt,qn,Yn,ir;for(he=0,qn=i.length;he<qn;he++)i[he]._code=Co(i[he],h);for(it=0;it<4;it++){for(Yn=te[it],W=[],he=0,qn=i.length,ze=qn-1;he<qn;ze=he++)ht=i[he],Xt=i[ze],ht._code&Yn?Xt._code&Yn||(ir=Lc(Xt,ht,Yn,h,M),ir._code=Co(ir,h),W.push(ir)):(Xt._code&Yn&&(ir=Lc(Xt,ht,Yn,h,M),ir._code=Co(ir,h),W.push(ir)),W.push(ht));i=W}return i}function dc(i,h){var M,W,te,he,ze,it,ht,Xt,qn;if(!i||i.length===0)throw new Error("latlngs not passed");Wa(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Yn=Be([0,0]),ir=me(i),jr=ir.getNorthWest().distanceTo(ir.getSouthWest())*ir.getNorthEast().distanceTo(ir.getNorthWest());jr<1700&&(Yn=ko(i));var ka=i.length,Ua=[];for(M=0;M<ka;M++){var us=Be(i[M]);Ua.push(h.project(Be([us.lat-Yn.lat,us.lng-Yn.lng])))}for(it=ht=Xt=0,M=0,W=ka-1;M<ka;W=M++)te=Ua[M],he=Ua[W],ze=te.y*he.x-he.y*te.x,ht+=(te.x+he.x)*ze,Xt+=(te.y+he.y)*ze,it+=ze*3;it===0?qn=Ua[0]:qn=[ht/it,Xt/it];var js=h.unproject(J(qn));return Be([js.lat+Yn.lat,js.lng+Yn.lng])}function ko(i){for(var h=0,M=0,W=0,te=0;te<i.length;te++){var he=Be(i[te]);h+=he.lat,M+=he.lng,W++}return Be([h/W,M/W])}var vo={__proto__:null,clipPolygon:Tl,polygonCenter:dc,centroid:ko};function Wi(i,h){if(!h||!i.length)return i.slice();var M=h*h;return i=Vs(i,M),i=Pl(i,M),i}function yo(i,h,M){return Math.sqrt(Oa(i,h,M,!0))}function sl(i,h,M){return Oa(i,h,M)}function Pl(i,h){var M=i.length,W=typeof Uint8Array<"u"?Uint8Array:Array,te=new W(M);te[0]=te[M-1]=1,Mc(i,te,h,0,M-1);var he,ze=[];for(he=0;he<M;he++)te[he]&&ze.push(i[he]);return ze}function Mc(i,h,M,W,te){var he=0,ze,it,ht;for(it=W+1;it<=te-1;it++)ht=Oa(i[it],i[W],i[te],!0),ht>he&&(ze=it,he=ht);he>M&&(h[ze]=1,Mc(i,h,M,W,ze),Mc(i,h,M,ze,te))}function Vs(i,h){for(var M=[i[0]],W=1,te=0,he=i.length;W<he;W++)cu(i[W],i[te])>h&&(M.push(i[W]),te=W);return te<he-1&&M.push(i[he-1]),M}var ou;function jc(i,h,M,W,te){var he=W?ou:Co(i,M),ze=Co(h,M),it,ht,Xt;for(ou=ze;;){if(!(he|ze))return[i,h];if(he&ze)return!1;it=he||ze,ht=Lc(i,h,it,M,te),Xt=Co(ht,M),it===he?(i=ht,he=Xt):(h=ht,ze=Xt)}}function Lc(i,h,M,W,te){var he=h.x-i.x,ze=h.y-i.y,it=W.min,ht=W.max,Xt,qn;return M&8?(Xt=i.x+he*(ht.y-i.y)/ze,qn=ht.y):M&4?(Xt=i.x+he*(it.y-i.y)/ze,qn=it.y):M&2?(Xt=ht.x,qn=i.y+ze*(ht.x-i.x)/he):M&1&&(Xt=it.x,qn=i.y+ze*(it.x-i.x)/he),new q(Xt,qn,te)}function Co(i,h){var M=0;return i.x<h.min.x?M|=1:i.x>h.max.x&&(M|=2),i.y<h.min.y?M|=4:i.y>h.max.y&&(M|=8),M}function cu(i,h){var M=h.x-i.x,W=h.y-i.y;return M*M+W*W}function Oa(i,h,M,W){var te=h.x,he=h.y,ze=M.x-te,it=M.y-he,ht=ze*ze+it*it,Xt;return ht>0&&(Xt=((i.x-te)*ze+(i.y-he)*it)/ht,Xt>1?(te=M.x,he=M.y):Xt>0&&(te+=ze*Xt,he+=it*Xt)),ze=i.x-te,it=i.y-he,W?ze*ze+it*it:new q(te,he)}function Wa(i){return!g(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Nl(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Wa(i)}function Dl(i,h){var M,W,te,he,ze,it,ht,Xt;if(!i||i.length===0)throw new Error("latlngs not passed");Wa(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var qn=Be([0,0]),Yn=me(i),ir=Yn.getNorthWest().distanceTo(Yn.getSouthWest())*Yn.getNorthEast().distanceTo(Yn.getNorthWest());ir<1700&&(qn=ko(i));var jr=i.length,ka=[];for(M=0;M<jr;M++){var Ua=Be(i[M]);ka.push(h.project(Be([Ua.lat-qn.lat,Ua.lng-qn.lng])))}for(M=0,W=0;M<jr-1;M++)W+=ka[M].distanceTo(ka[M+1])/2;if(W===0)Xt=ka[0];else for(M=0,he=0;M<jr-1;M++)if(ze=ka[M],it=ka[M+1],te=ze.distanceTo(it),he+=te,he>W){ht=(he-W)/te,Xt=[it.x-ht*(it.x-ze.x),it.y-ht*(it.y-ze.y)];break}var us=h.unproject(J(Xt));return Be([us.lat+qn.lat,us.lng+qn.lng])}var gt={__proto__:null,simplify:Wi,pointToSegmentDistance:yo,closestPointOnSegment:sl,clipSegment:jc,_getEdgeIntersection:Lc,_getBitCode:Co,_sqClosestPointOnSegment:Oa,isFlat:Wa,_flat:Nl,polylineCenter:Dl},To={project:function(i){return new q(i.lng,i.lat)},unproject:function(i){return new Ce(i.y,i.x)},bounds:new be([-180,-90],[180,90])},lr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new be([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var h=Math.PI/180,M=this.R,W=i.lat*h,te=this.R_MINOR/M,he=Math.sqrt(1-te*te),ze=he*Math.sin(W),it=Math.tan(Math.PI/4-W/2)/Math.pow((1-ze)/(1+ze),he/2);return W=-M*Math.log(Math.max(it,1e-10)),new q(i.lng*h*M,W)},unproject:function(i){for(var h=180/Math.PI,M=this.R,W=this.R_MINOR/M,te=Math.sqrt(1-W*W),he=Math.exp(-i.y/M),ze=Math.PI/2-2*Math.atan(he),it=0,ht=.1,Xt;it<15&&Math.abs(ht)>1e-7;it++)Xt=te*Math.sin(ze),Xt=Math.pow((1-Xt)/(1+Xt),te/2),ht=Math.PI/2-2*Math.atan(he*Xt)-ze,ze+=ht;return new Ce(ze*h,i.x*h/M)}},Ic={__proto__:null,LonLat:To,Mercator:lr,SphericalMercator:Ge},Po=l({},Ye,{code:"EPSG:3395",projection:lr,transformation:function(){var i=.5/(Math.PI*lr.R);return Te(i,.5,-i,.5)}()}),Ds=l({},Ye,{code:"EPSG:4326",projection:To,transformation:Te(1/180,1,-1/180,.5)}),fe=l({},_e,{projection:To,transformation:Te(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,h){var M=h.lng-i.lng,W=h.lat-i.lat;return Math.sqrt(M*M+W*W)},infinite:!0});_e.Earth=Ye,_e.EPSG3395=Po,_e.EPSG3857=dt,_e.EPSG900913=yt,_e.EPSG4326=Ds,_e.Simple=fe;var Bn=$.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[b(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[b(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var h=i.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var M=this.getEvents();h.on(M,this),this.once("remove",function(){h.off(M,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Vr.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var h=b(i);return this._layers[h]?this:(this._layers[h]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var h=b(i);return this._layers[h]?(this._loaded&&i.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return b(i)in this._layers},eachLayer:function(i,h){for(var M in this._layers)i.call(h,this._layers[M]);return this},_addLayers:function(i){i=i?g(i)?i:[i]:[];for(var h=0,M=i.length;h<M;h++)this.addLayer(i[h])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[b(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var h=b(i);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,h=-1/0,M=this._getZoomSpan();for(var W in this._zoomBoundLayers){var te=this._zoomBoundLayers[W].options;i=te.minZoom===void 0?i:Math.min(i,te.minZoom),h=te.maxZoom===void 0?h:Math.max(h,te.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=i===1/0?void 0:i,M!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Vn=Bn.extend({initialize:function(i,h){m(this,h),this._layers={};var M,W;if(i)for(M=0,W=i.length;M<W;M++)this.addLayer(i[M])},addLayer:function(i){var h=this.getLayerId(i);return this._layers[h]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var h=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(i){var h=typeof i=="number"?i:this.getLayerId(i);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var h=Array.prototype.slice.call(arguments,1),M,W;for(M in this._layers)W=this._layers[M],W[i]&&W[i].apply(W,h);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,h){for(var M in this._layers)i.call(h,this._layers[M]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return b(i)}}),hc=function(i,h){return new Vn(i,h)},Ma=Vn.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Vn.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Vn.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Se;for(var h in this._layers){var M=this._layers[h];i.extend(M.getBounds?M.getBounds():M.getLatLng())}return i}}),ne=function(i,h){return new Ma(i,h)},Y=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){m(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,h){var M=this._getIconUrl(i);if(!M){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var W=this._createImg(M,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(W,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(W.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),W},_setIconStyles:function(i,h){var M=this.options,W=M[h+"Size"];typeof W=="number"&&(W=[W,W]);var te=J(W),he=J(h==="shadow"&&M.shadowAnchor||M.iconAnchor||te&&te.divideBy(2,!0));i.className="leaflet-marker-"+h+" "+(M.className||""),he&&(i.style.marginLeft=-he.x+"px",i.style.marginTop=-he.y+"px"),te&&(i.style.width=te.x+"px",i.style.height=te.y+"px")},_createImg:function(i,h){return h=h||document.createElement("img"),h.src=i,h},_getIconUrl:function(i){return Qt.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Q(i){return new Y(i)}var ce=Y.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof ce.imagePath!="string"&&(ce.imagePath=this._detectIconPath()),(this.options.imagePath||ce.imagePath)+Y.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var h=function(M,W,te){var he=W.exec(M);return he&&he[te]};return i=h(i,/^url\((['"])?(.+)\1\)$/,2),i&&h(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=dr("div","leaflet-default-icon-path",document.body),h=$n(i,"background-image")||$n(i,"backgroundImage");if(document.body.removeChild(i),h=this._stripUrl(h),h)return h;var M=document.querySelector('link[href$="leaflet.css"]');return M?M.href.substring(0,M.href.length-11-1):""}}),je=xs.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Ir(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Fn(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Zr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var h=this._marker,M=h._map,W=this._marker.options.autoPanSpeed,te=this._marker.options.autoPanPadding,he=ls(h._icon),ze=M.getPixelBounds(),it=M.getPixelOrigin(),ht=Re(ze.min._subtract(it).add(te),ze.max._subtract(it).subtract(te));if(!ht.contains(he)){var Xt=J((Math.max(ht.max.x,he.x)-ht.max.x)/(ze.max.x-ht.max.x)-(Math.min(ht.min.x,he.x)-ht.min.x)/(ze.min.x-ht.min.x),(Math.max(ht.max.y,he.y)-ht.max.y)/(ze.max.y-ht.max.y)-(Math.min(ht.min.y,he.y)-ht.min.y)/(ze.min.y-ht.min.y)).multiplyBy(W);M.panBy(Xt,{animate:!1}),this._draggable._newPos._add(Xt),this._draggable._startPos._add(Xt),Aa(h._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=D(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,i)))},_onDrag:function(i){var h=this._marker,M=h._shadow,W=ls(h._icon),te=h._map.layerPointToLatLng(W);M&&Aa(M,W),h._latlng=te,i.latlng=te,i.oldLatLng=this._oldLatLng,h.fire("move",i).fire("drag",i)},_onDragEnd:function(i){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),at=Bn.extend({options:{icon:new ce,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,h){m(this,h),this._latlng=Be(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var h=this._latlng;return this._latlng=Be(i),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),M=i.icon.createIcon(this._icon),W=!1;M!==this._icon&&(this._icon&&this._removeIcon(),W=!0,i.title&&(M.title=i.title),M.tagName==="IMG"&&(M.alt=i.alt||"")),Fn(M,h),i.keyboard&&(M.tabIndex="0",M.setAttribute("role","button")),this._icon=M,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Cr(M,"focus",this._panOnFocus,this);var te=i.icon.createShadow(this._shadow),he=!1;te!==this._shadow&&(this._removeShadow(),he=!0),te&&(Fn(te,h),te.alt=""),this._shadow=te,i.opacity<1&&this._updateOpacity(),W&&this.getPane().appendChild(this._icon),this._initInteraction(),te&&he&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&da(this._icon,"focus",this._panOnFocus,this),Dn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Dn(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Aa(this._icon,i),this._shadow&&Aa(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var h=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Fn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),je)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new je(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Ca(this._icon,i),this._shadow&&Ca(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var h=this.options.icon.options,M=h.iconSize?J(h.iconSize):J(0,0),W=h.iconAnchor?J(h.iconAnchor):J(0,0);i.panInside(this._latlng,{paddingTopLeft:W,paddingBottomRight:M.subtract(W)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function kt(i,h){return new at(i,h)}var Lt=Bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return m(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),xt=Lt.extend({options:{fill:!0,radius:10},initialize:function(i,h){m(this,h),this._latlng=Be(i),this._radius=this.options.radius},setLatLng:function(i){var h=this._latlng;return this._latlng=Be(i),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var h=i&&i.radius||this._radius;return Lt.prototype.setStyle.call(this,i),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,h=this._radiusY||i,M=this._clickTolerance(),W=[i+M,h+M];this._pxBounds=new be(this._point.subtract(W),this._point.add(W))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zn(i,h){return new xt(i,h)}var Gt=xt.extend({initialize:function(i,h,M){if(typeof h=="number"&&(h=l({},M,{radius:h})),m(this,h),this._latlng=Be(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Se(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Lt.prototype.setStyle,_project:function(){var i=this._latlng.lng,h=this._latlng.lat,M=this._map,W=M.options.crs;if(W.distance===Ye.distance){var te=Math.PI/180,he=this._mRadius/Ye.R/te,ze=M.project([h+he,i]),it=M.project([h-he,i]),ht=ze.add(it).divideBy(2),Xt=M.unproject(ht).lat,qn=Math.acos((Math.cos(he*te)-Math.sin(h*te)*Math.sin(Xt*te))/(Math.cos(h*te)*Math.cos(Xt*te)))/te;(isNaN(qn)||qn===0)&&(qn=he/Math.cos(Math.PI/180*h)),this._point=ht.subtract(M.getPixelOrigin()),this._radius=isNaN(qn)?0:ht.x-M.project([Xt,i-qn]).x,this._radiusY=ht.y-ze.y}else{var Yn=W.unproject(W.project(this._latlng).subtract([this._mRadius,0]));this._point=M.latLngToLayerPoint(this._latlng),this._radius=this._point.x-M.latLngToLayerPoint(Yn).x}this._updateBounds()}});function Gn(i,h,M){return new Gt(i,h,M)}var kn=Lt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,h){m(this,h),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var h=1/0,M=null,W=Oa,te,he,ze=0,it=this._parts.length;ze<it;ze++)for(var ht=this._parts[ze],Xt=1,qn=ht.length;Xt<qn;Xt++){te=ht[Xt-1],he=ht[Xt];var Yn=W(i,te,he,!0);Yn<h&&(h=Yn,M=W(i,te,he))}return M&&(M.distance=Math.sqrt(h)),M},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,h){return h=h||this._defaultShape(),i=Be(i),h.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Se,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Wa(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var h=[],M=Wa(i),W=0,te=i.length;W<te;W++)M?(h[W]=Be(i[W]),this._bounds.extend(h[W])):h[W]=this._convertLatLngs(i[W]);return h},_project:function(){var i=new be;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),h=new q(i,i);this._rawPxBounds&&(this._pxBounds=new be([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(i,h,M){var W=i[0]instanceof Ce,te=i.length,he,ze;if(W){for(ze=[],he=0;he<te;he++)ze[he]=this._map.latLngToLayerPoint(i[he]),M.extend(ze[he]);h.push(ze)}else for(he=0;he<te;he++)this._projectLatlngs(i[he],h,M)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,M,W,te,he,ze,it,ht;for(M=0,te=0,he=this._rings.length;M<he;M++)for(ht=this._rings[M],W=0,ze=ht.length;W<ze-1;W++)it=jc(ht[W],ht[W+1],i,W,!0),it&&(h[te]=h[te]||[],h[te].push(it[0]),(it[1]!==ht[W+1]||W===ze-2)&&(h[te].push(it[1]),te++))}},_simplifyPoints:function(){for(var i=this._parts,h=this.options.smoothFactor,M=0,W=i.length;M<W;M++)i[M]=Wi(i[M],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,h){var M,W,te,he,ze,it,ht=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(M=0,he=this._parts.length;M<he;M++)for(it=this._parts[M],W=0,ze=it.length,te=ze-1;W<ze;te=W++)if(!(!h&&W===0)&&yo(i,it[te],it[W])<=ht)return!0;return!1}});function sa(i,h){return new kn(i,h)}kn._flat=Nl;var Jr=kn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var h=kn.prototype._convertLatLngs.call(this,i),M=h.length;return M>=2&&h[0]instanceof Ce&&h[0].equals(h[M-1])&&h.pop(),h},_setLatLngs:function(i){kn.prototype._setLatLngs.call(this,i),Wa(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Wa(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,h=this.options.weight,M=new q(h,h);if(i=new be(i.min.subtract(M),i.max.add(M)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var W=0,te=this._rings.length,he;W<te;W++)he=Tl(this._rings[W],i,!0),he.length&&this._parts.push(he)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var h=!1,M,W,te,he,ze,it,ht,Xt;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(he=0,ht=this._parts.length;he<ht;he++)for(M=this._parts[he],ze=0,Xt=M.length,it=Xt-1;ze<Xt;it=ze++)W=M[ze],te=M[it],W.y>i.y!=te.y>i.y&&i.x<(te.x-W.x)*(i.y-W.y)/(te.y-W.y)+W.x&&(h=!h);return h||kn.prototype._containsPoint.call(this,i,!0)}});function pa(i,h){return new Jr(i,h)}var ia=Ma.extend({initialize:function(i,h){m(this,h),this._layers={},i&&this.addData(i)},addData:function(i){var h=g(i)?i:i.features,M,W,te;if(h){for(M=0,W=h.length;M<W;M++)te=h[M],(te.geometries||te.geometry||te.features||te.coordinates)&&this.addData(te);return this}var he=this.options;if(he.filter&&!he.filter(i))return this;var ze=$i(i,he);return ze?(ze.feature=di(i),ze.defaultOptions=ze.options,this.resetStyle(ze),he.onEachFeature&&he.onEachFeature(i,ze),this.addLayer(ze)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=l({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(h){this._setLayerStyle(h,i)},this)},_setLayerStyle:function(i,h){i.setStyle&&(typeof h=="function"&&(h=h(i.feature)),i.setStyle(h))}});function $i(i,h){var M=i.type==="Feature"?i.geometry:i,W=M?M.coordinates:null,te=[],he=h&&h.pointToLayer,ze=h&&h.coordsToLatLng||bi,it,ht,Xt,qn;if(!W&&!M)return null;switch(M.type){case"Point":return it=ze(W),Zi(he,i,it,h);case"MultiPoint":for(Xt=0,qn=W.length;Xt<qn;Xt++)it=ze(W[Xt]),te.push(Zi(he,i,it,h));return new Ma(te);case"LineString":case"MultiLineString":return ht=_o(W,M.type==="LineString"?0:1,ze),new kn(ht,h);case"Polygon":case"MultiPolygon":return ht=_o(W,M.type==="Polygon"?1:2,ze),new Jr(ht,h);case"GeometryCollection":for(Xt=0,qn=M.geometries.length;Xt<qn;Xt++){var Yn=$i({geometry:M.geometries[Xt],type:"Feature",properties:i.properties},h);Yn&&te.push(Yn)}return new Ma(te);case"FeatureCollection":for(Xt=0,qn=M.features.length;Xt<qn;Xt++){var ir=$i(M.features[Xt],h);ir&&te.push(ir)}return new Ma(te);default:throw new Error("Invalid GeoJSON object.")}}function Zi(i,h,M,W){return i?i(h,M):new at(M,W&&W.markersInheritOptions&&W)}function bi(i){return new Ce(i[1],i[0],i[2])}function _o(i,h,M){for(var W=[],te=0,he=i.length,ze;te<he;te++)ze=h?_o(i[te],h-1,M):(M||bi)(i[te]),W.push(ze);return W}function bo(i,h){return i=Be(i),i.alt!==void 0?[y(i.lng,h),y(i.lat,h),y(i.alt,h)]:[y(i.lng,h),y(i.lat,h)]}function No(i,h,M,W){for(var te=[],he=0,ze=i.length;he<ze;he++)te.push(h?No(i[he],Wa(i[he])?0:h-1,M,W):bo(i[he],W));return!h&&M&&te.length>0&&te.push(te[0].slice()),te}function ei(i,h){return i.feature?l({},i.feature,{geometry:h}):di(h)}function di(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Do={toGeoJSON:function(i){return ei(this,{type:"Point",coordinates:bo(this.getLatLng(),i)})}};at.include(Do),Gt.include(Do),xt.include(Do),kn.include({toGeoJSON:function(i){var h=!Wa(this._latlngs),M=No(this._latlngs,h?1:0,!1,i);return ei(this,{type:(h?"Multi":"")+"LineString",coordinates:M})}}),Jr.include({toGeoJSON:function(i){var h=!Wa(this._latlngs),M=h&&!Wa(this._latlngs[0]),W=No(this._latlngs,M?2:h?1:0,!0,i);return h||(W=[W]),ei(this,{type:(M?"Multi":"")+"Polygon",coordinates:W})}}),Vn.include({toMultiPoint:function(i){var h=[];return this.eachLayer(function(M){h.push(M.toGeoJSON(i).geometry.coordinates)}),ei(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(i){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(i);var M=h==="GeometryCollection",W=[];return this.eachLayer(function(te){if(te.toGeoJSON){var he=te.toGeoJSON(i);if(M)W.push(he.geometry);else{var ze=di(he);ze.type==="FeatureCollection"?W.push.apply(W,ze.features):W.push(ze)}}}),M?ei(this,{geometries:W,type:"GeometryCollection"}):{type:"FeatureCollection",features:W}}});function Bc(i,h){return new ia(i,h)}var pc=Bc,hi=Bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,h,M){this._url=i,this._bounds=me(h),m(this,M)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Fn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Dn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&$r(this._image),this},bringToBack:function(){return this._map&&Er(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=me(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",h=this._image=i?this._url:dr("img");if(Fn(h,"leaflet-image-layer"),this._zoomAnimated&&Fn(h,"leaflet-zoom-animated"),this.options.className&&Fn(h,this.options.className),h.onselectstart=f,h.onmousemove=f,h.onload=C(this.fire,this,"load"),h.onerror=C(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(i){var h=this._map.getZoomScale(i.zoom),M=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;ss(this._image,M,h)},_reset:function(){var i=this._image,h=new be(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),M=h.getSize();Aa(i,h.min),i.style.width=M.x+"px",i.style.height=M.y+"px"},_updateOpacity:function(){Ca(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),oo=function(i,h,M){return new hi(i,h,M)},Ko=hi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",h=this._image=i?this._url:dr("video");if(Fn(h,"leaflet-image-layer"),this._zoomAnimated&&Fn(h,"leaflet-zoom-animated"),this.options.className&&Fn(h,this.options.className),h.onselectstart=f,h.onmousemove=f,h.onloadeddata=C(this.fire,this,"load"),i){for(var M=h.getElementsByTagName("source"),W=[],te=0;te<M.length;te++)W.push(M[te].src);this._url=M.length>0?W:[h.src];return}g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var he=0;he<this._url.length;he++){var ze=dr("source");ze.src=this._url[he],h.appendChild(ze)}}});function zc(i,h,M){return new Ko(i,h,M)}var Gi=hi.extend({_initImage:function(){var i=this._image=this._url;Fn(i,"leaflet-image-layer"),this._zoomAnimated&&Fn(i,"leaflet-zoom-animated"),this.options.className&&Fn(i,this.options.className),i.onselectstart=f,i.onmousemove=f}});function fc(i,h,M){return new Gi(i,h,M)}var pi=Bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,h){i&&(i instanceof Ce||g(i))?(this._latlng=Be(i),m(this,h)):(m(this,i),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Ca(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Ca(this._container,1),this.bringToFront(),this.options.interactive&&(Fn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Ca(this._container,0),this._removeTimeout=setTimeout(C(Dn,void 0,this._container),200)):Dn(this._container),this.options.interactive&&(Zr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Be(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&$r(this._container),this},bringToBack:function(){return this._map&&Er(this._container),this},_prepareOpen:function(i){var h=this._source;if(!h._map)return!1;if(h instanceof Ma){h=null;var M=this._source._layers;for(var W in M)if(M[W]._map){h=M[W];break}if(!h)return!1;this._source=h}if(!i)if(h.getCenter)i=h.getCenter();else if(h.getLatLng)i=h.getLatLng();else if(h.getBounds)i=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")i.innerHTML=h;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),h=J(this.options.offset),M=this._getAnchor();this._zoomAnimated?Aa(this._container,i.add(M)):h=h.add(i).add(M);var W=this._containerBottom=-h.y,te=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=W+"px",this._container.style.left=te+"px"}},_getAnchor:function(){return[0,0]}});Vr.include({_initOverlay:function(i,h,M,W){var te=h;return te instanceof i||(te=new i(W).setContent(h)),M&&te.setLatLng(M),te}}),Bn.include({_initOverlay:function(i,h,M,W){var te=M;return te instanceof i?(m(te,W),te._source=this):(te=h&&!W?h:new i(W,this),te.setContent(M)),te}});var Yi=pi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,pi.prototype.openOn.call(this,i)},onAdd:function(i){pi.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Lt||this._source.on("preclick",ci))},onRemove:function(i){pi.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Lt||this._source.off("preclick",ci))},getEvents:function(){var i=pi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",h=this._container=dr("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),M=this._wrapper=dr("div",i+"-content-wrapper",h);if(this._contentNode=dr("div",i+"-content",M),_r(h),li(this._contentNode),Cr(h,"contextmenu",ci),this._tipContainer=dr("div",i+"-tip-container",h),this._tip=dr("div",i+"-tip",this._tipContainer),this.options.closeButton){var W=this._closeButton=dr("a",i+"-close-button",h);W.setAttribute("role","button"),W.setAttribute("aria-label","Close popup"),W.href="#close",W.innerHTML='<span aria-hidden="true">&#215;</span>',Cr(W,"click",function(te){qa(te),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,h=i.style;h.width="",h.whiteSpace="nowrap";var M=i.offsetWidth;M=Math.min(M,this.options.maxWidth),M=Math.max(M,this.options.minWidth),h.width=M+1+"px",h.whiteSpace="",h.height="";var W=i.offsetHeight,te=this.options.maxHeight,he="leaflet-popup-scrolled";te&&W>te?(h.height=te+"px",Fn(i,he)):Zr(i,he),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var h=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),M=this._getAnchor();Aa(this._container,h.add(M))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,h=parseInt($n(this._container,"marginBottom"),10)||0,M=this._container.offsetHeight+h,W=this._containerWidth,te=new q(this._containerLeft,-M-this._containerBottom);te._add(ls(this._container));var he=i.layerPointToContainerPoint(te),ze=J(this.options.autoPanPadding),it=J(this.options.autoPanPaddingTopLeft||ze),ht=J(this.options.autoPanPaddingBottomRight||ze),Xt=i.getSize(),qn=0,Yn=0;he.x+W+ht.x>Xt.x&&(qn=he.x+W-Xt.x+ht.x),he.x-qn-it.x<0&&(qn=he.x-it.x),he.y+M+ht.y>Xt.y&&(Yn=he.y+M-Xt.y+ht.y),he.y-Yn-it.y<0&&(Yn=he.y-it.y),(qn||Yn)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([qn,Yn]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),il=function(i,h){return new Yi(i,h)};Vr.mergeOptions({closePopupOnClick:!0}),Vr.include({openPopup:function(i,h,M){return this._initOverlay(Yi,i,h,M).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Bn.include({bindPopup:function(i,h){return this._popup=this._initOverlay(Yi,this._popup,i,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Ma||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Xs(i);var h=i.layer||i.target;if(this._popup._source===h&&!(h instanceof Lt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=h,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Qo=pi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){pi.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){pi.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=pi.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",h=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=dr("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+b(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var h,M,W=this._map,te=this._container,he=W.latLngToContainerPoint(W.getCenter()),ze=W.layerPointToContainerPoint(i),it=this.options.direction,ht=te.offsetWidth,Xt=te.offsetHeight,qn=J(this.options.offset),Yn=this._getAnchor();it==="top"?(h=ht/2,M=Xt):it==="bottom"?(h=ht/2,M=0):it==="center"?(h=ht/2,M=Xt/2):it==="right"?(h=0,M=Xt/2):it==="left"?(h=ht,M=Xt/2):ze.x<he.x?(it="right",h=0,M=Xt/2):(it="left",h=ht+(qn.x+Yn.x)*2,M=Xt/2),i=i.subtract(J(h,M,!0)).add(qn).add(Yn),Zr(te,"leaflet-tooltip-right"),Zr(te,"leaflet-tooltip-left"),Zr(te,"leaflet-tooltip-top"),Zr(te,"leaflet-tooltip-bottom"),Fn(te,"leaflet-tooltip-"+it),Aa(te,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Ca(this._container,i)},_animateZoom:function(i){var h=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(h)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mc=function(i,h){return new Qo(i,h)};Vr.include({openTooltip:function(i,h,M){return this._initOverlay(Qo,i,h,M).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Bn.include({bindTooltip:function(i,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qo,this._tooltip,i,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var h=i?"off":"on",M={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?M.add=this._openTooltip:(M.mouseover=this._openTooltip,M.mouseout=this.closeTooltip,M.click=this._openTooltip,this._map?this._addFocusListeners():M.add=this._addFocusListeners),this._tooltip.options.sticky&&(M.mousemove=this._moveTooltip),this[h](M),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Ma||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var h=typeof i.getElement=="function"&&i.getElement();h&&(Cr(h,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Cr(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var h=typeof i.getElement=="function"&&i.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var h=i.latlng,M,W;this._tooltip.options.sticky&&i.originalEvent&&(M=this._map.mouseEventToContainerPoint(i.originalEvent),W=this._map.containerPointToLayerPoint(M),h=this._map.layerPointToLatLng(W)),this._tooltip.setLatLng(h)}});var Ao=Y.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var h=i&&i.tagName==="DIV"?i:document.createElement("div"),M=this.options;if(M.html instanceof Element?(Hn(h),h.appendChild(M.html)):h.innerHTML=M.html!==!1?M.html:"",M.bgPos){var W=J(M.bgPos);h.style.backgroundPosition=-W.x+"px "+-W.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Xo(i){return new Ao(i)}Y.Default=ce;var qs=Bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Qt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){m(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Dn(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&($r(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Er(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof q?i:new q(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var h=this.getPane().children,M=-i(-1/0,1/0),W=0,te=h.length,he;W<te;W++)he=h[W].style.zIndex,h[W]!==this._container&&he&&(M=i(M,+he));isFinite(M)&&(this.options.zIndex=M+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Qt.ielt9){Ca(this._container,this.options.opacity);var i=+new Date,h=!1,M=!1;for(var W in this._tiles){var te=this._tiles[W];if(!(!te.current||!te.loaded)){var he=Math.min(1,(i-te.loaded)/200);Ca(te.el,he),he<1?h=!0:(te.active?M=!0:this._onOpaqueTile(te),te.active=!0)}}M&&!this._noPrune&&this._pruneTiles(),h&&(O(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=dr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,h=this.options.maxZoom;if(i!==void 0){for(var M in this._levels)M=Number(M),this._levels[M].el.children.length||M===i?(this._levels[M].el.style.zIndex=h-Math.abs(i-M),this._onUpdateLevel(M)):(Dn(this._levels[M].el),this._removeTilesAtZoom(M),this._onRemoveLevel(M),delete this._levels[M]);var W=this._levels[i],te=this._map;return W||(W=this._levels[i]={},W.el=dr("div","leaflet-tile-container leaflet-zoom-animated",this._container),W.el.style.zIndex=h,W.origin=te.project(te.unproject(te.getPixelOrigin()),i).round(),W.zoom=i,this._setZoomTransform(W,te.getCenter(),te.getZoom()),f(W.el.offsetWidth),this._onCreateLevel(W)),this._level=W,W}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var i,h,M=this._map.getZoom();if(M>this.options.maxZoom||M<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)h=this._tiles[i],h.retain=h.current;for(i in this._tiles)if(h=this._tiles[i],h.current&&!h.active){var W=h.coords;this._retainParent(W.x,W.y,W.z,W.z-5)||this._retainChildren(W.x,W.y,W.z,W.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var h in this._tiles)this._tiles[h].coords.z===i&&this._removeTile(h)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Dn(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,h,M,W){var te=Math.floor(i/2),he=Math.floor(h/2),ze=M-1,it=new q(+te,+he);it.z=+ze;var ht=this._tileCoordsToKey(it),Xt=this._tiles[ht];return Xt&&Xt.active?(Xt.retain=!0,!0):(Xt&&Xt.loaded&&(Xt.retain=!0),ze>W?this._retainParent(te,he,ze,W):!1)},_retainChildren:function(i,h,M,W){for(var te=2*i;te<2*i+2;te++)for(var he=2*h;he<2*h+2;he++){var ze=new q(te,he);ze.z=M+1;var it=this._tileCoordsToKey(ze),ht=this._tiles[it];if(ht&&ht.active){ht.retain=!0;continue}else ht&&ht.loaded&&(ht.retain=!0);M+1<W&&this._retainChildren(te,he,M+1,W)}},_resetView:function(i){var h=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var h=this.options;return h.minNativeZoom!==void 0&&i<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<i?h.maxNativeZoom:i},_setView:function(i,h,M,W){var te=Math.round(h);this.options.maxZoom!==void 0&&te>this.options.maxZoom||this.options.minZoom!==void 0&&te<this.options.minZoom?te=void 0:te=this._clampZoom(te);var he=this.options.updateWhenZooming&&te!==this._tileZoom;(!W||he)&&(this._tileZoom=te,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),te!==void 0&&this._update(i),M||this._pruneTiles(),this._noPrune=!!M),this._setZoomTransforms(i,h)},_setZoomTransforms:function(i,h){for(var M in this._levels)this._setZoomTransform(this._levels[M],i,h)},_setZoomTransform:function(i,h,M){var W=this._map.getZoomScale(M,i.zoom),te=i.origin.multiplyBy(W).subtract(this._map._getNewPixelOrigin(h,M)).round();Qt.any3d?ss(i.el,te,W):Aa(i.el,te)},_resetGrid:function(){var i=this._map,h=i.options.crs,M=this._tileSize=this.getTileSize(),W=this._tileZoom,te=this._map.getPixelWorldBounds(this._tileZoom);te&&(this._globalTileRange=this._pxBoundsToTileRange(te)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,h.wrapLng[0]],W).x/M.x),Math.ceil(i.project([0,h.wrapLng[1]],W).x/M.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([h.wrapLat[0],0],W).y/M.x),Math.ceil(i.project([h.wrapLat[1],0],W).y/M.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var h=this._map,M=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),W=h.getZoomScale(M,this._tileZoom),te=h.project(i,this._tileZoom).floor(),he=h.getSize().divideBy(W*2);return new be(te.subtract(he),te.add(he))},_update:function(i){var h=this._map;if(h){var M=this._clampZoom(h.getZoom());if(i===void 0&&(i=h.getCenter()),this._tileZoom!==void 0){var W=this._getTiledPixelBounds(i),te=this._pxBoundsToTileRange(W),he=te.getCenter(),ze=[],it=this.options.keepBuffer,ht=new be(te.getBottomLeft().subtract([it,-it]),te.getTopRight().add([it,-it]));if(!(isFinite(te.min.x)&&isFinite(te.min.y)&&isFinite(te.max.x)&&isFinite(te.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Xt in this._tiles){var qn=this._tiles[Xt].coords;(qn.z!==this._tileZoom||!ht.contains(new q(qn.x,qn.y)))&&(this._tiles[Xt].current=!1)}if(Math.abs(M-this._tileZoom)>1){this._setView(i,M);return}for(var Yn=te.min.y;Yn<=te.max.y;Yn++)for(var ir=te.min.x;ir<=te.max.x;ir++){var jr=new q(ir,Yn);if(jr.z=this._tileZoom,!!this._isValidTile(jr)){var ka=this._tiles[this._tileCoordsToKey(jr)];ka?ka.current=!0:ze.push(jr)}}if(ze.sort(function(us,js){return us.distanceTo(he)-js.distanceTo(he)}),ze.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ua=document.createDocumentFragment();for(ir=0;ir<ze.length;ir++)this._addTile(ze[ir],Ua);this._level.el.appendChild(Ua)}}}},_isValidTile:function(i){var h=this._map.options.crs;if(!h.infinite){var M=this._globalTileRange;if(!h.wrapLng&&(i.x<M.min.x||i.x>M.max.x)||!h.wrapLat&&(i.y<M.min.y||i.y>M.max.y))return!1}if(!this.options.bounds)return!0;var W=this._tileCoordsToBounds(i);return me(this.options.bounds).overlaps(W)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var h=this._map,M=this.getTileSize(),W=i.scaleBy(M),te=W.add(M),he=h.unproject(W,i.z),ze=h.unproject(te,i.z);return[he,ze]},_tileCoordsToBounds:function(i){var h=this._tileCoordsToNwSe(i),M=new Se(h[0],h[1]);return this.options.noWrap||(M=this._map.wrapLatLngBounds(M)),M},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var h=i.split(":"),M=new q(+h[0],+h[1]);return M.z=+h[2],M},_removeTile:function(i){var h=this._tiles[i];h&&(Dn(h.el),delete this._tiles[i],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Fn(i,"leaflet-tile");var h=this.getTileSize();i.style.width=h.x+"px",i.style.height=h.y+"px",i.onselectstart=f,i.onmousemove=f,Qt.ielt9&&this.options.opacity<1&&Ca(i,this.options.opacity)},_addTile:function(i,h){var M=this._getTilePos(i),W=this._tileCoordsToKey(i),te=this.createTile(this._wrapCoords(i),C(this._tileReady,this,i));this._initTile(te),this.createTile.length<2&&D(C(this._tileReady,this,i,null,te)),Aa(te,M),this._tiles[W]={el:te,coords:i,current:!0},h.appendChild(te),this.fire("tileloadstart",{tile:te,coords:i})},_tileReady:function(i,h,M){h&&this.fire("tileerror",{error:h,tile:M,coords:i});var W=this._tileCoordsToKey(i);M=this._tiles[W],M&&(M.loaded=+new Date,this._map._fadeAnimated?(Ca(M.el,0),O(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(M.active=!0,this._pruneTiles()),h||(Fn(M.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:M.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Qt.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(C(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var h=new q(this._wrapX?x(i.x,this._wrapX):i.x,this._wrapY?x(i.y,this._wrapY):i.y);return h.z=i.z,h},_pxBoundsToTileRange:function(i){var h=this.getTileSize();return new be(i.min.unscaleBy(h).floor(),i.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function As(i){return new qs(i)}var Ai=qs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,h){this._url=i,h=m(this,h),h.detectRetina&&Qt.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,h){return this._url===i&&h===void 0&&(h=!0),this._url=i,h||this.redraw(),this},createTile:function(i,h){var M=document.createElement("img");return Cr(M,"load",C(this._tileOnLoad,this,h,M)),Cr(M,"error",C(this._tileOnError,this,h,M)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(M.referrerPolicy=this.options.referrerPolicy),M.alt="",M.src=this.getTileUrl(i),M},getTileUrl:function(i){var h={r:Qt.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var M=this._globalTileRange.max.y-i.y;this.options.tms&&(h.y=M),h["-y"]=M}return U(this._url,l(h,this.options))},_tileOnLoad:function(i,h){Qt.ielt9?setTimeout(C(i,this,null,h),0):i(null,h)},_tileOnError:function(i,h,M){var W=this.options.errorTileUrl;W&&h.getAttribute("src")!==W&&(h.src=W),i(M,h)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,h=this.options.maxZoom,M=this.options.zoomReverse,W=this.options.zoomOffset;return M&&(i=h-i),i+W},_getSubdomain:function(i){var h=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var i,h;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(h=this._tiles[i].el,h.onload=f,h.onerror=f,!h.complete)){h.src=P;var M=this._tiles[i].coords;Dn(h),delete this._tiles[i],this.fire("tileabort",{tile:h,coords:M})}},_removeTile:function(i){var h=this._tiles[i];if(h)return h.el.setAttribute("src",P),qs.prototype._removeTile.call(this,i)},_tileReady:function(i,h,M){if(!(!this._map||M&&M.getAttribute("src")===P))return qs.prototype._tileReady.call(this,i,h,M)}});function vs(i,h){return new Ai(i,h)}var Os=Ai.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,h){this._url=i;var M=l({},this.defaultWmsParams);for(var W in h)W in this.options||(M[W]=h[W]);h=m(this,h);var te=h.detectRetina&&Qt.retina?2:1,he=this.getTileSize();M.width=he.x*te,M.height=he.y*te,this.wmsParams=M},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Ai.prototype.onAdd.call(this,i)},getTileUrl:function(i){var h=this._tileCoordsToNwSe(i),M=this._crs,W=Re(M.project(h[0]),M.project(h[1])),te=W.min,he=W.max,ze=(this._wmsVersion>=1.3&&this._crs===Ds?[te.y,te.x,he.y,he.x]:[te.x,te.y,he.x,he.y]).join(","),it=Ai.prototype.getTileUrl.call(this,i);return it+k(this.wmsParams,it,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ze},setParams:function(i,h){return l(this.wmsParams,i),h||this.redraw(),this}});function xo(i,h){return new Os(i,h)}Ai.WMS=Os,vs.wms=xo;var fi=Bn.extend({options:{padding:.1},initialize:function(i){m(this,i),b(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Fn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,h){var M=this._map.getZoomScale(h,this._zoom),W=this._map.getSize().multiplyBy(.5+this.options.padding),te=this._map.project(this._center,h),he=W.multiplyBy(-M).add(te).subtract(this._map._getNewPixelOrigin(i,h));Qt.any3d?ss(this._container,he,M):Aa(this._container,he)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,h=this._map.getSize(),M=this._map.containerPointToLayerPoint(h.multiplyBy(-i)).round();this._bounds=new be(M,M.add(h.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Oo=fi.extend({options:{tolerance:0},getEvents:function(){var i=fi.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Cr(i,"mousemove",this._onMouseMove,this),Cr(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Cr(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,Dn(this._container),da(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var h in this._layers)i=this._layers[h],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fi.prototype._update.call(this);var i=this._bounds,h=this._container,M=i.getSize(),W=Qt.retina?2:1;Aa(h,i.min),h.width=W*M.x,h.height=W*M.y,h.style.width=M.x+"px",h.style.height=M.y+"px",Qt.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){fi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[b(i)]=i;var h=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var h=i._order,M=h.next,W=h.prev;M?M.prev=W:this._drawLast=W,W?W.next=M:this._drawFirst=M,delete i._order,delete this._layers[b(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var h=i.options.dashArray.split(/[, ]+/),M=[],W,te;for(te=0;te<h.length;te++){if(W=Number(h[te]),isNaN(W))return;M.push(W)}i.options._dashArray=M}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var h=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new be,this._redrawBounds.extend(i._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(i._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var h=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,h=this._redrawBounds;if(this._ctx.save(),h){var M=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,M.x,M.y),this._ctx.clip()}this._drawing=!0;for(var W=this._drawFirst;W;W=W.next)i=W.layer,(!h||i._pxBounds&&i._pxBounds.intersects(h))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,h){if(this._drawing){var M,W,te,he,ze=i._parts,it=ze.length,ht=this._ctx;if(it){for(ht.beginPath(),M=0;M<it;M++){for(W=0,te=ze[M].length;W<te;W++)he=ze[M][W],ht[W?"lineTo":"moveTo"](he.x,he.y);h&&ht.closePath()}this._fillStroke(ht,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var h=i._point,M=this._ctx,W=Math.max(Math.round(i._radius),1),te=(Math.max(Math.round(i._radiusY),1)||W)/W;te!==1&&(M.save(),M.scale(1,te)),M.beginPath(),M.arc(h.x,h.y/te,W,0,Math.PI*2,!1),te!==1&&M.restore(),this._fillStroke(M,i)}},_fillStroke:function(i,h){var M=h.options;M.fill&&(i.globalAlpha=M.fillOpacity,i.fillStyle=M.fillColor||M.color,i.fill(M.fillRule||"evenodd")),M.stroke&&M.weight!==0&&(i.setLineDash&&i.setLineDash(h.options&&h.options._dashArray||[]),i.globalAlpha=M.opacity,i.lineWidth=M.weight,i.strokeStyle=M.color,i.lineCap=M.lineCap,i.lineJoin=M.lineJoin,i.stroke())},_onClick:function(i){for(var h=this._map.mouseEventToLayerPoint(i),M,W,te=this._drawFirst;te;te=te.next)M=te.layer,M.options.interactive&&M._containsPoint(h)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(M))&&(W=M);this._fireEvent(W?[W]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,h)}},_handleMouseOut:function(i){var h=this._hoveredLayer;h&&(Zr(this._container,"leaflet-interactive"),this._fireEvent([h],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,h){if(!this._mouseHoverThrottled){for(var M,W,te=this._drawFirst;te;te=te.next)M=te.layer,M.options.interactive&&M._containsPoint(h)&&(W=M);W!==this._hoveredLayer&&(this._handleMouseOut(i),W&&(Fn(this._container,"leaflet-interactive"),this._fireEvent([W],i,"mouseover"),this._hoveredLayer=W)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(C(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,h,M){this._map._fireDOMEvent(h,M||h.type,i)},_bringToFront:function(i){var h=i._order;if(h){var M=h.next,W=h.prev;if(M)M.prev=W;else return;W?W.next=M:M&&(this._drawFirst=M),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(i)}},_bringToBack:function(i){var h=i._order;if(h){var M=h.next,W=h.prev;if(W)W.next=M;else return;M?M.prev=W:W&&(this._drawLast=W),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(i)}}});function Ms(i){return Qt.canvas?new Oo(i):null}var wo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),co={_initContainer:function(){this._container=dr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fi.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var h=i._container=wo("shape");Fn(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",i._path=wo("path"),h.appendChild(i._path),this._updateStyle(i),this._layers[b(i)]=i},_addPath:function(i){var h=i._container;this._container.appendChild(h),i.options.interactive&&i.addInteractiveTarget(h)},_removePath:function(i){var h=i._container;Dn(h),i.removeInteractiveTarget(h),delete this._layers[b(i)]},_updateStyle:function(i){var h=i._stroke,M=i._fill,W=i.options,te=i._container;te.stroked=!!W.stroke,te.filled=!!W.fill,W.stroke?(h||(h=i._stroke=wo("stroke")),te.appendChild(h),h.weight=W.weight+"px",h.color=W.color,h.opacity=W.opacity,W.dashArray?h.dashStyle=g(W.dashArray)?W.dashArray.join(" "):W.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=W.lineCap.replace("butt","flat"),h.joinstyle=W.lineJoin):h&&(te.removeChild(h),i._stroke=null),W.fill?(M||(M=i._fill=wo("fill")),te.appendChild(M),M.color=W.fillColor||W.color,M.opacity=W.fillOpacity):M&&(te.removeChild(M),i._fill=null)},_updateCircle:function(i){var h=i._point.round(),M=Math.round(i._radius),W=Math.round(i._radiusY||M);this._setPath(i,i._empty()?"M0 0":"AL "+h.x+","+h.y+" "+M+","+W+" 0,"+65535*360)},_setPath:function(i,h){i._path.v=h},_bringToFront:function(i){$r(i._container)},_bringToBack:function(i){Er(i._container)}},Jo=Qt.vml?wo:on,Oi=fi.extend({_initContainer:function(){this._container=Jo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Jo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Dn(this._container),da(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fi.prototype._update.call(this);var i=this._bounds,h=i.getSize(),M=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,M.setAttribute("width",h.x),M.setAttribute("height",h.y)),Aa(M,i.min),M.setAttribute("viewBox",[i.min.x,i.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(i){var h=i._path=Jo("path");i.options.className&&Fn(h,i.options.className),i.options.interactive&&Fn(h,"leaflet-interactive"),this._updateStyle(i),this._layers[b(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Dn(i._path),i.removeInteractiveTarget(i._path),delete this._layers[b(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var h=i._path,M=i.options;h&&(M.stroke?(h.setAttribute("stroke",M.color),h.setAttribute("stroke-opacity",M.opacity),h.setAttribute("stroke-width",M.weight),h.setAttribute("stroke-linecap",M.lineCap),h.setAttribute("stroke-linejoin",M.lineJoin),M.dashArray?h.setAttribute("stroke-dasharray",M.dashArray):h.removeAttribute("stroke-dasharray"),M.dashOffset?h.setAttribute("stroke-dashoffset",M.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),M.fill?(h.setAttribute("fill",M.fillColor||M.color),h.setAttribute("fill-opacity",M.fillOpacity),h.setAttribute("fill-rule",M.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(i,h){this._setPath(i,ln(i._parts,h))},_updateCircle:function(i){var h=i._point,M=Math.max(Math.round(i._radius),1),W=Math.max(Math.round(i._radiusY),1)||M,te="a"+M+","+W+" 0 1,0 ",he=i._empty()?"M0 0":"M"+(h.x-M)+","+h.y+te+M*2+",0 "+te+-M*2+",0 ";this._setPath(i,he)},_setPath:function(i,h){i._path.setAttribute("d",h)},_bringToFront:function(i){$r(i._path)},_bringToBack:function(i){Er(i._path)}});Qt.vml&&Oi.include(co);function Mo(i){return Qt.svg||Qt.vml?new Oi(i):null}Vr.include({getRenderer:function(i){var h=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var h=this._paneRenderers[i];return h===void 0&&(h=this._createRenderer({pane:i}),this._paneRenderers[i]=h),h},_createRenderer:function(i){return this.options.preferCanvas&&Ms(i)||Mo(i)}});var Al=Jr.extend({initialize:function(i,h){Jr.prototype.initialize.call(this,this._boundsToLatLngs(i),h)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=me(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Ta(i,h){return new Al(i,h)}Oi.create=Jo,Oi.pointsToPath=ln,ia.geometryToLayer=$i,ia.coordsToLatLng=bi,ia.coordsToLatLngs=_o,ia.latLngToCoords=bo,ia.latLngsToCoords=No,ia.getFeature=ei,ia.asFeature=di,Vr.mergeOptions({boxZoom:!0});var ec=xs.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Cr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){da(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Dn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ps(),Ns(),this._startPoint=this._map.mouseEventToContainerPoint(i),Cr(document,{contextmenu:Xs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=dr("div","leaflet-zoom-box",this._container),Fn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var h=new be(this._point,this._startPoint),M=h.getSize();Aa(this._box,h.min),this._box.style.width=M.x+"px",this._box.style.height=M.y+"px"},_finish:function(){this._moved&&(Dn(this._box),Zr(this._container,"leaflet-crosshair")),ro(),Eo(),da(document,{contextmenu:Xs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(C(this._resetState,this),0);var h=new Se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Vr.addInitHook("addHandler","boxZoom",ec),Vr.mergeOptions({doubleClickZoom:!0});var Ki=xs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var h=this._map,M=h.getZoom(),W=h.options.zoomDelta,te=i.originalEvent.shiftKey?M-W:M+W;h.options.doubleClickZoom==="center"?h.setZoom(te):h.setZoomAround(i.containerPoint,te)}});Vr.addInitHook("addHandler","doubleClickZoom",Ki),Vr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Uc=xs.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Ir(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Fn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Zr(this._map._container,"leaflet-grab"),Zr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=me(this._map.options.maxBounds);this._offsetLimit=Re(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var h=this._lastTime=+new Date,M=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(M),this._times.push(h),this._prunePositions(h)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,h){return i-(i-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;i.x<h.min.x&&(i.x=this._viscousLimit(i.x,h.min.x)),i.y<h.min.y&&(i.y=this._viscousLimit(i.y,h.min.y)),i.x>h.max.x&&(i.x=this._viscousLimit(i.x,h.max.x)),i.y>h.max.y&&(i.y=this._viscousLimit(i.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,h=Math.round(i/2),M=this._initialWorldOffset,W=this._draggable._newPos.x,te=(W-h+M)%i+h-M,he=(W+h+M)%i-h-M,ze=Math.abs(te+M)<Math.abs(he+M)?te:he;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ze},_onDragEnd:function(i){var h=this._map,M=h.options,W=!M.inertia||i.noInertia||this._times.length<2;if(h.fire("dragend",i),W)h.fire("moveend");else{this._prunePositions(+new Date);var te=this._lastPos.subtract(this._positions[0]),he=(this._lastTime-this._times[0])/1e3,ze=M.easeLinearity,it=te.multiplyBy(ze/he),ht=it.distanceTo([0,0]),Xt=Math.min(M.inertiaMaxSpeed,ht),qn=it.multiplyBy(Xt/ht),Yn=Xt/(M.inertiaDeceleration*ze),ir=qn.multiplyBy(-Yn/2).round();!ir.x&&!ir.y?h.fire("moveend"):(ir=h._limitOffset(ir,h.options.maxBounds),D(function(){h.panBy(ir,{duration:Yn,easeLinearity:ze,noMoveStart:!0,animate:!0})}))}}});Vr.addInitHook("addHandler","dragging",Uc),Vr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gc=xs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Cr(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),da(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,h=document.documentElement,M=i.scrollTop||h.scrollTop,W=i.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(W,M)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var h=this._panKeys={},M=this.keyCodes,W,te;for(W=0,te=M.left.length;W<te;W++)h[M.left[W]]=[-1*i,0];for(W=0,te=M.right.length;W<te;W++)h[M.right[W]]=[i,0];for(W=0,te=M.down.length;W<te;W++)h[M.down[W]]=[0,i];for(W=0,te=M.up.length;W<te;W++)h[M.up[W]]=[0,-1*i]},_setZoomDelta:function(i){var h=this._zoomKeys={},M=this.keyCodes,W,te;for(W=0,te=M.zoomIn.length;W<te;W++)h[M.zoomIn[W]]=i;for(W=0,te=M.zoomOut.length;W<te;W++)h[M.zoomOut[W]]=-i},_addHooks:function(){Cr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){da(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var h=i.keyCode,M=this._map,W;if(h in this._panKeys){if(!M._panAnim||!M._panAnim._inProgress)if(W=this._panKeys[h],i.shiftKey&&(W=J(W).multiplyBy(3)),M.options.maxBounds&&(W=M._limitOffset(J(W),M.options.maxBounds)),M.options.worldCopyJump){var te=M.wrapLatLng(M.unproject(M.project(M.getCenter()).add(W)));M.panTo(te)}else M.panBy(W)}else if(h in this._zoomKeys)M.setZoom(M.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&M._popup&&M._popup.options.closeOnEscapeKey)M.closePopup();else return;Xs(i)}}});Vr.addInitHook("addHandler","keyboard",gc),Vr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xi=xs.extend({addHooks:function(){Cr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){da(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var h=go(i),M=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var W=Math.max(M-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(C(this._performZoom,this),W),Xs(i)},_performZoom:function(){var i=this._map,h=i.getZoom(),M=this._map.options.zoomSnap||0;i._stop();var W=this._delta/(this._map.options.wheelPxPerZoomLevel*4),te=4*Math.log(2/(1+Math.exp(-Math.abs(W))))/Math.LN2,he=M?Math.ceil(te/M)*M:te,ze=i._limitZoom(h+(this._delta>0?he:-he))-h;this._delta=0,this._startTime=null,ze&&(i.options.scrollWheelZoom==="center"?i.setZoom(h+ze):i.setZoomAround(this._lastMousePos,h+ze))}});Vr.addInitHook("addHandler","scrollWheelZoom",xi);var tc=600;Vr.mergeOptions({tapHold:Qt.touchNative&&Qt.safari&&Qt.mobile,tapTolerance:15});var jo=xs.extend({addHooks:function(){Cr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){da(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var h=i.touches[0];this._startPos=this._newPos=new q(h.clientX,h.clientY),this._holdTimeout=setTimeout(C(function(){this._cancel(),this._isTapValid()&&(Cr(document,"touchend",qa),Cr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),tc),Cr(document,"touchend touchcancel contextmenu",this._cancel,this),Cr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){da(document,"touchend",qa),da(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),da(document,"touchend touchcancel contextmenu",this._cancel,this),da(document,"touchmove",this._onMove,this)},_onMove:function(i){var h=i.touches[0];this._newPos=new q(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,h){var M=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});M._simulated=!0,h.target.dispatchEvent(M)}});Vr.addInitHook("addHandler","tapHold",jo),Vr.mergeOptions({touchZoom:Qt.touch,bounceAtZoomLimits:!0});var wi=xs.extend({addHooks:function(){Fn(this._map._container,"leaflet-touch-zoom"),Cr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Zr(this._map._container,"leaflet-touch-zoom"),da(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var h=this._map;if(!(!i.touches||i.touches.length!==2||h._animatingZoom||this._zooming)){var M=h.mouseEventToContainerPoint(i.touches[0]),W=h.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(M.add(W)._divideBy(2))),this._startDist=M.distanceTo(W),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Cr(document,"touchmove",this._onTouchMove,this),Cr(document,"touchend touchcancel",this._onTouchEnd,this),qa(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var h=this._map,M=h.mouseEventToContainerPoint(i.touches[0]),W=h.mouseEventToContainerPoint(i.touches[1]),te=M.distanceTo(W)/this._startDist;if(this._zoom=h.getScaleZoom(te,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&te<1||this._zoom>h.getMaxZoom()&&te>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,te===1)return}else{var he=M._add(W)._divideBy(2)._subtract(this._centerPoint);if(te===1&&he.x===0&&he.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(he),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var ze=C(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(ze,this,!0),qa(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),da(document,"touchmove",this._onTouchMove,this),da(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Vr.addInitHook("addHandler","touchZoom",wi),Vr.BoxZoom=ec,Vr.DoubleClickZoom=Ki,Vr.Drag=Uc,Vr.Keyboard=gc,Vr.ScrollWheelZoom=xi,Vr.TapHold=jo,Vr.TouchZoom=wi,r.Bounds=be,r.Browser=Qt,r.CRS=_e,r.Canvas=Oo,r.Circle=Gt,r.CircleMarker=xt,r.Class=I,r.Control=gs,r.DivIcon=Ao,r.DivOverlay=pi,r.DomEvent=Oc,r.DomUtil=uc,r.Draggable=Ir,r.Evented=$,r.FeatureGroup=Ma,r.GeoJSON=ia,r.GridLayer=qs,r.Handler=xs,r.Icon=Y,r.ImageOverlay=hi,r.LatLng=Ce,r.LatLngBounds=Se,r.Layer=Bn,r.LayerGroup=Vn,r.LineUtil=gt,r.Map=Vr,r.Marker=at,r.Mixin=kl,r.Path=Lt,r.Point=q,r.PolyUtil=vo,r.Polygon=Jr,r.Polyline=kn,r.Popup=Yi,r.PosAnimation=Js,r.Projection=Ic,r.Rectangle=Al,r.Renderer=fi,r.SVG=Oi,r.SVGOverlay=Gi,r.TileLayer=Ai,r.Tooltip=Qo,r.Transformation=He,r.Util=j,r.VideoOverlay=Ko,r.bind=C,r.bounds=Re,r.canvas=Ms,r.circle=Gn,r.circleMarker=zn,r.control=qi,r.divIcon=Xo,r.extend=l,r.featureGroup=ne,r.geoJSON=Bc,r.geoJson=pc,r.gridLayer=As,r.icon=Q,r.imageOverlay=oo,r.latLng=Be,r.latLngBounds=me,r.layerGroup=hc,r.map=ui,r.marker=kt,r.point=J,r.polygon=pa,r.polyline=sa,r.popup=il,r.rectangle=Ta,r.setOptions=m,r.stamp=b,r.svg=Mo,r.svgOverlay=fc,r.tileLayer=vs,r.tooltip=mc,r.transformation=Te,r.version=s,r.videoOverlay=zc;var Qi=window.L;r.noConflict=function(){return window.L=Qi,this},window.L=r})}(dp,dp.exports)),dp.exports}var P2=iO();function oO(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function cO(e,t){return t==null?function(s,l){const d=Z.useRef(void 0);return d.current||(d.current=e(s,l)),d}:function(s,l){const d=Z.useRef(void 0);d.current||(d.current=e(s,l));const C=Z.useRef(s),{instance:T}=d.current;return Z.useEffect(function(){C.current!==s&&(t(T,s,C.current),C.current=s)},[T,s,t]),d}}function lO(e,t){Z.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function uO(e){return function(r){const s=C2(),l=e(T2(r,s),s);return eO(s.map,r.attribution),aO(l.current,r.eventHandlers),lO(l.current,s),l}}function dO(e,t){const r=cO(e,t),s=uO(r);return rO(s)}function hO(e,t,r){const{opacity:s,zIndex:l}=t;s!=null&&s!==r.opacity&&e.setOpacity(s),l!=null&&l!==r.zIndex&&e.setZIndex(l)}function pO(){return C2().map}function fO({bounds:e,boundsOptions:t,center:r,children:s,className:l,id:d,placeholder:C,style:T,whenReady:b,zoom:u,...x},f){const[y]=Z.useState({className:l,id:d,style:T}),[E,_]=Z.useState(null),m=Z.useRef(void 0);Z.useImperativeHandle(f,()=>E?.map??null,[E]);const k=Z.useCallback(U=>{if(U!==null&&!m.current){const g=new P2.Map(U,x);m.current=g,r!=null&&u!=null?g.setView(r,u):e!=null&&g.fitBounds(e,t),b!=null&&g.whenReady(b),_(nO(g))}},[]);Z.useEffect(()=>()=>{E?.map.remove()},[E]);const w=E?Wt.createElement(k2,{value:E},s):C??null;return Wt.createElement("div",{...y,ref:k},w)}const mO=Z.forwardRef(fO),gO=dO(function({url:t,...r},s){const l=new P2.TileLayer(t,T2(r,s));return oO(l,s)},function(t,r,s){hO(t,r,s);const{url:l}=r;l!=null&&l!==s.url&&t.setUrl(l)});var N2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Vx=Wt.createContext&&Wt.createContext(N2),vO=["attr","size","title"];function yO(e,t){if(e==null)return{};var r=_O(e,t),s,l;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(l=0;l<d.length;l++)s=d[l],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function _O(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function gm(){return gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},gm.apply(this,arguments)}function qx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,s)}return r}function vm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qx(Object(r),!0).forEach(function(s){bO(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qx(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function bO(e,t,r){return t=xO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xO(e){var t=wO(e,"string");return typeof t=="symbol"?t:t+""}function wO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D2(e){return e&&e.map((t,r)=>Wt.createElement(t.tag,vm({key:r},t.attr),D2(t.child)))}function SO(e){return t=>Wt.createElement(RO,gm({attr:vm({},e.attr)},t),D2(e.child))}function RO(e){var t=r=>{var{attr:s,size:l,title:d}=e,C=yO(e,vO),T=l||r.size||"1em",b;return r.className&&(b=r.className),e.className&&(b=(b?b+" ":"")+e.className),Wt.createElement("svg",gm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,C,{className:b,style:vm(vm({color:e.color||r.color},r.style),e.style),height:T,width:T,xmlns:"http://www.w3.org/2000/svg"}),d&&Wt.createElement("title",null,d),e.children)};return Vx!==void 0?Wt.createElement(Vx.Consumer,null,r=>t(r)):t(N2)}function EO(e){return SO({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(e)}function kO({coords:e}){const t=pO();return Wt.useEffect(()=>{e&&t.flyTo(e,12,{duration:1.5})},[e,t]),null}const Wx=[24.8607,67.0011],CO=()=>{const[e,t]=Z.useState(""),[r,s]=Z.useState(null),[l,d]=Z.useState(!1),{user:C}=si(),{doctor:T}=ps(),{admin:b}=cc(),u=(_,m)=>{d(!0),t(_),setTimeout(()=>{s(m),d(!1)},1200)},x=C&&C.name||T&&T.name||b&&"Admin"||"Guest",f=C&&"User"||T&&"Doctor"||b&&"Admin"||"Guest",E=((_="")=>{if(!_||typeof _!="string")return"G";const m=_.trim().split(/\s+/).filter(Boolean);if(m.length>=2){const k=m[0][0]||"",w=m[m.length-1][0]||"";return(k+w).toUpperCase().slice(0,3)}return _.slice(0,2).toUpperCase()})(x);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"w-full flex flex-col items-center justify-center py-4 px-4 bg-gradient-to-r from-[#014e78] via-[#009688] to-[#43cea2] text-white shadow-lg mb-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute left-4 top-4 opacity-12 text-[96px] pointer-events-none select-none text-white/60",children:o.jsx(EO,{})}),o.jsxs("div",{className:"flex items-center gap-4 mb-2 z-10",children:[o.jsx("div",{className:"relative",title:x,"aria-label":`${f} avatar for ${x}`,children:o.jsx("div",{className:`
                w-14 h-14 rounded-full
                bg-gradient-to-tr from-emerald-500 to-cyan-400
                flex items-center justify-center
                text-white text-lg font-extrabold
                shadow-2xl
                transform transition-all duration-200
                ring-4 ring-white/80
                hover:scale-105
                `,children:o.jsx("span",{className:"select-none",children:E})})}),o.jsxs("p",{className:"text-lg sm:text-xl font-semibold z-10",children:["Hello, ",x]})]}),o.jsxs("h2",{className:"text-xl sm:text-3xl font-extrabold tracking-tight text-center z-10 drop-shadow-lg",children:["Find the ",o.jsx("span",{className:"text-[#ffe082]",children:"Best Doctor"})," Near You"]})]}),o.jsxs("section",{className:"relative w-full min-h-[400px] mt-0 overflow-hidden",children:[l&&o.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:o.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-blue-500 rounded-full animate-spin"})}),o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsxs(mO,{center:r||Wx,zoom:12,style:{height:"100%",width:"100%"},zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,attributionControl:!1,children:[o.jsx(gO,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),o.jsx(kO,{coords:r||Wx})]}),o.jsx("div",{className:"absolute inset-0 bg-white/70 backdrop-blur-sm z-10"})]}),o.jsx("div",{className:"relative h-[400px] z-20 flex flex-col items-center justify-center max-w-2xl mx-auto py-12 px-6",children:o.jsx(WP,{onCitySelect:u})})]}),!e&&o.jsxs("div",{className:"w-full flex flex-col items-center mt-6 space-y-4",children:[o.jsx("h2",{className:"text-lg font-bold",children:"How can we help you today?"}),o.jsx(E2,{className:"text-sm px-6 py-3"})]})]})},TO=()=>{const{allDoctors:e}=ps(),{allPublicHospital:t}=to(),{allUsers:r}=si(),s=[{number:e?.length||0,label:"Verified Doctors",description:"PMC verified doctors across Pakistan"},{number:r.length||0,label:"Happy Patients",description:"Patients served nationwide"},{number:t?.length||0,label:"Hospitals",description:"Partner hospitals and clinics"},{number:"24/7",label:"Support",description:"Round the clock customer support"}];return o.jsx("section",{className:"py-16 bg-emerald-700 text-white",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Trusted by Millions"}),o.jsx("p",{className:"text-xl text-emerald-100",children:"Join Pakistan's largest healthcare community"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8",children:s.map((l,d)=>o.jsxs("div",{className:"bg-emerald-800 bg-opacity-80 rounded-xl shadow-md p-8 flex flex-col items-center transition-transform duration-200 hover:scale-105",children:[o.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2 text-emerald-200 drop-shadow",children:l.number}),o.jsx("h3",{className:"text-lg md:text-xl font-semibold mb-2 text-white",children:l.label}),o.jsx("p",{className:"text-emerald-100 text-sm md:text-base text-center",children:l.description})]},d))})]})})},Up=({triggerText:e="",title:t,description:r,children:s,open:l,onOpenChange:d})=>o.jsxs(GS,{open:l,onOpenChange:d,children:[e&&o.jsx(YS,{children:e}),o.jsxs(KS,{children:[o.jsxs(QS,{children:[t&&o.jsx(XS,{children:t}),r&&o.jsx(JS,{children:r})]}),s]})]}),$m=({doctor:e})=>{const[t,r]=Z.useState(!1),{user:s}=si(),{doctor:l}=ps(),{admin:d}=cc(),C=fs(),T=e?._id===l?._id,u=((x,f)=>`${x.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${f}`)(e.name,e._id);return o.jsxs("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl hover:scale-105 border-t-4 border-emerald-500 transition-all duration-300 p-6 flex flex-col justify-between",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("img",{src:e.profilePicture||"https://ui-avatars.com/api/?name="+encodeURIComponent(e.name)+"&background=random",alt:e.name,className:"w-20 h-20 rounded-full mx-auto mb-3 object-cover border-4 border-emerald-100 shadow"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),o.jsx("p",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-2 py-1 rounded-full mb-1",children:Array.isArray(e.speciality)?e.speciality.filter(Boolean).join(", "):e.speciality||"General Medicine"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[e.experience||0," years experience"]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Rating:"}),o.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[o.jsx("span",{children:""}),o.jsx("span",{className:"font-medium",children:e.rating.average}),o.jsxs("span",{className:"text-gray-400 ml-1",children:["(",e.rating.count,")"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between gap-7 text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Hospital:"}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-500 text-xs",children:[" ",e.hospital||"Not specified"]})]}),o.jsx("div",{className:"flex items-center justify-between gap-7 text-sm",children:o.jsx("div",{className:"flex items-center gap-1 text-gray-500 text-xs",children:e.hospitalVerified===!0?"Member of Registered Hospital":"Not Member of Registered Hospital"})}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Location:"}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-500 text-xs",children:[""," ",e.fullAddress?e.fullAddress.split(",").slice(-2).join(", "):"Not specified"]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Fee:"}),o.jsxs("span",{className:"font-medium text-green-600",children:["Rs. ",e.fee||"Not specified"]})]}),e.mainDegree&&o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Degree:"}),o.jsx("span",{className:"text-gray-500",children:e.mainDegree})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-xs text-center",children:o.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${e.availability?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.availability?"Available":"Not Available"})}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(ns,{to:`/doctor/profile/${u}`,className:"px-3 py-2 text-sm border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 text-center",children:"View Profile"}),o.jsx("button",{onClick:()=>{s||d||l?C(`/doctor/book/${u}`):r(!0)},disabled:T,className:"px-3 py-2 text-sm bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 text-center",children:T?"Not allowed":"Book Now"})]})]}),o.jsx(Up,{title:"Login Required",description:"Only logged in users can book appointments.",open:t,onOpenChange:r,children:o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{onClick:()=>{r(!1),C("/login")},className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",children:"Go to Login"})]})})]})},PO=()=>{const{allDoctors:e=[],loading:t}=ps(),r=l=>{const d=l?.rating;return d?Number(typeof d=="object"?d.average||0:d||0):0},s=e.slice().sort((l,d)=>r(d)-r(l)).slice(0,4);return t?o.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Top Rated Doctors"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Consult with Pakistan's best doctors from the comfort of your home"})]}),o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})]}):s.length?o.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Top Rated Doctors"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Consult with Pakistan's best doctors from the comfort of your home"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map(l=>o.jsx($m,{doctor:l},l._id))})]}):o.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Top Rated Doctors"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Consult with Pakistan's best doctors from the comfort of your home"})]}),o.jsx("div",{className:"text-center text-gray-500",children:o.jsx("p",{children:"No doctors available at the moment."})})]})},A2=({mode:e="rating-and-review",trigger:t=null,open:r,onOpenChange:s,initialRating:l=0,initialReview:d="",onSubmit:C=()=>{},onUpdate:T=()=>{},onDelete:b=()=>{},title:u="Leave a Review",description:x="",submitLabel:f="Submit"})=>{const[y,E]=Z.useState(!1),_=r??y,m=O=>{s?s(O):E(O)},[k,w]=Z.useState(l||0),[U,g]=Z.useState(0),[A,P]=Z.useState(d||""),[z,N]=Z.useState(!1);Z.useEffect(()=>{w(l||0)},[l,_]),Z.useEffect(()=>{P(d||"")},[d,_]);const R=async()=>{C({rating:k,review:A.trim()})},S=async()=>{T({rating:k,review:A.trim()})},p=async()=>{b()},D=({index:O})=>{const j=O<=(U||k);return o.jsx("button",{type:"button","aria-label":`${O} star${O>1?"s":""}`,onClick:()=>w(O),onMouseEnter:()=>g(O),onMouseLeave:()=>g(0),className:`w-9 h-9 flex items-center justify-center rounded-md transition ${j?"bg-yellow-50 text-yellow-500":"bg-gray-100 text-gray-300"} focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-amber-300`,children:o.jsx("svg",{viewBox:"0 0 20 20",className:"w-5 h-5",fill:"currentColor","aria-hidden":!0,children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})};return o.jsxs(GS,{open:_,onOpenChange:m,children:[t&&o.jsx(YS,{asChild:!0,children:t}),o.jsxs(KS,{className:"max-w-md",children:[o.jsxs(QS,{children:[u&&o.jsx(XS,{className:"text-lg font-semibold",children:u}),x&&o.jsx(JS,{className:"text-sm text-gray-500",children:x})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Rating"}),o.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(O=>o.jsx(D,{index:O},O))}),o.jsx("div",{className:"mt-2 text-xs text-gray-500",children:k?`${k} / 5`:"Select a rating"})]}),e==="rating-and-review"&&o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{htmlFor:"review",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review"}),o.jsx("textarea",{id:"review",rows:4,value:A,onChange:O=>P(O.target.value),placeholder:"Tell other customers about your experience...",className:"w-full rounded-md border border-gray-200 p-3 text-sm focus:ring-2 focus:ring-emerald-300 focus:outline-none"}),o.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:[A.trim().length," characters"]})]}),o.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 rounded-md text-sm bg-gray-100 hover:bg-gray-200 transition",disabled:z,children:"Cancel"}),o.jsx("button",{type:"button",onClick:p,disabled:z,className:`px-4 py-2 rounded-md text-sm text-white transition ${z?"bg-red-300 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:"Delete"}),o.jsx("button",{type:"button",onClick:S,disabled:!k||z,className:`px-4 py-2 rounded-md text-sm text-white transition ${!k||z?"bg-blue-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:"Update"}),o.jsx("button",{type:"button",onClick:R,disabled:!k||z,className:`px-4 py-2 rounded-md text-sm text-white transition ${!k||z?"bg-emerald-300 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700"}`,children:z?"Sending...":f})]})]})]})},O2=({hospital:e})=>{const r=((s,l)=>`${s.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${l}`)(e.name,e._id);return o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center",children:[o.jsx("img",{src:e.image||e.profilePicture||"https://ui-avatars.com/api/?name=Hospital&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-emerald-800 mb-1",children:e.name}),o.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2",children:e.city}),o.jsxs("div",{className:"text-gray-700 text-sm mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Address:"})," ",e.address]}),o.jsxs("div",{className:"text-gray-700 text-sm mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Contact:"})," ",e.contact||e.phone]}),o.jsxs("div",{className:"text-gray-700 text-sm mb-2",children:[o.jsx("span",{className:"font-semibold",children:"Beds:"})," ",e.beds??e.totalBeds]}),o.jsx(ns,{to:`/hospital/profile/${r}`,className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full text-center",children:"View Hospital"})]})},NO=({level:e})=>{const t={excellent:"bg-emerald-100 text-emerald-800",good:"bg-amber-100 text-amber-800",fair:"bg-sky-100 text-sky-800",poor:"bg-rose-100 text-rose-800",default:"bg-gray-100 text-gray-800"};return o.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium shadow-sm ${t[(e||"").toLowerCase()||"default"]}`,"aria-label":`Satisfaction: ${e}`,children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-current opacity-80"}),e]})},DO=({filled:e})=>o.jsx("svg",{viewBox:"0 0 20 20",className:`w-4 h-4 ${e?"text-yellow-400":"text-gray-300"}`,fill:"currentColor","aria-hidden":"true",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),AO=({testimonial:e})=>{const{name:t="Anonymous",rating:r=5,description:s="",avatar:l,satisfactionLevel:d="Excellent"}=e||{};return o.jsxs("article",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-lg hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-300 max-w-md mx-auto flex flex-col h-full min-h-[280px]","aria-label":`Testimonial from ${t}`,children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex items-center gap-4",children:[l?o.jsx("img",{src:l,alt:`${t} avatar`,className:"w-14 h-14 rounded-full object-cover border-2 border-white shadow-sm",loading:"lazy"}):o.jsx("div",{className:"w-14 h-14 rounded-full bg-emerald-100 flex items-center justify-center",children:o.jsx("span",{className:"text-emerald-600 font-semibold text-lg",children:t.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm sm:text-base font-semibold text-emerald-900",children:t}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("div",{className:"flex -space-x-1",children:[...Array(5)].map((C,T)=>o.jsx(DO,{filled:T<Math.round(r)},T))}),o.jsx("span",{className:"text-xs text-gray-500 font-medium",children:r.toFixed(1)})]})]})]})}),o.jsxs("blockquote",{className:"relative text-gray-800 italic text-sm sm:text-base mb-6 flex-grow",children:[o.jsx("span",{className:"absolute -top-4 -left-3 text-4xl text-emerald-100","aria-hidden":"true",children:'"'}),o.jsx("p",{className:"pl-4",children:s||o.jsx("span",{className:"text-gray-400 italic",children:'"Great experience with QuickMed platform!"'})})]}),o.jsx("div",{className:"mt-auto",children:o.jsx(NO,{level:d})})]})},M2=({lab:e})=>o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center",children:[o.jsx("img",{src:e.image||"https://ui-avatars.com/api/?name=Lab&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-emerald-800 mb-1",children:e.name}),o.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2",children:e.city}),o.jsxs("div",{className:"text-gray-700 text-sm mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Address:"})," ",e.address]}),o.jsxs("div",{className:"text-gray-700 text-sm mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Contact:"})," ",e.contact]}),o.jsxs("div",{className:"text-gray-700 text-sm mb-2",children:[o.jsx("span",{className:"font-semibold",children:"Tests Available:"})," ",e.tests]}),o.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 font-medium w-full mb-2",children:"Book Test"}),o.jsx("button",{className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full",children:"View Reports"})]}),j2=({medicine:e})=>o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center",children:[o.jsx("img",{src:e.image||"https://ui-avatars.com/api/?name=Medicine&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-emerald-800 mb-1",children:e.name}),o.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2",children:e.type}),o.jsxs("div",{className:"text-gray-700 text-sm mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Description:"})," ",e.description]}),o.jsxs("div",{className:"text-emerald-700 font-bold mb-2",children:["Price: Rs. ",e.price]}),o.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 font-medium w-full mb-2",children:"Add to Cart"}),o.jsx("button",{className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full",children:"Buy Now"})]});//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var L2;function Zn(){return L2.apply(null,arguments)}function OO(e){L2=e}function Xc(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ud(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Ba(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ey(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Ba(e,t))return!1;return!0}function Uo(e){return e===void 0}function au(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Fp(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function I2(e,t){var r=[],s,l=e.length;for(s=0;s<l;++s)r.push(t(e[s],s));return r}function Ou(e,t){for(var r in t)Ba(t,r)&&(e[r]=t[r]);return Ba(t,"toString")&&(e.toString=t.toString),Ba(t,"valueOf")&&(e.valueOf=t.valueOf),e}function wl(e,t,r,s){return iR(e,t,r,s,!0).utc()}function MO(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function la(e){return e._pf==null&&(e._pf=MO()),e._pf}var c0;Array.prototype.some?c0=Array.prototype.some:c0=function(e){var t=Object(this),r=t.length>>>0,s;for(s=0;s<r;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};function ty(e){var t=null,r=!1,s=e._d&&!isNaN(e._d.getTime());if(s&&(t=la(e),r=c0.call(t.parsedDateParts,function(l){return l!=null}),s=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(s=s&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=s;else return s;return e._isValid}function Zm(e){var t=wl(NaN);return e!=null?Ou(la(t),e):la(t).userInvalidated=!0,t}var $x=Zn.momentProperties=[],jv=!1;function ny(e,t){var r,s,l,d=$x.length;if(Uo(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Uo(t._i)||(e._i=t._i),Uo(t._f)||(e._f=t._f),Uo(t._l)||(e._l=t._l),Uo(t._strict)||(e._strict=t._strict),Uo(t._tzm)||(e._tzm=t._tzm),Uo(t._isUTC)||(e._isUTC=t._isUTC),Uo(t._offset)||(e._offset=t._offset),Uo(t._pf)||(e._pf=la(t)),Uo(t._locale)||(e._locale=t._locale),d>0)for(r=0;r<d;r++)s=$x[r],l=t[s],Uo(l)||(e[s]=l);return e}function Hp(e){ny(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),jv===!1&&(jv=!0,Zn.updateOffset(this),jv=!1)}function Jc(e){return e instanceof Hp||e!=null&&e._isAMomentObject!=null}function B2(e){Zn.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Dc(e,t){var r=!0;return Ou(function(){if(Zn.deprecationHandler!=null&&Zn.deprecationHandler(null,e),r){var s=[],l,d,C,T=arguments.length;for(d=0;d<T;d++){if(l="",typeof arguments[d]=="object"){l+=`
[`+d+"] ";for(C in arguments[0])Ba(arguments[0],C)&&(l+=C+": "+arguments[0][C]+", ");l=l.slice(0,-2)}else l=arguments[d];s.push(l)}B2(e+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var Zx={};function z2(e,t){Zn.deprecationHandler!=null&&Zn.deprecationHandler(e,t),Zx[e]||(B2(t),Zx[e]=!0)}Zn.suppressDeprecationWarnings=!1;Zn.deprecationHandler=null;function Sl(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function jO(e){var t,r;for(r in e)Ba(e,r)&&(t=e[r],Sl(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function l0(e,t){var r=Ou({},e),s;for(s in t)Ba(t,s)&&(ud(e[s])&&ud(t[s])?(r[s]={},Ou(r[s],e[s]),Ou(r[s],t[s])):t[s]!=null?r[s]=t[s]:delete r[s]);for(s in e)Ba(e,s)&&!Ba(t,s)&&ud(e[s])&&(r[s]=Ou({},r[s]));return r}function ry(e){e!=null&&this.set(e)}var u0;Object.keys?u0=Object.keys:u0=function(e){var t,r=[];for(t in e)Ba(e,t)&&r.push(t);return r};var LO={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function IO(e,t,r){var s=this._calendar[e]||this._calendar.sameElse;return Sl(s)?s.call(t,r):s}function _l(e,t,r){var s=""+Math.abs(e),l=t-s.length,d=e>=0;return(d?r?"+":"":"-")+Math.pow(10,Math.max(0,l)).toString().substr(1)+s}var ay=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ff=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Lv={},ah={};function Dr(e,t,r,s){var l=s;typeof s=="string"&&(l=function(){return this[s]()}),e&&(ah[e]=l),t&&(ah[t[0]]=function(){return _l(l.apply(this,arguments),t[1],t[2])}),r&&(ah[r]=function(){return this.localeData().ordinal(l.apply(this,arguments),e)})}function BO(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function zO(e){var t=e.match(ay),r,s;for(r=0,s=t.length;r<s;r++)ah[t[r]]?t[r]=ah[t[r]]:t[r]=BO(t[r]);return function(l){var d="",C;for(C=0;C<s;C++)d+=Sl(t[C])?t[C].call(l,e):t[C];return d}}function rm(e,t){return e.isValid()?(t=U2(t,e.localeData()),Lv[t]=Lv[t]||zO(t),Lv[t](e)):e.localeData().invalidDate()}function U2(e,t){var r=5;function s(l){return t.longDateFormat(l)||l}for(Ff.lastIndex=0;r>=0&&Ff.test(e);)e=e.replace(Ff,s),Ff.lastIndex=0,r-=1;return e}var UO={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function FO(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(ay).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[e])}var HO="Invalid date";function VO(){return this._invalidDate}var qO="%d",WO=/\d{1,2}/;function $O(e){return this._ordinal.replace("%d",e)}var ZO={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function GO(e,t,r,s){var l=this._relativeTime[r];return Sl(l)?l(e,t,r,s):l.replace(/%d/i,e)}function YO(e,t){var r=this._relativeTime[e>0?"future":"past"];return Sl(r)?r(t):r.replace(/%s/i,t)}var Gx={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Ac(e){return typeof e=="string"?Gx[e]||Gx[e.toLowerCase()]:void 0}function sy(e){var t={},r,s;for(s in e)Ba(e,s)&&(r=Ac(s),r&&(t[r]=e[s]));return t}var KO={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function QO(e){var t=[],r;for(r in e)Ba(e,r)&&t.push({unit:r,priority:KO[r]});return t.sort(function(s,l){return s.priority-l.priority}),t}var F2=/\d/,lc=/\d\d/,H2=/\d{3}/,iy=/\d{4}/,Gm=/[+-]?\d{6}/,_s=/\d\d?/,V2=/\d\d\d\d?/,q2=/\d\d\d\d\d\d?/,Ym=/\d{1,3}/,oy=/\d{1,4}/,Km=/[+-]?\d{1,6}/,vh=/\d+/,Qm=/[+-]?\d+/,XO=/Z|[+-]\d\d:?\d\d/gi,Xm=/Z|[+-]\d\d(?::?\d\d)?/gi,JO=/[+-]?\d+(\.\d{1,3})?/,Vp=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,yh=/^[1-9]\d?/,cy=/^([1-9]\d|\d)/,ym;ym={};function sr(e,t,r){ym[e]=Sl(t)?t:function(s,l){return s&&r?r:t}}function eM(e,t){return Ba(ym,e)?ym[e](t._strict,t._locale):new RegExp(tM(e))}function tM(e){return tu(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,s,l,d){return r||s||l||d}))}function tu(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function kc(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Ra(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=kc(t)),r}var d0={};function as(e,t){var r,s=t,l;for(typeof e=="string"&&(e=[e]),au(t)&&(s=function(d,C){C[t]=Ra(d)}),l=e.length,r=0;r<l;r++)d0[e[r]]=s}function qp(e,t){as(e,function(r,s,l,d){l._w=l._w||{},t(r,l._w,l,d)})}function nM(e,t,r){t!=null&&Ba(d0,e)&&d0[e](t,r._a,r,e)}function Jm(e){return e%4===0&&e%100!==0||e%400===0}var fo=0,Xl=1,vl=2,ki=3,Yc=4,Jl=5,sd=6,rM=7,aM=8;Dr("Y",0,0,function(){var e=this.year();return e<=9999?_l(e,4):"+"+e});Dr(0,["YY",2],0,function(){return this.year()%100});Dr(0,["YYYY",4],0,"year");Dr(0,["YYYYY",5],0,"year");Dr(0,["YYYYYY",6,!0],0,"year");sr("Y",Qm);sr("YY",_s,lc);sr("YYYY",oy,iy);sr("YYYYY",Km,Gm);sr("YYYYYY",Km,Gm);as(["YYYYY","YYYYYY"],fo);as("YYYY",function(e,t){t[fo]=e.length===2?Zn.parseTwoDigitYear(e):Ra(e)});as("YY",function(e,t){t[fo]=Zn.parseTwoDigitYear(e)});as("Y",function(e,t){t[fo]=parseInt(e,10)});function pp(e){return Jm(e)?366:365}Zn.parseTwoDigitYear=function(e){return Ra(e)+(Ra(e)>68?1900:2e3)};var W2=_h("FullYear",!0);function sM(){return Jm(this.year())}function _h(e,t){return function(r){return r!=null?($2(this,e,r),Zn.updateOffset(this,t),this):kp(this,e)}}function kp(e,t){if(!e.isValid())return NaN;var r=e._d,s=e._isUTC;switch(t){case"Milliseconds":return s?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return s?r.getUTCSeconds():r.getSeconds();case"Minutes":return s?r.getUTCMinutes():r.getMinutes();case"Hours":return s?r.getUTCHours():r.getHours();case"Date":return s?r.getUTCDate():r.getDate();case"Day":return s?r.getUTCDay():r.getDay();case"Month":return s?r.getUTCMonth():r.getMonth();case"FullYear":return s?r.getUTCFullYear():r.getFullYear();default:return NaN}}function $2(e,t,r){var s,l,d,C,T;if(!(!e.isValid()||isNaN(r))){switch(s=e._d,l=e._isUTC,t){case"Milliseconds":return void(l?s.setUTCMilliseconds(r):s.setMilliseconds(r));case"Seconds":return void(l?s.setUTCSeconds(r):s.setSeconds(r));case"Minutes":return void(l?s.setUTCMinutes(r):s.setMinutes(r));case"Hours":return void(l?s.setUTCHours(r):s.setHours(r));case"Date":return void(l?s.setUTCDate(r):s.setDate(r));case"FullYear":break;default:return}d=r,C=e.month(),T=e.date(),T=T===29&&C===1&&!Jm(d)?28:T,l?s.setUTCFullYear(d,C,T):s.setFullYear(d,C,T)}}function iM(e){return e=Ac(e),Sl(this[e])?this[e]():this}function oM(e,t){if(typeof e=="object"){e=sy(e);var r=QO(e),s,l=r.length;for(s=0;s<l;s++)this[r[s].unit](e[r[s].unit])}else if(e=Ac(e),Sl(this[e]))return this[e](t);return this}function cM(e,t){return(e%t+t)%t}var ri;Array.prototype.indexOf?ri=Array.prototype.indexOf:ri=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function ly(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=cM(t,12);return e+=(t-r)/12,r===1?Jm(e)?29:28:31-r%7%2}Dr("M",["MM",2],"Mo",function(){return this.month()+1});Dr("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Dr("MMMM",0,0,function(e){return this.localeData().months(this,e)});sr("M",_s,yh);sr("MM",_s,lc);sr("MMM",function(e,t){return t.monthsShortRegex(e)});sr("MMMM",function(e,t){return t.monthsRegex(e)});as(["M","MM"],function(e,t){t[Xl]=Ra(e)-1});as(["MMM","MMMM"],function(e,t,r,s){var l=r._locale.monthsParse(e,s,r._strict);l!=null?t[Xl]=l:la(r).invalidMonth=e});var lM="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Z2="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),G2=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,uM=Vp,dM=Vp;function hM(e,t){return e?Xc(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||G2).test(t)?"format":"standalone"][e.month()]:Xc(this._months)?this._months:this._months.standalone}function pM(e,t){return e?Xc(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[G2.test(t)?"format":"standalone"][e.month()]:Xc(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function fM(e,t,r){var s,l,d,C=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)d=wl([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(d,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(d,"").toLocaleLowerCase();return r?t==="MMM"?(l=ri.call(this._shortMonthsParse,C),l!==-1?l:null):(l=ri.call(this._longMonthsParse,C),l!==-1?l:null):t==="MMM"?(l=ri.call(this._shortMonthsParse,C),l!==-1?l:(l=ri.call(this._longMonthsParse,C),l!==-1?l:null)):(l=ri.call(this._longMonthsParse,C),l!==-1?l:(l=ri.call(this._shortMonthsParse,C),l!==-1?l:null))}function mM(e,t,r){var s,l,d;if(this._monthsParseExact)return fM.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(l=wl([2e3,s]),r&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(l,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(l,"").replace(".","")+"$","i")),!r&&!this._monthsParse[s]&&(d="^"+this.months(l,"")+"|^"+this.monthsShort(l,""),this._monthsParse[s]=new RegExp(d.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[s].test(e))return s;if(r&&t==="MMM"&&this._shortMonthsParse[s].test(e))return s;if(!r&&this._monthsParse[s].test(e))return s}}function Y2(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Ra(t);else if(t=e.localeData().monthsParse(t),!au(t))return e}var r=t,s=e.date();return s=s<29?s:Math.min(s,ly(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,s):e._d.setMonth(r,s),e}function K2(e){return e!=null?(Y2(this,e),Zn.updateOffset(this,!0),this):kp(this,"Month")}function gM(){return ly(this.year(),this.month())}function vM(e){return this._monthsParseExact?(Ba(this,"_monthsRegex")||Q2.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Ba(this,"_monthsShortRegex")||(this._monthsShortRegex=uM),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function yM(e){return this._monthsParseExact?(Ba(this,"_monthsRegex")||Q2.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Ba(this,"_monthsRegex")||(this._monthsRegex=dM),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Q2(){function e(b,u){return u.length-b.length}var t=[],r=[],s=[],l,d,C,T;for(l=0;l<12;l++)d=wl([2e3,l]),C=tu(this.monthsShort(d,"")),T=tu(this.months(d,"")),t.push(C),r.push(T),s.push(T),s.push(C);t.sort(e),r.sort(e),s.sort(e),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function _M(e,t,r,s,l,d,C){var T;return e<100&&e>=0?(T=new Date(e+400,t,r,s,l,d,C),isFinite(T.getFullYear())&&T.setFullYear(e)):T=new Date(e,t,r,s,l,d,C),T}function Cp(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function _m(e,t,r){var s=7+t-r,l=(7+Cp(e,0,s).getUTCDay()-t)%7;return-l+s-1}function X2(e,t,r,s,l){var d=(7+r-s)%7,C=_m(e,s,l),T=1+7*(t-1)+d+C,b,u;return T<=0?(b=e-1,u=pp(b)+T):T>pp(e)?(b=e+1,u=T-pp(e)):(b=e,u=T),{year:b,dayOfYear:u}}function Tp(e,t,r){var s=_m(e.year(),t,r),l=Math.floor((e.dayOfYear()-s-1)/7)+1,d,C;return l<1?(C=e.year()-1,d=l+nu(C,t,r)):l>nu(e.year(),t,r)?(d=l-nu(e.year(),t,r),C=e.year()+1):(C=e.year(),d=l),{week:d,year:C}}function nu(e,t,r){var s=_m(e,t,r),l=_m(e+1,t,r);return(pp(e)-s+l)/7}Dr("w",["ww",2],"wo","week");Dr("W",["WW",2],"Wo","isoWeek");sr("w",_s,yh);sr("ww",_s,lc);sr("W",_s,yh);sr("WW",_s,lc);qp(["w","ww","W","WW"],function(e,t,r,s){t[s.substr(0,1)]=Ra(e)});function bM(e){return Tp(e,this._week.dow,this._week.doy).week}var xM={dow:0,doy:6};function wM(){return this._week.dow}function SM(){return this._week.doy}function RM(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function EM(e){var t=Tp(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Dr("d",0,"do","day");Dr("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Dr("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Dr("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Dr("e",0,0,"weekday");Dr("E",0,0,"isoWeekday");sr("d",_s);sr("e",_s);sr("E",_s);sr("dd",function(e,t){return t.weekdaysMinRegex(e)});sr("ddd",function(e,t){return t.weekdaysShortRegex(e)});sr("dddd",function(e,t){return t.weekdaysRegex(e)});qp(["dd","ddd","dddd"],function(e,t,r,s){var l=r._locale.weekdaysParse(e,s,r._strict);l!=null?t.d=l:la(r).invalidWeekday=e});qp(["d","e","E"],function(e,t,r,s){t[s]=Ra(e)});function kM(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function CM(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function uy(e,t){return e.slice(t,7).concat(e.slice(0,t))}var TM="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),J2="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),PM="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),NM=Vp,DM=Vp,AM=Vp;function OM(e,t){var r=Xc(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?uy(r,this._week.dow):e?r[e.day()]:r}function MM(e){return e===!0?uy(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function jM(e){return e===!0?uy(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function LM(e,t,r){var s,l,d,C=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)d=wl([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(d,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(d,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(d,"").toLocaleLowerCase();return r?t==="dddd"?(l=ri.call(this._weekdaysParse,C),l!==-1?l:null):t==="ddd"?(l=ri.call(this._shortWeekdaysParse,C),l!==-1?l:null):(l=ri.call(this._minWeekdaysParse,C),l!==-1?l:null):t==="dddd"?(l=ri.call(this._weekdaysParse,C),l!==-1||(l=ri.call(this._shortWeekdaysParse,C),l!==-1)?l:(l=ri.call(this._minWeekdaysParse,C),l!==-1?l:null)):t==="ddd"?(l=ri.call(this._shortWeekdaysParse,C),l!==-1||(l=ri.call(this._weekdaysParse,C),l!==-1)?l:(l=ri.call(this._minWeekdaysParse,C),l!==-1?l:null)):(l=ri.call(this._minWeekdaysParse,C),l!==-1||(l=ri.call(this._weekdaysParse,C),l!==-1)?l:(l=ri.call(this._shortWeekdaysParse,C),l!==-1?l:null))}function IM(e,t,r){var s,l,d;if(this._weekdaysParseExact)return LM.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(l=wl([2e3,1]).day(s),r&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(l,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(l,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(l,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(d="^"+this.weekdays(l,"")+"|^"+this.weekdaysShort(l,"")+"|^"+this.weekdaysMin(l,""),this._weekdaysParse[s]=new RegExp(d.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[s].test(e))return s;if(r&&t==="ddd"&&this._shortWeekdaysParse[s].test(e))return s;if(r&&t==="dd"&&this._minWeekdaysParse[s].test(e))return s;if(!r&&this._weekdaysParse[s].test(e))return s}}function BM(e){if(!this.isValid())return e!=null?this:NaN;var t=kp(this,"Day");return e!=null?(e=kM(e,this.localeData()),this.add(e-t,"d")):t}function zM(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function UM(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=CM(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function FM(e){return this._weekdaysParseExact?(Ba(this,"_weekdaysRegex")||dy.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Ba(this,"_weekdaysRegex")||(this._weekdaysRegex=NM),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function HM(e){return this._weekdaysParseExact?(Ba(this,"_weekdaysRegex")||dy.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ba(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=DM),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function VM(e){return this._weekdaysParseExact?(Ba(this,"_weekdaysRegex")||dy.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ba(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=AM),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function dy(){function e(x,f){return f.length-x.length}var t=[],r=[],s=[],l=[],d,C,T,b,u;for(d=0;d<7;d++)C=wl([2e3,1]).day(d),T=tu(this.weekdaysMin(C,"")),b=tu(this.weekdaysShort(C,"")),u=tu(this.weekdays(C,"")),t.push(T),r.push(b),s.push(u),l.push(T),l.push(b),l.push(u);t.sort(e),r.sort(e),s.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function hy(){return this.hours()%12||12}function qM(){return this.hours()||24}Dr("H",["HH",2],0,"hour");Dr("h",["hh",2],0,hy);Dr("k",["kk",2],0,qM);Dr("hmm",0,0,function(){return""+hy.apply(this)+_l(this.minutes(),2)});Dr("hmmss",0,0,function(){return""+hy.apply(this)+_l(this.minutes(),2)+_l(this.seconds(),2)});Dr("Hmm",0,0,function(){return""+this.hours()+_l(this.minutes(),2)});Dr("Hmmss",0,0,function(){return""+this.hours()+_l(this.minutes(),2)+_l(this.seconds(),2)});function eR(e,t){Dr(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}eR("a",!0);eR("A",!1);function tR(e,t){return t._meridiemParse}sr("a",tR);sr("A",tR);sr("H",_s,cy);sr("h",_s,yh);sr("k",_s,yh);sr("HH",_s,lc);sr("hh",_s,lc);sr("kk",_s,lc);sr("hmm",V2);sr("hmmss",q2);sr("Hmm",V2);sr("Hmmss",q2);as(["H","HH"],ki);as(["k","kk"],function(e,t,r){var s=Ra(e);t[ki]=s===24?0:s});as(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});as(["h","hh"],function(e,t,r){t[ki]=Ra(e),la(r).bigHour=!0});as("hmm",function(e,t,r){var s=e.length-2;t[ki]=Ra(e.substr(0,s)),t[Yc]=Ra(e.substr(s)),la(r).bigHour=!0});as("hmmss",function(e,t,r){var s=e.length-4,l=e.length-2;t[ki]=Ra(e.substr(0,s)),t[Yc]=Ra(e.substr(s,2)),t[Jl]=Ra(e.substr(l)),la(r).bigHour=!0});as("Hmm",function(e,t,r){var s=e.length-2;t[ki]=Ra(e.substr(0,s)),t[Yc]=Ra(e.substr(s))});as("Hmmss",function(e,t,r){var s=e.length-4,l=e.length-2;t[ki]=Ra(e.substr(0,s)),t[Yc]=Ra(e.substr(s,2)),t[Jl]=Ra(e.substr(l))});function WM(e){return(e+"").toLowerCase().charAt(0)==="p"}var $M=/[ap]\.?m?\.?/i,ZM=_h("Hours",!0);function GM(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var nR={calendar:LO,longDateFormat:UO,invalidDate:HO,ordinal:qO,dayOfMonthOrdinalParse:WO,relativeTime:ZO,months:lM,monthsShort:Z2,week:xM,weekdays:TM,weekdaysMin:PM,weekdaysShort:J2,meridiemParse:$M},Es={},ap={},Pp;function YM(e,t){var r,s=Math.min(e.length,t.length);for(r=0;r<s;r+=1)if(e[r]!==t[r])return r;return s}function Yx(e){return e&&e.toLowerCase().replace("_","-")}function KM(e){for(var t=0,r,s,l,d;t<e.length;){for(d=Yx(e[t]).split("-"),r=d.length,s=Yx(e[t+1]),s=s?s.split("-"):null;r>0;){if(l=eg(d.slice(0,r).join("-")),l)return l;if(s&&s.length>=r&&YM(d,s)>=r-1)break;r--}t++}return Pp}function QM(e){return!!(e&&e.match("^[^/\\\\]*$"))}function eg(e){var t=null,r;if(Es[e]===void 0&&typeof om<"u"&&om&&om.exports&&QM(e))try{t=Pp._abbr,r=require,r("./locale/"+e),Lu(t)}catch{Es[e]=null}return Es[e]}function Lu(e,t){var r;return e&&(Uo(t)?r=su(e):r=py(e,t),r?Pp=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Pp._abbr}function py(e,t){if(t!==null){var r,s=nR;if(t.abbr=e,Es[e]!=null)z2("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=Es[e]._config;else if(t.parentLocale!=null)if(Es[t.parentLocale]!=null)s=Es[t.parentLocale]._config;else if(r=eg(t.parentLocale),r!=null)s=r._config;else return ap[t.parentLocale]||(ap[t.parentLocale]=[]),ap[t.parentLocale].push({name:e,config:t}),null;return Es[e]=new ry(l0(s,t)),ap[e]&&ap[e].forEach(function(l){py(l.name,l.config)}),Lu(e),Es[e]}else return delete Es[e],null}function XM(e,t){if(t!=null){var r,s,l=nR;Es[e]!=null&&Es[e].parentLocale!=null?Es[e].set(l0(Es[e]._config,t)):(s=eg(e),s!=null&&(l=s._config),t=l0(l,t),s==null&&(t.abbr=e),r=new ry(t),r.parentLocale=Es[e],Es[e]=r),Lu(e)}else Es[e]!=null&&(Es[e].parentLocale!=null?(Es[e]=Es[e].parentLocale,e===Lu()&&Lu(e)):Es[e]!=null&&delete Es[e]);return Es[e]}function su(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Pp;if(!Xc(e)){if(t=eg(e),t)return t;e=[e]}return KM(e)}function JM(){return u0(Es)}function fy(e){var t,r=e._a;return r&&la(e).overflow===-2&&(t=r[Xl]<0||r[Xl]>11?Xl:r[vl]<1||r[vl]>ly(r[fo],r[Xl])?vl:r[ki]<0||r[ki]>24||r[ki]===24&&(r[Yc]!==0||r[Jl]!==0||r[sd]!==0)?ki:r[Yc]<0||r[Yc]>59?Yc:r[Jl]<0||r[Jl]>59?Jl:r[sd]<0||r[sd]>999?sd:-1,la(e)._overflowDayOfYear&&(t<fo||t>vl)&&(t=vl),la(e)._overflowWeeks&&t===-1&&(t=rM),la(e)._overflowWeekday&&t===-1&&(t=aM),la(e).overflow=t),e}var ej=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tj=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nj=/Z|[+-]\d\d(?::?\d\d)?/,Hf=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Iv=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],rj=/^\/?Date\((-?\d+)/i,aj=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,sj={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function rR(e){var t,r,s=e._i,l=ej.exec(s)||tj.exec(s),d,C,T,b,u=Hf.length,x=Iv.length;if(l){for(la(e).iso=!0,t=0,r=u;t<r;t++)if(Hf[t][1].exec(l[1])){C=Hf[t][0],d=Hf[t][2]!==!1;break}if(C==null){e._isValid=!1;return}if(l[3]){for(t=0,r=x;t<r;t++)if(Iv[t][1].exec(l[3])){T=(l[2]||" ")+Iv[t][0];break}if(T==null){e._isValid=!1;return}}if(!d&&T!=null){e._isValid=!1;return}if(l[4])if(nj.exec(l[4]))b="Z";else{e._isValid=!1;return}e._f=C+(T||"")+(b||""),gy(e)}else e._isValid=!1}function ij(e,t,r,s,l,d){var C=[oj(e),Z2.indexOf(t),parseInt(r,10),parseInt(s,10),parseInt(l,10)];return d&&C.push(parseInt(d,10)),C}function oj(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function cj(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function lj(e,t,r){if(e){var s=J2.indexOf(e),l=new Date(t[0],t[1],t[2]).getDay();if(s!==l)return la(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function uj(e,t,r){if(e)return sj[e];if(t)return 0;var s=parseInt(r,10),l=s%100,d=(s-l)/100;return d*60+l}function aR(e){var t=aj.exec(cj(e._i)),r;if(t){if(r=ij(t[4],t[3],t[2],t[5],t[6],t[7]),!lj(t[1],r,e))return;e._a=r,e._tzm=uj(t[8],t[9],t[10]),e._d=Cp.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),la(e).rfc2822=!0}else e._isValid=!1}function dj(e){var t=rj.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(rR(e),e._isValid===!1)delete e._isValid;else return;if(aR(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Zn.createFromInputFallback(e)}Zn.createFromInputFallback=Dc("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function eh(e,t,r){return e??t??r}function hj(e){var t=new Date(Zn.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function my(e){var t,r,s=[],l,d,C;if(!e._d){for(l=hj(e),e._w&&e._a[vl]==null&&e._a[Xl]==null&&pj(e),e._dayOfYear!=null&&(C=eh(e._a[fo],l[fo]),(e._dayOfYear>pp(C)||e._dayOfYear===0)&&(la(e)._overflowDayOfYear=!0),r=Cp(C,0,e._dayOfYear),e._a[Xl]=r.getUTCMonth(),e._a[vl]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=s[t]=l[t];for(;t<7;t++)e._a[t]=s[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[ki]===24&&e._a[Yc]===0&&e._a[Jl]===0&&e._a[sd]===0&&(e._nextDay=!0,e._a[ki]=0),e._d=(e._useUTC?Cp:_M).apply(null,s),d=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ki]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==d&&(la(e).weekdayMismatch=!0)}}function pj(e){var t,r,s,l,d,C,T,b,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(d=1,C=4,r=eh(t.GG,e._a[fo],Tp(ys(),1,4).year),s=eh(t.W,1),l=eh(t.E,1),(l<1||l>7)&&(b=!0)):(d=e._locale._week.dow,C=e._locale._week.doy,u=Tp(ys(),d,C),r=eh(t.gg,e._a[fo],u.year),s=eh(t.w,u.week),t.d!=null?(l=t.d,(l<0||l>6)&&(b=!0)):t.e!=null?(l=t.e+d,(t.e<0||t.e>6)&&(b=!0)):l=d),s<1||s>nu(r,d,C)?la(e)._overflowWeeks=!0:b!=null?la(e)._overflowWeekday=!0:(T=X2(r,s,l,d,C),e._a[fo]=T.year,e._dayOfYear=T.dayOfYear)}Zn.ISO_8601=function(){};Zn.RFC_2822=function(){};function gy(e){if(e._f===Zn.ISO_8601){rR(e);return}if(e._f===Zn.RFC_2822){aR(e);return}e._a=[],la(e).empty=!0;var t=""+e._i,r,s,l,d,C,T=t.length,b=0,u,x;for(l=U2(e._f,e._locale).match(ay)||[],x=l.length,r=0;r<x;r++)d=l[r],s=(t.match(eM(d,e))||[])[0],s&&(C=t.substr(0,t.indexOf(s)),C.length>0&&la(e).unusedInput.push(C),t=t.slice(t.indexOf(s)+s.length),b+=s.length),ah[d]?(s?la(e).empty=!1:la(e).unusedTokens.push(d),nM(d,s,e)):e._strict&&!s&&la(e).unusedTokens.push(d);la(e).charsLeftOver=T-b,t.length>0&&la(e).unusedInput.push(t),e._a[ki]<=12&&la(e).bigHour===!0&&e._a[ki]>0&&(la(e).bigHour=void 0),la(e).parsedDateParts=e._a.slice(0),la(e).meridiem=e._meridiem,e._a[ki]=fj(e._locale,e._a[ki],e._meridiem),u=la(e).era,u!==null&&(e._a[fo]=e._locale.erasConvertYear(u,e._a[fo])),my(e),fy(e)}function fj(e,t,r){var s;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(s=e.isPM(r),s&&t<12&&(t+=12),!s&&t===12&&(t=0)),t)}function mj(e){var t,r,s,l,d,C,T=!1,b=e._f.length;if(b===0){la(e).invalidFormat=!0,e._d=new Date(NaN);return}for(l=0;l<b;l++)d=0,C=!1,t=ny({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[l],gy(t),ty(t)&&(C=!0),d+=la(t).charsLeftOver,d+=la(t).unusedTokens.length*10,la(t).score=d,T?d<s&&(s=d,r=t):(s==null||d<s||C)&&(s=d,r=t,C&&(T=!0));Ou(e,r||t)}function gj(e){if(!e._d){var t=sy(e._i),r=t.day===void 0?t.date:t.day;e._a=I2([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(s){return s&&parseInt(s,10)}),my(e)}}function vj(e){var t=new Hp(fy(sR(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function sR(e){var t=e._i,r=e._f;return e._locale=e._locale||su(e._l),t===null||r===void 0&&t===""?Zm({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Jc(t)?new Hp(fy(t)):(Fp(t)?e._d=t:Xc(r)?mj(e):r?gy(e):yj(e),ty(e)||(e._d=null),e))}function yj(e){var t=e._i;Uo(t)?e._d=new Date(Zn.now()):Fp(t)?e._d=new Date(t.valueOf()):typeof t=="string"?dj(e):Xc(t)?(e._a=I2(t.slice(0),function(r){return parseInt(r,10)}),my(e)):ud(t)?gj(e):au(t)?e._d=new Date(t):Zn.createFromInputFallback(e)}function iR(e,t,r,s,l){var d={};return(t===!0||t===!1)&&(s=t,t=void 0),(r===!0||r===!1)&&(s=r,r=void 0),(ud(e)&&ey(e)||Xc(e)&&e.length===0)&&(e=void 0),d._isAMomentObject=!0,d._useUTC=d._isUTC=l,d._l=r,d._i=e,d._f=t,d._strict=s,vj(d)}function ys(e,t,r,s){return iR(e,t,r,s,!1)}var _j=Dc("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ys.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Zm()}),bj=Dc("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ys.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Zm()});function oR(e,t){var r,s;if(t.length===1&&Xc(t[0])&&(t=t[0]),!t.length)return ys();for(r=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](r))&&(r=t[s]);return r}function xj(){var e=[].slice.call(arguments,0);return oR("isBefore",e)}function wj(){var e=[].slice.call(arguments,0);return oR("isAfter",e)}var Sj=function(){return Date.now?Date.now():+new Date},sp=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Rj(e){var t,r=!1,s,l=sp.length;for(t in e)if(Ba(e,t)&&!(ri.call(sp,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(s=0;s<l;++s)if(e[sp[s]]){if(r)return!1;parseFloat(e[sp[s]])!==Ra(e[sp[s]])&&(r=!0)}return!0}function Ej(){return this._isValid}function kj(){return al(NaN)}function tg(e){var t=sy(e),r=t.year||0,s=t.quarter||0,l=t.month||0,d=t.week||t.isoWeek||0,C=t.day||0,T=t.hour||0,b=t.minute||0,u=t.second||0,x=t.millisecond||0;this._isValid=Rj(t),this._milliseconds=+x+u*1e3+b*6e4+T*1e3*60*60,this._days=+C+d*7,this._months=+l+s*3+r*12,this._data={},this._locale=su(),this._bubble()}function am(e){return e instanceof tg}function h0(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Cj(e,t,r){var s=Math.min(e.length,t.length),l=Math.abs(e.length-t.length),d=0,C;for(C=0;C<s;C++)Ra(e[C])!==Ra(t[C])&&d++;return d+l}function cR(e,t){Dr(e,0,0,function(){var r=this.utcOffset(),s="+";return r<0&&(r=-r,s="-"),s+_l(~~(r/60),2)+t+_l(~~r%60,2)})}cR("Z",":");cR("ZZ","");sr("Z",Xm);sr("ZZ",Xm);as(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=vy(Xm,e)});var Tj=/([\+\-]|\d\d)/gi;function vy(e,t){var r=(t||"").match(e),s,l,d;return r===null?null:(s=r[r.length-1]||[],l=(s+"").match(Tj)||["-",0,0],d=+(l[1]*60)+Ra(l[2]),d===0?0:l[0]==="+"?d:-d)}function yy(e,t){var r,s;return t._isUTC?(r=t.clone(),s=(Jc(e)||Fp(e)?e.valueOf():ys(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+s),Zn.updateOffset(r,!1),r):ys(e).local()}function p0(e){return-Math.round(e._d.getTimezoneOffset())}Zn.updateOffset=function(){};function Pj(e,t,r){var s=this._offset||0,l;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=vy(Xm,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(l=p0(this)),this._offset=e,this._isUTC=!0,l!=null&&this.add(l,"m"),s!==e&&(!t||this._changeInProgress?dR(this,al(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Zn.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:p0(this)}function Nj(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Dj(e){return this.utcOffset(0,e)}function Aj(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(p0(this),"m")),this}function Oj(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=vy(XO,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Mj(e){return this.isValid()?(e=e?ys(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function jj(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Lj(){if(!Uo(this._isDSTShifted))return this._isDSTShifted;var e={},t;return ny(e,this),e=sR(e),e._a?(t=e._isUTC?wl(e._a):ys(e._a),this._isDSTShifted=this.isValid()&&Cj(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ij(){return this.isValid()?!this._isUTC:!1}function Bj(){return this.isValid()?this._isUTC:!1}function lR(){return this.isValid()?this._isUTC&&this._offset===0:!1}var zj=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Uj=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function al(e,t){var r=e,s=null,l,d,C;return am(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:au(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(s=zj.exec(e))?(l=s[1]==="-"?-1:1,r={y:0,d:Ra(s[vl])*l,h:Ra(s[ki])*l,m:Ra(s[Yc])*l,s:Ra(s[Jl])*l,ms:Ra(h0(s[sd]*1e3))*l}):(s=Uj.exec(e))?(l=s[1]==="-"?-1:1,r={y:ed(s[2],l),M:ed(s[3],l),w:ed(s[4],l),d:ed(s[5],l),h:ed(s[6],l),m:ed(s[7],l),s:ed(s[8],l)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(C=Fj(ys(r.from),ys(r.to)),r={},r.ms=C.milliseconds,r.M=C.months),d=new tg(r),am(e)&&Ba(e,"_locale")&&(d._locale=e._locale),am(e)&&Ba(e,"_isValid")&&(d._isValid=e._isValid),d}al.fn=tg.prototype;al.invalid=kj;function ed(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function Kx(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Fj(e,t){var r;return e.isValid()&&t.isValid()?(t=yy(t,e),e.isBefore(t)?r=Kx(e,t):(r=Kx(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function uR(e,t){return function(r,s){var l,d;return s!==null&&!isNaN(+s)&&(z2(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),d=r,r=s,s=d),l=al(r,s),dR(this,l,e),this}}function dR(e,t,r,s){var l=t._milliseconds,d=h0(t._days),C=h0(t._months);e.isValid()&&(s=s??!0,C&&Y2(e,kp(e,"Month")+C*r),d&&$2(e,"Date",kp(e,"Date")+d*r),l&&e._d.setTime(e._d.valueOf()+l*r),s&&Zn.updateOffset(e,d||C))}var Hj=uR(1,"add"),Vj=uR(-1,"subtract");function hR(e){return typeof e=="string"||e instanceof String}function qj(e){return Jc(e)||Fp(e)||hR(e)||au(e)||$j(e)||Wj(e)||e===null||e===void 0}function Wj(e){var t=ud(e)&&!ey(e),r=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l,d,C=s.length;for(l=0;l<C;l+=1)d=s[l],r=r||Ba(e,d);return t&&r}function $j(e){var t=Xc(e),r=!1;return t&&(r=e.filter(function(s){return!au(s)&&hR(e)}).length===0),t&&r}function Zj(e){var t=ud(e)&&!ey(e),r=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],l,d;for(l=0;l<s.length;l+=1)d=s[l],r=r||Ba(e,d);return t&&r}function Gj(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function Yj(e,t){arguments.length===1&&(arguments[0]?qj(arguments[0])?(e=arguments[0],t=void 0):Zj(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||ys(),s=yy(r,this).startOf("day"),l=Zn.calendarFormat(this,s)||"sameElse",d=t&&(Sl(t[l])?t[l].call(this,r):t[l]);return this.format(d||this.localeData().calendar(l,this,ys(r)))}function Kj(){return new Hp(this)}function Qj(e,t){var r=Jc(e)?e:ys(e);return this.isValid()&&r.isValid()?(t=Ac(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function Xj(e,t){var r=Jc(e)?e:ys(e);return this.isValid()&&r.isValid()?(t=Ac(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function Jj(e,t,r,s){var l=Jc(e)?e:ys(e),d=Jc(t)?t:ys(t);return this.isValid()&&l.isValid()&&d.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(l,r):!this.isBefore(l,r))&&(s[1]===")"?this.isBefore(d,r):!this.isAfter(d,r))):!1}function e8(e,t){var r=Jc(e)?e:ys(e),s;return this.isValid()&&r.isValid()?(t=Ac(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(s=r.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf())):!1}function t8(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function n8(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function r8(e,t,r){var s,l,d;if(!this.isValid())return NaN;if(s=yy(e,this),!s.isValid())return NaN;switch(l=(s.utcOffset()-this.utcOffset())*6e4,t=Ac(t),t){case"year":d=sm(this,s)/12;break;case"month":d=sm(this,s);break;case"quarter":d=sm(this,s)/3;break;case"second":d=(this-s)/1e3;break;case"minute":d=(this-s)/6e4;break;case"hour":d=(this-s)/36e5;break;case"day":d=(this-s-l)/864e5;break;case"week":d=(this-s-l)/6048e5;break;default:d=this-s}return r?d:kc(d)}function sm(e,t){if(e.date()<t.date())return-sm(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),s=e.clone().add(r,"months"),l,d;return t-s<0?(l=e.clone().add(r-1,"months"),d=(t-s)/(s-l)):(l=e.clone().add(r+1,"months"),d=(t-s)/(l-s)),-(r+d)||0}Zn.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Zn.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function a8(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function s8(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?rm(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Sl(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",rm(r,"Z")):rm(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function i8(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,s,l,d;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",l="-MM-DD[T]HH:mm:ss.SSS",d=t+'[")]',this.format(r+s+l+d)}function o8(e){e||(e=this.isUtc()?Zn.defaultFormatUtc:Zn.defaultFormat);var t=rm(this,e);return this.localeData().postformat(t)}function c8(e,t){return this.isValid()&&(Jc(e)&&e.isValid()||ys(e).isValid())?al({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function l8(e){return this.from(ys(),e)}function u8(e,t){return this.isValid()&&(Jc(e)&&e.isValid()||ys(e).isValid())?al({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function d8(e){return this.to(ys(),e)}function pR(e){var t;return e===void 0?this._locale._abbr:(t=su(e),t!=null&&(this._locale=t),this)}var fR=Dc("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function mR(){return this._locale}var bm=1e3,sh=60*bm,xm=60*sh,gR=(365*400+97)*24*xm;function ih(e,t){return(e%t+t)%t}function vR(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-gR:new Date(e,t,r).valueOf()}function yR(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-gR:Date.UTC(e,t,r)}function h8(e){var t,r;if(e=Ac(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?yR:vR,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ih(t+(this._isUTC?0:this.utcOffset()*sh),xm);break;case"minute":t=this._d.valueOf(),t-=ih(t,sh);break;case"second":t=this._d.valueOf(),t-=ih(t,bm);break}return this._d.setTime(t),Zn.updateOffset(this,!0),this}function p8(e){var t,r;if(e=Ac(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?yR:vR,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=xm-ih(t+(this._isUTC?0:this.utcOffset()*sh),xm)-1;break;case"minute":t=this._d.valueOf(),t+=sh-ih(t,sh)-1;break;case"second":t=this._d.valueOf(),t+=bm-ih(t,bm)-1;break}return this._d.setTime(t),Zn.updateOffset(this,!0),this}function f8(){return this._d.valueOf()-(this._offset||0)*6e4}function m8(){return Math.floor(this.valueOf()/1e3)}function g8(){return new Date(this.valueOf())}function v8(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function y8(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function _8(){return this.isValid()?this.toISOString():null}function b8(){return ty(this)}function x8(){return Ou({},la(this))}function w8(){return la(this).overflow}function S8(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Dr("N",0,0,"eraAbbr");Dr("NN",0,0,"eraAbbr");Dr("NNN",0,0,"eraAbbr");Dr("NNNN",0,0,"eraName");Dr("NNNNN",0,0,"eraNarrow");Dr("y",["y",1],"yo","eraYear");Dr("y",["yy",2],0,"eraYear");Dr("y",["yyy",3],0,"eraYear");Dr("y",["yyyy",4],0,"eraYear");sr("N",_y);sr("NN",_y);sr("NNN",_y);sr("NNNN",M8);sr("NNNNN",j8);as(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,s){var l=r._locale.erasParse(e,s,r._strict);l?la(r).era=l:la(r).invalidEra=e});sr("y",vh);sr("yy",vh);sr("yyy",vh);sr("yyyy",vh);sr("yo",L8);as(["y","yy","yyy","yyyy"],fo);as(["yo"],function(e,t,r,s){var l;r._locale._eraYearOrdinalRegex&&(l=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[fo]=r._locale.eraYearOrdinalParse(e,l):t[fo]=parseInt(e,10)});function R8(e,t){var r,s,l,d=this._eras||su("en")._eras;for(r=0,s=d.length;r<s;++r){switch(typeof d[r].since){case"string":l=Zn(d[r].since).startOf("day"),d[r].since=l.valueOf();break}switch(typeof d[r].until){case"undefined":d[r].until=1/0;break;case"string":l=Zn(d[r].until).startOf("day").valueOf(),d[r].until=l.valueOf();break}}return d}function E8(e,t,r){var s,l,d=this.eras(),C,T,b;for(e=e.toUpperCase(),s=0,l=d.length;s<l;++s)if(C=d[s].name.toUpperCase(),T=d[s].abbr.toUpperCase(),b=d[s].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(T===e)return d[s];break;case"NNNN":if(C===e)return d[s];break;case"NNNNN":if(b===e)return d[s];break}else if([C,T,b].indexOf(e)>=0)return d[s]}function k8(e,t){var r=e.since<=e.until?1:-1;return t===void 0?Zn(e.since).year():Zn(e.since).year()+(t-e.offset)*r}function C8(){var e,t,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return s[e].name;return""}function T8(){var e,t,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return s[e].narrow;return""}function P8(){var e,t,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return s[e].abbr;return""}function N8(){var e,t,r,s,l=this.localeData().eras();for(e=0,t=l.length;e<t;++e)if(r=l[e].since<=l[e].until?1:-1,s=this.clone().startOf("day").valueOf(),l[e].since<=s&&s<=l[e].until||l[e].until<=s&&s<=l[e].since)return(this.year()-Zn(l[e].since).year())*r+l[e].offset;return this.year()}function D8(e){return Ba(this,"_erasNameRegex")||by.call(this),e?this._erasNameRegex:this._erasRegex}function A8(e){return Ba(this,"_erasAbbrRegex")||by.call(this),e?this._erasAbbrRegex:this._erasRegex}function O8(e){return Ba(this,"_erasNarrowRegex")||by.call(this),e?this._erasNarrowRegex:this._erasRegex}function _y(e,t){return t.erasAbbrRegex(e)}function M8(e,t){return t.erasNameRegex(e)}function j8(e,t){return t.erasNarrowRegex(e)}function L8(e,t){return t._eraYearOrdinalRegex||vh}function by(){var e=[],t=[],r=[],s=[],l,d,C,T,b,u=this.eras();for(l=0,d=u.length;l<d;++l)C=tu(u[l].name),T=tu(u[l].abbr),b=tu(u[l].narrow),t.push(C),e.push(T),r.push(b),s.push(C),s.push(T),s.push(b);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}Dr(0,["gg",2],0,function(){return this.weekYear()%100});Dr(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ng(e,t){Dr(0,[e,e.length],0,t)}ng("gggg","weekYear");ng("ggggg","weekYear");ng("GGGG","isoWeekYear");ng("GGGGG","isoWeekYear");sr("G",Qm);sr("g",Qm);sr("GG",_s,lc);sr("gg",_s,lc);sr("GGGG",oy,iy);sr("gggg",oy,iy);sr("GGGGG",Km,Gm);sr("ggggg",Km,Gm);qp(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,s){t[s.substr(0,2)]=Ra(e)});qp(["gg","GG"],function(e,t,r,s){t[s]=Zn.parseTwoDigitYear(e)});function I8(e){return _R.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function B8(e){return _R.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function z8(){return nu(this.year(),1,4)}function U8(){return nu(this.isoWeekYear(),1,4)}function F8(){var e=this.localeData()._week;return nu(this.year(),e.dow,e.doy)}function H8(){var e=this.localeData()._week;return nu(this.weekYear(),e.dow,e.doy)}function _R(e,t,r,s,l){var d;return e==null?Tp(this,s,l).year:(d=nu(e,s,l),t>d&&(t=d),V8.call(this,e,t,r,s,l))}function V8(e,t,r,s,l){var d=X2(e,t,r,s,l),C=Cp(d.year,0,d.dayOfYear);return this.year(C.getUTCFullYear()),this.month(C.getUTCMonth()),this.date(C.getUTCDate()),this}Dr("Q",0,"Qo","quarter");sr("Q",F2);as("Q",function(e,t){t[Xl]=(Ra(e)-1)*3});function q8(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Dr("D",["DD",2],"Do","date");sr("D",_s,yh);sr("DD",_s,lc);sr("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});as(["D","DD"],vl);as("Do",function(e,t){t[vl]=Ra(e.match(_s)[0])});var bR=_h("Date",!0);Dr("DDD",["DDDD",3],"DDDo","dayOfYear");sr("DDD",Ym);sr("DDDD",H2);as(["DDD","DDDD"],function(e,t,r){r._dayOfYear=Ra(e)});function W8(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Dr("m",["mm",2],0,"minute");sr("m",_s,cy);sr("mm",_s,lc);as(["m","mm"],Yc);var $8=_h("Minutes",!1);Dr("s",["ss",2],0,"second");sr("s",_s,cy);sr("ss",_s,lc);as(["s","ss"],Jl);var Z8=_h("Seconds",!1);Dr("S",0,0,function(){return~~(this.millisecond()/100)});Dr(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Dr(0,["SSS",3],0,"millisecond");Dr(0,["SSSS",4],0,function(){return this.millisecond()*10});Dr(0,["SSSSS",5],0,function(){return this.millisecond()*100});Dr(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Dr(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Dr(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Dr(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});sr("S",Ym,F2);sr("SS",Ym,lc);sr("SSS",Ym,H2);var Mu,xR;for(Mu="SSSS";Mu.length<=9;Mu+="S")sr(Mu,vh);function G8(e,t){t[sd]=Ra(("0."+e)*1e3)}for(Mu="S";Mu.length<=9;Mu+="S")as(Mu,G8);xR=_h("Milliseconds",!1);Dr("z",0,0,"zoneAbbr");Dr("zz",0,0,"zoneName");function Y8(){return this._isUTC?"UTC":""}function K8(){return this._isUTC?"Coordinated Universal Time":""}var _n=Hp.prototype;_n.add=Hj;_n.calendar=Yj;_n.clone=Kj;_n.diff=r8;_n.endOf=p8;_n.format=o8;_n.from=c8;_n.fromNow=l8;_n.to=u8;_n.toNow=d8;_n.get=iM;_n.invalidAt=w8;_n.isAfter=Qj;_n.isBefore=Xj;_n.isBetween=Jj;_n.isSame=e8;_n.isSameOrAfter=t8;_n.isSameOrBefore=n8;_n.isValid=b8;_n.lang=fR;_n.locale=pR;_n.localeData=mR;_n.max=bj;_n.min=_j;_n.parsingFlags=x8;_n.set=oM;_n.startOf=h8;_n.subtract=Vj;_n.toArray=v8;_n.toObject=y8;_n.toDate=g8;_n.toISOString=s8;_n.inspect=i8;typeof Symbol<"u"&&Symbol.for!=null&&(_n[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});_n.toJSON=_8;_n.toString=a8;_n.unix=m8;_n.valueOf=f8;_n.creationData=S8;_n.eraName=C8;_n.eraNarrow=T8;_n.eraAbbr=P8;_n.eraYear=N8;_n.year=W2;_n.isLeapYear=sM;_n.weekYear=I8;_n.isoWeekYear=B8;_n.quarter=_n.quarters=q8;_n.month=K2;_n.daysInMonth=gM;_n.week=_n.weeks=RM;_n.isoWeek=_n.isoWeeks=EM;_n.weeksInYear=F8;_n.weeksInWeekYear=H8;_n.isoWeeksInYear=z8;_n.isoWeeksInISOWeekYear=U8;_n.date=bR;_n.day=_n.days=BM;_n.weekday=zM;_n.isoWeekday=UM;_n.dayOfYear=W8;_n.hour=_n.hours=ZM;_n.minute=_n.minutes=$8;_n.second=_n.seconds=Z8;_n.millisecond=_n.milliseconds=xR;_n.utcOffset=Pj;_n.utc=Dj;_n.local=Aj;_n.parseZone=Oj;_n.hasAlignedHourOffset=Mj;_n.isDST=jj;_n.isLocal=Ij;_n.isUtcOffset=Bj;_n.isUtc=lR;_n.isUTC=lR;_n.zoneAbbr=Y8;_n.zoneName=K8;_n.dates=Dc("dates accessor is deprecated. Use date instead.",bR);_n.months=Dc("months accessor is deprecated. Use month instead",K2);_n.years=Dc("years accessor is deprecated. Use year instead",W2);_n.zone=Dc("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Nj);_n.isDSTShifted=Dc("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Lj);function Q8(e){return ys(e*1e3)}function X8(){return ys.apply(null,arguments).parseZone()}function wR(e){return e}var za=ry.prototype;za.calendar=IO;za.longDateFormat=FO;za.invalidDate=VO;za.ordinal=$O;za.preparse=wR;za.postformat=wR;za.relativeTime=GO;za.pastFuture=YO;za.set=jO;za.eras=R8;za.erasParse=E8;za.erasConvertYear=k8;za.erasAbbrRegex=A8;za.erasNameRegex=D8;za.erasNarrowRegex=O8;za.months=hM;za.monthsShort=pM;za.monthsParse=mM;za.monthsRegex=yM;za.monthsShortRegex=vM;za.week=bM;za.firstDayOfYear=SM;za.firstDayOfWeek=wM;za.weekdays=OM;za.weekdaysMin=jM;za.weekdaysShort=MM;za.weekdaysParse=IM;za.weekdaysRegex=FM;za.weekdaysShortRegex=HM;za.weekdaysMinRegex=VM;za.isPM=WM;za.meridiem=GM;function wm(e,t,r,s){var l=su(),d=wl().set(s,t);return l[r](d,e)}function SR(e,t,r){if(au(e)&&(t=e,e=void 0),e=e||"",t!=null)return wm(e,t,r,"month");var s,l=[];for(s=0;s<12;s++)l[s]=wm(e,s,r,"month");return l}function xy(e,t,r,s){typeof e=="boolean"?(au(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,au(t)&&(r=t,t=void 0),t=t||"");var l=su(),d=e?l._week.dow:0,C,T=[];if(r!=null)return wm(t,(r+d)%7,s,"day");for(C=0;C<7;C++)T[C]=wm(t,(C+d)%7,s,"day");return T}function J8(e,t){return SR(e,t,"months")}function eL(e,t){return SR(e,t,"monthsShort")}function tL(e,t,r){return xy(e,t,r,"weekdays")}function nL(e,t,r){return xy(e,t,r,"weekdaysShort")}function rL(e,t,r){return xy(e,t,r,"weekdaysMin")}Lu("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=Ra(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});Zn.lang=Dc("moment.lang is deprecated. Use moment.locale instead.",Lu);Zn.langData=Dc("moment.langData is deprecated. Use moment.localeData instead.",su);var Yl=Math.abs;function aL(){var e=this._data;return this._milliseconds=Yl(this._milliseconds),this._days=Yl(this._days),this._months=Yl(this._months),e.milliseconds=Yl(e.milliseconds),e.seconds=Yl(e.seconds),e.minutes=Yl(e.minutes),e.hours=Yl(e.hours),e.months=Yl(e.months),e.years=Yl(e.years),this}function RR(e,t,r,s){var l=al(t,r);return e._milliseconds+=s*l._milliseconds,e._days+=s*l._days,e._months+=s*l._months,e._bubble()}function sL(e,t){return RR(this,e,t,1)}function iL(e,t){return RR(this,e,t,-1)}function Qx(e){return e<0?Math.floor(e):Math.ceil(e)}function oL(){var e=this._milliseconds,t=this._days,r=this._months,s=this._data,l,d,C,T,b;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=Qx(f0(r)+t)*864e5,t=0,r=0),s.milliseconds=e%1e3,l=kc(e/1e3),s.seconds=l%60,d=kc(l/60),s.minutes=d%60,C=kc(d/60),s.hours=C%24,t+=kc(C/24),b=kc(ER(t)),r+=b,t-=Qx(f0(b)),T=kc(r/12),r%=12,s.days=t,s.months=r,s.years=T,this}function ER(e){return e*4800/146097}function f0(e){return e*146097/4800}function cL(e){if(!this.isValid())return NaN;var t,r,s=this._milliseconds;if(e=Ac(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+s/864e5,r=this._months+ER(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(f0(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return t*24+s/36e5;case"minute":return t*1440+s/6e4;case"second":return t*86400+s/1e3;case"millisecond":return Math.floor(t*864e5)+s;default:throw new Error("Unknown unit "+e)}}function iu(e){return function(){return this.as(e)}}var kR=iu("ms"),lL=iu("s"),uL=iu("m"),dL=iu("h"),hL=iu("d"),pL=iu("w"),fL=iu("M"),mL=iu("Q"),gL=iu("y"),vL=kR;function yL(){return al(this)}function _L(e){return e=Ac(e),this.isValid()?this[e+"s"]():NaN}function gd(e){return function(){return this.isValid()?this._data[e]:NaN}}var bL=gd("milliseconds"),xL=gd("seconds"),wL=gd("minutes"),SL=gd("hours"),RL=gd("days"),EL=gd("months"),kL=gd("years");function CL(){return kc(this.days()/7)}var Ql=Math.round,th={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function TL(e,t,r,s,l){return l.relativeTime(t||1,!!r,e,s)}function PL(e,t,r,s){var l=al(e).abs(),d=Ql(l.as("s")),C=Ql(l.as("m")),T=Ql(l.as("h")),b=Ql(l.as("d")),u=Ql(l.as("M")),x=Ql(l.as("w")),f=Ql(l.as("y")),y=d<=r.ss&&["s",d]||d<r.s&&["ss",d]||C<=1&&["m"]||C<r.m&&["mm",C]||T<=1&&["h"]||T<r.h&&["hh",T]||b<=1&&["d"]||b<r.d&&["dd",b];return r.w!=null&&(y=y||x<=1&&["w"]||x<r.w&&["ww",x]),y=y||u<=1&&["M"]||u<r.M&&["MM",u]||f<=1&&["y"]||["yy",f],y[2]=t,y[3]=+e>0,y[4]=s,TL.apply(null,y)}function NL(e){return e===void 0?Ql:typeof e=="function"?(Ql=e,!0):!1}function DL(e,t){return th[e]===void 0?!1:t===void 0?th[e]:(th[e]=t,e==="s"&&(th.ss=t-1),!0)}function AL(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,s=th,l,d;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(s=Object.assign({},th,t),t.s!=null&&t.ss==null&&(s.ss=t.s-1)),l=this.localeData(),d=PL(this,!r,s,l),r&&(d=l.pastFuture(+this,d)),l.postformat(d)}var Bv=Math.abs;function Qd(e){return(e>0)-(e<0)||+e}function rg(){if(!this.isValid())return this.localeData().invalidDate();var e=Bv(this._milliseconds)/1e3,t=Bv(this._days),r=Bv(this._months),s,l,d,C,T=this.asSeconds(),b,u,x,f;return T?(s=kc(e/60),l=kc(s/60),e%=60,s%=60,d=kc(r/12),r%=12,C=e?e.toFixed(3).replace(/\.?0+$/,""):"",b=T<0?"-":"",u=Qd(this._months)!==Qd(T)?"-":"",x=Qd(this._days)!==Qd(T)?"-":"",f=Qd(this._milliseconds)!==Qd(T)?"-":"",b+"P"+(d?u+d+"Y":"")+(r?u+r+"M":"")+(t?x+t+"D":"")+(l||s||e?"T":"")+(l?f+l+"H":"")+(s?f+s+"M":"")+(e?f+C+"S":"")):"P0D"}var Na=tg.prototype;Na.isValid=Ej;Na.abs=aL;Na.add=sL;Na.subtract=iL;Na.as=cL;Na.asMilliseconds=kR;Na.asSeconds=lL;Na.asMinutes=uL;Na.asHours=dL;Na.asDays=hL;Na.asWeeks=pL;Na.asMonths=fL;Na.asQuarters=mL;Na.asYears=gL;Na.valueOf=vL;Na._bubble=oL;Na.clone=yL;Na.get=_L;Na.milliseconds=bL;Na.seconds=xL;Na.minutes=wL;Na.hours=SL;Na.days=RL;Na.weeks=CL;Na.months=EL;Na.years=kL;Na.humanize=AL;Na.toISOString=rg;Na.toString=rg;Na.toJSON=rg;Na.locale=pR;Na.localeData=mR;Na.toIsoString=Dc("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",rg);Na.lang=fR;Dr("X",0,0,"unix");Dr("x",0,0,"valueOf");sr("x",Qm);sr("X",JO);as("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});as("x",function(e,t,r){r._d=new Date(Ra(e))});//! moment.js
Zn.version="2.30.1";OO(ys);Zn.fn=_n;Zn.min=xj;Zn.max=wj;Zn.now=Sj;Zn.utc=wl;Zn.unix=Q8;Zn.months=J8;Zn.isDate=Fp;Zn.locale=Lu;Zn.invalid=Zm;Zn.duration=al;Zn.isMoment=Jc;Zn.weekdays=tL;Zn.parseZone=X8;Zn.localeData=su;Zn.isDuration=am;Zn.monthsShort=eL;Zn.weekdaysMin=rL;Zn.defineLocale=py;Zn.updateLocale=XM;Zn.locales=JM;Zn.weekdaysShort=nL;Zn.normalizeUnits=Ac;Zn.relativeTimeRounding=NL;Zn.relativeTimeThreshold=DL;Zn.calendarFormat=Gj;Zn.prototype=_n;Zn.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const CR=(e,t="L")=>{if(!e)return"";const r=typeof e=="string"&&e.match(/^\d{1,2}:\d{2}/)?Zn(e,["H:mm","HH:mm"]):Zn(e);return r.isValid()?r.format(t):""},TR=(e,t="hh:mm A")=>{if(!e)return"";const r=typeof e=="string"&&e.match(/^\d{1,2}:\d{2}/)?Zn(e,["H:mm","HH:mm"]):Zn(e);return r.isValid()?r.format(t):""},PR=(e,t="L LT")=>{if(!e)return"";const r=Zn(e);return r.isValid()?r.format(t):""},OL=e=>e?typeof e=="string"?e:e.name||e.fullName||(e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:null)||e.email||e._id||"":"",ML=e=>{if(!e||typeof e!="object")return"";const t=Array.isArray(e.speciality)?e.speciality.join(", "):e.speciality||"",r=e.hospital||"";return[t,r].filter(Boolean).join("  ")},NR=({appointment:e,role:t="user",onConfirm:r,onCancel:s,showConfirm:l=!1,showCancel:d=!1})=>{const C=e||{},T=t==="doctor"?OL(C.user):C.doctor&&typeof C.doctor=="object"?C.doctor.name:"",b=t==="doctor"?"":ML(C.doctor);return o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[o.jsxs("div",{className:"text-sm space-y-1",children:[T&&o.jsxs("div",{className:"font-semibold text-gray-900",children:[t==="doctor"?"Patient":"Doctor",": ",T]}),b&&o.jsx("div",{className:"text-gray-600 text-xs",children:b}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[o.jsxs("span",{className:"px-2 py-0.5 rounded bg-gray-200 text-gray-700 text-xs",children:[CR(C.date)," ",TR(C.time)]}),C.fee!==void 0&&o.jsxs("span",{className:"px-2 py-0.5 rounded bg-gray-200 text-gray-700 text-xs",children:["Fee: Rs. ",C.fee]}),C.status&&o.jsx("span",{className:`px-2 py-0.5 rounded text-xs capitalize ${C.status==="confirmed"?"bg-green-100 text-green-700":C.status==="cancelled"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:C.status}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${C.paymentDone?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:C.paymentDone?"Paid":"Unpaid"})]}),C.symptoms&&o.jsxs("div",{className:"text-gray-700 text-sm",children:[o.jsx("span",{className:"font-medium",children:"Symptoms:"})," ",C.symptoms]}),C.notes&&o.jsxs("div",{className:"text-gray-700 text-sm",children:[o.jsx("span",{className:"font-medium",children:"Notes:"})," ",C.notes]})]}),o.jsxs("div",{className:"flex gap-2",children:[l&&o.jsx("button",{className:"px-3 py-1 rounded bg-emerald-600 text-white text-sm",onClick:r,children:"Confirm"}),d&&o.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-sm",onClick:s,children:"Cancel"})]})]})},jL=()=>{const{ratings:e,addPlatformRating:t,updatePlatformRating:r,deletePlatformRating:s,getPlatformRatings:l}=zw(),{user:d}=si(),{admin:C}=cc(),{doctor:T}=ps(),[b,u]=Z.useState(!1),x=async({rating:E,review:_})=>{await t({rating:E,description:_}),await l(),u(!1)},f=async({rating:E,review:_})=>{await r({rating:E,review:_}),await l(),u(!1)},y=async()=>{await s(),await l(),u(!1)};return o.jsx("section",{className:"py-16 bg-emerald-50",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-emerald-900 mb-4",children:"What Our Patients Say"}),o.jsx("p",{className:"text-lg text-emerald-700 max-w-2xl mx-auto",children:"Read reviews from thousands of satisfied patients across Pakistan"})]}),o.jsxs("div",{className:"relative max-w-6xl mx-auto mb-8",children:[o.jsxs(f3,{opts:{align:"start",loop:!0,skipSnaps:!1,dragFree:!1,containScroll:"trimSnaps"},className:"w-full",children:[o.jsx(m3,{className:"-ml-4 md:-ml-6",children:e.map((E,_)=>o.jsx(g3,{className:"pl-4 md:pl-6 basis-full sm:basis-1/2 lg:basis-1/3",children:o.jsx("div",{className:"p-2",children:o.jsx(AO,{testimonial:E})})},_))}),o.jsx(v3,{className:"left-4 md:left-6 bg-white/80 hover:bg-white border-2 border-emerald-200 hover:border-emerald-300 shadow-lg"}),o.jsx(y3,{className:"right-4 md:right-6 bg-white/80 hover:bg-white border-2 border-emerald-200 hover:border-emerald-300 shadow-lg"})]}),o.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:e.map((E,_)=>o.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-300 hover:bg-emerald-500 transition-colors cursor-pointer"},_))}),o.jsx("div",{className:"text-center mt-4",children:o.jsx("p",{className:"text-sm text-emerald-600",children:" Swipe or use arrows to navigate  Click indicators to jump to specific reviews"})})]}),o.jsx("div",{className:"text-center",children:o.jsx(A2,{trigger:(d||C||T)&&o.jsx(rd,{variant:"default",size:"lg",className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300",children:"Rate Our Platform"}),open:b,onOpenChange:u,mode:"rating-and-review",onSubmit:x,onUpdate:f,onDelete:y,title:"Rate Our Platform",description:"Your feedback helps us improve QuickMed for everyone. Rate your overall experience with our healthcare platform, including ease of use, features, and service quality.",submitLabel:"Submit Rating"})})]})})},LL=()=>o.jsx("section",{className:"py-16 bg-white",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Why Choose QuickMed?"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Pakistan's most trusted healthcare platform with verified doctors and secure services"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:f6.map((e,t)=>o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-4xl mb-4",children:e.icon}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),o.jsx("p",{className:"text-gray-600 mb-3",children:e.description}),o.jsx("div",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:e.stat})]},t))})]})}),IL=()=>o.jsx("section",{className:"py-16 bg-gray-50",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Common Health Conditions"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Find expert doctors for the most common health conditions and symptoms"})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:v6.map((e,t)=>o.jsxs(ns,{to:e.href,className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 p-6 text-center group",children:[o.jsx("div",{className:"text-3xl mb-3",children:e.icon}),o.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2 group-hover:text-blue-600",children:e.title}),o.jsx("p",{className:"text-xs text-gray-500",children:e.description})]},t))})]})}),BL=()=>o.jsxs("main",{children:[o.jsx(CO,{}),o.jsx(IL,{}),o.jsx(LL,{}),o.jsx(PO,{}),o.jsx(TO,{}),o.jsx(jL,{})]});var Wp=e=>e.type==="checkbox",id=e=>e instanceof Date,Ro=e=>e==null;const DR=e=>typeof e=="object";var ai=e=>!Ro(e)&&!Array.isArray(e)&&DR(e)&&!id(e),zL=e=>ai(e)&&e.target?Wp(e.target)?e.target.checked:e.target.value:e,UL=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,FL=(e,t)=>e.has(UL(t)),HL=e=>{const t=e.constructor&&e.constructor.prototype;return ai(t)&&t.hasOwnProperty("isPrototypeOf")},wy=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Fi(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(wy&&(e instanceof Blob||s))&&(r||ai(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!HL(e))t=e;else for(const l in e)e.hasOwnProperty(l)&&(t[l]=Fi(e[l]));else return e;return t}var ag=e=>/^\w*$/.test(e),gi=e=>e===void 0,Sy=e=>Array.isArray(e)?e.filter(Boolean):[],Ry=e=>Sy(e.replace(/["|']|\]/g,"").split(/\.|\[/)),mr=(e,t,r)=>{if(!t||!ai(e))return r;const s=(ag(t)?[t]:Ry(t)).reduce((l,d)=>Ro(l)?l:l[d],e);return gi(s)||s===e?gi(e[t])?r:e[t]:s},ml=e=>typeof e=="boolean",cs=(e,t,r)=>{let s=-1;const l=ag(t)?[t]:Ry(t),d=l.length,C=d-1;for(;++s<d;){const T=l[s];let b=r;if(s!==C){const u=e[T];b=ai(u)||Array.isArray(u)?u:isNaN(+l[s+1])?{}:[]}if(T==="__proto__"||T==="constructor"||T==="prototype")return;e[T]=b,e=e[T]}};const Xx={BLUR:"blur",FOCUS_OUT:"focusout"},Zc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Kl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},VL=Wt.createContext(null);VL.displayName="HookFormContext";var qL=(e,t,r,s=!0)=>{const l={defaultValues:t._defaultValues};for(const d in e)Object.defineProperty(l,d,{get:()=>{const C=d;return t._proxyFormState[C]!==Zc.all&&(t._proxyFormState[C]=!s||Zc.all),e[C]}});return l};const WL=typeof window<"u"?Wt.useLayoutEffect:Wt.useEffect;var yl=e=>typeof e=="string",$L=(e,t,r,s,l)=>yl(e)?(s&&t.watch.add(e),mr(r,e,l)):Array.isArray(e)?e.map(d=>(s&&t.watch.add(d),mr(r,d))):(s&&(t.watchAll=!0),r),m0=e=>Ro(e)||!DR(e);function Au(e,t,r=new WeakSet){if(m0(e)||m0(t))return e===t;if(id(e)&&id(t))return e.getTime()===t.getTime();const s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const d of s){const C=e[d];if(!l.includes(d))return!1;if(d!=="ref"){const T=t[d];if(id(C)&&id(T)||ai(C)&&ai(T)||Array.isArray(C)&&Array.isArray(T)?!Au(C,T,r):C!==T)return!1}}return!0}var Ey=(e,t,r,s,l)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:l||!0}}:{},fp=e=>Array.isArray(e)?e:[e],Jx=()=>{let e=[];return{get observers(){return e},next:l=>{for(const d of e)d.next&&d.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(d=>d!==l)}}),unsubscribe:()=>{e=[]}}},Fo=e=>ai(e)&&!Object.keys(e).length,ky=e=>e.type==="file",Gc=e=>typeof e=="function",Sm=e=>{if(!wy)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},AR=e=>e.type==="select-multiple",Cy=e=>e.type==="radio",ZL=e=>Cy(e)||Wp(e),zv=e=>Sm(e)&&e.isConnected;function GL(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=gi(e)?s++:e[t[s++]];return e}function YL(e){for(const t in e)if(e.hasOwnProperty(t)&&!gi(e[t]))return!1;return!0}function mi(e,t){const r=Array.isArray(t)?t:ag(t)?[t]:Ry(t),s=r.length===1?e:GL(e,r),l=r.length-1,d=r[l];return s&&delete s[d],l!==0&&(ai(s)&&Fo(s)||Array.isArray(s)&&YL(s))&&mi(e,r.slice(0,-1)),e}var OR=e=>{for(const t in e)if(Gc(e[t]))return!0;return!1};function Rm(e,t={}){const r=Array.isArray(e);if(ai(e)||r)for(const s in e)Array.isArray(e[s])||ai(e[s])&&!OR(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Rm(e[s],t[s])):Ro(e[s])||(t[s]=!0);return t}function MR(e,t,r){const s=Array.isArray(e);if(ai(e)||s)for(const l in e)Array.isArray(e[l])||ai(e[l])&&!OR(e[l])?gi(t)||m0(r[l])?r[l]=Array.isArray(e[l])?Rm(e[l],[]):{...Rm(e[l])}:MR(e[l],Ro(t)?{}:t[l],r[l]):r[l]=!Au(e[l],t[l]);return r}var ip=(e,t)=>MR(e,t,Rm(t));const e1={value:!1,isValid:!1},t1={value:!0,isValid:!0};var jR=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!gi(e[0].attributes.value)?gi(e[0].value)||e[0].value===""?t1:{value:e[0].value,isValid:!0}:t1:e1}return e1},LR=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>gi(e)?e:t?e===""?NaN:e&&+e:r&&yl(e)?new Date(e):s?s(e):e;const n1={isValid:!1,value:null};var IR=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,n1):n1;function r1(e){const t=e.ref;return ky(t)?t.files:Cy(t)?IR(e.refs).value:AR(t)?[...t.selectedOptions].map(({value:r})=>r):Wp(t)?jR(e.refs).value:LR(gi(t.value)?e.ref.value:t.value,e)}var KL=(e,t,r,s)=>{const l={};for(const d of e){const C=mr(t,d);C&&cs(l,d,C._f)}return{criteriaMode:r,names:[...e],fields:l,shouldUseNativeValidation:s}},Em=e=>e instanceof RegExp,op=e=>gi(e)?e:Em(e)?e.source:ai(e)?Em(e.value)?e.value.source:e.value:e,a1=e=>({isOnSubmit:!e||e===Zc.onSubmit,isOnBlur:e===Zc.onBlur,isOnChange:e===Zc.onChange,isOnAll:e===Zc.all,isOnTouch:e===Zc.onTouched});const s1="AsyncFunction";var QL=e=>!!e&&!!e.validate&&!!(Gc(e.validate)&&e.validate.constructor.name===s1||ai(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===s1)),XL=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),i1=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const mp=(e,t,r,s)=>{for(const l of r||Object.keys(e)){const d=mr(e,l);if(d){const{_f:C,...T}=d;if(C){if(C.refs&&C.refs[0]&&t(C.refs[0],l)&&!s)return!0;if(C.ref&&t(C.ref,C.name)&&!s)return!0;if(mp(T,t))break}else if(ai(T)&&mp(T,t))break}}};function o1(e,t,r){const s=mr(e,r);if(s||ag(r))return{error:s,name:r};const l=r.split(".");for(;l.length;){const d=l.join("."),C=mr(t,d),T=mr(e,d);if(C&&!Array.isArray(C)&&r!==d)return{name:r};if(T&&T.type)return{name:d,error:T};if(T&&T.root&&T.root.type)return{name:`${d}.root`,error:T.root};l.pop()}return{name:r}}var JL=(e,t,r,s)=>{r(e);const{name:l,...d}=e;return Fo(d)||Object.keys(d).length>=Object.keys(t).length||Object.keys(d).find(C=>t[C]===(!s||Zc.all))},e7=(e,t,r)=>!e||!t||e===t||fp(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),t7=(e,t,r,s,l)=>l.isOnAll?!1:!r&&l.isOnTouch?!(t||e):(r?s.isOnBlur:l.isOnBlur)?!e:(r?s.isOnChange:l.isOnChange)?e:!0,n7=(e,t)=>!Sy(mr(e,t)).length&&mi(e,t),r7=(e,t,r)=>{const s=fp(mr(e,r));return cs(s,"root",t[r]),cs(e,r,s),e},im=e=>yl(e);function c1(e,t,r="validate"){if(im(e)||Array.isArray(e)&&e.every(im)||ml(e)&&!e)return{type:r,message:im(e)?e:"",ref:t}}var Xd=e=>ai(e)&&!Em(e)?e:{value:e,message:""},l1=async(e,t,r,s,l,d)=>{const{ref:C,refs:T,required:b,maxLength:u,minLength:x,min:f,max:y,pattern:E,validate:_,name:m,valueAsNumber:k,mount:w}=e._f,U=mr(r,m);if(!w||t.has(m))return{};const g=T?T[0]:C,A=O=>{l&&g.reportValidity&&(g.setCustomValidity(ml(O)?"":O||""),g.reportValidity())},P={},z=Cy(C),N=Wp(C),R=z||N,S=(k||ky(C))&&gi(C.value)&&gi(U)||Sm(C)&&C.value===""||U===""||Array.isArray(U)&&!U.length,p=Ey.bind(null,m,s,P),D=(O,j,I,H=Kl.maxLength,F=Kl.minLength)=>{const $=O?j:I;P[m]={type:O?H:F,message:$,ref:C,...p(O?H:F,$)}};if(d?!Array.isArray(U)||!U.length:b&&(!R&&(S||Ro(U))||ml(U)&&!U||N&&!jR(T).isValid||z&&!IR(T).isValid)){const{value:O,message:j}=im(b)?{value:!!b,message:b}:Xd(b);if(O&&(P[m]={type:Kl.required,message:j,ref:g,...p(Kl.required,j)},!s))return A(j),P}if(!S&&(!Ro(f)||!Ro(y))){let O,j;const I=Xd(y),H=Xd(f);if(!Ro(U)&&!isNaN(U)){const F=C.valueAsNumber||U&&+U;Ro(I.value)||(O=F>I.value),Ro(H.value)||(j=F<H.value)}else{const F=C.valueAsDate||new Date(U),$=J=>new Date(new Date().toDateString()+" "+J),q=C.type=="time",se=C.type=="week";yl(I.value)&&U&&(O=q?$(U)>$(I.value):se?U>I.value:F>new Date(I.value)),yl(H.value)&&U&&(j=q?$(U)<$(H.value):se?U<H.value:F<new Date(H.value))}if((O||j)&&(D(!!O,I.message,H.message,Kl.max,Kl.min),!s))return A(P[m].message),P}if((u||x)&&!S&&(yl(U)||d&&Array.isArray(U))){const O=Xd(u),j=Xd(x),I=!Ro(O.value)&&U.length>+O.value,H=!Ro(j.value)&&U.length<+j.value;if((I||H)&&(D(I,O.message,j.message),!s))return A(P[m].message),P}if(E&&!S&&yl(U)){const{value:O,message:j}=Xd(E);if(Em(O)&&!U.match(O)&&(P[m]={type:Kl.pattern,message:j,ref:C,...p(Kl.pattern,j)},!s))return A(j),P}if(_){if(Gc(_)){const O=await _(U,r),j=c1(O,g);if(j&&(P[m]={...j,...p(Kl.validate,j.message)},!s))return A(j.message),P}else if(ai(_)){let O={};for(const j in _){if(!Fo(O)&&!s)break;const I=c1(await _[j](U,r),g,j);I&&(O={...I,...p(j,I.message)},A(I.message),s&&(P[m]=O))}if(!Fo(O)&&(P[m]={ref:g,...O},!s))return P}}return A(!0),P};const a7={mode:Zc.onSubmit,reValidateMode:Zc.onChange,shouldFocusError:!0};function s7(e={}){let t={...a7,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Gc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},l=ai(t.defaultValues)||ai(t.values)?Fi(t.defaultValues||t.values)||{}:{},d=t.shouldUnregister?{}:Fi(l),C={action:!1,mount:!1,watch:!1},T={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},b,u=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...x};const y={array:Jx(),state:Jx()},E=t.criteriaMode===Zc.all,_=Ne=>Me=>{clearTimeout(u),u=setTimeout(Ne,Me)},m=async Ne=>{if(!t.disabled&&(x.isValid||f.isValid||Ne)){const Me=t.resolver?Fo((await N()).errors):await S(s,!0);Me!==r.isValid&&y.state.next({isValid:Me})}},k=(Ne,Me)=>{!t.disabled&&(x.isValidating||x.validatingFields||f.isValidating||f.validatingFields)&&((Ne||Array.from(T.mount)).forEach(Ze=>{Ze&&(Me?cs(r.validatingFields,Ze,Me):mi(r.validatingFields,Ze))}),y.state.next({validatingFields:r.validatingFields,isValidating:!Fo(r.validatingFields)}))},w=(Ne,Me=[],Ze,Ft,Ct=!0,wt=!0)=>{if(Ft&&Ze&&!t.disabled){if(C.action=!0,wt&&Array.isArray(mr(s,Ne))){const un=Ze(mr(s,Ne),Ft.argA,Ft.argB);Ct&&cs(s,Ne,un)}if(wt&&Array.isArray(mr(r.errors,Ne))){const un=Ze(mr(r.errors,Ne),Ft.argA,Ft.argB);Ct&&cs(r.errors,Ne,un),n7(r.errors,Ne)}if((x.touchedFields||f.touchedFields)&&wt&&Array.isArray(mr(r.touchedFields,Ne))){const un=Ze(mr(r.touchedFields,Ne),Ft.argA,Ft.argB);Ct&&cs(r.touchedFields,Ne,un)}(x.dirtyFields||f.dirtyFields)&&(r.dirtyFields=ip(l,d)),y.state.next({name:Ne,isDirty:D(Ne,Me),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else cs(d,Ne,Me)},U=(Ne,Me)=>{cs(r.errors,Ne,Me),y.state.next({errors:r.errors})},g=Ne=>{r.errors=Ne,y.state.next({errors:r.errors,isValid:!1})},A=(Ne,Me,Ze,Ft)=>{const Ct=mr(s,Ne);if(Ct){const wt=mr(d,Ne,gi(Ze)?mr(l,Ne):Ze);gi(wt)||Ft&&Ft.defaultChecked||Me?cs(d,Ne,Me?wt:r1(Ct._f)):I(Ne,wt),C.mount&&m()}},P=(Ne,Me,Ze,Ft,Ct)=>{let wt=!1,un=!1;const Sn={name:Ne};if(!t.disabled){if(!Ze||Ft){(x.isDirty||f.isDirty)&&(un=r.isDirty,r.isDirty=Sn.isDirty=D(),wt=un!==Sn.isDirty);const Ut=Au(mr(l,Ne),Me);un=!!mr(r.dirtyFields,Ne),Ut?mi(r.dirtyFields,Ne):cs(r.dirtyFields,Ne,!0),Sn.dirtyFields=r.dirtyFields,wt=wt||(x.dirtyFields||f.dirtyFields)&&un!==!Ut}if(Ze){const Ut=mr(r.touchedFields,Ne);Ut||(cs(r.touchedFields,Ne,Ze),Sn.touchedFields=r.touchedFields,wt=wt||(x.touchedFields||f.touchedFields)&&Ut!==Ze)}wt&&Ct&&y.state.next(Sn)}return wt?Sn:{}},z=(Ne,Me,Ze,Ft)=>{const Ct=mr(r.errors,Ne),wt=(x.isValid||f.isValid)&&ml(Me)&&r.isValid!==Me;if(t.delayError&&Ze?(b=_(()=>U(Ne,Ze)),b(t.delayError)):(clearTimeout(u),b=null,Ze?cs(r.errors,Ne,Ze):mi(r.errors,Ne)),(Ze?!Au(Ct,Ze):Ct)||!Fo(Ft)||wt){const un={...Ft,...wt&&ml(Me)?{isValid:Me}:{},errors:r.errors,name:Ne};r={...r,...un},y.state.next(un)}},N=async Ne=>{k(Ne,!0);const Me=await t.resolver(d,t.context,KL(Ne||T.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return k(Ne),Me},R=async Ne=>{const{errors:Me}=await N(Ne);if(Ne)for(const Ze of Ne){const Ft=mr(Me,Ze);Ft?cs(r.errors,Ze,Ft):mi(r.errors,Ze)}else r.errors=Me;return Me},S=async(Ne,Me,Ze={valid:!0})=>{for(const Ft in Ne){const Ct=Ne[Ft];if(Ct){const{_f:wt,...un}=Ct;if(wt){const Sn=T.array.has(wt.name),Ut=Ct._f&&QL(Ct._f);Ut&&x.validatingFields&&k([Ft],!0);const nr=await l1(Ct,T.disabled,d,E,t.shouldUseNativeValidation&&!Me,Sn);if(Ut&&x.validatingFields&&k([Ft]),nr[wt.name]&&(Ze.valid=!1,Me))break;!Me&&(mr(nr,wt.name)?Sn?r7(r.errors,nr,wt.name):cs(r.errors,wt.name,nr[wt.name]):mi(r.errors,wt.name))}!Fo(un)&&await S(un,Me,Ze)}}return Ze.valid},p=()=>{for(const Ne of T.unMount){const Me=mr(s,Ne);Me&&(Me._f.refs?Me._f.refs.every(Ze=>!zv(Ze)):!zv(Me._f.ref))&&_e(Ne)}T.unMount=new Set},D=(Ne,Me)=>!t.disabled&&(Ne&&Me&&cs(d,Ne,Me),!Au(J(),l)),O=(Ne,Me,Ze)=>$L(Ne,T,{...C.mount?d:gi(Me)?l:yl(Ne)?{[Ne]:Me}:Me},Ze,Me),j=Ne=>Sy(mr(C.mount?d:l,Ne,t.shouldUnregister?mr(l,Ne,[]):[])),I=(Ne,Me,Ze={})=>{const Ft=mr(s,Ne);let Ct=Me;if(Ft){const wt=Ft._f;wt&&(!wt.disabled&&cs(d,Ne,LR(Me,wt)),Ct=Sm(wt.ref)&&Ro(Me)?"":Me,AR(wt.ref)?[...wt.ref.options].forEach(un=>un.selected=Ct.includes(un.value)):wt.refs?Wp(wt.ref)?wt.refs.forEach(un=>{(!un.defaultChecked||!un.disabled)&&(Array.isArray(Ct)?un.checked=!!Ct.find(Sn=>Sn===un.value):un.checked=Ct===un.value||!!Ct)}):wt.refs.forEach(un=>un.checked=un.value===Ct):ky(wt.ref)?wt.ref.value="":(wt.ref.value=Ct,wt.ref.type||y.state.next({name:Ne,values:Fi(d)})))}(Ze.shouldDirty||Ze.shouldTouch)&&P(Ne,Ct,Ze.shouldTouch,Ze.shouldDirty,!0),Ze.shouldValidate&&se(Ne)},H=(Ne,Me,Ze)=>{for(const Ft in Me){if(!Me.hasOwnProperty(Ft))return;const Ct=Me[Ft],wt=Ne+"."+Ft,un=mr(s,wt);(T.array.has(Ne)||ai(Ct)||un&&!un._f)&&!id(Ct)?H(wt,Ct,Ze):I(wt,Ct,Ze)}},F=(Ne,Me,Ze={})=>{const Ft=mr(s,Ne),Ct=T.array.has(Ne),wt=Fi(Me);cs(d,Ne,wt),Ct?(y.array.next({name:Ne,values:Fi(d)}),(x.isDirty||x.dirtyFields||f.isDirty||f.dirtyFields)&&Ze.shouldDirty&&y.state.next({name:Ne,dirtyFields:ip(l,d),isDirty:D(Ne,wt)})):Ft&&!Ft._f&&!Ro(wt)?H(Ne,wt,Ze):I(Ne,wt,Ze),i1(Ne,T)&&y.state.next({...r,name:Ne}),y.state.next({name:C.mount?Ne:void 0,values:Fi(d)})},$=async Ne=>{C.mount=!0;const Me=Ne.target;let Ze=Me.name,Ft=!0;const Ct=mr(s,Ze),wt=Ut=>{Ft=Number.isNaN(Ut)||id(Ut)&&isNaN(Ut.getTime())||Au(Ut,mr(d,Ze,Ut))},un=a1(t.mode),Sn=a1(t.reValidateMode);if(Ct){let Ut,nr;const Ar=Me.type?r1(Ct._f):zL(Ne),Sr=Ne.type===Xx.BLUR||Ne.type===Xx.FOCUS_OUT,Ur=!XL(Ct._f)&&!t.resolver&&!mr(r.errors,Ze)&&!Ct._f.deps||t7(Sr,mr(r.touchedFields,Ze),r.isSubmitted,Sn,un),xr=i1(Ze,T,Sr);cs(d,Ze,Ar),Sr?(!Me||!Me.readOnly)&&(Ct._f.onBlur&&Ct._f.onBlur(Ne),b&&b(0)):Ct._f.onChange&&Ct._f.onChange(Ne);const Or=P(Ze,Ar,Sr),Kr=!Fo(Or)||xr;if(!Sr&&y.state.next({name:Ze,type:Ne.type,values:Fi(d)}),Ur)return(x.isValid||f.isValid)&&(t.mode==="onBlur"?Sr&&m():Sr||m()),Kr&&y.state.next({name:Ze,...xr?{}:Or});if(!Sr&&xr&&y.state.next({...r}),t.resolver){const{errors:va}=await N([Ze]);if(wt(Ar),Ft){const ra=o1(r.errors,s,Ze),ua=o1(va,s,ra.name||Ze);Ut=ua.error,Ze=ua.name,nr=Fo(va)}}else k([Ze],!0),Ut=(await l1(Ct,T.disabled,d,E,t.shouldUseNativeValidation))[Ze],k([Ze]),wt(Ar),Ft&&(Ut?nr=!1:(x.isValid||f.isValid)&&(nr=await S(s,!0)));Ft&&(Ct._f.deps&&se(Ct._f.deps),z(Ze,nr,Ut,Or))}},q=(Ne,Me)=>{if(mr(r.errors,Me)&&Ne.focus)return Ne.focus(),1},se=async(Ne,Me={})=>{let Ze,Ft;const Ct=fp(Ne);if(t.resolver){const wt=await R(gi(Ne)?Ne:Ct);Ze=Fo(wt),Ft=Ne?!Ct.some(un=>mr(wt,un)):Ze}else Ne?(Ft=(await Promise.all(Ct.map(async wt=>{const un=mr(s,wt);return await S(un&&un._f?{[wt]:un}:un)}))).every(Boolean),!(!Ft&&!r.isValid)&&m()):Ft=Ze=await S(s);return y.state.next({...!yl(Ne)||(x.isValid||f.isValid)&&Ze!==r.isValid?{}:{name:Ne},...t.resolver||!Ne?{isValid:Ze}:{},errors:r.errors}),Me.shouldFocus&&!Ft&&mp(s,q,Ne?Ct:T.mount),Ft},J=Ne=>{const Me={...C.mount?d:l};return gi(Ne)?Me:yl(Ne)?mr(Me,Ne):Ne.map(Ze=>mr(Me,Ze))},be=(Ne,Me)=>({invalid:!!mr((Me||r).errors,Ne),isDirty:!!mr((Me||r).dirtyFields,Ne),error:mr((Me||r).errors,Ne),isValidating:!!mr(r.validatingFields,Ne),isTouched:!!mr((Me||r).touchedFields,Ne)}),Re=Ne=>{Ne&&fp(Ne).forEach(Me=>mi(r.errors,Me)),y.state.next({errors:Ne?r.errors:{}})},Se=(Ne,Me,Ze)=>{const Ft=(mr(s,Ne,{_f:{}})._f||{}).ref,Ct=mr(r.errors,Ne)||{},{ref:wt,message:un,type:Sn,...Ut}=Ct;cs(r.errors,Ne,{...Ut,...Me,ref:Ft}),y.state.next({name:Ne,errors:r.errors,isValid:!1}),Ze&&Ze.shouldFocus&&Ft&&Ft.focus&&Ft.focus()},me=(Ne,Me)=>Gc(Ne)?y.state.subscribe({next:Ze=>"values"in Ze&&Ne(O(void 0,Me),Ze)}):O(Ne,Me,!0),Ce=Ne=>y.state.subscribe({next:Me=>{e7(Ne.name,Me.name,Ne.exact)&&JL(Me,Ne.formState||x,Pn,Ne.reRenderRoot)&&Ne.callback({values:{...d},...r,...Me,defaultValues:l})}}).unsubscribe,Be=Ne=>(C.mount=!0,f={...f,...Ne.formState},Ce({...Ne,formState:f})),_e=(Ne,Me={})=>{for(const Ze of Ne?fp(Ne):T.mount)T.mount.delete(Ze),T.array.delete(Ze),Me.keepValue||(mi(s,Ze),mi(d,Ze)),!Me.keepError&&mi(r.errors,Ze),!Me.keepDirty&&mi(r.dirtyFields,Ze),!Me.keepTouched&&mi(r.touchedFields,Ze),!Me.keepIsValidating&&mi(r.validatingFields,Ze),!t.shouldUnregister&&!Me.keepDefaultValue&&mi(l,Ze);y.state.next({values:Fi(d)}),y.state.next({...r,...Me.keepDirty?{isDirty:D()}:{}}),!Me.keepIsValid&&m()},Ye=({disabled:Ne,name:Me})=>{(ml(Ne)&&C.mount||Ne||T.disabled.has(Me))&&(Ne?T.disabled.add(Me):T.disabled.delete(Me))},Qe=(Ne,Me={})=>{let Ze=mr(s,Ne);const Ft=ml(Me.disabled)||ml(t.disabled);return cs(s,Ne,{...Ze||{},_f:{...Ze&&Ze._f?Ze._f:{ref:{name:Ne}},name:Ne,mount:!0,...Me}}),T.mount.add(Ne),Ze?Ye({disabled:ml(Me.disabled)?Me.disabled:t.disabled,name:Ne}):A(Ne,!0,Me.value),{...Ft?{disabled:Me.disabled||t.disabled}:{},...t.progressive?{required:!!Me.required,min:op(Me.min),max:op(Me.max),minLength:op(Me.minLength),maxLength:op(Me.maxLength),pattern:op(Me.pattern)}:{},name:Ne,onChange:$,onBlur:$,ref:Ct=>{if(Ct){Qe(Ne,Me),Ze=mr(s,Ne);const wt=gi(Ct.value)&&Ct.querySelectorAll&&Ct.querySelectorAll("input,select,textarea")[0]||Ct,un=ZL(wt),Sn=Ze._f.refs||[];if(un?Sn.find(Ut=>Ut===wt):wt===Ze._f.ref)return;cs(s,Ne,{_f:{...Ze._f,...un?{refs:[...Sn.filter(zv),wt,...Array.isArray(mr(l,Ne))?[{}]:[]],ref:{type:wt.type,name:Ne}}:{ref:wt}}}),A(Ne,!1,void 0,wt)}else Ze=mr(s,Ne,{}),Ze._f&&(Ze._f.mount=!1),(t.shouldUnregister||Me.shouldUnregister)&&!(FL(T.array,Ne)&&C.action)&&T.unMount.add(Ne)}}},Ge=()=>t.shouldFocusError&&mp(s,q,T.mount),He=Ne=>{ml(Ne)&&(y.state.next({disabled:Ne}),mp(s,(Me,Ze)=>{const Ft=mr(s,Ze);Ft&&(Me.disabled=Ft._f.disabled||Ne,Array.isArray(Ft._f.refs)&&Ft._f.refs.forEach(Ct=>{Ct.disabled=Ft._f.disabled||Ne}))},0,!1))},Te=(Ne,Me)=>async Ze=>{let Ft;Ze&&(Ze.preventDefault&&Ze.preventDefault(),Ze.persist&&Ze.persist());let Ct=Fi(d);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:wt,values:un}=await N();r.errors=wt,Ct=Fi(un)}else await S(s);if(T.disabled.size)for(const wt of T.disabled)mi(Ct,wt);if(mi(r.errors,"root"),Fo(r.errors)){y.state.next({errors:{}});try{await Ne(Ct,Ze)}catch(wt){Ft=wt}}else Me&&await Me({...r.errors},Ze),Ge(),setTimeout(Ge);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Fo(r.errors)&&!Ft,submitCount:r.submitCount+1,errors:r.errors}),Ft)throw Ft},dt=(Ne,Me={})=>{mr(s,Ne)&&(gi(Me.defaultValue)?F(Ne,Fi(mr(l,Ne))):(F(Ne,Me.defaultValue),cs(l,Ne,Fi(Me.defaultValue))),Me.keepTouched||mi(r.touchedFields,Ne),Me.keepDirty||(mi(r.dirtyFields,Ne),r.isDirty=Me.defaultValue?D(Ne,Fi(mr(l,Ne))):D()),Me.keepError||(mi(r.errors,Ne),x.isValid&&m()),y.state.next({...r}))},yt=(Ne,Me={})=>{const Ze=Ne?Fi(Ne):l,Ft=Fi(Ze),Ct=Fo(Ne),wt=Ct?l:Ft;if(Me.keepDefaultValues||(l=Ze),!Me.keepValues){if(Me.keepDirtyValues){const un=new Set([...T.mount,...Object.keys(ip(l,d))]);for(const Sn of Array.from(un))mr(r.dirtyFields,Sn)?cs(wt,Sn,mr(d,Sn)):F(Sn,mr(wt,Sn))}else{if(wy&&gi(Ne))for(const un of T.mount){const Sn=mr(s,un);if(Sn&&Sn._f){const Ut=Array.isArray(Sn._f.refs)?Sn._f.refs[0]:Sn._f.ref;if(Sm(Ut)){const nr=Ut.closest("form");if(nr){nr.reset();break}}}}if(Me.keepFieldsRef)for(const un of T.mount)F(un,mr(wt,un));else s={}}d=t.shouldUnregister?Me.keepDefaultValues?Fi(l):{}:Fi(wt),y.array.next({values:{...wt}}),y.state.next({values:{...wt}})}T={mount:Me.keepDirtyValues?T.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},C.mount=!x.isValid||!!Me.keepIsValid||!!Me.keepDirtyValues,C.watch=!!t.shouldUnregister,y.state.next({submitCount:Me.keepSubmitCount?r.submitCount:0,isDirty:Ct?!1:Me.keepDirty?r.isDirty:!!(Me.keepDefaultValues&&!Au(Ne,l)),isSubmitted:Me.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ct?{}:Me.keepDirtyValues?Me.keepDefaultValues&&d?ip(l,d):r.dirtyFields:Me.keepDefaultValues&&Ne?ip(l,Ne):Me.keepDirty?r.dirtyFields:{},touchedFields:Me.keepTouched?r.touchedFields:{},errors:Me.keepErrors?r.errors:{},isSubmitSuccessful:Me.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},on=(Ne,Me)=>yt(Gc(Ne)?Ne(d):Ne,Me),ln=(Ne,Me={})=>{const Ze=mr(s,Ne),Ft=Ze&&Ze._f;if(Ft){const Ct=Ft.refs?Ft.refs[0]:Ft.ref;Ct.focus&&(Ct.focus(),Me.shouldSelect&&Gc(Ct.select)&&Ct.select())}},Pn=Ne=>{r={...r,...Ne}},rn={control:{register:Qe,unregister:_e,getFieldState:be,handleSubmit:Te,setError:Se,_subscribe:Ce,_runSchema:N,_focusError:Ge,_getWatch:O,_getDirty:D,_setValid:m,_setFieldArray:w,_setDisabledField:Ye,_setErrors:g,_getFieldArray:j,_reset:yt,_resetDefaultValues:()=>Gc(t.defaultValues)&&t.defaultValues().then(Ne=>{on(Ne,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:p,_disableForm:He,_subjects:y,_proxyFormState:x,get _fields(){return s},get _formValues(){return d},get _state(){return C},set _state(Ne){C=Ne},get _defaultValues(){return l},get _names(){return T},set _names(Ne){T=Ne},get _formState(){return r},get _options(){return t},set _options(Ne){t={...t,...Ne}}},subscribe:Be,trigger:se,register:Qe,handleSubmit:Te,watch:me,setValue:F,getValues:J,reset:on,resetField:dt,clearErrors:Re,unregister:_e,setError:Se,setFocus:ln,getFieldState:be};return{...rn,formControl:rn}}function Rl(e={}){const t=Wt.useRef(void 0),r=Wt.useRef(void 0),[s,l]=Wt.useState({isDirty:!1,isValidating:!1,isLoading:Gc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Gc(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Gc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:C,...T}=s7(e);t.current={...T,formState:s}}const d=t.current.control;return d._options=e,WL(()=>{const C=d._subscribe({formState:d._proxyFormState,callback:()=>l({...d._formState}),reRenderRoot:!0});return l(T=>({...T,isReady:!0})),d._formState.isReady=!0,C},[d]),Wt.useEffect(()=>d._disableForm(e.disabled),[d,e.disabled]),Wt.useEffect(()=>{e.mode&&(d._options.mode=e.mode),e.reValidateMode&&(d._options.reValidateMode=e.reValidateMode)},[d,e.mode,e.reValidateMode]),Wt.useEffect(()=>{e.errors&&(d._setErrors(e.errors),d._focusError())},[d,e.errors]),Wt.useEffect(()=>{e.shouldUnregister&&d._subjects.state.next({values:d._getWatch()})},[d,e.shouldUnregister]),Wt.useEffect(()=>{if(d._proxyFormState.isDirty){const C=d._getDirty();C!==s.isDirty&&d._subjects.state.next({isDirty:C})}},[d,s.isDirty]),Wt.useEffect(()=>{e.values&&!Au(e.values,r.current)?(d._reset(e.values,{keepFieldsRef:!0,...d._options.resetOptions}),r.current=e.values,l(C=>({...C}))):d._resetDefaultValues()},[d,e.values]),Wt.useEffect(()=>{d._state.mount||(d._setValid(),d._state.mount=!0),d._state.watch&&(d._state.watch=!1,d._subjects.state.next({...d._formState})),d._removeUnmounted()}),t.current.formState=qL(s,d),t.current}const u1=(e,t,r)=>{if(e&&"reportValidity"in e){const s=mr(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},g0=(e,t)=>{for(const r in t.fields){const s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?u1(s.ref,r,e):s&&s.refs&&s.refs.forEach(l=>u1(l,r,e))}},d1=(e,t)=>{t.shouldUseNativeValidation&&g0(e,t);const r={};for(const s in e){const l=mr(t.fields,s),d=Object.assign(e[s]||{},{ref:l&&l.ref});if(i7(t.names||Object.keys(e),s)){const C=Object.assign({},mr(r,s));cs(C,"root",d),cs(r,s,C)}else cs(r,s,d)}return r},i7=(e,t)=>{const r=h1(t);return e.some(s=>h1(s).match(`^${r}\\.\\d+`))};function h1(e){return e.replace(/\]|\[/g,"")}function Kt(e,t,r){function s(T,b){var u;Object.defineProperty(T,"_zod",{value:T._zod??{},enumerable:!1}),(u=T._zod).traits??(u.traits=new Set),T._zod.traits.add(e),t(T,b);for(const x in C.prototype)x in T||Object.defineProperty(T,x,{value:C.prototype[x].bind(T)});T._zod.constr=C,T._zod.def=b}const l=r?.Parent??Object;class d extends l{}Object.defineProperty(d,"name",{value:e});function C(T){var b;const u=r?.Parent?new d:this;s(u,T),(b=u._zod).deferred??(b.deferred=[]);for(const x of u._zod.deferred)x();return u}return Object.defineProperty(C,"init",{value:s}),Object.defineProperty(C,Symbol.hasInstance,{value:T=>r?.Parent&&T instanceof r.Parent?!0:T?._zod?.traits?.has(e)}),Object.defineProperty(C,"name",{value:e}),C}class Np extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const BR={};function fd(e){return BR}function o7(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,l])=>t.indexOf(+s)===-1).map(([s,l])=>l)}function v0(e,t){return typeof t=="bigint"?t.toString():t}function zR(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Ty(e){return e==null}function Py(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function c7(e,t){const r=(e.toString().split(".")[1]||"").length,s=t.toString();let l=(s.split(".")[1]||"").length;if(l===0&&/\d?e-\d?/.test(s)){const b=s.match(/\d?e-(\d?)/);b?.[1]&&(l=Number.parseInt(b[1]))}const d=r>l?r:l,C=Number.parseInt(e.toFixed(d).replace(".","")),T=Number.parseInt(t.toFixed(d).replace(".",""));return C%T/10**d}const p1=Symbol("evaluating");function hs(e,t,r){let s;Object.defineProperty(e,t,{get(){if(s!==p1)return s===void 0&&(s=p1,s=r()),s},set(l){Object.defineProperty(e,t,{value:l})},configurable:!0})}function l7(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function vd(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function bh(...e){const t={};for(const r of e){const s=Object.getOwnPropertyDescriptors(r);Object.assign(t,s)}return Object.defineProperties({},t)}function f1(e){return JSON.stringify(e)}const UR="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function y0(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const u7=zR(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function _0(e){if(y0(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(y0(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const d7=new Set(["string","number","symbol"]);function ch(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yd(e,t,r){const s=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(s._zod.parent=e),s}function Nr(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function h7(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const p7={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function f7(e,t){const r=e._zod.def,s=bh(e._zod.def,{get shape(){const l={};for(const d in t){if(!(d in r.shape))throw new Error(`Unrecognized key: "${d}"`);t[d]&&(l[d]=r.shape[d])}return vd(this,"shape",l),l},checks:[]});return yd(e,s)}function m7(e,t){const r=e._zod.def,s=bh(e._zod.def,{get shape(){const l={...e._zod.def.shape};for(const d in t){if(!(d in r.shape))throw new Error(`Unrecognized key: "${d}"`);t[d]&&delete l[d]}return vd(this,"shape",l),l},checks:[]});return yd(e,s)}function g7(e,t){if(!_0(t))throw new Error("Invalid input to extend: expected a plain object");const r=bh(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return vd(this,"shape",s),s},checks:[]});return yd(e,r)}function v7(e,t){const r=bh(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t._zod.def.shape};return vd(this,"shape",s),s},get catchall(){return t._zod.def.catchall},checks:[]});return yd(e,r)}function y7(e,t,r){const s=bh(t._zod.def,{get shape(){const l=t._zod.def.shape,d={...l};if(r)for(const C in r){if(!(C in l))throw new Error(`Unrecognized key: "${C}"`);r[C]&&(d[C]=e?new e({type:"optional",innerType:l[C]}):l[C])}else for(const C in l)d[C]=e?new e({type:"optional",innerType:l[C]}):l[C];return vd(this,"shape",d),d},checks:[]});return yd(t,s)}function _7(e,t,r){const s=bh(t._zod.def,{get shape(){const l=t._zod.def.shape,d={...l};if(r)for(const C in r){if(!(C in d))throw new Error(`Unrecognized key: "${C}"`);r[C]&&(d[C]=new e({type:"nonoptional",innerType:l[C]}))}else for(const C in l)d[C]=new e({type:"nonoptional",innerType:l[C]});return vd(this,"shape",d),d},checks:[]});return yd(t,s)}function gp(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function FR(e,t){return t.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(e),r})}function Vf(e){return typeof e=="string"?e:e?.message}function md(e,t,r){const s={...e,path:e.path??[]};if(!e.message){const l=Vf(e.inst?._zod.def?.error?.(e))??Vf(t?.error?.(e))??Vf(r.customError?.(e))??Vf(r.localeError?.(e))??"Invalid input";s.message=l}return delete s.inst,delete s.continue,t?.reportInput||delete s.input,s}function Ny(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Dp(...e){const[t,r,s]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:s}:{...t}}const HR=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,v0,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Dy=Kt("$ZodError",HR),sg=Kt("$ZodError",HR,{Parent:Error});function b7(e,t=r=>r.message){const r={},s=[];for(const l of e.issues)l.path.length>0?(r[l.path[0]]=r[l.path[0]]||[],r[l.path[0]].push(t(l))):s.push(t(l));return{formErrors:s,fieldErrors:r}}function x7(e,t){const r=t||function(d){return d.message},s={_errors:[]},l=d=>{for(const C of d.issues)if(C.code==="invalid_union"&&C.errors.length)C.errors.map(T=>l({issues:T}));else if(C.code==="invalid_key")l({issues:C.issues});else if(C.code==="invalid_element")l({issues:C.issues});else if(C.path.length===0)s._errors.push(r(C));else{let T=s,b=0;for(;b<C.path.length;){const u=C.path[b];b===C.path.length-1?(T[u]=T[u]||{_errors:[]},T[u]._errors.push(r(C))):T[u]=T[u]||{_errors:[]},T=T[u],b++}}};return l(e),s}const VR=e=>(t,r,s,l)=>{const d=s?Object.assign(s,{async:!1}):{async:!1},C=t._zod.run({value:r,issues:[]},d);if(C instanceof Promise)throw new Np;if(C.issues.length){const T=new(l?.Err??e)(C.issues.map(b=>md(b,d,fd())));throw UR(T,l?.callee),T}return C.value},w7=VR(sg),qR=e=>async(t,r,s,l)=>{const d=s?Object.assign(s,{async:!0}):{async:!0};let C=t._zod.run({value:r,issues:[]},d);if(C instanceof Promise&&(C=await C),C.issues.length){const T=new(l?.Err??e)(C.issues.map(b=>md(b,d,fd())));throw UR(T,l?.callee),T}return C.value},S7=qR(sg),WR=e=>(t,r,s)=>{const l=s?{...s,async:!1}:{async:!1},d=t._zod.run({value:r,issues:[]},l);if(d instanceof Promise)throw new Np;return d.issues.length?{success:!1,error:new(e??Dy)(d.issues.map(C=>md(C,l,fd())))}:{success:!0,data:d.value}},R7=WR(sg),$R=e=>async(t,r,s)=>{const l=s?Object.assign(s,{async:!0}):{async:!0};let d=t._zod.run({value:r,issues:[]},l);return d instanceof Promise&&(d=await d),d.issues.length?{success:!1,error:new e(d.issues.map(C=>md(C,l,fd())))}:{success:!0,data:d.value}},E7=$R(sg),k7=/^[cC][^\s-]{8,}$/,C7=/^[0-9a-z]+$/,T7=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,P7=/^[0-9a-vA-V]{20}$/,N7=/^[A-Za-z0-9]{27}$/,D7=/^[a-zA-Z0-9_-]{21}$/,A7=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,O7=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,m1=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,M7=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,j7="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function L7(){return new RegExp(j7,"u")}const I7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,B7=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,z7=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,U7=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,F7=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ZR=/^[A-Za-z0-9_-]*$/,H7=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,V7=/^\+(?:[0-9]){6,14}[0-9]$/,GR="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",q7=new RegExp(`^${GR}$`);function YR(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function W7(e){return new RegExp(`^${YR(e)}$`)}function $7(e){const t=YR({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${t}(?:${r.join("|")})`;return new RegExp(`^${GR}T(?:${s})$`)}const Z7=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},G7=/^\d+$/,Y7=/^-?\d+(?:\.\d+)?/i,K7=/true|false/i,Q7=/^[^A-Z]*$/,X7=/^[^a-z]*$/,$o=Kt("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),KR={number:"number",bigint:"bigint",object:"date"},QR=Kt("$ZodCheckLessThan",(e,t)=>{$o.init(e,t);const r=KR[typeof t.value];e._zod.onattach.push(s=>{const l=s._zod.bag,d=(t.inclusive?l.maximum:l.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<d&&(t.inclusive?l.maximum=t.value:l.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:r,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),XR=Kt("$ZodCheckGreaterThan",(e,t)=>{$o.init(e,t);const r=KR[typeof t.value];e._zod.onattach.push(s=>{const l=s._zod.bag,d=(t.inclusive?l.minimum:l.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>d&&(t.inclusive?l.minimum=t.value:l.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:r,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),J7=Kt("$ZodCheckMultipleOf",(e,t)=>{$o.init(e,t),e._zod.onattach.push(r=>{var s;(s=r._zod.bag).multipleOf??(s.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):c7(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),eI=Kt("$ZodCheckNumberFormat",(e,t)=>{$o.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),s=r?"int":"number",[l,d]=p7[t.format];e._zod.onattach.push(C=>{const T=C._zod.bag;T.format=t.format,T.minimum=l,T.maximum=d,r&&(T.pattern=G7)}),e._zod.check=C=>{const T=C.value;if(r){if(!Number.isInteger(T)){C.issues.push({expected:s,format:t.format,code:"invalid_type",continue:!1,input:T,inst:e});return}if(!Number.isSafeInteger(T)){T>0?C.issues.push({input:T,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):C.issues.push({input:T,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}T<l&&C.issues.push({origin:"number",input:T,code:"too_small",minimum:l,inclusive:!0,inst:e,continue:!t.abort}),T>d&&C.issues.push({origin:"number",input:T,code:"too_big",maximum:d,inst:e})}}),tI=Kt("$ZodCheckMaxLength",(e,t)=>{var r;$o.init(e,t),(r=e._zod.def).when??(r.when=s=>{const l=s.value;return!Ty(l)&&l.length!==void 0}),e._zod.onattach.push(s=>{const l=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<l&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const l=s.value;if(l.length<=t.maximum)return;const C=Ny(l);s.issues.push({origin:C,code:"too_big",maximum:t.maximum,inclusive:!0,input:l,inst:e,continue:!t.abort})}}),nI=Kt("$ZodCheckMinLength",(e,t)=>{var r;$o.init(e,t),(r=e._zod.def).when??(r.when=s=>{const l=s.value;return!Ty(l)&&l.length!==void 0}),e._zod.onattach.push(s=>{const l=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>l&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const l=s.value;if(l.length>=t.minimum)return;const C=Ny(l);s.issues.push({origin:C,code:"too_small",minimum:t.minimum,inclusive:!0,input:l,inst:e,continue:!t.abort})}}),rI=Kt("$ZodCheckLengthEquals",(e,t)=>{var r;$o.init(e,t),(r=e._zod.def).when??(r.when=s=>{const l=s.value;return!Ty(l)&&l.length!==void 0}),e._zod.onattach.push(s=>{const l=s._zod.bag;l.minimum=t.length,l.maximum=t.length,l.length=t.length}),e._zod.check=s=>{const l=s.value,d=l.length;if(d===t.length)return;const C=Ny(l),T=d>t.length;s.issues.push({origin:C,...T?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),ig=Kt("$ZodCheckStringFormat",(e,t)=>{var r,s;$o.init(e,t),e._zod.onattach.push(l=>{const d=l._zod.bag;d.format=t.format,t.pattern&&(d.patterns??(d.patterns=new Set),d.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=l=>{t.pattern.lastIndex=0,!t.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:t.format,input:l.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),aI=Kt("$ZodCheckRegex",(e,t)=>{ig.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),sI=Kt("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Q7),ig.init(e,t)}),iI=Kt("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=X7),ig.init(e,t)}),oI=Kt("$ZodCheckIncludes",(e,t)=>{$o.init(e,t);const r=ch(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=s,e._zod.onattach.push(l=>{const d=l._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(s)}),e._zod.check=l=>{l.value.includes(t.includes,t.position)||l.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:l.value,inst:e,continue:!t.abort})}}),cI=Kt("$ZodCheckStartsWith",(e,t)=>{$o.init(e,t);const r=new RegExp(`^${ch(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const l=s._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(r)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),lI=Kt("$ZodCheckEndsWith",(e,t)=>{$o.init(e,t);const r=new RegExp(`.*${ch(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const l=s._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(r)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),uI=Kt("$ZodCheckOverwrite",(e,t)=>{$o.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class dI{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(C=>C),l=Math.min(...s.map(C=>C.length-C.trimStart().length)),d=s.map(C=>C.slice(l)).map(C=>" ".repeat(this.indent*2)+C);for(const C of d)this.content.push(C)}compile(){const t=Function,r=this?.args,l=[...(this?.content??[""]).map(d=>`  ${d}`)];return new t(...r,l.join(`
`))}}const hI={major:4,minor:0,patch:15},Cs=Kt("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=hI;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const l of s)for(const d of l._zod.onattach)d(e);if(s.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const l=(d,C,T)=>{let b=gp(d),u;for(const x of C){if(x._zod.def.when){if(!x._zod.def.when(d))continue}else if(b)continue;const f=d.issues.length,y=x._zod.check(d);if(y instanceof Promise&&T?.async===!1)throw new Np;if(u||y instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await y,d.issues.length!==f&&(b||(b=gp(d,f)))});else{if(d.issues.length===f)continue;b||(b=gp(d,f))}}return u?u.then(()=>d):d};e._zod.run=(d,C)=>{const T=e._zod.parse(d,C);if(T instanceof Promise){if(C.async===!1)throw new Np;return T.then(b=>l(b,s,C))}return l(T,s,C)}}e["~standard"]={validate:l=>{try{const d=R7(e,l);return d.success?{value:d.data}:{issues:d.error?.issues}}catch{return E7(e,l).then(C=>C.success?{value:C.data}:{issues:C.error?.issues})}},vendor:"zod",version:1}}),Ay=Kt("$ZodString",(e,t)=>{Cs.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Z7(e._zod.bag),e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Ts=Kt("$ZodStringFormat",(e,t)=>{ig.init(e,t),Ay.init(e,t)}),pI=Kt("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=O7),Ts.init(e,t)}),fI=Kt("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=m1(s))}else t.pattern??(t.pattern=m1());Ts.init(e,t)}),mI=Kt("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=M7),Ts.init(e,t)}),gI=Kt("$ZodURL",(e,t)=>{Ts.init(e,t),e._zod.check=r=>{try{const s=r.value.trim(),l=new URL(s);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(l.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:H7.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(l.protocol.endsWith(":")?l.protocol.slice(0,-1):l.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=l.href:r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),vI=Kt("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=L7()),Ts.init(e,t)}),yI=Kt("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=D7),Ts.init(e,t)}),_I=Kt("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=k7),Ts.init(e,t)}),bI=Kt("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=C7),Ts.init(e,t)}),xI=Kt("$ZodULID",(e,t)=>{t.pattern??(t.pattern=T7),Ts.init(e,t)}),wI=Kt("$ZodXID",(e,t)=>{t.pattern??(t.pattern=P7),Ts.init(e,t)}),SI=Kt("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=N7),Ts.init(e,t)}),RI=Kt("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=$7(t)),Ts.init(e,t)}),EI=Kt("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=q7),Ts.init(e,t)}),kI=Kt("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=W7(t)),Ts.init(e,t)}),CI=Kt("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=A7),Ts.init(e,t)}),TI=Kt("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=I7),Ts.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv4"})}),PI=Kt("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=B7),Ts.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),NI=Kt("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=z7),Ts.init(e,t)}),DI=Kt("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=U7),Ts.init(e,t),e._zod.check=r=>{const[s,l]=r.value.split("/");try{if(!l)throw new Error;const d=Number(l);if(`${d}`!==l)throw new Error;if(d<0||d>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function JR(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const AI=Kt("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=F7),Ts.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{JR(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function OI(e){if(!ZR.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return JR(r)}const MI=Kt("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=ZR),Ts.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{OI(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),jI=Kt("$ZodE164",(e,t)=>{t.pattern??(t.pattern=V7),Ts.init(e,t)});function LI(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const l=JSON.parse(atob(s));return!("typ"in l&&l?.typ!=="JWT"||!l.alg||t&&(!("alg"in l)||l.alg!==t))}catch{return!1}}const II=Kt("$ZodJWT",(e,t)=>{Ts.init(e,t),e._zod.check=r=>{LI(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),eE=Kt("$ZodNumber",(e,t)=>{Cs.init(e,t),e._zod.pattern=e._zod.bag.pattern??Y7,e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const l=r.value;if(typeof l=="number"&&!Number.isNaN(l)&&Number.isFinite(l))return r;const d=typeof l=="number"?Number.isNaN(l)?"NaN":Number.isFinite(l)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:l,inst:e,...d?{received:d}:{}}),r}}),BI=Kt("$ZodNumber",(e,t)=>{eI.init(e,t),eE.init(e,t)}),zI=Kt("$ZodBoolean",(e,t)=>{Cs.init(e,t),e._zod.pattern=K7,e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=!!r.value}catch{}const l=r.value;return typeof l=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:l,inst:e}),r}}),UI=Kt("$ZodAny",(e,t)=>{Cs.init(e,t),e._zod.parse=r=>r}),FI=Kt("$ZodUnknown",(e,t)=>{Cs.init(e,t),e._zod.parse=r=>r}),HI=Kt("$ZodNever",(e,t)=>{Cs.init(e,t),e._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function g1(e,t,r){e.issues.length&&t.issues.push(...FR(r,e.issues)),t.value[r]=e.value}const VI=Kt("$ZodArray",(e,t)=>{Cs.init(e,t),e._zod.parse=(r,s)=>{const l=r.value;if(!Array.isArray(l))return r.issues.push({expected:"array",code:"invalid_type",input:l,inst:e}),r;r.value=Array(l.length);const d=[];for(let C=0;C<l.length;C++){const T=l[C],b=t.element._zod.run({value:T,issues:[]},s);b instanceof Promise?d.push(b.then(u=>g1(u,r,C))):g1(b,r,C)}return d.length?Promise.all(d).then(()=>r):r}});function qf(e,t,r,s){e.issues.length&&t.issues.push(...FR(r,e.issues)),e.value===void 0?r in s&&(t.value[r]=void 0):t.value[r]=e.value}const qI=Kt("$ZodObject",(e,t)=>{Cs.init(e,t);const r=zR(()=>{const f=Object.keys(t.shape);for(const E of f)if(!(t.shape[E]instanceof Cs))throw new Error(`Invalid element at key "${E}": expected a Zod schema`);const y=h7(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(y)}});hs(e._zod,"propValues",()=>{const f=t.shape,y={};for(const E in f){const _=f[E]._zod;if(_.values){y[E]??(y[E]=new Set);for(const m of _.values)y[E].add(m)}}return y});const s=f=>{const y=new dI(["shape","payload","ctx"]),E=r.value,_=U=>{const g=f1(U);return`shape[${g}]._zod.run({ value: input[${g}], issues: [] }, ctx)`};y.write("const input = payload.value;");const m=Object.create(null);let k=0;for(const U of E.keys)m[U]=`key_${k++}`;y.write("const newResult = {}");for(const U of E.keys){const g=m[U],A=f1(U);y.write(`const ${g} = ${_(U)};`),y.write(`
        if (${g}.issues.length) {
          payload.issues = payload.issues.concat(${g}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${A}, ...iss.path] : [${A}]
          })));
        }
        
        if (${g}.value === undefined) {
          if (${A} in input) {
            newResult[${A}] = undefined;
          }
        } else {
          newResult[${A}] = ${g}.value;
        }
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const w=y.compile();return(U,g)=>w(f,U,g)};let l;const d=y0,C=!BR.jitless,b=C&&u7.value,u=t.catchall;let x;e._zod.parse=(f,y)=>{x??(x=r.value);const E=f.value;if(!d(E))return f.issues.push({expected:"object",code:"invalid_type",input:E,inst:e}),f;const _=[];if(C&&b&&y?.async===!1&&y.jitless!==!0)l||(l=s(t.shape)),f=l(f,y);else{f.value={};const g=x.shape;for(const A of x.keys){const z=g[A]._zod.run({value:E[A],issues:[]},y);z instanceof Promise?_.push(z.then(N=>qf(N,f,A,E))):qf(z,f,A,E)}}if(!u)return _.length?Promise.all(_).then(()=>f):f;const m=[],k=x.keySet,w=u._zod,U=w.def.type;for(const g of Object.keys(E)){if(k.has(g))continue;if(U==="never"){m.push(g);continue}const A=w.run({value:E[g],issues:[]},y);A instanceof Promise?_.push(A.then(P=>qf(P,f,g,E))):qf(A,f,g,E)}return m.length&&f.issues.push({code:"unrecognized_keys",keys:m,input:E,inst:e}),_.length?Promise.all(_).then(()=>f):f}});function v1(e,t,r,s){for(const d of e)if(d.issues.length===0)return t.value=d.value,t;const l=e.filter(d=>!gp(d));return l.length===1?(t.value=l[0].value,l[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(d=>d.issues.map(C=>md(C,s,fd())))}),t)}const WI=Kt("$ZodUnion",(e,t)=>{Cs.init(e,t),hs(e._zod,"optin",()=>t.options.some(l=>l._zod.optin==="optional")?"optional":void 0),hs(e._zod,"optout",()=>t.options.some(l=>l._zod.optout==="optional")?"optional":void 0),hs(e._zod,"values",()=>{if(t.options.every(l=>l._zod.values))return new Set(t.options.flatMap(l=>Array.from(l._zod.values)))}),hs(e._zod,"pattern",()=>{if(t.options.every(l=>l._zod.pattern)){const l=t.options.map(d=>d._zod.pattern);return new RegExp(`^(${l.map(d=>Py(d.source)).join("|")})$`)}});const r=t.options.length===1,s=t.options[0]._zod.run;e._zod.parse=(l,d)=>{if(r)return s(l,d);let C=!1;const T=[];for(const b of t.options){const u=b._zod.run({value:l.value,issues:[]},d);if(u instanceof Promise)T.push(u),C=!0;else{if(u.issues.length===0)return u;T.push(u)}}return C?Promise.all(T).then(b=>v1(b,l,e,d)):v1(T,l,e,d)}}),$I=Kt("$ZodIntersection",(e,t)=>{Cs.init(e,t),e._zod.parse=(r,s)=>{const l=r.value,d=t.left._zod.run({value:l,issues:[]},s),C=t.right._zod.run({value:l,issues:[]},s);return d instanceof Promise||C instanceof Promise?Promise.all([d,C]).then(([b,u])=>y1(r,b,u)):y1(r,d,C)}});function b0(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(_0(e)&&_0(t)){const r=Object.keys(t),s=Object.keys(e).filter(d=>r.indexOf(d)!==-1),l={...e,...t};for(const d of s){const C=b0(e[d],t[d]);if(!C.valid)return{valid:!1,mergeErrorPath:[d,...C.mergeErrorPath]};l[d]=C.data}return{valid:!0,data:l}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<e.length;s++){const l=e[s],d=t[s],C=b0(l,d);if(!C.valid)return{valid:!1,mergeErrorPath:[s,...C.mergeErrorPath]};r.push(C.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function y1(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),gp(e))return e;const s=b0(t.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const ZI=Kt("$ZodEnum",(e,t)=>{Cs.init(e,t);const r=o7(t.entries),s=new Set(r);e._zod.values=s,e._zod.pattern=new RegExp(`^(${r.filter(l=>d7.has(typeof l)).map(l=>typeof l=="string"?ch(l):l.toString()).join("|")})$`),e._zod.parse=(l,d)=>{const C=l.value;return s.has(C)||l.issues.push({code:"invalid_value",values:r,input:C,inst:e}),l}}),GI=Kt("$ZodLiteral",(e,t)=>{if(Cs.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?ch(r):r?ch(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,s)=>{const l=r.value;return e._zod.values.has(l)||r.issues.push({code:"invalid_value",values:t.values,input:l,inst:e}),r}}),YI=Kt("$ZodTransform",(e,t)=>{Cs.init(e,t),e._zod.parse=(r,s)=>{const l=t.transform(r.value,r);if(s.async)return(l instanceof Promise?l:Promise.resolve(l)).then(C=>(r.value=C,r));if(l instanceof Promise)throw new Np;return r.value=l,r}});function _1(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const KI=Kt("$ZodOptional",(e,t)=>{Cs.init(e,t),e._zod.optin="optional",e._zod.optout="optional",hs(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),hs(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Py(r.source)})?$`):void 0}),e._zod.parse=(r,s)=>{if(t.innerType._zod.optin==="optional"){const l=t.innerType._zod.run(r,s);return l instanceof Promise?l.then(d=>_1(d,r.value)):_1(l,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,s)}}),QI=Kt("$ZodNullable",(e,t)=>{Cs.init(e,t),hs(e._zod,"optin",()=>t.innerType._zod.optin),hs(e._zod,"optout",()=>t.innerType._zod.optout),hs(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Py(r.source)}|null)$`):void 0}),hs(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,s)=>r.value===null?r:t.innerType._zod.run(r,s)}),XI=Kt("$ZodDefault",(e,t)=>{Cs.init(e,t),e._zod.optin="optional",hs(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const l=t.innerType._zod.run(r,s);return l instanceof Promise?l.then(d=>b1(d,t)):b1(l,t)}});function b1(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const JI=Kt("$ZodPrefault",(e,t)=>{Cs.init(e,t),e._zod.optin="optional",hs(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,s))}),e5=Kt("$ZodNonOptional",(e,t)=>{Cs.init(e,t),hs(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),e._zod.parse=(r,s)=>{const l=t.innerType._zod.run(r,s);return l instanceof Promise?l.then(d=>x1(d,e)):x1(l,e)}});function x1(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const t5=Kt("$ZodCatch",(e,t)=>{Cs.init(e,t),hs(e._zod,"optin",()=>t.innerType._zod.optin),hs(e._zod,"optout",()=>t.innerType._zod.optout),hs(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{const l=t.innerType._zod.run(r,s);return l instanceof Promise?l.then(d=>(r.value=d.value,d.issues.length&&(r.value=t.catchValue({...r,error:{issues:d.issues.map(C=>md(C,s,fd()))},input:r.value}),r.issues=[]),r)):(r.value=l.value,l.issues.length&&(r.value=t.catchValue({...r,error:{issues:l.issues.map(d=>md(d,s,fd()))},input:r.value}),r.issues=[]),r)}}),n5=Kt("$ZodPipe",(e,t)=>{Cs.init(e,t),hs(e._zod,"values",()=>t.in._zod.values),hs(e._zod,"optin",()=>t.in._zod.optin),hs(e._zod,"optout",()=>t.out._zod.optout),hs(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,s)=>{const l=t.in._zod.run(r,s);return l instanceof Promise?l.then(d=>w1(d,t,s)):w1(l,t,s)}});function w1(e,t,r){return e.issues.length?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const r5=Kt("$ZodReadonly",(e,t)=>{Cs.init(e,t),hs(e._zod,"propValues",()=>t.innerType._zod.propValues),hs(e._zod,"values",()=>t.innerType._zod.values),hs(e._zod,"optin",()=>t.innerType._zod.optin),hs(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,s)=>{const l=t.innerType._zod.run(r,s);return l instanceof Promise?l.then(S1):S1(l)}});function S1(e){return e.value=Object.freeze(e.value),e}const a5=Kt("$ZodCustom",(e,t)=>{$o.init(e,t),Cs.init(e,t),e._zod.parse=(r,s)=>r,e._zod.check=r=>{const s=r.value,l=t.fn(s);if(l instanceof Promise)return l.then(d=>R1(d,r,s,e));R1(l,r,s,e)}});function R1(e,t,r,s){if(!e){const l={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(l.params=s._zod.def.params),t.issues.push(Dp(l))}}class s5{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const s=r[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const s={...this.get(r)??{}};delete s.id;const l={...s,...this._map.get(t)};return Object.keys(l).length?l:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function i5(){return new s5}const Wf=i5();function o5(e,t){return new e({type:"string",...Nr(t)})}function c5(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Nr(t)})}function E1(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Nr(t)})}function l5(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Nr(t)})}function u5(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Nr(t)})}function d5(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Nr(t)})}function h5(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Nr(t)})}function p5(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Nr(t)})}function f5(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Nr(t)})}function m5(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Nr(t)})}function g5(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Nr(t)})}function v5(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Nr(t)})}function y5(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Nr(t)})}function _5(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Nr(t)})}function b5(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Nr(t)})}function x5(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Nr(t)})}function w5(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Nr(t)})}function S5(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Nr(t)})}function R5(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Nr(t)})}function E5(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Nr(t)})}function k5(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Nr(t)})}function C5(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Nr(t)})}function T5(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Nr(t)})}function P5(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Nr(t)})}function N5(e,t){return new e({type:"string",format:"date",check:"string_format",...Nr(t)})}function D5(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Nr(t)})}function A5(e,t){return new e({type:"string",format:"duration",check:"string_format",...Nr(t)})}function O5(e,t){return new e({type:"number",coerce:!0,checks:[],...Nr(t)})}function M5(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Nr(t)})}function j5(e,t){return new e({type:"boolean",...Nr(t)})}function L5(e){return new e({type:"any"})}function I5(e){return new e({type:"unknown"})}function B5(e,t){return new e({type:"never",...Nr(t)})}function k1(e,t){return new QR({check:"less_than",...Nr(t),value:e,inclusive:!1})}function Uv(e,t){return new QR({check:"less_than",...Nr(t),value:e,inclusive:!0})}function C1(e,t){return new XR({check:"greater_than",...Nr(t),value:e,inclusive:!1})}function Fv(e,t){return new XR({check:"greater_than",...Nr(t),value:e,inclusive:!0})}function T1(e,t){return new J7({check:"multiple_of",...Nr(t),value:e})}function tE(e,t){return new tI({check:"max_length",...Nr(t),maximum:e})}function km(e,t){return new nI({check:"min_length",...Nr(t),minimum:e})}function nE(e,t){return new rI({check:"length_equals",...Nr(t),length:e})}function z5(e,t){return new aI({check:"string_format",format:"regex",...Nr(t),pattern:e})}function U5(e){return new sI({check:"string_format",format:"lowercase",...Nr(e)})}function F5(e){return new iI({check:"string_format",format:"uppercase",...Nr(e)})}function H5(e,t){return new oI({check:"string_format",format:"includes",...Nr(t),includes:e})}function V5(e,t){return new cI({check:"string_format",format:"starts_with",...Nr(t),prefix:e})}function q5(e,t){return new lI({check:"string_format",format:"ends_with",...Nr(t),suffix:e})}function $p(e){return new uI({check:"overwrite",tx:e})}function W5(e){return $p(t=>t.normalize(e))}function $5(){return $p(e=>e.trim())}function Z5(){return $p(e=>e.toLowerCase())}function G5(){return $p(e=>e.toUpperCase())}function Y5(e,t,r){return new e({type:"array",element:t,...Nr(r)})}function K5(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Nr(r)})}function Q5(e){const t=X5(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(Dp(s,r.value,t._zod.def));else{const l=s;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=r.value),l.inst??(l.inst=t),l.continue??(l.continue=!t._zod.def.abort),r.issues.push(Dp(l))}},e(r.value,r)));return t}function X5(e,t){const r=new $o({check:"custom",...Nr(t)});return r._zod.check=e,r}function P1(e,t){try{var r=e()}catch(s){return t(s)}return r&&r.then?r.then(void 0,t):r}function J5(e,t){for(var r={};e.length;){var s=e[0],l=s.code,d=s.message,C=s.path.join(".");if(!r[C])if("unionErrors"in s){var T=s.unionErrors[0].errors[0];r[C]={message:T.message,type:T.code}}else r[C]={message:d,type:l};if("unionErrors"in s&&s.unionErrors.forEach(function(x){return x.errors.forEach(function(f){return e.push(f)})}),t){var b=r[C].types,u=b&&b[s.code];r[C]=Ey(C,t,r,l,u?[].concat(u,s.message):s.message)}e.shift()}return r}function e9(e,t){for(var r={};e.length;){var s=e[0],l=s.code,d=s.message,C=s.path.join(".");if(!r[C])if(s.code==="invalid_union"&&s.errors.length>0){var T=s.errors[0][0];r[C]={message:T.message,type:T.code}}else r[C]={message:d,type:l};if(s.code==="invalid_union"&&s.errors.forEach(function(x){return x.forEach(function(f){return e.push(f)})}),t){var b=r[C].types,u=b&&b[s.code];r[C]=Ey(C,t,r,l,u?[].concat(u,s.message):s.message)}e.shift()}return r}function El(e,t,r){if(r===void 0&&(r={}),function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def}(e))return function(s,l,d){try{return Promise.resolve(P1(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(C){return d.shouldUseNativeValidation&&g0({},d),{errors:{},values:r.raw?Object.assign({},s):C}})},function(C){if(function(T){return Array.isArray(T?.issues)}(C))return{values:{},errors:d1(J5(C.errors,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw C}))}catch(C){return Promise.reject(C)}};if(function(s){return"_zod"in s&&typeof s._zod=="object"}(e))return function(s,l,d){try{return Promise.resolve(P1(function(){return Promise.resolve((r.mode==="sync"?w7:S7)(e,s,t)).then(function(C){return d.shouldUseNativeValidation&&g0({},d),{errors:{},values:r.raw?Object.assign({},s):C}})},function(C){if(function(T){return T instanceof Dy}(C))return{values:{},errors:d1(e9(C.issues,!d.shouldUseNativeValidation&&d.criteriaMode==="all"),d)};throw C}))}catch(C){return Promise.reject(C)}};throw new Error("Invalid input: not a Zod schema")}const t9=Kt("ZodISODateTime",(e,t)=>{RI.init(e,t),zs.init(e,t)});function n9(e){return P5(t9,e)}const r9=Kt("ZodISODate",(e,t)=>{EI.init(e,t),zs.init(e,t)});function a9(e){return N5(r9,e)}const s9=Kt("ZodISOTime",(e,t)=>{kI.init(e,t),zs.init(e,t)});function i9(e){return D5(s9,e)}const o9=Kt("ZodISODuration",(e,t)=>{CI.init(e,t),zs.init(e,t)});function c9(e){return A5(o9,e)}const l9=(e,t)=>{Dy.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>x7(e,r)},flatten:{value:r=>b7(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,v0,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,v0,2)}},isEmpty:{get(){return e.issues.length===0}}})},og=Kt("ZodError",l9,{Parent:Error}),u9=VR(og),d9=qR(og),h9=WR(og),p9=$R(og),Ys=Kt("ZodType",(e,t)=>(Cs.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),e.clone=(r,s)=>yd(e,r,s),e.brand=()=>e,e.register=(r,s)=>(r.add(e,s),e),e.parse=(r,s)=>u9(e,r,s,{callee:e.parse}),e.safeParse=(r,s)=>h9(e,r,s),e.parseAsync=async(r,s)=>d9(e,r,s,{callee:e.parseAsync}),e.safeParseAsync=async(r,s)=>p9(e,r,s),e.spa=e.safeParseAsync,e.refine=(r,s)=>e.check(sB(r,s)),e.superRefine=r=>e.check(iB(r)),e.overwrite=r=>e.check($p(r)),e.optional=()=>M1(e),e.nullable=()=>j1(e),e.nullish=()=>M1(j1(e)),e.nonoptional=r=>X9(e,r),e.array=()=>sE(e),e.or=r=>F9([e,r]),e.and=r=>V9(e,r),e.transform=r=>L1(e,$9(r)),e.default=r=>Y9(e,r),e.prefault=r=>Q9(e,r),e.catch=r=>eB(e,r),e.pipe=r=>L1(e,r),e.readonly=()=>rB(e),e.describe=r=>{const s=e.clone();return Wf.add(s,{description:r}),s},Object.defineProperty(e,"description",{get(){return Wf.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Wf.get(e);const s=e.clone();return Wf.add(s,r[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),rE=Kt("_ZodString",(e,t)=>{Ay.init(e,t),Ys.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...s)=>e.check(z5(...s)),e.includes=(...s)=>e.check(H5(...s)),e.startsWith=(...s)=>e.check(V5(...s)),e.endsWith=(...s)=>e.check(q5(...s)),e.min=(...s)=>e.check(km(...s)),e.max=(...s)=>e.check(tE(...s)),e.length=(...s)=>e.check(nE(...s)),e.nonempty=(...s)=>e.check(km(1,...s)),e.lowercase=s=>e.check(U5(s)),e.uppercase=s=>e.check(F5(s)),e.trim=()=>e.check($5()),e.normalize=(...s)=>e.check(W5(...s)),e.toLowerCase=()=>e.check(Z5()),e.toUpperCase=()=>e.check(G5())}),f9=Kt("ZodString",(e,t)=>{Ay.init(e,t),rE.init(e,t),e.email=r=>e.check(c5(m9,r)),e.url=r=>e.check(p5(g9,r)),e.jwt=r=>e.check(T5(D9,r)),e.emoji=r=>e.check(f5(v9,r)),e.guid=r=>e.check(E1(N1,r)),e.uuid=r=>e.check(l5($f,r)),e.uuidv4=r=>e.check(u5($f,r)),e.uuidv6=r=>e.check(d5($f,r)),e.uuidv7=r=>e.check(h5($f,r)),e.nanoid=r=>e.check(m5(y9,r)),e.guid=r=>e.check(E1(N1,r)),e.cuid=r=>e.check(g5(_9,r)),e.cuid2=r=>e.check(v5(b9,r)),e.ulid=r=>e.check(y5(x9,r)),e.base64=r=>e.check(E5(T9,r)),e.base64url=r=>e.check(k5(P9,r)),e.xid=r=>e.check(_5(w9,r)),e.ksuid=r=>e.check(b5(S9,r)),e.ipv4=r=>e.check(x5(R9,r)),e.ipv6=r=>e.check(w5(E9,r)),e.cidrv4=r=>e.check(S5(k9,r)),e.cidrv6=r=>e.check(R5(C9,r)),e.e164=r=>e.check(C5(N9,r)),e.datetime=r=>e.check(n9(r)),e.date=r=>e.check(a9(r)),e.time=r=>e.check(i9(r)),e.duration=r=>e.check(c9(r))});function Xr(e){return o5(f9,e)}const zs=Kt("ZodStringFormat",(e,t)=>{Ts.init(e,t),rE.init(e,t)}),m9=Kt("ZodEmail",(e,t)=>{mI.init(e,t),zs.init(e,t)}),N1=Kt("ZodGUID",(e,t)=>{pI.init(e,t),zs.init(e,t)}),$f=Kt("ZodUUID",(e,t)=>{fI.init(e,t),zs.init(e,t)}),g9=Kt("ZodURL",(e,t)=>{gI.init(e,t),zs.init(e,t)}),v9=Kt("ZodEmoji",(e,t)=>{vI.init(e,t),zs.init(e,t)}),y9=Kt("ZodNanoID",(e,t)=>{yI.init(e,t),zs.init(e,t)}),_9=Kt("ZodCUID",(e,t)=>{_I.init(e,t),zs.init(e,t)}),b9=Kt("ZodCUID2",(e,t)=>{bI.init(e,t),zs.init(e,t)}),x9=Kt("ZodULID",(e,t)=>{xI.init(e,t),zs.init(e,t)}),w9=Kt("ZodXID",(e,t)=>{wI.init(e,t),zs.init(e,t)}),S9=Kt("ZodKSUID",(e,t)=>{SI.init(e,t),zs.init(e,t)}),R9=Kt("ZodIPv4",(e,t)=>{TI.init(e,t),zs.init(e,t)}),E9=Kt("ZodIPv6",(e,t)=>{PI.init(e,t),zs.init(e,t)}),k9=Kt("ZodCIDRv4",(e,t)=>{NI.init(e,t),zs.init(e,t)}),C9=Kt("ZodCIDRv6",(e,t)=>{DI.init(e,t),zs.init(e,t)}),T9=Kt("ZodBase64",(e,t)=>{AI.init(e,t),zs.init(e,t)}),P9=Kt("ZodBase64URL",(e,t)=>{MI.init(e,t),zs.init(e,t)}),N9=Kt("ZodE164",(e,t)=>{jI.init(e,t),zs.init(e,t)}),D9=Kt("ZodJWT",(e,t)=>{II.init(e,t),zs.init(e,t)}),aE=Kt("ZodNumber",(e,t)=>{eE.init(e,t),Ys.init(e,t),e.gt=(s,l)=>e.check(C1(s,l)),e.gte=(s,l)=>e.check(Fv(s,l)),e.min=(s,l)=>e.check(Fv(s,l)),e.lt=(s,l)=>e.check(k1(s,l)),e.lte=(s,l)=>e.check(Uv(s,l)),e.max=(s,l)=>e.check(Uv(s,l)),e.int=s=>e.check(D1(s)),e.safe=s=>e.check(D1(s)),e.positive=s=>e.check(C1(0,s)),e.nonnegative=s=>e.check(Fv(0,s)),e.negative=s=>e.check(k1(0,s)),e.nonpositive=s=>e.check(Uv(0,s)),e.multipleOf=(s,l)=>e.check(T1(s,l)),e.step=(s,l)=>e.check(T1(s,l)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null}),A9=Kt("ZodNumberFormat",(e,t)=>{BI.init(e,t),aE.init(e,t)});function D1(e){return M5(A9,e)}const O9=Kt("ZodBoolean",(e,t)=>{zI.init(e,t),Ys.init(e,t)});function nh(e){return j5(O9,e)}const M9=Kt("ZodAny",(e,t)=>{UI.init(e,t),Ys.init(e,t)});function A1(){return L5(M9)}const j9=Kt("ZodUnknown",(e,t)=>{FI.init(e,t),Ys.init(e,t)});function O1(){return I5(j9)}const L9=Kt("ZodNever",(e,t)=>{HI.init(e,t),Ys.init(e,t)});function I9(e){return B5(L9,e)}const B9=Kt("ZodArray",(e,t)=>{VI.init(e,t),Ys.init(e,t),e.element=t.element,e.min=(r,s)=>e.check(km(r,s)),e.nonempty=r=>e.check(km(1,r)),e.max=(r,s)=>e.check(tE(r,s)),e.length=(r,s)=>e.check(nE(r,s)),e.unwrap=()=>e.element});function sE(e,t){return Y5(B9,e,t)}const z9=Kt("ZodObject",(e,t)=>{qI.init(e,t),Ys.init(e,t),hs(e,"shape",()=>t.shape),e.keyof=()=>Cm(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:O1()}),e.loose=()=>e.clone({...e._zod.def,catchall:O1()}),e.strict=()=>e.clone({...e._zod.def,catchall:I9()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>g7(e,r),e.merge=r=>v7(e,r),e.pick=r=>f7(e,r),e.omit=r=>m7(e,r),e.partial=(...r)=>y7(oE,e,r[0]),e.required=(...r)=>_7(cE,e,r[0])});function Tc(e,t){const r={type:"object",get shape(){return vd(this,"shape",e?l7(e):{}),this.shape},...Nr(t)};return new z9(r)}const U9=Kt("ZodUnion",(e,t)=>{WI.init(e,t),Ys.init(e,t),e.options=t.options});function F9(e,t){return new U9({type:"union",options:e,...Nr(t)})}const H9=Kt("ZodIntersection",(e,t)=>{$I.init(e,t),Ys.init(e,t)});function V9(e,t){return new H9({type:"intersection",left:e,right:t})}const x0=Kt("ZodEnum",(e,t)=>{ZI.init(e,t),Ys.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(s,l)=>{const d={};for(const C of s)if(r.has(C))d[C]=t.entries[C];else throw new Error(`Key ${C} not found in enum`);return new x0({...t,checks:[],...Nr(l),entries:d})},e.exclude=(s,l)=>{const d={...t.entries};for(const C of s)if(r.has(C))delete d[C];else throw new Error(`Key ${C} not found in enum`);return new x0({...t,checks:[],...Nr(l),entries:d})}});function Cm(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new x0({type:"enum",entries:r,...Nr(t)})}const q9=Kt("ZodLiteral",(e,t)=>{GI.init(e,t),Ys.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function iE(e,t){return new q9({type:"literal",values:Array.isArray(e)?e:[e],...Nr(t)})}const W9=Kt("ZodTransform",(e,t)=>{YI.init(e,t),Ys.init(e,t),e._zod.parse=(r,s)=>{r.addIssue=d=>{if(typeof d=="string")r.issues.push(Dp(d,r.value,t));else{const C=d;C.fatal&&(C.continue=!1),C.code??(C.code="custom"),C.input??(C.input=r.value),C.inst??(C.inst=e),r.issues.push(Dp(C))}};const l=t.transform(r.value,r);return l instanceof Promise?l.then(d=>(r.value=d,r)):(r.value=l,r)}});function $9(e){return new W9({type:"transform",transform:e})}const oE=Kt("ZodOptional",(e,t)=>{KI.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType});function M1(e){return new oE({type:"optional",innerType:e})}const Z9=Kt("ZodNullable",(e,t)=>{QI.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType});function j1(e){return new Z9({type:"nullable",innerType:e})}const G9=Kt("ZodDefault",(e,t)=>{XI.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Y9(e,t){return new G9({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const K9=Kt("ZodPrefault",(e,t)=>{JI.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Q9(e,t){return new K9({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const cE=Kt("ZodNonOptional",(e,t)=>{e5.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType});function X9(e,t){return new cE({type:"nonoptional",innerType:e,...Nr(t)})}const J9=Kt("ZodCatch",(e,t)=>{t5.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function eB(e,t){return new J9({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const tB=Kt("ZodPipe",(e,t)=>{n5.init(e,t),Ys.init(e,t),e.in=t.in,e.out=t.out});function L1(e,t){return new tB({type:"pipe",in:e,out:t})}const nB=Kt("ZodReadonly",(e,t)=>{r5.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType});function rB(e){return new nB({type:"readonly",innerType:e})}const aB=Kt("ZodCustom",(e,t)=>{a5.init(e,t),Ys.init(e,t)});function sB(e,t={}){return K5(aB,e,t)}function iB(e){return Q5(e)}function vp(e){return O5(aE,e)}const oB=Xr().refine(e=>Ow(e),{message:"CNIC must be in format: 12345-1234567-1"}),cB=/^[0-9+-\s()]+$/,lB=/^[A-Z0-9]+$/,uB=Tc({name:Xr().min(1,"Name is required").min(2,"Name must be at least 2 characters long").max(100,"Name cannot exceed 100 characters").trim(),email:Xr().min(1,"Email is required").email("Please provide a valid email address").trim(),speciality:sE(Xr()).min(1,"At least one specialty is required").max(5,"Maximum 5 specialties allowed"),phone:Xr().min(1,"Phone number is required").regex(cB,"Please provide a valid phone number").length(11,"Phone number must be exactly 11 digits"),gender:Cm(["Male","Female","Other"],{required_error:"Gender is required",invalid_type_error:"Gender must be either Male, Female, or Other"}),religion:Xr().min(1,"Religion is required").trim(),pmdcNumber:Xr().min(1,"PMDC number is required").regex(lB,"PMDC number must contain only uppercase letters and numbers").min(5,"PMDC number must be at least 5 characters long").max(20,"PMDC number cannot exceed 20 characters").trim(),mainDegree:Xr().min(1,"Main degree is required").min(2,"Main degree must be at least 2 characters long").max(100,"Main degree cannot exceed 100 characters").trim(),fullAddress:Xr().min(1,"Full address is required").min(10,"Full address must be at least 10 characters long").max(500,"Full address cannot exceed 500 characters").trim(),city:Xr().max(100,"City name cannot exceed 100 characters").optional().or(iE("")),hospital:Xr().min(1,"Hospital is required").min(2,"Hospital must be at least 2 characters long").max(200,"Hospital cannot exceed 200 characters").trim(),experience:vp({required_error:"Experience is required",invalid_type_error:"Experience must be a number"}).int("Experience must be a whole number").min(0,"Experience cannot be negative").max(50,"Experience cannot exceed 50 years"),fee:vp({required_error:"Fee is required",invalid_type_error:"Fee must be a number"}).min(0,"Fee cannot be negative").max(1e5,"Fee cannot exceed 100,000"),cnic:oB,password:Xr().min(1,"Password is required").min(6,"Password must be at least 6 characters long"),confirmPassword:Xr().min(1,"Confirm password is required"),agreement:nh().refine(e=>e===!0,"You must confirm before submitting"),hospitalVerified:nh().default(!1),hospitalId:Xr().nullable().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),dB={name:"",email:"",speciality:[],phone:"",gender:void 0,religion:"",pmdcNumber:"",mainDegree:"",fullAddress:"",city:"",hospital:"",experience:void 0,cnic:"",password:"",confirmPassword:"",agreement:!1,hospitalVerified:!1,hospitalId:null,fee:void 0},hB=Xr().refine(e=>Ow(e),{message:"CNIC must be in format: 12345-1234567-1"}),pB=/^03\d{9}$/,fB=Tc({name:Xr().min(1,"Hospital name is required").min(2,"Hospital name must be at least 2 characters long").max(100,"Hospital name cannot exceed 100 characters").trim(),email:Xr().min(1,"Email is required").email("Please provide a valid email address").trim(),description:Xr().min(10,"Description must be at least 10 characters long").max(500,"Description cannot exceed 500 characters").optional().or(iE("")),hospitalType:Cm(["Public","Private","Semi-Private","Military","Charity"],{required_error:"Hospital type is required",invalid_type_error:"Please select a valid hospital type"}),category:Cm(["General","Specialized","Teaching","Research","Emergency"],{required_error:"Category is required",invalid_type_error:"Please select a valid category"}),licenseNumber:Xr().min(1,"License number is required").min(5,"License number must be at least 5 characters long").max(50,"License number cannot exceed 50 characters").trim(),establishedYear:vp({required_error:"Established year is required",invalid_type_error:"Established year must be a number"}).int("Established year must be a whole number").min(1900,"Established year cannot be before 1900").max(new Date().getFullYear(),"Established year cannot be in the future"),phone:Xr().min(1,"Phone number is required").regex(pB,"Phone number must be in format 03XXXXXXXXX").trim(),address:Xr().min(1,"Address is required").min(10,"Address must be at least 10 characters long").max(500,"Address cannot exceed 500 characters").trim(),city:Xr().min(1,"City is required").min(2,"City name must be at least 2 characters long").max(50,"City name cannot exceed 50 characters").trim(),totalBeds:vp({required_error:"Total beds is required",invalid_type_error:"Total beds must be a number"}).int("Total beds must be a whole number").min(1,"Total beds must be at least 1"),operationTheaters:vp({required_error:"Operation theaters is required",invalid_type_error:"Operation theaters must be a number"}).int("Operation theaters must be a whole number").min(0,"Operation theaters cannot be negative"),cnic:hB,password:Xr().min(1,"Password is required").min(6,"Password must be at least 6 characters long").max(50,"Password cannot exceed 50 characters"),confirmPassword:Xr().min(1,"Confirm password is required"),services:Tc({emergencyServices:nh().default(!1),ambulanceServices:nh().default(!1),icuServices:nh().default(!1)}).default({emergencyServices:!1,ambulanceServices:!1,icuServices:!1}),image:A1().refine(e=>e instanceof File,"Hospital image is required").refine(e=>e&&e.size<=5e6,"Image size should be less than 5MB").refine(e=>e&&["image/jpeg","image/png","image/jpg"].includes(e.type),"Only JPEG, PNG and JPG images are allowed"),documents:A1().refine(e=>e instanceof File,"Hospital documents is required").refine(e=>e&&e.size<=5e6,"Image size should be less than 5MB").refine(e=>e&&["image/jpeg","image/png","image/jpg"].includes(e.type),"Only JPEG, PNG and JPG images are allowed"),agreement:nh().refine(e=>e===!0,"You must confirm before submitting")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),mB={name:"",email:"",description:"",hospitalType:void 0,category:void 0,licenseNumber:"",establishedYear:void 0,phone:"",address:"",city:"",totalBeds:void 0,operationTheaters:void 0,cnic:"",password:"",confirmPassword:"",image:null,documents:null},gB=Tc({name:Xr().min(3,"Name must be at least 3 characters"),email:Xr().email("Invalid email address"),cnic:Xr().refine(e=>/^\d{5}-\d{7}-\d{1}$/.test(e),{message:"CNIC must be in xxxxx-xxxxxxx-x format"}),password:Xr().min(6,"Password must be at least 6 characters")});Tc({email:Xr().email("Invalid email address"),password:Xr().min(1,"Password is required")});Tc({cnic:Xr().refine(e=>/^\d{5}-\d{7}-\d{1}$/.test(e),{message:"CNIC must be in xxxxx-xxxxxxx-x format"}),password:Xr().min(1,"Password is required")});const lE=Tc({identifier:Xr().min(1,"Email or PMDC is required").trim(),password:Xr().min(6,"Password must be at least 6 characters long")}),vB=()=>{const[e,t]=Z.useState("email"),{signIn:r,loading:s}=si(),[l,d]=Z.useState(!1),[C,T]=Z.useState(""),b=fs(),{register:u,handleSubmit:x,formState:{errors:f},reset:y}=Rl({resolver:El(lE),mode:"onChange"}),E=async _=>{const m=await r({identifier:_.identifier,password:_.password},b);m&&(console.log(m),d(!0),T(m)),y()};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:"Sign In to your account"}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>t("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="email"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Email Login"}),o.jsx("button",{onClick:()=>t("pmdc"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="pmdc"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"CNIC Login"})]})}),o.jsxs("form",{className:"space-y-6",onSubmit:x(E),children:[o.jsx(Yr,{label:e==="email"?"Email Address":"PMDC Number",type:"text",name:"identifier",...u("identifier"),error:f.identifier?.message,placeholder:e==="email"?"Enter email":"Enter PMDC number",autoComplete:"username"}),o.jsx(Yr,{label:"Password",type:"password",name:"password",...u("password"),error:f.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),o.jsx("button",{type:"submit",disabled:s,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:s?"Signing In...":`Sign In with ${e==="email"?"Email":"CNIC"}`})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("span",{className:"text-sm text-emerald-700",children:"Don't have an account?"}),o.jsx(ns,{to:"/register",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Register"})]}),o.jsx("div",{className:"text-center",children:o.jsx(ns,{to:"/forgot-password?type=auth",className:"ml-1 text-emerald-600 hover:underline font-medium",children:"Forgot Password"})})]}),o.jsx(Up,{open:l,onOpenChange:d,title:"Login Status",description:C,children:o.jsx("button",{className:"mt-4 w-full rounded-lg bg-emerald-600 px-6 py-2 text-white font-semibold shadow-md hover:bg-emerald-700 transition duration-300 ease-in-out active:scale-95",onClick:()=>b("/doctor/upload-documents"),children:"Upload Documents"})})]})},yB=()=>{const e=fs(),{signUpFun:t,loading:r}=si(),{register:s,handleSubmit:l,setValue:d,formState:{errors:C}}=Rl({resolver:El(gB),defaultValues:{name:"",email:"",cnic:"",password:""}}),T=u=>{d("cnic",Bm(u.target.value))},b=async u=>{try{await t(u,e)}catch(x){console.error("Registration error:",x)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:"Create your account"}),o.jsxs("form",{className:"space-y-6",onSubmit:l(b),children:[o.jsx(Yr,{label:"Name",type:"text",...s("name"),error:C.name?.message,required:!0}),o.jsx(Yr,{label:"Email address",type:"email",...s("email"),error:C.email?.message,required:!0}),o.jsx(Yr,{label:"CNIC",...s("cnic"),error:C.cnic?.message,onChange:T,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15}),o.jsx(Yr,{label:"Password",type:"password",...s("password"),error:C.password?.message,required:!0}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md bg-emerald-600 text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Creating Account...":"Register"})})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("span",{className:"text-sm text-emerald-700",children:"Already have an account?"}),o.jsx(ns,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},to:"/login",className:"ml-1 text-emerald-600 hover:underline font-medium",children:"Login"})]})]})})},_B=()=>{const[e,t]=Z.useState("email"),{DoctorLogin:r,loading:s}=ps(),[l,d]=Z.useState(!1),[C,T]=Z.useState(""),b=fs(),{register:u,handleSubmit:x,formState:{errors:f},reset:y}=Rl({resolver:El(lE),mode:"onChange"}),E=async _=>{const m=await r({identifier:_.identifier,password:_.password},b);m&&(console.log(m),d(!0),T(m)),y()};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:"Login as a Doctor"}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>t("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="email"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Email Login"}),o.jsx("button",{onClick:()=>t("pmdc"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="pmdc"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"PMDC Login"})]})}),o.jsxs("form",{className:"space-y-6",onSubmit:x(E),children:[o.jsx(Yr,{label:e==="email"?"Email Address":"PMDC Number",type:"text",name:"identifier",...u("identifier"),error:f.identifier?.message,placeholder:e==="email"?"Enter email":"Enter PMDC number",autoComplete:"username"}),o.jsx(Yr,{label:"Password",type:"password",name:"password",...u("password"),error:f.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),o.jsx("button",{type:"submit",disabled:s,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:s?"Signing In...":`Sign In with ${e==="email"?"Email":"PMDC"}`})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("span",{className:"text-sm text-emerald-700",children:"Don't have an account?"}),o.jsx(ns,{to:"/register/doctor",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Register"})]}),o.jsx("div",{className:"text-center",children:o.jsx(ns,{className:"ml-1 text-emerald-600 hover:underline font-medium",to:"/forgot-password?type=doctor",children:"Forgot Password"})})]}),o.jsx(Up,{open:l,onOpenChange:d,title:"Login Status",description:C,children:o.jsx("button",{className:"mt-4 w-full rounded-lg bg-emerald-600 px-6 py-2 text-white font-semibold shadow-md hover:bg-emerald-700 transition duration-300 ease-in-out active:scale-95",onClick:()=>b("/doctor/upload-documents"),children:"Upload Documents"})})]})},uE=({values:e={},errors:t={},onInputChange:r,onDropdownChange:s,onSpecialtyChange:l,onHospitalChange:d,onHospitalVerification:C,onCnicChange:T,options:b={},include:u={}})=>{const{allPublicHospital:x}=to(),f={degreeOptions:b.degreeOptions||S6,genders:b.genders||x6,religions:b.religions||w6,hospitals:x?.map(E=>E.name).filter((E,_,m)=>m.indexOf(E)===_)||b.hospitals||E6},y={password:u.password!==!1,confirmPassword:u.confirmPassword!==!1,agreement:u.agreement!==!1,city:u.city!==!1,hospital:u.hospital!==!1};return o.jsxs(o.Fragment,{children:[o.jsx(Yr,{label:"Full Name",name:"name",value:e.name||"",onChange:r?.("name"),error:t.name?.message||t.name,required:!0}),o.jsx(Yr,{label:"Email",type:"email",name:"email",value:e.email||"",onChange:r?.("email"),error:t.email?.message||t.email,required:!0,autoComplete:"email"}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(VP,{selectedSpecialties:e.speciality||[],onSpecialtiesChange:E=>l?.(E),placeholder:"Search and select your specialties...",maxSelections:5}),t.speciality&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.speciality?.message||t.speciality})]}),o.jsx(Yr,{label:"Phone",type:"tel",name:"phone",value:e.phone||"",onChange:r?.("phone"),error:t.phone?.message||t.phone,required:!0,placeholder:"03XXXXXXXXX",onlyNumbers:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Gender"}),o.jsx(cd,{options:f.genders,value:e.gender||"",onChange:E=>s?.("gender",E),placeholder:"Select Gender"}),t.gender&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.gender?.message||t.gender})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Religion"}),o.jsx(cd,{options:f.religions,value:e.religion||"",onChange:E=>s?.("religion",E),placeholder:"Select Religion"}),t.religion&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.religion?.message||t.religion})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Main Degree"}),o.jsx(cd,{options:f.degreeOptions,value:e.mainDegree||"",onChange:E=>s?.("mainDegree",E),placeholder:"Select Main Degree"}),t.mainDegree&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.mainDegree?.message||t.mainDegree})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Full Address"}),o.jsx("textarea",{name:"fullAddress",value:e.fullAddress||"",onChange:r?.("fullAddress"),required:!0,rows:1,className:`w-full px-3 py-2 border ${t.fullAddress?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`}),t.fullAddress&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.fullAddress?.message||t.fullAddress})]}),y.hospital&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-emerald-700 font-medium mb-1",children:["Hospital",e.hospital&&e.hospitalVerified&&o.jsx("span",{className:"ml-2 text-xs text-emerald-600 bg-emerald-100 px-2 py-1 rounded",children:" Verified"}),e.hospital&&!e.hospitalVerified&&o.jsx("span",{className:"ml-2 text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded",children:" New Hospital"})]}),o.jsx(qP,{options:f.hospitals,value:e.hospital||"",onChange:E=>d?.(E),registeredOptions:f.hospitals,placeholder:"Search hospitals or add new one...",allowAddNew:!0}),t.hospital&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.hospital?.message||t.hospital})]}),y.city&&o.jsx(Yr,{label:"City",name:"city",value:e.city||"",onChange:r?.("city"),error:t.city?.message||t.city,placeholder:"Enter City Name"}),o.jsx(Yr,{label:"Experience (years)",type:"number",name:"experience",value:e.experience||"",onChange:r?.("experience"),error:t.experience?.message||t.experience,required:!0,min:0}),o.jsx(Yr,{label:"CNIC",name:"cnic",value:e.cnic||"",onChange:T,error:t.cnic?.message||t.cnic,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,onlyNumbers:!0,allowDashes:!0}),o.jsx(Yr,{label:"Fee",type:"number",name:"fee",value:e.fee||"",onChange:r?.("fee"),error:t.fee?.message||t.fee,required:!0,min:0,onlyNumbers:!0}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"availability",name:"availability",checked:e.availability||!1,onChange:r?.("availability"),className:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"availability",className:"text-emerald-700 font-medium",children:"Available for Consultations"})]}),t.availability&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.availability?.message||t.availability}),o.jsx(Yr,{label:"PMDC Number",name:"pmdcNumber",value:e.pmdcNumber||"",onChange:r?.("pmdcNumber"),error:t.pmdcNumber?.message||t.pmdcNumber,required:!0,placeholder:"Enter PMDC Number"}),y.password&&o.jsx(Yr,{label:"Password",type:"password",name:"password",value:e.password||"",onChange:r?.("password"),error:t.password?.message||t.password,required:!0}),y.confirmPassword&&o.jsx(Yr,{label:"Confirm Password",type:"password",name:"confirmPassword",value:e.confirmPassword||"",onChange:r?.("confirmPassword"),error:t.confirmPassword?.message||t.confirmPassword,required:!0}),y.agreement&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:col-span-2",children:[o.jsx("input",{type:"checkbox",id:"agreement",name:"agreement",checked:e.agreement||!1,onChange:r?.("agreement"),className:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300"}),o.jsx("label",{htmlFor:"agreement",className:"text-emerald-800 font-semibold text-base",children:" Please make sure all fields are filled correctly before submitting."})]}),t.agreement&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.agreement?.message||t.agreement})]})]})},bB=()=>{const[e,t]=Z.useState(!1),{DoctorSignUp:r,loading:s,error:l}=ps(),{allPublicHospital:d}=to(),C=fs(),T=Rl({resolver:El(uB),defaultValues:dB,mode:"onChange",criteriaMode:"all"}),{register:b,handleSubmit:u,formState:{errors:x,isValid:f},setValue:y,getValues:E,reset:_,clearErrors:m,watch:k,control:w}=T,U=k(),g=I=>{const H=Bm(I.target.value);y("cnic",H,{shouldValidate:!0})},A=I=>{y("speciality",I,{shouldValidate:!0})},P=I=>{y("hospital",I,{shouldValidate:!0})},z=I=>{y("hospitalVerified",I)},N=I=>{const H=d?.find(F=>F.name===I);H?(y("hospital",I,{shouldValidate:!0}),y("hospitalId",H._id),y("hospitalVerified",!0),console.log("Set verified hospital:",H._id)):(y("hospital",I,{shouldValidate:!0}),y("hospitalId",null),y("hospitalVerified",!1),console.log("Set new hospital: null"))},R=(I,H)=>{y(I,H,{shouldValidate:!0}),m(I)},S=I=>H=>{const F=H.target.type==="checkbox"?H.target.checked:H.target.value;y(I,F,{shouldValidate:!0})},p=I=>{const{confirmPassword:H,agreement:F,...$}=I;return{...$,name:$.name?.trim(),email:$.email?.trim(),phone:$.phone?.trim(),religion:$.religion?.trim(),pmdcNumber:$.pmdcNumber?.trim(),mainDegree:$.mainDegree?.trim(),fullAddress:$.fullAddress?.trim(),city:$.city?.trim()||"",hospital:$.hospital?.trim(),hospitalId:$.hospitalId||null,hospitalVerified:$.hospitalVerified||!1,cnic:$.cnic?.trim(),experience:Number($.experience),fee:Number($.fee)}},D=async I=>{try{const H=p(I);console.log("Doctor Data",H),(await r(H,C))?.success&&(t(!0),_())}catch{}},O=()=>{_(),t(!1)};return{register:b,handleSubmit:u(D,I=>{const H=Object.keys(I)[0];H&&document.querySelector(`[name="${H}"]`)?.focus()}),formState:{errors:x,isValid:f},formValues:U,control:w,handleCnicChange:g,handleSpecialtyChange:A,handleHospitalChange:P,handleHospitalVerification:z,handleHospitalSelection:N,handleDropdownChange:R,handleInputChange:S,resetForm:O,prepareSubmissionData:p,showSuccess:e,setShowSuccess:t,loading:s,error:l}},xB=()=>{const[e,t]=Z.useState(!1),[r,s]=Z.useState(null),l=fs(),{HospitalSignUp:d,loading:C}=to(),T=Rl({resolver:El(fB),defaultValues:mB,mode:"onChange",criteriaMode:"all"}),{register:b,handleSubmit:u,formState:{errors:x,isValid:f},setValue:y,getValues:E,reset:_,clearErrors:m,watch:k,control:w}=T,U=k();return{register:b,handleSubmit:u,formState:{errors:x,isValid:f},setValue:y,getValues:E,reset:_,clearErrors:m,watch:k,control:w,formValues:U,handleCnicChange:j=>{const I=Bm(j.target.value);y("cnic",I,{shouldValidate:!0})},handleDropdownChange:(j,I)=>{y(j,I,{shouldValidate:!0}),m(j)},handleServiceChange:(j,I)=>{const H=E("services")||{};y("services",{...H,[j]:I},{shouldValidate:!0})},handleImageChange:j=>{const I=j?.target?.files?j.target.files[0]:j;I instanceof File&&(y("image",I,{shouldValidate:!0}),m("image"))},handleDocumentChange:j=>{const I=j?.target?.files?j.target.files[0]:j;I instanceof File&&(y("documents",I,{shouldValidate:!0}),m("documents"))},removeDocument:j=>{const H=(E("documents")||[]).filter((F,$)=>$!==j);y("documents",H,{shouldValidate:!0})},handleInputChange:j=>I=>{const H=I.target.type==="checkbox"?I.target.checked:I.target.value;y(j,H,{shouldValidate:!0})},onSubmit:async j=>{const{confirmPassword:I,agreement:H,...F}=j;await d(F,l)},handleInvalidSubmit:j=>{const I=Object.keys(j)[0];I&&document.querySelector(`[name="${I}"]`)?.focus()},showSuccess:e,setShowSuccess:t,loading:C,error:r,setError:s,resetForm:()=>{_(),t(!1),s(null)}}},wB=()=>{const{handleSubmit:e,formState:{errors:t},formValues:r,handleCnicChange:s,handleSpecialtyChange:l,handleHospitalSelection:d,handleDropdownChange:C,handleInputChange:T,resetForm:b,showSuccess:u,setShowSuccess:x,loading:f}=bB();return o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 py-16 px-4",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-2xl w-full",children:u?o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Application Submitted Successfully!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your interest in joining our platform. Your application has been submitted and is currently under review by our admin team."}),o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6",children:[o.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:"What happens next?"}),o.jsxs("ul",{className:"text-sm text-emerald-700 space-y-1",children:[o.jsx("li",{children:" Our admin team will review your application"}),o.jsx("li",{children:" We'll verify your credentials and documents"}),o.jsx("li",{children:" You'll receive an email notification once approved"}),o.jsx("li",{children:" After approval, you can complete your profile setup"})]})]}),o.jsx("button",{onClick:()=>{x(!1),b()},className:"bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors",children:"Submit Another Application"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col items-center mb-4",children:[o.jsx("span",{className:"text-emerald-600 text-4xl mb-2",children:""}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-2 text-center",children:"Join as a Doctor"})]}),o.jsxs("form",{className:"space-y-4",onSubmit:e,children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:o.jsx(uE,{values:r,errors:t,onInputChange:y=>T(y),onDropdownChange:C,onSpecialtyChange:l,onHospitalChange:d,onCnicChange:s})}),o.jsx("button",{type:"submit",disabled:f,className:"w-full py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 font-medium transition-colors duration-200 mt-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Submitting...":"Submit"}),o.jsxs("div",{className:"w-full text-center",children:[o.jsx("span",{className:"text-sm font-semibold text-emerald-700",children:"Already have an account?"}),o.jsx(ns,{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),to:"/doctor/login",className:"ml-1 text-emerald-600 hover:underline font-medium",children:"Login"})]})]})]})})})},SB=()=>{const{register:e,handleSubmit:t,formState:{errors:r,isValid:s},formValues:l,handleDropdownChange:d,handleImageChange:C,handleDocumentChange:T,onSubmit:b,showSuccess:u,setShowSuccess:x,loading:f,error:y,handleCnicChange:E}=xB();return o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 py-16 px-4",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-4xl w-full",children:u?o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Application Submitted Successfully!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your interest in joining our platform. Your hospital application has been submitted and is currently under review by our admin team."}),o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6",children:[o.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:"What happens next?"}),o.jsxs("ul",{className:"text-sm text-emerald-700 space-y-1",children:[o.jsx("li",{children:" Our admin team will review your application"}),o.jsx("li",{children:" We'll verify your hospital license and documents"}),o.jsx("li",{children:" You'll receive an email notification once approved"}),o.jsx("li",{children:" After approval, you can complete your hospital profile setup"})]})]}),o.jsx("button",{onClick:()=>x(!1),className:"bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors",children:"Submit Another Application"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col items-center mb-4",children:[o.jsx("span",{className:"text-emerald-600 text-4xl mb-2",children:""}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-2 text-center",children:"Join as a Hospital"})]}),o.jsxs("form",{className:"space-y-4 grid grid-cols-1 md:grid-cols-2 gap-2",onSubmit:t(b),children:[o.jsx(Yr,{label:"Hospital Name",name:"name",...e("name"),error:r.name?.message,required:!0,placeholder:"Enter hospital name"}),o.jsx(Yr,{label:"Email",type:"email",name:"email",...e("email"),error:r.email?.message,required:!0,placeholder:"hospital@example.com",autoComplete:"email"}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Description"}),o.jsx("textarea",{...e("description"),rows:3,className:`w-full px-3 py-2 border ${r.description?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`,placeholder:"Brief description of your hospital..."}),r.description?.message&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.description.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Hospital Type"}),o.jsx(cd,{options:_6,value:l.hospitalType||"",onChange:_=>d("hospitalType",_),placeholder:"Select Hospital Type"}),r.hospitalType?.message&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.hospitalType.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Category"}),o.jsx(cd,{options:b6,value:l.category||"",onChange:_=>d("category",_),placeholder:"Select Category"}),r.category?.message&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.category.message})]}),o.jsx(Yr,{label:"Phone",type:"tel",name:"phone",...e("phone"),error:r.phone?.message,required:!0,placeholder:"03XXXXXXXXX",onlyNumbers:!0}),o.jsx(Yr,{label:"License Number",name:"licenseNumber",...e("licenseNumber"),error:r.licenseNumber?.message,required:!0,placeholder:"Enter hospital license number"}),o.jsx(Yr,{label:"Established Year",name:"establishedYear",type:"number",...e("establishedYear"),error:r.establishedYear?.message,required:!0,min:1900,max:new Date().getFullYear(),placeholder:"e.g., 1995"}),o.jsx(Yr,{label:"Total Beds",name:"totalBeds",type:"number",...e("totalBeds"),error:r.totalBeds?.message,required:!0,min:1,placeholder:"Number of beds"}),o.jsx(Yr,{label:"Operation Theaters",name:"operationTheaters",type:"number",...e("operationTheaters"),error:r.operationTheaters?.message,required:!0,min:0,placeholder:"Number of OTs"}),o.jsx(Yr,{label:"CNIC",name:"cnic",value:l.cnic||"",onChange:E,error:r.cnic?.message,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,onlyNumbers:!0,allowDashes:!0}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-1",children:"Address"}),o.jsx("textarea",{...e("address"),required:!0,rows:2,className:`w-full px-3 py-2 border ${r.address?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`,placeholder:"Full hospital address..."}),r.address?.message&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.address.message})]}),o.jsx(Yr,{label:"City",name:"city",...e("city"),error:r.city?.message,required:!0,placeholder:"Enter city name"}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-emerald-700 font-medium mb-2",children:"Available Services"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"emergencyServices",...e("services.emergencyServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"emergencyServices",className:"ml-2 text-sm text-gray-700",children:"Emergency Services Available"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"ambulanceServices",...e("services.ambulanceServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"ambulanceServices",className:"ml-2 text-sm text-gray-700",children:"Ambulance Services Available"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"icuServices",...e("services.icuServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"icuServices",className:"ml-2 text-sm text-gray-700",children:"ICU Services Available"})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx(dx,{label:"Hospital Image",name:"image",onChange:C,error:r.image?.message,accept:"image/jpeg,image/png,image/jpg",maxSize:5e6,required:!0})}),o.jsx("div",{className:"md:col-span-2",children:o.jsx(dx,{label:"Hospital Documents",name:"documents",onChange:T,error:r.documents?.message,accept:"image/jpeg,image/png,image/jpg",maxSize:5e6,required:!0})}),o.jsx(Yr,{label:"Password",type:"password",name:"password",...e("password"),error:r.password?.message,required:!0}),o.jsx(Yr,{label:"Confirm Password",type:"password",name:"confirmPassword",...e("confirmPassword"),error:r.confirmPassword?.message,required:!0}),o.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:col-span-2",children:[o.jsx("input",{type:"checkbox",id:"agreement",...e("agreement"),className:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300",required:!0}),o.jsx("label",{htmlFor:"agreement",className:"text-emerald-800 font-semibold text-base",children:" Please make sure all fields are filled correctly before submitting."})]}),r.agreement?.message&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.agreement.message}),y&&o.jsx("div",{className:"md:col-span-2 bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("p",{className:"text-red-600 text-sm",children:y})}),o.jsx("button",{type:"submit",disabled:!s||f,className:"w-full md:col-span-2 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 font-medium transition-colors duration-200 mt-4 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Submitting...":"Submit"}),o.jsxs("div",{className:"w-full text-center md:col-span-2",children:[o.jsx("span",{className:"text-sm font-semibold text-emerald-700",children:"Already have an account?"}),o.jsx(ns,{to:"/hospital/login",className:"ml-1 text-emerald-600 hover:underline font-medium",children:"Login"})]})]})]})})})},RB=Tc({email:Xr().min(1,"Email is required").email("Enter a valid email").trim(),password:Xr().min(6,"Password must be at least 6 characters long")}),EB=()=>{const e=fs(),{HospitalLogin:t,loading:r}=to(),[s,l]=Z.useState(""),{register:d,handleSubmit:C,formState:{errors:T},reset:b}=Rl({resolver:El(RB),mode:"onChange"}),u=async x=>{l("");try{await t({email:x.email,password:x.password},e),b()}catch{l("Login failed. Please try again.")}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:"Login as a Hospital"}),o.jsxs("form",{className:"space-y-6",onSubmit:C(u),children:[o.jsx(Yr,{label:"Email Address",type:"email",name:"email",...d("email"),error:T.email?.message,placeholder:"Enter your email",autoComplete:"username"}),o.jsx(Yr,{label:"Password",type:"password",name:"password",...d("password"),error:T.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),s&&o.jsx("p",{className:"text-red-500 text-sm",children:s}),o.jsx("button",{type:"submit",disabled:r,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:r?"Signing In...":"Sign In"})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("span",{className:"text-sm text-emerald-700",children:"Don't have an account?"}),o.jsx(ns,{to:"/register/hospital",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Register"})]}),o.jsx("div",{className:"text-center",children:o.jsx(ns,{to:"/forgot-password?type=hospital",className:"ml-1 text-emerald-600 hover:underline font-medium",children:"Forgot Password"})})]})})};var Zf={exports:{}},I1;function kB(){if(I1)return Zf.exports;I1=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(P,z,N){return Function.prototype.apply.call(P,z,N)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:r=function(P){return Object.getOwnPropertyNames(P)};function s(A){console&&console.warn&&console.warn(A)}var l=Number.isNaN||function(P){return P!==P};function d(){d.init.call(this)}Zf.exports=d,Zf.exports.once=w,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var C=10;function T(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(A){if(typeof A!="number"||A<0||l(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");C=A}}),d.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||l(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function b(A){return A._maxListeners===void 0?d.defaultMaxListeners:A._maxListeners}d.prototype.getMaxListeners=function(){return b(this)},d.prototype.emit=function(P){for(var z=[],N=1;N<arguments.length;N++)z.push(arguments[N]);var R=P==="error",S=this._events;if(S!==void 0)R=R&&S.error===void 0;else if(!R)return!1;if(R){var p;if(z.length>0&&(p=z[0]),p instanceof Error)throw p;var D=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw D.context=p,D}var O=S[P];if(O===void 0)return!1;if(typeof O=="function")t(O,this,z);else for(var j=O.length,I=_(O,j),N=0;N<j;++N)t(I[N],this,z);return!0};function u(A,P,z,N){var R,S,p;if(T(z),S=A._events,S===void 0?(S=A._events=Object.create(null),A._eventsCount=0):(S.newListener!==void 0&&(A.emit("newListener",P,z.listener?z.listener:z),S=A._events),p=S[P]),p===void 0)p=S[P]=z,++A._eventsCount;else if(typeof p=="function"?p=S[P]=N?[z,p]:[p,z]:N?p.unshift(z):p.push(z),R=b(A),R>0&&p.length>R&&!p.warned){p.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=A,D.type=P,D.count=p.length,s(D)}return A}d.prototype.addListener=function(P,z){return u(this,P,z,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(P,z){return u(this,P,z,!0)};function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(A,P,z){var N={fired:!1,wrapFn:void 0,target:A,type:P,listener:z},R=x.bind(N);return R.listener=z,N.wrapFn=R,R}d.prototype.once=function(P,z){return T(z),this.on(P,f(this,P,z)),this},d.prototype.prependOnceListener=function(P,z){return T(z),this.prependListener(P,f(this,P,z)),this},d.prototype.removeListener=function(P,z){var N,R,S,p,D;if(T(z),R=this._events,R===void 0)return this;if(N=R[P],N===void 0)return this;if(N===z||N.listener===z)--this._eventsCount===0?this._events=Object.create(null):(delete R[P],R.removeListener&&this.emit("removeListener",P,N.listener||z));else if(typeof N!="function"){for(S=-1,p=N.length-1;p>=0;p--)if(N[p]===z||N[p].listener===z){D=N[p].listener,S=p;break}if(S<0)return this;S===0?N.shift():m(N,S),N.length===1&&(R[P]=N[0]),R.removeListener!==void 0&&this.emit("removeListener",P,D||z)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(P){var z,N,R;if(N=this._events,N===void 0)return this;if(N.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):N[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete N[P]),this;if(arguments.length===0){var S=Object.keys(N),p;for(R=0;R<S.length;++R)p=S[R],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(z=N[P],typeof z=="function")this.removeListener(P,z);else if(z!==void 0)for(R=z.length-1;R>=0;R--)this.removeListener(P,z[R]);return this};function y(A,P,z){var N=A._events;if(N===void 0)return[];var R=N[P];return R===void 0?[]:typeof R=="function"?z?[R.listener||R]:[R]:z?k(R):_(R,R.length)}d.prototype.listeners=function(P){return y(this,P,!0)},d.prototype.rawListeners=function(P){return y(this,P,!1)},d.listenerCount=function(A,P){return typeof A.listenerCount=="function"?A.listenerCount(P):E.call(A,P)},d.prototype.listenerCount=E;function E(A){var P=this._events;if(P!==void 0){var z=P[A];if(typeof z=="function")return 1;if(z!==void 0)return z.length}return 0}d.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function _(A,P){for(var z=new Array(P),N=0;N<P;++N)z[N]=A[N];return z}function m(A,P){for(;P+1<A.length;P++)A[P]=A[P+1];A.pop()}function k(A){for(var P=new Array(A.length),z=0;z<P.length;++z)P[z]=A[z].listener||A[z];return P}function w(A,P){return new Promise(function(z,N){function R(p){A.removeListener(P,S),N(p)}function S(){typeof A.removeListener=="function"&&A.removeListener("error",R),z([].slice.call(arguments))}g(A,P,S,{once:!0}),P!=="error"&&U(A,R,{once:!0})})}function U(A,P,z){typeof A.on=="function"&&g(A,"error",P,z)}function g(A,P,z,N){if(typeof A.on=="function")N.once?A.once(P,z):A.on(P,z);else if(typeof A.addEventListener=="function")A.addEventListener(P,function R(S){N.once&&A.removeEventListener(P,R),z(S)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return Zf.exports}var CB=kB();const TB=S0(CB);var Hv={exports:{}},B1;function PB(){return B1||(B1=1,function(e,t){var r={};/*! For license information please see videosdk.js.LICENSE.txt */(function(s,l){e.exports=l()})(self,()=>(()=>{var s={11:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Chrome74=void 0;const x=u(7363),f=u(2994),y=u(1765),E=u(8046),_=u(5544),m=u(5938),k=u(4256),w=u(4893),U=u(521),g=u(1305),A=u(3303),P=new f.Logger("Chrome74"),z={OS:1024,MIS:1024};class N extends U.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new N}constructor(){super()}get name(){return"Chrome74"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const S=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{S.addTransceiver("audio"),S.addTransceiver("video");const p=await S.createOffer();try{S.close()}catch{}const D=x.parse(p.sdp),O=_.extractRtpCapabilities({sdpObject:D});return k.addNackSupportForOpus(O),O}catch(p){try{S.close()}catch{}throw p}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:z}}run({direction:S,iceParameters:p,iceCandidates:D,dtlsParameters:O,sctpParameters:j,iceServers:I,iceTransportPolicy:H,additionalSettings:F,proprietaryConstraints:$,extendedRtpCapabilities:q}){P.debug("run()"),this._direction=S,this._remoteSdp=new g.RemoteSdp({iceParameters:p,iceCandidates:D,dtlsParameters:O,sctpParameters:j}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",q),video:E.getSendingRtpParameters("video",q)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",q),video:E.getSendingRemoteRtpParameters("video",q)},O.role&&O.role!=="auto"&&(this._forcedLocalDtlsRole=O.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:I??[],iceTransportPolicy:H??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...F},$),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",se=>{this.emit("@icecandidateerror",se)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(S){this.assertNotClosed(),P.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=S,this._pc.setConfiguration(p)}async restartIce(S){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(S),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:S,encodings:p,codecOptions:D,codec:O}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",S.kind,S.id),p&&p.length>1&&p.forEach((me,Ce)=>{me.rid=`r${Ce}`});const j=y.clone(this._sendingRtpParametersByKind[S.kind]);j.codecs=E.reduceCodecs(j.codecs,O);const I=y.clone(this._sendingRemoteRtpParametersByKind[S.kind]);I.codecs=E.reduceCodecs(I.codecs,O);const H=this._remoteSdp.getNextMediaSectionIdx(),F=this._pc.addTransceiver(S,{direction:"sendonly",streams:[this._sendStream],sendEncodings:p});let $,q=await this._pc.createOffer(),se=x.parse(q.sdp);se.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:se});let J=!1;const be=(0,A.parse)((p??[{}])[0].scalabilityMode);p&&p.length===1&&be.spatialLayers>1&&j.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(P.debug("send() | enabling legacy simulcast for VP9 SVC"),J=!0,se=x.parse(q.sdp),$=se.media[H.idx],m.addLegacySimulcast({offerMediaObject:$,numStreams:be.spatialLayers}),q={type:"offer",sdp:x.write(se)}),P.debug("send() | calling pc.setLocalDescription() [offer:%o]",q),await this._pc.setLocalDescription(q);const Re=F.mid;if(j.mid=Re,se=x.parse(this._pc.localDescription.sdp),$=se.media[H.idx],j.rtcp.cname=_.getCname({offerMediaObject:$}),p)if(p.length===1){let me=m.getRtpEncodings({offerMediaObject:$});Object.assign(me[0],p[0]),J&&(me=[me[0]]),j.encodings=me}else j.encodings=p;else j.encodings=m.getRtpEncodings({offerMediaObject:$});if(j.encodings.length>1&&(j.codecs[0].mimeType.toLowerCase()==="video/vp8"||j.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const me of j.encodings)me.scalabilityMode?me.scalabilityMode=`L1T${be.temporalLayers}`:me.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:$,reuseMid:H.reuseMid,offerRtpParameters:j,answerRtpParameters:I,codecOptions:D});const Se={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Se),await this._pc.setRemoteDescription(Se),this._mapMidTransceiver.set(Re,F),{localId:Re,rtpParameters:j,rtpSender:F.sender}}async stopSending(S){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",S),this._closed)return;const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const D=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._mapMidTransceiver.delete(S)}async pauseSending(S){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",S);const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(S);const D=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async resumeSending(S){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",S);const p=this._mapMidTransceiver.get(S);if(this._remoteSdp.resumeSendingMediaSection(S),!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly";const D=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async replaceTrack(S,p){this.assertNotClosed(),this.assertSendDirection(),p?P.debug("replaceTrack() [localId:%s, track.id:%s]",S,p.id):P.debug("replaceTrack() [localId:%s, no track]",S);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");await D.sender.replaceTrack(p)}async setMaxSpatialLayer(S,p){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",S,p);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");const O=D.sender.getParameters();O.encodings.forEach((H,F)=>{H.active=F<=p}),await D.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(S,O.encodings);const j=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async setRtpEncodingParameters(S,p){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",S,p);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");const O=D.sender.getParameters();O.encodings.forEach((H,F)=>{O.encodings[F]={...H,...p}}),await D.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(S,O.encodings);const j=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async getSenderStats(S){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:S,maxPacketLifeTime:p,maxRetransmits:D,label:O,protocol:j}){this.assertNotClosed(),this.assertSendDirection();const I={negotiated:!0,id:this._nextSendSctpStreamId,ordered:S,maxPacketLifeTime:p,maxRetransmits:D,protocol:j};P.debug("sendDataChannel() [options:%o]",I);const H=this._pc.createDataChannel(O,I);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%z.MIS,!this._hasDataChannelMediaSection){const F=await this._pc.createOffer(),$=x.parse(F.sdp),q=$.media.find(J=>J.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F),this._remoteSdp.sendSctpAssociation({offerMediaObject:q});const se={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",se),await this._pc.setRemoteDescription(se),this._hasDataChannelMediaSection=!0}return{dataChannel:H,sctpStreamParameters:{streamId:I.id,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits}}}async receive(S){this.assertNotClosed(),this.assertRecvDirection();const p=[],D=new Map;for(const H of S){const{trackId:F,kind:$,rtpParameters:q,streamId:se}=H;P.debug("receive() [trackId:%s, kind:%s]",F,$);const J=q.mid??String(this._mapMidTransceiver.size);D.set(F,J),this._remoteSdp.receive({mid:J,kind:$,offerRtpParameters:q,streamId:se??q.rtcp.cname,trackId:F})}const O={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);let j=await this._pc.createAnswer();const I=x.parse(j.sdp);for(const H of S){const{trackId:F,rtpParameters:$}=H,q=D.get(F),se=I.media.find(J=>String(J.mid)===q);_.applyCodecParameters({offerRtpParameters:$,answerMediaObject:se})}j={type:"answer",sdp:x.write(I)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",j),await this._pc.setLocalDescription(j);for(const H of S){const{trackId:F}=H,$=D.get(F),q=this._pc.getTransceivers().find(se=>se.mid===$);if(!q)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set($,q),p.push({localId:$,track:q.receiver.track,rtpReceiver:q.receiver})}return p}async stopReceiving(S){if(this.assertRecvDirection(),this._closed)return;for(const O of S){P.debug("stopReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(j.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const O of S)this._mapMidTransceiver.delete(O)}async pauseReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const O of S){P.debug("pauseReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");j.direction="inactive",this._remoteSdp.pauseMediaSection(O)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}async resumeReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const O of S){P.debug("resumeReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");j.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(O)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}async getReceiverStats(S){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:S,label:p,protocol:D}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:O,ordered:j,maxPacketLifeTime:I,maxRetransmits:H}=S,F={negotiated:!0,id:O,ordered:j,maxPacketLifeTime:I,maxRetransmits:H,protocol:D};P.debug("receiveDataChannel() [options:%o]",F);const $=this._pc.createDataChannel(p,F);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const q={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",q),await this._pc.setRemoteDescription(q);const se=await this._pc.createAnswer();if(!this._transportReady){const J=x.parse(se.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",se),await this._pc.setLocalDescription(se),this._hasDataChannelMediaSection=!0}return{dataChannel:$}}async setupTransport({localDtlsRole:S,localSdpObject:p}){p||(p=x.parse(this._pc.localDescription.sdp));const D=_.extractDtlsParameters({sdpObject:p});D.role=S,this._remoteSdp.updateDtlsRole(S==="client"?"server":"client"),await new Promise((O,j)=>{this.safeEmit("@connect",{dtlsParameters:D},O,j)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new w.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Chrome74=N},19:function(T,b,u){var x,f,y,E,_,m,k,w,U;T.exports=(U=u(9021),u(3009),u(1025),f=(x=U).lib,y=f.Base,E=f.WordArray,_=x.algo,m=_.SHA256,k=_.HMAC,w=_.PBKDF2=y.extend({cfg:y.extend({keySize:4,hasher:m,iterations:25e4}),init:function(g){this.cfg=this.cfg.extend(g)},compute:function(g,A){for(var P=this.cfg,z=k.create(P.hasher,g),N=E.create(),R=E.create([1]),S=N.words,p=R.words,D=P.keySize,O=P.iterations;S.length<D;){var j=z.update(A).finalize(R);z.reset();for(var I=j.words,H=I.length,F=j,$=1;$<O;$++){F=z.finalize(F),z.reset();for(var q=F.words,se=0;se<H;se++)I[se]^=q[se]}N.concat(j),p[0]++}return N.sigBytes=4*D,N}}),x.PBKDF2=function(g,A,P){return w.create(P).compute(g,A)},U.PBKDF2)},25:function(T,b,u){var x,f,y,E;T.exports=(E=u(9021),u(7165),f=(x=E).lib.CipherParams,y=x.enc.Hex,x.format.Hex={stringify:function(_){return _.ciphertext.toString(y)},parse:function(_){var m=y.parse(_);return f.create({ciphertext:m})}},E.format.Hex)},76:(T,b,u)=>{b.s$=b.pF=void 0,u(7833).default,u(8057);var x=u(6004);Object.defineProperty(b,"pF",{enumerable:!0,get:function(){return x.Device}});var f=u(3303);Object.defineProperty(b,"s$",{enumerable:!0,get:function(){return f.parse}}),u(8046),u(2731),u(5248)},182:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.version=b.validate=b.v7=b.v6ToV1=b.v6=b.v5=b.v4=b.v3=b.v1ToV6=b.v1=b.stringify=b.parse=b.NIL=b.MAX=void 0;var x=u(2196);Object.defineProperty(b,"MAX",{enumerable:!0,get:function(){return x.default}});var f=u(3465);Object.defineProperty(b,"NIL",{enumerable:!0,get:function(){return f.default}});var y=u(1797);Object.defineProperty(b,"parse",{enumerable:!0,get:function(){return y.default}});var E=u(6011);Object.defineProperty(b,"stringify",{enumerable:!0,get:function(){return E.default}});var _=u(1425);Object.defineProperty(b,"v1",{enumerable:!0,get:function(){return _.default}});var m=u(6568);Object.defineProperty(b,"v1ToV6",{enumerable:!0,get:function(){return m.default}});var k=u(591);Object.defineProperty(b,"v3",{enumerable:!0,get:function(){return k.default}});var w=u(8286);Object.defineProperty(b,"v4",{enumerable:!0,get:function(){return w.default}});var U=u(4557);Object.defineProperty(b,"v5",{enumerable:!0,get:function(){return U.default}});var g=u(6356);Object.defineProperty(b,"v6",{enumerable:!0,get:function(){return g.default}});var A=u(268);Object.defineProperty(b,"v6ToV1",{enumerable:!0,get:function(){return A.default}});var P=u(4299);Object.defineProperty(b,"v7",{enumerable:!0,get:function(){return P.default}});var z=u(9746);Object.defineProperty(b,"validate",{enumerable:!0,get:function(){return z.default}});var N=u(2770);Object.defineProperty(b,"version",{enumerable:!0,get:function(){return N.default}})},268:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0});const x=u(1797),f=u(6011);b.default=function(y){const E=function(_){return Uint8Array.of((15&_[3])<<4|_[4]>>4&15,(15&_[4])<<4|(240&_[5])>>4,(15&_[5])<<4|15&_[6],_[7],(15&_[1])<<4|(240&_[2])>>4,(15&_[2])<<4|(240&_[3])>>4,16|(240&_[0])>>4,(15&_[0])<<4|(240&_[1])>>4,_[8],_[9],_[10],_[11],_[12],_[13],_[14],_[15])}(typeof y=="string"?(0,x.default)(y):y);return typeof y=="string"?(0,f.unsafeStringify)(E):E}},296:(T,b,u)=>{u.d(b,{A:()=>f});var x=u(7800);function f(y,E){return function(_){if(Array.isArray(_))return _}(y)||function(_,m){var k=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(k!=null){var w,U,g,A,P=[],z=!0,N=!1;try{if(g=(k=k.call(_)).next,m===0){if(Object(k)!==k)return;z=!1}else for(;!(z=(w=g.call(k)).done)&&(P.push(w.value),P.length!==m);z=!0);}catch(R){N=!0,U=R}finally{try{if(!z&&k.return!=null&&(A=k.return(),Object(A)!==A))return}finally{if(N)throw U}}return P}}(y,E)||(0,x.A)(y,E)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},328:(T,b,u)=>{u(8624),T.exports=self.fetch.bind(self)},338:(T,b)=>{function u(k){return 14+(k+64>>>9<<4)+1}function x(k,w){const U=(65535&k)+(65535&w);return(k>>16)+(w>>16)+(U>>16)<<16|65535&U}function f(k,w,U,g,A,P){return x((z=x(x(w,k),x(g,P)))<<(N=A)|z>>>32-N,U);var z,N}function y(k,w,U,g,A,P,z){return f(w&U|~w&g,k,w,A,P,z)}function E(k,w,U,g,A,P,z){return f(w&g|U&~g,k,w,A,P,z)}function _(k,w,U,g,A,P,z){return f(w^U^g,k,w,A,P,z)}function m(k,w,U,g,A,P,z){return f(U^(w|~g),k,w,A,P,z)}Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(k){return function(w){const U=new Uint8Array(4*w.length);for(let g=0;g<4*w.length;g++)U[g]=w[g>>2]>>>g%4*8&255;return U}(function(w,U){const g=new Uint32Array(u(U)).fill(0);g.set(w),g[U>>5]|=128<<U%32,g[g.length-1]=U,w=g;let A=1732584193,P=-271733879,z=-1732584194,N=271733878;for(let R=0;R<w.length;R+=16){const S=A,p=P,D=z,O=N;A=y(A,P,z,N,w[R],7,-680876936),N=y(N,A,P,z,w[R+1],12,-389564586),z=y(z,N,A,P,w[R+2],17,606105819),P=y(P,z,N,A,w[R+3],22,-1044525330),A=y(A,P,z,N,w[R+4],7,-176418897),N=y(N,A,P,z,w[R+5],12,1200080426),z=y(z,N,A,P,w[R+6],17,-1473231341),P=y(P,z,N,A,w[R+7],22,-45705983),A=y(A,P,z,N,w[R+8],7,1770035416),N=y(N,A,P,z,w[R+9],12,-1958414417),z=y(z,N,A,P,w[R+10],17,-42063),P=y(P,z,N,A,w[R+11],22,-1990404162),A=y(A,P,z,N,w[R+12],7,1804603682),N=y(N,A,P,z,w[R+13],12,-40341101),z=y(z,N,A,P,w[R+14],17,-1502002290),P=y(P,z,N,A,w[R+15],22,1236535329),A=E(A,P,z,N,w[R+1],5,-165796510),N=E(N,A,P,z,w[R+6],9,-1069501632),z=E(z,N,A,P,w[R+11],14,643717713),P=E(P,z,N,A,w[R],20,-373897302),A=E(A,P,z,N,w[R+5],5,-701558691),N=E(N,A,P,z,w[R+10],9,38016083),z=E(z,N,A,P,w[R+15],14,-660478335),P=E(P,z,N,A,w[R+4],20,-405537848),A=E(A,P,z,N,w[R+9],5,568446438),N=E(N,A,P,z,w[R+14],9,-1019803690),z=E(z,N,A,P,w[R+3],14,-187363961),P=E(P,z,N,A,w[R+8],20,1163531501),A=E(A,P,z,N,w[R+13],5,-1444681467),N=E(N,A,P,z,w[R+2],9,-51403784),z=E(z,N,A,P,w[R+7],14,1735328473),P=E(P,z,N,A,w[R+12],20,-1926607734),A=_(A,P,z,N,w[R+5],4,-378558),N=_(N,A,P,z,w[R+8],11,-2022574463),z=_(z,N,A,P,w[R+11],16,1839030562),P=_(P,z,N,A,w[R+14],23,-35309556),A=_(A,P,z,N,w[R+1],4,-1530992060),N=_(N,A,P,z,w[R+4],11,1272893353),z=_(z,N,A,P,w[R+7],16,-155497632),P=_(P,z,N,A,w[R+10],23,-1094730640),A=_(A,P,z,N,w[R+13],4,681279174),N=_(N,A,P,z,w[R],11,-358537222),z=_(z,N,A,P,w[R+3],16,-722521979),P=_(P,z,N,A,w[R+6],23,76029189),A=_(A,P,z,N,w[R+9],4,-640364487),N=_(N,A,P,z,w[R+12],11,-421815835),z=_(z,N,A,P,w[R+15],16,530742520),P=_(P,z,N,A,w[R+2],23,-995338651),A=m(A,P,z,N,w[R],6,-198630844),N=m(N,A,P,z,w[R+7],10,1126891415),z=m(z,N,A,P,w[R+14],15,-1416354905),P=m(P,z,N,A,w[R+5],21,-57434055),A=m(A,P,z,N,w[R+12],6,1700485571),N=m(N,A,P,z,w[R+3],10,-1894986606),z=m(z,N,A,P,w[R+10],15,-1051523),P=m(P,z,N,A,w[R+1],21,-2054922799),A=m(A,P,z,N,w[R+8],6,1873313359),N=m(N,A,P,z,w[R+15],10,-30611744),z=m(z,N,A,P,w[R+6],15,-1560198380),P=m(P,z,N,A,w[R+13],21,1309151649),A=m(A,P,z,N,w[R+4],6,-145523070),N=m(N,A,P,z,w[R+11],10,-1120210379),z=m(z,N,A,P,w[R+2],15,718787259),P=m(P,z,N,A,w[R+9],21,-343485551),A=x(A,S),P=x(P,p),z=x(z,D),N=x(N,O)}return Uint32Array.of(A,P,z,N)}(function(w){if(w.length===0)return new Uint32Array;const U=new Uint32Array(u(8*w.length)).fill(0);for(let g=0;g<w.length;g++)U[g>>2]|=(255&w[g])<<g%4*8;return U}(k),8*k.length))}},388:(T,b,u)=>{u.d(b,{A:()=>f});var x=u(2284);function f(y,E){if(E&&((0,x.A)(E)=="object"||typeof E=="function"))return E;if(E!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(y)}},467:(T,b,u)=>{function x(y,E,_,m,k,w,U){try{var g=y[w](U),A=g.value}catch(P){return void _(P)}g.done?E(A):Promise.resolve(A).then(m,k)}function f(y){return function(){var E=this,_=arguments;return new Promise(function(m,k){var w=y.apply(E,_);function U(A){x(w,m,k,U,g,"next",A)}function g(A){x(w,m,k,U,g,"throw",A)}U(void 0)})}}u.d(b,{A:()=>f})},477:()=>{},482:function(T,b,u){var x;T.exports=(x=u(9021),u(7165),x.pad.Iso97971={pad:function(f,y){f.concat(x.lib.WordArray.create([2147483648],1)),x.pad.ZeroPadding.pad(f,y)},unpad:function(f){x.pad.ZeroPadding.unpad(f),f.sigBytes--}},x.pad.Iso97971)},521:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.HandlerInterface=void 0;const x=u(3953);class f extends x.EnhancedEventEmitter{constructor(){super()}}b.HandlerInterface=f},579:(T,b,u)=>{var x=u(3738).default;T.exports=function(f){if(f!=null){var y=f[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],E=0;if(y)return y.call(f);if(typeof f.next=="function")return f;if(!isNaN(f.length))return{next:function(){return f&&E>=f.length&&(f=void 0),{value:f&&f[E++],done:!f}}}}throw new TypeError(x(f)+" is not iterable")},T.exports.__esModule=!0,T.exports.default=T.exports},591:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.URL=b.DNS=void 0;const x=u(338),f=u(2988);var y=u(2988);function E(_,m,k,w){return(0,f.default)(48,x.default,_,m,k,w)}Object.defineProperty(b,"DNS",{enumerable:!0,get:function(){return y.DNS}}),Object.defineProperty(b,"URL",{enumerable:!0,get:function(){return y.URL}}),E.DNS=f.DNS,E.URL=f.URL,b.default=E},736:(T,b,u)=>{T.exports=function(x){function f(_){let m,k,w,U=null;function g(...A){if(!g.enabled)return;const P=g,z=Number(new Date),N=z-(m||z);P.diff=N,P.prev=m,P.curr=z,m=z,A[0]=f.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let R=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(S,p)=>{if(S==="%%")return"%";R++;const D=f.formatters[p];if(typeof D=="function"){const O=A[R];S=D.call(P,O),A.splice(R,1),R--}return S}),f.formatArgs.call(P,A),(P.log||f.log).apply(P,A)}return g.namespace=_,g.useColors=f.useColors(),g.color=f.selectColor(_),g.extend=y,g.destroy=f.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>U!==null?U:(k!==f.namespaces&&(k=f.namespaces,w=f.enabled(_)),w),set:A=>{U=A}}),typeof f.init=="function"&&f.init(g),g}function y(_,m){const k=f(this.namespace+(m===void 0?":":m)+_);return k.log=this.log,k}function E(_,m){let k=0,w=0,U=-1,g=0;for(;k<_.length;)if(w<m.length&&(m[w]===_[k]||m[w]==="*"))m[w]==="*"?(U=w,g=k,w++):(k++,w++);else{if(U===-1)return!1;w=U+1,g++,k=g}for(;w<m.length&&m[w]==="*";)w++;return w===m.length}return f.debug=f,f.default=f,f.coerce=function(_){return _ instanceof Error?_.stack||_.message:_},f.disable=function(){const _=[...f.names,...f.skips.map(m=>"-"+m)].join(",");return f.enable(""),_},f.enable=function(_){f.save(_),f.namespaces=_,f.names=[],f.skips=[];const m=(typeof _=="string"?_:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const k of m)k[0]==="-"?f.skips.push(k.slice(1)):f.names.push(k)},f.enabled=function(_){for(const m of f.skips)if(E(_,m))return!1;for(const m of f.names)if(E(_,m))return!0;return!1},f.humanize=u(6585),f.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(x).forEach(_=>{f[_]=x[_]}),f.names=[],f.skips=[],f.formatters={},f.selectColor=function(_){let m=0;for(let k=0;k<_.length;k++)m=(m<<5)-m+_.charCodeAt(k),m|=0;return f.colors[Math.abs(m)%f.colors.length]},f.enable(f.load()),f}},754:function(T,b,u){var x;T.exports=(x=u(9021),function(){var f=x,y=f.lib.WordArray;function E(_,m,k){for(var w=[],U=0,g=0;g<m;g++)if(g%4){var A=k[_.charCodeAt(g-1)]<<g%4*2|k[_.charCodeAt(g)]>>>6-g%4*2;w[U>>>2]|=A<<24-U%4*8,U++}return y.create(w,U)}f.enc.Base64={stringify:function(_){var m=_.words,k=_.sigBytes,w=this._map;_.clamp();for(var U=[],g=0;g<k;g+=3)for(var A=(m[g>>>2]>>>24-g%4*8&255)<<16|(m[g+1>>>2]>>>24-(g+1)%4*8&255)<<8|m[g+2>>>2]>>>24-(g+2)%4*8&255,P=0;P<4&&g+.75*P<k;P++)U.push(w.charAt(A>>>6*(3-P)&63));var z=w.charAt(64);if(z)for(;U.length%4;)U.push(z);return U.join("")},parse:function(_){var m=_.length,k=this._map,w=this._reverseMap;if(!w){w=this._reverseMap=[];for(var U=0;U<k.length;U++)w[k.charCodeAt(U)]=U}var g=k.charAt(64);if(g){var A=_.indexOf(g);A!==-1&&(m=A)}return E(_,m,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),x.enc.Base64)},816:(T,b,u)=>{u.d(b,{A:()=>f});var x=u(2284);function f(y){var E=function(_,m){if((0,x.A)(_)!="object"||!_)return _;var k=_[Symbol.toPrimitive];if(k!==void 0){var w=k.call(_,m);if((0,x.A)(w)!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(_)}(y,"string");return(0,x.A)(E)=="symbol"?E:E+""}},887:(T,b,u)=>{var x=u(6993),f=u(1791);T.exports=function(y,E,_,m,k){return new f(x().w(y,E,_,m),k||Promise)},T.exports.__esModule=!0,T.exports.default=T.exports},955:function(T,b,u){var x;T.exports=(x=u(9021),u(754),u(4636),u(9506),u(7165),function(){var f=x,y=f.lib.BlockCipher,E=f.algo,_=[],m=[],k=[],w=[],U=[],g=[],A=[],P=[],z=[],N=[];(function(){for(var p=[],D=0;D<256;D++)p[D]=D<128?D<<1:D<<1^283;var O=0,j=0;for(D=0;D<256;D++){var I=j^j<<1^j<<2^j<<3^j<<4;I=I>>>8^255&I^99,_[O]=I,m[I]=O;var H=p[O],F=p[H],$=p[F],q=257*p[I]^16843008*I;k[O]=q<<24|q>>>8,w[O]=q<<16|q>>>16,U[O]=q<<8|q>>>24,g[O]=q,q=16843009*$^65537*F^257*H^16843008*O,A[I]=q<<24|q>>>8,P[I]=q<<16|q>>>16,z[I]=q<<8|q>>>24,N[I]=q,O?(O=H^p[p[p[$^H]]],j^=p[p[j]]):O=j=1}})();var R=[0,1,2,4,8,16,32,64,128,27,54],S=E.AES=y.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var p=this._keyPriorReset=this._key,D=p.words,O=p.sigBytes/4,j=4*((this._nRounds=O+6)+1),I=this._keySchedule=[],H=0;H<j;H++)H<O?I[H]=D[H]:(q=I[H-1],H%O?O>6&&H%O==4&&(q=_[q>>>24]<<24|_[q>>>16&255]<<16|_[q>>>8&255]<<8|_[255&q]):(q=_[(q=q<<8|q>>>24)>>>24]<<24|_[q>>>16&255]<<16|_[q>>>8&255]<<8|_[255&q],q^=R[H/O|0]<<24),I[H]=I[H-O]^q);for(var F=this._invKeySchedule=[],$=0;$<j;$++){if(H=j-$,$%4)var q=I[H];else q=I[H-4];F[$]=$<4||H<=4?q:A[_[q>>>24]]^P[_[q>>>16&255]]^z[_[q>>>8&255]]^N[_[255&q]]}}},encryptBlock:function(p,D){this._doCryptBlock(p,D,this._keySchedule,k,w,U,g,_)},decryptBlock:function(p,D){var O=p[D+1];p[D+1]=p[D+3],p[D+3]=O,this._doCryptBlock(p,D,this._invKeySchedule,A,P,z,N,m),O=p[D+1],p[D+1]=p[D+3],p[D+3]=O},_doCryptBlock:function(p,D,O,j,I,H,F,$){for(var q=this._nRounds,se=p[D]^O[0],J=p[D+1]^O[1],be=p[D+2]^O[2],Re=p[D+3]^O[3],Se=4,me=1;me<q;me++){var Ce=j[se>>>24]^I[J>>>16&255]^H[be>>>8&255]^F[255&Re]^O[Se++],Be=j[J>>>24]^I[be>>>16&255]^H[Re>>>8&255]^F[255&se]^O[Se++],_e=j[be>>>24]^I[Re>>>16&255]^H[se>>>8&255]^F[255&J]^O[Se++],Ye=j[Re>>>24]^I[se>>>16&255]^H[J>>>8&255]^F[255&be]^O[Se++];se=Ce,J=Be,be=_e,Re=Ye}Ce=($[se>>>24]<<24|$[J>>>16&255]<<16|$[be>>>8&255]<<8|$[255&Re])^O[Se++],Be=($[J>>>24]<<24|$[be>>>16&255]<<16|$[Re>>>8&255]<<8|$[255&se])^O[Se++],_e=($[be>>>24]<<24|$[Re>>>16&255]<<16|$[se>>>8&255]<<8|$[255&J])^O[Se++],Ye=($[Re>>>24]<<24|$[se>>>16&255]<<16|$[J>>>8&255]<<8|$[255&be])^O[Se++],p[D]=Ce,p[D+1]=Be,p[D+2]=_e,p[D+3]=Ye},keySize:8});f.AES=y._createHelper(S)}(),x.AES)},1025:function(T,b,u){var x,f,y,E;T.exports=(x=u(9021),y=(f=x).lib.Base,E=f.enc.Utf8,void(f.algo.HMAC=y.extend({init:function(_,m){_=this._hasher=new _.init,typeof m=="string"&&(m=E.parse(m));var k=_.blockSize,w=4*k;m.sigBytes>w&&(m=_.finalize(m)),m.clamp();for(var U=this._oKey=m.clone(),g=this._iKey=m.clone(),A=U.words,P=g.words,z=0;z<k;z++)A[z]^=1549556828,P[z]^=909522486;U.sigBytes=g.sigBytes=w,this.reset()},reset:function(){var _=this._hasher;_.reset(),_.update(this._iKey)},update:function(_){return this._hasher.update(_),this},finalize:function(_){var m=this._hasher,k=m.finalize(_);return m.reset(),m.finalize(this._oKey.clone().concat(k))}})))},1305:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.RemoteSdp=void 0;const x=u(7363),f=u(2994),y=u(3471),E=new f.Logger("RemoteSdp");b.RemoteSdp=class{_iceParameters;_iceCandidates;_dtlsParameters;_sctpParameters;_plainRtpParameters;_planB;_mediaSections=[];_midToIndex=new Map;_firstMid;_sdpObject;constructor({iceParameters:_,iceCandidates:m,dtlsParameters:k,sctpParameters:w,plainRtpParameters:U,planB:g=!1}){if(this._iceParameters=_,this._iceCandidates=m,this._dtlsParameters=k,this._sctpParameters=w,this._plainRtpParameters=U,this._planB=g,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},_?.iceLite&&(this._sdpObject.icelite="ice-lite"),k){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const A=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:k.fingerprints[A-1].algorithm,hash:k.fingerprints[A-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}U&&(this._sdpObject.origin.address=U.ip,this._sdpObject.origin.ipVer=U.ipVersion)}updateIceParameters(_){E.debug("updateIceParameters() [iceParameters:%o]",_),this._iceParameters=_,this._sdpObject.icelite=_.iceLite?"ice-lite":void 0;for(const m of this._mediaSections)m.setIceParameters(_)}updateDtlsRole(_){E.debug("updateDtlsRole() [role:%s]",_),this._dtlsParameters.role=_;for(const m of this._mediaSections)m.setDtlsRole(_)}setSessionExtmapAllowMixed(){E.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let _=0;_<this._mediaSections.length;++_){const m=this._mediaSections[_];if(m.closed)return{idx:_,reuseMid:m.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:_,reuseMid:m,offerRtpParameters:k,answerRtpParameters:w,codecOptions:U}){const g=new y.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:_,offerRtpParameters:k,answerRtpParameters:w,codecOptions:U});m?this._replaceMediaSection(g,m):this._midToIndex.has(g.mid)?this._replaceMediaSection(g):this._addMediaSection(g)}receive({mid:_,kind:m,offerRtpParameters:k,streamId:w,trackId:U}){const g=this._midToIndex.get(_);let A;if(g!==void 0&&(A=this._mediaSections[g]),this.setSessionExtmapAllowMixed(),A)A.planBReceive({offerRtpParameters:k,streamId:w,trackId:U}),this._replaceMediaSection(A);else{A=new y.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:_,kind:m,offerRtpParameters:k,streamId:w,trackId:U});const P=this._mediaSections.find(z=>z.closed);P?this._replaceMediaSection(A,P.mid):this._addMediaSection(A)}}pauseMediaSection(_){this._findMediaSection(_).pause()}resumeSendingMediaSection(_){this._findMediaSection(_).resume()}resumeReceivingMediaSection(_){this._findMediaSection(_).resume()}disableMediaSection(_){this._findMediaSection(_).disable()}closeMediaSection(_){const m=this._findMediaSection(_);return _===this._firstMid?(E.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",_),this.disableMediaSection(_),!1):(m.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(_,m){const k=this._findMediaSection(_);k.muxSimulcastStreams(m),this._replaceMediaSection(k)}planBStopReceiving({mid:_,offerRtpParameters:m}){const k=this._findMediaSection(_);k.planBStopReceiving({offerRtpParameters:m}),this._replaceMediaSection(k)}sendSctpAssociation({offerMediaObject:_}){const m=new y.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:_});this._addMediaSection(m)}receiveSctpAssociation({oldDataChannelSpec:_=!1}={}){const m=new y.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:_});this._addMediaSection(m)}getSdp(){return this._sdpObject.origin.sessionVersion++,x.write(this._sdpObject)}_addMediaSection(_){this._firstMid||(this._firstMid=_.mid),this._mediaSections.push(_),this._midToIndex.set(_.mid,this._mediaSections.length-1),this._sdpObject.media.push(_.getObject()),this._regenerateBundleMids()}_replaceMediaSection(_,m){if(typeof m=="string"){const k=this._midToIndex.get(m);if(k===void 0)throw new Error(`no media section found for reuseMid '${m}'`);const w=this._mediaSections[k];this._mediaSections[k]=_,this._midToIndex.delete(w.mid),this._midToIndex.set(_.mid,k),this._sdpObject.media[k]=_.getObject(),this._regenerateBundleMids()}else{const k=this._midToIndex.get(_.mid);if(k===void 0)throw new Error(`no media section found with mid '${_.mid}'`);this._mediaSections[k]=_,this._sdpObject.media[k]=_.getObject()}}_findMediaSection(_){const m=this._midToIndex.get(_);if(m===void 0)throw new Error(`no media section found with mid '${_}'`);return this._mediaSections[m]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(_=>!_.closed).map(_=>_.mid).join(" "))}}},1380:function(T,b,u){var x;T.exports=(x=u(9021),u(3240),function(){var f=x,y=f.lib.Hasher,E=f.x64,_=E.Word,m=E.WordArray,k=f.algo;function w(){return _.create.apply(_,arguments)}var U=[w(1116352408,3609767458),w(1899447441,602891725),w(3049323471,3964484399),w(3921009573,2173295548),w(961987163,4081628472),w(1508970993,3053834265),w(2453635748,2937671579),w(2870763221,3664609560),w(3624381080,2734883394),w(310598401,1164996542),w(607225278,1323610764),w(1426881987,3590304994),w(1925078388,4068182383),w(2162078206,991336113),w(2614888103,633803317),w(3248222580,3479774868),w(3835390401,2666613458),w(4022224774,944711139),w(264347078,2341262773),w(604807628,2007800933),w(770255983,1495990901),w(1249150122,1856431235),w(1555081692,3175218132),w(1996064986,2198950837),w(2554220882,3999719339),w(2821834349,766784016),w(2952996808,2566594879),w(3210313671,3203337956),w(3336571891,1034457026),w(3584528711,2466948901),w(113926993,3758326383),w(338241895,168717936),w(666307205,1188179964),w(773529912,1546045734),w(1294757372,1522805485),w(1396182291,2643833823),w(1695183700,2343527390),w(1986661051,1014477480),w(2177026350,1206759142),w(2456956037,344077627),w(2730485921,1290863460),w(2820302411,3158454273),w(3259730800,3505952657),w(3345764771,106217008),w(3516065817,3606008344),w(3600352804,1432725776),w(4094571909,1467031594),w(275423344,851169720),w(430227734,3100823752),w(506948616,1363258195),w(659060556,3750685593),w(883997877,3785050280),w(958139571,3318307427),w(1322822218,3812723403),w(1537002063,2003034995),w(1747873779,3602036899),w(1955562222,1575990012),w(2024104815,1125592928),w(2227730452,2716904306),w(2361852424,442776044),w(2428436474,593698344),w(2756734187,3733110249),w(3204031479,2999351573),w(3329325298,3815920427),w(3391569614,3928383900),w(3515267271,566280711),w(3940187606,3454069534),w(4118630271,4000239992),w(116418474,1914138554),w(174292421,2731055270),w(289380356,3203993006),w(460393269,320620315),w(685471733,587496836),w(852142971,1086792851),w(1017036298,365543100),w(1126000580,2618297676),w(1288033470,3409855158),w(1501505948,4234509866),w(1607167915,987167468),w(1816402316,1246189591)],g=[];(function(){for(var P=0;P<80;P++)g[P]=w()})();var A=k.SHA512=y.extend({_doReset:function(){this._hash=new m.init([new _.init(1779033703,4089235720),new _.init(3144134277,2227873595),new _.init(1013904242,4271175723),new _.init(2773480762,1595750129),new _.init(1359893119,2917565137),new _.init(2600822924,725511199),new _.init(528734635,4215389547),new _.init(1541459225,327033209)])},_doProcessBlock:function(P,z){for(var N=this._hash.words,R=N[0],S=N[1],p=N[2],D=N[3],O=N[4],j=N[5],I=N[6],H=N[7],F=R.high,$=R.low,q=S.high,se=S.low,J=p.high,be=p.low,Re=D.high,Se=D.low,me=O.high,Ce=O.low,Be=j.high,_e=j.low,Ye=I.high,Qe=I.low,Ge=H.high,He=H.low,Te=F,dt=$,yt=q,on=se,ln=J,Pn=be,En=Re,rn=Se,Ne=me,Me=Ce,Ze=Be,Ft=_e,Ct=Ye,wt=Qe,un=Ge,Sn=He,Ut=0;Ut<80;Ut++){var nr,Ar,Sr=g[Ut];if(Ut<16)Ar=Sr.high=0|P[z+2*Ut],nr=Sr.low=0|P[z+2*Ut+1];else{var Ur=g[Ut-15],xr=Ur.high,Or=Ur.low,Kr=(xr>>>1|Or<<31)^(xr>>>8|Or<<24)^xr>>>7,va=(Or>>>1|xr<<31)^(Or>>>8|xr<<24)^(Or>>>7|xr<<25),ra=g[Ut-2],ua=ra.high,jn=ra.low,Ha=(ua>>>19|jn<<13)^(ua<<3|jn>>>29)^ua>>>6,Ea=(jn>>>19|ua<<13)^(jn<<3|ua>>>29)^(jn>>>6|ua<<26),Qr=g[Ut-7],gr=Qr.high,rt=Qr.low,ut=g[Ut-16],$t=ut.high,Tt=ut.low;Ar=(Ar=(Ar=Kr+gr+((nr=va+rt)>>>0<va>>>0?1:0))+Ha+((nr+=Ea)>>>0<Ea>>>0?1:0))+$t+((nr+=Tt)>>>0<Tt>>>0?1:0),Sr.high=Ar,Sr.low=nr}var sn,nn=Ne&Ze^~Ne&Ct,et=Me&Ft^~Me&wt,On=Te&yt^Te&ln^yt&ln,Ln=dt&on^dt&Pn^on&Pn,Xn=(Te>>>28|dt<<4)^(Te<<30|dt>>>2)^(Te<<25|dt>>>7),vr=(dt>>>28|Te<<4)^(dt<<30|Te>>>2)^(dt<<25|Te>>>7),Qt=(Ne>>>14|Me<<18)^(Ne>>>18|Me<<14)^(Ne<<23|Me>>>9),St=(Me>>>14|Ne<<18)^(Me>>>18|Ne<<14)^(Me<<23|Ne>>>9),Un=U[Ut],In=Un.high,Nn=Un.low,Fr=un+Qt+((sn=Sn+St)>>>0<Sn>>>0?1:0),Mr=vr+Ln;un=Ct,Sn=wt,Ct=Ze,wt=Ft,Ze=Ne,Ft=Me,Ne=En+(Fr=(Fr=(Fr=Fr+nn+((sn+=et)>>>0<et>>>0?1:0))+In+((sn+=Nn)>>>0<Nn>>>0?1:0))+Ar+((sn+=nr)>>>0<nr>>>0?1:0))+((Me=rn+sn|0)>>>0<rn>>>0?1:0)|0,En=ln,rn=Pn,ln=yt,Pn=on,yt=Te,on=dt,Te=Fr+(Xn+On+(Mr>>>0<vr>>>0?1:0))+((dt=sn+Mr|0)>>>0<sn>>>0?1:0)|0}$=R.low=$+dt,R.high=F+Te+($>>>0<dt>>>0?1:0),se=S.low=se+on,S.high=q+yt+(se>>>0<on>>>0?1:0),be=p.low=be+Pn,p.high=J+ln+(be>>>0<Pn>>>0?1:0),Se=D.low=Se+rn,D.high=Re+En+(Se>>>0<rn>>>0?1:0),Ce=O.low=Ce+Me,O.high=me+Ne+(Ce>>>0<Me>>>0?1:0),_e=j.low=_e+Ft,j.high=Be+Ze+(_e>>>0<Ft>>>0?1:0),Qe=I.low=Qe+wt,I.high=Ye+Ct+(Qe>>>0<wt>>>0?1:0),He=H.low=He+Sn,H.high=Ge+un+(He>>>0<Sn>>>0?1:0)},_doFinalize:function(){var P=this._data,z=P.words,N=8*this._nDataBytes,R=8*P.sigBytes;return z[R>>>5]|=128<<24-R%32,z[30+(R+128>>>10<<5)]=Math.floor(N/4294967296),z[31+(R+128>>>10<<5)]=N,P.sigBytes=4*z.length,this._process(),this._hash.toX32()},clone:function(){var P=y.clone.call(this);return P._hash=this._hash.clone(),P},blockSize:32});f.SHA512=y._createHelper(A),f.HmacSHA512=y._createHmacHelper(A)}(),x.SHA512)},1396:function(T,b,u){var x;T.exports=(x=u(9021),u(3240),u(6440),u(5503),u(754),u(4725),u(4636),u(5471),u(3009),u(6308),u(1380),u(9557),u(5953),u(8056),u(1025),u(19),u(9506),u(7165),u(2169),u(6939),u(6372),u(3797),u(8454),u(2073),u(4905),u(482),u(2155),u(8124),u(25),u(955),u(7628),u(7193),u(6298),u(2696),u(3128),x)},1425:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.updateV1State=void 0;const x=u(2291),f=u(6011),y={};function E(m,k,w){return m.msecs??=-1/0,m.nsecs??=0,k===m.msecs?(m.nsecs++,m.nsecs>=1e4&&(m.node=void 0,m.nsecs=0)):k>m.msecs?m.nsecs=0:k<m.msecs&&(m.node=void 0),m.node||(m.node=w.slice(10,16),m.node[0]|=1,m.clockseq=16383&(w[8]<<8|w[9])),m.msecs=k,m}function _(m,k,w,U,g,A,P=0){if(m.length<16)throw new Error("Random bytes length must be >= 16");if(A){if(P<0||P+16>A.length)throw new RangeError(`UUID byte range ${P}:${P+15} is out of buffer bounds`)}else A=new Uint8Array(16),P=0;k??=Date.now(),w??=0,U??=16383&(m[8]<<8|m[9]),g??=m.slice(10,16);const z=(1e4*(268435455&(k+=122192928e5))+w)%4294967296;A[P++]=z>>>24&255,A[P++]=z>>>16&255,A[P++]=z>>>8&255,A[P++]=255&z;const N=k/4294967296*1e4&268435455;A[P++]=N>>>8&255,A[P++]=255&N,A[P++]=N>>>24&15|16,A[P++]=N>>>16&255,A[P++]=U>>>8|128,A[P++]=255&U;for(let R=0;R<6;++R)A[P++]=g[R];return A}b.updateV1State=E,b.default=function(m,k,w){let U;const g=m?._v6??!1;if(m){const A=Object.keys(m);A.length===1&&A[0]==="_v6"&&(m=void 0)}if(m)U=_(m.random??m.rng?.()??(0,x.default)(),m.msecs,m.nsecs,m.clockseq,m.node,k,w);else{const A=Date.now(),P=(0,x.default)();E(y,A,P),U=_(P,y.msecs,y.nsecs,g?void 0:y.clockseq,g?void 0:y.node,k,w)}return k??(0,f.unsafeStringify)(U)}},1765:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.clone=function(u){return u===void 0?void 0:Number.isNaN(u)?NaN:typeof structuredClone=="function"?structuredClone(u):JSON.parse(JSON.stringify(u))},b.generateRandomNumber=function(){return Math.round(1e7*Math.random())},b.deepFreeze=function u(x){const f=Reflect.ownKeys(x);for(const y of f){const E=x[y];(E&&typeof E=="object"||typeof E=="function")&&u(E)}return Object.freeze(x)}},1767:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Firefox60=void 0;const x=u(7363),f=u(2994),y=u(4893),E=u(1765),_=u(8046),m=u(5544),k=u(5938),w=u(521),U=u(1305),g=u(3303),A=new f.Logger("Firefox60"),P={OS:16,MIS:2048};class z extends w.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new z}constructor(){super()}get name(){return"Firefox60"}close(){if(A.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){A.debug("getNativeRtpCapabilities()");const R=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),S=document.createElement("canvas");S.getContext("2d");const p=S.captureStream().getVideoTracks()[0];try{R.addTransceiver("audio",{direction:"sendrecv"});const D=R.addTransceiver(p,{direction:"sendrecv"}),O=D.sender.getParameters(),j=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];O.encodings=j,await D.sender.setParameters(O);const I=await R.createOffer();try{S.remove()}catch{}try{p.stop()}catch{}try{R.close()}catch{}const H=x.parse(I.sdp);return m.extractRtpCapabilities({sdpObject:H})}catch(D){try{S.remove()}catch{}try{p.stop()}catch{}try{R.close()}catch{}throw D}}async getNativeSctpCapabilities(){return A.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:R,iceParameters:S,iceCandidates:p,dtlsParameters:D,sctpParameters:O,iceServers:j,iceTransportPolicy:I,additionalSettings:H,proprietaryConstraints:F,extendedRtpCapabilities:$}){this.assertNotClosed(),A.debug("run()"),this._direction=R,this._remoteSdp=new U.RemoteSdp({iceParameters:S,iceCandidates:p,dtlsParameters:D,sctpParameters:O}),this._sendingRtpParametersByKind={audio:_.getSendingRtpParameters("audio",$),video:_.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:_.getSendingRemoteRtpParameters("audio",$),video:_.getSendingRemoteRtpParameters("video",$)},this._pc=new RTCPeerConnection({iceServers:j??[],iceTransportPolicy:I??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...H},F),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",q=>{this.emit("@icecandidateerror",q)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(A.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(R){throw this.assertNotClosed(),new y.UnsupportedError("not supported")}async restartIce(R){if(this.assertNotClosed(),A.debug("restartIce()"),this._remoteSdp.updateIceParameters(R),this._transportReady)if(this._direction==="send"){const S=await this._pc.createOffer({iceRestart:!0});A.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const p={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}else{const S={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const p=await this._pc.createAnswer();A.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:R,encodings:S,codecOptions:p,codec:D}){this.assertNotClosed(),this.assertSendDirection(),A.debug("send() [kind:%s, track.id:%s]",R.kind,R.id),S&&((S=E.clone(S)).forEach((be,Re)=>{be.rid=`r${Re}`}),S.reverse());const O=E.clone(this._sendingRtpParametersByKind[R.kind]);O.codecs=_.reduceCodecs(O.codecs,D);const j=E.clone(this._sendingRemoteRtpParametersByKind[R.kind]);j.codecs=_.reduceCodecs(j.codecs,D);const I=this._pc.addTransceiver(R,{direction:"sendonly",streams:[this._sendStream]});if(S){const be=I.sender.getParameters();be.encodings=S,await I.sender.setParameters(be)}const H=await this._pc.createOffer();let F=x.parse(H.sdp);F.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:F});const $=(0,g.parse)((S??[{}])[0].scalabilityMode);A.debug("send() | calling pc.setLocalDescription() [offer:%o]",H),await this._pc.setLocalDescription(H);const q=I.mid;O.mid=q,F=x.parse(this._pc.localDescription.sdp);const se=F.media[F.media.length-1];if(O.rtcp.cname=m.getCname({offerMediaObject:se}),S)if(S.length===1){const be=k.getRtpEncodings({offerMediaObject:se});Object.assign(be[0],S[0]),O.encodings=be}else O.encodings=S.reverse();else O.encodings=k.getRtpEncodings({offerMediaObject:se});if(O.encodings.length>1&&(O.codecs[0].mimeType.toLowerCase()==="video/vp8"||O.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const be of O.encodings)be.scalabilityMode?be.scalabilityMode=`L1T${$.temporalLayers}`:be.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:se,offerRtpParameters:O,answerRtpParameters:j,codecOptions:p});const J={type:"answer",sdp:this._remoteSdp.getSdp()};return A.debug("send() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setRemoteDescription(J),this._mapMidTransceiver.set(q,I),{localId:q,rtpParameters:O,rtpSender:I.sender}}async stopSending(R){if(this.assertSendDirection(),A.debug("stopSending() [localId:%s]",R),this._closed)return;const S=this._mapMidTransceiver.get(R);if(!S)throw new Error("associated transceiver not found");S.sender.replaceTrack(null),this._pc.removeTrack(S.sender),this._remoteSdp.disableMediaSection(S.mid);const p=await this._pc.createOffer();A.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const D={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D),this._mapMidTransceiver.delete(R)}async pauseSending(R){this.assertNotClosed(),this.assertSendDirection(),A.debug("pauseSending() [localId:%s]",R);const S=this._mapMidTransceiver.get(R);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="inactive",this._remoteSdp.pauseMediaSection(R);const p=await this._pc.createOffer();A.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const D={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async resumeSending(R){this.assertNotClosed(),this.assertSendDirection(),A.debug("resumeSending() [localId:%s]",R);const S=this._mapMidTransceiver.get(R);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(R);const p=await this._pc.createOffer();A.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const D={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async replaceTrack(R,S){this.assertNotClosed(),this.assertSendDirection(),S?A.debug("replaceTrack() [localId:%s, track.id:%s]",R,S.id):A.debug("replaceTrack() [localId:%s, no track]",R);const p=this._mapMidTransceiver.get(R);if(!p)throw new Error("associated RTCRtpTransceiver not found");await p.sender.replaceTrack(S)}async setMaxSpatialLayer(R,S){this.assertNotClosed(),this.assertSendDirection(),A.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",R,S);const p=this._mapMidTransceiver.get(R);if(!p)throw new Error("associated transceiver not found");const D=p.sender.getParameters();S=D.encodings.length-1-S,D.encodings.forEach((I,H)=>{I.active=H>=S}),await p.sender.setParameters(D),this._remoteSdp.muxMediaSectionSimulcast(R,D.encodings);const O=await this._pc.createOffer();A.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const j={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async setRtpEncodingParameters(R,S){this.assertNotClosed(),this.assertSendDirection(),A.debug("setRtpEncodingParameters() [localId:%s, params:%o]",R,S);const p=this._mapMidTransceiver.get(R);if(!p)throw new Error("associated RTCRtpTransceiver not found");const D=p.sender.getParameters();D.encodings.forEach((I,H)=>{D.encodings[H]={...I,...S}}),await p.sender.setParameters(D),this._remoteSdp.muxMediaSectionSimulcast(R,D.encodings);const O=await this._pc.createOffer();A.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const j={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async getSenderStats(R){this.assertNotClosed(),this.assertSendDirection();const S=this._mapMidTransceiver.get(R);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.sender.getStats()}async sendDataChannel({ordered:R,maxPacketLifeTime:S,maxRetransmits:p,label:D,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const j={negotiated:!0,id:this._nextSendSctpStreamId,ordered:R,maxPacketLifeTime:S,maxRetransmits:p,protocol:O};A.debug("sendDataChannel() [options:%o]",j);const I=this._pc.createDataChannel(D,j);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const H=await this._pc.createOffer(),F=x.parse(H.sdp),$=F.media.find(se=>se.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:F}),A.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",H),await this._pc.setLocalDescription(H),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const q={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._hasDataChannelMediaSection=!0}return{dataChannel:I,sctpStreamParameters:{streamId:j.id,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits}}}async receive(R){this.assertNotClosed(),this.assertRecvDirection();const S=[],p=new Map;for(const I of R){const{trackId:H,kind:F,rtpParameters:$,streamId:q}=I;A.debug("receive() [trackId:%s, kind:%s]",H,F);const se=$.mid??String(this._mapMidTransceiver.size);p.set(H,se),this._remoteSdp.receive({mid:se,kind:F,offerRtpParameters:$,streamId:q??$.rtcp.cname,trackId:H})}const D={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",D),await this._pc.setRemoteDescription(D);let O=await this._pc.createAnswer();const j=x.parse(O.sdp);for(const I of R){const{trackId:H,rtpParameters:F}=I,$=p.get(H),q=j.media.find(se=>String(se.mid)===$);m.applyCodecParameters({offerRtpParameters:F,answerMediaObject:q}),O={type:"answer",sdp:x.write(j)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:j}),A.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const I of R){const{trackId:H}=I,F=p.get(H),$=this._pc.getTransceivers().find(q=>q.mid===F);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(F,$),S.push({localId:F,track:$.receiver.track,rtpReceiver:$.receiver})}return S}async stopReceiving(R){if(this.assertRecvDirection(),this._closed)return;for(const D of R){A.debug("stopReceiving() [localId:%s]",D);const O=this._mapMidTransceiver.get(D);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const p=await this._pc.createAnswer();A.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const D of R)this._mapMidTransceiver.delete(D)}async pauseReceiving(R){this.assertNotClosed(),this.assertRecvDirection();for(const D of R){A.debug("pauseReceiving() [localId:%s]",D);const O=this._mapMidTransceiver.get(D);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(D)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const p=await this._pc.createAnswer();A.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async resumeReceiving(R){this.assertNotClosed(),this.assertRecvDirection();for(const D of R){A.debug("resumeReceiving() [localId:%s]",D);const O=this._mapMidTransceiver.get(D);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(D)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const p=await this._pc.createAnswer();A.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async getReceiverStats(R){this.assertRecvDirection();const S=this._mapMidTransceiver.get(R);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:R,label:S,protocol:p}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:D,ordered:O,maxPacketLifeTime:j,maxRetransmits:I}=R,H={negotiated:!0,id:D,ordered:O,maxPacketLifeTime:j,maxRetransmits:I,protocol:p};A.debug("receiveDataChannel() [options:%o]",H);const F=this._pc.createDataChannel(S,H);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const q=await this._pc.createAnswer();if(!this._transportReady){const se=x.parse(q.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:se})}A.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setLocalDescription(q),this._hasDataChannelMediaSection=!0}return{dataChannel:F}}async setupTransport({localDtlsRole:R,localSdpObject:S}){S||(S=x.parse(this._pc.localDescription.sdp));const p=m.extractDtlsParameters({sdpObject:S});p.role=R,this._remoteSdp.updateDtlsRole(R==="client"?"server":"client"),await new Promise((D,O)=>{this.safeEmit("@connect",{dtlsParameters:p},D,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new y.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Firefox60=z},1791:(T,b,u)=>{var x=u(5172),f=u(5546);T.exports=function y(E,_){function m(w,U,g,A){try{var P=E[w](U),z=P.value;return z instanceof x?_.resolve(z.v).then(function(N){m("next",N,g,A)},function(N){m("throw",N,g,A)}):_.resolve(z).then(function(N){P.value=N,g(P)},function(N){return m("throw",N,g,A)})}catch(N){A(N)}}var k;this.next||(f(y.prototype),f(y.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),f(this,"_invoke",function(w,U,g){function A(){return new _(function(P,z){m(w,g,P,z)})}return k=k?k.then(A,A):A()},!0)},T.exports.__esModule=!0,T.exports.default=T.exports},1797:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0});const x=u(9746);b.default=function(f){if(!(0,x.default)(f))throw TypeError("Invalid UUID");let y;return Uint8Array.of((y=parseInt(f.slice(0,8),16))>>>24,y>>>16&255,y>>>8&255,255&y,(y=parseInt(f.slice(9,13),16))>>>8,255&y,(y=parseInt(f.slice(14,18),16))>>>8,255&y,(y=parseInt(f.slice(19,23),16))>>>8,255&y,(y=parseInt(f.slice(24,36),16))/1099511627776&255,y/4294967296&255,y>>>24&255,y>>>16&255,y>>>8&255,255&y)}},1803:(T,b,u)=>{u.d(b,{ed:()=>O,sg:()=>j,v7:()=>S});var x=u(4467),f=u(296),y=u(9027);function E(I,H){var F=Object.keys(I);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(I);H&&($=$.filter(function(q){return Object.getOwnPropertyDescriptor(I,q).enumerable})),F.push.apply(F,$)}return F}var _={},m={},k={};for(var w in y.$.videoProfiles)y.$.videoProfiles[w].aspectRatio=="oneSixNine"&&(_[w]=y.$.videoProfiles[w],_[w].encoding={maxBitrate:_[w].bitRate,maxFramerate:_[w].frameRate}),y.$.videoProfiles[w].aspectRatio=="fourThree"&&(m[w]=y.$.videoProfiles[w],m[w].encoding={maxBitrate:m[w].bitRate,maxFramerate:m[w].frameRate});for(var w in y.$.screenShareProfiles)k[w]=y.$.screenShareProfiles[w],k[w].encoding={maxBitrate:k[w].bitRate,maxFramerate:k[w].frameRate};var U=Object.values(_),g=Object.values(m),A=Object.values(k),P=[_.h180p_w320p,_.h360p_w640p],z=[m.h180p_w240p,m.h360p_w480p],N=function(I){return[{scaleResolutionDownBy:2,fps:3}].map(function(H){var F;return{width:Math.floor(I.width/H.scaleResolutionDownBy),height:Math.floor(I.height/H.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(I.encoding.maxBitrate/(Math.pow(H.scaleResolutionDownBy,2)*(((F=I.encoding.maxFramerate)!==null&&F!==void 0?F:30)/H.fps)))),maxFramerate:H.fps}}})},R=["q","h","f"];function S(I,H,F,$,q){var se=$&&$.videoEncoding;I&&(se=$&&$.screenShareEncoding);var J=$?.simulcast;if(se||(se=function(_e,Ye,Qe){for(var Ge=function(on,ln,Pn){if(on)return A;var En=ln>Pn?ln/Pn:Pn/ln;return Math.abs(En-1.7777777777777777)<Math.abs(En-1.3333333333333333)?U:g}(_e,Ye,Qe),He=Ge[0].encoding,Te=Math.max(Ye,Qe),dt=0;dt<Ge.length;dt+=1){var yt=Ge[dt];if(He=yt.encoding,yt.width>=Te)break}return He}(I,H,F)),!J)return[se];var be,Re={width:H,height:F,encoding:{maxBitrate:se.maxBitrate,maxFramerate:se.maxFramerate}},Se=[],me=(Se=p(I,Re))[0];if(Se.length>1){var Ce=Se;be=(0,f.A)(Ce,2)[1]}var Be=Math.max(H,F);return D(H,F,Be>=960&&be?[me,be,Re]:Be>=480?[me,Re]:[Re],q)}function p(I,H){I&&N(H);var F=H.width,$=H.height,q=F>$?F/$:$/F;return Math.abs(q-1.7777777777777777)<Math.abs(q-1.3333333333333333)?P:z}function D(I,H,F,$){var q=[];return F.forEach(function(se,J){if(!(J>=R.length)){var be=$?null:{maxFramerate:se.encoding.maxFramerate},Re=Math.min(I,H),Se=function(me){for(var Ce=1;Ce<arguments.length;Ce++){var Be=arguments[Ce]!=null?arguments[Ce]:{};Ce%2?E(Object(Be),!0).forEach(function(_e){(0,x.A)(me,_e,Be[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(Be)):E(Object(Be)).forEach(function(_e){Object.defineProperty(me,_e,Object.getOwnPropertyDescriptor(Be,_e))})}return me}({rid:R[J],scaleResolutionDownBy:Re/Math.min(se.width,se.height),maxBitrate:se.encoding.maxBitrate},be);q.push(Se)}}),q}function O(I,H,F){if(!I)return{};var $=I.id,q=I.appData,se=q.width,J=q.height,be=q.encodings;try{var Re=function(Ye){var Qe=[];if(Ye&&Ye.length!=0){if(Ye.length===1){for(var Ge=0;Ge<3;Ge++)Qe.push(Math.pow(2,3-Ge-1));return Qe}var He=!1;return Ye.forEach(function(Te){Te.scaleResolutionDownBy!==void 0?(He=!0,Qe.push(Math.max(1,Te.scaleResolutionDownBy))):Qe.push(1)}),He||Ye.forEach(function(Te,dt){Qe[dt]=Math.pow(2,Ye.length-dt-1)}),Qe}}(be);if(!Re)return{};var Se=Re.map(function(Ye){return{width:se/Ye,height:J/Ye}}).sort(function(Ye,Qe){return Ye.width-Qe.width}),me=Se.findIndex(function(Ye){return Ye.width>=H&&Ye.height>=F});me===-1&&(me=Se.length-1);var Ce=I.temporalLayers?I.temporalLayers:2;if(me===0&&Ce>0){var Be=se/Re[0],_e=J/Re[0];H<.5*Be&&F<.5*_e&&(Ce-=1),Ce>0&&H<.25*Be&&F<.25*_e&&(Ce-=1)}return{consumerId:$,newPreferredSpatialLayer:Math.max(0,me),newPreferredTemporalLayer:Math.max(0,Ce)}}catch{return{}}}function j(I,H){var F;return function(){for(var $=this,q=arguments.length,se=new Array(q),J=0;J<q;J++)se[J]=arguments[J];clearTimeout(F),F=setTimeout(function(){return I.apply($,se)},H)}}},1806:(T,b,u)=>{u.d(b,{$Q:()=>x,T4:()=>f,Ts:()=>E,ue:()=>y});var x="vk_e2ee",f={sharedKey:!1,ratchetSalt:"VideoSDKEncryptionRatchetSalt",ratchetWindowSize:0,failureTolerance:10,keyringSize:16,discardFrameWhenCryptorNotReady:!1},y=["vp8","vp9","h264","av1"],E=["opus"]},1919:(T,b,u)=>{u.r(b),u.d(b,{default:()=>Vn});var x={};u.r(x),u.d(x,{Decoder:()=>Ln,Encoder:()=>et,PacketType:()=>nn,protocol:()=>sn});var f=u(296),y=u(5458),E=u(2284),_=u(467),m=u(3029),k=u(2901),w=u(4467),U=u(4756),g=u.n(U);const A=Object.create(null);A.open="0",A.close="1",A.ping="2",A.pong="3",A.message="4",A.upgrade="5",A.noop="6";const P=Object.create(null);Object.keys(A).forEach(ne=>{P[A[ne]]=ne});const z={type:"error",data:"parser error"},N=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",R=typeof ArrayBuffer=="function",S=ne=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(ne):ne&&ne.buffer instanceof ArrayBuffer,p=({type:ne,data:Y},Q,ce)=>N&&Y instanceof Blob?Q?ce(Y):D(Y,ce):R&&(Y instanceof ArrayBuffer||S(Y))?Q?ce(Y):D(new Blob([Y]),ce):ce(A[ne]+(Y||"")),D=(ne,Y)=>{const Q=new FileReader;return Q.onload=function(){const ce=Q.result.split(",")[1];Y("b"+(ce||""))},Q.readAsDataURL(ne)};function O(ne){return ne instanceof Uint8Array?ne:ne instanceof ArrayBuffer?new Uint8Array(ne):new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength)}let j;const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let ne=0;ne<64;ne++)H[I.charCodeAt(ne)]=ne;const F=typeof ArrayBuffer=="function",$=(ne,Y)=>{if(typeof ne!="string")return{type:"message",data:se(ne,Y)};const Q=ne.charAt(0);return Q==="b"?{type:"message",data:q(ne.substring(1),Y)}:P[Q]?ne.length>1?{type:P[Q],data:ne.substring(1)}:{type:P[Q]}:z},q=(ne,Y)=>{if(F){const Q=(ce=>{let je,at,kt,Lt,xt,zn=.75*ce.length,Gt=ce.length,Gn=0;ce[ce.length-1]==="="&&(zn--,ce[ce.length-2]==="="&&zn--);const kn=new ArrayBuffer(zn),sa=new Uint8Array(kn);for(je=0;je<Gt;je+=4)at=H[ce.charCodeAt(je)],kt=H[ce.charCodeAt(je+1)],Lt=H[ce.charCodeAt(je+2)],xt=H[ce.charCodeAt(je+3)],sa[Gn++]=at<<2|kt>>4,sa[Gn++]=(15&kt)<<4|Lt>>2,sa[Gn++]=(3&Lt)<<6|63&xt;return kn})(ne);return se(Q,Y)}return{base64:!0,data:ne}},se=(ne,Y)=>Y==="blob"?ne instanceof Blob?ne:new Blob([ne]):ne instanceof ArrayBuffer?ne:ne.buffer,J="";function be(){return new TransformStream({transform(ne,Y){(function(Q,ce){N&&Q.data instanceof Blob?Q.data.arrayBuffer().then(O).then(ce):R&&(Q.data instanceof ArrayBuffer||S(Q.data))?ce(O(Q.data)):p(Q,!1,je=>{j||(j=new TextEncoder),ce(j.encode(je))})})(ne,Q=>{const ce=Q.length;let je;if(ce<126)je=new Uint8Array(1),new DataView(je.buffer).setUint8(0,ce);else if(ce<65536){je=new Uint8Array(3);const at=new DataView(je.buffer);at.setUint8(0,126),at.setUint16(1,ce)}else{je=new Uint8Array(9);const at=new DataView(je.buffer);at.setUint8(0,127),at.setBigUint64(1,BigInt(ce))}ne.data&&typeof ne.data!="string"&&(je[0]|=128),Y.enqueue(je),Y.enqueue(Q)})}})}let Re;function Se(ne){return ne.reduce((Y,Q)=>Y+Q.length,0)}function me(ne,Y){if(ne[0].length===Y)return ne.shift();const Q=new Uint8Array(Y);let ce=0;for(let je=0;je<Y;je++)Q[je]=ne[0][ce++],ce===ne[0].length&&(ne.shift(),ce=0);return ne.length&&ce<ne[0].length&&(ne[0]=ne[0].slice(ce)),Q}function Ce(ne){if(ne)return function(Y){for(var Q in Ce.prototype)Y[Q]=Ce.prototype[Q];return Y}(ne)}Ce.prototype.on=Ce.prototype.addEventListener=function(ne,Y){return this._callbacks=this._callbacks||{},(this._callbacks["$"+ne]=this._callbacks["$"+ne]||[]).push(Y),this},Ce.prototype.once=function(ne,Y){function Q(){this.off(ne,Q),Y.apply(this,arguments)}return Q.fn=Y,this.on(ne,Q),this},Ce.prototype.off=Ce.prototype.removeListener=Ce.prototype.removeAllListeners=Ce.prototype.removeEventListener=function(ne,Y){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var Q,ce=this._callbacks["$"+ne];if(!ce)return this;if(arguments.length==1)return delete this._callbacks["$"+ne],this;for(var je=0;je<ce.length;je++)if((Q=ce[je])===Y||Q.fn===Y){ce.splice(je,1);break}return ce.length===0&&delete this._callbacks["$"+ne],this},Ce.prototype.emit=function(ne){this._callbacks=this._callbacks||{};for(var Y=new Array(arguments.length-1),Q=this._callbacks["$"+ne],ce=1;ce<arguments.length;ce++)Y[ce-1]=arguments[ce];if(Q){ce=0;for(var je=(Q=Q.slice(0)).length;ce<je;++ce)Q[ce].apply(this,Y)}return this},Ce.prototype.emitReserved=Ce.prototype.emit,Ce.prototype.listeners=function(ne){return this._callbacks=this._callbacks||{},this._callbacks["$"+ne]||[]},Ce.prototype.hasListeners=function(ne){return!!this.listeners(ne).length};const Be=typeof Promise=="function"&&typeof Promise.resolve=="function"?ne=>Promise.resolve().then(ne):(ne,Y)=>Y(ne,0),_e=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Ye(ne,...Y){return Y.reduce((Q,ce)=>(ne.hasOwnProperty(ce)&&(Q[ce]=ne[ce]),Q),{})}const Qe=_e.setTimeout,Ge=_e.clearTimeout;function He(ne,Y){Y.useNativeTimers?(ne.setTimeoutFn=Qe.bind(_e),ne.clearTimeoutFn=Ge.bind(_e)):(ne.setTimeoutFn=_e.setTimeout.bind(_e),ne.clearTimeoutFn=_e.clearTimeout.bind(_e))}function Te(ne){return typeof ne=="string"?function(Y){let Q=0,ce=0;for(let je=0,at=Y.length;je<at;je++)Q=Y.charCodeAt(je),Q<128?ce+=1:Q<2048?ce+=2:Q<55296||Q>=57344?ce+=3:(je++,ce+=4);return ce}(ne):Math.ceil(1.33*(ne.byteLength||ne.size))}function dt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class yt extends Error{constructor(Y,Q,ce){super(Y),this.description=Q,this.context=ce,this.type="TransportError"}}class on extends Ce{constructor(Y){super(),this.writable=!1,He(this,Y),this.opts=Y,this.query=Y.query,this.socket=Y.socket,this.supportsBinary=!Y.forceBase64}onError(Y,Q,ce){return super.emitReserved("error",new yt(Y,Q,ce)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this}send(Y){this.readyState==="open"&&this.write(Y)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(Y){const Q=$(Y,this.socket.binaryType);this.onPacket(Q)}onPacket(Y){super.emitReserved("packet",Y)}onClose(Y){this.readyState="closed",super.emitReserved("close",Y)}pause(Y){}createUri(Y,Q={}){return Y+"://"+this._hostname()+this._port()+this.opts.path+this._query(Q)}_hostname(){const Y=this.opts.hostname;return Y.indexOf(":")===-1?Y:"["+Y+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(Y){const Q=function(ce){let je="";for(let at in ce)ce.hasOwnProperty(at)&&(je.length&&(je+="&"),je+=encodeURIComponent(at)+"="+encodeURIComponent(ce[at]));return je}(Y);return Q.length?"?"+Q:""}}class ln extends on{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(Y){this.readyState="pausing";const Q=()=>{this.readyState="paused",Y()};if(this._polling||!this.writable){let ce=0;this._polling&&(ce++,this.once("pollComplete",function(){--ce||Q()})),this.writable||(ce++,this.once("drain",function(){--ce||Q()}))}else Q()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(Y){((Q,ce)=>{const je=Q.split(J),at=[];for(let kt=0;kt<je.length;kt++){const Lt=$(je[kt],ce);if(at.push(Lt),Lt.type==="error")break}return at})(Y,this.socket.binaryType).forEach(Q=>{if(this.readyState==="opening"&&Q.type==="open"&&this.onOpen(),Q.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(Q)}),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const Y=()=>{this.write([{type:"close"}])};this.readyState==="open"?Y():this.once("open",Y)}write(Y){this.writable=!1,((Q,ce)=>{const je=Q.length,at=new Array(je);let kt=0;Q.forEach((Lt,xt)=>{p(Lt,!1,zn=>{at[xt]=zn,++kt===je&&ce(at.join(J))})})})(Y,Q=>{this.doWrite(Q,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const Y=this.opts.secure?"https":"http",Q=this.query||{};return this.opts.timestampRequests!==!1&&(Q[this.opts.timestampParam]=dt()),this.supportsBinary||Q.sid||(Q.b64=1),this.createUri(Y,Q)}}let Pn=!1;try{Pn=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const En=Pn;function rn(){}class Ne extends ln{constructor(Y){if(super(Y),typeof location<"u"){const Q=location.protocol==="https:";let ce=location.port;ce||(ce=Q?"443":"80"),this.xd=typeof location<"u"&&Y.hostname!==location.hostname||ce!==Y.port}}doWrite(Y,Q){const ce=this.request({method:"POST",data:Y});ce.on("success",Q),ce.on("error",(je,at)=>{this.onError("xhr post error",je,at)})}doPoll(){const Y=this.request();Y.on("data",this.onData.bind(this)),Y.on("error",(Q,ce)=>{this.onError("xhr poll error",Q,ce)}),this.pollXhr=Y}}class Me extends Ce{constructor(Y,Q,ce){super(),this.createRequest=Y,He(this,ce),this._opts=ce,this._method=ce.method||"GET",this._uri=Q,this._data=ce.data!==void 0?ce.data:null,this._create()}_create(){var Y;const Q=Ye(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");Q.xdomain=!!this._opts.xd;const ce=this._xhr=this.createRequest(Q);try{ce.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){ce.setDisableHeaderCheck&&ce.setDisableHeaderCheck(!0);for(let je in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(je)&&ce.setRequestHeader(je,this._opts.extraHeaders[je])}}catch{}if(this._method==="POST")try{ce.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{ce.setRequestHeader("Accept","*/*")}catch{}(Y=this._opts.cookieJar)===null||Y===void 0||Y.addCookies(ce),"withCredentials"in ce&&(ce.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(ce.timeout=this._opts.requestTimeout),ce.onreadystatechange=()=>{var je;ce.readyState===3&&((je=this._opts.cookieJar)===null||je===void 0||je.parseCookies(ce.getResponseHeader("set-cookie"))),ce.readyState===4&&(ce.status===200||ce.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof ce.status=="number"?ce.status:0)},0))},ce.send(this._data)}catch(je){return void this.setTimeoutFn(()=>{this._onError(je)},0)}typeof document<"u"&&(this._index=Me.requestsCount++,Me.requests[this._index]=this)}_onError(Y){this.emitReserved("error",Y,this._xhr),this._cleanup(!0)}_cleanup(Y){if(this._xhr!==void 0&&this._xhr!==null){if(this._xhr.onreadystatechange=rn,Y)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Me.requests[this._index],this._xhr=null}}_onLoad(){const Y=this._xhr.responseText;Y!==null&&(this.emitReserved("data",Y),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Me.requestsCount=0,Me.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",Ze):typeof addEventListener=="function"&&addEventListener("onpagehide"in _e?"pagehide":"unload",Ze,!1));function Ze(){for(let ne in Me.requests)Me.requests.hasOwnProperty(ne)&&Me.requests[ne].abort()}const Ft=function(){const ne=Ct({xdomain:!1});return ne&&ne.responseType!==null}();function Ct(ne){const Y=ne.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!Y||En))return new XMLHttpRequest}catch{}if(!Y)try{return new _e[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const wt=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class un extends on{get name(){return"websocket"}doOpen(){const Y=this.uri(),Q=this.opts.protocols,ce=wt?{}:Ye(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(ce.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(Y,Q,ce)}catch(je){return this.emitReserved("error",je)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=Y=>this.onClose({description:"websocket connection closed",context:Y}),this.ws.onmessage=Y=>this.onData(Y.data),this.ws.onerror=Y=>this.onError("websocket error",Y)}write(Y){this.writable=!1;for(let Q=0;Q<Y.length;Q++){const ce=Y[Q],je=Q===Y.length-1;p(ce,this.supportsBinary,at=>{try{this.doWrite(ce,at)}catch{}je&&Be(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const Y=this.opts.secure?"wss":"ws",Q=this.query||{};return this.opts.timestampRequests&&(Q[this.opts.timestampParam]=dt()),this.supportsBinary||(Q.b64=1),this.createUri(Y,Q)}}const Sn=_e.WebSocket||_e.MozWebSocket,Ut={websocket:class extends un{createSocket(ne,Y,Q){return wt?new Sn(ne,Y,Q):Y?new Sn(ne,Y):new Sn(ne)}doWrite(ne,Y){this.ws.send(Y)}},webtransport:class extends on{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(ne){return this.emitReserved("error",ne)}this._transport.closed.then(()=>{this.onClose()}).catch(ne=>{this.onError("webtransport error",ne)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(ne=>{const Y=function(kt,Lt){Re||(Re=new TextDecoder);const xt=[];let zn=0,Gt=-1,Gn=!1;return new TransformStream({transform(kn,sa){for(xt.push(kn);;){if(zn===0){if(Se(xt)<1)break;const Jr=me(xt,1);Gn=!(128&~Jr[0]),Gt=127&Jr[0],zn=Gt<126?3:Gt===126?1:2}else if(zn===1){if(Se(xt)<2)break;const Jr=me(xt,2);Gt=new DataView(Jr.buffer,Jr.byteOffset,Jr.length).getUint16(0),zn=3}else if(zn===2){if(Se(xt)<8)break;const Jr=me(xt,8),pa=new DataView(Jr.buffer,Jr.byteOffset,Jr.length),ia=pa.getUint32(0);if(ia>Math.pow(2,21)-1){sa.enqueue(z);break}Gt=ia*Math.pow(2,32)+pa.getUint32(4),zn=3}else{if(Se(xt)<Gt)break;const Jr=me(xt,Gt);sa.enqueue($(Gn?Jr:Re.decode(Jr),Lt)),zn=0}if(Gt===0||Gt>kt){sa.enqueue(z);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),Q=ne.readable.pipeThrough(Y).getReader(),ce=be();ce.readable.pipeTo(ne.writable),this._writer=ce.writable.getWriter();const je=()=>{Q.read().then(({done:kt,value:Lt})=>{kt||(this.onPacket(Lt),je())}).catch(kt=>{})};je();const at={type:"open"};this.query.sid&&(at.data=`{"sid":"${this.query.sid}"}`),this._writer.write(at).then(()=>this.onOpen())})})}write(ne){this.writable=!1;for(let Y=0;Y<ne.length;Y++){const Q=ne[Y],ce=Y===ne.length-1;this._writer.write(Q).then(()=>{ce&&Be(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var ne;(ne=this._transport)===null||ne===void 0||ne.close()}},polling:class extends Ne{constructor(ne){super(ne);const Y=ne&&ne.forceBase64;this.supportsBinary=Ft&&!Y}request(ne={}){return Object.assign(ne,{xd:this.xd},this.opts),new Me(Ct,this.uri(),ne)}}},nr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ar=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Sr(ne){if(ne.length>8e3)throw"URI too long";const Y=ne,Q=ne.indexOf("["),ce=ne.indexOf("]");Q!=-1&&ce!=-1&&(ne=ne.substring(0,Q)+ne.substring(Q,ce).replace(/:/g,";")+ne.substring(ce,ne.length));let je=nr.exec(ne||""),at={},kt=14;for(;kt--;)at[Ar[kt]]=je[kt]||"";return Q!=-1&&ce!=-1&&(at.source=Y,at.host=at.host.substring(1,at.host.length-1).replace(/;/g,":"),at.authority=at.authority.replace("[","").replace("]","").replace(/;/g,":"),at.ipv6uri=!0),at.pathNames=function(Lt,xt){const zn=/\/{2,9}/g,Gt=xt.replace(zn,"/").split("/");return xt.slice(0,1)!="/"&&xt.length!==0||Gt.splice(0,1),xt.slice(-1)=="/"&&Gt.splice(Gt.length-1,1),Gt}(0,at.path),at.queryKey=function(Lt,xt){const zn={};return xt.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(Gt,Gn,kn){Gn&&(zn[Gn]=kn)}),zn}(0,at.query),at}const Ur=typeof addEventListener=="function"&&typeof removeEventListener=="function",xr=[];Ur&&addEventListener("offline",()=>{xr.forEach(ne=>ne())},!1);class Or extends Ce{constructor(Y,Q){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,Y&&typeof Y=="object"&&(Q=Y,Y=null),Y){const ce=Sr(Y);Q.hostname=ce.host,Q.secure=ce.protocol==="https"||ce.protocol==="wss",Q.port=ce.port,ce.query&&(Q.query=ce.query)}else Q.host&&(Q.hostname=Sr(Q.host).host);He(this,Q),this.secure=Q.secure!=null?Q.secure:typeof location<"u"&&location.protocol==="https:",Q.hostname&&!Q.port&&(Q.port=this.secure?"443":"80"),this.hostname=Q.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=Q.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},Q.transports.forEach(ce=>{const je=ce.prototype.name;this.transports.push(je),this._transportsByName[je]=ce}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},Q),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=function(ce){let je={},at=ce.split("&");for(let kt=0,Lt=at.length;kt<Lt;kt++){let xt=at[kt].split("=");je[decodeURIComponent(xt[0])]=decodeURIComponent(xt[1])}return je}(this.opts.query)),Ur&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},xr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(Y){const Q=Object.assign({},this.opts.query);Q.EIO=4,Q.transport=Y,this.id&&(Q.sid=this.id);const ce=Object.assign({},this.opts,{query:Q,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[Y]);return new this._transportsByName[Y](ce)}_open(){if(this.transports.length===0)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const Y=this.opts.rememberUpgrade&&Or.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const Q=this.createTransport(Y);Q.open(),this.setTransport(Q)}setTransport(Y){this.transport&&this.transport.removeAllListeners(),this.transport=Y,Y.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",Q=>this._onClose("transport close",Q))}onOpen(){this.readyState="open",Or.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(Y){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",Y),this.emitReserved("heartbeat"),Y.type){case"open":this.onHandshake(JSON.parse(Y.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const Q=new Error("server error");Q.code=Y.data,this._onError(Q);break;case"message":this.emitReserved("data",Y.data),this.emitReserved("message",Y.data)}}onHandshake(Y){this.emitReserved("handshake",Y),this.id=Y.sid,this.transport.query.sid=Y.sid,this._pingInterval=Y.pingInterval,this._pingTimeout=Y.pingTimeout,this._maxPayload=Y.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const Y=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+Y,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},Y),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const Y=this._getWritablePackets();this.transport.send(Y),this._prevBufferLen=Y.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let Y=1;for(let Q=0;Q<this.writeBuffer.length;Q++){const ce=this.writeBuffer[Q].data;if(ce&&(Y+=Te(ce)),Q>0&&Y>this._maxPayload)return this.writeBuffer.slice(0,Q);Y+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const Y=Date.now()>this._pingTimeoutTime;return Y&&(this._pingTimeoutTime=0,Be(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),Y}write(Y,Q,ce){return this._sendPacket("message",Y,Q,ce),this}send(Y,Q,ce){return this._sendPacket("message",Y,Q,ce),this}_sendPacket(Y,Q,ce,je){if(typeof Q=="function"&&(je=Q,Q=void 0),typeof ce=="function"&&(je=ce,ce=null),this.readyState==="closing"||this.readyState==="closed")return;(ce=ce||{}).compress=ce.compress!==!1;const at={type:Y,data:Q,options:ce};this.emitReserved("packetCreate",at),this.writeBuffer.push(at),je&&this.once("flush",je),this.flush()}close(){const Y=()=>{this._onClose("forced close"),this.transport.close()},Q=()=>{this.off("upgrade",Q),this.off("upgradeError",Q),Y()},ce=()=>{this.once("upgrade",Q),this.once("upgradeError",Q)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?ce():Y()}):this.upgrading?ce():Y()),this}_onError(Y){if(Or.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",Y),this._onClose("transport error",Y)}_onClose(Y,Q){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ur&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const ce=xr.indexOf(this._offlineEventListener);ce!==-1&&xr.splice(ce,1)}this.readyState="closed",this.id=null,this.emitReserved("close",Y,Q),this.writeBuffer=[],this._prevBufferLen=0}}}Or.protocol=4;class Kr extends Or{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let Y=0;Y<this._upgrades.length;Y++)this._probe(this._upgrades[Y])}_probe(Y){let Q=this.createTransport(Y),ce=!1;Or.priorWebsocketSuccess=!1;const je=()=>{ce||(Q.send([{type:"ping",data:"probe"}]),Q.once("packet",Gn=>{if(!ce)if(Gn.type==="pong"&&Gn.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",Q),!Q)return;Or.priorWebsocketSuccess=Q.name==="websocket",this.transport.pause(()=>{ce||this.readyState!=="closed"&&(Gt(),this.setTransport(Q),Q.send([{type:"upgrade"}]),this.emitReserved("upgrade",Q),Q=null,this.upgrading=!1,this.flush())})}else{const kn=new Error("probe error");kn.transport=Q.name,this.emitReserved("upgradeError",kn)}}))};function at(){ce||(ce=!0,Gt(),Q.close(),Q=null)}const kt=Gn=>{const kn=new Error("probe error: "+Gn);kn.transport=Q.name,at(),this.emitReserved("upgradeError",kn)};function Lt(){kt("transport closed")}function xt(){kt("socket closed")}function zn(Gn){Q&&Gn.name!==Q.name&&at()}const Gt=()=>{Q.removeListener("open",je),Q.removeListener("error",kt),Q.removeListener("close",Lt),this.off("close",xt),this.off("upgrading",zn)};Q.once("open",je),Q.once("error",kt),Q.once("close",Lt),this.once("close",xt),this.once("upgrading",zn),this._upgrades.indexOf("webtransport")!==-1&&Y!=="webtransport"?this.setTimeoutFn(()=>{ce||Q.open()},200):Q.open()}onHandshake(Y){this._upgrades=this._filterUpgrades(Y.upgrades),super.onHandshake(Y)}_filterUpgrades(Y){const Q=[];for(let ce=0;ce<Y.length;ce++)~this.transports.indexOf(Y[ce])&&Q.push(Y[ce]);return Q}}class va extends Kr{constructor(Y,Q={}){const ce=typeof Y=="object"?Y:Q;(!ce.transports||ce.transports&&typeof ce.transports[0]=="string")&&(ce.transports=(ce.transports||["polling","websocket","webtransport"]).map(je=>Ut[je]).filter(je=>!!je)),super(Y,ce)}}const ra=typeof ArrayBuffer=="function",ua=Object.prototype.toString,jn=typeof Blob=="function"||typeof Blob<"u"&&ua.call(Blob)==="[object BlobConstructor]",Ha=typeof File=="function"||typeof File<"u"&&ua.call(File)==="[object FileConstructor]";function Ea(ne){return ra&&(ne instanceof ArrayBuffer||(Y=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(Y):Y.buffer instanceof ArrayBuffer)(ne))||jn&&ne instanceof Blob||Ha&&ne instanceof File}function Qr(ne,Y){if(!ne||typeof ne!="object")return!1;if(Array.isArray(ne)){for(let Q=0,ce=ne.length;Q<ce;Q++)if(Qr(ne[Q]))return!0;return!1}if(Ea(ne))return!0;if(ne.toJSON&&typeof ne.toJSON=="function"&&arguments.length===1)return Qr(ne.toJSON(),!0);for(const Q in ne)if(Object.prototype.hasOwnProperty.call(ne,Q)&&Qr(ne[Q]))return!0;return!1}function gr(ne){const Y=[],Q=ne.data,ce=ne;return ce.data=rt(Q,Y),ce.attachments=Y.length,{packet:ce,buffers:Y}}function rt(ne,Y){if(!ne)return ne;if(Ea(ne)){const Q={_placeholder:!0,num:Y.length};return Y.push(ne),Q}if(Array.isArray(ne)){const Q=new Array(ne.length);for(let ce=0;ce<ne.length;ce++)Q[ce]=rt(ne[ce],Y);return Q}if(typeof ne=="object"&&!(ne instanceof Date)){const Q={};for(const ce in ne)Object.prototype.hasOwnProperty.call(ne,ce)&&(Q[ce]=rt(ne[ce],Y));return Q}return ne}function ut(ne,Y){return ne.data=$t(ne.data,Y),delete ne.attachments,ne}function $t(ne,Y){if(!ne)return ne;if(ne&&ne._placeholder===!0){if(typeof ne.num=="number"&&ne.num>=0&&ne.num<Y.length)return Y[ne.num];throw new Error("illegal attachments")}if(Array.isArray(ne))for(let Q=0;Q<ne.length;Q++)ne[Q]=$t(ne[Q],Y);else if(typeof ne=="object")for(const Q in ne)Object.prototype.hasOwnProperty.call(ne,Q)&&(ne[Q]=$t(ne[Q],Y));return ne}const Tt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],sn=5;var nn;(function(ne){ne[ne.CONNECT=0]="CONNECT",ne[ne.DISCONNECT=1]="DISCONNECT",ne[ne.EVENT=2]="EVENT",ne[ne.ACK=3]="ACK",ne[ne.CONNECT_ERROR=4]="CONNECT_ERROR",ne[ne.BINARY_EVENT=5]="BINARY_EVENT",ne[ne.BINARY_ACK=6]="BINARY_ACK"})(nn||(nn={}));class et{constructor(Y){this.replacer=Y}encode(Y){return Y.type!==nn.EVENT&&Y.type!==nn.ACK||!Qr(Y)?[this.encodeAsString(Y)]:this.encodeAsBinary({type:Y.type===nn.EVENT?nn.BINARY_EVENT:nn.BINARY_ACK,nsp:Y.nsp,data:Y.data,id:Y.id})}encodeAsString(Y){let Q=""+Y.type;return Y.type!==nn.BINARY_EVENT&&Y.type!==nn.BINARY_ACK||(Q+=Y.attachments+"-"),Y.nsp&&Y.nsp!=="/"&&(Q+=Y.nsp+","),Y.id!=null&&(Q+=Y.id),Y.data!=null&&(Q+=JSON.stringify(Y.data,this.replacer)),Q}encodeAsBinary(Y){const Q=gr(Y),ce=this.encodeAsString(Q.packet),je=Q.buffers;return je.unshift(ce),je}}function On(ne){return Object.prototype.toString.call(ne)==="[object Object]"}class Ln extends Ce{constructor(Y){super(),this.reviver=Y}add(Y){let Q;if(typeof Y=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");Q=this.decodeString(Y);const ce=Q.type===nn.BINARY_EVENT;ce||Q.type===nn.BINARY_ACK?(Q.type=ce?nn.EVENT:nn.ACK,this.reconstructor=new Xn(Q),Q.attachments===0&&super.emitReserved("decoded",Q)):super.emitReserved("decoded",Q)}else{if(!Ea(Y)&&!Y.base64)throw new Error("Unknown type: "+Y);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");Q=this.reconstructor.takeBinaryData(Y),Q&&(this.reconstructor=null,super.emitReserved("decoded",Q))}}decodeString(Y){let Q=0;const ce={type:Number(Y.charAt(0))};if(nn[ce.type]===void 0)throw new Error("unknown packet type "+ce.type);if(ce.type===nn.BINARY_EVENT||ce.type===nn.BINARY_ACK){const at=Q+1;for(;Y.charAt(++Q)!=="-"&&Q!=Y.length;);const kt=Y.substring(at,Q);if(kt!=Number(kt)||Y.charAt(Q)!=="-")throw new Error("Illegal attachments");ce.attachments=Number(kt)}if(Y.charAt(Q+1)==="/"){const at=Q+1;for(;++Q&&!(Y.charAt(Q)===","||Q===Y.length););ce.nsp=Y.substring(at,Q)}else ce.nsp="/";const je=Y.charAt(Q+1);if(je!==""&&Number(je)==je){const at=Q+1;for(;++Q;){const kt=Y.charAt(Q);if(kt==null||Number(kt)!=kt){--Q;break}if(Q===Y.length)break}ce.id=Number(Y.substring(at,Q+1))}if(Y.charAt(++Q)){const at=this.tryParse(Y.substr(Q));if(!Ln.isPayloadValid(ce.type,at))throw new Error("invalid payload");ce.data=at}return ce}tryParse(Y){try{return JSON.parse(Y,this.reviver)}catch{return!1}}static isPayloadValid(Y,Q){switch(Y){case nn.CONNECT:return On(Q);case nn.DISCONNECT:return Q===void 0;case nn.CONNECT_ERROR:return typeof Q=="string"||On(Q);case nn.EVENT:case nn.BINARY_EVENT:return Array.isArray(Q)&&(typeof Q[0]=="number"||typeof Q[0]=="string"&&Tt.indexOf(Q[0])===-1);case nn.ACK:case nn.BINARY_ACK:return Array.isArray(Q)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Xn{constructor(Y){this.packet=Y,this.buffers=[],this.reconPack=Y}takeBinaryData(Y){if(this.buffers.push(Y),this.buffers.length===this.reconPack.attachments){const Q=ut(this.reconPack,this.buffers);return this.finishedReconstruction(),Q}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function vr(ne,Y,Q){return ne.on(Y,Q),function(){ne.off(Y,Q)}}const Qt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class St extends Ce{constructor(Y,Q,ce){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=Y,this.nsp=Q,ce&&ce.auth&&(this.auth=ce.auth),this._opts=Object.assign({},ce),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const Y=this.io;this.subs=[vr(Y,"open",this.onopen.bind(this)),vr(Y,"packet",this.onpacket.bind(this)),vr(Y,"error",this.onerror.bind(this)),vr(Y,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this}open(){return this.connect()}send(...Y){return Y.unshift("message"),this.emit.apply(this,Y),this}emit(Y,...Q){var ce,je,at;if(Qt.hasOwnProperty(Y))throw new Error('"'+Y.toString()+'" is a reserved event name');if(Q.unshift(Y),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(Q),this;const kt={type:nn.EVENT,data:Q,options:{}};if(kt.options.compress=this.flags.compress!==!1,typeof Q[Q.length-1]=="function"){const zn=this.ids++,Gt=Q.pop();this._registerAckCallback(zn,Gt),kt.id=zn}const Lt=(je=(ce=this.io.engine)===null||ce===void 0?void 0:ce.transport)===null||je===void 0?void 0:je.writable,xt=this.connected&&!(!((at=this.io.engine)===null||at===void 0)&&at._hasPingExpired());return this.flags.volatile&&!Lt||(xt?(this.notifyOutgoingListeners(kt),this.packet(kt)):this.sendBuffer.push(kt)),this.flags={},this}_registerAckCallback(Y,Q){var ce;const je=(ce=this.flags.timeout)!==null&&ce!==void 0?ce:this._opts.ackTimeout;if(je===void 0)return void(this.acks[Y]=Q);const at=this.io.setTimeoutFn(()=>{delete this.acks[Y];for(let Lt=0;Lt<this.sendBuffer.length;Lt++)this.sendBuffer[Lt].id===Y&&this.sendBuffer.splice(Lt,1);Q.call(this,new Error("operation has timed out"))},je),kt=(...Lt)=>{this.io.clearTimeoutFn(at),Q.apply(this,Lt)};kt.withError=!0,this.acks[Y]=kt}emitWithAck(Y,...Q){return new Promise((ce,je)=>{const at=(kt,Lt)=>kt?je(kt):ce(Lt);at.withError=!0,Q.push(at),this.emit(Y,...Q)})}_addToQueue(Y){let Q;typeof Y[Y.length-1]=="function"&&(Q=Y.pop());const ce={id:this._queueSeq++,tryCount:0,pending:!1,args:Y,flags:Object.assign({fromQueue:!0},this.flags)};Y.push((je,...at)=>{if(ce===this._queue[0])return je!==null?ce.tryCount>this._opts.retries&&(this._queue.shift(),Q&&Q(je)):(this._queue.shift(),Q&&Q(null,...at)),ce.pending=!1,this._drainQueue()}),this._queue.push(ce),this._drainQueue()}_drainQueue(Y=!1){if(!this.connected||this._queue.length===0)return;const Q=this._queue[0];Q.pending&&!Y||(Q.pending=!0,Q.tryCount++,this.flags=Q.flags,this.emit.apply(this,Q.args))}packet(Y){Y.nsp=this.nsp,this.io._packet(Y)}onopen(){typeof this.auth=="function"?this.auth(Y=>{this._sendConnectPacket(Y)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(Y){this.packet({type:nn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},Y):Y})}onerror(Y){this.connected||this.emitReserved("connect_error",Y)}onclose(Y,Q){this.connected=!1,delete this.id,this.emitReserved("disconnect",Y,Q),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(Y=>{if(!this.sendBuffer.some(Q=>String(Q.id)===Y)){const Q=this.acks[Y];delete this.acks[Y],Q.withError&&Q.call(this,new Error("socket has been disconnected"))}})}onpacket(Y){if(Y.nsp===this.nsp)switch(Y.type){case nn.CONNECT:Y.data&&Y.data.sid?this.onconnect(Y.data.sid,Y.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case nn.EVENT:case nn.BINARY_EVENT:this.onevent(Y);break;case nn.ACK:case nn.BINARY_ACK:this.onack(Y);break;case nn.DISCONNECT:this.ondisconnect();break;case nn.CONNECT_ERROR:this.destroy();const Q=new Error(Y.data.message);Q.data=Y.data.data,this.emitReserved("connect_error",Q)}}onevent(Y){const Q=Y.data||[];Y.id!=null&&Q.push(this.ack(Y.id)),this.connected?this.emitEvent(Q):this.receiveBuffer.push(Object.freeze(Q))}emitEvent(Y){if(this._anyListeners&&this._anyListeners.length){const Q=this._anyListeners.slice();for(const ce of Q)ce.apply(this,Y)}super.emit.apply(this,Y),this._pid&&Y.length&&typeof Y[Y.length-1]=="string"&&(this._lastOffset=Y[Y.length-1])}ack(Y){const Q=this;let ce=!1;return function(...je){ce||(ce=!0,Q.packet({type:nn.ACK,id:Y,data:je}))}}onack(Y){const Q=this.acks[Y.id];typeof Q=="function"&&(delete this.acks[Y.id],Q.withError&&Y.data.unshift(null),Q.apply(this,Y.data))}onconnect(Y,Q){this.id=Y,this.recovered=Q&&this._pid===Q,this._pid=Q,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(Y=>this.emitEvent(Y)),this.receiveBuffer=[],this.sendBuffer.forEach(Y=>{this.notifyOutgoingListeners(Y),this.packet(Y)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(Y=>Y()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:nn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(Y){return this.flags.compress=Y,this}get volatile(){return this.flags.volatile=!0,this}timeout(Y){return this.flags.timeout=Y,this}onAny(Y){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(Y),this}prependAny(Y){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(Y),this}offAny(Y){if(!this._anyListeners)return this;if(Y){const Q=this._anyListeners;for(let ce=0;ce<Q.length;ce++)if(Y===Q[ce])return Q.splice(ce,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(Y){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(Y),this}prependAnyOutgoing(Y){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(Y),this}offAnyOutgoing(Y){if(!this._anyOutgoingListeners)return this;if(Y){const Q=this._anyOutgoingListeners;for(let ce=0;ce<Q.length;ce++)if(Y===Q[ce])return Q.splice(ce,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(Y){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const Q=this._anyOutgoingListeners.slice();for(const ce of Q)ce.apply(this,Y.data)}}}function Un(ne){ne=ne||{},this.ms=ne.min||100,this.max=ne.max||1e4,this.factor=ne.factor||2,this.jitter=ne.jitter>0&&ne.jitter<=1?ne.jitter:0,this.attempts=0}Un.prototype.duration=function(){var ne=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var Y=Math.random(),Q=Math.floor(Y*this.jitter*ne);ne=1&Math.floor(10*Y)?ne+Q:ne-Q}return 0|Math.min(ne,this.max)},Un.prototype.reset=function(){this.attempts=0},Un.prototype.setMin=function(ne){this.ms=ne},Un.prototype.setMax=function(ne){this.max=ne},Un.prototype.setJitter=function(ne){this.jitter=ne};class In extends Ce{constructor(Y,Q){var ce;super(),this.nsps={},this.subs=[],Y&&typeof Y=="object"&&(Q=Y,Y=void 0),(Q=Q||{}).path=Q.path||"/socket.io",this.opts=Q,He(this,Q),this.reconnection(Q.reconnection!==!1),this.reconnectionAttempts(Q.reconnectionAttempts||1/0),this.reconnectionDelay(Q.reconnectionDelay||1e3),this.reconnectionDelayMax(Q.reconnectionDelayMax||5e3),this.randomizationFactor((ce=Q.randomizationFactor)!==null&&ce!==void 0?ce:.5),this.backoff=new Un({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(Q.timeout==null?2e4:Q.timeout),this._readyState="closed",this.uri=Y;const je=Q.parser||x;this.encoder=new je.Encoder,this.decoder=new je.Decoder,this._autoConnect=Q.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(Y){return arguments.length?(this._reconnection=!!Y,Y||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(Y){return Y===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=Y,this)}reconnectionDelay(Y){var Q;return Y===void 0?this._reconnectionDelay:(this._reconnectionDelay=Y,(Q=this.backoff)===null||Q===void 0||Q.setMin(Y),this)}randomizationFactor(Y){var Q;return Y===void 0?this._randomizationFactor:(this._randomizationFactor=Y,(Q=this.backoff)===null||Q===void 0||Q.setJitter(Y),this)}reconnectionDelayMax(Y){var Q;return Y===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=Y,(Q=this.backoff)===null||Q===void 0||Q.setMax(Y),this)}timeout(Y){return arguments.length?(this._timeout=Y,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(Y){if(~this._readyState.indexOf("open"))return this;this.engine=new va(this.uri,this.opts);const Q=this.engine,ce=this;this._readyState="opening",this.skipReconnect=!1;const je=vr(Q,"open",function(){ce.onopen(),Y&&Y()}),at=Lt=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",Lt),Y?Y(Lt):this.maybeReconnectOnOpen()},kt=vr(Q,"error",at);if(this._timeout!==!1){const Lt=this._timeout,xt=this.setTimeoutFn(()=>{je(),at(new Error("timeout")),Q.close()},Lt);this.opts.autoUnref&&xt.unref(),this.subs.push(()=>{this.clearTimeoutFn(xt)})}return this.subs.push(je),this.subs.push(kt),this}connect(Y){return this.open(Y)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const Y=this.engine;this.subs.push(vr(Y,"ping",this.onping.bind(this)),vr(Y,"data",this.ondata.bind(this)),vr(Y,"error",this.onerror.bind(this)),vr(Y,"close",this.onclose.bind(this)),vr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(Y){try{this.decoder.add(Y)}catch(Q){this.onclose("parse error",Q)}}ondecoded(Y){Be(()=>{this.emitReserved("packet",Y)},this.setTimeoutFn)}onerror(Y){this.emitReserved("error",Y)}socket(Y,Q){let ce=this.nsps[Y];return ce?this._autoConnect&&!ce.active&&ce.connect():(ce=new St(this,Y,Q),this.nsps[Y]=ce),ce}_destroy(Y){const Q=Object.keys(this.nsps);for(const ce of Q)if(this.nsps[ce].active)return;this._close()}_packet(Y){const Q=this.encoder.encode(Y);for(let ce=0;ce<Q.length;ce++)this.engine.write(Q[ce],Y.options)}cleanup(){this.subs.forEach(Y=>Y()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(Y,Q){var ce;this.cleanup(),(ce=this.engine)===null||ce===void 0||ce.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",Y,Q),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const Y=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const Q=this.backoff.duration();this._reconnecting=!0;const ce=this.setTimeoutFn(()=>{Y.skipReconnect||(this.emitReserved("reconnect_attempt",Y.backoff.attempts),Y.skipReconnect||Y.open(je=>{je?(Y._reconnecting=!1,Y.reconnect(),this.emitReserved("reconnect_error",je)):Y.onreconnect()}))},Q);this.opts.autoUnref&&ce.unref(),this.subs.push(()=>{this.clearTimeoutFn(ce)})}}onreconnect(){const Y=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",Y)}}const Nn={};function Fr(ne,Y){typeof ne=="object"&&(Y=ne,ne=void 0);const Q=function(xt,zn="",Gt){let Gn=xt;Gt=Gt||typeof location<"u"&&location,xt==null&&(xt=Gt.protocol+"//"+Gt.host),typeof xt=="string"&&(xt.charAt(0)==="/"&&(xt=xt.charAt(1)==="/"?Gt.protocol+xt:Gt.host+xt),/^(https?|wss?):\/\//.test(xt)||(xt=Gt!==void 0?Gt.protocol+"//"+xt:"https://"+xt),Gn=Sr(xt)),Gn.port||(/^(http|ws)$/.test(Gn.protocol)?Gn.port="80":/^(http|ws)s$/.test(Gn.protocol)&&(Gn.port="443")),Gn.path=Gn.path||"/";const kn=Gn.host.indexOf(":")!==-1?"["+Gn.host+"]":Gn.host;return Gn.id=Gn.protocol+"://"+kn+":"+Gn.port+zn,Gn.href=Gn.protocol+"://"+kn+(Gt&&Gt.port===Gn.port?"":":"+Gn.port),Gn}(ne,(Y=Y||{}).path||"/socket.io"),ce=Q.source,je=Q.id,at=Q.path,kt=Nn[je]&&at in Nn[je].nsps;let Lt;return Y.forceNew||Y["force new connection"]||Y.multiplex===!1||kt?Lt=new In(ce,Y):(Nn[je]||(Nn[je]=new In(ce,Y)),Lt=Nn[je]),Q.query&&!Y.query&&(Y.query=Q.queryKey),Lt.socket(Q.path,Y)}Object.assign(Fr,{Manager:In,Socket:St,io:Fr,connect:Fr});var Mr=u(76),Hr=u(7833),cr=u.n(Hr),Kn="mediasoup-demo",xa=function(){return(0,k.A)(function ne(Y){(0,m.A)(this,ne),Y?(this._debug=cr()("".concat(Kn,":").concat(Y)),this._warn=cr()("".concat(Kn,":WARN:").concat(Y)),this._error=cr()("".concat(Kn,":ERROR:").concat(Y))):(this._debug=cr()(Kn),this._warn=cr()("".concat(Kn,":WARN")),this._error=cr()("".concat(Kn,":ERROR"))),cr().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)},[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])}();function ma(ne,Y){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(ne);Y&&(ce=ce.filter(function(je){return Object.getOwnPropertyDescriptor(ne,je).enumerable})),Q.push.apply(Q,ce)}return Q}function La(ne){for(var Y=1;Y<arguments.length;Y++){var Q=arguments[Y]!=null?arguments[Y]:{};Y%2?ma(Object(Q),!0).forEach(function(ce){(0,w.A)(ne,ce,Q[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):ma(Object(Q)).forEach(function(ce){Object.defineProperty(ne,ce,Object.getOwnPropertyDescriptor(Q,ce))})}return ne}var Va=u(1396),Ci=Va.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),bs=Va.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function ii(ne){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,_.A)(g().mark(function ne(Y){var Q,ce,je,at,kt,Lt,xt,zn,Gt,Gn,kn,sa,Jr,pa,ia,$i,Zi;return g().wrap(function(bi){for(;;)switch(bi.prev=bi.next){case 0:return Q=Y.roomId,ce=Y.secret,je=Y.signalingBaseUrl,at="call-api.videosdk.live",kt=[],Lt=null,xt={},zn={},Gt={},Gn=null,kn=null,sa=null,bi.next=1,fetch("https://".concat(je,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:ce,"Content-Type":"application/json"},body:JSON.stringify({roomId:Q})}).then(function(){var _o=(0,_.A)(g().mark(function bo(No){var ei;return g().wrap(function(di){for(;;)switch(di.prev=di.next){case 0:return di.next=1,No.json();case 1:return ei=di.sent,di.abrupt("return",La({success:No.status==200},ei));case 2:case"end":return di.stop()}},bo)}));return function(bo){return _o.apply(this,arguments)}}()).catch(function(_o){return{success:!1}});case 1:if(Jr=bi.sent,pa=Jr.data,ia=Jr.success,$i=Jr.error,ia){bi.next=2;break}throw Error($i??"Error getting server configurations");case 2:return pa&&(at=pa.baseUrl,Zi=pa.observability,kt=Us(pa.iceServers),Lt=Zi.jwt,xt=Zi.traces,zn=Zi.logs,Gt=Zi.metaData,Gn=pa.signalingUrl,sa=pa.socketPath,kn=pa.socketUrl),bi.abrupt("return",{baseUrl:at,iceServers:kt,observabilityJwt:Lt,traces:xt,logs:zn,metaData:Gt,signalingUrl:Gn,socketPath:sa,socketUrl:kn});case 3:case"end":return bi.stop()}},ne)})),Ti.apply(this,arguments)}function Us(ne){try{var Y=Va.AES.decrypt(ne,Ci,{iv:bs,mode:Va.mode.CBC,padding:Va.pad.ZeroPadding}).toString(Va.enc.Utf8);return JSON.parse(Y)}catch{return[]}}var vi=u(2215),ea=u.n(vi),Fs="mediasoup-demo.user",Ks="mediasoup-demo.devices";function pn(ne){var Y=ne.displayName;ea().set(Fs,{displayName:Y})}function Jn(){return ea().getJSON(Ks)}var $n=u(2211),dr=u.n($n),Dn=function(ne){return{type:"SET_ROOM_STATE",payload:{state:ne}}},Hn=function(ne){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:ne}}},$r=function(ne){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:ne}}},Er=function(ne){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:ne.canSendMic,canSendWebcam:ne.canSendWebcam}}},kr=function(ne){return{type:"SET_CAN_CHANGE_WEBCAM",payload:ne}},Fn=function(ne){return{type:"SET_DISPLAY_NAME",payload:{displayName:ne}}},Zr=function(ne){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:ne}}},Da=function(ne){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:ne}}},ya=function(ne){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:ne}}},Ca=function(ne){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:ne}}},Za=function(ne){return{type:"ADD_PRODUCER",payload:{producer:ne}}},Ga=function(ne){return{type:"REMOVE_PRODUCER",payload:{producerId:ne}}},ss=function(ne){return{type:"SET_PRODUCER_PAUSED",payload:{producerId:ne}}},Aa=function(ne){return{type:"SET_PRODUCER_RESUMED",payload:{producerId:ne}}},ls=function(ne,Y){return{type:"SET_PRODUCER_TRACK",payload:{producerId:ne,track:Y}}},Ps=function(ne,Y){return{type:"SET_PRODUCER_SCORE",payload:{producerId:ne,score:Y}}},ro=function(ne){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:ne}}},yi=function(ne){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:ne}}},Pi=function(ne){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:ne}}},Ns=function(ne){return{type:"ADD_PEER",payload:{peer:ne}}},Eo=function(ne){return{type:"REMOVE_PEER",payload:{peerId:ne}}},mo=function(ne,Y){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:ne,peerId:Y}}},Hi=function(ne,Y){return{type:"ADD_CONSUMER",payload:{consumer:ne,peerId:Y}}},ao=function(ne,Y){return{type:"REMOVE_CONSUMER",payload:{consumerId:ne,peerId:Y}}},Ni=function(ne,Y){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:ne,originator:Y}}},_i=function(ne,Y){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:ne,originator:Y}}},Di=function(ne,Y,Q){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:ne,spatialLayer:Y,temporalLayer:Q}}},uc=function(ne,Y,Q){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:ne,spatialLayer:Y,temporalLayer:Q}}},Cr=function(ne,Y){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:ne,priority:Y}}},Hs=function(ne,Y){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:ne,score:Y}}},da=function(ne,Y){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:ne,peerId:Y}}},oi=function(ne,Y){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:ne,peerId:Y}}},so=function(){return{type:"REMOVE_ALL_NOTIFICATIONS"}},tr=function(ne){var Y=ne.type,Q=Y===void 0?"info":Y,ce=ne.text,je=ne.title,at=ne.timeout;if(!at)switch(Q){case"info":at=3e3;break;case"error":at=5e3}var kt={id:dr()({length:6}).toLowerCase(),type:Q,title:je,text:ce,timeout:at};return function(Lt){Lt(function(xt){return{type:"ADD_NOTIFICATION",payload:{notification:xt}}}(kt)),setTimeout(function(){Lt({type:"REMOVE_NOTIFICATION",payload:{notificationId:kt.id}})},at)}},Qs=u(7007),ci=u(1803),li=u(9027),_r=u(7080),qa="CONNECTING",Xs="CONNECTED",Zo="RECONNECTING",ms="FAILED",Vi="DISCONNECTED",go=u(5414),Qa=u(2107),Oc=u(5071),Js=Array(32);function Vr(){for(var ne=0;ne<16;ne++)Js[ne]=Math.floor(16*Math.random())+48,Js[ne]>=58&&(Js[ne]+=39);return String.fromCharCode.apply(null,Js.slice(0,16))}function ui(){var ne=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(ne)}function gs(ne,Y){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(ne);Y&&(ce=ce.filter(function(je){return Object.getOwnPropertyDescriptor(ne,je).enumerable})),Q.push.apply(Q,ce)}return Q}function qi(ne){for(var Y=1;Y<arguments.length;Y++){var Q=arguments[Y]!=null?arguments[Y]:{};Y%2?gs(Object(Q),!0).forEach(function(ce){(0,w.A)(ne,ce,Q[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):gs(Object(Q)).forEach(function(ce){Object.defineProperty(ne,ce,Object.getOwnPropertyDescriptor(Q,ce))})}return ne}var Go=function(){return(0,k.A)(function ne(Y){var Q=this,ce=Y.roomId,je=Y.peerId,at=Y.sdkName,kt=Y.observabilityJwt,Lt=Y.metaData,xt=Y.traces;(0,m.A)(this,ne),this._traceId=function(){for(var Gt=0;Gt<32;Gt++)Js[Gt]=Math.floor(16*Math.random())+48,Js[Gt]>=58&&(Js[Gt]+=39);return String.fromCharCode.apply(null,Js.slice(0,32))}(),this._rootSpanId=Vr(),this._observabilityJwt=kt,this._tracesEnabled=xt.enabled,this._tracesEndpoint=xt.endPoint;var zn=function(Gt){for(var Gn="0123456789abcdefghijklmnopqrstuvwxyz",kn="",sa=Gt;sa>0;sa--)kn+=Gn[Math.floor(36*Math.random())];return kn}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.2.14"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:zn},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(ce,je,at,Lt),setInterval(function(){Q.processQueue()},4e3))},[{key:"addRootSpan",value:function(ne,Y,Q,ce){var je={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(ne,"_peer_").concat(Y,"_sdk_").concat(Q),kind:1,startTimeUnixNano:ui(),endTimeUnixNano:ui(),attributes:[{key:"roomId",value:{stringValue:ne}},{key:"peerId",value:{stringValue:Y}},{key:"sdkName",value:{stringValue:Q}},{key:"userId",value:{stringValue:ce.userId}},{key:"email",value:{stringValue:ce.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(je)}},{key:"addSpanToTrace",value:function(ne){this._spans.push(ne)}},{key:"trace",value:function(ne){var Y=ne.spanName,Q=ne.attributes,ce=Q===void 0?{}:Q,je=ne.span,at=je===void 0?void 0:je;if(this._tracesEnabled){var kt=Vr(),Lt=ui(),xt={traceId:this._traceId,spanId:kt,parentSpanId:at||this._rootSpanId,name:Y,kind:1,startTimeUnixNano:Lt,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(ce).length>0&&(xt.attributes=Object.entries(ce).map(function(zn){var Gt=(0,f.A)(zn,2);return{key:Gt[0],value:{stringValue:Gt[1]}}})),this.addSpanToTrace(xt),kt}}},{key:"traceAutoComplete",value:function(ne){var Y=ne.spanName,Q=ne.attributes,ce=Q===void 0?{}:Q,je=ne.status,at=je===void 0?1:je,kt=ne.span,Lt=kt===void 0?void 0:kt,xt=ne.message,zn=xt===void 0?"SUCCESS":xt;if(this._tracesEnabled){var Gt=Vr(),Gn=ui(),kn=ui(),sa={traceId:this._traceId,spanId:Gt,parentSpanId:Lt||this._rootSpanId,name:Y,kind:1,startTimeUnixNano:Gn,endTimeUnixNano:kn,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:at,message:zn}};Object.keys(ce).length>0&&(sa.attributes=Object.entries(ce).map(function(Jr){var pa=(0,f.A)(Jr,2);return{key:pa[0],value:{stringValue:pa[1]}}})),this.addSpanToTrace(sa)}}},{key:"completeSpan",value:function(ne){var Y=ne.span,Q=ne.status,ce=ne.message,je=ne.attributes,at=je===void 0?{}:je;if(this._tracesEnabled){var kt=ui();this._spans=this._spans.map(function(Lt){if(Lt.spanId!==Y)return Lt;var xt=Object.entries(at).map(function(zn){var Gt=(0,f.A)(zn,2);return{key:Gt[0],value:{stringValue:Gt[1]}}});return Lt.attributes=Lt.attributes?[].concat((0,y.A)(Lt.attributes),(0,y.A)(xt)):xt,qi(qi({},Lt),{},{status:{code:Q,message:ce},endTimeUnixNano:kt})})}}},{key:"processQueue",value:function(){var ne=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var Y={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,Y).then(function(){var Q=(0,_.A)(g().mark(function ce(je){return g().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return ne._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],at.next=1,je.text();case 1:return at.abrupt("return",at.sent);case 2:case"end":return at.stop()}},ce)}));return function(ce){return Q.apply(this,arguments)}}()).then(function(Q){}).catch(function(Q){ne._spans=ne._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",Q)})}}}])}();function Yo(ne,Y){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(ne);Y&&(ce=ce.filter(function(je){return Object.getOwnPropertyDescriptor(ne,je).enumerable})),Q.push.apply(Q,ce)}return Q}function io(ne){for(var Y=1;Y<arguments.length;Y++){var Q=arguments[Y]!=null?arguments[Y]:{};Y%2?Yo(Object(Q),!0).forEach(function(ce){(0,w.A)(ne,ce,Q[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):Yo(Object(Q)).forEach(function(ce){Object.defineProperty(ne,ce,Object.getOwnPropertyDescriptor(Q,ce))})}return ne}var fn=function(){return(0,k.A)(function Y(Q){var ce=Q.roomId,je=Q.peerId,at=Q.logs,kt=Q.observabilityJwt,Lt=Q.deviceInfo,xt=Q.sessionId,zn=Q.debugMode;(0,m.A)(this,Y);var Gt=Lt.browserUserAgent,Gn=Lt.deviceUserAgent,kn=Lt.platform;this._peerId=je,this._roomId=ce,this._logs=at,this._observabilityJwt=kt,this._deviceInfo=Lt,this._sessionId=xt,this._debugMode=zn,this.browserOrDeviceInfo=Gt?{browserName:Gt.browser.name,browserVersion:Gt.browser.version,osName:Gt.os.name,osVersion:Gt.os.version,platform:kn}:Gn?io({platform:kn},Gn):null},[{key:"pushLogs",value:(ne=(0,_.A)(g().mark(function Y(Q){var ce,je,at,kt,Lt,xt,zn,Gt;return g().wrap(function(Gn){for(;;)switch(Gn.prev=Gn.next){case 0:if(ce=Q.logType,je=Q.logText,at=Q.attributes,kt=Q.dashboardLog,Lt=kt!==void 0&&kt,xt=this._logs,zn=xt.enabled,Gt=xt.endPoint,!zn){Gn.next=2;break}return Gn.next=1,fetch(Gt,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:ce,logText:je,attributes:io(io({},at),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),debugMode:this._debugMode,dashboardLog:Lt})}).then(function(kn){return kn.json()}).catch(function(kn){return console.log("error",kn),{}});case 1:return Gn.abrupt("return",Gn.sent);case 2:return Gn.abrupt("return",null);case 3:case"end":return Gn.stop()}},Y,this)})),function(Y){return ne.apply(this,arguments)})}]);var ne}(),ve=u(4973),At=u(388),rr=u(3954),ha=u(5501),Xa=u(3662);function xs(){try{var ne=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xs=function(){return!!ne})()}function kl(ne){var Y=typeof Map=="function"?new Map:void 0;return kl=function(Q){if(Q===null||!function(je){try{return Function.toString.call(je).indexOf("[native code]")!==-1}catch{return typeof je=="function"}}(Q))return Q;if(typeof Q!="function")throw new TypeError("Super expression must either be null or a function");if(Y!==void 0){if(Y.has(Q))return Y.get(Q);Y.set(Q,ce)}function ce(){return function(je,at,kt){if(xs())return Reflect.construct.apply(null,arguments);var Lt=[null];Lt.push.apply(Lt,at);var xt=new(je.bind.apply(je,Lt));return kt&&(0,Xa.A)(xt,kt.prototype),xt}(Q,arguments,(0,rr.A)(this).constructor)}return ce.prototype=Object.create(Q.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),(0,Xa.A)(ce,Q)},kl(ne)}function Cl(ne,Y,Q){return Y=(0,rr.A)(Y),(0,At.A)(ne,Ir()?Reflect.construct(Y,Q||[],(0,rr.A)(ne).constructor):Y.apply(ne,Q))}function Ir(){try{var ne=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ir=function(){return!!ne})()}var Tl,dc=function(ne){function Y(Q,ce){var je;return(0,m.A)(this,Y),je=Cl(this,Y,[ce||"an error has occured"]),(0,w.A)(je,"code",void 0),je.name="VideoSdkError",je.code=Q,je}return(0,ha.A)(Y,ne),(0,k.A)(Y)}(kl(Error));(function(ne){ne[ne.InvalidKey=0]="InvalidKey",ne[ne.MissingKey=1]="MissingKey",ne[ne.InternalError=2]="InternalError"})(Tl||(Tl={}));var ko=function(ne){function Y(Q){var ce;return(0,m.A)(this,Y),(ce=Cl(this,Y,[21,Q??"device is unsupported"])).name="DeviceUnsupportedError",ce}return(0,ha.A)(Y,ne),(0,k.A)(Y)}(dc),vo=u(1806),Wi=u(6746),yo=u(8278);function sl(ne,Y){return ne?Y=="audio"?"shareAudio":"share":Y}function Pl(ne,Y){var Q=typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(!Q){if(Array.isArray(ne)||(Q=function(xt,zn){if(xt){if(typeof xt=="string")return Mc(xt,zn);var Gt={}.toString.call(xt).slice(8,-1);return Gt==="Object"&&xt.constructor&&(Gt=xt.constructor.name),Gt==="Map"||Gt==="Set"?Array.from(xt):Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt)?Mc(xt,zn):void 0}}(ne))||Y){Q&&(ne=Q);var ce=0,je=function(){};return{s:je,n:function(){return ce>=ne.length?{done:!0}:{done:!1,value:ne[ce++]}},e:function(xt){throw xt},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var at,kt=!0,Lt=!1;return{s:function(){Q=Q.call(ne)},n:function(){var xt=Q.next();return kt=xt.done,xt},e:function(xt){Lt=!0,at=xt},f:function(){try{kt||Q.return==null||Q.return()}finally{if(Lt)throw at}}}}function Mc(ne,Y){(Y==null||Y>ne.length)&&(Y=ne.length);for(var Q=0,ce=Array(Y);Q<Y;Q++)ce[Q]=ne[Q];return ce}function Vs(){try{var ne=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vs=function(){return!!ne})()}var ou=function(ne){function Y(ce){var je,at,kt,Lt;return(0,m.A)(this,Y),at=this,kt=Y,kt=(0,rr.A)(kt),(je=(0,At.A)(at,Vs()?Reflect.construct(kt,[],(0,rr.A)(at).constructor):kt.apply(at,Lt))).onWorkerMessage=function(xt){var zn,Gt=xt.data,Gn=Gt.kind,kn=Gt.data;switch(Gn){case"error":console.error(kn.error.message),je.emit(Wi.KS.EncryptionError,kn.error);break;case"initAck":kn.enabled&&je.keyProvider.getKeys().forEach(function(Jr){je.postKey(Jr)});break;case"enable":if(kn.enabled&&je.keyProvider.getKeys().forEach(function(Jr){je.postKey(Jr)}),je.encryptionEnabled!==kn.enabled&&kn.participantIdentity===je.room._peerId)je.emit(Wi.KS.ParticipantEncryptionStatusChanged,kn.enabled,je.room.localParticipant),je.encryptionEnabled=kn.enabled;else if(kn.participantIdentity){var sa=(zn=je.room)===null||zn===void 0?void 0:zn.getParticipantByIdentity(kn.participantIdentity);if(!sa)throw TypeError("couldn't set encryption status, participant not found".concat(kn.participantIdentity));je.emit(Wi.KS.ParticipantEncryptionStatusChanged,kn.enabled,sa)}break;case"ratchetKey":je.keyProvider.emit(Wi.fo.KeyRatcheted,kn.material,kn.keyIndex);break;case"e2eeStateChange":je.emit(Wi.KS.E2EEStateChange,kn);break;default:console.log("unknown message kind",xt)}},je.onWorkerError=function(xt){var zn;console.error("Worker encountered an error:",xt),console.error("Error message:",xt.message),console.error("Error filename:",xt.filename),console.error("Error line number:",xt.lineno),console.error("Error stack:",(zn=xt.error)===null||zn===void 0?void 0:zn.stack)},je.keyProvider=ce.keyProvider,je.worker=ce.worker,je.encryptionEnabled=!1,je}return(0,ha.A)(Y,ne),(0,k.A)(Y,[{key:"setup",value:function(ce){if(!(0,yo.Ag)())throw new ko("tried to setup end-to-end encryption on an unsupported browser");if(console.info("setting up e2ee"),ce!==this.room){this.room=ce,this.setupEventListeners(ce,this.keyProvider),this.handleE2EEManagerEvents();var je={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};console.log("msg",je),this.worker&&(console.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(je))}}},{key:"setParticipantCryptorEnabled",value:function(ce,je){console.debug("set e2ee to ".concat(ce," for participant ").concat(je)),this.postEnable(ce,je)}},{key:"setSifTrailer",value:function(ce){ce&&ce.length!==0?this.postSifTrailer(ce):console.warn("ignoring server sent trailer as it's empty")}},{key:"setupEventListeners",value:function(ce,je){var at=this;je.on(Wi.fo.SetKey,function(kt){console.log("### keyInfo",kt),at.postKey(kt)}).on(Wi.fo.RatchetRequest,function(kt,Lt){return at.postRatchetRequest(kt,Lt)})}},{key:"postRatchetRequest",value:function(ce,je){if(!this.worker)throw Error("could not ratchet key, worker is missing");var at={kind:"ratchetRequest",data:{participantIdentity:ce,keyIndex:je}};this.worker.postMessage(at)}},{key:"postKey",value:function(ce){var je=ce.key,at=ce.participantIdentity,kt=ce.keyIndex;if(!this.worker)throw Error("could not set key, worker is missing");var Lt={kind:"setKey",data:{participantIdentity:at,isPublisher:at===this.room._peerId,key:je,keyIndex:kt}};this.worker.postMessage(Lt)}},{key:"postEnable",value:function(ce,je){if(!this.worker)throw new ReferenceError("failed to enable e2ee, worker is not ready");var at={kind:"enable",data:{enabled:ce,participantIdentity:je}};this.worker.postMessage(at)}},{key:"postRTPMap",value:function(ce){var je;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((je=this.room)===null||je===void 0)&&je._peerId))throw TypeError("could not post rtp map, local participant identity is missing");var at={kind:"setRTPMap",data:{map:ce,participantIdentity:this.room._peerId}};this.worker.postMessage(at)}},{key:"postSifTrailer",value:function(ce){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");var je={kind:"setSifTrailer",data:{trailer:ce}};this.worker.postMessage(je)}},{key:"setupE2EEReceiver",value:function(ce,je){var at;this.handleReceiver(ce,ce.rtpReceiver,ce.track.id,je,this.extractCodec(ce.rtpParameters.codecs),sl((at=ce.appData)===null||at===void 0?void 0:at.share,ce.kind))}},{key:"setupE2EESender",value:function(ce){var je;ce?this.handleSender(ce.rtpSender,ce.track.id,this.extractCodec(ce.rtpParameters.codecs),sl((je=ce.appData)===null||je===void 0?void 0:je.share,ce.kind),this.room._peerId):console.error("Producer is required to setup E2EE sender")}},{key:"handleReceiver",value:(Q=(0,_.A)(g().mark(function ce(je,at,kt,Lt,xt,zn){var Gt,Gn,kn,sa,Jr,pa;return g().wrap(function(ia){for(;;)switch(ia.prev=ia.next){case 0:if(this.worker){ia.next=1;break}return ia.abrupt("return");case 1:if(!(0,yo.Wm)()){ia.next=2;break}Gt={kind:"decode",participantIdentity:Lt,trackId:je.track.id,codec:xt},at.transform=new RTCRtpScriptTransform(this.worker,Gt),ia.next=5;break;case 2:if(!(vo.$Q in at)||!xt){ia.next=3;break}return kn={kind:"updateCodec",data:{trackId:kt,codec:xt,participantIdentity:Lt}},this.worker.postMessage(kn),ia.abrupt("return");case 3:if(sa=at.writableStream,Jr=at.readableStream,sa&&Jr){ia.next=4;break}return console.error("no writable or readable stream"),ia.abrupt("return");case 4:pa={kind:"decode",data:{readableStream:Jr,writableStream:sa,trackId:kt,codec:xt,participantIdentity:Lt,mediaKind:zn,peerId:(Gn=je.appData)===null||Gn===void 0?void 0:Gn.peerId}},this.worker.postMessage(pa,[Jr,sa]);case 5:at[vo.$Q]=!0;case 6:case"end":return ia.stop()}},ce,this)})),function(ce,je,at,kt,Lt,xt){return Q.apply(this,arguments)})},{key:"handleSender",value:function(ce,je,at,kt,Lt){var xt;if(!(vo.$Q in ce)&&this.worker){if(!(!((xt=this.room)===null||xt===void 0)&&xt._peerId)||this.room._peerId==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if((0,yo.Wm)()){console.info("### initialize script transform");var zn={kind:"encode",participantIdentity:this.room._peerId,trackId:je,codec:at,mediaKind:kt,peerId:Lt};ce.transform=new RTCRtpScriptTransform(this.worker,zn)}else try{var Gt=ce.senderStreams;if(Gt){var Gn={kind:"encode",data:{readableStream:Gt.readable,writableStream:Gt.writable,codec:at,trackId:je,participantIdentity:this.room._peerId,mediaKind:kt,peerId:Lt}};this.worker.postMessage(Gn,[Gt.readable,Gt.writable])}else console.error("Error no sender streams found")}catch(kn){console.log("Error in handle sender ",kn)}ce[vo.$Q]=!0}else console.error("### sender already set up")}},{key:"handleE2EEManagerEvents",value:function(){var ce=this;this.on("NEW_CONSUMER",function(je){var at=je.consumer,kt=je.peerId;console.log("NEW_CONSUMER",at),ce.setupE2EEReceiver(at,kt)}),this.on("NEW_PRODUCER",function(je){ce.setupE2EESender(je)})}},{key:"extractCodec",value:function(ce){var je,at=Pl(ce);try{for(at.s();!(je=at.n()).done;){var kt=je.value,Lt=kt.mimeType.split("/")[1].toLowerCase();if(this.kind==="audio"){if(vo.Ts.includes(Lt)){kt=Lt;break}}else if(vo.ue.includes(Lt)){kt=Lt;break}}}catch(xt){at.e(xt)}finally{at.f()}return""}}]);var Q}(Qs.EventEmitter);function jc(){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,_.A)(g().mark(function ne(){var Y,Q,ce,je;return g().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.next=1,fetch("https://cdn.videosdk.live/e2ee/0.0.1/bundle.js");case 1:if((Y=at.sent).ok){at.next=2;break}throw new Error("Failed to load worker script: ".concat(Y.statusText));case 2:return at.next=3,Y.text();case 3:return Q=at.sent,ce=new Blob([Q],{type:"application/javascript"}),je=URL.createObjectURL(ce),at.abrupt("return",new Worker(je));case 4:case"end":return at.stop()}},ne)}))).apply(this,arguments)}var Co=u(9633);function cu(ne,Y){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(ne);Y&&(ce=ce.filter(function(je){return Object.getOwnPropertyDescriptor(ne,je).enumerable})),Q.push.apply(Q,ce)}return Q}function Oa(ne){for(var Y=1;Y<arguments.length;Y++){var Q=arguments[Y]!=null?arguments[Y]:{};Y%2?cu(Object(Q),!0).forEach(function(ce){(0,w.A)(ne,ce,Q[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):cu(Object(Q)).forEach(function(ce){Object.defineProperty(ne,ce,Object.getOwnPropertyDescriptor(Q,ce))})}return ne}function Wa(ne,Y){var Q=typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(!Q){if(Array.isArray(ne)||(Q=function(xt,zn){if(xt){if(typeof xt=="string")return Nl(xt,zn);var Gt={}.toString.call(xt).slice(8,-1);return Gt==="Object"&&xt.constructor&&(Gt=xt.constructor.name),Gt==="Map"||Gt==="Set"?Array.from(xt):Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt)?Nl(xt,zn):void 0}}(ne))||Y){Q&&(ne=Q);var ce=0,je=function(){};return{s:je,n:function(){return ce>=ne.length?{done:!0}:{done:!1,value:ne[ce++]}},e:function(xt){throw xt},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var at,kt=!0,Lt=!1;return{s:function(){Q=Q.call(ne)},n:function(){var xt=Q.next();return kt=xt.done,xt},e:function(xt){Lt=!0,at=xt},f:function(){try{kt||Q.return==null||Q.return()}finally{if(Lt)throw at}}}}function Nl(ne,Y){(Y==null||Y>ne.length)&&(Y=ne.length);for(var Q=0,ce=Array(Y);Q<Y;Q++)ce[Q]=ne[Q];return ce}function Dl(ne,Y){(function(Q,ce){if(ce.has(Q))throw new TypeError("Cannot initialize the same private elements twice on an object")})(ne,Y),Y.add(ne)}var gt,To={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},lr={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},Ic={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},Po=[{scalabilityMode:"S3T3_KEY"}],Ds=[{dtx:!0,maxFramerate:30}],fe=new xa("RoomClient"),Bn=new WeakSet,Vn=function(){return(0,k.A)(function ge(ee){var re,ae,ie=ee.roomId,le=ee.peerId,De=ee.secret,Le=ee.displayName,Ue=ee.device,Et=ee.handlerName,Nt=ee.useSimulcast,qt=ee.forceTcp,bn=ee.mode,Vt=ee.forceH264,hn=ee.forceVP9,xn=ee.svc,Pe=ee.datachannel,ft=ee.externalVideo,Ot=ee.micEnabled,mt=ee.webcamEnabled,Mt=ee.maxResolution,Ke=ee.useSpartialLayerAnalytics,It=ee._deviceInfo,dn=ee.customCameraVideoTrack,Yt=ee.customMicrophoneAudioTrack,gn=ee.autoConsume,an=ee.preferredProtocol,Cn=ee.signalingBaseUrl,mn=ee.metaData,Jt=ee.defaultCameraIndex,yr=ee.debugMode,ur=ee.keyProvider;switch((0,m.A)(this,ge),Dl(this,Bn),(0,w.A)(this,"e2eeManager",null),fe.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',ie,le,Le,Ue.flag),this.useSpartialLayerAnalytics=Ke||!1,this._deviceInfo=It,this._eventEmitter=new Qs.EventEmitter,this._closed=!1,this._displayName=Le,this._device=Ue,this._forceTcp=qt,this._preferredProtocol=an,bn){case Qa.nI.CONFERENCE:case Qa.nI.SEND_AND_RECV:re=!0,ae=!0;break;case Qa.nI.RECV_ONLY:re=!1,ae=!0;break;default:re=!1,ae=!1}if(this._mode=bn,this._produce=re,this._consume=ae,this._useDataChannel=Pe,this._forceH264=!!Vt,this._forceVP9=!!hn,this._micEnabled=!!Ot,this._webcamEnabled=!!mt,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,ft&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=ft,this._externalVideo.play().catch(function(Dt){return fe.warn("externalVideo.play() failed:%o",Dt)})),this._handlerName=Et,this._useSimulcast=Nt,this._socketUrl="",this._secret=De,this._peerId=le,this._roomId=ie,this._baseUrl="",this._webSocket=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:Mt||"hd"},this._pinnedParticipants=new Map,xn&&(Po[0].scalabilityMode="".concat(xn,"_KEY")),this.customCameraVideoTrack=dn,this.customMicrophoneAudioTrack=Yt,this._autoConsume=gn,this._iceServers=[],this._metrics=new go.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=Cn||"api.videosdk.live",this._metaData=mn,this._defaultCameraIndex=Jt,this._debugMode=!!yr,this._meetingConnectionState=null,this._sendTransportInternal=null,ur){if(!(ur instanceof Co.l))throw new Error("keyProvider should be an instance of ExternalE2EEKeyProvider");(function(Dt,An,Tr){if(typeof Dt=="function"?Dt===An:Dt.has(An))return arguments.length<3?An:Tr;throw new TypeError("Private element is not present on this object")})(Bn,this,hc).call(this,ur)}},[{key:"on",value:function(ge,ee){this._eventEmitter.on(ge,ee)}},{key:"softClose",value:function(){var ge,ee=(ge=this._openTelemetry)===null||ge===void 0?void 0:ge.trace({name:"softClose() Start "});try{var re,ae,ie;this._eventEmitter.emit("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING");var le,De=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"Consumer Cleanup",parentSpan:ee,attributes:{"videosdk.consumers.count":this._consumers.size||0}}),Le=Wa(this._consumers.values());try{for(Le.s();!(le=Le.n()).done;)le.value.close()}catch(Et){Le.e(Et)}finally{Le.f()}(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:De,status:1,message:"Closed ".concat(this._consumers.size," consumers successfully")}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ee,status:1,message:"Soft close completed successfully"})}catch(Et){var Ue;(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:ee,status:2,message:"Soft close failed: ".concat(Et.message)}),console.error(Et)}}},{key:"close",value:function(ge){var ee,re,ae,ie,le,De,Le,Ue=ge.sendLeft,Et=Ue===void 0||Ue;if(Et&&((De=this._openTelemetry)===null||De===void 0||De.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1}),(Le=this._videosdkLogs)===null||Le===void 0||Le.pushLogs({logText:"Meeting is in CLOSING State",logType:"INFO"})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._sendTransportInternal&&clearInterval(this._sendTransportInternal),this._sendTransportInternal=null,this._webSocket.close(),this._metrics.running&&this._metrics.stopAllProbes(),fe.debug("close()");var Nt=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:Nt,status:1,message:"Closed Trasnport"}),gt.dispatch(Dn("closed")),Et&&this.emitMeetingStateChange(Vi),(ae=this._openTelemetry)===null||ae===void 0||ae.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Meeting is in CLOSED State",logType:"INFO"}),Et&&this._eventEmitter.emit("MEETING_LEFT"),(le=this._openTelemetry)===null||le===void 0||le.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(Ll=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe=this;return g().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.prev=0,ft.next=1,ii({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 1:ie=ft.sent,le=ie.baseUrl,De=ie.iceServers,Le=ie.logs,Ue=ie.observabilityJwt,Et=ie.traces,Nt=ie.metaData,qt=ie.signalingUrl,bn=ie.socketPath,Vt=ie.socketUrl,this._baseUrl=le,this._socketUrl="wss://".concat(Vt||this._baseUrl,"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode,"&lib=socket"),this._iceServers=De,this._tracesEnabled=Et.enabled,this._openTelemetry=new Go((0,w.A)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:Et,logs:Le,observabilityJwt:Ue,metaData:Nt},"traces",Et)),this._joinSpan=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:qt||"signalingUrl not specify"}}),this._webSocket=Fr(this._socketUrl,{transports:["websocket"],reconnectionAttempts:10,reconnectionDelay:5e3,reconnection:!0,path:"".concat(bn??"","/socket.io")}),this.emitMeetingStateChange(qa),gt.dispatch(Dn("connecting")),(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Meeting is in CONNECTING State",logType:"INFO"}),this._webSocket.on("connect",function(){}),this._webSocket.on("connectionSuccess",function(){var Ot,mt;Pe._isWebsocketAlive=!0,Pe._closed=!1,Pe._mode===(Qa.nI.RECV_ONLY||Qa.nI.SIGNALLING_ONLY)&&Pe.emitMeetingStateChange(Xs),(Ot=Pe._openTelemetry)===null||Ot===void 0||Ot.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:Pe._joinSpan,status:1}),(mt=Pe._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:"Meeting is in CONNECTED State",logType:"INFO"}),Pe.requestEntry()}),this._webSocket.on("disconnect",function(Ot){var mt,Mt,Ke,It,dn;(mt=Pe._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:"Meeting is in Websocket Disconnect State",logType:"INFO",attributes:{reason:Ot},dashboardLog:!0}),(Ot==="transport close"||Ot==="transport error")&&(Pe.customMicrophoneAudioTrack&&((Mt=Pe.customMicrophoneAudioTrack)===null||Mt===void 0||Mt.getTracks().forEach(function(Yt){Yt.stop()}),Pe.customMicrophoneAudioTrack=null),Pe.customCameraVideoTrack&&((Ke=Pe.customCameraVideoTrack)===null||Ke===void 0||Ke.getTracks().forEach(function(Yt){Yt.stop()}),Pe.customCameraVideoTrack=null),Pe._sendTransport&&((It=Pe._sendTransport)===null||It===void 0||It.close(),Pe._sendTransport=null),Pe._recvTransport&&((dn=Pe._recvTransport)===null||dn===void 0||dn.close(),Pe._recvTransport=null))}),this._webSocket.io.on("reconnect_failed",function(){Pe._closed||Pe.close({sendLeft:!0})}),this._webSocket.on("connect_error",function(Ot){var mt,Mt,Ke,It,dn,Yt;Pe._webSocket.active&&Pe._webSocket.io._reconnecting?((mt=Pe._openTelemetry)===null||mt===void 0||mt.traceAutoComplete({spanName:"Meeting is in RECONNECTING State",span:Pe._joinSpan,status:1}),(Mt=Pe._videosdkLogs)===null||Mt===void 0||Mt.pushLogs({logText:"Meeting is in RECONNECTING State",logType:"INFO",attributes:{error:Ot.message}}),gt.dispatch(tr({type:"error",text:"WebSocket Reconnecting"})),Pe.emitMeetingStateChange(Zo),Pe._sendTransport&&((dn=Pe._sendTransport)===null||dn===void 0||dn.close(),Pe._sendTransport=null),Pe._recvTransport&&((Yt=Pe._recvTransport)===null||Yt===void 0||Yt.close(),Pe._recvTransport=null),(Ke=Pe.customMicrophoneAudioTrack)===null||Ke===void 0||Ke.getTracks().forEach(function(gn){gn.stop()}),Pe.customMicrophoneAudioTrack=null,(It=Pe.customCameraVideoTrack)===null||It===void 0||It.getTracks().forEach(function(gn){gn.stop()}),Pe.customCameraVideoTrack=null):console.log("Error while trying to reconnect",Ot.message)}),this._webSocket.on("close",function(){console.log("MEETING close"),Pe._closed||Pe.close({sendLeft:!0})}),this._webSocket.on("newConsumer",function(){var Ot=(0,_.A)(g().mark(function mt(Mt,Ke){var It,dn,Yt,gn,an,Cn,mn,Jt,yr,ur,Dt,An,Tr,ta,oa,ja,Fa,Gr,G,K,X,de,Ee,xe,we,We,ke;return g().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(Yt=(It=Pe._openTelemetry)===null||It===void 0?void 0:It.trace({spanName:"Websocket REQ: newConsumer",attributes:{request:JSON.stringify(Mt)}}),Pe._consume){Oe.next=1;break}return Ke({errorCode:403,message:"I do not want to consume",method:"newConsumer"}),(gn=Pe._openTelemetry)===null||gn===void 0||gn.completeSpan({span:Yt,status:2,message:"I do not want to consume"}),Oe.abrupt("return");case 1:return an=Mt.peerId,Cn=Mt.producerId,mn=Mt.id,Jt=Mt.kind,yr=Mt.rtpParameters,ur=Mt.type,Dt=Mt.appData,An=Mt.producerPaused,Tr=(dn=Pe._openTelemetry)===null||dn===void 0?void 0:dn.trace({spanName:"Creating Consumer",span:Yt}),Oe.prev=2,Oe.next=3,Pe._recvTransport.consume({id:mn,producerId:Cn,kind:Jt,rtpParameters:yr,appData:Oa(Oa({},Dt),{},{peerId:an}),onRtpReceiver:function(Xe){if(Pe.e2eeManager){var $e=Xe.writableStream,Ae=Xe.readableStream;if(!$e||!Ae){var tt=Xe.createEncodedStreams();Xe.writableStream=tt.writable,$e=tt.writable,Xe.readableStream=tt.readable,Ae=tt.readable}}}});case 3:Gr=Oe.sent,G=Mr.s$(Gr.rtpParameters.encodings[0].scalabilityMode),K=G.spatialLayers,X=G.temporalLayers,Gr.spatialLayers=K,Gr.temporalLayers=X,Gr.currentSpatialLayers=K-1,Gr.currentTemporalLayers=X-1,Pe._consumers.set(Gr.id,Gr),Gr.on("transportclose",function(){Pe._consumers.delete(Gr.id);var Xe=ao(Gr.id,an);gt.dispatch(Xe),Pe._eventEmitter.emit(Xe.type,Xe.payload)}),(ta=Pe._openTelemetry)===null||ta===void 0||ta.completeSpan({span:Tr,status:1,message:"Consumer Created"}),Tr=(oa=Pe._openTelemetry)===null||oa===void 0?void 0:oa.trace({spanName:"Sending Stream Enabled Event",span:Yt}),de=Hi({id:Gr.id,type:ur,locallyPaused:!1,remotelyPaused:An,rtpParameters:Gr.rtpParameters,spatialLayers:K,temporalLayers:X,currentSpatialLayer:K-1,currentTemporalLayer:X-1,preferredSpatialLayer:K-1,preferredTemporalLayer:X-1,priority:1,codec:Gr.rtpParameters.codecs[0].mimeType.split("/")[1],track:Gr.track,appData:Dt,instance:Gr},an),gt.dispatch(de),Pe._eventEmitter.emit(de.type,de.payload),Ke(),Gr.kind==="video"&&gt.getState().me.audioOnly&&Pe._pauseConsumer(Gr),(ja=Pe._openTelemetry)===null||ja===void 0||ja.completeSpan({span:Tr,status:1,message:"Event Send Successfully"}),(Fa=Pe._openTelemetry)===null||Fa===void 0||Fa.completeSpan({span:Yt,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":Gr.id}}),Gr.kind=="video"&&Gr.appData.share&&((Ee=Pe._openTelemetry)===null||Ee===void 0||Ee.traceAutoComplete({spanName:"Presenter Changed",span:Yt,attributes:{"peer.id":an}})),Pe.e2eeManager&&Pe.e2eeManager.emit("NEW_CONSUMER",{consumer:Gr,peerId:Pe._peerId}),Oe.next=5;break;case 4:throw Oe.prev=4,ke=Oe.catch(2),(xe=Pe._openTelemetry)===null||xe===void 0||xe.completeSpan({span:Tr,status:2,message:"Error creating a Consumer: ".concat(ke)}),(we=Pe._openTelemetry)===null||we===void 0||we.completeSpan({span:Yt,status:2,message:"Error creating a Consumer: ".concat(ke)}),gt.dispatch(tr({type:"error",text:"Error creating a Consumer: ".concat(ke)})),(We=Pe._videosdkLogs)===null||We===void 0||We.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:ke.message}}),ke;case 5:case"end":return Oe.stop()}},mt,null,[[2,4]])}));return function(mt,Mt){return Ot.apply(this,arguments)}}()),this._webSocket.on("newDataConsumer",function(){var Ot=(0,_.A)(g().mark(function mt(Mt,Ke){var It,dn,Yt,gn,an,Cn,mn,Jt,yr;return g().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(Pe._consume){ur.next=1;break}return Ke({errorCode:403,message:"I do not want to data consume",method:"newConsumer"}),ur.abrupt("return");case 1:if(Pe._useDataChannel){ur.next=2;break}return Ke({errorCode:403,message:"I do not want DataChannels",method:"newConsumer"}),ur.abrupt("return");case 2:return It=Mt.peerId,dn=Mt.dataProducerId,Yt=Mt.id,gn=Mt.sctpStreamParameters,an=Mt.label,Cn=Mt.protocol,mn=Mt.appData,ur.prev=3,ur.next=4,Pe._recvTransport.consumeData({id:Yt,dataProducerId:dn,sctpStreamParameters:gn,label:an,protocol:Cn,appData:Oa(Oa({},mn),{},{peerId:It})});case 4:Jt=ur.sent,Pe._dataConsumers.set(Jt.id,Jt),Jt.on("transportclose",function(){Pe._dataConsumers.delete(Jt.id)}),Jt.on("open",function(){fe.debug('DataConsumer "open" event')}),Jt.on("close",function(){fe.warn('DataConsumer "close" event'),Pe._dataConsumers.delete(Jt.id),gt.dispatch(tr({type:"error",text:"DataConsumer closed"}))}),Jt.on("error",function(Dt){fe.error('DataConsumer "error" event:%o',Dt),gt.dispatch(tr({type:"error",text:"DataConsumer error: ".concat(Dt)}))}),Jt.on("message",function(Dt){if(fe.debug('DataConsumer "message" event [streamId:%d]',Jt.sctpStreamParameters.streamId),Dt instanceof ArrayBuffer){var An=new DataView(Dt).getUint32();return An==Math.pow(2,32)-1?(fe.warn("dataChannelTest finished!"),void(Pe._nextDataChannelTestNumber=0)):(An>Pe._nextDataChannelTestNumber&&fe.warn("dataChannelTest: %s packets missing",An-Pe._nextDataChannelTestNumber),void(Pe._nextDataChannelTestNumber=An+1))}if(typeof Dt=="string")switch(Jt.label){case"chat":var Tr=gt.getState().peers,ta=Object.keys(Tr).map(function(oa){return Tr[oa]}).find(function(oa){return oa.dataConsumers.includes(Jt.id)});if(!ta){fe.warn('DataConsumer "message" from unknown peer');break}gt.dispatch(tr({title:"".concat(ta.displayName," says:"),text:Dt,timeout:5e3})),Pe._eventEmitter.emit("CHAT_MESSAGE",{text:Dt,senderId:ta.id,timestamp:new Date().getTime()});break;case"bot":gt.dispatch(tr({title:"Message from Bot:",text:Dt,timeout:5e3}))}else fe.warn('ignoring DataConsumer "message" (not a string)')}),gt.dispatch(da({id:Jt.id,sctpStreamParameters:Jt.sctpStreamParameters,label:Jt.label,protocol:Jt.protocol},It)),Ke(),ur.next=6;break;case 5:ur.prev=5,yr=ur.catch(3),fe.error('"newDataConsumer" request failed:%o',yr),gt.dispatch(tr({type:"error",text:"Error creating a DataConsumer: ".concat(yr)}));case 6:case"end":return ur.stop()}},mt,null,[[3,5]])}));return function(mt,Mt){return Ot.apply(this,arguments)}}()),this._webSocket.on("enableMic",function(){var Ot=(0,_.A)(g().mark(function mt(Mt,Ke){var It,dn,Yt;return g().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:try{dn=Mt.peerId,(It=Pe._openTelemetry)===null||It===void 0||It.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Websocket REQ: enableMic for ".concat(dn),status:1}),Pe._eventEmitter.emit("MIC_REQUESTED",{peerId:dn}),Ke()}catch(an){fe.error('"enableMic" request failed:%o',an),(Yt=Pe._videosdkLogs)===null||Yt===void 0||Yt.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:an.message}}),Pe._emitError({code:3027,message:an.message})}case 1:case"end":return gn.stop()}},mt)}));return function(mt,Mt){return Ot.apply(this,arguments)}}()),this._webSocket.on("disableMic",function(){var Ot=(0,_.A)(g().mark(function mt(Mt,Ke){var It,dn,Yt,gn,an,Cn;return g().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return mn.prev=0,It=(dn=Pe._openTelemetry)===null||dn===void 0?void 0:dn.trace({spanName:"Websocket REQ: disableMic"}),mn.next=1,Pe.disableMic(!1,It);case 1:(Yt=Pe._openTelemetry)===null||Yt===void 0||Yt.completeSpan({span:It,status:1,message:"Request Completed"}),Ke(),mn.next=3;break;case 2:mn.prev=2,Cn=mn.catch(0),(gn=Pe._openTelemetry)===null||gn===void 0||gn.completeSpan({span:It,status:2,message:"disableMic request failed ".concat(Cn)}),(an=Pe._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:Cn.message}}),Pe._emitError({code:3028,message:Cn.message});case 3:case"end":return mn.stop()}},mt,null,[[0,2]])}));return function(mt,Mt){return Ot.apply(this,arguments)}}()),this._webSocket.on("enableWebcam",function(){var Ot=(0,_.A)(g().mark(function mt(Mt,Ke){var It,dn,Yt;return g().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:try{dn=Mt.peerId,(It=Pe._openTelemetry)===null||It===void 0||It.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Websocket REQ: enableWebcam for ".concat(dn),status:1}),Pe._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:dn}),Ke()}catch(an){fe.error('"enableWebcam" request failed:%o',an),(Yt=Pe._videosdkLogs)===null||Yt===void 0||Yt.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:an.message}}),Pe._emitError({code:3029,message:an.message})}case 1:case"end":return gn.stop()}},mt)}));return function(mt,Mt){return Ot.apply(this,arguments)}}()),this._webSocket.on("disableWebcam",function(){var Ot=(0,_.A)(g().mark(function mt(Mt,Ke){var It,dn,Yt,gn,an,Cn;return g().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return mn.prev=0,It=(dn=Pe._openTelemetry)===null||dn===void 0?void 0:dn.trace({spanName:"Websocket REQ: disableWebcam"}),mn.next=1,Pe.disableWebcam(It);case 1:(Yt=Pe._openTelemetry)===null||Yt===void 0||Yt.completeSpan({span:It,status:1,message:"Request Completed"}),Ke(),mn.next=3;break;case 2:mn.prev=2,Cn=mn.catch(0),(gn=Pe._openTelemetry)===null||gn===void 0||gn.completeSpan({span:It,status:2,message:"disableWebcam request failed ".concat(Cn)}),(an=Pe._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:Cn.message}}),Pe._emitError({code:3030,message:Cn.message});case 3:case"end":return mn.stop()}},mt,null,[[0,2]])}));return function(mt,Mt){return Ot.apply(this,arguments)}}()),this._webSocket.on("pinStateChanged",function(){var Ot=(0,_.A)(g().mark(function mt(Mt,Ke){var It,dn,Yt,gn,an,Cn,mn,Jt,yr,ur;return g().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:Dt.prev=0,gn=Mt.peerId,an=Mt.state,Cn=Mt.pinnedBy,It=(dn=Pe._openTelemetry)===null||dn===void 0?void 0:dn.trace({spanName:"Websocket REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:gn,state:an,pinnedBy:Cn})}}),Pe._pinnedParticipants.has(gn)||Pe._pinnedParticipants.set(gn,{cam:!1,share:!1}),mn=Pe._pinnedParticipants.get(gn),an.cam!=null&&(mn.cam=an.cam),an.share!=null&&(mn.share=an.share),Pe._pinnedParticipants.set(gn,mn),Pe._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:gn,state:an,pinnedBy:Cn}),mn.share==0&&mn.cam==0&&Pe._pinnedParticipants.delete(gn),(Yt=Pe._openTelemetry)===null||Yt===void 0||Yt.completeSpan({span:It,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(Pe._pinnedParticipants)}}),Ke(),Dt.next=2;break;case 1:throw Dt.prev=1,ur=Dt.catch(0),(Jt=Pe._openTelemetry)===null||Jt===void 0||Jt.completeSpan({span:It,status:2,message:"pinStateChanged request failed"}),(yr=Pe._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:ur.message}}),ur;case 2:case"end":return Dt.stop()}},mt,null,[[0,1]])}));return function(mt,Mt){return Ot.apply(this,arguments)}}()),this._webSocket.on("switchRoom",function(){var Ot=(0,_.A)(g().mark(function mt(Mt,Ke){return g().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:Pe._eventEmitter.emit("SWITCH_ROOM",Mt),Ke();case 1:case"end":return It.stop()}},mt)}));return function(mt,Mt){return Ot.apply(this,arguments)}}()),this._webSocket.on("statsData",function(){var Ot=(0,_.A)(g().mark(function mt(Mt,Ke){return g().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:Ke({peerId:Pe._peerId,statsData:Pe._stats}),Pe._stats={};case 1:case"end":return It.stop()}},mt)}));return function(mt,Mt){return Ot.apply(this,arguments)}}()),this._webSocket.on("notification",function(){var Ot=(0,_.A)(g().mark(function mt(Mt){var Ke,It,dn,Yt,gn,an,Cn,mn,Jt,yr,ur,Dt,An,Tr,ta,oa,ja,Fa,Gr,G,K,X,de,Ee,xe,we,We,ke,Oe,Xe,$e,Ae,tt,ue,pe,Ie,qe,nt,tn,_t,Pt,Mn,ct,Fe,bt,wn,cn,vn,or,Lr,Tn,yn,Pr,br,ar,Wn,Rn,qr,wa,Ws,Li,lu,bd,Hu,Il,xd,wd,xh,Sd,wh,Sh,Vu,Rh,Rd,qu,Ed,kd,Zp,Cd,Eh,kh,Td,Ch,Th,Gp,Yp,Ph,uu,Pd,wr;return g().wrap(function(Qn){for(;;)switch(Qn.prev=Qn.next){case 0:Ke=Mt,fe.debug('proto "notification" event [method:%s, data:%o]',Mt.method,Ke),wr=Mt.method,Qn.next=wr==="error"?1:wr==="participantMediaStateChanged"?2:wr==="producerScore"?3:wr==="entryRequested"?4:wr==="entryResponded"?5:wr==="newPeer"?8:wr==="peerClosed"?9:wr==="peerDisplayNameChanged"?10:wr==="consumerClosed"?11:wr==="consumerPaused"?13:wr==="consumerResumed"?15:wr==="consumerLayersChanged"?17:wr==="consumerScore"?19:wr==="dataConsumerClosed"?20:wr==="activeSpeaker"?22:wr==="consumerResumedSubManager"?23:wr==="consumerPausedSubManager"?24:wr==="transcriptionStateChanged"?25:wr==="transcriptionText"?26:wr==="recordingStateChanged"?27:wr==="recordingStarted"?28:wr==="recordingStopped"?29:wr==="livestreamStateChanged"?30:wr==="livestreamStarted"?31:wr==="livestreamStopped"?32:wr==="hlsStateChanged"?33:wr==="hlsPlayableStateChanged"?34:wr==="hlsStarted"?35:wr==="hlsStopped"?36:wr==="whiteboardStarted"?37:wr==="whiteboardStopped"?38:wr==="addCharacter"?39:wr==="removeCharacter"?40:wr==="characterStateChanged"?41:wr==="characterMessage"?42:wr==="userMessage"?43:wr==="characterData"?44:wr==="characterError"?45:wr==="videoStatusChanged"?46:wr==="videoSeeked"?47:wr==="connectionOpen"?48:wr==="connectionClose"?49:wr==="connectionChatMessage"?50:wr==="connectionParticipantJoined"?51:wr==="connectionParticipantLeft"?52:wr==="pubsubMessage"?53:wr==="peerModeChanged"?54:wr==="restartIce"?55:wr==="mediaRelayStarted"?56:wr==="mediaRelayStopped"?57:wr==="mediaRelayError"?58:wr==="mediaRelayRequestResponse"?59:wr==="mediaRelayRequestReceived"?60:61;break;case 1:return Yt=Ke,Pe._eventEmitter.emit("ERROR",Yt),(It=Pe._videosdkLogs)===null||It===void 0||It.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:Yt.message}}),(dn=Pe._openTelemetry)===null||dn===void 0||dn.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:Yt.message},status:2}),Qn.abrupt("continue",62);case 2:try{gn=Ke.peerId,an=Ke.kind,Cn=Ke.newState,Pe._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:gn,kind:an,newState:Cn}),an=="video"&&((mn=Pe._openTelemetry)===null||mn===void 0||mn.traceAutoComplete({spanName:"".concat(gn," has ").concat(Cn?"enable":"disable"," ").concat(an),status:1}))}catch(du){fe.error('"newProducer" request failed:%o',du),(Jt=Pe._videosdkLogs)===null||Jt===void 0||Jt.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:du.message}})}case 3:return yr=Ke.producerId,ur=Ke.score,gt.dispatch(Ps(yr,ur)),Qn.abrupt("continue",62);case 4:return An=Ke.id,Tr=Ke.name,ta=(Dt=Pe._openTelemetry)===null||Dt===void 0?void 0:Dt.trace({spanName:"Websocket Noti: entryRequested",span:Pe._joinSpan,attributes:{data:JSON.stringify({id:An,name:Tr})}}),An!==Pe._peerId?(Pe._eventEmitter.emit("ENTRY_REQUESTED",{id:An,name:Tr}),(oa=Pe._openTelemetry)===null||oa===void 0||oa.completeSpan({span:ta,status:1,message:"EntryResponded Recieved"})):(ja=Pe._openTelemetry)===null||ja===void 0||ja.completeSpan({span:ta,status:2,message:"Entry Request Failed"}),Qn.abrupt("continue",62);case 5:if(G=Ke.id,K=Ke.decision,X=Ke.sessionId,de=Ke.switchingRoomId,Ee=(Fa=Pe._openTelemetry)===null||Fa===void 0?void 0:Fa.trace({name:"Entry Response Handling",attributes:{"peer.id":G,"entry.decision":K,switching_room:!!de}}),G===Pe._peerId&&K==="allowed"){Qn.next=6;break}return(xe=Pe._openTelemetry)===null||xe===void 0||xe.completeSpan({span:Pe._joinSpan,status:2,message:"Join Request Denied"}),(we=Pe._openTelemetry)===null||we===void 0||we.completeSpan({span:Ee,status:2,message:"Entry denied for peer"}),Qn.abrupt("continue",62);case 6:if(Pe._eventEmitter.emit("ENTRY_RESPONDED",{id:G,decision:K}),!de){Qn.next=7;break}return(We=Pe._openTelemetry)===null||We===void 0||We.completeSpan({span:Ee,status:1,message:"Switching room initiated"}),Pe.softClose(),Pe.switchingRoom(de),Qn.abrupt("continue",62);case 7:return Pe._videosdkLogs=new fn({roomId:Pe._roomId,peerId:Pe._peerId,logs:Le,observabilityJwt:Ue,deviceInfo:Pe._deviceInfo,sessionId:X,debugMode:Pe._debugMode}),Pe.joinRoom(),(Gr=Pe._openTelemetry)===null||Gr===void 0||Gr.completeSpan({span:Ee,status:1,message:"Entry response handled successfully"}),Qn.abrupt("continue",62);case 8:Oe=Ns(Oa(Oa({},ke=Ke),{},{consumers:[],dataConsumers:[]})),gt.dispatch(Oe),Pe._eventEmitter.emit(Oe.type,Oe.payload),gt.dispatch(tr({text:"".concat(ke.displayName," has joined the room")}));try{(Xe=Pe._openTelemetry)===null||Xe===void 0||Xe.traceAutoComplete({spanName:"Websocket Noti: newPeer ".concat(ke.displayName),attributes:{peerData:JSON.stringify(ke)}})}catch(du){($e=Pe._videosdkLogs)===null||$e===void 0||$e.pushLogs({logText:"Error Websocket Noti: newPeer",logType:"ERROR",attributes:{error:du.message}}),console.error(du)}return Qn.abrupt("continue",62);case 9:return tt=Ke.peerId,ue=Eo(tt),gt.dispatch(ue),Pe._eventEmitter.emit(ue.type,ue.payload),(Ae=Pe._openTelemetry)===null||Ae===void 0||Ae.traceAutoComplete({spanName:"Websocket Noti: peerClosed for ".concat(tt)}),Qn.abrupt("continue",62);case 10:return pe=Ke.peerId,Ie=Ke.displayName,qe=Ke.oldDisplayName,gt.dispatch(mo(Ie,pe)),gt.dispatch(tr({text:"".concat(qe," is now ").concat(Ie)})),Qn.abrupt("continue",62);case 11:if(tn=Ke.consumerId,_t=Pe._consumers.get(tn)){Qn.next=12;break}return Qn.abrupt("continue",62);case 12:return _t.close(),Pe._consumers.delete(tn),Pt=_t.appData.peerId,Mn=ao(tn,Pt),Pe._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"ended",peerId:Pt,streamId:_t._track.id}),gt.dispatch(Mn),Pe._eventEmitter.emit(Mn.type,Mn.payload),(nt=Pe._openTelemetry)===null||nt===void 0||nt.traceAutoComplete({spanName:"Websocket Noti: consumerClosed for id ".concat(tn),attributes:{consumerData:JSON.stringify(_t)}}),Qn.abrupt("continue",62);case 13:if(ct=Ke.consumerId,Fe=Pe._consumers.get(ct)){Qn.next=14;break}return Qn.abrupt("continue",62);case 14:return Fe.pause(),gt.dispatch(Ni(ct,"remote")),Pe._eventEmitter.emit("CONSUMER_PAUSED",{consumerId:ct,peerId:Fe.appData.peerId}),Qn.abrupt("continue",62);case 15:if(bt=Ke.consumerId,wn=Pe._consumers.get(bt),Pe._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"active",peerId:wn.appData.peerId,streamId:wn._track.id}),wn){Qn.next=16;break}return Qn.abrupt("continue",62);case 16:return wn.resume(),gt.dispatch(_i(bt,"remote")),Pe._eventEmitter.emit("CONSUMER_RESUMED",{consumerId:bt,peerId:wn.appData.peerId}),Qn.abrupt("continue",62);case 17:if(vn=Ke.consumerId,or=Ke.spatialLayer,Lr=Ke.temporalLayer,(Tn=Pe._consumers.get(vn)).currentSpatialLayer=or,Tn.currentTemporalLayer=Lr,Tn){Qn.next=18;break}return Qn.abrupt("continue",62);case 18:return((cn=Tn.appData)===null||cn===void 0||(cn=cn.encodings)===null||cn===void 0?void 0:cn.length)>1&&Pe._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Tn.appData.peerId,prevQuality:Tn.spatialLayers-1-Tn.currentSpatialLayer==0?"HIGH":Tn.spatialLayers-1-Tn.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:Tn.spatialLayers-1-or==0?"HIGH":Tn.spatialLayers-1-or==1?"MEDIUM":"LOW"}),Tn.currentSpatialLayer=or,Tn.currentTemporalLayer=Lr,gt.dispatch(Di(vn,or,Lr)),Qn.abrupt("continue",62);case 19:return yn=Ke.consumerId,Pr=Ke.score,gt.dispatch(Hs(yn,Pr)),Qn.abrupt("continue",62);case 20:if(br=Ke.dataConsumerId,ar=Pe._dataConsumers.get(br)){Qn.next=21;break}return Qn.abrupt("continue",62);case 21:return ar.close(),Pe._dataConsumers.delete(br),Wn=ar.appData.peerId,gt.dispatch(oi(br,Wn)),Qn.abrupt("continue",62);case 22:return Rn=Ke.peerId,qr=Hn(Rn),gt.dispatch(qr),Pe._eventEmitter.emit(qr.type,qr.payload),Qn.abrupt("continue",62);case 23:return Pe._eventEmitter.emit("SUB_MANAGER_RESUMED",Ke),Qn.abrupt("continue",62);case 24:return Pe._eventEmitter.emit("SUB_MANAGER_PAUSED",Ke),Qn.abrupt("continue",62);case 25:return Pe._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",Ke),(wa=Pe._openTelemetry)===null||wa===void 0||wa.traceAutoComplete({spanName:"Emitted TRANSCRIPTION_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 26:return Pe._eventEmitter.emit("TRANSCRIPTION_TEXT",Ke),Qn.abrupt("continue",62);case 27:return Pe._eventEmitter.emit("RECORDING_STATE_CHANGED",Ke),(Ws=Pe._openTelemetry)===null||Ws===void 0||Ws.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 28:return Pe._eventEmitter.emit("RECORDING_STARTED",{}),Qn.abrupt("continue",62);case 29:return Pe._eventEmitter.emit("RECORDING_STOPPED",{}),Qn.abrupt("continue",62);case 30:return Pe._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",Ke),(Li=Pe._openTelemetry)===null||Li===void 0||Li.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 31:return Pe._eventEmitter.emit("LIVESTREAM_STARTED",{}),Qn.abrupt("continue",62);case 32:return Pe._eventEmitter.emit("LIVESTREAM_STOPPED",{}),Qn.abrupt("continue",62);case 33:return Pe._eventEmitter.emit("HLS_STATE_CHANGED",Ke),(lu=Pe._openTelemetry)===null||lu===void 0||lu.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 34:return Ke.isPlayable&&(Pe._eventEmitter.emit("HLS_STATE_CHANGED",Oa(Oa({},Ke),{},{status:Oc.V.HLS_PLAYABLE})),(bd=Pe._openTelemetry)===null||bd===void 0||bd.traceAutoComplete({spanName:"Websocket Noti: hlsPlayableStateChanged",status:1})),Qn.abrupt("continue",62);case 35:return Hu=Ke.downstreamUrl,Pe._eventEmitter.emit("HLS_STARTED",Hu),Qn.abrupt("continue",62);case 36:return Pe._eventEmitter.emit("HLS_STOPPED",{}),Qn.abrupt("continue",62);case 37:return Il=Ke.state,xd=Ke.url,Il?Pe._eventEmitter.emit("WHITEBOARD_STARTED",{state:Il}):xd&&Pe._eventEmitter.emit("WHITEBOARD_STARTED",{url:xd}),Qn.abrupt("continue",62);case 38:return Pe._eventEmitter.emit("WHITEBOARD_STOPPED",{}),Qn.abrupt("continue",62);case 39:return xh=Ns(Oa(Oa({},Ke),{},{consumers:[],dataConsumers:[]})),gt.dispatch(xh),Pe._eventEmitter.emit("ADD_CHARACTER",Ke),(wd=Pe._openTelemetry)===null||wd===void 0||wd.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(Ke),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 40:return wh=Ke.id,Sh=Eo(wh),gt.dispatch(Sh),Pe._eventEmitter.emit("REMOVE_CHARACTER",Ke),(Sd=Pe._openTelemetry)===null||Sd===void 0||Sd.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(Ke),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 41:return Pe._eventEmitter.emit("CHARACTER_STATE_CHANGED",Ke),(Vu=Pe._openTelemetry)===null||Vu===void 0||Vu.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 42:return Pe._eventEmitter.emit("CHARACTER_MESSAGE",Ke),Qn.abrupt("continue",62);case 43:return Pe._eventEmitter.emit("USER_MESSAGE",Ke),Qn.abrupt("continue",62);case 44:return Pe._eventEmitter.emit("CHARACTER_DATA",Ke),Qn.abrupt("continue",62);case 45:return Pe._eventEmitter.emit("CHARACTER_ERROR",Ke),Qn.abrupt("continue",62);case 46:return Pe._eventEmitter.emit("VIDEO_STATE_CHANGED",Ke),Qn.abrupt("continue",62);case 47:return Rh=Ke.currentTime,Pe._eventEmitter.emit("VIDEO_SEEKED",{currentTime:Rh}),Qn.abrupt("continue",62);case 48:return Pe._eventEmitter.emit("CONNECTION_OPEN",Ke),Qn.abrupt("continue",62);case 49:return Pe._eventEmitter.emit("CONNECTION_CLOSE",Ke),Qn.abrupt("continue",62);case 50:return Pe._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",Ke),Qn.abrupt("continue",62);case 51:return Pe._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",Ke),Qn.abrupt("continue",62);case 52:return Pe._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",Ke),Qn.abrupt("continue",62);case 53:return Pe._eventEmitter.emit("PUBSUB_MESSAGE",Ke),Qn.abrupt("continue",62);case 54:return Pe._eventEmitter.emit("PEER_MODE_CHANGED",Ke),(Rd=Pe._openTelemetry)===null||Rd===void 0||Rd.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(Ke)},status:1}),Qn.abrupt("continue",62);case 55:return Ed=Ke.transportId,kd=Ke.iceParameters,Zp=(qu=Pe._openTelemetry)===null||qu===void 0?void 0:qu.trace({spanName:"Websocket Noti: restartIce for transportId :".concat(Ed),attributes:{iceParameters:JSON.stringify(kd)}}),Pe.handleRemoteRestartIce({transportId:Ed,iceParameters:kd,internalSpan:Zp}),Qn.abrupt("continue",62);case 56:return Cd=Mt.meetingId,Pe._eventEmitter.emit("MEDIA_RELAY_STARTED",{meetingId:Cd}),Qn.abrupt("continue",62);case 57:return Eh=Mt.meetingId,kh=Mt.reason,Pe._eventEmitter.emit("MEDIA_RELAY_STOPPED",{meetingId:Eh,reason:kh}),Qn.abrupt("continue",62);case 58:return Td=Mt.meetingId,Ch=Mt.reason,Pe._eventEmitter.emit("MEDIA_RELAY_ERROR",{meetingId:Td,reason:Ch}),Qn.abrupt("continue",62);case 59:return Th=Mt.decision,Gp=Mt.decidedBy,Yp=Mt.meetingId,Pe._eventEmitter.emit("MEDIA_RELAY_REQUEST_RESPONSE",{decision:Th,decidedBy:Gp,meetingId:Yp}),Qn.abrupt("continue",62);case 60:return Ph=Mt.peerId,uu=Mt.meetingId,Pd=Mt.displayName,Pe._eventEmitter.emit("MEDIA_RELAY_REQUEST_RECEIVED",{peerId:Ph,meetingId:uu,displayName:Pd}),Qn.abrupt("continue",62);case 61:fe.error('unknown Websocket notification.method "%s"',Mt.method);case 62:case"end":return Qn.stop()}},mt)}));return function(mt){return Ot.apply(this,arguments)}}()),ft.next=3;break;case 2:ft.prev=2,xn=ft.catch(0),(hn=this._videosdkLogs)===null||hn===void 0||hn.pushLogs({logText:"Error initializing the meeting :: ".concat(xn),logType:"ERROR",attributes:{error:xn}}),this.emitMeetingStateChange(ms);case 3:case"end":return ft.stop()}},ge,this,[[0,2]])})),function(){return Ll.apply(this,arguments)})},{key:"requestEntry",value:(_d=(0,_.A)(g().mark(function ge(){var ee,re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ae=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"Requesting Entry",span:this._joinSpan}),ie.next=1,this._socketRequest("requestEntry",{name:this._displayName});case 1:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"Entry Requested Successfully"});case 2:case"end":return ie.stop()}},ge,this)})),function(){return _d.apply(this,arguments)})},{key:"respondEntry",value:(Fu=(0,_.A)(g().mark(function ge(ee,re){var ae,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return le=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"Responding Entry",attributes:{peerId:ee,decision:re},span:this._joinSpan}),De.next=1,this._socketRequest("respondEntry",{id:ee,decision:re});case 1:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({message:"Entry Responded Successfully",span:le,status:1});case 2:case"end":return De.stop()}},ge,this)})),function(ge,ee){return Fu.apply(this,arguments)})},{key:"startTranscription",value:(Uu=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le;return g().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return fe.debug("startTranscription()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"startTranscription() Start",attributes:{config:ee?JSON.stringify(ee):"config Not Specify"}}),Ue.prev=1,Ue.next=2,this._socketRequest("startTranscription",{config:ee});case 2:Ue.next=4;break;case 3:Ue.prev=3,Le=Ue.catch(1),fe.error("startTranscription() | failed:%o",Le),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"startTranscription() failed"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:Le.message}}),this._emitError({code:4031,message:Le.message});case 4:(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"startTranscription() End"});case 5:case"end":return Ue.stop()}},ge,this,[[1,3]])})),function(ge){return Uu.apply(this,arguments)})},{key:"stopTranscription",value:(Vc=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return fe.debug("stopTranscription()"),ae=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"stopTranscription() Start"}),Le.prev=1,Le.next=2,this._socketRequest("stopTranscription",{});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"stopTranscription() failed"}),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:De.message}}),this._emitError({code:4032,message:De.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopTranscription() End"});case 5:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(){return Vc.apply(this,arguments)})},{key:"pauseAllConsumers",value:(wc=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn;return g().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"pauseAllConsumers() Start",attributes:{kind:ee||"Kind not specified"}}),Vt.prev=1,Vt.next=2,this._socketRequest("pauseAllConsumers",{kind:ee===void 0?"all":ee});case 2:if(De=Vt.sent,Le=!1,!((De==null||(le=De.consumersWithIssues)===null||le===void 0?void 0:le.length)>0)){Vt.next=4;break}return Vt.next=3,this._socketRequest("pauseAllConsumers",{kind:ee===void 0?"all":ee});case 3:((Et=Vt.sent)==null||(Ue=Et.consumersWithIssues)===null||Ue===void 0?void 0:Ue.length)===0&&(Le=!0),Vt.next=5;break;case 4:Le=!0;case 5:Le&&this._eventEmitter.emit("ALL_CONSUMERS_PAUSED",{kind:ee}),Vt.next=7;break;case 6:Vt.prev=6,bn=Vt.catch(1),fe.error("pauseAllConsumers() | failed:%o",bn),(Nt=this._openTelemetry)===null||Nt===void 0||Nt.completeSpan({span:ie,status:2,message:"pauseAllConsumers() failed"}),(qt=this._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"Error pauseAllConsumers() failed",logType:"ERROR",attributes:{error:bn.message}});case 7:(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"pauseAllConsumers() End"});case 8:case"end":return Vt.stop()}},ge,this,[[1,6]])})),function(ge){return wc.apply(this,arguments)})},{key:"resumeAllConsumers",value:(is=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn;return g().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"resumeAllConsumers() Start",attributes:{kind:ee||"Kind not specified"}}),Vt.prev=1,Vt.next=2,this._socketRequest("resumeAllConsumers",{kind:ee===void 0?"all":ee});case 2:if(De=Vt.sent,Le=!1,!((De==null||(le=De.consumersWithIssues)===null||le===void 0?void 0:le.length)>0)){Vt.next=4;break}return Vt.next=3,this._socketRequest("resumeAllConsumers",{kind:ee===void 0?"all":ee});case 3:((Et=Vt.sent)==null||(Ue=Et.consumersWithIssues)===null||Ue===void 0?void 0:Ue.length)===0&&(Le=!0),Vt.next=5;break;case 4:Le=!0;case 5:Le&&this._eventEmitter.emit("ALL_CONSUMERS_RESUMED",{kind:ee}),Vt.next=7;break;case 6:Vt.prev=6,bn=Vt.catch(1),fe.error("resumeAllConsumers() | failed:%o",bn),(Nt=this._openTelemetry)===null||Nt===void 0||Nt.completeSpan({span:ie,status:2,message:"resumeAllConsumers() failed"}),(qt=this._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"Error resumeAllConsumers() failed",logType:"ERROR",attributes:{error:bn.message}});case 7:(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"resumeAllConsumers() End"});case 8:case"end":return Vt.stop()}},ge,this,[[1,6]])})),function(ge){return is.apply(this,arguments)})},{key:"startRecording",value:(xc=(0,_.A)(g().mark(function ge(ee,re,ae,ie){var le,De,Le,Ue,Et,Nt;return g().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return fe.debug("startRecording()"),Le=(le=this._openTelemetry)===null||le===void 0?void 0:le.trace({spanName:"startRecording() Start",attributes:{webhookUrl:ee||"webhookUrl Not Specify",awsDirPath:re||"awsDirPath Not Specify",config:ae?JSON.stringify(ae):"config Not Specify",transcription:ie?JSON.stringify(ie):"transcription Not Specify"}}),qt.prev=1,qt.next=2,this._socketRequest("startRecording",{webhookUrl:ee,awsDirPath:re,config:ae,transcription:ie});case 2:qt.next=4;break;case 3:qt.prev=3,Nt=qt.catch(1),fe.error("startRecording() | failed:%o",Nt),(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:Le,status:2,message:"startRecording() failed"}),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:Nt.message}}),this._emitError({code:4011,message:Nt.message});case 4:(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:Le,status:1,message:"startRecording() End"});case 5:case"end":return qt.stop()}},ge,this,[[1,3]])})),function(ge,ee,re,ae){return xc.apply(this,arguments)})},{key:"stopRecording",value:(bc=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(!this._closed){Le.next=1;break}return Le.abrupt("return");case 1:return fe.debug("stopRecording()"),ae=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"stopRecording() Start"}),Le.prev=2,Le.next=3,this._socketRequest("stopRecording",{});case 3:Le.next=5;break;case 4:Le.prev=4,De=Le.catch(2),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"stopRecording() failed"}),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:De.message}}),this._emitError({code:4012,message:De.message});case 5:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopRecording() End"});case 6:case"end":return Le.stop()}},ge,this,[[2,4]])})),function(){return bc.apply(this,arguments)})},{key:"startLivestream",value:(_c=(0,_.A)(g().mark(function ge(ee,re){var ae,ie,le,De,Le,Ue;return g().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return fe.debug("startLivestream()"),le=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"startLivestream() Start",attributes:{outputs:ee?JSON.stringify(ee):"outputs Not Specify",config:re?JSON.stringify(re):"config Not Specify"}}),Et.prev=1,Et.next=2,this._socketRequest("startLivestream",{outputs:ee,config:re});case 2:Et.next=4;break;case 3:Et.prev=3,Ue=Et.catch(1),(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:le,status:1,message:"startLivestream() End"}),(Le=this._videosdkLogs)===null||Le===void 0||Le.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:Ue.message}}),this._emitError({code:4013,message:Ue.message});case 4:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:le,status:1,message:"startLivestream() End"});case 5:case"end":return Et.stop()}},ge,this,[[1,3]])})),function(ge,ee){return _c.apply(this,arguments)})},{key:"stopLivestream",value:(Ss=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return fe.debug("stopLivestream()"),ae=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"stopLivestream() Start"}),Le.prev=1,Le.next=2,this._socketRequest("stopLivestream",{});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:De.message}}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:4014,message:De.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopLivestream() End"});case 5:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(){return Ss.apply(this,arguments)})},{key:"startHls",value:(jl=(0,_.A)(g().mark(function ge(ee,re){var ae,ie,le,De,Le,Ue;return g().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return ee=ee||{},re=re||{},fe.debug("startHls()"),le=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"startHls() Start",attributes:{config:ee?JSON.stringify(ee):"config Not Specify",transcription:re?JSON.stringify(re):"transcription Not Specify"}}),Et.prev=1,Et.next=2,this._socketRequest("startHls",{config:ee,transcription:re});case 2:Et.next=4;break;case 3:Et.prev=3,Ue=Et.catch(1),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:Ue.message}}),(Le=this._openTelemetry)===null||Le===void 0||Le.completeSpan({span:le,status:2,message:"Error startHls() failed"}),this._emitError({code:4016,message:Ue.message}),fe.error("startHls() | failed:%o",Ue);case 4:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:le,status:1,message:"startHlsSpan() End"});case 5:case"end":return Et.stop()}},ge,this,[[1,3]])})),function(ge,ee){return jl.apply(this,arguments)})},{key:"stopHls",value:(zu=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return fe.debug("stopHls()"),ae=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"stopHls() Start"}),Le.prev=1,Le.next=2,this._socketRequest("stopHls",{});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:De.message}}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"Error stopHls() failed"}),this._emitError({code:4017,message:De.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopHls() End"});case 5:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(){return zu.apply(this,arguments)})},{key:"startWhiteboard",value:(Bu=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return fe.debug("startWhiteboard()"),ae=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"startWhiteboard() Start"}),De.prev=1,De.next=2,this._socketRequest("startWhiteboard",{version:"v2"});case 2:De.next=4;break;case 3:De.prev=3,le=De.catch(1),fe.error("startWhiteboard() | failed:%o",le),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"Error startWhiteboard() failed"}),this._emitError({code:3021,message:le.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"startWhiteboard() End"});case 5:case"end":return De.stop()}},ge,this,[[1,3]])})),function(){return Bu.apply(this,arguments)})},{key:"stopWhiteboard",value:(Iu=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return fe.debug("stopWhiteboard()"),ae=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"stopWhiteboard() Start"}),De.prev=1,De.next=2,this._socketRequest("stopWhiteboard",{});case 2:De.next=4;break;case 3:De.prev=3,le=De.catch(1),fe.error("stopWhiteboard() | failed:%o",le),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"Error stopWhiteboard() failed"}),this._emitError({code:3022,message:le.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopWhiteboard() End"});case 5:case"end":return De.stop()}},ge,this,[[1,3]])})),function(){return Iu.apply(this,arguments)})},{key:"joinCharacter",value:(Ml=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le;return g().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return fe.debug("joinCharacter()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"joinCharacter() Start",attributes:{config:ee?JSON.stringify(ee):"config Not Specify"}}),Ue.prev=1,Ue.next=2,this._socketRequest("joinCharacter",{config:ee});case 2:return Ue.abrupt("return",Ue.sent);case 3:return Ue.prev=3,Le=Ue.catch(1),fe.error("joinCharacter() | failed:%o",Le),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"joinCharacter() failed"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:Le.message}}),this._emitError({code:4033,message:Le.message}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"joinCharacter() End"}),Ue.abrupt("return",!1);case 4:case"end":return Ue.stop()}},ge,this,[[1,3]])})),function(ge){return Ml.apply(this,arguments)})},{key:"switchTo",value:(ws=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le,Ue,Et,Nt;return g().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return ae=ee.meetingId,ie=ee.participantId,le=ee.token,De=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"switchTo() Start",attributes:{"peer.id":ie,meetingId:ae}}),qt.prev=1,qt.next=2,this._socketRequest("switchToMeeting",{meetingId:ae,participantId:ie,secret:le||this._secret});case 2:(Le=this._openTelemetry)===null||Le===void 0||Le.completeSpan({span:De,status:1,message:"switchTo() Success"}),qt.next=4;break;case 3:qt.prev=3,Nt=qt.catch(1),(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:De,status:2,message:"switchTo() failed"}),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error switchTo() failed",logType:"ERROR",attributes:{error:Nt.message}});case 4:case"end":return qt.stop()}},ge,this,[[1,3]])})),function(ge){return ws.apply(this,arguments)})},{key:"removeCharacter",value:(ji=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le;return g().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return fe.debug("removeCharacter()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"removeCharacter() Start"}),Ue.prev=1,Ue.next=2,this._socketRequest("leaveCharacter",{config:ee});case 2:Ue.next=4;break;case 3:return Ue.prev=3,Le=Ue.catch(1),fe.error("removeCharacter() | failed:%o",Le),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"removeCharacter() failed"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:Le.message}}),this._emitError({code:4034,message:Le.message}),Ue.abrupt("return",!1);case 4:return(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"removeCharacter() End"}),Ue.abrupt("return",!0);case 5:case"end":return Ue.stop()}},ge,this,[[1,3]])})),function(ge){return ji.apply(this,arguments)})},{key:"sendCharacterMessage",value:(ol=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return re=ee.interactionId,ae=ee.text,fe.debug("sendCharacterMessage()"),le.prev=1,le.next=2,this._socketRequest("sendCharacterMessage",{interactionId:re,text:ae});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),fe.error("sendCharacterMessage() | failed:%o",ie),this._emitError({code:4035,message:ie.message});case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return ol.apply(this,arguments)})},{key:"interruptCharacter",value:(Io=(0,_.A)(g().mark(function ge(ee){var re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=ee.interactionId,fe.debug("interruptCharacter()"),ie.prev=1,ie.next=2,this._socketRequest("interruptCharacter",{interactionId:re});case 2:ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("interruptCharacter() | failed:%o",ae),this._emitError({code:4036,message:ae.message});case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return Io.apply(this,arguments)})},{key:"pinStateChange",value:(Hc=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return ae=ee.peerId,ie=ee.state,(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Pin state Change for ".concat(ae),attributes:{state:ie?JSON.stringify(ie):null},status:1}),Le.prev=1,Le.next=2,this._socketRequest("pinStateChanged",{peerId:ae,state:ie});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:De.message}}),fe.error("pinStateChange() | failed");case 4:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(ge){return Hc.apply(this,arguments)})},{key:"startVideo",value:(yc=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return ae=ee.link,fe.debug("startVideo()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),De.prev=1,De.next=2,this._socketRequest("startVideo",{link:ae});case 2:De.next=4;break;case 3:De.prev=3,le=De.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:le.message}}),fe.error("startVideo() | failed:%o",le),this._emitError({code:3023,message:le.message});case 4:case"end":return De.stop()}},ge,this,[[1,3]])})),function(ge){return yc.apply(this,arguments)})},{key:"stopVideo",value:(Ja=(0,_.A)(g().mark(function ge(){var ee,re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return fe.debug("stopVideo()"),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),ie.prev=1,ie.next=2,this._socketRequest("stopVideo",{});case 2:ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:ae.message}}),fe.error("stopVideo() | failed:%o",ae),this._emitError({code:3024,message:ae.message});case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return Ja.apply(this,arguments)})},{key:"pauseVideo",value:(So=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return fe.debug("pauseVideo()"),ae.prev=1,ae.next=2,this._socketRequest("pauseVideo",{currentTime:ee});case 2:ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),fe.error("pauseVideo() | failed:%o",re),this._emitError({code:3025,message:re.message});case 4:case"end":return ae.stop()}},ge,this,[[1,3]])})),function(ge){return So.apply(this,arguments)})},{key:"resumeVideo",value:(uo=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return fe.debug("resumeVideo()"),re.prev=1,re.next=2,this._socketRequest("resumeVideo",{});case 2:re.next=4;break;case 3:re.prev=3,ee=re.catch(1),fe.error("resumeVideo() | failed:%o",ee),this._emitError({code:3026,message:ee.message});case 4:case"end":return re.stop()}},ge,this,[[1,3]])})),function(){return uo.apply(this,arguments)})},{key:"seekVideo",value:(Si=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return fe.debug("seekVideo()"),ae.prev=1,ae.next=2,this._socketRequest("seekVideo",{currentTime:ee});case 2:ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),fe.error("seekVideo() | failed:%o",re),this._emitError({code:3031,message:re.message});case 4:case"end":return ae.stop()}},ge,this,[[1,3]])})),function(ge){return Si.apply(this,arguments)})},{key:"enablePeerMic",value:($a=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Enabling peer ".concat(ee," Mic"),status:1}),fe.debug("enablePeerMic()"),le.prev=1,le.next=2,this._socketRequest("enablePeerMic",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("enablePeerMic() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return $a.apply(this,arguments)})},{key:"requestMediaRelay",value:(Mi=(0,_.A)(g().mark(function ge(ee,re,ae){var ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.prev=0,De.next=1,this._socketRequest("mediaRelayRequestSent",{meetingId:ee,secret:re??this._secret,kinds:ae??["audio","video","share","share_audio"]});case 1:De.next=3;break;case 2:De.prev=2,le=De.catch(0),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error relayRequest() failed",logType:"ERROR",attributes:{error:le.message}});case 3:case"end":return De.stop()}},ge,this,[[0,2]])})),function(ge,ee,re){return Mi.apply(this,arguments)})},{key:"handleRelayRequestResponse",value:(Fc=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return re=ee.decision,ae=ee.peerId,ie=ee.meetingId,Le.prev=1,Le.next=2,this._socketRequest("respondToMediaRelayRequest",{decision:re,decidedBy:this._peerId,peerId:ae,meetingId:ie});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error respondToMediaRelayRequest() failed",logType:"ERROR",attributes:{error:De.message}});case 4:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(ge){return Fc.apply(this,arguments)})},{key:"stopMediaRelay",value:(lo=(0,_.A)(g().mark(function ge(ee){var re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=1,this._socketRequest("mediaRelayRequestStop",{meetingId:ee});case 1:ie.next=3;break;case 2:ie.prev=2,ae=ie.catch(0),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopMediaRelay() failed",logType:"ERROR",attributes:{error:ae.message}});case 3:case"end":return ie.stop()}},ge,this,[[0,2]])})),function(ge){return lo.apply(this,arguments)})},{key:"enableRelayMedia",value:(Lo=(0,_.A)(g().mark(function ge(ee,re){var ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.prev=0,le.next=1,this._socketRequest("enableRelayMedia",{meetingId:ee,kind:re});case 1:le.next=3;break;case 2:le.prev=2,ie=le.catch(0),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error enableRelayMedia() failed",logType:"ERROR",attributes:{error:ie.message}});case 3:case"end":return le.stop()}},ge,this,[[0,2]])})),function(ge,ee){return Lo.apply(this,arguments)})},{key:"disableRelayMedia",value:(Ol=(0,_.A)(g().mark(function ge(ee,re){var ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.prev=0,le.next=1,this._socketRequest("disableRelayMedia",{meetingId:ee,kind:re});case 1:le.next=3;break;case 2:le.prev=2,ie=le.catch(0),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error disableRelayMedia() failed",logType:"ERROR",attributes:{error:ie.message}});case 3:case"end":return le.stop()}},ge,this,[[0,2]])})),function(ge,ee){return Ol.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(vc=(0,_.A)(g().mark(function ge(){var ee,re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.prev=0,ae.next=1,this._socketRequest("enableAdaptiveSubscription");case 1:ae.next=3;break;case 2:ae.prev=2,re=ae.catch(0),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error enableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:re.message}});case 3:case"end":return ae.stop()}},ge,this,[[0,2]])})),function(){return vc.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(js=(0,_.A)(g().mark(function ge(){var ee,re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.prev=0,ae.next=1,this._socketRequest("disableAdaptiveSubscription");case 1:ae.next=3;break;case 2:ae.prev=2,re=ae.catch(0),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error disableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:re.message}});case 3:case"end":return ae.stop()}},ge,this,[[0,2]])})),function(){return js.apply(this,arguments)})},{key:"disablePeerMic",value:(us=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Disabling peer ".concat(ee," Mic"),status:1}),fe.debug("disablePeerMic()"),le.prev=1,le.next=2,this._socketRequest("disablePeerMic",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("disablePeerMic() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return us.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(Ua=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return fe.debug("consumeWebcamStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:ee}}),le.prev=2,le.next=3,this._socketRequest("consumeVideoStreams",{peerId:ee});case 3:le.next=5;break;case 4:le.prev=4,ie=le.catch(2),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("consumeWebcamStreams() | failed:%o",ie);case 5:case"end":return le.stop()}},ge,this,[[2,4]])})),function(ge){return Ua.apply(this,arguments)})},{key:"consumeMicStreams",value:(ka=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return fe.debug("consumeMicStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:ee}}),le.prev=1,le.next=2,this._socketRequest("consumeAudioStreams",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("consumeMicStreams() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return ka.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(jr=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return fe.debug("stopConsumingAudioStreams()"),le.prev=2,le.next=3,this._socketRequest("stopConsumingAudioStreams",{peerId:ee});case 3:(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:ee}}),le.next=5;break;case 4:le.prev=4,ie=le.catch(2),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("stopConsumingMicStreams() | failed:%o",ie);case 5:case"end":return le.stop()}},ge,this,[[2,4]])})),function(ge){return jr.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(ir=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return fe.debug("stopConsumingWebcamStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:ee}}),le.prev=1,le.next=2,this._socketRequest("stopConsumingVideoStreams",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("stopConsumingWebcamStreams() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return ir.apply(this,arguments)})},{key:"changeMode",value:(Yn=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft,Ot,mt,Mt=this;return g().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeMode() Calling with mode: ".concat(ee)}),ie=this._mode,Ke.prev=1,ie!==ee){Ke.next=2;break}throw(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"changeMode() Ending"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"You are already in ".concat(ee," mode"),logType:"INFO"}),new Error("You are already in ".concat(ee," mode"));case 2:if(Le=function(){var It=(0,_.A)(g().mark(function dn(Yt,gn){return g().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return an.next=1,Mt._socketRequest("createWebRtcTransport",{preferredProtocol:Mt._preferredProtocol,producing:Yt,consuming:gn,sctpCapabilities:Mt._useDataChannel?Mt._mediasoupDevice.sctpCapabilities:void 0});case 1:return an.abrupt("return",an.sent);case 2:case"end":return an.stop()}},dn)}));return function(dn,Yt){return It.apply(this,arguments)}}(),!(0,Qa.kR)(ee)){Ke.next=10;break}return this._consume=!0,this._produce=!0,this._mode=ee,this._mediasoupDevice=new Mr.pF({handlerName:this._handlerName}),Ke.next=3,this._socketRequest("getRouterRtpCapabilities");case 3:return Et=Ke.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(Et.headerExtensions=(Nt=Et.headerExtensions)===null||Nt===void 0?void 0:Nt.filter(function(It){return It.uri!="urn:3gpp:video-orientation"})),Ke.next=4,this._mediasoupDevice.load({routerRtpCapabilities:Et});case 4:if(!this._produce){Ke.next=6;break}return Ke.next=5,Le(!0,!1);case 5:qt=Ke.sent,this.createProducerTransport(qt,ae);case 6:if(ie===Qa.nI.RECV_ONLY||!this._consume){Ke.next=8;break}return Ke.next=7,Le(!1,!0);case 7:bn=Ke.sent,this.createConsumerTransport(bn,ae);case 8:return(Ue=this._openTelemetry)===null||Ue===void 0||Ue.traceAutoComplete({spanName:"Sending changeMode request to server",span:ae,status:1}),Ke.next=9,this._socketRequest("changeMode",{mode:ee});case 9:this._produce&&(gt.dispatch(Er({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),this._webcamEnabled&&this.enableWebcam(this.customCameraVideoTrack,ae)),window.SHOW_INFO&&(Vt=gt.getState(),hn=Vt.me,gt.dispatch($r(hn.id))),Ke.next=17;break;case 10:if(!(0,Qa.kR)(ie)||ee!==Qa.nI.RECV_ONLY){Ke.next=12;break}return this._produce=!1,this._mode=ee,this._closeProducersAndTransport(),Ke.next=11,this._socketRequest("changeMode",{mode:ee});case 11:Ke.next=17;break;case 12:if(!(0,Qa.wZ)(ie)||ee!==Qa.nI.RECV_ONLY){Ke.next=15;break}return this._consume=!0,this._mode=ee,Ke.next=13,this._setupWebrtcTransport(ae);case 13:return Ke.next=14,this._socketRequest("changeMode",{mode:ee});case 14:window.SHOW_INFO&&(xn=gt.getState(),Pe=xn.me,gt.dispatch($r(Pe.id))),Ke.next=17;break;case 15:if(!(0,Qa.wZ)(ee)){Ke.next=17;break}return Ke.next=16,this._socketRequest("changeMode",{mode:ee});case 16:this._consume=!1,this._produce=!1,this._mode=ee,this._dataConsumers.clear(),this._closeTransports();case 17:Ke.next=19;break;case 18:Ke.prev=18,mt=Ke.catch(1),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:"Error changeMode(".concat(ee,") | failed"),logType:"ERROR",attributes:{error:mt.message}}),(Ot=this._openTelemetry)===null||Ot===void 0||Ot.completeSpan({span:ae,status:2,message:"changeMode(".concat(ee,") | failed")});case 19:case"end":return Ke.stop()}},ge,this,[[1,18]])})),function(ge){return Yn.apply(this,arguments)})},{key:"_closeProducersAndTransport",value:function(){var ge;this._webcamProducer&&(this._webcamProducer.close(),this._webcamProducer=null),this._micProducer&&(this._micProducer.close(),this._micProducer=null),this._shareProducer&&(this._shareProducer.close(),this._shareProducer=null),this._shareAudioProducer&&(this._shareAudioProducer.close(),this._shareAudioProducer=null),(ge=this._sendTransport)===null||ge===void 0||ge.close(),this._sendTransport=null}},{key:"_closeTransports",value:function(){var ge,ee;this._sendTransport&&((ge=this._sendTransport)===null||ge===void 0||ge.close(),this._sendTransport=null),this._recvTransport&&((ee=this._recvTransport)===null||ee===void 0||ee.close(),this._recvTransport=null)}},{key:"_setupWebrtcTransport",value:(qn=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return this._mediasoupDevice=new Mr.pF({handlerName:this._handlerName}),le.next=1,this._socketRequest("getRouterRtpCapabilities");case 1:return re=le.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(re.headerExtensions=(ae=re.headerExtensions)===null||ae===void 0?void 0:ae.filter(function(De){return De.uri!="urn:3gpp:video-orientation"})),le.next=2,this._mediasoupDevice.load({routerRtpCapabilities:re});case 2:return le.next=3,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 3:ie=le.sent,this.createConsumerTransport(ie,ee);case 4:case"end":return le.stop()}},ge,this)})),function(ge){return qn.apply(this,arguments)})},{key:"enablePeerWebcam",value:(Xt=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Enabling peer ".concat(ee," Webcam"),status:1}),fe.debug("enablePeerWebcam()"),le.prev=1,le.next=2,this._socketRequest("enablePeerWebcam",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("enablePeerWebcam() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return Xt.apply(this,arguments)})},{key:"disablePeerWebcam",value:(ht=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Disabling peer ".concat(ee," Webcam"),status:1}),fe.debug("disablePeerWebcam()"),le.prev=1,le.next=2,this._socketRequest("disablePeerWebcam",{peerId:ee});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:ie.message}});case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return ht.apply(this,arguments)})},{key:"getMicStats",value:function(ge){var ee=this;if(this._micProducer){var re=0;ge.onStatsCollected=function(ae){var ie;ee._stats.producerStats||(ee._stats.producerStats={}),ee._stats.producerStats.audio||(ee._stats.producerStats.audio=[]),ee._micProducer&&(ee._latestStats[(ie=ee._micProducer)===null||ie===void 0?void 0:ie.id]=[]),ae.audio.forEach(function(le){var De;ee._micProducer&&ee._latestStats[(De=ee._micProducer)===null||De===void 0?void 0:De.id].push(le)}),re%5==0&&ee._micProducer!=null&&ee._stats.producerStats.audio.push(Oa({timestamp:new Date},ee._latestStats[ee._micProducer.id]?ee._latestStats[ee._micProducer.id][0]:{})),re++}}}},{key:"enableMic",value:(it=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft,Ot,mt,Mt,Ke,It,dn,Yt,gn,an,Cn,mn,Jt,yr,ur,Dt,An,Tr,ta,oa,ja,Fa,Gr,G,K,X,de,Ee,xe,we,We,ke,Oe,Xe,$e,Ae,tt,ue,pe,Ie,qe,nt,tn,_t,Pt,Mn,ct,Fe,bt,wn,cn,vn,or,Lr,Tn,yn,Pr,br,ar=this,Wn=arguments;return g().wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:if(De=Wn.length>0&&Wn[0]!==void 0?Wn[0]:void 0,Le=Wn.length>1&&Wn[1]!==void 0?Wn[1]:void 0,Ue=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"enableMic() Calling ".concat(De?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:De?JSON.stringify(De):"Not Specify Custom Track"},span:Le||null}),fe.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){Rn.next=4;break}if(qt=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Mic Producer found",span:Ue}),De&&((bn=this._openTelemetry)===null||bn===void 0||bn.traceAutoComplete({spanName:"Stopping customAudioTrack",span:Ue,status:1}),De.getTracks().forEach(function(qr){qr.stop()})),(Nt=this._openTelemetry)===null||Nt===void 0||Nt.completeSpan({span:qt,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),Vt=this._micProducer,!this._sendTransport){Rn.next=2;break}return Rn.next=1,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions,appData:{isEncrypted:this.isE2EEEnabled},onRtpSender:function(qr){ar.e2eeManager&&(qr.senderStreams=qr.createEncodedStreams())}});case 1:this._micProducer=Rn.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),this._micProducer?(xn=Za({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Vt._appData.encodings,codecOptions:Vt._appData.codecOptions,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),gt.dispatch(xn),this._eventEmitter.emit(xn.type,xn.payload),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:Ue,status:1,message:"Enable Mic Successful"})):(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:Ue,status:2,message:"Error in enableMic() :: micProducer null"}),Rn.next=3;break;case 2:return(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Rn.abrupt("return");case 3:return Ot=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this._micProducer.observer.on("pause",function(){Ot?.stop(),ar._latestStats[ar._micProducer.id]=[],ar._metrics.removeExistingProbe(Ot)}),this._micProducer.observer.on("close",function(){Ot?.stop(),ar._latestStats[ar._micProducer.id]=[],ar._metrics.removeExistingProbe(Ot)}),this.getMicStats(Ot),Ot.start(),Rn.abrupt("return");case 4:if(!this._mediasoupDevice){Rn.next=6;break}if(this._mediasoupDevice.canProduce("audio")){Rn.next=5;break}return Ke=this._deviceInfo.sdkType=="react-native"?_r.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:_r.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:Ke,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),fe.error("enableMic() | cannot produce audio"),(Mt=this._openTelemetry)===null||Mt===void 0||Mt.completeSpan({span:Ue,status:2,message:"Error in enableMic() :: ".concat(Ke)}),Rn.abrupt("return");case 5:Rn.next=7;break;case 6:return(It=this._videosdkLogs)===null||It===void 0||It.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(dn=this._openTelemetry)===null||dn===void 0||dn.completeSpan({span:Ue,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),Rn.abrupt("return");case 7:if(Rn.prev=7,this._externalVideo){Rn.next=24;break}return fe.debug("enableMic() | calling getUserMedia()"),Rn.next=8,this._updateMics(Ue);case 8:if(this._mic.device){Rn.next=9;break}throw new Error("Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).");case 9:try{De&&(Yt=De.getAudioTracks()[0]).readyState=="ended"&&(Yt=null,Dt=_r.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(ur=this._videosdkLogs)===null||ur===void 0||ur.pushLogs({logText:Dt.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Dt))}catch(qr){Tr=_r.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(An=this._videosdkLogs)===null||An===void 0||An.pushLogs({logText:Tr.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(Tr),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(qr))}if(Yt){Rn.next=23;break}return ja=(ta=this._openTelemetry)===null||ta===void 0?void 0:ta.trace({spanName:"Creating Track",span:Ue}),Rn.prev=10,Rn.next=11,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 11:Fa=Rn.sent,Rn.next=22;break;case 12:if(Rn.prev=12,yn=Rn.catch(10),(Gr=this._openTelemetry)===null||Gr===void 0||Gr.completeSpan({message:"Error in enableMic() :: ".concat(yn.message),span:ja,status:2}),yn.name!=="SecurityError"){Rn.next=13;break}X=_r.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,de=X.message,this._emitError(X),(G=this._videosdkLogs)===null||G===void 0||G.pushLogs({logText:de,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(de),span:Ue,status:2}),Rn.next=21;break;case 13:if(yn.name!=="DOMException"){Rn.next=14;break}we=_r.q.ERROR_RN_MIC_NOT_FOUND,We=we.message,this._emitError(we),(Ee=this._videosdkLogs)===null||Ee===void 0||Ee.pushLogs({logText:We,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(xe=this._openTelemetry)===null||xe===void 0||xe.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(We),span:Ue,status:2}),Rn.next=21;break;case 14:if(!(yn instanceof DOMException)){Rn.next=20;break}Pr=yn.name,Rn.next=Pr==="NotAllowedError"?15:Pr==="NotReadableError"?16:Pr==="NotFoundError"?17:18;break;case 15:return ke=this.handleNotAllowedError(yn,this._openTelemetry,this._videosdkLogs,Ue,"audio"),this._emitError(ke),Rn.abrupt("continue",19);case 16:return Oe=this.handleNotReadableError(yn,this._openTelemetry,this._videosdkLogs,Ue,"audio"),this._emitError(Oe),Rn.abrupt("continue",19);case 17:return Xe=_r.q.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Xe=_r.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),$e=Xe.message,this._emitError(Xe),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:$e,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat($e),span:Ue,status:2}),Rn.abrupt("continue",19);case 18:return Ae="An error occurred in creating audio track, ".concat(yn.message),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:yn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ae)},dashboardLog:!0}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Error in enableMic() :: ".concat(Ae),span:Ue,status:2}),Rn.abrupt("continue",19);case 19:Rn.next=21;break;case 20:pe="An error occurred in creating audio track, ".concat(yn.message),(tt=this._videosdkLogs)===null||tt===void 0||tt.pushLogs({logText:yn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(pe)},dashboardLog:!0}),(ue=this._openTelemetry)===null||ue===void 0||ue.completeSpan({message:"Error in enableMic() :: ".concat(pe),span:Ue,status:2});case 21:return Rn.abrupt("return");case 22:Yt=Fa.getAudioTracks()[0],(oa=this._openTelemetry)===null||oa===void 0||oa.completeSpan({message:"Audio Track Generated",span:ja,status:1});case 23:Rn.next=26;break;case 24:return Rn.next=25,this._getExternalVideoStream();case 25:Ie=Rn.sent,Yt=Ie.getAudioTracks()[0].clone();case 26:if(gn=(an=this._openTelemetry)===null||an===void 0?void 0:an.trace({spanName:"Generating Producer Configuration",span:Ue}),qe={opusStereo:1,opusDtx:1},De&&(nt=De.encoderConfig?li.$.audioProfiles[De.encoderConfig]:li.$.audioProfiles.speech_standard,qe={opusStereo:nt.stereo?1:0,opusFec:nt.fec?1:0,opusDtx:nt.dtx?1:0,opusMaxPlaybackRate:nt.maxPlaybackRate,opusPtime:nt.packetTime}),_t={encodings:tn=[{networkPriority:"high"}],codecOptions:qe},(Cn=this._openTelemetry)===null||Cn===void 0||Cn.traceAutoComplete({spanName:"Generated AppData",span:gn,attributes:{appData:JSON.stringify(_t)},status:1}),(mn=this._openTelemetry)===null||mn===void 0||mn.completeSpan({span:gn,status:1,message:"Producer Configuration Generated"}),gn=(Jt=this._openTelemetry)===null||Jt===void 0?void 0:Jt.trace({spanName:"Creating Mic Producer",span:Ue}),(yr=Yt)===null||yr===void 0||yr.addEventListener("ended",function(){console.log("Track Ended Error");try{var qr,wa,Ws=ar._deviceInfo.sdkType=="react-native"?_r.q.ERROR_RN_MIC_TRACK_ENDED:_r.q.ERROR_MICROPHONE_TRACK_ENDED;(qr=ar._videosdkLogs)===null||qr===void 0||qr.pushLogs({logText:Ws.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(Ws.message)},dashboardLog:!0}),(wa=ar._openTelemetry)===null||wa===void 0||wa.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Ue,message:Ws.message,status:2}),gt.dispatch(tr({type:"error",text:"Microphone disconnected!"})),ar.disableMic(!0,Ue).catch(function(){})}catch(Li){console.error(Li)}}),!this._sendTransport){Rn.next=28;break}return Rn.next=27,this._sendTransport.produce({track:Yt,encodings:tn,codecOptions:qe,appData:Oa(Oa({},_t),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(qr){ar.e2eeManager&&(qr.senderStreams=qr.createEncodedStreams())}});case 27:this._micProducer=Rn.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),Rn.next=29;break;case 28:return(Pt=this._videosdkLogs)===null||Pt===void 0||Pt.pushLogs({logText:_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Rn.abrupt("return");case 29:this._micProducer?(Yt.getConstraints().deviceId&&(this._mic.device=this._mics.get(Yt.getConstraints().deviceId)),Fe=Za({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:tn,codecOptions:qe,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),gt.dispatch(Fe),this._eventEmitter.emit(Fe.type,Fe.payload),(bt=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"})).start(),this.getMicStats(bt),this._micProducer.on("transportclose",function(){var qr,wa=Ga(ar._micProducer.id);gt.dispatch(wa),ar._eventEmitter.emit(wa.type,wa.payload),(qr=ar._micProducer)===null||qr===void 0||qr.close(),ar._micProducer=null}),this._micProducer.observer.on("pause",function(){bt?.stop(),ar._latestStats[ar._micProducer.id]=[],ar._metrics.removeExistingProbe(bt)}),this._micProducer.observer.on("close",function(){bt?.stop(),ar._latestStats[ar._micProducer.id]=[],ar._metrics.removeExistingProbe(bt)}),this._micProducer.on("trackended",function(){var qr,wa,Ws=ar._deviceInfo.sdkType=="react-native"?_r.q.ERROR_RN_MIC_TRACK_ENDED:_r.q.ERROR_MICROPHONE_TRACK_ENDED;(qr=ar._videosdkLogs)===null||qr===void 0||qr.pushLogs({logText:Ws.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ws.message)},dashboardLog:!0}),(wa=ar._openTelemetry)===null||wa===void 0||wa.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Ue,message:Ws.message,status:2}),gt.dispatch(tr({type:"error",text:"Microphone disconnected!"})),ar.disableMic(!0,Ue).catch(function(){})}),(Mn=this._openTelemetry)===null||Mn===void 0||Mn.completeSpan({span:gn,status:1,message:"Mic Producer Created"}),(ct=this._openTelemetry)===null||ct===void 0||ct.completeSpan({span:Ue,status:1,message:"Enable Mic Successful"})):((wn=this._videosdkLogs)===null||wn===void 0||wn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(cn=this._openTelemetry)===null||cn===void 0||cn.completeSpan({span:gn,status:2,message:"Error in enableMic() :: micProducer null"}),(vn=this._openTelemetry)===null||vn===void 0||vn.completeSpan({span:Ue,status:2,message:"Error in enableMic() :: micProducer null"})),Rn.next=32;break;case 30:return Rn.prev=30,br=Rn.catch(7),(or=this._openTelemetry)===null||or===void 0||or.completeSpan({span:gn,status:2,message:"Error in enableMic() :: occurred in creating mic producer, ".concat(br.message)}),(Lr=this._openTelemetry)===null||Lr===void 0||Lr.completeSpan({span:Ue,status:2,message:"Error in enableMic :: ".concat(br.message)}),(Tn=this._videosdkLogs)===null||Tn===void 0||Tn.pushLogs({logText:br.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(br.message)},dashboardLog:!0}),fe.error("enableMic() | failed:%o",br),gt.dispatch(tr({type:"error",text:"Error enabling microphone: ".concat(br)})),Rn.next=31,this._socketRequest("produceError",{mediaType:"audio",message:br.message});case 31:Yt&&Yt.stop();case 32:case"end":return Rn.stop()}},ge,this,[[7,30],[10,12]])})),function(){return it.apply(this,arguments)})},{key:"disableMic",value:(ze=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft,Ot,mt,Mt,Ke,It,dn,Yt,gn,an,Cn,mn=arguments;return g().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:if(ae=mn.length>0&&mn[0]!==void 0&&mn[0],ie=mn.length>1&&mn[1]!==void 0?mn[1]:void 0,fe.debug("disableMic()"),le=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"disableMic() Calling",status:1,span:ie||null}),this._micProducer){Jt.next=1;break}return(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:le,status:2,message:"Error in disableMic() :: Mic Producer Not found"}),(Le=this._videosdkLogs)===null||Le===void 0||Le.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),Jt.abrupt("return");case 1:if(Ue=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Mic Producer",span:le,status:1}),this._micEnabled=!1,!this._micProducer||ae){Jt.next=6;break}return bn=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Pausing Mic Producer",span:Ue,status:1}),this._micProducer.pause(),Vt=Ga(this._micProducer.id),(Nt=this._openTelemetry)===null||Nt===void 0||Nt.completeSpan({span:bn,status:1,message:"Pause Mic Successfully"}),gt.dispatch(Vt),this._eventEmitter.emit(Vt.type,Vt.payload),Jt.prev=2,Jt.next=3,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 3:(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:Ue,status:1,message:"Requested Server to Close Producer"}),Jt.next=5;break;case 4:Jt.prev=4,an=Jt.catch(2),gt.dispatch(tr({type:"error",text:"Error closing server-side mic Producer: ".concat(an)})),Ot="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(ae),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:Ue,status:2,message:"Error in disableMic() :: ".concat(an.message)}),(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:le,status:2,message:Ot}),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:Ot,logType:"ERROR",attributes:{error:an.message},dashboardLog:!0});case 5:return(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:le,status:1,message:"Mic Disabled Successfully"}),Jt.abrupt("return");case 6:return this._micProducer.close(),mt=Ga(this._micProducer.id),gt.dispatch(mt),this._eventEmitter.emit(mt.type,mt.payload),Jt.prev=7,Jt.next=8,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 8:(Mt=this._openTelemetry)===null||Mt===void 0||Mt.completeSpan({span:Ue,status:1,message:"Requested Server to Close Producer"}),(Ke=this._openTelemetry)===null||Ke===void 0||Ke.completeSpan({span:le,status:1,message:"Mic Disabled Successfully"}),Jt.next=10;break;case 9:Jt.prev=9,Cn=Jt.catch(7),gt.dispatch(tr({type:"error",text:"Error closing server-side mic Producer: ".concat(Cn)})),gn="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(ae),(It=this._openTelemetry)===null||It===void 0||It.completeSpan({span:Ue,status:2,message:"Error in disableMic() :: ".concat(Cn.message)}),(dn=this._openTelemetry)===null||dn===void 0||dn.completeSpan({span:le,status:2,message:gn}),(Yt=this._videosdkLogs)===null||Yt===void 0||Yt.pushLogs({logText:gn,logType:"ERROR",attributes:{error:Cn.message},dashboardLog:!0});case 10:this._micProducer=null;case 11:case"end":return Jt.stop()}},ge,this,[[2,4],[7,9]])})),function(){return ze.apply(this,arguments)})},{key:"muteMic",value:(he=(0,_.A)(g().mark(function ge(){var ee,re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return fe.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),ae.prev=1,ae.next=2,this._socketRequest("pauseProducer",{producerId:this._micProducer.id});case 2:gt.dispatch(ss(this._micProducer.id)),ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),fe.error("muteMic() | failed: %o",re),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:re.message}}),gt.dispatch(tr({type:"error",text:"Error pausing server-side mic Producer: ".concat(re)}));case 4:case"end":return ae.stop()}},ge,this,[[1,3]])})),function(){return he.apply(this,arguments)})},{key:"unmuteMic",value:(te=(0,_.A)(g().mark(function ge(){var ee,re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return fe.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),ae.prev=1,ae.next=2,this._socketRequest("resumeProducer",{producerId:this._micProducer.id});case 2:gt.dispatch(Aa(this._micProducer.id)),ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),fe.error("unmuteMic() | failed: %o",re),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:re.message}}),gt.dispatch(tr({type:"error",text:"Error resuming server-side mic Producer: ".concat(re)}));case 4:case"end":return ae.stop()}},ge,this,[[1,3]])})),function(){return te.apply(this,arguments)})},{key:"enableWebcam",value:(W=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft,Ot,mt,Mt,Ke,It,dn,Yt,gn,an,Cn,mn,Jt,yr,ur,Dt,An,Tr,ta,oa,ja,Fa,Gr,G,K,X,de,Ee,xe,we,We,ke,Oe,Xe,$e,Ae,tt,ue,pe,Ie,qe,nt,tn,_t,Pt,Mn,ct,Fe,bt,wn,cn,vn,or,Lr,Tn,yn,Pr,br=this,ar=arguments;return g().wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:if(De=ar.length>0&&ar[0]!==void 0?ar[0]:void 0,Le=ar.length>1&&ar[1]!==void 0?ar[1]:void 0,Ue=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"enableWebcam() Calling ".concat(De?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:De?JSON.stringify(De):"Not Specify Custom Track"},span:Le||null}),fe.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){Wn.next=1;break}return(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:Ue,status:2,message:"Error in enableWebcam() :: Webcam Producer found"}),(Nt=this._videosdkLogs)===null||Nt===void 0||Nt.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),Wn.abrupt("return");case 1:if(!this._mediasoupDevice){Wn.next=3;break}if(this._mediasoupDevice.canProduce("video")){Wn.next=2;break}return Vt=this._deviceInfo.sdkType=="react-native"?_r.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:_r.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:Ue,status:2,message:"Error in enableWebcam() :: ".concat(Vt)}),(bn=this._videosdkLogs)===null||bn===void 0||bn.pushLogs({logText:Vt,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),fe.error("enableWebcam() | cannot produce video"),Wn.abrupt("return");case 2:Wn.next=4;break;case 3:return(hn=this._videosdkLogs)===null||hn===void 0||hn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:Ue,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),Wn.abrupt("return");case 4:if(gt.dispatch(yi(!0)),Ot=this._webcam.resolution,Wn.prev=5,this._externalVideo){Wn.next=24;break}return Wn.next=6,this._updateWebcams(Ue);case 6:if(ft=this._webcam.device){Wn.next=7;break}throw new Error("Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).");case 7:fe.debug("enableWebcam() | calling getUserMedia()");try{De&&(Pe=De.getVideoTracks()[0]).readyState=="ended"&&(Pe=null,Yt=_r.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(dn=this._videosdkLogs)===null||dn===void 0||dn.pushLogs({logText:Yt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Yt))}catch(Rn){an=_r.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(gn=this._videosdkLogs)===null||gn===void 0||gn.pushLogs({logText:an.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._emitError(an),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(Rn))}if(Pe){Wn.next=23;break}if(mn=(Cn=this._openTelemetry)===null||Cn===void 0?void 0:Cn.trace({spanName:"Creating Track",span:Ue}),Jt=null,Wn.prev=8,this._webcam.resolution!="hd"){Wn.next=10;break}return Wn.next=9,this.createCameraVideoTrack({cameraId:ft.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:ft.facing});case 9:De=Wn.sent,Jt=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),Wn.next=12;break;case 10:return Wn.next=11,this.createCameraVideoTrack({cameraId:ft.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:ft.facing});case 11:De=Wn.sent,Jt=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 12:Pe=De.getVideoTracks()[0],(yr=this._openTelemetry)===null||yr===void 0||yr.completeSpan({message:"Video Track Generated",span:mn,attributes:{customVideoTrackConfig:Jt},status:1}),Wn.next=23;break;case 13:if(Wn.prev=13,Tn=Wn.catch(8),(ur=this._openTelemetry)===null||ur===void 0||ur.completeSpan({message:"Error in enableWebcam() :: ".concat(Tn.message),span:mn,status:2}),Tn.name!=="SecurityError"){Wn.next=14;break}Tr=_r.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,ta=Tr.message,this._emitError(Tr),(Dt=this._videosdkLogs)===null||Dt===void 0||Dt.pushLogs({logText:ta,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(An=this._openTelemetry)===null||An===void 0||An.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(ta),span:enableMicSpan,status:2}),Wn.next=22;break;case 14:if(Tn.name!=="DOMException"){Wn.next=15;break}Fa=_r.q.ERROR_RN_CAMERA_NOT_FOUND,Gr=Fa.message,this._emitError(Fa),(oa=this._videosdkLogs)===null||oa===void 0||oa.pushLogs({logText:Gr,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(ja=this._openTelemetry)===null||ja===void 0||ja.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Gr),span:enableMicSpan,status:2}),Wn.next=22;break;case 15:if(!(Tn instanceof DOMException)){Wn.next=21;break}yn=Tn.name,Wn.next=yn==="NotAllowedError"?16:yn==="NotReadableError"?17:yn==="NotFoundError"?18:19;break;case 16:return G=this.handleNotAllowedError(Tn,this._openTelemetry,this._videosdkLogs,Ue,"video"),this._emitError(G),Wn.abrupt("continue",20);case 17:return K=this.handleNotReadableError(Tn,this._openTelemetry,this._videosdkLogs,Ue,"video"),this._emitError(K),Wn.abrupt("continue",20);case 18:return X=_r.q.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(X=_r.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),de=X.message,this._emitError(X),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:de,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(de),span:Ue,status:2}),Wn.abrupt("continue",20);case 19:return Ee="An error occurred in creating video track, ".concat(Tn.message),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:Tn.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Ee)},dashboardLog:!0}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Error in enableWebcam() :: ".concat(Ee),span:Ue,status:2}),Wn.abrupt("continue",20);case 20:Wn.next=22;break;case 21:We="An error occurred in creating video track, ".concat(Tn.message),(xe=this._videosdkLogs)===null||xe===void 0||xe.pushLogs({logText:Tn.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(We)},dashboardLog:!0}),(we=this._openTelemetry)===null||we===void 0||we.completeSpan({message:"Error in enableWebcam() :: ".concat(We),span:Ue,status:2});case 22:return Wn.abrupt("return");case 23:Wn.next=26;break;case 24:return ft={label:"external video"},Wn.next=25,this._getExternalVideoStream();case 25:ke=Wn.sent,Pe=ke.getVideoTracks()[0].clone();case 26:if(Oe=(mt=this._openTelemetry)===null||mt===void 0?void 0:mt.trace({spanName:"Generating Producer Configuration",span:Ue}),Ae={videoGoogleStartBitrate:1e3},!this._forceH264){Wn.next=28;break}if($e=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Rn){return Rn.mimeType.toLowerCase()==="video/h264"})){Wn.next=27;break}throw new Error("The desired H.264 codec and configuration are not supported");case 27:Wn.next=29;break;case 28:if(!this._forceVP9){Wn.next=29;break}if($e=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Rn){return Rn.mimeType.toLowerCase()==="video/vp9"})){Wn.next=29;break}throw new Error("The desired VP9 codec and configuration are not supported");case 29:Pe?(tt=Pe.getConstraints(),ue=this._deviceInfo.sdkType=="react-native"&&this._deviceInfo.platform=="ios",Xe=(0,ci.v7)(!1,tt.width,tt.height,{simulcast:De.multiStream},ue)):this._useSimulcast&&(pe=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Rn){return Rn.kind==="video"}),Xe=this._forceVP9&&$e||pe.mimeType.toLowerCase()==="video/vp9"?Po:Ic[this._webcam.resolution]),Ie={};try{Ie={encodings:Xe,width:De?(qe=Pe)===null||qe===void 0?void 0:qe.getConstraints().width:lr[Ot].width.ideal,height:De?(nt=Pe)===null||nt===void 0?void 0:nt.getConstraints().height:lr[Ot].height.ideal}}catch(Rn){(tn=this._videosdkLogs)===null||tn===void 0||tn.pushLogs({logText:Rn.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(Rn.message)},dashboardLog:!0}),console.log(Rn)}if((Mt=this._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"Track Generated with height ".concat(Ie.height," and width ").concat(Ie.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(Ie)},span:Ue,status:1}),(Ke=this._openTelemetry)===null||Ke===void 0||Ke.completeSpan({span:Oe,status:1,message:"Producer Configuration Generated"}),Oe=(It=this._openTelemetry)===null||It===void 0?void 0:It.trace({spanName:"Creating Webcam Producer",span:Ue}),!this._sendTransport){Wn.next=31;break}return Wn.next=30,this._sendTransport.produce({track:Pe,encodings:Xe,codecOptions:Ae,codec:$e,appData:Oa(Oa({},Ie),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(Rn){br.e2eeManager&&(Rn.senderStreams=Rn.createEncodedStreams())}});case 30:this._webcamProducer=Wn.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._webcamProducer),Wn.next=32;break;case 31:return(_t=this._videosdkLogs)===null||_t===void 0||_t.pushLogs({logText:_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(_r.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Wn.abrupt("return");case 32:Pe.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(Pe.getConstraints().deviceId)),this._webcamProducer?(ct=Za({id:this._webcamProducer.id,deviceLabel:ft.label,type:this._getWebcamType(ft),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer,rtpSender:this._webcamProducer.rtpSender}),gt.dispatch(ct),this._eventEmitter.emit(ct.type,ct.payload),Fe=0,(bt=this._metrics.addNewProbe(this._webcamProducer,"producer")).onStatsCollected=function(Rn){try{var qr;br._stats.producerStats||(br._stats.producerStats={}),br._stats.producerStats.video||(br._stats.producerStats.video=[]),br._webcamProducer&&(br._latestStats[(qr=br._webcamProducer)===null||qr===void 0?void 0:qr.id]=[]),Rn.video.forEach(function(Ws){var Li;br._latestStats[(Li=br._webcamProducer)===null||Li===void 0?void 0:Li.id].push(Ws)}),Fe%5==0&&br._webcamProducer!=null&&br._stats.producerStats.video.push({timestamp:new Date,stats:br._latestStats[br._webcamProducer.id]}),Fe++}catch(Ws){var wa;(wa=br._videosdkLogs)===null||wa===void 0||wa.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ws.message}}),console.log("PRODUCER ERROR",Ws)}},bt.start(),this._webcamProducer.observer.on("close",function(){bt.stop(),br._metrics.removeExistingProbe(bt)}),this._webcamProducer.on("transportclose",function(){var Rn,qr=Ga(br._webcamProducer.id);gt.dispatch(qr),br._eventEmitter.emit(qr.type,qr.payload),(Rn=br._webcamProducer)===null||Rn===void 0||Rn.close(),br._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var Rn,qr,wa=br._deviceInfo.sdkType=="react-native"?_r.q.ERROR_RN_CAMERA_TRACK_ENDED:_r.q.ERROR_WEBCAM_TRACK_ENDED;(Rn=br._videosdkLogs)===null||Rn===void 0||Rn.pushLogs({logText:wa.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(wa.message)},dashboardLog:!0}),(qr=br._openTelemetry)===null||qr===void 0||qr.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:Ue,message:wa.message,status:2}),gt.dispatch(tr({type:"error",text:"Webcam disconnected!"})),br.disableWebcam(Ue).catch(function(){})}),(Pt=this._openTelemetry)===null||Pt===void 0||Pt.completeSpan({span:Oe,status:1,message:"Webcam Producer Created"}),(Mn=this._openTelemetry)===null||Mn===void 0||Mn.completeSpan({span:Ue,status:1,message:"Enable Webcam Successful"})):((wn=this._videosdkLogs)===null||wn===void 0||wn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(cn=this._openTelemetry)===null||cn===void 0||cn.completeSpan({span:Oe,status:2,message:"Error in enableWebcam() :: webcamProducer null"}),(vn=this._openTelemetry)===null||vn===void 0||vn.completeSpan({span:Ue,status:2,message:"Error in enableWebcam() :: webcamProducer null"})),Wn.next=35;break;case 33:return Wn.prev=33,Pr=Wn.catch(5),(or=this._videosdkLogs)===null||or===void 0||or.pushLogs({logText:Pr.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Pr.message)},dashboardLog:!0}),(Lr=this._openTelemetry)===null||Lr===void 0||Lr.completeSpan({span:Ue,status:2,message:"Error in enableWebcam() :: ".concat(Pr.message)}),gt.dispatch(tr({type:"error",text:"Error enabling webcam: ".concat(Pr)})),Wn.next=34,this._socketRequest("produceError",{mediaType:"video",message:Pr.message});case 34:Pe&&Pe.stop();case 35:gt.dispatch(yi(!1));case 36:case"end":return Wn.stop()}},ge,this,[[5,33],[8,13]])})),function(){return W.apply(this,arguments)})},{key:"handleNotAllowedError",value:function(ge,ee,re,ae,ie){var le={};return le=ge.message==="Permission denied"||ge.message==="Permission dismissed"?ie==="video"?_r.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:_r.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:ge.message.includes("The request is not allowed by the user agent")?ie==="video"?_r.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:_r.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:ge.message==="Permission denied by system"?ie==="video"?_r.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:_r.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:ie==="video"?_r.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:_r.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,re.pushLogs({logText:le.message,logType:"ERROR",attributes:{error:"Error in ".concat(ie==="video"?"enableWebcam()":"enableMic()"," :: ").concat(ge.message)},dashboardLog:!0}),ee.completeSpan({message:ie==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(le.message):"Error in enableMic() :: occurred in creating audio track, ".concat(le.message),span:ae,status:2}),le}},{key:"handleNotReadableError",value:function(ge,ee,re,ae,ie){var le={};return le=ge.message==="Device in use"?ie==="video"?_r.q.ERROR_CAMERA_IN_USE:_r.q.ERROR_MICROPHONE_IN_USE:ie==="video"?_r.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:_r.q.ERROR_MICROPHONE_IN_USE,re.pushLogs({logText:le.message,logType:"ERROR",attributes:{error:"Error in ".concat(ie==="video"?"enableWebcam()":"enableMic()"," :: ").concat(ge.message)},dashboardLog:!0}),ee.completeSpan({message:ie==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(le.message):"Error in enableMic() :: occurred in creating audio track, ".concat(le.message),span:ae,status:2}),le}},{key:"createCameraVideoTrack",value:(M=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn;return g().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return re=ee.cameraId,ae=re===void 0?void 0:re,ie=ee.encoderConfig,le=ie===void 0?void 0:ie,De=ee.facingMode,Le=De===void 0?void 0:De,Ue=ee.optimizationMode,Et=Ue===void 0?void 0:Ue,Nt=ee.multiStream,qt=Nt===void 0||Nt,bn=le?li.$.videoProfiles[le]:li.$.videoProfiles.h360p_w640p,Vt={video:{deviceId:ae||void 0,facingMode:Le||void 0,width:bn.width,height:bn.height,frameRate:bn.frameRate}},xn.next=1,(0,ve.lp)(Vt);case 1:return hn=xn.sent,Et&&(hn.contentHint=Et),hn.encoderConfig=le||"h360p_w640p",hn.contentHint=Et||"",hn.multiStream=qt,hn.cameraId=ae,xn.abrupt("return",hn);case 2:case"end":return xn.stop()}},ge)})),function(ge){return M.apply(this,arguments)})},{key:"disableWebcam",value:(h=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn=arguments;return g().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(ae=xn.length>0&&xn[0]!==void 0?xn[0]:void 0,ie=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"disableWebcam() Calling",status:1,span:ae||null}),fe.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){Pe.next=1;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"Error in disableWebcam() :: Webcam Producer Not found"}),(De=this._videosdkLogs)===null||De===void 0||De.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),Pe.abrupt("return");case 1:return Le=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Webcam Producer",span:ie,status:1}),this._webcamProducer.close(),Ue=Ga(this._webcamProducer.id),gt.dispatch(Ue),this._eventEmitter.emit(Ue.type,Ue.payload),Pe.prev=2,Pe.next=3,this._socketRequest("closeProducer",{producerId:this._webcamProducer.id});case 3:(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:Le,status:1,message:"Requested Server to Close Producer"}),this._webcamProducer=null,(Nt=this._openTelemetry)===null||Nt===void 0||Nt.completeSpan({span:ie,status:1,message:"Webcam Disabled Successfully"}),Pe.next=5;break;case 4:Pe.prev=4,hn=Pe.catch(2),(qt=this._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:hn.message},dashboardLog:!0}),(bn=this._openTelemetry)===null||bn===void 0||bn.completeSpan({span:Le,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(hn)}),(Vt=this._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:ie,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(hn)}),gt.dispatch(tr({type:"error",text:"Error closing server-side webcam Producer: ".concat(hn)}));case 5:case"end":return Pe.stop()}},ge,this,[[2,4]])})),function(){return h.apply(this,arguments)})},{key:"getMics",value:(i=(0,_.A)(g().mark(function ge(){var ee,re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ee=[],ie.prev=1,ie.next=2,this._updateMics();case 2:this._mics.forEach(function(le,De){ee.push({deviceId:De,label:le.label})}),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("getMics() | Error",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:ae.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0});case 4:return ie.abrupt("return",ee);case 5:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return i.apply(this,arguments)})},{key:"changeMic",value:(Qi=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe;return g().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeMic() Calling"}),ft.prev=1,(0,E.A)(ee)!="object"){ft.next=4;break}return ft.next=2,this.disableMic(!0,ae);case 2:return ft.next=3,this.enableMic(ee,ae);case 3:ft.next=9;break;case 4:return Le=ee,ft.next=5,this._updateMics();case 5:if(Ue=Array.from(this._mics.keys()),Et=Ue.length,Nt=this._mic.device?this._mic.device.deviceId:void 0,Le!=null&&Le!=null?qt=Ue.indexOf(Le):(qt=Ue.indexOf(Nt))<Et-1?qt++:qt=0,this._mic.device=this._mics.get(Ue[qt]),bn=(ie=this._openTelemetry)===null||ie===void 0?void 0:ie.trace({spanName:"Getting Selected Mic",span:ae,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){ft.next=6;break}throw(Vt=this._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 6:return ft.next=7,this.disableMic(!0,ae);case 7:return ft.next=8,this.enableMic(void 0,ae);case 8:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:bn,status:1,message:"Done"}),(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:ae,status:1,message:"changeMic() Ending"});case 9:ft.next=11;break;case 10:ft.prev=10,Pe=ft.catch(1),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ae,status:2,message:"changeMic() | Error ".concat(Pe)}),(xn=this._videosdkLogs)===null||xn===void 0||xn.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:Pe.message}});case 11:case"end":return ft.stop()}},ge,this,[[1,10]])})),function(ge){return Qi.apply(this,arguments)})},{key:"getWebcams",value:(wi=(0,_.A)(g().mark(function ge(){var ee,re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ee=[],ie.prev=1,ie.next=2,this._updateWebcams();case 2:this._webcams.forEach(function(le,De){ee.push({deviceId:De,label:le.label,facingMode:le.facing||"environment"})}),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("getWebcams() | failed %o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:ae.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0});case 4:return ie.abrupt("return",ee);case 5:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return wi.apply(this,arguments)})},{key:"replaceWebcamStream",value:(jo=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!this._webcamProducer){ae.next=2;break}return re=ee.getVideoTracks()[0],ae.next=1,this._webcamProducer.replaceTrack({track:re});case 1:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),ae.next=4;break;case 2:return ae.next=3,this.disableWebcam();case 3:return ae.next=4,this.enableWebcam(ee);case 4:case"end":return ae.stop()}},ge,this)})),function(ge){return jo.apply(this,arguments)})},{key:"changeWebcam",value:(tc=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft;return g().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:if(ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeWebcam() Calling"}),gt.dispatch(yi(!0)),(0,E.A)(ee)!=="object"){Ot.next=6;break}return Ot.prev=1,Ot.next=2,this.disableWebcam(ae);case 2:return Ot.next=3,this.enableWebcam(ee,ae);case 3:Ot.next=5;break;case 4:Ot.prev=4,Pe=Ot.catch(1),fe.error("changeWebcam() | failed: %o",Pe),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(ee),error:Pe.message}}),gt.dispatch(tr({type:"error",text:"Could not change webcam: ".concat(Pe)}));case 5:Ot.next=12;break;case 6:return Ot.prev=6,Ot.next=7,this._updateWebcams(ae);case 7:if(Ue=Array.from(this._webcams.keys()),Et=Ue.length,Nt=this._webcam.device?this._webcam.device.deviceId:void 0,ee!=null&&ee!=null?qt=Ue.indexOf(ee):(qt=Ue.indexOf(Nt))<Et-1?qt++:qt=0,this._webcam.device=this._webcams.get(Ue[qt]),fe.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",bn=(le=this._openTelemetry)===null||le===void 0?void 0:le.trace({spanName:"Getting Selected Webcam",span:ae,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){Ot.next=8;break}throw(Vt=this._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 8:return Ot.next=9,this.disableWebcam(ae);case 9:return Ot.next=10,this.enableWebcam(void 0,ae);case 10:return(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:bn,status:1,message:"Done"}),(Le=this._openTelemetry)===null||Le===void 0||Le.completeSpan({span:ae,status:1,message:"changeWebcam() Ending"}),Ot.abrupt("return");case 11:Ot.prev=11,ft=Ot.catch(6),fe.error("changeWebcam() | failed: %o",ft),(hn=this._videosdkLogs)===null||hn===void 0||hn.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(ee),error:ft.message}}),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:ae,status:2,message:"Could not change webcam ".concat(ft)}),gt.dispatch(tr({type:"error",text:"Could not change webcam: ".concat(ft)}));case 12:gt.dispatch(yi(!1));case 13:case"end":return Ot.stop()}},ge,this,[[1,4],[6,11]])})),function(ge){return tc.apply(this,arguments)})},{key:"changeWebcamResolution",value:(xi=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le;return g().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:fe.debug("changeWebcamResolution()"),gt.dispatch(yi(!0)),Ue.prev=1,le=this._webcam.resolution,Ue.next=le==="qvga"?2:le==="vga"?3:le==="hd"?4:5;break;case 2:return this._webcam.resolution="vga",Ue.abrupt("continue",6);case 3:return this._webcam.resolution="hd",Ue.abrupt("continue",6);case 4:return this._webcam.resolution="qvga",Ue.abrupt("continue",6);case 5:this._webcam.resolution="hd";case 6:return fe.debug("changeWebcamResolution() | calling getUserMedia()"),Ue.prev=7,Ue.next=8,navigator.mediaDevices.getUserMedia({video:Oa({deviceId:{exact:this._webcam.device.deviceId}},lr[this._webcam.resolution])});case 8:ee=Ue.sent,Ue.next=10;break;case 9:return Ue.prev=9,De=Ue.catch(7),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(De)}}),De.message==="Permission denied"||De.name==="NotAllowedError"?this._emitError(_r.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(_r.q.ERROR_GET_VIDEO_MEDIA),Ue.abrupt("return");case 10:return ae=ee.getVideoTracks()[0],Ue.next=11,this._webcamProducer.replaceTrack({track:ae});case 11:gt.dispatch(ls(this._webcamProducer.id,ae)),Ue.next=13;break;case 12:Ue.prev=12,Le=Ue.catch(1),fe.error("changeWebcamResolution() | failed: %o",Le),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:Le.message}}),gt.dispatch(tr({type:"error",text:"Could not change webcam resolution: ".concat(Le)}));case 13:gt.dispatch(yi(!1));case 14:case"end":return Ue.stop()}},ge,this,[[1,12],[7,9]])})),function(){return xi.apply(this,arguments)})},{key:"enableShare",value:(gc=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft,Ot,mt,Mt,Ke,It,dn,Yt,gn,an,Cn,mn,Jt,yr,ur,Dt,An,Tr,ta,oa,ja,Fa,Gr,G,K,X,de,Ee,xe,we=this,We=arguments;return g().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(re=We.length>0&&We[0]!==void 0?We[0]:void 0,ae=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"enableShare() Calling ".concat(re?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:re?JSON.stringify(re):"Not Specify Custom Track"}}),fe.debug("enableShare()"),!this._shareProducer){ke.next=1;break}return(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"Screen Share Producer found"}),ke.abrupt("return");case 1:if(this._mediasoupDevice.canProduce("video")){ke.next=2;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"enableShare() | cannot produce video"}),fe.error("enableShare() | cannot produce video"),ke.abrupt("return");case 2:if(Ue=[],gt.dispatch(Pi(!0)),ke.prev=3,fe.debug("enableShare() | calling getUserMedia()"),xn=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Creating Track",span:ae}),!re||!re.active){ke.next=4;break}De=re.getVideoTracks()[0],Le=re.getAudioTracks()[0],re.multiStream?(Pe=De.getConstraints(),ft=Pe.height,Ot=Pe.frameRate,mt=li.$.screenShareProfiles["h".concat(ft,"p_").concat(Ot,"fps")],Mt=[{maxBitrate:mt.bitrates.high,maxFramerate:Ot,scalabilityMode:"S3T3",dtx:!0},{maxBitrate:mt.bitrates.medium,maxFramerate:Ot,scalabilityMode:"S2T3",dtx:!0},{maxBitrate:mt.bitrates.low,maxFramerate:Ot,scalabilityMode:"S1T3",dtx:!0}],Ue=Mt):Ue=Ds,ke.next=9;break;case 4:return ke.prev=4,ke.next=5,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 5:It=ke.sent,ke.next=7;break;case 6:return ke.prev=6,de=ke.catch(4),(dn=this._videosdkLogs)===null||dn===void 0||dn.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(de)}}),(Yt=this._openTelemetry)===null||Yt===void 0||Yt.completeSpan({span:ae,status:2,message:"Error in getDisplayMedia for screen share ".concat(de)}),de.message==="Permission denied"||de.name==="NotAllowedError"?this._emitError(_r.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(_r.q.ERROR_GET_DISPLAY_MEDIA),ke.abrupt("return");case 7:if(It){ke.next=8;break}return gt.dispatch(Pi(!0)),(gn=this._openTelemetry)===null||gn===void 0||gn.completeSpan({span:ae,status:2,message:"Stream not found"}),ke.abrupt("return");case 8:De=It.getVideoTracks()[0],Le=It.getAudioTracks()[0],Ue=Ds,(Ke=this._openTelemetry)===null||Ke===void 0||Ke.completeSpan({message:"Track Generated with height ".concat(De.getSettings().height," and width ").concat(De.getSettings().width),span:xn,status:1});case 9:if(an=(Nt=this._openTelemetry)===null||Nt===void 0?void 0:Nt.trace({spanName:"Generating Producer Configuration",span:ae}),mn={videoGoogleStartBitrate:1e3},!this._forceH264){ke.next=11;break}if(Cn=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Oe){return Oe.mimeType.toLowerCase()==="video/h264"})){ke.next=10;break}throw(Jt=this._videosdkLogs)===null||Jt===void 0||Jt.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 10:ke.next=12;break;case 11:if(!this._forceVP9){ke.next=12;break}if(Cn=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Oe){return Oe.mimeType.toLowerCase()==="video/vp9"})){ke.next=12;break}throw(yr=this._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 12:return(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:an,status:1,message:"Producer Configuration Generated"}),an=(bn=this._openTelemetry)===null||bn===void 0?void 0:bn.trace({spanName:"Creating Share Producer",span:ae}),ke.next=13,this._sendTransport.produce({track:De,encodings:Ue.length>0?Ue:Ds,codecOptions:mn,codec:Cn,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(Oe){we.e2eeManager&&(Oe.senderStreams=Oe.createEncodedStreams())}});case 13:if(this._shareProducer=ke.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareProducer),ur=Za({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareProducer,rtpSender:this._shareProducer.rtpSender}),gt.dispatch(ur),this._eventEmitter.emit(ur.type,ur.payload),this._shareProducer.on("transportclose",function(){var Oe,Xe=Ga(we._shareProducer.id);gt.dispatch(Xe),we._eventEmitter.emit(Xe.type,Xe.payload),(Oe=we._shareProducer)===null||Oe===void 0||Oe.close(),we._shareProducer=null}),this._shareProducer.on("trackended",function(){var Oe;(Oe=we._openTelemetry)===null||Oe===void 0||Oe.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:ae,status:2}),gt.dispatch(tr({type:"error",text:"Share disconnected!"})),we.disableShare().catch(function(){})}),(Vt=this._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:an,status:1,message:"Share Producer Created"}),!Le){ke.next=18;break}return ke.prev=14,Tr={opusStereo:1,opusDtx:1},an=(Dt=this._openTelemetry)===null||Dt===void 0?void 0:Dt.trace({spanName:"Creating Share Audio Producer",span:ae}),ke.next=15,this._sendTransport.produce({track:Le,codecOptions:Tr,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(Oe){we.e2eeManager&&(Oe.senderStreams=Oe.createEncodedStreams())}});case 15:this._shareAudioProducer=ke.sent,ta=Za({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareAudioProducer,rtpSender:this._shareAudioProducer.rtpSender}),gt.dispatch(ta),this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareAudioProducer),this._eventEmitter.emit(ta.type,ta.payload),this._shareAudioProducer.on("transportclose",function(){var Oe,Xe=Ga(we._shareAudioProducer.id);gt.dispatch(Xe),we._eventEmitter.emit(Xe.type,Xe.payload),(Oe=we._shareAudioProducer)===null||Oe===void 0||Oe.close(),we._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var Oe;(Oe=we._openTelemetry)===null||Oe===void 0||Oe.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:ae,status:2}),gt.dispatch(tr({type:"error",text:"Share disconnected!"}))}),(An=this._openTelemetry)===null||An===void 0||An.completeSpan({span:an,status:1,message:"Share Audio Producer Created"}),ke.next=18;break;case 16:return ke.prev=16,Ee=ke.catch(14),ke.next=17,this._socketRequest("produceError",{mediaType:"shareAudio",message:Ee.message});case 17:(oa=this._videosdkLogs)===null||oa===void 0||oa.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:Ee.message}});case 18:(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ae,status:1,message:"Enable Share Successful"}),ke.next=21;break;case 19:return ke.prev=19,xe=ke.catch(3),fe.error("enableShare() | failed:%o",xe),(ja=this._openTelemetry)===null||ja===void 0||ja.completeSpan({span:ae,status:2,attributes:{error:xe.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",xe.message),(Fa=this._videosdkLogs)===null||Fa===void 0||Fa.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:xe.message}}),xe.name!=="NotAllowedError"&&gt.dispatch(tr({type:"error",text:"Error sharing: ".concat(xe)})),ke.next=20,this._socketRequest("produceError",{mediaType:"share",message:xe.message});case 20:De&&De.stop(),Le&&Le.stop();case 21:gt.dispatch(Pi(!1)),this._shareProducer&&(Gr=0,(G=this._metrics.addNewProbe(this._shareProducer,"share_producer")).onStatsCollected=function(Oe){try{var Xe;we._stats.producerStats||(we._stats.producerStats={}),we._stats.producerStats.share||(we._stats.producerStats.share=[]),we._shareProducer&&(we._latestStats[(Xe=we._shareProducer)===null||Xe===void 0?void 0:Xe.id]=[]),Oe.video.forEach(function(Ae){var tt;we._shareProducer&&we._latestStats[(tt=we._shareProducer)===null||tt===void 0?void 0:tt.id].push(Ae)}),Gr%5==0&&we._shareProducer!=null&&we._stats.producerStats.share.push({timestamp:new Date,stats:we._latestStats[we._shareProducer.id]}),Gr++}catch(Ae){var $e;($e=we._videosdkLogs)===null||$e===void 0||$e.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ae.message}}),console.log("PRODUCER ERROR",Ae)}},G.start(),this._shareProducer.observer.on("close",function(){G.stop(),we._metrics.removeExistingProbe(G)})),this._shareAudioProducer&&(K=0,(X=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer")).onStatsCollected=function(Oe){try{var Xe;we._stats.producerStats||(we._stats.producerStats={}),we._stats.producerStats.shareAudio||(we._stats.producerStats.shareAudio=[]),we._shareAudioProducer&&(we._latestStats[(Xe=we._shareAudioProducer)===null||Xe===void 0?void 0:Xe.id]=[]),Oe.audio.forEach(function(Ae){var tt;we._shareAudioProducer&&we._latestStats[(tt=we._shareAudioProducer)===null||tt===void 0?void 0:tt.id].push(Ae)}),K%5==0&&we._shareAudioProducer!=null&&we._stats.producerStats.shareAudio.push(Oa({timestamp:new Date},we._latestStats[we._shareAudioProducer.id]?we._latestStats[we._shareAudioProducer.id][0]:{})),K++}catch(Ae){var $e;($e=we._videosdkLogs)===null||$e===void 0||$e.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ae.message}}),console.log("PRODUCER ERROR",Ae)}},X.start(),this._shareAudioProducer.observer.on("close",function(){X.stop(),we._metrics.removeExistingProbe(X)}));case 22:case"end":return ke.stop()}},ge,this,[[3,19],[4,6],[14,16]])})),function(){return gc.apply(this,arguments)})},{key:"disableShare",value:(Uc=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn;return g().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:if(fe.debug("disableShare()"),ie=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){xn.next=1;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"Share Producer Not found"}),xn.abrupt("return");case 1:return De=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Share Producer",span:ie,status:1}),this._shareProducer.close(),Le=Ga(this._shareProducer.id),gt.dispatch(Le),this._eventEmitter.emit(Le.type,Le.payload),this._shareAudioProducer&&(Nt=(Ue=this._openTelemetry)===null||Ue===void 0?void 0:Ue.trace({spanName:"Closing Share Audio Producer",span:ie,status:1}),this._shareAudioProducer.close(),Le=Ga(this._shareAudioProducer.id),gt.dispatch(Le),this._eventEmitter.emit(Le.type,Le.payload),(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:Nt,status:1,message:"Closed Share Audio Producer"})),xn.prev=2,xn.next=3,this._socketRequest("closeProducer",{producerId:this._shareProducer.id});case 3:if(!this._shareAudioProducer){xn.next=4;break}return xn.next=4,this._socketRequest("closeProducer",{producerId:this._shareAudioProducer.id});case 4:(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:De,status:1,message:"Requested Server to Close Producer"}),xn.next=6;break;case 5:xn.prev=5,hn=xn.catch(2),gt.dispatch(tr({type:"error",text:"Error closing server-side share Producer: ".concat(hn)})),(bn=this._openTelemetry)===null||bn===void 0||bn.completeSpan({span:ie,status:2,message:"Error closing server-side share Producer ".concat(hn)}),(Vt=this._videosdkLogs)===null||Vt===void 0||Vt.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:hn.message}});case 6:this._shareProducer=null,this._shareAudioProducer=null,(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"Screen Share Disabled Successfully"});case 7:case"end":return xn.stop()}},ge,this,[[2,5]])})),function(){return Uc.apply(this,arguments)})},{key:"enableAudioOnly",value:(Ki=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:fe.debug("enableAudioOnly()"),gt.dispatch(Da(!0)),this.disableWebcam(),ee=Wa(this._consumers.values()),le.prev=1,ee.s();case 2:if((re=ee.n()).done){le.next=5;break}if((ae=re.value).kind==="video"){le.next=3;break}return le.abrupt("continue",4);case 3:this._pauseConsumer(ae);case 4:le.next=2;break;case 5:le.next=7;break;case 6:le.prev=6,ie=le.catch(1),ee.e(ie);case 7:return le.prev=7,ee.f(),le.finish(7);case 8:gt.dispatch(Zr(!0)),gt.dispatch(Da(!1));case 9:case"end":return le.stop()}},ge,this,[[1,6,7,8]])})),function(){return Ki.apply(this,arguments)})},{key:"disableAudioOnly",value:(ec=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:fe.debug("disableAudioOnly()"),gt.dispatch(Da(!0)),!this._webcamProducer&&this._produce&&(Jn()||{}).webcamEnabled&&this.enableWebcam(),ee=Wa(this._consumers.values()),le.prev=1,ee.s();case 2:if((re=ee.n()).done){le.next=5;break}if((ae=re.value).kind==="video"){le.next=3;break}return le.abrupt("continue",4);case 3:this._resumeConsumer(ae);case 4:le.next=2;break;case 5:le.next=7;break;case 6:le.prev=6,ie=le.catch(1),ee.e(ie);case 7:return le.prev=7,ee.f(),le.finish(7);case 8:gt.dispatch(Zr(!1)),gt.dispatch(Da(!1));case 9:case"end":return le.stop()}},ge,this,[[1,6,7,8]])})),function(){return ec.apply(this,arguments)})},{key:"muteAudio",value:(Ta=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:fe.debug("muteAudio()"),gt.dispatch(ya(!0));case 1:case"end":return ee.stop()}},ge)})),function(){return Ta.apply(this,arguments)})},{key:"unmuteAudio",value:(Al=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:fe.debug("unmuteAudio()"),gt.dispatch(ya(!1));case 1:case"end":return ee.stop()}},ge)})),function(){return Al.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(Mo=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le,Ue,Et,Nt;return g().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return ie=ee.iceParameters,le=ee.transportId,De=ee.internalSpan,le===((re=this._sendTransport)===null||re===void 0?void 0:re.id)&&this._sendTransport.restartIce({iceParameters:ie}),le===((ae=this._recvTransport)===null||ae===void 0?void 0:ae.id)&&this._recvTransport.restartIce({iceParameters:ie}),qt.prev=1,qt.next=2,this._socketRequest("iceRestarted",{transportId:le});case 2:(Le=this._openTelemetry)===null||Le===void 0||Le.completeSpan({span:De,status:1,message:"iceRestarted"}),qt.next=4;break;case 3:qt.prev=3,Nt=qt.catch(1),(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:De,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(Nt)}),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:Nt.message}}),gt.dispatch(tr({type:"error",text:"ICE restart failed: ".concat(Nt)}));case 4:case"end":return qt.stop()}},ge,this,[[1,3]])})),function(ge){return Mo.apply(this,arguments)})},{key:"restartIce",value:(Oi=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(fe.debug("restartIce()"),gt.dispatch(Ca(!0)),le.prev=1,!this._sendTransport){le.next=3;break}return le.next=2,this._socketRequest("restartIce",{transportId:this._sendTransport.id});case 2:return ee=le.sent,le.next=3,this._sendTransport.restartIce({iceParameters:ee});case 3:if(!this._recvTransport){le.next=5;break}return le.next=4,this._socketRequest("restartIce",{transportId:this._recvTransport.id});case 4:return re=le.sent,le.next=5,this._recvTransport.restartIce({iceParameters:re});case 5:gt.dispatch(tr({text:"ICE restarted"})),le.next=7;break;case 6:le.prev=6,ie=le.catch(1),fe.error("restartIce() | failed:%o",ie),gt.dispatch(tr({type:"error",text:"ICE restart failed: ".concat(ie)})),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:ie.message}});case 7:gt.dispatch(Ca(!1));case 8:case"end":return le.stop()}},ge,this,[[1,6]])})),function(){return Oi.apply(this,arguments)})},{key:"_socketRequest",value:(Jo=(0,_.A)(g().mark(function ge(ee){var re,ae=this,ie=arguments;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return re=ie.length>1&&ie[1]!==void 0?ie[1]:{},le.abrupt("return",new Promise(function(De,Le){ae._webSocket.emit("request",{method:ee,request:!0,data:re},function(Ue){Ue!=null&&Ue.error?Le(new Error(Ue.error)):De(Ue.data)})}));case 1:case"end":return le.stop()}},ge)})),function(ge){return Jo.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(co=(0,_.A)(g().mark(function ge(ee){var re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",ee),ie.prev=1,!this._webcamProducer){ie.next=3;break}return ie.next=2,this._webcamProducer.setMaxSpatialLayer(ee);case 2:ie.next=4;break;case 3:if(!this._shareProducer){ie.next=4;break}return ie.next=4,this._shareProducer.setMaxSpatialLayer(ee);case 4:ie.next=6;break;case 5:ie.prev=5,ae=ie.catch(1),fe.error("setMaxSendingSpatialLayer() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:ae.message}}),gt.dispatch(tr({type:"error",text:"Error setting max sending video spatial layer: ".concat(ae)}));case 6:case"end":return ie.stop()}},ge,this,[[1,5]])})),function(ge){return co.apply(this,arguments)})},{key:"setWebcamQuality",value:(wo=(0,_.A)(g().mark(function ge(ee){var re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(this._webcamProducer){ie.next=1;break}return ie.abrupt("return");case 1:if(re=this._webcam.resolution,ae=To[re][ee].s,this._webcamProducer.maxSpatialLayer!=ae){ie.next=2;break}return ie.abrupt("return");case 2:return ie.next=3,this._webcamProducer.setMaxSpatialLayer(ae);case 3:case"end":return ie.stop()}},ge,this)})),function(ge){return wo.apply(this,arguments)})},{key:"setConsumerScreenShareQuality",value:(Ms=(0,_.A)(g().mark(function ge(ee,re){var ae,ie,le,De,Le,Ue;return g().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return De=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:'Setting "'.concat(re,'" Quality for Screen Share')}),Ue=(Le={high:{spatialLayer:2,temporalLayer:2},med:{spatialLayer:1,temporalLayer:2},low:{spatialLayer:0,temporalLayer:2}})[re]||Le.high,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:De,attributes:{selectedQuality:Ue},status:1}),Et.next=1,this.setConsumerPreferredLayers(ee,Ue.spatialLayer,Ue.temporalLayer);case 1:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Done",span:De,status:1});case 2:case"end":return Et.stop()}},ge,this)})),function(ge,ee){return Ms.apply(this,arguments)})},{key:"setConsumerQuality",value:(Oo=(0,_.A)(g().mark(function ge(ee,re){var ae,ie,le,De,Le,Ue,Et;return g().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return De=this._webcam.resolution,Le=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:'Setting "'.concat(re,'" Quality')}),Ue=To[De][re].s,Et=To[De][re].t,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Le,attributes:{spatialLayers:JSON.parse(Ue),temporalLayers:JSON.parse(Et)},status:1}),Nt.next=1,this.setConsumerPreferredLayers(ee,Ue,Et);case 1:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Done",span:Le,status:1});case 2:case"end":return Nt.stop()}},ge,this)})),function(ge,ee){return Oo.apply(this,arguments)})},{key:"setViewPort",value:(fi=(0,_.A)(g().mark(function ge(ee,re,ae){var ie,le,De,Le;return g().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if(this._consumers.get(ee.id)){Ue.next=1;break}return Ue.abrupt("return");case 1:if(ie=(0,ci.ed)(this._consumers.get(ee.id),re,ae),le=ie.consumerId,De=ie.newPreferredSpatialLayer,Le=ie.newPreferredTemporalLayer,De!==ee.preferredSpatialLayer||Le!==ee.preferredTemporalLayer){Ue.next=2;break}return Ue.abrupt("return");case 2:if(!le){Ue.next=3;break}return Ue.next=3,this.setConsumerPreferredLayers(le,De,Le);case 3:case"end":return Ue.stop()}},ge,this)})),function(ge,ee,re){return fi.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(xo=(0,_.A)(g().mark(function ge(ee,re,ae){var ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return fe.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",ee,re,ae),Le.prev=1,(ie=this._consumers.get(ee)).spatialLayers>1&&(ie.preferredSpatialLayer=re,ie.preferredTemporalLayer=ae),Le.next=2,this._socketRequest("setConsumerPreferredLayers",{consumerId:ee,spatialLayer:re,temporalLayer:ae});case 2:gt.dispatch(uc(ee,re,ae)),Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),fe.error("setConsumerPreferredLayers() | failed:%o",De),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:De.message}}),gt.dispatch(tr({type:"error",text:"Error setting Consumer preferred layers: ".concat(De)}));case 4:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(ge,ee,re){return xo.apply(this,arguments)})},{key:"setConsumerPriority",value:(Os=(0,_.A)(g().mark(function ge(ee,re){var ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return fe.debug("setConsumerPriority() [consumerId:%s, priority:%d]",ee,re),le.prev=1,le.next=2,this._socketRequest("setConsumerPriority",{consumerId:ee,priority:re});case 2:gt.dispatch(Cr(ee,re)),le.next=4;break;case 3:le.prev=3,ie=le.catch(1),fe.error("setConsumerPriority() | failed:%o",ie),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:ie.message}}),gt.dispatch(tr({type:"error",text:"Error setting Consumer priority: ".concat(ie)}));case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge,ee){return Os.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(vs=(0,_.A)(g().mark(function ge(ee){var re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return fe.debug("requestConsumerKeyFrame() [consumerId:%s]",ee),ie.prev=1,ie.next=2,this._socketRequest("requestConsumerKeyFrame",{consumerId:ee});case 2:gt.dispatch(tr({text:"Keyframe requested for video consumer"})),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("requestConsumerKeyFrame() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:ae.message}}),gt.dispatch(tr({type:"error",text:"Error requesting key frame for Consumer: ".concat(ae)}));case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return vs.apply(this,arguments)})},{key:"enableChatDataProducer",value:(Ai=(0,_.A)(g().mark(function ge(){var ee,re,ae=this;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("enableChatDataProducer()"),this._useDataChannel){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 2:this._chatDataProducer=ie.sent,gt.dispatch(ro({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){ae._chatDataProducer=null}),this._chatDataProducer.on("open",function(){fe.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){fe.error('chat DataProducer "close" event'),ae._chatDataProducer=null,gt.dispatch(tr({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(le){fe.error('chat DataProducer "error" event:%o',le),gt.dispatch(tr({type:"error",text:"Chat DataProducer error: ".concat(le)}))}),this._chatDataProducer.on("bufferedamountlow",function(){fe.debug('chat DataProducer "bufferedamountlow" event')}),ie.next=4;break;case 3:throw ie.prev=3,re=ie.catch(1),fe.error("enableChatDataProducer() | failed:%o",re),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:re.message}}),gt.dispatch(tr({type:"error",text:"Error enabling chat DataProducer: ".concat(re)})),re;case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return Ai.apply(this,arguments)})},{key:"enableBotDataProducer",value:(As=(0,_.A)(g().mark(function ge(){var ee,re,ae=this;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("enableBotDataProducer()"),this._useDataChannel){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 2:this._botDataProducer=ie.sent,gt.dispatch(ro({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){ae._botDataProducer=null}),this._botDataProducer.on("open",function(){fe.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){fe.error('bot DataProducer "close" event'),ae._botDataProducer=null,gt.dispatch(tr({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(le){fe.error('bot DataProducer "error" event:%o',le),gt.dispatch(tr({type:"error",text:"Bot DataProducer error: ".concat(le)}))}),this._botDataProducer.on("bufferedamountlow",function(){fe.debug('bot DataProducer "bufferedamountlow" event')}),ie.next=4;break;case 3:throw ie.prev=3,re=ie.catch(1),fe.error("enableBotDataProducer() | failed:%o",re),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:re.message}}),gt.dispatch(tr({type:"error",text:"Error enabling bot DataProducer: ".concat(re)})),re;case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return As.apply(this,arguments)})},{key:"sendChatMessage",value:(qs=(0,_.A)(g().mark(function ge(ee){return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug('sendChatMessage() [text:"%s]',ee),this._chatDataProducer){re.next=1;break}return gt.dispatch(tr({type:"error",text:"No chat DataProducer"})),re.abrupt("return");case 1:try{this._chatDataProducer.send(ee)}catch(ae){fe.error("chat DataProducer.send() failed:%o",ae),gt.dispatch(tr({type:"error",text:"chat DataProducer.send() failed: ".concat(ae)}))}case 2:case"end":return re.stop()}},ge,this)})),function(ge){return qs.apply(this,arguments)})},{key:"sendBotMessage",value:(Xo=(0,_.A)(g().mark(function ge(ee){return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug('sendBotMessage() [text:"%s]',ee),this._botDataProducer){re.next=1;break}return gt.dispatch(tr({type:"error",text:"No bot DataProducer"})),re.abrupt("return");case 1:try{this._botDataProducer.send(ee)}catch(ae){fe.error("bot DataProducer.send() failed:%o",ae),gt.dispatch(tr({type:"error",text:"bot DataProducer.send() failed: ".concat(ae)}))}case 2:case"end":return re.stop()}},ge,this)})),function(ge){return Xo.apply(this,arguments)})},{key:"changeDisplayName",value:(Ao=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return fe.debug('changeDisplayName() [displayName:"%s"]',ee),pn({displayName:ee}),ae.prev=1,ae.next=2,this._socketRequest("changeDisplayName",{displayName:ee});case 2:this._displayName=ee,gt.dispatch(Fn(ee)),gt.dispatch(tr({text:"Display name changed"})),ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),fe.error("changeDisplayName() | failed: %o",re),gt.dispatch(tr({type:"error",text:"Could not change display name: ".concat(re)})),gt.dispatch(Fn());case 4:case"end":return ae.stop()}},ge,this,[[1,3]])})),function(ge){return Ao.apply(this,arguments)})},{key:"openConnection",value:(mc=(0,_.A)(g().mark(function ge(ee){var re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=ee.roomId,ae=ee.payload,ie.next=1,this._socketRequest("openConnection",{roomId:re,payload:ae}).catch(function(le){throw new Error(le)});case 1:case"end":return ie.stop()}},ge,this)})),function(ge){return mc.apply(this,arguments)})},{key:"closeConnection",value:(Qo=(0,_.A)(g().mark(function ge(ee){return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=1,this._socketRequest("closeConnection",{roomId:ee});case 1:case"end":return re.stop()}},ge,this)})),function(ge){return Qo.apply(this,arguments)})},{key:"switchPeerRoom",value:(il=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return re=ee.peerId,ae=ee.roomId,ie=ee.payload,le=ee.token,De.next=1,this._socketRequest("switchPeerRoom",{roomId:ae,peerId:re,payload:ie,token:le});case 1:case"end":return De.stop()}},ge,this)})),function(ge){return il.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(Yi=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return re=ee.roomId,ae=ee.connectionRoomId,ie=ee.peerId,le=ee.payload,De=ee.token,Le.next=1,this._socketRequest("connectionSwitchPeerRoom",{roomId:re,connectionRoomId:ae,peerId:ie,payload:le,token:De});case 1:case"end":return Le.stop()}},ge,this)})),function(ge){return Yi.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(pi=(0,_.A)(g().mark(function ge(ee){var re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=ee.roomId,ae=ee.message,ie.next=1,this._socketRequest("connectionSendChatMessage",{roomId:re,message:ae});case 1:case"end":return ie.stop()}},ge,this)})),function(ge){return pi.apply(this,arguments)})},{key:"connectionEndMeeting",value:(fc=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return re=ee.roomId,ae.next=1,this._socketRequest("connectionCloseRoom",{roomId:re});case 1:case"end":return ae.stop()}},ge,this)})),function(ge){return fc.apply(this,arguments)})},{key:"pubsubPublish",value:(Gi=(0,_.A)(g().mark(function ge(ee,re,ae,ie){var le,De,Le,Ue,Et,Nt,qt;return g().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:if(bn.prev=0,ae!=null&&ae.sendOnly){if(le=ae.sendOnly,De=[],le){Le=Wa(le);try{for(Le.s();!(Ue=Le.n()).done;)(Et=Ue.value)&&De.push(Et.toString())}catch(Vt){Le.e(Vt)}finally{Le.f()}}ae.sendOnly=De}return bn.next=1,this._socketRequest("pubsubPublish",{topic:ee,message:re,options:ae,payload:ie});case 1:bn.next=3;break;case 2:bn.prev=2,qt=bn.catch(0),(Nt=this._videosdkLogs)===null||Nt===void 0||Nt.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:qt.message}}),fe.error("pubsubPublish() | failed: %o",qt);case 3:case"end":return bn.stop()}},ge,this,[[0,2]])})),function(ge,ee,re,ae){return Gi.apply(this,arguments)})},{key:"pubsubSubscribe",value:(zc=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return le.prev=1,le.next=2,this._socketRequest("pubsubSubscribe",{topic:ee});case 2:return re=le.sent,le.abrupt("return",re);case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("pubsubSubscribe() | failed: %o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return zc.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(Ko=(0,_.A)(g().mark(function ge(ee){var re,ae,ie;return g().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return le.prev=1,le.next=2,this._socketRequest("pubsubUnsubscribe",{topic:ee});case 2:(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat(ee),logType:"INFO"}),le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("pubsubUnsubscribe() | failed: %o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return Ko.apply(this,arguments)})},{key:"closeRoom",value:(oo=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=1,this._socketRequest("closeRoom",{});case 1:case"end":return ee.stop()}},ge,this)})),function(){return oo.apply(this,arguments)})},{key:"removePeer",value:(hi=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if((re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Removing peer ".concat(ee),status:1}),ee!=null){ae.next=1;break}return ae.abrupt("return");case 1:return ae.next=2,this._socketRequest("removePeer",{peerId:ee});case 2:case"end":return ae.stop()}},ge,this)})),function(ge){return hi.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(pc=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(fe.debug("getSendTransportRemoteStats()"),this._sendTransport){ee.next=1;break}return ee.abrupt("return");case 1:return ee.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._sendTransport.id}));case 2:case"end":return ee.stop()}},ge,this)})),function(){return pc.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(Bc=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(fe.debug("getRecvTransportRemoteStats()"),this._recvTransport){ee.next=1;break}return ee.abrupt("return");case 1:return ee.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._recvTransport.id}));case 2:case"end":return ee.stop()}},ge,this)})),function(){return Bc.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(Do=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getAudioRemoteStats()"),ee=this._micProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[ee.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return Do.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(di=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getVideoRemoteStats()"),ee=this._webcamProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[ee.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return di.apply(this,arguments)})},{key:"getShareRemoteStats",value:(ei=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getVideoRemoteStats()"),ee=this._shareProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[ee.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return ei.apply(this,arguments)})},{key:"getShareAudioRemoteStats",value:(No=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(ee=this._shareAudioProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[ee.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return No.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(bo=(0,_.A)(g().mark(function ge(ee){var re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("getConsumerRemoteStats()"),re=this._consumers.get(ee)){ie.next=1;break}return ie.abrupt("return");case 1:return this._latestStats[ee]&&(this._latestStats[ee][0].currentSpatialLayer=re.currentSpatialLayer,this._latestStats[ee][0].currentTemporalLayer=re.currentTemporalLayer,this._latestStats[ee][0].preferredSpatialLayer=re.preferredSpatialLayer,this._latestStats[ee][0].preferredTemporalLayer=re.preferredTemporalLayer),ae=re.track.id.replace(/[{}]/g,""),ie.abrupt("return",this._latestStats[ae]);case 2:case"end":return ie.stop()}},ge,this)})),function(ge){return bo.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(_o=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getChatDataProducerRemoteStats()"),ee=this._chatDataProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:ee.id}));case 2:case"end":return re.stop()}},ge,this)})),function(){return _o.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(bi=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getBotDataProducerRemoteStats()"),ee=this._botDataProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:ee.id}));case 2:case"end":return re.stop()}},ge,this)})),function(){return bi.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(Zi=(0,_.A)(g().mark(function ge(ee){return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(ee)){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataConsumerStats",{dataConsumerId:ee}));case 2:case"end":return re.stop()}},ge,this)})),function(ge){return Zi.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:($i=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(fe.debug("getSendTransportLocalStats()"),this._sendTransport){ee.next=1;break}return ee.abrupt("return");case 1:return ee.abrupt("return",this._sendTransport.getStats());case 2:case"end":return ee.stop()}},ge,this)})),function(){return $i.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(ia=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(fe.debug("getRecvTransportLocalStats()"),this._recvTransport){ee.next=1;break}return ee.abrupt("return");case 1:return ee.abrupt("return",this._recvTransport.getStats());case 2:case"end":return ee.stop()}},ge,this)})),function(){return ia.apply(this,arguments)})},{key:"getAudioLocalStats",value:(pa=(0,_.A)(g().mark(function ge(){return g().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(fe.debug("getAudioLocalStats()"),this._micProducer){ee.next=1;break}return ee.abrupt("return");case 1:return ee.abrupt("return",this._micProducer.getStats());case 2:case"end":return ee.stop()}},ge,this)})),function(){return pa.apply(this,arguments)})},{key:"getVideoLocalStats",value:(Jr=(0,_.A)(g().mark(function ge(){var ee;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getVideoLocalStats()"),ee=this._webcamProducer||this._shareProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",ee.getStats());case 2:case"end":return re.stop()}},ge,this)})),function(){return Jr.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(sa=(0,_.A)(g().mark(function ge(ee){var re;return g().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(re=this._consumers.get(ee)){ae.next=1;break}return ae.abrupt("return");case 1:return ae.abrupt("return",re.getStats());case 2:case"end":return ae.stop()}},ge,this)})),function(ge){return sa.apply(this,arguments)})},{key:"getTransportRemoteStats",value:(kn=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(ie=ee.participantId){Le.next=1;break}return Le.abrupt("return");case 1:return Le.next=2,this._socketRequest("getTransportStats",{peerId:ie});case 2:return le=Le.sent,De={availableBitrate:le==null||(re=le.recv)===null||re===void 0?void 0:re.availableBitrate,targetBitrate:le==null||(ae=le.recv)===null||ae===void 0?void 0:ae.targetBitrate},Le.abrupt("return",De);case 3:case"end":return Le.stop()}},ge,this)})),function(ge){return kn.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(Gn=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De;return g().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return re=ee.uplink,ae=ee.downlink,ie=ee.rtt,le=ee.secret,fe.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",re,ae,ie),Le.prev=1,Le.next=2,this._socketRequest("applyNetworkThrottle",{uplink:re,downlink:ae,rtt:ie,secret:le});case 2:Le.next=4;break;case 3:Le.prev=3,De=Le.catch(1),fe.error("applyNetworkThrottle() | failed:%o",De),gt.dispatch(tr({type:"error",text:"Error applying network throttle: ".concat(De)}));case 4:case"end":return Le.stop()}},ge,this,[[1,3]])})),function(ge){return Gn.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(Gt=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le;return g().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return re=ee.silent,ae=re!==void 0&&re,ie=ee.secret,fe.debug("resetNetworkThrottle()"),De.prev=1,De.next=2,this._socketRequest("resetNetworkThrottle",{secret:ie});case 2:De.next=4;break;case 3:De.prev=3,le=De.catch(1),ae||(fe.error("resetNetworkThrottle() | failed:%o",le),gt.dispatch(tr({type:"error",text:"Error resetting network throttle: ".concat(le)})));case 4:case"end":return De.stop()}},ge,this,[[1,3]])})),function(ge){return Gt.apply(this,arguments)})},{key:"createProducerTransport",value:(zn=(0,_.A)(g().mark(function ge(ee,re){var ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft=this;return g().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:le=ee.id,De=ee.iceParameters,Le=ee.iceCandidates,Ue=ee.dtlsParameters,Et=ee.sctpParameters,Nt=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"Creating Send Transport",span:re||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:le,iceParameters:De,iceCandidates:Le,dtlsParameters:Ue,sctpParameters:Et,iceServers:this._iceServers}),qt=new Map,bn=new Map,hn=!1,xn=!1,Pe=!1,this._sendTransportInternal=setInterval((0,_.A)(g().mark(function mt(){var Mt,Ke,It,dn,Yt,gn,an,Cn,mn,Jt,yr,ur;return g().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Mt=[],Dt.prev=1,Dt.next=2,ft._sendTransport.getStats();case 2:Ke=Dt.sent,Dt.next=4;break;case 3:return Dt.prev=3,ur=Dt.catch(1),console.error("Error fetching stats:",ur),Dt.abrupt("return");case 4:try{Ke.forEach(function(An){try{if(An.type==="outbound-rtp"){var Tr={qualityLimitationReason:An.qualityLimitationReason};qt.set(An.id,Tr)}if(An.type==="remote-inbound-rtp"&&An.totalRoundTripTime&&An.roundTripTimeMeasurements){var ta=bn.get(An.id);ta||(ta={totalRoundTripTime:0,roundTripTimeMeasurements:0},bn.set(An.id,ta));var oa=An.roundTripTimeMeasurements-ta.roundTripTimeMeasurements,ja=An.totalRoundTripTime-ta.totalRoundTripTime;if(oa>0&&ja>0){var Fa=ja/oa;ta.totalRoundTripTime=An.totalRoundTripTime,ta.roundTripTimeMeasurements=An.roundTripTimeMeasurements,Mt.push(1e3*Fa)}}}catch{}});try{It=Mt.reduce(function(An,Tr){return An+Tr},0)/Mt.length,Number.isNaN(It)||(Vt||(Vt=It),dn=(0,y.A)(qt.values()).some(function(An){return An.qualityLimitationReason==="bandwidth"}),Yt=(0,y.A)(qt.values()).some(function(An){return An.qualityLimitationReason==="cpu"}),!hn&&dn&&It-Vt>50?((gn=ft._videosdkLogs)===null||gn===void 0||gn.pushLogs({logType:"WARN",attributes:{avgRoundTripTimeInMs:It,ewmaRttInMs:Vt},logText:"Send Transport Congestion detected, the network is bandwidth limited and the round trip time is increasing (ewmaRtt: ".concat(Vt,", avgRoundTripTime: ").concat(It,")")}),hn=!0,ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"congestion",state:"detected",timestamp:new Date().getTime()})):hn&&It-Vt<30&&((an=ft._videosdkLogs)===null||an===void 0||an.pushLogs({logType:"INFO",attributes:{avgRoundTripTimeInMs:It,ewmaRttInMs:Vt},logText:"Send Transport  Congestion resolved, the round trip time is back to normal (ewmaRtt: ".concat(Vt,", avgRoundTripTime: ").concat(It,")")}),hn=!1,ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"congestion",state:"resolved",timestamp:new Date().getTime()})),dn&&!Pe?((Cn=ft._videosdkLogs)===null||Cn===void 0||Cn.pushLogs({logType:"WARN",logText:"Bandwidth Limitation detected"}),ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"bandwidth",state:"detected",timestamp:new Date().getTime()}),Pe=!0):!dn&&Pe&&((mn=ft._videosdkLogs)===null||mn===void 0||mn.pushLogs({logType:"INFO",logText:"Bandwidth Limitation resolved"}),ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"bandwidth",state:"resolved",timestamp:new Date().getTime()}),Pe=!1),Vt=.9*Vt+.1*It,!xn&&Yt?(ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"cpu",state:"detected",timestamp:new Date().getTime()}),(Jt=ft._videosdkLogs)===null||Jt===void 0||Jt.pushLogs({logType:"WARN",logText:"CPU Limitation detected"}),xn=!0):xn&&!Yt&&(ft._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"cpu",state:"resolved",timestamp:new Date().getTime()}),(yr=ft._videosdkLogs)===null||yr===void 0||yr.pushLogs({logType:"INFO",logText:"CPU Limitation resolved"}),xn=!1))}catch{}}catch{}case 5:case"end":return Dt.stop()}},mt,null,[[1,3]])})),1e3),this._sendTransport.on("connect",function(mt,Mt,Ke){var It,dn=mt.dtlsParameters;(It=ft._openTelemetry)===null||It===void 0||It.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:Nt,status:1}),ft._socketRequest("connectWebRtcTransport",{transportId:ft._sendTransport.id,dtlsParameters:dn}).then(function(){Mt()}).catch(function(Yt){Ke(Yt)})}),this._sendTransport.on("produce",function(){var mt=(0,_.A)(g().mark(function Mt(Ke,It,dn){var Yt,gn,an,Cn,mn,Jt,yr,ur;return g().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Yt=Ke.kind,gn=Ke.rtpParameters,an=Ke.appData,Dt.prev=1,(Cn=ft._openTelemetry)===null||Cn===void 0||Cn.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:Nt,status:1}),Dt.next=2,ft._socketRequest("produce",{transportId:ft._sendTransport.id,kind:Yt,rtpParameters:gn,appData:an});case 2:mn=Dt.sent,Jt=mn.id,It({id:Jt}),Dt.next=4;break;case 3:Dt.prev=3,ur=Dt.catch(1),(yr=ft._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:ur.message}}),dn(ur);case 4:case"end":return Dt.stop()}},Mt,null,[[1,3]])}));return function(Mt,Ke,It){return mt.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var mt=(0,_.A)(g().mark(function Mt(Ke,It,dn){var Yt,gn,an,Cn,mn,Jt,yr,ur;return g().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Yt=Ke.sctpStreamParameters,gn=Ke.label,an=Ke.protocol,Cn=Ke.appData,Dt.prev=1,Dt.next=2,ft._socketRequest("produceData",{transportId:ft._sendTransport.id,sctpStreamParameters:Yt,label:gn,protocol:an,appData:Cn});case 2:mn=Dt.sent,Jt=mn.id,It({id:Jt}),Dt.next=4;break;case 3:Dt.prev=3,ur=Dt.catch(1),(yr=ft._videosdkLogs)===null||yr===void 0||yr.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:ur.message}}),dn(ur);case 4:case"end":return Dt.stop()}},Mt,null,[[1,3]])}));return function(Mt,Ke,It){return mt.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(){var mt=(0,_.A)(g().mark(function Mt(Ke){var It,dn,Yt,gn,an,Cn;return g().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return an=Array,mn.next=1,ft._sendTransport.getStats();case 1:Cn=mn.sent,(dn=an.from.call(an,Cn).filter(function(Jt){var yr=(0,f.A)(Jt,2)[1];return yr.type==="local-candidate"||yr.type==="remote-candidate"}).map(function(Jt){return(0,f.A)(Jt,2)[1]})).length>0&&((Yt=ft._videosdkLogs)===null||Yt===void 0||Yt.pushLogs({logText:'Send Trasnport State Change "'.concat(Ke,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(dn)}})),Ke==="connected"&&ft.emitMeetingStateChange(Xs),(It=ft._openTelemetry)===null||It===void 0||It.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(Ke),span:Nt,status:1}),Ke==="failed"&&((gn=ft._videosdkLogs)===null||gn===void 0||gn.pushLogs({logText:"ERROR_MEETING_MEDIA_CONNECTION_FAILED",logType:"ERROR",attributes:{error:"Unable to connect to the meeting or media. Please check your network connection, ensure your firewall or security settings are not blocking the application, or try connecting using a different network."},dashboardLog:!0}),ft.restartIce()),ft._transportState=Ke;case 2:case"end":return mn.stop()}},Mt)}));return function(Mt){return mt.apply(this,arguments)}}()),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:Nt,status:1,message:"Send Transport Created Successfully"});case 1:case"end":return Ot.stop()}},ge,this)})),function(ge,ee){return zn.apply(this,arguments)})},{key:"createConsumerTransport",value:(xt=(0,_.A)(g().mark(function ge(ee,re){var ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft=this;return g().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:le=ee.id,De=ee.iceParameters,Le=ee.iceCandidates,Ue=ee.dtlsParameters,Et=ee.sctpParameters,Nt=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"Creating Recieve Transport",span:re||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:le,iceParameters:De,iceCandidates:Le,dtlsParameters:Ue,sctpParameters:Et,iceServers:this._iceServers}),this._recvTransport.on("connect",function(mt,Mt,Ke){var It,dn=mt.dtlsParameters;(It=ft._openTelemetry)===null||It===void 0||It.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:Nt,status:1}),ft._socketRequest("connectWebRtcTransport",{transportId:ft._recvTransport.id,dtlsParameters:dn}).then(function(){Mt()}).catch(function(Yt){Ke(Yt)})}),this._recvTransport.on("connectionstatechange",function(){var mt=(0,_.A)(g().mark(function Mt(Ke){var It,dn,Yt,gn,an;return g().wrap(function(Cn){for(;;)switch(Cn.prev=Cn.next){case 0:return gn=Array,Cn.next=1,ft._recvTransport.getStats();case 1:an=Cn.sent,(dn=gn.from.call(gn,an).filter(function(mn){var Jt=(0,f.A)(mn,2)[1];return Jt.type==="local-candidate"||Jt.type==="remote-candidate"}).map(function(mn){return(0,f.A)(mn,2)[1]})).length>0&&((Yt=ft._videosdkLogs)===null||Yt===void 0||Yt.pushLogs({logText:'Recv Trasnport State Change "'.concat(Ke,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(dn)}})),(It=ft._openTelemetry)===null||It===void 0||It.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(Ke),span:Nt,status:1}),Ke==="failed"&&ft.restartIce(),ft._transportState=Ke;case 2:case"end":return Cn.stop()}},Mt)}));return function(Mt){return mt.apply(this,arguments)}}()),qt=0,bn=this._metrics.addNewProbe(this._recvTransport,"transport"),Vt=new Map,hn=new Map,xn=new Map,Pe=new Set,bn.onStatsCollected=function(mt){try{var Mt=function(dn,Yt,gn){ft._stats.consumerStats||(ft._stats.consumerStats={});var an=Yt.appData.peerId;ft._stats.consumerStats[an]||(ft._stats.consumerStats[an]={}),ft._stats.consumerStats[an][gn]||(ft._stats.consumerStats[an][gn]=[]),ft._latestStats[Yt.track.id.replace(/[{}]/g,"")]=[dn],qt%5==0&&ft._stats.consumerStats[an][gn].push(dn)},Ke=function(dn){mt[dn].forEach(function(Yt){var gn,an=Wa(ft._consumers);try{for(an.s();!(gn=an.n()).done;){var Cn=(0,f.A)(gn.value,2),mn=(Cn[0],Cn[1]),Jt=mn.track.id.replace(/[{}]/g,"");if(Jt===Yt.trackId){var yr=mn.appData.share?mn.kind==="audio"?"shareAudio":"share":mn.kind;if(Mt(Yt,mn,yr),yr==="audio"||yr==="shareAudio")return;if(Yt.bitrate>0)Vt.has(Jt)&&Vt.delete(Jt);else{var ur=Vt.get(Jt);ur?ur.detected+5e3<Date.now()&&ft._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"stuck",peerId:mn.appData.peerId,streamId:Jt}):Vt.set(Jt,{detected:Date.now()})}var Dt=Yt.trackId,An=Yt.freezeCount;if(!Dt||An===void 0)return;var Tr=hn.get(Dt);if(Tr===void 0)return void hn.set(Dt,An);if(An>Tr)ft._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"freeze-detected",peerId:mn.appData.peerId,streamId:Jt}),xn.set(Dt,Date.now()),Pe.delete(Dt);else{var ta=xn.get(Dt);ta&&!Pe.has(Dt)&&Date.now()-ta>5e3&&(ft._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"freeze-resolved",peerId:mn.appData.peerId,streamId:Jt}),Pe.add(Dt))}hn.set(Dt,An)}}}catch(oa){an.e(oa)}finally{an.f()}})};Ke("audio"),Ke("video"),qt++}catch(dn){var It;(It=ft._videosdkLogs)===null||It===void 0||It.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:dn.message}}),console.log("CONSUMER CATCH",dn)}},bn.start(),this._recvTransport.observer.on("close",function(){bn.stop(),ft._metrics.removeExistingProbe(bn)}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:Nt,status:1,message:"Recieve Transport Created Successfully"});case 1:case"end":return Ot.stop()}},ge,this)})),function(ge,ee){return xt.apply(this,arguments)})},{key:"emitMeetingStateChange",value:function(ge){this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:ge}),this._meetingConnectionState=ge}},{key:"joinRoom",value:(Lt=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft,Ot,mt,Mt,Ke,It,dn,Yt,gn,an,Cn,mn;return g().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return fe.debug("joinRoom()"),Jt.prev=1,Le=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new Mr.pF({handlerName:this._handlerName}),Jt.next=2,this._socketRequest("getRouterRtpCapabilities");case 2:return Ue=Jt.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(Ue.headerExtensions=(Et=Ue.headerExtensions)===null||Et===void 0?void 0:Et.filter(function(yr){return yr.uri!="urn:3gpp:video-orientation"})):Ue.headerExtensions=(Nt=Ue.headerExtensions)===null||Nt===void 0?void 0:Nt.filter(function(yr){return yr.uri!="urn:3gpp:video-orientation"}),Jt.next=3,this._mediasoupDevice.load({routerRtpCapabilities:Ue});case 3:if((re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:Le,status:1,attributes:{routerRtpCapabilities:JSON.stringify(Ue).toString()},message:"Router Capabilities Loaded"}),!this._produce){Jt.next=5;break}return Jt.next=4,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 4:qt=Jt.sent,this.createProducerTransport(qt,this._joinSpan);case 5:if(!this._consume){Jt.next=7;break}return Jt.next=6,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 6:bn=Jt.sent,this.createConsumerTransport(bn,this._joinSpan);case 7:return Jt.next=8,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(ae=this._mediasoupDevice)===null||ae===void 0?void 0:ae.rtpCapabilities,sctpCapabilities:(ie=this._mediasoupDevice)===null||ie===void 0?void 0:ie.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData});case 8:Vt=Jt.sent,hn=Vt.peers,xn=Vt.poll,Pe=Vt.messages,gt.dispatch(Dn("connected")),(le=this._openTelemetry)===null||le===void 0||le.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:hn,poll:xn,messages:Pe,baseUrl:this._baseUrl}),gt.dispatch(so()),gt.dispatch(tr({text:"You are in the room!",timeout:3e3})),ft=Wa(hn);try{for(ft.s();!(Ot=ft.n()).done;)mt=Ot.value,Mt=Ns(Oa(Oa({},mt),{},{consumers:[],dataConsumers:[]})),gt.dispatch(Mt),this._eventEmitter.emit(Mt.type,Mt.payload)}catch(yr){ft.e(yr)}finally{ft.f()}this._produce&&(gt.dispatch(Er({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((Ke=this._openTelemetry)===null||Ke===void 0||Ke.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(yr){yr.stop()})),It=Jn(),this._webcamEnabled&&(!It||It.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((dn=this._openTelemetry)===null||dn===void 0||dn.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(yr){yr.stop()}))),window.SHOW_INFO&&(Yt=gt.getState(),gn=Yt.me,gt.dispatch($r(gn.id))),(De=this._openTelemetry)===null||De===void 0||De.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),Jt.next=10;break;case 9:Jt.prev=9,mn=Jt.catch(1),fe.error("joinRoom() failed:%o",mn),(an=this._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:mn.message}}),(Cn=this._openTelemetry)===null||Cn===void 0||Cn.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(mn)}),gt.dispatch(tr({type:"error",text:"Could not join the room: ".concat(mn)})),this.close({sendLeft:!0});case 10:case"end":return Jt.stop()}},ge,this,[[1,9]])})),function(){return Lt.apply(this,arguments)})},{key:"switchingRoom",value:(kt=(0,_.A)(g().mark(function ge(ee){var re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft,Ot,mt,Mt;return g().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"switchingRoom() start",attributes:{"room.id":ee,"peer.id":this._peerId,display_name:this._displayName}}),Ke.prev=1,Et=(ie=this._openTelemetry)===null||ie===void 0?void 0:ie.trace({name:"switch room join request",parentSpan:ae}),Ke.next=2,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(le=this._mediasoupDevice)===null||le===void 0?void 0:le.rtpCapabilities,sctpCapabilities:(De=this._mediasoupDevice)===null||De===void 0?void 0:De.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData,switchingRoom:!0});case 2:Nt=Ke.sent,qt=Nt.peers,bn=Nt.poll,Vt=Nt.messages,(Le=this._openTelemetry)===null||Le===void 0||Le.completeSpan({span:Et,status:1,message:"Join request successful in switched room"}),gt.dispatch(Dn("connected")),this._eventEmitter.emit("MEETING_JOINED",{switchRoomId:ee,peers:qt,poll:bn,messages:Vt,baseUrl:this._baseUrl}),gt.dispatch(so()),gt.dispatch(tr({text:"You are in the room!",timeout:3e3})),hn=Wa(qt);try{for(hn.s();!(xn=hn.n()).done;)Pe=xn.value,ft=Ns(Oa(Oa({},Pe),{},{consumers:[],dataConsumers:[]})),gt.dispatch(ft),this._eventEmitter.emit(ft.type,ft.payload)}catch(It){hn.e(It)}finally{hn.f()}(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:ae,status:1,message:"Room switch completed successfully"}),Ke.next=4;break;case 3:Ke.prev=3,Mt=Ke.catch(1),fe.error("joinRoom() failed:%o",Mt),(Ot=this._videosdkLogs)===null||Ot===void 0||Ot.pushLogs({logText:"Error Could not join the switched room",logType:"ERROR",attributes:{error:Mt.message}}),(mt=this._openTelemetry)===null||mt===void 0||mt.completeSpan({span:ae,status:2,message:"Room switch failed: ".concat(Mt.message)}),gt.dispatch(tr({type:"error",text:"Could not join the switched room: ".concat(Mt)})),this.close({sendLeft:!0});case 4:case"end":return Ke.stop()}},ge,this,[[1,3]])})),function(ge){return kt.apply(this,arguments)})},{key:"_updateMics",value:(at=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft=arguments;return g().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:return re=ft.length>0&&ft[0]!==void 0?ft[0]:void 0,this._mics=new Map,fe.debug("_updateMics() |"),ae=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"_updateMics() Calling for Getting System Mic list",span:re||null}),Ot.prev=1,Ot.next=2,navigator.mediaDevices.enumerateDevices();case 2:De=Ot.sent,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting System Mic list",span:ae,status:1,attributes:{systemDevice:De?JSON.stringify(De):"Device not found"}}),Le=Wa(De);try{for(Le.s();!(Ue=Le.n()).done;)(Et=Ue.value).kind=="audioinput"&&this._mics.set(Et.deviceId,Et)}catch(mt){Le.e(mt)}finally{Le.f()}Nt=Array.from(this._mics.values()),qt=Nt.length,bn=this._mic.device?this._mic.device.deviceId:void 0,qt===0?this._mic.device=null:this._mics.has(bn)||(this._mic.device=Nt[0]),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:1,message:"Update Mic"}),Ot.next=5;break;case 3:if(Ot.prev=3,!((Pe=Ot.catch(1))instanceof TypeError)){Ot.next=5;break}if(Pe.name!=="TypeError"){Ot.next=4;break}throw hn=_r.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(hn),(Vt=this._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:ae,status:2,message:"Error in updateMics() :: ".concat(hn.message)}),new Error(hn.message);case 4:throw(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:ae,status:2,message:"Error in updateMics() :: ".concat(Pe.message)}),new Error(Pe.message);case 5:case"end":return Ot.stop()}},ge,this,[[1,3]])})),function(){return at.apply(this,arguments)})},{key:"_updateWebcams",value:(je=(0,_.A)(g().mark(function ge(){var ee,re,ae,ie,le,De,Le,Ue,Et,Nt,qt,bn,Vt,hn,xn,Pe,ft,Ot=arguments;return g().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return re=Ot.length>0&&Ot[0]!==void 0?Ot[0]:void 0,fe.debug("_updateWebcams()"),this._webcams=new Map,fe.debug("_updateWebcams() | calling enumerateDevices()"),ae=(ee=this._openTelemetry)===null||ee===void 0?void 0:ee.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",span:re||null}),mt.prev=1,mt.next=2,navigator.mediaDevices.enumerateDevices();case 2:De=mt.sent,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting System Webcam list",span:ae,status:1,attributes:{systemDevice:De?JSON.stringify(De):"Device not found"}}),Le=Wa(De),mt.prev=3,Le.s();case 4:if((Ue=Le.n()).done){mt.next=7;break}if((Et=Ue.value).kind==="videoinput"){mt.next=5;break}return mt.abrupt("continue",6);case 5:this._webcams.set(Et.deviceId,Et);case 6:mt.next=4;break;case 7:mt.next=9;break;case 8:mt.prev=8,Pe=mt.catch(3),Le.e(Pe);case 9:return mt.prev=9,Le.f(),mt.finish(9);case 10:Nt=Array.from(this._webcams.values()),qt=Nt.length,(bn=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=bn),fe.debug("_updateWebcams() [webcams:%o]",Nt),qt===0?this._webcam.device=null:this._webcams.has(bn)||(this._webcam.device=Nt[0]),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:1,message:"Update Webcam"}),gt.dispatch(kr(this._webcams.size>1)),mt.next=13;break;case 11:if(mt.prev=11,!((ft=mt.catch(1))instanceof TypeError)){mt.next=13;break}if(ft.name!=="TypeError"){mt.next=12;break}throw hn=_r.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(hn),(Vt=this._openTelemetry)===null||Vt===void 0||Vt.completeSpan({span:ae,status:2,message:"Error in updateWebcams() :: ".concat(hn.message)}),new Error(hn.message);case 12:throw(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:ae,status:2,message:"Error in updateWebcams() :: ".concat(ft.message)}),new Error(ft.message);case 13:case"end":return mt.stop()}},ge,this,[[1,11],[3,8,9,10]])})),function(){return je.apply(this,arguments)})},{key:"_getWebcamType",value:function(ge){return/(back|rear)/i.test(ge.label)?(fe.debug("_getWebcamType() | it seems to be a back camera"),"back"):(fe.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(ce=(0,_.A)(g().mark(function ge(ee){var re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!ee.paused){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._socketRequest("pauseConsumer",{consumerId:ee.id});case 2:ee.pause(),gt.dispatch(Ni(ee.id,"local")),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("_pauseConsumer() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:ae.message}}),gt.dispatch(tr({type:"error",text:"Error pausing Consumer: ".concat(ae)}));case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return ce.apply(this,arguments)})},{key:"_resumeConsumer",value:(Q=(0,_.A)(g().mark(function ge(ee){var re,ae;return g().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(ee.paused){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._socketRequest("resumeConsumer",{consumerId:ee.id});case 2:ee.resume(),gt.dispatch(_i(ee.id,"local")),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("_resumeConsumer() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:ae.message}}),gt.dispatch(tr({type:"error",text:"Error resuming Consumer: ".concat(ae)}));case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return Q.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(Y=(0,_.A)(g().mark(function ge(){var ee=this;return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!this._externalVideoStream){re.next=1;break}return re.abrupt("return",this._externalVideoStream);case 1:if(!(this._externalVideo.readyState<3)){re.next=2;break}return re.next=2,new Promise(function(ae){return ee._externalVideo.addEventListener("canplay",ae)});case 2:if(!this._externalVideo.captureStream){re.next=3;break}this._externalVideoStream=this._externalVideo.captureStream(),re.next=5;break;case 3:if(!this._externalVideo.mozCaptureStream){re.next=4;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),re.next=5;break;case 4:throw new Error("video.captureStream() not supported");case 5:return re.abrupt("return",this._externalVideoStream);case 6:case"end":return re.stop()}},ge,this)})),function(){return Y.apply(this,arguments)})},{key:"toggleE2EEEnabled",value:(ne=(0,_.A)(g().mark(function ge(ee){return g().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!this.e2eeManager){re.next=1;break}this._peerId&&this.e2eeManager.setParticipantCryptorEnabled(ee,this._peerId),this.isE2EEEnabled=ee,re.next=2;break;case 1:throw Error("e2ee not configured, please set e2ee settings within the room options");case 2:case"end":return re.stop()}},ge,this)})),function(ge){return ne.apply(this,arguments)})},{key:"_emitError",value:function(ge){this._eventEmitter.emit("ERROR",ge)}}],[{key:"init",value:function(ge){gt=ge.store}}]);var ne,Y,Q,ce,je,at,kt,Lt,xt,zn,Gt,Gn,kn,sa,Jr,pa,ia,$i,Zi,bi,_o,bo,No,ei,di,Do,Bc,pc,hi,oo,Ko,zc,Gi,fc,pi,Yi,il,Qo,mc,Ao,Xo,qs,As,Ai,vs,Os,xo,fi,Oo,Ms,wo,co,Jo,Oi,Mo,Al,Ta,ec,Ki,Uc,gc,xi,tc,jo,wi,Qi,i,h,M,W,te,he,ze,it,ht,Xt,qn,Yn,ir,jr,ka,Ua,us,js,vc,Ol,Lo,lo,Fc,Mi,$a,Si,uo,So,Ja,yc,Hc,Io,ol,ji,ws,Ml,Iu,Bu,zu,jl,Ss,_c,bc,xc,is,wc,Vc,Uu,Fu,_d,Ll}();function hc(ne){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,_.A)(g().mark(function ne(Y){var Q,ce,je,at,kt,Lt,xt=this;return g().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:if(zn.prev=0,this.e2eeManager){zn.next=2;break}return ce=ou,je=Y,zn.next=1,jc();case 1:at=zn.sent,kt={keyProvider:je,worker:at},this.e2eeManager=new ce(kt),this.e2eeManager.on(Wi.KS.ParticipantEncryptionStatusChanged,function(Gt){xt.isE2EEEnabled=Gt}),this.e2eeManager.on(Wi.KS.E2EEStateChange,function(Gt){xt._eventEmitter.emit("E2EE_STATE_CHANGE",Gt)}),(Q=this.e2eeManager)===null||Q===void 0||Q.setup(this),this.toggleE2EEEnabled(!0);case 2:zn.next=4;break;case 3:throw zn.prev=3,Lt=zn.catch(0),console.error("Error setting up E2EE: ",Lt),new Error("Error setting up E2EE: "+Lt.message);case 4:case"end":return zn.stop()}},ne,this,[[0,3]])}))).apply(this,arguments)}},2073:function(T,b,u){var x;T.exports=(x=u(9021),u(7165),x.pad.AnsiX923={pad:function(f,y){var E=f.sigBytes,_=4*y,m=_-E%_,k=E+m-1;f.clamp(),f.words[k>>>2]|=m<<24-k%4*8,f.sigBytes+=m},unpad:function(f){var y=255&f.words[f.sigBytes-1>>>2];f.sigBytes-=y}},x.pad.Ansix923)},2107:(T,b,u)=>{u.d(b,{kR:()=>f,nI:()=>x,wZ:()=>y});var x={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER",SEND_AND_RECV:"SEND_AND_RECV",SIGNALLING_ONLY:"SIGNALLING_ONLY",RECV_ONLY:"RECV_ONLY"};function f(E){return E===x.CONFERENCE||E===x.SEND_AND_RECV}function y(E){return E===x.VIEWER||E===x.SIGNALLING_ONLY}},2109:function(T,b,u){var x;(function(f,y){var E,_="user-agent",m="",k="function",w="undefined",U="object",g="string",A="browser",P="cpu",z="device",N="engine",R="os",S="result",p="name",D="type",O="vendor",j="version",I="architecture",H="major",F="model",$="console",q="mobile",se="tablet",J="smarttv",be="wearable",Re="xr",Se="embedded",me="inapp",Ce="brands",Be="formFactors",_e="fullVersionList",Ye="platform",Qe="platformVersion",Ge="bitness",He="sec-ch-ua",Te=He+"-full-version-list",dt=He+"-arch",yt=He+"-"+Ge,on=He+"-form-factors",ln=He+"-"+q,Pn=He+"-"+F,En=He+"-"+Ye,rn=En+"-version",Ne=[Ce,_e,q,F,Ye,Qe,I,Be,Ge],Me="Amazon",Ze="Apple",Ft="ASUS",Ct="BlackBerry",wt="Google",un="Huawei",Sn="Lenovo",Ut="Honor",nr="LG",Ar="Microsoft",Sr="Motorola",Ur="Nvidia",xr="OnePlus",Or="OPPO",Kr="Samsung",va="Sharp",ra="Sony",ua="Xiaomi",jn="Zebra",Ha="Chrome",Ea="Chromium",Qr="Chromecast",gr="Edge",rt="Firefox",ut="Opera",$t="Facebook",Tt="Sogou",sn="Mobile ",nn=" Browser",et="Windows",On=typeof f!==w,Ln=On&&f.navigator?f.navigator:y,Xn=Ln&&Ln.userAgentData?Ln.userAgentData:y,vr=function(pn){for(var Jn={},$n=0;$n<pn.length;$n++)Jn[pn[$n].toUpperCase()]=pn[$n];return Jn},Qt=function(pn,Jn){if(typeof pn===U&&pn.length>0){for(var $n in pn)if(Nn(Jn)==Nn(pn[$n]))return!0;return!1}return!!Un(pn)&&Nn(Jn)==Nn(pn)},St=function(pn,Jn){for(var $n in pn)return/^(browser|cpu|device|engine|os)$/.test($n)||!!Jn&&St(pn[$n])},Un=function(pn){return typeof pn===g},In=function(pn){if(!pn)return y;for(var Jn=[],$n=Hr(/\\?\"/g,pn).split(","),dr=0;dr<$n.length;dr++)if($n[dr].indexOf(";")>-1){var Dn=Kn($n[dr]).split(";v=");Jn[dr]={brand:Dn[0],version:Dn[1]}}else Jn[dr]=Kn($n[dr]);return Jn},Nn=function(pn){return Un(pn)?pn.toLowerCase():pn},Fr=function(pn){return Un(pn)?Hr(/[^\d\.]/g,pn).split(".")[0]:y},Mr=function(pn){for(var Jn in pn){var $n=pn[Jn];typeof $n==U&&$n.length==2?this[$n[0]]=$n[1]:this[$n]=y}return this},Hr=function(pn,Jn){return Un(Jn)?Jn.replace(pn,m):Jn},cr=function(pn){return Hr(/\\?\"/g,pn)},Kn=function(pn,Jn){if(Un(pn))return pn=Hr(/^\s\s*/,pn),typeof Jn===w?pn:pn.substring(0,500)},xa=function(pn,Jn){if(pn&&Jn)for(var $n,dr,Dn,Hn,$r,Er,kr=0;kr<Jn.length&&!$r;){var Fn=Jn[kr],Zr=Jn[kr+1];for($n=dr=0;$n<Fn.length&&!$r&&Fn[$n];)if($r=Fn[$n++].exec(pn))for(Dn=0;Dn<Zr.length;Dn++)Er=$r[++dr],typeof(Hn=Zr[Dn])===U&&Hn.length>0?Hn.length===2?typeof Hn[1]==k?this[Hn[0]]=Hn[1].call(this,Er):this[Hn[0]]=Hn[1]:Hn.length>=3&&(typeof Hn[1]!==k||Hn[1].exec&&Hn[1].test?Hn.length==3?this[Hn[0]]=Er?Er.replace(Hn[1],Hn[2]):y:Hn.length==4?this[Hn[0]]=Er?Hn[3].call(this,Er.replace(Hn[1],Hn[2])):y:Hn.length>4&&(this[Hn[0]]=Er?Hn[3].apply(this,[Er.replace(Hn[1],Hn[2])].concat(Hn.slice(4))):y):Hn.length>3?this[Hn[0]]=Er?Hn[1].apply(this,Hn.slice(2)):y:this[Hn[0]]=Er?Hn[1].call(this,Er,Hn[2]):y):this[Hn]=Er||y;kr+=2}},ma=function(pn,Jn){for(var $n in Jn)if(typeof Jn[$n]===U&&Jn[$n].length>0){for(var dr=0;dr<Jn[$n].length;dr++)if(Qt(Jn[$n][dr],pn))return $n==="?"?y:$n}else if(Qt(Jn[$n],pn))return $n==="?"?y:$n;return Jn.hasOwnProperty("*")?Jn["*"]:pn},La={ME:"4.90","NT 3.51":"3.51","NT 4.0":"4.0",2e3:["5.0","5.01"],XP:["5.1","5.2"],Vista:"6.0",7:"6.1",8:"6.2",8.1:"6.3",10:["6.4","10.0"],NT:""},Va={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":y},Ci={Chrome:"Google Chrome",Edge:"Microsoft Edge","Edge WebView2":"Microsoft Edge WebView2","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"},bs={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[j,[p,sn+"Chrome"]],[/webview.+edge\/([\w\.]+)/i],[j,[p,gr+" WebView"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[j,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,j],[/opios[\/ ]+([\w\.]+)/i],[j,[p,ut+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[j,[p,ut+" GX"]],[/\bopr\/([\w\.]+)/i],[j,[p,ut]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[j,[p,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[j,[p,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[p,j],[/quark(?:pc)?\/([-\w\.]+)/i],[j,[p,"Quark"]],[/\bddg\/([\w\.]+)/i],[j,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[j,[p,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[j,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[j,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[j,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[j,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[j,[p,"Smart "+Sn+nn]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure"+nn],j],[/\bfocus\/([\w\.]+)/i],[j,[p,rt+" Focus"]],[/\bopt\/([\w\.]+)/i],[j,[p,ut+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[j,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[j,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[j,[p,ut+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[j,[p,"MIUI"+nn]],[/fxios\/([\w\.-]+)/i],[j,[p,sn+rt]],[/\bqihoobrowser\/?([\w\.]*)/i],[j,[p,"360"]],[/\b(qq)\/([\w\.]+)/i],[[p,/(.+)/,"$1Browser"],j],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+nn],j],[/samsungbrowser\/([\w\.]+)/i],[j,[p,Kr+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[j,[p,Tt+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,Tt+" Mobile"],j],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[p,j],[/(lbbrowser|rekonq)/i],[p],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[j,p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,$t],j,[D,me]],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat|klarna)[\/ ]([-\w\.]+)/i],[p,j,[D,me]],[/\bgsa\/([\w\.]+) .*safari\//i],[j,[p,"GSA"],[D,me]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[j,[p,"TikTok"],[D,me]],[/\[(linkedin)app\]/i],[p,[D,me]],[/(chromium)[\/ ]([-\w\.]+)/i],[p,j],[/headlesschrome(?:\/([\w\.]+)| )/i],[j,[p,Ha+" Headless"]],[/wv\).+chrome\/([\w\.]+).+edgw\//i],[j,[p,gr+" WebView2"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,Ha+" WebView"],j],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[j,[p,"Android"+nn]],[/chrome\/([\w\.]+) mobile/i],[j,[p,sn+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,j],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[j,[p,sn+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[p,sn+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[j,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[j,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[p,j],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[p,sn+rt],j],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],j],[/(wolvic|librewolf)\/([\w\.]+)/i],[p,j],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[j,[p,rt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[p,[j,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[p,[j,/[^\d\.]+./,m]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[I,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[I,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[I,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[I,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[I,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[I,/ower/,m,Nn]],[/ sun4\w[;\)]/i],[[I,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[I,Nn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[F,[O,Kr],[D,se]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr]|browser)[-\w]+)/i,/sec-(sgh\w+)/i],[F,[O,Kr],[D,q]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[F,[O,Ze],[D,q]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[F,[O,Ze],[D,se]],[/(macintosh);/i],[F,[O,Ze]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[F,[O,va],[D,q]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[F,[O,Ut],[D,se]],[/honor([-\w ]+)[;\)]/i],[F,[O,Ut],[D,q]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[F,[O,un],[D,se]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[F,[O,un],[D,q]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[F,/_/g," "],[O,ua],[D,se]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[F,/_/g," "],[O,ua],[D,q]],[/droid.+; (cph2[3-6]\d[13579]|((gm|hd)19|(ac|be|in|kb)20|(d[en]|eb|le|mt)21|ne22)[0-2]\d|p[g-k]\w[1m]10)\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[F,[O,xr],[D,q]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[F,[O,Or],[D,q]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[F,[O,ma,{OnePlus:["203","304","403","404","413","415"],"*":Or}],[D,se]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[F,[O,"BLU"],[D,q]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[F,[O,"Vivo"],[D,q]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[F,[O,"Realme"],[D,q]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[F,[O,Sn],[D,se]],[/lenovo[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i],[F,[O,Sn],[D,q]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ]([\w\s]+)(\)| bui)/i,/((?:moto(?! 360)[-\w\(\) ]+|xt\d{3,4}[cgkosw\+]?[-\d]*|nexus 6)(?= bui|\)))/i],[F,[O,Sr],[D,q]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[F,[O,Sr],[D,se]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[F,[O,nr],[D,se]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch|webos))(\w+)/i,/\blg-?([\d\w]+) bui/i],[F,[O,nr],[D,q]],[/(nokia) (t[12][01])/i],[O,F,[D,se]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[F,/_/g," "],[D,q],[O,"Nokia"]],[/(pixel (c|tablet))\b/i],[F,[O,wt],[D,se]],[/droid.+;(?: google)? (g(01[13]a|020[aem]|025[jn]|1b60|1f8f|2ybb|4s1m|576d|5nz6|8hhn|8vou|a02099|c15s|d1yq|e2ae|ec77|gh2x|kv4x|p4bc|pj41|r83y|tt9q|ur25|wvk6)|pixel[\d ]*a?( pro)?( xl)?( fold)?( \(5g\))?)( bui|\))/i],[F,[O,wt],[D,q]],[/(google) (pixelbook( go)?)/i],[O,F],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-\w\w\d\d)(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[F,[O,ra],[D,q]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[F,"Xperia Tablet"],[O,ra],[D,se]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[F,[O,Me],[D,se]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[F,/(.+)/g,"Fire Phone $1"],[O,Me],[D,q]],[/(playbook);[-\w\),; ]+(rim)/i],[F,O,[D,se]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[F,[O,Ct],[D,q]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[F,[O,Ft],[D,se]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[F,[O,Ft],[D,q]],[/(nexus 9)/i],[F,[O,"HTC"],[D,se]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[O,[F,/_/g," "],[D,q]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[F,[O,"TCL"],[D,se]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[F,[O,"TCL"],[D,q]],[/(itel) ((\w+))/i],[[O,Nn],F,[D,ma,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[F,[O,"Acer"],[D,se]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[F,[O,"Meizu"],[D,q]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[F,[O,"Ulefone"],[D,q]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[F,[O,"Energizer"],[D,q]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[F,[O,"Cat"],[D,q]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[F,[O,"Smartfren"],[D,q]],[/droid.+; (a(in)?(0(15|59|6[35])|142)p?)/i],[F,[O,"Nothing"],[D,q]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[F,[O,"Archos"],[D,se]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[F,[O,"Archos"],[D,q]],[/; (n159v)/i],[F,[O,"HMD"],[D,q]],[/(imo) (tab \w+)/i,/(infinix|tecno) (x1101b?|p904|dp(7c|8d|10a)( pro)?|p70[1-3]a?|p904|t1101)/i],[O,F,[D,se]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|infinix|lava|oneplus|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(oppo) ?([\w ]+) bui/i],[O,F,[D,q]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[O,F,[D,se]],[/(surface duo)/i],[F,[O,Ar],[D,se]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[F,[O,"Fairphone"],[D,q]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[F,[O,Ur],[D,se]],[/(sprint) (\w+)/i],[O,F,[D,q]],[/(kin\.[onetw]{3})/i],[[F,/\./g," "],[O,Ar],[D,q]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[F,[O,jn],[D,se]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[F,[O,jn],[D,q]],[/smart-tv.+(samsung)/i],[O,[D,J]],[/hbbtv.+maple;(\d+)/i],[[F,/^/,"SmartTV"],[O,Kr],[D,J]],[/(vizio)(?: |.+model\/)(\w+-\w+)/i,/tcast.+(lg)e?. ([-\w]+)/i],[O,F,[D,J]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[O,nr],[D,J]],[/(apple) ?tv/i],[O,[F,Ze+" TV"],[D,J]],[/crkey.*devicetype\/chromecast/i],[[F,Qr+" Third Generation"],[O,wt],[D,J]],[/crkey.*devicetype\/([^/]*)/i],[[F,/^/,"Chromecast "],[O,wt],[D,J]],[/fuchsia.*crkey/i],[[F,Qr+" Nest Hub"],[O,wt],[D,J]],[/crkey/i],[[F,Qr],[O,wt],[D,J]],[/(portaltv)/i],[F,[O,$t],[D,J]],[/droid.+aft(\w+)( bui|\))/i],[F,[O,Me],[D,J]],[/(shield \w+ tv)/i],[F,[O,Ur],[D,J]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[F,[O,va],[D,J]],[/(bravia[\w ]+)( bui|\))/i],[F,[O,ra],[D,J]],[/(mi(tv|box)-?\w+) bui/i],[F,[O,ua],[D,J]],[/Hbbtv.*(technisat) (.*);/i],[O,F,[D,J]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[O,/.+\/(\w+)/,"$1",ma,{LG:"lge"}],[F,Kn],[D,J]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[F,[D,J]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:|large screen[\w ]+safari)\b/i],[[D,J]],[/(playstation \w+)/i],[F,[O,ra],[D,$]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[F,[O,Ar],[D,$]],[/(ouya)/i,/(nintendo) (\w+)/i,/(retroid) (pocket ([^\)]+))/i],[O,F,[D,$]],[/droid.+; (shield)( bui|\))/i],[F,[O,Ur],[D,$]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[F,[O,Kr],[D,be]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[O,F,[D,be]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[F,[O,Or],[D,be]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[F,[O,Ze],[D,be]],[/(opwwe\d{3})/i],[F,[O,xr],[D,be]],[/(moto 360)/i],[F,[O,Sr],[D,be]],[/(smartwatch 3)/i],[F,[O,ra],[D,be]],[/(g watch r)/i],[F,[O,nr],[D,be]],[/droid.+; (wt63?0{2,3})\)/i],[F,[O,jn],[D,be]],[/droid.+; (glass) \d/i],[F,[O,wt],[D,Re]],[/(pico) (4|neo3(?: link|pro)?)/i],[O,F,[D,Re]],[/(quest( \d| pro)?s?).+vr/i],[F,[O,$t],[D,Re]],[/mobile vr; rv.+firefox/i],[[D,Re]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[O,[D,Se]],[/(aeobc)\b/i],[F,[O,Me],[D,Se]],[/(homepod).+mac os/i],[F,[O,Ze],[D,Se]],[/windows iot/i],[[D,Se]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[F,[D,ma,{mobile:"Mobile",xr:"VR","*":se}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[D,se]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[D,q]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[F,[O,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[j,[p,gr+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[p,j],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[j,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,j],[/ladybird\//i],[[p,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[j,p]],os:[[/(windows nt) (6\.[23]); arm/i],[[p,/N/,"R"],[j,ma,La]],[/(windows (?:phone|mobile|iot))(?: os)?[\/ ]?([\d\.]*( se)?)/i,/(windows)[\/ ](1[01]|2000|3\.1|7|8(\.1)?|9[58]|me|server 20\d\d( r2)?|vista|xp)/i],[p,j],[/windows nt ?([\d\.\)]*)(?!.+xbox)/i,/\bwin(?=3| ?9|n)(?:nt| 9x )?([\d\.;]*)/i],[[j,/(;|\))/g,"",ma,La],[p,et]],[/(windows ce)\/?([\d\.]*)/i],[p,j],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[j,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+(haiku|morphos))/i],[[p,"macOS"],[j,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[j,[p,Qr+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[j,[p,Qr+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[j,[p,Qr+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[j,[p,Qr+" Linux"]],[/crkey\/([\d\.]+)/i],[j,[p,Qr]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[j,p],[/(ubuntu) ([\w\.]+) like android/i],[[p,/(.+)/,"$1 Touch"],j],[/(harmonyos)[\/ ]?([\d\.]*)/i,/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen)\w*[-\/\.; ]?([\d\.]*)/i],[p,j],[/\(bb(10);/i],[j,[p,Ct]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[j,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[j,[p,rt+" OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i,/webos(?:[ \/]?|\.tv-20(?=2[2-9]))(\d[\d\.]*)/i],[j,[p,"webOS"]],[/web0s;.+?(?:chr[o0]me|safari)\/(\d+)/i],[[j,ma,{25:"120",24:"108",23:"94",22:"87",6:"79",5:"68",4:"53",3:"38",2:"538",1:"537","*":"TV"}],[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[j,[p,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,"Chrome OS"],j],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/linux.+(mint)[\/\(\) ]?([\w\.]*)/i,/(mageia|vectorlinux|fuchsia|arcaos|arch(?= ?linux))[;l ]([\d\.]*)/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire|knoppix)(?: gnu[\/ ]linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/\b(aix)[; ]([1-9\.]{0,4})/i,/(hurd|linux|morphos)(?: (?:arm|x86|ppc)\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) ?(r\d)?/i],[p,j],[/(sunos) ?([\d\.]*)/i],[[p,"Solaris"],j],[/\b(beos|os\/2|amigaos|openvms|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,j]]},ii=(Mr.call((E={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[A,[p,j,H,D]],[P,[I]],[z,[D,F,O]],[N,[p,j]],[R,[p,j]]]),Mr.call(E.isIgnore,[[A,[j,H]],[N,[j]],[R,[j]]]),Mr.call(E.isIgnoreRgx,[[A,/ ?browser$/i],[R,/ ?os$/i]]),Mr.call(E.toString,[[A,[p,j]],[P,[I]],[z,[O,F]],[N,[p,j]],[R,[p,j]]]),E),Ti=function(pn,Jn){var $n=ii.init[Jn],dr=ii.isIgnore[Jn]||0,Dn=ii.isIgnoreRgx[Jn]||0,Hn=ii.toString[Jn]||0;function $r(){Mr.call(this,$n)}return $r.prototype.getItem=function(){return pn},$r.prototype.withClientHints=function(){return Xn?Xn.getHighEntropyValues(Ne).then(function(Er){return pn.setCH(new Us(Er,!1)).parseCH().get()}):pn.parseCH().get()},$r.prototype.withFeatureCheck=function(){return pn.detectFeature().get()},Jn!=S&&($r.prototype.is=function(Er){var kr=!1;for(var Fn in this)if(this.hasOwnProperty(Fn)&&!Qt(dr,Fn)&&Nn(Dn?Hr(Dn,this[Fn]):this[Fn])==Nn(Dn?Hr(Dn,Er):Er)){if(kr=!0,Er!=w)break}else if(Er==w&&kr){kr=!kr;break}return kr},$r.prototype.toString=function(){var Er=m;for(var kr in Hn)typeof this[Hn[kr]]!==w&&(Er+=(Er?" ":m)+this[Hn[kr]]);return Er||w}),Xn||($r.prototype.then=function(Er){var kr=this,Fn=function(){for(var Da in kr)kr.hasOwnProperty(Da)&&(this[Da]=kr[Da])};Fn.prototype={is:$r.prototype.is,toString:$r.prototype.toString};var Zr=new Fn;return Er(Zr),Zr}),new $r};function Us(pn,Jn){if(pn=pn||{},Mr.call(this,Ne),Jn)Mr.call(this,[[Ce,In(pn[He])],[_e,In(pn[Te])],[q,/\?1/.test(pn[ln])],[F,cr(pn[Pn])],[Ye,cr(pn[En])],[Qe,cr(pn[rn])],[I,cr(pn[dt])],[Be,In(pn[on])],[Ge,cr(pn[yt])]]);else for(var $n in pn)this.hasOwnProperty($n)&&typeof pn[$n]!==w&&(this[$n]=pn[$n])}function vi(pn,Jn,$n,dr){return this.get=function(Dn){return Dn?this.data.hasOwnProperty(Dn)?this.data[Dn]:y:this.data},this.set=function(Dn,Hn){return this.data[Dn]=Hn,this},this.setCH=function(Dn){return this.uaCH=Dn,this},this.detectFeature=function(){if(Ln&&Ln.userAgent==this.ua)switch(this.itemType){case A:Ln.brave&&typeof Ln.brave.isBrave==k&&this.set(p,"Brave");break;case z:!this.get(D)&&Xn&&Xn[q]&&this.set(D,q),this.get(F)=="Macintosh"&&Ln&&typeof Ln.standalone!==w&&Ln.maxTouchPoints&&Ln.maxTouchPoints>2&&this.set(F,"iPad").set(D,se);break;case R:!this.get(p)&&Xn&&Xn[Ye]&&this.set(p,Xn[Ye]);break;case S:var Dn=this.data,Hn=function($r){return Dn[$r].getItem().detectFeature().get()};this.set(A,Hn(A)).set(P,Hn(P)).set(z,Hn(z)).set(N,Hn(N)).set(R,Hn(R))}return this},this.parseUA=function(){return this.itemType!=S&&xa.call(this.data,this.ua,this.rgxMap),this.itemType==A&&this.set(H,Fr(this.get(j))),this},this.parseCH=function(){var Dn=this.uaCH,Hn=this.rgxMap;switch(this.itemType){case A:case N:var $r,Er=Dn[_e]||Dn[Ce];if(Er)for(var kr in Er){var Fn=Er[kr].brand||Er[kr],Zr=Er[kr].version;this.itemType==A&&!/not.a.brand/i.test(Fn)&&(!$r||/Chrom/.test($r)&&Fn!=Ea||$r==gr&&/WebView2/.test(Fn))&&(Fn=ma(Fn,Ci),($r=this.get(p))&&!/Chrom/.test($r)&&/Chrom/.test(Fn)||this.set(p,Fn).set(j,Zr).set(H,Fr(Zr)),$r=Fn),this.itemType==N&&Fn==Ea&&this.set(j,Zr)}break;case P:var Da=Dn[I];Da&&(Da&&Dn[Ge]=="64"&&(Da+="64"),xa.call(this.data,Da+";",Hn));break;case z:if(Dn[q]&&this.set(D,q),Dn[F]&&(this.set(F,Dn[F]),!this.get(D)||!this.get(O))){var ya={};xa.call(ya,"droid 9; "+Dn[F]+")",Hn),!this.get(D)&&ya.type&&this.set(D,ya.type),!this.get(O)&&ya.vendor&&this.set(O,ya.vendor)}if(Dn[Be]){var Ca;if(typeof Dn[Be]!="string")for(var Za=0;!Ca&&Za<Dn[Be].length;)Ca=ma(Dn[Be][Za++],Va);else Ca=ma(Dn[Be],Va);this.set(D,Ca)}break;case R:var Ga=Dn[Ye];if(Ga){var ss=Dn[Qe];Ga==et&&(ss=parseInt(Fr(ss),10)>=13?"11":"10"),this.set(p,Ga).set(j,ss)}this.get(p)==et&&Dn[F]=="Xbox"&&this.set(p,"Xbox").set(j,y);break;case S:var Aa=this.data,ls=function(Ps){return Aa[Ps].getItem().setCH(Dn).parseCH().get()};this.set(A,ls(A)).set(P,ls(P)).set(z,ls(z)).set(N,ls(N)).set(R,ls(R))}return this},Mr.call(this,[["itemType",pn],["ua",Jn],["uaCH",dr],["rgxMap",$n],["data",Ti(this,pn)]]),this}function ea(pn,Jn,$n){if(typeof pn===U?(St(pn,!0)?(typeof Jn===U&&($n=Jn),Jn=pn):($n=pn,Jn=y),pn=y):typeof pn!==g||St(Jn,!0)||($n=Jn,Jn=y),$n&&typeof $n.append===k){var dr={};$n.forEach(function(kr,Fn){dr[Fn]=kr}),$n=dr}if(!(this instanceof ea))return new ea(pn,Jn,$n).getResult();var Dn=typeof pn===g?pn:$n&&$n[_]?$n[_]:Ln&&Ln.userAgent?Ln.userAgent:m,Hn=new Us($n,!0),$r=Jn?function(kr,Fn){var Zr={},Da=Fn;if(!St(Fn))for(var ya in Da={},Fn)for(var Ca in Fn[ya])Da[Ca]=Fn[ya][Ca].concat(Da[Ca]?Da[Ca]:[]);for(var Za in kr)Zr[Za]=Da[Za]&&Da[Za].length%2==0?Da[Za].concat(kr[Za]):kr[Za];return Zr}(bs,Jn):bs,Er=function(kr){return kr==S?function(){return new vi(kr,Dn,$r,Hn).set("ua",Dn).set(A,this.getBrowser()).set(P,this.getCPU()).set(z,this.getDevice()).set(N,this.getEngine()).set(R,this.getOS()).get()}:function(){return new vi(kr,Dn,$r[kr],Hn).parseUA().get()}};return Mr.call(this,[["getBrowser",Er(A)],["getCPU",Er(P)],["getDevice",Er(z)],["getEngine",Er(N)],["getOS",Er(R)],["getResult",Er(S)],["getUA",function(){return Dn}],["setUA",function(kr){return Un(kr)&&(Dn=kr.length>500?Kn(kr,500):kr),this}]]).setUA(Dn),this}ea.VERSION="2.0.4",ea.BROWSER=vr([p,j,H,D]),ea.CPU=vr([I]),ea.DEVICE=vr([F,O,D,$,q,J,se,be,Se]),ea.ENGINE=ea.OS=vr([p,j]),typeof b!==w?(T.exports&&(b=T.exports=ea),b.UAParser=ea):u.amdO?(x=(function(){return ea}).call(b,u,b,T))===y||(T.exports=x):On&&(f.UAParser=ea);var Fs=On&&(f.jQuery||f.Zepto);if(Fs&&!Fs.ua){var Ks=new ea;Fs.ua=Ks.getResult(),Fs.ua.get=function(){return Ks.getUA()},Fs.ua.set=function(pn){Ks.setUA(pn);var Jn=Ks.getResult();for(var $n in Jn)Fs.ua[$n]=Jn[$n]}}})(typeof window=="object"?window:this)},2155:function(T,b,u){var x;T.exports=(x=u(9021),u(7165),x.pad.ZeroPadding={pad:function(f,y){var E=4*y;f.clamp(),f.sigBytes+=E-(f.sigBytes%E||E)},unpad:function(f){var y=f.words,E=f.sigBytes-1;for(E=f.sigBytes-1;E>=0;E--)if(y[E>>>2]>>>24-E%4*8&255){f.sigBytes=E+1;break}}},x.pad.ZeroPadding)},2169:function(T,b,u){var x;T.exports=(x=u(9021),u(7165),x.mode.CFB=function(){var f=x.lib.BlockCipherMode.extend();function y(E,_,m,k){var w,U=this._iv;U?(w=U.slice(0),this._iv=void 0):w=this._prevBlock,k.encryptBlock(w,0);for(var g=0;g<m;g++)E[_+g]^=w[g]}return f.Encryptor=f.extend({processBlock:function(E,_){var m=this._cipher,k=m.blockSize;y.call(this,E,_,k,m),this._prevBlock=E.slice(_,_+k)}}),f.Decryptor=f.extend({processBlock:function(E,_){var m=this._cipher,k=m.blockSize,w=E.slice(_,_+k);y.call(this,E,_,k,m),this._prevBlock=w}}),f}(),x.mode.CFB)},2183:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Chrome111=void 0;const x=u(7363),f=u(2994),y=u(1765),E=u(8046),_=u(5544),m=u(5938),k=u(4256),w=u(4893),U=u(521),g=u(1305),A=u(3303),P=new f.Logger("Chrome111"),z={OS:1024,MIS:1024};class N extends U.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new N}constructor(){super()}get name(){return"Chrome111"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const S=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{S.addTransceiver("audio"),S.addTransceiver("video");const p=await S.createOffer();try{S.close()}catch{}const D=x.parse(p.sdp),O=_.extractRtpCapabilities({sdpObject:D});return k.addNackSupportForOpus(O),O}catch(p){try{S.close()}catch{}throw p}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:z}}run({direction:S,iceParameters:p,iceCandidates:D,dtlsParameters:O,sctpParameters:j,iceServers:I,iceTransportPolicy:H,additionalSettings:F,proprietaryConstraints:$,extendedRtpCapabilities:q}){this.assertNotClosed(),P.debug("run()"),this._direction=S,this._remoteSdp=new g.RemoteSdp({iceParameters:p,iceCandidates:D,dtlsParameters:O,sctpParameters:j}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",q),video:E.getSendingRtpParameters("video",q)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",q),video:E.getSendingRemoteRtpParameters("video",q)},O.role&&O.role!=="auto"&&(this._forcedLocalDtlsRole=O.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:I??[],iceTransportPolicy:H??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...F},$),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",se=>{this.emit("@icecandidateerror",se)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(S){this.assertNotClosed(),P.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=S,this._pc.setConfiguration(p)}async restartIce(S){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(S),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:S,encodings:p,codecOptions:D,codec:O,onRtpSender:j}){if(this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",S.kind,S.id),p&&p.length>1){let Se=1;for(const me of p){const Ce=me.scalabilityMode?(0,A.parse)(me.scalabilityMode).temporalLayers:3;Ce>Se&&(Se=Ce)}p.forEach((me,Ce)=>{me.rid=`r${Ce}`,me.scalabilityMode=`L1T${Se}`})}const I=y.clone(this._sendingRtpParametersByKind[S.kind]);I.codecs=E.reduceCodecs(I.codecs,O);const H=y.clone(this._sendingRemoteRtpParametersByKind[S.kind]);H.codecs=E.reduceCodecs(H.codecs,O);const F=this._remoteSdp.getNextMediaSectionIdx(),$=this._pc.addTransceiver(S,{direction:"sendonly",streams:[this._sendStream],sendEncodings:p});j&&j($.sender);const q=await this._pc.createOffer();let se=x.parse(q.sdp);se.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:se}),P.debug("send() | calling pc.setLocalDescription() [offer:%o]",q),await this._pc.setLocalDescription(q);const J=$.mid;I.mid=J,se=x.parse(this._pc.localDescription.sdp);const be=se.media[F.idx];if(I.rtcp.cname=_.getCname({offerMediaObject:be}),p)if(p.length===1){const Se=m.getRtpEncodings({offerMediaObject:be});Object.assign(Se[0],p[0]),I.encodings=Se}else I.encodings=p;else I.encodings=m.getRtpEncodings({offerMediaObject:be});this._remoteSdp.send({offerMediaObject:be,reuseMid:F.reuseMid,offerRtpParameters:I,answerRtpParameters:H,codecOptions:D});const Re={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Re),await this._pc.setRemoteDescription(Re),this._mapMidTransceiver.set(J,$),{localId:J,rtpParameters:I,rtpSender:$.sender}}async stopSending(S){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",S),this._closed)return;const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const D=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._mapMidTransceiver.delete(S)}async pauseSending(S){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",S);const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(S);const D=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async resumeSending(S){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",S);const p=this._mapMidTransceiver.get(S);if(this._remoteSdp.resumeSendingMediaSection(S),!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly";const D=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async replaceTrack(S,p){this.assertNotClosed(),this.assertSendDirection(),p?P.debug("replaceTrack() [localId:%s, track.id:%s]",S,p.id):P.debug("replaceTrack() [localId:%s, no track]",S);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");await D.sender.replaceTrack(p)}async setMaxSpatialLayer(S,p){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",S,p);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");const O=D.sender.getParameters();O.encodings.forEach((H,F)=>{H.active=F<=p}),await D.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(S,O.encodings);const j=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async setRtpEncodingParameters(S,p){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",S,p);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");const O=D.sender.getParameters();O.encodings.forEach((H,F)=>{O.encodings[F]={...H,...p}}),await D.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(S,O.encodings);const j=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async getSenderStats(S){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:S,maxPacketLifeTime:p,maxRetransmits:D,label:O,protocol:j}){this.assertNotClosed(),this.assertSendDirection();const I={negotiated:!0,id:this._nextSendSctpStreamId,ordered:S,maxPacketLifeTime:p,maxRetransmits:D,protocol:j};P.debug("sendDataChannel() [options:%o]",I);const H=this._pc.createDataChannel(O,I);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%z.MIS,!this._hasDataChannelMediaSection){const F=await this._pc.createOffer(),$=x.parse(F.sdp),q=$.media.find(J=>J.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F),this._remoteSdp.sendSctpAssociation({offerMediaObject:q});const se={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",se),await this._pc.setRemoteDescription(se),this._hasDataChannelMediaSection=!0}return{dataChannel:H,sctpStreamParameters:{streamId:I.id,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits}}}async receive(S){this.assertNotClosed(),this.assertRecvDirection();const p=[],D=new Map;for(const H of S){const{trackId:F,kind:$,rtpParameters:q,streamId:se}=H;P.debug("receive() [trackId:%s, kind:%s]",F,$);const J=q.mid??String(this._mapMidTransceiver.size);D.set(F,J),this._remoteSdp.receive({mid:J,kind:$,offerRtpParameters:q,streamId:se??q.rtcp.cname,trackId:F})}const O={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);for(const H of S){const{trackId:F,onRtpReceiver:$}=H;if($){const q=D.get(F),se=this._pc.getTransceivers().find(J=>J.mid===q);if(!se)throw new Error("transceiver not found");$(se.receiver)}}let j=await this._pc.createAnswer();const I=x.parse(j.sdp);for(const H of S){const{trackId:F,rtpParameters:$}=H,q=D.get(F),se=I.media.find(J=>String(J.mid)===q);_.applyCodecParameters({offerRtpParameters:$,answerMediaObject:se})}j={type:"answer",sdp:x.write(I)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",j),await this._pc.setLocalDescription(j);for(const H of S){const{trackId:F}=H,$=D.get(F),q=this._pc.getTransceivers().find(se=>se.mid===$);if(!q)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set($,q),p.push({localId:$,track:q.receiver.track,rtpReceiver:q.receiver})}return p}async stopReceiving(S){if(this.assertRecvDirection(),this._closed)return;for(const O of S){P.debug("stopReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(j.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const O of S)this._mapMidTransceiver.delete(O)}async pauseReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const O of S){P.debug("pauseReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");j.direction="inactive",this._remoteSdp.pauseMediaSection(O)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}async resumeReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const O of S){P.debug("resumeReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");j.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(O)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}async getReceiverStats(S){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:S,label:p,protocol:D}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:O,ordered:j,maxPacketLifeTime:I,maxRetransmits:H}=S,F={negotiated:!0,id:O,ordered:j,maxPacketLifeTime:I,maxRetransmits:H,protocol:D};P.debug("receiveDataChannel() [options:%o]",F);const $=this._pc.createDataChannel(p,F);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const q={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",q),await this._pc.setRemoteDescription(q);const se=await this._pc.createAnswer();if(!this._transportReady){const J=x.parse(se.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",se),await this._pc.setLocalDescription(se),this._hasDataChannelMediaSection=!0}return{dataChannel:$}}async setupTransport({localDtlsRole:S,localSdpObject:p}){p||(p=x.parse(this._pc.localDescription.sdp));const D=_.extractDtlsParameters({sdpObject:p});D.role=S,this._remoteSdp.updateDtlsRole(S==="client"?"server":"client"),await new Promise((O,j)=>{this.safeEmit("@connect",{dtlsParameters:D},O,j)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new w.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Chrome111=N},2196:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},2211:T=>{T.exports=function(b){var u,x,f="",y=(b=function(_){return _||(_={}),{length:_.length||8,numeric:typeof _.numeric!="boolean"||_.numeric,letters:typeof _.letters!="boolean"||_.letters,special:typeof _.special=="boolean"&&_.special,exclude:Array.isArray(_.exclude)?_.exclude:[]}}(b)).length,E=(b.exclude,function(_){var m="";_.numeric&&(m+="0123456789"),_.letters&&(m+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),_.special&&(m+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var k=0;k<=_.exclude.length;k++)m=m.replace(_.exclude[k],"");return m}(b));for(u=1;u<=y;u++)f+=E.substring(x=Math.floor(Math.random()*E.length),x+1);return f}},2215:(T,b,u)=>{var x,f;(function(y){(f=typeof(x=y)=="function"?x.call(b,u,b,T):x)===void 0||(T.exports=f),T.exports=y()})(function(){function y(){for(var _=0,m={};_<arguments.length;_++){var k=arguments[_];for(var w in k)m[w]=k[w]}return m}function E(_){return _.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function _(m){function k(){}function w(g,A,P){if(typeof document<"u"){typeof(P=y({path:"/"},k.defaults,P)).expires=="number"&&(P.expires=new Date(1*new Date+864e5*P.expires)),P.expires=P.expires?P.expires.toUTCString():"";try{var z=JSON.stringify(A);/^[\{\[]/.test(z)&&(A=z)}catch{}A=m.write?m.write(A,g):encodeURIComponent(String(A)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),g=encodeURIComponent(String(g)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var N="";for(var R in P)P[R]&&(N+="; "+R,P[R]!==!0&&(N+="="+P[R].split(";")[0]));return document.cookie=g+"="+A+N}}function U(g,A){if(typeof document<"u"){for(var P={},z=document.cookie?document.cookie.split("; "):[],N=0;N<z.length;N++){var R=z[N].split("="),S=R.slice(1).join("=");A||S.charAt(0)!=='"'||(S=S.slice(1,-1));try{var p=E(R[0]);if(S=(m.read||m)(S,p)||E(S),A)try{S=JSON.parse(S)}catch{}if(P[p]=S,g===p)break}catch{}}return g?P[g]:P}}return k.set=w,k.get=function(g){return U(g,!1)},k.getJSON=function(g){return U(g,!0)},k.remove=function(g,A){w(g,"",y(A,{expires:-1}))},k.defaults={},k.withConverter=_,k}(function(){})})},2284:(T,b,u)=>{function x(f){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},x(f)}u.d(b,{A:()=>x})},2291:(T,b)=>{let u;Object.defineProperty(b,"__esModule",{value:!0});const x=new Uint8Array(16);b.default=function(){if(!u){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");u=crypto.getRandomValues.bind(crypto)}return u(x)}},2292:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Firefox120=void 0;const x=u(7363),f=u(2994),y=u(4893),E=u(1765),_=u(8046),m=u(5544),k=u(5938),w=u(521),U=u(1305),g=u(3303),A=new f.Logger("Firefox120"),P={OS:16,MIS:2048};class z extends w.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new z}constructor(){super()}get name(){return"Firefox120"}close(){if(A.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){A.debug("getNativeRtpCapabilities()");const R=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),S=document.createElement("canvas");S.getContext("2d");const p=S.captureStream().getVideoTracks()[0];try{R.addTransceiver("audio",{direction:"sendrecv"}),R.addTransceiver(p,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const D=await R.createOffer();try{S.remove()}catch{}try{p.stop()}catch{}try{R.close()}catch{}const O=x.parse(D.sdp);return m.extractRtpCapabilities({sdpObject:O})}catch(D){try{S.remove()}catch{}try{p.stop()}catch{}try{R.close()}catch{}throw D}}async getNativeSctpCapabilities(){return A.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:R,iceParameters:S,iceCandidates:p,dtlsParameters:D,sctpParameters:O,iceServers:j,iceTransportPolicy:I,additionalSettings:H,proprietaryConstraints:F,extendedRtpCapabilities:$}){this.assertNotClosed(),A.debug("run()"),this._direction=R,this._remoteSdp=new U.RemoteSdp({iceParameters:S,iceCandidates:p,dtlsParameters:D,sctpParameters:O}),this._sendingRtpParametersByKind={audio:_.getSendingRtpParameters("audio",$),video:_.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:_.getSendingRemoteRtpParameters("audio",$),video:_.getSendingRemoteRtpParameters("video",$)},this._pc=new RTCPeerConnection({iceServers:j??[],iceTransportPolicy:I??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...H},F),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",q=>{this.emit("@icecandidateerror",q)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(A.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(R){throw this.assertNotClosed(),new y.UnsupportedError("not supported")}async restartIce(R){if(this.assertNotClosed(),A.debug("restartIce()"),this._remoteSdp.updateIceParameters(R),this._transportReady)if(this._direction==="send"){const S=await this._pc.createOffer({iceRestart:!0});A.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const p={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}else{const S={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const p=await this._pc.createAnswer();A.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:R,encodings:S,codecOptions:p,codec:D,onRtpSender:O}){this.assertNotClosed(),this.assertSendDirection(),A.debug("send() [kind:%s, track.id:%s]",R.kind,R.id),S&&S.length>1&&S.forEach((Re,Se)=>{Re.rid=`r${Se}`});const j=E.clone(this._sendingRtpParametersByKind[R.kind]);j.codecs=_.reduceCodecs(j.codecs,D);const I=E.clone(this._sendingRemoteRtpParametersByKind[R.kind]);I.codecs=_.reduceCodecs(I.codecs,D);const H=this._pc.addTransceiver(R,{direction:"sendonly",streams:[this._sendStream],sendEncodings:S});O&&O(H.sender);const F=await this._pc.createOffer();let $=x.parse(F.sdp);$.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:$});const q=(0,g.parse)((S??[{}])[0].scalabilityMode);A.debug("send() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F);const se=H.mid;j.mid=se,$=x.parse(this._pc.localDescription.sdp);const J=$.media[$.media.length-1];if(j.rtcp.cname=m.getCname({offerMediaObject:J}),S)if(S.length===1){const Re=k.getRtpEncodings({offerMediaObject:J});Object.assign(Re[0],S[0]),j.encodings=Re}else j.encodings=S;else j.encodings=k.getRtpEncodings({offerMediaObject:J});if(j.encodings.length>1&&(j.codecs[0].mimeType.toLowerCase()==="video/vp8"||j.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Re of j.encodings)Re.scalabilityMode?Re.scalabilityMode=`L1T${q.temporalLayers}`:Re.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:J,offerRtpParameters:j,answerRtpParameters:I,codecOptions:p});const be={type:"answer",sdp:this._remoteSdp.getSdp()};return A.debug("send() | calling pc.setRemoteDescription() [answer:%o]",be),await this._pc.setRemoteDescription(be),this._mapMidTransceiver.set(se,H),{localId:se,rtpParameters:j,rtpSender:H.sender}}async stopSending(R){if(this.assertSendDirection(),A.debug("stopSending() [localId:%s]",R),this._closed)return;const S=this._mapMidTransceiver.get(R);if(!S)throw new Error("associated transceiver not found");S.sender.replaceTrack(null),this._pc.removeTrack(S.sender),this._remoteSdp.disableMediaSection(S.mid);const p=await this._pc.createOffer();A.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const D={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D),this._mapMidTransceiver.delete(R)}async pauseSending(R){this.assertNotClosed(),this.assertSendDirection(),A.debug("pauseSending() [localId:%s]",R);const S=this._mapMidTransceiver.get(R);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="inactive",this._remoteSdp.pauseMediaSection(R);const p=await this._pc.createOffer();A.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const D={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async resumeSending(R){this.assertNotClosed(),this.assertSendDirection(),A.debug("resumeSending() [localId:%s]",R);const S=this._mapMidTransceiver.get(R);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(R);const p=await this._pc.createOffer();A.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const D={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async replaceTrack(R,S){this.assertNotClosed(),this.assertSendDirection(),S?A.debug("replaceTrack() [localId:%s, track.id:%s]",R,S.id):A.debug("replaceTrack() [localId:%s, no track]",R);const p=this._mapMidTransceiver.get(R);if(!p)throw new Error("associated RTCRtpTransceiver not found");await p.sender.replaceTrack(S)}async setMaxSpatialLayer(R,S){this.assertNotClosed(),this.assertSendDirection(),A.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",R,S);const p=this._mapMidTransceiver.get(R);if(!p)throw new Error("associated transceiver not found");const D=p.sender.getParameters();D.encodings.forEach((I,H)=>{I.active=H<=S}),await p.sender.setParameters(D),this._remoteSdp.muxMediaSectionSimulcast(R,D.encodings);const O=await this._pc.createOffer();A.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const j={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async setRtpEncodingParameters(R,S){this.assertNotClosed(),this.assertSendDirection(),A.debug("setRtpEncodingParameters() [localId:%s, params:%o]",R,S);const p=this._mapMidTransceiver.get(R);if(!p)throw new Error("associated RTCRtpTransceiver not found");const D=p.sender.getParameters();D.encodings.forEach((I,H)=>{D.encodings[H]={...I,...S}}),await p.sender.setParameters(D),this._remoteSdp.muxMediaSectionSimulcast(R,D.encodings);const O=await this._pc.createOffer();A.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const j={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async getSenderStats(R){this.assertNotClosed(),this.assertSendDirection();const S=this._mapMidTransceiver.get(R);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.sender.getStats()}async sendDataChannel({ordered:R,maxPacketLifeTime:S,maxRetransmits:p,label:D,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const j={negotiated:!0,id:this._nextSendSctpStreamId,ordered:R,maxPacketLifeTime:S,maxRetransmits:p,protocol:O};A.debug("sendDataChannel() [options:%o]",j);const I=this._pc.createDataChannel(D,j);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const H=await this._pc.createOffer(),F=x.parse(H.sdp),$=F.media.find(se=>se.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:F}),A.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",H),await this._pc.setLocalDescription(H),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const q={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._hasDataChannelMediaSection=!0}return{dataChannel:I,sctpStreamParameters:{streamId:j.id,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits}}}async receive(R){this.assertNotClosed(),this.assertRecvDirection();const S=[],p=new Map;for(const I of R){const{trackId:H,kind:F,rtpParameters:$,streamId:q}=I;A.debug("receive() [trackId:%s, kind:%s]",H,F);const se=$.mid??String(this._mapMidTransceiver.size);p.set(H,se),this._remoteSdp.receive({mid:se,kind:F,offerRtpParameters:$,streamId:q??$.rtcp.cname,trackId:H})}const D={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",D),await this._pc.setRemoteDescription(D);for(const I of R){const{trackId:H,onRtpReceiver:F}=I;if(F){const $=p.get(H),q=this._pc.getTransceivers().find(se=>se.mid===$);if(!q)throw new Error("transceiver not found");F(q.receiver)}}let O=await this._pc.createAnswer();const j=x.parse(O.sdp);for(const I of R){const{trackId:H,rtpParameters:F}=I,$=p.get(H),q=j.media.find(se=>String(se.mid)===$);m.applyCodecParameters({offerRtpParameters:F,answerMediaObject:q}),O={type:"answer",sdp:x.write(j)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:j}),A.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const I of R){const{trackId:H}=I,F=p.get(H),$=this._pc.getTransceivers().find(q=>q.mid===F);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(F,$),S.push({localId:F,track:$.receiver.track,rtpReceiver:$.receiver})}return S}async stopReceiving(R){if(this.assertRecvDirection(),this._closed)return;for(const D of R){A.debug("stopReceiving() [localId:%s]",D);const O=this._mapMidTransceiver.get(D);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const p=await this._pc.createAnswer();A.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const D of R)this._mapMidTransceiver.delete(D)}async pauseReceiving(R){this.assertNotClosed(),this.assertRecvDirection();for(const D of R){A.debug("pauseReceiving() [localId:%s]",D);const O=this._mapMidTransceiver.get(D);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(D)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const p=await this._pc.createAnswer();A.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async resumeReceiving(R){this.assertNotClosed(),this.assertRecvDirection();for(const D of R){A.debug("resumeReceiving() [localId:%s]",D);const O=this._mapMidTransceiver.get(D);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(D)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const p=await this._pc.createAnswer();A.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async getReceiverStats(R){this.assertRecvDirection();const S=this._mapMidTransceiver.get(R);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:R,label:S,protocol:p}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:D,ordered:O,maxPacketLifeTime:j,maxRetransmits:I}=R,H={negotiated:!0,id:D,ordered:O,maxPacketLifeTime:j,maxRetransmits:I,protocol:p};A.debug("receiveDataChannel() [options:%o]",H);const F=this._pc.createDataChannel(S,H);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const q=await this._pc.createAnswer();if(!this._transportReady){const se=x.parse(q.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:se})}A.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setLocalDescription(q),this._hasDataChannelMediaSection=!0}return{dataChannel:F}}async setupTransport({localDtlsRole:R,localSdpObject:S}){S||(S=x.parse(this._pc.localDescription.sdp));const p=m.extractDtlsParameters({sdpObject:S});p.role=R,this._remoteSdp.updateDtlsRole(R==="client"?"server":"client"),await new Promise((D,O)=>{this.safeEmit("@connect",{dtlsParameters:p},D,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new y.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Firefox120=z},2696:function(T,b,u){var x;T.exports=(x=u(9021),u(754),u(4636),u(9506),u(7165),function(){var f=x,y=f.lib.StreamCipher,E=f.algo,_=[],m=[],k=[],w=E.RabbitLegacy=y.extend({_doReset:function(){var g=this._key.words,A=this.cfg.iv,P=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],z=this._C=[g[2]<<16|g[2]>>>16,4294901760&g[0]|65535&g[1],g[3]<<16|g[3]>>>16,4294901760&g[1]|65535&g[2],g[0]<<16|g[0]>>>16,4294901760&g[2]|65535&g[3],g[1]<<16|g[1]>>>16,4294901760&g[3]|65535&g[0]];this._b=0;for(var N=0;N<4;N++)U.call(this);for(N=0;N<8;N++)z[N]^=P[N+4&7];if(A){var R=A.words,S=R[0],p=R[1],D=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),O=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),j=D>>>16|4294901760&O,I=O<<16|65535&D;for(z[0]^=D,z[1]^=j,z[2]^=O,z[3]^=I,z[4]^=D,z[5]^=j,z[6]^=O,z[7]^=I,N=0;N<4;N++)U.call(this)}},_doProcessBlock:function(g,A){var P=this._X;U.call(this),_[0]=P[0]^P[5]>>>16^P[3]<<16,_[1]=P[2]^P[7]>>>16^P[5]<<16,_[2]=P[4]^P[1]>>>16^P[7]<<16,_[3]=P[6]^P[3]>>>16^P[1]<<16;for(var z=0;z<4;z++)_[z]=16711935&(_[z]<<8|_[z]>>>24)|4278255360&(_[z]<<24|_[z]>>>8),g[A+z]^=_[z]},blockSize:4,ivSize:2});function U(){for(var g=this._X,A=this._C,P=0;P<8;P++)m[P]=A[P];for(A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<m[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<m[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<m[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<m[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<m[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<m[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<m[6]>>>0?1:0)|0,this._b=A[7]>>>0<m[7]>>>0?1:0,P=0;P<8;P++){var z=g[P]+A[P],N=65535&z,R=z>>>16,S=((N*N>>>17)+N*R>>>15)+R*R,p=((4294901760&z)*z|0)+((65535&z)*z|0);k[P]=S^p}g[0]=k[0]+(k[7]<<16|k[7]>>>16)+(k[6]<<16|k[6]>>>16)|0,g[1]=k[1]+(k[0]<<8|k[0]>>>24)+k[7]|0,g[2]=k[2]+(k[1]<<16|k[1]>>>16)+(k[0]<<16|k[0]>>>16)|0,g[3]=k[3]+(k[2]<<8|k[2]>>>24)+k[1]|0,g[4]=k[4]+(k[3]<<16|k[3]>>>16)+(k[2]<<16|k[2]>>>16)|0,g[5]=k[5]+(k[4]<<8|k[4]>>>24)+k[3]|0,g[6]=k[6]+(k[5]<<16|k[5]>>>16)+(k[4]<<16|k[4]>>>16)|0,g[7]=k[7]+(k[6]<<8|k[6]>>>24)+k[5]|0}f.RabbitLegacy=y._createHelper(w)}(),x.RabbitLegacy)},2731:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.FakeHandler=void 0;const x=u(5328),f=u(3953),y=u(2994),E=u(1765),_=u(8046),m=u(4893),k=u(521),w=new y.Logger("FakeHandler");class U extends f.EnhancedEventEmitter{id;ordered;maxPacketLifeTime;maxRetransmits;label;protocol;constructor({id:P,ordered:z,maxPacketLifeTime:N,maxRetransmits:R,label:S,protocol:p}){super(),this.id=P,this.ordered=z,this.maxPacketLifeTime=N,this.maxRetransmits=R,this.label=S,this.protocol=p}close(){this.safeEmit("close"),this.emit("@close")}send(P){this.safeEmit("message",P)}addEventListener(P,z){this.on(P,z)}}class g extends k.HandlerInterface{_closed=!1;fakeParameters;_rtpParametersByKind;_cname=`CNAME-${E.generateRandomNumber()}`;_transportReady=!1;_nextLocalId=1;_tracks=new Map;_nextSctpStreamId=0;static createFactory(P){return()=>new g(P)}constructor(P){super(),this.fakeParameters=P}get name(){return"FakeHandler"}close(){w.debug("close()"),this._closed||(this._closed=!0)}setIceGatheringState(P){this.emit("@icegatheringstatechange",P)}setConnectionState(P){this.emit("@connectionstatechange",P)}async getNativeRtpCapabilities(){return w.debug("getNativeRtpCapabilities()"),this.fakeParameters.generateNativeRtpCapabilities()}async getNativeSctpCapabilities(){return w.debug("getNativeSctpCapabilities()"),this.fakeParameters.generateNativeSctpCapabilities()}run({direction:P,iceParameters:z,iceCandidates:N,dtlsParameters:R,sctpParameters:S,iceServers:p,iceTransportPolicy:D,proprietaryConstraints:O,extendedRtpCapabilities:j}){this.assertNotClosed(),w.debug("run()"),this._rtpParametersByKind={audio:_.getSendingRtpParameters("audio",j),video:_.getSendingRtpParameters("video",j)}}async updateIceServers(P){this.assertNotClosed(),w.debug("updateIceServers()")}async restartIce(P){this.assertNotClosed(),w.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:P,encodings:z,codecOptions:N,codec:R}){this.assertNotClosed(),w.debug("send() [kind:%s, track.id:%s]",P.kind,P.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const S=E.clone(this._rtpParametersByKind[P.kind]),p=S.codecs.some(O=>/.+\/rtx$/i.test(O.mimeType));S.mid=`mid-${E.generateRandomNumber()}`,z||(z=[{}]);for(const O of z)O.ssrc=E.generateRandomNumber(),p&&(O.rtx={ssrc:E.generateRandomNumber()});S.encodings=z,S.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const D=this._nextLocalId++;return this._tracks.set(D,P),{localId:String(D),rtpParameters:S}}async stopSending(P){if(w.debug("stopSending() [localId:%s]",P),!this._closed){if(!this._tracks.has(Number(P)))throw new Error("local track not found");this._tracks.delete(Number(P))}}async pauseSending(P){this.assertNotClosed()}async resumeSending(P){this.assertNotClosed()}async replaceTrack(P,z){this.assertNotClosed(),z?w.debug("replaceTrack() [localId:%s, track.id:%s]",P,z.id):w.debug("replaceTrack() [localId:%s, no track]",P),this._tracks.delete(Number(P)),this._tracks.set(Number(P),z)}async setMaxSpatialLayer(P,z){this.assertNotClosed(),w.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",P,z)}async setRtpEncodingParameters(P,z){this.assertNotClosed(),w.debug("setRtpEncodingParameters() [localId:%s, params:%o]",P,z)}async getSenderStats(P){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:P,maxPacketLifeTime:z,maxRetransmits:N,label:R,protocol:S}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),w.debug("sendDataChannel()"),{dataChannel:new U({id:this._nextSctpStreamId++,ordered:P,maxPacketLifeTime:z,maxRetransmits:N,label:R,protocol:S}),sctpStreamParameters:{streamId:this._nextSctpStreamId,ordered:P,maxPacketLifeTime:z,maxRetransmits:N}}}async receive(P){this.assertNotClosed();const z=[];for(const N of P){const{trackId:R,kind:S}=N;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),w.debug("receive() [trackId:%s, kind:%s]",R,S);const p=this._nextLocalId++,D=new x.FakeMediaStreamTrack({kind:S});this._tracks.set(p,D),z.push({localId:String(p),track:D})}return z}async stopReceiving(P){if(!this._closed)for(const z of P)w.debug("stopReceiving() [localId:%s]",z),this._tracks.delete(Number(z))}async pauseReceiving(P){this.assertNotClosed()}async resumeReceiving(P){this.assertNotClosed()}async getReceiverStats(P){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:P,label:z,protocol:N}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),w.debug("receiveDataChannel()"),{dataChannel:new U({id:P.streamId,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits,label:z,protocol:N})}}async setupTransport({localDtlsRole:P,localSdpObject:z}){const N=E.clone(this.fakeParameters.generateLocalDtlsParameters());P&&(N.role=P),this.emit("@connectionstatechange","connecting"),await new Promise((R,S)=>this.emit("@connect",{dtlsParameters:N},R,S)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new m.InvalidStateError("method called in a closed handler")}}b.FakeHandler=g},2770:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0});const x=u(9746);b.default=function(f){if(!(0,x.default)(f))throw TypeError("Invalid UUID");return parseInt(f.slice(14,15),16)}},2829:(T,b)=>{function u(f,y,E,_){switch(f){case 0:return y&E^~y&_;case 1:case 3:return y^E^_;case 2:return y&E^y&_^E&_}}function x(f,y){return f<<y|f>>>32-y}Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(f){const y=[1518500249,1859775393,2400959708,3395469782],E=[1732584193,4023233417,2562383102,271733878,3285377520],_=new Uint8Array(f.length+1);_.set(f),_[f.length]=128;const m=(f=_).length/4+2,k=Math.ceil(m/16),w=new Array(k);for(let U=0;U<k;++U){const g=new Uint32Array(16);for(let A=0;A<16;++A)g[A]=f[64*U+4*A]<<24|f[64*U+4*A+1]<<16|f[64*U+4*A+2]<<8|f[64*U+4*A+3];w[U]=g}w[k-1][14]=8*(f.length-1)/Math.pow(2,32),w[k-1][14]=Math.floor(w[k-1][14]),w[k-1][15]=8*(f.length-1)&4294967295;for(let U=0;U<k;++U){const g=new Uint32Array(80);for(let S=0;S<16;++S)g[S]=w[U][S];for(let S=16;S<80;++S)g[S]=x(g[S-3]^g[S-8]^g[S-14]^g[S-16],1);let A=E[0],P=E[1],z=E[2],N=E[3],R=E[4];for(let S=0;S<80;++S){const p=Math.floor(S/20),D=x(A,5)+u(p,P,z,N)+R+y[p]+g[S]>>>0;R=N,N=z,z=x(P,30)>>>0,P=A,A=D}E[0]=E[0]+A>>>0,E[1]=E[1]+P>>>0,E[2]=E[2]+z>>>0,E[3]=E[3]+N>>>0,E[4]=E[4]+R>>>0}return Uint8Array.of(E[0]>>24,E[0]>>16,E[0]>>8,E[0],E[1]>>24,E[1]>>16,E[1]>>8,E[1],E[2]>>24,E[2]>>16,E[2]>>8,E[2],E[3]>>24,E[3]>>16,E[3]>>8,E[3],E[4]>>24,E[4]>>16,E[4]>>8,E[4])}},2901:(T,b,u)=>{u.d(b,{A:()=>y});var x=u(816);function f(E,_){for(var m=0;m<_.length;m++){var k=_[m];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(E,(0,x.A)(k.key),k)}}function y(E,_,m){return _&&f(E.prototype,_),m&&f(E,m),Object.defineProperty(E,"prototype",{writable:!1}),E}},2988:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.URL=b.DNS=b.stringToBytes=void 0;const x=u(1797),f=u(6011);function y(E){E=unescape(encodeURIComponent(E));const _=new Uint8Array(E.length);for(let m=0;m<E.length;++m)_[m]=E.charCodeAt(m);return _}b.stringToBytes=y,b.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",b.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",b.default=function(E,_,m,k,w,U){const g=typeof m=="string"?y(m):m,A=typeof k=="string"?(0,x.default)(k):k;if(typeof k=="string"&&(k=(0,x.default)(k)),k?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let P=new Uint8Array(16+g.length);if(P.set(A),P.set(g,A.length),P=_(P),P[6]=15&P[6]|E,P[8]=63&P[8]|128,w){U=U||0;for(let z=0;z<16;++z)w[U+z]=P[z];return w}return(0,f.unsafeStringify)(P)}},2994:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Logger=void 0;const x=u(7833),f="mediasoup-client";b.Logger=class{_debug;_warn;_error;constructor(y){y?(this._debug=(0,x.default)(`${f}:${y}`),this._warn=(0,x.default)(`${f}:WARN:${y}`),this._error=(0,x.default)(`${f}:ERROR:${y}`)):(this._debug=(0,x.default)(f),this._warn=(0,x.default)(`${f}:WARN`),this._error=(0,x.default)(`${f}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3009:function(T,b,u){var x;T.exports=(x=u(9021),function(f){var y=x,E=y.lib,_=E.WordArray,m=E.Hasher,k=y.algo,w=[],U=[];(function(){function P(S){for(var p=f.sqrt(S),D=2;D<=p;D++)if(!(S%D))return!1;return!0}function z(S){return 4294967296*(S-(0|S))|0}for(var N=2,R=0;R<64;)P(N)&&(R<8&&(w[R]=z(f.pow(N,.5))),U[R]=z(f.pow(N,.3333333333333333)),R++),N++})();var g=[],A=k.SHA256=m.extend({_doReset:function(){this._hash=new _.init(w.slice(0))},_doProcessBlock:function(P,z){for(var N=this._hash.words,R=N[0],S=N[1],p=N[2],D=N[3],O=N[4],j=N[5],I=N[6],H=N[7],F=0;F<64;F++){if(F<16)g[F]=0|P[z+F];else{var $=g[F-15],q=($<<25|$>>>7)^($<<14|$>>>18)^$>>>3,se=g[F-2],J=(se<<15|se>>>17)^(se<<13|se>>>19)^se>>>10;g[F]=q+g[F-7]+J+g[F-16]}var be=R&S^R&p^S&p,Re=(R<<30|R>>>2)^(R<<19|R>>>13)^(R<<10|R>>>22),Se=H+((O<<26|O>>>6)^(O<<21|O>>>11)^(O<<7|O>>>25))+(O&j^~O&I)+U[F]+g[F];H=I,I=j,j=O,O=D+Se|0,D=p,p=S,S=R,R=Se+(Re+be)|0}N[0]=N[0]+R|0,N[1]=N[1]+S|0,N[2]=N[2]+p|0,N[3]=N[3]+D|0,N[4]=N[4]+O|0,N[5]=N[5]+j|0,N[6]=N[6]+I|0,N[7]=N[7]+H|0},_doFinalize:function(){var P=this._data,z=P.words,N=8*this._nDataBytes,R=8*P.sigBytes;return z[R>>>5]|=128<<24-R%32,z[14+(R+64>>>9<<4)]=f.floor(N/4294967296),z[15+(R+64>>>9<<4)]=N,P.sigBytes=4*z.length,this._process(),this._hash},clone:function(){var P=m.clone.call(this);return P._hash=this._hash.clone(),P}});y.SHA256=m._createHelper(A),y.HmacSHA256=m._createHmacHelper(A)}(Math),x.SHA256)},3029:(T,b,u)=>{function x(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}u.d(b,{A:()=>x})},3128:function(T,b,u){var x;T.exports=(x=u(9021),u(754),u(4636),u(9506),u(7165),function(){var f=x,y=f.lib.BlockCipher,E=f.algo;const _=16,m=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],k=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var w={pbox:[],sbox:[]};function U(N,R){let S=R>>24&255,p=R>>16&255,D=R>>8&255,O=255&R,j=N.sbox[0][S]+N.sbox[1][p];return j^=N.sbox[2][D],j+=N.sbox[3][O],j}function g(N,R,S){let p,D=R,O=S;for(let j=0;j<_;++j)D^=N.pbox[j],O=U(N,D)^O,p=D,D=O,O=p;return p=D,D=O,O=p,O^=N.pbox[_],D^=N.pbox[_+1],{left:D,right:O}}function A(N,R,S){let p,D=R,O=S;for(let j=_+1;j>1;--j)D^=N.pbox[j],O=U(N,D)^O,p=D,D=O,O=p;return p=D,D=O,O=p,O^=N.pbox[1],D^=N.pbox[0],{left:D,right:O}}function P(N,R,S){for(let I=0;I<4;I++){N.sbox[I]=[];for(let H=0;H<256;H++)N.sbox[I][H]=k[I][H]}let p=0;for(let I=0;I<_+2;I++)N.pbox[I]=m[I]^R[p],p++,p>=S&&(p=0);let D=0,O=0,j=0;for(let I=0;I<_+2;I+=2)j=g(N,D,O),D=j.left,O=j.right,N.pbox[I]=D,N.pbox[I+1]=O;for(let I=0;I<4;I++)for(let H=0;H<256;H+=2)j=g(N,D,O),D=j.left,O=j.right,N.sbox[I][H]=D,N.sbox[I][H+1]=O;return!0}var z=E.Blowfish=y.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var N=this._keyPriorReset=this._key,R=N.words,S=N.sigBytes/4;P(w,R,S)}},encryptBlock:function(N,R){var S=g(w,N[R],N[R+1]);N[R]=S.left,N[R+1]=S.right},decryptBlock:function(N,R){var S=A(w,N[R],N[R+1]);N[R]=S.left,N[R+1]=S.right},blockSize:2,keySize:4,ivSize:2});f.Blowfish=y._createHelper(z)}(),x.Blowfish)},3145:(T,b,u)=>{function x(f,y){(y==null||y>f.length)&&(y=f.length);for(var E=0,_=Array(y);E<y;E++)_[E]=f[E];return _}u.d(b,{A:()=>x})},3200:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProfileLevelId=b.Level=b.Profile=void 0,b.parseProfileLevelId=g,b.profileLevelIdToString=A,b.profileToString=function(R){switch(R){case f.ConstrainedBaseline:return"ConstrainedBaseline";case f.Baseline:return"Baseline";case f.Main:return"Main";case f.ConstrainedHigh:return"ConstrainedHigh";case f.High:return"High";case f.PredictiveHigh444:return"PredictiveHigh444";default:return void x.warn(`profileToString() | unrecognized profile ${R}`)}},b.levelToString=function(R){switch(R){case y.L1_b:return"1b";case y.L1:return"1";case y.L1_1:return"1.1";case y.L1_2:return"1.2";case y.L1_3:return"1.3";case y.L2:return"2";case y.L2_1:return"2.1";case y.L2_2:return"2.2";case y.L3:return"3";case y.L3_1:return"3.1";case y.L3_2:return"3.2";case y.L4:return"4";case y.L4_1:return"4.1";case y.L4_2:return"4.2";case y.L5:return"5";case y.L5_1:return"5.1";case y.L5_2:return"5.2";default:return void x.warn(`levelToString() | unrecognized level ${R}`)}},b.parseSdpProfileLevelId=P,b.isSameProfile=function(R={},S={}){const p=P(R),D=P(S);return!!(p&&D&&p.profile===D.profile)},b.isSameProfileAndLevel=function(R={},S={}){const p=P(R),D=P(S);return!!(p&&D&&p.profile===D.profile&&p.level==D.level)},b.generateProfileLevelIdStringForAnswer=function(R={},S={}){if(!R["profile-level-id"]&&!S["profile-level-id"])return void x.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const p=P(R),D=P(S);if(!p)throw new TypeError("invalid local_profile_level_id");if(!D)throw new TypeError("invalid remote_profile_level_id");if(p.profile!==D.profile)throw new TypeError("H264 Profile mismatch");const O=N(R)&&N(S),j=p.level,I=D.level,H=($=j,q=I,function(se,J){return se===y.L1_b?J!==y.L1&&J!==y.L1_b:J===y.L1_b?se!==y.L1:se<J}($,q)?$:q),F=O?j:H;var $,q;return x.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${p.profile}, level:${F}]`),A(new E(p.profile,F))},b.supportedLevel=function(R,S){for(let p=U.length-1;p>=0;--p){const D=U[p];if(256*D.max_macroblock_frame_size<=R&&D.max_macroblocks_per_second<=S*D.max_macroblock_frame_size)return x.debug(`supportedLevel() | result [max_frame_pixel_count:${R}, max_fps:${S}, level:${D.level}]`),D.level}return void x.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${R}, max_fps:${S}]`)};const x=new(u(3582)).Logger;var f,y;(function(R){R[R.ConstrainedBaseline=1]="ConstrainedBaseline",R[R.Baseline=2]="Baseline",R[R.Main=3]="Main",R[R.ConstrainedHigh=4]="ConstrainedHigh",R[R.High=5]="High",R[R.PredictiveHigh444=6]="PredictiveHigh444"})(f||(b.Profile=f={})),function(R){R[R.L1_b=0]="L1_b",R[R.L1=10]="L1",R[R.L1_1=11]="L1_1",R[R.L1_2=12]="L1_2",R[R.L1_3=13]="L1_3",R[R.L2=20]="L2",R[R.L2_1=21]="L2_1",R[R.L2_2=22]="L2_2",R[R.L3=30]="L3",R[R.L3_1=31]="L3_1",R[R.L3_2=32]="L3_2",R[R.L4=40]="L4",R[R.L4_1=41]="L4_1",R[R.L4_2=42]="L4_2",R[R.L5=50]="L5",R[R.L5_1=51]="L5_1",R[R.L5_2=52]="L5_2"}(y||(b.Level=y={}));class E{constructor(S,p){this.profile=S,this.level=p}}b.ProfileLevelId=E;const _=new E(f.ConstrainedBaseline,y.L3_1);class m{constructor(S){this.mask=~z("x",S),this.masked_value=z("1",S)}isMatch(S){return this.masked_value===(S&this.mask)}}class k{constructor(S,p,D){this.profile_idc=S,this.profile_iop=p,this.profile=D}}const w=[new k(66,new m("x1xx0000"),f.ConstrainedBaseline),new k(77,new m("1xxx0000"),f.ConstrainedBaseline),new k(88,new m("11xx0000"),f.ConstrainedBaseline),new k(66,new m("x0xx0000"),f.Baseline),new k(88,new m("10xx0000"),f.Baseline),new k(77,new m("0x0x0000"),f.Main),new k(100,new m("00000000"),f.High),new k(100,new m("00001100"),f.ConstrainedHigh),new k(244,new m("00000000"),f.PredictiveHigh444)],U=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:y.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:y.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:y.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:y.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:y.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:y.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:y.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:y.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:y.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:y.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:y.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:y.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:y.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:y.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:y.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:y.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:y.L5_2}];function g(R){if(typeof R!="string"||R.length!==6)return;const S=parseInt(R,16);if(S===0)return;const p=255&S,D=S>>8&255,O=S>>16&255;let j;switch(p){case y.L1_1:j=16&D?y.L1_b:y.L1_1;break;case y.L1:case y.L1_2:case y.L1_3:case y.L2:case y.L2_1:case y.L2_2:case y.L3:case y.L3_1:case y.L3_2:case y.L4:case y.L4_1:case y.L4_2:case y.L5:case y.L5_1:case y.L5_2:j=p;break;default:return void x.warn(`parseProfileLevelId() | unrecognized level_idc [str:${R}, level_idc:${p}]`)}for(const I of w)if(O===I.profile_idc&&I.profile_iop.isMatch(D))return x.debug(`parseProfileLevelId() | result [str:${R}, profile:${I.profile}, level:${j}]`),new E(I.profile,j);x.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${R}, profile_idc:${O}, profile_iop:${D}]`)}function A(R){if(R.level==y.L1_b)switch(R.profile){case f.ConstrainedBaseline:return"42f00b";case f.Baseline:return"42100b";case f.Main:return"4d100b";default:return void x.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${R.profile}`)}let S;switch(R.profile){case f.ConstrainedBaseline:S="42e0";break;case f.Baseline:S="4200";break;case f.Main:S="4d00";break;case f.ConstrainedHigh:S="640c";break;case f.High:S="6400";break;case f.PredictiveHigh444:S="f400";break;default:return void x.warn(`profileLevelIdToString() | unrecognized profile ${R.profile}`)}let p=R.level.toString(16);return p.length===1&&(p=`0${p}`),`${S}${p}`}function P(R={}){const S=R["profile-level-id"];return S?g(S):_}function z(R,S){return+(S[0]===R)<<7|+(S[1]===R)<<6|+(S[2]===R)<<5|+(S[3]===R)<<4|+(S[4]===R)<<3|+(S[5]===R)<<2|+(S[6]===R)<<1|+(S[7]===R)}function N(R={}){const S=R["level-asymmetry-allowed"];return S===!0||S===1||S==="1"}},3240:function(T,b,u){var x;T.exports=(x=u(9021),function(f){var y=x,E=y.lib,_=E.Base,m=E.WordArray,k=y.x64={};k.Word=_.extend({init:function(w,U){this.high=w,this.low=U}}),k.WordArray=_.extend({init:function(w,U){w=this.words=w||[],this.sigBytes=U!=f?U:8*w.length},toX32:function(){for(var w=this.words,U=w.length,g=[],A=0;A<U;A++){var P=w[A];g.push(P.high),g.push(P.low)}return m.create(g,this.sigBytes)},clone:function(){for(var w=_.clone.call(this),U=w.words=this.words.slice(0),g=U.length,A=0;A<g;A++)U[A]=U[A].clone();return w}})}(),x)},3303:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.parse=function(x){const f=u.exec(x??"");return f?{spatialLayers:Number(f[1]),temporalLayers:Number(f[2])}:{spatialLayers:1,temporalLayers:1}};const u=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})")},3465:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.default="00000000-0000-0000-0000-000000000000"},3471:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.OfferMediaSection=b.AnswerMediaSection=b.MediaSection=void 0;const x=u(7363),f=u(1765);class y{_mediaObject;_planB;constructor({iceParameters:m,iceCandidates:k,dtlsParameters:w,planB:U=!1}){if(this._mediaObject={},this._planB=U,m&&this.setIceParameters(m),k){this._mediaObject.candidates=[];for(const g of k){const A={component:1};A.foundation=g.foundation,A.ip=g.address??g.ip,A.port=g.port,A.priority=g.priority,A.transport=g.protocol,A.type=g.type,g.tcpType&&(A.tcptype=g.tcpType),this._mediaObject.candidates.push(A)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}w&&this.setDtlsRole(w.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(m){this._mediaObject.iceUfrag=m.usernameFragment,this._mediaObject.icePwd=m.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}b.MediaSection=y,b.AnswerMediaSection=class extends y{constructor({iceParameters:_,iceCandidates:m,dtlsParameters:k,sctpParameters:w,plainRtpParameters:U,planB:g=!1,offerMediaObject:A,offerRtpParameters:P,answerRtpParameters:z,codecOptions:N}){switch(super({iceParameters:_,iceCandidates:m,dtlsParameters:k,planB:g}),this._mediaObject.mid=String(A.mid),this._mediaObject.type=A.type,this._mediaObject.protocol=A.protocol,U?(this._mediaObject.connection={ip:U.ip,version:U.ipVersion},this._mediaObject.port=U.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),A.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const R of z.codecs){const S={payload:R.payloadType,codec:E(R),rate:R.clockRate};R.channels>1&&(S.encoding=R.channels),this._mediaObject.rtp.push(S);const p=f.clone(R.parameters)??{};let D=f.clone(R.rtcpFeedback)??[];if(N){const{opusStereo:j,opusFec:I,opusDtx:H,opusMaxPlaybackRate:F,opusMaxAverageBitrate:$,opusPtime:q,opusNack:se,videoGoogleStartBitrate:J,videoGoogleMaxBitrate:be,videoGoogleMinBitrate:Re}=N,Se=P.codecs.find(me=>me.payloadType===R.payloadType);switch(R.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":j!==void 0&&(Se.parameters["sprop-stereo"]=j?1:0,p.stereo=j?1:0),I!==void 0&&(Se.parameters.useinbandfec=I?1:0,p.useinbandfec=I?1:0),H!==void 0&&(Se.parameters.usedtx=H?1:0,p.usedtx=H?1:0),F!==void 0&&(p.maxplaybackrate=F),$!==void 0&&(p.maxaveragebitrate=$),q!==void 0&&(Se.parameters.ptime=q,p.ptime=q),se||(Se.rtcpFeedback=Se.rtcpFeedback.filter(me=>me.type!=="nack"||me.parameter),D=D.filter(me=>me.type!=="nack"||me.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":J!==void 0&&(p["x-google-start-bitrate"]=J),be!==void 0&&(p["x-google-max-bitrate"]=be),Re!==void 0&&(p["x-google-min-bitrate"]=Re)}}const O={payload:R.payloadType,config:""};for(const j of Object.keys(p))O.config&&(O.config+=";"),O.config+=`${j}=${p[j]}`;O.config&&this._mediaObject.fmtp.push(O);for(const j of D)this._mediaObject.rtcpFb.push({payload:R.payloadType,type:j.type,subtype:j.parameter})}this._mediaObject.payloads=z.codecs.map(R=>R.payloadType).join(" "),this._mediaObject.ext=[];for(const R of z.headerExtensions)(A.ext??[]).some(S=>S.uri===R.uri)&&this._mediaObject.ext.push({uri:R.uri,value:R.id});if(A.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),A.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:A.simulcast.list1},this._mediaObject.rids=[];for(const R of A.rids??[])R.direction==="send"&&this._mediaObject.rids.push({id:R.id,direction:"recv"})}else if(A.simulcast_03){this._mediaObject.simulcast_03={value:A.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const R of A.rids??[])R.direction==="send"&&this._mediaObject.rids.push({id:R.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof A.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=w.port,this._mediaObject.maxMessageSize=w.maxMessageSize):A.sctpmap&&(this._mediaObject.payloads=w.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:w.port,maxMessageSize:w.maxMessageSize})}}setDtlsRole(_){switch(_){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(_){if(!this._mediaObject.simulcast?.list1)return;const m={};for(const U of _)U.rid&&(m[U.rid]=U);const k=this._mediaObject.simulcast.list1,w=x.parseSimulcastStreamList(k);for(const U of w)for(const g of U)g.paused=!m[g.scid]?.active;this._mediaObject.simulcast.list1=w.map(U=>U.map(g=>`${g.paused?"~":""}${g.scid}`).join(",")).join(";")}};function E(_){const m=new RegExp("^(audio|video)/(.+)","i").exec(_.mimeType);if(!m)throw new TypeError("invalid codec.mimeType");return m[2]}b.OfferMediaSection=class extends y{constructor({iceParameters:_,iceCandidates:m,dtlsParameters:k,sctpParameters:w,plainRtpParameters:U,planB:g=!1,mid:A,kind:P,offerRtpParameters:z,streamId:N,trackId:R,oldDataChannelSpec:S=!1}){switch(super({iceParameters:_,iceCandidates:m,dtlsParameters:k,planB:g}),this._mediaObject.mid=String(A),this._mediaObject.type=P,U?(this._mediaObject.connection={ip:U.ip,version:U.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=U.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=w?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",P){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${N??"-"} ${R}`);for(const j of z.codecs){const I={payload:j.payloadType,codec:E(j),rate:j.clockRate};j.channels>1&&(I.encoding=j.channels),this._mediaObject.rtp.push(I);const H={payload:j.payloadType,config:""};for(const F of Object.keys(j.parameters))H.config&&(H.config+=";"),H.config+=`${F}=${j.parameters[F]}`;H.config&&this._mediaObject.fmtp.push(H);for(const F of j.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:j.payloadType,type:F.type,subtype:F.parameter})}this._mediaObject.payloads=z.codecs.map(j=>j.payloadType).join(" "),this._mediaObject.ext=[];for(const j of z.headerExtensions)this._mediaObject.ext.push({uri:j.uri,value:j.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const p=z.encodings[0],D=p.ssrc,O=p.rtx?.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],z.rtcp.cname&&this._mediaObject.ssrcs.push({id:D,attribute:"cname",value:z.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:D,attribute:"msid",value:`${N??"-"} ${R}`}),O&&(z.rtcp.cname&&this._mediaObject.ssrcs.push({id:O,attribute:"cname",value:z.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:O,attribute:"msid",value:`${N??"-"} ${R}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${D} ${O}`}));break}case"application":S?(this._mediaObject.payloads=w.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:w.port,maxMessageSize:w.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=w.port,this._mediaObject.maxMessageSize=w.maxMessageSize)}}setDtlsRole(_){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:_,streamId:m,trackId:k}){const w=_.encodings[0],U=w.ssrc,g=w.rtx?.ssrc,A=this._mediaObject.payloads.split(" ");for(const P of _.codecs){if(A.includes(String(P.payloadType)))continue;const z={payload:P.payloadType,codec:E(P),rate:P.clockRate};P.channels>1&&(z.encoding=P.channels),this._mediaObject.rtp.push(z);const N={payload:P.payloadType,config:""};for(const R of Object.keys(P.parameters))N.config&&(N.config+=";"),N.config+=`${R}=${P.parameters[R]}`;N.config&&this._mediaObject.fmtp.push(N);for(const R of P.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:P.payloadType,type:R.type,subtype:R.parameter})}this._mediaObject.payloads+=` ${_.codecs.filter(P=>!this._mediaObject.payloads.includes(P.payloadType)).map(P=>P.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),_.rtcp.cname&&this._mediaObject.ssrcs.push({id:U,attribute:"cname",value:_.rtcp.cname}),this._mediaObject.ssrcs.push({id:U,attribute:"msid",value:`${m??"-"} ${k}`}),g&&(_.rtcp.cname&&this._mediaObject.ssrcs.push({id:g,attribute:"cname",value:_.rtcp.cname}),this._mediaObject.ssrcs.push({id:g,attribute:"msid",value:`${m??"-"} ${k}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${U} ${g}`}))}planBStopReceiving({offerRtpParameters:_}){const m=_.encodings[0],k=m.ssrc,w=m.rtx?.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(U=>U.id!==k&&U.id!==w),w&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(U=>U.ssrcs!==`${k} ${w}`))}}},3518:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Consumer=void 0;const x=u(2994),f=u(3953),y=u(4893),E=new x.Logger("Consumer");class _ extends f.EnhancedEventEmitter{_id;_localId;_producerId;_closed=!1;_rtpReceiver;_track;_rtpParameters;_paused;_appData;_observer=new f.EnhancedEventEmitter;constructor({id:k,localId:w,producerId:U,rtpReceiver:g,track:A,rtpParameters:P,appData:z}){super(),E.debug("constructor()"),this._id=k,this._localId=w,this._producerId=U,this._rtpReceiver=g,this._track=A,this._rtpParameters=P,this._paused=!A.enabled,this._appData=z??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(k){this._appData=k}get observer(){return this._observer}close(){this._closed||(E.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(E.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new y.InvalidStateError("closed");return new Promise((k,w)=>{this.safeEmit("@getstats",k,w)})}pause(){E.debug("pause()"),this._closed?E.error("pause() | Consumer closed"):this._paused?E.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){E.debug("resume()"),this._closed?E.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):E.debug("resume() | Consumer is already resumed")}onTrackEnded(){E.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}b.Consumer=_},3582:function(T,b,u){var x=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(b,"__esModule",{value:!0}),b.Logger=void 0;const f=x(u(7833)),y="h264-profile-level-id";b.Logger=class{constructor(E){E?(this._debug=(0,f.default)(`${y}:${E}`),this._warn=(0,f.default)(`${y}:WARN:${E}`),this._error=(0,f.default)(`${y}:ERROR:${E}`)):(this._debug=(0,f.default)(y),this._warn=(0,f.default)(`${y}:WARN`),this._error=(0,f.default)(`${y}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3662:(T,b,u)=>{function x(f,y){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,_){return E.__proto__=_,E},x(f,y)}u.d(b,{A:()=>x})},3738:T=>{function b(u){return T.exports=b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},T.exports.__esModule=!0,T.exports.default=T.exports,b(u)}T.exports=b,T.exports.__esModule=!0,T.exports.default=T.exports},3779:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0});const u=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);b.default={randomUUID:u}},3785:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.clone=function(u){return u===void 0?void 0:Number.isNaN(u)?NaN:typeof structuredClone=="function"?structuredClone(u):JSON.parse(JSON.stringify(u))}},3797:function(T,b,u){var x,f,y;T.exports=(y=u(9021),u(7165),y.mode.OFB=(x=y.lib.BlockCipherMode.extend(),f=x.Encryptor=x.extend({processBlock:function(E,_){var m=this._cipher,k=m.blockSize,w=this._iv,U=this._keystream;w&&(U=this._keystream=w.slice(0),this._iv=void 0),m.encryptBlock(U,0);for(var g=0;g<k;g++)E[_+g]^=U[g]}}),x.Decryptor=f,x),y.mode.OFB)},3804:(T,b,u)=>{var x=u(5602),f=/%[sdv%]/g,y=function(k){var w=1,U=arguments,g=U.length;return k.replace(f,function(A){if(w>=g)return A;var P=U[w];switch(w+=1,A){case"%%":return"%";case"%s":return String(P);case"%d":return Number(P);case"%v":return""}})},E=function(k,w,U){var g=[k+"="+(w.format instanceof Function?w.format(w.push?U:U[w.name]):w.format)];if(w.names)for(var A=0;A<w.names.length;A+=1){var P=w.names[A];w.name?g.push(U[w.name][P]):g.push(U[w.names[A]])}else g.push(U[w.name]);return y.apply(null,g)},_=["v","o","s","i","u","e","p","c","b","t","r","z","a"],m=["i","c","b","a"];T.exports=function(k,w){w=w||{},k.version==null&&(k.version=0),k.name==null&&(k.name=" "),k.media.forEach(function(P){P.payloads==null&&(P.payloads="")});var U=w.outerOrder||_,g=w.innerOrder||m,A=[];return U.forEach(function(P){x[P].forEach(function(z){z.name in k&&k[z.name]!=null?A.push(E(P,z,k)):z.push in k&&k[z.push]!=null&&k[z.push].forEach(function(N){A.push(E(P,z,N))})})}),k.media.forEach(function(P){A.push(E("m",x.m[0],P)),g.forEach(function(z){x[z].forEach(function(N){N.name in P&&P[N.name]!=null?A.push(E(z,N,P)):N.push in P&&P[N.push]!=null&&P[N.push].forEach(function(R){A.push(E(z,N,R))})})})}),A.join(`\r
`)+`\r
`}},3953:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.EnhancedEventEmitter=void 0;const x=u(9596),f=new(u(2994)).Logger("EnhancedEventEmitter");class y extends x.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(_,...m){return super.emit(_,...m)}safeEmit(_,...m){try{return super.emit(_,...m)}catch(k){f.error("safeEmit() | event listener threw an error [eventName:%s]:%o",_,k);try{super.emit("listenererror",_,k)}catch{}return!!super.listenerCount(_)}}on(_,m){return super.on(_,m),this}off(_,m){return super.off(_,m),this}addListener(_,m){return super.on(_,m),this}prependListener(_,m){return super.prependListener(_,m),this}once(_,m){return super.once(_,m),this}prependOnceListener(_,m){return super.prependOnceListener(_,m),this}removeListener(_,m){return super.off(_,m),this}removeAllListeners(_){return super.removeAllListeners(_),this}listenerCount(_){return super.listenerCount(_)}listeners(_){return super.listeners(_)}rawListeners(_){return super.rawListeners(_)}}b.EnhancedEventEmitter=y},3954:(T,b,u)=>{function x(f){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},x(f)}u.d(b,{A:()=>x})},4039:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ReactNativeUnifiedPlan=void 0;const x=u(7363),f=u(2994),y=u(1765),E=u(8046),_=u(5544),m=u(5938),k=u(4256),w=u(4893),U=u(521),g=u(1305),A=u(3303),P=new f.Logger("ReactNativeUnifiedPlan"),z={OS:1024,MIS:1024};class N extends U.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new N}constructor(){super()}get name(){return"ReactNativeUnifiedPlan"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const S=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{S.addTransceiver("audio"),S.addTransceiver("video");const p=await S.createOffer();try{S.close()}catch{}const D=x.parse(p.sdp),O=_.extractRtpCapabilities({sdpObject:D});return k.addNackSupportForOpus(O),O}catch(p){try{S.close()}catch{}throw p}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:z}}run({direction:S,iceParameters:p,iceCandidates:D,dtlsParameters:O,sctpParameters:j,iceServers:I,iceTransportPolicy:H,additionalSettings:F,proprietaryConstraints:$,extendedRtpCapabilities:q}){this.assertNotClosed(),P.debug("run()"),this._direction=S,this._remoteSdp=new g.RemoteSdp({iceParameters:p,iceCandidates:D,dtlsParameters:O,sctpParameters:j}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",q),video:E.getSendingRtpParameters("video",q)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",q),video:E.getSendingRemoteRtpParameters("video",q)},O.role&&O.role!=="auto"&&(this._forcedLocalDtlsRole=O.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:I??[],iceTransportPolicy:H??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...F},$),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",se=>{this.emit("@icecandidateerror",se)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(S){this.assertNotClosed(),P.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=S,this._pc.setConfiguration(p)}async restartIce(S){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(S),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:S,encodings:p,codecOptions:D,codec:O,onRtpSender:j}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",S.kind,S.id),p&&p.length>1&&p.forEach((Ce,Be)=>{Ce.rid=`r${Be}`});const I=y.clone(this._sendingRtpParametersByKind[S.kind]);I.codecs=E.reduceCodecs(I.codecs,O);const H=y.clone(this._sendingRemoteRtpParametersByKind[S.kind]);H.codecs=E.reduceCodecs(H.codecs,O);const F=this._remoteSdp.getNextMediaSectionIdx(),$=this._pc.addTransceiver(S,{direction:"sendonly",streams:[this._sendStream],sendEncodings:p});j&&j($.sender);let q,se=await this._pc.createOffer(),J=x.parse(se.sdp);J.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J});let be=!1;const Re=(0,A.parse)((p??[{}])[0].scalabilityMode);p&&p.length===1&&Re.spatialLayers>1&&I.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(P.debug("send() | enabling legacy simulcast for VP9 SVC"),be=!0,J=x.parse(se.sdp),q=J.media[F.idx],m.addLegacySimulcast({offerMediaObject:q,numStreams:Re.spatialLayers}),se={type:"offer",sdp:x.write(J)}),P.debug("send() | calling pc.setLocalDescription() [offer:%o]",se),await this._pc.setLocalDescription(se);let Se=$.mid??void 0;if(Se||P.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),I.mid=Se,J=x.parse(this._pc.localDescription.sdp),q=J.media[F.idx],I.rtcp.cname=_.getCname({offerMediaObject:q}),p)if(p.length===1){let Ce=m.getRtpEncodings({offerMediaObject:q});Object.assign(Ce[0],p[0]),be&&(Ce=[Ce[0]]),I.encodings=Ce}else I.encodings=p;else I.encodings=m.getRtpEncodings({offerMediaObject:q});if(I.encodings.length>1&&(I.codecs[0].mimeType.toLowerCase()==="video/vp8"||I.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Ce of I.encodings)Ce.scalabilityMode?Ce.scalabilityMode=`L1T${Re.temporalLayers}`:Ce.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:q,reuseMid:F.reuseMid,offerRtpParameters:I,answerRtpParameters:H,codecOptions:D});const me={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",me),await this._pc.setRemoteDescription(me),Se||(Se=$.mid,I.mid=Se),this._mapMidTransceiver.set(Se,$),{localId:Se,rtpParameters:I,rtpSender:$.sender}}async stopSending(S){if(this.assertSendDirection(),this._closed)return;P.debug("stopSending() [localId:%s]",S);const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const D=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._mapMidTransceiver.delete(S)}async pauseSending(S){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",S);const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(S);const D=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async resumeSending(S){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",S);const p=this._mapMidTransceiver.get(S);if(this._remoteSdp.resumeSendingMediaSection(S),!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly";const D=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async replaceTrack(S,p){this.assertNotClosed(),this.assertSendDirection(),p?P.debug("replaceTrack() [localId:%s, track.id:%s]",S,p.id):P.debug("replaceTrack() [localId:%s, no track]",S);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");await D.sender.replaceTrack(p)}async setMaxSpatialLayer(S,p){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",S,p);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");const O=D.sender.getParameters();O.encodings.forEach((H,F)=>{H.active=F<=p}),await D.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(S,O.encodings);const j=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async setRtpEncodingParameters(S,p){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",S,p);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");const O=D.sender.getParameters();O.encodings.forEach((H,F)=>{O.encodings[F]={...H,...p}}),await D.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(S,O.encodings);const j=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async getSenderStats(S){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:S,maxPacketLifeTime:p,maxRetransmits:D,label:O,protocol:j}){this.assertNotClosed(),this.assertSendDirection();const I={negotiated:!0,id:this._nextSendSctpStreamId,ordered:S,maxPacketLifeTime:p,maxRetransmits:D,protocol:j};P.debug("sendDataChannel() [options:%o]",I);const H=this._pc.createDataChannel(O,I);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%z.MIS,!this._hasDataChannelMediaSection){const F=await this._pc.createOffer(),$=x.parse(F.sdp),q=$.media.find(J=>J.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F),this._remoteSdp.sendSctpAssociation({offerMediaObject:q});const se={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",se),await this._pc.setRemoteDescription(se),this._hasDataChannelMediaSection=!0}return{dataChannel:H,sctpStreamParameters:{streamId:I.id,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits}}}async receive(S){this.assertNotClosed(),this.assertRecvDirection();const p=[],D=new Map;for(const H of S){const{trackId:F,kind:$,rtpParameters:q,streamId:se}=H;P.debug("receive() [trackId:%s, kind:%s]",F,$);const J=q.mid??String(this._mapMidTransceiver.size);D.set(F,J),this._remoteSdp.receive({mid:J,kind:$,offerRtpParameters:q,streamId:se??q.rtcp.cname,trackId:F})}const O={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);for(const H of S){const{trackId:F,onRtpReceiver:$}=H;if($){const q=D.get(F),se=this._pc.getTransceivers().find(J=>J.mid===q);if(!se)throw new Error("transceiver not found");$(se.receiver)}}let j=await this._pc.createAnswer();const I=x.parse(j.sdp);for(const H of S){const{trackId:F,rtpParameters:$}=H,q=D.get(F),se=I.media.find(J=>String(J.mid)===q);_.applyCodecParameters({offerRtpParameters:$,answerMediaObject:se})}j={type:"answer",sdp:x.write(I)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",j),await this._pc.setLocalDescription(j);for(const H of S){const{trackId:F}=H,$=D.get(F),q=this._pc.getTransceivers().find(se=>se.mid===$);if(!q)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set($,q),p.push({localId:$,track:q.receiver.track,rtpReceiver:q.receiver})}return p}async stopReceiving(S){if(this.assertRecvDirection(),this._closed)return;for(const O of S){P.debug("stopReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(j.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const O of S)this._mapMidTransceiver.delete(O)}async pauseReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const O of S){P.debug("pauseReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");j.direction="inactive",this._remoteSdp.pauseMediaSection(O)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}async resumeReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const O of S){P.debug("resumeReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");j.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(O)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}async getReceiverStats(S){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:S,label:p,protocol:D}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:O,ordered:j,maxPacketLifeTime:I,maxRetransmits:H}=S,F={negotiated:!0,id:O,ordered:j,maxPacketLifeTime:I,maxRetransmits:H,protocol:D};P.debug("receiveDataChannel() [options:%o]",F);const $=this._pc.createDataChannel(p,F);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const q={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",q),await this._pc.setRemoteDescription(q);const se=await this._pc.createAnswer();if(!this._transportReady){const J=x.parse(se.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",se),await this._pc.setLocalDescription(se),this._hasDataChannelMediaSection=!0}return{dataChannel:$}}async setupTransport({localDtlsRole:S,localSdpObject:p}){p||(p=x.parse(this._pc.localDescription.sdp));const D=_.extractDtlsParameters({sdpObject:p});D.role=S,this._remoteSdp.updateDtlsRole(S==="client"?"server":"client"),await new Promise((O,j)=>{this.safeEmit("@connect",{dtlsParameters:D},O,j)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new w.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.ReactNativeUnifiedPlan=N},4160:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0})},4253:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.AwaitQueueRemovedTaskError=b.AwaitQueueStoppedError=void 0;class u extends Error{constructor(y){super(y??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,u)}}b.AwaitQueueStoppedError=u;class x extends Error{constructor(y){super(y??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,x)}}b.AwaitQueueRemovedTaskError=x},4256:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.addNackSupportForOpus=function(u){for(const x of u.codecs??[])x.mimeType.toLowerCase()!=="audio/opus"&&x.mimeType.toLowerCase()!=="audio/multiopus"||x.rtcpFeedback?.some(f=>f.type==="nack"&&!f.parameter)||(x.rtcpFeedback||(x.rtcpFeedback=[]),x.rtcpFeedback.push({type:"nack"}))}},4299:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.updateV7State=void 0;const x=u(2291),f=u(6011),y={};function E(m,k,w){return m.msecs??=-1/0,m.seq??=0,k>m.msecs?(m.seq=w[6]<<23|w[7]<<16|w[8]<<8|w[9],m.msecs=k):(m.seq=m.seq+1|0,m.seq===0&&m.msecs++),m}function _(m,k,w,U,g=0){if(m.length<16)throw new Error("Random bytes length must be >= 16");if(U){if(g<0||g+16>U.length)throw new RangeError(`UUID byte range ${g}:${g+15} is out of buffer bounds`)}else U=new Uint8Array(16),g=0;return k??=Date.now(),w??=127*m[6]<<24|m[7]<<16|m[8]<<8|m[9],U[g++]=k/1099511627776&255,U[g++]=k/4294967296&255,U[g++]=k/16777216&255,U[g++]=k/65536&255,U[g++]=k/256&255,U[g++]=255&k,U[g++]=112|w>>>28&15,U[g++]=w>>>20&255,U[g++]=128|w>>>14&63,U[g++]=w>>>6&255,U[g++]=w<<2&255|3&m[10],U[g++]=m[11],U[g++]=m[12],U[g++]=m[13],U[g++]=m[14],U[g++]=m[15],U}b.updateV7State=E,b.default=function(m,k,w){let U;if(m)U=_(m.random??m.rng?.()??(0,x.default)(),m.msecs,m.seq,k,w);else{const g=Date.now(),A=(0,x.default)();E(y,g,A),U=_(A,y.msecs,y.seq,k,w)}return k??(0,f.unsafeStringify)(U)}},4373:T=>{T.exports=function(b){var u=Object(b),x=[];for(var f in u)x.unshift(f);return function y(){for(;x.length;)if((f=x.pop())in u)return y.value=f,y.done=!1,y;return y.done=!0,y}},T.exports.__esModule=!0,T.exports.default=T.exports},4467:(T,b,u)=>{u.d(b,{A:()=>f});var x=u(816);function f(y,E,_){return(E=(0,x.A)(E))in y?Object.defineProperty(y,E,{value:_,enumerable:!0,configurable:!0,writable:!0}):y[E]=_,y}},4496:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.getRtpEncodings=function({offerMediaObject:u,track:x}){const f=new Set;for(const _ of u.ssrcs??[])if(_.attribute==="msid"&&_.value.split(" ")[1]===x.id){const m=_.id;f.add(m)}if(f.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${x.id}]`);const y=new Map;for(const _ of u.ssrcGroups??[]){if(_.semantics!=="FID")continue;let[m,k]=_.ssrcs.split(/\s+/);m=Number(m),k=Number(k),f.has(m)&&(f.delete(m),f.delete(k),y.set(m,k))}for(const _ of f)y.set(_,null);const E=[];for(const[_,m]of y){const k={ssrc:_};m&&(k.rtx={ssrc:m}),E.push(k)}return E},b.addLegacySimulcast=function({offerMediaObject:u,track:x,numStreams:f}){if(f<=1)throw new TypeError("numStreams must be greater than 1");let y,E,_;if(!(u.ssrcs??[]).find(g=>g.attribute!=="msid"?!1:g.value.split(" ")[1]===x.id&&(y=g.id,_=g.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${x.id}]`);(u.ssrcGroups??[]).some(g=>{if(g.semantics!=="FID")return!1;const A=g.ssrcs.split(/\s+/);return Number(A[0])===y&&(E=Number(A[1]),!0)});const m=u.ssrcs.find(g=>g.attribute==="cname"&&g.id===y);if(!m)throw new Error(`a=ssrc line with cname information not found [track.id:${x.id}]`);const k=m.value,w=[],U=[];for(let g=0;g<f;++g)w.push(y+g),E&&U.push(E+g);u.ssrcGroups=u.ssrcGroups??[],u.ssrcs=u.ssrcs??[],u.ssrcGroups.push({semantics:"SIM",ssrcs:w.join(" ")});for(const g of w)u.ssrcs.push({id:g,attribute:"cname",value:k}),u.ssrcs.push({id:g,attribute:"msid",value:`${_} ${x.id}`});for(let g=0;g<U.length;++g){const A=w[g],P=U[g];u.ssrcs.push({id:P,attribute:"cname",value:k}),u.ssrcs.push({id:P,attribute:"msid",value:`${_} ${x.id}`}),u.ssrcGroups.push({semantics:"FID",ssrcs:`${A} ${P}`})}}},4557:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.URL=b.DNS=void 0;const x=u(2829),f=u(2988);var y=u(2988);function E(_,m,k,w){return(0,f.default)(80,x.default,_,m,k,w)}Object.defineProperty(b,"DNS",{enumerable:!0,get:function(){return y.DNS}}),Object.defineProperty(b,"URL",{enumerable:!0,get:function(){return y.URL}}),E.DNS=f.DNS,E.URL=f.URL,b.default=E},4633:(T,b,u)=>{var x=u(5172),f=u(6993),y=u(5869),E=u(887),_=u(1791),m=u(4373),k=u(579);function w(){var U=f(),g=U.m(w),A=(Object.getPrototypeOf?Object.getPrototypeOf(g):g.__proto__).constructor;function P(R){var S=typeof R=="function"&&R.constructor;return!!S&&(S===A||(S.displayName||S.name)==="GeneratorFunction")}var z={throw:1,return:2,break:3,continue:3};function N(R){var S,p;return function(D){S||(S={stop:function(){return p(D.a,2)},catch:function(){return D.v},abrupt:function(O,j){return p(D.a,z[O],j)},delegateYield:function(O,j,I){return S.resultName=j,p(D.d,k(O),I)},finish:function(O){return p(D.f,O)}},p=function(O,j,I){D.p=S.prev,D.n=S.next;try{return O(j,I)}finally{S.next=D.n}}),S.resultName&&(S[S.resultName]=D.v,S.resultName=void 0),S.sent=D.v,S.next=D.n;try{return R.call(this,S)}finally{D.p=S.prev,D.n=S.next}}}return(T.exports=w=function(){return{wrap:function(R,S,p,D){return U.w(N(R),S,p,D&&D.reverse())},isGeneratorFunction:P,mark:U.m,awrap:function(R,S){return new x(R,S)},AsyncIterator:_,async:function(R,S,p,D,O){return(P(S)?E:y)(N(R),S,p,D,O)},keys:m,values:k}},T.exports.__esModule=!0,T.exports.default=T.exports)()}T.exports=w,T.exports.__esModule=!0,T.exports.default=T.exports},4636:function(T,b,u){var x;T.exports=(x=u(9021),function(f){var y=x,E=y.lib,_=E.WordArray,m=E.Hasher,k=y.algo,w=[];(function(){for(var N=0;N<64;N++)w[N]=4294967296*f.abs(f.sin(N+1))|0})();var U=k.MD5=m.extend({_doReset:function(){this._hash=new _.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(N,R){for(var S=0;S<16;S++){var p=R+S,D=N[p];N[p]=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8)}var O=this._hash.words,j=N[R+0],I=N[R+1],H=N[R+2],F=N[R+3],$=N[R+4],q=N[R+5],se=N[R+6],J=N[R+7],be=N[R+8],Re=N[R+9],Se=N[R+10],me=N[R+11],Ce=N[R+12],Be=N[R+13],_e=N[R+14],Ye=N[R+15],Qe=O[0],Ge=O[1],He=O[2],Te=O[3];Qe=g(Qe,Ge,He,Te,j,7,w[0]),Te=g(Te,Qe,Ge,He,I,12,w[1]),He=g(He,Te,Qe,Ge,H,17,w[2]),Ge=g(Ge,He,Te,Qe,F,22,w[3]),Qe=g(Qe,Ge,He,Te,$,7,w[4]),Te=g(Te,Qe,Ge,He,q,12,w[5]),He=g(He,Te,Qe,Ge,se,17,w[6]),Ge=g(Ge,He,Te,Qe,J,22,w[7]),Qe=g(Qe,Ge,He,Te,be,7,w[8]),Te=g(Te,Qe,Ge,He,Re,12,w[9]),He=g(He,Te,Qe,Ge,Se,17,w[10]),Ge=g(Ge,He,Te,Qe,me,22,w[11]),Qe=g(Qe,Ge,He,Te,Ce,7,w[12]),Te=g(Te,Qe,Ge,He,Be,12,w[13]),He=g(He,Te,Qe,Ge,_e,17,w[14]),Qe=A(Qe,Ge=g(Ge,He,Te,Qe,Ye,22,w[15]),He,Te,I,5,w[16]),Te=A(Te,Qe,Ge,He,se,9,w[17]),He=A(He,Te,Qe,Ge,me,14,w[18]),Ge=A(Ge,He,Te,Qe,j,20,w[19]),Qe=A(Qe,Ge,He,Te,q,5,w[20]),Te=A(Te,Qe,Ge,He,Se,9,w[21]),He=A(He,Te,Qe,Ge,Ye,14,w[22]),Ge=A(Ge,He,Te,Qe,$,20,w[23]),Qe=A(Qe,Ge,He,Te,Re,5,w[24]),Te=A(Te,Qe,Ge,He,_e,9,w[25]),He=A(He,Te,Qe,Ge,F,14,w[26]),Ge=A(Ge,He,Te,Qe,be,20,w[27]),Qe=A(Qe,Ge,He,Te,Be,5,w[28]),Te=A(Te,Qe,Ge,He,H,9,w[29]),He=A(He,Te,Qe,Ge,J,14,w[30]),Qe=P(Qe,Ge=A(Ge,He,Te,Qe,Ce,20,w[31]),He,Te,q,4,w[32]),Te=P(Te,Qe,Ge,He,be,11,w[33]),He=P(He,Te,Qe,Ge,me,16,w[34]),Ge=P(Ge,He,Te,Qe,_e,23,w[35]),Qe=P(Qe,Ge,He,Te,I,4,w[36]),Te=P(Te,Qe,Ge,He,$,11,w[37]),He=P(He,Te,Qe,Ge,J,16,w[38]),Ge=P(Ge,He,Te,Qe,Se,23,w[39]),Qe=P(Qe,Ge,He,Te,Be,4,w[40]),Te=P(Te,Qe,Ge,He,j,11,w[41]),He=P(He,Te,Qe,Ge,F,16,w[42]),Ge=P(Ge,He,Te,Qe,se,23,w[43]),Qe=P(Qe,Ge,He,Te,Re,4,w[44]),Te=P(Te,Qe,Ge,He,Ce,11,w[45]),He=P(He,Te,Qe,Ge,Ye,16,w[46]),Qe=z(Qe,Ge=P(Ge,He,Te,Qe,H,23,w[47]),He,Te,j,6,w[48]),Te=z(Te,Qe,Ge,He,J,10,w[49]),He=z(He,Te,Qe,Ge,_e,15,w[50]),Ge=z(Ge,He,Te,Qe,q,21,w[51]),Qe=z(Qe,Ge,He,Te,Ce,6,w[52]),Te=z(Te,Qe,Ge,He,F,10,w[53]),He=z(He,Te,Qe,Ge,Se,15,w[54]),Ge=z(Ge,He,Te,Qe,I,21,w[55]),Qe=z(Qe,Ge,He,Te,be,6,w[56]),Te=z(Te,Qe,Ge,He,Ye,10,w[57]),He=z(He,Te,Qe,Ge,se,15,w[58]),Ge=z(Ge,He,Te,Qe,Be,21,w[59]),Qe=z(Qe,Ge,He,Te,$,6,w[60]),Te=z(Te,Qe,Ge,He,me,10,w[61]),He=z(He,Te,Qe,Ge,H,15,w[62]),Ge=z(Ge,He,Te,Qe,Re,21,w[63]),O[0]=O[0]+Qe|0,O[1]=O[1]+Ge|0,O[2]=O[2]+He|0,O[3]=O[3]+Te|0},_doFinalize:function(){var N=this._data,R=N.words,S=8*this._nDataBytes,p=8*N.sigBytes;R[p>>>5]|=128<<24-p%32;var D=f.floor(S/4294967296),O=S;R[15+(p+64>>>9<<4)]=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8),R[14+(p+64>>>9<<4)]=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8),N.sigBytes=4*(R.length+1),this._process();for(var j=this._hash,I=j.words,H=0;H<4;H++){var F=I[H];I[H]=16711935&(F<<8|F>>>24)|4278255360&(F<<24|F>>>8)}return j},clone:function(){var N=m.clone.call(this);return N._hash=this._hash.clone(),N}});function g(N,R,S,p,D,O,j){var I=N+(R&S|~R&p)+D+j;return(I<<O|I>>>32-O)+R}function A(N,R,S,p,D,O,j){var I=N+(R&p|S&~p)+D+j;return(I<<O|I>>>32-O)+R}function P(N,R,S,p,D,O,j){var I=N+(R^S^p)+D+j;return(I<<O|I>>>32-O)+R}function z(N,R,S,p,D,O,j){var I=N+(S^(R|~p))+D+j;return(I<<O|I>>>32-O)+R}y.MD5=m._createHelper(U),y.HmacMD5=m._createHmacHelper(U)}(Math),x.MD5)},4725:function(T,b,u){var x;T.exports=(x=u(9021),function(){var f=x,y=f.lib.WordArray;function E(_,m,k){for(var w=[],U=0,g=0;g<m;g++)if(g%4){var A=k[_.charCodeAt(g-1)]<<g%4*2|k[_.charCodeAt(g)]>>>6-g%4*2;w[U>>>2]|=A<<24-U%4*8,U++}return y.create(w,U)}f.enc.Base64url={stringify:function(_,m){m===void 0&&(m=!0);var k=_.words,w=_.sigBytes,U=m?this._safe_map:this._map;_.clamp();for(var g=[],A=0;A<w;A+=3)for(var P=(k[A>>>2]>>>24-A%4*8&255)<<16|(k[A+1>>>2]>>>24-(A+1)%4*8&255)<<8|k[A+2>>>2]>>>24-(A+2)%4*8&255,z=0;z<4&&A+.75*z<w;z++)g.push(U.charAt(P>>>6*(3-z)&63));var N=U.charAt(64);if(N)for(;g.length%4;)g.push(N);return g.join("")},parse:function(_,m){m===void 0&&(m=!0);var k=_.length,w=m?this._safe_map:this._map,U=this._reverseMap;if(!U){U=this._reverseMap=[];for(var g=0;g<w.length;g++)U[w.charCodeAt(g)]=g}var A=w.charAt(64);if(A){var P=_.indexOf(A);P!==-1&&(k=P)}return E(_,k,U)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),x.enc.Base64url)},4756:(T,b,u)=>{var x=u(4633)();T.exports=x;try{regeneratorRuntime=x}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=x:Function("r","regeneratorRuntime = r")(x)}},4893:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.InvalidStateError=b.UnsupportedError=void 0;class u extends Error{constructor(y){super(y),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,u):this.stack=new Error(y).stack}}b.UnsupportedError=u;class x extends Error{constructor(y){super(y),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,x):this.stack=new Error(y).stack}}b.InvalidStateError=x},4905:function(T,b,u){var x;T.exports=(x=u(9021),u(7165),x.pad.Iso10126={pad:function(f,y){var E=4*y,_=E-f.sigBytes%E;f.concat(x.lib.WordArray.random(_-1)).concat(x.lib.WordArray.create([_<<24],1))},unpad:function(f){var y=255&f.words[f.sigBytes-1>>>2];f.sigBytes-=y}},x.pad.Iso10126)},4973:(T,b,u)=>{u.d(b,{Zu:()=>_,lp:()=>E});var x=u(467),f=u(4756),y=u.n(f),E=(u(9027),function(){var m=(0,x.A)(y().mark(function k(w){return y().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(g){var A=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return A?new Promise(function(P,z){A.call(navigator,g,P,z)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),U.next=1,navigator.mediaDevices.getUserMedia(w);case 1:return U.abrupt("return",U.sent);case 2:case"end":return U.stop()}},k)}));return function(k){return m.apply(this,arguments)}}()),_=function(){var m=(0,x.A)(y().mark(function k(w){return y().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(g){var A=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return A?new Promise(function(P,z){A.call(navigator,g,P,z)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),U.next=1,navigator.mediaDevices.getDisplayMedia(w);case 1:return U.abrupt("return",U.sent);case 2:case"end":return U.stop()}},k)}));return function(k){return m.apply(this,arguments)}}()},5020:(T,b,u)=>{var x=function(m){return String(Number(m))===m?Number(m):m},f=function(m,k,w){var U=m.name&&m.names;m.push&&!k[m.push]?k[m.push]=[]:U&&!k[m.name]&&(k[m.name]={});var g=m.push?{}:U?k[m.name]:k;(function(A,P,z,N){if(N&&!z)P[N]=x(A[1]);else for(var R=0;R<z.length;R+=1)A[R+1]!=null&&(P[z[R]]=x(A[R+1]))})(w.match(m.reg),g,m.names,m.name),m.push&&k[m.push].push(g)},y=u(5602),E=RegExp.prototype.test.bind(/^([a-z])=(.*)/);b.parse=function(m){var k={},w=[],U=k;return m.split(/(\r\n|\r|\n)/).filter(E).forEach(function(g){var A=g[0],P=g.slice(2);A==="m"&&(w.push({rtp:[],fmtp:[]}),U=w[w.length-1]);for(var z=0;z<(y[A]||[]).length;z+=1){var N=y[A][z];if(N.reg.test(P))return f(N,U,P)}}),k.media=w,k};var _=function(m,k){var w=k.split(/=(.+)/,2);return w.length===2?m[w[0]]=x(w[1]):w.length===1&&k.length>1&&(m[w[0]]=void 0),m};b.parseParams=function(m){return m.split(/;\s?/).reduce(_,{})},b.parseFmtpConfig=b.parseParams,b.parsePayloads=function(m){return m.toString().split(" ").map(Number)},b.parseRemoteCandidates=function(m){for(var k=[],w=m.split(" ").map(x),U=0;U<w.length;U+=3)k.push({component:w[U],ip:w[U+1],port:w[U+2]});return k},b.parseImageAttributes=function(m){return m.split(" ").map(function(k){return k.substring(1,k.length-1).split(",").reduce(_,{})})},b.parseSimulcastStreamList=function(m){return m.split(";").map(function(k){return k.split(",").map(function(w){var U,g=!1;return w[0]!=="~"?U=x(w):(U=x(w.substring(1,w.length)),g=!0),{scid:U,paused:g}})})}},5071:(T,b,u)=>{u.d(b,{V:()=>x});var x={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},5172:T=>{T.exports=function(b,u){this.v=b,this.k=u},T.exports.__esModule=!0,T.exports.default=T.exports},5248:(T,b,u)=>{u(1765)},5328:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.FakeMediaStreamTrack=void 0;const x=u(182),f=u(5862),y=u(3785);class E extends f.FakeEventTarget{#m;#d;#h;#e;#n;#t;#r;#p;#a;#f;#s;#i=null;#o=null;#c=null;#l=null;#u=null;constructor({kind:m,id:k,label:w,contentHint:U,enabled:g,muted:A,readyState:P,capabilities:z,constraints:N,settings:R,data:S}){super(),this.#m=k??(0,x.v4)(),this.#d=m,this.#h=w??"",this.#r=U??"",this.#n=g??!0,this.#t=A??!1,this.#e=P??"live",this.#p=z??{},this.#a=N??{},this.#f=R??{},this.#s=S??{}}get id(){return this.#m}get kind(){return this.#d}get label(){return this.#h}get contentHint(){return this.#r}set contentHint(m){this.#r=m}get enabled(){return this.#n}set enabled(m){const k=this.#n!==m;this.#n=m,k&&this.dispatchEvent(new Event("enabledchange"))}get muted(){return this.#t}get readyState(){return this.#e}get data(){return this.#s}set data(m){this.#s=m}get onmute(){return this.#i}set onmute(m){this.#i&&this.removeEventListener("mute",this.#i),this.#i=m,m&&this.addEventListener("mute",m)}get onunmute(){return this.#o}set onunmute(m){this.#o&&this.removeEventListener("unmute",this.#o),this.#o=m,m&&this.addEventListener("unmute",m)}get onended(){return this.#c}set onended(m){this.#c&&this.removeEventListener("ended",this.#c),this.#c=m,m&&this.addEventListener("ended",m)}get onenabledchange(){return this.#l}set onenabledchange(m){this.#l&&this.removeEventListener("enabledchange",this.#l),this.#l=m,m&&this.addEventListener("enabledchange",m)}get onstopped(){return this.#u}set onstopped(m){this.#u&&this.removeEventListener("stopped",this.#u),this.#u=m,m&&this.addEventListener("stopped",m)}addEventListener(m,k,w){super.addEventListener(m,k,w)}removeEventListener(m,k){super.removeEventListener(m,k)}stop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new Event("stopped")))}clone({id:m,data:k}={}){return new E({id:m??(0,x.v4)(),kind:this.#d,label:this.#h,contentHint:this.#r,enabled:this.#n,muted:this.#t,readyState:this.#e,capabilities:(0,y.clone)(this.#p),constraints:(0,y.clone)(this.#a),settings:(0,y.clone)(this.#f),data:k??(0,y.clone)(this.#s)})}getCapabilities(){return this.#p}getConstraints(){return this.#a}async applyConstraints(m={}){return this.#a=m,Promise.resolve()}getSettings(){return this.#f}remoteStop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new Event("stopped")),this.dispatchEvent(new Event("ended")))}remoteMute(){this.#t||(this.#t=!0,this.dispatchEvent(new Event("mute")))}remoteUnmute(){this.#t&&(this.#t=!1,this.dispatchEvent(new Event("unmute")))}}b.FakeMediaStreamTrack=E},5370:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0})},5414:T=>{T.exports=(()=>{var b={43:function(y,E,_){var m,k;(function(){m=function(){var w=function(){},U="undefined",g=typeof window!==U&&typeof window.navigator!==U&&/Trident\/|MSIE /.test(window.navigator.userAgent),A=["trace","debug","info","warn","error"];function P(I,H){var F=I[H];if(typeof F.bind=="function")return F.bind(I);try{return Function.prototype.bind.call(F,I)}catch{return function(){return Function.prototype.apply.apply(F,[I,arguments])}}}function z(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function N(I,H){for(var F=0;F<A.length;F++){var $=A[F];this[$]=F<I?w:this.methodFactory($,I,H)}this.log=this.debug}function R(I,H,F){return function(){typeof console!==U&&(N.call(this,H,F),this[I].apply(this,arguments))}}function S(I,H,F){return function($){return $==="debug"&&($="log"),typeof console!==U&&($==="trace"&&g?z:console[$]!==void 0?P(console,$):console.log!==void 0?P(console,"log"):w)}(I)||R.apply(this,arguments)}function p(I,H,F){var $,q=this,se="loglevel";function J(){var Re;if(typeof window!==U&&se){try{Re=window.localStorage[se]}catch{}if(typeof Re===U)try{var Se=window.document.cookie,me=Se.indexOf(encodeURIComponent(se)+"=");me!==-1&&(Re=/^([^;]+)/.exec(Se.slice(me))[1])}catch{}return q.levels[Re]===void 0&&(Re=void 0),Re}}typeof I=="string"?se+=":"+I:typeof I=="symbol"&&(se=void 0),q.name=I,q.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},q.methodFactory=F||S,q.getLevel=function(){return $},q.setLevel=function(Re,Se){if(typeof Re=="string"&&q.levels[Re.toUpperCase()]!==void 0&&(Re=q.levels[Re.toUpperCase()]),!(typeof Re=="number"&&Re>=0&&Re<=q.levels.SILENT))throw"log.setLevel() called with invalid level: "+Re;if($=Re,Se!==!1&&function(me){var Ce=(A[me]||"silent").toUpperCase();if(typeof window!==U&&se){try{return void(window.localStorage[se]=Ce)}catch{}try{window.document.cookie=encodeURIComponent(se)+"="+Ce+";"}catch{}}}(Re),N.call(q,Re,I),typeof console===U&&Re<q.levels.SILENT)return"No console available for logging"},q.setDefaultLevel=function(Re){J()||q.setLevel(Re,!1)},q.enableAll=function(Re){q.setLevel(q.levels.TRACE,Re)},q.disableAll=function(Re){q.setLevel(q.levels.SILENT,Re)};var be=J();be==null&&(be=H??"WARN"),q.setLevel(be,!1)}var D=new p,O={};D.getLogger=function(I){if(typeof I!="symbol"&&typeof I!="string"||I==="")throw new TypeError("You must supply a name when creating a logger.");var H=O[I];return H||(H=O[I]=new p(I,D.getLevel(),D.methodFactory)),H};var j=typeof window!==U?window.log:void 0;return D.noConflict=function(){return typeof window!==U&&window.log===D&&(window.log=j),D},D.getLoggers=function(){return O},D.default=D,D},(k=m.call(E,_,E,y))===void 0||(y.exports=k)})()}},u={};function x(y){var E=u[y];if(E!==void 0)return E.exports;var _=u[y]={exports:{}};return b[y].call(_.exports,_,_.exports,x),_.exports}x.d=(y,E)=>{for(var _ in E)x.o(E,_)&&!x.o(y,_)&&Object.defineProperty(y,_,{enumerable:!0,get:E[_]})},x.o=(y,E)=>Object.prototype.hasOwnProperty.call(y,E),x.r=y=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var f={};return(()=>{x.r(f),x.d(f,{VideoSDKMetrics:()=>gr});const y="inbound",E="outbound",_={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:y},m={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:E},k={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:y},w={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:E},U="inbound-rtp",g="bytesReceived",A="bytesSent",P="clockRate",z="codecId",N="currentRoundTripTime",R="roundTripTime",S="fractionLost",p="frameHeight",D="frameWidth",O="qualityLimitationReason",j="qualityLimitationDurations",I="qualityLimitationResolutionChanges",H="id",F="jitter",$="kind",q="mimeType",se="packetsLost",J="packetsReceived",be="packetsSent",Re="responsesReceived",Se="ssrc",me="selected",Ce="timestamp",Be="totalRoundTripTime",_e="roundTripTimeMeasurements",Ye="type",Qe="framesDecoded",Ge="framesEncoded",He="totalDecodeTime",Te="totalEncodeTime",dt="pliCount",yt="nackCount",on="trackId",ln="trackIdentifier",Pn="mediaSourceId",En="audio",rn="video",Ne={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},Me="audio",Ze="video",Ft="network",Ct="data";var wt=x(43);const un=()=>`${new Date().toISOString()} | metrics`,Sn=(rt,ut,$t)=>`${rt} | ${ut} | ${$t}`;wt.setDefaultLevel(wt.levels.TRACE);const Ut=(rt,ut,$t)=>{$t?wt.debug(Sn(un(),rt,ut),$t):wt.debug(Sn(un(),rt,ut))},nr=(rt,ut)=>{wt.warn(Sn(un(),rt,ut))},Ar=(rt,ut)=>{wt.error(Sn(un(),rt,ut))},Sr="extractor   ",Ur=(rt,ut,$t)=>{if(!ut)return null;const Tt={};let sn=ut[En][rt];sn||(sn=$t===y?{..._}:{...m}),Tt[En]=sn;let nn=ut[rn][rt];return nn||(nn=$t===y?{...k}:{...w}),Tt[rn]=nn,Tt},xr=(rt,ut,$t,Tt)=>{let sn=!1;const nn=Tt[ut].total_rtt_ms_out,et=Tt[ut].total_rtt_measure_out,On=$t?$t[ut].total_rtt_ms_out:0,Ln=$t?$t[ut].total_rtt_measure_out:0,Xn={rtt:null,totalRTT:nn,totalRTTMeasurements:et};if(rt[Ce]===Tt[ut].timestamp_out||!Object.prototype.hasOwnProperty.call(rt,R)||Object.prototype.hasOwnProperty.call(rt,_e)&&(sn=!0,Number(rt[_e])===0||Number(rt[_e])-Ln===et))return Xn;const vr=1e3*Number(rt[R]);let Qt=nn+vr,St=et+1;return sn&&(Qt=1e3*Number(rt[Be])-On,St=Number(rt[_e])-Ln),{rtt:vr,totalRTT:Qt,totalRTTMeasurements:St}},Or=(rt,ut,$t)=>rt[Ce]===$t[ut].timestamp_out?null:Object.prototype.hasOwnProperty.call(rt,F)?1e3*(Number(rt[F])||0):null,Kr=(rt,ut,$t,Tt)=>{if(!Object.prototype.hasOwnProperty.call(rt,be)||!Object.prototype.hasOwnProperty.call(rt,A))return{packetsSent:$t[ut].total_packets_out,packetsLost:$t[ut].total_packets_lost_out,bytesSent:$t[ut].total_KBytes_out};const sn=Number(rt[be])||0-(Tt?Tt[ut].total_packets_out:0),nn=sn-$t[ut].total_packets_out,et=Number(rt[A])/1024-(Tt?Tt[ut].total_KBytes_out:0),On=et-$t[ut].total_KBytes_out,Ln=rt[Ce]||Date.now(),Xn=Tt?Tt.timestamp:null;let vr=$t.timestamp;!vr&&Xn&&(vr=Xn);const Qt=vr?Ln-vr:0;return{packetsSent:sn,deltaPacketsSent:nn,KBytesSent:et,deltaKBytesSent:On,kbsSent:Qt>0?.008*On*1024/Qt*1e3:0}},va=(rt,ut,$t,Tt)=>{let sn=$t[ut].total_packets_lost_out,nn=0,et=0;return Object.prototype.hasOwnProperty.call(rt,se)&&(sn=Number(rt[se])||0-(Tt?Tt[ut].total_packets_lost_out:0),nn=sn-$t[ut].total_packets_lost_out),Object.prototype.hasOwnProperty.call(rt,S)&&(et=Number(100*rt[S])),{packetsLost:sn,deltaPacketsLost:nn,fractionLost:et}},ra=(rt,ut,$t,Tt)=>{if(!Object.prototype.hasOwnProperty.call(rt,J)||!Object.prototype.hasOwnProperty.call(rt,se)||!Object.prototype.hasOwnProperty.call(rt,g))return{percent_packets_lost:$t[ut].percent_packets_lost_in,packetsReceived:$t[ut].total_packets_in,packetsLost:$t[ut].total_packets_lost_in,bytesReceived:$t[ut].total_KBytes_in};const sn=(Number(rt[J])||0)-(Tt?Tt[ut].total_packets_in:0),nn=(Number(rt[se])||0)-(Tt?Tt[ut].total_packets_lost_in:0),et=nn-$t[ut].total_packets_lost_in,On=sn-$t[ut].total_packets_in,Ln=sn!==$t[ut].total_packets_in?100*et/(et+On):0,Xn=Number(rt[g])/1024-(Tt?Tt[ut].total_KBytes_in:0),vr=Xn-$t[ut].total_KBytes_in,Qt=rt[Ce]||Date.now(),St=Tt?Tt.timestamp:null;let Un=$t.timestamp;!Un&&St&&(Un=St);const In=Un?Qt-Un:0;return{percentPacketsLost:Ln,packetsReceived:sn,deltaPacketsReceived:On,packetsLost:nn,deltaPacketsLost:et,KBytesReceived:Xn,deltaKBytesReceived:vr,kbsReceived:In>0?.008*vr*1024/In*1e3:0}},ua=rt=>rt.candidateType!=="relay"?"":rt.relayProtocol||"",jn=rt=>Object.prototype.hasOwnProperty.call(rt,p)&&Object.prototype.hasOwnProperty.call(rt,D)?{width:rt[D]||null,height:rt[p]||null,framerate:rt.framesPerSecond}:{width:null,height:null,framerate:null};class Ha{constructor(ut,$t){this._callbacks={onStatsCollected:null},this._id=`collector-${$t}`,this._moduleName=this._id,this._probeId=$t,this._config=ut,this._state="idle",this._statsReports=[]}registerCallback(ut,$t,Tt){ut in this._callbacks?(this._callbacks[ut]={callback:$t,context:Tt},Ut(this._moduleName,`registered callback '${ut}'`)):Ar(this._moduleName,`can't register callback for '${ut}' - not found`)}unregisterCallback(ut){ut in this._callbacks?(this._callbacks[ut]=null,delete this._callbacks[ut],Ut(this._moduleName,`unregistered callback '${ut}'`)):Ar(this._moduleName,`can't unregister callback for '${ut}' - not found`)}analyze(ut,$t){const Tt=(nn=>{const et={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(nn){const On={...nn,audio:{},video:{},data:{...nn.data},network:{...nn.network}};return Object.keys(nn.audio).forEach(Ln=>{On.audio[Ln]={...nn.audio[Ln]}}),Object.keys(nn.video).forEach(Ln=>{On.video[Ln]={...nn.video[Ln]}}),On}return{...et,audio:{},video:{},data:{...et.data},network:{...et.network}}})($t);Tt.name=this._config.name,Tt.meetingId=this._config.meetingId,Tt.peerId=this._config.peerId,Tt.count=$t?$t.count+1:1;let sn=null;return ut.forEach(nn=>{!sn&&nn.timestamp&&(sn=nn.timestamp),((et,On,Ln,Xn)=>{if(!et)return[];switch(et[Ye]){case"candidate-pair":let vr=!1;if(et.nominated&&et.state==="succeeded"&&(vr=!0,Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et),me in et&&!et[me]&&(vr=!1)),vr){et.localCandidateId,et.remoteCandidateId;const St=((In,Nn,Fr)=>{const Mr=(In[g]||0)/1024-0,Hr=(In[A]||0)/1024-0,cr=In[Ce]||Date.now(),Kn=Mr-Nn.data.total_KBytes_in,xa=Hr-Nn.data.total_KBytes_out;let ma=Nn.timestamp;const La=ma?cr-ma:0;return{total_KBytes_received:Mr,total_KBytes_sent:Hr,delta_KBytes_received:Kn,delta_KBytes_sent:xa,kbs_speed_received:La>0?.008*Kn*1024/La*1e3:0,kbs_speed_sent:La>0?.008*xa*1024/La*1e3:0}})(et,On),Un=((In=>{In.availableIncomingBitrate,In.availableOutgoingBitrate})(et),((In,Nn,Fr,Mr)=>{if(!Object.prototype.hasOwnProperty.call(In,N))return{rtt:null,totalRTT:Mr[Nn].total_rtt_connectivity_ms,totalRTTMeasurements:Mr[Nn].total_rtt_connectivity_measure};const Hr=1e3*Number(In[N]);let cr=Mr[Nn].total_rtt_connectivity_ms+Hr,Kn=Mr[Nn].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(In,Be)&&(cr=1e3*Number(In[Be])-0),Object.prototype.hasOwnProperty.call(In,Re)&&(Kn=Number(In[Re])-0),{rtt:Hr,totalRTT:cr,totalRTTMeasurements:Kn}})(et,"data",Xn,On));return[{type:Ct,value:{total_KBytes_in:St.total_KBytes_received}},{type:Ct,value:{total_KBytes_out:St.total_KBytes_sent}},{type:Ct,value:{delta_KBytes_in:St.delta_KBytes_received}},{type:Ct,value:{delta_KBytes_out:St.delta_KBytes_sent}},{type:Ct,value:{delta_kbs_in:St.kbs_speed_received}},{type:Ct,value:{delta_kbs_out:St.kbs_speed_sent}},{type:Ct,value:{delta_rtt_connectivity_ms:Un.rtt}}]}break;case"local-candidate":if(et[H]===On.network.local_candidate_id)return[{type:Ft,value:{infrastructure:et.networkType}},{type:Ft,value:{local_candidate_protocol:et.protocol||""}},{type:Ft,value:{local_candidate_relay_protocol:ua(et)}}];break;case U:{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const St=et[Se],Un=Ur(St,On,y);Un&&(Un.timestamp=On.timestamp);const In=Ur(St,Xn,y);if(In&&(In.timestamp=Xn.timestamp),et[$]===En){const Nn=ra(et,En,Un,In),Fr=Or(et,En,Un),Mr=et[z]||"",Hr=((cr,Kn,xa)=>{const ma=Number(cr.concealmentEvents)||0,La=ma-(xa[Kn].total_concealment_events||0),Va=Number(cr.insertedSamplesForDeceleration)||0,Ci=Va-(xa[Kn].total_inserted_samples_for_decelaration||0),bs=Number(cr.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:ma,deltaConcealmentEvents:La,totalInsertedSamplesForDecelaration:Va,deltaInsertedSamplesForDecelaration:Ci,totalRemovedSamplesForAccelaration:bs,deltaRemovedSampleForAccelaration:bs-(xa[Kn].total_removed_samples_for_accelaration||0)}})(et,En,Un);return[{ssrc:St,type:Me,value:{codec_id_in:Mr}},{ssrc:St,type:Me,value:{total_packets_in:Nn.packetsReceived}},{ssrc:St,type:Me,value:{delta_packets_in:Nn.deltaPacketsReceived}},{ssrc:St,type:Me,value:{total_packets_lost_in:Nn.packetsLost}},{ssrc:St,type:Me,value:{delta_packets_lost_in:Nn.deltaPacketsLost}},{ssrc:St,type:Me,value:{percent_packets_lost_in:Nn.percentPacketsLost}},{ssrc:St,type:Me,value:{total_KBytes_in:Nn.KBytesReceived}},{ssrc:St,type:Me,value:{delta_KBytes_in:Nn.deltaKBytesReceived}},{ssrc:St,type:Me,value:{delta_kbs_in:Nn.kbsReceived}},{ssrc:St,type:Me,value:{delta_jitter_ms_in:Fr}},{ssrc:St,type:Me,value:{total_concealment_events:Hr.totalConcealmentEvents}},{ssrc:St,type:Me,value:{delta_concealment_events:Hr.deltaConcealmentEvents}},{ssrc:St,type:Me,value:{total_inserted_samples_for_decelaration:Hr.totalInsertedSamplesForDecelaration}},{ssrc:St,type:Me,value:{delta_inserted_samples_for_decelaration:Hr.deltaInsertedSamplesForDecelaration}},{ssrc:St,type:Me,value:{total_removed_samples_for_accelaration:Hr.totalRemovedSamplesForAccelaration}},{ssrc:St,type:Me,value:{delta_removed_samples_for_accelaration:Hr.deltaRemovedSampleForAccelaration}},{ssrc:St,type:Me,value:{track_in:et[on]}},{ssrc:St,type:Me,value:{track_id_in:et[ln]}},{ssrc:St,type:Me,value:{media_source_id:et[Pn]}}]}if(et[$]===rn){((cr,Kn)=>{if(!Object.prototype.hasOwnProperty.call(cr,Qe)||!Object.prototype.hasOwnProperty.call(cr,He))return{delta_ms_decode_frame:Kn[rn].delta_ms_decode_frame_in,frames_decoded:Kn[rn].total_frames_decoded_in,total_decode_time:Kn[rn].total_time_decoded_in};cr[Qe],cr[He],Kn[rn].total_time_decoded_in,Kn[rn].total_frames_decoded_in})(et,Un);const Nn=ra(et,rn,Un,In),Fr=Or(et,rn,Un),Mr=(et.decoderImplementation,et[z]||null),Hr=jn(et);return((cr,Kn,xa)=>{if(!Object.prototype.hasOwnProperty.call(cr,dt)||!Object.prototype.hasOwnProperty.call(cr,yt))return{pliCount:Kn.total_pli_sent_in,nackCount:Kn.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};cr[dt],xa&&xa[rn].total_pli_sent_in,cr[yt],xa&&xa[rn].total_nack_sent_in,Kn[rn].total_pli_sent_in,Kn[rn].total_nack_sent_in})(et,Un,In),[{ssrc:St,type:Ze,value:{codec_id_in:Mr}},{ssrc:St,type:Ze,value:{total_packets_in:Nn.packetsReceived}},{ssrc:St,type:Ze,value:{delta_packets_in:Nn.deltaPacketsReceived}},{ssrc:St,type:Ze,value:{total_packets_lost_in:Nn.packetsLost}},{ssrc:St,type:Ze,value:{delta_packets_lost_in:Nn.deltaPacketsLost}},{ssrc:St,type:Ze,value:{percent_packets_lost_in:Nn.percentPacketsLost}},{ssrc:St,type:Ze,value:{total_KBytes_in:Nn.KBytesReceived}},{ssrc:St,type:Ze,value:{delta_KBytes_in:Nn.deltaKBytesReceived}},{ssrc:St,type:Ze,value:{delta_kbs_in:Nn.kbsReceived}},{ssrc:St,type:Ze,value:{delta_jitter_ms_in:Fr}},{ssrc:St,type:Ze,value:{size_in:Hr}},{ssrc:St,type:Ze,value:{track_in:et[on]}},{ssrc:St,type:Ze,value:{track_id_in:et[ln]}},{ssrc:St,type:Ze,value:{media_source_id:et[Pn]}},{ssrc:St,type:Ze,value:{pause_count:et.pauseCount}},{ssrc:St,type:Ze,value:{total_pauses_duration:et.totalPausesDuration}},{ssrc:St,type:Ze,value:{freeze_count:et.freezeCount}},{ssrc:St,type:Ze,value:{total_freezes_duration:et.totalFreezesDuration}}]}break}case"outbound-rtp":{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const St=et[Se],Un=Ur(St,On,E);Un&&(Un.timestamp=On.timestamp);const In=Ur(St,Xn,E);if(In&&(In.timestamp=Xn.timestamp),et[$]===En){const Nn=et[z]||null,Fr=Kr(et,En,Un,In);return[{ssrc:St,type:Me,value:{codec_id_out:Nn}},{ssrc:St,type:Me,value:{total_packets_out:Fr.packetsSent}},{ssrc:St,type:Me,value:{delta_packets_out:Fr.deltaPacketsSent}},{ssrc:St,type:Me,value:{total_KBytes_out:Fr.KBytesSent}},{type:Me,value:{delta_KBytes_out:Fr.deltaKBytesSent}},{ssrc:St,type:Me,value:{delta_kbs_out:Fr.kbsSent}},{ssrc:St,type:Me,value:{track_out:et[on]}},{ssrc:St,type:Me,value:{track_id_out:et[ln]}},{ssrc:St,type:Me,value:{media_source_id:et[Pn]}}]}if(et[$]===rn){et.encoderImplementation;const Nn=et[z]||null,Fr=(((cr,Kn)=>{if(!Object.prototype.hasOwnProperty.call(cr,Ge)||!Object.prototype.hasOwnProperty.call(cr,Te))return{delta_ms_encode_frame:Kn[rn].delta_ms_encode_frame_out,frames_encoded:Kn[rn].total_frames_encoded_out,total_encode_time:Kn[rn].total_time_encoded_out};cr[Ge],cr[Te],Kn[rn].total_time_encoded_out,Kn[rn].total_frames_encoded_out})(et,Un),jn(et)),Mr=(cr=>{const Kn=Object.prototype.hasOwnProperty.call(cr,O)?cr[O]:null,xa=Object.prototype.hasOwnProperty.call(cr,I)?cr[I]:null,ma=Object.prototype.hasOwnProperty.call(cr,j)?cr[j]:null;return ma&&Object.keys(ma).forEach(La=>{ma[La]>1e3&&(ma[La]=Number(ma[La]/1e3))}),{reason:Kn,durations:ma,resolutionChanges:xa}})(et),Hr=(((cr,Kn,xa)=>{if(!Object.prototype.hasOwnProperty.call(cr,dt)||!Object.prototype.hasOwnProperty.call(cr,yt))return{pliCount:Kn.total_pli_received_out,nackCount:Kn.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};cr[dt],xa&&xa[rn].total_pli_received_out,cr[yt],xa&&xa[rn].total_nack_received_out,Kn[rn].total_pli_received_out,Kn[rn].total_nack_received_out})(et,Un,In),Kr(et,rn,Un,In));return[{ssrc:St,type:Ze,value:{codec_id_out:Nn}},{ssrc:St,type:Ze,value:{total_packets_out:Hr.packetsSent}},{ssrc:St,type:Ze,value:{delta_packets_out:Hr.deltaPacketsSent}},{ssrc:St,type:Ze,value:{total_KBytes_out:Hr.KBytesSent}},{ssrc:St,type:Ze,value:{delta_KBytes_out:Hr.deltaKBytesSent}},{ssrc:St,type:Ze,value:{delta_kbs_out:Hr.kbsSent}},{ssrc:St,type:Ze,value:{size_out:Fr}},{ssrc:St,type:Ze,value:{limitation_out:Mr}},{ssrc:St,type:Ze,value:{track_out:et[on]}},{ssrc:St,type:Ze,value:{track_id_out:et[ln]}},{ssrc:St,type:Ze,value:{media_source_id:et[Pn]}}]}break}case"media-source":{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const St=[];return Object.keys(On[En]).forEach(Un=>{const In=On[En][Un];if(In.media_source_id===et[H]){var Nn=et[ln];St.push({ssrc:In.ssrc,type:Me,value:{track_id_out:Nn}})}}),Object.keys(On[rn]).forEach(Un=>{const In=On[rn][Un];if(In.media_source_id===et[H]){var Nn=et[ln];St.push({ssrc:In.ssrc,type:Ze,value:{track_id_out:Nn}})}}),St}case"track":{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const St=[];return Object.keys(On[En]).forEach(Un=>{const In=On[En][Un];if(In.track_in===et[H]||In.track_out===et[H]){Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);var Nn=et[ln];et[H]===In.track_in?St.push({ssrc:In.ssrc,type:Me,value:{track_id_in:Nn}}):St.push({ssrc:In.ssrc,type:Me,value:{track_id_out:Nn}})}}),Object.keys(On[rn]).forEach(Un=>{const In=On[rn][Un];if(In.track_in===et[H]||In.track_out===et[H]){Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);var Nn=et[ln];et[H]===In.track_in?St.push({ssrc:In.ssrc,type:Ze,value:{track_id_in:Nn}}):St.push({ssrc:In.ssrc,type:Ze,value:{track_id_out:Nn}})}}),St}case"codec":const Qt=[];return Object.keys(On[En]).forEach(St=>{const Un=On[En][St];if(Un.codec_id_in===et[H]||Un.codec_id_out===et[H]){Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const In=(Nn=>({channels:Nn.channels||null,clock_rate:Nn[P]||null,mime_type:Nn[q]||null,sdp_fmtp_line:Nn.sdpFmtpLine||null}))(et);et[H]===Un.codec_id_in?Qt.push({ssrc:Un.ssrc,type:Me,value:{codec_in:In}}):Qt.push({ssrc:Un.ssrc,type:Me,value:{codec_out:In}})}}),Object.keys(On[rn]).forEach(St=>{const Un=On[rn][St];if(Un.codec_id_in===et[H]||Un.codec_id_out===et[H]){Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const In=(Nn=>({clock_rate:Nn[P]||null,mime_type:Nn[q]||null}))(et);et[H]===Un.codec_id_in?Qt.push({ssrc:Un.ssrc,type:Ze,value:{codec_in:In}}):Qt.push({ssrc:Un.ssrc,type:Ze,value:{codec_out:In}})}}),Qt;case"remote-inbound-rtp":{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const St=et[Se],Un=Ur(St,On,E),In=Ur(St,Xn,E);if(et[$]===En){const Nn=xr(et,En,In,Un),Fr=Or(et,En,Un),Mr=va(et,En,Un,In);return[{ssrc:St,type:Me,value:{delta_rtt_ms_out:Nn.rtt}},{ssrc:St,type:Me,value:{delta_jitter_ms_out:Fr}},{ssrc:St,type:Me,value:{timestamp_out:et[Ce]}},{ssrc:St,type:Me,value:{total_packets_lost_out:Mr.packetsLost}},{ssrc:St,type:Me,value:{delta_packets_lost_out:Mr.deltaPacketsLost}},{ssrc:St,type:Me,value:{percent_packets_lost_out:Mr.fractionLost}}]}if(et[$]===rn){const Nn=xr(et,rn,In,Un),Fr=Or(et,rn,Un),Mr=va(et,rn,Un,In);return[{ssrc:St,type:Ze,value:{delta_rtt_ms_out:Nn.rtt}},{ssrc:St,type:Ze,value:{delta_jitter_ms_out:Fr}},{ssrc:St,type:Ze,value:{timestamp_out:et[Ce]}},{ssrc:St,type:Ze,value:{total_packets_lost_out:Mr.packetsLost}},{ssrc:St,type:Ze,value:{delta_packets_lost_out:Mr.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{Ut(Sr,`analyze() - got stats ${et[Ye]} for ${Ln}`,et);const St=et[Se],Un=Ur(St,On,E),In=Ur(St,Xn,E);if(et[$]===En){const Nn=xr(et,En,In,Un);return[{ssrc:St,type:Me,value:{delta_rtt_ms_in:Nn.rtt}},{ssrc:St,type:Me,value:{timestamp_in:et[Ce]}}]}break}}return[]})(nn,Tt,Tt.name,null).forEach(et=>{if(et.value&&et.type)if(et.ssrc){let Xn=Tt[et.type][et.ssrc];Xn||(On=et.type,Ln=nn.type,Xn=On===En?Ln===U?{..._}:{...m}:Ln===U?{...k}:{...w},Xn.ssrc=et.ssrc,Tt[et.type][et.ssrc]=Xn),Object.keys(et.value).forEach(vr=>{et.value[vr]!==void 0&&(Xn[vr]=et.value[vr])})}else Object.keys(et.value).forEach(Xn=>{et.value[Xn]!==void 0&&(Tt[et.type][Xn]=et.value[Xn])});var On,Ln})}),Tt.timestamp=sn,Tt}async collectStats(){try{const ut=await this._config.monitoringObject.getStats(),$t=this.analyze(ut,this._statsReports.slice().pop()||null);return this._statsReports.push($t),this.fireOnStatsCollected($t),ut}catch(ut){return Ar(this._moduleName,`got error ${ut}`),null}}fireOnStatsCollected(ut){if(this._callbacks.onStatsCollected){const $t={};$t.meetingId=ut.meetingId,$t.peerId=ut.peerId,$t.name=ut.name,$t.audio=[],$t.video=[],Object.values(ut.audio).forEach(Tt=>{const sn={};if(sn.network=Ne[ut.network.infrastructure],sn.timestamp=ut.timestamp,Tt.direction==y){sn.codec=Tt.codec_in.mime_type,sn.jitter=Tt.delta_jitter_ms_in,sn.bitrate=Tt.delta_kbs_in,sn.packetsLost=Tt.delta_packets_lost_in,sn.rtt=ut.data.delta_rtt_connectivity_ms||0,sn.totalPackets=Tt.delta_packets_in,sn.concealmentEvents=Tt.delta_concealment_events,sn.removedSampleForAccelaration=Tt.delta_removed_samples_for_accelaration,sn.insertedSamplesForDecelaration=Tt.delta_inserted_samples_for_decelaration;const nn=JSON.stringify(Tt.track_id_in).replace(/[{}"]/g,"");sn.trackId=nn}else Tt.direction==E&&(sn.codec=Tt.codec_out.mime_type,sn.jitter=Tt.delta_jitter_ms_out,sn.bitrate=Tt.delta_kbs_out,sn.packetsLost=Tt.delta_packets_lost_out,sn.rtt=ut.data.delta_rtt_connectivity_ms||0,sn.totalPackets=Tt.delta_packets_out,sn.trackId=Tt.track_id_out);$t.audio.push(sn)}),Object.values(ut.video).forEach(Tt=>{const sn={};if(sn.network=Ne[ut.network.infrastructure],sn.timestamp=ut.timestamp,Tt.direction==y){sn.codec=Tt.codec_in.mime_type,sn.jitter=Tt.delta_jitter_ms_in,sn.bitrate=Tt.delta_kbs_in,sn.packetsLost=Tt.delta_packets_lost_in,sn.rtt=ut.data.delta_rtt_connectivity_ms||0,sn.totalPackets=Tt.delta_packets_in,sn.size=Tt.size_in,sn.pauseCount=Tt.pause_count,sn.totalPausesDuration=Tt.total_pauses_duration,sn.freezeCount=Tt.freeze_count,sn.totalFreezesDuration=Tt.total_freezes_duration;const nn=JSON.stringify(Tt.track_id_in).replace(/[{}"]/g,"");sn.trackId=nn}else Tt.direction==E&&(sn.codec=Tt.codec_out.mime_type,sn.jitter=Tt.delta_jitter_ms_out,sn.bitrate=Tt.delta_kbs_out,sn.packetsLost=Tt.delta_packets_lost_out,sn.rtt=ut.data.delta_rtt_connectivity_ms||0,sn.totalPackets=Tt.delta_packets_out,sn.limitation=Tt.limitation_out,sn.size=Tt.size_out,sn.trackId=Tt.track_id_out);$t.video.push(sn)}),this._callbacks.onStatsCollected.callback($t)}}}class Ea{constructor(ut){this._id=ut.name&&ut.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=ut,this._collector=new Ha(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?nr("Probe already started."):(Ut(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{Ut(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),Ut(this._moduleName,"Probe Stopped")):nr("Probe not running, Please start first.")}set onStatsCollected(ut){ut?this._collector.registerCallback("onStatsCollected",ut):this._collector.unregisterCallback("onStatsCollected")}}const Qr={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class gr{constructor(ut){var $t;this._config={defaultConfig:Qr,...ut},this._probes=[],$t=this._config.verbose||!1,wt.setLevel($t?wt.levels.TRACE:wt.levels.INFO),Ut("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(ut,$t){if(!ut)throw new Error("undefined monitoring object");const Tt={monitoringObject:ut,...$t,...this._config},sn=new Ea(Tt);return this._probes.push(sn),sn}removeExistingProbe(ut){if(!ut)throw new Error("undefined probe");ut.stop(),this._probes=this._probes.filter($t=>ut.id!==$t.id)}getProbe(ut){for(let $t of this.probes)if($t.id==ut)return $t}startAllProbes(){this._probes.forEach((ut,$t)=>{ut.start()})}stopAllProbes(){this._probes.forEach(ut=>ut.stop())}}})(),f})()},5458:(T,b,u)=>{u.d(b,{A:()=>y});var x=u(3145),f=u(7800);function y(E){return function(_){if(Array.isArray(_))return(0,x.A)(_)}(E)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(E)||(0,f.A)(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},5471:function(T,b,u){var x,f,y,E,_,m,k,w;T.exports=(w=u(9021),f=(x=w).lib,y=f.WordArray,E=f.Hasher,_=x.algo,m=[],k=_.SHA1=E.extend({_doReset:function(){this._hash=new y.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(U,g){for(var A=this._hash.words,P=A[0],z=A[1],N=A[2],R=A[3],S=A[4],p=0;p<80;p++){if(p<16)m[p]=0|U[g+p];else{var D=m[p-3]^m[p-8]^m[p-14]^m[p-16];m[p]=D<<1|D>>>31}var O=(P<<5|P>>>27)+S+m[p];O+=p<20?1518500249+(z&N|~z&R):p<40?1859775393+(z^N^R):p<60?(z&N|z&R|N&R)-1894007588:(z^N^R)-899497514,S=R,R=N,N=z<<30|z>>>2,z=P,P=O}A[0]=A[0]+P|0,A[1]=A[1]+z|0,A[2]=A[2]+N|0,A[3]=A[3]+R|0,A[4]=A[4]+S|0},_doFinalize:function(){var U=this._data,g=U.words,A=8*this._nDataBytes,P=8*U.sigBytes;return g[P>>>5]|=128<<24-P%32,g[14+(P+64>>>9<<4)]=Math.floor(A/4294967296),g[15+(P+64>>>9<<4)]=A,U.sigBytes=4*g.length,this._process(),this._hash},clone:function(){var U=E.clone.call(this);return U._hash=this._hash.clone(),U}}),x.SHA1=E._createHelper(k),x.HmacSHA1=E._createHmacHelper(k),w.SHA1)},5501:(T,b,u)=>{u.d(b,{A:()=>f});var x=u(3662);function f(y,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(E&&E.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),E&&(0,x.A)(y,E)}},5503:function(T,b,u){var x;T.exports=(x=u(9021),function(){var f=x,y=f.lib.WordArray,E=f.enc;function _(m){return m<<8&4278255360|m>>>8&16711935}E.Utf16=E.Utf16BE={stringify:function(m){for(var k=m.words,w=m.sigBytes,U=[],g=0;g<w;g+=2){var A=k[g>>>2]>>>16-g%4*8&65535;U.push(String.fromCharCode(A))}return U.join("")},parse:function(m){for(var k=m.length,w=[],U=0;U<k;U++)w[U>>>1]|=m.charCodeAt(U)<<16-U%2*16;return y.create(w,2*k)}},E.Utf16LE={stringify:function(m){for(var k=m.words,w=m.sigBytes,U=[],g=0;g<w;g+=2){var A=_(k[g>>>2]>>>16-g%4*8&65535);U.push(String.fromCharCode(A))}return U.join("")},parse:function(m){for(var k=m.length,w=[],U=0;U<k;U++)w[U>>>1]|=_(m.charCodeAt(U)<<16-U%2*16);return y.create(w,2*k)}}}(),x.enc.Utf16)},5535:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Chrome70=void 0;const x=u(7363),f=u(2994),y=u(1765),E=u(8046),_=u(5544),m=u(5938),k=u(521),w=u(1305),U=u(3303),g=new f.Logger("Chrome70"),A={OS:1024,MIS:1024};class P extends k.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new P}constructor(){super()}get name(){return"Chrome70"}close(){if(g.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");const N=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{N.addTransceiver("audio"),N.addTransceiver("video");const R=await N.createOffer();try{N.close()}catch{}const S=x.parse(R.sdp);return _.extractRtpCapabilities({sdpObject:S})}catch(R){try{N.close()}catch{}throw R}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:A}}run({direction:N,iceParameters:R,iceCandidates:S,dtlsParameters:p,sctpParameters:D,iceServers:O,iceTransportPolicy:j,additionalSettings:I,proprietaryConstraints:H,extendedRtpCapabilities:F}){g.debug("run()"),this._direction=N,this._remoteSdp=new w.RemoteSdp({iceParameters:R,iceCandidates:S,dtlsParameters:p,sctpParameters:D}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",F),video:E.getSendingRtpParameters("video",F)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",F),video:E.getSendingRemoteRtpParameters("video",F)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:j??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...I},H),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",$=>{this.emit("@icecandidateerror",$)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(N){g.debug("updateIceServers()");const R=this._pc.getConfiguration();R.iceServers=N,this._pc.setConfiguration(R)}async restartIce(N){if(g.debug("restartIce()"),this._remoteSdp.updateIceParameters(N),this._transportReady)if(this._direction==="send"){const R=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const S={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}else{const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const S=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}}async getTransportStats(){return this._pc.getStats()}async send({track:N,encodings:R,codecOptions:S,codec:p}){this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",N.kind,N.id);const D=y.clone(this._sendingRtpParametersByKind[N.kind]);D.codecs=E.reduceCodecs(D.codecs,p);const O=y.clone(this._sendingRemoteRtpParametersByKind[N.kind]);O.codecs=E.reduceCodecs(O.codecs,p);const j=this._remoteSdp.getNextMediaSectionIdx(),I=this._pc.addTransceiver(N,{direction:"sendonly",streams:[this._sendStream]});let H,F=await this._pc.createOffer(),$=x.parse(F.sdp);$.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),R&&R.length>1&&(g.debug("send() | enabling legacy simulcast"),$=x.parse(F.sdp),H=$.media[j.idx],m.addLegacySimulcast({offerMediaObject:H,numStreams:R.length}),F={type:"offer",sdp:x.write($)});let q=!1;const se=(0,U.parse)((R??[{}])[0].scalabilityMode);if(R&&R.length===1&&se.spatialLayers>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(g.debug("send() | enabling legacy simulcast for VP9 SVC"),q=!0,$=x.parse(F.sdp),H=$.media[j.idx],m.addLegacySimulcast({offerMediaObject:H,numStreams:se.spatialLayers}),F={type:"offer",sdp:x.write($)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F),R){g.debug("send() | applying given encodings");const Re=I.sender.getParameters();for(let Se=0;Se<(Re.encodings??[]).length;++Se){const me=Re.encodings[Se],Ce=R[Se];if(!Ce)break;Re.encodings[Se]=Object.assign(me,Ce)}await I.sender.setParameters(Re)}const J=I.mid;if(D.mid=J,$=x.parse(this._pc.localDescription.sdp),H=$.media[j.idx],D.rtcp.cname=_.getCname({offerMediaObject:H}),D.encodings=m.getRtpEncodings({offerMediaObject:H}),R)for(let Re=0;Re<D.encodings.length;++Re)R[Re]&&Object.assign(D.encodings[Re],R[Re]);if(q&&(D.encodings=[D.encodings[0]]),D.encodings.length>1&&(D.codecs[0].mimeType.toLowerCase()==="video/vp8"||D.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Re of D.encodings)Re.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:H,reuseMid:j.reuseMid,offerRtpParameters:D,answerRtpParameters:O,codecOptions:S});const be={type:"answer",sdp:this._remoteSdp.getSdp()};return g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",be),await this._pc.setRemoteDescription(be),this._mapMidTransceiver.set(J,I),{localId:J,rtpParameters:D,rtpSender:I.sender}}async stopSending(N){this.assertSendDirection(),g.debug("stopSending() [localId:%s]",N);const R=this._mapMidTransceiver.get(N);if(!R)throw new Error("associated RTCRtpTransceiver not found");if(R.sender.replaceTrack(null),this._pc.removeTrack(R.sender),this._remoteSdp.closeMediaSection(R.mid))try{R.stop()}catch{}const S=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const p={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._mapMidTransceiver.delete(N)}async pauseSending(N){}async resumeSending(N){}async replaceTrack(N,R){this.assertSendDirection(),R?g.debug("replaceTrack() [localId:%s, track.id:%s]",N,R.id):g.debug("replaceTrack() [localId:%s, no track]",N);const S=this._mapMidTransceiver.get(N);if(!S)throw new Error("associated RTCRtpTransceiver not found");await S.sender.replaceTrack(R)}async setMaxSpatialLayer(N,R){this.assertSendDirection(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",N,R);const S=this._mapMidTransceiver.get(N);if(!S)throw new Error("associated RTCRtpTransceiver not found");const p=S.sender.getParameters();p.encodings.forEach((j,I)=>{j.active=I<=R}),await S.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(N,p.encodings);const D=await this._pc.createOffer();g.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async setRtpEncodingParameters(N,R){this.assertSendDirection(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",N,R);const S=this._mapMidTransceiver.get(N);if(!S)throw new Error("associated RTCRtpTransceiver not found");const p=S.sender.getParameters();p.encodings.forEach((j,I)=>{p.encodings[I]={...j,...R}}),await S.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(N,p.encodings);const D=await this._pc.createOffer();g.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async getSenderStats(N){this.assertSendDirection();const R=this._mapMidTransceiver.get(N);if(!R)throw new Error("associated RTCRtpTransceiver not found");return R.sender.getStats()}async sendDataChannel({ordered:N,maxPacketLifeTime:R,maxRetransmits:S,label:p,protocol:D}){this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:N,maxPacketLifeTime:R,maxRetransmitTime:R,maxRetransmits:S,protocol:D};g.debug("sendDataChannel() [options:%o]",O);const j=this._pc.createDataChannel(p,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%A.MIS,!this._hasDataChannelMediaSection){const I=await this._pc.createOffer(),H=x.parse(I.sdp),F=H.media.find(q=>q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I),this._remoteSdp.sendSctpAssociation({offerMediaObject:F});const $={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:j,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(N){this.assertRecvDirection();const R=[],S=new Map;for(const j of N){const{trackId:I,kind:H,rtpParameters:F,streamId:$}=j;g.debug("receive() [trackId:%s, kind:%s]",I,H);const q=F.mid??String(this._mapMidTransceiver.size);S.set(I,q),this._remoteSdp.receive({mid:q,kind:H,offerRtpParameters:F,streamId:$??F.rtcp.cname,trackId:I})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let D=await this._pc.createAnswer();const O=x.parse(D.sdp);for(const j of N){const{trackId:I,rtpParameters:H}=j,F=S.get(I),$=O.media.find(q=>String(q.mid)===F);_.applyCodecParameters({offerRtpParameters:H,answerMediaObject:$})}D={type:"answer",sdp:x.write(O)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const j of N){const{trackId:I}=j,H=S.get(I),F=this._pc.getTransceivers().find($=>$.mid===H);if(!F)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(H,F),R.push({localId:H,track:F.receiver.track,rtpReceiver:F.receiver})}return R}async stopReceiving(N){this.assertRecvDirection();for(const p of N){g.debug("stopReceiving() [localId:%s]",p);const D=this._mapMidTransceiver.get(p);if(!D)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(D.mid)}const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const S=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S);for(const p of N)this._mapMidTransceiver.delete(p)}async pauseReceiving(N){}async resumeReceiving(N){}async getReceiverStats(N){this.assertRecvDirection();const R=this._mapMidTransceiver.get(N);if(!R)throw new Error("associated RTCRtpTransceiver not found");return R.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:N,label:R,protocol:S}){this.assertRecvDirection();const{streamId:p,ordered:D,maxPacketLifeTime:O,maxRetransmits:j}=N,I={negotiated:!0,id:p,ordered:D,maxPacketLifeTime:O,maxRetransmitTime:O,maxRetransmits:j,protocol:S};g.debug("receiveDataChannel() [options:%o]",I);const H=this._pc.createDataChannel(R,I);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const F={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",F),await this._pc.setRemoteDescription(F);const $=await this._pc.createAnswer();if(!this._transportReady){const q=x.parse($.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:q})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setLocalDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:H}}async setupTransport({localDtlsRole:N,localSdpObject:R}){R||(R=x.parse(this._pc.localDescription.sdp));const S=_.extractDtlsParameters({sdpObject:R});S.role=N,this._remoteSdp.updateDtlsRole(N==="client"?"server":"client"),await new Promise((p,D)=>{this.safeEmit("@connect",{dtlsParameters:S},p,D)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Chrome70=P},5544:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.extractRtpCapabilities=function({sdpObject:f}){const y=new Map,E=[];let _=!1,m=!1;for(const k of f.media){const w=k.type;switch(w){case"audio":if(_)continue;_=!0;break;case"video":if(m)continue;m=!0;break;default:continue}for(const U of k.rtp){const g={kind:w,mimeType:`${w}/${U.codec}`,preferredPayloadType:U.payload,clockRate:U.rate,channels:U.encoding,parameters:{},rtcpFeedback:[]};y.set(g.preferredPayloadType,g)}for(const U of k.fmtp??[]){const g=x.parseParams(U.config),A=y.get(U.payload);A&&(g?.hasOwnProperty("profile-level-id")&&(g["profile-level-id"]=String(g["profile-level-id"])),A.parameters=g)}for(const U of k.rtcpFb??[]){const g={type:U.type,parameter:U.subtype};if(g.parameter||delete g.parameter,U.payload!=="*"){const A=y.get(U.payload);if(!A)continue;A.rtcpFeedback.push(g)}else for(const A of y.values())A.kind!==w||/.+\/rtx$/i.test(A.mimeType)||A.rtcpFeedback.push(g)}for(const U of k.ext??[]){if(U["encrypt-uri"])continue;const g={kind:w,uri:U.uri,preferredId:U.value};E.push(g)}}return{codecs:Array.from(y.values()),headerExtensions:E}},b.extractDtlsParameters=function({sdpObject:f}){let y,E=f.setup,_=f.fingerprint;if(!E||!_){const m=(f.media??[]).find(k=>k.port!==0);m&&(E??=m.setup,_??=m.fingerprint)}if(!E)throw new Error("no a=setup found at SDP session or media level");if(!_)throw new Error("no a=fingerprint found at SDP session or media level");switch(E){case"active":y="client";break;case"passive":y="server";break;case"actpass":y="auto"}return{role:y,fingerprints:[{algorithm:_.type,value:_.hash}]}},b.getCname=function({offerMediaObject:f}){const y=(f.ssrcs??[]).find(E=>E.attribute==="cname");return y?y.value:""},b.applyCodecParameters=function({offerRtpParameters:f,answerMediaObject:y}){for(const E of f.codecs){const _=E.mimeType.toLowerCase();if(_!=="audio/opus"||!(y.rtp??[]).find(w=>w.payload===E.payloadType))continue;y.fmtp=y.fmtp??[];let m=y.fmtp.find(w=>w.payload===E.payloadType);m||(m={payload:E.payloadType,config:""},y.fmtp.push(m));const k=x.parseParams(m.config);switch(_){case"audio/opus":{const w=E.parameters["sprop-stereo"];w!==void 0&&(k.stereo=Number(w)?1:0);break}}m.config="";for(const w of Object.keys(k))m.config&&(m.config+=";"),m.config+=`${w}=${k[w]}`}};const x=u(7363)},5546:T=>{function b(u,x,f,y){var E=Object.defineProperty;try{E({},"",{})}catch{E=0}T.exports=b=function(_,m,k,w){if(m)E?E(_,m,{value:k,enumerable:!w,configurable:!w,writable:!w}):_[m]=k;else{var U=function(g,A){b(_,g,function(P){return this._invoke(g,A,P)})};U("next",0),U("throw",1),U("return",2)}},T.exports.__esModule=!0,T.exports.default=T.exports,b(u,x,f,y)}T.exports=b,T.exports.__esModule=!0,T.exports.default=T.exports},5601:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Transport=void 0;const x=u(8876),f=u(2994),y=u(3953),E=u(4893),_=u(1765),m=u(8046),k=u(9792),w=u(3518),U=u(7504),g=u(9166),A=new f.Logger("Transport");class P{consumerOptions;promise;resolve;reject;constructor(R){this.consumerOptions=R,this.promise=new Promise((S,p)=>{this.resolve=S,this.reject=p})}}class z extends y.EnhancedEventEmitter{_id;_closed=!1;_direction;_extendedRtpCapabilities;_canProduceByKind;_maxSctpMessageSize;_handler;_iceGatheringState="new";_connectionState="new";_appData;_producers=new Map;_consumers=new Map;_dataProducers=new Map;_dataConsumers=new Map;_probatorConsumerCreated=!1;_awaitQueue=new x.AwaitQueue;_pendingConsumerTasks=[];_consumerCreationInProgress=!1;_pendingPauseConsumers=new Map;_consumerPauseInProgress=!1;_pendingResumeConsumers=new Map;_consumerResumeInProgress=!1;_pendingCloseConsumers=new Map;_consumerCloseInProgress=!1;_observer=new y.EnhancedEventEmitter;constructor({direction:R,id:S,iceParameters:p,iceCandidates:D,dtlsParameters:O,sctpParameters:j,iceServers:I,iceTransportPolicy:H,additionalSettings:F,proprietaryConstraints:$,appData:q,handlerFactory:se,extendedRtpCapabilities:J,canProduceByKind:be}){super(),A.debug("constructor() [id:%s, direction:%s]",S,R),this._id=S,this._direction=R,this._extendedRtpCapabilities=J,this._canProduceByKind=be,this._maxSctpMessageSize=j?j.maxMessageSize:null;const Re=_.clone(F)??{};delete Re.iceServers,delete Re.iceTransportPolicy,delete Re.bundlePolicy,delete Re.rtcpMuxPolicy,delete Re.sdpSemantics,this._handler=se(),this._handler.run({direction:R,iceParameters:p,iceCandidates:D,dtlsParameters:O,sctpParameters:j,iceServers:I,iceTransportPolicy:H,additionalSettings:Re,proprietaryConstraints:$,extendedRtpCapabilities:J}),this._appData=q??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(R){this._appData=R}get observer(){return this._observer}close(){if(!this._closed){A.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const R of this._producers.values())R.transportClosed();this._producers.clear();for(const R of this._consumers.values())R.transportClosed();this._consumers.clear();for(const R of this._dataProducers.values())R.transportClosed();this._dataProducers.clear();for(const R of this._dataConsumers.values())R.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new E.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:R}){if(A.debug("restartIce()"),this._closed)throw new E.InvalidStateError("closed");if(!R)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(R),"transport.restartIce()")}async updateIceServers({iceServers:R}={}){if(A.debug("updateIceServers()"),this._closed)throw new E.InvalidStateError("closed");if(!Array.isArray(R))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(R),"transport.updateIceServers()")}async produce({track:R,encodings:S,codecOptions:p,codec:D,stopTracks:O=!0,disableTrackOnPause:j=!0,zeroRtpOnPause:I=!1,onRtpSender:H,appData:F={}}={}){if(A.debug("produce() [track:%o]",R),this._closed)throw new E.InvalidStateError("closed");if(!R)throw new TypeError("missing track");if(this._direction!=="send")throw new E.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[R.kind])throw new E.UnsupportedError(`cannot produce ${R.kind}`);if(R.readyState==="ended")throw new E.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(F&&typeof F!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let $;if(S&&!Array.isArray(S))throw TypeError("encodings must be an array");S&&S.length===0?$=void 0:S&&($=S.map(be=>{const Re={active:!0};return be.active===!1&&(Re.active=!1),typeof be.dtx=="boolean"&&(Re.dtx=be.dtx),typeof be.scalabilityMode=="string"&&(Re.scalabilityMode=be.scalabilityMode),typeof be.scaleResolutionDownBy=="number"&&(Re.scaleResolutionDownBy=be.scaleResolutionDownBy),typeof be.maxBitrate=="number"&&(Re.maxBitrate=be.maxBitrate),typeof be.maxFramerate=="number"&&(Re.maxFramerate=be.maxFramerate),typeof be.adaptivePtime=="boolean"&&(Re.adaptivePtime=be.adaptivePtime),typeof be.priority=="string"&&(Re.priority=be.priority),typeof be.networkPriority=="string"&&(Re.networkPriority=be.networkPriority),Re}));const{localId:q,rtpParameters:se,rtpSender:J}=await this._handler.send({track:R,encodings:$,codecOptions:p,codec:D,onRtpSender:H});try{m.validateRtpParameters(se);const{id:be}=await new Promise((Se,me)=>{this.safeEmit("produce",{kind:R.kind,rtpParameters:se,appData:F},Se,me)}),Re=new k.Producer({id:be,localId:q,rtpSender:J,track:R,rtpParameters:se,stopTracks:O,disableTrackOnPause:j,zeroRtpOnPause:I,appData:F});return this._producers.set(Re.id,Re),this.handleProducer(Re),this._observer.safeEmit("newproducer",Re),Re}catch(be){throw this._handler.stopSending(q).catch(()=>{}),be}},"transport.produce()").catch($=>{if(O)try{R.stop()}catch{}throw $})}async consume({id:R,producerId:S,kind:p,rtpParameters:D,streamId:O,onRtpReceiver:j,appData:I={}}){if(A.debug("consume()"),this._closed)throw new E.InvalidStateError("closed");if(this._direction!=="recv")throw new E.UnsupportedError("not a receiving Transport");if(typeof R!="string")throw new TypeError("missing id");if(typeof S!="string")throw new TypeError("missing producerId");if(p!=="audio"&&p!=="video")throw new TypeError(`invalid kind '${p}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(I&&typeof I!="object")throw new TypeError("if given, appData must be an object");const H=_.clone(D);if(!m.canReceive(H,this._extendedRtpCapabilities))throw new E.UnsupportedError("cannot consume this Producer");const F=new P({id:R,producerId:S,kind:p,rtpParameters:H,streamId:O,onRtpReceiver:j,appData:I});return this._pendingConsumerTasks.push(F),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),F.promise}async produceData({ordered:R=!0,maxPacketLifeTime:S,maxRetransmits:p,label:D="",protocol:O="",appData:j={}}={}){if(A.debug("produceData()"),this._closed)throw new E.InvalidStateError("closed");if(this._direction!=="send")throw new E.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new E.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(j&&typeof j!="object")throw new TypeError("if given, appData must be an object");return(S||p)&&(R=!1),this._awaitQueue.push(async()=>{const{dataChannel:I,sctpStreamParameters:H}=await this._handler.sendDataChannel({ordered:R,maxPacketLifeTime:S,maxRetransmits:p,label:D,protocol:O});m.validateSctpStreamParameters(H);const{id:F}=await new Promise((q,se)=>{this.safeEmit("producedata",{sctpStreamParameters:H,label:D,protocol:O,appData:j},q,se)}),$=new U.DataProducer({id:F,dataChannel:I,sctpStreamParameters:H,appData:j});return this._dataProducers.set($.id,$),this.handleDataProducer($),this._observer.safeEmit("newdataproducer",$),$},"transport.produceData()")}async consumeData({id:R,dataProducerId:S,sctpStreamParameters:p,label:D="",protocol:O="",appData:j={}}){if(A.debug("consumeData()"),this._closed)throw new E.InvalidStateError("closed");if(this._direction!=="recv")throw new E.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new E.UnsupportedError("SCTP not enabled by remote Transport");if(typeof R!="string")throw new TypeError("missing id");if(typeof S!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(j&&typeof j!="object")throw new TypeError("if given, appData must be an object");const I=_.clone(p);return m.validateSctpStreamParameters(I),this._awaitQueue.push(async()=>{const{dataChannel:H}=await this._handler.receiveDataChannel({sctpStreamParameters:I,label:D,protocol:O}),F=new g.DataConsumer({id:R,dataProducerId:S,dataChannel:H,sctpStreamParameters:I,appData:j});return this._dataConsumers.set(F.id,F),this.handleDataConsumer(F),this._observer.safeEmit("newdataconsumer",F),F},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void A.debug("createPendingConsumers() | there is no Consumer to be created");const R=[...this._pendingConsumerTasks];let S;this._pendingConsumerTasks=[];const p=[];for(const D of R){const{id:O,kind:j,rtpParameters:I,streamId:H,onRtpReceiver:F}=D.consumerOptions;p.push({trackId:O,kind:j,rtpParameters:I,streamId:H,onRtpReceiver:F})}try{const D=await this._handler.receive(p);for(let O=0;O<D.length;++O){const j=R[O],I=D[O],{id:H,producerId:F,kind:$,rtpParameters:q,appData:se}=j.consumerOptions,{localId:J,rtpReceiver:be,track:Re}=I,Se=new w.Consumer({id:H,localId:J,producerId:F,rtpReceiver:be,track:Re,rtpParameters:q,appData:se});this._consumers.set(Se.id,Se),this.handleConsumer(Se),this._probatorConsumerCreated||S||$!=="video"||(S=Se),this._observer.safeEmit("newconsumer",Se),j.resolve(Se)}}catch(D){for(const O of R)O.reject(D)}if(S)try{const D=m.generateProbatorRtpParameters(S.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:D}]),A.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(D){A.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",D)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void A.debug("pausePendingConsumers() | there is no Consumer to be paused");const R=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const S=R.map(p=>p.localId);await this._handler.pauseReceiving(S)}catch(S){A.error("pausePendingConsumers() | failed to pause Consumers:",S)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void A.debug("resumePendingConsumers() | there is no Consumer to be resumed");const R=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const S=R.map(p=>p.localId);await this._handler.resumeReceiving(S)}catch(S){A.error("resumePendingConsumers() | failed to resume Consumers:",S)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void A.debug("closePendingConsumers() | there is no Consumer to be closed");const R=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(R.map(S=>S.localId))}catch(S){A.error("closePendingConsumers() | failed to close Consumers:",S)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const R=this._handler;R.on("@connect",({dtlsParameters:S},p,D)=>{this._closed?D(new E.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:S},p,D)}),R.on("@icegatheringstatechange",S=>{S!==this._iceGatheringState&&(A.debug("ICE gathering state changed to %s",S),this._iceGatheringState=S,this._closed||this.safeEmit("icegatheringstatechange",S))}),R.on("@icecandidateerror",S=>{A.warn(`ICE candidate error [url:${S.url}, localAddress:${S.address}, localPort:${S.port}]: ${S.errorCode} "${S.errorText}"`),this.safeEmit("icecandidateerror",S)}),R.on("@connectionstatechange",S=>{S!==this._connectionState&&(A.debug("connection state changed to %s",S),this._connectionState=S,this._closed||this.safeEmit("connectionstatechange",S))})}handleProducer(R){R.on("@close",()=>{this._producers.delete(R.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(R.localId),"producer @close event").catch(S=>A.warn("producer.close() failed:%o",S))}),R.on("@pause",(S,p)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(R.localId),"producer @pause event").then(S).catch(p)}),R.on("@resume",(S,p)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(R.localId),"producer @resume event").then(S).catch(p)}),R.on("@replacetrack",(S,p,D)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(R.localId,S),"producer @replacetrack event").then(p).catch(D)}),R.on("@setmaxspatiallayer",(S,p,D)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(R.localId,S),"producer @setmaxspatiallayer event").then(p).catch(D)}),R.on("@setrtpencodingparameters",(S,p,D)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(R.localId,S),"producer @setrtpencodingparameters event").then(p).catch(D)}),R.on("@getstats",(S,p)=>{if(this._closed)return p(new E.InvalidStateError("closed"));this._handler.getSenderStats(R.localId).then(S).catch(p)})}handleConsumer(R){R.on("@close",()=>{this._consumers.delete(R.id),this._pendingPauseConsumers.delete(R.id),this._pendingResumeConsumers.delete(R.id),this._closed||(this._pendingCloseConsumers.set(R.id,R),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),R.on("@pause",()=>{this._pendingResumeConsumers.has(R.id)&&this._pendingResumeConsumers.delete(R.id),this._pendingPauseConsumers.set(R.id,R),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),R.on("@resume",()=>{this._pendingPauseConsumers.has(R.id)&&this._pendingPauseConsumers.delete(R.id),this._pendingResumeConsumers.set(R.id,R),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),R.on("@getstats",(S,p)=>{if(this._closed)return p(new E.InvalidStateError("closed"));this._handler.getReceiverStats(R.localId).then(S).catch(p)})}handleDataProducer(R){R.on("@close",()=>{this._dataProducers.delete(R.id)})}handleDataConsumer(R){R.on("@close",()=>{this._dataConsumers.delete(R.id)})}}b.Transport=z},5602:T=>{var b=T.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(u){return u.encoding?"rtpmap:%d %s/%s/%s":u.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(u){return u.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(u){return u.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(u){return"extmap:%d"+(u.direction?"/%s":"%v")+(u["encrypt-uri"]?" %s":"%v")+" %s"+(u.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(u){return u.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(u){var x="candidate:%s %d %s %d %s %d typ %s";return x+=u.raddr!=null?" raddr %s rport %d":"%v%v",x+=u.tcptype!=null?" tcptype %s":"%v",u.generation!=null&&(x+=" generation %d"),x+=u["network-id"]!=null?" network-id %d":"%v",x+=u["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(u){var x="ssrc:%d";return u.attribute!=null&&(x+=" %s",u.value!=null&&(x+=":%s")),x}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(u){return u.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(u){return u.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(u){return"imageattr:%s %s %s"+(u.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(u){return"simulcast:%s %s"+(u.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(u){return"ts-refclk:%s"+(u.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(u){var x="mediaclk:";return x+=u.id!=null?"id=%s %s":"%v%s",x+=u.mediaClockValue!=null?"=%s":"",x+=u.rateNumerator!=null?" rate=%s":"",x+=u.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(b).forEach(function(u){b[u].forEach(function(x){x.reg||(x.reg=/(.*)/),x.format||(x.format="%s")})})},5765:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Safari12=void 0;const x=u(7363),f=u(2994),y=u(1765),E=u(8046),_=u(5544),m=u(5938),k=u(4256),w=u(4893),U=u(521),g=u(1305),A=u(3303),P=new f.Logger("Safari12"),z={OS:1024,MIS:1024};class N extends U.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new N}constructor(){super()}get name(){return"Safari12"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const S=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{S.addTransceiver("audio"),S.addTransceiver("video");const p=await S.createOffer();try{S.close()}catch{}const D=x.parse(p.sdp),O=_.extractRtpCapabilities({sdpObject:D});return k.addNackSupportForOpus(O),O}catch(p){try{S.close()}catch{}throw p}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:z}}run({direction:S,iceParameters:p,iceCandidates:D,dtlsParameters:O,sctpParameters:j,iceServers:I,iceTransportPolicy:H,additionalSettings:F,proprietaryConstraints:$,extendedRtpCapabilities:q}){this.assertNotClosed(),P.debug("run()"),this._direction=S,this._remoteSdp=new g.RemoteSdp({iceParameters:p,iceCandidates:D,dtlsParameters:O,sctpParameters:j}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",q),video:E.getSendingRtpParameters("video",q)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",q),video:E.getSendingRemoteRtpParameters("video",q)},O.role&&O.role!=="auto"&&(this._forcedLocalDtlsRole=O.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:I??[],iceTransportPolicy:H??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...F},$),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",se=>{this.emit("@icecandidateerror",se)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(S){this.assertNotClosed(),P.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=S,this._pc.setConfiguration(p)}async restartIce(S){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(S),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:S,encodings:p,codecOptions:D,codec:O,onRtpSender:j}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",S.kind,S.id);const I=y.clone(this._sendingRtpParametersByKind[S.kind]);I.codecs=E.reduceCodecs(I.codecs,O);const H=y.clone(this._sendingRemoteRtpParametersByKind[S.kind]);H.codecs=E.reduceCodecs(H.codecs,O);const F=this._remoteSdp.getNextMediaSectionIdx(),$=this._pc.addTransceiver(S,{direction:"sendonly",streams:[this._sendStream]});j&&j($.sender);let q,se=await this._pc.createOffer(),J=x.parse(se.sdp);J.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J});const be=(0,A.parse)((p??[{}])[0].scalabilityMode);p&&p.length>1&&(P.debug("send() | enabling legacy simulcast"),J=x.parse(se.sdp),q=J.media[F.idx],m.addLegacySimulcast({offerMediaObject:q,numStreams:p.length}),se={type:"offer",sdp:x.write(J)}),P.debug("send() | calling pc.setLocalDescription() [offer:%o]",se),await this._pc.setLocalDescription(se);const Re=$.mid;if(I.mid=Re,J=x.parse(this._pc.localDescription.sdp),q=J.media[F.idx],I.rtcp.cname=_.getCname({offerMediaObject:q}),I.encodings=m.getRtpEncodings({offerMediaObject:q}),p)for(let me=0;me<I.encodings.length;++me)p[me]&&Object.assign(I.encodings[me],p[me]);if(I.encodings.length>1&&(I.codecs[0].mimeType.toLowerCase()==="video/vp8"||I.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const me of I.encodings)me.scalabilityMode?me.scalabilityMode=`L1T${be.temporalLayers}`:me.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:q,reuseMid:F.reuseMid,offerRtpParameters:I,answerRtpParameters:H,codecOptions:D});const Se={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Se),await this._pc.setRemoteDescription(Se),this._mapMidTransceiver.set(Re,$),{localId:Re,rtpParameters:I,rtpSender:$.sender}}async stopSending(S){if(this.assertSendDirection(),this._closed)return;P.debug("stopSending() [localId:%s]",S);const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const D=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._mapMidTransceiver.delete(S)}async pauseSending(S){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",S);const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(S);const D=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async resumeSending(S){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",S);const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(S);const D=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const O={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async replaceTrack(S,p){this.assertNotClosed(),this.assertSendDirection(),p?P.debug("replaceTrack() [localId:%s, track.id:%s]",S,p.id):P.debug("replaceTrack() [localId:%s, no track]",S);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");await D.sender.replaceTrack(p)}async setMaxSpatialLayer(S,p){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",S,p);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");const O=D.sender.getParameters();O.encodings.forEach((H,F)=>{H.active=F<=p}),await D.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(S,O.encodings);const j=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async setRtpEncodingParameters(S,p){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",S,p);const D=this._mapMidTransceiver.get(S);if(!D)throw new Error("associated RTCRtpTransceiver not found");const O=D.sender.getParameters();O.encodings.forEach((H,F)=>{O.encodings[F]={...H,...p}}),await D.sender.setParameters(O),this._remoteSdp.muxMediaSectionSimulcast(S,O.encodings);const j=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async getSenderStats(S){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:S,maxPacketLifeTime:p,maxRetransmits:D,label:O,protocol:j}){this.assertNotClosed(),this.assertSendDirection();const I={negotiated:!0,id:this._nextSendSctpStreamId,ordered:S,maxPacketLifeTime:p,maxRetransmits:D,protocol:j};P.debug("sendDataChannel() [options:%o]",I);const H=this._pc.createDataChannel(O,I);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%z.MIS,!this._hasDataChannelMediaSection){const F=await this._pc.createOffer(),$=x.parse(F.sdp),q=$.media.find(J=>J.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F),this._remoteSdp.sendSctpAssociation({offerMediaObject:q});const se={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",se),await this._pc.setRemoteDescription(se),this._hasDataChannelMediaSection=!0}return{dataChannel:H,sctpStreamParameters:{streamId:I.id,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits}}}async receive(S){this.assertNotClosed(),this.assertRecvDirection();const p=[],D=new Map;for(const H of S){const{trackId:F,kind:$,rtpParameters:q,streamId:se}=H;P.debug("receive() [trackId:%s, kind:%s]",F,$);const J=q.mid??String(this._mapMidTransceiver.size);D.set(F,J),this._remoteSdp.receive({mid:J,kind:$,offerRtpParameters:q,streamId:se??q.rtcp.cname,trackId:F})}const O={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);for(const H of S){const{trackId:F,onRtpReceiver:$}=H;if($){const q=D.get(F),se=this._pc.getTransceivers().find(J=>J.mid===q);if(!se)throw new Error("transceiver not found");$(se.receiver)}}let j=await this._pc.createAnswer();const I=x.parse(j.sdp);for(const H of S){const{trackId:F,rtpParameters:$}=H,q=D.get(F),se=I.media.find(J=>String(J.mid)===q);_.applyCodecParameters({offerRtpParameters:$,answerMediaObject:se})}j={type:"answer",sdp:x.write(I)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",j),await this._pc.setLocalDescription(j);for(const H of S){const{trackId:F}=H,$=D.get(F),q=this._pc.getTransceivers().find(se=>se.mid===$);if(!q)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set($,q),p.push({localId:$,track:q.receiver.track,rtpReceiver:q.receiver})}return p}async stopReceiving(S){if(this.assertRecvDirection(),this._closed)return;for(const O of S){P.debug("stopReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(j.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const O of S)this._mapMidTransceiver.delete(O)}async pauseReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const O of S){P.debug("pauseReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");j.direction="inactive",this._remoteSdp.pauseMediaSection(O)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}async resumeReceiving(S){this.assertNotClosed(),this.assertRecvDirection();for(const O of S){P.debug("resumeReceiving() [localId:%s]",O);const j=this._mapMidTransceiver.get(O);if(!j)throw new Error("associated RTCRtpTransceiver not found");j.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(O)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const D=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D)}async getReceiverStats(S){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(S);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:S,label:p,protocol:D}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:O,ordered:j,maxPacketLifeTime:I,maxRetransmits:H}=S,F={negotiated:!0,id:O,ordered:j,maxPacketLifeTime:I,maxRetransmits:H,protocol:D};P.debug("receiveDataChannel() [options:%o]",F);const $=this._pc.createDataChannel(p,F);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const q={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",q),await this._pc.setRemoteDescription(q);const se=await this._pc.createAnswer();if(!this._transportReady){const J=x.parse(se.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",se),await this._pc.setLocalDescription(se),this._hasDataChannelMediaSection=!0}return{dataChannel:$}}async setupTransport({localDtlsRole:S,localSdpObject:p}){p||(p=x.parse(this._pc.localDescription.sdp));const D=_.extractDtlsParameters({sdpObject:p});D.role=S,this._remoteSdp.updateDtlsRole(S==="client"?"server":"client"),await new Promise((O,j)=>{this.safeEmit("@connect",{dtlsParameters:D},O,j)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new w.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Safari12=N},5862:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.FakeEventTarget=void 0,b.FakeEventTarget=class{listeners={};addEventListener(u,x,f={}){x&&(this.listeners[u]??=[],this.listeners[u].push({callback:x,once:f.once===!0}))}removeEventListener(u,x){this.listeners[u]&&(this.listeners[u]=this.listeners[u].filter(f=>f.callback!==x))}dispatchEvent(u){if(!u||typeof u.type!="string")throw new Error("invalid event object");const x=this.listeners[u.type];if(!x)return!0;for(const f of[...x]){try{f.callback.call(this,u)}catch(y){setTimeout(()=>{throw y},0)}f.once&&this.removeEventListener(u.type,f.callback)}return!u.defaultPrevented}}},5869:(T,b,u)=>{var x=u(887);T.exports=function(f,y,E,_,m){var k=x(f,y,E,_,m);return k.next().then(function(w){return w.done?w.value:k.next()})},T.exports.__esModule=!0,T.exports.default=T.exports},5938:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.getRtpEncodings=function({offerMediaObject:u}){const x=new Set;for(const E of u.ssrcs??[]){const _=E.id;x.add(_)}if(x.size===0)throw new Error("no a=ssrc lines found");const f=new Map;for(const E of u.ssrcGroups??[]){if(E.semantics!=="FID")continue;let[_,m]=E.ssrcs.split(/\s+/);_=Number(_),m=Number(m),x.has(_)&&(x.delete(_),x.delete(m),f.set(_,m))}for(const E of x)f.set(E,null);const y=[];for(const[E,_]of f){const m={ssrc:E};_&&(m.rtx={ssrc:_}),y.push(m)}return y},b.addLegacySimulcast=function({offerMediaObject:u,numStreams:x}){if(x<=1)throw new TypeError("numStreams must be greater than 1");const f=(u.ssrcs??[]).find(A=>A.attribute==="msid");if(!f)throw new Error("a=ssrc line with msid information not found");const[y,E]=f.value.split(" "),_=Number(f.id);let m;(u.ssrcGroups??[]).some(A=>{if(A.semantics!=="FID")return!1;const P=A.ssrcs.split(/\s+/);return Number(P[0])===_&&(m=Number(P[1]),!0)});const k=u.ssrcs.find(A=>A.attribute==="cname");if(!k)throw new Error("a=ssrc line with cname information not found");const w=k.value,U=[],g=[];for(let A=0;A<x;++A)U.push(_+A),m&&g.push(m+A);u.ssrcGroups=[],u.ssrcs=[],u.ssrcGroups.push({semantics:"SIM",ssrcs:U.join(" ")});for(const A of U)u.ssrcs.push({id:A,attribute:"cname",value:w}),u.ssrcs.push({id:A,attribute:"msid",value:`${y} ${E}`});for(let A=0;A<g.length;++A){const P=U[A],z=g[A];u.ssrcs.push({id:z,attribute:"cname",value:w}),u.ssrcs.push({id:z,attribute:"msid",value:`${y} ${E}`}),u.ssrcGroups.push({semantics:"FID",ssrcs:`${P} ${z}`})}}},5953:function(T,b,u){var x;T.exports=(x=u(9021),u(3240),function(f){var y=x,E=y.lib,_=E.WordArray,m=E.Hasher,k=y.x64.Word,w=y.algo,U=[],g=[],A=[];(function(){for(var N=1,R=0,S=0;S<24;S++){U[N+5*R]=(S+1)*(S+2)/2%64;var p=(2*N+3*R)%5;N=R%5,R=p}for(N=0;N<5;N++)for(R=0;R<5;R++)g[N+5*R]=R+(2*N+3*R)%5*5;for(var D=1,O=0;O<24;O++){for(var j=0,I=0,H=0;H<7;H++){if(1&D){var F=(1<<H)-1;F<32?I^=1<<F:j^=1<<F-32}128&D?D=D<<1^113:D<<=1}A[O]=k.create(j,I)}})();var P=[];(function(){for(var N=0;N<25;N++)P[N]=k.create()})();var z=w.SHA3=m.extend({cfg:m.cfg.extend({outputLength:512}),_doReset:function(){for(var N=this._state=[],R=0;R<25;R++)N[R]=new k.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(N,R){for(var S=this._state,p=this.blockSize/2,D=0;D<p;D++){var O=N[R+2*D],j=N[R+2*D+1];O=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8),j=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8),(He=S[D]).high^=j,He.low^=O}for(var I=0;I<24;I++){for(var H=0;H<5;H++){for(var F=0,$=0,q=0;q<5;q++)F^=(He=S[H+5*q]).high,$^=He.low;var se=P[H];se.high=F,se.low=$}for(H=0;H<5;H++){var J=P[(H+4)%5],be=P[(H+1)%5],Re=be.high,Se=be.low;for(F=J.high^(Re<<1|Se>>>31),$=J.low^(Se<<1|Re>>>31),q=0;q<5;q++)(He=S[H+5*q]).high^=F,He.low^=$}for(var me=1;me<25;me++){var Ce=(He=S[me]).high,Be=He.low,_e=U[me];_e<32?(F=Ce<<_e|Be>>>32-_e,$=Be<<_e|Ce>>>32-_e):(F=Be<<_e-32|Ce>>>64-_e,$=Ce<<_e-32|Be>>>64-_e);var Ye=P[g[me]];Ye.high=F,Ye.low=$}var Qe=P[0],Ge=S[0];for(Qe.high=Ge.high,Qe.low=Ge.low,H=0;H<5;H++)for(q=0;q<5;q++){var He=S[me=H+5*q],Te=P[me],dt=P[(H+1)%5+5*q],yt=P[(H+2)%5+5*q];He.high=Te.high^~dt.high&yt.high,He.low=Te.low^~dt.low&yt.low}He=S[0];var on=A[I];He.high^=on.high,He.low^=on.low}},_doFinalize:function(){var N=this._data,R=N.words,S=(this._nDataBytes,8*N.sigBytes),p=32*this.blockSize;R[S>>>5]|=1<<24-S%32,R[(f.ceil((S+1)/p)*p>>>5)-1]|=128,N.sigBytes=4*R.length,this._process();for(var D=this._state,O=this.cfg.outputLength/8,j=O/8,I=[],H=0;H<j;H++){var F=D[H],$=F.high,q=F.low;$=16711935&($<<8|$>>>24)|4278255360&($<<24|$>>>8),q=16711935&(q<<8|q>>>24)|4278255360&(q<<24|q>>>8),I.push(q),I.push($)}return new _.init(I,O)},clone:function(){for(var N=m.clone.call(this),R=N._state=this._state.slice(0),S=0;S<25;S++)R[S]=R[S].clone();return N}});y.SHA3=m._createHelper(z),y.HmacSHA3=m._createHmacHelper(z)}(Math),x.SHA3)},6004:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Device=void 0,b.detectDevice=I;const x=u(2109),f=u(2994),y=u(3953),E=u(4893),_=u(1765),m=u(8046),k=u(5601),w=u(2183),U=u(11),g=u(5535),A=u(8155),P=u(7402),z=u(2292),N=u(1767),R=u(5765),S=u(9676),p=u(8633),D=u(4039),O=u(9352),j=new f.Logger("Device");function I(H){if(!H&&typeof navigator=="object"&&navigator.product==="ReactNative")return j.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void j.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?(j.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(j.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(H||typeof navigator=="object"&&typeof navigator.userAgent=="string"){H??=navigator.userAgent;const F=new x.UAParser(H);j.debug("detectDevice() | browser detected [userAgent:%s, parsed:%o]",H,F.getResult());const $=F.getBrowser(),q=$.name?.toLowerCase(),se=parseInt($.major??"0"),J=F.getEngine(),be=J.name?.toLowerCase(),Re=F.getOS(),Se=Re.name?.toLowerCase(),me=parseFloat(Re.version??"0"),Ce=F.getDevice(),Be=Ce.model?.toLowerCase(),_e=Se==="ios"||Be==="ipad",Ye=q&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(q),Qe=q&&["firefox","mobile firefox","mobile focus"].includes(q),Ge=q&&["safari","mobile safari"].includes(q),He=q&&["edge"].includes(q);if((Ye||He)&&!_e&&se>=111)return"Chrome111";if(Ye&&!_e&&se>=74||He&&!_e&&se>=88)return"Chrome74";if(Ye&&!_e&&se>=70)return"Chrome70";if(Ye&&!_e&&se>=67)return"Chrome67";if(Ye&&!_e&&se>=55)return"Chrome55";if(Qe&&!_e&&se>=120)return"Firefox120";if(Qe&&!_e&&se>=60)return"Firefox60";if(Qe&&_e&&me>=14.3||Ge&&se>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Ge&&se>=11)return"Safari11";if(He&&!_e&&se>=11&&se<=18)return"Edge11";if(be==="webkit"&&_e&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(be==="blink"){const Te=H.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(Te){const dt=Number(Te[1]);return dt>=111?"Chrome111":dt>=74?"Chrome74":dt>=70?"Chrome70":dt>=67?"Chrome67":"Chrome55"}return"Chrome111"}return void j.warn("detectDevice() | browser not supported [name:%s, version:%s]",q,se)}j.warn("detectDevice() | unknown device")}b.Device=class{_handlerFactory;_handlerName;_loaded=!1;_extendedRtpCapabilities;_recvRtpCapabilities;_canProduceByKind;_sctpCapabilities;_observer=new y.EnhancedEventEmitter;constructor({handlerName:H,handlerFactory:F}={}){if(j.debug("constructor()"),H&&F)throw new TypeError("just one of handlerName or handlerInterface can be given");if(F)this._handlerFactory=F;else{if(H)j.debug("constructor() | handler given: %s",H);else{if(!(H=I()))throw new E.UnsupportedError("device not supported");j.debug("constructor() | detected handler: %s",H)}switch(H){case"Chrome111":this._handlerFactory=w.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=U.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=g.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=A.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=P.Chrome55.createFactory();break;case"Firefox120":this._handlerFactory=z.Firefox120.createFactory();break;case"Firefox60":this._handlerFactory=N.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=R.Safari12.createFactory();break;case"Safari11":this._handlerFactory=S.Safari11.createFactory();break;case"Edge11":this._handlerFactory=p.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=D.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=O.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${H}"`)}}const $=this._handlerFactory();this._handlerName=$.name,$.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new E.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new E.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:H}){let F;j.debug("load() [routerRtpCapabilities:%o]",H);try{if(this._loaded)throw new E.InvalidStateError("already loaded");const $=_.clone(H);m.validateRtpCapabilities($),F=this._handlerFactory();const q=await F.getNativeRtpCapabilities();j.debug("load() | got native RTP capabilities:%o",q);const se=_.clone(q);m.validateRtpCapabilities(se),this._extendedRtpCapabilities=m.getExtendedRtpCapabilities(se,$),j.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=m.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=m.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=m.getRecvRtpCapabilities(this._extendedRtpCapabilities),m.validateRtpCapabilities(this._recvRtpCapabilities),j.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await F.getNativeSctpCapabilities(),j.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),m.validateSctpCapabilities(this._sctpCapabilities),j.debug("load() succeeded"),this._loaded=!0,F.close()}catch($){throw F&&F.close(),$}}canProduce(H){if(!this._loaded)throw new E.InvalidStateError("not loaded");if(H!=="audio"&&H!=="video")throw new TypeError(`invalid kind "${H}"`);return this._canProduceByKind[H]}createSendTransport({id:H,iceParameters:F,iceCandidates:$,dtlsParameters:q,sctpParameters:se,iceServers:J,iceTransportPolicy:be,additionalSettings:Re,proprietaryConstraints:Se,appData:me}){return j.debug("createSendTransport()"),this.createTransport({direction:"send",id:H,iceParameters:F,iceCandidates:$,dtlsParameters:q,sctpParameters:se,iceServers:J,iceTransportPolicy:be,additionalSettings:Re,proprietaryConstraints:Se,appData:me})}createRecvTransport({id:H,iceParameters:F,iceCandidates:$,dtlsParameters:q,sctpParameters:se,iceServers:J,iceTransportPolicy:be,additionalSettings:Re,proprietaryConstraints:Se,appData:me}){return j.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:H,iceParameters:F,iceCandidates:$,dtlsParameters:q,sctpParameters:se,iceServers:J,iceTransportPolicy:be,additionalSettings:Re,proprietaryConstraints:Se,appData:me})}createTransport({direction:H,id:F,iceParameters:$,iceCandidates:q,dtlsParameters:se,sctpParameters:J,iceServers:be,iceTransportPolicy:Re,additionalSettings:Se,proprietaryConstraints:me,appData:Ce}){if(!this._loaded)throw new E.InvalidStateError("not loaded");if(typeof F!="string")throw new TypeError("missing id");if(typeof $!="object")throw new TypeError("missing iceParameters");if(!Array.isArray(q))throw new TypeError("missing iceCandidates");if(typeof se!="object")throw new TypeError("missing dtlsParameters");if(J&&typeof J!="object")throw new TypeError("wrong sctpParameters");if(Ce&&typeof Ce!="object")throw new TypeError("if given, appData must be an object");const Be=new k.Transport({direction:H,id:F,iceParameters:$,iceCandidates:q,dtlsParameters:se,sctpParameters:J,iceServers:be,iceTransportPolicy:Re,additionalSettings:Se,proprietaryConstraints:me,appData:Ce,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",Be),Be}}},6011:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.unsafeStringify=void 0;const x=u(9746),f=[];for(let E=0;E<256;++E)f.push((E+256).toString(16).slice(1));function y(E,_=0){return(f[E[_+0]]+f[E[_+1]]+f[E[_+2]]+f[E[_+3]]+"-"+f[E[_+4]]+f[E[_+5]]+"-"+f[E[_+6]]+f[E[_+7]]+"-"+f[E[_+8]]+f[E[_+9]]+"-"+f[E[_+10]]+f[E[_+11]]+f[E[_+12]]+f[E[_+13]]+f[E[_+14]]+f[E[_+15]]).toLowerCase()}b.unsafeStringify=y,b.default=function(E,_=0){const m=y(E,_);if(!(0,x.default)(m))throw TypeError("Stringified UUID is invalid");return m}},6298:function(T,b,u){var x;T.exports=(x=u(9021),u(754),u(4636),u(9506),u(7165),function(){var f=x,y=f.lib.StreamCipher,E=f.algo,_=[],m=[],k=[],w=E.Rabbit=y.extend({_doReset:function(){for(var g=this._key.words,A=this.cfg.iv,P=0;P<4;P++)g[P]=16711935&(g[P]<<8|g[P]>>>24)|4278255360&(g[P]<<24|g[P]>>>8);var z=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],N=this._C=[g[2]<<16|g[2]>>>16,4294901760&g[0]|65535&g[1],g[3]<<16|g[3]>>>16,4294901760&g[1]|65535&g[2],g[0]<<16|g[0]>>>16,4294901760&g[2]|65535&g[3],g[1]<<16|g[1]>>>16,4294901760&g[3]|65535&g[0]];for(this._b=0,P=0;P<4;P++)U.call(this);for(P=0;P<8;P++)N[P]^=z[P+4&7];if(A){var R=A.words,S=R[0],p=R[1],D=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),O=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),j=D>>>16|4294901760&O,I=O<<16|65535&D;for(N[0]^=D,N[1]^=j,N[2]^=O,N[3]^=I,N[4]^=D,N[5]^=j,N[6]^=O,N[7]^=I,P=0;P<4;P++)U.call(this)}},_doProcessBlock:function(g,A){var P=this._X;U.call(this),_[0]=P[0]^P[5]>>>16^P[3]<<16,_[1]=P[2]^P[7]>>>16^P[5]<<16,_[2]=P[4]^P[1]>>>16^P[7]<<16,_[3]=P[6]^P[3]>>>16^P[1]<<16;for(var z=0;z<4;z++)_[z]=16711935&(_[z]<<8|_[z]>>>24)|4278255360&(_[z]<<24|_[z]>>>8),g[A+z]^=_[z]},blockSize:4,ivSize:2});function U(){for(var g=this._X,A=this._C,P=0;P<8;P++)m[P]=A[P];for(A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<m[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<m[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<m[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<m[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<m[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<m[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<m[6]>>>0?1:0)|0,this._b=A[7]>>>0<m[7]>>>0?1:0,P=0;P<8;P++){var z=g[P]+A[P],N=65535&z,R=z>>>16,S=((N*N>>>17)+N*R>>>15)+R*R,p=((4294901760&z)*z|0)+((65535&z)*z|0);k[P]=S^p}g[0]=k[0]+(k[7]<<16|k[7]>>>16)+(k[6]<<16|k[6]>>>16)|0,g[1]=k[1]+(k[0]<<8|k[0]>>>24)+k[7]|0,g[2]=k[2]+(k[1]<<16|k[1]>>>16)+(k[0]<<16|k[0]>>>16)|0,g[3]=k[3]+(k[2]<<8|k[2]>>>24)+k[1]|0,g[4]=k[4]+(k[3]<<16|k[3]>>>16)+(k[2]<<16|k[2]>>>16)|0,g[5]=k[5]+(k[4]<<8|k[4]>>>24)+k[3]|0,g[6]=k[6]+(k[5]<<16|k[5]>>>16)+(k[4]<<16|k[4]>>>16)|0,g[7]=k[7]+(k[6]<<8|k[6]>>>24)+k[5]|0}f.Rabbit=y._createHelper(w)}(),x.Rabbit)},6308:function(T,b,u){var x,f,y,E,_,m;T.exports=(m=u(9021),u(3009),f=(x=m).lib.WordArray,y=x.algo,E=y.SHA256,_=y.SHA224=E.extend({_doReset:function(){this._hash=new f.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var k=E._doFinalize.call(this);return k.sigBytes-=4,k}}),x.SHA224=E._createHelper(_),x.HmacSHA224=E._createHmacHelper(_),m.SHA224)},6356:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0});const x=u(6011),f=u(1425),y=u(6568);b.default=function(E,_,m){E??={},m??=0;let k=(0,f.default)({...E,_v6:!0},new Uint8Array(16));if(k=(0,y.default)(k),_){for(let w=0;w<16;w++)_[m+w]=k[w];return _}return(0,x.unsafeStringify)(k)}},6372:function(T,b,u){var x;T.exports=(x=u(9021),u(7165),x.mode.CTRGladman=function(){var f=x.lib.BlockCipherMode.extend();function y(m){if(255&~(m>>24))m+=16777216;else{var k=m>>16&255,w=m>>8&255,U=255&m;k===255?(k=0,w===255?(w=0,U===255?U=0:++U):++w):++k,m=0,m+=k<<16,m+=w<<8,m+=U}return m}function E(m){return(m[0]=y(m[0]))===0&&(m[1]=y(m[1])),m}var _=f.Encryptor=f.extend({processBlock:function(m,k){var w=this._cipher,U=w.blockSize,g=this._iv,A=this._counter;g&&(A=this._counter=g.slice(0),this._iv=void 0),E(A);var P=A.slice(0);w.encryptBlock(P,0);for(var z=0;z<U;z++)m[k+z]^=P[z]}});return f.Decryptor=_,f}(),x.mode.CTRGladman)},6440:function(T,b,u){var x;T.exports=(x=u(9021),function(){if(typeof ArrayBuffer=="function"){var f=x.lib.WordArray,y=f.init,E=f.init=function(_){if(_ instanceof ArrayBuffer&&(_=new Uint8Array(_)),(_ instanceof Int8Array||typeof Uint8ClampedArray<"u"&&_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array||_ instanceof Float64Array)&&(_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength)),_ instanceof Uint8Array){for(var m=_.byteLength,k=[],w=0;w<m;w++)k[w>>>2]|=_[w]<<24-w%4*8;y.call(this,k,m)}else y.apply(this,arguments)};E.prototype=f}}(),x.lib.WordArray)},6568:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0});const x=u(1797),f=u(6011);b.default=function(y){const E=function(_){return Uint8Array.of((15&_[6])<<4|_[7]>>4&15,(15&_[7])<<4|(240&_[4])>>4,(15&_[4])<<4|(240&_[5])>>4,(15&_[5])<<4|(240&_[0])>>4,(15&_[0])<<4|(240&_[1])>>4,(15&_[1])<<4|(240&_[2])>>4,96|15&_[2],_[3],_[8],_[9],_[10],_[11],_[12],_[13],_[14],_[15])}(typeof y=="string"?(0,x.default)(y):y);return typeof y=="string"?(0,f.unsafeStringify)(E):E}},6585:T=>{var b=1e3,u=60*b,x=60*u,f=24*x,y=7*f,E=365.25*f;function _(m,k,w,U){var g=k>=1.5*w;return Math.round(m/w)+" "+U+(g?"s":"")}T.exports=function(m,k){k=k||{};var w=typeof m;if(w==="string"&&m.length>0)return function(U){if(!((U=String(U)).length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(U);if(g){var A=parseFloat(g[1]);switch((g[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return A*E;case"weeks":case"week":case"w":return A*y;case"days":case"day":case"d":return A*f;case"hours":case"hour":case"hrs":case"hr":case"h":return A*x;case"minutes":case"minute":case"mins":case"min":case"m":return A*u;case"seconds":case"second":case"secs":case"sec":case"s":return A*b;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return A;default:return}}}}(m);if(w==="number"&&isFinite(m))return k.long?function(U){var g=Math.abs(U);return g>=f?_(U,g,f,"day"):g>=x?_(U,g,x,"hour"):g>=u?_(U,g,u,"minute"):g>=b?_(U,g,b,"second"):U+" ms"}(m):function(U){var g=Math.abs(U);return g>=f?Math.round(U/f)+"d":g>=x?Math.round(U/x)+"h":g>=u?Math.round(U/u)+"m":g>=b?Math.round(U/b)+"s":U+"ms"}(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))}},6697:(T,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},6746:(T,b,u)=>{u.d(b,{KS:()=>f,fo:()=>x});var x=Object.freeze({SetKey:"setKey",RatchetRequest:"ratchetRequest",KeyRatcheted:"keyRatcheted"}),f=Object.freeze({ParticipantEncryptionStatusChanged:"participantEncryptionStatusChanged",EncryptionError:"encryptionError",E2EEStateChange:"e2eeStateChange"})},6880:function(T){T.exports=function(b){var u={};function x(f){if(u[f])return u[f].exports;var y=u[f]={i:f,l:!1,exports:{}};return b[f].call(y.exports,y,y.exports,x),y.l=!0,y.exports}return x.m=b,x.c=u,x.d=function(f,y,E){x.o(f,y)||Object.defineProperty(f,y,{enumerable:!0,get:E})},x.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},x.t=function(f,y){if(1&y&&(f=x(f)),8&y||4&y&&typeof f=="object"&&f&&f.__esModule)return f;var E=Object.create(null);if(x.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:f}),2&y&&typeof f!="string")for(var _ in f)x.d(E,_,(function(m){return f[m]}).bind(null,_));return E},x.n=function(f){var y=f&&f.__esModule?function(){return f.default}:function(){return f};return x.d(y,"a",y),y},x.o=function(f,y){return Object.prototype.hasOwnProperty.call(f,y)},x.p="",x(x.s=90)}({17:function(b,u,x){u.__esModule=!0,u.default=void 0;var f=x(18),y=function(){function E(){}return E.getFirstMatch=function(_,m){var k=m.match(_);return k&&k.length>0&&k[1]||""},E.getSecondMatch=function(_,m){var k=m.match(_);return k&&k.length>1&&k[2]||""},E.matchAndReturnConst=function(_,m,k){if(_.test(m))return k},E.getWindowsVersionName=function(_){switch(_){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},E.getMacOSVersionName=function(_){var m=_.split(".").splice(0,2).map(function(k){return parseInt(k,10)||0});if(m.push(0),m[0]===10)switch(m[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},E.getAndroidVersionName=function(_){var m=_.split(".").splice(0,2).map(function(k){return parseInt(k,10)||0});if(m.push(0),!(m[0]===1&&m[1]<5))return m[0]===1&&m[1]<6?"Cupcake":m[0]===1&&m[1]>=6?"Donut":m[0]===2&&m[1]<2?"Eclair":m[0]===2&&m[1]===2?"Froyo":m[0]===2&&m[1]>2?"Gingerbread":m[0]===3?"Honeycomb":m[0]===4&&m[1]<1?"Ice Cream Sandwich":m[0]===4&&m[1]<4?"Jelly Bean":m[0]===4&&m[1]>=4?"KitKat":m[0]===5?"Lollipop":m[0]===6?"Marshmallow":m[0]===7?"Nougat":m[0]===8?"Oreo":m[0]===9?"Pie":void 0},E.getVersionPrecision=function(_){return _.split(".").length},E.compareVersions=function(_,m,k){k===void 0&&(k=!1);var w=E.getVersionPrecision(_),U=E.getVersionPrecision(m),g=Math.max(w,U),A=0,P=E.map([_,m],function(z){var N=g-E.getVersionPrecision(z),R=z+new Array(N+1).join(".0");return E.map(R.split("."),function(S){return new Array(20-S.length).join("0")+S}).reverse()});for(k&&(A=g-Math.min(w,U)),g-=1;g>=A;){if(P[0][g]>P[1][g])return 1;if(P[0][g]===P[1][g]){if(g===A)return 0;g-=1}else if(P[0][g]<P[1][g])return-1}},E.map=function(_,m){var k,w=[];if(Array.prototype.map)return Array.prototype.map.call(_,m);for(k=0;k<_.length;k+=1)w.push(m(_[k]));return w},E.find=function(_,m){var k,w;if(Array.prototype.find)return Array.prototype.find.call(_,m);for(k=0,w=_.length;k<w;k+=1){var U=_[k];if(m(U,k))return U}},E.assign=function(_){for(var m,k,w=_,U=arguments.length,g=new Array(U>1?U-1:0),A=1;A<U;A++)g[A-1]=arguments[A];if(Object.assign)return Object.assign.apply(Object,[_].concat(g));var P=function(){var z=g[m];typeof z=="object"&&z!==null&&Object.keys(z).forEach(function(N){w[N]=z[N]})};for(m=0,k=g.length;m<k;m+=1)P();return _},E.getBrowserAlias=function(_){return f.BROWSER_ALIASES_MAP[_]},E.getBrowserTypeByAlias=function(_){return f.BROWSER_MAP[_]||""},E}();u.default=y,b.exports=u.default},18:function(b,u,x){u.__esModule=!0,u.ENGINE_MAP=u.OS_MAP=u.PLATFORMS_MAP=u.BROWSER_MAP=u.BROWSER_ALIASES_MAP=void 0,u.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},u.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},u.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},u.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},u.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(b,u,x){u.__esModule=!0,u.default=void 0;var f,y=(f=x(91))&&f.__esModule?f:{default:f},E=x(18);function _(k,w){for(var U=0;U<w.length;U++){var g=w[U];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(k,g.key,g)}}var m=function(){function k(){}var w,U,g;return k.getParser=function(A,P){if(P===void 0&&(P=!1),typeof A!="string")throw new Error("UserAgent should be a string");return new y.default(A,P)},k.parse=function(A){return new y.default(A).getResult()},w=k,g=[{key:"BROWSER_MAP",get:function(){return E.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return E.ENGINE_MAP}},{key:"OS_MAP",get:function(){return E.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return E.PLATFORMS_MAP}}],(U=null)&&_(w.prototype,U),g&&_(w,g),k}();u.default=m,b.exports=u.default},91:function(b,u,x){u.__esModule=!0,u.default=void 0;var f=k(x(92)),y=k(x(93)),E=k(x(94)),_=k(x(95)),m=k(x(17));function k(U){return U&&U.__esModule?U:{default:U}}var w=function(){function U(A,P){if(P===void 0&&(P=!1),A==null||A==="")throw new Error("UserAgent parameter can't be empty");this._ua=A,this.parsedResult={},P!==!0&&this.parse()}var g=U.prototype;return g.getUA=function(){return this._ua},g.test=function(A){return A.test(this._ua)},g.parseBrowser=function(){var A=this;this.parsedResult.browser={};var P=m.default.find(f.default,function(z){if(typeof z.test=="function")return z.test(A);if(z.test instanceof Array)return z.test.some(function(N){return A.test(N)});throw new Error("Browser's test function is not valid")});return P&&(this.parsedResult.browser=P.describe(this.getUA())),this.parsedResult.browser},g.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},g.getBrowserName=function(A){return A?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},g.getBrowserVersion=function(){return this.getBrowser().version},g.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},g.parseOS=function(){var A=this;this.parsedResult.os={};var P=m.default.find(y.default,function(z){if(typeof z.test=="function")return z.test(A);if(z.test instanceof Array)return z.test.some(function(N){return A.test(N)});throw new Error("Browser's test function is not valid")});return P&&(this.parsedResult.os=P.describe(this.getUA())),this.parsedResult.os},g.getOSName=function(A){var P=this.getOS().name;return A?String(P).toLowerCase()||"":P||""},g.getOSVersion=function(){return this.getOS().version},g.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},g.getPlatformType=function(A){A===void 0&&(A=!1);var P=this.getPlatform().type;return A?String(P).toLowerCase()||"":P||""},g.parsePlatform=function(){var A=this;this.parsedResult.platform={};var P=m.default.find(E.default,function(z){if(typeof z.test=="function")return z.test(A);if(z.test instanceof Array)return z.test.some(function(N){return A.test(N)});throw new Error("Browser's test function is not valid")});return P&&(this.parsedResult.platform=P.describe(this.getUA())),this.parsedResult.platform},g.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},g.getEngineName=function(A){return A?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},g.parseEngine=function(){var A=this;this.parsedResult.engine={};var P=m.default.find(_.default,function(z){if(typeof z.test=="function")return z.test(A);if(z.test instanceof Array)return z.test.some(function(N){return A.test(N)});throw new Error("Browser's test function is not valid")});return P&&(this.parsedResult.engine=P.describe(this.getUA())),this.parsedResult.engine},g.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},g.getResult=function(){return m.default.assign({},this.parsedResult)},g.satisfies=function(A){var P=this,z={},N=0,R={},S=0;if(Object.keys(A).forEach(function($){var q=A[$];typeof q=="string"?(R[$]=q,S+=1):typeof q=="object"&&(z[$]=q,N+=1)}),N>0){var p=Object.keys(z),D=m.default.find(p,function($){return P.isOS($)});if(D){var O=this.satisfies(z[D]);if(O!==void 0)return O}var j=m.default.find(p,function($){return P.isPlatform($)});if(j){var I=this.satisfies(z[j]);if(I!==void 0)return I}}if(S>0){var H=Object.keys(R),F=m.default.find(H,function($){return P.isBrowser($,!0)});if(F!==void 0)return this.compareVersion(R[F])}},g.isBrowser=function(A,P){P===void 0&&(P=!1);var z=this.getBrowserName().toLowerCase(),N=A.toLowerCase(),R=m.default.getBrowserTypeByAlias(N);return P&&R&&(N=R.toLowerCase()),N===z},g.compareVersion=function(A){var P=[0],z=A,N=!1,R=this.getBrowserVersion();if(typeof R=="string")return A[0]===">"||A[0]==="<"?(z=A.substr(1),A[1]==="="?(N=!0,z=A.substr(2)):P=[],A[0]===">"?P.push(1):P.push(-1)):A[0]==="="?z=A.substr(1):A[0]==="~"&&(N=!0,z=A.substr(1)),P.indexOf(m.default.compareVersions(R,z,N))>-1},g.isOS=function(A){return this.getOSName(!0)===String(A).toLowerCase()},g.isPlatform=function(A){return this.getPlatformType(!0)===String(A).toLowerCase()},g.isEngine=function(A){return this.getEngineName(!0)===String(A).toLowerCase()},g.is=function(A,P){return P===void 0&&(P=!1),this.isBrowser(A,P)||this.isOS(A)||this.isPlatform(A)},g.some=function(A){var P=this;return A===void 0&&(A=[]),A.some(function(z){return P.is(z)})},U}();u.default=w,b.exports=u.default},92:function(b,u,x){u.__esModule=!0,u.default=void 0;var f,y=(f=x(17))&&f.__esModule?f:{default:f},E=/version\/(\d+(\.?_?\d+)+)/i,_=[{test:[/googlebot/i],describe:function(m){var k={name:"Googlebot"},w=y.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/opera/i],describe:function(m){var k={name:"Opera"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/opr\/|opios/i],describe:function(m){var k={name:"Opera"},w=y.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/SamsungBrowser/i],describe:function(m){var k={name:"Samsung Internet for Android"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/Whale/i],describe:function(m){var k={name:"NAVER Whale Browser"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/MZBrowser/i],describe:function(m){var k={name:"MZ Browser"},w=y.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/focus/i],describe:function(m){var k={name:"Focus"},w=y.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/swing/i],describe:function(m){var k={name:"Swing"},w=y.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/coast/i],describe:function(m){var k={name:"Opera Coast"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(m){var k={name:"Opera Touch"},w=y.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/yabrowser/i],describe:function(m){var k={name:"Yandex Browser"},w=y.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/ucbrowser/i],describe:function(m){var k={name:"UC Browser"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/Maxthon|mxios/i],describe:function(m){var k={name:"Maxthon"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/epiphany/i],describe:function(m){var k={name:"Epiphany"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/puffin/i],describe:function(m){var k={name:"Puffin"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/sleipnir/i],describe:function(m){var k={name:"Sleipnir"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/k-meleon/i],describe:function(m){var k={name:"K-Meleon"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/micromessenger/i],describe:function(m){var k={name:"WeChat"},w=y.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/qqbrowser/i],describe:function(m){var k={name:/qqbrowserlite/i.test(m)?"QQ Browser Lite":"QQ Browser"},w=y.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/msie|trident/i],describe:function(m){var k={name:"Internet Explorer"},w=y.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/\sedg\//i],describe:function(m){var k={name:"Microsoft Edge"},w=y.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/edg([ea]|ios)/i],describe:function(m){var k={name:"Microsoft Edge"},w=y.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/vivaldi/i],describe:function(m){var k={name:"Vivaldi"},w=y.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/seamonkey/i],describe:function(m){var k={name:"SeaMonkey"},w=y.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/sailfish/i],describe:function(m){var k={name:"Sailfish"},w=y.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,m);return w&&(k.version=w),k}},{test:[/silk/i],describe:function(m){var k={name:"Amazon Silk"},w=y.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/phantom/i],describe:function(m){var k={name:"PhantomJS"},w=y.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/slimerjs/i],describe:function(m){var k={name:"SlimerJS"},w=y.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(m){var k={name:"BlackBerry"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/(web|hpw)[o0]s/i],describe:function(m){var k={name:"WebOS Browser"},w=y.default.getFirstMatch(E,m)||y.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/bada/i],describe:function(m){var k={name:"Bada"},w=y.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/tizen/i],describe:function(m){var k={name:"Tizen"},w=y.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/qupzilla/i],describe:function(m){var k={name:"QupZilla"},w=y.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/firefox|iceweasel|fxios/i],describe:function(m){var k={name:"Firefox"},w=y.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/electron/i],describe:function(m){var k={name:"Electron"},w=y.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/MiuiBrowser/i],describe:function(m){var k={name:"Miui"},w=y.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/chromium/i],describe:function(m){var k={name:"Chromium"},w=y.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,m)||y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/chrome|crios|crmo/i],describe:function(m){var k={name:"Chrome"},w=y.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/GSA/i],describe:function(m){var k={name:"Google Search"},w=y.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:function(m){var k=!m.test(/like android/i),w=m.test(/android/i);return k&&w},describe:function(m){var k={name:"Android Browser"},w=y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/playstation 4/i],describe:function(m){var k={name:"PlayStation 4"},w=y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/safari|applewebkit/i],describe:function(m){var k={name:"Safari"},w=y.default.getFirstMatch(E,m);return w&&(k.version=w),k}},{test:[/.*/i],describe:function(m){var k=m.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:y.default.getFirstMatch(k,m),version:y.default.getSecondMatch(k,m)}}}];u.default=_,b.exports=u.default},93:function(b,u,x){u.__esModule=!0,u.default=void 0;var f,y=(f=x(17))&&f.__esModule?f:{default:f},E=x(18),_=[{test:[/Roku\/DVP/],describe:function(m){var k=y.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,m);return{name:E.OS_MAP.Roku,version:k}}},{test:[/windows phone/i],describe:function(m){var k=y.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,m);return{name:E.OS_MAP.WindowsPhone,version:k}}},{test:[/windows /i],describe:function(m){var k=y.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,m),w=y.default.getWindowsVersionName(k);return{name:E.OS_MAP.Windows,version:k,versionName:w}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(m){var k={name:E.OS_MAP.iOS},w=y.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,m);return w&&(k.version=w),k}},{test:[/macintosh/i],describe:function(m){var k=y.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,m).replace(/[_\s]/g,"."),w=y.default.getMacOSVersionName(k),U={name:E.OS_MAP.MacOS,version:k};return w&&(U.versionName=w),U}},{test:[/(ipod|iphone|ipad)/i],describe:function(m){var k=y.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,m).replace(/[_\s]/g,".");return{name:E.OS_MAP.iOS,version:k}}},{test:function(m){var k=!m.test(/like android/i),w=m.test(/android/i);return k&&w},describe:function(m){var k=y.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,m),w=y.default.getAndroidVersionName(k),U={name:E.OS_MAP.Android,version:k};return w&&(U.versionName=w),U}},{test:[/(web|hpw)[o0]s/i],describe:function(m){var k=y.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,m),w={name:E.OS_MAP.WebOS};return k&&k.length&&(w.version=k),w}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(m){var k=y.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,m)||y.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,m)||y.default.getFirstMatch(/\bbb(\d+)/i,m);return{name:E.OS_MAP.BlackBerry,version:k}}},{test:[/bada/i],describe:function(m){var k=y.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,m);return{name:E.OS_MAP.Bada,version:k}}},{test:[/tizen/i],describe:function(m){var k=y.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,m);return{name:E.OS_MAP.Tizen,version:k}}},{test:[/linux/i],describe:function(){return{name:E.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:E.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(m){var k=y.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,m);return{name:E.OS_MAP.PlayStation4,version:k}}}];u.default=_,b.exports=u.default},94:function(b,u,x){u.__esModule=!0,u.default=void 0;var f,y=(f=x(17))&&f.__esModule?f:{default:f},E=x(18),_=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(m){var k=y.default.getFirstMatch(/(can-l01)/i,m)&&"Nova",w={type:E.PLATFORMS_MAP.mobile,vendor:"Huawei"};return k&&(w.model=k),w}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet}}},{test:function(m){var k=m.test(/ipod|iphone/i),w=m.test(/like (ipod|iphone)/i);return k&&!w},describe:function(m){var k=y.default.getFirstMatch(/(ipod|iphone)/i,m);return{type:E.PLATFORMS_MAP.mobile,vendor:"Apple",model:k}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(m){return m.getBrowserName(!0)==="blackberry"},describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(m){return m.getBrowserName(!0)==="bada"},describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(m){return m.getBrowserName()==="windows phone"},describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(m){var k=Number(String(m.getOSVersion()).split(".")[0]);return m.getOSName(!0)==="android"&&k>=3},describe:function(){return{type:E.PLATFORMS_MAP.tablet}}},{test:function(m){return m.getOSName(!0)==="android"},describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(m){return m.getOSName(!0)==="macos"},describe:function(){return{type:E.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(m){return m.getOSName(!0)==="windows"},describe:function(){return{type:E.PLATFORMS_MAP.desktop}}},{test:function(m){return m.getOSName(!0)==="linux"},describe:function(){return{type:E.PLATFORMS_MAP.desktop}}},{test:function(m){return m.getOSName(!0)==="playstation 4"},describe:function(){return{type:E.PLATFORMS_MAP.tv}}},{test:function(m){return m.getOSName(!0)==="roku"},describe:function(){return{type:E.PLATFORMS_MAP.tv}}}];u.default=_,b.exports=u.default},95:function(b,u,x){u.__esModule=!0,u.default=void 0;var f,y=(f=x(17))&&f.__esModule?f:{default:f},E=x(18),_=[{test:function(m){return m.getBrowserName(!0)==="microsoft edge"},describe:function(m){if(/\sedg\//i.test(m))return{name:E.ENGINE_MAP.Blink};var k=y.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,m);return{name:E.ENGINE_MAP.EdgeHTML,version:k}}},{test:[/trident/i],describe:function(m){var k={name:E.ENGINE_MAP.Trident},w=y.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:function(m){return m.test(/presto/i)},describe:function(m){var k={name:E.ENGINE_MAP.Presto},w=y.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:function(m){var k=m.test(/gecko/i),w=m.test(/like gecko/i);return k&&!w},describe:function(m){var k={name:E.ENGINE_MAP.Gecko},w=y.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:E.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(m){var k={name:E.ENGINE_MAP.WebKit},w=y.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,m);return w&&(k.version=w),k}}];u.default=_,b.exports=u.default}})},6939:function(T,b,u){var x,f,y;T.exports=(y=u(9021),u(7165),y.mode.CTR=(x=y.lib.BlockCipherMode.extend(),f=x.Encryptor=x.extend({processBlock:function(E,_){var m=this._cipher,k=m.blockSize,w=this._iv,U=this._counter;w&&(U=this._counter=w.slice(0),this._iv=void 0);var g=U.slice(0);m.encryptBlock(g,0),U[k-1]=U[k-1]+1|0;for(var A=0;A<k;A++)E[_+A]^=g[A]}}),x.Decryptor=f,x),y.mode.CTR)},6993:(T,b,u)=>{var x=u(5546);function f(){var y,E,_=typeof Symbol=="function"?Symbol:{},m=_.iterator||"@@iterator",k=_.toStringTag||"@@toStringTag";function w(S,p,D,O){var j=p&&p.prototype instanceof g?p:g,I=Object.create(j.prototype);return x(I,"_invoke",function(H,F,$){var q,se,J,be=0,Re=$||[],Se=!1,me={p:0,n:0,v:y,a:Ce,f:Ce.bind(y,4),d:function(Be,_e){return q=Be,se=0,J=y,me.n=_e,U}};function Ce(Be,_e){for(se=Be,J=_e,E=0;!Se&&be&&!Ye&&E<Re.length;E++){var Ye,Qe=Re[E],Ge=me.p,He=Qe[2];Be>3?(Ye=He===_e)&&(J=Qe[(se=Qe[4])?5:(se=3,3)],Qe[4]=Qe[5]=y):Qe[0]<=Ge&&((Ye=Be<2&&Ge<Qe[1])?(se=0,me.v=_e,me.n=Qe[1]):Ge<He&&(Ye=Be<3||Qe[0]>_e||_e>He)&&(Qe[4]=Be,Qe[5]=_e,me.n=He,se=0))}if(Ye||Be>1)return U;throw Se=!0,_e}return function(Be,_e,Ye){if(be>1)throw TypeError("Generator is already running");for(Se&&_e===1&&Ce(_e,Ye),se=_e,J=Ye;(E=se<2?y:J)||!Se;){q||(se?se<3?(se>1&&(me.n=-1),Ce(se,J)):me.n=J:me.v=J);try{if(be=2,q){if(se||(Be="next"),E=q[Be]){if(!(E=E.call(q,J)))throw TypeError("iterator result is not an object");if(!E.done)return E;J=E.value,se<2&&(se=0)}else se===1&&(E=q.return)&&E.call(q),se<2&&(J=TypeError("The iterator does not provide a '"+Be+"' method"),se=1);q=y}else if((E=(Se=me.n<0)?J:H.call(F,me))!==U)break}catch(Qe){q=y,se=1,J=Qe}finally{be=1}}return{value:E,done:Se}}}(S,D,O),!0),I}var U={};function g(){}function A(){}function P(){}E=Object.getPrototypeOf;var z=[][m]?E(E([][m]())):(x(E={},m,function(){return this}),E),N=P.prototype=g.prototype=Object.create(z);function R(S){return Object.setPrototypeOf?Object.setPrototypeOf(S,P):(S.__proto__=P,x(S,k,"GeneratorFunction")),S.prototype=Object.create(N),S}return A.prototype=P,x(N,"constructor",P),x(P,"constructor",A),A.displayName="GeneratorFunction",x(P,k,"GeneratorFunction"),x(N),x(N,k,"Generator"),x(N,m,function(){return this}),x(N,"toString",function(){return"[object Generator]"}),(T.exports=f=function(){return{w,m:R}},T.exports.__esModule=!0,T.exports.default=T.exports)()}T.exports=f,T.exports.__esModule=!0,T.exports.default=T.exports},7007:T=>{var b,u=typeof Reflect=="object"?Reflect:null,x=u&&typeof u.apply=="function"?u.apply:function(N,R,S){return Function.prototype.apply.call(N,R,S)};b=u&&typeof u.ownKeys=="function"?u.ownKeys:Object.getOwnPropertySymbols?function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:function(N){return Object.getOwnPropertyNames(N)};var f=Number.isNaN||function(N){return N!=N};function y(){y.init.call(this)}T.exports=y,T.exports.once=function(N,R){return new Promise(function(S,p){function D(j){N.removeListener(R,O),p(j)}function O(){typeof N.removeListener=="function"&&N.removeListener("error",D),S([].slice.call(arguments))}z(N,R,O,{once:!0}),R!=="error"&&function(j,I,H){typeof j.on=="function"&&z(j,"error",I,H)}(N,D,{once:!0})})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var E=10;function _(N){if(typeof N!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N)}function m(N){return N._maxListeners===void 0?y.defaultMaxListeners:N._maxListeners}function k(N,R,S,p){var D,O,j,I;if(_(S),(O=N._events)===void 0?(O=N._events=Object.create(null),N._eventsCount=0):(O.newListener!==void 0&&(N.emit("newListener",R,S.listener?S.listener:S),O=N._events),j=O[R]),j===void 0)j=O[R]=S,++N._eventsCount;else if(typeof j=="function"?j=O[R]=p?[S,j]:[j,S]:p?j.unshift(S):j.push(S),(D=m(N))>0&&j.length>D&&!j.warned){j.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=N,H.type=R,H.count=j.length,I=H,console&&console.warn&&console.warn(I)}return N}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function U(N,R,S){var p={fired:!1,wrapFn:void 0,target:N,type:R,listener:S},D=w.bind(p);return D.listener=S,p.wrapFn=D,D}function g(N,R,S){var p=N._events;if(p===void 0)return[];var D=p[R];return D===void 0?[]:typeof D=="function"?S?[D.listener||D]:[D]:S?function(O){for(var j=new Array(O.length),I=0;I<j.length;++I)j[I]=O[I].listener||O[I];return j}(D):P(D,D.length)}function A(N){var R=this._events;if(R!==void 0){var S=R[N];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}function P(N,R){for(var S=new Array(R),p=0;p<R;++p)S[p]=N[p];return S}function z(N,R,S,p){if(typeof N.on=="function")p.once?N.once(R,S):N.on(R,S);else{if(typeof N.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof N);N.addEventListener(R,function D(O){p.once&&N.removeEventListener(R,D),S(O)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(N){if(typeof N!="number"||N<0||f(N))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+N+".");E=N}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||f(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this},y.prototype.getMaxListeners=function(){return m(this)},y.prototype.emit=function(N){for(var R=[],S=1;S<arguments.length;S++)R.push(arguments[S]);var p=N==="error",D=this._events;if(D!==void 0)p=p&&D.error===void 0;else if(!p)return!1;if(p){var O;if(R.length>0&&(O=R[0]),O instanceof Error)throw O;var j=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw j.context=O,j}var I=D[N];if(I===void 0)return!1;if(typeof I=="function")x(I,this,R);else{var H=I.length,F=P(I,H);for(S=0;S<H;++S)x(F[S],this,R)}return!0},y.prototype.addListener=function(N,R){return k(this,N,R,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(N,R){return k(this,N,R,!0)},y.prototype.once=function(N,R){return _(R),this.on(N,U(this,N,R)),this},y.prototype.prependOnceListener=function(N,R){return _(R),this.prependListener(N,U(this,N,R)),this},y.prototype.removeListener=function(N,R){var S,p,D,O,j;if(_(R),(p=this._events)===void 0)return this;if((S=p[N])===void 0)return this;if(S===R||S.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete p[N],p.removeListener&&this.emit("removeListener",N,S.listener||R));else if(typeof S!="function"){for(D=-1,O=S.length-1;O>=0;O--)if(S[O]===R||S[O].listener===R){j=S[O].listener,D=O;break}if(D<0)return this;D===0?S.shift():function(I,H){for(;H+1<I.length;H++)I[H]=I[H+1];I.pop()}(S,D),S.length===1&&(p[N]=S[0]),p.removeListener!==void 0&&this.emit("removeListener",N,j||R)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(N){var R,S,p;if((S=this._events)===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[N]),this;if(arguments.length===0){var D,O=Object.keys(S);for(p=0;p<O.length;++p)(D=O[p])!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(R=S[N])=="function")this.removeListener(N,R);else if(R!==void 0)for(p=R.length-1;p>=0;p--)this.removeListener(N,R[p]);return this},y.prototype.listeners=function(N){return g(this,N,!0)},y.prototype.rawListeners=function(N){return g(this,N,!1)},y.listenerCount=function(N,R){return typeof N.listenerCount=="function"?N.listenerCount(R):A.call(N,R)},y.prototype.listenerCount=A,y.prototype.eventNames=function(){return this._eventsCount>0?b(this._events):[]}},7080:(T,b,u)=>{u.d(b,{q:()=>f,s:()=>x});var x={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},f={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}},7165:function(T,b,u){var x;T.exports=(x=u(9021),u(9506),void(x.lib.Cipher||function(f){var y=x,E=y.lib,_=E.Base,m=E.WordArray,k=E.BufferedBlockAlgorithm,w=y.enc,U=(w.Utf8,w.Base64),g=y.algo.EvpKDF,A=E.Cipher=k.extend({cfg:_.extend(),createEncryptor:function(I,H){return this.create(this._ENC_XFORM_MODE,I,H)},createDecryptor:function(I,H){return this.create(this._DEC_XFORM_MODE,I,H)},init:function(I,H,F){this.cfg=this.cfg.extend(F),this._xformMode=I,this._key=H,this.reset()},reset:function(){k.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){return I&&this._append(I),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function I(H){return typeof H=="string"?j:D}return function(H){return{encrypt:function(F,$,q){return I($).encrypt(H,F,$,q)},decrypt:function(F,$,q){return I($).decrypt(H,F,$,q)}}}}()}),P=(E.StreamCipher=A.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),y.mode={}),z=E.BlockCipherMode=_.extend({createEncryptor:function(I,H){return this.Encryptor.create(I,H)},createDecryptor:function(I,H){return this.Decryptor.create(I,H)},init:function(I,H){this._cipher=I,this._iv=H}}),N=P.CBC=function(){var I=z.extend();function H(F,$,q){var se,J=this._iv;J?(se=J,this._iv=f):se=this._prevBlock;for(var be=0;be<q;be++)F[$+be]^=se[be]}return I.Encryptor=I.extend({processBlock:function(F,$){var q=this._cipher,se=q.blockSize;H.call(this,F,$,se),q.encryptBlock(F,$),this._prevBlock=F.slice($,$+se)}}),I.Decryptor=I.extend({processBlock:function(F,$){var q=this._cipher,se=q.blockSize,J=F.slice($,$+se);q.decryptBlock(F,$),H.call(this,F,$,se),this._prevBlock=J}}),I}(),R=(y.pad={}).Pkcs7={pad:function(I,H){for(var F=4*H,$=F-I.sigBytes%F,q=$<<24|$<<16|$<<8|$,se=[],J=0;J<$;J+=4)se.push(q);var be=m.create(se,$);I.concat(be)},unpad:function(I){var H=255&I.words[I.sigBytes-1>>>2];I.sigBytes-=H}},S=(E.BlockCipher=A.extend({cfg:A.cfg.extend({mode:N,padding:R}),reset:function(){var I;A.reset.call(this);var H=this.cfg,F=H.iv,$=H.mode;this._xformMode==this._ENC_XFORM_MODE?I=$.createEncryptor:(I=$.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,F&&F.words):(this._mode=I.call($,this,F&&F.words),this._mode.__creator=I)},_doProcessBlock:function(I,H){this._mode.processBlock(I,H)},_doFinalize:function(){var I,H=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(H.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),H.unpad(I)),I},blockSize:4}),E.CipherParams=_.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}})),p=(y.format={}).OpenSSL={stringify:function(I){var H=I.ciphertext,F=I.salt;return(F?m.create([1398893684,1701076831]).concat(F).concat(H):H).toString(U)},parse:function(I){var H,F=U.parse(I),$=F.words;return $[0]==1398893684&&$[1]==1701076831&&(H=m.create($.slice(2,4)),$.splice(0,4),F.sigBytes-=16),S.create({ciphertext:F,salt:H})}},D=E.SerializableCipher=_.extend({cfg:_.extend({format:p}),encrypt:function(I,H,F,$){$=this.cfg.extend($);var q=I.createEncryptor(F,$),se=q.finalize(H),J=q.cfg;return S.create({ciphertext:se,key:F,iv:J.iv,algorithm:I,mode:J.mode,padding:J.padding,blockSize:I.blockSize,formatter:$.format})},decrypt:function(I,H,F,$){return $=this.cfg.extend($),H=this._parse(H,$.format),I.createDecryptor(F,$).finalize(H.ciphertext)},_parse:function(I,H){return typeof I=="string"?H.parse(I,this):I}}),O=(y.kdf={}).OpenSSL={execute:function(I,H,F,$,q){if($||($=m.random(8)),q)se=g.create({keySize:H+F,hasher:q}).compute(I,$);else var se=g.create({keySize:H+F}).compute(I,$);var J=m.create(se.words.slice(H),4*F);return se.sigBytes=4*H,S.create({key:se,iv:J,salt:$})}},j=E.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:O}),encrypt:function(I,H,F,$){var q=($=this.cfg.extend($)).kdf.execute(F,I.keySize,I.ivSize,$.salt,$.hasher);$.iv=q.iv;var se=D.encrypt.call(this,I,H,q.key,$);return se.mixIn(q),se},decrypt:function(I,H,F,$){$=this.cfg.extend($),H=this._parse(H,$.format);var q=$.kdf.execute(F,I.keySize,I.ivSize,H.salt,$.hasher);return $.iv=q.iv,D.decrypt.call(this,I,H,q.key,$)}})}()))},7193:function(T,b,u){var x;T.exports=(x=u(9021),u(754),u(4636),u(9506),u(7165),function(){var f=x,y=f.lib.StreamCipher,E=f.algo,_=E.RC4=y.extend({_doReset:function(){for(var w=this._key,U=w.words,g=w.sigBytes,A=this._S=[],P=0;P<256;P++)A[P]=P;P=0;for(var z=0;P<256;P++){var N=P%g,R=U[N>>>2]>>>24-N%4*8&255;z=(z+A[P]+R)%256;var S=A[P];A[P]=A[z],A[z]=S}this._i=this._j=0},_doProcessBlock:function(w,U){w[U]^=m.call(this)},keySize:8,ivSize:0});function m(){for(var w=this._S,U=this._i,g=this._j,A=0,P=0;P<4;P++){g=(g+w[U=(U+1)%256])%256;var z=w[U];w[U]=w[g],w[g]=z,A|=w[(w[U]+w[g])%256]<<24-8*P}return this._i=U,this._j=g,A}f.RC4=y._createHelper(_);var k=E.RC4Drop=_.extend({cfg:_.cfg.extend({drop:192}),_doReset:function(){_._doReset.call(this);for(var w=this.cfg.drop;w>0;w--)m.call(this)}});f.RC4Drop=y._createHelper(k)}(),x.RC4)},7363:(T,b,u)=>{var x=u(5020),f=u(3804),y=u(5602);b.grammar=y,b.write=f,b.parse=x.parse,b.parseParams=x.parseParams,b.parseFmtpConfig=x.parseFmtpConfig,b.parsePayloads=x.parsePayloads,b.parseRemoteCandidates=x.parseRemoteCandidates,b.parseImageAttributes=x.parseImageAttributes,b.parseSimulcastStreamList=x.parseSimulcastStreamList},7402:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Chrome55=void 0;const x=u(7363),f=u(2994),y=u(4893),E=u(1765),_=u(8046),m=u(5544),k=u(4496),w=u(521),U=u(1305),g=new f.Logger("Chrome55"),A={OS:1024,MIS:1024};class P extends w.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdTrack=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new P}constructor(){super()}get name(){return"Chrome55"}close(){if(g.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");const N=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const R=await N.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{N.close()}catch{}const S=x.parse(R.sdp);return m.extractRtpCapabilities({sdpObject:S})}catch(R){try{N.close()}catch{}throw R}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:A}}run({direction:N,iceParameters:R,iceCandidates:S,dtlsParameters:p,sctpParameters:D,iceServers:O,iceTransportPolicy:j,additionalSettings:I,proprietaryConstraints:H,extendedRtpCapabilities:F}){g.debug("run()"),this._direction=N,this._remoteSdp=new U.RemoteSdp({iceParameters:R,iceCandidates:S,dtlsParameters:p,sctpParameters:D,planB:!0}),this._sendingRtpParametersByKind={audio:_.getSendingRtpParameters("audio",F),video:_.getSendingRtpParameters("video",F)},this._sendingRemoteRtpParametersByKind={audio:_.getSendingRemoteRtpParameters("audio",F),video:_.getSendingRemoteRtpParameters("video",F)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:j??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...I},H),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",$=>{this.emit("@icecandidateerror",$)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(N){g.debug("updateIceServers()");const R=this._pc.getConfiguration();R.iceServers=N,this._pc.setConfiguration(R)}async restartIce(N){if(g.debug("restartIce()"),this._remoteSdp.updateIceParameters(N),this._transportReady)if(this._direction==="send"){const R=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const S={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}else{const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const S=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}}async getTransportStats(){return this._pc.getStats()}async send({track:N,encodings:R,codecOptions:S,codec:p}){this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",N.kind,N.id),p&&g.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(N),this._pc.addStream(this._sendStream);let D,O=await this._pc.createOffer(),j=x.parse(O.sdp);j.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const I=E.clone(this._sendingRtpParametersByKind[N.kind]);I.codecs=_.reduceCodecs(I.codecs);const H=E.clone(this._sendingRemoteRtpParametersByKind[N.kind]);if(H.codecs=_.reduceCodecs(H.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),N.kind==="video"&&R&&R.length>1&&(g.debug("send() | enabling simulcast"),j=x.parse(O.sdp),D=j.media.find(q=>q.type==="video"),k.addLegacySimulcast({offerMediaObject:D,track:N,numStreams:R.length}),O={type:"offer",sdp:x.write(j)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),j=x.parse(this._pc.localDescription.sdp),D=j.media.find(q=>q.type===N.kind),I.rtcp.cname=m.getCname({offerMediaObject:D}),I.encodings=k.getRtpEncodings({offerMediaObject:D,track:N}),R)for(let q=0;q<I.encodings.length;++q)R[q]&&Object.assign(I.encodings[q],R[q]);if(I.encodings.length>1&&I.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const q of I.encodings)q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:D,offerRtpParameters:I,answerRtpParameters:H,codecOptions:S});const F={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F);const $=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set($,N),{localId:$,rtpParameters:I}}async stopSending(N){this.assertSendDirection(),g.debug("stopSending() [localId:%s]",N);const R=this._mapSendLocalIdTrack.get(N);if(!R)throw new Error("track not found");this._mapSendLocalIdTrack.delete(N),this._sendStream.removeTrack(R),this._pc.addStream(this._sendStream);const S=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",S);try{await this._pc.setLocalDescription(S)}catch(D){if(this._sendStream.getTracks().length===0)return void g.warn("stopSending() | ignoring expected error due no sending tracks: %s",D.toString());throw D}if(this._pc.signalingState==="stable")return;const p={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async pauseSending(N){}async resumeSending(N){}async replaceTrack(N,R){throw new y.UnsupportedError("not implemented")}async setMaxSpatialLayer(N,R){throw new y.UnsupportedError(" not implemented")}async setRtpEncodingParameters(N,R){throw new y.UnsupportedError("not supported")}async getSenderStats(N){throw new y.UnsupportedError("not implemented")}async sendDataChannel({ordered:N,maxPacketLifeTime:R,maxRetransmits:S,label:p,protocol:D}){this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:N,maxPacketLifeTime:R,maxRetransmitTime:R,maxRetransmits:S,protocol:D};g.debug("sendDataChannel() [options:%o]",O);const j=this._pc.createDataChannel(p,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%A.MIS,!this._hasDataChannelMediaSection){const I=await this._pc.createOffer(),H=x.parse(I.sdp),F=H.media.find(q=>q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I),this._remoteSdp.sendSctpAssociation({offerMediaObject:F});const $={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:j,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(N){this.assertRecvDirection();const R=[];for(const O of N){const{trackId:j,kind:I,rtpParameters:H,streamId:F}=O;g.debug("receive() [trackId:%s, kind:%s]",j,I);const $=I;this._remoteSdp.receive({mid:$,kind:I,offerRtpParameters:H,streamId:F??H.rtcp.cname,trackId:j})}const S={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);let p=await this._pc.createAnswer();const D=x.parse(p.sdp);for(const O of N){const{kind:j,rtpParameters:I}=O,H=j,F=D.media.find($=>String($.mid)===H);m.applyCodecParameters({offerRtpParameters:I,answerMediaObject:F})}p={type:"answer",sdp:x.write(D)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const O of N){const{kind:j,trackId:I,rtpParameters:H}=O,F=j,$=I,q=O.streamId??H.rtcp.cname,se=this._pc.getRemoteStreams().find(J=>J.id===q).getTrackById($);if(!se)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set($,{mid:F,rtpParameters:H}),R.push({localId:$,track:se})}return R}async stopReceiving(N){this.assertRecvDirection();for(const p of N){g.debug("stopReceiving() [localId:%s]",p);const{mid:D,rtpParameters:O}=this._mapRecvLocalIdInfo.get(p)??{};this._mapRecvLocalIdInfo.delete(p),this._remoteSdp.planBStopReceiving({mid:D,offerRtpParameters:O})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const S=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}async pauseReceiving(N){}async resumeReceiving(N){}async getReceiverStats(N){throw new y.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:N,label:R,protocol:S}){this.assertRecvDirection();const{streamId:p,ordered:D,maxPacketLifeTime:O,maxRetransmits:j}=N,I={negotiated:!0,id:p,ordered:D,maxPacketLifeTime:O,maxRetransmitTime:O,maxRetransmits:j,protocol:S};g.debug("receiveDataChannel() [options:%o]",I);const H=this._pc.createDataChannel(R,I);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const F={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",F),await this._pc.setRemoteDescription(F);const $=await this._pc.createAnswer();if(!this._transportReady){const q=x.parse($.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:q})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setLocalDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:H}}async setupTransport({localDtlsRole:N,localSdpObject:R}){R||(R=x.parse(this._pc.localDescription.sdp));const S=m.extractDtlsParameters({sdpObject:R});S.role=N,this._remoteSdp.updateDtlsRole(N==="client"?"server":"client"),await new Promise((p,D)=>{this.safeEmit("@connect",{dtlsParameters:S},p,D)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Chrome55=P},7504:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DataProducer=void 0;const x=u(2994),f=u(3953),y=u(4893),E=new x.Logger("DataProducer");class _ extends f.EnhancedEventEmitter{_id;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new f.EnhancedEventEmitter;constructor({id:k,dataChannel:w,sctpStreamParameters:U,appData:g}){super(),E.debug("constructor()"),this._id=k,this._dataChannel=w,this._sctpStreamParameters=U,this._appData=g??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(k){this._dataChannel.bufferedAmountLowThreshold=k}get appData(){return this._appData}set appData(k){this._appData=k}get observer(){return this._observer}close(){this._closed||(E.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(E.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(k){if(E.debug("send()"),this._closed)throw new y.InvalidStateError("closed");this._dataChannel.send(k)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(E.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",k=>{if(this._closed)return;let{error:w}=k;w||(w=new Error("unknown DataChannel error")),w.errorDetail==="sctp-failure"?E.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",w.sctpCauseCode,w.message):E.error('DataChannel "error" event: %o',w),this.safeEmit("error",w)}),this._dataChannel.addEventListener("close",()=>{this._closed||(E.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||E.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}b.DataProducer=_},7628:function(T,b,u){var x;T.exports=(x=u(9021),u(754),u(4636),u(9506),u(7165),function(){var f=x,y=f.lib,E=y.WordArray,_=y.BlockCipher,m=f.algo,k=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],w=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],U=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],g=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],A=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],P=m.DES=_.extend({_doReset:function(){for(var S=this._key.words,p=[],D=0;D<56;D++){var O=k[D]-1;p[D]=S[O>>>5]>>>31-O%32&1}for(var j=this._subKeys=[],I=0;I<16;I++){var H=j[I]=[],F=U[I];for(D=0;D<24;D++)H[D/6|0]|=p[(w[D]-1+F)%28]<<31-D%6,H[4+(D/6|0)]|=p[28+(w[D+24]-1+F)%28]<<31-D%6;for(H[0]=H[0]<<1|H[0]>>>31,D=1;D<7;D++)H[D]=H[D]>>>4*(D-1)+3;H[7]=H[7]<<5|H[7]>>>27}var $=this._invSubKeys=[];for(D=0;D<16;D++)$[D]=j[15-D]},encryptBlock:function(S,p){this._doCryptBlock(S,p,this._subKeys)},decryptBlock:function(S,p){this._doCryptBlock(S,p,this._invSubKeys)},_doCryptBlock:function(S,p,D){this._lBlock=S[p],this._rBlock=S[p+1],z.call(this,4,252645135),z.call(this,16,65535),N.call(this,2,858993459),N.call(this,8,16711935),z.call(this,1,1431655765);for(var O=0;O<16;O++){for(var j=D[O],I=this._lBlock,H=this._rBlock,F=0,$=0;$<8;$++)F|=g[$][((H^j[$])&A[$])>>>0];this._lBlock=H,this._rBlock=I^F}var q=this._lBlock;this._lBlock=this._rBlock,this._rBlock=q,z.call(this,1,1431655765),N.call(this,8,16711935),N.call(this,2,858993459),z.call(this,16,65535),z.call(this,4,252645135),S[p]=this._lBlock,S[p+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function z(S,p){var D=(this._lBlock>>>S^this._rBlock)&p;this._rBlock^=D,this._lBlock^=D<<S}function N(S,p){var D=(this._rBlock>>>S^this._lBlock)&p;this._lBlock^=D,this._rBlock^=D<<S}f.DES=_._createHelper(P);var R=m.TripleDES=_.extend({_doReset:function(){var S=this._key.words;if(S.length!==2&&S.length!==4&&S.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var p=S.slice(0,2),D=S.length<4?S.slice(0,2):S.slice(2,4),O=S.length<6?S.slice(0,2):S.slice(4,6);this._des1=P.createEncryptor(E.create(p)),this._des2=P.createEncryptor(E.create(D)),this._des3=P.createEncryptor(E.create(O))},encryptBlock:function(S,p){this._des1.encryptBlock(S,p),this._des2.decryptBlock(S,p),this._des3.encryptBlock(S,p)},decryptBlock:function(S,p){this._des3.decryptBlock(S,p),this._des2.encryptBlock(S,p),this._des1.decryptBlock(S,p)},keySize:6,ivSize:2,blockSize:2});f.TripleDES=_._createHelper(R)}(),x.TripleDES)},7654:(T,b,u)=>{var x="__lodash_hash_undefined__",f="[object Function]",y="[object GeneratorFunction]",E=/^\[object .+?Constructor\]$/,_=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g,m=typeof self=="object"&&self&&self.Object===Object&&self,k=_||m||Function("return this")(),w,U=Array.prototype,g=Function.prototype,A=Object.prototype,P=k["__core-js_shared__"],z=(w=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",N=g.toString,R=A.hasOwnProperty,S=A.toString,p=RegExp("^"+N.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=U.splice,O=J(k,"Map"),j=J(Object,"create");function I(me){var Ce=-1,Be=me?me.length:0;for(this.clear();++Ce<Be;){var _e=me[Ce];this.set(_e[0],_e[1])}}function H(me){var Ce=-1,Be=me?me.length:0;for(this.clear();++Ce<Be;){var _e=me[Ce];this.set(_e[0],_e[1])}}function F(me){var Ce=-1,Be=me?me.length:0;for(this.clear();++Ce<Be;){var _e=me[Ce];this.set(_e[0],_e[1])}}function $(me,Ce){for(var Be=me.length;Be--;)if(Re(me[Be][0],Ce))return Be;return-1}function q(me){if(!Se(me)||(Ce=me,z&&z in Ce))return!1;var Ce,Be=function(_e){var Ye=Se(_e)?S.call(_e):"";return Ye==f||Ye==y}(me)||function(_e){var Ye=!1;if(_e!=null&&typeof _e.toString!="function")try{Ye=!!(_e+"")}catch{}return Ye}(me)?p:E;return Be.test(function(_e){if(_e!=null){try{return N.call(_e)}catch{}try{return _e+""}catch{}}return""}(me))}function se(me,Ce){var Be,_e,Ye=me.__data__;return((_e=typeof(Be=Ce))=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?Be!=="__proto__":Be===null)?Ye[typeof Ce=="string"?"string":"hash"]:Ye.map}function J(me,Ce){var Be=function(_e,Ye){return _e?.[Ye]}(me,Ce);return q(Be)?Be:void 0}function be(me,Ce){if(typeof me!="function"||Ce&&typeof Ce!="function")throw new TypeError("Expected a function");var Be=function(){var _e=arguments,Ye=Ce?Ce.apply(this,_e):_e[0],Qe=Be.cache;if(Qe.has(Ye))return Qe.get(Ye);var Ge=me.apply(this,_e);return Be.cache=Qe.set(Ye,Ge),Ge};return Be.cache=new(be.Cache||F),Be}function Re(me,Ce){return me===Ce||me!=me&&Ce!=Ce}function Se(me){var Ce=typeof me;return!!me&&(Ce=="object"||Ce=="function")}I.prototype.clear=function(){this.__data__=j?j(null):{}},I.prototype.delete=function(me){return this.has(me)&&delete this.__data__[me]},I.prototype.get=function(me){var Ce=this.__data__;if(j){var Be=Ce[me];return Be===x?void 0:Be}return R.call(Ce,me)?Ce[me]:void 0},I.prototype.has=function(me){var Ce=this.__data__;return j?Ce[me]!==void 0:R.call(Ce,me)},I.prototype.set=function(me,Ce){return this.__data__[me]=j&&Ce===void 0?x:Ce,this},H.prototype.clear=function(){this.__data__=[]},H.prototype.delete=function(me){var Ce=this.__data__,Be=$(Ce,me);return!(Be<0)&&(Be==Ce.length-1?Ce.pop():D.call(Ce,Be,1),!0)},H.prototype.get=function(me){var Ce=this.__data__,Be=$(Ce,me);return Be<0?void 0:Ce[Be][1]},H.prototype.has=function(me){return $(this.__data__,me)>-1},H.prototype.set=function(me,Ce){var Be=this.__data__,_e=$(Be,me);return _e<0?Be.push([me,Ce]):Be[_e][1]=Ce,this},F.prototype.clear=function(){this.__data__={hash:new I,map:new(O||H),string:new I}},F.prototype.delete=function(me){return se(this,me).delete(me)},F.prototype.get=function(me){return se(this,me).get(me)},F.prototype.has=function(me){return se(this,me).has(me)},F.prototype.set=function(me,Ce){return se(this,me).set(me,Ce),this},be.Cache=F,T.exports=be},7800:(T,b,u)=>{u.d(b,{A:()=>f});var x=u(3145);function f(y,E){if(y){if(typeof y=="string")return(0,x.A)(y,E);var _={}.toString.call(y).slice(8,-1);return _==="Object"&&y.constructor&&(_=y.constructor.name),_==="Map"||_==="Set"?Array.from(y):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?(0,x.A)(y,E):void 0}}},7833:(T,b,u)=>{b.formatArgs=function(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+T.exports.humanize(this.diff),!this.useColors)return;const y="color: "+this.color;f.splice(1,0,y,"color: inherit");let E=0,_=0;f[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(E++,m==="%c"&&(_=E))}),f.splice(_,0,y)},b.save=function(f){try{f?b.storage.setItem("debug",f):b.storage.removeItem("debug")}catch{}},b.load=function(){let f;try{f=b.storage.getItem("debug")||b.storage.getItem("DEBUG")}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=r.DEBUG),f},b.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let f;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(f=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(f[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},b.storage=function(){try{return localStorage}catch{}}(),b.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),b.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],b.log=console.debug||console.log||(()=>{}),T.exports=u(736)(b);const{formatters:x}=T.exports;x.j=function(f){try{return JSON.stringify(f)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}}},8046:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.validateRtpCapabilities=function(p){if(typeof p!="object")throw new TypeError("caps is not an object");if(p.codecs&&!Array.isArray(p.codecs))throw new TypeError("caps.codecs is not an array");p.codecs||(p.codecs=[]);for(const D of p.codecs)k(D);if(p.headerExtensions&&!Array.isArray(p.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");p.headerExtensions||(p.headerExtensions=[]);for(const D of p.headerExtensions)U(D)},b.validateRtpParameters=m,b.validateSctpStreamParameters=function(p){if(typeof p!="object")throw new TypeError("params is not an object");if(typeof p.streamId!="number")throw new TypeError("missing params.streamId");let D=!1;if(typeof p.ordered=="boolean"?D=!0:p.ordered=!0,p.maxPacketLifeTime&&typeof p.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(p.maxRetransmits&&typeof p.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(p.maxPacketLifeTime&&p.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(D&&p.ordered&&(p.maxPacketLifeTime||p.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(D||!p.maxPacketLifeTime&&!p.maxRetransmits||(p.ordered=!1),p.label&&typeof p.label!="string")throw new TypeError("invalid params.label");if(p.protocol&&typeof p.protocol!="string")throw new TypeError("invalid params.protocol")},b.validateSctpCapabilities=function(p){if(typeof p!="object")throw new TypeError("caps is not an object");if(!p.numStreams||typeof p.numStreams!="object")throw new TypeError("missing caps.numStreams");(function(D){if(typeof D!="object")throw new TypeError("numStreams is not an object");if(typeof D.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof D.MIS!="number")throw new TypeError("missing numStreams.MIS")})(p.numStreams)},b.getExtendedRtpCapabilities=function(p,D){const O={codecs:[],headerExtensions:[]};for(const j of D.codecs??[]){if(z(j))continue;const I=(p.codecs??[]).find(F=>N(F,j,{strict:!0,modify:!0}));if(!I)continue;const H={mimeType:I.mimeType,kind:I.kind,clockRate:I.clockRate,channels:I.channels,localPayloadType:I.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:j.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:I.parameters,remoteParameters:j.parameters,rtcpFeedback:S(I,j)};O.codecs.push(H)}for(const j of O.codecs){const I=p.codecs.find(F=>z(F)&&F.parameters.apt===j.localPayloadType),H=D.codecs.find(F=>z(F)&&F.parameters.apt===j.remotePayloadType);I&&H&&(j.localRtxPayloadType=I.preferredPayloadType,j.remoteRtxPayloadType=H.preferredPayloadType)}for(const j of D.headerExtensions){const I=p.headerExtensions.find(F=>R(F,j));if(!I)continue;const H={kind:j.kind,uri:j.uri,sendId:I.preferredId,recvId:j.preferredId,encrypt:I.preferredEncrypt,direction:"sendrecv"};switch(j.direction){case"sendrecv":H.direction="sendrecv";break;case"recvonly":H.direction="sendonly";break;case"sendonly":H.direction="recvonly";break;case"inactive":H.direction="inactive"}O.headerExtensions.push(H)}return O},b.getRecvRtpCapabilities=function(p){const D={codecs:[],headerExtensions:[]};for(const O of p.codecs){const j={mimeType:O.mimeType,kind:O.kind,preferredPayloadType:O.remotePayloadType,clockRate:O.clockRate,channels:O.channels,parameters:O.localParameters,rtcpFeedback:O.rtcpFeedback};if(D.codecs.push(j),!O.remoteRtxPayloadType)continue;const I={mimeType:`${O.kind}/rtx`,kind:O.kind,preferredPayloadType:O.remoteRtxPayloadType,clockRate:O.clockRate,parameters:{apt:O.remotePayloadType},rtcpFeedback:[]};D.codecs.push(I)}for(const O of p.headerExtensions){if(O.direction!=="sendrecv"&&O.direction!=="recvonly")continue;const j={kind:O.kind,uri:O.uri,preferredId:O.recvId,preferredEncrypt:O.encrypt,direction:O.direction};D.headerExtensions.push(j)}return D},b.getSendingRtpParameters=function(p,D){const O={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const j of D.codecs){if(j.kind!==p)continue;const I={mimeType:j.mimeType,payloadType:j.localPayloadType,clockRate:j.clockRate,channels:j.channels,parameters:j.localParameters,rtcpFeedback:j.rtcpFeedback};if(O.codecs.push(I),j.localRtxPayloadType){const H={mimeType:`${j.kind}/rtx`,payloadType:j.localRtxPayloadType,clockRate:j.clockRate,parameters:{apt:j.localPayloadType},rtcpFeedback:[]};O.codecs.push(H)}}for(const j of D.headerExtensions){if(j.kind&&j.kind!==p||j.direction!=="sendrecv"&&j.direction!=="sendonly")continue;const I={uri:j.uri,id:j.sendId,encrypt:j.encrypt,parameters:{}};O.headerExtensions.push(I)}return O},b.getSendingRemoteRtpParameters=function(p,D){const O={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const j of D.codecs){if(j.kind!==p)continue;const I={mimeType:j.mimeType,payloadType:j.localPayloadType,clockRate:j.clockRate,channels:j.channels,parameters:j.remoteParameters,rtcpFeedback:j.rtcpFeedback};if(O.codecs.push(I),j.localRtxPayloadType){const H={mimeType:`${j.kind}/rtx`,payloadType:j.localRtxPayloadType,clockRate:j.clockRate,parameters:{apt:j.localPayloadType},rtcpFeedback:[]};O.codecs.push(H)}}for(const j of D.headerExtensions){if(j.kind&&j.kind!==p||j.direction!=="sendrecv"&&j.direction!=="sendonly")continue;const I={uri:j.uri,id:j.sendId,encrypt:j.encrypt,parameters:{}};O.headerExtensions.push(I)}if(O.headerExtensions.some(j=>j.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const j of O.codecs)j.rtcpFeedback=(j.rtcpFeedback??[]).filter(I=>I.type!=="goog-remb");else if(O.headerExtensions.some(j=>j.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const j of O.codecs)j.rtcpFeedback=(j.rtcpFeedback??[]).filter(I=>I.type!=="transport-cc");else for(const j of O.codecs)j.rtcpFeedback=(j.rtcpFeedback??[]).filter(I=>I.type!=="transport-cc"&&I.type!=="goog-remb");return O},b.reduceCodecs=function(p,D){const O=[];if(D){for(let j=0;j<p.length;++j)if(N(p[j],D,{strict:!0})){O.push(p[j]),z(p[j+1])&&O.push(p[j+1]);break}if(O.length===0)throw new TypeError("no matching codec found")}else O.push(p[0]),z(p[1])&&O.push(p[1]);return O},b.generateProbatorRtpParameters=function(p){m(p=f.clone(p));const D={mid:y,codecs:[],headerExtensions:[],encodings:[{ssrc:E}],rtcp:{cname:"probator"}};return D.codecs.push(p.codecs[0]),D.codecs[0].payloadType=_,D.headerExtensions=p.headerExtensions,D},b.canSend=function(p,D){return D.codecs.some(O=>O.kind===p)},b.canReceive=function(p,D){if(m(p),p.codecs.length===0)return!1;const O=p.codecs[0];return D.codecs.some(j=>j.remotePayloadType===O.payloadType)};const x=u(3200),f=u(1765),y="probator",E=1234,_=127;function m(p){if(typeof p!="object")throw new TypeError("params is not an object");if(p.mid&&typeof p.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(p.codecs))throw new TypeError("missing params.codecs");for(const D of p.codecs)g(D);if(p.headerExtensions&&!Array.isArray(p.headerExtensions))throw new TypeError("params.headerExtensions is not an array");p.headerExtensions||(p.headerExtensions=[]);for(const D of p.headerExtensions)A(D);if(p.encodings&&!Array.isArray(p.encodings))throw new TypeError("params.encodings is not an array");p.encodings||(p.encodings=[]);for(const D of p.encodings)P(D);if(p.rtcp&&typeof p.rtcp!="object")throw new TypeError("params.rtcp is not an object");p.rtcp||(p.rtcp={}),function(D){if(typeof D!="object")throw new TypeError("rtcp is not an object");if(D.cname&&typeof D.cname!="string")throw new TypeError("invalid rtcp.cname");D.reducedSize&&typeof D.reducedSize=="boolean"||(D.reducedSize=!0)}(p.rtcp)}function k(p){const D=new RegExp("^(audio|video)/(.+)","i");if(typeof p!="object")throw new TypeError("codec is not an object");if(!p.mimeType||typeof p.mimeType!="string")throw new TypeError("missing codec.mimeType");const O=D.exec(p.mimeType);if(!O)throw new TypeError("invalid codec.mimeType");if(p.kind=O[1].toLowerCase(),p.preferredPayloadType&&typeof p.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof p.clockRate!="number")throw new TypeError("missing codec.clockRate");p.kind==="audio"?typeof p.channels!="number"&&(p.channels=1):delete p.channels,p.parameters&&typeof p.parameters=="object"||(p.parameters={});for(const j of Object.keys(p.parameters)){let I=p.parameters[j];if(I===void 0&&(p.parameters[j]="",I=""),typeof I!="string"&&typeof I!="number")throw new TypeError(`invalid codec parameter [key:${j}s, value:${I}]`);if(j==="apt"&&typeof I!="number")throw new TypeError("invalid codec apt parameter")}p.rtcpFeedback&&Array.isArray(p.rtcpFeedback)||(p.rtcpFeedback=[]);for(const j of p.rtcpFeedback)w(j)}function w(p){if(typeof p!="object")throw new TypeError("fb is not an object");if(!p.type||typeof p.type!="string")throw new TypeError("missing fb.type");p.parameter&&typeof p.parameter=="string"||(p.parameter="")}function U(p){if(typeof p!="object")throw new TypeError("ext is not an object");if(p.kind!=="audio"&&p.kind!=="video")throw new TypeError("invalid ext.kind");if(!p.uri||typeof p.uri!="string")throw new TypeError("missing ext.uri");if(typeof p.preferredId!="number")throw new TypeError("missing ext.preferredId");if(p.preferredEncrypt&&typeof p.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(p.preferredEncrypt||(p.preferredEncrypt=!1),p.direction&&typeof p.direction!="string")throw new TypeError("invalid ext.direction");p.direction||(p.direction="sendrecv")}function g(p){const D=new RegExp("^(audio|video)/(.+)","i");if(typeof p!="object")throw new TypeError("codec is not an object");if(!p.mimeType||typeof p.mimeType!="string")throw new TypeError("missing codec.mimeType");const O=D.exec(p.mimeType);if(!O)throw new TypeError("invalid codec.mimeType");if(typeof p.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof p.clockRate!="number")throw new TypeError("missing codec.clockRate");O[1].toLowerCase()==="audio"?typeof p.channels!="number"&&(p.channels=1):delete p.channels,p.parameters&&typeof p.parameters=="object"||(p.parameters={});for(const j of Object.keys(p.parameters)){let I=p.parameters[j];if(I===void 0&&(p.parameters[j]="",I=""),typeof I!="string"&&typeof I!="number")throw new TypeError(`invalid codec parameter [key:${j}s, value:${I}]`);if(j==="apt"&&typeof I!="number")throw new TypeError("invalid codec apt parameter")}p.rtcpFeedback&&Array.isArray(p.rtcpFeedback)||(p.rtcpFeedback=[]);for(const j of p.rtcpFeedback)w(j)}function A(p){if(typeof p!="object")throw new TypeError("ext is not an object");if(!p.uri||typeof p.uri!="string")throw new TypeError("missing ext.uri");if(typeof p.id!="number")throw new TypeError("missing ext.id");if(p.encrypt&&typeof p.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");p.encrypt||(p.encrypt=!1),p.parameters&&typeof p.parameters=="object"||(p.parameters={});for(const D of Object.keys(p.parameters)){let O=p.parameters[D];if(O===void 0&&(p.parameters[D]="",O=""),typeof O!="string"&&typeof O!="number")throw new TypeError("invalid header extension parameter")}}function P(p){if(typeof p!="object")throw new TypeError("encoding is not an object");if(p.ssrc&&typeof p.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(p.rid&&typeof p.rid!="string")throw new TypeError("invalid encoding.rid");if(p.rtx&&typeof p.rtx!="object")throw new TypeError("invalid encoding.rtx");if(p.rtx&&typeof p.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(p.dtx&&typeof p.dtx=="boolean"||(p.dtx=!1),p.scalabilityMode&&typeof p.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function z(p){return!!p&&/.+\/rtx$/i.test(p.mimeType)}function N(p,D,{strict:O=!1,modify:j=!1}={}){const I=p.mimeType.toLowerCase();if(I!==D.mimeType.toLowerCase()||p.clockRate!==D.clockRate||p.channels!==D.channels)return!1;switch(I){case"video/h264":if(O){if((p.parameters["packetization-mode"]??0)!==(D.parameters["packetization-mode"]??0)||!x.isSameProfile(p.parameters,D.parameters))return!1;let H;try{H=x.generateProfileLevelIdStringForAnswer(p.parameters,D.parameters)}catch{return!1}j&&(H?(p.parameters["profile-level-id"]=H,D.parameters["profile-level-id"]=H):(delete p.parameters["profile-level-id"],delete D.parameters["profile-level-id"]))}break;case"video/vp9":if(O&&(p.parameters["profile-id"]??0)!==(D.parameters["profile-id"]??0))return!1}return!0}function R(p,D){return(!p.kind||!D.kind||p.kind===D.kind)&&p.uri===D.uri}function S(p,D){const O=[];for(const j of p.rtcpFeedback??[]){const I=(D.rtcpFeedback??[]).find(H=>H.type===j.type&&(H.parameter===j.parameter||!H.parameter&&!j.parameter));I&&O.push(I)}return O}},8056:function(T,b,u){var x;T.exports=(x=u(9021),function(){var f=x,y=f.lib,E=y.WordArray,_=y.Hasher,m=f.algo,k=E.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),w=E.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),U=E.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=E.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),A=E.create([0,1518500249,1859775393,2400959708,2840853838]),P=E.create([1352829926,1548603684,1836072691,2053994217,0]),z=m.RIPEMD160=_.extend({_doReset:function(){this._hash=E.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(j,I){for(var H=0;H<16;H++){var F=I+H,$=j[F];j[F]=16711935&($<<8|$>>>24)|4278255360&($<<24|$>>>8)}var q,se,J,be,Re,Se,me,Ce,Be,_e,Ye,Qe=this._hash.words,Ge=A.words,He=P.words,Te=k.words,dt=w.words,yt=U.words,on=g.words;for(Se=q=Qe[0],me=se=Qe[1],Ce=J=Qe[2],Be=be=Qe[3],_e=Re=Qe[4],H=0;H<80;H+=1)Ye=q+j[I+Te[H]]|0,Ye+=H<16?N(se,J,be)+Ge[0]:H<32?R(se,J,be)+Ge[1]:H<48?S(se,J,be)+Ge[2]:H<64?p(se,J,be)+Ge[3]:D(se,J,be)+Ge[4],Ye=(Ye=O(Ye|=0,yt[H]))+Re|0,q=Re,Re=be,be=O(J,10),J=se,se=Ye,Ye=Se+j[I+dt[H]]|0,Ye+=H<16?D(me,Ce,Be)+He[0]:H<32?p(me,Ce,Be)+He[1]:H<48?S(me,Ce,Be)+He[2]:H<64?R(me,Ce,Be)+He[3]:N(me,Ce,Be)+He[4],Ye=(Ye=O(Ye|=0,on[H]))+_e|0,Se=_e,_e=Be,Be=O(Ce,10),Ce=me,me=Ye;Ye=Qe[1]+J+Be|0,Qe[1]=Qe[2]+be+_e|0,Qe[2]=Qe[3]+Re+Se|0,Qe[3]=Qe[4]+q+me|0,Qe[4]=Qe[0]+se+Ce|0,Qe[0]=Ye},_doFinalize:function(){var j=this._data,I=j.words,H=8*this._nDataBytes,F=8*j.sigBytes;I[F>>>5]|=128<<24-F%32,I[14+(F+64>>>9<<4)]=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),j.sigBytes=4*(I.length+1),this._process();for(var $=this._hash,q=$.words,se=0;se<5;se++){var J=q[se];q[se]=16711935&(J<<8|J>>>24)|4278255360&(J<<24|J>>>8)}return $},clone:function(){var j=_.clone.call(this);return j._hash=this._hash.clone(),j}});function N(j,I,H){return j^I^H}function R(j,I,H){return j&I|~j&H}function S(j,I,H){return(j|~I)^H}function p(j,I,H){return j&H|I&~H}function D(j,I,H){return j^(I|~H)}function O(j,I){return j<<I|j>>>32-I}f.RIPEMD160=_._createHelper(z),f.HmacRIPEMD160=_._createHmacHelper(z)}(),x.RIPEMD160)},8057:function(T,b,u){var x=this&&this.__createBinding||(Object.create?function(y,E,_,m){m===void 0&&(m=_);var k=Object.getOwnPropertyDescriptor(E,_);k&&!("get"in k?!E.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return E[_]}}),Object.defineProperty(y,m,k)}:function(y,E,_,m){m===void 0&&(m=_),y[m]=E[_]}),f=this&&this.__exportStar||function(y,E){for(var _ in y)_==="default"||Object.prototype.hasOwnProperty.call(E,_)||x(E,y,_)};Object.defineProperty(b,"__esModule",{value:!0}),f(u(6004),b),f(u(5601),b),f(u(9792),b),f(u(3518),b),f(u(7504),b),f(u(9166),b),f(u(5370),b),f(u(4160),b),f(u(521),b),f(u(4893),b)},8124:function(T,b,u){var x;T.exports=(x=u(9021),u(7165),x.pad.NoPadding={pad:function(){},unpad:function(){}},x.pad.NoPadding)},8155:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Chrome67=void 0;const x=u(7363),f=u(2994),y=u(1765),E=u(8046),_=u(5544),m=u(4496),k=u(521),w=u(1305),U=new f.Logger("Chrome67"),g={OS:1024,MIS:1024};class A extends k.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdRtpSender=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new A}constructor(){super()}get name(){return"Chrome67"}close(){if(U.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){U.debug("getNativeRtpCapabilities()");const z=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const N=await z.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{z.close()}catch{}const R=x.parse(N.sdp);return _.extractRtpCapabilities({sdpObject:R})}catch(N){try{z.close()}catch{}throw N}}async getNativeSctpCapabilities(){return U.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:z,iceParameters:N,iceCandidates:R,dtlsParameters:S,sctpParameters:p,iceServers:D,iceTransportPolicy:O,additionalSettings:j,proprietaryConstraints:I,extendedRtpCapabilities:H}){U.debug("run()"),this._direction=z,this._remoteSdp=new w.RemoteSdp({iceParameters:N,iceCandidates:R,dtlsParameters:S,sctpParameters:p,planB:!0}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",H),video:E.getSendingRtpParameters("video",H)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",H),video:E.getSendingRemoteRtpParameters("video",H)},S.role&&S.role!=="auto"&&(this._forcedLocalDtlsRole=S.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:D??[],iceTransportPolicy:O??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...j},I),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",F=>{this.emit("@icecandidateerror",F)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(U.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(z){U.debug("updateIceServers()");const N=this._pc.getConfiguration();N.iceServers=z,this._pc.setConfiguration(N)}async restartIce(z){if(U.debug("restartIce()"),this._remoteSdp.updateIceParameters(z),this._transportReady)if(this._direction==="send"){const N=await this._pc.createOffer({iceRestart:!0});U.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const R={type:"answer",sdp:this._remoteSdp.getSdp()};U.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const N={type:"offer",sdp:this._remoteSdp.getSdp()};U.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",N),await this._pc.setRemoteDescription(N);const R=await this._pc.createAnswer();U.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this._pc.getStats()}async send({track:z,encodings:N,codecOptions:R,codec:S}){this.assertSendDirection(),U.debug("send() [kind:%s, track.id:%s]",z.kind,z.id),S&&U.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(z),this._pc.addTrack(z,this._sendStream);let p,D=await this._pc.createOffer(),O=x.parse(D.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const j=y.clone(this._sendingRtpParametersByKind[z.kind]);j.codecs=E.reduceCodecs(j.codecs);const I=y.clone(this._sendingRemoteRtpParametersByKind[z.kind]);if(I.codecs=E.reduceCodecs(I.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),z.kind==="video"&&N&&N.length>1&&(U.debug("send() | enabling simulcast"),O=x.parse(D.sdp),p=O.media.find(q=>q.type==="video"),m.addLegacySimulcast({offerMediaObject:p,track:z,numStreams:N.length}),D={type:"offer",sdp:x.write(O)}),U.debug("send() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),O=x.parse(this._pc.localDescription.sdp),p=O.media.find(q=>q.type===z.kind),j.rtcp.cname=_.getCname({offerMediaObject:p}),j.encodings=m.getRtpEncodings({offerMediaObject:p,track:z}),N)for(let q=0;q<j.encodings.length;++q)N[q]&&Object.assign(j.encodings[q],N[q]);if(j.encodings.length>1&&j.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const q of j.encodings)q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:j,answerRtpParameters:I,codecOptions:R});const H={type:"answer",sdp:this._remoteSdp.getSdp()};U.debug("send() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H);const F=String(this._nextSendLocalId);this._nextSendLocalId++;const $=this._pc.getSenders().find(q=>q.track===z);return this._mapSendLocalIdRtpSender.set(F,$),{localId:F,rtpParameters:j,rtpSender:$}}async stopSending(z){this.assertSendDirection(),U.debug("stopSending() [localId:%s]",z);const N=this._mapSendLocalIdRtpSender.get(z);if(!N)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(N),N.track&&this._sendStream.removeTrack(N.track),this._mapSendLocalIdRtpSender.delete(z);const R=await this._pc.createOffer();U.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R);try{await this._pc.setLocalDescription(R)}catch(p){if(this._sendStream.getTracks().length===0)return void U.warn("stopSending() | ignoring expected error due no sending tracks: %s",p.toString());throw p}if(this._pc.signalingState==="stable")return;const S={type:"answer",sdp:this._remoteSdp.getSdp()};U.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async pauseSending(z){}async resumeSending(z){}async replaceTrack(z,N){this.assertSendDirection(),N?U.debug("replaceTrack() [localId:%s, track.id:%s]",z,N.id):U.debug("replaceTrack() [localId:%s, no track]",z);const R=this._mapSendLocalIdRtpSender.get(z);if(!R)throw new Error("associated RTCRtpSender not found");const S=R.track;await R.replaceTrack(N),S&&this._sendStream.removeTrack(S),N&&this._sendStream.addTrack(N)}async setMaxSpatialLayer(z,N){this.assertSendDirection(),U.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",z,N);const R=this._mapSendLocalIdRtpSender.get(z);if(!R)throw new Error("associated RTCRtpSender not found");const S=R.getParameters();S.encodings.forEach((p,D)=>{p.active=D<=N}),await R.setParameters(S)}async setRtpEncodingParameters(z,N){this.assertSendDirection(),U.debug("setRtpEncodingParameters() [localId:%s, params:%o]",z,N);const R=this._mapSendLocalIdRtpSender.get(z);if(!R)throw new Error("associated RTCRtpSender not found");const S=R.getParameters();S.encodings.forEach((p,D)=>{S.encodings[D]={...p,...N}}),await R.setParameters(S)}async getSenderStats(z){this.assertSendDirection();const N=this._mapSendLocalIdRtpSender.get(z);if(!N)throw new Error("associated RTCRtpSender not found");return N.getStats()}async sendDataChannel({ordered:z,maxPacketLifeTime:N,maxRetransmits:R,label:S,protocol:p}){this.assertSendDirection();const D={negotiated:!0,id:this._nextSendSctpStreamId,ordered:z,maxPacketLifeTime:N,maxRetransmitTime:N,maxRetransmits:R,protocol:p};U.debug("sendDataChannel() [options:%o]",D);const O=this._pc.createDataChannel(S,D);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),I=x.parse(j.sdp),H=I.media.find($=>$.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),U.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:H});const F={type:"answer",sdp:this._remoteSdp.getSdp()};U.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:D.id,ordered:D.ordered,maxPacketLifeTime:D.maxPacketLifeTime,maxRetransmits:D.maxRetransmits}}}async receive(z){this.assertRecvDirection();const N=[];for(const D of z){const{trackId:O,kind:j,rtpParameters:I,streamId:H}=D;U.debug("receive() [trackId:%s, kind:%s]",O,j);const F=j;this._remoteSdp.receive({mid:F,kind:j,offerRtpParameters:I,streamId:H??I.rtcp.cname,trackId:O})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};U.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);let S=await this._pc.createAnswer();const p=x.parse(S.sdp);for(const D of z){const{kind:O,rtpParameters:j}=D,I=O,H=p.media.find(F=>String(F.mid)===I);_.applyCodecParameters({offerRtpParameters:j,answerMediaObject:H})}S={type:"answer",sdp:x.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),U.debug("receive() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S);for(const D of z){const{kind:O,trackId:j,rtpParameters:I}=D,H=j,F=O,$=this._pc.getReceivers().find(q=>q.track&&q.track.id===H);if(!$)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(H,{mid:F,rtpParameters:I,rtpReceiver:$}),N.push({localId:H,track:$.track,rtpReceiver:$})}return N}async stopReceiving(z){this.assertRecvDirection();for(const S of z){U.debug("stopReceiving() [localId:%s]",S);const{mid:p,rtpParameters:D}=this._mapRecvLocalIdInfo.get(S)??{};this._mapRecvLocalIdInfo.delete(S),this._remoteSdp.planBStopReceiving({mid:p,offerRtpParameters:D})}const N={type:"offer",sdp:this._remoteSdp.getSdp()};U.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",N),await this._pc.setRemoteDescription(N);const R=await this._pc.createAnswer();U.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async pauseReceiving(z){}async resumeReceiving(z){}async getReceiverStats(z){this.assertRecvDirection();const{rtpReceiver:N}=this._mapRecvLocalIdInfo.get(z)??{};if(!N)throw new Error("associated RTCRtpReceiver not found");return N.getStats()}async receiveDataChannel({sctpStreamParameters:z,label:N,protocol:R}){this.assertRecvDirection();const{streamId:S,ordered:p,maxPacketLifeTime:D,maxRetransmits:O}=z,j={negotiated:!0,id:S,ordered:p,maxPacketLifeTime:D,maxRetransmitTime:D,maxRetransmits:O,protocol:R};U.debug("receiveDataChannel() [options:%o]",j);const I=this._pc.createDataChannel(N,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const H={type:"offer",sdp:this._remoteSdp.getSdp()};U.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",H),await this._pc.setRemoteDescription(H);const F=await this._pc.createAnswer();if(!this._transportReady){const $=x.parse(F.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$})}U.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setLocalDescription(F),this._hasDataChannelMediaSection=!0}return{dataChannel:I}}async setupTransport({localDtlsRole:z,localSdpObject:N}){N||(N=x.parse(this._pc.localDescription.sdp));const R=_.extractDtlsParameters({sdpObject:N});R.role=z,this._remoteSdp.updateDtlsRole(z==="client"?"server":"client"),await new Promise((S,p)=>{this.safeEmit("@connect",{dtlsParameters:R},S,p)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Chrome67=A},8274:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Logger=void 0;const x=u(7833),f="awaitqueue";b.Logger=class{_debug;_warn;_error;constructor(y){y?(this._debug=x(`${f}:${y}`),this._warn=x(`${f}:WARN:${y}`),this._error=x(`${f}:ERROR:${y}`)):(this._debug=x(f),this._warn=x(`${f}:WARN`),this._error=x(`${f}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},8278:(T,b,u)=>{u.d(b,{Ag:()=>E,Wm:()=>_,sn:()=>m,tr:()=>w});var x=u(467),f=u(4756),y=u.n(f);u(1806);function E(){return window.RTCRtpSender!==void 0&&window.RTCRtpSender.prototype.createEncodedStreams!==void 0||_()}function _(){return window.RTCRtpScriptTransform!==void 0}function m(g){return k.apply(this,arguments)}function k(){return(k=(0,x.A)(y().mark(function g(A){var P,z;return y().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return P=new TextEncoder,N.next=1,crypto.subtle.importKey("raw",P.encode(A),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 1:return z=N.sent,N.abrupt("return",z);case 2:case"end":return N.stop()}},g)}))).apply(this,arguments)}function w(g){return U.apply(this,arguments)}function U(){return(U=(0,x.A)(y().mark(function g(A){var P;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=1,crypto.subtle.importKey("raw",A,"HKDF",!1,["deriveBits","deriveKey"]);case 1:return P=z.sent,z.abrupt("return",P);case 2:case"end":return z.stop()}},g)}))).apply(this,arguments)}},8286:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0});const x=u(3779),f=u(2291),y=u(6011);b.default=function(E,_,m){if(x.default.randomUUID&&!_&&!E)return x.default.randomUUID();const k=(E=E||{}).random??E.rng?.()??(0,f.default)();if(k.length<16)throw new Error("Random bytes length must be >= 16");if(k[6]=15&k[6]|64,k[8]=63&k[8]|128,_){if((m=m||0)<0||m+16>_.length)throw new RangeError(`UUID byte range ${m}:${m+15} is out of buffer bounds`);for(let w=0;w<16;++w)_[m+w]=k[w];return _}return(0,y.unsafeStringify)(k)}},8454:function(T,b,u){var x,f;T.exports=(f=u(9021),u(7165),f.mode.ECB=((x=f.lib.BlockCipherMode.extend()).Encryptor=x.extend({processBlock:function(y,E){this._cipher.encryptBlock(y,E)}}),x.Decryptor=x.extend({processBlock:function(y,E){this._cipher.decryptBlock(y,E)}}),x),f.mode.ECB)},8624:(T,b,u)=>{u.r(b),u.d(b,{DOMException:()=>O,Headers:()=>w,Request:()=>R,Response:()=>p,fetch:()=>j});var x=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||u.g!==void 0&&u.g||{},f={searchParams:"URLSearchParams"in x,iterable:"Symbol"in x&&"iterator"in Symbol,blob:"FileReader"in x&&"Blob"in x&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in x,arrayBuffer:"ArrayBuffer"in x};if(f.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=ArrayBuffer.isView||function(I){return I&&y.indexOf(Object.prototype.toString.call(I))>-1};function _(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function m(I){return typeof I!="string"&&(I=String(I)),I}function k(I){var H={next:function(){var F=I.shift();return{done:F===void 0,value:F}}};return f.iterable&&(H[Symbol.iterator]=function(){return H}),H}function w(I){this.map={},I instanceof w?I.forEach(function(H,F){this.append(F,H)},this):Array.isArray(I)?I.forEach(function(H){if(H.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+H.length);this.append(H[0],H[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(H){this.append(H,I[H])},this)}function U(I){if(!I._noBody)return I.bodyUsed?Promise.reject(new TypeError("Already read")):void(I.bodyUsed=!0)}function g(I){return new Promise(function(H,F){I.onload=function(){H(I.result)},I.onerror=function(){F(I.error)}})}function A(I){var H=new FileReader,F=g(H);return H.readAsArrayBuffer(I),F}function P(I){if(I.slice)return I.slice(0);var H=new Uint8Array(I.byteLength);return H.set(new Uint8Array(I)),H.buffer}function z(){return this.bodyUsed=!1,this._initBody=function(I){var H;this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:f.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:f.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():f.arrayBuffer&&f.blob&&(H=I)&&DataView.prototype.isPrototypeOf(H)?(this._bodyArrayBuffer=P(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||E(I))?this._bodyArrayBuffer=P(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var I=U(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=U(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(f.blob)return this.blob().then(A);throw new Error("could not read as ArrayBuffer")},this.text=function(){var I,H,F,$,q,se=U(this);if(se)return se;if(this._bodyBlob)return I=this._bodyBlob,H=new FileReader,F=g(H),$=/charset=([A-Za-z0-9_-]+)/.exec(I.type),q=$?$[1]:"utf-8",H.readAsText(I,q),F;if(this._bodyArrayBuffer)return Promise.resolve(function(J){for(var be=new Uint8Array(J),Re=new Array(be.length),Se=0;Se<be.length;Se++)Re[Se]=String.fromCharCode(be[Se]);return Re.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}w.prototype.append=function(I,H){I=_(I),H=m(H);var F=this.map[I];this.map[I]=F?F+", "+H:H},w.prototype.delete=function(I){delete this.map[_(I)]},w.prototype.get=function(I){return I=_(I),this.has(I)?this.map[I]:null},w.prototype.has=function(I){return this.map.hasOwnProperty(_(I))},w.prototype.set=function(I,H){this.map[_(I)]=m(H)},w.prototype.forEach=function(I,H){for(var F in this.map)this.map.hasOwnProperty(F)&&I.call(H,this.map[F],F,this)},w.prototype.keys=function(){var I=[];return this.forEach(function(H,F){I.push(F)}),k(I)},w.prototype.values=function(){var I=[];return this.forEach(function(H){I.push(H)}),k(I)},w.prototype.entries=function(){var I=[];return this.forEach(function(H,F){I.push([F,H])}),k(I)},f.iterable&&(w.prototype[Symbol.iterator]=w.prototype.entries);var N=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(I,H){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var F,$,q=(H=H||{}).body;if(I instanceof R){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,H.headers||(this.headers=new w(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,q||I._bodyInit==null||(q=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=H.credentials||this.credentials||"same-origin",!H.headers&&this.headers||(this.headers=new w(H.headers)),this.method=(F=H.method||this.method||"GET",$=F.toUpperCase(),N.indexOf($)>-1?$:F),this.mode=H.mode||this.mode||null,this.signal=H.signal||this.signal||function(){if("AbortController"in x)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&q)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(q),!(this.method!=="GET"&&this.method!=="HEAD"||H.cache!=="no-store"&&H.cache!=="no-cache")){var se=/([?&])_=[^&]*/;se.test(this.url)?this.url=this.url.replace(se,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function S(I){var H=new FormData;return I.trim().split("&").forEach(function(F){if(F){var $=F.split("="),q=$.shift().replace(/\+/g," "),se=$.join("=").replace(/\+/g," ");H.append(decodeURIComponent(q),decodeURIComponent(se))}}),H}function p(I,H){if(!(this instanceof p))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(H||(H={}),this.type="default",this.status=H.status===void 0?200:H.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=H.statusText===void 0?"":""+H.statusText,this.headers=new w(H.headers),this.url=H.url||"",this._initBody(I)}R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},z.call(R.prototype),z.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},p.error=function(){var I=new p(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var D=[301,302,303,307,308];p.redirect=function(I,H){if(D.indexOf(H)===-1)throw new RangeError("Invalid status code");return new p(null,{status:H,headers:{location:I}})};var O=x.DOMException;try{new O}catch{(O=function(H,F){this.message=H,this.name=F;var $=Error(H);this.stack=$.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function j(I,H){return new Promise(function(F,$){var q=new R(I,H);if(q.signal&&q.signal.aborted)return $(new O("Aborted","AbortError"));var se=new XMLHttpRequest;function J(){se.abort()}if(se.onload=function(){var Re,Se,me={statusText:se.statusText,headers:(Re=se.getAllResponseHeaders()||"",Se=new w,Re.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(Be){return Be.indexOf(`
`)===0?Be.substr(1,Be.length):Be}).forEach(function(Be){var _e=Be.split(":"),Ye=_e.shift().trim();if(Ye){var Qe=_e.join(":").trim();try{Se.append(Ye,Qe)}catch(Ge){console.warn("Response "+Ge.message)}}}),Se)};q.url.indexOf("file://")===0&&(se.status<200||se.status>599)?me.status=200:me.status=se.status,me.url="responseURL"in se?se.responseURL:me.headers.get("X-Request-URL");var Ce="response"in se?se.response:se.responseText;setTimeout(function(){F(new p(Ce,me))},0)},se.onerror=function(){setTimeout(function(){$(new TypeError("Network request failed"))},0)},se.ontimeout=function(){setTimeout(function(){$(new TypeError("Network request timed out"))},0)},se.onabort=function(){setTimeout(function(){$(new O("Aborted","AbortError"))},0)},se.open(q.method,function(Re){try{return Re===""&&x.location.href?x.location.href:Re}catch{return Re}}(q.url),!0),q.credentials==="include"?se.withCredentials=!0:q.credentials==="omit"&&(se.withCredentials=!1),"responseType"in se&&(f.blob?se.responseType="blob":f.arrayBuffer&&(se.responseType="arraybuffer")),H&&typeof H.headers=="object"&&!(H.headers instanceof w||x.Headers&&H.headers instanceof x.Headers)){var be=[];Object.getOwnPropertyNames(H.headers).forEach(function(Re){be.push(_(Re)),se.setRequestHeader(Re,m(H.headers[Re]))}),q.headers.forEach(function(Re,Se){be.indexOf(Se)===-1&&se.setRequestHeader(Se,Re)})}else q.headers.forEach(function(Re,Se){se.setRequestHeader(Se,Re)});q.signal&&(q.signal.addEventListener("abort",J),se.onreadystatechange=function(){se.readyState===4&&q.signal.removeEventListener("abort",J)}),se.send(q._bodyInit===void 0?null:q._bodyInit)})}j.polyfill=!0,x.fetch||(x.fetch=j,x.Headers=w,x.Request=R,x.Response=p)},8633:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Edge11=void 0;const x=u(2994),f=u(4893),y=u(1765),E=u(8046),_=u(8751),m=u(521),k=new x.Logger("Edge11");class w extends m.HandlerInterface{_sendingRtpParametersByKind;_remoteIceParameters;_remoteIceCandidates;_remoteDtlsParameters;_iceGatherer;_iceTransport;_dtlsTransport;_rtpSenders=new Map;_rtpReceivers=new Map;_nextSendLocalId=0;_cname;_transportReady=!1;static createFactory(){return()=>new w}constructor(){super()}get name(){return"Edge11"}close(){k.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const g of this._rtpSenders.values())try{g.stop()}catch{}for(const g of this._rtpReceivers.values())try{g.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return k.debug("getNativeRtpCapabilities()"),_.getCapabilities()}async getNativeSctpCapabilities(){return k.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:g,iceParameters:A,iceCandidates:P,dtlsParameters:z,sctpParameters:N,iceServers:R,iceTransportPolicy:S,additionalSettings:p,proprietaryConstraints:D,extendedRtpCapabilities:O}){k.debug("run()"),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",O),video:E.getSendingRtpParameters("video",O)},this._remoteIceParameters=A,this._remoteIceCandidates=P,this._remoteDtlsParameters=z,this._cname=`CNAME-${y.generateRandomNumber()}`,this.setIceGatherer({iceServers:R,iceTransportPolicy:S}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(g){throw new f.UnsupportedError("not supported")}async restartIce(g){if(k.debug("restartIce()"),this._remoteIceParameters=g,this._transportReady){k.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,g,"controlling");for(const A of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(A);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:g,encodings:A,codecOptions:P,codec:z}){k.debug("send() [kind:%s, track.id:%s]",g.kind,g.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),k.debug("send() | calling new RTCRtpSender()");const N=new RTCRtpSender(g,this._dtlsTransport),R=y.clone(this._sendingRtpParametersByKind[g.kind]);R.codecs=E.reduceCodecs(R.codecs,z);const S=R.codecs.some(O=>/.+\/rtx$/i.test(O.mimeType));A||(A=[{}]);for(const O of A)O.ssrc=y.generateRandomNumber(),S&&(O.rtx={ssrc:y.generateRandomNumber()});R.encodings=A,R.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const p=_.mangleRtpParameters(R);k.debug("send() | calling rtpSender.send() [params:%o]",p),await N.send(p);const D=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(D,N),{localId:D,rtpParameters:R,rtpSender:N}}async stopSending(g){k.debug("stopSending() [localId:%s]",g);const A=this._rtpSenders.get(g);if(!A)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(g);try{k.debug("stopSending() | calling rtpSender.stop()"),A.stop()}catch(P){throw k.warn("stopSending() | rtpSender.stop() failed:%o",P),P}}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,A){A?k.debug("replaceTrack() [localId:%s, track.id:%s]",g,A.id):k.debug("replaceTrack() [localId:%s, no track]",g);const P=this._rtpSenders.get(g);if(!P)throw new Error("RTCRtpSender not found");P.setTrack(A)}async setMaxSpatialLayer(g,A){k.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",g,A);const P=this._rtpSenders.get(g);if(!P)throw new Error("RTCRtpSender not found");const z=P.getParameters();z.encodings.forEach((N,R)=>{N.active=R<=A}),await P.setParameters(z)}async setRtpEncodingParameters(g,A){k.debug("setRtpEncodingParameters() [localId:%s, params:%o]",g,A);const P=this._rtpSenders.get(g);if(!P)throw new Error("RTCRtpSender not found");const z=P.getParameters();z.encodings.forEach((N,R)=>{z.encodings[R]={...N,...A}}),await P.setParameters(z)}async getSenderStats(g){const A=this._rtpSenders.get(g);if(!A)throw new Error("RTCRtpSender not found");return A.getStats()}async sendDataChannel(g){throw new f.UnsupportedError("not implemented")}async receive(g){const A=[];for(const P of g){const{trackId:z,kind:N}=P;k.debug("receive() [trackId:%s, kind:%s]",z,N)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const P of g){const{trackId:z,kind:N,rtpParameters:R}=P;k.debug("receive() | calling new RTCRtpReceiver()");const S=new RTCRtpReceiver(this._dtlsTransport,N);S.addEventListener("error",O=>{k.error('rtpReceiver "error" event [event:%o]',O)});const p=_.mangleRtpParameters(R);k.debug("receive() | calling rtpReceiver.receive() [params:%o]",p),await S.receive(p);const D=z;this._rtpReceivers.set(D,S),A.push({localId:D,track:S.track,rtpReceiver:S})}return A}async stopReceiving(g){for(const A of g){k.debug("stopReceiving() [localId:%s]",A);const P=this._rtpReceivers.get(A);if(!P)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(A);try{k.debug("stopReceiving() | calling rtpReceiver.stop()"),P.stop()}catch(z){k.warn("stopReceiving() | rtpReceiver.stop() failed:%o",z)}}}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){const A=this._rtpReceivers.get(g);if(!A)throw new Error("RTCRtpReceiver not found");return A.getStats()}async receiveDataChannel(g){throw new f.UnsupportedError("not implemented")}setIceGatherer({iceServers:g,iceTransportPolicy:A}){const P=new RTCIceGatherer({iceServers:g??[],gatherPolicy:A??"all"});P.addEventListener("error",z=>{k.error('iceGatherer "error" event [event:%o]',z)});try{P.gather()}catch(z){k.debug("setIceGatherer() | iceGatherer.gather() failed: %s",z.toString())}this._iceGatherer=P}setIceTransport(){const g=new RTCIceTransport(this._iceGatherer);g.addEventListener("statechange",()=>{switch(g.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),g.addEventListener("icestatechange",()=>{switch(g.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),g.addEventListener("candidatepairchange",A=>{k.debug('iceTransport "candidatepairchange" event [pair:%o]',A.pair)}),this._iceTransport=g}setDtlsTransport(){const g=new RTCDtlsTransport(this._iceTransport);g.addEventListener("statechange",()=>{k.debug('dtlsTransport "statechange" event [state:%s]',g.state)}),g.addEventListener("dtlsstatechange",()=>{k.debug('dtlsTransport "dtlsstatechange" event [state:%s]',g.state),g.state==="closed"&&this.emit("@connectionstatechange","closed")}),g.addEventListener("error",A=>{k.error('dtlsTransport "error" event [event:%o]',A)}),this._dtlsTransport=g}async setupTransport({localDtlsRole:g}){k.debug("setupTransport()");const A=this._dtlsTransport.getLocalParameters();A.role=g,await new Promise((P,z)=>{this.safeEmit("@connect",{dtlsParameters:A},P,z)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const P of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(P);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(P=>P.algorithm==="sha-256"||P.algorithm==="sha-384"||P.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}b.Edge11=w},8751:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.getCapabilities=function(){const f=RTCRtpReceiver.getCapabilities(),y=x.clone(f);for(const E of y.codecs??[]){if(E.channels=E.numChannels,delete E.numChannels,E.mimeType=E.mimeType??`${E.kind}/${E.name}`,E.parameters){const _=E.parameters;_.apt&&(_.apt=Number(_.apt)),_["packetization-mode"]&&(_["packetization-mode"]=Number(_["packetization-mode"]))}for(const _ of E.rtcpFeedback??[])_.parameter||(_.parameter="")}return y},b.mangleRtpParameters=function(f){const y=x.clone(f);y.mid&&(y.muxId=y.mid,delete y.mid);for(const E of y.codecs)E.channels&&(E.numChannels=E.channels,delete E.channels),E.mimeType&&!E.name&&(E.name=E.mimeType.split("/")[1]),delete E.mimeType;return y};const x=u(1765)},8876:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.AwaitQueueRemovedTaskError=b.AwaitQueueStoppedError=b.AwaitQueue=void 0;var x=u(9275);Object.defineProperty(b,"AwaitQueue",{enumerable:!0,get:function(){return x.AwaitQueue}});var f=u(4253);Object.defineProperty(b,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return f.AwaitQueueStoppedError}}),Object.defineProperty(b,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return f.AwaitQueueRemovedTaskError}})},9021:function(T,b,u){var x;T.exports=(x=x||function(f,y){var E;if(typeof window<"u"&&window.crypto&&(E=window.crypto),typeof self<"u"&&self.crypto&&(E=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(E=globalThis.crypto),!E&&typeof window<"u"&&window.msCrypto&&(E=window.msCrypto),!E&&u.g!==void 0&&u.g.crypto&&(E=u.g.crypto),!E)try{E=u(477)}catch{}var _=function(){if(E){if(typeof E.getRandomValues=="function")try{return E.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof E.randomBytes=="function")try{return E.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},m=Object.create||function(){function p(){}return function(D){var O;return p.prototype=D,O=new p,p.prototype=null,O}}(),k={},w=k.lib={},U=w.Base={extend:function(p){var D=m(this);return p&&D.mixIn(p),D.hasOwnProperty("init")&&this.init!==D.init||(D.init=function(){D.$super.init.apply(this,arguments)}),D.init.prototype=D,D.$super=this,D},create:function(){var p=this.extend();return p.init.apply(p,arguments),p},init:function(){},mixIn:function(p){for(var D in p)p.hasOwnProperty(D)&&(this[D]=p[D]);p.hasOwnProperty("toString")&&(this.toString=p.toString)},clone:function(){return this.init.prototype.extend(this)}},g=w.WordArray=U.extend({init:function(p,D){p=this.words=p||[],this.sigBytes=D!=y?D:4*p.length},toString:function(p){return(p||P).stringify(this)},concat:function(p){var D=this.words,O=p.words,j=this.sigBytes,I=p.sigBytes;if(this.clamp(),j%4)for(var H=0;H<I;H++){var F=O[H>>>2]>>>24-H%4*8&255;D[j+H>>>2]|=F<<24-(j+H)%4*8}else for(var $=0;$<I;$+=4)D[j+$>>>2]=O[$>>>2];return this.sigBytes+=I,this},clamp:function(){var p=this.words,D=this.sigBytes;p[D>>>2]&=4294967295<<32-D%4*8,p.length=f.ceil(D/4)},clone:function(){var p=U.clone.call(this);return p.words=this.words.slice(0),p},random:function(p){for(var D=[],O=0;O<p;O+=4)D.push(_());return new g.init(D,p)}}),A=k.enc={},P=A.Hex={stringify:function(p){for(var D=p.words,O=p.sigBytes,j=[],I=0;I<O;I++){var H=D[I>>>2]>>>24-I%4*8&255;j.push((H>>>4).toString(16)),j.push((15&H).toString(16))}return j.join("")},parse:function(p){for(var D=p.length,O=[],j=0;j<D;j+=2)O[j>>>3]|=parseInt(p.substr(j,2),16)<<24-j%8*4;return new g.init(O,D/2)}},z=A.Latin1={stringify:function(p){for(var D=p.words,O=p.sigBytes,j=[],I=0;I<O;I++){var H=D[I>>>2]>>>24-I%4*8&255;j.push(String.fromCharCode(H))}return j.join("")},parse:function(p){for(var D=p.length,O=[],j=0;j<D;j++)O[j>>>2]|=(255&p.charCodeAt(j))<<24-j%4*8;return new g.init(O,D)}},N=A.Utf8={stringify:function(p){try{return decodeURIComponent(escape(z.stringify(p)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(p){return z.parse(unescape(encodeURIComponent(p)))}},R=w.BufferedBlockAlgorithm=U.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(p){typeof p=="string"&&(p=N.parse(p)),this._data.concat(p),this._nDataBytes+=p.sigBytes},_process:function(p){var D,O=this._data,j=O.words,I=O.sigBytes,H=this.blockSize,F=I/(4*H),$=(F=p?f.ceil(F):f.max((0|F)-this._minBufferSize,0))*H,q=f.min(4*$,I);if($){for(var se=0;se<$;se+=H)this._doProcessBlock(j,se);D=j.splice(0,$),O.sigBytes-=q}return new g.init(D,q)},clone:function(){var p=U.clone.call(this);return p._data=this._data.clone(),p},_minBufferSize:0}),S=(w.Hasher=R.extend({cfg:U.extend(),init:function(p){this.cfg=this.cfg.extend(p),this.reset()},reset:function(){R.reset.call(this),this._doReset()},update:function(p){return this._append(p),this._process(),this},finalize:function(p){return p&&this._append(p),this._doFinalize()},blockSize:16,_createHelper:function(p){return function(D,O){return new p.init(O).finalize(D)}},_createHmacHelper:function(p){return function(D,O){return new S.HMAC.init(p,O).finalize(D)}}}),k.algo={});return k}(Math),x)},9027:(T,b,u)=>{u.d(b,{$:()=>x});var x={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"osneSixNine"},h360p_w640p_150kbps:{width:640,height:360,bitRate:15e4,frameRate:15,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{resolution:{width:640,height:360},frameRate:30,bitrates:{high:4e5,medium:2e5,low:1e5}},h480p_15fps:{resolution:{width:854,height:480},frameRate:15,bitrates:{high:3e5,medium:15e4,low:75e3}},h480p_30fps:{resolution:{width:854,height:480},frameRate:30,bitrates:{high:5e5,medium:25e4,low:125e3}},h720p_5fps:{resolution:{width:1280,height:720},frameRate:5,bitrates:{high:4e5,medium:2e5,low:1e5}},h720p_15fps:{resolution:{width:1280,height:720},frameRate:15,bitrates:{high:1e6,medium:5e5,low:25e4}},h720p_30fps:{resolution:{width:1280,height:720},frameRate:30,bitrates:{high:15e5,medium:75e4,low:375e3}},h1080p_15fps:{resolution:{width:1920,height:1080},frameRate:15,bitrates:{high:15e5,medium:75e4,low:3e5}},h1080p_30fps:{resolution:{width:1920,height:1080},frameRate:30,bitrates:{high:2e6,medium:1e6,low:5e5}}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},9166:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DataConsumer=void 0;const x=u(2994),f=u(3953),y=new x.Logger("DataConsumer");class E extends f.EnhancedEventEmitter{_id;_dataProducerId;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new f.EnhancedEventEmitter;constructor({id:m,dataProducerId:k,dataChannel:w,sctpStreamParameters:U,appData:g}){super(),y.debug("constructor()"),this._id=m,this._dataProducerId=k,this._dataChannel=w,this._sctpStreamParameters=U,this._appData=g??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(m){this._dataChannel.binaryType=m}get appData(){return this._appData}set appData(m){this._appData=m}get observer(){return this._observer}close(){this._closed||(y.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(y.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(y.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",m=>{if(this._closed)return;let{error:k}=m;k||(k=new Error("unknown DataChannel error")),k.errorDetail==="sctp-failure"?y.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",k.sctpCauseCode,k.message):y.error('DataChannel "error" event: %o',k),this.safeEmit("error",k)}),this._dataChannel.addEventListener("close",()=>{this._closed||(y.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",m=>{this._closed||this.safeEmit("message",m.data)})}}b.DataConsumer=E},9275:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.AwaitQueue=void 0;const x=u(8274),f=u(4253),y=new x.Logger("AwaitQueue");b.AwaitQueue=class{pendingTasks=new Map;nextTaskId=0;stopping=!1;constructor(){y.debug("constructor()")}get size(){return this.pendingTasks.size}async push(E,_){if(_=_??E.name,y.debug(`push() [name:${_}]`),typeof E!="function")throw new TypeError("given task is not a function");if(_)try{Object.defineProperty(E,"name",{value:_})}catch{}return new Promise((m,k)=>{const w={id:this.nextTaskId++,task:E,name:_,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:U=>{if(w.completed)return;w.completed=!0,this.pendingTasks.delete(w.id),y.debug(`resolving task [name:${w.name}]`),m(U);const[g]=this.pendingTasks.values();g&&!g.executedAt&&this.execute(g)},reject:U=>{if(!w.completed&&(w.completed=!0,this.pendingTasks.delete(w.id),y.debug(`rejecting task [name:${w.name}]: %s`,String(U)),k(U),!this.stopping)){const[g]=this.pendingTasks.values();g&&!g.executedAt&&this.execute(g)}}};this.pendingTasks.set(w.id,w),this.pendingTasks.size===1&&this.execute(w)})}stop(){y.debug("stop()"),this.stopping=!0;for(const E of this.pendingTasks.values())y.debug(`stop() | stopping task [name:${E.name}]`),E.reject(new f.AwaitQueueStoppedError);this.stopping=!1}remove(E){y.debug(`remove() [taskIdx:${E}]`);const _=Array.from(this.pendingTasks.values())[E];_?_.reject(new f.AwaitQueueRemovedTaskError):y.debug(`stop() | no task with given idx [taskIdx:${E}]`)}dump(){const E=Date.now();let _=0;return Array.from(this.pendingTasks.values()).map(m=>({idx:_++,task:m.task,name:m.name,enqueuedTime:m.executedAt?m.executedAt-m.enqueuedAt:E-m.enqueuedAt,executionTime:m.executedAt?E-m.executedAt:0}))}async execute(E){if(y.debug(`execute() [name:${E.name}]`),E.executedAt)throw new Error("task already being executed");E.executedAt=Date.now();try{const _=await E.task();E.resolve(_)}catch(_){E.reject(_)}}}},9352:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ReactNative=void 0;const x=u(7363),f=u(2994),y=u(4893),E=u(1765),_=u(8046),m=u(5544),k=u(4496),w=u(521),U=u(1305),g=new f.Logger("ReactNative"),A={OS:1024,MIS:1024};class P extends w.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdTrack=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new P}constructor(){super()}get name(){return"ReactNative"}close(){if(g.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");const N=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const R=await N.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{N.close()}catch{}const S=x.parse(R.sdp);return m.extractRtpCapabilities({sdpObject:S})}catch(R){try{N.close()}catch{}throw R}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:A}}run({direction:N,iceParameters:R,iceCandidates:S,dtlsParameters:p,sctpParameters:D,iceServers:O,iceTransportPolicy:j,additionalSettings:I,proprietaryConstraints:H,extendedRtpCapabilities:F}){g.debug("run()"),this._direction=N,this._remoteSdp=new U.RemoteSdp({iceParameters:R,iceCandidates:S,dtlsParameters:p,sctpParameters:D,planB:!0}),this._sendingRtpParametersByKind={audio:_.getSendingRtpParameters("audio",F),video:_.getSendingRtpParameters("video",F)},this._sendingRemoteRtpParametersByKind={audio:_.getSendingRemoteRtpParameters("audio",F),video:_.getSendingRemoteRtpParameters("video",F)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:j??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...I},H),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",$=>{this.emit("@icecandidateerror",$)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(N){g.debug("updateIceServers()");const R=this._pc.getConfiguration();R.iceServers=N,this._pc.setConfiguration(R)}async restartIce(N){if(g.debug("restartIce()"),this._remoteSdp.updateIceParameters(N),this._transportReady)if(this._direction==="send"){const R=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const S={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}else{const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const S=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}}async getTransportStats(){return this._pc.getStats()}async send({track:N,encodings:R,codecOptions:S,codec:p}){this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",N.kind,N.id),p&&g.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(N),this._pc.addStream(this._sendStream);let D,O=await this._pc.createOffer(),j=x.parse(O.sdp);j.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const I=E.clone(this._sendingRtpParametersByKind[N.kind]);I.codecs=_.reduceCodecs(I.codecs);const H=E.clone(this._sendingRemoteRtpParametersByKind[N.kind]);if(H.codecs=_.reduceCodecs(H.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),N.kind==="video"&&R&&R.length>1&&(g.debug("send() | enabling simulcast"),j=x.parse(O.sdp),D=j.media.find(q=>q.type==="video"),k.addLegacySimulcast({offerMediaObject:D,track:N,numStreams:R.length}),O={type:"offer",sdp:x.write(j)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),j=x.parse(this._pc.localDescription.sdp),D=j.media.find(q=>q.type===N.kind),I.rtcp.cname=m.getCname({offerMediaObject:D}),I.encodings=k.getRtpEncodings({offerMediaObject:D,track:N}),R)for(let q=0;q<I.encodings.length;++q)R[q]&&Object.assign(I.encodings[q],R[q]);if(I.encodings.length>1&&(I.codecs[0].mimeType.toLowerCase()==="video/vp8"||I.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const q of I.encodings)q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:D,offerRtpParameters:I,answerRtpParameters:H,codecOptions:S});const F={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F);const $=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set($,N),{localId:$,rtpParameters:I}}async stopSending(N){this.assertSendDirection(),g.debug("stopSending() [localId:%s]",N);const R=this._mapSendLocalIdTrack.get(N);if(!R)throw new Error("track not found");this._mapSendLocalIdTrack.delete(N),this._sendStream.removeTrack(R),this._pc.addStream(this._sendStream);const S=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",S);try{await this._pc.setLocalDescription(S)}catch(D){if(this._sendStream.getTracks().length===0)return void g.warn("stopSending() | ignoring expected error due no sending tracks: %s",D.toString());throw D}if(this._pc.signalingState==="stable")return;const p={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async pauseSending(N){}async resumeSending(N){}async replaceTrack(N,R){throw new y.UnsupportedError("not implemented")}async setMaxSpatialLayer(N,R){throw new y.UnsupportedError("not implemented")}async setRtpEncodingParameters(N,R){throw new y.UnsupportedError("not implemented")}async getSenderStats(N){throw new y.UnsupportedError("not implemented")}async sendDataChannel({ordered:N,maxPacketLifeTime:R,maxRetransmits:S,label:p,protocol:D}){this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:N,maxPacketLifeTime:R,maxRetransmitTime:R,maxRetransmits:S,protocol:D};g.debug("sendDataChannel() [options:%o]",O);const j=this._pc.createDataChannel(p,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%A.MIS,!this._hasDataChannelMediaSection){const I=await this._pc.createOffer(),H=x.parse(I.sdp),F=H.media.find(q=>q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I),this._remoteSdp.sendSctpAssociation({offerMediaObject:F});const $={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:j,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(N){this.assertRecvDirection();const R=[],S=new Map;for(const j of N){const{trackId:I,kind:H,rtpParameters:F}=j;g.debug("receive() [trackId:%s, kind:%s]",I,H);const $=H;let q=j.streamId??F.rtcp.cname;g.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),q+=`-hack-${E.generateRandomNumber()}`,S.set(I,q),this._remoteSdp.receive({mid:$,kind:H,offerRtpParameters:F,streamId:q,trackId:I})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let D=await this._pc.createAnswer();const O=x.parse(D.sdp);for(const j of N){const{kind:I,rtpParameters:H}=j,F=I,$=O.media.find(q=>String(q.mid)===F);m.applyCodecParameters({offerRtpParameters:H,answerMediaObject:$})}D={type:"answer",sdp:x.write(O)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const j of N){const{kind:I,trackId:H,rtpParameters:F}=j,$=H,q=I,se=S.get(H),J=this._pc.getRemoteStreams().find(be=>be.id===se).getTrackById($);if(!J)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set($,{mid:q,rtpParameters:F}),R.push({localId:$,track:J})}return R}async stopReceiving(N){this.assertRecvDirection();for(const p of N){g.debug("stopReceiving() [localId:%s]",p);const{mid:D,rtpParameters:O}=this._mapRecvLocalIdInfo.get(p)??{};this._mapRecvLocalIdInfo.delete(p),this._remoteSdp.planBStopReceiving({mid:D,offerRtpParameters:O})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const S=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}async pauseReceiving(N){}async resumeReceiving(N){}async getReceiverStats(N){throw new y.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:N,label:R,protocol:S}){this.assertRecvDirection();const{streamId:p,ordered:D,maxPacketLifeTime:O,maxRetransmits:j}=N,I={negotiated:!0,id:p,ordered:D,maxPacketLifeTime:O,maxRetransmitTime:O,maxRetransmits:j,protocol:S};g.debug("receiveDataChannel() [options:%o]",I);const H=this._pc.createDataChannel(R,I);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const F={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",F),await this._pc.setRemoteDescription(F);const $=await this._pc.createAnswer();if(!this._transportReady){const q=x.parse($.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:q})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setLocalDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:H}}async setupTransport({localDtlsRole:N,localSdpObject:R}){R||(R=x.parse(this._pc.localDescription.sdp));const S=m.extractDtlsParameters({sdpObject:R});S.role=N,this._remoteSdp.updateDtlsRole(N==="client"?"server":"client"),await new Promise((p,D)=>{this.safeEmit("@connect",{dtlsParameters:S},p,D)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.ReactNative=P},9506:function(T,b,u){var x,f,y,E,_,m,k,w;T.exports=(w=u(9021),u(5471),u(1025),f=(x=w).lib,y=f.Base,E=f.WordArray,_=x.algo,m=_.MD5,k=_.EvpKDF=y.extend({cfg:y.extend({keySize:4,hasher:m,iterations:1}),init:function(U){this.cfg=this.cfg.extend(U)},compute:function(U,g){for(var A,P=this.cfg,z=P.hasher.create(),N=E.create(),R=N.words,S=P.keySize,p=P.iterations;R.length<S;){A&&z.update(A),A=z.update(U).finalize(g),z.reset();for(var D=1;D<p;D++)A=z.finalize(A),z.reset();N.concat(A)}return N.sigBytes=4*S,N}}),x.EvpKDF=function(U,g,A){return k.create(A).compute(U,g)},w.EvpKDF)},9557:function(T,b,u){var x,f,y,E,_,m,k,w;T.exports=(w=u(9021),u(3240),u(1380),f=(x=w).x64,y=f.Word,E=f.WordArray,_=x.algo,m=_.SHA512,k=_.SHA384=m.extend({_doReset:function(){this._hash=new E.init([new y.init(3418070365,3238371032),new y.init(1654270250,914150663),new y.init(2438529370,812702999),new y.init(355462360,4144912697),new y.init(1731405415,4290775857),new y.init(2394180231,1750603025),new y.init(3675008525,1694076839),new y.init(1203062813,3204075428)])},_doFinalize:function(){var U=m._doFinalize.call(this);return U.sigBytes-=16,U}}),x.SHA384=m._createHelper(k),x.HmacSHA384=m._createHmacHelper(k),w.SHA384)},9596:T=>{var b,u=typeof Reflect=="object"?Reflect:null,x=u&&typeof u.apply=="function"?u.apply:function(N,R,S){return Function.prototype.apply.call(N,R,S)};b=u&&typeof u.ownKeys=="function"?u.ownKeys:Object.getOwnPropertySymbols?function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:function(N){return Object.getOwnPropertyNames(N)};var f=Number.isNaN||function(N){return N!=N};function y(){y.init.call(this)}T.exports=y,T.exports.once=function(N,R){return new Promise(function(S,p){function D(j){N.removeListener(R,O),p(j)}function O(){typeof N.removeListener=="function"&&N.removeListener("error",D),S([].slice.call(arguments))}z(N,R,O,{once:!0}),R!=="error"&&function(j,I,H){typeof j.on=="function"&&z(j,"error",I,H)}(N,D,{once:!0})})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var E=10;function _(N){if(typeof N!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N)}function m(N){return N._maxListeners===void 0?y.defaultMaxListeners:N._maxListeners}function k(N,R,S,p){var D,O,j,I;if(_(S),(O=N._events)===void 0?(O=N._events=Object.create(null),N._eventsCount=0):(O.newListener!==void 0&&(N.emit("newListener",R,S.listener?S.listener:S),O=N._events),j=O[R]),j===void 0)j=O[R]=S,++N._eventsCount;else if(typeof j=="function"?j=O[R]=p?[S,j]:[j,S]:p?j.unshift(S):j.push(S),(D=m(N))>0&&j.length>D&&!j.warned){j.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=N,H.type=R,H.count=j.length,I=H,console&&console.warn&&console.warn(I)}return N}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function U(N,R,S){var p={fired:!1,wrapFn:void 0,target:N,type:R,listener:S},D=w.bind(p);return D.listener=S,p.wrapFn=D,D}function g(N,R,S){var p=N._events;if(p===void 0)return[];var D=p[R];return D===void 0?[]:typeof D=="function"?S?[D.listener||D]:[D]:S?function(O){for(var j=new Array(O.length),I=0;I<j.length;++I)j[I]=O[I].listener||O[I];return j}(D):P(D,D.length)}function A(N){var R=this._events;if(R!==void 0){var S=R[N];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}function P(N,R){for(var S=new Array(R),p=0;p<R;++p)S[p]=N[p];return S}function z(N,R,S,p){if(typeof N.on=="function")p.once?N.once(R,S):N.on(R,S);else{if(typeof N.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof N);N.addEventListener(R,function D(O){p.once&&N.removeEventListener(R,D),S(O)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(N){if(typeof N!="number"||N<0||f(N))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+N+".");E=N}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||f(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this},y.prototype.getMaxListeners=function(){return m(this)},y.prototype.emit=function(N){for(var R=[],S=1;S<arguments.length;S++)R.push(arguments[S]);var p=N==="error",D=this._events;if(D!==void 0)p=p&&D.error===void 0;else if(!p)return!1;if(p){var O;if(R.length>0&&(O=R[0]),O instanceof Error)throw O;var j=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw j.context=O,j}var I=D[N];if(I===void 0)return!1;if(typeof I=="function")x(I,this,R);else{var H=I.length,F=P(I,H);for(S=0;S<H;++S)x(F[S],this,R)}return!0},y.prototype.addListener=function(N,R){return k(this,N,R,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(N,R){return k(this,N,R,!0)},y.prototype.once=function(N,R){return _(R),this.on(N,U(this,N,R)),this},y.prototype.prependOnceListener=function(N,R){return _(R),this.prependListener(N,U(this,N,R)),this},y.prototype.removeListener=function(N,R){var S,p,D,O,j;if(_(R),(p=this._events)===void 0)return this;if((S=p[N])===void 0)return this;if(S===R||S.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete p[N],p.removeListener&&this.emit("removeListener",N,S.listener||R));else if(typeof S!="function"){for(D=-1,O=S.length-1;O>=0;O--)if(S[O]===R||S[O].listener===R){j=S[O].listener,D=O;break}if(D<0)return this;D===0?S.shift():function(I,H){for(;H+1<I.length;H++)I[H]=I[H+1];I.pop()}(S,D),S.length===1&&(p[N]=S[0]),p.removeListener!==void 0&&this.emit("removeListener",N,j||R)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(N){var R,S,p;if((S=this._events)===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[N]),this;if(arguments.length===0){var D,O=Object.keys(S);for(p=0;p<O.length;++p)(D=O[p])!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(R=S[N])=="function")this.removeListener(N,R);else if(R!==void 0)for(p=R.length-1;p>=0;p--)this.removeListener(N,R[p]);return this},y.prototype.listeners=function(N){return g(this,N,!0)},y.prototype.rawListeners=function(N){return g(this,N,!1)},y.listenerCount=function(N,R){return typeof N.listenerCount=="function"?N.listenerCount(R):A.call(N,R)},y.prototype.listenerCount=A,y.prototype.eventNames=function(){return this._eventsCount>0?b(this._events):[]}},9633:(T,b,u)=>{u.d(b,{l:()=>R});var x=u(467),f=u(3029),y=u(2901),E=u(388),_=u(3954),m=u(5501),k=u(4756),w=u.n(k),U=u(7007),g=u(1806),A=u(6746),P=u(8278);function z(S,p,D){return p=(0,_.A)(p),(0,E.A)(S,N()?Reflect.construct(p,D||[],(0,_.A)(S).constructor):p.apply(S,D))}function N(){try{var S=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N=function(){return!!S})()}var R=function(S){function p(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,f.A)(this,p),z(this,p,[Object.assign(Object.assign({},O),{sharedKey:!0,ratchetWindowSize:0,failureTolerance:-1})])}return(0,m.A)(p,S),(0,y.A)(p,[{key:"setSharedKey",value:(D=(0,x.A)(w().mark(function O(j){var I,H;return w().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(typeof j!="string"){F.next=2;break}return F.next=1,(0,P.sn)(j);case 1:H=F.sent,F.next=4;break;case 2:return F.next=3,(0,P.tr)(j);case 3:H=F.sent;case 4:I=H,this.onSetEncryptionKey(I);case 5:case"end":return F.stop()}},O,this)})),function(O){return D.apply(this,arguments)})}]);var D}(function(S){function p(){var D,O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,f.A)(this,p),(D=z(this,p)).onKeyRatcheted=function(j,I){console.debug("key ratcheted event received",{material:j,keyIndex:I})},D.keyInfoMap=new Map,D.options=Object.assign(Object.assign({},g.T4),O),D.on(A.fo.KeyRatcheted,D.onKeyRatcheted),D}return(0,m.A)(p,S),(0,y.A)(p,[{key:"onSetEncryptionKey",value:function(D,O,j){var I={key:D,participantIdentity:O,keyIndex:j};if(!this.options.sharedKey&&!O)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(O??"shared","-").concat(j??0),I),this.emit(A.fo.SetKey,I)}},{key:"getKeys",value:function(){return Array.from(this.keyInfoMap.values())}},{key:"getOptions",value:function(){return this.options}},{key:"ratchetKey",value:function(D,O){this.emit(A.fo.RatchetRequest,D,O)}}])}(U.EventEmitter))},9676:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Safari11=void 0;const x=u(7363),f=u(2994),y=u(1765),E=u(8046),_=u(5544),m=u(4496),k=u(521),w=u(1305),U=new f.Logger("Safari11"),g={OS:1024,MIS:1024};class A extends k.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdRtpSender=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new A}constructor(){super()}get name(){return"Safari11"}close(){if(U.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){U.debug("getNativeRtpCapabilities()");const z=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const N=await z.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{z.close()}catch{}const R=x.parse(N.sdp);return _.extractRtpCapabilities({sdpObject:R})}catch(N){try{z.close()}catch{}throw N}}async getNativeSctpCapabilities(){return U.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:z,iceParameters:N,iceCandidates:R,dtlsParameters:S,sctpParameters:p,iceServers:D,iceTransportPolicy:O,additionalSettings:j,proprietaryConstraints:I,extendedRtpCapabilities:H}){U.debug("run()"),this._direction=z,this._remoteSdp=new w.RemoteSdp({iceParameters:N,iceCandidates:R,dtlsParameters:S,sctpParameters:p,planB:!0}),this._sendingRtpParametersByKind={audio:E.getSendingRtpParameters("audio",H),video:E.getSendingRtpParameters("video",H)},this._sendingRemoteRtpParametersByKind={audio:E.getSendingRemoteRtpParameters("audio",H),video:E.getSendingRemoteRtpParameters("video",H)},S.role&&S.role!=="auto"&&(this._forcedLocalDtlsRole=S.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:D??[],iceTransportPolicy:O??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...j},I),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",F=>{this.emit("@icecandidateerror",F)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(U.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(z){U.debug("updateIceServers()");const N=this._pc.getConfiguration();N.iceServers=z,this._pc.setConfiguration(N)}async restartIce(z){if(U.debug("restartIce()"),this._remoteSdp.updateIceParameters(z),this._transportReady)if(this._direction==="send"){const N=await this._pc.createOffer({iceRestart:!0});U.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const R={type:"answer",sdp:this._remoteSdp.getSdp()};U.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const N={type:"offer",sdp:this._remoteSdp.getSdp()};U.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",N),await this._pc.setRemoteDescription(N);const R=await this._pc.createAnswer();U.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this._pc.getStats()}async send({track:z,encodings:N,codecOptions:R,codec:S}){this.assertSendDirection(),U.debug("send() [kind:%s, track.id:%s]",z.kind,z.id),S&&U.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(z),this._pc.addTrack(z,this._sendStream);let p,D=await this._pc.createOffer(),O=x.parse(D.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const j=y.clone(this._sendingRtpParametersByKind[z.kind]);j.codecs=E.reduceCodecs(j.codecs);const I=y.clone(this._sendingRemoteRtpParametersByKind[z.kind]);if(I.codecs=E.reduceCodecs(I.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),z.kind==="video"&&N&&N.length>1&&(U.debug("send() | enabling simulcast"),O=x.parse(D.sdp),p=O.media.find(q=>q.type==="video"),m.addLegacySimulcast({offerMediaObject:p,track:z,numStreams:N.length}),D={type:"offer",sdp:x.write(O)}),U.debug("send() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),O=x.parse(this._pc.localDescription.sdp),p=O.media.find(q=>q.type===z.kind),j.rtcp.cname=_.getCname({offerMediaObject:p}),j.encodings=m.getRtpEncodings({offerMediaObject:p,track:z}),N)for(let q=0;q<j.encodings.length;++q)N[q]&&Object.assign(j.encodings[q],N[q]);if(j.encodings.length>1&&j.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const q of j.encodings)q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:j,answerRtpParameters:I,codecOptions:R});const H={type:"answer",sdp:this._remoteSdp.getSdp()};U.debug("send() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H);const F=String(this._nextSendLocalId);this._nextSendLocalId++;const $=this._pc.getSenders().find(q=>q.track===z);return this._mapSendLocalIdRtpSender.set(F,$),{localId:F,rtpParameters:j,rtpSender:$}}async stopSending(z){this.assertSendDirection();const N=this._mapSendLocalIdRtpSender.get(z);if(!N)throw new Error("associated RTCRtpSender not found");N.track&&this._sendStream.removeTrack(N.track),this._mapSendLocalIdRtpSender.delete(z);const R=await this._pc.createOffer();U.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R);try{await this._pc.setLocalDescription(R)}catch(p){if(this._sendStream.getTracks().length===0)return void U.warn("stopSending() | ignoring expected error due no sending tracks: %s",p.toString());throw p}if(this._pc.signalingState==="stable")return;const S={type:"answer",sdp:this._remoteSdp.getSdp()};U.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async pauseSending(z){}async resumeSending(z){}async replaceTrack(z,N){this.assertSendDirection(),N?U.debug("replaceTrack() [localId:%s, track.id:%s]",z,N.id):U.debug("replaceTrack() [localId:%s, no track]",z);const R=this._mapSendLocalIdRtpSender.get(z);if(!R)throw new Error("associated RTCRtpSender not found");const S=R.track;await R.replaceTrack(N),S&&this._sendStream.removeTrack(S),N&&this._sendStream.addTrack(N)}async setMaxSpatialLayer(z,N){this.assertSendDirection(),U.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",z,N);const R=this._mapSendLocalIdRtpSender.get(z);if(!R)throw new Error("associated RTCRtpSender not found");const S=R.getParameters();S.encodings.forEach((p,D)=>{p.active=D<=N}),await R.setParameters(S)}async setRtpEncodingParameters(z,N){this.assertSendDirection(),U.debug("setRtpEncodingParameters() [localId:%s, params:%o]",z,N);const R=this._mapSendLocalIdRtpSender.get(z);if(!R)throw new Error("associated RTCRtpSender not found");const S=R.getParameters();S.encodings.forEach((p,D)=>{S.encodings[D]={...p,...N}}),await R.setParameters(S)}async getSenderStats(z){this.assertSendDirection();const N=this._mapSendLocalIdRtpSender.get(z);if(!N)throw new Error("associated RTCRtpSender not found");return N.getStats()}async sendDataChannel({ordered:z,maxPacketLifeTime:N,maxRetransmits:R,label:S,protocol:p}){this.assertSendDirection();const D={negotiated:!0,id:this._nextSendSctpStreamId,ordered:z,maxPacketLifeTime:N,maxRetransmits:R,protocol:p};U.debug("sendDataChannel() [options:%o]",D);const O=this._pc.createDataChannel(S,D);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),I=x.parse(j.sdp),H=I.media.find($=>$.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),U.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:H});const F={type:"answer",sdp:this._remoteSdp.getSdp()};U.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:D.id,ordered:D.ordered,maxPacketLifeTime:D.maxPacketLifeTime,maxRetransmits:D.maxRetransmits}}}async receive(z){this.assertRecvDirection();const N=[];for(const D of z){const{trackId:O,kind:j,rtpParameters:I,streamId:H}=D;U.debug("receive() [trackId:%s, kind:%s]",O,j);const F=j;this._remoteSdp.receive({mid:F,kind:j,offerRtpParameters:I,streamId:H??I.rtcp.cname,trackId:O})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};U.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);let S=await this._pc.createAnswer();const p=x.parse(S.sdp);for(const D of z){const{kind:O,rtpParameters:j}=D,I=O,H=p.media.find(F=>String(F.mid)===I);_.applyCodecParameters({offerRtpParameters:j,answerMediaObject:H})}S={type:"answer",sdp:x.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),U.debug("receive() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S);for(const D of z){const{kind:O,trackId:j,rtpParameters:I}=D,H=O,F=j,$=this._pc.getReceivers().find(q=>q.track&&q.track.id===F);if(!$)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(F,{mid:H,rtpParameters:I,rtpReceiver:$}),N.push({localId:F,track:$.track,rtpReceiver:$})}return N}async stopReceiving(z){this.assertRecvDirection();for(const S of z){U.debug("stopReceiving() [localId:%s]",S);const{mid:p,rtpParameters:D}=this._mapRecvLocalIdInfo.get(S)??{};this._mapRecvLocalIdInfo.delete(S),this._remoteSdp.planBStopReceiving({mid:p,offerRtpParameters:D})}const N={type:"offer",sdp:this._remoteSdp.getSdp()};U.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",N),await this._pc.setRemoteDescription(N);const R=await this._pc.createAnswer();U.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(z){this.assertRecvDirection();const{rtpReceiver:N}=this._mapRecvLocalIdInfo.get(z)??{};if(!N)throw new Error("associated RTCRtpReceiver not found");return N.getStats()}async pauseReceiving(z){}async resumeReceiving(z){}async receiveDataChannel({sctpStreamParameters:z,label:N,protocol:R}){this.assertRecvDirection();const{streamId:S,ordered:p,maxPacketLifeTime:D,maxRetransmits:O}=z,j={negotiated:!0,id:S,ordered:p,maxPacketLifeTime:D,maxRetransmits:O,protocol:R};U.debug("receiveDataChannel() [options:%o]",j);const I=this._pc.createDataChannel(N,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const H={type:"offer",sdp:this._remoteSdp.getSdp()};U.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",H),await this._pc.setRemoteDescription(H);const F=await this._pc.createAnswer();if(!this._transportReady){const $=x.parse(F.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$})}U.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setLocalDescription(F),this._hasDataChannelMediaSection=!0}return{dataChannel:I}}async setupTransport({localDtlsRole:z,localSdpObject:N}){N||(N=x.parse(this._pc.localDescription.sdp));const R=_.extractDtlsParameters({sdpObject:N});R.role=z,this._remoteSdp.updateDtlsRole(z==="client"?"server":"client"),await new Promise((S,p)=>{this.safeEmit("@connect",{dtlsParameters:R},S,p)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Safari11=A},9746:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0});const x=u(6697);b.default=function(f){return typeof f=="string"&&x.default.test(f)}},9792:(T,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Producer=void 0;const x=u(2994),f=u(3953),y=u(4893),E=new x.Logger("Producer");class _ extends f.EnhancedEventEmitter{_id;_localId;_closed=!1;_rtpSender;_track;_kind;_rtpParameters;_paused;_maxSpatialLayer;_stopTracks;_disableTrackOnPause;_zeroRtpOnPause;_appData;_observer=new f.EnhancedEventEmitter;constructor({id:k,localId:w,rtpSender:U,track:g,rtpParameters:A,stopTracks:P,disableTrackOnPause:z,zeroRtpOnPause:N,appData:R}){super(),E.debug("constructor()"),this._id=k,this._localId=w,this._rtpSender=U,this._track=g,this._kind=g.kind,this._rtpParameters=A,this._paused=!!z&&!g.enabled,this._maxSpatialLayer=void 0,this._stopTracks=P,this._disableTrackOnPause=z,this._zeroRtpOnPause=N,this._appData=R??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(k){this._appData=k}get observer(){return this._observer}close(){this._closed||(E.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(E.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new y.InvalidStateError("closed");return new Promise((k,w)=>{this.safeEmit("@getstats",k,w)})}pause(){E.debug("pause()"),this._closed?E.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((k,w)=>{this.safeEmit("@pause",k,w)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){E.debug("resume()"),this._closed?E.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((k,w)=>{this.safeEmit("@resume",k,w)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:k}){if(E.debug("replaceTrack() [track:%o]",k),this._closed){if(k&&this._stopTracks)try{k.stop()}catch{}throw new y.InvalidStateError("closed")}if(k&&k.readyState==="ended")throw new y.InvalidStateError("track ended");k!==this._track?(await new Promise((w,U)=>{this.safeEmit("@replacetrack",k,w,U)}),this.destroyTrack(),this._track=k,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):E.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(k){if(this._closed)throw new y.InvalidStateError("closed");if(this._kind!=="video")throw new y.UnsupportedError("not a video Producer");if(typeof k!="number")throw new TypeError("invalid spatialLayer");k!==this._maxSpatialLayer&&(await new Promise((w,U)=>{this.safeEmit("@setmaxspatiallayer",k,w,U)}).catch(()=>{}),this._maxSpatialLayer=k)}async setRtpEncodingParameters(k){if(this._closed)throw new y.InvalidStateError("closed");if(typeof k!="object")throw new TypeError("invalid params");await new Promise((w,U)=>{this.safeEmit("@setrtpencodingparameters",k,w,U)})}onTrackEnded(){E.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}b.Producer=_}},l={};function d(T){var b=l[T];if(b!==void 0)return b.exports;var u=l[T]={exports:{}};return s[T].call(u.exports,u,u.exports,d),u.exports}d.amdO={},d.n=T=>{var b=T&&T.__esModule?()=>T.default:()=>T;return d.d(b,{a:b}),b},d.d=(T,b)=>{for(var u in b)d.o(b,u)&&!d.o(T,u)&&Object.defineProperty(T,u,{enumerable:!0,get:b[u]})},d.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),d.o=(T,b)=>Object.prototype.hasOwnProperty.call(T,b),d.r=T=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})};var C={};return(()=>{d.r(C),d.d(C,{CameraDeviceInfo:()=>sl,DeviceInfo:()=>yo,ExternalE2EEKeyProvider:()=>ur.l,MicrophoneDeviceInfo:()=>Pl,VideoSDK:()=>oa,ZujoSDK:()=>Gr});var T=d(2284),b=d(467),u=d(3029),x=d(2901),f=d(4467),y=d(4756),E=d.n(y),_=d(6880),m=d.n(_);function k(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function w(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?k(Object(X),!0).forEach(function(de){(0,f.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):k(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}function U(G){return"Minified Redux error #"+G+"; visit https://redux.js.org/Errors?code="+G+" for the full message or use the non-minified dev environment for full errors. "}var g=typeof Symbol=="function"&&Symbol.observable||"@@observable",A=function(){return Math.random().toString(36).substring(7).split("").join(".")},P={INIT:"@@redux/INIT"+A(),REPLACE:"@@redux/REPLACE"+A(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+A()}};function z(G){if(typeof G!="object"||G===null)return!1;for(var K=G;Object.getPrototypeOf(K)!==null;)K=Object.getPrototypeOf(K);return Object.getPrototypeOf(G)===K}function N(G,K,X){var de;if(typeof K=="function"&&typeof X=="function"||typeof X=="function"&&typeof arguments[3]=="function")throw new Error(U(0));if(typeof K=="function"&&X===void 0&&(X=K,K=void 0),X!==void 0){if(typeof X!="function")throw new Error(U(1));return X(N)(G,K)}if(typeof G!="function")throw new Error(U(2));var Ee=G,xe=K,we=[],We=we,ke=!1;function Oe(){We===we&&(We=we.slice())}function Xe(){if(ke)throw new Error(U(3));return xe}function $e(tt){if(typeof tt!="function")throw new Error(U(4));if(ke)throw new Error(U(5));var ue=!0;return Oe(),We.push(tt),function(){if(ue){if(ke)throw new Error(U(6));ue=!1,Oe();var pe=We.indexOf(tt);We.splice(pe,1),we=null}}}function Ae(tt){if(!z(tt))throw new Error(U(7));if(tt.type===void 0)throw new Error(U(8));if(ke)throw new Error(U(9));try{ke=!0,xe=Ee(xe,tt)}finally{ke=!1}for(var ue=we=We,pe=0;pe<ue.length;pe++)(0,ue[pe])();return tt}return Ae({type:P.INIT}),(de={dispatch:Ae,subscribe:$e,getState:Xe,replaceReducer:function(tt){if(typeof tt!="function")throw new Error(U(10));Ee=tt,Ae({type:P.REPLACE})}})[g]=function(){var tt,ue=$e;return(tt={subscribe:function(pe){if(typeof pe!="object"||pe===null)throw new Error(U(11));function Ie(){pe.next&&pe.next(Xe())}return Ie(),{unsubscribe:ue(Ie)}}})[g]=function(){return this},tt},de}function R(){for(var G=arguments.length,K=new Array(G),X=0;X<G;X++)K[X]=arguments[X];return K.length===0?function(de){return de}:K.length===1?K[0]:K.reduce(function(de,Ee){return function(){return de(Ee.apply(void 0,arguments))}})}function S(){for(var G=arguments.length,K=new Array(G),X=0;X<G;X++)K[X]=arguments[X];return function(de){return function(){var Ee=de.apply(void 0,arguments),xe=function(){throw new Error(U(15))},we={getState:Ee.getState,dispatch:function(){return xe.apply(void 0,arguments)}},We=K.map(function(ke){return ke(we)});return xe=R.apply(void 0,We)(Ee.dispatch),w(w({},Ee),{},{dispatch:xe})}}}function p(G){return function(K){var X=K.dispatch,de=K.getState;return function(Ee){return function(xe){return typeof xe=="function"?xe(X,de,G):Ee(xe)}}}}var D=p();D.withExtraArgument=p;const O=D;var j=d(2211),I=d.n(j);function H(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function F(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?H(Object(X),!0).forEach(function(de){(0,f.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):H(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var $={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const q=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_URL":var X=K.payload.url;return F(F({},G),{},{url:X});case"SET_ROOM_STATE":var de=K.payload.state;return F(F({},G),{},de==="connected"?{state:de}:{state:de,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var Ee=K.payload.peerId;return F(F({},G),{},{activeSpeakerId:Ee});case"SET_ROOM_STATS_PEER_ID":var xe=K.payload.peerId;return G.statsPeerId===xe?F(F({},G),{},{statsPeerId:null}):F(F({},G),{},{statsPeerId:xe});case"SET_FACE_DETECTION":var we=K.payload;return F(F({},G),{},{faceDetection:we});case"REMOVE_PEER":var We=K.payload.peerId,ke=F({},G);return We&&We===G.activeSpeakerId&&(ke.activeSpeakerId=null),We&&We===G.statsPeerId&&(ke.statsPeerId=null),ke;default:return G}};function se(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function J(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?se(Object(X),!0).forEach(function(de){(0,f.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):se(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var be={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const Re=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:be,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?J(J({},G),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):G;case"SET_ME":var X=K.payload,de=X.peerId,Ee=X.displayName,xe=X.displayNameSet,we=X.device;return J(J({},G),{},{id:de,displayName:Ee,displayNameSet:xe,device:we});case"SET_MEDIA_CAPABILITIES":var We=K.payload,ke=We.canSendMic,Oe=We.canSendWebcam;return J(J({},G),{},{canSendMic:ke,canSendWebcam:Oe});case"SET_CAN_CHANGE_WEBCAM":var Xe=K.payload;return J(J({},G),{},{canChangeWebcam:Xe});case"SET_WEBCAM_IN_PROGRESS":var $e=K.payload.flag;return J(J({},G),{},{webcamInProgress:$e});case"SET_SHARE_IN_PROGRESS":var Ae=K.payload.flag;return J(J({},G),{},{shareInProgress:Ae});case"SET_DISPLAY_NAME":var tt=K.payload.displayName;return tt||(tt=G.displayName),J(J({},G),{},{displayName:tt,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var ue=K.payload.enabled;return J(J({},G),{},{audioOnly:ue});case"SET_AUDIO_ONLY_IN_PROGRESS":var pe=K.payload.flag;return J(J({},G),{},{audioOnlyInProgress:pe});case"SET_AUDIO_MUTED_STATE":var Ie=K.payload.enabled;return J(J({},G),{},{audioMuted:Ie});case"SET_RESTART_ICE_IN_PROGRESS":var qe=K.payload.flag;return J(J({},G),{},{restartIceInProgress:qe});default:return G}};function Se(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function me(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?Se(Object(X),!0).forEach(function(de){(0,f.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):Se(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var Ce={};const Be=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:G;case"ADD_PRODUCER":var X=K.payload.producer;return me(me({},G),{},(0,f.A)({},X.id,X));case"REMOVE_PRODUCER":var de=K.payload.producerId,Ee=me({},G);return delete Ee[de],Ee;case"SET_PRODUCER_PAUSED":var xe=K.payload.producerId,we=me(me({},G[xe]),{},{paused:!0});return me(me({},G),{},(0,f.A)({},xe,we));case"SET_PRODUCER_RESUMED":var We=K.payload.producerId,ke=me(me({},G[We]),{},{paused:!1});return me(me({},G),{},(0,f.A)({},We,ke));case"SET_PRODUCER_TRACK":var Oe=K.payload,Xe=Oe.producerId,$e=Oe.track,Ae=me(me({},G[Xe]),{},{track:$e});return me(me({},G),{},(0,f.A)({},Xe,Ae));case"SET_PRODUCER_SCORE":var tt=K.payload,ue=tt.producerId,pe=tt.score,Ie=G[ue];if(!Ie)return G;var qe=me(me({},Ie),{},{score:pe});return me(me({},G),{},(0,f.A)({},ue,qe));default:return G}};function _e(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function Ye(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?_e(Object(X),!0).forEach(function(de){(0,f.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):_e(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var Qe={};const Ge=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qe,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:G;case"ADD_DATA_PRODUCER":var X=K.payload.dataProducer;return Ye(Ye({},G),{},(0,f.A)({},X.id,X));case"REMOVE_DATA_PRODUCER":var de=K.payload.dataProducerId,Ee=Ye({},G);return delete Ee[de],Ee;default:return G}};var He=d(5458);function Te(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function dt(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?Te(Object(X),!0).forEach(function(de){(0,f.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):Te(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var yt={};function on(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function ln(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?on(Object(X),!0).forEach(function(de){(0,f.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):on(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var Pn={};function En(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function rn(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?En(Object(X),!0).forEach(function(de){(0,f.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):En(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}var Ne={},Me=[];const Ze=function(G){for(var K=Object.keys(G),X={},de=0;de<K.length;de++){var Ee=K[de];typeof G[Ee]=="function"&&(X[Ee]=G[Ee])}var xe,we=Object.keys(X);try{(function(We){Object.keys(We).forEach(function(ke){var Oe=We[ke];if(Oe(void 0,{type:P.INIT})===void 0)throw new Error(U(12));if(Oe(void 0,{type:P.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(U(13))})})(X)}catch(We){xe=We}return function(We,ke){if(We===void 0&&(We={}),xe)throw xe;for(var Oe=!1,Xe={},$e=0;$e<we.length;$e++){var Ae=we[$e],tt=X[Ae],ue=We[Ae],pe=tt(ue,ke);if(pe===void 0)throw ke&&ke.type,new Error(U(14));Xe[Ae]=pe,Oe=Oe||pe!==ue}return(Oe=Oe||we.length!==Object.keys(We).length)?Xe:We}}({room:q,me:Re,producers:Be,dataProducers:Ge,peers:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yt,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:G;case"ADD_PEER":var X=K.payload.peer;return dt(dt({},G),{},(0,f.A)({},X.id,X));case"REMOVE_PEER":var de=K.payload.peerId,Ee=dt({},G);return delete Ee[de],Ee;case"SET_PEER_DISPLAY_NAME":var xe=K.payload,we=xe.displayName,We=G[xe.peerId];if(!We)throw new Error("no Peer found");var ke=dt(dt({},We),{},{displayName:we});return dt(dt({},G),{},(0,f.A)({},ke.id,ke));case"ADD_CONSUMER":var Oe=K.payload,Xe=Oe.consumer,$e=G[Oe.peerId];if(!$e)return dt({},G);var Ae=[].concat((0,He.A)($e.consumers),[Xe.id]),tt=dt(dt({},$e),{},{consumers:Ae});return dt(dt({},G),{},(0,f.A)({},tt.id,tt));case"REMOVE_CONSUMER":var ue=K.payload,pe=ue.consumerId,Ie=G[ue.peerId];if(!Ie)return G;var qe=Ie.consumers.indexOf(pe);if(qe===-1)return dt({},G);var nt=Ie.consumers.slice();nt.splice(qe,1);var tn=dt(dt({},Ie),{},{consumers:nt});return dt(dt({},G),{},(0,f.A)({},tn.id,tn));case"ADD_DATA_CONSUMER":var _t=K.payload,Pt=_t.dataConsumer,Mn=_t.peerId;if(!Mn)return G;var ct=G[Mn];if(!ct)return dt({},G);var Fe=[].concat((0,He.A)(ct.dataConsumers),[Pt.id]),bt=dt(dt({},ct),{},{dataConsumers:Fe});return dt(dt({},G),{},(0,f.A)({},bt.id,bt));case"REMOVE_DATA_CONSUMER":var wn=K.payload,cn=wn.dataConsumerId,vn=wn.peerId;if(!vn)return G;var or=G[vn];if(!or)return G;var Lr=or.dataConsumers.indexOf(cn);if(Lr===-1)return dt({},G);var Tn=or.dataConsumers.slice();Tn.splice(Lr,1);var yn=dt(dt({},or),{},{dataConsumers:Tn});return dt(dt({},G),{},(0,f.A)({},yn.id,yn));default:return G}},consumers:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pn,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:G;case"ADD_CONSUMER":var X=K.payload.consumer;return ln(ln({},G),{},(0,f.A)({},X.id,X));case"REMOVE_CONSUMER":var de=K.payload.consumerId,Ee=ln({},G);return delete Ee[de],Ee;case"SET_CONSUMER_PAUSED":var xe,we=K.payload,We=we.consumerId,ke=we.originator,Oe=G[We];return xe=ln(ln({},Oe),{},ke==="local"?{locallyPaused:!0,paused:!0}:{remotelyPaused:!0,paused:!0}),ln(ln({},G),{},(0,f.A)({},We,xe));case"SET_CONSUMER_RESUMED":var Xe,$e=K.payload,Ae=$e.consumerId,tt=$e.originator,ue=G[Ae];return Xe=ln(ln({},ue),{},tt==="local"?{locallyPaused:!1,paused:!1}:{remotelyPaused:!1,paused:!1}),ln(ln({},G),{},(0,f.A)({},Ae,Xe));case"SET_CONSUMER_CURRENT_LAYERS":var pe=K.payload,Ie=pe.consumerId,qe=pe.spatialLayer,nt=pe.temporalLayer,tn=ln(ln({},G[Ie]),{},{currentSpatialLayer:qe,currentTemporalLayer:nt});return ln(ln({},G),{},(0,f.A)({},Ie,tn));case"SET_CONSUMER_PREFERRED_LAYERS":var _t=K.payload,Pt=_t.consumerId,Mn=_t.spatialLayer,ct=_t.temporalLayer,Fe=ln(ln({},G[Pt]),{},{preferredSpatialLayer:Mn,preferredTemporalLayer:ct});return ln(ln({},G),{},(0,f.A)({},Pt,Fe));case"SET_CONSUMER_PRIORITY":var bt=K.payload,wn=bt.consumerId,cn=bt.priority,vn=ln(ln({},G[wn]),{},{priority:cn});return ln(ln({},G),{},(0,f.A)({},wn,vn));case"SET_CONSUMER_TRACK":var or=K.payload,Lr=or.consumerId,Tn=or.track,yn=ln(ln({},G[Lr]),{},{track:Tn});return ln(ln({},G),{},(0,f.A)({},Lr,yn));case"SET_CONSUMER_SCORE":var Pr=K.payload,br=Pr.consumerId,ar=Pr.score,Wn=G[br];if(!Wn)return G;var Rn=ln(ln({},Wn),{},{score:ar});return ln(ln({},G),{},(0,f.A)({},br,Rn));default:return G}},dataConsumers:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ne,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:G;case"ADD_DATA_CONSUMER":var X=K.payload.dataConsumer;return rn(rn({},G),{},(0,f.A)({},X.id,X));case"REMOVE_DATA_CONSUMER":var de=K.payload.dataConsumerId,Ee=rn({},G);return delete Ee[de],Ee;default:return G}},notifications:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Me,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"ADD_NOTIFICATION":var X=K.payload.notification;return[].concat((0,He.A)(G),[X]);case"REMOVE_NOTIFICATION":var de=K.payload.notificationId;return G.filter(function(Ee){return Ee.id!==de});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return G}}});var Ft=d(1919),Ct=d(7007),wt=d(296),un=(d(1919).default,(0,x.A)(function G(){(0,u.A)(this,G),this.roomClient=null})),Sn=new(function(){function G(){(0,u.A)(this,G),G.instance||(G.instance=new un)}return(0,x.A)(G,[{key:"getInstance",value:function(){return G.instance}}])}());Object.freeze(Sn);var Ut=Sn.getInstance(),nr="state",Ar=function(){return(0,x.A)(function G(K){(0,u.A)(this,G),(0,f.A)(this,"pausedBy",void 0),this.id=K.id,this.kind=K.track.kind,this.codec=K.codec,this.track=K.track,this.producerOrConsumer=K.instance,K.appData&&K.appData.share===!0&&K.track.kind==="video"&&(this.kind="share"),K.appData&&K.appData.share===!0&&K.track.kind==="audio"&&(this.kind="shareAudio"),this.rtpSender=K.rtpSender,this.rtpReceiver=K.rtpReceiver,this.eventEmitter=new Ct},[{key:"pause",value:function(){Ut.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){Ut.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"handleStateChanged",value:function(G){var K=G.state;G.streamId,this.eventEmitter.emit(nr,{state:K,timestamp:new Date().getTime()})}},{key:"paused",get:function(){return this.producerOrConsumer.paused}},{key:"on",value:function(G,K){if(G!==nr)throw new Error("Invalid event type from STREAM onn");this.eventEmitter.on(G,K)}},{key:"off",value:function(G,K){if(G!==nr)throw new Error("Invalid event type from STREAM off");this.eventEmitter.off(G,K)}}])}(),Sr=d(1803);function Ur(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function xr(G,K){var X=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!X){if(Array.isArray(G)||(X=function(ke,Oe){if(ke){if(typeof ke=="string")return Or(ke,Oe);var Xe={}.toString.call(ke).slice(8,-1);return Xe==="Object"&&ke.constructor&&(Xe=ke.constructor.name),Xe==="Map"||Xe==="Set"?Array.from(ke):Xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xe)?Or(ke,Oe):void 0}}(G))||K){X&&(G=X);var de=0,Ee=function(){};return{s:Ee,n:function(){return de>=G.length?{done:!0}:{done:!1,value:G[de++]}},e:function(ke){throw ke},f:Ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe,we=!0,We=!1;return{s:function(){X=X.call(G)},n:function(){var ke=X.next();return we=ke.done,ke},e:function(ke){We=!0,xe=ke},f:function(){try{we||X.return==null||X.return()}finally{if(We)throw xe}}}}function Or(G,K){(K==null||K>G.length)&&(K=G.length);for(var X=0,de=Array(K);X<K;X++)de[X]=G[X];return de}var Kr="stream-enabled",va="stream-disabled",ra="media-status-changed",ua="video-quality-changed",jn="stream-paused",Ha="stream-resumed",Ea="producer-added",Qr="producer-removed",gr="consumer-added",rt="consumer-removed",ut="e2ee-state-change",$t=function(){return(0,x.A)(function xe(we){var We=this;(0,u.A)(this,xe),(0,f.A)(this,"captureImage",(0,b.A)(E().mark(function ke(){var Oe,Xe,$e,Ae,tt,ue,pe,Ie,qe,nt,tn=arguments;return E().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:Xe=(Oe=tn.length>0&&tn[0]!==void 0?tn[0]:{}).height,$e=Oe.width,_t.prev=1,Ae=(0,He.A)(We.streams.values()),tt=xr(Ae),_t.prev=2,pe=E().mark(function Pt(){var Mn,ct,Fe,bt,wn,cn;return E().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:if((Mn=ue.value).kind!="video"){vn.next=4;break}return vn.prev=1,(ct=new MediaStream).addTrack(Mn.track),(Fe=document.createElement("video")).srcObject=ct,Fe.playsInline=!0,(bt=document.createElement("canvas")).id="canvasId",vn.next=2,new Promise(function(or,Lr){Fe.addEventListener("loadeddata",(0,b.A)(E().mark(function Tn(){var yn,Pr,br,ar,Wn,Rn,qr;return E().wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:return yn=Fe.videoWidth,Pr=Fe.videoHeight,br=16/9,Xe==null&&$e==null&&(Xe=Pr,$e=yn),Xe==null&&Xe==null||(Xe<=0||Xe>Pr)&&(Xe=Pr),$e==null&&$e==null||($e<=0||$e>yn)&&($e=yn),Xe==null&&(Xe=$e/br),$e==null&&($e=Xe*br),bt.width=$e,bt.height=Xe,wa.prev=1,wa.next=2,Fe.play();case 2:document.body.appendChild(Fe),ar=(bt.width-yn*br)/2,Wn=(bt.height-Pr*br)/2,bt.getContext("2d").clearRect(0,0,ar/2,Wn/2),bt.getContext("2d").drawImage(Fe,0,0),Rn=bt.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(bt),document.body.removeChild(bt),document.body.removeChild(Fe),or(Rn),wa.next=4;break;case 3:wa.prev=3,qr=wa.catch(1),Lr(qr),console.log("error in video",qr);case 4:case"end":return wa.stop()}},Tn,null,[[1,3]])})))});case 2:return wn=vn.sent,vn.abrupt("return",{v:wn});case 3:vn.prev=3,cn=vn.catch(1),console.error("err on image capture",cn);case 4:case"end":return vn.stop()}},Pt,null,[[1,3]])}),tt.s();case 3:if((ue=tt.n()).done){_t.next=6;break}return _t.delegateYield(pe(),"t0",4);case 4:if(!(Ie=_t.t0)){_t.next=5;break}return _t.abrupt("return",Ie.v);case 5:_t.next=3;break;case 6:_t.next=8;break;case 7:_t.prev=7,qe=_t.catch(2),tt.e(qe);case 8:return _t.prev=8,tt.f(),_t.finish(8);case 9:throw new Error("Camera must be on to capture an image");case 10:_t.prev=10,nt=_t.catch(1),console.error("Error in captureImage::",nt),Ut.roomClient._videosdkLogs&&Ut.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:nt.message}});case 11:case"end":return _t.stop()}},ke,null,[[1,10],[2,7,8,9]])}))),this.id=we.id,this.displayName=we.displayName,this.streams=new Map,this.quality="low",this.screenShareQuality="high",this.local=we.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=we.mode,this.metaData=we.metaData,this.eventEmitter=new Ct.EventEmitter,this.participantVideoElements=new Map,this.participantAudioElements=new Map,this.videoVisible=!1,this.height=null,this.width=null,this.resizeObserver=null},[{key:"_setPinState",value:function(xe){xe.cam!=null&&(this.pinState.cam=xe.cam),xe.share!=null&&(this.pinState.share=xe.share)}},{key:"remove",value:function(){Ut.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){Ut.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){Ut.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Ut.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Ut.roomClient.disablePeerWebcam(this.id)}},{key:"getTransportStats",value:function(){return Ut.roomClient.getTransportRemoteStats({participantId:this.id})}},{key:"handleStreamStateChanged",value:function(xe){var we=xe.state,We=(xe.peerId,xe.streamId),ke=this.streams.get(We);ke!=null&&(ke.kind!=="video"&&ke.kind!=="share"||ke.handleStateChanged({state:we,streamId:We}))}},{key:"addStream",value:function(xe){if(xe){this.streams.set(xe.id,xe),xe.kind!=="video"||this.local||Ut.roomClient.setConsumerQuality(xe.id,this.quality);var we=new MediaStream;we.addTrack(xe.track);try{if(["video","share"].includes(xe.kind)){var We=this.participantVideoElements.get(xe.kind);if(We){var ke={display:"block",objectFit:xe.kind==="share"?"contain":"cover",width:"100%"};Object.assign(We.style,ke),We.srcObject=we,We.play().catch(function(Xe){console.error("Failed to play ".concat(xe.kind," stream:"),Xe)}),(xe.kind==="share"||xe.kind==="video"&&this.videoVisible)&&xe.resume()}}if((xe.kind==="audio"||xe.kind==="shareAudio")&&!this.local){var Oe=this.participantAudioElements.get(xe.kind);Oe&&(Oe.srcObject=we,Oe.play().catch(function(Xe){console.error("Failed to play ".concat(xe.kind," audio:"),Xe)}))}this.eventEmitter.emit(Kr,xe),xe.kind==="video"&&!this.local&&this.height&&this.width&&this.setViewPort(this.width,this.height)}catch(Xe){console.error("Error in addStream:",Xe)}}else console.warn("Attempted to add null/undefined stream")}},{key:"updateStream",value:function(xe){this.streams.set(xe.id,xe),this.eventEmitter.emit(Kr,xe)}},{key:"deleteStream",value:function(xe){var we=this.streams.get(xe);if(we!=null){this.streams.delete(xe);var We={video:{collection:this.participantVideoElements,type:"video"},share:{collection:this.participantVideoElements,type:"share"},audio:{collection:this.participantAudioElements,type:"audio"},shareAudio:{collection:this.participantAudioElements,type:"shareAudio"}}[we.kind];if(We){var ke=We.collection.get(We.type);ke&&(ke.style.display="none")}return this.eventEmitter.emit(va,we),we}}},{key:"streamResumed",value:function(xe){this.streams.get(xe)}},{key:"streamPaused",value:function(xe){this.streams.get(xe)}},{key:"updateParticipantMediaState",value:function(xe,we){xe=="audio"?this.micOn=we:xe=="video"&&(this.webcamOn=we),this.eventEmitter.emit(ra,{peerId:this.id,kind:xe,newStatus:we})}},{key:"handleParticipantPause",value:function(xe){if(xe!=null&&xe.consumerId){var we=this.streams.get(xe.consumerId);we?we.pausedBy="SUB_MANAGER":console.warn("Stream with consumerId ".concat(xe.consumerId," not found."))}this.eventEmitter.emit(jn,{kind:xe?.kind,reason:xe?.reason})}},{key:"handleParticipantResume",value:function(xe){if(xe!=null&&xe.consumerId){var we=this.streams.get(xe.consumerId);we?we.pausedBy=void 0:console.warn("Stream with consumerId ".concat(xe.consumerId," not found."))}this.eventEmitter.emit(Ha,{kind:xe?.kind,reason:xe?.reason})}},{key:"handleE2EEStateChange",value:function(xe){xe==null||delete xe.peerId,this.eventEmitter.emit(ut,xe)}},{key:"videoQualityChanged",value:function(xe,we){this.eventEmitter.emit(ua,{peerId:this.id,prevQuality:xe,currentQuality:we})}},{key:"setQuality",value:function(xe){if(!this.local){if(typeof document<"u"&&this.resizeObserver){var we=document.querySelector("#f-".concat(this.id));we&&this.resizeObserver.unobserve(we)}this.quality=xe,(0,He.A)(this.streams.entries()).forEach(function(We){var ke=We[1];ke.kind==="video"&&Ut.roomClient.setConsumerQuality(ke.id,xe)})}}},{key:"setScreenShareQuality",value:function(xe){this.local||(this.screenShareQuality=xe,this.streams.forEach(function(we){we.kind==="share"&&Ut.roomClient.setConsumerScreenShareQuality(we.id,xe)}))}},{key:"setViewPort",value:function(xe,we){(0,He.A)(this.streams.entries()).forEach(function(We){var ke=We[1];ke.kind==="video"&&Ut.roomClient.setViewPort(ke.producerOrConsumer,xe,we)})}},{key:"pin",value:function(xe){switch(xe){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}Ut.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(xe){switch(xe){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}Ut.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(Ee=(0,b.A)(E().mark(function xe(we){var We,ke,Oe;return E().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return We=we.meetingId,ke=we.payload,Oe=we.token,Xe.next=1,Ut.roomClient.switchPeerRoom({peerId:this.id,roomId:We,payload:ke,token:Oe});case 1:case"end":return Xe.stop()}},xe,this)})),function(xe){return Ee.apply(this,arguments)})},{key:"getVideoStats",value:(de=(0,b.A)(E().mark(function xe(){var we,We,ke,Oe,Xe,$e;return E().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(!this.local){Ae.next=2;break}return Ae.next=1,Ut.roomClient.getVideoRemoteStats();case 1:return Ae.abrupt("return",Ae.sent);case 2:we=(0,He.A)(this.streams.entries()),We=xr(we),Ae.prev=3,We.s();case 4:if((ke=We.n()).done){Ae.next=7;break}if(Oe=(0,wt.A)(ke.value,2),Xe=Oe[0],Oe[1].kind!="video"){Ae.next=6;break}return Ae.next=5,Ut.roomClient.getConsumerRemoteStats(Xe);case 5:return Ae.abrupt("return",Ae.sent);case 6:Ae.next=4;break;case 7:Ae.next=9;break;case 8:Ae.prev=8,$e=Ae.catch(3),We.e($e);case 9:return Ae.prev=9,We.f(),Ae.finish(9);case 10:case"end":return Ae.stop()}},xe,this,[[3,8,9,10]])})),function(){return de.apply(this,arguments)})},{key:"getShareStats",value:(X=(0,b.A)(E().mark(function xe(){var we,We,ke,Oe,Xe,$e;return E().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(!this.local){Ae.next=2;break}return Ae.next=1,Ut.roomClient.getShareRemoteStats();case 1:return Ae.abrupt("return",Ae.sent);case 2:we=(0,He.A)(this.streams.entries()),We=xr(we),Ae.prev=3,We.s();case 4:if((ke=We.n()).done){Ae.next=7;break}if(Oe=(0,wt.A)(ke.value,2),Xe=Oe[0],Oe[1].kind!="share"){Ae.next=6;break}return Ae.next=5,Ut.roomClient.getConsumerRemoteStats(Xe);case 5:return Ae.abrupt("return",Ae.sent);case 6:Ae.next=4;break;case 7:Ae.next=9;break;case 8:Ae.prev=8,$e=Ae.catch(3),We.e($e);case 9:return Ae.prev=9,We.f(),Ae.finish(9);case 10:case"end":return Ae.stop()}},xe,this,[[3,8,9,10]])})),function(){return X.apply(this,arguments)})},{key:"getShareAudioStats",value:(K=(0,b.A)(E().mark(function xe(){var we,We,ke,Oe,Xe,$e;return E().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(!this.local){Ae.next=2;break}return Ae.next=1,Ut.roomClient.getShareAudioRemoteStats();case 1:return Ae.abrupt("return",Ae.sent);case 2:we=(0,He.A)(this.streams.entries()),We=xr(we),Ae.prev=3,We.s();case 4:if((ke=We.n()).done){Ae.next=7;break}if(Oe=(0,wt.A)(ke.value,2),Xe=Oe[0],Oe[1].kind!="shareAudio"){Ae.next=6;break}return Ae.next=5,Ut.roomClient.getConsumerRemoteStats(Xe);case 5:return Ae.abrupt("return",Ae.sent);case 6:Ae.next=4;break;case 7:Ae.next=9;break;case 8:Ae.prev=8,$e=Ae.catch(3),We.e($e);case 9:return Ae.prev=9,We.f(),Ae.finish(9);case 10:case"end":return Ae.stop()}},xe,this,[[3,8,9,10]])})),function(){return K.apply(this,arguments)})},{key:"getAudioStats",value:(G=(0,b.A)(E().mark(function xe(){var we,We,ke,Oe,Xe,$e;return E().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(this.micOn){Ae.next=1;break}return Ae.abrupt("return",[]);case 1:if(!this.local){Ae.next=3;break}return Ae.next=2,Ut.roomClient.getAudioRemoteStats();case 2:return Ae.abrupt("return",Ae.sent);case 3:we=(0,He.A)(this.streams.entries()),We=xr(we),Ae.prev=4,We.s();case 5:if((ke=We.n()).done){Ae.next=8;break}if(Oe=(0,wt.A)(ke.value,2),Xe=Oe[0],Oe[1].kind!="audio"){Ae.next=7;break}return Ae.next=6,Ut.roomClient.getConsumerRemoteStats(Xe);case 6:return Ae.abrupt("return",Ae.sent);case 7:Ae.next=5;break;case 8:Ae.next=10;break;case 9:Ae.prev=9,$e=Ae.catch(4),We.e($e);case 10:return Ae.prev=10,We.f(),Ae.finish(10);case 11:case"end":return Ae.stop()}},xe,this,[[4,9,10,11]])})),function(){return G.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){Ut.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){Ut.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){Ut.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){Ut.roomClient.stopConsumingMicStreams(this.id)}},{key:"renderVideo",value:function(xe){for(var we,We=this,ke=xe.type,Oe=ke===void 0?"video":ke,Xe=xe.maxQuality,$e=Xe===void 0?"auto":Xe,Ae=xe.videostyle,tt=Ae===void 0?{}:Ae,ue=xe.containerStyle,pe=ue===void 0?{}:ue,Ie=0,qe=(0,He.A)(this.streams.values());Ie<qe.length;Ie++){var nt=qe[Ie];nt.kind==Oe&&(we=new MediaStream).addTrack(nt.track)}if(this.participantVideoElements.get(Oe)){if(we){var tn=this.participantVideoElements.get(Oe);tn&&(tn.srcObject=we,tn.play().catch(function(bt){return console.error("videoElem.play() failed",bt)}))}return this.participantVideoElements.get(Oe)}try{var _t=document.createElement("div");_t.classList.add("video-container","participant-video-".concat(this.id)),_t.setAttribute("id","f-".concat(this.id).concat(Oe==="share"?"-share":"")),_t.style.setProperty("position","relative"),Object.assign(_t.style,pe);var Pt=document.createElement("video");if(Pt.setAttribute("id","v-".concat(this.id).concat(Oe==="share"?"-share":"")),Pt.setAttribute("playsinline",""),Pt.setAttribute("webkit-playsinline",""),Pt.setAttribute("x5-playsinline",""),Pt.playsinline=!0,Pt.muted=!0,Pt.autoplay=!0,Pt.onerror=function(bt){console.log(bt,"participant video error")},Object.assign(Pt.style,function(bt){for(var wn=1;wn<arguments.length;wn++){var cn=arguments[wn]!=null?arguments[wn]:{};wn%2?Ur(Object(cn),!0).forEach(function(vn){(0,f.A)(bt,vn,cn[vn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(bt,Object.getOwnPropertyDescriptors(cn)):Ur(Object(cn)).forEach(function(vn){Object.defineProperty(bt,vn,Object.getOwnPropertyDescriptor(cn,vn))})}return bt}({width:"100%",height:"100%",objectFit:Oe==="share"?"contain":"cover"},tt)),we&&(Pt.srcObject=we,Pt.play().then(function(bt){console.log("videoElem.play() success",bt)}).catch(function(bt){return console.error("videoElem.play() failed",bt)})),_t.appendChild(Pt),this.participantVideoElements.set(Oe,Pt),this.videoVisible=!1,!this.local&&Oe==="video"){var Mn=(0,Sr.sg)(function(bt){if(bt.length!=0)if(bt[bt.length-1].intersectionRatio>0){We.videoVisible=!0;for(var wn=0,cn=(0,He.A)(We.streams.values());wn<cn.length;wn++){var vn=cn[wn];vn.kind=="video"&&vn.pausedBy!=="SUB_MANAGER"&&vn.paused&&vn.resume()}}else{We.videoVisible=!1;for(var or=0,Lr=(0,He.A)(We.streams.values());or<Lr.length;or++){var Tn=Lr[or];Tn.kind=="video"&&Tn.pause()}}},500);if(new IntersectionObserver(Mn,{root:null,rootMargin:"0px",threshold:0}).observe(_t),$e=="auto"&&Oe==="video"){var ct=(0,Sr.sg)(function(bt){var wn=bt[0].contentRect,cn=wn.width,vn=wn.height;cn>0&&vn>0&&(We.height=vn,We.width=cn,We.setViewPort(cn,vn))},500),Fe=new ResizeObserver(ct);Fe.observe(_t),this.resizeObserver=Fe}}return Oe!=="video"||$e==="auto"||this.local||this.setQuality($e),_t}catch(bt){console.log("Render video Exception",bt)}}},{key:"renderAudio",value:function(xe){var we=xe.type,We=we===void 0?"audio":we;if(this.local)return null;try{if(this.participantAudioElements.get(We)){var ke=this.participantAudioElements.get(We),Oe=this.getAudioStream(We);return Oe&&ke&&(ke.srcObject=Oe,ke.play().catch(function(Ae){return console.error("Failed to play existing audio:",Ae)})),ke}var Xe=document.createElement("audio");Xe.setAttribute("id","a-".concat(this.id,"-").concat(We)),Xe.autoplay=!1,Xe.playsInline=!0,Xe.controls=!1,Xe.style.display="none",Xe.onerror=function(Ae){return console.log("Audio element error:",Ae)};var $e=this.getAudioStream(We);return $e&&(Xe.srcObject=$e,Xe.play().catch(function(Ae){return console.error("Failed to play new audio:",Ae)})),this.participantAudioElements.set(We,Xe),Xe}catch(Ae){return console.error("Render audio exception:",Ae),null}}},{key:"getAudioStream",value:function(){var xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"audio",we=(0,He.A)(this.streams.values()).find(function(ke){return ke.kind===xe});if(we){var We=new MediaStream;return We.addTrack(we.track),we.resume(),We}return null}},{key:"addProducer",value:function(xe){this.eventEmitter.emit(Ea,xe)}},{key:"removeProducer",value:function(xe){this.eventEmitter.emit(Qr,xe)}},{key:"addConsumer",value:function(xe){this.eventEmitter.emit(gr,xe)}},{key:"removeConsumer",value:function(xe){this.eventEmitter.emit(rt,xe)}},{key:"on",value:function(xe,we){switch(xe){case Kr:case va:case ra:case ua:case jn:case Ha:case Ea:case Qr:case gr:case rt:case ut:this.eventEmitter.on(xe,we);break;default:throw new Error("Invalid event type from participant onn")}}},{key:"off",value:function(xe,we){switch(xe){case Kr:case va:case ra:case ua:case jn:case Ha:case Ea:case Qr:case gr:case rt:case ut:this.eventEmitter.off(xe,we);break;default:throw new Error("Invalid event type from participant off")}}}]);var G,K,X,de,Ee}(),Tt=d(388),sn=d(3954),nn=d(5501),et={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"},On=d(2107);function Ln(){try{var G=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ln=function(){return!!G})()}function Xn(G,K,X){vr(G,K),K.set(G,X)}function vr(G,K){if(K.has(G))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qt(G,K){return G.get(Un(G,K))}function St(G,K,X){return G.set(Un(G,K),X),X}function Un(G,K,X){if(typeof G=="function"?G===K:G.has(K))return arguments.length<3?K:X;throw new TypeError("Private element is not present on this object")}var In="stream-enabled",Nn="stream-disabled",Fr="character-joined",Mr="character-left",Hr="media-status-changed",cr="video-quality-changed",Kn="character-state-changed",xa="character-message",ma="user-message",La="data",Va="error",Ci=new WeakMap,bs=new WeakMap,ii=new WeakMap,Ti=new WeakMap,Us=new WeakMap,vi=new WeakMap,ea=new WeakMap,Fs=new WeakSet,Ks=function(G){function K(ke){var Oe,Xe,$e,Ae;return(0,u.A)(this,K),Xe=this,$e=K,Ae=[{id:ke.id,displayName:ke.displayName,mode:On.nI.SEND_AND_RECV,metaData:ke.metaData}],$e=(0,sn.A)($e),function(tt,ue){vr(tt,ue),ue.add(tt)}(Oe=(0,Tt.A)(Xe,Ln()?Reflect.construct($e,Ae||[],(0,sn.A)(Xe).constructor):$e.apply(Xe,Ae)),Fs),Xn(Oe,Ci,void 0),Xn(Oe,bs,void 0),Xn(Oe,ii,void 0),Xn(Oe,Ti,void 0),Xn(Oe,Us,void 0),Xn(Oe,vi,void 0),Xn(Oe,ea,void 0),(0,f.A)(Oe,"captureImage",(0,b.A)(E().mark(function tt(){var ue,pe=arguments;return E().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:throw(ue=pe.length>0&&pe[0]!==void 0?pe[0]:{}).height,ue.width,new Error("captureImage method is not supported on character");case 1:case"end":return Ie.stop()}},tt)}))),St(Us,Oe,ke.interactionId||null),Oe.id=ke.id||null,St(Ci,Oe,ke.characterRole),St(bs,Oe,ke.characterMode),St(ii,Oe,ke.knowledgeBases||[]),Oe.displayName=ke.displayName,St(Ti,Oe,ke.language),St(vi,Oe,ke.state||et.CHARACTER_LISTENING),St(ea,Oe,ke.roomClient),Oe}return(0,nn.A)(K,G),(0,x.A)(K,[{key:"join",value:(We=(0,b.A)(E().mark(function ke(){var Oe;return E().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return Xe.next=1,Qt(ea,this).joinCharacter({interactionId:Qt(Us,this),characterId:this.id,characterRole:Qt(Ci,this),displayName:this.displayName,characterMode:Qt(bs,this),knowledgeBases:Qt(ii,this),language:Qt(Ti,this),metaData:this.metaData});case 1:(Oe=Xe.sent)&&(this.id=Oe.characterId,this.displayName=Oe.displayName,St(bs,this,Oe.characterMode),St(Ci,this,Oe.characterRole),St(Us,this,Oe.interactionId),St(ii,this,Oe.knowledgeBases),St(Ti,this,Oe.language),Qt(ea,this)._eventEmitter.emit("INIT_CHARACTER",this));case 2:case"end":return Xe.stop()}},ke,this)})),function(){return We.apply(this,arguments)})},{key:"leave",value:(we=(0,b.A)(E().mark(function ke(){return E().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=1,Qt(ea,this).removeCharacter();case 1:case"end":return Oe.stop()}},ke,this)})),function(){return we.apply(this,arguments)})},{key:"remove",value:(xe=(0,b.A)(E().mark(function ke(){return E().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return Oe.stop()}},ke)})),function(){return xe.apply(this,arguments)})},{key:"sendMessage",value:(Ee=(0,b.A)(E().mark(function ke(Oe){return E().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return Xe.next=1,Qt(ea,this).sendCharacterMessage({interactionId:Qt(Us,this),text:Oe});case 1:case"end":return Xe.stop()}},ke,this)})),function(ke){return Ee.apply(this,arguments)})},{key:"handleCharacterStateChanged",value:function(ke){Object.keys(et).includes(ke.status)&&(Un(Fs,this,pn).call(this,ke.status),this.eventEmitter.emit(Kn,ke))}},{key:"handleCharacterMessage",value:function(ke){this.eventEmitter.emit(xa,ke)}},{key:"interrupt",value:(de=(0,b.A)(E().mark(function ke(){return E().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=1,Qt(ea,this).interruptCharacter({interactionId:Qt(Us,this)});case 1:case"end":return Oe.stop()}},ke,this)})),function(){return de.apply(this,arguments)})},{key:"handleUserMessage",value:function(ke){this.eventEmitter.emit(ma,ke)}},{key:"handleCharacterData",value:function(ke){var Oe=ke.topic,Xe=ke.data;this.eventEmitter.emit(La,Oe,Xe)}},{key:"handleCharacterError",value:function(ke){var Oe=ke.data;this.eventEmitter.listenerCount(Va)>0&&this.eventEmitter.emit(Va,Oe)}},{key:"enableMic",value:function(){Qt(ea,this).enablePeerMic(this.id)}},{key:"disableMic",value:function(){Qt(ea,this).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Qt(ea,this).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Qt(ea,this).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(ke){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(X=(0,b.A)(E().mark(function ke(Oe){return E().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:throw Oe.meetingId,Oe.payload,Oe.token,new Error("switchTo method is not supported on character");case 1:case"end":return Xe.stop()}},ke)})),function(ke){return X.apply(this,arguments)})},{key:"pin",value:function(ke){throw new Error("pin method is not supported on character")}},{key:"on",value:function(ke,Oe){switch(ke){case In:case Nn:case Fr:case Mr:case Hr:case cr:case Kn:case xa:case ma:case La:case Va:this.eventEmitter.on(ke,Oe);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(ke,Oe){switch(ke){case In:case Nn:case Fr:case Mr:case Hr:case cr:case Kn:case xa:case ma:case La:case Va:this.eventEmitter.off(ke,Oe);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return Qt(vi,this)}},{key:"knowledgeBases",get:function(){return Qt(ii,this)}},{key:"characterMode",get:function(){return Qt(bs,this)}},{key:"characterRole",get:function(){return Qt(Ci,this)}},{key:"interactionId",get:function(){return Qt(Us,this)}},{key:"language",get:function(){return Qt(Ti,this)}}]);var X,de,Ee,xe,we,We}($t);function pn(G){St(vi,this,G)}function Jn(G,K,X){(function(de,Ee){if(Ee.has(de))throw new TypeError("Cannot initialize the same private elements twice on an object")})(G,K),K.set(G,X)}function $n(G,K){return G.get(dr(G,K))}function dr(G,K,X){if(typeof G=="function"?G===K:G.has(K))return arguments.length<3?K:X;throw new TypeError("Private element is not present on this object")}var Dn=new WeakMap,Hn=function(){return(0,x.A)(function K(X,de){var Ee,xe,we,We=X.id,ke=X.displayName;(0,u.A)(this,K),Jn(this,Dn,void 0),this.id=We,this.displayName=ke,xe=this,we=de,(Ee=Dn).set(dr(Ee,xe),we)},[{key:"switchTo",value:(G=(0,b.A)(E().mark(function K(X){var de,Ee,xe;return E().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return de=X.meetingId,Ee=X.payload,xe=X.token,we.next=1,Ut.roomClient.connectionSwitchPeerRoom({roomId:de,connectionRoomId:$n(Dn,this),payload:Ee,peerId:this.id,token:xe});case 1:case"end":return we.stop()}},K,this)})),function(K){return G.apply(this,arguments)})}]);var G}(),$r="participant-joined",Er="participant-left",kr="chat-message",Fn=function(){return(0,x.A)(function K(X,de){var Ee=this;(0,u.A)(this,K),this.eventEmitter=new Ct.EventEmitter,this.id=X,this.participants=new Map,de.forEach(function(xe){Ee.participants.set(xe.id,new Hn(xe,Ee.id))})},[{key:"participantJoin",value:function(K){var X=new Hn(K,this.id);this.participants.set(K.id,X),this.eventEmitter.emit($r,X)}},{key:"participantLeft",value:function(K){this.participants.delete(K),this.eventEmitter.emit(Er,K)}},{key:"sendChatMessage",value:function(K){Ut.roomClient.connectionSendChatMessage({roomId:this.id,message:K})}},{key:"sendChatMessageEvent",value:function(K){var X=K.participantId,de=K.message;this.eventEmitter.emit(kr,{participantId:X,message:de})}},{key:"end",value:(G=(0,b.A)(E().mark(function K(){return E().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=1,Ut.roomClient.connectionEndMeeting({roomId:this.id});case 1:case"end":return X.stop()}},K,this)})),function(){return G.apply(this,arguments)})},{key:"on",value:function(K,X){switch(K){case $r:case Er:case kr:this.eventEmitter.on(K,X);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(K,X){switch(K){case $r:case Er:case kr:this.eventEmitter.off(K,X);break;default:throw new Error("Invalid event type")}}}]);var G}(),Zr=function(){return(0,x.A)(function G(K){var X=K.roomId,de=K.peers,Ee=K.payload;(0,u.A)(this,G),this.id=X,this.payload=Ee,this.meeting=new Fn(X,de)},[{key:"close",value:function(){Ut.roomClient.closeConnection(this.id)}}])}();function Da(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function ya(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?Da(Object(X),!0).forEach(function(de){(0,f.A)(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):Da(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}function Ca(G,K){if(K.has(G))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Za(G,K){return G.get(Ga(G,K))}function Ga(G,K,X){if(typeof G=="function"?G===K:G.has(K))return arguments.length<3?K:X;throw new TypeError("Private element is not present on this object")}var ss="error",Aa="meeting-joined",ls="meeting-left",Ps="participant-mode-changed",ro="participant-joined",yi="participant-left",Pi="speaker-changed",Ns="presenter-changed",Eo="main-participant-changed",mo="chat-message",Hi="entry-requested",ao="entry-responded",Ni="recording-state-changed",_i="recording-started",Di="recording-stopped",uc="livestream-state-changed",Cr="livestream-started",Hs="livestream-stopped",da="hls-state-changed",oi="hls-started",so="hls-stopped",tr="whiteboard-started",Qs="whiteboard-stopped",ci="video-state-changed",li="video-seeked",_r="mic-requested",qa="webcam-requested",Xs="stream-enabled",Zo="stream-disabled",ms="pin-state-changed",Vi="connection-open",go="connection-close",Qa="switch-meeting",Oc="meeting-state-changed",Js="quality-limitation",Vr="paused-all-streams",ui="resumed-all-streams",gs="transcription-state-changed",qi="transcription-text",Go="character-joined",Yo="character-left",io="media-relay-started",fn="media-relay-stopped",ve="media-relay-error",At="media-relay-request-response",rr="media-relay-request-received",ha=new WeakMap,Xa=new WeakSet,xs=function(){return(0,x.A)(function ue(pe,Ie,qe){var nt,tn,_t,Pt,Mn,ct=this;(0,u.A)(this,ue),Ca(nt=this,tn=Xa),tn.add(nt),function(Fe,bt,wn){Ca(Fe,bt),bt.set(Fe,wn)}(this,ha,void 0),(0,f.A)(this,"pubSub",{publish:(Mn=(0,b.A)(E().mark(function Fe(bt,wn,cn,vn){return E().wrap(function(or){for(;;)switch(or.prev=or.next){case 0:if(vn==null){or.next=1;break}if((0,T.A)(vn)=="object"){or.next=1;break}throw new Error('"payload" can only be object.');case 1:return or.next=2,ct.roomClient.pubsubPublish(bt,wn,cn,vn);case 2:case"end":return or.stop()}},Fe)})),function(Fe,bt,wn,cn){return Mn.apply(this,arguments)}),subscribe:(Pt=(0,b.A)(E().mark(function Fe(bt,wn){var cn;return E().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:if(!Za(ha,ct).listeners(bt).includes(wn)){vn.next=1;break}return vn.abrupt("return");case 1:return vn.next=2,ct.roomClient.pubsubSubscribe(bt);case 2:return cn=vn.sent,Za(ha,ct).on(bt,wn),vn.abrupt("return",cn);case 3:case"end":return vn.stop()}},Fe)})),function(Fe,bt){return Pt.apply(this,arguments)}),unsubscribe:(_t=(0,b.A)(E().mark(function Fe(bt,wn){return E().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:if(Za(ha,ct).off(bt,wn),Za(ha,ct).listeners(bt).length!=0){cn.next=1;break}return cn.next=1,ct.roomClient.pubsubUnsubscribe(bt);case 1:case"end":return cn.stop()}},Fe)})),function(Fe,bt){return _t.apply(this,arguments)})}),(0,f.A)(this,"uploadBase64File",function(){var Fe=(0,b.A)(E().mark(function bt(wn){var cn,vn,or,Lr,Tn,yn,Pr,br;return E().wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:if(cn=wn.base64Data,vn=wn.token,or=wn.fileName,ar.prev=1,cn&&vn&&or){ar.next=2;break}throw new Error("please provide base64Data, token and fileName");case 2:return Lr="https://".concat(ct.baseUrl,"/base64-upload?roomId=").concat(ct.id),Tn={fileName:or,base64Data:cn},ar.next=3,fetch(Lr,{method:"POST",body:JSON.stringify(Tn),headers:{"Content-Type":"application/json",Authorization:vn}});case 3:return yn=ar.sent,ar.next=4,yn.json();case 4:return Pr=ar.sent,ar.abrupt("return",Pr.url);case 5:ar.prev=5,br=ar.catch(1),console.error("Error while Uploading Base64 File::",br),ct.roomClient._videosdkLogs&&ct.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:br.message}});case 6:case"end":return ar.stop()}},bt,null,[[1,5]])}));return function(bt){return Fe.apply(this,arguments)}}()),(0,f.A)(this,"fetchBase64File",function(){var Fe=(0,b.A)(E().mark(function bt(wn){var cn,vn,or,Lr,Tn,yn;return E().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:if(cn=wn.url,vn=wn.token,Pr.prev=1,cn&&vn){Pr.next=2;break}throw new Error("please provide url and token");case 2:return Pr.next=3,fetch(cn,{headers:{Authorization:vn}});case 3:return or=Pr.sent,Pr.next=4,or.arrayBuffer();case 4:return Lr=Pr.sent,Tn=window.btoa(new Uint8Array(Lr).reduce(function(br,ar){return br+String.fromCharCode(ar)},"")),Pr.abrupt("return",Tn);case 5:Pr.prev=5,yn=Pr.catch(1),console.error("Error while fetching Base64 File::",yn),ct.roomClient._videosdkLogs&&ct.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:yn.message}});case 6:case"end":return Pr.stop()}},bt,null,[[1,5]])}));return function(bt){return Fe.apply(this,arguments)}}()),this.id=pe,this.roomClient=qe,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=Ie,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new Ct.EventEmitter,function(Fe,bt,wn){Fe.set(Ga(Fe,bt),wn)}(ha,this,new Ct.EventEmitter),this.eventEmitter.setMaxListeners(9999),Za(ha,this).setMaxListeners(9999),this.roomClient.on("ERROR",function(Fe){return ct.handleError(Fe)}),this.roomClient.on("ADD_PEER",function(Fe){return ct.handlePeerAdd(Fe)}),this.roomClient.on("REMOVE_PEER",function(Fe){return ct.handlePeerRemove(Fe)}),this.roomClient.on("STREAM_STATE_CHANGED",function(Fe){return ct.handleStreamState(Fe)}),this.roomClient.on("ADD_PRODUCER",function(Fe){return ct.handleProducerAdd(Fe)}),this.roomClient.on("UPDATE_PRODUCER",function(Fe){return ct.handleUpdateProducer(Fe)}),this.roomClient.on("REMOVE_PRODUCER",function(Fe){return ct.handleProducerRemove(Fe)}),this.roomClient.on("ADD_CONSUMER",function(Fe){return ct.handleConsumerAdd(Fe)}),this.roomClient.on("REMOVE_CONSUMER",function(Fe){return ct.handleConsumerRemove(Fe)}),this.roomClient.on("CONSUMER_RESUMED",function(Fe){return ct.handleConsumerResume(Fe)}),this.roomClient.on("CONSUMER_PAUSED",function(Fe){return ct.handleConsumerPause(Fe)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(Fe){return ct.handleParticipantMediaStateChanged(Fe)}),this.roomClient.on("CHAT_MESSAGE",function(Fe){return ct.handleNewChatMessage(Fe)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(Fe){return ct.handleSpeakerChange(Fe)}),this.roomClient.on("ENTRY_REQUESTED",function(Fe){return ct.handleEntryRequested(Fe)}),this.roomClient.on("ENTRY_RESPONDED",function(Fe){return ct.handleEntryResponded(Fe)}),this.roomClient.on("MEETING_JOINED",function(Fe){return ct.handleMeetingJoined(Fe)}),this.roomClient.on("MEETING_LEFT",function(Fe){return ct.handleMeetingLeft(Fe)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(Fe){ct.handleRecordingStateChanged(Fe)}),this.roomClient.on("RECORDING_STARTED",function(Fe){return ct.handleRecordingStarted(Fe)}),this.roomClient.on("RECORDING_STOPPED",function(Fe){return ct.handleRecordingStopped(Fe)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(Fe){ct.handleLivestreamStateChanged(Fe)}),this.roomClient.on("LIVESTREAM_STARTED",function(Fe){return ct.handleLivestreamStarted(Fe)}),this.roomClient.on("LIVESTREAM_STOPPED",function(Fe){return ct.handleLivestreamStopped(Fe)}),this.roomClient.on("HLS_STATE_CHANGED",function(Fe){ct.handleHlsStateChanged(Fe)}),this.roomClient.on("HLS_STARTED",function(Fe){ct.handleHlsStarted(Fe)}),this.roomClient.on("HLS_STOPPED",function(Fe){ct.handleHlsStopped(Fe)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(Fe){ct.handleTranscriptionStateChanged(Fe)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(Fe){ct.handleTranscriptionText(Fe)}),this.roomClient.on("SUB_MANAGER_RESUMED",function(Fe){ct.handleParticipantResumeBySubManager(Fe)}),this.roomClient.on("SUB_MANAGER_PAUSED",function(Fe){ct.handleParticipantPausedBySubManager(Fe)}),this.roomClient.on("WHITEBOARD_STARTED",function(Fe){return ct.handleWhiteboardStarted(Fe)}),this.roomClient.on("WHITEBOARD_STOPPED",function(Fe){return ct.handleWhiteboardStopped(Fe)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(Fe){return ct.handleVideoStateChanged(Fe)}),this.roomClient.on("VIDEO_SEEKED",function(Fe){return ct.handleVideoSeeked(Fe)}),this.roomClient.on("PIN_STATE_CHANGED",function(Fe){ct.handlePinStateChanged(Fe)}),this.roomClient.on("MIC_REQUESTED",function(Fe){return ct.handleMicRequested(Fe)}),this.roomClient.on("WEBCAM_REQUESTED",function(Fe){return ct.handleWebcamRequested(Fe)}),this.roomClient.on("CONNECTION_OPEN",function(Fe){return ct.handleConnectionOpen(Fe)}),this.roomClient.on("CONNECTION_CLOSE",function(Fe){return ct.handleConnectionClose(Fe)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(Fe){return ct.handleConnectionParticipantJoin(Fe)}),this.roomClient.on("SWITCH_ROOM",function(Fe){return ct.handleSwitchMeeting(Fe)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(Fe){return ct.handleConnectionChatMessage(Fe)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(Fe){ct.handleConnectionParticipantLeft(Fe)}),this.roomClient.on("PUBSUB_MESSAGE",function(Fe){return Ga(Xa,ct,kl).call(ct,Fe)}),this.roomClient.on("PEER_MODE_CHANGED",function(Fe){return Ga(Xa,ct,Cl).call(ct,Fe)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(Fe){return ct.handleMeetingStateChanged(Fe)}),this.roomClient.on("QUALITY_LIMITATION_INTERNAL",function(Fe){return ct.handleQualityChanged(Fe)}),this.roomClient.on("ALL_CONSUMERS_PAUSED",function(Fe){return ct.handleConsumersPaused(Fe)}),this.roomClient.on("ALL_CONSUMERS_RESUMED",function(Fe){return ct.handleConsumersResumed(Fe)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(Fe){return ct.handleVideoQualityChanged(Fe)}),this.roomClient.on("ADD_CHARACTER",function(Fe){return ct.handleAddCharacter(Fe)}),this.roomClient.on("INIT_CHARACTER",function(Fe){return ct.handleInitCharacter(Fe)}),this.roomClient.on("REMOVE_CHARACTER",function(Fe){return ct.handleRemoveCharacter(Fe)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(Fe){return ct.handleCharacterStateChanged(Fe)}),this.roomClient.on("CHARACTER_MESSAGE",function(Fe){return ct.handleCharacterMessage(Fe)}),this.roomClient.on("USER_MESSAGE",function(Fe){return ct.handleUserMessage(Fe)}),this.roomClient.on("CHARACTER_DATA",function(Fe){return ct.handleOnCharacterData(Fe)}),this.roomClient.on("CHARACTER_ERROR",function(Fe){return ct.handleOnCharacterError(Fe)}),this.roomClient.on("E2EE_STATE_CHANGE",function(Fe){return ct.handleE2EEStateChange(Fe)}),this.roomClient.on("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING",function(){return ct.handleOnRemoveCurrentMeetingParticipant()}),this.roomClient.on("MEDIA_RELAY_STARTED",function(Fe){return ct.handleMediaRelayStart(Fe)}),this.roomClient.on("MEDIA_RELAY_STOPPED",function(Fe){return ct.handleMediaRelayStop(Fe)}),this.roomClient.on("MEDIA_RELAY_ERROR",function(Fe){return ct.handleMediaRelayError(Fe)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RESPONSE",function(Fe){return ct.handleMediaRelayRequestResponse(Fe)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RECEIVED",function(Fe){return ct.handleMediaRelayRequest(Fe)})},[{key:"isE2EEEnabled",get:function(){return this.roomClient.isE2EEEnabled}},{key:"handleError",value:function(ue){this.eventEmitter.listenerCount(ss)>0&&this.eventEmitter.emit(ss,ue)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(ue){this.roomClient.changeMode(ue)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(ue,pe){this.roomClient.respondEntry(ue,pe)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(ue)}},{key:"publishAudio",value:(tt=(0,b.A)(E().mark(function ue(){var pe,Ie=arguments;return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return pe=Ie.length>0&&Ie[0]!==void 0?Ie[0]:void 0,qe.next=1,this.roomClient.enableMic(pe);case 1:return qe.abrupt("return");case 2:case"end":return qe.stop()}},ue,this)})),function(){return tt.apply(this,arguments)})},{key:"unpublishAudio",value:(Ae=(0,b.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.disableMic();case 1:return pe.abrupt("return");case 2:case"end":return pe.stop()}},ue,this)})),function(){return Ae.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(ue)}},{key:"publishVideo",value:($e=(0,b.A)(E().mark(function ue(){var pe,Ie=arguments;return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return pe=Ie.length>0&&Ie[0]!==void 0?Ie[0]:void 0,this.roomClient.enableWebcam(pe),qe.abrupt("return");case 1:case"end":return qe.stop()}},ue,this)})),function(){return $e.apply(this,arguments)})},{key:"unpublishVideo",value:(Xe=(0,b.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return this.roomClient.disableWebcam(),pe.abrupt("return");case 1:case"end":return pe.stop()}},ue,this)})),function(){return Xe.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(ue)}},{key:"pubblishScreenShare",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(ue)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(ue){this.roomClient.sendChatMessage(ue);var pe={text:ue,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(pe)}},{key:"pauseAllStreams",value:function(ue){this.roomClient.pauseAllConsumers(ue)}},{key:"resumeAllStreams",value:function(ue){this.roomClient.resumeAllConsumers(ue)}},{key:"startRecording",value:function(ue,pe,Ie,qe){this.roomClient.startRecording(ue,pe,Ie,qe)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(ue){this.roomClient.startTranscription(ue)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startLivestream",value:function(ue,pe){this.roomClient.startLivestream(ue,pe)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(Oe=(0,b.A)(E().mark(function ue(pe,Ie){return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=1,this.roomClient.startHls(pe,Ie);case 1:case"end":return qe.stop()}},ue,this)})),function(ue,pe){return Oe.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(ue){if(!ue.interactionId&&!ue.id)throw new Error("InteractionId or id is required");return new Ks(ya(ya({},ue),{},{roomClient:this.roomClient}))}},{key:"getMics",value:(ke=(0,b.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.getMics();case 1:return pe.abrupt("return",pe.sent);case 2:case"end":return pe.stop()}},ue,this)})),function(){return ke.apply(this,arguments)})},{key:"getWebcams",value:(We=(0,b.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.getWebcams();case 1:return pe.abrupt("return",pe.sent);case 2:case"end":return pe.stop()}},ue,this)})),function(){return We.apply(this,arguments)})},{key:"changeMic",value:function(ue){this.roomClient.changeMic(ue)}},{key:"changeWebcam",value:function(ue){this.roomClient.changeWebcam(ue)}},{key:"replaceWebcamStream",value:function(ue){this.roomClient.replaceWebcamStream(ue)}},{key:"setWebcamQuality",value:function(ue){this.roomClient.setWebcamQuality(ue)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(ue){var pe=ue.link;this.roomClient.startVideo({link:pe})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(ue){var pe=ue.currentTime;this.roomClient.pauseVideo(pe)}},{key:"seekVideo",value:function(ue){var pe=ue.currentTime;this.roomClient.seekVideo(pe)}},{key:"handlePeerAdd",value:function(ue){var pe=ue.peer,Ie=new $t(pe);this.participants.set(Ie.id,Ie),this.eventEmitter.emit(ro,Ie),this.participants.size===1&&this.updateMainParticipant(Ie.id)}},{key:"handleStreamState",value:function(ue){var pe=ue.state,Ie=ue.peerId,qe=ue.streamId,nt=this.participants.get(Ie);nt?.handleStreamStateChanged({state:pe,peerId:Ie,streamId:qe})}},{key:"handlePeerRemove",value:function(ue){var pe=ue.peerId,Ie=this.participants.get(pe);Ie!=null&&(this.participants.delete(pe),this.eventEmitter.emit(yi,Ie),this.activePresenterId===Ie.id&&(this.activePresenterId=null,this.eventEmitter.emit(Ns,this.activePresenterId)),this.mainParticipantId===Ie.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(ue){var pe=ue.producer,Ie={id:pe.id,rtpSender:pe.rtpSender};this.localParticipant.addProducer(Ie);var qe=new Ar(pe);this.localParticipant.addStream(qe),qe.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(Ns,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(ue){var pe=ue.producer,Ie=new Ar(pe);this.localParticipant.updateStream(Ie)}},{key:"handleProducerRemove",value:function(ue){var pe=ue.producerId;this.localParticipant.removeProducer(pe);var Ie=this.localParticipant.deleteStream(pe);if(Ie&&Ie.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(Ns,this.activePresenterId);var qe=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||qe||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(ue){var pe=ue.consumer,Ie=ue.peerId,qe=this.participants.get(Ie)||this.characters.get(Ie);if(qe){var nt={id:pe.id,rtpReceiver:pe.rtpReceiver};qe.addConsumer(nt);var tn=new Ar(pe);qe.addStream(tn),this.eventEmitter.emit(Xs,tn),tn.kind==="share"&&(this.activePresenterId=qe.id,this.eventEmitter.emit(Ns,this.activePresenterId),this.updateMainParticipant(qe.id))}}},{key:"handleConsumerResume",value:function(ue){var pe=ue.consumerId,Ie=ue.peerId,qe=this.participants.get(Ie);qe&&qe.streamResumed(pe)}},{key:"handleConsumerPause",value:function(ue){var pe=ue.consumerId,Ie=ue.peerId,qe=this.participants.get(Ie);qe&&qe.streamPaused(pe)}},{key:"handleConsumerRemove",value:function(ue){var pe=ue.consumerId,Ie=ue.peerId,qe=this.participants.get(Ie)||this.characters.get(Ie);if(qe!=null&&qe){qe.removeConsumer(pe);var nt=qe.deleteStream(pe);if(this.eventEmitter.emit(Zo,nt),nt&&nt.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(Ns,this.activePresenterId);var tn=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||tn||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(ue){var pe=ue.peerId,Ie=ue.kind,qe=ue.newState,nt=this.participants.get(pe)||this.characters.get(pe);this.localParticipant.id==pe&&(nt=this.localParticipant),nt&&nt&&(Ie=="audio"?nt.micOn=qe:Ie=="video"&&(nt.webcamOn=qe),nt.updateParticipantMediaState(Ie,qe))}},{key:"handleParticipantPausedBySubManager",value:function(ue){var pe=this.participants.get(ue.peerId);pe&&pe&&pe.handleParticipantPause(ue)}},{key:"handleParticipantResumeBySubManager",value:function(ue){var pe=this.participants.get(ue.peerId);pe&&pe&&pe.handleParticipantResume(ue)}},{key:"handleSpeakerChange",value:function(ue){var pe=ue.peerId;this.activeSpeakerId!==pe&&(this.activeSpeakerId=pe,this.eventEmitter.emit(Pi,pe),pe&&pe!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&pe!==this.mainParticipantId&&this.updateMainParticipant(pe))}},{key:"handleNewChatMessage",value:function(ue){var pe=ue.senderId,Ie={senderId:pe,text:ue.text,timestamp:ue.timestamp};if(this.localParticipant.id===pe)Ie.senderName=this.localParticipant.displayName;else{var qe=this.participants.get(pe);qe&&(Ie.senderName=qe.displayName)}this.messages.push(Ie),this.eventEmitter.emit(mo,Ie)}},{key:"updateMainParticipant",value:function(ue){this.mainParticipantId=ue;var pe=null;pe=ue===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(Eo,pe)}},{key:"handleEntryRequested",value:function(ue){var pe=this,Ie=ue.id,qe=ue.name;this.eventEmitter.emit(Hi,{participantId:Ie,name:qe,allow:function(){pe.roomClient.respondEntry(Ie,"allowed")},deny:function(){pe.roomClient.respondEntry(Ie,"denied")}})}},{key:"handleEntryResponded",value:function(ue){var pe=ue.id,Ie=ue.decision;this.eventEmitter.emit(ao,pe,Ie)}},{key:"handleMeetingJoined",value:function(ue){var pe=ue.peers,Ie=ue.poll,qe=ue.messages,nt=ue.baseUrl,tn=ue.switchRoomId;typeof tn=="string"&&(this.id=tn),this.baseUrl=nt,qe.length>0&&(this.messages=qe),this.eventEmitter.emit(Aa,{switchRoomId:tn||null,peers:pe,poll:Ie,messages:qe})}},{key:"handleMeetingLeft",value:function(ue){this.eventEmitter.emit(ls,ue)}},{key:"handleRecordingStateChanged",value:function(ue){this.recordingState=ue.status,this.eventEmitter.emit(Ni,ue)}},{key:"handleLivestreamStateChanged",value:function(ue){this.livestreamState=ue.status,this.eventEmitter.emit(uc,ue)}},{key:"handleHlsStateChanged",value:function(ue){this.hlsState=ue.status,ue.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:ue.downstreamUrl,playbackHlsUrl:ue.playbackHlsUrl,livestreamUrl:ue.livestreamUrl}:ue.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(da,ue)}},{key:"handleTranscriptionStateChanged",value:function(ue){this.transcriptionState=ue.status,this.eventEmitter.emit(gs,ue)}},{key:"handleTranscriptionText",value:function(ue){this.eventEmitter.emit(qi,ue)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(_i)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(Di)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(Cr)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(Hs)}},{key:"handleHlsStarted",value:function(ue){this.eventEmitter.emit(oi,ue)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(so)}},{key:"handleWhiteboardStarted",value:function(ue){this.eventEmitter.emit(tr,ue)}},{key:"handleWhiteboardStopped",value:function(ue){(function(pe){if(pe==null)throw new TypeError("Cannot destructure "+pe)})(ue),this.eventEmitter.emit(Qs)}},{key:"handleAddCharacter",value:function(ue){var pe,Ie=ue.id,qe=(pe=this.characters.get(Ie))!==null&&pe!==void 0?pe:new Ks(ya(ya({},ue),{},{state:et.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(Ie,qe),this.eventEmitter.emit(Go,qe),qe.eventEmitter.emit(Go)}},{key:"handleInitCharacter",value:function(ue){this.characters.set(ue.id,ue)}},{key:"handleRemoveCharacter",value:function(ue){var pe=ue.id;if(this.characters.has(pe)){var Ie=this.characters.get(pe);this.eventEmitter.emit(Yo,Ie),Ie.eventEmitter.emit(Yo),this.characters.delete(pe)}}},{key:"handleCharacterStateChanged",value:function(ue){var pe=ue.id;this.characters.has(pe)&&this.characters.get(pe).handleCharacterStateChanged(ue)}},{key:"handleCharacterMessage",value:function(ue){var pe=ue.id;this.characters.has(pe)&&this.characters.get(pe).handleCharacterMessage(ue)}},{key:"handleUserMessage",value:function(ue){var pe=ue.id;this.characters.has(pe)&&this.characters.get(pe).handleUserMessage(ue)}},{key:"handleOnCharacterData",value:function(ue){var pe=ue.id;this.characters.has(pe)&&this.characters.get(pe).handleCharacterData(ue)}},{key:"handleOnCharacterError",value:function(ue){var pe=ue.id;this.characters.has(pe)&&this.characters.get(pe).handleCharacterError(ue)}},{key:"handleOnRemoveCurrentMeetingParticipant",value:function(){var ue=this;(0,He.A)(this.participants.keys()).forEach(function(pe){pe!==ue.localParticipant.id&&ue.handlePeerRemove({peerId:pe})})}},{key:"handleVideoStateChanged",value:function(ue){this.eventEmitter.emit(ci,ue)}},{key:"handleVideoSeeked",value:function(ue){var pe=ue.currentTime;this.eventEmitter.emit(li,{currentTime:pe})}},{key:"handlePinStateChanged",value:function(ue){var pe=ue.peerId,Ie=ue.state,qe=ue.pinnedBy;this.eventEmitter.emit(ms,{participantId:pe,state:Ie,pinnedBy:qe})}},{key:"handleMeetingStateChanged",value:function(ue){var pe=ue.state;this.eventEmitter.emit(Oc,{state:pe})}},{key:"handleQualityChanged",value:function(ue){var pe=ue.type,Ie=ue.state,qe=ue.timestamp;this.eventEmitter.emit(Js,{type:pe,state:Ie,timestamp:qe})}},{key:"handleConsumersPaused",value:function(ue){var pe=ue.kind;this.eventEmitter.emit(Vr,{kind:pe})}},{key:"handleConsumersResumed",value:function(ue){var pe=ue.kind;this.eventEmitter.emit(ui,{kind:pe})}},{key:"handleVideoQualityChanged",value:function(ue){var pe=ue.peerId,Ie=ue.prevQuality,qe=ue.currentQuality,nt=this.participants.get(pe)||this.characters.get(pe);nt&&nt&&nt.videoQualityChanged(Ie,qe)}},{key:"handleMicRequested",value:function(ue){var pe=this,Ie=ue.peerId;this.eventEmitter.emit(_r,{participantId:Ie,accept:function(){return pe.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(ue){var pe=this,Ie=ue.peerId;this.eventEmitter.emit(qa,{participantId:Ie,accept:function(){return pe.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(ue){var pe=ue.roomId,Ie=ue.peer,qe=this.connections.get(pe);qe?.meeting.participantJoin(Ie)}},{key:"handleConnectionParticipantLeft",value:function(ue){var pe=ue.roomId,Ie=ue.peerId,qe=this.connections.get(pe);qe?.meeting.participantLeft(Ie)}},{key:"handleConnectionOpen",value:function(ue){var pe=ue.peers,Ie=ue.roomId,qe=ue.payload,nt=new Zr({roomId:Ie,peers:pe,payload:qe});this.connections.set(nt.id,nt),this.eventEmitter.emit(Vi,nt)}},{key:"handleConnectionClose",value:function(ue){var pe=ue.roomId;this.connections.get(pe)!=null&&(this.connections.delete(pe),this.eventEmitter.emit(go,pe))}},{key:"handleMediaRelayError",value:function(ue){var pe=ue.meetingId,Ie=ue.error;this.eventEmitter.emit(ve,{meetingId:pe,error:Ie})}},{key:"handleMediaRelayRequest",value:function(ue){var pe=this,Ie=ue.peerId,qe=ue.meetingId,nt=ue.displayName;this.eventEmitter.emit(rr,{participantId:Ie,meetingId:qe,displayName:nt,accept:function(){return pe.roomClient.handleRelayRequestResponse({decision:"allowed",meetingId:qe,peerId:Ie})},reject:function(){return pe.roomClient.handleRelayRequestResponse({decision:"denied",meetingId:qe,peerId:Ie})}})}},{key:"handleMediaRelayRequestResponse",value:function(ue){var pe=ue.decision,Ie=ue.decidedBy,qe=ue.meetingId;this.eventEmitter.emit(At,{decision:pe,decidedBy:Ie,meetingId:qe})}},{key:"handleMediaRelayStart",value:function(ue){var pe=ue.meetingId;this.eventEmitter.emit(io,{meetingId:pe})}},{key:"handleMediaRelayStop",value:function(ue){var pe=ue.meetingId,Ie=ue.reason;this.eventEmitter.emit(fn,{meetingId:pe,reason:Ie})}},{key:"requestMediaRelay",value:(we=(0,b.A)(E().mark(function ue(pe){var Ie,qe,nt;return E().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(Ie=pe.destinationMeetingId,qe=pe.token,nt=pe.kinds,Ie){tn.next=1;break}throw new Error("Parameter destinationMeetingId is required when calling requestMediaRelay.");case 1:return tn.next=2,this.roomClient.requestMediaRelay(Ie,qe,nt);case 2:case"end":return tn.stop()}},ue,this)})),function(ue){return we.apply(this,arguments)})},{key:"stopMediaRelay",value:(xe=(0,b.A)(E().mark(function ue(pe){return E().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(pe){Ie.next=1;break}throw new Error("Parameter destinationMeetingId is required when calling stopMediaRelay.");case 1:return Ie.next=2,this.roomClient.stopMediaRelay(pe);case 2:case"end":return Ie.stop()}},ue,this)})),function(ue){return xe.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(Ee=(0,b.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.enableAdaptiveSubscription();case 1:case"end":return pe.stop()}},ue,this)})),function(){return Ee.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(de=(0,b.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.disableAdaptiveSubscription();case 1:case"end":return pe.stop()}},ue,this)})),function(){return de.apply(this,arguments)})},{key:"enableE2EE",value:(X=(0,b.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.toggleE2EEEnabled(!0);case 1:case"end":return pe.stop()}},ue,this)})),function(){return X.apply(this,arguments)})},{key:"disableE2EE",value:(K=(0,b.A)(E().mark(function ue(){return E().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=1,this.roomClient.toggleE2EEEnabled(!1);case 1:case"end":return pe.stop()}},ue,this)})),function(){return K.apply(this,arguments)})},{key:"handleSwitchMeeting",value:function(ue){var pe=ue.roomId,Ie=ue.token,qe=ue.payload,nt=ue.peerId,tn=ue.connectionPeerId,_t=ue.connectionRoomId,Pt=nt?{meetingId:pe,payload:qe,token:Ie,participantId:nt}:{meetingId:pe,payload:qe,token:Ie,connectionParticipantId:tn,connectionMeetingId:_t};this.eventEmitter.emit(Qa,Pt)}},{key:"handleConnectionChatMessage",value:function(ue){var pe=ue.roomId,Ie=ue.peerId,qe=ue.message,nt=this.connections.get(pe);nt?.meeting.sendChatMessageEvent({participantId:Ie,message:qe})}},{key:"handleE2EEStateChange",value:function(ue){var pe=ue.peerId,Ie=this.localParticipant.id==pe?this.localParticipant:this.participants.get(pe)||this.characters.get(pe);Ie&&Ie&&Ie.handleE2EEStateChange(ue)}},{key:"connectTo",value:(G=(0,b.A)(E().mark(function ue(pe){var Ie,qe;return E().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return Ie=pe.meetingId,qe=pe.payload,nt.next=1,this.roomClient.openConnection({roomId:Ie,payload:qe});case 1:case"end":return nt.stop()}},ue,this)})),function(ue){return G.apply(this,arguments)})},{key:"switchTo",value:function(ue){var pe=ue.meetingId,Ie=ue.token;if(!pe||typeof pe!="string"||pe.trim()==="")throw new Error("Invalid meetingId: must be a non-empty string");this.roomClient.switchTo({meetingId:pe,token:Ie,participantId:this.localParticipant.id})}},{key:"selectedCameraDevice",get:function(){var ue;return(ue=this.roomClient._webcam)===null||ue===void 0?void 0:ue.device}},{key:"selectedMicrophoneDevice",get:function(){var ue;return(ue=this.roomClient._mic)===null||ue===void 0?void 0:ue.device}},{key:"on",value:function(ue,pe){switch(ue){case ro:case yi:case Pi:case Ns:case Eo:case mo:case Hi:case ao:case Ni:case _i:case Di:case uc:case Cr:case Hs:case oi:case so:case da:case gs:case qi:case Xs:case Zo:case tr:case Qs:case Go:case Yo:case Aa:case ls:case ci:case li:case _r:case qa:case ms:case Vi:case go:case Qa:case Oc:case Ps:case Vr:case ui:case io:case fn:case ve:case rr:case At:case ss:case Js:this.eventEmitter.on(ue,pe);break;default:throw new Error("Invalid event type "+ue)}}},{key:"off",value:function(ue,pe){switch(ue){case ro:case yi:case Pi:case Ns:case Eo:case mo:case Hi:case ao:case Ni:case _i:case Di:case uc:case Cr:case Hs:case da:case oi:case so:case gs:case qi:case Xs:case Zo:case tr:case Qs:case Go:case Yo:case Aa:case ls:case ci:case li:case _r:case qa:case ms:case Vi:case go:case Qa:case Oc:case ss:case io:case fn:case ve:case rr:case At:case Ps:case Vr:case ui:case Js:this.eventEmitter.off(ue,pe);break;default:throw new Error("Invalid event type.")}}}]);var G,K,X,de,Ee,xe,we,We,ke,Oe,Xe,$e,Ae,tt}();function kl(G){var K=G.topic,X=G.message,de=G.senderId,Ee=G.timestamp,xe=G.senderName,we=G.id,We=G.payload;K&&X&&Za(ha,this).emit(K,{message:X,senderId:de,timestamp:Ee,topic:K,senderName:xe,id:we,payload:We})}function Cl(G){var K=G.peerId,X=G.mode;K===this.localParticipant.id?this.localParticipant.mode=X:this.participants.get(K).mode=X,this.activePresenterId!==this.localParticipant.id||(0,On.kR)(X)||(this.activePresenterId=null,this.eventEmitter.emit(Ns,this.activePresenterId)),this.eventEmitter.emit(Ps,{participantId:K,mode:X})}var Ir=d(7080),Tl=d(5071),dc=d(4973),ko=d(9027);function vo(G,K,X){return K=(0,sn.A)(K),(0,Tt.A)(G,Wi()?Reflect.construct(K,X||[],(0,sn.A)(G).constructor):K.apply(G,X))}function Wi(){try{var G=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wi=function(){return!!G})()}var yo=function(G){function K(X,de,Ee,xe){return(0,u.A)(this,K),vo(this,K,[X,de,Ee,xe])}return(0,nn.A)(K,G),(0,x.A)(K)}((0,x.A)(function G(K,X,de,Ee){(0,u.A)(this,G),this.deviceId=K,this.groupId=X,this.kind=de,this.label=Ee})),sl=function(G){function K(X,de,Ee,xe){return(0,u.A)(this,K),vo(this,K,[X,de,Ee,xe])}return(0,nn.A)(K,G),(0,x.A)(K)}(yo),Pl=function(G){function K(X,de,Ee,xe){return(0,u.A)(this,K),vo(this,K,[X,de,Ee,xe])}return(0,nn.A)(K,G),(0,x.A)(K)}(yo),Mc=function(G){function K(X,de,Ee,xe){return(0,u.A)(this,K),vo(this,K,[X,de,Ee,xe])}return(0,nn.A)(K,G),(0,x.A)(K)}(yo),Vs={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},ou=(d(328),d(7654));function jc(G,K){return G==null||K==null?NaN:G<K?-1:G>K?1:G>=K?0:NaN}function Lc(G,K){return G==null||K==null?NaN:K<G?-1:K>G?1:K>=G?0:NaN}function Co(G){let K,X,de;function Ee(xe,we,We=0,ke=xe.length){if(We<ke){if(K(we,we)!==0)return ke;do{const Oe=We+ke>>>1;X(xe[Oe],we)<0?We=Oe+1:ke=Oe}while(We<ke)}return We}return G.length!==2?(K=jc,X=(xe,we)=>jc(G(xe),we),de=(xe,we)=>G(xe)-we):(K=G===jc||G===Lc?G:cu,X=G,de=G),{left:Ee,center:function(xe,we,We=0,ke=xe.length){const Oe=Ee(xe,we,We,ke-1);return Oe>We&&de(xe[Oe-1],we)>-de(xe[Oe],we)?Oe-1:Oe},right:function(xe,we,We=0,ke=xe.length){if(We<ke){if(K(we,we)!==0)return ke;do{const Oe=We+ke>>>1;X(xe[Oe],we)<=0?We=Oe+1:ke=Oe}while(We<ke)}return We}}}function cu(){return 0}const Oa=Co(jc),Wa=Oa.right,Nl=(Co(function(G){return G===null?NaN:+G}).center,Wa);function Dl(G,K){switch(arguments.length){case 0:break;case 1:this.range(G);break;default:this.range(K).domain(G)}return this}function gt(){var G,K=[.5],X=[0,1],de=1;function Ee(xe){return xe!=null&&xe<=xe?X[Nl(K,xe,0,de)]:G}return Ee.domain=function(xe){return arguments.length?(K=Array.from(xe),de=Math.min(K.length,X.length-1),Ee):K.slice()},Ee.range=function(xe){return arguments.length?(X=Array.from(xe),de=Math.min(K.length,X.length-1),Ee):X.slice()},Ee.invertExtent=function(xe){var we=X.indexOf(xe);return[K[we-1],K[we]]},Ee.unknown=function(xe){return arguments.length?(G=xe,Ee):G},Ee.copy=function(){return gt().domain(K).range(X).unknown(G)},Dl.apply(Ee,arguments)}function To(G,K){(K==null||K>G.length)&&(K=G.length);for(var X=0,de=Array(K);X<K;X++)de[X]=G[X];return de}function lr(G,K,X){if(typeof G=="function"?G===K:G.has(K))return arguments.length<3?K:X;throw new TypeError("Private element is not present on this object")}function Ic(G,K,X){return K=Q(K),function(de,Ee){if(Ee&&(typeof Ee=="object"||typeof Ee=="function"))return Ee;if(Ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(xe){if(xe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe}(de)}(G,je()?Reflect.construct(K,X||[],Q(G).constructor):K.apply(G,X))}function Po(G,K){if(K.has(G))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ds(G,K){if(!(G instanceof K))throw new TypeError("Cannot call a class as a function")}function fe(G,K){return G.get(lr(G,K))}function Bn(G,K,X){Po(G,K),K.set(G,X)}function Vn(G,K,X){return G.set(lr(G,K),X),X}function hc(G,K){Po(G,K),K.add(G)}function Ma(G,K,X){return K&&function(de,Ee){for(var xe=0;xe<Ee.length;xe++){var we=Ee[xe];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(de,Jr(we.key),we)}}(G.prototype,K),Object.defineProperty(G,"prototype",{writable:!1}),G}function ne(G,K,X){return(K=Jr(K))in G?Object.defineProperty(G,K,{value:X,enumerable:!0,configurable:!0,writable:!0}):G[K]=X,G}function Y(){return Y=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(G,K,X){var de=Gn(G,K);if(de){var Ee=Object.getOwnPropertyDescriptor(de,K);return Ee.get?Ee.get.call(arguments.length<3?G:X):Ee.value}},Y.apply(null,arguments)}function Q(G){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(K){return K.__proto__||Object.getPrototypeOf(K)},Q(G)}function ce(G,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(K&&K.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),K&&zn(G,K)}function je(){try{var G=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(je=function(){return!!G})()}function at(G,K){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(G);K&&(de=de.filter(function(Ee){return Object.getOwnPropertyDescriptor(G,Ee).enumerable})),X.push.apply(X,de)}return X}function kt(G){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?at(Object(X),!0).forEach(function(de){ne(G,de,X[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):at(Object(X)).forEach(function(de){Object.defineProperty(G,de,Object.getOwnPropertyDescriptor(X,de))})}return G}function Lt(G,K){if(G==null)return{};var X,de,Ee=function(we,We){if(we==null)return{};var ke={};for(var Oe in we)if({}.hasOwnProperty.call(we,Oe)){if(We.indexOf(Oe)!==-1)continue;ke[Oe]=we[Oe]}return ke}(G,K);if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(G);for(de=0;de<xe.length;de++)X=xe[de],K.indexOf(X)===-1&&{}.propertyIsEnumerable.call(G,X)&&(Ee[X]=G[X])}return Ee}function xt(G,K,X,de){return xt=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(Ee,xe,we,We){var ke,Oe=Gn(Ee,xe);if(Oe){if((ke=Object.getOwnPropertyDescriptor(Oe,xe)).set)return ke.set.call(We,we),!0;if(!ke.writable)return!1}if(ke=Object.getOwnPropertyDescriptor(We,xe)){if(!ke.writable)return!1;ke.value=we,Object.defineProperty(We,xe,ke)}else ne(We,xe,we);return!0},xt(G,K,X,de)}function zn(G,K){return zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,de){return X.__proto__=de,X},zn(G,K)}function Gt(G,K){return function(X){if(Array.isArray(X))return X}(G)||function(X,de){var Ee=X==null?null:typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(Ee!=null){var xe,we,We,ke,Oe=[],Xe=!0,$e=!1;try{if(We=(Ee=Ee.call(X)).next,de===0){if(Object(Ee)!==Ee)return;Xe=!1}else for(;!(Xe=(xe=We.call(Ee)).done)&&(Oe.push(xe.value),Oe.length!==de);Xe=!0);}catch(Ae){$e=!0,we=Ae}finally{try{if(!Xe&&Ee.return!=null&&(ke=Ee.return(),Object(ke)!==ke))return}finally{if($e)throw we}}return Oe}}(G,K)||pa(G,K)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gn(G,K){for(;!{}.hasOwnProperty.call(G,K)&&(G=Q(G))!==null;);return G}function kn(G,K,X,de,Ee,xe){return function(we,We,ke,Oe,Xe){if(!xt(we,We,ke,Oe||we)&&Xe)throw new TypeError("failed to set property");return ke}(Q(G.prototype),K,X,de,Ee)}function sa(G){return function(K){if(Array.isArray(K))return To(K)}(G)||function(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}(G)||pa(G)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jr(G){var K=function(X,de){if(typeof X!="object"||!X)return X;var Ee=X[Symbol.toPrimitive];if(Ee!==void 0){var xe=Ee.call(X,de);if(typeof xe!="object")return xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(X)}(G,"string");return typeof K=="symbol"?K:K+""}function pa(G,K){if(G){if(typeof G=="string")return To(G,K);var X={}.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?To(G,K):void 0}}var ia="https://speed.cloudflare.com",$i={autoStart:!0,downloadApiUrl:"".concat(ia,"/__down"),uploadApiUrl:"".concat(ia,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(ia,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(ia,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},Zi={aimMeasurementScoring:{packetLoss:gt([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:gt([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:gt([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:gt([10,20,100,500],[10,5,0,-10,-20]),download:gt([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:gt([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},bi=function(G){var K=G.headers.get("server-timing");if(K){var X=K.match(/dur=([0-9.]+)/);if(X)return+X[1]}},_o=function(G){return G.responseStart-G.requestStart},bo=function(G){return G.responseEnd-G.responseStart},No=function(G){return G.ping+G.payloadDownloadTime},ei=function(G){return G.ttfb},di=function(G,K){var X=G.duration,de=G.transferSize,Ee=X/1e3;return Ee?8*(de||1.005*+K)/Ee:void 0},Do=function(G,K){var X=G.duration/1e3;return X?8*K*1.005/X:void 0},Bc=ou(function(G){return"0".repeat(G)}),pc=new WeakMap,hi=new WeakMap,oo=new WeakMap,Ko=new WeakMap,zc=new WeakMap,Gi=new WeakMap,fc=new WeakMap,pi=new WeakMap,Yi=new WeakMap,il=new WeakMap,Qo=new WeakMap,mc=new WeakMap,Ao=new WeakMap,Xo=new WeakMap,qs=new WeakMap,As=new WeakMap,Ai=new WeakMap,vs=new WeakMap,Os=new WeakMap,xo=new WeakMap,fi=new WeakMap,Oo=new WeakMap,Ms=new WeakSet,wo=function(){return Ma(function G(K){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=X.downloadApiUrl,Ee=X.uploadApiUrl,xe=X.throttleMs,we=xe===void 0?0:xe,We=X.estimatedServerTime,ke=We===void 0?0:We;if(Ds(this,G),hc(this,Ms),Bn(this,pc,{}),Bn(this,hi,{}),ne(this,"finishRequestDuration",1e3),ne(this,"getServerTime",bi),Bn(this,oo,function(Oe){return Oe}),Bn(this,Ko,function(){}),Bn(this,zc,function(){}),Bn(this,Gi,function(){}),Bn(this,fc,function(){}),Bn(this,pi,function(){}),Bn(this,Yi,void 0),Bn(this,il,void 0),Bn(this,Qo,void 0),Bn(this,mc,!1),Bn(this,Ao,{down:!1,up:!1}),Bn(this,Xo,{down:{},up:{}}),Bn(this,qs,0),Bn(this,As,0),Bn(this,Ai,0),Bn(this,vs,-1/0),Bn(this,Os,0),Bn(this,xo,0),Bn(this,fi,void 0),Bn(this,Oo,void 0),!K)throw new Error("Missing measurements argument");if(!de)throw new Error("Missing downloadApiUrl argument");if(!Ee)throw new Error("Missing uploadApiUrl argument");Vn(Yi,this,K),Vn(il,this,de),Vn(Qo,this,Ee),Vn(Os,this,we),Vn(xo,this,Math.max(0,ke))},[{key:"results",get:function(){return fe(Xo,this)}},{key:"qsParams",get:function(){return fe(pc,this)},set:function(G){Vn(pc,this,G)}},{key:"fetchOptions",get:function(){return fe(hi,this)},set:function(G){Vn(hi,this,G)}},{key:"responseHook",set:function(G){Vn(oo,this,G)}},{key:"onRunningChange",set:function(G){Vn(Ko,this,G)}},{key:"onNewMeasurementStarted",set:function(G){Vn(zc,this,G)}},{key:"onMeasurementResult",set:function(G){Vn(Gi,this,G)}},{key:"onFinished",set:function(G){Vn(fc,this,G)}},{key:"onConnectionError",set:function(G){Vn(pi,this,G)}},{key:"pause",value:function(){clearTimeout(fe(Oo,this)),lr(Ms,this,Mo).call(this),lr(Ms,this,co).call(this,!1)}},{key:"play",value:function(){fe(mc,this)||(lr(Ms,this,co).call(this,!0),lr(Ms,this,Oi).call(this))}}])}();function co(G){var K=this;G!==fe(mc,this)&&(Vn(mc,this,G),setTimeout(function(){return fe(Ko,K).call(K,fe(mc,K))}))}function Jo(G,K){var X=this,de=fe(Yi,this)[G],Ee=de.bytes,xe=de.dir,we=fe(Xo,this),We=we[xe].hasOwnProperty(Ee)?we[xe][Ee]:{timings:[],numMeasurements:fe(Yi,this).filter(function(ke){var Oe=ke.bytes,Xe=ke.dir;return Ee===Oe&&xe===Xe}).map(function(ke){return ke.count}).reduce(function(ke,Oe){return ke+Oe},0)};K&&We.timings.push(K),We.timings=We.timings.slice(-We.numMeasurements),we[xe][Ee]=We,K?setTimeout(function(){fe(Gi,X).call(X,kt({type:xe,bytes:Ee},K),we)}):fe(zc,this).call(this,fe(Yi,this)[G],we)}function Oi(){var G=this,K=fe(Yi,this),X=K[fe(qs,this)];if(fe(As,this)>=X.count){var de=fe(Ao,this);if(fe(vs,this)>this.finishRequestDuration&&!X.bypassMinDuration){var Ee=X.dir;fe(Ao,this)[Ee]=!0,Object.values(fe(Ao,this)).every(function(pe){return pe})&&fe(fc,this).call(this,fe(Xo,this))}Vn(As,this,0),Vn(vs,this,-1/0),performance.clearResourceTimings();do Vn(qs,this,fe(qs,this)+1);while(fe(qs,this)<K.length&&de[K[fe(qs,this)].dir]);if(fe(qs,this)>=K.length)return Vn(Ao,this,{down:!0,up:!0}),lr(Ms,this,co).call(this,!1),void fe(fc,this).call(this,fe(Xo,this));X=K[fe(qs,this)]}var xe=fe(qs,this);fe(As,this)===0&&lr(Ms,this,Jo).call(this,xe);var we=X,We=we.bytes,ke=we.dir==="down",Oe=fe(ke?il:Qo,this),Xe=Object.assign({},fe(pc,this));ke&&(Xe.bytes="".concat(We));var $e,Ae="".concat(Oe.startsWith("http")||Oe.startsWith("//")?"":window.location.origin).concat(Oe,"?").concat(Object.entries(Xe).map(function(pe){var Ie=Gt(pe,2),qe=Ie[0],nt=Ie[1];return"".concat(qe,"=").concat(nt)}).join("&")),tt=Object.assign({},ke?{}:{method:"POST",body:Bc(We)},fe(hi,this)),ue=Vn(fi,this,fetch(Ae,tt).then(function(pe){if(pe.ok)return pe;throw Error(pe.statusText)}).then(function(pe){return G.getServerTime&&($e=G.getServerTime(pe)),pe}).then(function(pe){return pe.text().then(function(Ie){return fe(oo,G)&&fe(oo,G).call(G,{url:Ae,headers:pe.headers,body:Ie}),Ie})}).then(function(pe,Ie){if(ue._cancel)Ie("cancelled");else{var qe=performance.getEntriesByName(Ae).slice(-1)[0],nt={transferSize:qe.transferSize,ttfb:_o(qe),payloadDownloadTime:bo(qe),serverTime:$e||-1,measTime:new Date};if(nt.ping=Math.max(.01,nt.ttfb-($e||fe(xo,G))),nt.duration=(ke?No:ei)(nt),nt.bps=(ke?di:Do)(nt,We),ke&&We){var tn=+We;nt.transferSize&&(nt.transferSize<tn||nt.transferSize/tn>1.05)&&console.warn("Requested ".concat(tn,"B but received ").concat(nt.transferSize,"B (").concat(Math.round(nt.transferSize/tn*1e4)/100,"%)."))}lr(Ms,G,Jo).call(G,xe,nt);var _t=nt.duration;Vn(vs,G,fe(vs,G)<0?_t:Math.min(fe(vs,G),_t)),Vn(As,G,fe(As,G)+1),Vn(Ai,G,0),fe(Os,G)?Vn(Oo,G,setTimeout(function(){return lr(Ms,G,Oi).call(G)},fe(Os,G))):lr(Ms,G,Oi).call(G)}}).catch(function(pe){var Ie,qe;ue._cancel||(console.warn("Error fetching ".concat(Ae,": ").concat(pe)),Vn(Ai,G,(Ie=fe(Ai,G),qe=Ie++,Ie)),qe<20?lr(Ms,G,Oi).call(G):(Vn(Ai,G,0),lr(Ms,G,co).call(G,!1),fe(pi,G).call(G,"Connection failed to ".concat(Ae,". Gave up after ").concat(20," retries."))))}))}function Mo(){var G=fe(fi,this);G&&(G._cancel=!0)}var Al=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],Ta=new WeakMap,ec=new WeakSet,Ki=function(G){function K(X){var de,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=Ee.measureParallelLatency,we=xe!==void 0&&xe,We=Ee.parallelLatencyThrottleMs,ke=We===void 0?100:We,Oe=Ee.downloadApiUrl,Xe=Ee.uploadApiUrl,$e=Ee.estimatedServerTime,Ae=$e===void 0?0:$e,tt=Lt(Ee,Al);return Ds(this,K),hc(de=Ic(this,K,[X,kt({downloadApiUrl:Oe,uploadApiUrl:Xe,estimatedServerTime:Ae},tt)]),ec),Bn(de,Ta,void 0),we&&(Vn(Ta,de,new wo([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:Oe,uploadApiUrl:Xe,estimatedServerTime:Ae,throttleMs:ke})),fe(Ta,de).qsParams={during:"".concat(X[0].dir,"load")},kn(K,"onRunningChange",lr(ec,de,Uc),de,1),kn(K,"onConnectionError",function(){return fe(Ta,de).pause()},de,1)),de}return ce(K,G),Ma(K,[{key:"latencyResults",get:function(){return fe(Ta,this)&&fe(Ta,this).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(X){fe(Ta,this)&&(fe(Ta,this).onMeasurementResult=function(de){return X(de)})}},{key:"fetchOptions",get:function(){return X="fetchOptions",de=this,Ee=1,xe=Y(Q(K.prototype),X,de),2&Ee&&typeof xe=="function"?function(we){return xe.apply(de,we)}:xe;var X,de,Ee,xe},set:function(X){kn(K,"fetchOptions",X,this,1),fe(Ta,this)&&(fe(Ta,this).fetchOptions=X)}},{key:"onRunningChange",set:function(X){var de=this;kn(K,"onRunningChange",function(Ee){lr(ec,de,Uc).call(de,Ee),X(Ee)},this,1)}},{key:"onConnectionError",set:function(X){var de=this;kn(K,"onConnectionError",function(){fe(Ta,de)&&fe(Ta,de).pause(),X.apply(void 0,arguments)},this,1)}}])}(wo);function Uc(G){var K=this;fe(Ta,this)&&(G?setTimeout(function(){return fe(Ta,K).play()},20):fe(Ta,this).pause())}var gc=["measurementId","logApiUrl"],xi=new WeakMap,tc=new WeakMap,jo=new WeakMap,wi=new WeakMap,Qi=new WeakSet,i=function(G){function K(X){var de,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=Ee.measurementId,we=Ee.logApiUrl,We=Lt(Ee,gc);return Ds(this,K),hc(de=Ic(this,K,[X,We]),Qi),Bn(de,xi,void 0),Bn(de,tc,void 0),Bn(de,jo,void 0),Bn(de,wi,void 0),Vn(xi,de,xe),Vn(wi,de,we),kn(K,"qsParams",we?{measId:fe(xi,de)}:{},de,1),kn(K,"responseHook",function(ke){return lr(Qi,de,h).call(de,ke)},de,1),kn(K,"onMeasurementResult",function(ke){return lr(Qi,de,M).call(de,ke)},de,1),de}return ce(K,G),Ma(K,[{key:"qsParams",set:function(X){kn(K,"qsParams",fe(wi,this)?kt({measId:fe(xi,this)},X):X,this,1)}},{key:"responseHook",set:function(X){var de=this;kn(K,"responseHook",function(Ee){X(Ee),lr(Qi,de,h).call(de,Ee)},this,1)}},{key:"onMeasurementResult",set:function(X){var de=this;kn(K,"onMeasurementResult",function(Ee){for(var xe=arguments.length,we=new Array(xe>1?xe-1:0),We=1;We<xe;We++)we[We-1]=arguments[We];X.apply(void 0,[Ee].concat(we)),lr(Qi,de,M).call(de,Ee)},this,1)}}])}(Ki);function h(G){fe(wi,this)&&(Vn(jo,this,+G.headers.get("cf-meta-request-time")),Vn(tc,this,G.body.slice(-300).split("___").pop()))}function M(G){if(fe(wi,this)){var K={type:G.type,bytes:G.bytes,ping:Math.round(G.ping),ttfb:Math.round(G.ttfb),payloadDownloadTime:Math.round(G.payloadDownloadTime),duration:Math.round(G.duration),transferSize:Math.round(G.transferSize),serverTime:Math.round(G.serverTime),token:fe(tc,this),requestTime:fe(jo,this),measId:fe(xi,this)};Vn(tc,this,null),Vn(jo,this,null),fetch(fe(wi,this),kt({method:"POST",body:JSON.stringify(K)},this.fetchOptions))}}var W=new WeakMap,te=new WeakMap,he=new WeakMap,ze=new WeakSet,it=function(){return Ma(function G(K){if(Ds(this,G),hc(this,ze),Bn(this,W,!1),Bn(this,te,void 0),Bn(this,he,void 0),!K)throw new Error("Missing operation to perform");Vn(he,this,K),this.play()},[{key:"pause",value:function(){lr(ze,this,qn).call(this),lr(ze,this,ht).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){fe(W,this)||(lr(ze,this,ht).call(this,!0),lr(ze,this,Xt).call(this))}}])}();function ht(G){G!==fe(W,this)&&Vn(W,this,G)}function Xt(){var G=this,K=Vn(te,this,fe(he,this).call(this).then(function(){!K._cancel&&lr(ze,G,Xt).call(G)}))}function qn(){var G=fe(te,this);G&&(G._cancel=!0)}var Yn=new WeakMap,ir=function(){return Ma(function G(){var K=this,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=X.download,Ee=X.upload;if(Ds(this,G),ne(this,"qsParams",{}),ne(this,"fetchOptions",{}),Bn(this,Yn,[]),!de&&!Ee)throw new Error("Missing at least one of download/upload config");[[de,"download"],[Ee,"upload"]].filter(function(we){return Gt(we,1)[0]}).forEach(function(we){var We=Gt(we,2),ke=We[0],Oe=We[1],Xe=ke.apiUrl,$e=ke.chunkSize;if(!Xe)throw new Error("Missing ".concat(Oe," apiUrl argument"));if(!$e)throw new Error("Missing ".concat(Oe," chunkSize argument"))});var xe=function(we){var We=we.apiUrl,ke=we.qsParams,Oe=ke===void 0?{}:ke,Xe=we.fetchOptions,$e=Xe===void 0?{}:Xe;return new it(function(){var Ae=Object.assign({},Oe,K.qsParams),tt="".concat(We.startsWith("http")||We.startsWith("//")?"":window.location.origin).concat(We,"?").concat(Object.entries(Ae).map(function(pe){var Ie=Gt(pe,2),qe=Ie[0],nt=Ie[1];return"".concat(qe,"=").concat(nt)}).join("&")),ue=Object.assign({},$e,K.fetchOptions);return fetch(tt,ue).then(function(pe){if(pe.ok)return pe;throw Error(pe.statusText)}).then(function(pe){return pe.text()})})};de&&fe(Yn,this).push(xe({apiUrl:de.apiUrl,qsParams:{bytes:"".concat(de.chunkSize)}})),Ee&&fe(Yn,this).push(xe({apiUrl:Ee.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(Ee.chunkSize)}}))},[{key:"pause",value:function(){fe(Yn,this).forEach(function(G){return G.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){fe(Yn,this).forEach(function(G){return G.play()})}}])}(),jr=["iceServers","acceptIceCandidate","dataChannelCfg"],ka=new WeakMap,Ua=new WeakMap,us=new WeakMap,js=new WeakMap,vc=new WeakMap,Ol=function(){return Ma(function G(){var K=this,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=X.iceServers,Ee=de===void 0?[]:de,xe=X.acceptIceCandidate,we=xe===void 0?function(tt){var ue=tt.protocol||"";if(!ue&&tt.candidate){var pe=tt.candidate.split(" ");pe.length>=3&&(ue=pe[2])}return ue.toLowerCase()==="udp"}:xe,We=X.dataChannelCfg,ke=We===void 0?{ordered:!1,maxRetransmits:0}:We,Oe=Lt(X,jr);Ds(this,G),ne(this,"onOpen",function(){}),ne(this,"onClose",function(){}),ne(this,"onMessageReceived",function(){}),Bn(this,ka,!1),Bn(this,Ua,void 0),Bn(this,us,void 0),Bn(this,js,void 0),Bn(this,vc,void 0);var Xe=new RTCPeerConnection(kt({iceServers:Ee},Oe)),$e=new RTCPeerConnection(kt({iceServers:Ee},Oe)),Ae=Xe.createDataChannel("channel",ke);Ae.onopen=function(){Vn(ka,K,!0),K.onOpen()},Ae.onclose=function(){return K.close()},$e.ondatachannel=function(tt){var ue=tt.channel;ue.onclose=function(){return K.close()},ue.onmessage=function(pe){return K.onMessageReceived(pe.data)},Vn(vc,K,ue)},Xe.onicecandidate=function(tt){tt.candidate&&we(tt.candidate)&&$e.addIceCandidate(tt.candidate)},$e.onicecandidate=function(tt){tt.candidate&&we(tt.candidate)&&Xe.addIceCandidate(tt.candidate)},Xe.createOffer().then(function(tt){return Xe.setLocalDescription(tt)}).then(function(){return $e.setRemoteDescription(Xe.localDescription)}).then(function(){return $e.createAnswer()}).then(function(tt){return $e.setLocalDescription(tt)}).then(function(){return Xe.setRemoteDescription($e.localDescription)}),Vn(Ua,this,Xe),Vn(us,this,$e),Vn(js,this,Ae),Vn(ka,this,!1)},[{key:"send",value:function(G){return fe(js,this).send(G)}},{key:"close",value:function(){return fe(Ua,this)&&fe(Ua,this).close(),fe(us,this)&&fe(us,this).close(),fe(js,this)&&fe(js,this).close(),fe(vc,this)&&fe(vc,this).close(),fe(ka,this)&&this.onClose(),Vn(ka,this,!1),this}}])}(),Lo=new WeakMap,lo=new WeakMap,Fc=new WeakMap,Mi=new WeakMap,$a=new WeakMap,Si=new WeakMap,uo=function(){return Ma(function G(){var K=this,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=X.turnServerUri,Ee=X.turnServerCredsApi,xe=X.turnServerCredsApiParser,we=xe===void 0?function(Pt){return{turnServerUser:Pt.username,turnServerPass:Pt.credential,turnServerUri:Pt.server}}:xe,We=X.turnServerCredsApiIncludeCredentials,ke=We!==void 0&&We,Oe=X.turnServerUser,Xe=X.turnServerPass,$e=X.numMsgs,Ae=$e===void 0?100:$e,tt=X.batchSize,ue=tt===void 0?10:tt,pe=X.batchWaitTime,Ie=pe===void 0?10:pe,qe=X.responsesWaitTime,nt=qe===void 0?5e3:qe,tn=X.connectionTimeout,_t=tn===void 0?5e3:tn;if(Ds(this,G),Bn(this,Lo,function(){}),Bn(this,lo,function(){}),Bn(this,Fc,function(){}),ne(this,"onMsgSent",function(){}),ne(this,"onAllMsgsSent",function(){}),ne(this,"onMsgReceived",function(){}),Bn(this,Mi,{}),Bn(this,$a,void 0),Bn(this,Si,void 0),!de&&!Ee)throw new Error("Missing turnServerCredsApi or turnServerUri argument");if(!(Oe&&Xe||Ee))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");Vn(Si,this,Ae),(Oe&&Xe?Promise.resolve({turnServerUser:Oe,turnServerPass:Xe}):fetch(Ee,{credentials:ke?"include":void 0}).then(function(Pt){return Pt.json()}).then(function(Pt){if(Pt.error)throw Pt.error;return Pt}).then(we)).catch(function(Pt){return fe(Lo,K).call(K,Pt)}).then(function(Pt){var Mn=Pt.turnServerUser,ct=Pt.turnServerPass,Fe=Pt.turnServerUri,bt=Vn($a,K,new Ol({iceServers:[{urls:"turn:".concat(Fe||de,"?transport=udp"),username:Mn,credential:ct}],iceTransportPolicy:"relay"})),wn=!1;setTimeout(function(){wn||(bt.close(),fe(lo,K).call(K,"ICE connection timeout!"))},_t);var cn=fe(Mi,K);bt.onOpen=function(){wn=!0;var vn=K;(function or(Lr){if(Lr<=Ae){for(var Tn=Lr;Tn<=Math.min(Ae,Lr+ue-1);)cn[Tn]=!1,bt.send(Tn),vn.onMsgSent(Tn),Tn++;setTimeout(function(){return or(Tn)},Ie)}else{vn.onAllMsgsSent(Object.keys(cn).length);var yn=function(){bt.close(),fe(Fc,vn).call(vn,vn.results)},Pr=setTimeout(yn,nt),br=Object.values(fe(Mi,vn)).filter(function(ar){return!ar}).length;bt.onMessageReceived=function(ar){clearTimeout(Pr),cn[ar]=!0,vn.onMsgReceived(ar),--br<=0&&Object.values(fe(Mi,vn)).every(function(Wn){return Wn})?yn():Pr=setTimeout(yn,nt)}}})(1)},bt.onMessageReceived=function(vn){cn[vn]=!0,K.onMsgReceived(vn)}}).catch(function(Pt){return fe(lo,K).call(K,Pt.toString())})},[{key:"onCredentialsFailure",set:function(G){Vn(Lo,this,G)}},{key:"onConnectionError",set:function(G){Vn(lo,this,G)}},{key:"onFinished",set:function(G){Vn(Fc,this,G)}},{key:"results",get:function(){var G=fe(Si,this),K=Object.keys(fe(Mi,this)).length,X=Object.entries(fe(Mi,this)).filter(function(de){return!Gt(de,2)[1]}).map(function(de){return+Gt(de,1)[0]});return{totalMessages:G,numMessagesSent:K,packetLoss:X.length/K,lostMessages:X}}}])}(),So=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],Ja=new WeakMap,yc=function(G){function K(){var X,de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ee=de.downloadChunkSize,xe=de.uploadChunkSize,we=de.downloadApiUrl,We=de.uploadApiUrl,ke=Lt(de,So);return Ds(this,K),Bn(X=Ic(this,K,[ke]),Ja,void 0),(Ee||xe)&&(Vn(Ja,X,new ir({download:Ee?{apiUrl:we,chunkSize:Ee}:null,upload:xe?{apiUrl:We,chunkSize:xe}:null})),kn(K,"onCredentialsFailure",kn(K,"onConnectionError",kn(K,"onFinished",function(){return fe(Ja,X).stop()},X,1),X,1),X,1)),X}return ce(K,G),Ma(K,[{key:"qsParams",set:function(X){fe(Ja,this)&&(fe(Ja,this).qsParams=X)}},{key:"fetchOptions",set:function(X){fe(Ja,this)&&(fe(Ja,this).fetchOptions=X)}},{key:"onCredentialsFailure",set:function(X){var de=this;kn(K,"onCredentialsFailure",function(){X.apply(void 0,arguments),fe(Ja,de)&&fe(Ja,de).stop()},this,1)}},{key:"onConnectionError",set:function(X){var de=this;kn(K,"onConnectionError",function(){X.apply(void 0,arguments),fe(Ja,de)&&fe(Ja,de).stop()},this,1)}},{key:"onFinished",set:function(X){var de=this;kn(K,"onFinished",function(){X.apply(void 0,arguments),fe(Ja,de)&&fe(Ja,de).stop()},this,1)}}])}(uo),Hc=["reachable"],Io=Ma(function G(K){var X=this,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ee=de.timeout,xe=Ee===void 0?-1:Ee,we=de.fetchOptions,We=we===void 0?{}:we;Ds(this,G),ne(this,"onFinished",function(){});var ke=!1,Oe=function(Xe){var $e=Xe.reachable,Ae=Lt(Xe,Hc);ke||(ke=!0,X.onFinished(kt({targetUrl:K,reachable:$e},Ae)))};fetch(K,We).then(function(Xe){Oe({reachable:!0,response:Xe})}).catch(function(Xe){Oe({reachable:!1,error:Xe})}),xe>0&&setTimeout(function(){return Oe({reachable:!1,error:"Request timeout"})},xe)}),ol=function(G){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!G.length)return 0;var X=G.slice().sort(function(we,We){return we-We}),de=(G.length-1)*K,Ee=de%1;if(Ee===0)return X[Math.round(de)];var xe=[Math.floor,Math.ceil].map(function(we){return X[we(de)]});return xe[0]+(xe[1]-xe[0])*Ee},ji=new WeakMap,ws=new WeakMap,Ml=function(){return Ma(function G(K){var X=this;Ds(this,G),ne(this,"getLatencyPoints",function(de){return de.timings.map(function(Ee){return Ee.ping})}),ne(this,"getLatency",function(de){return ol(X.getLatencyPoints(de),fe(ji,X).latencyPercentile)}),ne(this,"getBandwidthPoints",function(de){return Object.entries(de).map(function(Ee){var xe=Gt(Ee,2),we=xe[0];return xe[1].timings.map(function(We){var ke=We.bps,Oe=We.duration,Xe=We.ping,$e=We.measTime,Ae=We.serverTime,tt=We.transferSize;return{bytes:+we,bps:ke,duration:Oe,ping:Xe,measTime:$e,serverTime:Ae,transferSize:tt}})}).flat()}),ne(this,"getBandwidth",function(de){return ol(X.getBandwidthPoints(de).filter(function(Ee){return Ee.duration>=fe(ji,X).bandwidthMinRequestDuration}).map(function(Ee){return Ee.bps}).filter(function(Ee){return Ee}),fe(ji,X).bandwidthPercentile)}),ne(this,"getLoadedLatency",function(de){return X.getLatency({timings:fe(ws,X).call(X,de)})}),ne(this,"getLoadedJitter",function(de){return X.getJitter({timings:fe(ws,X).call(X,de)})}),ne(this,"getLoadedLatencyPoints",function(de){return X.getLatencyPoints({timings:fe(ws,X).call(X,de)})}),ne(this,"getPacketLoss",function(de){return de.packetLoss}),ne(this,"getPacketLossDetails",function(de){return de}),ne(this,"getReachability",function(de){return!!de.reachable}),ne(this,"getReachabilityDetails",function(de){return{host:de.host,reachable:de.reachable}}),Bn(this,ji,void 0),Bn(this,ws,function(de){return Object.values(de).filter(function(Ee){return Ee.timings.length&&Math.min.apply(Math,sa(Ee.timings.map(function(xe){return xe.duration})))>=fe(ji,X).loadedRequestMinDuration}).map(function(Ee){return Ee.sideLatency||[]}).flat().slice(-fe(ji,X).loadedLatencyMaxPoints)}),Vn(ji,this,K)},[{key:"getJitter",value:function(G){var K=this.getLatencyPoints(G);return K.length<2?null:K.reduce(function(X,de){var Ee=X.sumDeltas,xe=Ee===void 0?0:Ee,we=X.prevLatency;return{sumDeltas:xe+(we!==void 0?Math.abs(we-de):0),prevLatency:de}},{}).sumDeltas/(K.length-1)}}])}(),Iu=["bad","poor","average","good","great"],Bu={loadedLatencyIncrease:function(G){return G.latency&&(G.downLoadedLatency||G.upLoadedLatency)?Math.max(G.downLoadedLatency,G.upLoadedLatency)-G.latency:void 0}},zu={packetLoss:0},jl=new WeakMap,Ss=function(){return Ma(function G(K){Ds(this,G),Bn(this,jl,void 0),Vn(jl,this,K)},[{key:"getScores",value:function(G){var K=Object.assign.apply(Object,sa(Object.entries(fe(jl,this).aimMeasurementScoring).map(function(X){var de=Gt(X,2),Ee=de[0],xe=de[1],we=Bu.hasOwnProperty(Ee)?Bu[Ee](G):G[Ee];return we===void 0?zu.hasOwnProperty(Ee)?ne({},Ee,zu[Ee]):{}:ne({},Ee,we===void 0?0:+xe(we))})));return Object.assign.apply(Object,[{}].concat(sa(Object.entries(fe(jl,this).aimExperiencesDefs).filter(function(X){return Gt(X,2)[1].input.every(function(de){return K.hasOwnProperty(de)})}).map(function(X){var de,Ee=Gt(X,2),xe=Ee[0],we=Ee[1],We=we.input,ke=we.pointThresholds,Oe=Math.max(0,(de=We.map(function($e){return K[$e]}),de.reduce(function($e,Ae){return $e+Ae},0))),Xe=gt(ke,[0,1,2,3,4])(Oe);return ne({},xe,{points:Oe,classificationIdx:Xe,classificationName:Iu[Xe]})}))))}}])}(),_c=new WeakMap,bc=new WeakMap,xc=new WeakMap,is=new WeakMap,wc=new WeakMap,Vc=new WeakMap,Uu=new WeakMap,Fu=new WeakMap,_d=function(){return Ma(function G(K){var X=this;Ds(this,G),ne(this,"raw",void 0),ne(this,"getUnloadedLatency",function(){return fe(is,X).call(X,"getLatency","latency")}),ne(this,"getUnloadedJitter",function(){return fe(is,X).call(X,"getJitter","latency")}),ne(this,"getUnloadedLatencyPoints",function(){return fe(is,X).call(X,"getLatencyPoints","latency",[])}),ne(this,"getDownLoadedLatency",function(){return fe(is,X).call(X,"getLoadedLatency","download")}),ne(this,"getDownLoadedJitter",function(){return fe(is,X).call(X,"getLoadedJitter","download")}),ne(this,"getDownLoadedLatencyPoints",function(){return fe(is,X).call(X,"getLoadedLatencyPoints","download",[])}),ne(this,"getUpLoadedLatency",function(){return fe(is,X).call(X,"getLoadedLatency","upload")}),ne(this,"getUpLoadedJitter",function(){return fe(is,X).call(X,"getLoadedJitter","upload")}),ne(this,"getUpLoadedLatencyPoints",function(){return fe(is,X).call(X,"getLoadedLatencyPoints","upload",[])}),ne(this,"getDownloadBandwidth",function(){return fe(is,X).call(X,"getBandwidth","download")}),ne(this,"getDownloadBandwidthPoints",function(){return fe(is,X).call(X,"getBandwidthPoints","download",[])}),ne(this,"getUploadBandwidth",function(){return fe(is,X).call(X,"getBandwidth","upload")}),ne(this,"getUploadBandwidthPoints",function(){return fe(is,X).call(X,"getBandwidthPoints","upload",[])}),ne(this,"getPacketLoss",function(){return fe(is,X).call(X,"getPacketLoss","packetLoss")}),ne(this,"getPacketLossDetails",function(){return fe(is,X).call(X,"getPacketLossDetails","packetLoss",void 0,!0)}),ne(this,"getScores",function(){return fe(xc,X).getScores(X.getSummary())}),Bn(this,_c,void 0),Bn(this,bc,void 0),Bn(this,xc,void 0),Bn(this,is,function(de,Ee){var xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,we=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return X.raw.hasOwnProperty(Ee)&&X.raw[Ee].started?we&&X.raw[Ee].error?{error:X.raw[Ee].error}:fe(bc,X)[de](X.raw[Ee].results):xe}),Bn(this,wc,function(){return fe(is,X).call(X,"getReachability","v4Reachability")}),Bn(this,Vc,function(){return fe(is,X).call(X,"getReachabilityDetails","v4Reachability")}),Bn(this,Uu,function(){return fe(is,X).call(X,"getReachability","v6Reachability")}),Bn(this,Fu,function(){return fe(is,X).call(X,"getReachabilityDetails","v6Reachability")}),Vn(_c,this,K),this.clear(),Vn(bc,this,new Ml(fe(_c,this))),Vn(xc,this,new Ss(fe(_c,this)))},[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(G){return G.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(sa(sa(new Set(fe(_c,this).measurements.map(function(G){return G.type}))).map(function(G){return ne({},G,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var G={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:fe(wc,this),v6Reachability:fe(Uu,this)};return Object.assign.apply(Object,sa(Object.entries(G).map(function(K){var X=Gt(K,2),de=X[0],Ee=(0,X[1])();return Ee===void 0?{}:ne({},de,Ee)})))}}])}(),Ll=function(G){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return G&&Math.round(G*Math.pow(10,K))/Math.pow(10,K)},ge=function(G){return G.map(function(K){return Ll(K,2)})},ee=function(G){return G.map(function(K){return{bytes:+K.bytes,bps:Ll(K.bps)}})},re={latencyMs:["getUnloadedLatencyPoints",ge],download:["getDownloadBandwidthPoints",ee],upload:["getUploadBandwidthPoints",ee],downLoadedLatencyMs:["getDownLoadedLatencyPoints",ge],upLoadedLatencyMs:["getUpLoadedLatencyPoints",ge],packetLoss:["getPacketLossDetails",function(G){return G.error?void 0:{numMessages:G.numMessagesSent,lossRatio:Ll(G.packetLoss,4)}}]},ae=["type"],ie=["numPackets"],le=["bytes"],De=["latency","latencyUnderLoad","download","upload"],Le=function(){return"".concat(Math.round(1e16*Math.random()))},Ue=new WeakMap,Et=new WeakMap,Nt=new WeakMap,qt=new WeakMap,bn=new WeakMap,Vt=new WeakMap,hn=new WeakMap,xn=new WeakMap,Pe=new WeakMap,ft=new WeakMap,Ot=new WeakMap,mt=new WeakSet,Mt=function(){return Ma(function G(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ds(this,G),hc(this,mt),ne(this,"onRunningChange",function(){}),ne(this,"onResultsChange",function(){}),Bn(this,Ue,function(){}),Bn(this,Et,function(){}),Bn(this,Nt,void 0),Bn(this,qt,void 0),Bn(this,bn,Le()),Bn(this,Vt,-1),Bn(this,hn,void 0),Bn(this,xn,1e6),Bn(this,Pe,1e6),Bn(this,ft,!1),Bn(this,Ot,!1),Vn(Nt,this,Object.assign({},$i,K,Zi)),Vn(qt,this,new _d(fe(Nt,this))),fe(Nt,this).autoStart&&this.play()},[{key:"results",get:function(){return fe(qt,this)}},{key:"isRunning",get:function(){return fe(ft,this)}},{key:"isFinished",get:function(){return fe(Ot,this)}},{key:"onFinish",set:function(G){Vn(Ue,this,G)}},{key:"onError",set:function(G){Vn(Et,this,G)}},{key:"pause",value:function(){De.includes(lr(mt,this,dn).call(this))&&fe(hn,this).pause(),lr(mt,this,Ke).call(this,!1)}},{key:"play",value:function(){fe(ft,this)||(lr(mt,this,Ke).call(this,!0),lr(mt,this,Cn).call(this))}},{key:"restart",value:function(){lr(mt,this,gn).call(this),this.play()}}])}();function Ke(G){G!==fe(ft,this)&&(Vn(ft,this,G),this.onRunningChange(fe(ft,this)))}function It(G){var K=this;G!==fe(Ot,this)&&(Vn(Ot,this,G),G&&setTimeout(function(){return fe(Ue,K).call(K,K.results)}))}function dn(){return fe(Vt,this)<0||fe(Vt,this)>=fe(Nt,this).measurements.length?null:fe(Nt,this).measurements[fe(Vt,this)].type}function Yt(){return fe(qt,this).raw[lr(mt,this,dn).call(this)]||void 0}function gn(){lr(mt,this,an).call(this),Vn(bn,this,Le()),Vn(Vt,this,-1),Vn(hn,this,void 0),lr(mt,this,Ke).call(this,!1),lr(mt,this,It).call(this,!1),fe(qt,this).clear()}function an(){var G=fe(hn,this);G&&(G.onFinished=G.onConnectionError=G.onFail=G.onMsgReceived=G.onCredentialsFailure=G.onMeasurementResult=function(){},De.includes(lr(mt,this,dn).call(this))&&G.pause())}function Cn(){var G,K=this;if(!(De.includes(lr(mt,this,dn).call(this))&&lr(mt,this,Yt).call(this)&&lr(mt,this,Yt).call(this).started)||lr(mt,this,Yt).call(this).finished||lr(mt,this,Yt).call(this).finishedCurrentRound||lr(mt,this,Yt).call(this).error){if(Vn(Vt,this,(G=fe(Vt,this),++G)),fe(Vt,this)>=fe(Nt,this).measurements.length)return lr(mt,this,Ke).call(this,!1),void lr(mt,this,It).call(this,!0);var X,de=fe(Nt,this).measurements[fe(Vt,this)],Ee=de.type,xe=Lt(de,ae),we=lr(mt,this,Yt).call(this),We=fe(Nt,this),ke=We.downloadApiUrl,Oe=We.uploadApiUrl,Xe=We.estimatedServerTime;switch(Ee){case"v4Reachability":case"v6Reachability":(X=new Io("https://".concat(xe.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(_t){we.finished=!0,we.results=kt({host:xe.host},_t),K.onResultsChange({type:Ee}),lr(mt,K,Cn).call(K)};break;case"rpki":(X=new Io("https://".concat(fe(Nt,this).rpkiInvalidHost),{timeout:5e3})).onFinished=function(_t){(_t.response?_t.response.json():Promise.resolve()).then(function(Pt){we.finished=!0,we.results=kt({host:fe(Nt,K).rpkiInvalidHost,filteringInvalids:!_t.reachable},Pt?{asn:Pt.asn,name:Pt.name}:{}),K.onResultsChange({type:Ee}),lr(mt,K,Cn).call(K)})};break;case"nxdomain":(X=new Io("https://".concat(xe.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(_t){we.finished=!0,we.results={host:xe.nxhost,reachable:_t.reachable},K.onResultsChange({type:Ee}),lr(mt,K,Cn).call(K)};break;case"packetLoss":case"packetLossUnderLoad":we.finished=!1;var $e=xe.numPackets,Ae=Lt(xe,ie),tt=fe(Nt,this),ue=tt.turnServerUri,pe=tt.turnServerCredsApiUrl,Ie=tt.turnServerUser,qe=tt.turnServerPass,nt=tt.includeCredentials;(X=new yc(kt({turnServerUri:ue,turnServerCredsApi:pe,turnServerCredsApiIncludeCredentials:nt,turnServerUser:Ie,turnServerPass:qe,numMsgs:$e,downloadChunkSize:xe.loadDown?fe(xn,this):void 0,uploadChunkSize:xe.loadUp?fe(Pe,this):void 0,downloadApiUrl:ke,uploadApiUrl:Oe},Ae))).onMsgReceived=function(){we.results=Object.assign({},X.results),K.onResultsChange({type:Ee})},X.onFinished=function(){we.finished=!0,K.onResultsChange({type:Ee}),lr(mt,K,Cn).call(K)},X.onConnectionError=function(_t){we.error=_t,K.onResultsChange({type:Ee}),fe(Et,K).call(K,"Connection error while measuring packet loss: ".concat(_t)),lr(mt,K,Cn).call(K)},X.onCredentialsFailure=function(){we.error="unable to get turn server credentials",K.onResultsChange({type:Ee}),fe(Et,K).call(K,"Error while measuring packet loss: unable to get turn server credentials."),lr(mt,K,Cn).call(K)};break;case"latency":case"latencyUnderLoad":we.finished=!1,(X=new i([{dir:"down",bytes:0,count:xe.numPackets,bypassMinDuration:!0}],{downloadApiUrl:ke,uploadApiUrl:Oe,estimatedServerTime:Xe,logApiUrl:fe(Nt,this).logMeasurementApiUrl,measurementId:fe(bn,this),downloadChunkSize:xe.loadDown?fe(xn,this):void 0,uploadChunkSize:xe.loadUp?fe(Pe,this):void 0})).fetchOptions={credentials:fe(Nt,this).includeCredentials?"include":void 0},X.onMeasurementResult=X.onNewMeasurementStarted=function(_t,Pt){we.results=Object.assign({},Pt.down[0]),K.onResultsChange({type:Ee})},X.onFinished=function(){we.finished=!0,K.onResultsChange({type:Ee}),fe(ft,K)&&lr(mt,K,Cn).call(K)},X.onConnectionError=function(_t){we.error=_t,K.onResultsChange({type:Ee}),fe(Et,K).call(K,"Connection error while measuring latency: ".concat(_t)),lr(mt,K,Cn).call(K)},X.play();break;case"download":case"upload":if(we.finished||we.error)lr(mt,this,Cn).call(this);else{delete we.finishedCurrentRound;var tn=fe(Nt,this)["measure".concat(Ee==="download"?"Down":"Up","loadLoadedLatency")];(X=new i([kt({dir:Ee==="download"?"down":"up"},xe)],{downloadApiUrl:ke,uploadApiUrl:Oe,estimatedServerTime:Xe,logApiUrl:fe(Nt,this).logMeasurementApiUrl,measurementId:fe(bn,this),measureParallelLatency:tn,parallelLatencyThrottleMs:fe(Nt,this).loadedLatencyThrottle})).fetchOptions={credentials:fe(Nt,this).includeCredentials?"include":void 0},X.finishRequestDuration=fe(Nt,this).bandwidthFinishRequestDuration,X.onNewMeasurementStarted=function(_t){var Pt=_t.count,Mn=_t.bytes,ct=we.results=Object.assign({},we.results);!ct.hasOwnProperty(Mn)&&(ct[Mn]={timings:[],numMeasurements:0,sideLatency:tn?[]:void 0}),ct[Mn].numMeasurements-ct[Mn].timings.length!==Pt&&(ct[Mn].numMeasurements+=Pt,K.onResultsChange({type:Ee}))},X.onMeasurementResult=function(_t){var Pt=_t.bytes,Mn=Lt(_t,le);we.results[Pt].timings.push(Mn),we.results=Object.assign({},we.results),K.onResultsChange({type:Ee})},X.onParallelLatencyResult=function(_t){we.results[xe.bytes].sideLatency.push(_t),we.results=Object.assign({},we.results),K.onResultsChange({type:Ee})},X.onFinished=function(_t){var Pt=!fe(Nt,K).measurements.slice(fe(Vt,K)+1).map(function(Fe){return Fe.type}).includes(Ee),Mn=Math.min.apply(Math,sa(Object.values(Ee==="download"?_t.down:_t.up).slice(-1)[0].timings.map(function(Fe){return Fe.duration})));if(Pt||!xe.bypassMinDuration&&Mn>fe(Nt,K).bandwidthFinishRequestDuration){we.finished=!0,K.onResultsChange({type:Ee});var ct=.5*Object.keys(we.results).map(function(Fe){return+Fe}).sort(function(Fe,bt){return bt-Fe})[0];Ee==="download"&&Vn(xn,K,ct),Ee==="upload"&&Vn(Pe,K,ct)}else we.finishedCurrentRound=!0;fe(ft,K)&&lr(mt,K,Cn).call(K)},X.onConnectionError=function(_t){we.error=_t,K.onResultsChange({type:Ee}),fe(Et,K).call(K,"Connection error while measuring ".concat(Ee,": ").concat(_t)),lr(mt,K,Cn).call(K)},X.play()}}Vn(hn,this,X),we.started=!0,this.onResultsChange({type:Ee})}else fe(hn,this).play()}var mn=new WeakMap,Jt=new WeakMap,yr=function(G){function K(X){var de;Ds(this,K);for(var Ee=arguments.length,xe=new Array(Ee>1?Ee-1:0),we=1;we<Ee;we++)xe[we-1]=arguments[we];return Bn(de=Ic(this,K,[X].concat(xe)),mn,void 0),Bn(de,Jt,function(We){fe(mn,de)&&function(ke,Oe){var Xe=Oe.apiUrl,$e={};Object.entries(re).forEach(function(tt){var ue=Gt(tt,2),pe=ue[0],Ie=Gt(ue[1],2),qe=Ie[0],nt=Ie[1],tn=nt===void 0?function(Pt){return Pt}:nt,_t=ke[qe]();_t&&($e[pe]=tn(_t))});var Ae=ke.getScores();Ae&&($e.scores=Object.assign.apply(Object,[{}].concat(sa(Object.entries(Ae).map(function(tt){var ue,pe=Gt(tt,2);return ne({},pe[0],{points:(ue=pe[1]).points,classification:ue.classificationName})}))))),fetch(Xe,{method:"POST",body:JSON.stringify($e)})}(We,{apiUrl:fe(mn,de)})}),kn(K,"onFinish",fe(Jt,de),de,1),Vn(mn,de,Object.assign({},$i,X,Zi).logAimApiUrl),de}return ce(K,G),Ma(K,[{key:"onFinish",set:function(X){var de=this;kn(K,"onFinish",function(Ee){X(Ee),fe(Jt,de).call(de,Ee)},this,1)}}])}(Mt),ur=d(9633);function Dt(G,K){var X=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!X){if(Array.isArray(G)||(X=function(ke,Oe){if(ke){if(typeof ke=="string")return An(ke,Oe);var Xe={}.toString.call(ke).slice(8,-1);return Xe==="Object"&&ke.constructor&&(Xe=ke.constructor.name),Xe==="Map"||Xe==="Set"?Array.from(ke):Xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xe)?An(ke,Oe):void 0}}(G))||K){X&&(G=X);var de=0,Ee=function(){};return{s:Ee,n:function(){return de>=G.length?{done:!0}:{done:!1,value:G[de++]}},e:function(ke){throw ke},f:Ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe,we=!0,We=!1;return{s:function(){X=X.call(G)},n:function(){var ke=X.next();return we=ke.done,ke},e:function(ke){We=!0,xe=ke},f:function(){try{we||X.return==null||X.return()}finally{if(We)throw xe}}}}function An(G,K){(K==null||K>G.length)&&(K=G.length);for(var X=0,de=Array(K);X<K;X++)de[X]=G[X];return de}var Tr=[O],ta=!1,oa=function(){return(0,x.A)(function $e(){(0,u.A)(this,$e),(0,f.A)(this,"keyProvider",null)},null,[{key:"setKeyProvider",value:function($e){this.keyProvider=$e}},{key:"getKeyProvider",value:function(){return this.keyProvider}},{key:"config",value:function($e){if(!$e)throw new Error("'token' is empty, please provide it in config");this.apiKey=$e;var Ae=N(Ze,void 0,S.apply(void 0,Tr));window.STORE=Ae,Ft.default.init({store:Ae})}},{key:"getCameras",value:(Xe=(0,b.A)(E().mark(function $e(){var Ae,tt,ue,pe,Ie;return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(qe.prev=0,Ae=navigator.userAgent.includes("Firefox"),tt=[],!Ae){qe.next=2;break}return qe.next=1,new Promise(function(nt,tn){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(){var _t=(0,b.A)(E().mark(function Pt(Mn){var ct;return E().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Fe.sent,tt=ct.filter(function(bt){return bt.kind==="videoinput"}).map(function(bt){return new sl(bt.deviceId,bt.groupId,bt.kind,bt.label)}),nt(tt),Mn.getTracks().forEach(function(bt){return bt.stop()});case 2:case"end":return Fe.stop()}},Pt)}));return function(Pt){return _t.apply(this,arguments)}}()).catch(function(_t){console.error("Error in getCameras()",_t),tn(_t)})});case 1:qe.next=4;break;case 2:return qe.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=qe.sent,tt=ue.filter(function(nt){return nt.kind==="videoinput"}).map(function(nt){return new sl(nt.deviceId,nt.groupId,nt.kind,nt.label)});case 4:return qe.abrupt("return",tt);case 5:qe.prev=5,Ie=qe.catch(0),pe=Ie.message,Ie instanceof TypeError&&Ie.name==="TypeError"&&(pe=Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(pe));case 6:case"end":return qe.stop()}},$e,null,[[0,5]])})),function(){return Xe.apply(this,arguments)})},{key:"getMicrophones",value:(Oe=(0,b.A)(E().mark(function $e(){var Ae,tt,ue,pe,Ie;return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(qe.prev=0,Ae=navigator.userAgent.includes("Firefox"),tt=[],!Ae){qe.next=2;break}return qe.next=1,new Promise(function(nt,tn){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var _t=(0,b.A)(E().mark(function Pt(Mn){var ct;return E().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Fe.sent,tt=ct.filter(function(bt){return bt.kind==="audioinput"}).map(function(bt){return new Pl(bt.deviceId,bt.groupId,bt.kind,bt.label)}),nt(tt),Mn.getTracks().forEach(function(bt){return bt.stop()});case 2:case"end":return Fe.stop()}},Pt)}));return function(Pt){return _t.apply(this,arguments)}}()).catch(function(_t){console.error("Error in getMicrophones()",_t),tn(_t)})});case 1:qe.next=4;break;case 2:return qe.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=qe.sent,tt=ue.filter(function(nt){return nt.kind==="audioinput"}).map(function(nt){return new Pl(nt.deviceId,nt.groupId,nt.kind,nt.label)});case 4:return qe.abrupt("return",tt);case 5:qe.prev=5,Ie=qe.catch(0),pe=Ie.message,Ie instanceof TypeError&&Ie.name==="TypeError"&&(pe=Ir.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(pe));case 6:case"end":return qe.stop()}},$e,null,[[0,5]])})),function(){return Oe.apply(this,arguments)})},{key:"getPlaybackDevices",value:(ke=(0,b.A)(E().mark(function $e(){var Ae,tt,ue,pe,Ie;return E().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(qe.prev=0,Ae=navigator.userAgent.includes("Firefox"),tt=[],!Ae){qe.next=2;break}return qe.next=1,new Promise(function(nt,tn){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var _t=(0,b.A)(E().mark(function Pt(Mn){var ct;return E().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Fe.sent,tt=ct.filter(function(bt){return bt.kind==="audiooutput"}).map(function(bt){return new Mc(bt.deviceId,bt.groupId,bt.kind,bt.label)}),nt(tt),Mn.getTracks().forEach(function(bt){return bt.stop()});case 2:case"end":return Fe.stop()}},Pt)}));return function(Pt){return _t.apply(this,arguments)}}()).catch(function(_t){console.error("Error in getPlaybackDevices()",_t),tn(_t)})});case 1:qe.next=4;break;case 2:return qe.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=qe.sent,tt=ue.filter(function(nt){return nt.kind==="audiooutput"}).map(function(nt){return new Mc(nt.deviceId,nt.groupId,nt.kind,nt.label)});case 4:return qe.abrupt("return",tt);case 5:qe.prev=5,Ie=qe.catch(0),pe=Ie.message,Ie instanceof TypeError&&Ie.name==="TypeError"&&(pe="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(pe));case 6:case"end":return qe.stop()}},$e,null,[[0,5]])})),function(){return ke.apply(this,arguments)})},{key:"getDevices",value:(We=(0,b.A)(E().mark(function $e(){var Ae,tt,ue,pe,Ie,qe,nt;return E().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tn.prev=0,tn.next=1,navigator.mediaDevices.enumerateDevices();case 1:Ae=tn.sent,tt=[],ue=Dt(Ae);try{for(ue.s();!(pe=ue.n()).done;)Ie=pe.value,tt.push(new yo(Ie.deviceId,Ie.groupId,Ie.kind,Ie.label))}catch(_t){ue.e(_t)}finally{ue.f()}return tn.abrupt("return",tt);case 2:tn.prev=2,nt=tn.catch(0),qe=nt.message,nt instanceof TypeError&&(qe=nt.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":nt.message),console.error("An error occurred in getDevices(), ".concat(qe));case 3:case"end":return tn.stop()}},$e,null,[[0,2]])})),function(){return We.apply(this,arguments)})},{key:"on",value:function($e,Ae){if($e!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on($e,Ae)}},{key:"addDeviceChangeEvent",value:function(){var $e=this;if(!ta){this.getDevices().then(function(tt){$e.devices=tt});try{navigator.mediaDevices.addEventListener("devicechange",function(){var tt=(0,b.A)(E().mark(function ue(pe){var Ie,qe,nt,tn,_t,Pt;return E().wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:return Ie=$e.devices,Mn.next=1,$e.getDevices();case 1:$e.devices=Mn.sent,qe=new Array,nt=Dt($e.devices),Mn.prev=2,_t=E().mark(function ct(){var Fe;return E().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:Fe=tn.value,Ie.filter(function(wn){return wn.deviceId==Fe.deviceId&&wn.kind==Fe.kind}).length==0?qe.push(Fe):Ie=Ie.filter(function(wn){return!(wn.deviceId==Fe.deviceId&&wn.kind==Fe.kind)});case 1:case"end":return bt.stop()}},ct)}),nt.s();case 3:if((tn=nt.n()).done){Mn.next=5;break}return Mn.delegateYield(_t(),"t0",4);case 4:Mn.next=3;break;case 5:Mn.next=7;break;case 6:Mn.prev=6,Pt=Mn.catch(2),nt.e(Pt);case 7:return Mn.prev=7,nt.f(),Mn.finish(7);case 8:qe.length!=0&&$e.eventEmitter.emit("device-changed",{devices:$e.devices}),Ie.length!=0&&$e.eventEmitter.emit("device-changed",{devices:$e.devices});case 9:case"end":return Mn.stop()}},ue,null,[[2,6,7,8]])}));return function(ue){return tt.apply(this,arguments)}}()),ta=!0}catch(tt){var Ae=tt.message;tt instanceof TypeError&&(Ae=tt.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":tt.message),console.error("An error occurred in device-change event, ".concat(Ae))}}}},{key:"off",value:function($e,Ae){if($e!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off($e,Ae)}},{key:"checkPermissions",value:(we=(0,b.A)(E().mark(function $e(Ae){var tt,ue,pe,Ie,qe;return E().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(Ae||(Ae=Vs.AUDIO_AND_VIDEO),tt=new Map,!Ae.includes(Vs.AUDIO)&&!Ae.includes(Vs.AUDIO_AND_VIDEO)){nt.next=5;break}return ue=!0,nt.prev=1,nt.next=2,navigator.permissions.query({name:"microphone"});case 2:(pe=nt.sent).state!="prompt"&&pe.state!="denied"||(ue=!1),nt.next=4;break;case 3:throw nt.prev=3,nt.catch(1),Error("Browser does not support microphone permission check");case 4:tt.set(Vs.AUDIO,ue);case 5:if(!Ae.includes(Vs.VIDEO)&&!Ae.includes(Vs.AUDIO_AND_VIDEO)){nt.next=10;break}return Ie=!0,nt.prev=6,nt.next=7,navigator.permissions.query({name:"camera"});case 7:(qe=nt.sent).state!="prompt"&&qe.state!="denied"||(Ie=!1),nt.next=9;break;case 8:throw nt.prev=8,nt.catch(6),Error("Browser does not support camera permission check");case 9:tt.set(Vs.VIDEO,Ie);case 10:return nt.abrupt("return",tt);case 11:case"end":return nt.stop()}},$e,null,[[1,3],[6,8]])})),function($e){return we.apply(this,arguments)})},{key:"requestPermission",value:(xe=(0,b.A)(E().mark(function $e(Ae){var tt,ue,pe,Ie,qe,nt,tn,_t,Pt,Mn,ct,Fe,bt,wn,cn,vn,or,Lr,Tn;return E().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:if(Ae||(Ae=Vs.AUDIO_AND_VIDEO),tt=new Map,!Ae.includes(Vs.AUDIO_AND_VIDEO)){yn.next=12;break}return pe={audio:!0,video:!0},Ie=!0,yn.prev=1,yn.next=2,navigator.mediaDevices.getUserMedia(pe);case 2:ue=yn.sent,yn.next=11;break;case 3:if(yn.prev=3,!((wn=yn.catch(1))instanceof DOMException)){yn.next=9;break}cn=wn.name,yn.next=cn==="NotAllowedError"?4:cn==="NotReadableError"?5:cn==="NotFoundError"?6:7;break;case 4:return wn.message==="Permission denied by system"&&(qe=Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",8);case 5:return qe=Fa(wn,"video"),yn.abrupt("continue",8);case 6:return qe=Ir.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(qe=Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",8);case 7:qe=wn.message;case 8:yn.next=10;break;case 9:qe=wn instanceof TypeError&&wn.name==="TypeError"?Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:wn.message;case 10:Ie=!1,qe&&console.error("An error occurred in request permission, ".concat(qe));case 11:ue&&setTimeout(function(){ue.getTracks().forEach(function(Pr){Pr.stop()})},100),tt.set(Vs.AUDIO_AND_VIDEO,Ie);case 12:if(!Ae.includes(Vs.VIDEO)){yn.next=24;break}return tn={audio:!1,video:!0},_t=!0,yn.prev=13,yn.next=14,navigator.mediaDevices.getUserMedia(tn);case 14:nt=yn.sent,yn.next=23;break;case 15:if(yn.prev=15,!((vn=yn.catch(13))instanceof DOMException)){yn.next=21;break}or=vn.name,yn.next=or==="NotAllowedError"?16:or==="NotReadableError"?17:or==="NotFoundError"?18:19;break;case 16:return vn.message==="Permission denied by system"&&(Pt=Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",20);case 17:return Pt=Fa(vn,"video"),yn.abrupt("continue",20);case 18:return Pt=Ir.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Pt=Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",20);case 19:Pt=vn.message;case 20:yn.next=22;break;case 21:Pt=vn instanceof TypeError&&vn.name==="TypeError"?Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:vn.message;case 22:_t=!1,Pt&&console.error("An error occurred in request permission, ".concat(Pt));case 23:nt&&nt.getTracks().forEach(function(Pr){Pr.stop()}),tt.set(Vs.VIDEO,_t);case 24:if(!Ae.includes(Vs.AUDIO)){yn.next=36;break}return ct={audio:!0,video:!1},Fe=!0,yn.prev=25,yn.next=26,navigator.mediaDevices.getUserMedia(ct);case 26:Mn=yn.sent,yn.next=35;break;case 27:if(yn.prev=27,!((Lr=yn.catch(25))instanceof DOMException)){yn.next=33;break}Tn=Lr.name,yn.next=Tn==="NotAllowedError"?28:Tn==="NotReadableError"?29:Tn==="NotFoundError"?30:31;break;case 28:return Lr.message==="Permission denied by system"&&(bt=Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",32);case 29:return bt=Fa(Lr,"audio"),yn.abrupt("continue",32);case 30:return bt=Ir.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(bt=Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),yn.abrupt("continue",32);case 31:bt=Lr.message;case 32:yn.next=34;break;case 33:bt=Lr instanceof TypeError&&Lr.name==="TypeError"?Ir.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:Lr.message;case 34:Fe=!1,bt&&console.error("An error occurred in request permission, ".concat(bt));case 35:Mn&&Mn.getTracks().forEach(function(Pr){Pr.stop()}),tt.set(Vs.AUDIO,Fe);case 36:return yn.abrupt("return",tt);case 37:case"end":return yn.stop()}},$e,null,[[1,3],[13,15],[25,27]])})),function($e){return xe.apply(this,arguments)})},{key:"isInt",value:function($e){return typeof $e=="number"&&$e%1==0}},{key:"getNetworkStats",value:(Ee=(0,b.A)(E().mark(function $e(){var Ae,tt,ue,pe,Ie,qe,nt=arguments;return E().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tt=(Ae=nt.length>0&&nt[0]!==void 0?nt[0]:{}).timeoutDuration,ue=Ae.baseUrl,pe=ue===void 0?"api.videosdk.live":ue,tt&&this.isInt(tt)||(tt=6e4),Ie=new Promise(function(_t,Pt){setTimeout(function(){Pt("Not able to get NetworkStats due to timeout")},tt)}),qe=new Promise(function(_t,Pt){if(navigator.onLine){var Mn=new yr({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}],uploadApiUrl:"https://".concat(pe,"/test-upload-speed"),downloadApiUrl:"https://".concat(pe,"/test-download-speed")});Mn.isRunning?(Mn.onFinish=function(ct){_t({downloadSpeed:parseFloat(Number(ct.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(ct.getUploadBandwidth()/1048576).toFixed(2))})},Mn.onError=function(ct){Pt("Not able to get NetworkStats")}):Pt("Not able to get NetworkStats")}else Pt("Not able to get NetworkStats due to no Network")}),tn.abrupt("return",Promise.race([qe,Ie]));case 1:case"end":return tn.stop()}},$e,this)})),function(){return Ee.apply(this,arguments)})},{key:"checkConnection",value:(de=(0,b.A)(E().mark(function $e(){var Ae,tt,ue,pe,Ie,qe,nt=arguments;return E().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tt=(Ae=nt.length>0&&nt[0]!==void 0?nt[0]:{}).timeoutDuration,ue=Ae.baseUrl,pe=ue===void 0?"api.videosdk.live":ue,tt&&this.isInt(tt)||(tt=6e4),Ie=new Promise(function(_t,Pt){setTimeout(function(){Pt("TimeoutError: NetworkStats timeout")},tt)}),qe=new Promise(function(_t,Pt){navigator.onLine?fetch("https://".concat(pe,"/ping")).then(function(Mn){Mn.text().then(function(ct){ct=="pong"?_t("Connection established"):Pt("ConnectionError: Server unreachable")})}).catch(function(Mn){Pt("ConnectionError: Server unreachable")}):Pt("NetworkError: Offline")}),tn.abrupt("return",Promise.race([qe,Ie]));case 1:case"end":return tn.stop()}},$e,this)})),function(){return de.apply(this,arguments)})},{key:"analytics",value:function($e){var Ae,tt,ue;!$e&&navigator&&navigator.userAgent&&(tt=navigator.userAgent,delete(ue=m().parse(tt)).engine);try{var pe;(pe=$e)!==null&&pe!==void 0&&pe.browserUserAgent||(tt=navigator.userAgent,delete(ue=m().parse(tt)).engine)}catch{}$e&&$e.rawUserAgent&&(tt=$e.rawUserAgent,delete(ue=m().parse(tt)).engine),$e||($e={});var Ie={};Ie.sdkType=$e.sdkType||"javascript",Ie.sdkVersion=$e.sdkVersion||"0.2.14",Ie.platform=$e.platform||((Ae=ue)===null||Ae===void 0||(Ae=Ae.platform)===null||Ae===void 0?void 0:Ae.type)||"",$e.browserUserAgent=="null"?Ie.browserUserAgent=void 0:Ie.browserUserAgent=ue,$e.deviceUserAgent&&(Ie.deviceUserAgent=$e.deviceUserAgent),this._deviceInfo=Ie}},{key:"initMeeting",value:function($e){var Ae,tt=$e.meetingId,ue=$e.customCameraVideoTrack,pe=ue===void 0?void 0:ue,Ie=$e.customMicrophoneAudioTrack,qe=Ie===void 0?void 0:Ie,nt=$e.autoConsume,tn=nt===void 0||nt,_t=$e.preferredProtocol,Pt=$e.mode,Mn=$e.multiStream,ct=Mn===void 0||Mn,Fe=$e.participantId,bt=$e.name,wn=$e.micEnabled,cn=$e.webcamEnabled,vn=$e.maxResolution,or=$e.metaData,Lr=$e.chatEnabled,Tn=$e.useSpartialLayerAnalytics,yn=$e.signalingBaseUrl,Pr=$e.defaultCamera,br=$e.debugMode,ar=br===void 0||br;if(!tt)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var Wn=Fe?Fe.toString():I()({length:8}).toLowerCase(),Rn=bt||I()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof _t!="string"&&(_t="UDP_OVER_TCP"),(Ae=_t)===null||Ae===void 0?void 0:Ae.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":_t=_t.toUpperCase();break;default:_t="UDP_OVER_TCP"}if(Pt||(Pt=On.nI.SEND_AND_RECV),Pt!==On.nI.SEND_AND_RECV&&Pt!==On.nI.SIGNALLING_ONLY&&Pt!==On.nI.RECV_ONLY&&Pt!==On.nI.VIEWER&&Pt!==On.nI.CONFERENCE)throw new Error('"mode" can only be either '.concat(On.nI.SEND_AND_RECV," or ").concat(On.nI.SIGNALLING_ONLY," or ").concat(On.nI.RECV_ONLY," "));if(or!=null&&(0,T.A)(or)!="object")throw new Error('"metaData" can only be object.');var qr=this._deviceInfo.sdkType==="react-native",wa=qr?Pr?Pr==="front"?1:0:pe?pe.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:qr?1:0:0,Ws=new Ft.default({roomId:tt,peerId:Wn,secret:this.apiKey,device:"unknown",displayName:Rn,mode:Pt,useSimulcast:ct,produce:!0,consume:!0,datachannel:Lr!==!1,micEnabled:wn!==!1,webcamEnabled:cn!==!1,maxResolution:vn||"hd",useSpartialLayerAnalytics:Tn,_deviceInfo:this._deviceInfo,customCameraVideoTrack:pe,customMicrophoneAudioTrack:qe,autoConsume:tn,preferredProtocol:_t,signalingBaseUrl:yn,metaData:or,defaultCameraIndex:wa,debugMode:ar,keyProvider:this.keyProvider});Ut.roomClient=Ws;var Li=new $t({id:Wn,displayName:Rn,local:!0,mode:Pt,metaData:or});return new xs(tt,Li,Ws)}},{key:"createCameraVideoTrack",value:(X=(0,b.A)(E().mark(function $e(Ae){var tt,ue,pe,Ie,qe,nt,tn,_t,Pt,Mn,ct,Fe,bt,wn,cn,vn,or,Lr;return E().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:if(tt=Ae.cameraId,ue=tt===void 0?void 0:tt,pe=Ae.encoderConfig,Ie=pe===void 0?void 0:pe,qe=Ae.facingMode,nt=qe===void 0?void 0:qe,tn=Ae.optimizationMode,_t=tn===void 0?void 0:tn,Pt=Ae.multiStream,Mn=Pt===void 0||Pt,!ue){Tn.next=2;break}return Tn.next=1,this.getCameras();case 1:(ct=Tn.sent)&&ct.some(function(yn){return yn.deviceId})&&(ct.some(function(yn){return yn.deviceId===ue})||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."));case 2:return Tn.prev=2,Fe=Ie?ko.$.videoProfiles[Ie]:ko.$.videoProfiles.h360p_w640p,console.log("VIDEO PROFILE",{videoProfile:Fe,encoderConfig:Ie}),bt={video:{deviceId:ue||void 0,facingMode:nt||void 0,width:Fe.width,height:Fe.height,frameRate:Fe.frameRate}},Tn.next=3,(0,dc.lp)(bt);case 3:return wn=Tn.sent,_t&&(wn.contentHint=_t),wn.encoderConfig=Ie||"h360p_w640p",wn.contentHint=_t||"",wn.multiStream=Mn,wn.cameraId=ue,Tn.abrupt("return",wn);case 4:if(Tn.prev=4,(or=Tn.catch(2)).name!=="SecurityError"){Tn.next=5;break}cn=Ir.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,Tn.next=13;break;case 5:if(or.name!=="DOMException"){Tn.next=6;break}cn=Ir.q.ERROR_RN_CAMERA_NOT_FOUND.message,Tn.next=13;break;case 6:if(!(or instanceof DOMException)){Tn.next=12;break}Lr=or.name,Tn.next=Lr==="NotAllowedError"?7:Lr==="NotReadableError"?8:Lr==="NotFoundError"?9:10;break;case 7:return cn=ja(or,"video"),Tn.abrupt("continue",11);case 8:return cn=Fa(or,"video"),Tn.abrupt("continue",11);case 9:return cn=Ir.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(cn=Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Tn.abrupt("continue",11);case 10:return cn=or.message,Tn.abrupt("continue",11);case 11:Tn.next=13;break;case 12:or.message=="getUserMedia is not implemented in this browser"?(vn=Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,cn=vn.message):cn=or.message;case 13:console.error("An error occurred in creating video track, ".concat(cn));case 14:case"end":return Tn.stop()}},$e,this,[[2,4]])})),function($e){return X.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(K=(0,b.A)(E().mark(function $e(Ae){var tt,ue,pe,Ie,qe,nt,tn,_t,Pt,Mn,ct;return E().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return tt=Ae.encoderConfig,ue=tt===void 0?void 0:tt,pe=Ae.optimizationMode,Ie=pe===void 0?void 0:pe,qe=Ae.withAudio,nt=qe===void 0?"enable":qe,tn=Ae.multiStream,_t=tn!==void 0&&tn,Pt=ue?ko.$.screenShareProfiles[ue]:ko.$.screenShareProfiles.h720p_15fps,Mn={audio:nt==="enable",video:{width:Pt.resolution.width,height:Pt.resolution.height,frameRate:Pt.frameRate}},Fe.next=1,(0,dc.Zu)(Mn);case 1:return ct=Fe.sent,Ie&&(ct.contentHint=Ie),ct.multiStream=_t,Fe.abrupt("return",ct);case 2:case"end":return Fe.stop()}},$e)})),function($e){return K.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(G=(0,b.A)(E().mark(function $e(Ae){var tt,ue,pe,Ie,qe,nt,tn,_t,Pt,Mn,ct,Fe,bt,wn;return E().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:if(tt=Ae.noiseConfig,ue=tt===void 0?void 0:tt,pe=Ae.encoderConfig,Ie=pe===void 0?void 0:pe,qe=Ae.microphoneId,!(nt=qe===void 0?void 0:qe)){cn.next=2;break}return cn.next=1,this.getMicrophones();case 1:(tn=cn.sent)&&tn.some(function(vn){return vn.deviceId})&&(tn.some(function(vn){return vn.deviceId===nt})||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 2:return cn.prev=2,_t=Ie?ko.$.audioProfiles[Ie]:ko.$.audioProfiles.speech_standard,Pt={audio:{deviceId:nt,sampleRate:_t.sampleRate,echoCancellation:ue?ue&&ue.acousticEchoCancellation:_t.echoCancellation,autoGainControl:ue?ue&&ue.autoGainControl:_t.autoGainControl,noiseSuppression:ue?ue&&ue.noiseSuppression:_t.noiseSuppression,channelCount:_t.channelCount}},cn.next=3,(0,dc.lp)(Pt);case 3:return(Mn=cn.sent).encoderConfig=Ie||"speech_standard",Mn.microphoneId=nt,cn.abrupt("return",Mn);case 4:if(cn.prev=4,(bt=cn.catch(2)).name!=="SecurityError"){cn.next=5;break}ct=Ir.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,cn.next=13;break;case 5:if(bt.name!=="DOMException"){cn.next=6;break}ct=Ir.q.ERROR_RN_MIC_NOT_FOUND.message,cn.next=13;break;case 6:if(!(bt instanceof DOMException)){cn.next=12;break}wn=bt.name,cn.next=wn==="NotAllowedError"?7:wn==="NotReadableError"?8:wn==="NotFoundError"?9:10;break;case 7:return ct=ja(bt,"audio"),cn.abrupt("continue",11);case 8:return ct=Fa(bt,"audio"),cn.abrupt("continue",11);case 9:return ct=Ir.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(ct=Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),cn.abrupt("continue",11);case 10:return ct=bt.message,cn.abrupt("continue",11);case 11:cn.next=13;break;case 12:bt.message=="getUserMedia is not implemented in this browser"?(Fe=Ir.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,ct=Fe.message):ct=bt.message;case 13:console.error("An error occurred in creating audio track, ".concat(ct));case 14:case"end":return cn.stop()}},$e,this,[[2,4]])})),function($e){return G.apply(this,arguments)})}]);var G,K,X,de,Ee,xe,we,We,ke,Oe,Xe}();function ja(G,K){return(G.message==="Permission denied"||G.message==="Permission dismissed"?K==="video"?Ir.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:Ir.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:G.message.includes("The request is not allowed by the user agent")?K==="video"?Ir.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:Ir.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:G.message==="Permission denied by system"?K==="video"?Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:K==="video"?Ir.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:Ir.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED).message}function Fa(G,K){return(G.message==="Device in use"?K==="video"?Ir.q.ERROR_CAMERA_IN_USE:Ir.q.ERROR_MICROPHONE_IN_USE:K==="video"?Ir.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:Ir.q.ERROR_MICROPHONE_IN_USE).message}(0,f.A)(oa,"devices",[]),(0,f.A)(oa,"eventEmitter",new Ct),(0,f.A)(oa,"Constants",{errors:Ir.s,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},characterState:et,characterMode:{TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},hlsEvents:Tl.V,transcriptionEvents:{TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},modes:On.nI,permission:Vs});var Gr=oa})(),C})())}(Hv)),Hv.exports}var Du=PB();function Tm(){return Tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Tm.apply(null,arguments)}var na="videosdk-live-react-sdk",Bt={"participant-joined":na+"-participant-joined","participant-left":na+"-participant-left","speaker-changed":na+"-speaker-changed","presenter-changed":na+"-presenter-changed","main-participant-changed":na+"-main-participant-changed","entry-requested":na+"-entry-requested","entry-responded":na+"-entry-responded","recording-started":na+"-recording-started","recording-stopped":na+"-recording-stopped","chat-message":na+"-chat-message","meeting-joined":na+"-meeting-joined","meeting-left":na+"-meeting-left","live-stream-started":na+"-live-stream-started","live-stream-stopped":na+"-live-stream-stopped","video-state-changed":na+"-video-state-changed","video-seeked":na+"-video-seeked","webcam-requested":na+"-webcam-requested","mic-requested":na+"-mic-requested","pin-state-changed":na+"-pin-state-changed","connection-open":na+"-connection-open","connection-close":na+"-connection-close","switch-meeting":na+"-switch-meeting",error:na+"-error","hls-started":na+"-hls-started","hls-stopped":na+"-hls-stopped","hls-state-changed":na+"-hls-state-changed","recording-state-changed":na+"-recording-state-changed","livestream-state-changed":na+"-livestream-state-changed","meeting-state-changed":na+"-meeting-state-changed","participant-mode-changed":na+"-participant-mode-changed","transcription-state-changed":na+"-transcription-state-changed","transcription-text":na+"-transcription-text","character-joined":na+"-character-joined","character-left":na+"-character-left","whiteboard-started":na+"-whiteboard-started","whiteboard-stopped":na+"-whiteboard-stopped","paused-all-streams":na+"-paused-all-streams","resumed-all-streams":na+"-resumed-all-streams","media-relay-started":na+"-media-relay-started","media-relay-stopped":na+"-media-relay-stopped","media-relay-error":na+"-media-relay-error","media-relay-request-response":na+"-media-relay-request-response","media-relay-request-received":na+"-media-relay-request-received"},jt=new TB;jt.setMaxListeners(9999);var dE=Z.createContext(),cg=function(t){var r=t===void 0?{}:t,s=r.onParticipantJoined,l=s===void 0?function(){}:s,d=r.onParticipantLeft,C=d===void 0?function(){}:d,T=r.onSpeakerChanged,b=T===void 0?function(){}:T,u=r.onPresenterChanged,x=u===void 0?function(){}:u,f=r.onMainParticipantChanged,y=f===void 0?function(){}:f,E=r.onEntryRequested,_=E===void 0?function(){}:E,m=r.onEntryResponded,k=m===void 0?function(){}:m,w=r.onPausedAllStreams,U=w===void 0?function(){}:w,g=r.onResumedAllStreams,A=g===void 0?function(){}:g,P=r.onRecordingStarted,z=P===void 0?function(){}:P,N=r.onRecordingStopped,R=N===void 0?function(){}:N,S=r.onChatMessage,p=S===void 0?function(){}:S,D=r.onMeetingJoined,O=D===void 0?function(){}:D,j=r.onMeetingLeft,I=j===void 0?function(){}:j,H=r.onLiveStreamStarted,F=H===void 0?function(){}:H,$=r.onLiveStreamStopped,q=$===void 0?function(){}:$,se=r.onVideoStateChanged,J=se===void 0?function(){}:se,be=r.onVideoSeeked,Re=be===void 0?function(){}:be,Se=r.onWebcamRequested,me=Se===void 0?function(){}:Se,Ce=r.onMicRequested,Be=Ce===void 0?function(){}:Ce,_e=r.onPinStateChanged,Ye=_e===void 0?function(){}:_e,Qe=r.onConnectionOpen,Ge=Qe===void 0?function(){}:Qe,He=r.onConnetionClose,Te=He===void 0?function(){}:He,dt=r.onSwitchMeeting,yt=dt===void 0?function(){}:dt,on=r.onError,ln=on===void 0?function(){}:on,Pn=r.onHlsStarted,En=Pn===void 0?function(){}:Pn,rn=r.onHlsStopped,Ne=rn===void 0?function(){}:rn,Me=r.onHlsStateChanged,Ze=Me===void 0?function(){}:Me,Ft=r.onRecordingStateChanged,Ct=Ft===void 0?function(){}:Ft,wt=r.onLivestreamStateChanged,un=wt===void 0?function(){}:wt,Sn=r.onMeetingStateChanged,Ut=Sn===void 0?function(){}:Sn,nr=r.onParticipantModeChanged,Ar=nr===void 0?function(){}:nr,Sr=r.onCharacterJoined,Ur=Sr===void 0?function(){}:Sr,xr=r.onCharacterLeft,Or=xr===void 0?function(){}:xr,Kr=r.onMediaRelayStarted,va=Kr===void 0?function(){}:Kr,ra=r.onMediaRelayStopped,ua=ra===void 0?function(){}:ra,jn=r.onMediaRelayError,Ha=jn===void 0?function(){}:jn,Ea=r.onMediaRelayRequestResponse,Qr=Ea===void 0?function(){}:Ea,gr=r.onMediaRelayRequestReceived,rt=gr===void 0?function(){}:gr;return Z.useEffect(function(){return jt.on(Bt["participant-joined"],l),jt.on(Bt["participant-left"],C),jt.on(Bt["speaker-changed"],b),jt.on(Bt["presenter-changed"],x),jt.on(Bt["main-participant-changed"],y),jt.on(Bt["entry-requested"],_),jt.on(Bt["entry-responded"],k),jt.on(Bt["paused-all-streams"],U),jt.on(Bt["resumed-all-streams"],A),jt.on(Bt["recording-started"],z),jt.on(Bt["recording-stopped"],R),jt.on(Bt["chat-message"],p),jt.on(Bt["meeting-joined"],O),jt.on(Bt["meeting-left"],I),jt.on(Bt["live-stream-started"],F),jt.on(Bt["live-stream-stopped"],q),jt.on(Bt["video-state-changed"],J),jt.on(Bt["video-seeked"],Re),jt.on(Bt["webcam-requested"],me),jt.on(Bt["mic-requested"],Be),jt.on(Bt["pin-state-changed"],Ye),jt.on(Bt["connection-open"],Ge),jt.on(Bt["connection-close"],Te),jt.on(Bt["switch-meeting"],yt),jt.on(Bt.error,ln),jt.on(Bt["hls-started"],En),jt.on(Bt["hls-stopped"],Ne),jt.on(Bt["hls-state-changed"],Ze),jt.on(Bt["recording-state-changed"],Ct),jt.on(Bt["livestream-state-changed"],un),jt.on(Bt["meeting-state-changed"],Ut),jt.on(Bt["participant-mode-changed"],Ar),jt.on(Bt["character-joined"],Ur),jt.on(Bt["character-left"],Or),jt.on(Bt["media-relay-started"],va),jt.on(Bt["media-relay-stopped"],ua),jt.on(Bt["media-relay-error"],Ha),jt.on(Bt["media-relay-request-response"],Qr),jt.on(Bt["media-relay-request-received"],rt),function(){jt.off(Bt["meeting-state-changed"],Ut),jt.off(Bt["participant-joined"],l),jt.off(Bt["participant-left"],C),jt.off(Bt["speaker-changed"],b),jt.off(Bt["presenter-changed"],x),jt.off(Bt["main-participant-changed"],y),jt.off(Bt["entry-requested"],_),jt.off(Bt["entry-responded"],k),jt.off(Bt["paused-all-streams"],U),jt.off(Bt["resumed-all-streams"],A),jt.off(Bt["recording-started"],z),jt.off(Bt["recording-stopped"],R),jt.off(Bt["chat-message"],p),jt.off(Bt["meeting-joined"],O),jt.off(Bt["meeting-left"],I),jt.off(Bt["live-stream-started"],F),jt.off(Bt["live-stream-stopped"],q),jt.off(Bt["video-state-changed"],J),jt.off(Bt["video-seeked"],Re),jt.off(Bt["webcam-requested"],me),jt.off(Bt["mic-requested"],Be),jt.off(Bt["pin-state-changed"],Ye),jt.off(Bt["connection-open"],Ge),jt.off(Bt["connection-close"],Te),jt.off(Bt["switch-meeting"],yt),jt.off(Bt.error,ln),jt.off(Bt["hls-started"],En),jt.off(Bt["hls-stopped"],Ne),jt.off(Bt["hls-state-changed"],Ze),jt.off(Bt["recording-state-changed"],Ct),jt.off(Bt["livestream-state-changed"],un),jt.off(Bt["participant-mode-changed"],Ar),jt.off(Bt["character-joined"],Ur),jt.off(Bt["character-left"],Or),jt.off(Bt["media-relay-started"],va),jt.off(Bt["media-relay-stopped"],ua),jt.off(Bt["media-relay-error"],Ha),jt.off(Bt["media-relay-request-response"],Qr),jt.off(Bt["media-relay-request-received"],rt)}},[]),Z.useContext(dE)},NB="0.3.14",DB=function(t){var r=t.children,s=t.config,l=t.token,d=t.joinWithoutUserInteraction,C=t.reinitialiseMeetingOnConfigChange,T=t.deviceInfo,b=t.keyProvider,u=Z.useState(null),x=u[0],f=u[1],y=Z.useState(null),E=y[0],_=y[1],m=Z.useState(null),k=m[0],w=m[1],U=Z.useState(null),g=U[0],A=U[1],P=Z.useState(null),z=P[0],N=P[1],R=Z.useState(!1),S=R[0],p=R[1],D=Z.useState(!1),O=D[0],j=D[1],I=Z.useState(!1),H=I[0],F=I[1],$=Z.useState(!1),q=$[0],se=$[1],J=Z.useState([]),be=J[0],Re=J[1],Se=Z.useState(new Map),me=Se[0],Ce=Se[1],Be=Z.useState(new Map),_e=Be[0],Ye=Be[1],Qe=Z.useState(new Map),Ge=Qe[0],He=Qe[1],Te=Z.useState(!1),dt=Te[0],yt=Te[1],on=Z.useState(new Map),ln=on[0],Pn=on[1],En=Z.useState(!1),rn=En[0],Ne=En[1],Me=Z.useState(!1),Ze=Me[0],Ft=Me[1],Ct=Z.useState("RECORDING_STOPPED"),wt=Ct[0],un=Ct[1],Sn=Z.useState("LIVESTREAM_STOPPED"),Ut=Sn[0],nr=Sn[1],Ar=Z.useState("HLS_STOPPED"),Sr=Ar[0],Ur=Ar[1],xr=Z.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Or=xr[0],Kr=xr[1],va=Z.useState("TRANSCRIPTION_STOPPED"),ra=va[0],ua=va[1],jn=Z.useRef(),Ha=Z.useRef(),Ea=Z.useRef(),Qr=Z.useRef(),gr=Z.useRef(),rt=Z.useRef(b),ut=Z.useRef(s),$t=Z.useRef(l),Tt=Z.useRef(!1),sn=Z.useRef(),nn=Z.useMemo(function(){return C},[]);Z.useEffect(function(){jn.current=x},[x]),Z.useEffect(function(){Ha.current=S},[S]),Z.useEffect(function(){Ea.current=O},[O]),Z.useEffect(function(){Qr.current=H},[H]),Z.useEffect(function(){gr.current=q},[q]),Z.useEffect(function(){ut.current=s},[s]),Z.useEffect(function(){$t.current=l},[l]),Z.useEffect(function(){sn.current=Ze},[Ze]);var et=function(){f(null),_(null),w(null),A(null),N(null),p(!1),j(!1),F(!1),se(!1),Re([]),yt(!1),Ce(new Map),Ye(new Map),He(new Map),Pn(new Map),Ne(!1),Ft(!1),un("RECORDING_STOPPED"),nr("LIVESTREAM_STOPPED"),Ur("HLS_STOPPED"),ua("TRANSCRIPTION_STOPPED"),Kr({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},On=function(ve){Ce(function(At){At.set(ve.id,ve);var rr=new Map(At);return rr}),jt.emit(Bt["participant-joined"],ve)},Ln=function(ve){Ce(function(At){At.delete(ve.id);var rr=new Map(At);return rr}),jt.emit(Bt["participant-left"],ve)},Xn=function(ve){var At,rr;N(ve),F(ve===(jn==null||(At=jn.current)===null||At===void 0||(rr=At.localParticipant)===null||rr===void 0?void 0:rr.id)),jt.emit(Bt["presenter-changed"],ve)},vr=function(ve){w(ve),jt.emit(Bt["main-participant-changed"],ve)},Qt=function(ve){A(ve),jt.emit(Bt["speaker-changed"],ve)},St=function(ve){Re(function(At){return[].concat(At,[ve])}),jt.emit(Bt["chat-message"],ve)},Un=function(ve){jt.emit(Bt["entry-requested"],ve)},In=function(ve,At){jt.emit(Bt["entry-responded"],ve,At)},Nn=function(){se(!0),jt.emit(Bt["recording-started"])},Fr=function(){se(!1),jt.emit(Bt["recording-stopped"])},Mr=function(ve){ve.track.readyState==="live"&&(ve.kind==="video"?j(!0):ve.kind==="audio"&&p(!0))},Hr=function(ve){ve.kind==="video"?j(!1):ve.kind==="audio"&&p(!1)},cr=function(ve){yt(!0),jt.emit(Bt["live-stream-started"],ve)},Kn=function(){yt(!1),jt.emit(Bt["live-stream-stopped"])},xa=function(ve){Ft(!0),jt.emit(Bt["hls-started"],ve)},ma=function(){Ft(!1),jt.emit(Bt["hls-stopped"])},La=function(ve){jt.emit(Bt["video-state-changed"],ve)},Va=function(ve){jt.emit(Bt["video-seeked"],ve)},Ci=function(ve){jt.emit(Bt["webcam-requested"],ve)},bs=function(ve){jt.emit(Bt["mic-requested"],ve)},ii=function(ve){ve.switchRoomId?(Re(function(At){return[].concat(At,ve.messages)}),jt.emit(Bt["meeting-joined"],ve)):(Tt.current=!0,Re(function(At){return[].concat(At,ve.messages)}),jt.emit(Bt["meeting-joined"],ve),Ne(!0))},Ti=function(){jt.emit(Bt["meeting-left"]);var ve=jn.current;if(ve){var At;typeof ve?.off=="function"&&(ve.off("meeting-state-changed",Hn),ve.off("participant-joined",On),ve.off("participant-left",Ln),ve.off("presenter-changed",Xn),ve.off("main-participant-changed",vr),ve.off("speaker-changed",Qt),ve.off("entry-requested",Un),ve.off("entry-responded",In),ve.off("chat-message",St),ve.off("recording-started",Nn),ve.off("recording-stopped",Fr),ve.off("meeting-joined",ii),ve.off("meeting-left",Ti),ve.off("livestream-started",cr),ve.off("livestream-stopped",Kn),ve.off("video-state-changed",La),ve.off("video-seeked",Va),ve.off("webcam-requested",Ci),ve.off("mic-requested",bs),ve.off("pin-state-changed",Us),ve.off("paused-all-streams",vi),ve.off("resumed-all-streams",ea),ve.off("connection-open",Fs),ve.off("connection-close",Ks),ve.off("switch-meeting",pn),ve.off("error",Jn),ve.off("hls-started",xa),ve.off("hls-stopped",ma),ve.off("recording-state-changed",$n),ve.off("livestream-state-changed",dr),ve.off("hls-state-changed",Dn),ve.off("participant-mode-changed",ya),ve.off("whiteboard-stopped",Fn),ve.off("whiteboard-started",kr),ve.off("transcription-state-changed",$r),ve.off("character-joined",Zr),ve.off("character-left",Da)),typeof(ve==null||(At=ve.localParticipant)===null||At===void 0?void 0:At.off)=="function"&&(ve.localParticipant.off("stream-enabled",Mr),ve.localParticipant.off("stream-disabled",Hr)),et()}},Us=function(ve){var At=ve.participantId,rr=ve.state,ha=ve.pinnedBy;He(function(Xa){!rr.cam&&!rr.share?Xa.delete(At):Xa.set(At,rr);var xs=new Map(Xa);return xs}),jt.emit(Bt["pin-state-changed"],{participantId:At,state:rr,pinnedBy:ha})},vi=function(ve){var At=ve.kind;jt.emit(Bt["paused-all-streams"],{kind:At})},ea=function(ve){var At=ve.kind;jt.emit(Bt["resumed-all-streams"],{kind:At})},Fs=function(ve){Pn(function(At){At.set(ve.id,ve);var rr=new Map(At);return rr}),jt.emit(Bt["connection-open"],ve)},Ks=function(ve){Pn(function(At){At.delete(ve);var rr=new Map(At);return rr}),jt.emit(Bt["connection-close"],ve)},pn=function(ve){jt.emit(Bt["switch-meeting"],ve)},Jn=function(ve){jt.emit(Bt.error,ve)},$n=function(ve){un(ve?.status),jt.emit(Bt["recording-state-changed"],ve)},dr=function(ve){nr(ve?.status),jt.emit(Bt["livestream-state-changed"],ve)},Dn=function(ve){Ur(ve?.status),ve?.status=="HLS_PLAYABLE"?Kr({downstreamUrl:ve?.downstreamUrl,playbackHlsUrl:ve?.playbackHlsUrl,livestreamUrl:ve?.livestreamUrl}):ve?.status=="HLS_STOPPED"&&Kr({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),jt.emit(Bt["hls-state-changed"],ve)},Hn=function(ve){jt.emit(Bt["meeting-state-changed"],ve)},$r=function(ve){ua(ve?.status),jt.emit(Bt["transcription-state-changed"],ve)},Er=function(ve){jt.emit(Bt["transcription-text"],ve)},kr=function(ve){jt.emit(Bt["whiteboard-started"],ve)},Fn=function(ve){jt.emit(Bt["whiteboard-stopped"],ve)},Zr=function(ve){Ye(function(At){At.set(ve.id,ve);var rr=new Map(At);return rr}),jt.emit(Bt["character-joined"],ve)},Da=function(ve){Ye(function(At){At.delete(ve.id);var rr=new Map(At);return rr}),jt.emit(Bt["character-left"],ve)},ya=function(ve){var At,rr;Ce(function(ha){var Xa=ha.get(ve.participantId);Xa.mode=ve.mode,ha.set(Xa.id,Xa);var xs=new Map(ha);return xs}),ve.participantId===(jn==null||(At=jn.current)===null||At===void 0||(rr=At.localParticipant)===null||rr===void 0?void 0:rr.id)&&_(function(ha){return ha.mode=ve.mode,ha}),jt.emit(Bt["participant-mode-changed"],ve)},Ca=function(ve){jt.emit(Bt["media-relay-started"],ve)},Za=function(ve){jt.emit(Bt["media-relay-stopped"],ve)},Ga=function(ve){jt.emit(Bt["media-relay-error"],ve)},ss=function(ve){jt.emit(Bt["media-relay-request-response"],ve)},Aa=function(ve){jt.emit(Bt["media-relay-request-received"],ve)},ls=function(){var ve=Du.VideoSDK&&Du.VideoSDK.initMeeting(ut.current);f(ve);var At=ve.localParticipant,rr=ve.participants,ha=ve.characters;rr.set(At.id,At),Ce(rr),Ye(ha),_(At),ve.on("meeting-state-changed",Hn),ve.on("participant-joined",On),ve.on("participant-left",Ln),ve.on("presenter-changed",Xn),ve.on("main-participant-changed",vr),ve.on("speaker-changed",Qt),ve.on("entry-requested",Un),ve.on("entry-responded",In),ve.on("chat-message",St),ve.on("recording-started",Nn),ve.on("recording-stopped",Fr),ve.on("meeting-joined",ii),ve.on("meeting-left",Ti),ve.on("livestream-started",cr),ve.on("livestream-stopped",Kn),ve.on("video-state-changed",La),ve.on("video-seeked",Va),ve.on("webcam-requested",Ci),ve.on("mic-requested",bs),ve.on("pin-state-changed",Us),ve.on("paused-all-streams",vi),ve.on("resumed-all-streams",ea),ve.on("connection-open",Fs),ve.on("connection-close",Ks),ve.on("switch-meeting",pn),ve.on("error",Jn),ve.on("hls-started",xa),ve.on("hls-stopped",ma),ve.on("recording-state-changed",$n),ve.on("livestream-state-changed",dr),ve.on("hls-state-changed",Dn),ve.on("participant-mode-changed",ya),ve.on("transcription-state-changed",$r),ve.on("transcription-text",Er),ve.on("whiteboard-started",kr),ve.on("whiteboard-stopped",Fn),ve.on("character-joined",Zr),ve.on("character-left",Da),ve.on("media-relay-started",Ca),ve.on("media-relay-stopped",Za),ve.on("media-relay-error",Ga),ve.on("media-relay-request-response",ss),ve.on("media-relay-request-received",Aa),ve.localParticipant.on("stream-enabled",Mr),ve.localParticipant.on("stream-disabled",Hr),ve.join()},Ps=function(){var ve=jn.current;ve&&ve.leave()},ro=function(){var ve=jn.current;ve&&ve.end()},yi=function(ve){var At=jn.current;At&&At.pauseAllStreams(ve)},Pi=function(ve){var At=jn.current;At&&At.resumeAllStreams(ve)},Ns=function(ve,At,rr,ha){var Xa=jn.current;Xa&&Xa.startRecording(ve,At,rr,ha)},Eo=function(){var ve=jn.current;if(ve){var At=gr.current;At&&ve.stopRecording()}},mo=function(ve){ve===void 0&&(ve=void 0);var At=jn.current;At&&At.unmuteMic(ve)},Hi=function(){var ve=jn.current;ve&&ve.muteMic()},ao=function(ve){ve===void 0&&(ve=void 0);var At=Ha.current;At?Hi():mo(ve)},Ni=function(){var ve=jn.current;ve&&ve.disableWebcam()},_i=function(ve){ve===void 0&&(ve=void 0);var At=jn.current;At&&At.enableWebcam(ve)},Di=function(ve){ve===void 0&&(ve=void 0);var At=Ea.current;At?Ni():_i(ve)},uc=function(ve){var At=ve.meetingId,rr=ve.token,ha=jn.current;ha&&ha.switchTo({meetingId:At,token:rr})},Cr=function(){var ve=jn.current;ve&&ve.disableScreenShare()},Hs=function(ve){ve===void 0&&(ve=void 0);var At=jn.current;At&&At.enableScreenShare(ve)},da=function(ve){ve===void 0&&(ve=void 0);var At=Qr.current;At?Cr():Hs(ve)},oi=function(ve){var At=jn.current;At&&At.changeMode(ve)},so=function(ve){var At=jn.current;At&&At.sendChatMessage(ve)},tr=function(ve,At){var rr=jn.current;rr&&rr.respondEntry(ve,At)},Qs=function(){try{var ve=jn.current;return Promise.resolve(function(){if(ve)return Promise.resolve(ve.getMics())}())}catch(At){return Promise.reject(At)}},ci=function(){try{var ve=jn.current;return Promise.resolve(function(){if(ve)return Promise.resolve(ve.getWebcams())}())}catch(At){return Promise.reject(At)}},li=function(ve){var At=jn.current;At&&At.changeWebcam(ve)},_r=function(ve){var At=jn.current;At&&At.replaceWebcamStream(ve)},qa=function(ve){var At=jn.current;At&&At.changeMic(ve)},Xs=function(ve){var At=ve.link,rr=jn.current;rr&&rr.startVideo({link:At})},Zo=function(){var ve=jn.current;ve&&ve.stopVideo()},ms=function(){var ve=jn.current;ve&&ve.resumeVideo()},Vi=function(ve){var At=ve.currentTime,rr=jn.current;rr&&rr.pauseVideo({currentTime:At})},go=function(){var ve=jn.current;ve&&ve.enableAdaptiveSubscription()},Qa=function(){var ve=jn.current;ve&&ve.disableAdaptiveSubscription()},Oc=function(ve){var At=ve.destinationMeetingId,rr=ve.token,ha=ve.kinds,Xa=jn.current;Xa&&Xa.requestMediaRelay({destinationMeetingId:At,token:rr,kinds:ha})},Js=function(ve){var At=jn.current;At&&At.stopMediaRelay(ve)},Vr=function(ve){var At=ve.currentTime,rr=jn.current;rr&&rr.seekVideo({currentTime:At})},ui=function(ve,At){var rr=jn.current;rr&&rr.startLivestream(ve,At)},gs=function(){var ve=jn.current;ve&&ve.stopLivestream()},qi=function(ve){var At=ve.meetingId,rr=ve.payload;try{var ha=jn.current,Xa=function(){if(ha)return Promise.resolve(ha.connectTo({meetingId:At,payload:rr})).then(function(){})}();return Promise.resolve(Xa&&Xa.then?Xa.then(function(){}):void 0)}catch(xs){return Promise.reject(xs)}},Go=function(ve,At){var rr=jn.current;rr&&rr.startHls(ve,At)},Yo=function(){var ve=jn.current;ve&&ve.stopHls()},io=function(){Du.VideoSDK.config($t.current),rt.current&&Du.VideoSDK.setKeyProvider(rt.current),T?Du.VideoSDK.analytics(T):Du.VideoSDK.analytics({sdkType:"react-web",sdkVersion:NB}),d&&ls()};return Z.useEffect(function(){io()},[]),Z.useEffect(function(){nn&&Tt.current&&(Ps(),io(),!d&&ls())},[s.meetingId,l,nn]),Wt.createElement(dE.Provider,{value:{meetingId:x?.id,meeting:x,baseUrl:x?.baseUrl,localParticipant:E,mainParticipant:k,activeSpeakerId:g,participants:me,characters:_e,presenterId:z,localMicOn:S,localWebcamOn:O,localScreenShareOn:H,messages:be,isRecording:q,isLiveStreaming:dt,pinnedParticipants:Ge,connections:ln,isHls:Ze,recordingState:wt,livestreamState:Ut,hlsState:Sr,hlsUrls:Or,transcriptionState:ra,isMeetingJoined:rn,selectedCameraDevice:x?.selectedCameraDevice,selectedMicrophoneDevice:x?.selectedMicrophoneDevice,join:ls,leave:Ps,end:ro,pauseAllStreams:yi,resumeAllStreams:Pi,startRecording:Ns,stopRecording:Eo,sendChatMessage:so,respondEntry:tr,muteMic:Hi,unmuteMic:mo,toggleMic:ao,disableWebcam:Ni,enableWebcam:_i,toggleWebcam:Di,disableScreenShare:Cr,enableScreenShare:Hs,toggleScreenShare:da,switchTo:uc,getMics:Qs,getWebcams:ci,changeWebcam:li,replaceWebcamStream:_r,changeMic:qa,changeMode:oi,startVideo:Xs,stopVideo:Zo,resumeVideo:ms,pauseVideo:Vi,seekVideo:Vr,startLivestream:ui,stopLivestream:gs,connectTo:qi,startHls:Go,stopHls:Yo,enableAdaptiveSubscription:go,disableAdaptiveSubscription:Qa,requestMediaRelay:Oc,stopMediaRelay:Js}},r)},hE=function(t,r){var s={},l=s.onStreamEnabled,d=l===void 0?function(){}:l,C=s.onStreamDisabled,T=C===void 0?function(){}:C,b=s.onMediaStatusChanged,u=b===void 0?function(){}:b,x=s.onVideoQualityChanged,f=x===void 0?function(){}:x,y=s.onStreamPaused,E=y===void 0?function(){}:y,_=s.onStreamResumed,m=_===void 0?function(){}:_,k=s.onProducerAdded,w=k===void 0?function(){}:k,U=s.onProducerRemoved,g=U===void 0?function(){}:U,A=s.onConsumerAdded,P=A===void 0?function(){}:A,z=s.onConsumerRemoved,N=z===void 0?function(){}:z,R=Z.useState(null),S=R[0],p=R[1],D=Z.useState(null),O=D[0],j=D[1],I=Z.useState(null),H=I[0],F=I[1],$=Z.useState(null),q=$[0],se=$[1],J=cg(),be=Z.useMemo(function(){var gr,rt=J?.participants,ut=J?.localParticipant,$t=J?.activeSpeakerId,Tt=J?.mainParticipant,sn=(J==null||(gr=J.pinnedParticipants)===null||gr===void 0?void 0:gr.get(t))||{cam:!1,share:!1};return{participants:rt,localParticipant:ut,activeSpeakerId:$t,mainParticipant:Tt,pinState:sn}},[J]),Re=be.participants,Se=be.localParticipant,me=be.activeSpeakerId,Ce=be.mainParticipant,Be=be.pinState,_e=Re?.get(t),Ye=Z.useState(_e?.webcamOn),Qe=Ye[0],Ge=Ye[1],He=Z.useState(_e?.micOn),Te=He[0],dt=He[1],yt=Z.useState(_e?.mode),on=yt[0],ln=yt[1],Pn=function(rt){if(rt.track.readyState==="live")switch(rt.kind){case"video":S!=null&&p(null),p(rt);break;case"audio":O!=null&&j(null),j(rt);break;case"share":H!=null&&F(null),F(rt);break;case"shareAudio":q!=null&&se(null),se(rt);break}},En=function(rt){switch(rt.kind){case"video":p(null);break;case"audio":j(null);break;case"share":F(null);break;case"shareAudio":se(null);break}},rn=function(rt){Pn(rt),d(rt)},Ne=function(rt){t===rt.participantId&&ln(rt.mode)},Me=function(rt){En(rt),T(rt)},Ze=function(rt){var ut=rt.peerId,$t=rt.prevQuality,Tt=rt.currentQuality;f({peerId:ut,prevQuality:$t,currentQuality:Tt})},Ft=function(rt){var ut=rt.kind,$t=rt.peerId,Tt=rt.newStatus;ut=="audio"?dt(Tt):ut=="video"&&Ge(Tt),u({kind:ut,peerId:$t,newStatus:Tt})},Ct=function(rt){_e?.setQuality(rt)},wt=function(rt,ut){_e?.setViewPort(rt,ut)},un=function(rt){_e?.setScreenShareQuality(rt)},Sn=function(){_e?.enableMic()},Ut=function(){_e?.disableMic()},nr=function(){_e?.enableWebcam()},Ar=function(){_e?.disableWebcam()},Sr=function(rt){_e?.pin(rt)},Ur=function(rt){_e?.unpin(rt)},xr=function(){_e?.remove()},Or=function(rt){var ut=rt===void 0?{}:rt,$t=ut.height,Tt=ut.width;return Promise.resolve(_e?.captureImage({height:$t,width:Tt}))},Kr=function(){return Promise.resolve(_e?.getAudioStats())},va=function(){return Promise.resolve(_e?.getVideoStats())},ra=function(){return Promise.resolve(_e?.getShareStats())},ua=function(){return Promise.resolve(_e?.getShareAudioStats())},jn=function(){_e?.consumeWebcamStreams()},Ha=function(){_e?.consumeMicStreams()},Ea=function(){_e?.stopConsumingWebcamStreams()},Qr=function(){_e?.stopConsumingMicStreams()};return Z.useEffect(function(){var gr=_e?.streams;return gr&&gr.forEach(function(rt){Pn(rt)}),_e!=null&&_e.micOn&&dt(Te),_e!=null&&_e.webcamOn&&Ge(Qe),_e?.on("stream-enabled",rn),_e?.on("stream-disabled",Me),_e?.on("stream-paused",function(rt){E(rt)}),_e?.on("stream-resumed",function(rt){m(rt)}),_e?.on("media-status-changed",Ft),_e?.on("video-quality-changed",Ze),_e?.on("producer-added",function(rt){w(rt)}),_e?.on("producer-removed",function(rt){g(rt)}),_e?.on("consumer-added",function(rt){P(rt)}),_e?.on("consumer-removed",function(rt){N(rt)}),jt.on(Bt["participant-mode-changed"],Ne),function(){_e?.off("stream-enabled",rn),_e?.off("stream-disabled",Me),_e?.off("media-status-changed",Ft),_e?.off("video-quality-changed",Ze),jt.off(Bt["participant-mode-changed"],Ne)}},[_e]),{displayName:_e?.displayName,participant:_e,webcamStream:S,micStream:O,screenShareStream:H,screenShareAudioStream:q,webcamOn:Qe||!!S,micOn:Te||!!O,mode:on,metaData:_e?.metaData,screenShareOn:!!H,isLocal:Se?.id===t,isActiveSpeaker:me===t,isMainParticipant:Ce?.id===t,pinState:Be,consumeMicStreams:Ha,consumeWebcamStreams:jn,stopConsumingMicStreams:Qr,stopConsumingWebcamStreams:Ea,setQuality:Ct,setScreenShareQuality:un,setViewPort:wt,enableMic:Sn,disableMic:Ut,enableWebcam:nr,disableWebcam:Ar,captureImage:Or,pin:Sr,unpin:Ur,remove:xr,getAudioStats:Kr,getVideoStats:va,getShareStats:ra,getShareAudioStats:ua}},AB=function(t,r){var s=r===void 0?{}:r,l=s.onMessageReceived,d=l===void 0?function(){}:l,C=s.onOldMessagesReceived,T=C===void 0?function(){}:C,b=cg(),u=b.meeting,x=b.isMeetingJoined,f=Z.useState([]),y=f[0],E=f[1],_=Z.useRef(!1),m=function(g,A,P){u&&u.pubSub.publish(t,g,A,P)},k=function(g){E(function(A){return[].concat(A,[g])}),d(g)},w=function(g){try{var A;return Promise.resolve(g==null||(A=g.pubSub)===null||A===void 0?void 0:A.subscribe(t,k)).then(function(P){P&&(T(P.messages),E(P.messages))})}catch(P){return Promise.reject(P)}};return Z.useEffect(function(){if(u&&!_.current&&x)return _.current=!0,w(u),function(){var U;u==null||(U=u.pubSub)===null||U===void 0||U.unsubscribe(t,k)}},[u,x]),{publish:m,messages:y}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));Du.VideoSDK.Constants;var OB=function(t){var r=t.cameraId,s=r===void 0?void 0:r,l=t.encoderConfig,d=l===void 0?void 0:l,C=t.facingMode,T=C===void 0?void 0:C,b=t.optimizationMode,u=b===void 0?void 0:b,x=t.multiStream,f=x===void 0?!0:x;try{return Promise.resolve(Du.VideoSDK.createCameraVideoTrack({cameraId:s,encoderConfig:d,facingMode:T,optimizationMode:u,multiStream:f}))}catch(y){return Promise.reject(y)}};Z.forwardRef(function(e,t){var r=e.participantId,s=e.type,l=s===void 0?"video":s,d=e.containerStyle,C=d===void 0?{}:d,T=e.className,b=T===void 0?"":T,u=e.classNameVideo,x=u===void 0?"":u,f=e.videoStyle,y=f===void 0?{}:f,E=hE(r),_=E.webcamOn,m=E.webcamStream,k=E.isLocal,w=E.screenShareStream,U=E.screenShareOn,g=Z.useRef(null);return Z.useEffect(function(){var A=l==="share"?w:m,P=l==="share"?U:_;if(g.current)if(P&&A){var z=new MediaStream;z.addTrack(A.track),g.current.srcObject=z,g.current.setAttribute("playsinline",""),g.current.setAttribute("x5-playsinline",""),g.current.setAttribute("webkit-playsinline",""),g.current.play().catch(function(N){return console.error("videoRef.current.play() failed",N)})}else g.current.srcObject=null},[l].concat(l==="share"?[U,w]:l==="video"?[_,m]:[])),Wt.createElement("div",{ref:t,className:"video-container participant-video-"+r+" "+(b||""),style:Tm({objectFit:l==="share"?"contain":"none",height:"100%"},C)},Wt.createElement("video",{width:"100%",height:"100%",ref:g,autoPlay:!0,className:x,style:k&&l!=="share"?Tm({transform:"scaleX(-1)",WebkitTransform:"scaleX(-1)"},y):y}))});const Oy={API_KEY:"dac164d6-2dd7-4232-b6b1-05cd1a0edb83",SECRET_KEY:"fc6ce9fe05e735a33e7f3f234e1afe1ec8481389c54a94482d3b6685133a3ef3",API_BASE_URL:"https://api.videosdk.live/v2",TEMP_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiJkYWMxNjRkNi0yZGQ3LTQyMzItYjZiMS0wNWNkMWEwZWRiODMiLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTc1NDk5MjEyMSwiZXhwIjoxNzU3NTg0MTIxfQ.kplefvdyD8APGCFxaIMWvMItwhqgVKiALU3f4EulMtg"},pE=async(e,t,r=["allow_join"],s="user")=>{try{return console.log(" Using development token for:",s,t),Oy.TEMP_TOKEN}catch(l){throw console.error("Error generating auth token:",l),new Error("Failed to generate authentication token")}},w0=async(e,t={})=>{try{const r={region:"sg001",...t},s=await Bs.post(`${Oy.API_BASE_URL}/rooms`,r,{headers:{Authorization:e,"Content-Type":"application/json"},timeout:15e3});return{roomId:s.data.roomId,meetingId:s.data.roomId,region:r.region,createdAt:new Date().toISOString()}}catch(r){throw console.error("Error creating meeting:",r),r.response?.status===401?new Error("Invalid authentication token"):r.response?.status===429?new Error("Rate limit exceeded. Please try again later"):new Error("Failed to create meeting room")}},z1=async(e,t)=>{try{const r=await Bs.get(`${Oy.API_BASE_URL}/rooms/${t}`,{headers:{Authorization:e,"Content-Type":"application/json"},timeout:1e4});return{isValid:!0,meetingId:r.data.roomId,region:r.data.region,createdAt:r.data.createdAt}}catch(r){return r.response?.status===404?{isValid:!1,error:"Meeting not found"}:{isValid:!1,error:"Unable to validate meeting"}}},U1=({participantId:e})=>{const t=Z.useRef(null),r=Z.useRef(null),{webcamStream:s,micStream:l,webcamOn:d,micOn:C,isLocal:T,displayName:b}=hE(e);Z.useEffect(()=>{if(r.current&&d&&s){const x=new MediaStream;try{x.addTrack(s.track),r.current.srcObject=x,r.current.play().catch(f=>console.error("Video play failed:",f))}catch(f){console.error("Failed to add track to MediaStream:",f)}}else r.current&&(r.current.srcObject=null)},[s,d,b]),Z.useEffect(()=>{if(t.current)if(C&&l){const x=new MediaStream;try{x.addTrack(l.track),t.current.srcObject=x,t.current.play().catch(f=>console.error("Audio play failed",f))}catch(f){console.error("Failed to add mic track to MediaStream:",f)}}else t.current.srcObject=null},[l,C]);const u=()=>d&&s?o.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:T,className:"w-full h-full object-contain",style:T?{transform:"scaleX(-1)"}:{transform:"none"},onLoadedMetadata:()=>console.log("Video metadata loaded for:",b),onError:x=>console.error("Video error for:",b,x)}):o.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-700",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx("span",{className:"text-2xl font-medium",children:(b||"U").charAt(0).toUpperCase()})}),o.jsx("p",{className:"text-sm",children:b||"User"}),o.jsx("p",{className:"text-xs text-gray-400",children:"Camera off"})]})});return o.jsxs("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden",children:[o.jsx("audio",{ref:t,autoPlay:!0,playsInline:!0,muted:T}),u(),o.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 px-2 py-1 rounded",children:o.jsxs("span",{className:"text-white text-xs",children:[b||"User"," ",T?"(You)":""]})}),o.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[!C&&o.jsx("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx(Gw,{})}),!d&&o.jsx("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx(Yw,{})})]})]})},MB=({onLeave:e,setShowChat:t,showChat:r,setShowParticipants:s,showParticipants:l})=>{const[d,C]=Z.useState(!0),[T,b]=Z.useState(!0),[u,x]=Z.useState({mic:!1,webcam:!1}),{leave:f,toggleMic:y,toggleWebcam:E,localParticipant:_}=cg(),m=async()=>{if(!u.mic){x(g=>({...g,mic:!0}));try{await y(),C(g=>!g)}catch(g){console.error("Failed to toggle microphone:",g)}finally{x(g=>({...g,mic:!1}))}}},k=async()=>{if(!u.webcam){x(g=>({...g,webcam:!0}));try{await E(),b(g=>!g)}catch(g){console.error("Failed to toggle webcam:",g)}finally{x(g=>({...g,webcam:!1}))}}},w=async()=>{try{await f(),e&&e()}catch(g){console.error("Error leaving meeting:",g),e&&e()}};Wt.useEffect(()=>{_&&(C(_.micOn),b(_.webcamOn))},[_?.micOn,_?.webcamOn]);const U=[{icon:d?o.jsx(M6,{}):o.jsx(Gw,{}),onClick:m,title:d?"Turn off microphone":"Turn on microphone",bgColor:d?"bg-gray-700 hover:bg-gray-600":"bg-red-600 hover:bg-red-700",disabled:u.mic},{icon:T?o.jsx(j6,{}):o.jsx(Yw,{}),onClick:k,title:T?"Turn off camera":"Turn on camera",bgColor:T?"bg-gray-700 hover:bg-gray-600":"bg-red-600 hover:bg-red-700",disabled:u.webcam},{icon:o.jsx(L6,{}),onClick:()=>t(!r),title:r?"Hide chat":"Show chat",bgColor:r?"bg-blue-600 hover:bg-blue-700":"bg-gray-700 hover:bg-gray-600",disabled:!1},{icon:o.jsx(I6,{}),onClick:()=>s(!l),title:l?"Hide participants":"Show participants",bgColor:l?"bg-blue-600 hover:bg-blue-700":"bg-gray-700 hover:bg-gray-600",disabled:!1},{icon:o.jsx(N6,{}),onClick:w,title:"Leave meeting",bgColor:"bg-red-600 hover:bg-red-700",disabled:!1}];return o.jsxs("div",{className:"bg-gray-800 p-4",children:[o.jsx("div",{className:"flex items-center justify-center space-x-4",children:U.map((g,A)=>o.jsx("button",{onClick:g.onClick,disabled:g.disabled,className:`p-3 rounded-full text-white transition-colors ${g.bgColor} ${g.disabled?"opacity-50 cursor-not-allowed":""}`,title:g.title,children:g.disabled&&(A===0||A===1)?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):g.icon},A))}),o.jsxs("div",{className:"flex items-center justify-center mt-2 space-x-4 text-xs text-gray-400",children:[o.jsx("span",{className:d?"text-green-400":"text-red-400",children:d?" Mic On":" Mic Off"}),o.jsx("span",{className:T?"text-green-400":"text-red-400",children:T?" Camera On":" Camera Off"})]})]})},jB=({meetingId:e,localParticipant:t,isVisible:r})=>{const[s,l]=Z.useState(""),d=Z.useRef(null),{publish:C,messages:T}=AB("CHAT",{onMessageReceived:f=>{f.senderId!==t?.id&&zt.info(`${f.senderName} sent a message`)}});Z.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[T]);const b=async()=>{if(s.trim()){if(!C){zt.error("Chat not available. Please try again.");return}try{await C(s.trim(),{persist:!0}),l("")}catch(f){console.error("Failed to send message:",f),zt.error("Failed to send message. Please try again.")}}},u=f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),b())},x=f=>f?new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return r?o.jsxs("div",{className:"h-full flex flex-col bg-gray-800",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700",children:[o.jsxs("h3",{className:"text-white font-semibold flex items-center",children:[o.jsx("span",{className:"mr-2",children:""}),"Chat"]}),o.jsxs("p",{className:"text-gray-400 text-xs",children:["Meeting: ",e]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",ref:d,children:T.length===0?o.jsxs("div",{className:"text-center text-gray-400 text-sm py-8",children:[o.jsx("div",{className:"mb-2",children:""}),o.jsx("p",{children:"No messages yet"}),o.jsx("p",{className:"text-xs mt-1",children:"Start the conversation!"})]}):T.map(f=>{const y=f.senderId===t?.id;return o.jsxs("div",{className:`p-3 rounded-lg max-w-xs ${y?"bg-blue-600 ml-auto":"bg-gray-700 mr-auto"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsx("span",{className:`font-medium text-sm ${y?"text-blue-100":"text-blue-400"}`,children:y?"You":f.senderName||"Unknown"}),o.jsx("span",{className:"text-gray-300 text-xs ml-2",children:x(f.timestamp)})]}),o.jsx("p",{className:"text-sm text-white break-words",children:f.message})]},f.id)})}),o.jsxs("div",{className:"p-4 border-t border-gray-700",children:[o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("input",{type:"text",value:s,onChange:f=>l(f.target.value),onKeyPress:u,placeholder:"Type a message...",className:"w-full px-3 py-2 pr-12 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",maxLength:500,disabled:!C}),o.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-400",children:[s.length,"/500"]})]}),o.jsx("button",{onClick:b,disabled:!s.trim()||!C,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Press Enter to send, Shift+Enter for new line"})]})]}):null},LB=({participants:e,localParticipant:t,participantName:r,isDoctor:s,isVisible:l})=>{if(!l)return null;const d=[{id:t?.id,name:r,isLocal:!0,role:s?"Doctor":"Patient"},...Array.from(e.entries()).map(([C,T])=>({id:C,name:T.displayName||"Unknown",isLocal:!1,role:"Participant"}))];return o.jsxs("div",{className:"h-full flex flex-col bg-gray-800",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700",children:[o.jsxs("h3",{className:"text-white font-semibold flex items-center",children:[o.jsx("span",{className:"mr-2",children:""}),"Participants"]}),o.jsxs("p",{className:"text-gray-400 text-xs",children:[d.length," online"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[d.map(C=>o.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg ${C.isLocal?"bg-blue-700":"bg-gray-700"}`,children:[o.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-medium",children:C.name?.charAt(0)?.toUpperCase()||"U"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("span",{className:"text-white text-sm",children:[C.name," ",C.isLocal&&"(You)"]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${C.role==="Doctor"?"bg-green-600 text-white":C.role==="Patient"?"bg-blue-600 text-white":"bg-gray-600 text-white"}`,children:C.role}),C.isLocal&&o.jsx("span",{className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded-full",children:"Host"})]})]})]},C.id)),e.size===0&&o.jsxs("div",{className:"text-center text-gray-400 text-sm py-8",children:[o.jsx("div",{className:"mb-2",children:""}),o.jsx("p",{children:"Waiting for others to join..."}),o.jsx("p",{className:"text-xs mt-1",children:"Share the meeting code to invite participants"})]})]})]})};function IB({onLeave:e,meetingId:t,participantName:r,isDoctor:s}){const[l,d]=Z.useState(null),[C,T]=Z.useState(!0),[b,u]=Z.useState(!1),[x,f]=Z.useState(!1),{join:y,participants:E,localParticipant:_,enableWebcam:m,disableWebcam:k}=cg({onMeetingJoined:async()=>{d("JOINED"),zt.success("Joined meeting successfully!"),await w()},onMeetingLeft:()=>{e()},onParticipantJoined:A=>{console.log("Participant joined:",A),zt.info(`${A.displayName||"Someone"} joined the meeting`)},onParticipantLeft:A=>{console.log("Participant left:",A),zt.info(`${A.displayName||"Someone"} left the meeting`)},onError:A=>{console.error("Meeting error:",A),zt.error("Meeting error occurred")}}),w=async()=>{if(!x)try{if(k)try{await k(),await new Promise(P=>setTimeout(P,500))}catch{}const A=await OB({encoderConfig:"h720p_30fps",optimizationMode:"motion",facingMode:"user"});m&&(await m(A),f(!0),console.log("Published custom HD webcam track"),zt.success("HD camera enabled"))}catch(A){console.warn("Could not enable HD webcam, using default:",A);try{m&&await m()}catch(P){console.error("Failed to enable default webcam:",P)}}},U=()=>{d("JOINING"),y()},g=()=>{navigator.clipboard&&t?(navigator.clipboard.writeText(t),zt.success("Meeting code copied to clipboard!")):zt.error("Failed to copy meeting code")};if(l==="JOINING")return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{children:"Joining the meeting..."}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Please wait..."})]})});if(l==="JOINED"){const A=[...E.keys()].filter(P=>P!==_?.id);return o.jsxs("div",{className:"flex h-screen bg-gray-900",children:[o.jsxs("div",{className:"flex-1 flex flex-col",children:[s&&t&&o.jsxs("div",{className:"bg-blue-600 text-white p-3 text-center",children:[o.jsx("p",{className:"text-sm font-medium",children:"Share this meeting code with patient:"}),o.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[o.jsx("code",{className:"bg-blue-700 px-3 py-1 rounded font-mono text-lg",children:t}),o.jsx("button",{onClick:g,className:"bg-blue-800 hover:bg-blue-900 px-3 py-1 rounded text-sm transition-colors",title:"Copy meeting code",children:" Copy"})]})]}),o.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 overflow-auto",children:[_&&o.jsx(U1,{participantId:_.id}),A.map(P=>o.jsx(U1,{participantId:P},P)),A.length===0&&o.jsx("div",{className:"bg-gray-800 rounded-lg flex items-center justify-center min-h-[300px]",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-lg font-medium mb-2",children:s?"Waiting for patient...":"Waiting for doctor..."}),o.jsx("p",{className:"text-sm text-gray-400",children:"Share the meeting code to invite others"}),!s&&o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Make sure you have the correct meeting code"})]})})]}),o.jsx(MB,{onLeave:e,setShowChat:T,showChat:C,setShowParticipants:u,showParticipants:b})]}),(C||b)&&o.jsxs("div",{className:"w-80 bg-gray-800 border-l border-gray-700",children:[o.jsx(jB,{meetingId:t,localParticipant:_,isVisible:C}),o.jsx(LB,{participants:E,localParticipant:_,participantName:r,isDoctor:s,isVisible:b})]})]})}return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white max-w-md mx-auto p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:s?"Doctor Portal":"Patient Portal"}),o.jsx("p",{className:"text-gray-400",children:s?"Ready to start your consultation":"Ready to join your consultation"})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Meeting Details"}),o.jsxs("div",{className:"text-sm text-gray-300",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Meeting ID:"})," ",t]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Participant:"})," ",r]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Role:"})," ",s?"Doctor":"Patient"]})]})]}),o.jsx("button",{onClick:U,className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium text-lg",children:"Join Meeting"}),o.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"By joining, you agree to allow camera and microphone access"})]})})}const fE=({meetingId:e,doctorId:t,userId:r,userName:s,isPatient:l=!0,onLeave:d})=>{const{user:C}=si(),{doctor:T}=ps(),[b,u]=Z.useState(null),[x,f]=Z.useState(e),[y,E]=Z.useState(!0),[_,m]=Z.useState(null),k=!l,w=k?T:C,U=w?.name||s||"User";Z.useEffect(()=>{(async()=>{try{E(!0),m(null),console.log("Initializing meeting...",{meetingId:e,isDoctor:k,participantName:U});const P=await pE(w?._id||r,U,k?["allow_join","allow_mod"]:["allow_join"],k?"doctor":"patient");if(u(P),k)if(e==="new"||!e){const z=await w0(P);f(z.roomId),zt.success(`New meeting created: ${z.roomId}`)}else try{if((await z1(P,e)).isValid)f(e);else throw new Error("Invalid meeting")}catch{console.warn("Meeting validation failed, creating new meeting");const N=await w0(P);f(N.roomId),zt.success(`New meeting created: ${N.roomId}`)}else{if(!e||e==="new")throw new Error("Meeting ID is required for patients");if(!(await z1(P,e)).isValid)throw new Error("Invalid meeting ID. Please check and try again.");f(e)}}catch(P){console.error("Failed to initialize meeting:",P),m(P.message||"Failed to initialize meeting"),zt.error(P.message||"Failed to initialize meeting")}finally{E(!1)}})()},[e,k,w,r,U]);const g=()=>{m(null),window.location.reload()};return y?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{className:"text-lg",children:"Initializing meeting..."}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Setting up your video call"})]})}):_||!b||!x?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white max-w-md mx-auto p-6",children:[o.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("h2",{className:"text-xl font-bold mb-2",children:"Connection Failed"}),o.jsx("p",{className:"text-gray-300 mb-6",children:_||"Unable to initialize meeting. Please try again."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:g,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry Connection"}),o.jsx("button",{onClick:d,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Go Back"})]})]})}):o.jsx(DB,{config:{meetingId:x,name:U,micEnabled:!0,webcamEnabled:!0,participantId:w?._id||r,maxResolution:"hd",multiStream:!1},token:b,joinWithoutUserInteraction:!1,children:o.jsx(IB,{onLeave:d,meetingId:x,participantName:U,isDoctor:k})})},mE=({doctorId:e,doctorName:t,isDoctor:r=!1})=>{const s=fs(),{user:l,isAuthenticated:d}=si(),[C,T]=Z.useState(!1),[b,u]=Z.useState(!1),[x,f]=Z.useState(""),y=async()=>{if(!d){zt.error("Please login to start consultation"),s("/login");return}if(!r){zt.error("Only doctors can create meetings. Please ask the doctor for a meeting code.");return}try{T(!0);const _=await pE(l._id,l.name),m=await w0(_);if(m&&m.roomId){const k=m.roomId;s(`/doctor/consultation/${k}/${l._id}`),zt.success("Consultation started successfully!")}else throw new Error("Failed to create meeting")}catch(_){console.error("Failed to start consultation:",_),zt.error("Failed to start consultation. Please try again.")}finally{T(!1)}},E=async()=>{if(!d){zt.error("Please login to join consultation"),s("/login");return}if(!x.trim()){zt.error("Please enter a consultation code");return}try{u(!0),s(r?`/doctor/consultation/${x}/patient_waiting`:`/consultation/${x}/${e}`),zt.success("Joining consultation...")}catch(_){console.error("Failed to join consultation:",_),zt.error("Failed to join consultation")}finally{u(!1)}};return o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[o.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Video Consultation"}),o.jsxs("p",{className:"text-blue-700 text-sm mb-4",children:["Connect with ",t," via video call. Make sure you have a stable internet connection and allow camera/microphone access."]}),o.jsxs("div",{className:"space-y-3",children:[r?o.jsx("button",{onClick:y,disabled:C,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Creating Meeting...":"Start Video Consultation"}):o.jsxs("div",{className:"text-center p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[o.jsxs("p",{className:"text-yellow-800 text-sm mb-2",children:[o.jsx("strong",{children:"Note:"})," Only doctors can create meetings"]}),o.jsx("p",{className:"text-yellow-700 text-xs",children:"Please ask the doctor to start the consultation and provide you with a meeting code."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:x,onChange:_=>f(_.target.value),placeholder:r?"Enter meeting code to join":"Enter meeting code from doctor",className:"flex-1 px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("button",{onClick:E,disabled:b||!x.trim(),className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Joining...":"Join"})]})]}),o.jsxs("div",{className:"mt-4 text-xs text-blue-600",children:[o.jsx("p",{children:" Ensure stable internet connection"}),o.jsx("p",{children:" Allow camera and microphone access"}),o.jsx("p",{children:" Find a quiet, private space"}),o.jsx("p",{children:" Meeting codes are generated automatically when starting a consultation"})]})]})},BB=()=>{const{slug:e}=bl(),t=fs(),{user:r,isAuthenticated:s}=si(),{allDoctors:l,loading:d,updateDoctorRating:C}=ps(),[T,b]=Z.useState(null),[u,x]=Z.useState(!1),[f,y]=Z.useState("video"),{addDoctorRating:E,updateDoctorRating:_,deleteDoctorRating:m}=zw();Z.useEffect(()=>{window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},[e]),Z.useEffect(()=>{if(l&&l.length>0){const N=e.split("-").pop(),R=l.find(S=>S._id===N);R&&b(R)}},[l,e]);const k=()=>{t(`/doctor/book/${e}`)},w=({rating:N})=>{const R=S=>{b(p=>({...p,rating:S})),C(T._id,S)};E({rating:N},T._id,R),x(!1)},U=({rating:N})=>{const R=S=>{b(p=>({...p,rating:S})),C(T._id,S)};_({rating:N},T._id,R),x(!1)},g=()=>{const N=R=>{b(S=>({...S,rating:R})),C(T._id,R)};m(T._id,N),x(!1)};if(d)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),o.jsx("p",{className:"text-emerald-700",children:"Loading doctor profile..."})]})});if(!T)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-emerald-700 text-lg",children:"Doctor not found."}),o.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Go Home"})]})});const A=N=>Array.isArray(N)?N.join(", "):N||"General Medicine",P=N=>N&&typeof N=="object"?N.average||0:N||0,z=N=>N&&typeof N=="object"&&N.count||0;return o.jsx("div",{className:"min-h-screen bg-emerald-50 py-16 px-4",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"text-center lg:text-left",children:[o.jsx("img",{src:T.profilePicture||`https://ui-avatars.com/api/?name=${encodeURIComponent(T.name)}&background=random`,alt:T.name,className:"w-32 h-32 rounded-full object-cover border-4 border-emerald-100 shadow-lg mx-auto lg:mx-0 mb-4"}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-2",children:T.name}),o.jsx("p",{className:"text-emerald-700 text-lg mb-2",children:A(T.speciality)}),o.jsx("p",{className:"text-gray-600 mb-2",children:T.mainDegree}),o.jsxs("div",{className:"flex items-center justify-center lg:justify-start space-x-2",children:[o.jsx("span",{className:"text-yellow-500",children:""}),o.jsx("span",{className:"font-medium",children:P(T.rating)}),o.jsxs("span",{className:"text-gray-500",children:["(",z(T.rating)," reviews)"]})]}),o.jsx(A2,{trigger:o.jsx("button",{className:"px-3 mt-2 py-2 bg-yellow-500 text-white rounded",children:"Add Rating"}),showActionButtons:!0,mode:"rating-only",onSubmit:w,onUpdate:U,onDelete:g,open:u,onOpenChange:x,title:"Rate this Service",description:"Tap the stars to leave a quick rating",submitLabel:"Add Rating"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-emerald-700 mb-3",children:"Professional Information"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Experience:"}),o.jsxs("span",{className:"font-medium",children:[T.experience||0," years"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"PMDC Number:"}),o.jsx("span",{className:"font-medium",children:T.pmdcNumber||"Not specified"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Status:"}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${T.status==="verified"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:T.status||"Pending"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-emerald-700 mb-3",children:"Contact Information"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-gray-600",children:""}),o.jsx("span",{children:T.email})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-gray-600",children:""}),o.jsx("span",{children:T.phone})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-gray-600",children:""}),o.jsx("span",{children:T.hospital||"Not specified"})]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[o.jsx("h3",{className:"font-semibold text-blue-800 mb-3",children:"Consultation Fee"}),o.jsxs("p",{className:"text-2xl font-bold text-blue-600 mb-2",children:["Rs. ",T.fee||"Not specified"]}),o.jsxs("div",{className:"text-sm text-blue-700",children:[o.jsx("p",{children:" Video consultation available"}),o.jsx("p",{children:" In-person appointments"}),o.jsx("p",{children:" Professional medical advice"})]})]}),o.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[o.jsx("h3",{className:"font-semibold text-emerald-800 mb-3",children:"Availability"}),o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx("span",{className:`w-3 h-3 rounded-full ${T.availability?"bg-green-500":"bg-red-500"}`}),o.jsx("span",{className:T.availability?"text-green-700":"text-red-700",children:T.availability?"Available for consultations":"Currently unavailable"})]}),T.availability&&o.jsx("button",{onClick:k,className:"w-full bg-emerald-600 text-white py-2 px-4 rounded-lg hover:bg-emerald-700 transition-colors",children:"Book Appointment"})]})]})]})}),T.availability&&o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-emerald-800 mb-6 text-center",children:"Start Video Consultation"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700",children:"Why Choose Video Consultation?"}),o.jsxs("ul",{className:"space-y-2 text-gray-600",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-emerald-500 mt-1",children:""}),o.jsx("span",{children:"Consult from the comfort of your home"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-emerald-500 mt-1",children:""}),o.jsx("span",{children:"No travel time or waiting in queues"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-emerald-500 mt-1",children:""}),o.jsx("span",{children:"Secure and private consultation"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-emerald-500 mt-1",children:""}),o.jsx("span",{children:"Easy follow-up appointments"})]})]}),o.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[o.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Before Your Consultation"}),o.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[o.jsx("li",{children:" Ensure stable internet connection"}),o.jsx("li",{children:" Find a quiet, private space"}),o.jsx("li",{children:" Have your medical history ready"}),o.jsx("li",{children:" Test your camera and microphone"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700",children:"Ready to Start?"}),s?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-yellow-800 text-sm",children:[o.jsx("strong",{children:"Note:"})," The doctor will start the video consultation and provide you with a meeting code to join."]})}),o.jsx(mE,{doctorId:T._id,doctorName:T.name,isDoctor:!1})]}):o.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg text-center",children:[o.jsx("p",{className:"text-gray-600 mb-4",children:"Please login to start a video consultation"}),o.jsx("button",{onClick:()=>t("/login"),className:"bg-emerald-600 text-white py-2 px-6 rounded-lg hover:bg-emerald-700 transition-colors",children:"Login Now"})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-emerald-800 mb-6",children:"Additional Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 border-b border-emerald-200 pb-2",children:"Personal Details"}),o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Gender:"}),o.jsx("span",{className:"font-medium",children:T.gender||"Not specified"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Religion:"}),o.jsx("span",{className:"font-medium",children:T.religion||"Not specified"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"CNIC:"}),o.jsx("span",{className:"font-medium",children:T.cnic||"Not specified"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 border-b border-emerald-200 pb-2",children:"Address"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("p",{className:"text-gray-600 mb-2",children:"Full Address:"}),o.jsx("p",{className:"text-gray-800",children:T.fullAddress||"Address not specified"})]})]})]}),o.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:"Verification Status"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:`w-4 h-4 rounded-full ${T.pmdcVerified?"bg-green-500":"bg-red-500"}`}),o.jsxs("span",{className:"text-sm",children:["PMDC Verification:"," ",T.pmdcVerified?"Verified":"Not Verified"]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:`w-4 h-4 rounded-full ${T.hospitalVerified?"bg-green-500":"bg-red-500"}`}),o.jsxs("span",{className:"text-sm",children:["Hospital Verification:"," ",T.hospitalVerified?"Verified":"Not Verified"]})]})]})]})]})]})})},zB=()=>{const{allDoctors:e}=ps(),{slug:t}=bl(),r=tl(),s=new URLSearchParams(r.search),l=(s.get("city")||"").toLowerCase(),T=(()=>{const x={};return qw.forEach(f=>{const y=f.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/\//g,"-").replace(/&/g,"and");x[y]=f}),x})()[t],b=e?.filter(x=>T?Array.isArray(x.speciality)?x.speciality.some(f=>f&&f.toLowerCase()===T.toLowerCase()):typeof x.speciality=="string"?x.speciality.toLowerCase()===T.toLowerCase():!1:!1)||[],u=l?b.filter(x=>{const f=(x.city||x.fullAddress||"").toString().toLowerCase();return x.city?x.city.toLowerCase()===l:f.includes(l)}):b;return console.log("Filtered Doctors:",b),T?u.length===0?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"No Doctors Found"}),o.jsxs("p",{className:"text-emerald-700 text-lg",children:["No doctors found for ",T,l?` in ${s.get("city")}`:"","."]}),o.jsx("p",{className:"text-emerald-600 text-sm mt-2",children:"Please check back later or contact us for assistance."})]})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsxs("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:[T," Doctors"]}),o.jsxs("p",{className:"text-center text-emerald-600 mb-8",children:["Found ",u.length," doctor",u.length!==1?"s":""," in ",T,l?`, City: ${s.get("city")}`:""]}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:u.map((x,f)=>o.jsx($m,{doctor:x},x._id||f))})]}):o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Invalid Specialty"}),o.jsxs("p",{className:"text-emerald-700 text-lg",children:['The requested specialty "',t.replace(/-/g," "),'" was not found.']})]})})},UB=()=>{const{allDoctors:e}=ps();return o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:"All Doctors"}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:e.map((t,r)=>o.jsx($m,{doctor:t},r))})]})},FB=()=>{const{allPublicHospital:e,loading:t}=to();return t?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):!e||e.length===0?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"No Public Hospitals"}),o.jsx("p",{className:"text-emerald-700 text-lg",children:"No public hospitals available at the moment."})]})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:"All Public Hospitals"}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:e.map(r=>o.jsx(O2,{hospital:r},r._id))})]})},HB=()=>o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:"All Labs"}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:$w.map((e,t)=>o.jsx(M2,{lab:e},t))})]}),VB=()=>o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:"All Medicines"}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:Ww.map((e,t)=>o.jsx(j2,{medicine:e},t))})]}),qB=()=>{const{allPublicHospital:e}=to(),{slug:t}=bl(),r=e.filter(s=>s.city?.toLowerCase().replace(/\s+/g,"-")===t);return Z.useEffect(()=>{window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},[t]),r?o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center",children:"All Public Hospitals"}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:r.map(s=>o.jsx(O2,{hospital:s},s._id))})]}):o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Hospital Not Found"}),o.jsx("p",{className:"text-emerald-700 text-lg",children:"The hospital profile you are looking for does not exist."})]})})},WB=()=>{const{slug:e}=bl(),{allPublicHospital:t}=to(),r=e.split("-").pop(),s=t.find(d=>d._id===r),l=Array.isArray(s?.doctors)?s.doctors:[];return!s||l.length===0?o.jsx("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4 flex items-center justify-center",children:o.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No doctors found for this hospital."})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsxs("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize",children:["Doctors at ",s.name," (",l.length,")"]}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:l.map(d=>o.jsx($m,{doctor:d},d._id))})]})},$B=()=>{const{slug:e}=bl(),t=$w.filter(r=>r.slug?r.slug===e:r.city.toLowerCase().replace(/\s+/g,"-")===e||r.name.toLowerCase().replace(/\s+/g,"-")===e);return t.length===0?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"No Labs Found"}),o.jsx("p",{className:"text-emerald-700 text-lg",children:"No labs found for this area."})]})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsxs("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize",children:[e.replace(/-/g," ")," Labs"]}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:t.map((r,s)=>o.jsx(M2,{lab:r},s))})]})},ZB=()=>{const{slug:e}=bl(),t=Ww.filter(r=>(r.slug?r.slug===e:r.name.toLowerCase().replace(/\s+/g,"-")===e)||r.type.toLowerCase().replace(/\s+/g,"-")===e);return t.length===0?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"No Medicines Found"}),o.jsx("p",{className:"text-emerald-700 text-lg",children:"No medicines found for this type."})]})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:[o.jsxs("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize",children:[e.replace(/-/g," ")," Medicines"]}),o.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:t.map((r,s)=>o.jsx(j2,{medicine:r},s))})]})},GB=()=>{const{slug:e}=bl(),t=fs(),{user:r,isAuthenticated:s}=si(),{allDoctors:l,loading:d}=ps(),[C,T]=Z.useState({date:"",time:"",symptoms:"",notes:""}),[b,u]=Z.useState(!1),[x,f]=Z.useState("in-person"),[y,E]=Z.useState(null),{doctor:_}=ps();Z.useEffect(()=>{if(l&&l.length>0){const z=e.split("-").pop(),N=l.find(R=>R._id===z);N&&E(N)}},[l,e]),Z.useEffect(()=>{window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},[e]);const m=z=>{T({...C,[z.target.name]:z.target.value})},{checkDoctorAvailabilitySlots:k,loading:w,userBookingAppointments:U,slots:g}=I0();Z.useEffect(()=>{y?._id&&C.date&&k(y._id,C.date).catch(()=>{})},[y?._id,C.date]);const A=z=>{if(!z||typeof z!="string")return z||"";const N=z.split(":"),R=parseInt(N[0],10),S=N[1]||"00";if(Number.isNaN(R))return z;const p=R>=12?"PM":"AM";return`${R%12===0?12:R%12}:${S} ${p}`},P=async z=>{if(z.preventDefault(),!s){zt.error("Please login to book an appointment"),t("/login");return}try{await U({doctorId:y._id,date:C.date,time:C.time,fee:y.fee,symptoms:C.symptoms,notes:C.notes}),u(!0)}catch{}};return d?o.jsx("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),o.jsx("p",{className:"text-emerald-700",children:"Loading doctor information..."})]})}):y?o.jsx("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-4xl w-full",children:[o.jsxs("h2",{className:"text-2xl font-bold text-emerald-800 mb-6 text-center",children:["Book Appointment with ",y.name]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("img",{src:y.profilePicture||`https://ui-avatars.com/api/?name=${encodeURIComponent(y.name)}&background=random`,alt:y.name,className:"w-24 h-24 rounded-full object-cover border-4 border-emerald-100 shadow mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-emerald-800 mb-2",children:y.name}),o.jsx("p",{className:"text-emerald-700 text-sm mb-2",children:Array.isArray(y.speciality)?y.speciality.join(", "):y.speciality}),o.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:[y.experience||0," years experience"]}),o.jsxs("p",{className:"text-green-600 font-semibold",children:["Rs. ",y.fee||"Not specified"]}),y.mainDegree&&o.jsx("p",{className:"text-gray-600 text-sm",children:y.mainDegree})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:"Choose Consultation Type"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"consultationType",value:"in-person",checked:x==="in-person",onChange:z=>f(z.target.value),className:"text-emerald-600 focus:ring-emerald-500"}),o.jsx("span",{className:"text-gray-700",children:"In-Person Consultation"})]}),o.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"consultationType",value:"video",checked:x==="video",onChange:z=>f(z.target.value),className:"text-emerald-600 focus:ring-emerald-500"}),o.jsx("span",{className:"text-gray-700",children:"Video Consultation"})]})]})]}),x==="video"?o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[o.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Video Consultation"}),o.jsxs("p",{className:"text-blue-700 text-sm mb-4",children:["Connect with ",y.name," via video call. Make sure you have a stable internet connection and allow camera/microphone access."]}),s||_?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-yellow-800 text-sm",children:[o.jsx("strong",{children:"Note:"})," The doctor will start the video consultation and provide you with a meeting code to join."]})}),o.jsx(mE,{doctorId:y._id,doctorName:y.name,isDoctor:!1})]}):o.jsx("button",{onClick:()=>t("/login"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Login to Join Video Consultation"})]}):o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:"Book In-Person Appointment"}),b?o.jsx("div",{className:"text-green-700 text-center font-semibold p-4 bg-green-50 rounded-lg",children:"Appointment booked successfully!"}):o.jsxs("form",{onSubmit:P,className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{name:"date",type:"date",value:C.date,onChange:m,required:!0,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("button",{type:"button",onClick:()=>y?._id&&C.date&&k(y._id,C.date),className:"whitespace-nowrap px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 text-sm",children:w?.checkDoctorAvailabilitySlots?"Checking...":"Check Availability"})]}),o.jsx("input",{name:"time",type:"time",value:C.time,onChange:m,required:!0,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),C.date&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-medium text-emerald-700",children:"Available Slots"}),w?.checkDoctorAvailabilitySlots?o.jsx("div",{className:"text-gray-600 text-sm",children:"Loading slots..."}):Array.isArray(g)&&g.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((z,N)=>{const R=typeof z=="string"?z:z?.time||z?.start||z?.slot||"";return o.jsx("button",{type:"button",onClick:()=>T({...C,time:R}),className:`px-3 py-1 rounded border text-sm transition-colors ${C.time===R?"bg-emerald-600 text-white border-emerald-600":"bg-white text-gray-700 hover:bg-emerald-50 border-gray-300"}`,children:A(R)},`${R}-${N}`)})}):o.jsx("div",{className:"text-gray-600 text-sm",children:"No slots available for the selected date."})]}),o.jsx("textarea",{name:"symptoms",placeholder:"Describe your symptoms (optional)",value:C.symptoms,onChange:m,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("textarea",{name:"notes",placeholder:"Additional notes (optional)",value:C.notes,onChange:m,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-2 rounded hover:bg-emerald-700 transition-colors",children:w?.userBookingAppointments?"Booking...":"Book Appointment"})]})]})]})]}),o.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-3",children:"Important Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-emerald-700 mb-2",children:"For Video Consultations:"}),o.jsxs("ul",{className:"space-y-1",children:[o.jsx("li",{children:" Ensure stable internet connection"}),o.jsx("li",{children:" Find a quiet, private space"}),o.jsx("li",{children:" Have your medical history ready"}),o.jsx("li",{children:" Test your camera and microphone"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-emerald-700 mb-2",children:"For In-Person Appointments:"}),o.jsxs("ul",{className:"space-y-1",children:[o.jsx("li",{children:" Arrive 10 minutes early"}),o.jsx("li",{children:" Bring your ID and medical records"}),o.jsx("li",{children:" Wear a mask if required"}),o.jsx("li",{children:" Follow clinic safety protocols"})]})]})]})]})]})}):o.jsx("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-emerald-700 text-lg",children:"Doctor not found."}),o.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Go Home"})]})})},YB=()=>{const e=fs(),{user:t,loading:r,signOut:s}=si(),[l,d]=Z.useState(!1),{usersAppointments:C,loading:T,userAppointments:b,userCancelAppointment:u}=I0();Wt.useEffect(()=>{b().catch(()=>{})},[]);const[x,f]=Z.useState({name:t?.name||"",email:t?.email||"",cnic:t?.cnic||""}),y=k=>{const{name:w,value:U}=k.target;f(w==="cnic"?g=>({...g,[w]:Bm(U)}):g=>({...g,[w]:U}))},E=async()=>{try{zt.success("Profile updated successfully!"),d(!1)}catch{zt.error("Failed to update profile")}},_=()=>{f({name:t?.name||"",email:t?.email||"",cnic:t?.cnic||""}),d(!1)},m=()=>{s(e)};return t?o.jsx("div",{className:"min-h-screen bg-emerald-50 py-16 px-4",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800",children:"User Profile"}),o.jsxs("div",{className:"flex space-x-3",children:[l?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:E,disabled:r,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:r?"Saving...":"Save Changes"}),o.jsx("button",{onClick:_,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Edit Profile"}),o.jsx("button",{onClick:()=>e("/change-password?type=user"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Change Password"})]}),o.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2",children:"Personal Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Yr,{label:"Full Name",name:"name",value:x.name,onChange:y,disabled:!l,required:!0}),o.jsx(Yr,{label:"Email Address",type:"email",name:"email",value:x.email,onChange:y,disabled:!l,required:!0}),o.jsx(Yr,{label:"CNIC",name:"cnic",value:x.cnic,onChange:y,disabled:!l,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,required:!0})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2",children:"Account Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User ID"}),o.jsx("p",{className:"text-gray-900 font-mono text-sm",children:t._id})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),o.jsx("p",{className:"text-gray-900 capitalize",children:t.role})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Member Since"}),o.jsx("p",{className:"text-gray-900",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():""})]})]})]})]}),o.jsxs("div",{className:"mt-12",children:[o.jsx("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2 mb-6",children:"Your Appointments"}),T?.userAppointments?o.jsx("div",{className:"text-gray-600",children:"Loading your appointments..."}):C?.length?o.jsx("div",{className:"space-y-3",children:C.map(k=>o.jsx(NR,{appointment:k,role:"user",showCancel:k.status!=="cancelled",onCancel:()=>u(k._id)},k._id))}):o.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg text-center",children:[o.jsx("p",{className:"text-gray-600 mb-1",children:"No appointments yet."}),o.jsx("p",{className:"text-sm text-gray-500",children:"Book your first appointment from the doctor page."})]})]})]})})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg text-emerald-700",children:"Please login to view your profile"})})})},KB=()=>{const{meetingId:e,doctorId:t}=bl(),r=fs(),{user:s,isAuthenticated:l}=si(),[d,C]=Z.useState(!1),[T,b]=Z.useState(null),[u,x]=Z.useState(!0);Z.useEffect(()=>{if(!l){zt.error("Please login to join consultation"),r("/login");return}if(!e){zt.error("Invalid consultation link"),r("/");return}f()},[e,l]);const f=async()=>{try{x(!0),b({meetingId:e,doctorId:t,patientId:s?._id,patientName:s?.name,startTime:new Date().toISOString()}),C(!0)}catch(E){console.error("Failed to initialize consultation:",E),zt.error("Failed to start consultation"),r("/")}finally{x(!1)}},y=()=>{C(!1),zt.info("Consultation ended"),r("/")};return u?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{children:"Initializing consultation..."})]})}):T?o.jsx("div",{className:"h-screen",children:d&&o.jsx(fE,{meetingId:T.meetingId,doctorId:T.doctorId,userId:T.patientId,userName:T.patientName,isPatient:!0,onLeave:y})}):o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("p",{children:"Failed to load consultation"}),o.jsx("button",{onClick:()=>r("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go Home"})]})})},F1=()=>{const{meetingId:e,patientId:t}=bl(),r=fs(),{user:s,isAuthenticated:l}=si(),[d,C]=Z.useState(!1),[T,b]=Z.useState(null),[u,x]=Z.useState(!0),{doctor:f}=ps();Z.useEffect(()=>{if(!f){zt.error("Please login to host consultation"),r("/doctor/login");return}(!e||e==="new")&&console.log("Doctor creating new consultation"),y()},[e,l]);const y=async()=>{try{x(!0),b({meetingId:e,doctorId:s?._id,doctorName:s?.name,patientId:t,startTime:new Date().toISOString()}),C(!0)}catch(_){console.error("Failed to initialize consultation:",_),zt.error("Failed to start consultation"),r("/")}finally{x(!1)}},E=()=>{C(!1),zt.info("Consultation ended"),r("/doctor/dashboard")};return u?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{children:"Initializing consultation..."})]})}):T?o.jsx("div",{className:"h-screen",children:d&&o.jsx(fE,{meetingId:T.meetingId,doctorId:T.doctorId,userId:T.doctorId,userName:T.doctorName,isPatient:!1,onLeave:E})}):o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("p",{children:"Failed to load consultation"}),o.jsx("button",{onClick:()=>r("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go Home"})]})})},QB=Tc({email:Xr().email("Invalid email"),password:Xr().min(6,"Password must be at least 6 characters")}),XB=()=>{const{login:e,loading:t,error:r}=cc(),s=fs(),{register:l,handleSubmit:d,formState:{errors:C}}=Rl({resolver:El(QB)}),T=async b=>{await e(b,s)};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"text-4xl mb-2",children:""}),o.jsx("h1",{className:"text-3xl font-bold text-emerald-800",children:"Admin Login"}),o.jsx("p",{className:"text-emerald-600",children:"Access the admin dashboard"})]}),o.jsxs("form",{onSubmit:d(T),className:"space-y-4",children:[o.jsx(Yr,{label:"Email",name:"email",type:"email",...l("email"),error:C.email?.message,autoComplete:"email",required:!0}),o.jsx(Yr,{label:"Password",name:"password",type:"password",...l("password"),error:C.password?.message,autoComplete:"current-password",required:!0}),o.jsx("button",{type:"submit",className:"w-full py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition disabled:opacity-50",disabled:t.login,children:t.login?"Signing in...":"Sign In"})]})]})})},JB=({statistics:e})=>{const{hospitalStatistics:t}=cc();return o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:k6(e,t).map((r,s)=>o.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full ${r.bgColor} ${r.textColor}`,children:o.jsx("span",{className:"text-lg md:text-xl",children:r.icon})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-xs font-medium text-gray-600",children:r.title}),o.jsx("p",{className:"text-xl font-semibold text-gray-900",children:r.count||0})]})]})},s))})},ez=({label:e,value:t})=>o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[e,":"]}),o.jsx("span",{className:"text-sm text-gray-900",children:t||"Not provided"})]}),cp=({condition:e,trueLabel:t,falseLabel:r})=>o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e?t:r}),tz=({status:e})=>{const t={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t[e]||"bg-gray-100 text-gray-800"}`,children:e?.charAt(0).toUpperCase()+e?.slice(1)||"Unknown"})},nz=({isRejected:e,isApproved:t,isOpen:r,doctor:s,onClose:l,onApprove:d,onReject:C,handleDoctorReject:T,onToggleActive:b,onProfileImageUpload:u})=>{const[x,f]=Z.useState(null),[y,E]=Z.useState(!1),[_,m]=Z.useState(""),[k,w]=Z.useState(s.documents||[]),[U,g]=Z.useState(!1),{DoctorDocumentUpload:A,doctorProfilePicture:P,updateDoctorDetails:z,doctorAction:N}=cc(),R=Wt.useRef(),S=Wt.useRef(),[p,D]=Z.useState(null),[O,j]=Z.useState(!1),[I,H]=Z.useState({}),[F,$]=Z.useState(!1);Wt.useEffect(()=>{w(s.documents||[]),H({name:s.name||"",speciality:Array.isArray(s.speciality)?s.speciality:[s.speciality||""],phone:s.phone||"",mainDegree:s.mainDegree||"",fullAddress:s.fullAddress||"",hospital:s.hospital||"",experience:s.experience||"",fee:s.fee||"",availability:s.availability||!1,pmdcNumber:s.pmdcNumber||"",cnic:s.cnic||"",email:s.email||"",gender:s.gender||""})},[s.documents,s]);const q=(Ge,He)=>{H(Te=>({...Te,[Ge]:He}))},se=async()=>{$(!0);try{const Ge=I.speciality.filter(Te=>Te.trim()!==""),He={...I,speciality:Ge,experience:parseInt(I.experience)||0,fee:parseInt(I.fee)||0};z(s._id,He),j(!1)}catch(Ge){console.log(Ge)}finally{$(!1)}},J=()=>{j(!1),H({name:s.name||"",speciality:Array.isArray(s.speciality)?s.speciality:[s.speciality||""],phone:s.phone||"",mainDegree:s.mainDegree||"",fullAddress:s.fullAddress||"",hospital:s.hospital||"",hospitalVerified:!!s.hospitalVerified,experience:s.experience||"",fee:s.fee||"",availability:s.availability||!1,pmdcNumber:s.pmdcNumber||"",cnic:s.cnic||"",email:s.email||"",gender:s.gender||""})},be=async Ge=>{Ge.preventDefault();const He=Ge.target.files[0];if(He){g(!0);try{const Te=URL.createObjectURL(He),dt=new FormData;dt.append("documents",He),await A(dt,s._id)}catch(Te){console.error("Document upload failed:",Te)}finally{g(!1)}}},Re=async()=>{s.isActive?(console.log(s.isActive),await N(s._id,{action:!1})):await N(s._id,{action:!0})},Se=async Ge=>{const He=Ge.target.files[0];if(He){const Te=URL.createObjectURL(He);D(Te);const dt=new FormData;dt.append("image",He),await P(s._id,dt)}};if(!r||!s)return null;const me=Ge=>PR(Ge,"LLL"),Ce=Ge=>{if(console.log("openImageViewer called with:",Ge),!Ge){console.error("No image URL provided");return}f(Ge),E(!0),console.log("Image viewer state set:",{selectedImage:Ge,isOpen:!0})},Be=()=>{E(!1),f(null)};Wt.useEffect(()=>{const Ge=He=>{He.key==="Escape"&&y&&Be()};return y&&document.addEventListener("keydown",Ge),()=>{document.removeEventListener("keydown",Ge)}},[y]);const _e=(Ge,He)=>o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:Ge}),o.jsx("div",{className:"space-y-3",children:He.map(({key:Te,label:dt,value:yt})=>o.jsx(ez,{label:dt,value:yt},Te))})]}),Ye=[{key:"created",label:"Created",value:me(s.createdAt)},{key:"updated",label:"Updated",value:me(s.updatedAt)},...s.PaymentCompleted?[{key:"payment",label:"Payment Completed",value:me(s.PaymentCompleted)}]:[]],Qe=[{key:"avg",label:"Average Rating",value:s.rating?.average?`${s.rating.average}/5`:"No ratings"},{key:"reviews",label:"Total Reviews",value:s.rating?.count||0}];return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center relative overflow-hidden",children:[p||s.profilePicture||s.profileImageUrl?o.jsx("img",{src:p||s.profilePicture||s.profileImageUrl,alt:"Profile",className:"h-12 w-12 object-cover rounded-full",onError:Ge=>{Ge.currentTarget.src=""}}):o.jsx("span",{className:"text-emerald-600 font-medium text-lg",children:s.name?.split(" ")?.map(Ge=>Ge[0])?.join("")||"DR"}),o.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 shadow hover:bg-gray-100",title:"Edit Profile Image",onClick:()=>S.current&&S.current.click(),children:o.jsx(B6,{})}),o.jsx("input",{type:"file",accept:"image/*",ref:S,className:"hidden",onChange:Se})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.name||"Unknown Doctor"}),o.jsx("p",{className:"text-sm text-gray-500",children:s.email||"No email"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>j(!O),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${O?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:O?"View Mode":"Edit Mode"}),o.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:o.jsx(sx,{})})]})]}),o.jsxs("div",{className:"px-6 py-4 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[O?o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(uE,{values:I,errors:{},include:{password:!1,confirmPassword:!1,agreement:!1,city:!1,hospital:!1,hospitalVerified:!1},onInputChange:Ge=>He=>{const Te=He?.target?.type==="checkbox"?He.target.checked:He?.target?.value;q(Ge,Te)},onDropdownChange:(Ge,He)=>q(Ge,He),onSpecialtyChange:Ge=>q("speciality",Ge),onCnicChange:Ge=>{const He=Ge?.target?.value||"";q("cnic",He)}}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"availability",checked:I.availability||!1,onChange:Ge=>q("availability",Ge.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"availability",className:"text-sm text-gray-700",children:"Available for appointments"})]})]})}):o.jsxs(o.Fragment,{children:[_e("Personal Information",C6(s)),_e("Professional Information",T6(s))]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Verification Status"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Status:"}),o.jsx(tz,{status:s.status})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"PMDC Verified:"}),o.jsx(cp,{condition:s.pmdcVerified,trueLabel:"Verified",falseLabel:"Not Verified"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Hospital Verified:"}),o.jsx(cp,{condition:s.hospitalVerified,trueLabel:"Verified",falseLabel:"Not Verified"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Availability:"}),o.jsx(cp,{condition:s.availability,trueLabel:"Available",falseLabel:"Not Available"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Active:"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(cp,{condition:s.isActive,trueLabel:"Active",falseLabel:"Inactive"}),o.jsx("button",{type:"button",className:"ml-2 px-2 py-1 text-xs font-medium text-blue-600 bg-blue-100 rounded hover:bg-blue-200",onClick:Re,title:"Toggle Active Status",children:"Edit"})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Blocked:"}),o.jsx(cp,{condition:!s.isBlocked,trueLabel:"Not Blocked",falseLabel:"Blocked"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:["Documents (",k?.length||0,")"]}),k?.length?k.map((Ge,He)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-8 w-8 bg-emerald-100 rounded flex items-center justify-center",children:o.jsx(z6,{})}),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Document ",He+1]})]}),o.jsx("button",{onClick:()=>{Ce(Ge.documentUrl)},className:"text-emerald-600 hover:text-emerald-800 text-sm font-medium",children:"View"})]},He)):o.jsx("p",{className:"text-sm text-gray-500",children:"No documents uploaded"}),o.jsx("input",{id:"documents",type:"file",name:"documents",accept:"image/*",onChange:be,className:"hidden",ref:R}),o.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",onClick:()=>R.current&&R.current.click(),disabled:U,children:U?"Uploading...":"Add Documents"}),_&&o.jsx("p",{className:"text-sm text-red-600",children:_})]}),_e("Timestamps",Ye),_e("Rating",Qe)]}),s.verificationNotes&&o.jsxs("div",{className:"px-6 pb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Verification Notes"}),o.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.verificationNotes})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[O&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:J,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{onClick:se,className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",disabled:F,children:F?"Saving...":"Save Changes"})]}),o.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"}),!e&&o.jsx("button",{onClick:()=>T(s._id),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Reject"}),!t&&o.jsx("button",{onClick:()=>d(s._id),className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",children:"Approve"})]})]}),y&&x&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60]",onClick:Be,children:o.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] mx-4",onClick:Ge=>Ge.stopPropagation(),children:[o.jsx("button",{onClick:Be,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2",children:o.jsx(sx,{})}),o.jsx("button",{onClick:()=>{const Ge=document.createElement("a");Ge.href=x,Ge.download=`document_${Date.now()}.jpg`,Ge.click()},className:"absolute top-4 right-16 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2",children:o.jsx(U6,{})}),o.jsx("img",{src:x,alt:"Document",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onError:Ge=>{Ge.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCAxMDBDNTAgNzIuODM4IDcyLjgzOCA1MCAxMDAgNTBDMTI3LjE2MiA1MCAxNTAgNzIuODM4IDE1MCAxMDBDMTUwIDEyNy4xNjIgMTI3LjE2MiAxNTAgMTAwIDE1MEM3Mi44MzggMTUwIDUwIDEyNy4xNjIgNTAgMTAwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDEyNUMxMTMuODA3IDEyNSAxMjUgMTEzLjgwNyAxMjUgMTAwQzEyNSA4Ni4xOTMgMTEzLjgwNyA3NSAxMDAgNzVDODYuMTkzIDc1IDc1IDg2LjE5MyA3NSAxMEM3NSAxMTMuODA3IDg2LjE5MyAxMjUgMTAwIDEyNVoiIGZpbGw9IiM2QjcyNzkiLz4KPHN2Zz4K",Ge.target.alt="Image not available"}}),o.jsx("div",{className:"absolute bottom-4 left-4 text-white text-sm bg-black bg-opacity-50 px-3 py-2 rounded-lg",children:"Click outside or press ESC to close"})]})})]})},rz=({label:e,value:t})=>o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[e,":"]}),o.jsx("span",{className:"text-sm text-gray-900",children:t||"Not provided"})]}),Vv=({condition:e,trueLabel:t,falseLabel:r})=>o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e?t:r}),az=({status:e})=>{const t={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t[e]||"bg-gray-100 text-gray-800"}`,children:e?.charAt(0).toUpperCase()+e?.slice(1)||"Unknown"})},sz=({isRejected:e,isOpen:t,hospital:r,onClose:s,onApprove:l,onReject:d,handleHospitalReject:C})=>{const[T,b]=Z.useState(null),[u,x]=Z.useState(!1),[f,y]=Z.useState(""),[E,_]=Z.useState(r.documents||[]),{loading:m,hospitalProfilePicture:k,HospitalDocumentUpload:w}=cc();Wt.useRef();const U=Wt.useRef(),[g,A]=Z.useState(null);console.log(r,"hossssssssssssssssspital"),Wt.useEffect(()=>{_(r.documents||[])},[r.documents,r]);const P=async j=>{const I=j.target.files[0];if(I){const H=URL.createObjectURL(I);A(H);const F=new FormData;F.append("image",I),await k(r._id,F)}};if(!t||!r)return null;const z=j=>PR(j,"LLL"),N=()=>{x(!1),b(null)};Wt.useEffect(()=>{const j=I=>{I.key==="Escape"&&u&&N()};return u&&document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}},[u]);const R=[{key:"name",label:"Hospital Name",value:r.name},{key:"email",label:"Email",value:r.email},{key:"phone",label:"Phone",value:r.phone},{key:"cnic",label:"CNIC",value:r.cnic},{key:"address",label:"Address",value:r.address},{key:"city",label:"City",value:r.city}],S=[{key:"type",label:"Hospital Type",value:r.hospitalType},{key:"category",label:"Category",value:r.category},{key:"license",label:"License Number",value:r.licenseNumber},{key:"established",label:"Established Year",value:r.establishedYear?`${r.establishedYear}`:"Not specified"},{key:"beds",label:"Total Beds",value:r.totalBeds},{key:"ot",label:"Operation Theaters",value:r.operationTheaters}],p=(j,I)=>o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:j}),o.jsx("div",{className:"space-y-3",children:I.map(({key:H,label:F,value:$})=>o.jsx(rz,{label:F,value:$},H))})]}),D=[{key:"created",label:"Created",value:z(r.createdAt)},{key:"updated",label:"Updated",value:z(r.updatedAt)}],O=[{key:"avg",label:"Average Rating",value:r.rating?.average?`${r.rating.average}/5`:"No ratings"},{key:"reviews",label:"Total Reviews",value:r.rating?.count||0}];return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center relative overflow-hidden",children:[g||r.profilePicture||r.profileImageUrl||r.image?o.jsx("img",{src:g||r.profilePicture||r.profileImageUrl||r.image,alt:"Hospital",className:"h-12 w-12 object-cover rounded-full",onError:j=>{j.currentTarget.src=""}}):o.jsx("span",{className:"text-emerald-600 font-medium text-lg",children:""}),o.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 shadow hover:bg-gray-100",title:"Edit Hospital Image",onClick:()=>U.current&&U.current.click(),children:o.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2H7a2 2 0 01-2-2v-1.586a1 1 0 01.293-.707l9.414-9.414a1 1 0 011.414 0l1.586 1.586a1 1 0 010 1.414l-9.414 9.414A1 1 0 017 19v-1.586z"})})}),o.jsx("input",{type:"file",accept:"image/*",ref:U,className:"hidden",onChange:P})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r.name||"Unknown Hospital"}),o.jsx("p",{className:"text-sm text-gray-500",children:r.email||"No email"})]})]}),o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),o.jsxs("div",{className:"px-6 py-4 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p("Basic Information",R),p("Hospital Information",S),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Verification Status"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Status:"}),o.jsx(az,{status:r.status})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"License Verified:"}),o.jsx(Vv,{condition:r.licenseVerified,trueLabel:"Verified",falseLabel:"Not Verified"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Active:"}),o.jsx(Vv,{condition:r.isActive,trueLabel:"Active",falseLabel:"Inactive"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Blocked:"}),o.jsx(Vv,{condition:!r.isBlocked,trueLabel:"Not Blocked",falseLabel:"Blocked"})]})]})]}),p("Timestamps",D),p("Rating",O)]}),r.verificationNotes&&o.jsxs("div",{className:"px-6 pb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Verification Notes"}),o.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:r.verificationNotes})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[o.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"}),!e&&o.jsx("button",{onClick:()=>C(r._id),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Reject"}),o.jsx("button",{onClick:()=>l(r._id),className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",children:"Approve"})]})]}),u&&T&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60]",onClick:N,children:o.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] mx-4",onClick:j=>j.stopPropagation(),children:[o.jsx("button",{onClick:N,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsx("button",{onClick:()=>{const j=document.createElement("a");j.href=T,j.download=`document_${Date.now()}.jpg`,j.click()},className:"absolute top-4 right-16 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),o.jsx("img",{src:T,alt:"Document",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onError:j=>{j.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCAxMDBDNTAgNzIuODM4IDcyLjgzOCA1MCAxMDAgNTBDMTI3LjE2MiA1MCAxNTAgNzIuODM4IDE1MCAxMDBDMTUwIDEyNy4xNjIgMTI3LjE2MiAxNTAgMTAwIDE1MEM3Mi44MzggMTUwIDUwIDEyNy4xNjIgNTAgMTAwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDEyNUMxMTMuODA3IDEyNSAxMjUgMTEzLjgwNyAxMjUgMTAwQzEyNSA4Ni4xOTMgMTEzLjgwNyA3NSAxMDAgNzVDODYuMTkzIDc1IDc1IDg2LjE5MyA3NSAxMEM3NSAxMTMuODA3IDg2LjE5MyAxMjUgMTAwIDEyNVoiIGZpbGw9IiM2QjcyNzkiLz4KPHN2Zz4K",j.target.alt="Image not available"}}),o.jsx("div",{className:"absolute bottom-4 left-4 text-white text-sm bg-black bg-opacity-50 px-3 py-2 rounded-lg",children:"Click outside or press ESC to close"})]})})]})},iz=({logout:e,navigate:t})=>{const r=()=>{e(),t("/admin/login")};return o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-emerald-600 text-2xl mr-3",children:""}),o.jsx("h1",{className:"text-2xl font-bold text-emerald-800",children:"Admin Dashboard"})]}),o.jsx("div",{className:"flex items-center space-x-4",children:o.jsx("button",{onClick:r,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})})]})})})},Jd=({pendingItems:e,type:t,title:r="",onApprove:s,onReject:l,isRejected:d,isApproved:C,onOpenRejectModal:T,onActivatePayment:b})=>{const[u,x]=Z.useState(null),[f,y]=Z.useState(!1),[E,_]=Z.useState(null),[m,k]=Z.useState(!1),[w,U]=Z.useState(""),[g,A]=Z.useState(1),P=5;Z.useEffect(()=>{A(1)},[e,w]);const z=Z.useMemo(()=>{const H=w.trim().toLowerCase();return H?(e||[]).filter(F=>(F.name||"").toLowerCase().includes(H)):e||[]},[e,w]),N=Math.max(1,Math.ceil(z.length/P)),R=Z.useMemo(()=>{const H=(g-1)*P;return z.slice(H,H+P)},[z,g]);if(!e||e.length===0)return o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("span",{className:"text-4xl mb-4 block",children:t==="doctor"?"":""}),o.jsxs("p",{className:"text-gray-600",children:["No pending ",t," applications to review!"]})]});const S=H=>{t==="doctor"?(x(H),y(!0)):(_(H),k(!0))},p=()=>{y(!1),x(null),k(!1),_(null)},D=H=>{s(H),p()},O=(H="")=>{const F=H.split(" ").map(q=>q[0]||"").join("").slice(0,3),$=F.length<=2?"text-base":F.length===3?"text-sm":"text-xs";return o.jsx("span",{className:`text-emerald-600 font-medium ${$}`,children:F})},I=t==="doctor"?[{key:"name",label:"Doctor",render:H=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:o.jsxs("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center overflow-hidden",children:[H.profilePicture||H.profileImageUrl?o.jsx("img",{src:H.profilePicture||H.profileImageUrl,alt:"Profile",className:"h-10 w-10 object-cover rounded-full",onError:F=>{F.currentTarget.style.display="none",F.currentTarget.nextElementSibling.style.display="flex"}}):null,o.jsx("div",{className:`h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center ${H.profilePicture||H.profileImageUrl?"hidden":""}`,children:O(H.name)})]})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.name}),o.jsx("div",{className:"text-sm text-gray-500",children:H.email})]})]})},{key:"speciality",label:"Speciality",render:H=>o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900",children:H.speciality}),o.jsx("div",{className:"text-sm text-gray-500",children:H.mainDegree})]})},{key:"contact",label:"Contact",render:H=>o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900",children:H.phone}),o.jsx("div",{className:"text-sm text-gray-500",children:H.hospital})]})},{key:"pmdc",label:"PMDC Status",render:H=>o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${H.pmdcVerified?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:H.pmdcVerified?"Verified":"Not Verified"})},{key:"paymentStatus",label:"Payment Status",render:H=>o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${H.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:H.isActive?"Active":"Inactive"})}]:[{key:"name",label:"Hospital",render:H=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:o.jsxs("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center overflow-hidden",children:[H.profilePicture||H.profileImageUrl||H.image?o.jsx("img",{src:H.profilePicture||H.profileImageUrl||H.image,alt:"Profile",className:"h-10 w-10 object-cover rounded-full",onError:F=>{F.currentTarget.style.display="none",F.currentTarget.nextElementSibling.style.display="flex"}}):null,o.jsx("div",{className:`h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center ${H.profilePicture||H.profileImageUrl||H.image?"hidden":""}`,children:O(H.name)})]})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.name}),o.jsx("div",{className:"text-sm text-gray-500",children:H.email})]})]})},{key:"type",label:"Type & Category",render:H=>o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900",children:H.hospitalType}),o.jsx("div",{className:"text-sm text-gray-500",children:H.category})]})},{key:"contact",label:"Contact",render:H=>o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900",children:H.phone}),o.jsx("div",{className:"text-sm text-gray-500",children:H.city})]})}];return o.jsxs("div",{className:"bg-white",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between gap-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r}),o.jsx("div",{className:"ml-auto w-full sm:w-64",children:o.jsx("input",{type:"text",value:w,onChange:H=>U(H.target.value),placeholder:"Search by name",className:"w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-300","aria-label":"Search by name"})})]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[I.map(H=>o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:H.label},H.key)),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[R.map(H=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[I.map(F=>o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F.render(H)},F.key)),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex space-x-2",children:[!C&&o.jsx("button",{onClick:()=>s(H._id),className:"bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700 transition-colors",children:"Approve"}),!d&&o.jsx("button",{onClick:()=>l(H._id),className:"bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",children:"Reject"}),o.jsx("button",{onClick:()=>S(H),className:"bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors",children:"View Details"})]})})]},H._id)),z.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:I.length+1,className:"px-6 py-8 text-center text-gray-500",children:"No results found."})})]})]})}),o.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",z.length===0?0:R.length," of"," ",z.length," result(s)"]}),o.jsxs("div",{className:"inline-flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>A(H=>Math.max(1,H-1)),disabled:g===1,className:"px-3 py-1 rounded border text-sm disabled:opacity-50",children:"Prev"}),o.jsx("div",{className:"inline-flex items-center space-x-1",children:Array.from({length:N},(H,F)=>F+1).map(H=>o.jsx("button",{onClick:()=>A(H),"aria-current":H===g?"page":void 0,className:`px-3 py-1 rounded text-sm border ${H===g?"bg-emerald-600 text-white border-emerald-600":""}`,children:H},H))}),o.jsx("button",{onClick:()=>A(H=>Math.min(N,H+1)),disabled:g===N,className:"px-3 py-1 rounded border text-sm disabled:opacity-50",children:"Next"})]})]}),f&&u&&o.jsx(nz,{isOpen:f,onClose:p,onApprove:D,doctor:u,handleDoctorReject:l,isRejected:d,isApproved:C}),m&&E&&o.jsx(sz,{isOpen:m,onClose:p,onApprove:D,hospital:E,handleHospitalReject:l,isRejected:d,isApproved:C})]})},oz=()=>{const{pendingDoctors:e,approvedDoctors:t,rejectedDoctors:r,pendingHospitals:s,approvedHospitals:l,rejectedHospitals:d,approveDoctor:C,rejectDoctor:T,approveHospital:b,rejectHospital:u,statistics:x,logout:f}=cc(),y=fs(),E=async w=>await C(w),_=async w=>await b(w),m=async w=>await T(w),k=async w=>await u(w);return o.jsxs("div",{className:"min-h-screen bg-emerald-50",children:[o.jsx(iz,{logout:f,navigate:y}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx(JB,{statistics:x}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(Jd,{title:"Pending Doctor Applications",pendingItems:e,type:"doctor",onApprove:w=>E(w),onReject:w=>m(w)})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(Jd,{title:"Pending Hospital Applications",pendingItems:s,type:"hospital",onApprove:w=>_(w),onReject:w=>k(w)})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(Jd,{title:"Approved Doctor Applications",pendingItems:t,type:"doctor",onApprove:w=>E(w),onReject:w=>m(w),isApproved:!0})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(Jd,{title:"Approved Hospital Applications",pendingItems:l,type:"hospital",onApprove:w=>_(w),onReject:w=>k(w),isApproved:!0})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(Jd,{title:"Rejected Doctor Applications",pendingItems:r,type:"doctor",onApprove:w=>E(w),onReject:w=>m(w),isRejected:!0})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx(Jd,{title:"Rejected Hospital Applications",pendingItems:d,type:"hospital",onApprove:w=>_(w),onReject:w=>k(w),isRejected:!0})})]})]})},cz=()=>{const[e,t]=Z.useState(null),[r,s]=Z.useState(null),[l,d]=Z.useState(null),[C,T]=Z.useState(""),[b,u]=Z.useState(!1),x=fs(),{UpdateProfilePic:f,DoctorDocumentUpload:y,loading:E,doctor:_}=ps();Z.useEffect(()=>()=>{l&&URL.revokeObjectURL(l)},[l]),Z.useEffect(()=>{C&&u(!0)},[C]);const m=U=>{const g=U.target.files;g.length>0?t(g):t(null)},k=U=>{const g=U.target.files[0];if(s(g),g){const A=URL.createObjectURL(g);d(A);const P=new FormData;P.append("image",g),f(P)}},w=U=>{if(U.preventDefault(),!e){T("Please upload at least one image document.");return}const g=new FormData;Array.from(e).forEach(A=>{g.append("documents",A)}),y(g,x),T("Login successful but account is still in pending verification. We are reviewing your profile and will contact you via email.")};return _?.hasDocuments?o.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",children:o.jsxs("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-lg p-8 text-center",children:[o.jsx("div",{className:"flex justify-center mb-6",children:o.jsx(tP,{className:"w-20 h-20 text-emerald-500"})}),o.jsx("h2",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Documents Already Uploaded"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your documents have been successfully uploaded and are currently under review. You cannot upload additional documents at this time."}),o.jsx("button",{onClick:()=>x("/"),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-3 px-6 rounded-md shadow transition",children:"Go to Home"})]})}):o.jsxs("div",{className:"min-h-screen  flex items-center justify-center px-4 py-12",children:[o.jsxs("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-lg p-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-center text-emerald-800 mb-6",children:"Upload Your Documents"}),o.jsxs("form",{onSubmit:w,className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col items-center gap-2",children:o.jsxs("label",{htmlFor:"profileImage",className:"cursor-pointer group",children:[o.jsx("div",{className:"w-28 h-28 mx-auto rounded-full border-4 border-dashed border-emerald-400 flex items-center justify-center bg-gray-50 overflow-hidden transition hover:border-emerald-600",children:l?o.jsx("img",{src:l,alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(rP,{className:"w-16 h-16 text-gray-300 group-hover:text-emerald-400"})}),o.jsx("input",{id:"profileImage",type:"file",name:"profileImage",accept:"image/*",onChange:k,className:"hidden"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2 group-hover:text-emerald-700 transition",children:"Click to upload profile image (optional)"})]})}),o.jsxs("div",{className:"w-full",children:[o.jsxs("label",{className:"block text-sm font-medium text-emerald-700 mb-1",children:["Upload Supporting Documents"," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("div",{className:"flex items-center justify-center w-full",children:o.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-emerald-300 rounded-lg cursor-pointer bg-emerald-50 hover:bg-emerald-100 transition",children:[o.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[o.jsx(Qw,{className:"w-8 h-8 mb-2 text-emerald-500"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[o.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag & drop image(s)"]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Only image formats are allowed (JPG, PNG, etc.)"})]}),o.jsx("input",{type:"file",name:"documents",accept:"image/*",onChange:m,className:"hidden",multiple:!0,required:!0})]})}),e&&o.jsx("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside space-y-1",children:Array.from(e).map((U,g)=>o.jsx("li",{children:U.name},g))})]}),o.jsx("button",{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-2 px-4 rounded-md shadow transition",children:E?"Submitting...":"Submit Documents"})]})]}),b&&o.jsx(Up,{open:b,onOpenChange:u,title:"Verification Pending",description:"Login successful but account is still in pending verification. We are reviewing your profile and will contact you via email.",children:o.jsx("button",{className:"w-fit mx-auto px-5 py-2 rounded-lg bg-emerald-600 text-white font-semibold shadow-md hover:bg-emerald-700 transition-all duration-300",onClick:()=>x("/"),children:"Home"})})]})},lz=()=>{const{doctor:e,logout:t,DoctorProfileUpdate:r,UpdateProfilePic:s,pendingValidation:l}=ps(),[d,C]=Z.useState(!1),[T,b]=Z.useState(""),[u,x]=Z.useState(!1),[f,y]=Z.useState(""),[E,_]=Z.useState([]),[m,k]=Z.useState({workingDays:[],startTime:"09:00",endTime:"17:00",appointmentDuration:30}),[w,U]=Z.useState({phone:e?.phone||"",availability:!0,fee:e?.fee||"",fullAddress:e?.fullAddress||"",experience:e?.experience||""}),g=fs(),{doctorsAppointments:A,loading:P,doctorAppointments:z,appointmentStatus:N,doctorAppointmentsCancel:R,getSchedule:S,doctorAppointmentsSchedule:p}=I0();Z.useEffect(()=>{const $=()=>{_([{patientName:"John Doe",date:new Date,meetingId:"meeting_1754952068034_88yzffp2o",patientId:"patient_001",symptoms:"Fever and headache"}])};$();const q=setInterval($,3e4);return()=>clearInterval(q)},[]),Z.useEffect(()=>{z().catch(()=>{}),e?._id&&S(e._id).then($=>{$&&k({workingDays:$.workingDays||[],startTime:$.startTime||"09:00",endTime:$.endTime||"17:00",appointmentDuration:$.appointmentDuration||30})}).catch(()=>{})},[e?._id]);const D=$=>{N($)},O=async $=>{$.preventDefault(),r(w)},j=$=>{const q=$.target.files[0];if(q){const se=URL.createObjectURL(q);b(se);const J=new FormData;J.append("image",q),s(J)}},I=()=>{t(g)},H=$=>{k(q=>{const J=q.workingDays?.includes($)?q.workingDays.filter(be=>be!==$):[...q.workingDays||[],$];return{...q,workingDays:J}})},F=async $=>{$?.preventDefault?.();const q=new Set(m.workingDays||[]),se={workingDays:{monday:q.has("Mon"),tuesday:q.has("Tue"),wednesday:q.has("Wed"),thursday:q.has("Thu"),friday:q.has("Fri"),saturday:q.has("Sat"),sunday:q.has("Sun")},startTime:m.startTime,endTime:m.endTime,appointmentDuration:Number(m.appointmentDuration)||30};await p(se),e?._id&&await S(e._id)};return!e&&!l?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50",children:o.jsx("h2",{className:"text-2xl text-emerald-700 font-semibold",children:"No doctor found."})}):l?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 p-4",children:o.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-2xl w-full text-center",children:o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:"w-20 h-20 mx-auto bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:o.jsx("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h2",{className:"text-3xl font-bold text-yellow-700 mb-4",children:"Application Pending"}),o.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Your account is pending verification. We will notify you via email once verified."}),o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[o.jsxs("p",{className:"text-sm text-yellow-800",children:[o.jsx("strong",{children:"Current Status:"})," Pending Verification"]}),o.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:[o.jsx("strong",{children:"Name:"})," ",e?.name]}),o.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:[o.jsx("strong",{children:"Speciality:"})," ",e?.speciality?.join(", ")||"Not specified"]}),o.jsx("button",{onClick:I,className:"bg-red-600 text-white mt-4 px-4 py-2 rounded-lg hover:bg-red-700",children:"Logout"})]})]})})}):o.jsxs("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4 flex justify-center",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-2xl w-full",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-4",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800",children:"Doctor Profile"}),o.jsxs("div",{className:"flex flex-wrap gap-2 justify-center sm:justify-end",children:[E.length>0&&o.jsx("div",{className:"relative",children:o.jsxs("button",{onClick:()=>{document.querySelector("[data-consultation-section]")?.scrollIntoView({behavior:"smooth"})},className:"bg-red-100 text-red-700 px-4 py-2 rounded-lg hover:bg-red-200 transition-colors relative font-medium",children:[o.jsx("span",{children:"Pending Consultations"}),o.jsx("span",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold",children:E.length})]})}),o.jsx("button",{onClick:()=>C(!d),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors font-medium",children:d?"Cancel":"Edit"})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 justify-center sm:justify-end",children:[o.jsx("button",{onClick:()=>g("/change-password?type=doctor"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Change Password"}),o.jsx("button",{onClick:I,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Logout"})]})]}),d?o.jsxs("form",{onSubmit:O,className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:T||e.profilePicture,alt:e.name,className:"w-28 h-28 rounded-full object-cover mb-4 border-4 border-emerald-100"}),o.jsxs("label",{className:"absolute bottom-4 right-0 bg-emerald-600 text-white p-2 rounded-full cursor-pointer hover:bg-emerald-700",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),o.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"hidden"})]})]}),o.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:e.name}),o.jsx("p",{className:"text-sm text-emerald-700",children:e.speciality?.join(", ")||e.specialty})]}),o.jsx(Yr,{label:"Phone Number",name:"phone",type:"tel",value:w.phone,onChange:$=>U(q=>({...q,phone:$.target.value})),placeholder:"Enter phone number"}),o.jsx(Yr,{label:"Consultation Fee (Rs.)",name:"fee",type:"text",value:w.fee,onChange:$=>U(q=>({...q,fee:$.target.value})),placeholder:"Enter consultation fee"}),o.jsx(Yr,{label:"Experience",name:"experience",type:"text",value:w.experience,onChange:$=>U(q=>({...q,experience:$.target.value})),placeholder:"Enter years of experience"}),o.jsx(Yr,{label:"Full Address",name:"fullAddress",type:"text",value:w.fullAddress,onChange:$=>U(q=>({...q,fullAddress:$.target.value})),placeholder:"Enter full address"}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("button",{type:"button",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700",onClick:()=>x(!0),children:"Update More Details"}),o.jsx("button",{type:"submit",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700",children:"Save Changes"})]})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("img",{src:e.profilePicture,alt:e.name,className:"w-28 h-28 rounded-full object-cover mb-2 border-4 border-emerald-100"}),o.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:e.name}),o.jsx("p",{className:"text-sm text-emerald-700",children:e.speciality?.join(", ")||e.specialty})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Experience:"})," ",e.experience," years"]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Hospital:"})," ",e.hospital]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Location:"})," ",e.fullAddress]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Rating:"}),"  ",e?.rating?.average||0," (",e?.rating?.count||0," reviews)"]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Fee:"})," Rs. ",e.fee||"Not set"]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Availability:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.availability?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.availability?"Available":"Not Available"})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"PMDC Number:"})," ",e.pmdcNumber]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Main Degree:"})," ",e.mainDegree]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Status:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.status==="verified"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.status})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Documents Uploaded:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.hasDocuments?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.hasDocuments?"Yes":"No"})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Hospital Verified:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.hospitalVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.hospitalVerified?"Yes":"No"})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"PMDC Verified:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.pmdcVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.pmdcVerified?"Yes":"No"})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Member of Registered Hospital:"})," ",o.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.memberofRegisterdHospital?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.memberofRegisterdHospital?"Yes":"No"})]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"CNIC:"})," ",e.cnic]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Phone:"})," ",e.phone]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Email:"})," ",e.email]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Gender:"})," ",e.gender]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Religion:"})," ",e.religion]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Payment Completed:"})," ",e.PaymentCompleted?new Date(e.PaymentCompleted).toLocaleDateString():""]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Created:"})," ",e.createdAt?new Date(e.createdAt).toLocaleDateString():""]}),o.jsxs("p",{className:"text-gray-700 mb-1",children:[o.jsx("b",{children:"Last Updated:"})," ",e.updatedAt?new Date(e.updatedAt).toLocaleDateString():""]})]}),o.jsxs("div",{className:"mt-8 border-t pt-6","data-consultation-section":!0,children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-800 mb-4",children:"Video Consultation Management"}),o.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-green-800 mb-3",children:" Start New Consultation"}),o.jsx("p",{className:"text-green-700 text-sm mb-3",children:"Create a new video consultation room for patients to join."}),o.jsx("button",{onClick:()=>{g("/doctor/consultation/new/new_patient")},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Start New Consultation"})]})]}),o.jsxs("div",{className:"mt-8 border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-800 mb-4",children:"Appointments"}),o.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:P?.doctorAppointments?o.jsx("div",{className:"text-gray-600 text-sm",children:"Loading appointments..."}):A?.length?o.jsx("div",{className:"space-y-3",children:A.map($=>o.jsx(NR,{appointment:$,role:"doctor",showConfirm:$.status!=="confirmed",showCancel:$.status!=="cancelled",onConfirm:()=>D($._id),onCancel:()=>R($._id)},$._id))}):o.jsx("div",{className:"text-gray-600 text-sm",children:"No appointments yet."})})]}),o.jsxs("div",{className:"mt-8 border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-800 mb-4",children:"Weekly Schedule"}),o.jsxs("form",{onSubmit:F,className:"space-y-3",children:[o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map($=>o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:m.workingDays?.includes($),onChange:()=>H($)}),o.jsx("span",{children:$})]},$))}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Start Time"}),o.jsx("input",{type:"time",value:m.startTime,onChange:$=>k(q=>({...q,startTime:$.target.value})),className:"w-full border rounded px-2 py-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"End Time"}),o.jsx("input",{type:"time",value:m.endTime,onChange:$=>k(q=>({...q,endTime:$.target.value})),className:"w-full border rounded px-2 py-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Duration (minutes)"}),o.jsx("input",{type:"number",min:"5",step:"5",value:m.appointmentDuration,onChange:$=>k(q=>({...q,appointmentDuration:Number($.target.value)||30})),className:"w-full border rounded px-2 py-1"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700",children:"Save Schedule"})})]})]})]})]}),o.jsx(Up,{open:u,onOpenChange:x,title:"Need to Update More Details?",description:"We're here to help! For additional profile updates, please reach out to our support team. You can contact us directly at +92 348 8597922 or connect with our admin team for personalized assistance."})]})},uz=()=>{const{allPublicHospital:e}=to(),[t,r]=Z.useState(null),{slug:s}=bl();return Z.useEffect(()=>{if(e&&e.length>0){const l=s.split("-").pop(),d=e.find(C=>C._id===l);d&&r(d)}},[e,s]),o.jsx("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4",children:o.jsx("div",{className:"max-w-5xl mx-auto",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[o.jsx("img",{src:t?.profilePicture||t?.image||"https://ui-avatars.com/api/?name=Hospital&background=random",alt:t?.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow"}),o.jsxs("div",{className:"flex-1 w-full",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[o.jsx("h1",{className:"text-3xl font-bold text-emerald-800",children:t?.name}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[t?.hospitalType&&o.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full",children:t?.hospitalType}),t?.status&&o.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs px-3 py-1 rounded-full capitalize",children:t?.status}),t?.city&&o.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full",children:t?.city})]})]}),t?.description&&o.jsx("p",{className:"text-gray-700 mt-3",children:t?.description}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6",children:[o.jsxs("div",{className:"text-gray-700",children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Address:"})," ",t?.address||""]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Contact:"})," ",t?.phone||t?.contact||""]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Email:"})," ",t?.email||""]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Established:"})," ",t?.establishedYear||""]})]}),o.jsxs("div",{className:"text-gray-700",children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Total Beds:"})," ",t?.totalBeds??t?.beds??""]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Operation Theaters:"})," ",t?.operationTheaters??""]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Active:"})," ",t?.isActive?"Yes":"No"]}),Array.isArray(t?.doctors)&&o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Doctors:"})," ",t?.doctors.length]})]})]}),t?.services&&o.jsxs("div",{className:"mt-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-emerald-800 mb-2",children:"Services"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[t?.services?.emergencyServices&&o.jsx("span",{className:"inline-block bg-red-100 text-red-700 text-xs px-3 py-1 rounded-full",children:"Emergency"}),t?.services?.ambulanceServices&&o.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-700 text-xs px-3 py-1 rounded-full",children:"Ambulance"}),t?.services?.icuServices&&o.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 text-xs px-3 py-1 rounded-full",children:"ICU"})]})]}),o.jsx("div",{className:"mt-8 flex flex-col sm:flex-row gap-3",children:o.jsxs(ns,{to:`/hospitals/${s}/doctors`,className:"px-5 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium text-center",children:["View Doctors",Array.isArray(t?.doctors)?` (${t.doctors.length})`:""]})})]})]})})})})},dz=()=>{const e=fs(),[t]=D0(),r=t.get("type")||"auth",{ForgotPassword:s,loading:l}=si(),{DoctorForgotPassword:d,loading:C}=ps(),{HospitalForgotPassword:T,loading:b}=to(),u=()=>{switch(r){case"doctor":return{forgotPassword:d,loading:C,title:"Doctor Forgot Password",resetRoute:"/reset-password?type=doctor",loginRoute:"/doctor/login"};case"hospital":return{forgotPassword:T,loading:b,title:"Hospital Forgot Password",resetRoute:"/reset-password?type=hospital",loginRoute:"/hospital/login"};default:return{forgotPassword:s,loading:l,title:"Forgot Password",resetRoute:"/reset-password",loginRoute:"/login"}}},{forgotPassword:x,loading:f,title:y,resetRoute:E,loginRoute:_}=u(),[m,k]=Z.useState(""),w=Tc({email:Xr().min(1,"Email is required").email("Invalid email address")}),{register:U,handleSubmit:g,formState:{errors:A}}=Rl({resolver:El(w),mode:"onChange"}),P=async z=>{k("");try{await x(z,()=>e(E))}catch{k("Failed to send reset email. Please try again.")}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:y}),o.jsx("p",{className:"mb-6 text-center text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."}),o.jsxs("form",{className:"space-y-6",onSubmit:g(P),children:[o.jsx(Yr,{label:"Email Address",type:"email",name:"email",...U("email"),error:A.email?.message,placeholder:"Enter your email",autoComplete:"username"}),m&&o.jsx("p",{className:"text-red-500 text-sm text-center",children:m}),o.jsx("button",{type:"submit",disabled:f,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:f?"Sending OTP...":"Send OTP"}),o.jsx("div",{className:"text-center",children:o.jsx(ns,{to:_,className:"text-emerald-600 hover:text-emerald-700 text-sm",children:"Back to Login"})})]})]})})},hz=()=>{const e=fs(),[t]=D0(),r=t.get("type")||"auth",{ResetPassword:s,loading:l}=si(),{DoctorResetPassword:d,loading:C}=ps(),{HospitalResetPassword:T,loading:b}=to(),u=()=>{switch(r){case"doctor":return{resetPassword:d,loading:C,title:"Doctor Reset Password",forgotRoute:"/forgot-password?type=doctor",loginRoute:"/doctor/login"};case"hospital":return{resetPassword:T,loading:b,title:"Hospital Reset Password",forgotRoute:"/forgot-password?type=hospital",loginRoute:"/hospital/login"};default:return{resetPassword:s,loading:l,title:"Reset Password",forgotRoute:"/forgot-password",loginRoute:"/login"}}},{resetPassword:x,loading:f,title:y,forgotRoute:E,loginRoute:_}=u(),[m,k]=Z.useState(""),[w,U]=Z.useState(""),g=Tc({email:Xr().min(1,"Email is required").email("Invalid email address"),password:Xr().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),confirmPassword:Xr().min(1,"Please confirm your password")}).refine(S=>S.password===S.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),{register:A,handleSubmit:P,formState:{errors:z},watch:N}=Rl({resolver:El(g),mode:"onChange"});N("password");const R=async S=>{if(!w||w.length!==6){k("Please enter a valid 6-digit OTP");return}k("");try{const p={email:S.email,forgotPasswordCode:w,newPassword:S.password};await x(p,()=>e(_))}catch{k("Failed to reset password. Please try again.")}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:y}),o.jsx("p",{className:"mb-6 text-center text-gray-600",children:"Enter your new password and the OTP sent to your email."}),o.jsxs("form",{className:"space-y-6",onSubmit:P(R),children:[o.jsx(Yr,{label:"Email Address",type:"email",name:"email",...A("email"),error:z.email?.message,placeholder:"Enter your email",autoComplete:"username"}),o.jsx(Yr,{label:"New Password",type:"password",name:"password",...A("password"),error:z.password?.message,placeholder:"Enter your new password",autoComplete:"new-password"}),o.jsx(Yr,{label:"Confirm New Password",type:"password",name:"confirmPassword",...A("confirmPassword"),error:z.confirmPassword?.message,placeholder:"Confirm your new password",autoComplete:"new-password"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"OTP Code"}),o.jsx(YA,{value:w,onChange:U,error:m&&!w?"OTP is required":"",placeholder:"Enter the 6-digit OTP sent to your email"})]}),m&&o.jsx("p",{className:"text-red-500 text-sm text-center",children:m}),o.jsx("button",{type:"submit",disabled:f,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:f?"Resetting Password...":"Reset Password"}),o.jsx("div",{className:"text-center",children:o.jsx(ns,{to:E,className:"text-emerald-600 hover:text-emerald-700 text-sm",children:"Back to Forgot Password"})})]})]})})},pz=()=>{const e=fs(),[t]=D0(),r=t.get("type")||"auth",{ChangePassword:s,loading:l}=si(),{DoctorChangePassword:d,loading:C}=ps(),{HospitalChangePassword:T,loading:b}=to(),u=()=>{switch(r){case"doctor":return{changePassword:d,loading:C,title:"Doctor Change Password",profileRoute:"/doctor/profile"};case"hospital":return{changePassword:T,loading:b,title:"Hospital Change Password",profileRoute:"/hospital/profile"};default:return{changePassword:s,loading:l,title:"Change Password",profileRoute:"/profile"}}},{changePassword:x,loading:f,title:y,profileRoute:E}=u(),[_,m]=Z.useState(""),k=Tc({currentPassword:Xr().min(1,"Current password is required"),newPassword:Xr().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),confirmPassword:Xr().min(1,"Please confirm your password")}).refine(z=>z.newPassword===z.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),{register:w,handleSubmit:U,formState:{errors:g},watch:A}=Rl({resolver:El(k),mode:"onChange"});A("newPassword");const P=async z=>{m("");try{const N={currentPassword:z.currentPassword,newPassword:z.newPassword};await x(N,()=>e(E))}catch{m("Failed to change password. Please try again.")}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900",children:y}),o.jsx("p",{className:"mb-6 text-center text-gray-600",children:"Enter your current password and choose a new password."}),o.jsxs("form",{className:"space-y-6",onSubmit:U(P),children:[o.jsx(Yr,{label:"Current Password",type:"password",name:"currentPassword",...w("currentPassword"),error:g.currentPassword?.message,placeholder:"Enter your current password",autoComplete:"current-password"}),o.jsx(Yr,{label:"New Password",type:"password",name:"newPassword",...w("newPassword"),error:g.newPassword?.message,placeholder:"Enter your new password",autoComplete:"new-password"}),o.jsx(Yr,{label:"Confirm New Password",type:"password",name:"confirmPassword",...w("confirmPassword"),error:g.confirmPassword?.message,placeholder:"Confirm your new password",autoComplete:"new-password"}),_&&o.jsx("p",{className:"text-red-500 text-sm text-center",children:_}),o.jsx("button",{type:"submit",disabled:f,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50",children:f?"Changing Password...":"Change Password"}),o.jsx("div",{className:"text-center",children:o.jsx(ns,{to:E,className:"text-emerald-600 hover:text-emerald-700 text-sm",children:"Back to Profile"})})]})]})})},fz=()=>{const{hospital:e,setHospital:t}=to(),r=fs();if(!e)return o.jsx("div",{className:"min-h-screen bg-emerald-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})});const s=()=>{r("/change-password?type=hospital")},l=C=>{switch(C){case"pending":return"bg-yellow-100 text-yellow-800";case"verified":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=()=>{localStorage.removeItem("token"),t(null),r("/")};return o.jsx("div",{className:"min-h-screen bg-emerald-50 py-8 px-4",children:o.jsx("div",{className:"max-w-2xl mx-auto",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:d,className:"px-4 ms-auto py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})}),o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-emerald-100 flex items-center justify-center",children:e.profilePicture||e.image?o.jsx("img",{src:e.profilePicture||e.image,alt:"Hospital",className:"w-24 h-24 rounded-full object-cover"}):o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.name}),o.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium mt-2 ${l(e.status)}`,children:e.status?.charAt(0).toUpperCase()+e.status?.slice(1)||"Unknown"})]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),o.jsx("p",{className:"font-medium",children:e.email})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),o.jsx("p",{className:"font-medium",children:e.phone||"Not provided"})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"City"}),o.jsx("p",{className:"font-medium",children:e.city||"Not provided"})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Type"}),o.jsx("p",{className:"font-medium",children:e.hospitalType||"Not specified"})]})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),o.jsx("p",{className:"font-medium",children:e.address||"Not provided"})]})]}),o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e&&o.jsxs(ns,{to:`/hospitals/${`${e.name?.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${e._id}`}/doctors`,className:"px-6 py-2 border border-emerald-600 text-emerald-600 rounded-lg hover:bg-emerald-50 transition-colors",children:["View Doctors",Array.isArray(e?.doctors)?` (${e.doctors.length})`:""]}),o.jsx("button",{onClick:s,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Change Password"})]}),e.status==="pending"&&o.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:o.jsx("p",{className:"text-yellow-800 text-sm text-center",children:"Your profile is currently under review. You'll be notified once verified."})})]})})})},mz=({allDoctors:e,allUsers:t=[],threads:r,threadsLoading:s=!1,searchQuery:l,setSearchQuery:d,selectedDoctor:C,onDoctorSelect:T,onThreadSelect:b,currentThread:u,user:x,isDoctorRoute:f,isUserRoute:y})=>{const E=e.filter(w=>w.name?.toLowerCase().includes(l.toLowerCase())||w.specialty?.toLowerCase().includes(l.toLowerCase())),_=w=>(w.participants||[]).filter(U=>U.userId!==x?._id),m=w=>{const g=_(w)[0],A=g?.userId,P=e.find(S=>S._id===A);if(P)return{...P,isDoctor:!0};const z=t.find(S=>S._id===A);if(z)return{_id:z._id,name:z.name,profileImage:z.profileImage||z.avatar||null,specialty:"",isDoctor:!1};const N=g?.name||g?.displayName||w?.name||"Unknown",R=g?.avatar||g?.profileImage||w?.avatar||null;return{_id:A||w._id,name:N,profileImage:R,specialty:g?.role||w?.subtitle||"",isDoctor:!1}},k=w=>w.lastMessage?.text||w.lastMessage?.content||w.lastMessage?.preview||w.preview||"";return o.jsxs("div",{className:"w-full h-full flex flex-col bg-white",children:[o.jsx("div",{className:"p-4 border-b bg-green-600 text-white",children:o.jsx("h2",{className:"text-lg font-semibold",children:"Chats"})}),o.jsx("div",{className:"p-3 border-b",children:o.jsxs("div",{className:"relative",children:[o.jsx(kP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),o.jsx(mA,{placeholder:"Search doctors...",value:l,onChange:w=>d(w.target.value),className:"pl-10 bg-gray-50 border-0 focus:bg-white"})]})}),s&&o.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:Array.from({length:6}).map((w,U)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ad,{className:"h-12 w-12 rounded-full"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(ad,{className:"h-4 w-2/3"}),o.jsx(ad,{className:"h-3 w-1/2"})]})]},U))}),!s&&r.length>0&&o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o.jsx("div",{className:"p-3 border-b bg-gray-50",children:o.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Recent Chats"})}),r.map(w=>{const U=m(w);return!l||U?.name?.toLowerCase().includes(l.toLowerCase())||U?.specialty?.toLowerCase().includes(l.toLowerCase())?o.jsx("div",{onClick:()=>b(w,U),className:`p-3 border-b cursor-pointer hover:bg-gray-50 transition-colors ${u===w._id?"bg-green-50 border-l-4 border-l-green-500":""}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Sp,{className:"h-12 w-12",children:U.profileImage?o.jsx(Rp,{src:U.profileImage}):o.jsx(Ep,{className:"bg-green-100 text-green-600",children:U.name?.charAt(0)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-medium text-gray-900 truncate",children:U.isDoctor?`Dr ${U.name}`:U.name}),o.jsx("span",{className:"text-xs text-gray-500",children:CR(w.updatedAt)})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:k(w)||U.specialty})]})]})},w._id):null})]}),!s&&l&&o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o.jsx("div",{className:"p-3 border-b bg-gray-50",children:o.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Available Doctors"})}),E.slice(0,3).map(w=>o.jsx("div",{onClick:()=>T(w),className:`p-3 border-b cursor-pointer hover:bg-gray-50 transition-colors ${C?._id===w._id?"bg-green-50 border-l-4 border-l-green-500":""}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Sp,{className:"h-12 w-12",children:[o.jsx(Rp,{src:w.profileImage}),o.jsx(Ep,{className:"bg-green-100 text-green-600",children:w.name?.charAt(0)})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-gray-900 truncate",children:`Dr ${w.name}`}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:w.specialty})]}),o.jsx(gP,{className:"h-5 w-5 text-green-500"})]})},w._id))]}),l&&E.length===0&&o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:o.jsx("p",{children:"No doctors found"})})]})},gz=({messages:e=[],user:t,allDoctors:r=[],allUsers:s=[],participants:l=[],otherParticipant:d=null})=>{const C=Z.useRef(null);if(!e||e.length===0)return o.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx("p",{className:"font-medium",children:"No messages yet"}),o.jsx("p",{className:"text-sm",children:"Start the conversation!"})]})});const T=x=>{const f=y=>y?typeof y=="string"?y:typeof y=="object"&&(y._id||y.id)||null:null;return f(x.userId)||f(x.senderId)||f(x.sender)||f(x.user)||f(x.from)||f(x.by)||f(x.authorId)||f(x.createdBy)||null},b=x=>{const f=T(x);if(String(f)===String(t?._id))return t;const y=l?.find(k=>{const w=k.userId&&(k.userId._id||k.userId.id||k.userId)||k._id||k.id;return String(w)===String(f)});if(y){const k=y.userId&&typeof y.userId=="object"?y.userId:null,w=k&&(k._id||k.id)||y.userId||y._id||y.id,U=r?.find(z=>String(z._id)===String(w)),g=s?.find(z=>String(z._id)===String(w)),A=y.name||y.displayName||y.fullName||(y.firstName&&y.lastName?`${y.firstName} ${y.lastName}`:null)||y.username||y.userName||k&&(k.name||k.fullName||(k.firstName&&k.lastName?`${k.firstName} ${k.lastName}`:null)||k.username||k.userName)||U?.name||g?.name||"Unknown",P=y.avatar||y.profileImage||y.avatarUrl||y.photo||k&&(k.avatar||k.profileImage||k.avatarUrl||k.photo)||U?.profileImage||g?.profileImage||null;return{_id:w,name:A,profileImage:P}}const E=r?.find(k=>String(k._id)===String(f));if(E)return E;const _=s?.find(k=>String(k._id)===String(f));if(_)return{_id:_._id,name:_.name,profileImage:_.profileImage||_.avatar||null};if(d&&String(f)!==String(t?._id))return{_id:d._id,name:d.name||"Unknown",profileImage:d.profileImage||d.avatar||null};const m={_id:f,name:x.sender?.name||x.senderName||x.name||x.sender?.fullName||x.user?.name||(x.user?.firstName&&x.user?.lastName?`${x.user.firstName} ${x.user.lastName}`:null)||"Unknown",profileImage:x.sender?.avatar||x.sender?.profileImage||x.sender?.avatarUrl||x.user?.avatar||x.user?.profileImage||x.avatar||x.profileImage||null};return String(f)!==String(t?._id)&&d&&String(d._id)===String(f)?{_id:d._id,name:d.name||m.name,profileImage:d.profileImage||d.avatar||m.profileImage}:m},u=x=>{if(!x)return"";const f=[x.text,x.content,x.message,x.body,x.msg,x.payload?.text,x.data?.text];for(const y of f)if(typeof y=="string"&&y.trim()!=="")return y;return Array.isArray(x.attachments)&&x.attachments.length>0?x.attachments.map((y,E)=>y.name||y.filename||`Attachment ${E+1}`).join(", "):""};return o.jsx("div",{className:"h-full",children:o.jsx(LA,{className:"h-full",children:o.jsxs("div",{className:"flex flex-col px-4 py-4 gap-4",children:[e.map(x=>{const f=b(x),y=String(T(x))===String(t?._id),E=u(x);return o.jsxs("div",{className:`flex items-end ${y?"justify-end":"justify-start"}`,children:[!y&&o.jsx("div",{className:"mr-3",children:o.jsx(Sp,{className:"h-9 w-9 shadow-sm",children:f?.profileImage?o.jsx(Rp,{src:f.profileImage}):o.jsx(Ep,{className:"bg-green-100 text-green-600",children:String(f?.name||"U").charAt(0)})})}),o.jsxs("div",{className:"max-w-[80%]",children:[!y&&o.jsx("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:f?.name}),o.jsxs("div",{className:`px-4 py-2 break-words text-sm leading-6 ${y?"bg-gradient-to-r from-green-600 to-green-500 text-white rounded-2xl rounded-br-none shadow":"bg-gray-100 text-gray-900 rounded-2xl rounded-bl-none"}`,children:[E?o.jsx("div",{className:"whitespace-pre-wrap",children:E}):o.jsx("div",{className:"whitespace-pre-wrap text-gray-400 italic",children:"[No text]"}),x.attachments?.length>0&&o.jsx("div",{className:"mt-2 space-y-1",children:x.attachments.map((_,m)=>o.jsx("a",{href:_.url||"#",target:"_blank",rel:"noreferrer",className:"block text-xs underline",children:_.name||_.filename||`Attachment ${m+1}`},m))})]}),o.jsx("div",{className:`flex items-center mt-1 ${y?"justify-end":"justify-start"}`,children:o.jsx("span",{className:"text-[11px] text-gray-400",children:TR(x.createdAt)})})]}),y&&o.jsx("div",{className:"ml-3",children:o.jsx(Sp,{className:"h-9 w-9 shadow-sm",children:t?.profileImage?o.jsx(Rp,{src:t.profileImage}):o.jsx(Ep,{className:"bg-white text-green-600",children:String(t?.name||"M").charAt(0)})})})]},x._id||x.id||Math.random())}),o.jsx("div",{ref:C})]})})})},vz=({selectedDoctor:e,messages:t=[],newMessage:r,setNewMessage:s,onSendMessage:l,loading:d,messagesLoading:C=!1,currentThread:T,allDoctors:b=[],allUsers:u=[],user:x,participants:f=[]})=>{const y=Z.useRef(null),[E,_]=Z.useState(!1),m=()=>{!r?.trim()||d||l()},k=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),m())},w=e?.specialty||e?.role||"";return o.jsxs("div",{className:"flex flex-col bg-white shadow-inner w-full h-full rounded-md overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-green-50 to-white flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Sp,{className:"h-11 w-11",children:[o.jsx(Rp,{src:e?.profileImage}),o.jsx(Ep,{className:"bg-green-100 text-green-600",children:e?.name?.charAt(0)||"?"})]}),o.jsxs("div",{className:"min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:e?.name||"Select a chat"}),e&&o.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-green-400",title:"Online"})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:w})]})]}),e&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(rd,{size:"sm",variant:"ghost",className:"hover:bg-gray-100",children:o.jsx(RP,{className:"h-4 w-4"})}),o.jsx(rd,{size:"sm",variant:"ghost",className:"hover:bg-gray-100",children:o.jsx(FP,{className:"h-4 w-4"})}),o.jsx(rd,{size:"sm",variant:"ghost",className:"hover:bg-gray-100",children:o.jsx(cP,{className:"h-4 w-4"})})]})]}),o.jsx("div",{className:"flex-1 min-h-0 overflow-hidden relative",children:C?o.jsx("div",{className:"h-full overflow-y-auto",children:o.jsx("div",{className:"flex flex-col px-4 py-4 gap-4",children:Array.from({length:10}).map((U,g)=>o.jsx("div",{className:`flex ${g%2===0?"justify-start":"justify-end"}`,children:o.jsxs("div",{className:"flex items-end gap-3 max-w-[80%]",children:[g%2===0&&o.jsx(ad,{className:"h-9 w-9 rounded-full"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ad,{className:"h-4 w-[240px]"}),o.jsx(ad,{className:"h-3 w-16"})]}),g%2===1&&o.jsx(ad,{className:"h-9 w-9 rounded-full"})]})},g))})}):t.length===0&&!e?o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center px-6",children:[o.jsx("div",{className:"p-6 rounded-full bg-green-50 shadow-inner mb-4",children:o.jsx(yP,{className:"h-10 w-10 text-green-500"})}),o.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Welcome to qukMed Chat"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Select a doctor from the sidebar to start chatting."})]}):o.jsxs(o.Fragment,{children:[o.jsx(gz,{messages:t,user:x,allDoctors:b,allUsers:u,participants:f,otherParticipant:e}),o.jsx("div",{ref:y,id:"messages-end"})]})}),e&&o.jsx("div",{className:"p-4 border-t bg-white flex-shrink-0",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-full shadow-sm transition-all ${E?"ring-2 ring-green-200 bg-white":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 pl-3",children:[o.jsx("button",{type:"button",className:"p-2 rounded-md hover:bg-gray-100",title:"Attach",children:o.jsx(wP,{className:"h-4 w-4 text-gray-500"})}),o.jsx("button",{type:"button",className:"p-2 rounded-md hover:bg-gray-100",title:"Emoji",children:o.jsx(DP,{className:"h-4 w-4 text-gray-500"})})]}),o.jsx("textarea",{rows:1,value:r,onChange:U=>s(U.target.value),onKeyDown:k,onFocus:()=>_(!0),onBlur:()=>_(!1),placeholder:"Write a message...",className:"flex-1 resize-none outline-none bg-transparent text-sm leading-6 px-2 py-2 placeholder-gray-400"}),o.jsx("div",{className:"flex items-center gap-2 pr-2",children:o.jsx(rd,{onClick:m,disabled:!r.trim()||d,className:`rounded-full p-2 ${!r.trim()||d?"opacity-50 cursor-not-allowed":"shadow-md"}`,title:"Send message",children:o.jsx(Xw,{className:"h-4 w-4"})})})]}),o.jsx("div",{className:"mt-2 text-xs text-gray-400 px-4",children:o.jsx("span",{children:d?"Sending...":""})})]})})]})},H1=()=>{const{allDoctors:e}=ps(),{sendMessage:t,loading:r,threads:s,messages:l,getAllThreads:d,getMessageOfSingleThread:C,startPolling:T,stopPolling:b,currentThread:u,threadsLoading:x,messagesLoading:f}=h6(),{user:y,allUsers:E}=si(),_=tl(),[m,k]=Z.useState(""),[w,U]=Z.useState(null),[g,A]=Z.useState(""),P=_.pathname==="/doctor/messages",z=_.pathname==="/user/message";Z.useEffect(()=>{d({showLoading:!0})},[]);const N=async p=>{U(p),A("");const D=s.find(O=>O.participants.some(j=>j.userId===p._id));D?(await C(D._id,{showLoading:!0}),T(D._id)):b()},R=async(p,D)=>{U(D),A(""),await C(p._id,{showLoading:!0}),T(p._id)},S=async()=>{if(!(!g.trim()||!w))try{await t(w._id,g),A(""),await d({showLoading:!1});const p=s.find(D=>D.participants.some(O=>O.userId===w._id));p&&(T(p._id),await C(p._id,{showLoading:!0})),console.log("Message sent successfully to:",w.name)}catch(p){console.error("Error sending message:",p)}};return o.jsxs("div",{className:"h-screen flex bg-gray-100",children:[o.jsx("div",{className:"w-80 bg-white border-r",children:o.jsx(mz,{allDoctors:e,allUsers:E,threads:s,threadsLoading:x,searchQuery:m,setSearchQuery:k,selectedDoctor:w,onDoctorSelect:N,onThreadSelect:R,currentThread:u,user:y,isDoctorRoute:P,isUserRoute:z})}),o.jsx("div",{className:"flex-1",children:o.jsx(vz,{selectedDoctor:w,messages:l,newMessage:g,setNewMessage:A,onSendMessage:S,loading:r,messagesLoading:f,currentThread:u,allDoctors:e,allUsers:E,user:y,participants:s.find(p=>p._id===u)?.participants||[]})})]})},yz=({children:e})=>{const{admin:t}=cc();return t?e:o.jsx(hh,{to:"/admin/login",replace:!0})},Gf=({children:e})=>{const{user:t}=si();return t?e:o.jsx(hh,{to:"/login",replace:!0})},Yf=({children:e})=>{const{doctor:t,pendingValidation:r}=ps();return!t&&!r?o.jsx(hh,{to:"/doctor/login",replace:!0}):e},_z=({children:e})=>{const{hospital:t}=to();return t?e:o.jsx(hh,{to:"/hospital/login",replace:!0})},td=({children:e})=>{const{user:t}=si(),{doctor:r}=ps(),{hospital:s}=to(),{admin:l}=cc();return t||r||s||l?o.jsx(hh,{to:"/",replace:!0}):e},bz=({children:e})=>{const{doctorDocumentsPending:t}=ps();return t?e:o.jsx(hh,{to:"/",replace:!0})},xz=()=>o.jsxs(bC,{children:[o.jsxs(Sa,{element:o.jsx(XA,{}),children:[o.jsx(Sa,{path:"/",element:o.jsx(BL,{})}),o.jsx(Sa,{path:"/doctors",element:o.jsx(UB,{})}),o.jsx(Sa,{path:"/hospitals",element:o.jsx(FB,{})}),o.jsx(Sa,{path:"/labs",element:o.jsx(HB,{})}),o.jsx(Sa,{path:"/medicines",element:o.jsx(VB,{})}),o.jsx(Sa,{path:"/hospitals/:slug",element:o.jsx(qB,{})}),o.jsx(Sa,{path:"/medicine/:slug",element:o.jsx(ZB,{})}),o.jsx(Sa,{path:"/lab/:slug",element:o.jsx($B,{})}),o.jsx(Sa,{path:"/doctor/:slug",element:o.jsx(zB,{})}),o.jsx(Sa,{path:"/hospitals/:slug/doctors",element:o.jsx(WB,{})}),o.jsx(Sa,{path:"/user/message",element:o.jsx(Gf,{children:o.jsx(H1,{})})}),o.jsx(Sa,{path:"/doctor/messages",element:o.jsx(Yf,{children:o.jsx(H1,{})})}),o.jsx(Sa,{path:"/profile",element:o.jsx(Gf,{children:o.jsx(YB,{})})}),o.jsx(Sa,{path:"/doctor/profile/",element:o.jsx(Yf,{children:o.jsx(lz,{})})}),o.jsx(Sa,{path:"/hospital/profile",element:o.jsx(_z,{children:o.jsx(fz,{})})}),o.jsx(Sa,{path:"/doctor/book/:slug",element:o.jsx(Gf,{children:o.jsx(GB,{})})}),o.jsx(Sa,{path:"/admin/dashboard",element:o.jsx(yz,{children:o.jsx(oz,{})})})]}),o.jsx(Sa,{path:"/consultation/:meetingId/:doctorId",element:o.jsx(KB,{})}),o.jsx(Sa,{path:"/doctor/consultation/:meetingId/:patientId",element:o.jsx(Yf,{children:o.jsx(F1,{})})}),o.jsx(Sa,{path:"/doctor/consultation/new/:patientId",element:o.jsx(Yf,{children:o.jsx(F1,{})})}),o.jsxs(Sa,{element:o.jsx(JA,{}),children:[o.jsx(Sa,{path:"/register/doctor",element:o.jsx(wB,{})}),o.jsx(Sa,{path:"/register/hospital",element:o.jsx(SB,{})}),o.jsx(Sa,{path:"/login",element:o.jsx(td,{children:o.jsx(vB,{})})}),o.jsx(Sa,{path:"/hospital/login",element:o.jsx(td,{children:o.jsx(EB,{})})}),o.jsx(Sa,{path:"/doctor/login",element:o.jsx(td,{children:o.jsx(_B,{})})}),o.jsx(Sa,{path:"/admin/login",element:o.jsx(td,{children:o.jsx(XB,{})})}),o.jsx(Sa,{path:"/register",element:o.jsx(td,{children:o.jsx(yB,{})})}),o.jsx(Sa,{path:"/forgot-password",element:o.jsx(td,{children:o.jsx(dz,{})})}),o.jsx(Sa,{path:"/reset-password",element:o.jsx(td,{children:o.jsx(hz,{})})}),o.jsx(Sa,{path:"/change-password",element:o.jsx(Gf,{children:o.jsx(pz,{})})}),o.jsx(Sa,{path:"/doctor/upload-documents",element:o.jsx(bz,{children:o.jsx(cz,{})})})]}),o.jsx(Sa,{path:"/doctor/profile/:slug",element:o.jsx(BB,{})}),o.jsx(Sa,{path:"/hospital/profile/:slug",element:o.jsx(uz,{})})]});function wz(){return o.jsx(c6,{children:o.jsx(o6,{children:o.jsx(qC,{basename:"/quickMed",children:o.jsx(p6,{children:o.jsx(i6,{children:o.jsx(s6,{children:o.jsx(d6,{children:o.jsx(l6,{children:o.jsx(u6,{children:o.jsx(xz,{})})})})})})})})})})}Tk.createRoot(document.getElementById("root")).render(o.jsxs(Z.StrictMode,{children:[o.jsx(wz,{}),o.jsx(a6,{})]}))});export default Sz();

function qw(e,r){for(var i=0;i<r.length;i++){const o=r[i];if(typeof o!="string"&&!Array.isArray(o)){for(const g in o)if(g!=="default"&&!(g in e)){const N=Object.getOwnPropertyDescriptor(o,g);N&&Object.defineProperty(e,g,N.get?N:{enumerable:!0,get:()=>o[g]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))o(g);new MutationObserver(g=>{for(const N of g)if(N.type==="childList")for(const B of N.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&o(B)}).observe(document,{childList:!0,subtree:!0});function i(g){const N={};return g.integrity&&(N.integrity=g.integrity),g.referrerPolicy&&(N.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?N.credentials="include":g.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function o(g){if(g.ep)return;g.ep=!0;const N=i(g);fetch(g.href,N)}})();function zf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vh={exports:{}},Xr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function Zw(){if(u0)return Xr;u0=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),B=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),y=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=y&&X[y]||X["@@iterator"],typeof X=="function"?X:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,h={};function k(X,Ee,Se){this.props=X,this.context=Ee,this.refs=h,this.updater=Se||T}k.prototype.isReactComponent={},k.prototype.setState=function(X,Ee){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,Ee,"setState")},k.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function E(){}E.prototype=k.prototype;function H(X,Ee,Se){this.props=X,this.context=Ee,this.refs=h,this.updater=Se||T}var m=H.prototype=new E;m.constructor=H,f(m,k.prototype),m.isPureReactComponent=!0;var P=Array.isArray,v={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function C(X,Ee,Se,xe,_e,Pe){return Se=Pe.ref,{$$typeof:e,type:X,key:Ee,ref:Se!==void 0?Se:null,props:Pe}}function _(X,Ee){return C(X.type,Ee,void 0,void 0,void 0,X.props)}function w(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function p(X){var Ee={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Se){return Ee[Se]})}var x=/\/+/g;function A(X,Ee){return typeof X=="object"&&X!==null&&X.key!=null?p(""+X.key):Ee.toString(36)}function I(){}function M(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(I,I):(X.status="pending",X.then(function(Ee){X.status==="pending"&&(X.status="fulfilled",X.value=Ee)},function(Ee){X.status==="pending"&&(X.status="rejected",X.reason=Ee)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function F(X,Ee,Se,xe,_e){var Pe=typeof X;(Pe==="undefined"||Pe==="boolean")&&(X=null);var He=!1;if(X===null)He=!0;else switch(Pe){case"bigint":case"string":case"number":He=!0;break;case"object":switch(X.$$typeof){case e:case r:He=!0;break;case S:return He=X._init,F(He(X._payload),Ee,Se,xe,_e)}}if(He)return _e=_e(X),He=xe===""?"."+A(X,0):xe,P(_e)?(Se="",He!=null&&(Se=He.replace(x,"$&/")+"/"),F(_e,Ee,Se,"",function(Te){return Te})):_e!=null&&(w(_e)&&(_e=_(_e,Se+(_e.key==null||X&&X.key===_e.key?"":(""+_e.key).replace(x,"$&/")+"/")+He)),Ee.push(_e)),1;He=0;var pe=xe===""?".":xe+":";if(P(X))for(var Ge=0;Ge<X.length;Ge++)xe=X[Ge],Pe=pe+A(xe,Ge),He+=F(xe,Ee,Se,Pe,_e);else if(Ge=b(X),typeof Ge=="function")for(X=Ge.call(X),Ge=0;!(xe=X.next()).done;)xe=xe.value,Pe=pe+A(xe,Ge++),He+=F(xe,Ee,Se,Pe,_e);else if(Pe==="object"){if(typeof X.then=="function")return F(M(X),Ee,Se,xe,_e);throw Ee=String(X),Error("Objects are not valid as a React child (found: "+(Ee==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":Ee)+"). If you meant to render a collection of children, use an array instead.")}return He}function z(X,Ee,Se){if(X==null)return X;var xe=[],_e=0;return F(X,xe,"","",function(Pe){return Ee.call(Se,Pe,_e++)}),xe}function G(X){if(X._status===-1){var Ee=X._result;Ee=Ee(),Ee.then(function(Se){(X._status===0||X._status===-1)&&(X._status=1,X._result=Se)},function(Se){(X._status===0||X._status===-1)&&(X._status=2,X._result=Se)}),X._status===-1&&(X._status=0,X._result=Ee)}if(X._status===1)return X._result.default;throw X._result}var Z=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(Ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function ce(){}return Xr.Children={map:z,forEach:function(X,Ee,Se){z(X,function(){Ee.apply(this,arguments)},Se)},count:function(X){var Ee=0;return z(X,function(){Ee++}),Ee},toArray:function(X){return z(X,function(Ee){return Ee})||[]},only:function(X){if(!w(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Xr.Component=k,Xr.Fragment=i,Xr.Profiler=g,Xr.PureComponent=H,Xr.StrictMode=o,Xr.Suspense=R,Xr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=v,Xr.__COMPILER_RUNTIME={__proto__:null,c:function(X){return v.H.useMemoCache(X)}},Xr.cache=function(X){return function(){return X.apply(null,arguments)}},Xr.cloneElement=function(X,Ee,Se){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var xe=f({},X.props),_e=X.key,Pe=void 0;if(Ee!=null)for(He in Ee.ref!==void 0&&(Pe=void 0),Ee.key!==void 0&&(_e=""+Ee.key),Ee)!U.call(Ee,He)||He==="key"||He==="__self"||He==="__source"||He==="ref"&&Ee.ref===void 0||(xe[He]=Ee[He]);var He=arguments.length-2;if(He===1)xe.children=Se;else if(1<He){for(var pe=Array(He),Ge=0;Ge<He;Ge++)pe[Ge]=arguments[Ge+2];xe.children=pe}return C(X.type,_e,void 0,void 0,Pe,xe)},Xr.createContext=function(X){return X={$$typeof:B,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:N,_context:X},X},Xr.createElement=function(X,Ee,Se){var xe,_e={},Pe=null;if(Ee!=null)for(xe in Ee.key!==void 0&&(Pe=""+Ee.key),Ee)U.call(Ee,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(_e[xe]=Ee[xe]);var He=arguments.length-2;if(He===1)_e.children=Se;else if(1<He){for(var pe=Array(He),Ge=0;Ge<He;Ge++)pe[Ge]=arguments[Ge+2];_e.children=pe}if(X&&X.defaultProps)for(xe in He=X.defaultProps,He)_e[xe]===void 0&&(_e[xe]=He[xe]);return C(X,Pe,void 0,void 0,null,_e)},Xr.createRef=function(){return{current:null}},Xr.forwardRef=function(X){return{$$typeof:j,render:X}},Xr.isValidElement=w,Xr.lazy=function(X){return{$$typeof:S,_payload:{_status:-1,_result:X},_init:G}},Xr.memo=function(X,Ee){return{$$typeof:d,type:X,compare:Ee===void 0?null:Ee}},Xr.startTransition=function(X){var Ee=v.T,Se={};v.T=Se;try{var xe=X(),_e=v.S;_e!==null&&_e(Se,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(ce,Z)}catch(Pe){Z(Pe)}finally{v.T=Ee}},Xr.unstable_useCacheRefresh=function(){return v.H.useCacheRefresh()},Xr.use=function(X){return v.H.use(X)},Xr.useActionState=function(X,Ee,Se){return v.H.useActionState(X,Ee,Se)},Xr.useCallback=function(X,Ee){return v.H.useCallback(X,Ee)},Xr.useContext=function(X){return v.H.useContext(X)},Xr.useDebugValue=function(){},Xr.useDeferredValue=function(X,Ee){return v.H.useDeferredValue(X,Ee)},Xr.useEffect=function(X,Ee,Se){var xe=v.H;if(typeof Se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return xe.useEffect(X,Ee)},Xr.useId=function(){return v.H.useId()},Xr.useImperativeHandle=function(X,Ee,Se){return v.H.useImperativeHandle(X,Ee,Se)},Xr.useInsertionEffect=function(X,Ee){return v.H.useInsertionEffect(X,Ee)},Xr.useLayoutEffect=function(X,Ee){return v.H.useLayoutEffect(X,Ee)},Xr.useMemo=function(X,Ee){return v.H.useMemo(X,Ee)},Xr.useOptimistic=function(X,Ee){return v.H.useOptimistic(X,Ee)},Xr.useReducer=function(X,Ee,Se){return v.H.useReducer(X,Ee,Se)},Xr.useRef=function(X){return v.H.useRef(X)},Xr.useState=function(X){return v.H.useState(X)},Xr.useSyncExternalStore=function(X,Ee,Se){return v.H.useSyncExternalStore(X,Ee,Se)},Xr.useTransition=function(){return v.H.useTransition()},Xr.version="19.1.0",Xr}var d0;function Uf(){return d0||(d0=1,Vh.exports=Zw()),Vh.exports}var ne=Uf();const c=zf(ne),n_=qw({__proto__:null,default:c},[ne]);var qh={exports:{}},Pd={},Zh={exports:{}},Wh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function Ww(){return p0||(p0=1,function(e){function r(z,G){var Z=z.length;z.push(G);e:for(;0<Z;){var ce=Z-1>>>1,X=z[ce];if(0<g(X,G))z[ce]=G,z[Z]=X,Z=ce;else break e}}function i(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var G=z[0],Z=z.pop();if(Z!==G){z[0]=Z;e:for(var ce=0,X=z.length,Ee=X>>>1;ce<Ee;){var Se=2*(ce+1)-1,xe=z[Se],_e=Se+1,Pe=z[_e];if(0>g(xe,Z))_e<X&&0>g(Pe,xe)?(z[ce]=Pe,z[_e]=Z,ce=_e):(z[ce]=xe,z[Se]=Z,ce=Se);else if(_e<X&&0>g(Pe,Z))z[ce]=Pe,z[_e]=Z,ce=_e;else break e}}return G}function g(z,G){var Z=z.sortIndex-G.sortIndex;return Z!==0?Z:z.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var N=performance;e.unstable_now=function(){return N.now()}}else{var B=Date,j=B.now();e.unstable_now=function(){return B.now()-j}}var R=[],d=[],S=1,y=null,b=3,T=!1,f=!1,h=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;function P(z){for(var G=i(d);G!==null;){if(G.callback===null)o(d);else if(G.startTime<=z)o(d),G.sortIndex=G.expirationTime,r(R,G);else break;G=i(d)}}function v(z){if(h=!1,P(z),!f)if(i(R)!==null)f=!0,U||(U=!0,A());else{var G=i(d);G!==null&&F(v,G.startTime-z)}}var U=!1,C=-1,_=5,w=-1;function p(){return k?!0:!(e.unstable_now()-w<_)}function x(){if(k=!1,U){var z=e.unstable_now();w=z;var G=!0;try{e:{f=!1,h&&(h=!1,H(C),C=-1),T=!0;var Z=b;try{t:{for(P(z),y=i(R);y!==null&&!(y.expirationTime>z&&p());){var ce=y.callback;if(typeof ce=="function"){y.callback=null,b=y.priorityLevel;var X=ce(y.expirationTime<=z);if(z=e.unstable_now(),typeof X=="function"){y.callback=X,P(z),G=!0;break t}y===i(R)&&o(R),P(z)}else o(R);y=i(R)}if(y!==null)G=!0;else{var Ee=i(d);Ee!==null&&F(v,Ee.startTime-z),G=!1}}break e}finally{y=null,b=Z,T=!1}G=void 0}}finally{G?A():U=!1}}}var A;if(typeof m=="function")A=function(){m(x)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,M=I.port2;I.port1.onmessage=x,A=function(){M.postMessage(null)}}else A=function(){E(x,0)};function F(z,G){C=E(function(){z(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(z){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var Z=b;b=G;try{return z()}finally{b=Z}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=b;b=z;try{return G()}finally{b=Z}},e.unstable_scheduleCallback=function(z,G,Z){var ce=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ce+Z:ce):Z=ce,z){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Z+X,z={id:S++,callback:G,priorityLevel:z,startTime:Z,expirationTime:X,sortIndex:-1},Z>ce?(z.sortIndex=Z,r(d,z),i(R)===null&&z===i(d)&&(h?(H(C),C=-1):h=!0,F(v,Z-ce))):(z.sortIndex=X,r(R,z),f||T||(f=!0,U||(U=!0,A()))),z},e.unstable_shouldYield=p,e.unstable_wrapCallback=function(z){var G=b;return function(){var Z=b;b=G;try{return z.apply(this,arguments)}finally{b=Z}}}}(Wh)),Wh}var m0;function $w(){return m0||(m0=1,Zh.exports=Ww()),Zh.exports}var $h={exports:{}},Fs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function Gw(){if(h0)return Fs;h0=1;var e=Uf();function r(R){var d="https://react.dev/errors/"+R;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)d+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+R+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},g=Symbol.for("react.portal");function N(R,d,S){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:g,key:y==null?null:""+y,children:R,containerInfo:d,implementation:S}}var B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function j(R,d){if(R==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Fs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Fs.createPortal=function(R,d){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(r(299));return N(R,d,null,S)},Fs.flushSync=function(R){var d=B.T,S=o.p;try{if(B.T=null,o.p=2,R)return R()}finally{B.T=d,o.p=S,o.d.f()}},Fs.preconnect=function(R,d){typeof R=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,o.d.C(R,d))},Fs.prefetchDNS=function(R){typeof R=="string"&&o.d.D(R)},Fs.preinit=function(R,d){if(typeof R=="string"&&d&&typeof d.as=="string"){var S=d.as,y=j(S,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,T=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;S==="style"?o.d.S(R,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:T}):S==="script"&&o.d.X(R,{crossOrigin:y,integrity:b,fetchPriority:T,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Fs.preinitModule=function(R,d){if(typeof R=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var S=j(d.as,d.crossOrigin);o.d.M(R,{crossOrigin:S,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&o.d.M(R)},Fs.preload=function(R,d){if(typeof R=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var S=d.as,y=j(S,d.crossOrigin);o.d.L(R,S,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Fs.preloadModule=function(R,d){if(typeof R=="string")if(d){var S=j(d.as,d.crossOrigin);o.d.m(R,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:S,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else o.d.m(R)},Fs.requestFormReset=function(R){o.d.r(R)},Fs.unstable_batchedUpdates=function(R,d){return R(d)},Fs.useFormState=function(R,d,S){return B.H.useFormState(R,d,S)},Fs.useFormStatus=function(){return B.H.useHostTransitionStatus()},Fs.version="19.1.0",Fs}var f0;function r_(){if(f0)return $h.exports;f0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),$h.exports=Gw(),$h.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function Kw(){if(g0)return Pd;g0=1;var e=$w(),r=Uf(),i=r_();function o(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function N(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function B(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function j(t){if(N(t)!==t)throw Error(o(188))}function R(t){var n=t.alternate;if(!n){if(n=N(t),n===null)throw Error(o(188));return n!==t?null:t}for(var s=t,u=n;;){var D=s.return;if(D===null)break;var V=D.alternate;if(V===null){if(u=D.return,u!==null){s=u;continue}break}if(D.child===V.child){for(V=D.child;V;){if(V===s)return j(D),t;if(V===u)return j(D),n;V=V.sibling}throw Error(o(188))}if(s.return!==u.return)s=D,u=V;else{for(var se=!1,ye=D.child;ye;){if(ye===s){se=!0,s=D,u=V;break}if(ye===u){se=!0,u=D,s=V;break}ye=ye.sibling}if(!se){for(ye=V.child;ye;){if(ye===s){se=!0,s=V,u=D;break}if(ye===u){se=!0,u=V,s=D;break}ye=ye.sibling}if(!se)throw Error(o(189))}}if(s.alternate!==u)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?t:n}function d(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=d(t),n!==null)return n;t=t.sibling}return null}var S=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),m=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),p=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function A(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function M(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case f:return"Fragment";case k:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case U:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case m:return(t.displayName||"Context")+".Provider";case H:return(t._context.displayName||"Context")+".Consumer";case P:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return n=t.displayName||null,n!==null?n:M(t.type)||"Memo";case _:n=t._payload,t=t._init;try{return M(t(n))}catch{}}return null}var F=Array.isArray,z=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ce=[],X=-1;function Ee(t){return{current:t}}function Se(t){0>X||(t.current=ce[X],ce[X]=null,X--)}function xe(t,n){X++,ce[X]=t.current,t.current=n}var _e=Ee(null),Pe=Ee(null),He=Ee(null),pe=Ee(null);function Ge(t,n){switch(xe(He,n),xe(Pe,t),xe(_e,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Bv(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Bv(n),t=zv(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Se(_e),xe(_e,t)}function Te(){Se(_e),Se(Pe),Se(He)}function Ve(t){t.memoizedState!==null&&xe(pe,t);var n=_e.current,s=zv(n,t.type);n!==s&&(xe(Pe,t),xe(_e,s))}function qe(t){Pe.current===t&&(Se(_e),Se(Pe)),pe.current===t&&(Se(pe),xd._currentValue=Z)}var nt=Object.prototype.hasOwnProperty,Bt=e.unstable_scheduleCallback,Pr=e.unstable_cancelCallback,Ur=e.unstable_shouldYield,Zn=e.unstable_requestPaint,fr=e.unstable_now,gr=e.unstable_getCurrentPriorityLevel,Bn=e.unstable_ImmediatePriority,Ie=e.unstable_UserBlockingPriority,Be=e.unstable_NormalPriority,Ye=e.unstable_LowPriority,Qt=e.unstable_IdlePriority,Ft=e.log,xt=e.unstable_setDisableYieldValue,pn=null,Ln=null;function zt(t){if(typeof Ft=="function"&&xt(t),Ln&&typeof Ln.setStrictMode=="function")try{Ln.setStrictMode(pn,t)}catch{}}var sr=Math.clz32?Math.clz32:Vr,Hr=Math.log,Rr=Math.LN2;function Vr(t){return t>>>=0,t===0?32:31-(Hr(t)/Rr|0)|0}var zr=256,Ar=4194304;function $r(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ga(t,n,s){var u=t.pendingLanes;if(u===0)return 0;var D=0,V=t.suspendedLanes,se=t.pingedLanes;t=t.warmLanes;var ye=u&134217727;return ye!==0?(u=ye&~V,u!==0?D=$r(u):(se&=ye,se!==0?D=$r(se):s||(s=ye&~t,s!==0&&(D=$r(s))))):(ye=u&~V,ye!==0?D=$r(ye):se!==0?D=$r(se):s||(s=u&~t,s!==0&&(D=$r(s)))),D===0?0:n!==0&&n!==D&&(n&V)===0&&(V=D&-D,s=n&-n,V>=s||V===32&&(s&4194048)!==0)?n:D}function ea(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function oa(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nn(){var t=zr;return zr<<=1,(zr&4194048)===0&&(zr=256),t}function Ha(){var t=Ar;return Ar<<=1,(Ar&62914560)===0&&(Ar=4194304),t}function Ca(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function Gr(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function dr(t,n,s,u,D,V){var se=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var ye=t.entanglements,Fe=t.expirationTimes,lt=t.hiddenUpdates;for(s=se&~s;0<s;){var It=31-sr(s),Yt=1<<It;ye[It]=0,Fe[It]=-1;var pt=lt[It];if(pt!==null)for(lt[It]=null,It=0;It<pt.length;It++){var gt=pt[It];gt!==null&&(gt.lane&=-536870913)}s&=~Yt}u!==0&&at(t,u,0),V!==0&&D===0&&t.tag!==0&&(t.suspendedLanes|=V&~(se&~n))}function at(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var u=31-sr(n);t.entangledLanes|=n,t.entanglements[u]=t.entanglements[u]|1073741824|s&4194090}function ut(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var u=31-sr(s),D=1<<u;D&n|t[u]&n&&(t[u]|=n),s&=~D}}function Wt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Tt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function tn(){var t=G.p;return t!==0?t:(t=window.event,t===void 0?32:a0(t.type))}function Xt(t,n){var s=G.p;try{return G.p=t,n()}finally{G.p=s}}var Xe=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Xe,Rn="__reactProps$"+Xe,Vn="__reactContainer$"+Xe,or="__reactEvents$"+Xe,$t="__reactListeners$"+Xe,bt="__reactHandles$"+Xe,Pn="__reactResources$"+Xe,kn="__reactMarker$"+Xe;function bn(t){delete t[Sn],delete t[Rn],delete t[or],delete t[$t],delete t[bt]}function Nr(t){var n=t[Sn];if(n)return n;for(var s=t.parentNode;s;){if(n=s[Vn]||s[Sn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Vv(t);t!==null;){if(s=t[Sn])return s;t=Vv(t)}return n}t=s,s=t.parentNode}return null}function Er(t){if(t=t[Sn]||t[Vn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Or(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(o(33))}function Jn(t){var n=t[Pn];return n||(n=t[Pn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Hn(t){t[kn]=!0}var ha=new Set,ca={};function Ta(t,n){Oa(t,n),Oa(t+"Capture",n)}function Oa(t,n){for(ca[t]=n,t=0;t<n.length;t++)ha.add(n[t])}var ss=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ai={},ji={};function os(t){return nt.call(ji,t)?!0:nt.call(ai,t)?!1:ss.test(t)?ji[t]=!0:(ai[t]=!0,!1)}function Ei(t,n,s){if(os(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var u=n.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function Yi(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function qr(t,n,s,u){if(u===null)t.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+u)}}var Si,Ni;function sn(t){if(Si===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Si=n&&n[1]||"",Ni=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Si+t+Ni}var qn=!1;function jn(t,n){if(!t||qn)return"";qn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(n){var Yt=function(){throw Error()};if(Object.defineProperty(Yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Yt,[])}catch(gt){var pt=gt}Reflect.construct(t,[],Yt)}else{try{Yt.call()}catch(gt){pt=gt}t.call(Yt.prototype)}}else{try{throw Error()}catch(gt){pt=gt}(Yt=t())&&typeof Yt.catch=="function"&&Yt.catch(function(){})}}catch(gt){if(gt&&pt&&typeof gt.stack=="string")return[gt.stack,pt.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=u.DetermineComponentFrameRoot(),se=V[0],ye=V[1];if(se&&ye){var Fe=se.split(`
`),lt=ye.split(`
`);for(D=u=0;u<Fe.length&&!Fe[u].includes("DetermineComponentFrameRoot");)u++;for(;D<lt.length&&!lt[D].includes("DetermineComponentFrameRoot");)D++;if(u===Fe.length||D===lt.length)for(u=Fe.length-1,D=lt.length-1;1<=u&&0<=D&&Fe[u]!==lt[D];)D--;for(;1<=u&&0<=D;u--,D--)if(Fe[u]!==lt[D]){if(u!==1||D!==1)do if(u--,D--,0>D||Fe[u]!==lt[D]){var It=`
`+Fe[u].replace(" at new "," at ");return t.displayName&&It.includes("<anonymous>")&&(It=It.replace("<anonymous>",t.displayName)),It}while(1<=u&&0<=D);break}}}finally{qn=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?sn(s):""}function tr(t){switch(t.tag){case 26:case 27:case 5:return sn(t.type);case 16:return sn("Lazy");case 13:return sn("Suspense");case 19:return sn("SuspenseList");case 0:case 15:return jn(t.type,!1);case 11:return jn(t.type.render,!1);case 1:return jn(t.type,!0);case 31:return sn("Activity");default:return""}}function wn(t){try{var n="";do n+=tr(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function On(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ir(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function hr(t){var n=Ir(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),u=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var D=s.get,V=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return D.call(this)},set:function(se){u=""+se,V.call(this,se)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(se){u=""+se},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function vr(t){t._valueTracker||(t._valueTracker=hr(t))}function An(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),u="";return t&&(u=Ir(t)?t.checked?"true":"false":t.value),t=u,t!==s?(n.setValue(t),!0):!1}function jr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ea=/[\n"\\]/g;function ua(t){return t.replace(Ea,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ya(t,n,s,u,D,V,se,ye){t.name="",se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?t.type=se:t.removeAttribute("type"),n!=null?se==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+On(n)):t.value!==""+On(n)&&(t.value=""+On(n)):se!=="submit"&&se!=="reset"||t.removeAttribute("value"),n!=null?Ba(t,se,On(n)):s!=null?Ba(t,se,On(s)):u!=null&&t.removeAttribute("value"),D==null&&V!=null&&(t.defaultChecked=!!V),D!=null&&(t.checked=D&&typeof D!="function"&&typeof D!="symbol"),ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?t.name=""+On(ye):t.removeAttribute("name")}function ja(t,n,s,u,D,V,se,ye){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(t.type=V),n!=null||s!=null){if(!(V!=="submit"&&V!=="reset"||n!=null))return;s=s!=null?""+On(s):"",n=n!=null?""+On(n):s,ye||n===t.value||(t.value=n),t.defaultValue=n}u=u??D,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=ye?t.checked:!!u,t.defaultChecked=!!u,se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(t.name=se)}function Ba(t,n,s){n==="number"&&jr(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function $a(t,n,s,u){if(t=t.options,n){n={};for(var D=0;D<s.length;D++)n["$"+s[D]]=!0;for(s=0;s<t.length;s++)D=n.hasOwnProperty("$"+t[s].value),t[s].selected!==D&&(t[s].selected=D),D&&u&&(t[s].defaultSelected=!0)}else{for(s=""+On(s),n=null,D=0;D<t.length;D++){if(t[D].value===s){t[D].selected=!0,u&&(t[D].defaultSelected=!0);return}n!==null||t[D].disabled||(n=t[D])}n!==null&&(n.selected=!0)}}function Sa(t,n,s){if(n!=null&&(n=""+On(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+On(s):""}function Qa(t,n,s,u){if(n==null){if(u!=null){if(s!=null)throw Error(o(92));if(F(u)){if(1<u.length)throw Error(o(93));u=u[0]}s=u}s==null&&(s=""),n=s}s=On(n),t.defaultValue=s,u=t.textContent,u===s&&u!==""&&u!==null&&(t.value=u)}function pi(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Ms=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qi(t,n,s){var u=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":u?t.setProperty(n,s):typeof s!="number"||s===0||Ms.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function cs(t,n,s){if(n!=null&&typeof n!="object")throw Error(o(62));if(t=t.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||n!=null&&n.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var D in n)u=n[D],n.hasOwnProperty(D)&&s[D]!==u&&Qi(t,D,u)}else for(var V in n)n.hasOwnProperty(V)&&Qi(t,V,n[V])}function mi(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var to=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bs(t){return Zs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ls=null;function ls(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ji=null,us=null;function Io(t){var n=Er(t);if(n&&(t=n.stateNode)){var s=t[Rn]||null;e:switch(t=n.stateNode,n.type){case"input":if(ya(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ua(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var u=s[n];if(u!==t&&u.form===t.form){var D=u[Rn]||null;if(!D)throw Error(o(90));ya(u,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(n=0;n<s.length;n++)u=s[n],u.form===t.form&&An(u)}break e;case"textarea":Sa(t,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&$a(t,!!s.multiple,n,!1)}}}var yr=!1;function xi(t,n,s){if(yr)return t(n,s);yr=!0;try{var u=t(n);return u}finally{if(yr=!1,(Ji!==null||us!==null)&&(bp(),Ji&&(n=Ji,t=us,us=Ji=null,Io(n),t)))for(n=0;n<t.length;n++)Io(t[n])}}function ta(t,n){var s=t.stateNode;if(s===null)return null;var u=s[Rn]||null;if(u===null)return null;s=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(o(231,n,typeof s));return s}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Is=!1;if(Bi)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Is=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Is=!1}var Ai=null,zi=null,Ui=null;function lr(){if(Ui)return Ui;var t,n=zi,s=n.length,u,D="value"in Ai?Ai.value:Ai.textContent,V=D.length;for(t=0;t<s&&n[t]===D[t];t++);var se=s-t;for(u=1;u<=se&&n[s-u]===D[V-u];u++);return Ui=D.slice(t,1<u?1-u:void 0)}function Da(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Oi(){return!0}function Eo(){return!1}function ti(t){function n(s,u,D,V,se){this._reactName=s,this._targetInst=D,this.type=u,this.nativeEvent=V,this.target=se,this.currentTarget=null;for(var ye in t)t.hasOwnProperty(ye)&&(s=t[ye],this[ye]=s?s(V):V[ye]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Oi:Eo,this.isPropagationStopped=Eo,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),n}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=ti(ws),Fa=S({},ws,{view:0,detail:0}),Xo=ti(Fa),Di,Dr,Hi,ni=S({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hi&&(Hi&&t.type==="mousemove"?(Di=t.screenX-Hi.screenX,Dr=t.screenY-Hi.screenY):Dr=Di=0,Hi=t),Di)},movementY:function(t){return"movementY"in t?t.movementY:Dr}}),Es=ti(ni),So=S({},ni,{dataTransfer:0}),xo=ti(So),js=S({},Fa,{relatedTarget:0}),on=ti(js),ve=S({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Pt=ti(ve),$n=S({},ws,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aa=ti($n),Va=S({},ws,{data:0}),ii=ti(Va),Dc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=kr[t])?!!n[t]:!1}function jo(){return Lc}var no=S({},Fa,{key:function(t){if(t.key){var n=Dc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Da(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jo,charCode:function(t){return t.type==="keypress"?Da(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Da(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$s=ti(no),Ss=S({},ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gs=ti(Ss),bc=S({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jo}),Ic=ti(bc),ec=S({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ri=ti(ec),il=S({},ni,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tc=ti(il),nc=S({},ws,{newState:0,oldState:0}),ro=ti(nc),sl=[9,13,27,32],xa=Bi&&"CompositionEvent"in window,Ma=null;Bi&&"documentMode"in document&&(Ma=document.documentMode);var jc=Bi&&"TextEvent"in window&&!Ma,Bc=Bi&&(!xa||Ma&&8<Ma&&11>=Ma),ft=" ",ao=!1;function Xn(t,n){switch(t){case"keyup":return sl.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var io=!1;function hi(t,n){switch(t){case"compositionend":return rc(n);case"keypress":return n.which!==32?null:(ao=!0,ft);case"textInput":return t=n.data,t===ft&&ao?null:t;default:return null}}function fe(t,n){if(io)return t==="compositionend"||!xa&&Xn(t,n)?(t=lr(),Ui=zi=Ai=null,io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Bc&&n.locale!=="ko"?null:n.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Cn[t.type]:n==="textarea"}function Bo(t,n,s,u){Ji?us?us.push(u):us=[u]:Ji=u,n=kp(n,"onChange"),0<n.length&&(s=new Ws("onChange","change",null,s,u),t.push({event:s,listeners:n}))}var Ra=null,te=null;function $(t){Dv(t,0)}function Y(t){var n=Or(t);if(An(n))return t}function oe(t,n){if(t==="change")return n}var De=!1;if(Bi){var rt;if(Bi){var St="oninput"in document;if(!St){var Dt=document.createElement("div");Dt.setAttribute("oninput","return;"),St=typeof Dt.oninput=="function"}rt=St}else rt=!1;De=rt&&(!document.documentMode||9<document.documentMode)}function _t(){Ra&&(Ra.detachEvent("onpropertychange",Tn),te=Ra=null)}function Tn(t){if(t.propertyName==="value"&&Y(te)){var n=[];Bo(n,te,t,ls(t)),xi($,n)}}function Vt(t,n,s){t==="focusin"?(_t(),Ra=n,te=s,Ra.attachEvent("onpropertychange",Tn)):t==="focusout"&&_t()}function zn(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Y(te)}function vn(t,n){if(t==="click")return Y(n)}function Yr(t,n){if(t==="input"||t==="change")return Y(n)}function Fr(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var ia=typeof Object.is=="function"?Object.is:Fr;function Qr(t,n){if(ia(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),u=Object.keys(n);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var D=s[u];if(!nt.call(n,D)||!ia(t[D],n[D]))return!1}return!0}function xs(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rs(t,n){var s=xs(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=n&&u>=n)return{node:s,offset:n-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=xs(s)}}function Xi(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Xi(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Ks(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=jr(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=jr(t.document)}return n}function Ys(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var so=Bi&&"documentMode"in document&&11>=document.documentMode,Mi=null,Fi=null,oo=null,ac=!1;function zo(t,n,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ac||Mi==null||Mi!==jr(u)||(u=Mi,"selectionStart"in u&&Ys(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),oo&&Qr(oo,u)||(oo=u,u=kp(Fi,"onSelect"),0<u.length&&(n=new Ws("onSelect","select",null,n,s),t.push({event:n,listeners:u}),n.target=Mi)))}function Vi(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Bs={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionrun:Vi("Transition","TransitionRun"),transitionstart:Vi("Transition","TransitionStart"),transitioncancel:Vi("Transition","TransitionCancel"),transitionend:Vi("Transition","TransitionEnd")},Ro={},ic={};Bi&&(ic=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function ks(t){if(Ro[t])return Ro[t];if(!Bs[t])return t;var n=Bs[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in ic)return Ro[t]=n[s];return t}var Uo=ks("animationend"),qi=ks("animationiteration"),Cs=ks("animationstart"),wc=ks("transitionrun"),ko=ks("transitionstart"),Ho=ks("transitioncancel"),co=ks("transitionend"),Co=new Map,ki="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ki.push("scrollEnd");function fi(t,n){Co.set(t,n),Ta(n,[t])}var ds=new WeakMap;function ri(t,n){if(typeof t=="object"&&t!==null){var s=ds.get(t);return s!==void 0?s:(n={value:t,source:n,stack:wn(n)},ds.set(t,n),n)}return{value:t,source:n,stack:wn(n)}}var gi=[],Qs=0,Zi=0;function lo(){for(var t=Qs,n=Zi=Qs=0;n<t;){var s=gi[n];gi[n++]=null;var u=gi[n];gi[n++]=null;var D=gi[n];gi[n++]=null;var V=gi[n];if(gi[n++]=null,u!==null&&D!==null){var se=u.pending;se===null?D.next=D:(D.next=se.next,se.next=D),u.pending=D}V!==0&&To(s,D,V)}}function vi(t,n,s,u){gi[Qs++]=t,gi[Qs++]=n,gi[Qs++]=s,gi[Qs++]=u,Zi|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function Js(t,n,s,u){return vi(t,n,s,u),ps(t)}function zs(t,n){return vi(t,null,null,n),ps(t)}function To(t,n,s){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s);for(var D=!1,V=t.return;V!==null;)V.childLanes|=s,u=V.alternate,u!==null&&(u.childLanes|=s),V.tag===22&&(t=V.stateNode,t===null||t._visibility&1||(D=!0)),t=V,V=V.return;return t.tag===3?(V=t.stateNode,D&&n!==null&&(D=31-sr(s),t=V.hiddenUpdates,u=t[D],u===null?t[D]=[n]:u.push(n),n.lane=s|536870912),V):null}function ps(t){if(50<gd)throw gd=0,mh=null,Error(o(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var uo={};function zc(t,n,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(t,n,s,u){return new zc(t,n,s,u)}function Po(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ts(t,n){var s=t.alternate;return s===null?(s=_a(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function sc(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Fo(t,n,s,u,D,V){var se=0;if(u=t,typeof t=="function")Po(t)&&(se=1);else if(typeof t=="string")se=Aw(t,s,_e.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case w:return t=_a(31,s,n,D),t.elementType=w,t.lanes=V,t;case f:return es(s.children,D,V,n);case h:se=8,D|=24;break;case k:return t=_a(12,s,n,D|2),t.elementType=k,t.lanes=V,t;case v:return t=_a(13,s,n,D),t.elementType=v,t.lanes=V,t;case U:return t=_a(19,s,n,D),t.elementType=U,t.lanes=V,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E:case m:se=10;break e;case H:se=9;break e;case P:se=11;break e;case C:se=14;break e;case _:se=16,u=null;break e}se=29,s=Error(o(130,t===null?"null":typeof t,"")),u=null}return n=_a(se,s,n,D),n.elementType=t,n.type=u,n.lanes=V,n}function es(t,n,s,u){return t=_a(7,t,u,n),t.lanes=s,t}function No(t,n,s){return t=_a(6,t,null,n),t.lanes=s,t}function po(t,n,s){return n=_a(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var ts=[],Ps=0,a=null,l=0,O=[],q=0,ee=null,me=1,je="";function st(t,n){ts[Ps++]=l,ts[Ps++]=a,a=t,l=n}function dt(t,n,s){O[q++]=me,O[q++]=je,O[q++]=ee,ee=t;var u=me;t=je;var D=32-sr(u)-1;u&=~(1<<D),s+=1;var V=32-sr(n)+D;if(30<V){var se=D-D%5;V=(u&(1<<se)-1).toString(32),u>>=se,D-=se,me=1<<32-sr(n)+D|s<<D|u,je=V+t}else me=1<<V|s<<D|u,je=t}function Gt(t){t.return!==null&&(st(t,1),dt(t,1,0))}function Mn(t){for(;t===a;)a=ts[--Ps],ts[Ps]=null,l=ts[--Ps],ts[Ps]=null;for(;t===ee;)ee=O[--q],O[q]=null,je=O[--q],O[q]=null,me=O[--q],O[q]=null}var Un=null,Yn=null,Sr=!1,va=null,Na=!1,Ja=Error(o(519));function yi(t){var n=Error(o(418,""));throw ms(ri(n,t)),Ja}function Vo(t){var n=t.stateNode,s=t.type,u=t.memoizedProps;switch(n[Sn]=t,n[Rn]=u,s){case"dialog":pa("cancel",n),pa("close",n);break;case"iframe":case"object":case"embed":pa("load",n);break;case"video":case"audio":for(s=0;s<yd.length;s++)pa(yd[s],n);break;case"source":pa("error",n);break;case"img":case"image":case"link":pa("error",n),pa("load",n);break;case"details":pa("toggle",n);break;case"input":pa("invalid",n),ja(n,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),vr(n);break;case"select":pa("invalid",n);break;case"textarea":pa("invalid",n),Qa(n,u.value,u.defaultValue,u.children),vr(n)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||u.suppressHydrationWarning===!0||jv(n.textContent,s)?(u.popover!=null&&(pa("beforetoggle",n),pa("toggle",n)),u.onScroll!=null&&pa("scroll",n),u.onScrollEnd!=null&&pa("scrollend",n),u.onClick!=null&&(n.onclick=Cp),n=!0):n=!1,n||yi(t)}function Uc(t){for(Un=t.return;Un;)switch(Un.tag){case 5:case 13:Na=!1;return;case 27:case 3:Na=!0;return;default:Un=Un.return}}function mo(t){if(t!==Un)return!1;if(!Sr)return Uc(t),Sr=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Ph(t.type,t.memoizedProps)),s=!s),s&&Yn&&yi(t),Uc(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){Yn=dc(t.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}Yn=null}}else n===27?(n=Yn,bl(t.type)?(t=Dh,Dh=null,Yn=t):Yn=n):Yn=Un?dc(t.stateNode.nextSibling):null;return!0}function Us(){Yn=Un=null,Sr=!1}function oc(){var t=va;return t!==null&&(go===null?go=t:go.push.apply(go,t),va=null),t}function ms(t){va===null?va=[t]:va.push(t)}var La=Ee(null),ns=null,Hs=null;function Xs(t,n,s){xe(La,n._currentValue),n._currentValue=s}function qa(t){t._currentValue=La.current,Se(La)}function qo(t,n,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),t===s)break;t=t.return}}function cc(t,n,s,u){var D=t.child;for(D!==null&&(D.return=t);D!==null;){var V=D.dependencies;if(V!==null){var se=D.child;V=V.firstContext;e:for(;V!==null;){var ye=V;V=D;for(var Fe=0;Fe<n.length;Fe++)if(ye.context===n[Fe]){V.lanes|=s,ye=V.alternate,ye!==null&&(ye.lanes|=s),qo(V.return,s,t),u||(se=null);break e}V=ye.next}}else if(D.tag===18){if(se=D.return,se===null)throw Error(o(341));se.lanes|=s,V=se.alternate,V!==null&&(V.lanes|=s),qo(se,s,t),se=null}else se=D.child;if(se!==null)se.return=D;else for(se=D;se!==null;){if(se===t){se=null;break}if(D=se.sibling,D!==null){D.return=se.return,se=D;break}se=se.return}D=se}}function ho(t,n,s,u){t=null;for(var D=n,V=!1;D!==null;){if(!V){if((D.flags&524288)!==0)V=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var se=D.alternate;if(se===null)throw Error(o(387));if(se=se.memoizedProps,se!==null){var ye=D.type;ia(D.pendingProps.value,se.value)||(t!==null?t.push(ye):t=[ye])}}else if(D===pe.current){if(se=D.alternate,se===null)throw Error(o(387));se.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(t!==null?t.push(xd):t=[xd])}D=D.return}t!==null&&cc(n,t,s,u),n.flags|=262144}function Ec(t){for(t=t.firstContext;t!==null;){if(!ia(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function hs(t){ns=t,Hs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function si(t){return Al(ns,t)}function Hc(t,n){return ns===null&&hs(t),Al(t,n)}function Al(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Hs===null){if(t===null)throw Error(o(308));Hs=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Hs=Hs.next=n;return s}var Ol=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,u){t.push(u)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},Dl=e.unstable_scheduleCallback,Fc=e.unstable_NormalPriority,oi={$$typeof:m,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zo(){return{controller:new Ol,data:new Map,refCount:0}}function Wo(t){t.refCount--,t.refCount===0&&Dl(Fc,function(){t.controller.abort()})}var $o=null,Ga=0,Go=0,lc=null;function Ml(t,n){if($o===null){var s=$o=[];Ga=0,Go=bh(),lc={status:"pending",value:void 0,then:function(u){s.push(u)}}}return Ga++,n.then(Ll,Ll),n}function Ll(){if(--Ga===0&&$o!==null){lc!==null&&(lc.status="fulfilled");var t=$o;$o=null,Go=0,lc=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function su(t,n){var s=[],u={status:"pending",value:null,reason:null,then:function(D){s.push(D)}};return t.then(function(){u.status="fulfilled",u.value=n;for(var D=0;D<s.length;D++)(0,s[D])(n)},function(D){for(u.status="rejected",u.reason=D,D=0;D<s.length;D++)(0,s[D])(void 0)}),u}var Vc=z.S;z.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&Ml(t,n),Vc!==null&&Vc(t,n)};var ge=Ee(null);function J(){var t=ge.current;return t!==null?t:Xa.pooledCache}function re(t,n){n===null?xe(ge,ge.current):xe(ge,n.pool)}function ae(){var t=J();return t===null?null:{parent:oi._currentValue,pool:t}}var ie=Error(o(460)),le=Error(o(474)),Ne=Error(o(542)),Me={then:function(){}};function ze(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Et(){}function kt(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(Et,Et),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,jt(t),t;default:if(typeof n.status=="string")n.then(Et,Et);else{if(t=Xa,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=n,t.status="pending",t.then(function(u){if(n.status==="pending"){var D=n;D.status="fulfilled",D.value=u}},function(u){if(n.status==="pending"){var D=n;D.status="rejected",D.reason=u}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,jt(t),t}throw Ut=n,ie}}var Ut=null;function mn(){if(Ut===null)throw Error(o(459));var t=Ut;return Ut=null,t}function jt(t){if(t===ie||t===Ne)throw Error(o(483))}var an=!1;function hn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ce(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function mt(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Nt(t,n,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(za&2)!==0){var D=u.pending;return D===null?n.next=n:(n.next=D.next,D.next=n),u.pending=n,n=ps(t),To(t,null,s),n}return vi(t,u,n,s),ps(t)}function ht(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var u=n.lanes;u&=t.pendingLanes,s|=u,n.lanes=s,ut(t,s)}}function At(t,n){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var D=null,V=null;if(s=s.firstBaseUpdate,s!==null){do{var se={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};V===null?D=V=se:V=V.next=se,s=s.next}while(s!==null);V===null?D=V=n:V=V.next=n}else D=V=n;s={baseState:u.baseState,firstBaseUpdate:D,lastBaseUpdate:V,shared:u.shared,callbacks:u.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var Ke=!1;function Mt(){if(Ke){var t=lc;if(t!==null)throw t}}function rn(t,n,s,u){Ke=!1;var D=t.updateQueue;an=!1;var V=D.firstBaseUpdate,se=D.lastBaseUpdate,ye=D.shared.pending;if(ye!==null){D.shared.pending=null;var Fe=ye,lt=Fe.next;Fe.next=null,se===null?V=lt:se.next=lt,se=Fe;var It=t.alternate;It!==null&&(It=It.updateQueue,ye=It.lastBaseUpdate,ye!==se&&(ye===null?It.firstBaseUpdate=lt:ye.next=lt,It.lastBaseUpdate=Fe))}if(V!==null){var Yt=D.baseState;se=0,It=lt=Fe=null,ye=V;do{var pt=ye.lane&-536870913,gt=pt!==ye.lane;if(gt?(ba&pt)===pt:(u&pt)===pt){pt!==0&&pt===Go&&(Ke=!0),It!==null&&(It=It.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var Lr=t,Cr=ye;pt=n;var Wa=s;switch(Cr.tag){case 1:if(Lr=Cr.payload,typeof Lr=="function"){Yt=Lr.call(Wa,Yt,pt);break e}Yt=Lr;break e;case 3:Lr.flags=Lr.flags&-65537|128;case 0:if(Lr=Cr.payload,pt=typeof Lr=="function"?Lr.call(Wa,Yt,pt):Lr,pt==null)break e;Yt=S({},Yt,pt);break e;case 2:an=!0}}pt=ye.callback,pt!==null&&(t.flags|=64,gt&&(t.flags|=8192),gt=D.callbacks,gt===null?D.callbacks=[pt]:gt.push(pt))}else gt={lane:pt,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},It===null?(lt=It=gt,Fe=Yt):It=It.next=gt,se|=pt;if(ye=ye.next,ye===null){if(ye=D.shared.pending,ye===null)break;gt=ye,ye=gt.next,gt.next=null,D.lastBaseUpdate=gt,D.shared.pending=null}}while(!0);It===null&&(Fe=Yt),D.baseState=Fe,D.firstBaseUpdate=lt,D.lastBaseUpdate=It,V===null&&(D.shared.lanes=0),gl|=se,t.lanes=se,t.memoizedState=Yt}}function qt(t,n){if(typeof t!="function")throw Error(o(191,t));t.call(n)}function ln(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)qt(s[t],n)}var en=Ee(null),yn=Ee(0);function cn(t,n){t=Yc,xe(yn,t),xe(en,n),Yc=t|n.baseLanes}function Kt(){xe(yn,Yc),xe(en,en.current)}function cr(){Yc=yn.current,Se(en),Se(yn)}var er=0,Ct=null,En=null,_r=null,Zr=!1,Jr=!1,ka=!1,Aa=0,Br=0,W=null,K=0;function Q(){throw Error(o(321))}function de(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!ia(t[s],n[s]))return!1;return!0}function Re(t,n,s,u,D,V){return er=V,Ct=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,z.H=t===null||t.memoizedState===null?vg:yg,ka=!1,V=s(u,D),ka=!1,Jr&&(V=we(n,s,u,D)),be(t),V}function be(t){z.H=op;var n=En!==null&&En.next!==null;if(er=0,_r=En=Ct=null,Zr=!1,Br=0,W=null,n)throw Error(o(300));t===null||gs||(t=t.dependencies,t!==null&&Ec(t)&&(gs=!0))}function we(t,n,s,u){Ct=t;var D=0;do{if(Jr&&(W=null),Br=0,Jr=!1,25<=D)throw Error(o(301));if(D+=1,_r=En=null,t.updateQueue!=null){var V=t.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}z.H=F1,V=n(s,u)}while(Jr);return V}function We(){var t=z.H,n=t.useState()[0];return n=typeof n.then=="function"?ue(n):n,t=t.useState()[0],(En!==null?En.memoizedState:null)!==t&&(Ct.flags|=1024),n}function ke(){var t=Aa!==0;return Aa=0,t}function Oe(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Qe(t){if(Zr){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Zr=!1}er=0,_r=En=Ct=null,Jr=!1,Br=Aa=0,W=null}function $e(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?Ct.memoizedState=_r=t:_r=_r.next=t,_r}function Ae(){if(En===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=En.next;var n=_r===null?Ct.memoizedState:_r.next;if(n!==null)_r=n,En=t;else{if(t===null)throw Ct.alternate===null?Error(o(467)):Error(o(310));En=t,t={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},_r===null?Ct.memoizedState=_r=t:_r=_r.next=t}return _r}function et(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ue(t){var n=Br;return Br+=1,W===null&&(W=[]),t=kt(W,t,n),n=Ct,(_r===null?n.memoizedState:_r.next)===null&&(n=n.alternate,z.H=n===null||n.memoizedState===null?vg:yg),t}function he(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ue(t);if(t.$$typeof===m)return si(t)}throw Error(o(438,String(t)))}function Le(t){var n=null,s=Ct.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var u=Ct.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(n={data:u.data.map(function(D){return D.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=et(),Ct.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),u=0;u<t;u++)s[u]=p;return n.index++,s}function Ze(t,n){return typeof n=="function"?n(t):n}function tt(t){var n=Ae();return Jt(n,En,t)}function Jt(t,n,s){var u=t.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=s;var D=t.baseQueue,V=u.pending;if(V!==null){if(D!==null){var se=D.next;D.next=V.next,V.next=se}n.baseQueue=D=V,u.pending=null}if(V=t.baseState,D===null)t.memoizedState=V;else{n=D.next;var ye=se=null,Fe=null,lt=n,It=!1;do{var Yt=lt.lane&-536870913;if(Yt!==lt.lane?(ba&Yt)===Yt:(er&Yt)===Yt){var pt=lt.revertLane;if(pt===0)Fe!==null&&(Fe=Fe.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Yt===Go&&(It=!0);else if((er&pt)===pt){lt=lt.next,pt===Go&&(It=!0);continue}else Yt={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Fe===null?(ye=Fe=Yt,se=V):Fe=Fe.next=Yt,Ct.lanes|=pt,gl|=pt;Yt=lt.action,ka&&s(V,Yt),V=lt.hasEagerState?lt.eagerState:s(V,Yt)}else pt={lane:Yt,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Fe===null?(ye=Fe=pt,se=V):Fe=Fe.next=pt,Ct.lanes|=Yt,gl|=Yt;lt=lt.next}while(lt!==null&&lt!==n);if(Fe===null?se=V:Fe.next=ye,!ia(V,t.memoizedState)&&(gs=!0,It&&(s=lc,s!==null)))throw s;t.memoizedState=V,t.baseState=se,t.baseQueue=Fe,u.lastRenderedState=V}return D===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function vt(t){var n=Ae(),s=n.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=t;var u=s.dispatch,D=s.pending,V=n.memoizedState;if(D!==null){s.pending=null;var se=D=D.next;do V=t(V,se.action),se=se.next;while(se!==D);ia(V,n.memoizedState)||(gs=!0),n.memoizedState=V,n.baseQueue===null&&(n.baseState=V),s.lastRenderedState=V}return[V,u]}function Rt(t,n,s){var u=Ct,D=Ae(),V=Sr;if(V){if(s===void 0)throw Error(o(407));s=s()}else s=n();var se=!ia((En||D).memoizedState,s);se&&(D.memoizedState=s,gs=!0),D=D.queue;var ye=Ue.bind(null,u,D,t);if(qc(2048,8,ye,[t]),D.getSnapshot!==n||se||_r!==null&&_r.memoizedState.tag&1){if(u.flags|=2048,fs(9,ol(),ct.bind(null,u,D,s,n),null),Xa===null)throw Error(o(349));V||(er&124)!==0||xn(u,n,s)}return s}function xn(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Ct.updateQueue,n===null?(n=et(),Ct.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function ct(t,n,s,u){n.value=s,n.getSnapshot=u,yt(n)&&fn(t)}function Ue(t,n,s){return s(function(){yt(n)&&fn(t)})}function yt(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!ia(t,s)}catch{return!0}}function fn(t){var n=zs(t,2);n!==null&&Lo(n,t,2)}function nn(t){var n=$e();if(typeof t=="function"){var s=t;if(t=s(),ka){zt(!0);try{s()}finally{zt(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ze,lastRenderedState:t},n}function un(t,n,s,u){return t.baseState=s,Jt(t,En,typeof u=="function"?u:Ze)}function Qn(t,n,s,u,D){if(pr(t))throw Error(o(485));if(t=n.action,t!==null){var V={payload:D,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(se){V.listeners.push(se)}};z.T!==null?s(!0):V.isTransition=!1,u(V),s=n.pending,s===null?(V.next=n.pending=V,xr(n,V)):(V.next=s.next,n.pending=s.next=V)}}function xr(t,n){var s=n.action,u=n.payload,D=t.state;if(n.isTransition){var V=z.T,se={};z.T=se;try{var ye=s(D,u),Fe=z.S;Fe!==null&&Fe(se,ye),_n(t,n,ye)}catch(lt){br(t,n,lt)}finally{z.T=V}}else try{V=s(D,u),_n(t,n,V)}catch(lt){br(t,n,lt)}}function _n(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){dn(t,n,u)},function(u){return br(t,n,u)}):dn(t,n,s)}function dn(t,n,s){n.status="fulfilled",n.value=s,ur(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,xr(t,s)))}function br(t,n,s){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do n.status="rejected",n.reason=s,ur(n),n=n.next;while(n!==u)}t.action=null}function ur(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Gn(t,n){return n}function In(t,n){if(Sr){var s=Xa.formState;if(s!==null){e:{var u=Ct;if(Sr){if(Yn){t:{for(var D=Yn,V=Na;D.nodeType!==8;){if(!V){D=null;break t}if(D=dc(D.nextSibling),D===null){D=null;break t}}V=D.data,D=V==="F!"||V==="F"?D:null}if(D){Yn=dc(D.nextSibling),u=D.data==="F!";break e}}yi(u)}u=!1}u&&(n=s[0])}}return s=$e(),s.memoizedState=s.baseState=n,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:n},s.queue=u,s=sd.bind(null,Ct,u),u.dispatch=s,u=nn(!1),V=gu.bind(null,Ct,!1,u.queue),u=$e(),D={state:n,dispatch:null,action:t,pending:null},u.queue=D,s=Qn.bind(null,Ct,D,V,s),D.dispatch=s,u.memoizedState=t,[n,s,!1]}function gn(t){var n=Ae();return Mr(n,En,t)}function Mr(t,n,s){if(n=Jt(t,n,Gn)[0],t=tt(Ze)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var u=ue(n)}catch(se){throw se===ie?Ne:se}else u=n;n=Ae();var D=n.queue,V=D.dispatch;return s!==n.memoizedState&&(Ct.flags|=2048,fs(9,ol(),fa.bind(null,D,s),null)),[u,V,t]}function fa(t,n){t.action=n}function Ci(t){var n=Ae(),s=En;if(s!==null)return Mr(n,s,t);Ae(),n=n.memoizedState,s=Ae();var u=s.queue.dispatch;return s.memoizedState=t,[n,u,!1]}function fs(t,n,s,u){return t={tag:t,create:s,deps:u,inst:n,next:null},n=Ct.updateQueue,n===null&&(n=et(),Ct.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,n.lastEffect=t),t}function ol(){return{destroy:void 0,resource:void 0}}function ou(){return Ae().memoizedState}function Il(t,n,s,u){var D=$e();u=u===void 0?null:u,Ct.flags|=t,D.memoizedState=fs(1|n,ol(),s,u)}function qc(t,n,s,u){var D=Ae();u=u===void 0?null:u;var V=D.memoizedState.inst;En!==null&&u!==null&&de(u,En.memoizedState.deps)?D.memoizedState=fs(n,V,s,u):(Ct.flags|=t,D.memoizedState=fs(1|n,V,s,u))}function cu(t,n){Il(8390656,8,t,n)}function lu(t,n){qc(2048,8,t,n)}function Ju(t,n){return qc(4,2,t,n)}function uu(t,n){return qc(4,4,t,n)}function Xu(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function ed(t,n,s){s=s!=null?s.concat([t]):null,qc(4,4,Xu.bind(null,n,t),s)}function jl(){}function td(t,n){var s=Ae();n=n===void 0?null:n;var u=s.memoizedState;return n!==null&&de(n,u[1])?u[0]:(s.memoizedState=[t,n],t)}function du(t,n){var s=Ae();n=n===void 0?null:n;var u=s.memoizedState;if(n!==null&&de(n,u[1]))return u[0];if(u=t(),ka){zt(!0);try{t()}finally{zt(!1)}}return s.memoizedState=[u,n],u}function Bl(t,n,s){return s===void 0||(er&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=uv(),Ct.lanes|=t,gl|=t,s)}function pu(t,n,s,u){return ia(s,n)?s:en.current!==null?(t=Bl(t,s,u),ia(t,n)||(gs=!0),t):(er&42)===0?(gs=!0,t.memoizedState=s):(t=uv(),Ct.lanes|=t,gl|=t,n)}function mu(t,n,s,u,D){var V=G.p;G.p=V!==0&&8>V?V:8;var se=z.T,ye={};z.T=ye,gu(t,!1,n,s);try{var Fe=D(),lt=z.S;if(lt!==null&&lt(ye,Fe),Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var It=su(Fe,u);cl(t,n,It,Mo(t))}else cl(t,n,u,Mo(t))}catch(Yt){cl(t,n,{then:function(){},status:"rejected",reason:Yt},Mo())}finally{G.p=V,z.T=se}}function ap(){}function hu(t,n,s,u){if(t.tag!==5)throw Error(o(476));var D=nd(t).queue;mu(t,D,n,Z,s===null?ap:function(){return rd(t),s(u)})}function nd(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ze,lastRenderedState:Z},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ze,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function rd(t){var n=nd(t).next.queue;cl(t,n,{},Mo())}function fu(){return si(xd)}function ad(){return Ae().memoizedState}function id(){return Ae().memoizedState}function ip(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=Mo();t=mt(s);var u=Nt(n,t,s);u!==null&&(Lo(u,n,s),ht(u,n,s)),n={cache:Zo()},t.payload=n;return}n=n.return}}function sp(t,n,s){var u=Mo();s={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},pr(t)?Fn(n,s):(s=Js(t,n,s,u),s!==null&&(Lo(s,t,u),ll(s,n,u)))}function sd(t,n,s){var u=Mo();cl(t,n,s,u)}function cl(t,n,s,u){var D={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(pr(t))Fn(n,D);else{var V=t.alternate;if(t.lanes===0&&(V===null||V.lanes===0)&&(V=n.lastRenderedReducer,V!==null))try{var se=n.lastRenderedState,ye=V(se,s);if(D.hasEagerState=!0,D.eagerState=ye,ia(ye,se))return vi(t,n,D,0),Xa===null&&lo(),!1}catch{}finally{}if(s=Js(t,n,D,u),s!==null)return Lo(s,t,u),ll(s,n,u),!0}return!1}function gu(t,n,s,u){if(u={lane:2,revertLane:bh(),action:u,hasEagerState:!1,eagerState:null,next:null},pr(t)){if(n)throw Error(o(479))}else n=Js(t,s,u,2),n!==null&&Lo(n,t,2)}function pr(t){var n=t.alternate;return t===Ct||n!==null&&n===Ct}function Fn(t,n){Jr=Zr=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function ll(t,n,s){if((s&4194048)!==0){var u=n.lanes;u&=t.pendingLanes,s|=u,n.lanes=s,ut(t,s)}}var op={readContext:si,use:he,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useLayoutEffect:Q,useInsertionEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useSyncExternalStore:Q,useId:Q,useHostTransitionStatus:Q,useFormState:Q,useActionState:Q,useOptimistic:Q,useMemoCache:Q,useCacheRefresh:Q},vg={readContext:si,use:he,useCallback:function(t,n){return $e().memoizedState=[t,n===void 0?null:n],t},useContext:si,useEffect:cu,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,Il(4194308,4,Xu.bind(null,n,t),s)},useLayoutEffect:function(t,n){return Il(4194308,4,t,n)},useInsertionEffect:function(t,n){Il(4,2,t,n)},useMemo:function(t,n){var s=$e();n=n===void 0?null:n;var u=t();if(ka){zt(!0);try{t()}finally{zt(!1)}}return s.memoizedState=[u,n],u},useReducer:function(t,n,s){var u=$e();if(s!==void 0){var D=s(n);if(ka){zt(!0);try{s(n)}finally{zt(!1)}}}else D=n;return u.memoizedState=u.baseState=D,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:D},u.queue=t,t=t.dispatch=sp.bind(null,Ct,t),[u.memoizedState,t]},useRef:function(t){var n=$e();return t={current:t},n.memoizedState=t},useState:function(t){t=nn(t);var n=t.queue,s=sd.bind(null,Ct,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:jl,useDeferredValue:function(t,n){var s=$e();return Bl(s,t,n)},useTransition:function(){var t=nn(!1);return t=mu.bind(null,Ct,t.queue,!0,!1),$e().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var u=Ct,D=$e();if(Sr){if(s===void 0)throw Error(o(407));s=s()}else{if(s=n(),Xa===null)throw Error(o(349));(ba&124)!==0||xn(u,n,s)}D.memoizedState=s;var V={value:s,getSnapshot:n};return D.queue=V,cu(Ue.bind(null,u,V,t),[t]),u.flags|=2048,fs(9,ol(),ct.bind(null,u,V,s,n),null),s},useId:function(){var t=$e(),n=Xa.identifierPrefix;if(Sr){var s=je,u=me;s=(u&~(1<<32-sr(u)-1)).toString(32)+s,n="«"+n+"R"+s,s=Aa++,0<s&&(n+="H"+s.toString(32)),n+="»"}else s=K++,n="«"+n+"r"+s.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:fu,useFormState:In,useActionState:In,useOptimistic:function(t){var n=$e();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=gu.bind(null,Ct,!0,s),s.dispatch=n,[t,n]},useMemoCache:Le,useCacheRefresh:function(){return $e().memoizedState=ip.bind(null,Ct)}},yg={readContext:si,use:he,useCallback:td,useContext:si,useEffect:lu,useImperativeHandle:ed,useInsertionEffect:Ju,useLayoutEffect:uu,useMemo:du,useReducer:tt,useRef:ou,useState:function(){return tt(Ze)},useDebugValue:jl,useDeferredValue:function(t,n){var s=Ae();return pu(s,En.memoizedState,t,n)},useTransition:function(){var t=tt(Ze)[0],n=Ae().memoizedState;return[typeof t=="boolean"?t:ue(t),n]},useSyncExternalStore:Rt,useId:ad,useHostTransitionStatus:fu,useFormState:gn,useActionState:gn,useOptimistic:function(t,n){var s=Ae();return un(s,En,t,n)},useMemoCache:Le,useCacheRefresh:id},F1={readContext:si,use:he,useCallback:td,useContext:si,useEffect:lu,useImperativeHandle:ed,useInsertionEffect:Ju,useLayoutEffect:uu,useMemo:du,useReducer:vt,useRef:ou,useState:function(){return vt(Ze)},useDebugValue:jl,useDeferredValue:function(t,n){var s=Ae();return En===null?Bl(s,t,n):pu(s,En.memoizedState,t,n)},useTransition:function(){var t=vt(Ze)[0],n=Ae().memoizedState;return[typeof t=="boolean"?t:ue(t),n]},useSyncExternalStore:Rt,useId:ad,useHostTransitionStatus:fu,useFormState:Ci,useActionState:Ci,useOptimistic:function(t,n){var s=Ae();return En!==null?un(s,En,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Le,useCacheRefresh:id},vu=null,od=0;function cp(t){var n=od;return od+=1,vu===null&&(vu=[]),kt(vu,t,n)}function cd(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function lp(t,n){throw n.$$typeof===y?Error(o(525)):(t=Object.prototype.toString.call(n),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function _g(t){var n=t._init;return n(t._payload)}function bg(t){function n(it,Je){if(t){var ot=it.deletions;ot===null?(it.deletions=[Je],it.flags|=16):ot.push(Je)}}function s(it,Je){if(!t)return null;for(;Je!==null;)n(it,Je),Je=Je.sibling;return null}function u(it){for(var Je=new Map;it!==null;)it.key!==null?Je.set(it.key,it):Je.set(it.index,it),it=it.sibling;return Je}function D(it,Je){return it=Ts(it,Je),it.index=0,it.sibling=null,it}function V(it,Je,ot){return it.index=ot,t?(ot=it.alternate,ot!==null?(ot=ot.index,ot<Je?(it.flags|=67108866,Je):ot):(it.flags|=67108866,Je)):(it.flags|=1048576,Je)}function se(it){return t&&it.alternate===null&&(it.flags|=67108866),it}function ye(it,Je,ot,Ht){return Je===null||Je.tag!==6?(Je=No(ot,it.mode,Ht),Je.return=it,Je):(Je=D(Je,ot),Je.return=it,Je)}function Fe(it,Je,ot,Ht){var nr=ot.type;return nr===f?It(it,Je,ot.props.children,Ht,ot.key):Je!==null&&(Je.elementType===nr||typeof nr=="object"&&nr!==null&&nr.$$typeof===_&&_g(nr)===Je.type)?(Je=D(Je,ot.props),cd(Je,ot),Je.return=it,Je):(Je=Fo(ot.type,ot.key,ot.props,null,it.mode,Ht),cd(Je,ot),Je.return=it,Je)}function lt(it,Je,ot,Ht){return Je===null||Je.tag!==4||Je.stateNode.containerInfo!==ot.containerInfo||Je.stateNode.implementation!==ot.implementation?(Je=po(ot,it.mode,Ht),Je.return=it,Je):(Je=D(Je,ot.children||[]),Je.return=it,Je)}function It(it,Je,ot,Ht,nr){return Je===null||Je.tag!==7?(Je=es(ot,it.mode,Ht,nr),Je.return=it,Je):(Je=D(Je,ot),Je.return=it,Je)}function Yt(it,Je,ot){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Je=No(""+Je,it.mode,ot),Je.return=it,Je;if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case b:return ot=Fo(Je.type,Je.key,Je.props,null,it.mode,ot),cd(ot,Je),ot.return=it,ot;case T:return Je=po(Je,it.mode,ot),Je.return=it,Je;case _:var Ht=Je._init;return Je=Ht(Je._payload),Yt(it,Je,ot)}if(F(Je)||A(Je))return Je=es(Je,it.mode,ot,null),Je.return=it,Je;if(typeof Je.then=="function")return Yt(it,cp(Je),ot);if(Je.$$typeof===m)return Yt(it,Hc(it,Je),ot);lp(it,Je)}return null}function pt(it,Je,ot,Ht){var nr=Je!==null?Je.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return nr!==null?null:ye(it,Je,""+ot,Ht);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case b:return ot.key===nr?Fe(it,Je,ot,Ht):null;case T:return ot.key===nr?lt(it,Je,ot,Ht):null;case _:return nr=ot._init,ot=nr(ot._payload),pt(it,Je,ot,Ht)}if(F(ot)||A(ot))return nr!==null?null:It(it,Je,ot,Ht,null);if(typeof ot.then=="function")return pt(it,Je,cp(ot),Ht);if(ot.$$typeof===m)return pt(it,Je,Hc(it,ot),Ht);lp(it,ot)}return null}function gt(it,Je,ot,Ht,nr){if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint")return it=it.get(ot)||null,ye(Je,it,""+Ht,nr);if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case b:return it=it.get(Ht.key===null?ot:Ht.key)||null,Fe(Je,it,Ht,nr);case T:return it=it.get(Ht.key===null?ot:Ht.key)||null,lt(Je,it,Ht,nr);case _:var la=Ht._init;return Ht=la(Ht._payload),gt(it,Je,ot,Ht,nr)}if(F(Ht)||A(Ht))return it=it.get(ot)||null,It(Je,it,Ht,nr,null);if(typeof Ht.then=="function")return gt(it,Je,ot,cp(Ht),nr);if(Ht.$$typeof===m)return gt(it,Je,ot,Hc(Je,Ht),nr);lp(Je,Ht)}return null}function Lr(it,Je,ot,Ht){for(var nr=null,la=null,mr=Je,Tr=Je=0,ys=null;mr!==null&&Tr<ot.length;Tr++){mr.index>Tr?(ys=mr,mr=null):ys=mr.sibling;var Pa=pt(it,mr,ot[Tr],Ht);if(Pa===null){mr===null&&(mr=ys);break}t&&mr&&Pa.alternate===null&&n(it,mr),Je=V(Pa,Je,Tr),la===null?nr=Pa:la.sibling=Pa,la=Pa,mr=ys}if(Tr===ot.length)return s(it,mr),Sr&&st(it,Tr),nr;if(mr===null){for(;Tr<ot.length;Tr++)mr=Yt(it,ot[Tr],Ht),mr!==null&&(Je=V(mr,Je,Tr),la===null?nr=mr:la.sibling=mr,la=mr);return Sr&&st(it,Tr),nr}for(mr=u(mr);Tr<ot.length;Tr++)ys=gt(mr,it,Tr,ot[Tr],Ht),ys!==null&&(t&&ys.alternate!==null&&mr.delete(ys.key===null?Tr:ys.key),Je=V(ys,Je,Tr),la===null?nr=ys:la.sibling=ys,la=ys);return t&&mr.forEach(function(Rl){return n(it,Rl)}),Sr&&st(it,Tr),nr}function Cr(it,Je,ot,Ht){if(ot==null)throw Error(o(151));for(var nr=null,la=null,mr=Je,Tr=Je=0,ys=null,Pa=ot.next();mr!==null&&!Pa.done;Tr++,Pa=ot.next()){mr.index>Tr?(ys=mr,mr=null):ys=mr.sibling;var Rl=pt(it,mr,Pa.value,Ht);if(Rl===null){mr===null&&(mr=ys);break}t&&mr&&Rl.alternate===null&&n(it,mr),Je=V(Rl,Je,Tr),la===null?nr=Rl:la.sibling=Rl,la=Rl,mr=ys}if(Pa.done)return s(it,mr),Sr&&st(it,Tr),nr;if(mr===null){for(;!Pa.done;Tr++,Pa=ot.next())Pa=Yt(it,Pa.value,Ht),Pa!==null&&(Je=V(Pa,Je,Tr),la===null?nr=Pa:la.sibling=Pa,la=Pa);return Sr&&st(it,Tr),nr}for(mr=u(mr);!Pa.done;Tr++,Pa=ot.next())Pa=gt(mr,it,Tr,Pa.value,Ht),Pa!==null&&(t&&Pa.alternate!==null&&mr.delete(Pa.key===null?Tr:Pa.key),Je=V(Pa,Je,Tr),la===null?nr=Pa:la.sibling=Pa,la=Pa);return t&&mr.forEach(function(Vw){return n(it,Vw)}),Sr&&st(it,Tr),nr}function Wa(it,Je,ot,Ht){if(typeof ot=="object"&&ot!==null&&ot.type===f&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case b:e:{for(var nr=ot.key;Je!==null;){if(Je.key===nr){if(nr=ot.type,nr===f){if(Je.tag===7){s(it,Je.sibling),Ht=D(Je,ot.props.children),Ht.return=it,it=Ht;break e}}else if(Je.elementType===nr||typeof nr=="object"&&nr!==null&&nr.$$typeof===_&&_g(nr)===Je.type){s(it,Je.sibling),Ht=D(Je,ot.props),cd(Ht,ot),Ht.return=it,it=Ht;break e}s(it,Je);break}else n(it,Je);Je=Je.sibling}ot.type===f?(Ht=es(ot.props.children,it.mode,Ht,ot.key),Ht.return=it,it=Ht):(Ht=Fo(ot.type,ot.key,ot.props,null,it.mode,Ht),cd(Ht,ot),Ht.return=it,it=Ht)}return se(it);case T:e:{for(nr=ot.key;Je!==null;){if(Je.key===nr)if(Je.tag===4&&Je.stateNode.containerInfo===ot.containerInfo&&Je.stateNode.implementation===ot.implementation){s(it,Je.sibling),Ht=D(Je,ot.children||[]),Ht.return=it,it=Ht;break e}else{s(it,Je);break}else n(it,Je);Je=Je.sibling}Ht=po(ot,it.mode,Ht),Ht.return=it,it=Ht}return se(it);case _:return nr=ot._init,ot=nr(ot._payload),Wa(it,Je,ot,Ht)}if(F(ot))return Lr(it,Je,ot,Ht);if(A(ot)){if(nr=A(ot),typeof nr!="function")throw Error(o(150));return ot=nr.call(ot),Cr(it,Je,ot,Ht)}if(typeof ot.then=="function")return Wa(it,Je,cp(ot),Ht);if(ot.$$typeof===m)return Wa(it,Je,Hc(it,ot),Ht);lp(it,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint"?(ot=""+ot,Je!==null&&Je.tag===6?(s(it,Je.sibling),Ht=D(Je,ot),Ht.return=it,it=Ht):(s(it,Je),Ht=No(ot,it.mode,Ht),Ht.return=it,it=Ht),se(it)):s(it,Je)}return function(it,Je,ot,Ht){try{od=0;var nr=Wa(it,Je,ot,Ht);return vu=null,nr}catch(mr){if(mr===ie||mr===Ne)throw mr;var la=_a(29,mr,null,it.mode);return la.lanes=Ht,la.return=it,la}finally{}}}var yu=bg(!0),wg=bg(!1),Ko=Ee(null),Sc=null;function ul(t){var n=t.alternate;xe(rs,rs.current&1),xe(Ko,t),Sc===null&&(n===null||en.current!==null||n.memoizedState!==null)&&(Sc=t)}function Eg(t){if(t.tag===22){if(xe(rs,rs.current),xe(Ko,t),Sc===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Sc=t)}}else dl()}function dl(){xe(rs,rs.current),xe(Ko,Ko.current)}function Zc(t){Se(Ko),Sc===t&&(Sc=null),Se(rs)}var rs=Ee(0);function up(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Oh(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Vm(t,n,s,u){n=t.memoizedState,s=s(u,n),s=s==null?n:S({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var qm={enqueueSetState:function(t,n,s){t=t._reactInternals;var u=Mo(),D=mt(u);D.payload=n,s!=null&&(D.callback=s),n=Nt(t,D,u),n!==null&&(Lo(n,t,u),ht(n,t,u))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var u=Mo(),D=mt(u);D.tag=1,D.payload=n,s!=null&&(D.callback=s),n=Nt(t,D,u),n!==null&&(Lo(n,t,u),ht(n,t,u))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=Mo(),u=mt(s);u.tag=2,n!=null&&(u.callback=n),n=Nt(t,u,s),n!==null&&(Lo(n,t,s),ht(n,t,s))}};function Sg(t,n,s,u,D,V,se){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,V,se):n.prototype&&n.prototype.isPureReactComponent?!Qr(s,u)||!Qr(D,V):!0}function xg(t,n,s,u){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,u),n.state!==t&&qm.enqueueReplaceState(n,n.state,null)}function zl(t,n){var s=n;if("ref"in n){s={};for(var u in n)u!=="ref"&&(s[u]=n[u])}if(t=t.defaultProps){s===n&&(s=S({},s));for(var D in t)s[D]===void 0&&(s[D]=t[D])}return s}var dp=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Rg(t){dp(t)}function kg(t){console.error(t)}function Cg(t){dp(t)}function pp(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(u){setTimeout(function(){throw u})}}function Tg(t,n,s){try{var u=t.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function Zm(t,n,s){return s=mt(s),s.tag=3,s.payload={element:null},s.callback=function(){pp(t,n)},s}function Pg(t){return t=mt(t),t.tag=3,t}function Ng(t,n,s,u){var D=s.type.getDerivedStateFromError;if(typeof D=="function"){var V=u.value;t.payload=function(){return D(V)},t.callback=function(){Tg(n,s,u)}}var se=s.stateNode;se!==null&&typeof se.componentDidCatch=="function"&&(t.callback=function(){Tg(n,s,u),typeof D!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var ye=u.stack;this.componentDidCatch(u.value,{componentStack:ye!==null?ye:""})})}function V1(t,n,s,u,D){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(n=s.alternate,n!==null&&ho(n,s,D,!0),s=Ko.current,s!==null){switch(s.tag){case 13:return Sc===null?fh():s.alternate===null&&Ti===0&&(Ti=3),s.flags&=-257,s.flags|=65536,s.lanes=D,u===Me?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([u]):n.add(u),vh(t,u,D)),!1;case 22:return s.flags|=65536,u===Me?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([u]):s.add(u)),vh(t,u,D)),!1}throw Error(o(435,s.tag))}return vh(t,u,D),fh(),!1}if(Sr)return n=Ko.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=D,u!==Ja&&(t=Error(o(422),{cause:u}),ms(ri(t,s)))):(u!==Ja&&(n=Error(o(423),{cause:u}),ms(ri(n,s))),t=t.current.alternate,t.flags|=65536,D&=-D,t.lanes|=D,u=ri(u,s),D=Zm(t.stateNode,u,D),At(t,D),Ti!==4&&(Ti=2)),!1;var V=Error(o(520),{cause:u});if(V=ri(V,s),fd===null?fd=[V]:fd.push(V),Ti!==4&&(Ti=2),n===null)return!0;u=ri(u,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=D&-D,s.lanes|=t,t=Zm(s.stateNode,u,t),At(s,t),!1;case 1:if(n=s.type,V=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(vl===null||!vl.has(V))))return s.flags|=65536,D&=-D,s.lanes|=D,D=Pg(D),Ng(D,t,s,u),At(s,D),!1}s=s.return}while(s!==null);return!1}var Ag=Error(o(461)),gs=!1;function Ns(t,n,s,u){n.child=t===null?wg(n,null,s,u):yu(n,t.child,s,u)}function Og(t,n,s,u,D){s=s.render;var V=n.ref;if("ref"in u){var se={};for(var ye in u)ye!=="ref"&&(se[ye]=u[ye])}else se=u;return hs(n),u=Re(t,n,s,se,V,D),ye=ke(),t!==null&&!gs?(Oe(t,n,D),Wc(t,n,D)):(Sr&&ye&&Gt(n),n.flags|=1,Ns(t,n,u,D),n.child)}function Dg(t,n,s,u,D){if(t===null){var V=s.type;return typeof V=="function"&&!Po(V)&&V.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=V,Mg(t,n,V,u,D)):(t=Fo(s.type,null,u,n,n.mode,D),t.ref=n.ref,t.return=n,n.child=t)}if(V=t.child,!Xm(t,D)){var se=V.memoizedProps;if(s=s.compare,s=s!==null?s:Qr,s(se,u)&&t.ref===n.ref)return Wc(t,n,D)}return n.flags|=1,t=Ts(V,u),t.ref=n.ref,t.return=n,n.child=t}function Mg(t,n,s,u,D){if(t!==null){var V=t.memoizedProps;if(Qr(V,u)&&t.ref===n.ref)if(gs=!1,n.pendingProps=u=V,Xm(t,D))(t.flags&131072)!==0&&(gs=!0);else return n.lanes=t.lanes,Wc(t,n,D)}return Wm(t,n,s,u,D)}function Lg(t,n,s){var u=n.pendingProps,D=u.children,V=t!==null?t.memoizedState:null;if(u.mode==="hidden"){if((n.flags&128)!==0){if(u=V!==null?V.baseLanes|s:s,t!==null){for(D=n.child=t.child,V=0;D!==null;)V=V|D.lanes|D.childLanes,D=D.sibling;n.childLanes=V&~u}else n.childLanes=0,n.child=null;return Ig(t,n,u,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&re(n,V!==null?V.cachePool:null),V!==null?cn(n,V):Kt(),Eg(n);else return n.lanes=n.childLanes=536870912,Ig(t,n,V!==null?V.baseLanes|s:s,s)}else V!==null?(re(n,V.cachePool),cn(n,V),dl(),n.memoizedState=null):(t!==null&&re(n,null),Kt(),dl());return Ns(t,n,D,s),n.child}function Ig(t,n,s,u){var D=J();return D=D===null?null:{parent:oi._currentValue,pool:D},n.memoizedState={baseLanes:s,cachePool:D},t!==null&&re(n,null),Kt(),Eg(n),t!==null&&ho(t,n,u,!0),null}function mp(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function Wm(t,n,s,u,D){return hs(n),s=Re(t,n,s,u,void 0,D),u=ke(),t!==null&&!gs?(Oe(t,n,D),Wc(t,n,D)):(Sr&&u&&Gt(n),n.flags|=1,Ns(t,n,s,D),n.child)}function jg(t,n,s,u,D,V){return hs(n),n.updateQueue=null,s=we(n,u,s,D),be(t),u=ke(),t!==null&&!gs?(Oe(t,n,V),Wc(t,n,V)):(Sr&&u&&Gt(n),n.flags|=1,Ns(t,n,s,V),n.child)}function Bg(t,n,s,u,D){if(hs(n),n.stateNode===null){var V=uo,se=s.contextType;typeof se=="object"&&se!==null&&(V=si(se)),V=new s(u,V),n.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=qm,n.stateNode=V,V._reactInternals=n,V=n.stateNode,V.props=u,V.state=n.memoizedState,V.refs={},hn(n),se=s.contextType,V.context=typeof se=="object"&&se!==null?si(se):uo,V.state=n.memoizedState,se=s.getDerivedStateFromProps,typeof se=="function"&&(Vm(n,s,se,u),V.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(se=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),se!==V.state&&qm.enqueueReplaceState(V,V.state,null),rn(n,u,V,D),Mt(),V.state=n.memoizedState),typeof V.componentDidMount=="function"&&(n.flags|=4194308),u=!0}else if(t===null){V=n.stateNode;var ye=n.memoizedProps,Fe=zl(s,ye);V.props=Fe;var lt=V.context,It=s.contextType;se=uo,typeof It=="object"&&It!==null&&(se=si(It));var Yt=s.getDerivedStateFromProps;It=typeof Yt=="function"||typeof V.getSnapshotBeforeUpdate=="function",ye=n.pendingProps!==ye,It||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ye||lt!==se)&&xg(n,V,u,se),an=!1;var pt=n.memoizedState;V.state=pt,rn(n,u,V,D),Mt(),lt=n.memoizedState,ye||pt!==lt||an?(typeof Yt=="function"&&(Vm(n,s,Yt,u),lt=n.memoizedState),(Fe=an||Sg(n,s,Fe,u,pt,lt,se))?(It||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(n.flags|=4194308)):(typeof V.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=lt),V.props=u,V.state=lt,V.context=se,u=Fe):(typeof V.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{V=n.stateNode,Ce(t,n),se=n.memoizedProps,It=zl(s,se),V.props=It,Yt=n.pendingProps,pt=V.context,lt=s.contextType,Fe=uo,typeof lt=="object"&&lt!==null&&(Fe=si(lt)),ye=s.getDerivedStateFromProps,(lt=typeof ye=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(se!==Yt||pt!==Fe)&&xg(n,V,u,Fe),an=!1,pt=n.memoizedState,V.state=pt,rn(n,u,V,D),Mt();var gt=n.memoizedState;se!==Yt||pt!==gt||an||t!==null&&t.dependencies!==null&&Ec(t.dependencies)?(typeof ye=="function"&&(Vm(n,s,ye,u),gt=n.memoizedState),(It=an||Sg(n,s,It,u,pt,gt,Fe)||t!==null&&t.dependencies!==null&&Ec(t.dependencies))?(lt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(u,gt,Fe),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(u,gt,Fe)),typeof V.componentDidUpdate=="function"&&(n.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof V.componentDidUpdate!="function"||se===t.memoizedProps&&pt===t.memoizedState||(n.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||se===t.memoizedProps&&pt===t.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=gt),V.props=u,V.state=gt,V.context=Fe,u=It):(typeof V.componentDidUpdate!="function"||se===t.memoizedProps&&pt===t.memoizedState||(n.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||se===t.memoizedProps&&pt===t.memoizedState||(n.flags|=1024),u=!1)}return V=u,mp(t,n),u=(n.flags&128)!==0,V||u?(V=n.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:V.render(),n.flags|=1,t!==null&&u?(n.child=yu(n,t.child,null,D),n.child=yu(n,null,s,D)):Ns(t,n,s,D),n.memoizedState=V.state,t=n.child):t=Wc(t,n,D),t}function zg(t,n,s,u){return Us(),n.flags|=256,Ns(t,n,s,u),n.child}var $m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gm(t){return{baseLanes:t,cachePool:ae()}}function Km(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=Yo),t}function Ug(t,n,s){var u=n.pendingProps,D=!1,V=(n.flags&128)!==0,se;if((se=V)||(se=t!==null&&t.memoizedState===null?!1:(rs.current&2)!==0),se&&(D=!0,n.flags&=-129),se=(n.flags&32)!==0,n.flags&=-33,t===null){if(Sr){if(D?ul(n):dl(),Sr){var ye=Yn,Fe;if(Fe=ye){e:{for(Fe=ye,ye=Na;Fe.nodeType!==8;){if(!ye){ye=null;break e}if(Fe=dc(Fe.nextSibling),Fe===null){ye=null;break e}}ye=Fe}ye!==null?(n.memoizedState={dehydrated:ye,treeContext:ee!==null?{id:me,overflow:je}:null,retryLane:536870912,hydrationErrors:null},Fe=_a(18,null,null,0),Fe.stateNode=ye,Fe.return=n,n.child=Fe,Un=n,Yn=null,Fe=!0):Fe=!1}Fe||yi(n)}if(ye=n.memoizedState,ye!==null&&(ye=ye.dehydrated,ye!==null))return Oh(ye)?n.lanes=32:n.lanes=536870912,null;Zc(n)}return ye=u.children,u=u.fallback,D?(dl(),D=n.mode,ye=hp({mode:"hidden",children:ye},D),u=es(u,D,s,null),ye.return=n,u.return=n,ye.sibling=u,n.child=ye,D=n.child,D.memoizedState=Gm(s),D.childLanes=Km(t,se,s),n.memoizedState=$m,u):(ul(n),Ym(n,ye))}if(Fe=t.memoizedState,Fe!==null&&(ye=Fe.dehydrated,ye!==null)){if(V)n.flags&256?(ul(n),n.flags&=-257,n=Qm(t,n,s)):n.memoizedState!==null?(dl(),n.child=t.child,n.flags|=128,n=null):(dl(),D=u.fallback,ye=n.mode,u=hp({mode:"visible",children:u.children},ye),D=es(D,ye,s,null),D.flags|=2,u.return=n,D.return=n,u.sibling=D,n.child=u,yu(n,t.child,null,s),u=n.child,u.memoizedState=Gm(s),u.childLanes=Km(t,se,s),n.memoizedState=$m,n=D);else if(ul(n),Oh(ye)){if(se=ye.nextSibling&&ye.nextSibling.dataset,se)var lt=se.dgst;se=lt,u=Error(o(419)),u.stack="",u.digest=se,ms({value:u,source:null,stack:null}),n=Qm(t,n,s)}else if(gs||ho(t,n,s,!1),se=(s&t.childLanes)!==0,gs||se){if(se=Xa,se!==null&&(u=s&-s,u=(u&42)!==0?1:Wt(u),u=(u&(se.suspendedLanes|s))!==0?0:u,u!==0&&u!==Fe.retryLane))throw Fe.retryLane=u,zs(t,u),Lo(se,t,u),Ag;ye.data==="$?"||fh(),n=Qm(t,n,s)}else ye.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=Fe.treeContext,Yn=dc(ye.nextSibling),Un=n,Sr=!0,va=null,Na=!1,t!==null&&(O[q++]=me,O[q++]=je,O[q++]=ee,me=t.id,je=t.overflow,ee=n),n=Ym(n,u.children),n.flags|=4096);return n}return D?(dl(),D=u.fallback,ye=n.mode,Fe=t.child,lt=Fe.sibling,u=Ts(Fe,{mode:"hidden",children:u.children}),u.subtreeFlags=Fe.subtreeFlags&65011712,lt!==null?D=Ts(lt,D):(D=es(D,ye,s,null),D.flags|=2),D.return=n,u.return=n,u.sibling=D,n.child=u,u=D,D=n.child,ye=t.child.memoizedState,ye===null?ye=Gm(s):(Fe=ye.cachePool,Fe!==null?(lt=oi._currentValue,Fe=Fe.parent!==lt?{parent:lt,pool:lt}:Fe):Fe=ae(),ye={baseLanes:ye.baseLanes|s,cachePool:Fe}),D.memoizedState=ye,D.childLanes=Km(t,se,s),n.memoizedState=$m,u):(ul(n),s=t.child,t=s.sibling,s=Ts(s,{mode:"visible",children:u.children}),s.return=n,s.sibling=null,t!==null&&(se=n.deletions,se===null?(n.deletions=[t],n.flags|=16):se.push(t)),n.child=s,n.memoizedState=null,s)}function Ym(t,n){return n=hp({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function hp(t,n){return t=_a(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Qm(t,n,s){return yu(n,t.child,null,s),t=Ym(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Hg(t,n,s){t.lanes|=n;var u=t.alternate;u!==null&&(u.lanes|=n),qo(t.return,n,s)}function Jm(t,n,s,u,D){var V=t.memoizedState;V===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:D}:(V.isBackwards=n,V.rendering=null,V.renderingStartTime=0,V.last=u,V.tail=s,V.tailMode=D)}function Fg(t,n,s){var u=n.pendingProps,D=u.revealOrder,V=u.tail;if(Ns(t,n,u.children,s),u=rs.current,(u&2)!==0)u=u&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hg(t,s,n);else if(t.tag===19)Hg(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}switch(xe(rs,u),D){case"forwards":for(s=n.child,D=null;s!==null;)t=s.alternate,t!==null&&up(t)===null&&(D=s),s=s.sibling;s=D,s===null?(D=n.child,n.child=null):(D=s.sibling,s.sibling=null),Jm(n,!1,D,s,V);break;case"backwards":for(s=null,D=n.child,n.child=null;D!==null;){if(t=D.alternate,t!==null&&up(t)===null){n.child=D;break}t=D.sibling,D.sibling=s,s=D,D=t}Jm(n,!0,s,null,V);break;case"together":Jm(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Wc(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),gl|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(ho(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(o(153));if(n.child!==null){for(t=n.child,s=Ts(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Ts(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function Xm(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Ec(t)))}function q1(t,n,s){switch(n.tag){case 3:Ge(n,n.stateNode.containerInfo),Xs(n,oi,t.memoizedState.cache),Us();break;case 27:case 5:Ve(n);break;case 4:Ge(n,n.stateNode.containerInfo);break;case 10:Xs(n,n.type,n.memoizedProps.value);break;case 13:var u=n.memoizedState;if(u!==null)return u.dehydrated!==null?(ul(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Ug(t,n,s):(ul(n),t=Wc(t,n,s),t!==null?t.sibling:null);ul(n);break;case 19:var D=(t.flags&128)!==0;if(u=(s&n.childLanes)!==0,u||(ho(t,n,s,!1),u=(s&n.childLanes)!==0),D){if(u)return Fg(t,n,s);n.flags|=128}if(D=n.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),xe(rs,rs.current),u)break;return null;case 22:case 23:return n.lanes=0,Lg(t,n,s);case 24:Xs(n,oi,t.memoizedState.cache)}return Wc(t,n,s)}function Vg(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)gs=!0;else{if(!Xm(t,s)&&(n.flags&128)===0)return gs=!1,q1(t,n,s);gs=(t.flags&131072)!==0}else gs=!1,Sr&&(n.flags&1048576)!==0&&dt(n,l,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var u=n.elementType,D=u._init;if(u=D(u._payload),n.type=u,typeof u=="function")Po(u)?(t=zl(u,t),n.tag=1,n=Bg(null,n,u,t,s)):(n.tag=0,n=Wm(null,n,u,t,s));else{if(u!=null){if(D=u.$$typeof,D===P){n.tag=11,n=Og(null,n,u,t,s);break e}else if(D===C){n.tag=14,n=Dg(null,n,u,t,s);break e}}throw n=M(u)||u,Error(o(306,n,""))}}return n;case 0:return Wm(t,n,n.type,n.pendingProps,s);case 1:return u=n.type,D=zl(u,n.pendingProps),Bg(t,n,u,D,s);case 3:e:{if(Ge(n,n.stateNode.containerInfo),t===null)throw Error(o(387));u=n.pendingProps;var V=n.memoizedState;D=V.element,Ce(t,n),rn(n,u,null,s);var se=n.memoizedState;if(u=se.cache,Xs(n,oi,u),u!==V.cache&&cc(n,[oi],s,!0),Mt(),u=se.element,V.isDehydrated)if(V={element:u,isDehydrated:!1,cache:se.cache},n.updateQueue.baseState=V,n.memoizedState=V,n.flags&256){n=zg(t,n,u,s);break e}else if(u!==D){D=ri(Error(o(424)),n),ms(D),n=zg(t,n,u,s);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Yn=dc(t.firstChild),Un=n,Sr=!0,va=null,Na=!0,s=wg(n,null,u,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Us(),u===D){n=Wc(t,n,s);break e}Ns(t,n,u,s)}n=n.child}return n;case 26:return mp(t,n),t===null?(s=$v(n.type,null,n.pendingProps,null))?n.memoizedState=s:Sr||(s=n.type,t=n.pendingProps,u=Tp(He.current).createElement(s),u[Sn]=n,u[Rn]=t,Os(u,s,t),Hn(u),n.stateNode=u):n.memoizedState=$v(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Ve(n),t===null&&Sr&&(u=n.stateNode=qv(n.type,n.pendingProps,He.current),Un=n,Na=!0,D=Yn,bl(n.type)?(Dh=D,Yn=dc(u.firstChild)):Yn=D),Ns(t,n,n.pendingProps.children,s),mp(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Sr&&((D=u=Yn)&&(u=yw(u,n.type,n.pendingProps,Na),u!==null?(n.stateNode=u,Un=n,Yn=dc(u.firstChild),Na=!1,D=!0):D=!1),D||yi(n)),Ve(n),D=n.type,V=n.pendingProps,se=t!==null?t.memoizedProps:null,u=V.children,Ph(D,V)?u=null:se!==null&&Ph(D,se)&&(n.flags|=32),n.memoizedState!==null&&(D=Re(t,n,We,null,null,s),xd._currentValue=D),mp(t,n),Ns(t,n,u,s),n.child;case 6:return t===null&&Sr&&((t=s=Yn)&&(s=_w(s,n.pendingProps,Na),s!==null?(n.stateNode=s,Un=n,Yn=null,t=!0):t=!1),t||yi(n)),null;case 13:return Ug(t,n,s);case 4:return Ge(n,n.stateNode.containerInfo),u=n.pendingProps,t===null?n.child=yu(n,null,u,s):Ns(t,n,u,s),n.child;case 11:return Og(t,n,n.type,n.pendingProps,s);case 7:return Ns(t,n,n.pendingProps,s),n.child;case 8:return Ns(t,n,n.pendingProps.children,s),n.child;case 12:return Ns(t,n,n.pendingProps.children,s),n.child;case 10:return u=n.pendingProps,Xs(n,n.type,u.value),Ns(t,n,u.children,s),n.child;case 9:return D=n.type._context,u=n.pendingProps.children,hs(n),D=si(D),u=u(D),n.flags|=1,Ns(t,n,u,s),n.child;case 14:return Dg(t,n,n.type,n.pendingProps,s);case 15:return Mg(t,n,n.type,n.pendingProps,s);case 19:return Fg(t,n,s);case 31:return u=n.pendingProps,s=n.mode,u={mode:u.mode,children:u.children},t===null?(s=hp(u,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=Ts(t.child,u),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return Lg(t,n,s);case 24:return hs(n),u=si(oi),t===null?(D=J(),D===null&&(D=Xa,V=Zo(),D.pooledCache=V,V.refCount++,V!==null&&(D.pooledCacheLanes|=s),D=V),n.memoizedState={parent:u,cache:D},hn(n),Xs(n,oi,D)):((t.lanes&s)!==0&&(Ce(t,n),rn(n,null,null,s),Mt()),D=t.memoizedState,V=n.memoizedState,D.parent!==u?(D={parent:u,cache:u},n.memoizedState=D,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=D),Xs(n,oi,u)):(u=V.cache,Xs(n,oi,u),u!==D.cache&&cc(n,[oi],s,!0))),Ns(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(o(156,n.tag))}function $c(t){t.flags|=4}function qg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Jv(n)){if(n=Ko.current,n!==null&&((ba&4194048)===ba?Sc!==null:(ba&62914560)!==ba&&(ba&536870912)===0||n!==Sc))throw Ut=Me,le;t.flags|=8192}}function fp(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Ha():536870912,t.lanes|=n,Eu|=n)}function ld(t,n){if(!Sr)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function _i(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(n)for(var D=t.child;D!==null;)s|=D.lanes|D.childLanes,u|=D.subtreeFlags&65011712,u|=D.flags&65011712,D.return=t,D=D.sibling;else for(D=t.child;D!==null;)s|=D.lanes|D.childLanes,u|=D.subtreeFlags,u|=D.flags,D.return=t,D=D.sibling;return t.subtreeFlags|=u,t.childLanes=s,n}function Z1(t,n,s){var u=n.pendingProps;switch(Mn(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _i(n),null;case 1:return _i(n),null;case 3:return s=n.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),n.memoizedState.cache!==u&&(n.flags|=2048),qa(oi),Te(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(mo(n)?$c(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,oc())),_i(n),null;case 26:return s=n.memoizedState,t===null?($c(n),s!==null?(_i(n),qg(n,s)):(_i(n),n.flags&=-16777217)):s?s!==t.memoizedState?($c(n),_i(n),qg(n,s)):(_i(n),n.flags&=-16777217):(t.memoizedProps!==u&&$c(n),_i(n),n.flags&=-16777217),null;case 27:qe(n),s=He.current;var D=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==u&&$c(n);else{if(!u){if(n.stateNode===null)throw Error(o(166));return _i(n),null}t=_e.current,mo(n)?Vo(n):(t=qv(D,u,s),n.stateNode=t,$c(n))}return _i(n),null;case 5:if(qe(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==u&&$c(n);else{if(!u){if(n.stateNode===null)throw Error(o(166));return _i(n),null}if(t=_e.current,mo(n))Vo(n);else{switch(D=Tp(He.current),t){case 1:t=D.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=D.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=D.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=D.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=D.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof u.is=="string"?D.createElement("select",{is:u.is}):D.createElement("select"),u.multiple?t.multiple=!0:u.size&&(t.size=u.size);break;default:t=typeof u.is=="string"?D.createElement(s,{is:u.is}):D.createElement(s)}}t[Sn]=n,t[Rn]=u;e:for(D=n.child;D!==null;){if(D.tag===5||D.tag===6)t.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===n)break e;for(;D.sibling===null;){if(D.return===null||D.return===n)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}n.stateNode=t;e:switch(Os(t,s,u),s){case"button":case"input":case"select":case"textarea":t=!!u.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&$c(n)}}return _i(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==u&&$c(n);else{if(typeof u!="string"&&n.stateNode===null)throw Error(o(166));if(t=He.current,mo(n)){if(t=n.stateNode,s=n.memoizedProps,u=null,D=Un,D!==null)switch(D.tag){case 27:case 5:u=D.memoizedProps}t[Sn]=n,t=!!(t.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||jv(t.nodeValue,s)),t||yi(n)}else t=Tp(t).createTextNode(u),t[Sn]=n,n.stateNode=t}return _i(n),null;case 13:if(u=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(D=mo(n),u!==null&&u.dehydrated!==null){if(t===null){if(!D)throw Error(o(318));if(D=n.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(o(317));D[Sn]=n}else Us(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;_i(n),D=!1}else D=oc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=D),D=!0;if(!D)return n.flags&256?(Zc(n),n):(Zc(n),null)}if(Zc(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=u!==null,t=t!==null&&t.memoizedState!==null,s){u=n.child,D=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(D=u.alternate.memoizedState.cachePool.pool);var V=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(V=u.memoizedState.cachePool.pool),V!==D&&(u.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),fp(n,n.updateQueue),_i(n),null;case 4:return Te(),t===null&&xh(n.stateNode.containerInfo),_i(n),null;case 10:return qa(n.type),_i(n),null;case 19:if(Se(rs),D=n.memoizedState,D===null)return _i(n),null;if(u=(n.flags&128)!==0,V=D.rendering,V===null)if(u)ld(D,!1);else{if(Ti!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(V=up(t),V!==null){for(n.flags|=128,ld(D,!1),t=V.updateQueue,n.updateQueue=t,fp(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)sc(s,t),s=s.sibling;return xe(rs,rs.current&1|2),n.child}t=t.sibling}D.tail!==null&&fr()>yp&&(n.flags|=128,u=!0,ld(D,!1),n.lanes=4194304)}else{if(!u)if(t=up(V),t!==null){if(n.flags|=128,u=!0,t=t.updateQueue,n.updateQueue=t,fp(n,t),ld(D,!0),D.tail===null&&D.tailMode==="hidden"&&!V.alternate&&!Sr)return _i(n),null}else 2*fr()-D.renderingStartTime>yp&&s!==536870912&&(n.flags|=128,u=!0,ld(D,!1),n.lanes=4194304);D.isBackwards?(V.sibling=n.child,n.child=V):(t=D.last,t!==null?t.sibling=V:n.child=V,D.last=V)}return D.tail!==null?(n=D.tail,D.rendering=n,D.tail=n.sibling,D.renderingStartTime=fr(),n.sibling=null,t=rs.current,xe(rs,u?t&1|2:t&1),n):(_i(n),null);case 22:case 23:return Zc(n),cr(),u=n.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(n.flags|=8192):u&&(n.flags|=8192),u?(s&536870912)!==0&&(n.flags&128)===0&&(_i(n),n.subtreeFlags&6&&(n.flags|=8192)):_i(n),s=n.updateQueue,s!==null&&fp(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),u=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),u!==s&&(n.flags|=2048),t!==null&&Se(ge),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),qa(oi),_i(n),null;case 25:return null;case 30:return null}throw Error(o(156,n.tag))}function W1(t,n){switch(Mn(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return qa(oi),Te(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return qe(n),null;case 13:if(Zc(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Us()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Se(rs),null;case 4:return Te(),null;case 10:return qa(n.type),null;case 22:case 23:return Zc(n),cr(),t!==null&&Se(ge),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return qa(oi),null;case 25:return null;default:return null}}function Zg(t,n){switch(Mn(n),n.tag){case 3:qa(oi),Te();break;case 26:case 27:case 5:qe(n);break;case 4:Te();break;case 13:Zc(n);break;case 19:Se(rs);break;case 10:qa(n.type);break;case 22:case 23:Zc(n),cr(),t!==null&&Se(ge);break;case 24:qa(oi)}}function ud(t,n){try{var s=n.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var D=u.next;s=D;do{if((s.tag&t)===t){u=void 0;var V=s.create,se=s.inst;u=V(),se.destroy=u}s=s.next}while(s!==D)}}catch(ye){Ka(n,n.return,ye)}}function pl(t,n,s){try{var u=n.updateQueue,D=u!==null?u.lastEffect:null;if(D!==null){var V=D.next;u=V;do{if((u.tag&t)===t){var se=u.inst,ye=se.destroy;if(ye!==void 0){se.destroy=void 0,D=n;var Fe=s,lt=ye;try{lt()}catch(It){Ka(D,Fe,It)}}}u=u.next}while(u!==V)}}catch(It){Ka(n,n.return,It)}}function Wg(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{ln(n,s)}catch(u){Ka(t,t.return,u)}}}function $g(t,n,s){s.props=zl(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(u){Ka(t,n,u)}}function dd(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof s=="function"?t.refCleanup=s(u):s.current=u}}catch(D){Ka(t,n,D)}}function xc(t,n){var s=t.ref,u=t.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(D){Ka(t,n,D)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(D){Ka(t,n,D)}else s.current=null}function Gg(t){var n=t.type,s=t.memoizedProps,u=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(D){Ka(t,t.return,D)}}function eh(t,n,s){try{var u=t.stateNode;mw(u,t.type,s,n),u[Rn]=n}catch(D){Ka(t,t.return,D)}}function Kg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&bl(t.type)||t.tag===4}function th(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&bl(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nh(t,n,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Cp));else if(u!==4&&(u===27&&bl(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(nh(t,n,s),t=t.sibling;t!==null;)nh(t,n,s),t=t.sibling}function gp(t,n,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(u!==4&&(u===27&&bl(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(gp(t,n,s),t=t.sibling;t!==null;)gp(t,n,s),t=t.sibling}function Yg(t){var n=t.stateNode,s=t.memoizedProps;try{for(var u=t.type,D=n.attributes;D.length;)n.removeAttributeNode(D[0]);Os(n,u,s),n[Sn]=t,n[Rn]=s}catch(V){Ka(t,t.return,V)}}var Gc=!1,Li=!1,rh=!1,Qg=typeof WeakSet=="function"?WeakSet:Set,vs=null;function $1(t,n){if(t=t.containerInfo,Ch=Mp,t=Ks(t),Ys(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var D=u.anchorOffset,V=u.focusNode;u=u.focusOffset;try{s.nodeType,V.nodeType}catch{s=null;break e}var se=0,ye=-1,Fe=-1,lt=0,It=0,Yt=t,pt=null;t:for(;;){for(var gt;Yt!==s||D!==0&&Yt.nodeType!==3||(ye=se+D),Yt!==V||u!==0&&Yt.nodeType!==3||(Fe=se+u),Yt.nodeType===3&&(se+=Yt.nodeValue.length),(gt=Yt.firstChild)!==null;)pt=Yt,Yt=gt;for(;;){if(Yt===t)break t;if(pt===s&&++lt===D&&(ye=se),pt===V&&++It===u&&(Fe=se),(gt=Yt.nextSibling)!==null)break;Yt=pt,pt=Yt.parentNode}Yt=gt}s=ye===-1||Fe===-1?null:{start:ye,end:Fe}}else s=null}s=s||{start:0,end:0}}else s=null;for(Th={focusedElem:t,selectionRange:s},Mp=!1,vs=n;vs!==null;)if(n=vs,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,vs=t;else for(;vs!==null;){switch(n=vs,V=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&V!==null){t=void 0,s=n,D=V.memoizedProps,V=V.memoizedState,u=s.stateNode;try{var Lr=zl(s.type,D,s.elementType===s.type);t=u.getSnapshotBeforeUpdate(Lr,V),u.__reactInternalSnapshotBeforeUpdate=t}catch(Cr){Ka(s,s.return,Cr)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)Ah(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ah(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=n.sibling,t!==null){t.return=n.return,vs=t;break}vs=n.return}}function Jg(t,n,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:ml(t,s),u&4&&ud(5,s);break;case 1:if(ml(t,s),u&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(se){Ka(s,s.return,se)}else{var D=zl(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(D,n,t.__reactInternalSnapshotBeforeUpdate)}catch(se){Ka(s,s.return,se)}}u&64&&Wg(s),u&512&&dd(s,s.return);break;case 3:if(ml(t,s),u&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{ln(t,n)}catch(se){Ka(s,s.return,se)}}break;case 27:n===null&&u&4&&Yg(s);case 26:case 5:ml(t,s),n===null&&u&4&&Gg(s),u&512&&dd(s,s.return);break;case 12:ml(t,s);break;case 13:ml(t,s),u&4&&tv(t,s),u&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=nw.bind(null,s),bw(t,s))));break;case 22:if(u=s.memoizedState!==null||Gc,!u){n=n!==null&&n.memoizedState!==null||Li,D=Gc;var V=Li;Gc=u,(Li=n)&&!V?hl(t,s,(s.subtreeFlags&8772)!==0):ml(t,s),Gc=D,Li=V}break;case 30:break;default:ml(t,s)}}function Xg(t){var n=t.alternate;n!==null&&(t.alternate=null,Xg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&bn(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ci=null,fo=!1;function Kc(t,n,s){for(s=s.child;s!==null;)ev(t,n,s),s=s.sibling}function ev(t,n,s){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(pn,s)}catch{}switch(s.tag){case 26:Li||xc(s,n),Kc(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Li||xc(s,n);var u=ci,D=fo;bl(s.type)&&(ci=s.stateNode,fo=!1),Kc(t,n,s),bd(s.stateNode),ci=u,fo=D;break;case 5:Li||xc(s,n);case 6:if(u=ci,D=fo,ci=null,Kc(t,n,s),ci=u,fo=D,ci!==null)if(fo)try{(ci.nodeType===9?ci.body:ci.nodeName==="HTML"?ci.ownerDocument.body:ci).removeChild(s.stateNode)}catch(V){Ka(s,n,V)}else try{ci.removeChild(s.stateNode)}catch(V){Ka(s,n,V)}break;case 18:ci!==null&&(fo?(t=ci,Fv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Td(t)):Fv(ci,s.stateNode));break;case 4:u=ci,D=fo,ci=s.stateNode.containerInfo,fo=!0,Kc(t,n,s),ci=u,fo=D;break;case 0:case 11:case 14:case 15:Li||pl(2,s,n),Li||pl(4,s,n),Kc(t,n,s);break;case 1:Li||(xc(s,n),u=s.stateNode,typeof u.componentWillUnmount=="function"&&$g(s,n,u)),Kc(t,n,s);break;case 21:Kc(t,n,s);break;case 22:Li=(u=Li)||s.memoizedState!==null,Kc(t,n,s),Li=u;break;default:Kc(t,n,s)}}function tv(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Td(t)}catch(s){Ka(n,n.return,s)}}function G1(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Qg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Qg),n;default:throw Error(o(435,t.tag))}}function ah(t,n){var s=G1(t);n.forEach(function(u){var D=rw.bind(null,t,u);s.has(u)||(s.add(u),u.then(D,D))})}function Ao(t,n){var s=n.deletions;if(s!==null)for(var u=0;u<s.length;u++){var D=s[u],V=t,se=n,ye=se;e:for(;ye!==null;){switch(ye.tag){case 27:if(bl(ye.type)){ci=ye.stateNode,fo=!1;break e}break;case 5:ci=ye.stateNode,fo=!1;break e;case 3:case 4:ci=ye.stateNode.containerInfo,fo=!0;break e}ye=ye.return}if(ci===null)throw Error(o(160));ev(V,se,D),ci=null,fo=!1,V=D.alternate,V!==null&&(V.return=null),D.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)nv(n,t),n=n.sibling}var uc=null;function nv(t,n){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ao(n,t),Oo(t),u&4&&(pl(3,t,t.return),ud(3,t),pl(5,t,t.return));break;case 1:Ao(n,t),Oo(t),u&512&&(Li||s===null||xc(s,s.return)),u&64&&Gc&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var D=uc;if(Ao(n,t),Oo(t),u&512&&(Li||s===null||xc(s,s.return)),u&4){var V=s!==null?s.memoizedState:null;if(u=t.memoizedState,s===null)if(u===null)if(t.stateNode===null){e:{u=t.type,s=t.memoizedProps,D=D.ownerDocument||D;t:switch(u){case"title":V=D.getElementsByTagName("title")[0],(!V||V[kn]||V[Sn]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=D.createElement(u),D.head.insertBefore(V,D.querySelector("head > title"))),Os(V,u,s),V[Sn]=t,Hn(V),u=V;break e;case"link":var se=Yv("link","href",D).get(u+(s.href||""));if(se){for(var ye=0;ye<se.length;ye++)if(V=se[ye],V.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&V.getAttribute("rel")===(s.rel==null?null:s.rel)&&V.getAttribute("title")===(s.title==null?null:s.title)&&V.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){se.splice(ye,1);break t}}V=D.createElement(u),Os(V,u,s),D.head.appendChild(V);break;case"meta":if(se=Yv("meta","content",D).get(u+(s.content||""))){for(ye=0;ye<se.length;ye++)if(V=se[ye],V.getAttribute("content")===(s.content==null?null:""+s.content)&&V.getAttribute("name")===(s.name==null?null:s.name)&&V.getAttribute("property")===(s.property==null?null:s.property)&&V.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&V.getAttribute("charset")===(s.charSet==null?null:s.charSet)){se.splice(ye,1);break t}}V=D.createElement(u),Os(V,u,s),D.head.appendChild(V);break;default:throw Error(o(468,u))}V[Sn]=t,Hn(V),u=V}t.stateNode=u}else Qv(D,t.type,t.stateNode);else t.stateNode=Kv(D,u,t.memoizedProps);else V!==u?(V===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):V.count--,u===null?Qv(D,t.type,t.stateNode):Kv(D,u,t.memoizedProps)):u===null&&t.stateNode!==null&&eh(t,t.memoizedProps,s.memoizedProps)}break;case 27:Ao(n,t),Oo(t),u&512&&(Li||s===null||xc(s,s.return)),s!==null&&u&4&&eh(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Ao(n,t),Oo(t),u&512&&(Li||s===null||xc(s,s.return)),t.flags&32){D=t.stateNode;try{pi(D,"")}catch(gt){Ka(t,t.return,gt)}}u&4&&t.stateNode!=null&&(D=t.memoizedProps,eh(t,D,s!==null?s.memoizedProps:D)),u&1024&&(rh=!0);break;case 6:if(Ao(n,t),Oo(t),u&4){if(t.stateNode===null)throw Error(o(162));u=t.memoizedProps,s=t.stateNode;try{s.nodeValue=u}catch(gt){Ka(t,t.return,gt)}}break;case 3:if(Ap=null,D=uc,uc=Pp(n.containerInfo),Ao(n,t),uc=D,Oo(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{Td(n.containerInfo)}catch(gt){Ka(t,t.return,gt)}rh&&(rh=!1,rv(t));break;case 4:u=uc,uc=Pp(t.stateNode.containerInfo),Ao(n,t),Oo(t),uc=u;break;case 12:Ao(n,t),Oo(t);break;case 13:Ao(n,t),Oo(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(uh=fr()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,ah(t,u)));break;case 22:D=t.memoizedState!==null;var Fe=s!==null&&s.memoizedState!==null,lt=Gc,It=Li;if(Gc=lt||D,Li=It||Fe,Ao(n,t),Li=It,Gc=lt,Oo(t),u&8192)e:for(n=t.stateNode,n._visibility=D?n._visibility&-2:n._visibility|1,D&&(s===null||Fe||Gc||Li||Ul(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){Fe=s=n;try{if(V=Fe.stateNode,D)se=V.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none";else{ye=Fe.stateNode;var Yt=Fe.memoizedProps.style,pt=Yt!=null&&Yt.hasOwnProperty("display")?Yt.display:null;ye.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(gt){Ka(Fe,Fe.return,gt)}}}else if(n.tag===6){if(s===null){Fe=n;try{Fe.stateNode.nodeValue=D?"":Fe.memoizedProps}catch(gt){Ka(Fe,Fe.return,gt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}u&4&&(u=t.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,ah(t,s))));break;case 19:Ao(n,t),Oo(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,ah(t,u)));break;case 30:break;case 21:break;default:Ao(n,t),Oo(t)}}function Oo(t){var n=t.flags;if(n&2){try{for(var s,u=t.return;u!==null;){if(Kg(u)){s=u;break}u=u.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var D=s.stateNode,V=th(t);gp(t,V,D);break;case 5:var se=s.stateNode;s.flags&32&&(pi(se,""),s.flags&=-33);var ye=th(t);gp(t,ye,se);break;case 3:case 4:var Fe=s.stateNode.containerInfo,lt=th(t);nh(t,lt,Fe);break;default:throw Error(o(161))}}catch(It){Ka(t,t.return,It)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function rv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;rv(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function ml(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Jg(t,n.alternate,n),n=n.sibling}function Ul(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:pl(4,n,n.return),Ul(n);break;case 1:xc(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&$g(n,n.return,s),Ul(n);break;case 27:bd(n.stateNode);case 26:case 5:xc(n,n.return),Ul(n);break;case 22:n.memoizedState===null&&Ul(n);break;case 30:Ul(n);break;default:Ul(n)}t=t.sibling}}function hl(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var u=n.alternate,D=t,V=n,se=V.flags;switch(V.tag){case 0:case 11:case 15:hl(D,V,s),ud(4,V);break;case 1:if(hl(D,V,s),u=V,D=u.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(lt){Ka(u,u.return,lt)}if(u=V,D=u.updateQueue,D!==null){var ye=u.stateNode;try{var Fe=D.shared.hiddenCallbacks;if(Fe!==null)for(D.shared.hiddenCallbacks=null,D=0;D<Fe.length;D++)qt(Fe[D],ye)}catch(lt){Ka(u,u.return,lt)}}s&&se&64&&Wg(V),dd(V,V.return);break;case 27:Yg(V);case 26:case 5:hl(D,V,s),s&&u===null&&se&4&&Gg(V),dd(V,V.return);break;case 12:hl(D,V,s);break;case 13:hl(D,V,s),s&&se&4&&tv(D,V);break;case 22:V.memoizedState===null&&hl(D,V,s),dd(V,V.return);break;case 30:break;default:hl(D,V,s)}n=n.sibling}}function ih(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Wo(s))}function sh(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Wo(t))}function Rc(t,n,s,u){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)av(t,n,s,u),n=n.sibling}function av(t,n,s,u){var D=n.flags;switch(n.tag){case 0:case 11:case 15:Rc(t,n,s,u),D&2048&&ud(9,n);break;case 1:Rc(t,n,s,u);break;case 3:Rc(t,n,s,u),D&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Wo(t)));break;case 12:if(D&2048){Rc(t,n,s,u),t=n.stateNode;try{var V=n.memoizedProps,se=V.id,ye=V.onPostCommit;typeof ye=="function"&&ye(se,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Fe){Ka(n,n.return,Fe)}}else Rc(t,n,s,u);break;case 13:Rc(t,n,s,u);break;case 23:break;case 22:V=n.stateNode,se=n.alternate,n.memoizedState!==null?V._visibility&2?Rc(t,n,s,u):pd(t,n):V._visibility&2?Rc(t,n,s,u):(V._visibility|=2,_u(t,n,s,u,(n.subtreeFlags&10256)!==0)),D&2048&&ih(se,n);break;case 24:Rc(t,n,s,u),D&2048&&sh(n.alternate,n);break;default:Rc(t,n,s,u)}}function _u(t,n,s,u,D){for(D=D&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var V=t,se=n,ye=s,Fe=u,lt=se.flags;switch(se.tag){case 0:case 11:case 15:_u(V,se,ye,Fe,D),ud(8,se);break;case 23:break;case 22:var It=se.stateNode;se.memoizedState!==null?It._visibility&2?_u(V,se,ye,Fe,D):pd(V,se):(It._visibility|=2,_u(V,se,ye,Fe,D)),D&&lt&2048&&ih(se.alternate,se);break;case 24:_u(V,se,ye,Fe,D),D&&lt&2048&&sh(se.alternate,se);break;default:_u(V,se,ye,Fe,D)}n=n.sibling}}function pd(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,u=n,D=u.flags;switch(u.tag){case 22:pd(s,u),D&2048&&ih(u.alternate,u);break;case 24:pd(s,u),D&2048&&sh(u.alternate,u);break;default:pd(s,u)}n=n.sibling}}var md=8192;function bu(t){if(t.subtreeFlags&md)for(t=t.child;t!==null;)iv(t),t=t.sibling}function iv(t){switch(t.tag){case 26:bu(t),t.flags&md&&t.memoizedState!==null&&Dw(uc,t.memoizedState,t.memoizedProps);break;case 5:bu(t);break;case 3:case 4:var n=uc;uc=Pp(t.stateNode.containerInfo),bu(t),uc=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=md,md=16777216,bu(t),md=n):bu(t));break;default:bu(t)}}function sv(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function hd(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var u=n[s];vs=u,cv(u,t)}sv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ov(t),t=t.sibling}function ov(t){switch(t.tag){case 0:case 11:case 15:hd(t),t.flags&2048&&pl(9,t,t.return);break;case 3:hd(t);break;case 12:hd(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,vp(t)):hd(t);break;default:hd(t)}}function vp(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var u=n[s];vs=u,cv(u,t)}sv(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:pl(8,n,n.return),vp(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,vp(n));break;default:vp(n)}t=t.sibling}}function cv(t,n){for(;vs!==null;){var s=vs;switch(s.tag){case 0:case 11:case 15:pl(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Wo(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,vs=u;else e:for(s=t;vs!==null;){u=vs;var D=u.sibling,V=u.return;if(Xg(u),u===s){vs=null;break e}if(D!==null){D.return=V,vs=D;break e}vs=V}}}var K1={getCacheForType:function(t){var n=si(oi),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},Y1=typeof WeakMap=="function"?WeakMap:Map,za=0,Xa=null,da=null,ba=0,Ua=0,Do=null,fl=!1,wu=!1,oh=!1,Yc=0,Ti=0,gl=0,Hl=0,ch=0,Yo=0,Eu=0,fd=null,go=null,lh=!1,uh=0,yp=1/0,_p=null,vl=null,As=0,yl=null,Su=null,xu=0,dh=0,ph=null,lv=null,gd=0,mh=null;function Mo(){if((za&2)!==0&&ba!==0)return ba&-ba;if(z.T!==null){var t=Go;return t!==0?t:bh()}return tn()}function uv(){Yo===0&&(Yo=(ba&536870912)===0||Sr?Nn():536870912);var t=Ko.current;return t!==null&&(t.flags|=32),Yo}function Lo(t,n,s){(t===Xa&&(Ua===2||Ua===9)||t.cancelPendingCommit!==null)&&(Ru(t,0),_l(t,ba,Yo,!1)),Gr(t,s),((za&2)===0||t!==Xa)&&(t===Xa&&((za&2)===0&&(Hl|=s),Ti===4&&_l(t,ba,Yo,!1)),kc(t))}function dv(t,n,s){if((za&6)!==0)throw Error(o(327));var u=!s&&(n&124)===0&&(n&t.expiredLanes)===0||ea(t,n),D=u?X1(t,n):gh(t,n,!0),V=u;do{if(D===0){wu&&!u&&_l(t,n,0,!1);break}else{if(s=t.current.alternate,V&&!Q1(s)){D=gh(t,n,!1),V=!1;continue}if(D===2){if(V=n,t.errorRecoveryDisabledLanes&V)var se=0;else se=t.pendingLanes&-536870913,se=se!==0?se:se&536870912?536870912:0;if(se!==0){n=se;e:{var ye=t;D=fd;var Fe=ye.current.memoizedState.isDehydrated;if(Fe&&(Ru(ye,se).flags|=256),se=gh(ye,se,!1),se!==2){if(oh&&!Fe){ye.errorRecoveryDisabledLanes|=V,Hl|=V,D=4;break e}V=go,go=D,V!==null&&(go===null?go=V:go.push.apply(go,V))}D=se}if(V=!1,D!==2)continue}}if(D===1){Ru(t,0),_l(t,n,0,!0);break}e:{switch(u=t,V=D,V){case 0:case 1:throw Error(o(345));case 4:if((n&4194048)!==n)break;case 6:_l(u,n,Yo,!fl);break e;case 2:go=null;break;case 3:case 5:break;default:throw Error(o(329))}if((n&62914560)===n&&(D=uh+300-fr(),10<D)){if(_l(u,n,Yo,!fl),ga(u,0,!0)!==0)break e;u.timeoutHandle=Uv(pv.bind(null,u,s,go,_p,lh,n,Yo,Hl,Eu,fl,V,2,-0,0),D);break e}pv(u,s,go,_p,lh,n,Yo,Hl,Eu,fl,V,0,-0,0)}}break}while(!0);kc(t)}function pv(t,n,s,u,D,V,se,ye,Fe,lt,It,Yt,pt,gt){if(t.timeoutHandle=-1,Yt=n.subtreeFlags,(Yt&8192||(Yt&16785408)===16785408)&&(Sd={stylesheets:null,count:0,unsuspend:Ow},iv(n),Yt=Mw(),Yt!==null)){t.cancelPendingCommit=Yt(_v.bind(null,t,n,V,s,u,D,se,ye,Fe,It,1,pt,gt)),_l(t,V,se,!lt);return}_v(t,n,V,s,u,D,se,ye,Fe)}function Q1(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var D=s[u],V=D.getSnapshot;D=D.value;try{if(!ia(V(),D))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function _l(t,n,s,u){n&=~ch,n&=~Hl,t.suspendedLanes|=n,t.pingedLanes&=~n,u&&(t.warmLanes|=n),u=t.expirationTimes;for(var D=n;0<D;){var V=31-sr(D),se=1<<V;u[V]=-1,D&=~se}s!==0&&at(t,s,n)}function bp(){return(za&6)===0?(vd(0),!1):!0}function hh(){if(da!==null){if(Ua===0)var t=da.return;else t=da,Hs=ns=null,Qe(t),vu=null,od=0,t=da;for(;t!==null;)Zg(t.alternate,t),t=t.return;da=null}}function Ru(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,fw(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),hh(),Xa=t,da=s=Ts(t.current,null),ba=n,Ua=0,Do=null,fl=!1,wu=ea(t,n),oh=!1,Eu=Yo=ch=Hl=gl=Ti=0,go=fd=null,lh=!1,(n&8)!==0&&(n|=n&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=n;0<u;){var D=31-sr(u),V=1<<D;n|=t[D],u&=~V}return Yc=n,lo(),s}function mv(t,n){Ct=null,z.H=op,n===ie||n===Ne?(n=mn(),Ua=3):n===le?(n=mn(),Ua=4):Ua=n===Ag?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Do=n,da===null&&(Ti=1,pp(t,ri(n,t.current)))}function hv(){var t=z.H;return z.H=op,t===null?op:t}function fv(){var t=z.A;return z.A=K1,t}function fh(){Ti=4,fl||(ba&4194048)!==ba&&Ko.current!==null||(wu=!0),(gl&134217727)===0&&(Hl&134217727)===0||Xa===null||_l(Xa,ba,Yo,!1)}function gh(t,n,s){var u=za;za|=2;var D=hv(),V=fv();(Xa!==t||ba!==n)&&(_p=null,Ru(t,n)),n=!1;var se=Ti;e:do try{if(Ua!==0&&da!==null){var ye=da,Fe=Do;switch(Ua){case 8:hh(),se=6;break e;case 3:case 2:case 9:case 6:Ko.current===null&&(n=!0);var lt=Ua;if(Ua=0,Do=null,ku(t,ye,Fe,lt),s&&wu){se=0;break e}break;default:lt=Ua,Ua=0,Do=null,ku(t,ye,Fe,lt)}}J1(),se=Ti;break}catch(It){mv(t,It)}while(!0);return n&&t.shellSuspendCounter++,Hs=ns=null,za=u,z.H=D,z.A=V,da===null&&(Xa=null,ba=0,lo()),se}function J1(){for(;da!==null;)gv(da)}function X1(t,n){var s=za;za|=2;var u=hv(),D=fv();Xa!==t||ba!==n?(_p=null,yp=fr()+500,Ru(t,n)):wu=ea(t,n);e:do try{if(Ua!==0&&da!==null){n=da;var V=Do;t:switch(Ua){case 1:Ua=0,Do=null,ku(t,n,V,1);break;case 2:case 9:if(ze(V)){Ua=0,Do=null,vv(n);break}n=function(){Ua!==2&&Ua!==9||Xa!==t||(Ua=7),kc(t)},V.then(n,n);break e;case 3:Ua=7;break e;case 4:Ua=5;break e;case 7:ze(V)?(Ua=0,Do=null,vv(n)):(Ua=0,Do=null,ku(t,n,V,7));break;case 5:var se=null;switch(da.tag){case 26:se=da.memoizedState;case 5:case 27:var ye=da;if(!se||Jv(se)){Ua=0,Do=null;var Fe=ye.sibling;if(Fe!==null)da=Fe;else{var lt=ye.return;lt!==null?(da=lt,wp(lt)):da=null}break t}}Ua=0,Do=null,ku(t,n,V,5);break;case 6:Ua=0,Do=null,ku(t,n,V,6);break;case 8:hh(),Ti=6;break e;default:throw Error(o(462))}}ew();break}catch(It){mv(t,It)}while(!0);return Hs=ns=null,z.H=u,z.A=D,za=s,da!==null?0:(Xa=null,ba=0,lo(),Ti)}function ew(){for(;da!==null&&!Ur();)gv(da)}function gv(t){var n=Vg(t.alternate,t,Yc);t.memoizedProps=t.pendingProps,n===null?wp(t):da=n}function vv(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=jg(s,n,n.pendingProps,n.type,void 0,ba);break;case 11:n=jg(s,n,n.pendingProps,n.type.render,n.ref,ba);break;case 5:Qe(n);default:Zg(s,n),n=da=sc(n,Yc),n=Vg(s,n,Yc)}t.memoizedProps=t.pendingProps,n===null?wp(t):da=n}function ku(t,n,s,u){Hs=ns=null,Qe(n),vu=null,od=0;var D=n.return;try{if(V1(t,D,n,s,ba)){Ti=1,pp(t,ri(s,t.current)),da=null;return}}catch(V){if(D!==null)throw da=D,V;Ti=1,pp(t,ri(s,t.current)),da=null;return}n.flags&32768?(Sr||u===1?t=!0:wu||(ba&536870912)!==0?t=!1:(fl=t=!0,(u===2||u===9||u===3||u===6)&&(u=Ko.current,u!==null&&u.tag===13&&(u.flags|=16384))),yv(n,t)):wp(n)}function wp(t){var n=t;do{if((n.flags&32768)!==0){yv(n,fl);return}t=n.return;var s=Z1(n.alternate,n,Yc);if(s!==null){da=s;return}if(n=n.sibling,n!==null){da=n;return}da=n=t}while(n!==null);Ti===0&&(Ti=5)}function yv(t,n){do{var s=W1(t.alternate,t);if(s!==null){s.flags&=32767,da=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){da=t;return}da=t=s}while(t!==null);Ti=6,da=null}function _v(t,n,s,u,D,V,se,ye,Fe){t.cancelPendingCommit=null;do Ep();while(As!==0);if((za&6)!==0)throw Error(o(327));if(n!==null){if(n===t.current)throw Error(o(177));if(V=n.lanes|n.childLanes,V|=Zi,dr(t,s,V,se,ye,Fe),t===Xa&&(da=Xa=null,ba=0),Su=n,yl=t,xu=s,dh=V,ph=D,lv=u,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,aw(Be,function(){return xv(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||u){u=z.T,z.T=null,D=G.p,G.p=2,se=za,za|=4;try{$1(t,n,s)}finally{za=se,G.p=D,z.T=u}}As=1,bv(),wv(),Ev()}}function bv(){if(As===1){As=0;var t=yl,n=Su,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=z.T,z.T=null;var u=G.p;G.p=2;var D=za;za|=4;try{nv(n,t);var V=Th,se=Ks(t.containerInfo),ye=V.focusedElem,Fe=V.selectionRange;if(se!==ye&&ye&&ye.ownerDocument&&Xi(ye.ownerDocument.documentElement,ye)){if(Fe!==null&&Ys(ye)){var lt=Fe.start,It=Fe.end;if(It===void 0&&(It=lt),"selectionStart"in ye)ye.selectionStart=lt,ye.selectionEnd=Math.min(It,ye.value.length);else{var Yt=ye.ownerDocument||document,pt=Yt&&Yt.defaultView||window;if(pt.getSelection){var gt=pt.getSelection(),Lr=ye.textContent.length,Cr=Math.min(Fe.start,Lr),Wa=Fe.end===void 0?Cr:Math.min(Fe.end,Lr);!gt.extend&&Cr>Wa&&(se=Wa,Wa=Cr,Cr=se);var it=Rs(ye,Cr),Je=Rs(ye,Wa);if(it&&Je&&(gt.rangeCount!==1||gt.anchorNode!==it.node||gt.anchorOffset!==it.offset||gt.focusNode!==Je.node||gt.focusOffset!==Je.offset)){var ot=Yt.createRange();ot.setStart(it.node,it.offset),gt.removeAllRanges(),Cr>Wa?(gt.addRange(ot),gt.extend(Je.node,Je.offset)):(ot.setEnd(Je.node,Je.offset),gt.addRange(ot))}}}}for(Yt=[],gt=ye;gt=gt.parentNode;)gt.nodeType===1&&Yt.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof ye.focus=="function"&&ye.focus(),ye=0;ye<Yt.length;ye++){var Ht=Yt[ye];Ht.element.scrollLeft=Ht.left,Ht.element.scrollTop=Ht.top}}Mp=!!Ch,Th=Ch=null}finally{za=D,G.p=u,z.T=s}}t.current=n,As=2}}function wv(){if(As===2){As=0;var t=yl,n=Su,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=z.T,z.T=null;var u=G.p;G.p=2;var D=za;za|=4;try{Jg(t,n.alternate,n)}finally{za=D,G.p=u,z.T=s}}As=3}}function Ev(){if(As===4||As===3){As=0,Zn();var t=yl,n=Su,s=xu,u=lv;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?As=5:(As=0,Su=yl=null,Sv(t,t.pendingLanes));var D=t.pendingLanes;if(D===0&&(vl=null),Tt(s),n=n.stateNode,Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(pn,n,void 0,(n.current.flags&128)===128)}catch{}if(u!==null){n=z.T,D=G.p,G.p=2,z.T=null;try{for(var V=t.onRecoverableError,se=0;se<u.length;se++){var ye=u[se];V(ye.value,{componentStack:ye.stack})}}finally{z.T=n,G.p=D}}(xu&3)!==0&&Ep(),kc(t),D=t.pendingLanes,(s&4194090)!==0&&(D&42)!==0?t===mh?gd++:(gd=0,mh=t):gd=0,vd(0)}}function Sv(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Wo(n)))}function Ep(t){return bv(),wv(),Ev(),xv()}function xv(){if(As!==5)return!1;var t=yl,n=dh;dh=0;var s=Tt(xu),u=z.T,D=G.p;try{G.p=32>s?32:s,z.T=null,s=ph,ph=null;var V=yl,se=xu;if(As=0,Su=yl=null,xu=0,(za&6)!==0)throw Error(o(331));var ye=za;if(za|=4,ov(V.current),av(V,V.current,se,s),za=ye,vd(0,!1),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(pn,V)}catch{}return!0}finally{G.p=D,z.T=u,Sv(t,n)}}function Rv(t,n,s){n=ri(s,n),n=Zm(t.stateNode,n,2),t=Nt(t,n,2),t!==null&&(Gr(t,2),kc(t))}function Ka(t,n,s){if(t.tag===3)Rv(t,t,s);else for(;n!==null;){if(n.tag===3){Rv(n,t,s);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(vl===null||!vl.has(u))){t=ri(s,t),s=Pg(2),u=Nt(n,s,2),u!==null&&(Ng(s,u,n,t),Gr(u,2),kc(u));break}}n=n.return}}function vh(t,n,s){var u=t.pingCache;if(u===null){u=t.pingCache=new Y1;var D=new Set;u.set(n,D)}else D=u.get(n),D===void 0&&(D=new Set,u.set(n,D));D.has(s)||(oh=!0,D.add(s),t=tw.bind(null,t,n,s),n.then(t,t))}function tw(t,n,s){var u=t.pingCache;u!==null&&u.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Xa===t&&(ba&s)===s&&(Ti===4||Ti===3&&(ba&62914560)===ba&&300>fr()-uh?(za&2)===0&&Ru(t,0):ch|=s,Eu===ba&&(Eu=0)),kc(t)}function kv(t,n){n===0&&(n=Ha()),t=zs(t,n),t!==null&&(Gr(t,n),kc(t))}function nw(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),kv(t,s)}function rw(t,n){var s=0;switch(t.tag){case 13:var u=t.stateNode,D=t.memoizedState;D!==null&&(s=D.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(n),kv(t,s)}function aw(t,n){return Bt(t,n)}var Sp=null,Cu=null,yh=!1,xp=!1,_h=!1,Fl=0;function kc(t){t!==Cu&&t.next===null&&(Cu===null?Sp=Cu=t:Cu=Cu.next=t),xp=!0,yh||(yh=!0,sw())}function vd(t,n){if(!_h&&xp){_h=!0;do for(var s=!1,u=Sp;u!==null;){if(t!==0){var D=u.pendingLanes;if(D===0)var V=0;else{var se=u.suspendedLanes,ye=u.pingedLanes;V=(1<<31-sr(42|t)+1)-1,V&=D&~(se&~ye),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(s=!0,Nv(u,V))}else V=ba,V=ga(u,u===Xa?V:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(V&3)===0||ea(u,V)||(s=!0,Nv(u,V));u=u.next}while(s);_h=!1}}function iw(){Cv()}function Cv(){xp=yh=!1;var t=0;Fl!==0&&(hw()&&(t=Fl),Fl=0);for(var n=fr(),s=null,u=Sp;u!==null;){var D=u.next,V=Tv(u,n);V===0?(u.next=null,s===null?Sp=D:s.next=D,D===null&&(Cu=s)):(s=u,(t!==0||(V&3)!==0)&&(xp=!0)),u=D}vd(t)}function Tv(t,n){for(var s=t.suspendedLanes,u=t.pingedLanes,D=t.expirationTimes,V=t.pendingLanes&-62914561;0<V;){var se=31-sr(V),ye=1<<se,Fe=D[se];Fe===-1?((ye&s)===0||(ye&u)!==0)&&(D[se]=oa(ye,n)):Fe<=n&&(t.expiredLanes|=ye),V&=~ye}if(n=Xa,s=ba,s=ga(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,s===0||t===n&&(Ua===2||Ua===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Pr(u),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||ea(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(u!==null&&Pr(u),Tt(s)){case 2:case 8:s=Ie;break;case 32:s=Be;break;case 268435456:s=Qt;break;default:s=Be}return u=Pv.bind(null,t),s=Bt(s,u),t.callbackPriority=n,t.callbackNode=s,n}return u!==null&&u!==null&&Pr(u),t.callbackPriority=2,t.callbackNode=null,2}function Pv(t,n){if(As!==0&&As!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Ep()&&t.callbackNode!==s)return null;var u=ba;return u=ga(t,t===Xa?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(dv(t,u,n),Tv(t,fr()),t.callbackNode!=null&&t.callbackNode===s?Pv.bind(null,t):null)}function Nv(t,n){if(Ep())return null;dv(t,n,!0)}function sw(){gw(function(){(za&6)!==0?Bt(Bn,iw):Cv()})}function bh(){return Fl===0&&(Fl=Nn()),Fl}function Av(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:bs(""+t)}function Ov(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function ow(t,n,s,u,D){if(n==="submit"&&s&&s.stateNode===D){var V=Av((D[Rn]||null).action),se=u.submitter;se&&(n=(n=se[Rn]||null)?Av(n.formAction):se.getAttribute("formAction"),n!==null&&(V=n,se=null));var ye=new Ws("action","action",null,u,D);t.push({event:ye,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Fl!==0){var Fe=se?Ov(D,se):new FormData(D);hu(s,{pending:!0,data:Fe,method:D.method,action:V},null,Fe)}}else typeof V=="function"&&(ye.preventDefault(),Fe=se?Ov(D,se):new FormData(D),hu(s,{pending:!0,data:Fe,method:D.method,action:V},V,Fe))},currentTarget:D}]})}}for(var wh=0;wh<ki.length;wh++){var Eh=ki[wh],cw=Eh.toLowerCase(),lw=Eh[0].toUpperCase()+Eh.slice(1);fi(cw,"on"+lw)}fi(Uo,"onAnimationEnd"),fi(qi,"onAnimationIteration"),fi(Cs,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(wc,"onTransitionRun"),fi(ko,"onTransitionStart"),fi(Ho,"onTransitionCancel"),fi(co,"onTransitionEnd"),Oa("onMouseEnter",["mouseout","mouseover"]),Oa("onMouseLeave",["mouseout","mouseover"]),Oa("onPointerEnter",["pointerout","pointerover"]),Oa("onPointerLeave",["pointerout","pointerover"]),Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yd));function Dv(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],D=u.event;u=u.listeners;e:{var V=void 0;if(n)for(var se=u.length-1;0<=se;se--){var ye=u[se],Fe=ye.instance,lt=ye.currentTarget;if(ye=ye.listener,Fe!==V&&D.isPropagationStopped())break e;V=ye,D.currentTarget=lt;try{V(D)}catch(It){dp(It)}D.currentTarget=null,V=Fe}else for(se=0;se<u.length;se++){if(ye=u[se],Fe=ye.instance,lt=ye.currentTarget,ye=ye.listener,Fe!==V&&D.isPropagationStopped())break e;V=ye,D.currentTarget=lt;try{V(D)}catch(It){dp(It)}D.currentTarget=null,V=Fe}}}}function pa(t,n){var s=n[or];s===void 0&&(s=n[or]=new Set);var u=t+"__bubble";s.has(u)||(Mv(n,t,2,!1),s.add(u))}function Sh(t,n,s){var u=0;n&&(u|=4),Mv(s,t,u,n)}var Rp="_reactListening"+Math.random().toString(36).slice(2);function xh(t){if(!t[Rp]){t[Rp]=!0,ha.forEach(function(s){s!=="selectionchange"&&(uw.has(s)||Sh(s,!1,t),Sh(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Rp]||(n[Rp]=!0,Sh("selectionchange",!1,n))}}function Mv(t,n,s,u){switch(a0(n)){case 2:var D=jw;break;case 8:D=Bw;break;default:D=Bh}s=D.bind(null,n,s,t),D=void 0,!Is||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(D=!0),u?D!==void 0?t.addEventListener(n,s,{capture:!0,passive:D}):t.addEventListener(n,s,!0):D!==void 0?t.addEventListener(n,s,{passive:D}):t.addEventListener(n,s,!1)}function Rh(t,n,s,u,D){var V=u;if((n&1)===0&&(n&2)===0&&u!==null)e:for(;;){if(u===null)return;var se=u.tag;if(se===3||se===4){var ye=u.stateNode.containerInfo;if(ye===D)break;if(se===4)for(se=u.return;se!==null;){var Fe=se.tag;if((Fe===3||Fe===4)&&se.stateNode.containerInfo===D)return;se=se.return}for(;ye!==null;){if(se=Nr(ye),se===null)return;if(Fe=se.tag,Fe===5||Fe===6||Fe===26||Fe===27){u=V=se;continue e}ye=ye.parentNode}}u=u.return}xi(function(){var lt=V,It=ls(s),Yt=[];e:{var pt=Co.get(t);if(pt!==void 0){var gt=Ws,Lr=t;switch(t){case"keypress":if(Da(s)===0)break e;case"keydown":case"keyup":gt=$s;break;case"focusin":Lr="focus",gt=on;break;case"focusout":Lr="blur",gt=on;break;case"beforeblur":case"afterblur":gt=on;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=Es;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=xo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Ic;break;case Uo:case qi:case Cs:gt=Pt;break;case co:gt=Ri;break;case"scroll":case"scrollend":gt=Xo;break;case"wheel":gt=tc;break;case"copy":case"cut":case"paste":gt=aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=Gs;break;case"toggle":case"beforetoggle":gt=ro}var Cr=(n&4)!==0,Wa=!Cr&&(t==="scroll"||t==="scrollend"),it=Cr?pt!==null?pt+"Capture":null:pt;Cr=[];for(var Je=lt,ot;Je!==null;){var Ht=Je;if(ot=Ht.stateNode,Ht=Ht.tag,Ht!==5&&Ht!==26&&Ht!==27||ot===null||it===null||(Ht=ta(Je,it),Ht!=null&&Cr.push(_d(Je,Ht,ot))),Wa)break;Je=Je.return}0<Cr.length&&(pt=new gt(pt,Lr,null,s,It),Yt.push({event:pt,listeners:Cr}))}}if((n&7)===0){e:{if(pt=t==="mouseover"||t==="pointerover",gt=t==="mouseout"||t==="pointerout",pt&&s!==Ls&&(Lr=s.relatedTarget||s.fromElement)&&(Nr(Lr)||Lr[Vn]))break e;if((gt||pt)&&(pt=It.window===It?It:(pt=It.ownerDocument)?pt.defaultView||pt.parentWindow:window,gt?(Lr=s.relatedTarget||s.toElement,gt=lt,Lr=Lr?Nr(Lr):null,Lr!==null&&(Wa=N(Lr),Cr=Lr.tag,Lr!==Wa||Cr!==5&&Cr!==27&&Cr!==6)&&(Lr=null)):(gt=null,Lr=lt),gt!==Lr)){if(Cr=Es,Ht="onMouseLeave",it="onMouseEnter",Je="mouse",(t==="pointerout"||t==="pointerover")&&(Cr=Gs,Ht="onPointerLeave",it="onPointerEnter",Je="pointer"),Wa=gt==null?pt:Or(gt),ot=Lr==null?pt:Or(Lr),pt=new Cr(Ht,Je+"leave",gt,s,It),pt.target=Wa,pt.relatedTarget=ot,Ht=null,Nr(It)===lt&&(Cr=new Cr(it,Je+"enter",Lr,s,It),Cr.target=ot,Cr.relatedTarget=Wa,Ht=Cr),Wa=Ht,gt&&Lr)t:{for(Cr=gt,it=Lr,Je=0,ot=Cr;ot;ot=Tu(ot))Je++;for(ot=0,Ht=it;Ht;Ht=Tu(Ht))ot++;for(;0<Je-ot;)Cr=Tu(Cr),Je--;for(;0<ot-Je;)it=Tu(it),ot--;for(;Je--;){if(Cr===it||it!==null&&Cr===it.alternate)break t;Cr=Tu(Cr),it=Tu(it)}Cr=null}else Cr=null;gt!==null&&Lv(Yt,pt,gt,Cr,!1),Lr!==null&&Wa!==null&&Lv(Yt,Wa,Lr,Cr,!0)}}e:{if(pt=lt?Or(lt):window,gt=pt.nodeName&&pt.nodeName.toLowerCase(),gt==="select"||gt==="input"&&pt.type==="file")var nr=oe;else if(Dn(pt))if(De)nr=Yr;else{nr=zn;var la=Vt}else gt=pt.nodeName,!gt||gt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?lt&&mi(lt.elementType)&&(nr=oe):nr=vn;if(nr&&(nr=nr(t,lt))){Bo(Yt,nr,s,It);break e}la&&la(t,pt,lt),t==="focusout"&&lt&&pt.type==="number"&&lt.memoizedProps.value!=null&&Ba(pt,"number",pt.value)}switch(la=lt?Or(lt):window,t){case"focusin":(Dn(la)||la.contentEditable==="true")&&(Mi=la,Fi=lt,oo=null);break;case"focusout":oo=Fi=Mi=null;break;case"mousedown":ac=!0;break;case"contextmenu":case"mouseup":case"dragend":ac=!1,zo(Yt,s,It);break;case"selectionchange":if(so)break;case"keydown":case"keyup":zo(Yt,s,It)}var mr;if(xa)e:{switch(t){case"compositionstart":var Tr="onCompositionStart";break e;case"compositionend":Tr="onCompositionEnd";break e;case"compositionupdate":Tr="onCompositionUpdate";break e}Tr=void 0}else io?Xn(t,s)&&(Tr="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Tr="onCompositionStart");Tr&&(Bc&&s.locale!=="ko"&&(io||Tr!=="onCompositionStart"?Tr==="onCompositionEnd"&&io&&(mr=lr()):(Ai=It,zi="value"in Ai?Ai.value:Ai.textContent,io=!0)),la=kp(lt,Tr),0<la.length&&(Tr=new ii(Tr,t,null,s,It),Yt.push({event:Tr,listeners:la}),mr?Tr.data=mr:(mr=rc(s),mr!==null&&(Tr.data=mr)))),(mr=jc?hi(t,s):fe(t,s))&&(Tr=kp(lt,"onBeforeInput"),0<Tr.length&&(la=new ii("onBeforeInput","beforeinput",null,s,It),Yt.push({event:la,listeners:Tr}),la.data=mr)),ow(Yt,t,lt,s,It)}Dv(Yt,n)})}function _d(t,n,s){return{instance:t,listener:n,currentTarget:s}}function kp(t,n){for(var s=n+"Capture",u=[];t!==null;){var D=t,V=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||V===null||(D=ta(t,s),D!=null&&u.unshift(_d(t,D,V)),D=ta(t,n),D!=null&&u.push(_d(t,D,V))),t.tag===3)return u;t=t.return}return[]}function Tu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Lv(t,n,s,u,D){for(var V=n._reactName,se=[];s!==null&&s!==u;){var ye=s,Fe=ye.alternate,lt=ye.stateNode;if(ye=ye.tag,Fe!==null&&Fe===u)break;ye!==5&&ye!==26&&ye!==27||lt===null||(Fe=lt,D?(lt=ta(s,V),lt!=null&&se.unshift(_d(s,lt,Fe))):D||(lt=ta(s,V),lt!=null&&se.push(_d(s,lt,Fe)))),s=s.return}se.length!==0&&t.push({event:n,listeners:se})}var dw=/\r\n?/g,pw=/\u0000|\uFFFD/g;function Iv(t){return(typeof t=="string"?t:""+t).replace(dw,`
`).replace(pw,"")}function jv(t,n){return n=Iv(n),Iv(t)===n}function Cp(){}function Za(t,n,s,u,D,V){switch(s){case"children":typeof u=="string"?n==="body"||n==="textarea"&&u===""||pi(t,u):(typeof u=="number"||typeof u=="bigint")&&n!=="body"&&pi(t,""+u);break;case"className":Yi(t,"class",u);break;case"tabIndex":Yi(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Yi(t,s,u);break;case"style":cs(t,u,V);break;case"data":if(n!=="object"){Yi(t,"data",u);break}case"src":case"href":if(u===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(s);break}u=bs(""+u),t.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(s==="formAction"?(n!=="input"&&Za(t,n,"name",D.name,D,null),Za(t,n,"formEncType",D.formEncType,D,null),Za(t,n,"formMethod",D.formMethod,D,null),Za(t,n,"formTarget",D.formTarget,D,null)):(Za(t,n,"encType",D.encType,D,null),Za(t,n,"method",D.method,D,null),Za(t,n,"target",D.target,D,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(s);break}u=bs(""+u),t.setAttribute(s,u);break;case"onClick":u!=null&&(t.onclick=Cp);break;case"onScroll":u!=null&&pa("scroll",t);break;case"onScrollEnd":u!=null&&pa("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(s=u.__html,s!=null){if(D.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}s=bs(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,""+u):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":u===!0?t.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,u):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(s,u):t.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(s):t.setAttribute(s,u);break;case"popover":pa("beforetoggle",t),pa("toggle",t),Ei(t,"popover",u);break;case"xlinkActuate":qr(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":qr(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":qr(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":qr(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":qr(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":qr(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":qr(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":qr(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":qr(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ei(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=to.get(s)||s,Ei(t,s,u))}}function kh(t,n,s,u,D,V){switch(s){case"style":cs(t,u,V);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(s=u.__html,s!=null){if(D.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"children":typeof u=="string"?pi(t,u):(typeof u=="number"||typeof u=="bigint")&&pi(t,""+u);break;case"onScroll":u!=null&&pa("scroll",t);break;case"onScrollEnd":u!=null&&pa("scrollend",t);break;case"onClick":u!=null&&(t.onclick=Cp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ca.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(D=s.endsWith("Capture"),n=s.slice(2,D?s.length-7:void 0),V=t[Rn]||null,V=V!=null?V[s]:null,typeof V=="function"&&t.removeEventListener(n,V,D),typeof u=="function")){typeof V!="function"&&V!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,u,D);break e}s in t?t[s]=u:u===!0?t.setAttribute(s,""):Ei(t,s,u)}}}function Os(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pa("error",t),pa("load",t);var u=!1,D=!1,V;for(V in s)if(s.hasOwnProperty(V)){var se=s[V];if(se!=null)switch(V){case"src":u=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:Za(t,n,V,se,s,null)}}D&&Za(t,n,"srcSet",s.srcSet,s,null),u&&Za(t,n,"src",s.src,s,null);return;case"input":pa("invalid",t);var ye=V=se=D=null,Fe=null,lt=null;for(u in s)if(s.hasOwnProperty(u)){var It=s[u];if(It!=null)switch(u){case"name":D=It;break;case"type":se=It;break;case"checked":Fe=It;break;case"defaultChecked":lt=It;break;case"value":V=It;break;case"defaultValue":ye=It;break;case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(o(137,n));break;default:Za(t,n,u,It,s,null)}}ja(t,V,ye,Fe,lt,se,D,!1),vr(t);return;case"select":pa("invalid",t),u=se=V=null;for(D in s)if(s.hasOwnProperty(D)&&(ye=s[D],ye!=null))switch(D){case"value":V=ye;break;case"defaultValue":se=ye;break;case"multiple":u=ye;default:Za(t,n,D,ye,s,null)}n=V,s=se,t.multiple=!!u,n!=null?$a(t,!!u,n,!1):s!=null&&$a(t,!!u,s,!0);return;case"textarea":pa("invalid",t),V=D=u=null;for(se in s)if(s.hasOwnProperty(se)&&(ye=s[se],ye!=null))switch(se){case"value":u=ye;break;case"defaultValue":D=ye;break;case"children":V=ye;break;case"dangerouslySetInnerHTML":if(ye!=null)throw Error(o(91));break;default:Za(t,n,se,ye,s,null)}Qa(t,u,D,V),vr(t);return;case"option":for(Fe in s)if(s.hasOwnProperty(Fe)&&(u=s[Fe],u!=null))switch(Fe){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Za(t,n,Fe,u,s,null)}return;case"dialog":pa("beforetoggle",t),pa("toggle",t),pa("cancel",t),pa("close",t);break;case"iframe":case"object":pa("load",t);break;case"video":case"audio":for(u=0;u<yd.length;u++)pa(yd[u],t);break;case"image":pa("error",t),pa("load",t);break;case"details":pa("toggle",t);break;case"embed":case"source":case"link":pa("error",t),pa("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in s)if(s.hasOwnProperty(lt)&&(u=s[lt],u!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:Za(t,n,lt,u,s,null)}return;default:if(mi(n)){for(It in s)s.hasOwnProperty(It)&&(u=s[It],u!==void 0&&kh(t,n,It,u,s,void 0));return}}for(ye in s)s.hasOwnProperty(ye)&&(u=s[ye],u!=null&&Za(t,n,ye,u,s,null))}function mw(t,n,s,u){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,V=null,se=null,ye=null,Fe=null,lt=null,It=null;for(gt in s){var Yt=s[gt];if(s.hasOwnProperty(gt)&&Yt!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":Fe=Yt;default:u.hasOwnProperty(gt)||Za(t,n,gt,null,u,Yt)}}for(var pt in u){var gt=u[pt];if(Yt=s[pt],u.hasOwnProperty(pt)&&(gt!=null||Yt!=null))switch(pt){case"type":V=gt;break;case"name":D=gt;break;case"checked":lt=gt;break;case"defaultChecked":It=gt;break;case"value":se=gt;break;case"defaultValue":ye=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(o(137,n));break;default:gt!==Yt&&Za(t,n,pt,gt,u,Yt)}}ya(t,se,ye,Fe,lt,It,V,D);return;case"select":gt=se=ye=pt=null;for(V in s)if(Fe=s[V],s.hasOwnProperty(V)&&Fe!=null)switch(V){case"value":break;case"multiple":gt=Fe;default:u.hasOwnProperty(V)||Za(t,n,V,null,u,Fe)}for(D in u)if(V=u[D],Fe=s[D],u.hasOwnProperty(D)&&(V!=null||Fe!=null))switch(D){case"value":pt=V;break;case"defaultValue":ye=V;break;case"multiple":se=V;default:V!==Fe&&Za(t,n,D,V,u,Fe)}n=ye,s=se,u=gt,pt!=null?$a(t,!!s,pt,!1):!!u!=!!s&&(n!=null?$a(t,!!s,n,!0):$a(t,!!s,s?[]:"",!1));return;case"textarea":gt=pt=null;for(ye in s)if(D=s[ye],s.hasOwnProperty(ye)&&D!=null&&!u.hasOwnProperty(ye))switch(ye){case"value":break;case"children":break;default:Za(t,n,ye,null,u,D)}for(se in u)if(D=u[se],V=s[se],u.hasOwnProperty(se)&&(D!=null||V!=null))switch(se){case"value":pt=D;break;case"defaultValue":gt=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(o(91));break;default:D!==V&&Za(t,n,se,D,u,V)}Sa(t,pt,gt);return;case"option":for(var Lr in s)if(pt=s[Lr],s.hasOwnProperty(Lr)&&pt!=null&&!u.hasOwnProperty(Lr))switch(Lr){case"selected":t.selected=!1;break;default:Za(t,n,Lr,null,u,pt)}for(Fe in u)if(pt=u[Fe],gt=s[Fe],u.hasOwnProperty(Fe)&&pt!==gt&&(pt!=null||gt!=null))switch(Fe){case"selected":t.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:Za(t,n,Fe,pt,u,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Cr in s)pt=s[Cr],s.hasOwnProperty(Cr)&&pt!=null&&!u.hasOwnProperty(Cr)&&Za(t,n,Cr,null,u,pt);for(lt in u)if(pt=u[lt],gt=s[lt],u.hasOwnProperty(lt)&&pt!==gt&&(pt!=null||gt!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(o(137,n));break;default:Za(t,n,lt,pt,u,gt)}return;default:if(mi(n)){for(var Wa in s)pt=s[Wa],s.hasOwnProperty(Wa)&&pt!==void 0&&!u.hasOwnProperty(Wa)&&kh(t,n,Wa,void 0,u,pt);for(It in u)pt=u[It],gt=s[It],!u.hasOwnProperty(It)||pt===gt||pt===void 0&&gt===void 0||kh(t,n,It,pt,u,gt);return}}for(var it in s)pt=s[it],s.hasOwnProperty(it)&&pt!=null&&!u.hasOwnProperty(it)&&Za(t,n,it,null,u,pt);for(Yt in u)pt=u[Yt],gt=s[Yt],!u.hasOwnProperty(Yt)||pt===gt||pt==null&&gt==null||Za(t,n,Yt,pt,u,gt)}var Ch=null,Th=null;function Tp(t){return t.nodeType===9?t:t.ownerDocument}function Bv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zv(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Ph(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Nh=null;function hw(){var t=window.event;return t&&t.type==="popstate"?t===Nh?!1:(Nh=t,!0):(Nh=null,!1)}var Uv=typeof setTimeout=="function"?setTimeout:void 0,fw=typeof clearTimeout=="function"?clearTimeout:void 0,Hv=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof Hv<"u"?function(t){return Hv.resolve(null).then(t).catch(vw)}:Uv;function vw(t){setTimeout(function(){throw t})}function bl(t){return t==="head"}function Fv(t,n){var s=n,u=0,D=0;do{var V=s.nextSibling;if(t.removeChild(s),V&&V.nodeType===8)if(s=V.data,s==="/$"){if(0<u&&8>u){s=u;var se=t.ownerDocument;if(s&1&&bd(se.documentElement),s&2&&bd(se.body),s&4)for(s=se.head,bd(s),se=s.firstChild;se;){var ye=se.nextSibling,Fe=se.nodeName;se[kn]||Fe==="SCRIPT"||Fe==="STYLE"||Fe==="LINK"&&se.rel.toLowerCase()==="stylesheet"||s.removeChild(se),se=ye}}if(D===0){t.removeChild(V),Td(n);return}D--}else s==="$"||s==="$?"||s==="$!"?D++:u=s.charCodeAt(0)-48;else u=0;s=V}while(s);Td(n)}function Ah(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Ah(s),bn(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function yw(t,n,s,u){for(;t.nodeType===1;){var D=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[kn])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(V=t.getAttribute("rel"),V==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(V!==D.rel||t.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||t.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||t.getAttribute("title")!==(D.title==null?null:D.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(V=t.getAttribute("src"),(V!==(D.src==null?null:D.src)||t.getAttribute("type")!==(D.type==null?null:D.type)||t.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&V&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var V=D.name==null?null:""+D.name;if(D.type==="hidden"&&t.getAttribute("name")===V)return t}else return t;if(t=dc(t.nextSibling),t===null)break}return null}function _w(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=dc(t.nextSibling),t===null))return null;return t}function Oh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function bw(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var u=function(){n(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function dc(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Dh=null;function Vv(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function qv(t,n,s){switch(n=Tp(s),t){case"html":if(t=n.documentElement,!t)throw Error(o(452));return t;case"head":if(t=n.head,!t)throw Error(o(453));return t;case"body":if(t=n.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function bd(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);bn(t)}var Qo=new Map,Zv=new Set;function Pp(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Qc=G.d;G.d={f:ww,r:Ew,D:Sw,C:xw,L:Rw,m:kw,X:Tw,S:Cw,M:Pw};function ww(){var t=Qc.f(),n=bp();return t||n}function Ew(t){var n=Er(t);n!==null&&n.tag===5&&n.type==="form"?rd(n):Qc.r(t)}var Pu=typeof document>"u"?null:document;function Wv(t,n,s){var u=Pu;if(u&&typeof n=="string"&&n){var D=ua(n);D='link[rel="'+t+'"][href="'+D+'"]',typeof s=="string"&&(D+='[crossorigin="'+s+'"]'),Zv.has(D)||(Zv.add(D),t={rel:t,crossOrigin:s,href:n},u.querySelector(D)===null&&(n=u.createElement("link"),Os(n,"link",t),Hn(n),u.head.appendChild(n)))}}function Sw(t){Qc.D(t),Wv("dns-prefetch",t,null)}function xw(t,n){Qc.C(t,n),Wv("preconnect",t,n)}function Rw(t,n,s){Qc.L(t,n,s);var u=Pu;if(u&&t&&n){var D='link[rel="preload"][as="'+ua(n)+'"]';n==="image"&&s&&s.imageSrcSet?(D+='[imagesrcset="'+ua(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(D+='[imagesizes="'+ua(s.imageSizes)+'"]')):D+='[href="'+ua(t)+'"]';var V=D;switch(n){case"style":V=Nu(t);break;case"script":V=Au(t)}Qo.has(V)||(t=S({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),Qo.set(V,t),u.querySelector(D)!==null||n==="style"&&u.querySelector(wd(V))||n==="script"&&u.querySelector(Ed(V))||(n=u.createElement("link"),Os(n,"link",t),Hn(n),u.head.appendChild(n)))}}function kw(t,n){Qc.m(t,n);var s=Pu;if(s&&t){var u=n&&typeof n.as=="string"?n.as:"script",D='link[rel="modulepreload"][as="'+ua(u)+'"][href="'+ua(t)+'"]',V=D;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=Au(t)}if(!Qo.has(V)&&(t=S({rel:"modulepreload",href:t},n),Qo.set(V,t),s.querySelector(D)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ed(V)))return}u=s.createElement("link"),Os(u,"link",t),Hn(u),s.head.appendChild(u)}}}function Cw(t,n,s){Qc.S(t,n,s);var u=Pu;if(u&&t){var D=Jn(u).hoistableStyles,V=Nu(t);n=n||"default";var se=D.get(V);if(!se){var ye={loading:0,preload:null};if(se=u.querySelector(wd(V)))ye.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":n},s),(s=Qo.get(V))&&Mh(t,s);var Fe=se=u.createElement("link");Hn(Fe),Os(Fe,"link",t),Fe._p=new Promise(function(lt,It){Fe.onload=lt,Fe.onerror=It}),Fe.addEventListener("load",function(){ye.loading|=1}),Fe.addEventListener("error",function(){ye.loading|=2}),ye.loading|=4,Np(se,n,u)}se={type:"stylesheet",instance:se,count:1,state:ye},D.set(V,se)}}}function Tw(t,n){Qc.X(t,n);var s=Pu;if(s&&t){var u=Jn(s).hoistableScripts,D=Au(t),V=u.get(D);V||(V=s.querySelector(Ed(D)),V||(t=S({src:t,async:!0},n),(n=Qo.get(D))&&Lh(t,n),V=s.createElement("script"),Hn(V),Os(V,"link",t),s.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},u.set(D,V))}}function Pw(t,n){Qc.M(t,n);var s=Pu;if(s&&t){var u=Jn(s).hoistableScripts,D=Au(t),V=u.get(D);V||(V=s.querySelector(Ed(D)),V||(t=S({src:t,async:!0,type:"module"},n),(n=Qo.get(D))&&Lh(t,n),V=s.createElement("script"),Hn(V),Os(V,"link",t),s.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},u.set(D,V))}}function $v(t,n,s,u){var D=(D=He.current)?Pp(D):null;if(!D)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Nu(s.href),s=Jn(D).hoistableStyles,u=s.get(n),u||(u={type:"style",instance:null,count:0,state:null},s.set(n,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Nu(s.href);var V=Jn(D).hoistableStyles,se=V.get(t);if(se||(D=D.ownerDocument||D,se={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(t,se),(V=D.querySelector(wd(t)))&&!V._p&&(se.instance=V,se.state.loading=5),Qo.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Qo.set(t,s),V||Nw(D,t,s,se.state))),n&&u===null)throw Error(o(528,""));return se}if(n&&u!==null)throw Error(o(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Au(s),s=Jn(D).hoistableScripts,u=s.get(n),u||(u={type:"script",instance:null,count:0,state:null},s.set(n,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Nu(t){return'href="'+ua(t)+'"'}function wd(t){return'link[rel="stylesheet"]['+t+"]"}function Gv(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Nw(t,n,s,u){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?u.loading=1:(n=t.createElement("link"),u.preload=n,n.addEventListener("load",function(){return u.loading|=1}),n.addEventListener("error",function(){return u.loading|=2}),Os(n,"link",s),Hn(n),t.head.appendChild(n))}function Au(t){return'[src="'+ua(t)+'"]'}function Ed(t){return"script[async]"+t}function Kv(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var u=t.querySelector('style[data-href~="'+ua(s.href)+'"]');if(u)return n.instance=u,Hn(u),u;var D=S({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),Hn(u),Os(u,"style",D),Np(u,s.precedence,t),n.instance=u;case"stylesheet":D=Nu(s.href);var V=t.querySelector(wd(D));if(V)return n.state.loading|=4,n.instance=V,Hn(V),V;u=Gv(s),(D=Qo.get(D))&&Mh(u,D),V=(t.ownerDocument||t).createElement("link"),Hn(V);var se=V;return se._p=new Promise(function(ye,Fe){se.onload=ye,se.onerror=Fe}),Os(V,"link",u),n.state.loading|=4,Np(V,s.precedence,t),n.instance=V;case"script":return V=Au(s.src),(D=t.querySelector(Ed(V)))?(n.instance=D,Hn(D),D):(u=s,(D=Qo.get(V))&&(u=S({},s),Lh(u,D)),t=t.ownerDocument||t,D=t.createElement("script"),Hn(D),Os(D,"link",u),t.head.appendChild(D),n.instance=D);case"void":return null;default:throw Error(o(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(u=n.instance,n.state.loading|=4,Np(u,s.precedence,t));return n.instance}function Np(t,n,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=u.length?u[u.length-1]:null,V=D,se=0;se<u.length;se++){var ye=u[se];if(ye.dataset.precedence===n)V=ye;else if(V!==D)break}V?V.parentNode.insertBefore(t,V.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function Mh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Lh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Ap=null;function Yv(t,n,s){if(Ap===null){var u=new Map,D=Ap=new Map;D.set(s,u)}else D=Ap,u=D.get(s),u||(u=new Map,D.set(s,u));if(u.has(t))return u;for(u.set(t,null),s=s.getElementsByTagName(t),D=0;D<s.length;D++){var V=s[D];if(!(V[kn]||V[Sn]||t==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var se=V.getAttribute(n)||"";se=t+se;var ye=u.get(se);ye?ye.push(V):u.set(se,[V])}}return u}function Qv(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function Aw(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Jv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Sd=null;function Ow(){}function Dw(t,n,s){if(Sd===null)throw Error(o(475));var u=Sd;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var D=Nu(s.href),V=t.querySelector(wd(D));if(V){t=V._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(u.count++,u=Op.bind(u),t.then(u,u)),n.state.loading|=4,n.instance=V,Hn(V);return}V=t.ownerDocument||t,s=Gv(s),(D=Qo.get(D))&&Mh(s,D),V=V.createElement("link"),Hn(V);var se=V;se._p=new Promise(function(ye,Fe){se.onload=ye,se.onerror=Fe}),Os(V,"link",s),n.instance=V}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(u.count++,n=Op.bind(u),t.addEventListener("load",n),t.addEventListener("error",n))}}function Mw(){if(Sd===null)throw Error(o(475));var t=Sd;return t.stylesheets&&t.count===0&&Ih(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&Ih(t,t.stylesheets),t.unsuspend){var u=t.unsuspend;t.unsuspend=null,u()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Op(){if(this.count--,this.count===0){if(this.stylesheets)Ih(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Dp=null;function Ih(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Dp=new Map,n.forEach(Lw,t),Dp=null,Op.call(t))}function Lw(t,n){if(!(n.state.loading&4)){var s=Dp.get(t);if(s)var u=s.get(null);else{s=new Map,Dp.set(t,s);for(var D=t.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<D.length;V++){var se=D[V];(se.nodeName==="LINK"||se.getAttribute("media")!=="not all")&&(s.set(se.dataset.precedence,se),u=se)}u&&s.set(null,u)}D=n.instance,se=D.getAttribute("data-precedence"),V=s.get(se)||u,V===u&&s.set(null,D),s.set(se,D),this.count++,u=Op.bind(this),D.addEventListener("load",u),D.addEventListener("error",u),V?V.parentNode.insertBefore(D,V.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(D,t.firstChild)),n.state.loading|=4}}var xd={$$typeof:m,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function Iw(t,n,s,u,D,V,se,ye){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ca(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ca(0),this.hiddenUpdates=Ca(null),this.identifierPrefix=u,this.onUncaughtError=D,this.onCaughtError=V,this.onRecoverableError=se,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function Xv(t,n,s,u,D,V,se,ye,Fe,lt,It,Yt){return t=new Iw(t,n,s,se,ye,Fe,lt,Yt),n=1,V===!0&&(n|=24),V=_a(3,null,null,n),t.current=V,V.stateNode=t,n=Zo(),n.refCount++,t.pooledCache=n,n.refCount++,V.memoizedState={element:u,isDehydrated:s,cache:n},hn(V),t}function e0(t){return t?(t=uo,t):uo}function t0(t,n,s,u,D,V){D=e0(D),u.context===null?u.context=D:u.pendingContext=D,u=mt(n),u.payload={element:s},V=V===void 0?null:V,V!==null&&(u.callback=V),s=Nt(t,u,n),s!==null&&(Lo(s,t,n),ht(s,t,n))}function n0(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function jh(t,n){n0(t,n),(t=t.alternate)&&n0(t,n)}function r0(t){if(t.tag===13){var n=zs(t,67108864);n!==null&&Lo(n,t,67108864),jh(t,67108864)}}var Mp=!0;function jw(t,n,s,u){var D=z.T;z.T=null;var V=G.p;try{G.p=2,Bh(t,n,s,u)}finally{G.p=V,z.T=D}}function Bw(t,n,s,u){var D=z.T;z.T=null;var V=G.p;try{G.p=8,Bh(t,n,s,u)}finally{G.p=V,z.T=D}}function Bh(t,n,s,u){if(Mp){var D=zh(u);if(D===null)Rh(t,n,u,Lp,s),i0(t,u);else if(Uw(D,t,n,s,u))u.stopPropagation();else if(i0(t,u),n&4&&-1<zw.indexOf(t)){for(;D!==null;){var V=Er(D);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var se=$r(V.pendingLanes);if(se!==0){var ye=V;for(ye.pendingLanes|=2,ye.entangledLanes|=2;se;){var Fe=1<<31-sr(se);ye.entanglements[1]|=Fe,se&=~Fe}kc(V),(za&6)===0&&(yp=fr()+500,vd(0))}}break;case 13:ye=zs(V,2),ye!==null&&Lo(ye,V,2),bp(),jh(V,2)}if(V=zh(u),V===null&&Rh(t,n,u,Lp,s),V===D)break;D=V}D!==null&&u.stopPropagation()}else Rh(t,n,u,null,s)}}function zh(t){return t=ls(t),Uh(t)}var Lp=null;function Uh(t){if(Lp=null,t=Nr(t),t!==null){var n=N(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=B(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Lp=t,null}function a0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gr()){case Bn:return 2;case Ie:return 8;case Be:case Ye:return 32;case Qt:return 268435456;default:return 32}default:return 32}}var Hh=!1,wl=null,El=null,Sl=null,Rd=new Map,kd=new Map,xl=[],zw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function i0(t,n){switch(t){case"focusin":case"focusout":wl=null;break;case"dragenter":case"dragleave":El=null;break;case"mouseover":case"mouseout":Sl=null;break;case"pointerover":case"pointerout":Rd.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":kd.delete(n.pointerId)}}function Cd(t,n,s,u,D,V){return t===null||t.nativeEvent!==V?(t={blockedOn:n,domEventName:s,eventSystemFlags:u,nativeEvent:V,targetContainers:[D]},n!==null&&(n=Er(n),n!==null&&r0(n)),t):(t.eventSystemFlags|=u,n=t.targetContainers,D!==null&&n.indexOf(D)===-1&&n.push(D),t)}function Uw(t,n,s,u,D){switch(n){case"focusin":return wl=Cd(wl,t,n,s,u,D),!0;case"dragenter":return El=Cd(El,t,n,s,u,D),!0;case"mouseover":return Sl=Cd(Sl,t,n,s,u,D),!0;case"pointerover":var V=D.pointerId;return Rd.set(V,Cd(Rd.get(V)||null,t,n,s,u,D)),!0;case"gotpointercapture":return V=D.pointerId,kd.set(V,Cd(kd.get(V)||null,t,n,s,u,D)),!0}return!1}function s0(t){var n=Nr(t.target);if(n!==null){var s=N(n);if(s!==null){if(n=s.tag,n===13){if(n=B(s),n!==null){t.blockedOn=n,Xt(t.priority,function(){if(s.tag===13){var u=Mo();u=Wt(u);var D=zs(s,u);D!==null&&Lo(D,s,u),jh(s,u)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ip(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=zh(t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);Ls=u,s.target.dispatchEvent(u),Ls=null}else return n=Er(s),n!==null&&r0(n),t.blockedOn=s,!1;n.shift()}return!0}function o0(t,n,s){Ip(t)&&s.delete(n)}function Hw(){Hh=!1,wl!==null&&Ip(wl)&&(wl=null),El!==null&&Ip(El)&&(El=null),Sl!==null&&Ip(Sl)&&(Sl=null),Rd.forEach(o0),kd.forEach(o0)}function jp(t,n){t.blockedOn===n&&(t.blockedOn=null,Hh||(Hh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hw)))}var Bp=null;function c0(t){Bp!==t&&(Bp=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Bp===t&&(Bp=null);for(var n=0;n<t.length;n+=3){var s=t[n],u=t[n+1],D=t[n+2];if(typeof u!="function"){if(Uh(u||s)===null)continue;break}var V=Er(s);V!==null&&(t.splice(n,3),n-=3,hu(V,{pending:!0,data:D,method:s.method,action:u},u,D))}}))}function Td(t){function n(Fe){return jp(Fe,t)}wl!==null&&jp(wl,t),El!==null&&jp(El,t),Sl!==null&&jp(Sl,t),Rd.forEach(n),kd.forEach(n);for(var s=0;s<xl.length;s++){var u=xl[s];u.blockedOn===t&&(u.blockedOn=null)}for(;0<xl.length&&(s=xl[0],s.blockedOn===null);)s0(s),s.blockedOn===null&&xl.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var D=s[u],V=s[u+1],se=D[Rn]||null;if(typeof V=="function")se||c0(s);else if(se){var ye=null;if(V&&V.hasAttribute("formAction")){if(D=V,se=V[Rn]||null)ye=se.formAction;else if(Uh(D)!==null)continue}else ye=se.action;typeof ye=="function"?s[u+1]=ye:(s.splice(u,3),u-=3),c0(s)}}}function Fh(t){this._internalRoot=t}zp.prototype.render=Fh.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(o(409));var s=n.current,u=Mo();t0(s,u,t,n,null,null)},zp.prototype.unmount=Fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;t0(t.current,2,null,t,null,null),bp(),n[Vn]=null}};function zp(t){this._internalRoot=t}zp.prototype.unstable_scheduleHydration=function(t){if(t){var n=tn();t={blockedOn:null,target:t,priority:n};for(var s=0;s<xl.length&&n!==0&&n<xl[s].priority;s++);xl.splice(s,0,t),s===0&&s0(t)}};var l0=r.version;if(l0!=="19.1.0")throw Error(o(527,l0,"19.1.0"));G.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=R(n),t=t!==null?d(t):null,t=t===null?null:t.stateNode,t};var Fw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Up=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Up.isDisabled&&Up.supportsFiber)try{pn=Up.inject(Fw),Ln=Up}catch{}}return Pd.createRoot=function(t,n){if(!g(t))throw Error(o(299));var s=!1,u="",D=Rg,V=kg,se=Cg,ye=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onUncaughtError!==void 0&&(D=n.onUncaughtError),n.onCaughtError!==void 0&&(V=n.onCaughtError),n.onRecoverableError!==void 0&&(se=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(ye=n.unstable_transitionCallbacks)),n=Xv(t,1,!1,null,null,s,u,D,V,se,ye,null),t[Vn]=n.current,xh(t),new Fh(n)},Pd.hydrateRoot=function(t,n,s){if(!g(t))throw Error(o(299));var u=!1,D="",V=Rg,se=kg,ye=Cg,Fe=null,lt=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(D=s.identifierPrefix),s.onUncaughtError!==void 0&&(V=s.onUncaughtError),s.onCaughtError!==void 0&&(se=s.onCaughtError),s.onRecoverableError!==void 0&&(ye=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(Fe=s.unstable_transitionCallbacks),s.formState!==void 0&&(lt=s.formState)),n=Xv(t,1,!0,n,s??null,u,D,V,se,ye,Fe,lt),n.context=e0(null),s=n.current,u=Mo(),u=Wt(u),D=mt(u),D.callback=null,Nt(s,D,u),s=u,n.current.lanes=s,Gr(n,s),kc(n),t[Vn]=n.current,xh(t),new zp(n)},Pd.version="19.1.0",Pd}var v0;function Yw(){if(v0)return qh.exports;v0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),qh.exports=Kw(),qh.exports}var Qw=Yw();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var y0="popstate";function Jw(e={}){function r(o,g){let{pathname:N,search:B,hash:j}=o.location;return vf("",{pathname:N,search:B,hash:j},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}function i(o,g){return typeof g=="string"?g:Vd(g)}return eE(r,i,null,e)}function li(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function hc(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Xw(){return Math.random().toString(36).substring(2,10)}function _0(e,r){return{usr:e.state,key:e.key,idx:r}}function vf(e,r,i=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?Vu(r):r,state:i,key:r&&r.key||o||Xw()}}function Vd({pathname:e="/",search:r="",hash:i=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Vu(e){let r={};if(e){let i=e.indexOf("#");i>=0&&(r.hash=e.substring(i),e=e.substring(0,i));let o=e.indexOf("?");o>=0&&(r.search=e.substring(o),e=e.substring(0,o)),e&&(r.pathname=e)}return r}function eE(e,r,i,o={}){let{window:g=document.defaultView,v5Compat:N=!1}=o,B=g.history,j="POP",R=null,d=S();d==null&&(d=0,B.replaceState({...B.state,idx:d},""));function S(){return(B.state||{idx:null}).idx}function y(){j="POP";let k=S(),E=k==null?null:k-d;d=k,R&&R({action:j,location:h.location,delta:E})}function b(k,E){j="PUSH";let H=vf(h.location,k,E);d=S()+1;let m=_0(H,d),P=h.createHref(H);try{B.pushState(m,"",P)}catch(v){if(v instanceof DOMException&&v.name==="DataCloneError")throw v;g.location.assign(P)}N&&R&&R({action:j,location:h.location,delta:1})}function T(k,E){j="REPLACE";let H=vf(h.location,k,E);d=S();let m=_0(H,d),P=h.createHref(H);B.replaceState(m,"",P),N&&R&&R({action:j,location:h.location,delta:0})}function f(k){return tE(k)}let h={get action(){return j},get location(){return e(g,B)},listen(k){if(R)throw new Error("A history only accepts one active listener");return g.addEventListener(y0,y),R=k,()=>{g.removeEventListener(y0,y),R=null}},createHref(k){return r(g,k)},createURL:f,encodeLocation(k){let E=f(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:T,go(k){return B.go(k)}};return h}function tE(e,r=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),li(i,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:Vd(e);return o=o.replace(/ $/,"%20"),!r&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function a_(e,r,i="/"){return nE(e,r,i,!1)}function nE(e,r,i,o){let g=typeof r=="string"?Vu(r):r,N=tl(g.pathname||"/",i);if(N==null)return null;let B=i_(e);rE(B);let j=null;for(let R=0;j==null&&R<B.length;++R){let d=hE(N);j=pE(B[R],d,o)}return j}function i_(e,r=[],i=[],o=""){let g=(N,B,j)=>{let R={relativePath:j===void 0?N.path||"":j,caseSensitive:N.caseSensitive===!0,childrenIndex:B,route:N};R.relativePath.startsWith("/")&&(li(R.relativePath.startsWith(o),`Absolute route path "${R.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),R.relativePath=R.relativePath.slice(o.length));let d=el([o,R.relativePath]),S=i.concat(R);N.children&&N.children.length>0&&(li(N.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),i_(N.children,r,S,d)),!(N.path==null&&!N.index)&&r.push({path:d,score:uE(d,N.index),routesMeta:S})};return e.forEach((N,B)=>{if(N.path===""||!N.path?.includes("?"))g(N,B);else for(let j of s_(N.path))g(N,B,j)}),r}function s_(e){let r=e.split("/");if(r.length===0)return[];let[i,...o]=r,g=i.endsWith("?"),N=i.replace(/\?$/,"");if(o.length===0)return g?[N,""]:[N];let B=s_(o.join("/")),j=[];return j.push(...B.map(R=>R===""?N:[N,R].join("/"))),g&&j.push(...B),j.map(R=>e.startsWith("/")&&R===""?"/":R)}function rE(e){e.sort((r,i)=>r.score!==i.score?i.score-r.score:dE(r.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var aE=/^:[\w-]+$/,iE=3,sE=2,oE=1,cE=10,lE=-2,b0=e=>e==="*";function uE(e,r){let i=e.split("/"),o=i.length;return i.some(b0)&&(o+=lE),r&&(o+=sE),i.filter(g=>!b0(g)).reduce((g,N)=>g+(aE.test(N)?iE:N===""?oE:cE),o)}function dE(e,r){return e.length===r.length&&e.slice(0,-1).every((o,g)=>o===r[g])?e[e.length-1]-r[r.length-1]:0}function pE(e,r,i=!1){let{routesMeta:o}=e,g={},N="/",B=[];for(let j=0;j<o.length;++j){let R=o[j],d=j===o.length-1,S=N==="/"?r:r.slice(N.length)||"/",y=dm({path:R.relativePath,caseSensitive:R.caseSensitive,end:d},S),b=R.route;if(!y&&d&&i&&!o[o.length-1].route.index&&(y=dm({path:R.relativePath,caseSensitive:R.caseSensitive,end:!1},S)),!y)return null;Object.assign(g,y.params),B.push({params:g,pathname:el([N,y.pathname]),pathnameBase:yE(el([N,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(N=el([N,y.pathnameBase]))}return B}function dm(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,o]=mE(e.path,e.caseSensitive,e.end),g=r.match(i);if(!g)return null;let N=g[0],B=N.replace(/(.)\/+$/,"$1"),j=g.slice(1);return{params:o.reduce((d,{paramName:S,isOptional:y},b)=>{if(S==="*"){let f=j[b]||"";B=N.slice(0,N.length-f.length).replace(/(.)\/+$/,"$1")}const T=j[b];return y&&!T?d[S]=void 0:d[S]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:N,pathnameBase:B,pattern:e}}function mE(e,r=!1,i=!0){hc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],g="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(B,j,R)=>(o.push({paramName:j,isOptional:R!=null}),R?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),g+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?g+="\\/*$":e!==""&&e!=="/"&&(g+="(?:(?=\\/|$))"),[new RegExp(g,r?void 0:"i"),o]}function hE(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return hc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function tl(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,o=e.charAt(i);return o&&o!=="/"?null:e.slice(i)||"/"}function fE(e,r="/"){let{pathname:i,search:o="",hash:g=""}=typeof e=="string"?Vu(e):e;return{pathname:i?i.startsWith("/")?i:gE(i,r):r,search:_E(o),hash:bE(g)}}function gE(e,r){let i=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(g=>{g===".."?i.length>1&&i.pop():g!=="."&&i.push(g)}),i.length>1?i.join("/"):"/"}function Gh(e,r,i,o){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vE(e){return e.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function Hf(e){let r=vE(e);return r.map((i,o)=>o===r.length-1?i.pathname:i.pathnameBase)}function Ff(e,r,i,o=!1){let g;typeof e=="string"?g=Vu(e):(g={...e},li(!g.pathname||!g.pathname.includes("?"),Gh("?","pathname","search",g)),li(!g.pathname||!g.pathname.includes("#"),Gh("#","pathname","hash",g)),li(!g.search||!g.search.includes("#"),Gh("#","search","hash",g)));let N=e===""||g.pathname==="",B=N?"/":g.pathname,j;if(B==null)j=i;else{let y=r.length-1;if(!o&&B.startsWith("..")){let b=B.split("/");for(;b[0]==="..";)b.shift(),y-=1;g.pathname=b.join("/")}j=y>=0?r[y]:"/"}let R=fE(g,j),d=B&&B!=="/"&&B.endsWith("/"),S=(N||B===".")&&i.endsWith("/");return!R.pathname.endsWith("/")&&(d||S)&&(R.pathname+="/"),R}var el=e=>e.join("/").replace(/\/\/+/g,"/"),yE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_E=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var o_=["POST","PUT","PATCH","DELETE"];new Set(o_);var EE=["GET",...o_];new Set(EE);var qu=ne.createContext(null);qu.displayName="DataRouter";var Sm=ne.createContext(null);Sm.displayName="DataRouterState";ne.createContext(!1);var c_=ne.createContext({isTransitioning:!1});c_.displayName="ViewTransition";var SE=ne.createContext(new Map);SE.displayName="Fetchers";var xE=ne.createContext(null);xE.displayName="Await";var fc=ne.createContext(null);fc.displayName="Navigation";var Kd=ne.createContext(null);Kd.displayName="Location";var Jo=ne.createContext({outlet:null,matches:[],isDataRoute:!1});Jo.displayName="Route";var Vf=ne.createContext(null);Vf.displayName="RouteError";function RE(e,{relative:r}={}){li(Zu(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=ne.useContext(fc),{hash:g,pathname:N,search:B}=Yd(e,{relative:r}),j=N;return i!=="/"&&(j=N==="/"?i:el([i,N])),o.createHref({pathname:j,search:B,hash:g})}function Zu(){return ne.useContext(Kd)!=null}function Nl(){return li(Zu(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(Kd).location}var l_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function u_(e){ne.useContext(fc).static||ne.useLayoutEffect(e)}function Ds(){let{isDataRoute:e}=ne.useContext(Jo);return e?UE():kE()}function kE(){li(Zu(),"useNavigate() may be used only in the context of a <Router> component.");let e=ne.useContext(qu),{basename:r,navigator:i}=ne.useContext(fc),{matches:o}=ne.useContext(Jo),{pathname:g}=Nl(),N=JSON.stringify(Hf(o)),B=ne.useRef(!1);return u_(()=>{B.current=!0}),ne.useCallback((R,d={})=>{if(hc(B.current,l_),!B.current)return;if(typeof R=="number"){i.go(R);return}let S=Ff(R,JSON.parse(N),g,d.relative==="path");e==null&&r!=="/"&&(S.pathname=S.pathname==="/"?r:el([r,S.pathname])),(d.replace?i.replace:i.push)(S,d.state,d)},[r,i,N,g,e])}var CE=ne.createContext(null);function TE(e){let r=ne.useContext(Jo).outlet;return r&&ne.createElement(CE.Provider,{value:e},r)}function Oc(){let{matches:e}=ne.useContext(Jo),r=e[e.length-1];return r?r.params:{}}function Yd(e,{relative:r}={}){let{matches:i}=ne.useContext(Jo),{pathname:o}=Nl(),g=JSON.stringify(Hf(i));return ne.useMemo(()=>Ff(e,JSON.parse(g),o,r==="path"),[e,g,o,r])}function PE(e,r){return d_(e,r)}function d_(e,r,i,o){li(Zu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:g}=ne.useContext(fc),{matches:N}=ne.useContext(Jo),B=N[N.length-1],j=B?B.params:{},R=B?B.pathname:"/",d=B?B.pathnameBase:"/",S=B&&B.route;{let E=S&&S.path||"";p_(R,!S||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${R}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let y=Nl(),b;if(r){let E=typeof r=="string"?Vu(r):r;li(d==="/"||E.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${E.pathname}" was given in the \`location\` prop.`),b=E}else b=y;let T=b.pathname||"/",f=T;if(d!=="/"){let E=d.replace(/^\//,"").split("/");f="/"+T.replace(/^\//,"").split("/").slice(E.length).join("/")}let h=a_(e,{pathname:f});hc(S||h!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),hc(h==null||h[h.length-1].route.element!==void 0||h[h.length-1].route.Component!==void 0||h[h.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=ME(h&&h.map(E=>Object.assign({},E,{params:Object.assign({},j,E.params),pathname:el([d,g.encodeLocation?g.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:el([d,g.encodeLocation?g.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),N,i,o);return r&&k?ne.createElement(Kd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},k):k}function NE(){let e=zE(),r=wE(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",g={padding:"0.5rem",backgroundColor:o},N={padding:"2px 4px",backgroundColor:o},B=null;return console.error("Error handled by React Router default ErrorBoundary:",e),B=ne.createElement(ne.Fragment,null,ne.createElement("p",null,"💿 Hey developer 👋"),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:N},"ErrorBoundary")," or"," ",ne.createElement("code",{style:N},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},r),i?ne.createElement("pre",{style:g},i):null,B)}var AE=ne.createElement(NE,null),OE=class extends ne.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?ne.createElement(Jo.Provider,{value:this.props.routeContext},ne.createElement(Vf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DE({routeContext:e,match:r,children:i}){let o=ne.useContext(qu);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),ne.createElement(Jo.Provider,{value:e},i)}function ME(e,r=[],i=null,o=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(r.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let g=e,N=i?.errors;if(N!=null){let R=g.findIndex(d=>d.route.id&&N?.[d.route.id]!==void 0);li(R>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(N).join(",")}`),g=g.slice(0,Math.min(g.length,R+1))}let B=!1,j=-1;if(i)for(let R=0;R<g.length;R++){let d=g[R];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(j=R),d.route.id){let{loaderData:S,errors:y}=i,b=d.route.loader&&!S.hasOwnProperty(d.route.id)&&(!y||y[d.route.id]===void 0);if(d.route.lazy||b){B=!0,j>=0?g=g.slice(0,j+1):g=[g[0]];break}}}return g.reduceRight((R,d,S)=>{let y,b=!1,T=null,f=null;i&&(y=N&&d.route.id?N[d.route.id]:void 0,T=d.route.errorElement||AE,B&&(j<0&&S===0?(p_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,f=null):j===S&&(b=!0,f=d.route.hydrateFallbackElement||null)));let h=r.concat(g.slice(0,S+1)),k=()=>{let E;return y?E=T:b?E=f:d.route.Component?E=ne.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=R,ne.createElement(DE,{match:d,routeContext:{outlet:R,matches:h,isDataRoute:i!=null},children:E})};return i&&(d.route.ErrorBoundary||d.route.errorElement||S===0)?ne.createElement(OE,{location:i.location,revalidation:i.revalidation,component:T,error:y,children:k(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):k()},null)}function qf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LE(e){let r=ne.useContext(qu);return li(r,qf(e)),r}function IE(e){let r=ne.useContext(Sm);return li(r,qf(e)),r}function jE(e){let r=ne.useContext(Jo);return li(r,qf(e)),r}function Zf(e){let r=jE(e),i=r.matches[r.matches.length-1];return li(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function BE(){return Zf("useRouteId")}function zE(){let e=ne.useContext(Vf),r=IE("useRouteError"),i=Zf("useRouteError");return e!==void 0?e:r.errors?.[i]}function UE(){let{router:e}=LE("useNavigate"),r=Zf("useNavigate"),i=ne.useRef(!1);return u_(()=>{i.current=!0}),ne.useCallback(async(g,N={})=>{hc(i.current,l_),i.current&&(typeof g=="number"?e.navigate(g):await e.navigate(g,{fromRouteId:r,...N}))},[e,r])}var w0={};function p_(e,r,i){!r&&!w0[e]&&(w0[e]=!0,hc(!1,i))}ne.memo(HE);function HE({routes:e,future:r,state:i}){return d_(e,void 0,i,r)}function nm({to:e,replace:r,state:i,relative:o}){li(Zu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:g}=ne.useContext(fc);hc(!g,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:N}=ne.useContext(Jo),{pathname:B}=Nl(),j=Ds(),R=Ff(e,Hf(N),B,o==="path"),d=JSON.stringify(R);return ne.useEffect(()=>{j(JSON.parse(d),{replace:r,state:i,relative:o})},[j,d,o,r,i]),null}function m_(e){return TE(e.context)}function Ia(e){li(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FE({basename:e="/",children:r=null,location:i,navigationType:o="POP",navigator:g,static:N=!1}){li(!Zu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let B=e.replace(/^\/*/,"/"),j=ne.useMemo(()=>({basename:B,navigator:g,static:N,future:{}}),[B,g,N]);typeof i=="string"&&(i=Vu(i));let{pathname:R="/",search:d="",hash:S="",state:y=null,key:b="default"}=i,T=ne.useMemo(()=>{let f=tl(R,B);return f==null?null:{location:{pathname:f,search:d,hash:S,state:y,key:b},navigationType:o}},[B,R,d,S,y,b,o]);return hc(T!=null,`<Router basename="${B}"> is not able to match the URL "${R}${d}${S}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:ne.createElement(fc.Provider,{value:j},ne.createElement(Kd.Provider,{children:r,value:T}))}function VE({children:e,location:r}){return PE(yf(e),r)}function yf(e,r=[]){let i=[];return ne.Children.forEach(e,(o,g)=>{if(!ne.isValidElement(o))return;let N=[...r,g];if(o.type===ne.Fragment){i.push.apply(i,yf(o.props.children,N));return}li(o.type===Ia,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),li(!o.props.index||!o.props.children,"An index route cannot have child routes.");let B={id:o.props.id||N.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(B.children=yf(o.props.children,N)),i.push(B)}),i}var rm="get",am="application/x-www-form-urlencoded";function xm(e){return e!=null&&typeof e.tagName=="string"}function qE(e){return xm(e)&&e.tagName.toLowerCase()==="button"}function ZE(e){return xm(e)&&e.tagName.toLowerCase()==="form"}function WE(e){return xm(e)&&e.tagName.toLowerCase()==="input"}function $E(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function GE(e,r){return e.button===0&&(!r||r==="_self")&&!$E(e)}var Hp=null;function KE(){if(Hp===null)try{new FormData(document.createElement("form"),0),Hp=!1}catch{Hp=!0}return Hp}var YE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kh(e){return e!=null&&!YE.has(e)?(hc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${am}"`),null):e}function QE(e,r){let i,o,g,N,B;if(ZE(e)){let j=e.getAttribute("action");o=j?tl(j,r):null,i=e.getAttribute("method")||rm,g=Kh(e.getAttribute("enctype"))||am,N=new FormData(e)}else if(qE(e)||WE(e)&&(e.type==="submit"||e.type==="image")){let j=e.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let R=e.getAttribute("formaction")||j.getAttribute("action");if(o=R?tl(R,r):null,i=e.getAttribute("formmethod")||j.getAttribute("method")||rm,g=Kh(e.getAttribute("formenctype"))||Kh(j.getAttribute("enctype"))||am,N=new FormData(j,e),!KE()){let{name:d,type:S,value:y}=e;if(S==="image"){let b=d?`${d}.`:"";N.append(`${b}x`,"0"),N.append(`${b}y`,"0")}else d&&N.append(d,y)}}else{if(xm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=rm,o=null,g=am,B=e}return N&&g==="text/plain"&&(B=N,N=void 0),{action:o,method:i.toLowerCase(),encType:g,formData:N,body:B}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wf(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function JE(e,r,i){let o=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return o.pathname==="/"?o.pathname=`_root.${i}`:r&&tl(o.pathname,r)==="/"?o.pathname=`${r.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function XE(e,r){if(e.id in r)return r[e.id];try{let i=await import(e.module);return r[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eS(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function tS(e,r,i){let o=await Promise.all(e.map(async g=>{let N=r.routes[g.route.id];if(N){let B=await XE(N,i);return B.links?B.links():[]}return[]}));return iS(o.flat(1).filter(eS).filter(g=>g.rel==="stylesheet"||g.rel==="preload").map(g=>g.rel==="stylesheet"?{...g,rel:"prefetch",as:"style"}:{...g,rel:"prefetch"}))}function E0(e,r,i,o,g,N){let B=(R,d)=>i[d]?R.route.id!==i[d].route.id:!0,j=(R,d)=>i[d].pathname!==R.pathname||i[d].route.path?.endsWith("*")&&i[d].params["*"]!==R.params["*"];return N==="assets"?r.filter((R,d)=>B(R,d)||j(R,d)):N==="data"?r.filter((R,d)=>{let S=o.routes[R.route.id];if(!S||!S.hasLoader)return!1;if(B(R,d)||j(R,d))return!0;if(R.route.shouldRevalidate){let y=R.route.shouldRevalidate({currentUrl:new URL(g.pathname+g.search+g.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:R.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function nS(e,r,{includeHydrateFallback:i}={}){return rS(e.map(o=>{let g=r.routes[o.route.id];if(!g)return[];let N=[g.module];return g.clientActionModule&&(N=N.concat(g.clientActionModule)),g.clientLoaderModule&&(N=N.concat(g.clientLoaderModule)),i&&g.hydrateFallbackModule&&(N=N.concat(g.hydrateFallbackModule)),g.imports&&(N=N.concat(g.imports)),N}).flat(1))}function rS(e){return[...new Set(e)]}function aS(e){let r={},i=Object.keys(e).sort();for(let o of i)r[o]=e[o];return r}function iS(e,r){let i=new Set;return new Set(r),e.reduce((o,g)=>{let N=JSON.stringify(aS(g));return i.has(N)||(i.add(N),o.push({key:N,link:g})),o},[])}function h_(){let e=ne.useContext(qu);return Wf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function sS(){let e=ne.useContext(Sm);return Wf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var $f=ne.createContext(void 0);$f.displayName="FrameworkContext";function f_(){let e=ne.useContext($f);return Wf(e,"You must render this element inside a <HydratedRouter> element"),e}function oS(e,r){let i=ne.useContext($f),[o,g]=ne.useState(!1),[N,B]=ne.useState(!1),{onFocus:j,onBlur:R,onMouseEnter:d,onMouseLeave:S,onTouchStart:y}=r,b=ne.useRef(null);ne.useEffect(()=>{if(e==="render"&&B(!0),e==="viewport"){let h=E=>{E.forEach(H=>{B(H.isIntersecting)})},k=new IntersectionObserver(h,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[e]),ne.useEffect(()=>{if(o){let h=setTimeout(()=>{B(!0)},100);return()=>{clearTimeout(h)}}},[o]);let T=()=>{g(!0)},f=()=>{g(!1),B(!1)};return i?e!=="intent"?[N,b,{}]:[N,b,{onFocus:Nd(j,T),onBlur:Nd(R,f),onMouseEnter:Nd(d,T),onMouseLeave:Nd(S,f),onTouchStart:Nd(y,T)}]:[!1,b,{}]}function Nd(e,r){return i=>{e&&e(i),i.defaultPrevented||r(i)}}function cS({page:e,...r}){let{router:i}=h_(),o=ne.useMemo(()=>a_(i.routes,e,i.basename),[i.routes,e,i.basename]);return o?ne.createElement(uS,{page:e,matches:o,...r}):null}function lS(e){let{manifest:r,routeModules:i}=f_(),[o,g]=ne.useState([]);return ne.useEffect(()=>{let N=!1;return tS(e,r,i).then(B=>{N||g(B)}),()=>{N=!0}},[e,r,i]),o}function uS({page:e,matches:r,...i}){let o=Nl(),{manifest:g,routeModules:N}=f_(),{basename:B}=h_(),{loaderData:j,matches:R}=sS(),d=ne.useMemo(()=>E0(e,r,R,g,o,"data"),[e,r,R,g,o]),S=ne.useMemo(()=>E0(e,r,R,g,o,"assets"),[e,r,R,g,o]),y=ne.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let f=new Set,h=!1;if(r.forEach(E=>{let H=g.routes[E.route.id];!H||!H.hasLoader||(!d.some(m=>m.route.id===E.route.id)&&E.route.id in j&&N[E.route.id]?.shouldRevalidate||H.hasClientLoader?h=!0:f.add(E.route.id))}),f.size===0)return[];let k=JE(e,B,"data");return h&&f.size>0&&k.searchParams.set("_routes",r.filter(E=>f.has(E.route.id)).map(E=>E.route.id).join(",")),[k.pathname+k.search]},[B,j,o,g,d,r,e,N]),b=ne.useMemo(()=>nS(S,g),[S,g]),T=lS(S);return ne.createElement(ne.Fragment,null,y.map(f=>ne.createElement("link",{key:f,rel:"prefetch",as:"fetch",href:f,...i})),b.map(f=>ne.createElement("link",{key:f,rel:"modulepreload",href:f,...i})),T.map(({key:f,link:h})=>ne.createElement("link",{key:f,...h})))}function dS(...e){return r=>{e.forEach(i=>{typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var g_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{g_&&(window.__reactRouterVersion="7.7.0")}catch{}function pS({basename:e,children:r,window:i}){let o=ne.useRef();o.current==null&&(o.current=Jw({window:i,v5Compat:!0}));let g=o.current,[N,B]=ne.useState({action:g.action,location:g.location}),j=ne.useCallback(R=>{ne.startTransition(()=>B(R))},[B]);return ne.useLayoutEffect(()=>g.listen(j),[g,j]),ne.createElement(FE,{basename:e,children:r,location:N.location,navigationType:N.action,navigator:g})}var v_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ki=ne.forwardRef(function({onClick:r,discover:i="render",prefetch:o="none",relative:g,reloadDocument:N,replace:B,state:j,target:R,to:d,preventScrollReset:S,viewTransition:y,...b},T){let{basename:f}=ne.useContext(fc),h=typeof d=="string"&&v_.test(d),k,E=!1;if(typeof d=="string"&&h&&(k=d,g_))try{let w=new URL(window.location.href),p=d.startsWith("//")?new URL(w.protocol+d):new URL(d),x=tl(p.pathname,f);p.origin===w.origin&&x!=null?d=x+p.search+p.hash:E=!0}catch{hc(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=RE(d,{relative:g}),[m,P,v]=oS(o,b),U=gS(d,{replace:B,state:j,target:R,preventScrollReset:S,relative:g,viewTransition:y});function C(w){r&&r(w),w.defaultPrevented||U(w)}let _=ne.createElement("a",{...b,...v,href:k||H,onClick:E||N?r:C,ref:dS(T,P),target:R,"data-discover":!h&&i==="render"?"true":void 0});return m&&!h?ne.createElement(ne.Fragment,null,_,ne.createElement(cS,{page:H})):_});Ki.displayName="Link";var mS=ne.forwardRef(function({"aria-current":r="page",caseSensitive:i=!1,className:o="",end:g=!1,style:N,to:B,viewTransition:j,children:R,...d},S){let y=Yd(B,{relative:d.relative}),b=Nl(),T=ne.useContext(Sm),{navigator:f,basename:h}=ne.useContext(fc),k=T!=null&&wS(y)&&j===!0,E=f.encodeLocation?f.encodeLocation(y).pathname:y.pathname,H=b.pathname,m=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;i||(H=H.toLowerCase(),m=m?m.toLowerCase():null,E=E.toLowerCase()),m&&h&&(m=tl(m,h)||m);const P=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let v=H===E||!g&&H.startsWith(E)&&H.charAt(P)==="/",U=m!=null&&(m===E||!g&&m.startsWith(E)&&m.charAt(E.length)==="/"),C={isActive:v,isPending:U,isTransitioning:k},_=v?r:void 0,w;typeof o=="function"?w=o(C):w=[o,v?"active":null,U?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let p=typeof N=="function"?N(C):N;return ne.createElement(Ki,{...d,"aria-current":_,className:w,ref:S,style:p,to:B,viewTransition:j},typeof R=="function"?R(C):R)});mS.displayName="NavLink";var hS=ne.forwardRef(({discover:e="render",fetcherKey:r,navigate:i,reloadDocument:o,replace:g,state:N,method:B=rm,action:j,onSubmit:R,relative:d,preventScrollReset:S,viewTransition:y,...b},T)=>{let f=_S(),h=bS(j,{relative:d}),k=B.toLowerCase()==="get"?"get":"post",E=typeof j=="string"&&v_.test(j),H=m=>{if(R&&R(m),m.defaultPrevented)return;m.preventDefault();let P=m.nativeEvent.submitter,v=P?.getAttribute("formmethod")||B;f(P||m.currentTarget,{fetcherKey:r,method:v,navigate:i,replace:g,state:N,relative:d,preventScrollReset:S,viewTransition:y})};return ne.createElement("form",{ref:T,method:k,action:h,onSubmit:o?R:H,...b,"data-discover":!E&&e==="render"?"true":void 0})});hS.displayName="Form";function fS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function y_(e){let r=ne.useContext(qu);return li(r,fS(e)),r}function gS(e,{target:r,replace:i,state:o,preventScrollReset:g,relative:N,viewTransition:B}={}){let j=Ds(),R=Nl(),d=Yd(e,{relative:N});return ne.useCallback(S=>{if(GE(S,r)){S.preventDefault();let y=i!==void 0?i:Vd(R)===Vd(d);j(e,{replace:y,state:o,preventScrollReset:g,relative:N,viewTransition:B})}},[R,j,d,i,o,r,e,g,N,B])}var vS=0,yS=()=>`__${String(++vS)}__`;function _S(){let{router:e}=y_("useSubmit"),{basename:r}=ne.useContext(fc),i=BE();return ne.useCallback(async(o,g={})=>{let{action:N,method:B,encType:j,formData:R,body:d}=QE(o,r);if(g.navigate===!1){let S=g.fetcherKey||yS();await e.fetch(S,i,g.action||N,{preventScrollReset:g.preventScrollReset,formData:R,body:d,formMethod:g.method||B,formEncType:g.encType||j,flushSync:g.flushSync})}else await e.navigate(g.action||N,{preventScrollReset:g.preventScrollReset,formData:R,body:d,formMethod:g.method||B,formEncType:g.encType||j,replace:g.replace,state:g.state,fromRouteId:i,flushSync:g.flushSync,viewTransition:g.viewTransition})},[e,r,i])}function bS(e,{relative:r}={}){let{basename:i}=ne.useContext(fc),o=ne.useContext(Jo);li(o,"useFormAction must be used inside a RouteContext");let[g]=o.matches.slice(-1),N={...Yd(e||".",{relative:r})},B=Nl();if(e==null){N.search=B.search;let j=new URLSearchParams(N.search),R=j.getAll("index");if(R.some(S=>S==="")){j.delete("index"),R.filter(y=>y).forEach(y=>j.append("index",y));let S=j.toString();N.search=S?`?${S}`:""}}return(!e||e===".")&&g.route.index&&(N.search=N.search?N.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(N.pathname=N.pathname==="/"?i:el([i,N.pathname])),Vd(N)}function wS(e,r={}){let i=ne.useContext(c_);li(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=y_("useViewTransitionState"),g=Yd(e,{relative:r.relative});if(!i.isTransitioning)return!1;let N=tl(i.currentLocation.pathname,o)||i.currentLocation.pathname,B=tl(i.nextLocation.pathname,o)||i.nextLocation.pathname;return dm(g.pathname,B)!=null||dm(g.pathname,N)!=null}var __=r_();const b_=zf(__);function w_(e,r){return function(){return e.apply(r,arguments)}}const{toString:ES}=Object.prototype,{getPrototypeOf:Gf}=Object,{iterator:Rm,toStringTag:E_}=Symbol,km=(e=>r=>{const i=ES.call(r);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),gc=e=>(e=e.toLowerCase(),r=>km(r)===e),Cm=e=>r=>typeof r===e,{isArray:Wu}=Array,qd=Cm("undefined");function Qd(e){return e!==null&&!qd(e)&&e.constructor!==null&&!qd(e.constructor)&&_o(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const S_=gc("ArrayBuffer");function SS(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&S_(e.buffer),r}const xS=Cm("string"),_o=Cm("function"),x_=Cm("number"),Jd=e=>e!==null&&typeof e=="object",RS=e=>e===!0||e===!1,im=e=>{if(km(e)!=="object")return!1;const r=Gf(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(E_ in e)&&!(Rm in e)},kS=e=>{if(!Jd(e)||Qd(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},CS=gc("Date"),TS=gc("File"),PS=gc("Blob"),NS=gc("FileList"),AS=e=>Jd(e)&&_o(e.pipe),OS=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||_o(e.append)&&((r=km(e))==="formdata"||r==="object"&&_o(e.toString)&&e.toString()==="[object FormData]"))},DS=gc("URLSearchParams"),[MS,LS,IS,jS]=["ReadableStream","Request","Response","Headers"].map(gc),BS=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xd(e,r,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let o,g;if(typeof e!="object"&&(e=[e]),Wu(e))for(o=0,g=e.length;o<g;o++)r.call(null,e[o],o,e);else{if(Qd(e))return;const N=i?Object.getOwnPropertyNames(e):Object.keys(e),B=N.length;let j;for(o=0;o<B;o++)j=N[o],r.call(null,e[j],j,e)}}function R_(e,r){if(Qd(e))return null;r=r.toLowerCase();const i=Object.keys(e);let o=i.length,g;for(;o-- >0;)if(g=i[o],r===g.toLowerCase())return g;return null}const $l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,k_=e=>!qd(e)&&e!==$l;function _f(){const{caseless:e}=k_(this)&&this||{},r={},i=(o,g)=>{const N=e&&R_(r,g)||g;im(r[N])&&im(o)?r[N]=_f(r[N],o):im(o)?r[N]=_f({},o):Wu(o)?r[N]=o.slice():r[N]=o};for(let o=0,g=arguments.length;o<g;o++)arguments[o]&&Xd(arguments[o],i);return r}const zS=(e,r,i,{allOwnKeys:o}={})=>(Xd(r,(g,N)=>{i&&_o(g)?e[N]=w_(g,i):e[N]=g},{allOwnKeys:o}),e),US=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),HS=(e,r,i,o)=>{e.prototype=Object.create(r.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),i&&Object.assign(e.prototype,i)},FS=(e,r,i,o)=>{let g,N,B;const j={};if(r=r||{},e==null)return r;do{for(g=Object.getOwnPropertyNames(e),N=g.length;N-- >0;)B=g[N],(!o||o(B,e,r))&&!j[B]&&(r[B]=e[B],j[B]=!0);e=i!==!1&&Gf(e)}while(e&&(!i||i(e,r))&&e!==Object.prototype);return r},VS=(e,r,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=r.length;const o=e.indexOf(r,i);return o!==-1&&o===i},qS=e=>{if(!e)return null;if(Wu(e))return e;let r=e.length;if(!x_(r))return null;const i=new Array(r);for(;r-- >0;)i[r]=e[r];return i},ZS=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&Gf(Uint8Array)),WS=(e,r)=>{const o=(e&&e[Rm]).call(e);let g;for(;(g=o.next())&&!g.done;){const N=g.value;r.call(e,N[0],N[1])}},$S=(e,r)=>{let i;const o=[];for(;(i=e.exec(r))!==null;)o.push(i);return o},GS=gc("HTMLFormElement"),KS=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,o,g){return o.toUpperCase()+g}),S0=(({hasOwnProperty:e})=>(r,i)=>e.call(r,i))(Object.prototype),YS=gc("RegExp"),C_=(e,r)=>{const i=Object.getOwnPropertyDescriptors(e),o={};Xd(i,(g,N)=>{let B;(B=r(g,N,e))!==!1&&(o[N]=B||g)}),Object.defineProperties(e,o)},QS=e=>{C_(e,(r,i)=>{if(_o(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const o=e[i];if(_o(o)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},JS=(e,r)=>{const i={},o=g=>{g.forEach(N=>{i[N]=!0})};return Wu(e)?o(e):o(String(e).split(r)),i},XS=()=>{},e2=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r;function t2(e){return!!(e&&_o(e.append)&&e[E_]==="FormData"&&e[Rm])}const n2=e=>{const r=new Array(10),i=(o,g)=>{if(Jd(o)){if(r.indexOf(o)>=0)return;if(Qd(o))return o;if(!("toJSON"in o)){r[g]=o;const N=Wu(o)?[]:{};return Xd(o,(B,j)=>{const R=i(B,g+1);!qd(R)&&(N[j]=R)}),r[g]=void 0,N}}return o};return i(e,0)},r2=gc("AsyncFunction"),a2=e=>e&&(Jd(e)||_o(e))&&_o(e.then)&&_o(e.catch),T_=((e,r)=>e?setImmediate:r?((i,o)=>($l.addEventListener("message",({source:g,data:N})=>{g===$l&&N===i&&o.length&&o.shift()()},!1),g=>{o.push(g),$l.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",_o($l.postMessage)),i2=typeof queueMicrotask<"u"?queueMicrotask.bind($l):typeof process<"u"&&process.nextTick||T_,s2=e=>e!=null&&_o(e[Rm]),wt={isArray:Wu,isArrayBuffer:S_,isBuffer:Qd,isFormData:OS,isArrayBufferView:SS,isString:xS,isNumber:x_,isBoolean:RS,isObject:Jd,isPlainObject:im,isEmptyObject:kS,isReadableStream:MS,isRequest:LS,isResponse:IS,isHeaders:jS,isUndefined:qd,isDate:CS,isFile:TS,isBlob:PS,isRegExp:YS,isFunction:_o,isStream:AS,isURLSearchParams:DS,isTypedArray:ZS,isFileList:NS,forEach:Xd,merge:_f,extend:zS,trim:BS,stripBOM:US,inherits:HS,toFlatObject:FS,kindOf:km,kindOfTest:gc,endsWith:VS,toArray:qS,forEachEntry:WS,matchAll:$S,isHTMLForm:GS,hasOwnProperty:S0,hasOwnProp:S0,reduceDescriptors:C_,freezeMethods:QS,toObjectSet:JS,toCamelCase:KS,noop:XS,toFiniteNumber:e2,findKey:R_,global:$l,isContextDefined:k_,isSpecCompliantForm:t2,toJSONObject:n2,isAsyncFn:r2,isThenable:a2,setImmediate:T_,asap:i2,isIterable:s2};function Kr(e,r,i,o,g){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),i&&(this.config=i),o&&(this.request=o),g&&(this.response=g,this.status=g.status?g.status:null)}wt.inherits(Kr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const P_=Kr.prototype,N_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{N_[e]={value:e}});Object.defineProperties(Kr,N_);Object.defineProperty(P_,"isAxiosError",{value:!0});Kr.from=(e,r,i,o,g,N)=>{const B=Object.create(P_);return wt.toFlatObject(e,B,function(R){return R!==Error.prototype},j=>j!=="isAxiosError"),Kr.call(B,e.message,r,i,o,g),B.cause=e,B.name=e.name,N&&Object.assign(B,N),B};const o2=null;function bf(e){return wt.isPlainObject(e)||wt.isArray(e)}function A_(e){return wt.endsWith(e,"[]")?e.slice(0,-2):e}function x0(e,r,i){return e?e.concat(r).map(function(g,N){return g=A_(g),!i&&N?"["+g+"]":g}).join(i?".":""):r}function c2(e){return wt.isArray(e)&&!e.some(bf)}const l2=wt.toFlatObject(wt,{},null,function(r){return/^is[A-Z]/.test(r)});function Tm(e,r,i){if(!wt.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,i=wt.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,k){return!wt.isUndefined(k[h])});const o=i.metaTokens,g=i.visitor||S,N=i.dots,B=i.indexes,R=(i.Blob||typeof Blob<"u"&&Blob)&&wt.isSpecCompliantForm(r);if(!wt.isFunction(g))throw new TypeError("visitor must be a function");function d(f){if(f===null)return"";if(wt.isDate(f))return f.toISOString();if(wt.isBoolean(f))return f.toString();if(!R&&wt.isBlob(f))throw new Kr("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(f)||wt.isTypedArray(f)?R&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function S(f,h,k){let E=f;if(f&&!k&&typeof f=="object"){if(wt.endsWith(h,"{}"))h=o?h:h.slice(0,-2),f=JSON.stringify(f);else if(wt.isArray(f)&&c2(f)||(wt.isFileList(f)||wt.endsWith(h,"[]"))&&(E=wt.toArray(f)))return h=A_(h),E.forEach(function(m,P){!(wt.isUndefined(m)||m===null)&&r.append(B===!0?x0([h],P,N):B===null?h:h+"[]",d(m))}),!1}return bf(f)?!0:(r.append(x0(k,h,N),d(f)),!1)}const y=[],b=Object.assign(l2,{defaultVisitor:S,convertValue:d,isVisitable:bf});function T(f,h){if(!wt.isUndefined(f)){if(y.indexOf(f)!==-1)throw Error("Circular reference detected in "+h.join("."));y.push(f),wt.forEach(f,function(E,H){(!(wt.isUndefined(E)||E===null)&&g.call(r,E,wt.isString(H)?H.trim():H,h,b))===!0&&T(E,h?h.concat(H):[H])}),y.pop()}}if(!wt.isObject(e))throw new TypeError("data must be an object");return T(e),r}function R0(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return r[o]})}function Kf(e,r){this._pairs=[],e&&Tm(e,this,r)}const O_=Kf.prototype;O_.append=function(r,i){this._pairs.push([r,i])};O_.toString=function(r){const i=r?function(o){return r.call(this,o,R0)}:R0;return this._pairs.map(function(g){return i(g[0])+"="+i(g[1])},"").join("&")};function u2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function D_(e,r,i){if(!r)return e;const o=i&&i.encode||u2;wt.isFunction(i)&&(i={serialize:i});const g=i&&i.serialize;let N;if(g?N=g(r,i):N=wt.isURLSearchParams(r)?r.toString():new Kf(r,i).toString(o),N){const B=e.indexOf("#");B!==-1&&(e=e.slice(0,B)),e+=(e.indexOf("?")===-1?"?":"&")+N}return e}class k0{constructor(){this.handlers=[]}use(r,i,o){return this.handlers.push({fulfilled:r,rejected:i,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){wt.forEach(this.handlers,function(o){o!==null&&r(o)})}}const M_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},d2=typeof URLSearchParams<"u"?URLSearchParams:Kf,p2=typeof FormData<"u"?FormData:null,m2=typeof Blob<"u"?Blob:null,h2={isBrowser:!0,classes:{URLSearchParams:d2,FormData:p2,Blob:m2},protocols:["http","https","file","blob","url","data"]},Yf=typeof window<"u"&&typeof document<"u",wf=typeof navigator=="object"&&navigator||void 0,f2=Yf&&(!wf||["ReactNative","NativeScript","NS"].indexOf(wf.product)<0),g2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",v2=Yf&&window.location.href||"http://localhost",y2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Yf,hasStandardBrowserEnv:f2,hasStandardBrowserWebWorkerEnv:g2,navigator:wf,origin:v2},Symbol.toStringTag,{value:"Module"})),qs={...y2,...h2};function _2(e,r){return Tm(e,new qs.classes.URLSearchParams,{visitor:function(i,o,g,N){return qs.isNode&&wt.isBuffer(i)?(this.append(o,i.toString("base64")),!1):N.defaultVisitor.apply(this,arguments)},...r})}function b2(e){return wt.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function w2(e){const r={},i=Object.keys(e);let o;const g=i.length;let N;for(o=0;o<g;o++)N=i[o],r[N]=e[N];return r}function L_(e){function r(i,o,g,N){let B=i[N++];if(B==="__proto__")return!0;const j=Number.isFinite(+B),R=N>=i.length;return B=!B&&wt.isArray(g)?g.length:B,R?(wt.hasOwnProp(g,B)?g[B]=[g[B],o]:g[B]=o,!j):((!g[B]||!wt.isObject(g[B]))&&(g[B]=[]),r(i,o,g[B],N)&&wt.isArray(g[B])&&(g[B]=w2(g[B])),!j)}if(wt.isFormData(e)&&wt.isFunction(e.entries)){const i={};return wt.forEachEntry(e,(o,g)=>{r(b2(o),g,i,0)}),i}return null}function E2(e,r,i){if(wt.isString(e))try{return(r||JSON.parse)(e),wt.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(i||JSON.stringify)(e)}const ep={transitional:M_,adapter:["xhr","http","fetch"],transformRequest:[function(r,i){const o=i.getContentType()||"",g=o.indexOf("application/json")>-1,N=wt.isObject(r);if(N&&wt.isHTMLForm(r)&&(r=new FormData(r)),wt.isFormData(r))return g?JSON.stringify(L_(r)):r;if(wt.isArrayBuffer(r)||wt.isBuffer(r)||wt.isStream(r)||wt.isFile(r)||wt.isBlob(r)||wt.isReadableStream(r))return r;if(wt.isArrayBufferView(r))return r.buffer;if(wt.isURLSearchParams(r))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let j;if(N){if(o.indexOf("application/x-www-form-urlencoded")>-1)return _2(r,this.formSerializer).toString();if((j=wt.isFileList(r))||o.indexOf("multipart/form-data")>-1){const R=this.env&&this.env.FormData;return Tm(j?{"files[]":r}:r,R&&new R,this.formSerializer)}}return N||g?(i.setContentType("application/json",!1),E2(r)):r}],transformResponse:[function(r){const i=this.transitional||ep.transitional,o=i&&i.forcedJSONParsing,g=this.responseType==="json";if(wt.isResponse(r)||wt.isReadableStream(r))return r;if(r&&wt.isString(r)&&(o&&!this.responseType||g)){const B=!(i&&i.silentJSONParsing)&&g;try{return JSON.parse(r)}catch(j){if(B)throw j.name==="SyntaxError"?Kr.from(j,Kr.ERR_BAD_RESPONSE,this,null,this.response):j}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qs.classes.FormData,Blob:qs.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],e=>{ep.headers[e]={}});const S2=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),x2=e=>{const r={};let i,o,g;return e&&e.split(`
`).forEach(function(B){g=B.indexOf(":"),i=B.substring(0,g).trim().toLowerCase(),o=B.substring(g+1).trim(),!(!i||r[i]&&S2[i])&&(i==="set-cookie"?r[i]?r[i].push(o):r[i]=[o]:r[i]=r[i]?r[i]+", "+o:o)}),r},C0=Symbol("internals");function Ad(e){return e&&String(e).trim().toLowerCase()}function sm(e){return e===!1||e==null?e:wt.isArray(e)?e.map(sm):String(e)}function R2(e){const r=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=i.exec(e);)r[o[1]]=o[2];return r}const k2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Yh(e,r,i,o,g){if(wt.isFunction(o))return o.call(this,r,i);if(g&&(r=i),!!wt.isString(r)){if(wt.isString(o))return r.indexOf(o)!==-1;if(wt.isRegExp(o))return o.test(r)}}function C2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,i,o)=>i.toUpperCase()+o)}function T2(e,r){const i=wt.toCamelCase(" "+r);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+i,{value:function(g,N,B){return this[o].call(this,r,g,N,B)},configurable:!0})})}let bo=class{constructor(r){r&&this.set(r)}set(r,i,o){const g=this;function N(j,R,d){const S=Ad(R);if(!S)throw new Error("header name must be a non-empty string");const y=wt.findKey(g,S);(!y||g[y]===void 0||d===!0||d===void 0&&g[y]!==!1)&&(g[y||R]=sm(j))}const B=(j,R)=>wt.forEach(j,(d,S)=>N(d,S,R));if(wt.isPlainObject(r)||r instanceof this.constructor)B(r,i);else if(wt.isString(r)&&(r=r.trim())&&!k2(r))B(x2(r),i);else if(wt.isObject(r)&&wt.isIterable(r)){let j={},R,d;for(const S of r){if(!wt.isArray(S))throw TypeError("Object iterator must return a key-value pair");j[d=S[0]]=(R=j[d])?wt.isArray(R)?[...R,S[1]]:[R,S[1]]:S[1]}B(j,i)}else r!=null&&N(i,r,o);return this}get(r,i){if(r=Ad(r),r){const o=wt.findKey(this,r);if(o){const g=this[o];if(!i)return g;if(i===!0)return R2(g);if(wt.isFunction(i))return i.call(this,g,o);if(wt.isRegExp(i))return i.exec(g);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,i){if(r=Ad(r),r){const o=wt.findKey(this,r);return!!(o&&this[o]!==void 0&&(!i||Yh(this,this[o],o,i)))}return!1}delete(r,i){const o=this;let g=!1;function N(B){if(B=Ad(B),B){const j=wt.findKey(o,B);j&&(!i||Yh(o,o[j],j,i))&&(delete o[j],g=!0)}}return wt.isArray(r)?r.forEach(N):N(r),g}clear(r){const i=Object.keys(this);let o=i.length,g=!1;for(;o--;){const N=i[o];(!r||Yh(this,this[N],N,r,!0))&&(delete this[N],g=!0)}return g}normalize(r){const i=this,o={};return wt.forEach(this,(g,N)=>{const B=wt.findKey(o,N);if(B){i[B]=sm(g),delete i[N];return}const j=r?C2(N):String(N).trim();j!==N&&delete i[N],i[j]=sm(g),o[j]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const i=Object.create(null);return wt.forEach(this,(o,g)=>{o!=null&&o!==!1&&(i[g]=r&&wt.isArray(o)?o.join(", "):o)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,i])=>r+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...i){const o=new this(r);return i.forEach(g=>o.set(g)),o}static accessor(r){const o=(this[C0]=this[C0]={accessors:{}}).accessors,g=this.prototype;function N(B){const j=Ad(B);o[j]||(T2(g,B),o[j]=!0)}return wt.isArray(r)?r.forEach(N):N(r),this}};bo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);wt.reduceDescriptors(bo.prototype,({value:e},r)=>{let i=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(o){this[i]=o}}});wt.freezeMethods(bo);function Qh(e,r){const i=this||ep,o=r||i,g=bo.from(o.headers);let N=o.data;return wt.forEach(e,function(j){N=j.call(i,N,g.normalize(),r?r.status:void 0)}),g.normalize(),N}function I_(e){return!!(e&&e.__CANCEL__)}function $u(e,r,i){Kr.call(this,e??"canceled",Kr.ERR_CANCELED,r,i),this.name="CanceledError"}wt.inherits($u,Kr,{__CANCEL__:!0});function j_(e,r,i){const o=i.config.validateStatus;!i.status||!o||o(i.status)?e(i):r(new Kr("Request failed with status code "+i.status,[Kr.ERR_BAD_REQUEST,Kr.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function P2(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function N2(e,r){e=e||10;const i=new Array(e),o=new Array(e);let g=0,N=0,B;return r=r!==void 0?r:1e3,function(R){const d=Date.now(),S=o[N];B||(B=d),i[g]=R,o[g]=d;let y=N,b=0;for(;y!==g;)b+=i[y++],y=y%e;if(g=(g+1)%e,g===N&&(N=(N+1)%e),d-B<r)return;const T=S&&d-S;return T?Math.round(b*1e3/T):void 0}}function A2(e,r){let i=0,o=1e3/r,g,N;const B=(d,S=Date.now())=>{i=S,g=null,N&&(clearTimeout(N),N=null),e(...d)};return[(...d)=>{const S=Date.now(),y=S-i;y>=o?B(d,S):(g=d,N||(N=setTimeout(()=>{N=null,B(g)},o-y)))},()=>g&&B(g)]}const pm=(e,r,i=3)=>{let o=0;const g=N2(50,250);return A2(N=>{const B=N.loaded,j=N.lengthComputable?N.total:void 0,R=B-o,d=g(R),S=B<=j;o=B;const y={loaded:B,total:j,progress:j?B/j:void 0,bytes:R,rate:d||void 0,estimated:d&&j&&S?(j-B)/d:void 0,event:N,lengthComputable:j!=null,[r?"download":"upload"]:!0};e(y)},i)},T0=(e,r)=>{const i=e!=null;return[o=>r[0]({lengthComputable:i,total:e,loaded:o}),r[1]]},P0=e=>(...r)=>wt.asap(()=>e(...r)),O2=qs.hasStandardBrowserEnv?((e,r)=>i=>(i=new URL(i,qs.origin),e.protocol===i.protocol&&e.host===i.host&&(r||e.port===i.port)))(new URL(qs.origin),qs.navigator&&/(msie|trident)/i.test(qs.navigator.userAgent)):()=>!0,D2=qs.hasStandardBrowserEnv?{write(e,r,i,o,g,N){const B=[e+"="+encodeURIComponent(r)];wt.isNumber(i)&&B.push("expires="+new Date(i).toGMTString()),wt.isString(o)&&B.push("path="+o),wt.isString(g)&&B.push("domain="+g),N===!0&&B.push("secure"),document.cookie=B.join("; ")},read(e){const r=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function M2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function L2(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function B_(e,r,i){let o=!M2(r);return e&&(o||i==!1)?L2(e,r):r}const N0=e=>e instanceof bo?{...e}:e;function Ql(e,r){r=r||{};const i={};function o(d,S,y,b){return wt.isPlainObject(d)&&wt.isPlainObject(S)?wt.merge.call({caseless:b},d,S):wt.isPlainObject(S)?wt.merge({},S):wt.isArray(S)?S.slice():S}function g(d,S,y,b){if(wt.isUndefined(S)){if(!wt.isUndefined(d))return o(void 0,d,y,b)}else return o(d,S,y,b)}function N(d,S){if(!wt.isUndefined(S))return o(void 0,S)}function B(d,S){if(wt.isUndefined(S)){if(!wt.isUndefined(d))return o(void 0,d)}else return o(void 0,S)}function j(d,S,y){if(y in r)return o(d,S);if(y in e)return o(void 0,d)}const R={url:N,method:N,data:N,baseURL:B,transformRequest:B,transformResponse:B,paramsSerializer:B,timeout:B,timeoutMessage:B,withCredentials:B,withXSRFToken:B,adapter:B,responseType:B,xsrfCookieName:B,xsrfHeaderName:B,onUploadProgress:B,onDownloadProgress:B,decompress:B,maxContentLength:B,maxBodyLength:B,beforeRedirect:B,transport:B,httpAgent:B,httpsAgent:B,cancelToken:B,socketPath:B,responseEncoding:B,validateStatus:j,headers:(d,S,y)=>g(N0(d),N0(S),y,!0)};return wt.forEach(Object.keys({...e,...r}),function(S){const y=R[S]||g,b=y(e[S],r[S],S);wt.isUndefined(b)&&y!==j||(i[S]=b)}),i}const z_=e=>{const r=Ql({},e);let{data:i,withXSRFToken:o,xsrfHeaderName:g,xsrfCookieName:N,headers:B,auth:j}=r;r.headers=B=bo.from(B),r.url=D_(B_(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),j&&B.set("Authorization","Basic "+btoa((j.username||"")+":"+(j.password?unescape(encodeURIComponent(j.password)):"")));let R;if(wt.isFormData(i)){if(qs.hasStandardBrowserEnv||qs.hasStandardBrowserWebWorkerEnv)B.setContentType(void 0);else if((R=B.getContentType())!==!1){const[d,...S]=R?R.split(";").map(y=>y.trim()).filter(Boolean):[];B.setContentType([d||"multipart/form-data",...S].join("; "))}}if(qs.hasStandardBrowserEnv&&(o&&wt.isFunction(o)&&(o=o(r)),o||o!==!1&&O2(r.url))){const d=g&&N&&D2.read(N);d&&B.set(g,d)}return r},I2=typeof XMLHttpRequest<"u",j2=I2&&function(e){return new Promise(function(i,o){const g=z_(e);let N=g.data;const B=bo.from(g.headers).normalize();let{responseType:j,onUploadProgress:R,onDownloadProgress:d}=g,S,y,b,T,f;function h(){T&&T(),f&&f(),g.cancelToken&&g.cancelToken.unsubscribe(S),g.signal&&g.signal.removeEventListener("abort",S)}let k=new XMLHttpRequest;k.open(g.method.toUpperCase(),g.url,!0),k.timeout=g.timeout;function E(){if(!k)return;const m=bo.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),v={data:!j||j==="text"||j==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:m,config:e,request:k};j_(function(C){i(C),h()},function(C){o(C),h()},v),k=null}"onloadend"in k?k.onloadend=E:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(E)},k.onabort=function(){k&&(o(new Kr("Request aborted",Kr.ECONNABORTED,e,k)),k=null)},k.onerror=function(){o(new Kr("Network Error",Kr.ERR_NETWORK,e,k)),k=null},k.ontimeout=function(){let P=g.timeout?"timeout of "+g.timeout+"ms exceeded":"timeout exceeded";const v=g.transitional||M_;g.timeoutErrorMessage&&(P=g.timeoutErrorMessage),o(new Kr(P,v.clarifyTimeoutError?Kr.ETIMEDOUT:Kr.ECONNABORTED,e,k)),k=null},N===void 0&&B.setContentType(null),"setRequestHeader"in k&&wt.forEach(B.toJSON(),function(P,v){k.setRequestHeader(v,P)}),wt.isUndefined(g.withCredentials)||(k.withCredentials=!!g.withCredentials),j&&j!=="json"&&(k.responseType=g.responseType),d&&([b,f]=pm(d,!0),k.addEventListener("progress",b)),R&&k.upload&&([y,T]=pm(R),k.upload.addEventListener("progress",y),k.upload.addEventListener("loadend",T)),(g.cancelToken||g.signal)&&(S=m=>{k&&(o(!m||m.type?new $u(null,e,k):m),k.abort(),k=null)},g.cancelToken&&g.cancelToken.subscribe(S),g.signal&&(g.signal.aborted?S():g.signal.addEventListener("abort",S)));const H=P2(g.url);if(H&&qs.protocols.indexOf(H)===-1){o(new Kr("Unsupported protocol "+H+":",Kr.ERR_BAD_REQUEST,e));return}k.send(N||null)})},B2=(e,r)=>{const{length:i}=e=e?e.filter(Boolean):[];if(r||i){let o=new AbortController,g;const N=function(d){if(!g){g=!0,j();const S=d instanceof Error?d:this.reason;o.abort(S instanceof Kr?S:new $u(S instanceof Error?S.message:S))}};let B=r&&setTimeout(()=>{B=null,N(new Kr(`timeout ${r} of ms exceeded`,Kr.ETIMEDOUT))},r);const j=()=>{e&&(B&&clearTimeout(B),B=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(N):d.removeEventListener("abort",N)}),e=null)};e.forEach(d=>d.addEventListener("abort",N));const{signal:R}=o;return R.unsubscribe=()=>wt.asap(j),R}},z2=function*(e,r){let i=e.byteLength;if(i<r){yield e;return}let o=0,g;for(;o<i;)g=o+r,yield e.slice(o,g),o=g},U2=async function*(e,r){for await(const i of H2(e))yield*z2(i,r)},H2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:i,value:o}=await r.read();if(i)break;yield o}}finally{await r.cancel()}},A0=(e,r,i,o)=>{const g=U2(e,r);let N=0,B,j=R=>{B||(B=!0,o&&o(R))};return new ReadableStream({async pull(R){try{const{done:d,value:S}=await g.next();if(d){j(),R.close();return}let y=S.byteLength;if(i){let b=N+=y;i(b)}R.enqueue(new Uint8Array(S))}catch(d){throw j(d),d}},cancel(R){return j(R),g.return()}},{highWaterMark:2})},Pm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",U_=Pm&&typeof ReadableStream=="function",F2=Pm&&(typeof TextEncoder=="function"?(e=>r=>e.encode(r))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),H_=(e,...r)=>{try{return!!e(...r)}catch{return!1}},V2=U_&&H_(()=>{let e=!1;const r=new Request(qs.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!r}),O0=64*1024,Ef=U_&&H_(()=>wt.isReadableStream(new Response("").body)),mm={stream:Ef&&(e=>e.body)};Pm&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!mm[r]&&(mm[r]=wt.isFunction(e[r])?i=>i[r]():(i,o)=>{throw new Kr(`Response type '${r}' is not supported`,Kr.ERR_NOT_SUPPORT,o)})})})(new Response);const q2=async e=>{if(e==null)return 0;if(wt.isBlob(e))return e.size;if(wt.isSpecCompliantForm(e))return(await new Request(qs.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(wt.isArrayBufferView(e)||wt.isArrayBuffer(e))return e.byteLength;if(wt.isURLSearchParams(e)&&(e=e+""),wt.isString(e))return(await F2(e)).byteLength},Z2=async(e,r)=>{const i=wt.toFiniteNumber(e.getContentLength());return i??q2(r)},W2=Pm&&(async e=>{let{url:r,method:i,data:o,signal:g,cancelToken:N,timeout:B,onDownloadProgress:j,onUploadProgress:R,responseType:d,headers:S,withCredentials:y="same-origin",fetchOptions:b}=z_(e);d=d?(d+"").toLowerCase():"text";let T=B2([g,N&&N.toAbortSignal()],B),f;const h=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let k;try{if(R&&V2&&i!=="get"&&i!=="head"&&(k=await Z2(S,o))!==0){let v=new Request(r,{method:"POST",body:o,duplex:"half"}),U;if(wt.isFormData(o)&&(U=v.headers.get("content-type"))&&S.setContentType(U),v.body){const[C,_]=T0(k,pm(P0(R)));o=A0(v.body,O0,C,_)}}wt.isString(y)||(y=y?"include":"omit");const E="credentials"in Request.prototype;f=new Request(r,{...b,signal:T,method:i.toUpperCase(),headers:S.normalize().toJSON(),body:o,duplex:"half",credentials:E?y:void 0});let H=await fetch(f,b);const m=Ef&&(d==="stream"||d==="response");if(Ef&&(j||m&&h)){const v={};["status","statusText","headers"].forEach(w=>{v[w]=H[w]});const U=wt.toFiniteNumber(H.headers.get("content-length")),[C,_]=j&&T0(U,pm(P0(j),!0))||[];H=new Response(A0(H.body,O0,C,()=>{_&&_(),h&&h()}),v)}d=d||"text";let P=await mm[wt.findKey(mm,d)||"text"](H,e);return!m&&h&&h(),await new Promise((v,U)=>{j_(v,U,{data:P,headers:bo.from(H.headers),status:H.status,statusText:H.statusText,config:e,request:f})})}catch(E){throw h&&h(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new Kr("Network Error",Kr.ERR_NETWORK,e,f),{cause:E.cause||E}):Kr.from(E,E&&E.code,e,f)}}),Sf={http:o2,xhr:j2,fetch:W2};wt.forEach(Sf,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const D0=e=>`- ${e}`,$2=e=>wt.isFunction(e)||e===null||e===!1,F_={getAdapter:e=>{e=wt.isArray(e)?e:[e];const{length:r}=e;let i,o;const g={};for(let N=0;N<r;N++){i=e[N];let B;if(o=i,!$2(i)&&(o=Sf[(B=String(i)).toLowerCase()],o===void 0))throw new Kr(`Unknown adapter '${B}'`);if(o)break;g[B||"#"+N]=o}if(!o){const N=Object.entries(g).map(([j,R])=>`adapter ${j} `+(R===!1?"is not supported by the environment":"is not available in the build"));let B=r?N.length>1?`since :
`+N.map(D0).join(`
`):" "+D0(N[0]):"as no adapter specified";throw new Kr("There is no suitable adapter to dispatch the request "+B,"ERR_NOT_SUPPORT")}return o},adapters:Sf};function Jh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $u(null,e)}function M0(e){return Jh(e),e.headers=bo.from(e.headers),e.data=Qh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),F_.getAdapter(e.adapter||ep.adapter)(e).then(function(o){return Jh(e),o.data=Qh.call(e,e.transformResponse,o),o.headers=bo.from(o.headers),o},function(o){return I_(o)||(Jh(e),o&&o.response&&(o.response.data=Qh.call(e,e.transformResponse,o.response),o.response.headers=bo.from(o.response.headers))),Promise.reject(o)})}const V_="1.11.0",Nm={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{Nm[e]=function(o){return typeof o===e||"a"+(r<1?"n ":" ")+e}});const L0={};Nm.transitional=function(r,i,o){function g(N,B){return"[Axios v"+V_+"] Transitional option '"+N+"'"+B+(o?". "+o:"")}return(N,B,j)=>{if(r===!1)throw new Kr(g(B," has been removed"+(i?" in "+i:"")),Kr.ERR_DEPRECATED);return i&&!L0[B]&&(L0[B]=!0,console.warn(g(B," has been deprecated since v"+i+" and will be removed in the near future"))),r?r(N,B,j):!0}};Nm.spelling=function(r){return(i,o)=>(console.warn(`${o} is likely a misspelling of ${r}`),!0)};function G2(e,r,i){if(typeof e!="object")throw new Kr("options must be an object",Kr.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let g=o.length;for(;g-- >0;){const N=o[g],B=r[N];if(B){const j=e[N],R=j===void 0||B(j,N,e);if(R!==!0)throw new Kr("option "+N+" must be "+R,Kr.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Kr("Unknown option "+N,Kr.ERR_BAD_OPTION)}}const om={assertOptions:G2,validators:Nm},Cc=om.validators;let Kl=class{constructor(r){this.defaults=r||{},this.interceptors={request:new k0,response:new k0}}async request(r,i){try{return await this._request(r,i)}catch(o){if(o instanceof Error){let g={};Error.captureStackTrace?Error.captureStackTrace(g):g=new Error;const N=g.stack?g.stack.replace(/^.+\n/,""):"";try{o.stack?N&&!String(o.stack).endsWith(N.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+N):o.stack=N}catch{}}throw o}}_request(r,i){typeof r=="string"?(i=i||{},i.url=r):i=r||{},i=Ql(this.defaults,i);const{transitional:o,paramsSerializer:g,headers:N}=i;o!==void 0&&om.assertOptions(o,{silentJSONParsing:Cc.transitional(Cc.boolean),forcedJSONParsing:Cc.transitional(Cc.boolean),clarifyTimeoutError:Cc.transitional(Cc.boolean)},!1),g!=null&&(wt.isFunction(g)?i.paramsSerializer={serialize:g}:om.assertOptions(g,{encode:Cc.function,serialize:Cc.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),om.assertOptions(i,{baseUrl:Cc.spelling("baseURL"),withXsrfToken:Cc.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let B=N&&wt.merge(N.common,N[i.method]);N&&wt.forEach(["delete","get","head","post","put","patch","common"],f=>{delete N[f]}),i.headers=bo.concat(B,N);const j=[];let R=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(i)===!1||(R=R&&h.synchronous,j.unshift(h.fulfilled,h.rejected))});const d=[];this.interceptors.response.forEach(function(h){d.push(h.fulfilled,h.rejected)});let S,y=0,b;if(!R){const f=[M0.bind(this),void 0];for(f.unshift(...j),f.push(...d),b=f.length,S=Promise.resolve(i);y<b;)S=S.then(f[y++],f[y++]);return S}b=j.length;let T=i;for(y=0;y<b;){const f=j[y++],h=j[y++];try{T=f(T)}catch(k){h.call(this,k);break}}try{S=M0.call(this,T)}catch(f){return Promise.reject(f)}for(y=0,b=d.length;y<b;)S=S.then(d[y++],d[y++]);return S}getUri(r){r=Ql(this.defaults,r);const i=B_(r.baseURL,r.url,r.allowAbsoluteUrls);return D_(i,r.params,r.paramsSerializer)}};wt.forEach(["delete","get","head","options"],function(r){Kl.prototype[r]=function(i,o){return this.request(Ql(o||{},{method:r,url:i,data:(o||{}).data}))}});wt.forEach(["post","put","patch"],function(r){function i(o){return function(N,B,j){return this.request(Ql(j||{},{method:r,headers:o?{"Content-Type":"multipart/form-data"}:{},url:N,data:B}))}}Kl.prototype[r]=i(),Kl.prototype[r+"Form"]=i(!0)});let K2=class q_{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(N){i=N});const o=this;this.promise.then(g=>{if(!o._listeners)return;let N=o._listeners.length;for(;N-- >0;)o._listeners[N](g);o._listeners=null}),this.promise.then=g=>{let N;const B=new Promise(j=>{o.subscribe(j),N=j}).then(g);return B.cancel=function(){o.unsubscribe(N)},B},r(function(N,B,j){o.reason||(o.reason=new $u(N,B,j),i(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const r=new AbortController,i=o=>{r.abort(o)};return this.subscribe(i),r.signal.unsubscribe=()=>this.unsubscribe(i),r.signal}static source(){let r;return{token:new q_(function(g){r=g}),cancel:r}}};function Y2(e){return function(i){return e.apply(null,i)}}function Q2(e){return wt.isObject(e)&&e.isAxiosError===!0}const xf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xf).forEach(([e,r])=>{xf[r]=e});function Z_(e){const r=new Kl(e),i=w_(Kl.prototype.request,r);return wt.extend(i,Kl.prototype,r,{allOwnKeys:!0}),wt.extend(i,r,null,{allOwnKeys:!0}),i.create=function(g){return Z_(Ql(e,g))},i}const bi=Z_(ep);bi.Axios=Kl;bi.CanceledError=$u;bi.CancelToken=K2;bi.isCancel=I_;bi.VERSION=V_;bi.toFormData=Tm;bi.AxiosError=Kr;bi.Cancel=bi.CanceledError;bi.all=function(r){return Promise.all(r)};bi.spread=Y2;bi.isAxiosError=Q2;bi.mergeConfig=Ql;bi.AxiosHeaders=bo;bi.formToJSON=e=>L_(wt.isHTMLForm(e)?new FormData(e):e);bi.getAdapter=F_.getAdapter;bi.HttpStatusCode=xf;bi.default=bi;const{Axios:lA,AxiosError:uA,CanceledError:dA,isCancel:pA,CancelToken:mA,VERSION:hA,all:fA,Cancel:gA,isAxiosError:vA,spread:yA,toFormData:_A,AxiosHeaders:bA,HttpStatusCode:wA,formToJSON:EA,getAdapter:SA,mergeConfig:xA}=bi,na=bi.create({baseURL:"https://quickmedpk-87e7d3c6e100.herokuapp.com",headers:{"Content-Type":"application/json"}});if(typeof window<"u"){const e=localStorage.getItem("token");e&&(na.defaults.headers.Authorization=`${e}`)}const Ou={validateToken:()=>na.get("/auth/me"),signInRequest:e=>na.post("/auth/login",e),signUpRequest:e=>na.post("/auth/signup",e),forgotPassword:e=>na.post("/auth/forgot-password",e),resetPassword:e=>na.post("/auth/reset-password",e),singleUser:e=>na.get(`/auth/${e}`)},Du={validateToken:()=>Ou.validateToken(),signInRequest:e=>Ou.signInRequest(e),signUpRequest:e=>Ou.signUpRequest(e),forgotPassword:e=>Ou.forgotPassword(e),resetPassword:e=>Ou.resetPassword(e),singleUser:e=>Ou.singleUser(e)},Qf=e=>{localStorage.setItem("token",e)},Jf=()=>localStorage.removeItem("token");function J2(e){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}const X2=e=>{switch(e){case"success":return nx;case"info":return ax;case"warning":return rx;case"error":return ix;default:return null}},ex=Array(12).fill(0),tx=({visible:e,className:r})=>c.createElement("div",{className:["sonner-loading-wrapper",r].filter(Boolean).join(" "),"data-visible":e},c.createElement("div",{className:"sonner-spinner"},ex.map((i,o)=>c.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),nx=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),rx=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ax=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ix=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sx=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},c.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ox=()=>{const[e,r]=c.useState(document.hidden);return c.useEffect(()=>{const i=()=>{r(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),e};let Rf=1;class cx{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{const i=this.subscribers.indexOf(r);this.subscribers.splice(i,1)}),this.publish=r=>{this.subscribers.forEach(i=>i(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var i;const{message:o,...g}=r,N=typeof r?.id=="number"||((i=r.id)==null?void 0:i.length)>0?r.id:Rf++,B=this.toasts.find(R=>R.id===N),j=r.dismissible===void 0?!0:r.dismissible;return this.dismissedToasts.has(N)&&this.dismissedToasts.delete(N),B?this.toasts=this.toasts.map(R=>R.id===N?(this.publish({...R,...r,id:N,title:o}),{...R,...r,id:N,dismissible:j,title:o}):R):this.addToast({title:o,...g,dismissible:j,id:N}),N},this.dismiss=r=>(r?(this.dismissedToasts.add(r),requestAnimationFrame(()=>this.subscribers.forEach(i=>i({id:r,dismiss:!0})))):this.toasts.forEach(i=>{this.subscribers.forEach(o=>o({id:i.id,dismiss:!0}))}),r),this.message=(r,i)=>this.create({...i,message:r}),this.error=(r,i)=>this.create({...i,message:r,type:"error"}),this.success=(r,i)=>this.create({...i,type:"success",message:r}),this.info=(r,i)=>this.create({...i,type:"info",message:r}),this.warning=(r,i)=>this.create({...i,type:"warning",message:r}),this.loading=(r,i)=>this.create({...i,type:"loading",message:r}),this.promise=(r,i)=>{if(!i)return;let o;i.loading!==void 0&&(o=this.create({...i,promise:r,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));const g=Promise.resolve(r instanceof Function?r():r);let N=o!==void 0,B;const j=g.then(async d=>{if(B=["resolve",d],c.isValidElement(d))N=!1,this.create({id:o,type:"default",message:d});else if(ux(d)&&!d.ok){N=!1;const y=typeof i.error=="function"?await i.error(`HTTP error! status: ${d.status}`):i.error,b=typeof i.description=="function"?await i.description(`HTTP error! status: ${d.status}`):i.description,f=typeof y=="object"&&!c.isValidElement(y)?y:{message:y};this.create({id:o,type:"error",description:b,...f})}else if(d instanceof Error){N=!1;const y=typeof i.error=="function"?await i.error(d):i.error,b=typeof i.description=="function"?await i.description(d):i.description,f=typeof y=="object"&&!c.isValidElement(y)?y:{message:y};this.create({id:o,type:"error",description:b,...f})}else if(i.success!==void 0){N=!1;const y=typeof i.success=="function"?await i.success(d):i.success,b=typeof i.description=="function"?await i.description(d):i.description,f=typeof y=="object"&&!c.isValidElement(y)?y:{message:y};this.create({id:o,type:"success",description:b,...f})}}).catch(async d=>{if(B=["reject",d],i.error!==void 0){N=!1;const S=typeof i.error=="function"?await i.error(d):i.error,y=typeof i.description=="function"?await i.description(d):i.description,T=typeof S=="object"&&!c.isValidElement(S)?S:{message:S};this.create({id:o,type:"error",description:y,...T})}}).finally(()=>{N&&(this.dismiss(o),o=void 0),i.finally==null||i.finally.call(i)}),R=()=>new Promise((d,S)=>j.then(()=>B[0]==="reject"?S(B[1]):d(B[1])).catch(S));return typeof o!="string"&&typeof o!="number"?{unwrap:R}:Object.assign(o,{unwrap:R})},this.custom=(r,i)=>{const o=i?.id||Rf++;return this.create({jsx:r(o),id:o,...i}),o},this.getActiveToasts=()=>this.toasts.filter(r=>!this.dismissedToasts.has(r.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const yo=new cx,lx=(e,r)=>{const i=r?.id||Rf++;return yo.addToast({title:e,...r,id:i}),i},ux=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",dx=lx,px=()=>yo.toasts,mx=()=>yo.getActiveToasts(),Kn=Object.assign(dx,{success:yo.success,info:yo.info,warning:yo.warning,error:yo.error,custom:yo.custom,message:yo.message,promise:yo.promise,dismiss:yo.dismiss,loading:yo.loading},{getHistory:px,getToasts:mx});J2("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Fp(e){return e.label!==void 0}const hx=3,fx="24px",gx="16px",I0=4e3,vx=356,yx=14,_x=45,bx=200;function Tc(...e){return e.filter(Boolean).join(" ")}function wx(e){const[r,i]=e.split("-"),o=[];return r&&o.push(r),i&&o.push(i),o}const Ex=e=>{var r,i,o,g,N,B,j,R,d;const{invert:S,toast:y,unstyled:b,interacting:T,setHeights:f,visibleToasts:h,heights:k,index:E,toasts:H,expanded:m,removeToast:P,defaultRichColors:v,closeButton:U,style:C,cancelButtonStyle:_,actionButtonStyle:w,className:p="",descriptionClassName:x="",duration:A,position:I,gap:M,expandByDefault:F,classNames:z,icons:G,closeButtonAriaLabel:Z="Close toast"}=e,[ce,X]=c.useState(null),[Ee,Se]=c.useState(null),[xe,_e]=c.useState(!1),[Pe,He]=c.useState(!1),[pe,Ge]=c.useState(!1),[Te,Ve]=c.useState(!1),[qe,nt]=c.useState(!1),[Bt,Pr]=c.useState(0),[Ur,Zn]=c.useState(0),fr=c.useRef(y.duration||A||I0),gr=c.useRef(null),Bn=c.useRef(null),Ie=E===0,Be=E+1<=h,Ye=y.type,Qt=y.dismissible!==!1,Ft=y.className||"",xt=y.descriptionClassName||"",pn=c.useMemo(()=>k.findIndex(at=>at.toastId===y.id)||0,[k,y.id]),Ln=c.useMemo(()=>{var at;return(at=y.closeButton)!=null?at:U},[y.closeButton,U]),zt=c.useMemo(()=>y.duration||A||I0,[y.duration,A]),sr=c.useRef(0),Hr=c.useRef(0),Rr=c.useRef(0),Vr=c.useRef(null),[zr,Ar]=I.split("-"),$r=c.useMemo(()=>k.reduce((at,ut,Wt)=>Wt>=pn?at:at+ut.height,0),[k,pn]),ga=ox(),ea=y.invert||S,oa=Ye==="loading";Hr.current=c.useMemo(()=>pn*M+$r,[pn,$r]),c.useEffect(()=>{fr.current=zt},[zt]),c.useEffect(()=>{_e(!0)},[]),c.useEffect(()=>{const at=Bn.current;if(at){const ut=at.getBoundingClientRect().height;return Zn(ut),f(Wt=>[{toastId:y.id,height:ut,position:y.position},...Wt]),()=>f(Wt=>Wt.filter(Tt=>Tt.toastId!==y.id))}},[f,y.id]),c.useLayoutEffect(()=>{if(!xe)return;const at=Bn.current,ut=at.style.height;at.style.height="auto";const Wt=at.getBoundingClientRect().height;at.style.height=ut,Zn(Wt),f(Tt=>Tt.find(Xt=>Xt.toastId===y.id)?Tt.map(Xt=>Xt.toastId===y.id?{...Xt,height:Wt}:Xt):[{toastId:y.id,height:Wt,position:y.position},...Tt])},[xe,y.title,y.description,f,y.id,y.jsx,y.action,y.cancel]);const Nn=c.useCallback(()=>{He(!0),Pr(Hr.current),f(at=>at.filter(ut=>ut.toastId!==y.id)),setTimeout(()=>{P(y)},bx)},[y,P,f,Hr]);c.useEffect(()=>{if(y.promise&&Ye==="loading"||y.duration===1/0||y.type==="loading")return;let at;return m||T||ga?(()=>{if(Rr.current<sr.current){const Tt=new Date().getTime()-sr.current;fr.current=fr.current-Tt}Rr.current=new Date().getTime()})():(()=>{fr.current!==1/0&&(sr.current=new Date().getTime(),at=setTimeout(()=>{y.onAutoClose==null||y.onAutoClose.call(y,y),Nn()},fr.current))})(),()=>clearTimeout(at)},[m,T,y,Ye,ga,Nn]),c.useEffect(()=>{y.delete&&(Nn(),y.onDismiss==null||y.onDismiss.call(y,y))},[Nn,y.delete]);function Ha(){var at;if(G?.loading){var ut;return c.createElement("div",{className:Tc(z?.loader,y==null||(ut=y.classNames)==null?void 0:ut.loader,"sonner-loader"),"data-visible":Ye==="loading"},G.loading)}return c.createElement(tx,{className:Tc(z?.loader,y==null||(at=y.classNames)==null?void 0:at.loader),visible:Ye==="loading"})}const Ca=y.icon||G?.[Ye]||X2(Ye);var Gr,dr;return c.createElement("li",{tabIndex:0,ref:Bn,className:Tc(p,Ft,z?.toast,y==null||(r=y.classNames)==null?void 0:r.toast,z?.default,z?.[Ye],y==null||(i=y.classNames)==null?void 0:i[Ye]),"data-sonner-toast":"","data-rich-colors":(Gr=y.richColors)!=null?Gr:v,"data-styled":!(y.jsx||y.unstyled||b),"data-mounted":xe,"data-promise":!!y.promise,"data-swiped":qe,"data-removed":Pe,"data-visible":Be,"data-y-position":zr,"data-x-position":Ar,"data-index":E,"data-front":Ie,"data-swiping":pe,"data-dismissible":Qt,"data-type":Ye,"data-invert":ea,"data-swipe-out":Te,"data-swipe-direction":Ee,"data-expanded":!!(m||F&&xe),"data-testid":y.testId,style:{"--index":E,"--toasts-before":E,"--z-index":H.length-E,"--offset":`${Pe?Bt:Hr.current}px`,"--initial-height":F?"auto":`${Ur}px`,...C,...y.style},onDragEnd:()=>{Ge(!1),X(null),Vr.current=null},onPointerDown:at=>{at.button!==2&&(oa||!Qt||(gr.current=new Date,Pr(Hr.current),at.target.setPointerCapture(at.pointerId),at.target.tagName!=="BUTTON"&&(Ge(!0),Vr.current={x:at.clientX,y:at.clientY})))},onPointerUp:()=>{var at,ut,Wt;if(Te||!Qt)return;Vr.current=null;const Tt=Number(((at=Bn.current)==null?void 0:at.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),tn=Number(((ut=Bn.current)==null?void 0:ut.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Xt=new Date().getTime()-((Wt=gr.current)==null?void 0:Wt.getTime()),Xe=ce==="x"?Tt:tn,Sn=Math.abs(Xe)/Xt;if(Math.abs(Xe)>=_x||Sn>.11){Pr(Hr.current),y.onDismiss==null||y.onDismiss.call(y,y),Se(ce==="x"?Tt>0?"right":"left":tn>0?"down":"up"),Nn(),Ve(!0);return}else{var Rn,Vn;(Rn=Bn.current)==null||Rn.style.setProperty("--swipe-amount-x","0px"),(Vn=Bn.current)==null||Vn.style.setProperty("--swipe-amount-y","0px")}nt(!1),Ge(!1),X(null)},onPointerMove:at=>{var ut,Wt,Tt;if(!Vr.current||!Qt||((ut=window.getSelection())==null?void 0:ut.toString().length)>0)return;const Xt=at.clientY-Vr.current.y,Xe=at.clientX-Vr.current.x;var Sn;const Rn=(Sn=e.swipeDirections)!=null?Sn:wx(I);!ce&&(Math.abs(Xe)>1||Math.abs(Xt)>1)&&X(Math.abs(Xe)>Math.abs(Xt)?"x":"y");let Vn={x:0,y:0};const or=$t=>1/(1.5+Math.abs($t)/20);if(ce==="y"){if(Rn.includes("top")||Rn.includes("bottom"))if(Rn.includes("top")&&Xt<0||Rn.includes("bottom")&&Xt>0)Vn.y=Xt;else{const $t=Xt*or(Xt);Vn.y=Math.abs($t)<Math.abs(Xt)?$t:Xt}}else if(ce==="x"&&(Rn.includes("left")||Rn.includes("right")))if(Rn.includes("left")&&Xe<0||Rn.includes("right")&&Xe>0)Vn.x=Xe;else{const $t=Xe*or(Xe);Vn.x=Math.abs($t)<Math.abs(Xe)?$t:Xe}(Math.abs(Vn.x)>0||Math.abs(Vn.y)>0)&&nt(!0),(Wt=Bn.current)==null||Wt.style.setProperty("--swipe-amount-x",`${Vn.x}px`),(Tt=Bn.current)==null||Tt.style.setProperty("--swipe-amount-y",`${Vn.y}px`)}},Ln&&!y.jsx&&Ye!=="loading"?c.createElement("button",{"aria-label":Z,"data-disabled":oa,"data-close-button":!0,onClick:oa||!Qt?()=>{}:()=>{Nn(),y.onDismiss==null||y.onDismiss.call(y,y)},className:Tc(z?.closeButton,y==null||(o=y.classNames)==null?void 0:o.closeButton)},(dr=G?.close)!=null?dr:sx):null,(Ye||y.icon||y.promise)&&y.icon!==null&&(G?.[Ye]!==null||y.icon)?c.createElement("div",{"data-icon":"",className:Tc(z?.icon,y==null||(g=y.classNames)==null?void 0:g.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||Ha():null,y.type!=="loading"?Ca:null):null,c.createElement("div",{"data-content":"",className:Tc(z?.content,y==null||(N=y.classNames)==null?void 0:N.content)},c.createElement("div",{"data-title":"",className:Tc(z?.title,y==null||(B=y.classNames)==null?void 0:B.title)},y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title),y.description?c.createElement("div",{"data-description":"",className:Tc(x,xt,z?.description,y==null||(j=y.classNames)==null?void 0:j.description)},typeof y.description=="function"?y.description():y.description):null),c.isValidElement(y.cancel)?y.cancel:y.cancel&&Fp(y.cancel)?c.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||_,onClick:at=>{Fp(y.cancel)&&Qt&&(y.cancel.onClick==null||y.cancel.onClick.call(y.cancel,at),Nn())},className:Tc(z?.cancelButton,y==null||(R=y.classNames)==null?void 0:R.cancelButton)},y.cancel.label):null,c.isValidElement(y.action)?y.action:y.action&&Fp(y.action)?c.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||w,onClick:at=>{Fp(y.action)&&(y.action.onClick==null||y.action.onClick.call(y.action,at),!at.defaultPrevented&&Nn())},className:Tc(z?.actionButton,y==null||(d=y.classNames)==null?void 0:d.actionButton)},y.action.label):null)};function j0(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Sx(e,r){const i={};return[e,r].forEach((o,g)=>{const N=g===1,B=N?"--mobile-offset":"--offset",j=N?gx:fx;function R(d){["top","right","bottom","left"].forEach(S=>{i[`${B}-${S}`]=typeof d=="number"?`${d}px`:d})}typeof o=="number"||typeof o=="string"?R(o):typeof o=="object"?["top","right","bottom","left"].forEach(d=>{o[d]===void 0?i[`${B}-${d}`]=j:i[`${B}-${d}`]=typeof o[d]=="number"?`${o[d]}px`:o[d]}):R(j)}),i}const xx=c.forwardRef(function(r,i){const{id:o,invert:g,position:N="bottom-right",hotkey:B=["altKey","KeyT"],expand:j,closeButton:R,className:d,offset:S,mobileOffset:y,theme:b="light",richColors:T,duration:f,style:h,visibleToasts:k=hx,toastOptions:E,dir:H=j0(),gap:m=yx,icons:P,containerAriaLabel:v="Notifications"}=r,[U,C]=c.useState([]),_=c.useMemo(()=>o?U.filter(xe=>xe.toasterId===o):U.filter(xe=>!xe.toasterId),[U,o]),w=c.useMemo(()=>Array.from(new Set([N].concat(_.filter(xe=>xe.position).map(xe=>xe.position)))),[_,N]),[p,x]=c.useState([]),[A,I]=c.useState(!1),[M,F]=c.useState(!1),[z,G]=c.useState(b!=="system"?b:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=c.useRef(null),ce=B.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=c.useRef(null),Ee=c.useRef(!1),Se=c.useCallback(xe=>{C(_e=>{var Pe;return(Pe=_e.find(He=>He.id===xe.id))!=null&&Pe.delete||yo.dismiss(xe.id),_e.filter(({id:He})=>He!==xe.id)})},[]);return c.useEffect(()=>yo.subscribe(xe=>{if(xe.dismiss){requestAnimationFrame(()=>{C(_e=>_e.map(Pe=>Pe.id===xe.id?{...Pe,delete:!0}:Pe))});return}setTimeout(()=>{b_.flushSync(()=>{C(_e=>{const Pe=_e.findIndex(He=>He.id===xe.id);return Pe!==-1?[..._e.slice(0,Pe),{..._e[Pe],...xe},..._e.slice(Pe+1)]:[xe,..._e]})})})}),[U]),c.useEffect(()=>{if(b!=="system"){G(b);return}if(b==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;const xe=window.matchMedia("(prefers-color-scheme: dark)");try{xe.addEventListener("change",({matches:_e})=>{G(_e?"dark":"light")})}catch{xe.addListener(({matches:Pe})=>{try{G(Pe?"dark":"light")}catch(He){console.error(He)}})}},[b]),c.useEffect(()=>{U.length<=1&&I(!1)},[U]),c.useEffect(()=>{const xe=_e=>{var Pe;if(B.every(Ge=>_e[Ge]||_e.code===Ge)){var pe;I(!0),(pe=Z.current)==null||pe.focus()}_e.code==="Escape"&&(document.activeElement===Z.current||(Pe=Z.current)!=null&&Pe.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",xe),()=>document.removeEventListener("keydown",xe)},[B]),c.useEffect(()=>{if(Z.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,Ee.current=!1)}},[Z.current]),c.createElement("section",{ref:i,"aria-label":`${v} ${ce}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},w.map((xe,_e)=>{var Pe;const[He,pe]=xe.split("-");return _.length?c.createElement("ol",{key:xe,dir:H==="auto"?j0():H,tabIndex:-1,ref:Z,className:d,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":He,"data-x-position":pe,style:{"--front-toast-height":`${((Pe=p[0])==null?void 0:Pe.height)||0}px`,"--width":`${vx}px`,"--gap":`${m}px`,...h,...Sx(S,y)},onBlur:Ge=>{Ee.current&&!Ge.currentTarget.contains(Ge.relatedTarget)&&(Ee.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:Ge=>{Ge.target instanceof HTMLElement&&Ge.target.dataset.dismissible==="false"||Ee.current||(Ee.current=!0,X.current=Ge.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{M||I(!1)},onDragEnd:()=>I(!1),onPointerDown:Ge=>{Ge.target instanceof HTMLElement&&Ge.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},_.filter(Ge=>!Ge.position&&_e===0||Ge.position===xe).map((Ge,Te)=>{var Ve,qe;return c.createElement(Ex,{key:Ge.id,icons:P,index:Te,toast:Ge,defaultRichColors:T,duration:(Ve=E?.duration)!=null?Ve:f,className:E?.className,descriptionClassName:E?.descriptionClassName,invert:g,visibleToasts:k,closeButton:(qe=E?.closeButton)!=null?qe:R,interacting:M,position:xe,style:E?.style,unstyled:E?.unstyled,classNames:E?.classNames,cancelButtonStyle:E?.cancelButtonStyle,actionButtonStyle:E?.actionButtonStyle,closeButtonAriaLabel:E?.closeButtonAriaLabel,removeToast:Se,toasts:_.filter(nt=>nt.position==Ge.position),heights:p.filter(nt=>nt.position==Ge.position),setHeights:x,expandByDefault:j,gap:m,expanded:A,swipeDirections:r.swipeDirections})})):null}))}),W_=ne.createContext(),Rx=({children:e})=>{const[r,i]=ne.useState(null),[o,g]=ne.useState([]),[N,B]=ne.useState(!1),[j,R]=ne.useState(!1),[d,S]=ne.useState(!0),[y,b]=ne.useState([]),[T,f]=ne.useState(null);console.log(r);const h=async()=>{try{const{data:U}=await Du.validateToken();i(U.data),B(!0)}catch(U){console.log(U)}finally{S(!1)}};ne.useEffect(()=>{h()},[]);const k=async(U,C)=>{R(!0);try{const{data:_}=await Du.signInRequest(U);Qf(_.data.token),i(_?.data?.user),B(!0),Kn.success("Login successful"),C&&C("/")}catch(_){Kn.error(_.response?.data?.message||"Login failed"),f(_)}finally{R(!1)}},E=async(U,C)=>{console.log(U),R(!0);try{const{data:_}=await Du.signUpRequest(U);i(_.data.user),B(!0),Kn.success("Signup successful"),C&&C("/login")}catch(_){Kn.error(_.response?.data?.message||"Signup failed"),f(_)}finally{R(!1)}},H=async(U,C)=>{R(!0);try{const{data:_}=await Du.forgotPassword(U);Kn.success("Password reset email sent"),C&&C("/reset-password")}catch(_){Kn.error(_.response?.data?.message||"Failed to send reset email"),f(_)}finally{R(!1)}},m=async(U,C)=>{R(!0);try{const{data:_}=await Du.resetPassword(U);Kn.success("Password reset successful"),C&&C("/login")}catch(_){Kn.error(_.response?.data?.message||"Password reset failed"),f(_)}finally{R(!1)}},P=async U=>{R(!0);try{Jf(),i(null),B(!1),Kn.success("Logged out successfully"),U&&U("/")}catch(C){console.error("Sign Out Error:",C)}finally{R(!1)}},v=async U=>{R(!0);try{const{data:C}=await Du.singleUser(U);return g(C.data.user),C.data.user}catch(C){Kn.error(C.response?.data?.message||"Failed to fetch user"),f(C)}finally{R(!1)}};return c.createElement(W_.Provider,{value:{setUser:i,user:r,isAuthenticated:N,signIn:k,signUpFun:E,signOut:P,loading:j,error:T,ForgotPassword:H,ResetPassword:m,isAuthLoading:d,validateSession:h,singleUser:v}},e)},vc=()=>ne.useContext(W_),B0=[{label:"Find Doctors",dropdown:[{label:"Dermatologist",href:"doctor/dermatologist"},{label:"Gynecologist",href:"doctor/gynecologist"},{label:"Psychiatrist",href:"doctor/psychiatrist"},{label:"Psychologist",href:"doctor/psychologist"},{label:"Urologist",href:"doctor/urologist"},{label:"General Physician",href:"doctor/general-physician"},{label:"Gastroenterologist",href:"doctor/gastroenterologist"},{label:"Pediatrician",href:"doctor/pediatrician"},{label:"General Practitioner",href:"doctor/general-practitioner"},{label:"Nutritionist",href:"doctor/nutritionist"},{label:"All Specialities",href:"/doctors"}]},{label:"Hospitals",dropdown:[{label:"Hospitals in Lahore",href:"hospitals/lahore"},{label:"Hospitals in Karachi",href:"hospitals/karachi"},{label:"Hospitals in Islamabad",href:"hospitals/islamabad"},{label:"All Hospitals (City wise)",href:"/hospitals"}]},{label:"Medicines",dropdown:[{label:"All Medicines",href:"/medicines"},{label:"Medicine Delivery",href:"/medicine/delivery"}]},{label:"Labs",dropdown:[{label:"Chughtai Lab",href:"/lab/chughtai-lab"},{label:"Dr. Essa’s Laboratory & Diagnostic Center",href:"/lab/dr-essa-s-laboratory-diagnostic-center"},{label:"Excel Labs",href:"/lab/excel-labs"},{label:"All Labs",href:"/labs"}]}],Xf=[{name:"Dr. Ahmed Hassan",slug:"dermatologist",specialty:"Cardiologist",experience:"15 years",rating:4.8,reviews:245,hospital:"Aga Khan Hospital",location:"Karachi",image:"/quickMed/images/doctor1.jpg",consultationFee:2500,availability:"Available Today"},{name:"Dr. Fatima Khan",slug:"gynecologist",specialty:"Dermatologist",experience:"12 years",rating:4.9,reviews:189,hospital:"Shaukat Khanum Hospital",location:"Lahore",image:"/quickMed//images/doctor2.jpg",consultationFee:3e3,availability:"Available Tomorrow"},{name:"Dr. Muhammad Ali",slug:"neurologist",specialty:"Neurologist",experience:"18 years",rating:4.7,reviews:321,hospital:"PIMS Hospital",location:"Islamabad",image:"/quickMed//images/doctor3.jpg",consultationFee:2800,availability:"Available Today"},{name:"Dr. Sara Ahmed",slug:"pediatrician",specialty:"Pediatrician",experience:"10 years",rating:4.8,reviews:156,hospital:"Civil Hospital",location:"Karachi",image:"/quickMed//images/doctor4.jpg",consultationFee:2200,availability:"Available Today"}],kx=[{icon:"👨‍⚕️",title:"PMC Verified Doctors",description:"All doctors are verified by Pakistan Medical Commission",stat:"PMC Verified"},{icon:"🏥",title:"16,000+ Doctors Available",description:"Largest network of qualified doctors across Pakistan",stat:"16,000+"},{icon:"📞",title:"24/7 Customer Support",description:"Well trained & supportive team available round the clock",stat:"24/7"},{icon:"🔒",title:"Secure Online Payments",description:"SSL-encrypted secure payment gateway for your safety",stat:"SSL Encrypted"}],Cx=[{title:"For Patients",links:[{name:"Find Doctors",href:"#"},{name:"Book Appointment",href:"#"},{name:"Online Consultation",href:"#"},{name:"Lab Tests",href:"#"},{name:"Medicines",href:"#"}]},{title:"For Doctors",links:[{name:"Join as Doctor",href:"#"},{name:"Doctor Login",href:"#"},{name:"List Your Practice",href:"#"},{name:"Doctor Resources",href:"#"}]},{title:"Pages",links:[{name:"About Us",href:"#"},{name:"Careers",href:"#"},{name:"Press",href:"#"},{name:"Blog",href:"#"},{name:"Contact Us",href:"#"}]}],Tx=[{name:"Facebook",href:"#",icon:"📘"},{name:"Twitter",href:"#",icon:"🐦"},{name:"Instagram",href:"#",icon:"📸"},{name:"LinkedIn",href:"#",icon:"💼"}],Px=[{title:"Fever",icon:"🌡️",description:"Find doctors for fever treatment",href:"#"},{title:"Heart Attack",icon:"💓",description:"Emergency cardiac care",href:"#"},{title:"Pregnancy",icon:"👶",description:"Prenatal and maternity care",href:"#"},{title:"High Blood Pressure",icon:"🩺",description:"Hypertension management",href:"#"},{title:"Breathlessness",icon:"🫁",description:"Respiratory care",href:"#"},{title:"Diarrhea",icon:"🏥",description:"Digestive health",href:"#"},{title:"Hairfall",icon:"💇",description:"Hair and scalp treatment",href:"#"},{title:"Anxiety/Depression",icon:"🧠",description:"Mental health support",href:"#"},{title:"Dengue Fever",icon:"🦟",description:"Dengue prevention and treatment",href:"#"},{title:"Typhoid Fever",icon:"🌡️",description:"Typhoid care",href:"#"},{title:"Piles",icon:"🏥",description:"Hemorrhoid treatment",href:"#"},{title:"Gastritis",icon:"🍽️",description:"Stomach care",href:"#"}],Nx=[{number:"16,000+",label:"Verified Doctors",description:"PMC verified doctors across Pakistan"},{number:"1M+",label:"Happy Patients",description:"Patients served nationwide"},{number:"500+",label:"Hospitals",description:"Partner hospitals and clinics"},{number:"24/7",label:"Support",description:"Round the clock customer support"}],Ax=[{name:"Umair Ali",rating:5,review:"I got late on my appointment, but after 10 minutes, the doctor called me and prescribed medicines, which is far better than appointing physically and waiting!",status:"Good"},{name:"Misbah Khan",rating:5,review:"My first appointment today. It was a very smooth experience and the skin specialist was very helpful and professional. Overall facility is also very good.",status:"Satisfied"},{name:"Irfan Muddassir",rating:4,review:"It is really good initiative to connect with health care professionals. If you feel a need for help then helpline is there to take care of it. Overall very good experience.",status:"Good"}],Ox=["Allergy & Immunology - الرجی اور مدافعت کے امراض کے ماہر","Anesthesiology & Critical Care - بے ہوشی اور تنقیدی نگہداشت","Cardiology - ماہر امراض قلب","Cardiothoracic Surgery - کارڈیو تھوراسک سرجری","Clinical Biochemical Genetics - کلینیکل بائیوکیمیکل جینیات","Dermatology - جلد کے امراض کے ماہر","Emergency Medicine - ایمرجنسی میڈیسن","Endocrinology - غدود داخلیہ کے امراض","Family Medicine - فیملی میڈیسن (خاندان ڈاکٹر)","Forensic Pathology - قانونی تشخیصی علم","Gastroenterology & Hepatology - معدہ، آنتوں اور جگر کے امراض","Geriatric Medicine - بزرگوں کے امراض کے ماہر","Hematology / Medical Oncology - خون اور کینسر کے امراض کے ماہر","Infectious Diseases - متعدی بیماریوں کے ماہر","Internal Medicine - داخلیہ کے امراض کے ماہر","Interventional Cardiology - مداخلتی قلبی امراض","Neonatology (Pediatric Subspecialty) - نوزائیدہ بچوں کے امراض","Nephrology - گردے کے امراض کے ماہر","Neurology - اعصابی نظام کے امراض کے ماہر","Neurosurgery - نیوروسرجری (دماغ و ریڑھ کی ہڈی)","Nuclear Medicine - جوہری ادویات کے طبی استعمال","Obstetrics & Gynecology (OB/GYN) - زچہ و حمل و نسواں کے امراض","Ophthalmology - چشم کے امراض کے ماہر","Oral & Maxillofacial Surgery - منہ و چہرے کی سرجری","Otorhinolaryngology (ENT) - کان، ناک، گلا کے ماہر","Orthopedic Surgery - ہڈیوں اور جوڑوں کے سرجن","Palliative Medicine - آرام افزا علاج","Pathology (Anatomical & Clinical) - تشخیصی علم","Physical Medicine & Rehabilitation (PM&R) - بحالی معالجے کے ماہر","Plastic, Reconstructive & Aesthetic Surgery - پلاسٹک و جمالیاتی سرجری","Preventive & Lifestyle Medicine - روک تھام اور طرز زندگی طب","Psychiatry & Child-Adolescent Psychiatry - ماہر نفسیات","Public Health & Occupational Medicine - عوامی صحت اور پیشہ ورانہ طب","Pulmonology / Respiratory Medicine - پھیپھڑوں کے امراض کے ماہر","Radiation Oncology - شعاعی علاج برائے کینسر","Radiology & Interventional Radiology - تشخیصی اور مداخلتی ریڈیالوجی","Rheumatology - ریمیٹائیڈ اور مشترکہ امراض کے ماہر","Sleep Medicine - نیند کے امراض کے ماہر","Sports Medicine - کھیلوں اور چوٹوں کے ماہر","Thoracic Surgery - چھاتی کے داخلی اور پھیپھڑوں کی سرجری","Toxicology - زہریلے مادوں اور زہریلے امراض کے ماہر","Transfusion Medicine - خون کی منتقلی سے متعلق طب","Urology - نظام اخراج اور تولیدی نظام کے امراض کے ماہر","Vascular Surgery & Interventional Radiologists - خون کی نالیوں کے سرجن","Research Physicians - طبی تحقیق کرنے والے ڈاکٹر"],Dx=["Allergy & Immunology","Anesthesiology & Critical Care","Cardiology","Cardiothoracic Surgery","Clinical Biochemical Genetics","Dermatology","Emergency Medicine","Endocrinology","Family Medicine","Forensic Pathology","Gastroenterology & Hepatology","Geriatric Medicine","Hematology / Medical Oncology","Infectious Diseases","Internal Medicine","Interventional Cardiology","Neonatology (Pediatric Subspecialty)","Nephrology","Neurology","Neurosurgery","Nuclear Medicine","Obstetrics & Gynecology (OB/GYN)","Ophthalmology","Oral & Maxillofacial Surgery","Otorhinolaryngology (ENT)","Orthopedic Surgery","Palliative Medicine","Pathology (Anatomical & Clinical)","Physical Medicine & Rehabilitation (PM&R)","Plastic, Reconstructive & Aesthetic Surgery","Preventive & Lifestyle Medicine","Psychiatry & Child-Adolescent Psychiatry","Public Health & Occupational Medicine","Pulmonology / Respiratory Medicine","Radiation Oncology","Radiology & Interventional Radiology","Rheumatology","Sleep Medicine","Sports Medicine","Thoracic Surgery","Toxicology","Transfusion Medicine","Urology","Vascular Surgery & Interventional Radiologists","Research Physicians"],Am=[{name:"Aga Khan Hospital",slug:"lahore",city:"Karachi",address:"Stadium Road, Karachi",contact:"021-111-911-911",beds:500,image:"/quickMed//images/hospital1.jpeg"},{name:"Shaukat Khanum Hospital",slug:"lahore",city:"Lahore",address:"Johar Town, Lahore",contact:"042-3590-5000",beds:300,image:"/quickMed//images/hospital2.jpeg"}],$_=[{name:"Paracetamol",slug:"paracetamol",type:"Tablet",description:"Pain reliever and fever reducer.",price:50,image:"/quickMed//images/medicine1.jpg"},{name:"Amoxicillin",slug:"amoxicillin",type:"Capsule",description:"Antibiotic for bacterial infections.",price:120,image:"/quickMed//images/medicine2.jpg"}],G_=[{name:"Chughtai Lab",slug:"chughtai-lab",city:"Lahore",address:"Main Boulevard, Lahore",contact:"042-111-456-789",tests:120,image:"/quickMed//images/lab1.jpg"},{name:"Excel Labs",slug:"excel-labs",city:"Islamabad",address:"Blue Area, Islamabad",contact:"051-111-222-333",tests:80,image:"/quickMed//images/lab2.jpg"}],Mx=["Public","Private","Semi-Private","Military","Charity"],Lx=["General","Specialized","Teaching","Research","Emergency"],Ix=["Islam","Christianity","Hinduism","Sikhism","Other"],jx=["Male","Female","Other"],Bx=["MBBS","BDS"],zx={Karachi:[24.86,67.01],Lahore:[31.56,74.35],Faisalabad:[31.41,73.11],Rawalpindi:[33.6,73.04],Gujranwala:[32.16,74.18],Multan:[30.2,71.45],Hyderabad:[25.38,68.37],Peshawar:[34.01,71.54],Quetta:[30.21,67.02],Islamabad:[33.72,73.06],Sargodha:[32.08,72.67],Sialkot:[32.52,74.55],Bahawalpur:[29.39,71.67],Sukkur:[27.7,68.85],Jhang:[31.28,72.32],Sheikhupura:[31.72,73.98],Larkana:[27.56,68.21],Gujrat:[32.58,74.07],Mardan:[34.2,72.04],Kasur:[31.12,74.45],RahimYarKhan:[28.42,70.3],Sahiwal:[30.67,73.11],Okara:[30.81,73.45],WahCantonment:[33.77,72.75],DeraGhaziKhan:[30.06,70.64],MirpurKhas:[25.53,69.01],Nawabshah:[26.24,68.4],Mingora:[34.78,72.36],Chiniot:[31.72,72.98],Kamoke:[31.98,74.21],Burewala:[30.16,72.67],Jhelum:[32.94,73.72],Sadiqabad:[28.3,70.13],Jacobabad:[28.28,68.43],Shikarpur:[27.96,68.64],Khanewal:[30.31,71.82],Hafizabad:[32.07,73.68],Kohat:[33.6,71.44],Muzaffargarh:[30.07,71.18],Khanpur:[28.65,70.65],Gojra:[31.15,72.69],Bahawalnagar:[30,73.25],Muridke:[31.81,74.25],Pakpattan:[30.35,73.38],Abbottabad:[34.15,73.2],TandoAdam:[25.76,68.66],Khairpur:[27.53,68.74],Chishtian:[29.79,72.84],Daska:[32.33,74.36],Dadu:[26.73,67.77],MandiBahauddin:[32.59,73.48],AhmadpurEast:[29.15,71.26],Kamalia:[30.73,72.64],Khuzdar:[27.8,66.6],Vehari:[30.05,72.34],DeraIsmailKhan:[31.83,70.9],Wazirabad:[32.45,74.1],Nowshera:[34.01,71.99],Khushab:[32.3,72.34],Swabi:[34.1167,72.4667],Layyah:[30.9647,70.9399],Bhakkar:[31.6333,71.0667],TobaTekSingh:[30.9777,72.4861],Jaranwala:[31.3454,73.4298],Thatta:[24.7497,67.9116],Badin:[24.6552,68.8402],Umerkot:[25.3655,69.7401],Shahdadkot:[27.9,67.93],Ghotki:[28,69.34],Kotri:[25.43,68.32],TandoAllahyar:[25.462,68.7198],Moro:[26.7286,68.0234],Taxila:[33.7475,72.8073],Turbat:[26.0028,63.0506],Zhob:[31.3397,69.4477],UchSharif:[29.2389,71.0615],Benazirabad:[26.65,68],Kotli:[33.15,73.75],Bhimber:[32.9667,74.0833],Mansehra:[34.3333,73.2],Chakwal:[32.93,72.86],Mianwali:[32.5833,71.5333],Samundri:[30.4728,72.97],Sambrial:[32.5167,74.4667],Narowal:[32.1,74.8833],Mirpur:[33.15,73.75],KotAddu:[30.5333,70.95],Lodhran:[29.53,71.64],ShakarGarh:[32.3,74.52],SeraiAlamgir:[32.9,73.73],TaunsaSharif:[30.4333,70.6347],Hasilpur:[29.69,73.69],Hub:[25.0675,66.5814],DeraMuradJamali:[28.0347,67.9179],Dalbandin:[28.9,64.4333],Chaman:[30.9211,66.4506],Loralai:[29.3667,68.4167],Pasni:[25.2828,63.3328],Sibi:[29.5444,67.8778],Pishin:[30.5833,67.9997],Qalat:[29.0167,66.9],Kharian:[32.8167,73.85],Muree:[33.9011,73.3944]},Xh=["Karachi","Lahore","Islamabad","Multan","Peshawar","Faisalabad","Rawalpindi","Gujranwala","Hyderabad","Quetta","Sargodha","Sialkot","Bahawalpur","Sukkur","Jhang","Sheikhupura","Larkana","Gujrat","Mardan","Kasur","RahimYarKhan","Sahiwal","Okara","WahCantonment","DeraGhaziKhan","MirpurKhas","Nawabshah","Mingora","Chiniot","Kamoke","Burewala","Jhelum","Sadiqabad","Jacobabad","Shikarpur","Khanewal","Hafizabad","Kohat","Muzaffargarh","Khanpur","Gojra","Bahawalnagar","Muridke","Pakpattan","Abbottabad","TandoAdam","Khairpur","Chishtian","Daska","Dadu","MandiBahauddin","AhmadpurEast","Kamalia","Khuzdar","Vehari","DeraIsmailKhan","Wazirabad","Nowshera","Khushab","Swabi","Layyah","Bhakkar","TobaTekSingh","Jaranwala","Thatta","Badin","Umerkot","Shahdadkot","Ghotki","Kotri","TandoAllahyar","Moro","Taxila","Turbat","Zhob","UchSharif","Benazirabad","Kotli","Bhimber","Mansehra","Chakwal","Mianwali","Samundri","Sambrial","Narowal","Mirpur","KotAddu","Lodhran","ShakarGarh","SeraiAlamgir","TaunsaSharif","Hasilpur","Hub","DeraMuradJamali","Dalbandin","Chaman","Loralai","Pasni","Sibi","Pishin","Qalat","Kharian","Muree"],Ux=["Aga Khan University Hospital","Shaukat Khanum Memorial Cancer Hospital","Lahore General Hospital","Services Hospital Lahore","Mayo Hospital Lahore","Jinnah Hospital Lahore","Combined Military Hospital (CMH)","National Institute of Cardiovascular Disease","Pakistan Institute of Medical Sciences (PIMS)","Ziauddin Hospital"],Hx=()=>c.createElement("svg",{className:"ml-1",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",viewBox:"0 0 16 16"},c.createElement("path",{fillRule:"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"})),Fx=()=>c.createElement("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})),Vx=()=>c.createElement("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h2l.4 2M7 7h10l1 2m-1 8v2a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-2m12-8V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v2"})),qx=()=>c.createElement("svg",{className:"ml-0",width:"14.01",height:"17.513",viewBox:"0 0 18 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("path",{d:"M9 0C6.61392 0.00270323 4.32637 0.914156 2.63915 2.53442C0.951939 4.15468 0.0028245 6.35146 9.57508e-06 8.64286C-0.00284824 10.5154 0.634084 12.3371 1.8131 13.8286C1.8131 13.8286 2.05855 14.1389 2.09864 14.1837L9 22L15.9046 14.1798C15.9406 14.1381 16.1869 13.8286 16.1869 13.8286L16.1877 13.8262C17.3661 12.3354 18.0028 10.5145 18 8.64286C17.9972 6.35146 17.0481 4.15468 15.3608 2.53442C13.6736 0.914156 11.3861 0.00270323 9 0V0ZM9 11.7857C8.35272 11.7857 7.71997 11.6014 7.18177 11.256C6.64358 10.9107 6.2241 10.4199 5.9764 9.84558C5.72869 9.27129 5.66388 8.63937 5.79016 8.02972C5.91644 7.42006 6.22814 6.86006 6.68583 6.42052C7.14353 5.98098 7.72668 5.68166 8.36152 5.56039C8.99637 5.43912 9.6544 5.50136 10.2524 5.73924C10.8504 5.97711 11.3616 6.37994 11.7212 6.89678C12.0808 7.41362 12.2727 8.02126 12.2727 8.64286C12.2716 9.47608 11.9265 10.2749 11.313 10.864C10.6994 11.4532 9.86765 11.7847 9 11.7857V11.7857Z",fill:"#014E78"})),Zx=()=>c.createElement("svg",{width:"19",height:"19",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("path",{d:"M19.8499 19.0004C21.7248 16.9042 22.7082 14.1594 22.5908 11.3495C22.4735 8.53962 21.2647 5.88632 19.2215 3.95379C17.1784 2.02125 14.4619 0.961924 11.6499 1.00105C8.8378 1.04017 6.1519 2.17466 4.16328 4.16328C2.17466 6.1519 1.04017 8.8378 1.00105 11.6499C0.961924 14.4619 2.02125 17.1784 3.95379 19.2215C5.88632 21.2647 8.53962 22.4735 11.3495 22.5908C14.1594 22.7082 16.9042 21.7248 19.0004 19.8499L23.9764 24.8258C24.0892 24.9377 24.2417 25.0003 24.4006 25C24.5595 24.9997 24.7117 24.9364 24.8241 24.8241C24.9364 24.7117 24.9997 24.5595 25 24.4006C25.0003 24.2417 24.9377 24.0892 24.8258 23.9764L19.8499 19.0004ZM4.99921 18.5876C4.09652 17.7009 3.37786 16.6447 2.88446 15.4795C2.39106 14.3143 2.13265 13.0632 2.12407 11.7979C2.11548 10.5326 2.35688 9.27802 2.83442 8.10625C3.31195 6.93448 4.01621 5.86857 4.90678 4.96969C5.79734 4.07082 6.85667 3.35669 8.02396 2.8683C9.19124 2.3799 10.4435 2.12686 11.7088 2.1237C12.9742 2.12054 14.2277 2.36732 15.3974 2.84988C16.5671 3.33243 17.63 4.04126 18.525 4.93567L18.5885 4.99921C19.4808 5.89149 20.1885 6.95078 20.6714 8.11659C21.1542 9.2824 21.4027 10.5319 21.4027 11.7937C21.4026 13.0556 21.154 14.3051 20.6711 15.4708C20.1882 16.6366 19.4804 17.6959 18.5881 18.5881C17.6958 19.4803 16.6365 20.1881 15.4707 20.6709C14.3049 21.1538 13.0554 21.4023 11.7936 21.4022C9.24515 21.4021 6.80115 20.3897 4.99921 18.5876Z",fill:"#014E78",stroke:"#014E78"})),Wx=()=>c.createElement("svg",{className:"w-4 h-4 text-emerald-600 group-hover:text-emerald-800 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})),$x=()=>c.createElement("svg",{className:"animate-spin h-16 w-16 text-emerald-600 drop-shadow-lg",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},c.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})),Gx=()=>c.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})),Kx=()=>c.createElement("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})),Yx=()=>c.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})),Qx=()=>c.createElement("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})),Jx=()=>c.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})),Xx=()=>c.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{d:"M13 7a3 3 0 11-6 0 3 3 0 016 0zm-6 8a6 6 0 1112 0H7z"})),z0=({link:e,idx:r,openDropdown:i,setOpenDropdown:o,isMobile:g,onLinkClick:N})=>{const B=i===r,j=()=>{window.scrollTo({top:0,behavior:"smooth"}),N?.()},R=()=>o(B?null:r);return c.createElement("div",{className:`relative ${g?"mb-2":"group"}`,onMouseEnter:g?void 0:()=>o(r),onMouseLeave:g?void 0:()=>o(null)},c.createElement("button",{onClick:g?R:void 0,className:"flex items-center w-full px-3 py-2 xl:text-[15px] text-[14px] font-medium text-[#014e78] bg-white hover:bg-[#014e78] hover:text-white rounded transition-colors duration-150"},c.createElement("span",null,e.label),c.createElement(Hx,null)),c.createElement("div",{className:`${g?B?"block":"hidden":B?"absolute left-0 w-56 min-w-fit z-20":"hidden"} bg-[#f9f9f9] mt-1 shadow-lg rounded transition-all duration-200`},e.dropdown.map(d=>c.createElement(Ki,{key:d.label,to:d.href,onClick:j,className:"block px-4 py-3 text-[#014e78] hover:bg-[#f1f1f1] text-[15px] font-medium whitespace-nowrap"},d.label))))},Vs=({href:e,label:r,onClick:i,className:o})=>{const g=()=>{window.scrollTo({top:0,behavior:"smooth"}),i&&i()};return c.createElement(Ki,{onClick:g,to:e,className:`${o} px-3 py-2 text-[15px] font-medium text-[#014e78] hover:bg-[#f7f7f7] rounded transition-colors duration-150`},r)},Wi={validateToken:()=>na.get("/admin/me"),login:e=>na.post("/admin/login",e),getAllDoctor:()=>na.get("/admin/doctors"),getPendingDoctors:()=>na.get("/admin/doctors/pending"),getPendingHospitals:()=>na.get("/admin/hospitals/pending"),getApprovedDoctors:()=>na.get("/admin/doctors/verified"),getApprovedHospitals:()=>na.get("/admin/approved-hospitals"),getRejectedDoctors:()=>na.get("/admin/doctors/rejected"),getRejectedHospitals:()=>na.get("/admin/hospitals/rejected"),getDoctorsStatistics:()=>na.get("/admin/doctors/stats"),getHospitalStatistics:()=>na.get("/admin/hospitals/stats"),approveDoctor:e=>na.post(`/admin/doctors/verification/${e}`,{status:"verified"}),rejectDoctor:e=>na.post(`/admin/doctors/verification/${e}`,{status:"rejected"}),approveHospital:e=>na.post(`/admin/hospitals/verification/${e}`,{status:"verified"}),rejectHospital:(e,r)=>na.post(`/admin/hospitals/verification/${e}`,{status:"rejected",reason:r}),doctorAction:(e,r)=>na.post(`/admin/doctors/action/${e}`,{action:r}),uploadDocuments:(e,r)=>na.post(`/admin/doctor/documents/${r}`,e,{headers:{"Content-Type":"multipart/form-data"}}),doctorProfilePicture:(e,r)=>na.post(`/admin/doctor/picture/${e}`,r,{headers:{"Content-Type":"multipart/form-data"}}),hospitalProfilePicture:(e,r)=>na.post(`/admin/hospital/picture/${e}`,r,{headers:{"Content-Type":"multipart/form-data"}}),updateDoctorDetails:(e,r)=>na.put(`/admin/doctor/${e}`,r)},as={validateToken:()=>Wi.validateToken(),login:e=>Wi.login(e),getAllDoctor:()=>Wi.getAllDoctor(),getPendingDoctors:()=>Wi.getPendingDoctors(),getPendingHospitals:()=>Wi.getPendingHospitals(),getApprovedDoctors:()=>Wi.getApprovedDoctors(),getApprovedHospitals:()=>Wi.getApprovedHospitals(),getRejectedDoctors:()=>Wi.getRejectedDoctors(),getDoctorsStatistics:()=>Wi.getDoctorsStatistics(),getHospitalStatistics:()=>Wi.getHospitalStatistics(),getRejectedHospitals:()=>Wi.getRejectedHospitals(),approveDoctor:e=>Wi.approveDoctor(e),rejectDoctor:e=>Wi.rejectDoctor(e),approveHospital:e=>Wi.approveHospital(e),rejectHospital:(e,r)=>Wi.rejectHospital(e,r),doctorAction:(e,r)=>Wi.doctorAction(e,r),uploadDocuments:(e,r)=>Wi.uploadDocuments(e,r),doctorProfilePicture:(e,r)=>Wi.doctorProfilePicture(e,r),hospitalProfilePicture:(e,r)=>Wi.hospitalProfilePicture(e,r),updateDoctorDetails:(e,r)=>Wi.updateDoctorDetails(e,r)},K_=ne.createContext(),eR=({children:e})=>{const[r,i]=ne.useState(null),[o,g]=ne.useState([]),[N,B]=ne.useState([]),[j,R]=ne.useState([]),[d,S]=ne.useState([]),[y,b]=ne.useState(!1),[T,f]=ne.useState(null),[h,k]=ne.useState([]),[E,H]=ne.useState([]),[m,P]=ne.useState(null),[v,U]=ne.useState(null),C=async()=>{b(!0);try{const{data:pe}=await as.validateToken();i(pe.data)}catch{}finally{b(!1)}};ne.useEffect(()=>{C(),F(),z()},[]);const _=async(pe,Ge)=>{console.log(pe,"admin Login");try{b(!0);const Te=await as.login(pe);return i(Te.data.data.user),F(),A(),M(),Kn.success("Admin login Successfully"),Qf(Te.data.data.token),Ge("/admin/dashboard"),Te}catch(Te){throw console.log(Te),f(Te),Te}finally{b(!1)}},w=()=>{Jf(),i(null)},p=async()=>{try{const pe=await as.getPendingDoctors();g(pe.data.data.doctors)}catch(pe){f(pe)}finally{b(!1)}},x=async()=>{try{const pe=await as.getPendingHospitals();B(pe.data.data.hospitals)}catch(pe){f(pe)}finally{b(!1)}},A=async()=>{try{const pe=await as.getApprovedDoctors();R(pe.data.data.doctors)}catch(pe){f(pe)}finally{b(!1)}},I=async()=>{try{const pe=await as.getApprovedHospitals();S(pe.data),console.log(pe)}catch(pe){f(pe)}finally{b(!1)}},M=async()=>{try{const pe=await as.getRejectedDoctors();k(pe.data.data.doctors)}catch(pe){f(pe)}finally{b(!1)}},F=async()=>{try{const pe=await as.getDoctorsStatistics();P(pe.data.data.statistics)}catch{}finally{b(!1)}},z=async()=>{try{const pe=await as.getHospitalStatistics();U(pe.data.data.statistics),console.log(pe.data.data.statistics),console.log("doctors statistics",pe.data.data.statistics)}catch(pe){console.log(pe,"doctor statistics error")}finally{b(!1)}},G=async pe=>{console.log(pe,"approveDoctor");try{const Ge=await as.approveDoctor(pe);return g(Te=>Te.filter(Ve=>Ve._id!==pe)),Kn.success("Doctor approved successfully!"),Ge}catch(Ge){throw f(Ge),Ge}finally{b(!1)}},Z=async pe=>{try{const Ge=await as.approveHospital(pe);return B(Te=>Te.filter(Ve=>Ve._id!==pe)),Kn.success("Hospital approved successfully!"),Ge}catch(Ge){throw f(Ge),Ge}finally{b(!1)}},ce=async pe=>{try{const Ge=await as.rejectDoctor(pe);return g(Te=>Te.filter(Ve=>Ve._id!==pe)),Kn.success("Doctor rejected successfully!"),Ge}catch(Ge){throw f(Ge),Ge}finally{b(!1)}},X=async(pe,Ge)=>{try{const Te=await as.rejectHospital(pe,Ge);return B(Ve=>Ve.filter(qe=>qe._id!==pe)),Kn.success("Hospital rejected successfully!"),Te}catch(Te){throw f(Te),Te}finally{b(!1)}},Ee=async()=>{try{const pe=await as.getRejectedHospitals();console.log(pe),H(pe.data.data.hospitals)}catch(pe){f(pe)}finally{b(!1)}},Se=async(pe,Ge)=>{try{const Te=await as.doctorAction(pe,Ge);console.log(Te,"doctor Action"),Kn.success("Doctor Action Updated Successfully")}catch(Te){console.log(Te)}finally{b(!1)}},xe=async(pe,Ge)=>{try{const Te=await as.uploadDocuments(pe,Ge);return console.log("document",Te),console.log(Te.data.data.documents[0].documentUrl),navigate(""),Kn.success("Documents Uploaded"),Te}catch(Te){Kn.error(Te?.data||"Upload failed")}finally{b(!1)}},_e=async(pe,Ge)=>{try{const Te=await as.doctorProfilePicture(pe,Ge);return Kn.success("Profile Picture Change Successfully"),console.log(Te),Te}catch(Te){console.log(Te)}finally{b(!1)}},Pe=async(pe,Ge)=>{try{const Te=await as.hospitalProfilePicture(pe,Ge);Kn.success("Profile Picture Change Successfully"),console.log(Te)}catch{}finally{b(!1)}},He=async(pe,Ge)=>{console.log(pe,"doctorId"),console.log(Ge,"data");try{const Te=await as.updateDoctorDetails(pe,Ge),Ve=Te?.data?.data?.doctor||Te?.data?.data||Te?.data||null,qe=nt=>({...nt,...Ge,...Ve||{}});return g(nt=>Array.isArray(nt)?nt.map(Bt=>Bt._id===pe?qe(Bt):Bt):nt),R(nt=>Array.isArray(nt)?nt.map(Bt=>Bt._id===pe?qe(Bt):Bt):nt),k(nt=>Array.isArray(nt)?nt.map(Bt=>Bt._id===pe?qe(Bt):Bt):nt),Kn.success("Details updated successfully"),Ve||Te}catch(Te){console.log(Te)}finally{}};return c.createElement(K_.Provider,{value:{login:_,logout:w,pendingDoctors:o,pendingHospitals:N,approvedDoctors:j,approvedHospitals:d,loading:y,error:T,fetchPendingDoctors:p,fetchPendingHospitals:x,fetchApprovedDoctors:A,fetchApprovedHospitals:I,approveDoctor:G,rejectDoctor:ce,approveHospital:Z,rejectHospital:X,admin:r,rejectedDoctors:h,rejectedHospitals:E,fetchRejectedDoctors:M,fetchRejectedHospitals:Ee,statistics:m,doctorAction:Se,DoctorDocumentUpload:xe,doctorProfilePicture:_e,updateDoctorDetails:He,hospitalProfilePicture:Pe,hospitalStatistics:v}},e)},rl=()=>ne.useContext(K_),Vl={validateToken:()=>na.get("/doctor/me"),signUp:e=>na.post("/doctor/signup",e),login:e=>na.post("/doctor/login",e),updateProfile:e=>na.post("/doctor/picture",e,{headers:{"Content-Type":"multipart/form-data"}}),uploadDocuments:e=>na.post("/doctor/documents",e,{headers:{"Content-Type":"multipart/form-data"}}),updateDoctorProfile:e=>na.put("/doctor",e),getAllPublicDoctors:()=>na.get("/auth/doctors")},ql={validateToken:()=>Vl.validateToken(),signUp:e=>Vl.signUp(e),login:e=>Vl.login(e),updateProfile:e=>Vl.updateProfile(e),uploadDocuments:e=>Vl.uploadDocuments(e),updateDoctorProfile:e=>Vl.updateDoctorProfile(e),getAllPublicDoctors:()=>Vl.getAllPublicDoctors()},Y_=ne.createContext(),tR=({children:e})=>{const[r,i]=ne.useState(null),[o,g]=ne.useState(!1),[N,B]=ne.useState(null),[j,R]=ne.useState(null),[d,S]=ne.useState([]),y=async()=>{g(!0);try{const{data:m}=await ql.validateToken();console.log(m.data,"doctorsssssssssssssssssssssss"),i(m.data)}catch{}finally{g(!1)}};ne.useEffect(()=>{y(),E()},[]);const b=async(m,P)=>{g(!0),B(null);try{const v=await ql.login(m);return console.log(v.data.data.user.hasDocuments),i(v.data.data.user),Qf(v.data.data.token),v?.data?.data?.user?.hasDocuments?P("/"):P("/doctor/upload-documents"),Kn.success("Login Successfully"),v.response.data.message}catch(v){console.log(v)}finally{g(!1)}},T=async(m,P)=>{g(!0),B(null);try{await ql.signUp(m),Kn.success("Form Submitted Successfully"),P("/doctor/login")}catch(v){console.log(v),Kn.error(v.response.data.data)}finally{g(!1)}},f=async m=>{try{const P=await ql.updateProfile(m);return Kn.success(P.data.data.message),P}catch(P){console.log(P,"profile err"),Kn.error(P?.message||"Update failed")}},h=async(m,P)=>{console.log("formdata",m),g(!0);try{const v=await ql.uploadDocuments(m);return console.log("document",v),console.log(v.data.data.documents[0].documentUrl),P(""),Kn.success("Documents Uploaded"),v}catch(v){Kn.error(v?.data||"Upload failed")}finally{g(!1)}},k=async m=>{console.log(m);try{const P=await ql.updateDoctorProfile(m);return console.log(P),Kn.success(P.data.data.message),P}catch(P){console.log(P,"profile err"),Kn.error(P?.message||"Update failed")}},E=async()=>{try{const m=await ql.getAllPublicDoctors();return S(m.data.data.doctors),m}catch(m){console.log(m)}},H=m=>{m("/doctor/login"),Jf(),i(null)};return c.createElement(Y_.Provider,{value:{doctor:r,loading:o,error:N,DoctorLogin:b,DoctorSignUp:T,UpdateProfilePic:f,DoctorProfileUpdate:k,DoctorDocumentUpload:h,logout:H,allDoctors:d}},e)},yc=()=>ne.useContext(Y_),Mu={validateToken:()=>na.post("/hospital/me",formData),signUp:e=>na.post("/hospital/signup",e,{headers:{"Content-Type":"multipart/form-data"}}),login:e=>(console.log(e,"sssssssssssssssss"),na.post("/hospital/login",e)),updateProfile:(e,r)=>na.put(`/hospital/profile/${e}`,r),getProfile:e=>na.get(`/hospital/profile/${e}`),getAllPublicHospital:()=>na.get("/auth/hospitals")},Od={validateToken:()=>Mu.validateToken(),signUp:e=>Mu.signUp(e),login:e=>Mu.login(e),updateProfile:(e,r)=>{const i=localStorage.getItem("token");return Mu.updateProfile(e,r,i)},getProfile:e=>{const r=localStorage.getItem("token");return Mu.getProfile(e,r)},getAllPublicHospital:()=>Mu.getAllPublicHospital()},Q_=ne.createContext(),nR=({children:e})=>{const[r,i]=ne.useState(null),[o,g]=ne.useState([]),[N,B]=ne.useState([]),[j,R]=ne.useState([]),[d,S]=ne.useState(!1),[y,b]=ne.useState(null),T=async()=>{S(!0);try{const{data:H}=await Od.validateToken();console.log(H,"data"),i(H.data)}catch{}finally{S(!1)}};ne.useEffect(()=>{T(),E()},[]);const f=async(H,m)=>{S(!0);try{const{data:P}=await Od.login(H);return localStorage.setItem("token",P.data.token),i(P.data.hospital),Kn.success("Login Successfully"),m("/"),P.data.message}catch(P){Kn.error(P.response.data.data||"Login failed"),b(P)}finally{S(!1)}},h=async(H,m)=>{S(!0),b(null);try{await Od.signUp(H),Kn.success("Form Submitted Successfully"),m("/hospital/login")}catch(P){console.log("err",P.response.data.data),Kn.error(P.response.data.data)}finally{S(!1)}},k=async(H,m)=>{try{const P=await Od.updateProfile(H,m);return Kn.success("Profile updated successfully"),P.data}catch(P){Kn.error(P.response?.data?.message||"Update failed"),b(P)}finally{S(!1)}},E=async()=>{try{const H=await Od.getAllPublicHospital();g(H.data.data.hospitals)}catch(H){console.log(H)}finally{S(!1)}};return c.createElement(Q_.Provider,{value:{hospital:r,pendingHospitals:N,approvedHospitals:j,loading:d,error:y,HospitalLogin:f,HospitalSignUp:h,HospitalProfile:k}},e)},eg=()=>ne.useContext(Q_),U0=({onClick:e,className:r=""})=>c.createElement(Ki,{to:"/login",onClick:e,className:`px-4 py-2 border-2 border-[#004d71] text-[#004d71] bg-white rounded font-bold hover:bg-[#f7f7f7] transition-colors duration-150 ${r}`},"Login"),J_=()=>{const[e,r]=ne.useState(!1),[i,o]=ne.useState(null),{admin:g}=rl(),N=ne.useRef(null),{doctor:B}=yc(),{hospital:j}=eg(),{user:R}=vc(),d=()=>window.scrollTo({top:0,behavior:"smooth"}),S=()=>r(f=>!f),y=()=>{r(!1),o(null)};ne.useEffect(()=>{const f=h=>{N.current&&!N.current.contains(h.target)&&y()};return e&&document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[e]);const b=()=>c.createElement("nav",{className:"hidden lg:flex items-center space-x-4 ml-4 xl:ml-8 flex-1"},B0.map((f,h)=>f.dropdown?c.createElement(z0,{key:f.label,link:f,idx:h,openDropdown:i,setOpenDropdown:o}):c.createElement(Vs,{key:f.label,href:f.href,label:f.label})),c.createElement("div",{className:"flex justify-end space-x-3 w-fit ms-auto"},!g&&!B&&!j&&!R&&c.createElement(c.Fragment,null,c.createElement(U0,{className:"ml-2"}),c.createElement(Vs,{href:"/doctor/login",label:"Doctor"}),c.createElement(Vs,{href:"/hospital/login",className:"",label:"Hospital"}),c.createElement(Vs,{href:"/admin/login",label:"Admin"})),g&&c.createElement(Vs,{href:"/admin/dashboard",label:"Admin Dashboard"}),B&&c.createElement(Vs,{href:"/doctor/profile",label:"My Profile"}),j&&c.createElement(Vs,{href:"/doctor/profile",label:"My Hospital Profile"}),R&&c.createElement(Vs,{href:"/profile",label:"My Profile"}))),T=()=>e&&c.createElement("nav",{ref:N,className:"absolute top-full left-0 w-full bg-white shadow-lg z-40 flex flex-col py-4 px-4 lg:hidden animate-fade-in max-h-[80vh] overflow-y-auto"},B0.map((f,h)=>f.dropdown?c.createElement(z0,{key:f.label,link:f,idx:h,openDropdown:i,setOpenDropdown:o,isMobile:!0,onLinkClick:y}):c.createElement(Vs,{key:f.label,href:f.href,label:f.label,onClick:y})),!g&&!B&&!j&&!R&&c.createElement(c.Fragment,null,c.createElement(U0,{onClick:y,className:"mt-2"}),c.createElement(Vs,{href:"/doctor/login",label:"Doctor",onClick:y}),c.createElement(Vs,{href:"/register/hospital",className:"flex items-center gap-2 px-4 py-2 bg-[#004d71] text-white rounded border border-[#004d71] font-medium hover:bg-[#014e78] transition-colors duration-150 ",label:"Register Hospital"}),c.createElement(Vs,{href:"/admin/login",label:"Admin",onClick:y})),g&&c.createElement(Vs,{href:"/admin/dashboard",label:"Admin Dashboard"}),B&&c.createElement(Vs,{href:"/doctor/profile",label:"My Profile"}),j&&c.createElement(Vs,{href:"/doctor/profile",label:"My Hospital Profile"}),R&&c.createElement(Vs,{href:"/profile",label:"My Profile"}));return c.createElement("header",{className:"bg-white shadow-md sticky top-0 z-50 w-full"},c.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"flex items-center justify-between h-20 relative"},c.createElement(Ki,{to:"/","aria-label":"Marham Logo",className:"flex items-center",onClick:d},c.createElement("img",{src:"/quickMed//images/logo.png",alt:"logo",className:"w-[120px] h-auto"})),c.createElement(b,null),c.createElement("button",{onClick:S,className:"lg:hidden inline-flex items-center justify-center p-2 rounded-md text-[#014e78] hover:text-white hover:bg-[#014e78]"},c.createElement(Fx,null)),c.createElement(T,null),c.createElement("a",{target:"_self",href:"https://wa.me/923488597922","aria-label":"Sadeeq Helpline",className:"lg:hidden absolute right-16 top-1/2 -translate-y-1/2 text-[#014e78] hover:text-[#004d71]"}))))},rR=()=>c.createElement("footer",{className:"bg-emerald-900 text-emerald-100"},c.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},Cx.map((e,r)=>c.createElement("div",{key:r,className:"rounded-xl bg-emerald-800 bg-opacity-60 p-6 mb-4"},c.createElement("h3",{className:"text-lg font-semibold mb-4 text-emerald-50"},e.title),c.createElement("ul",{className:"space-y-2"},e.links.map((i,o)=>c.createElement("li",{key:o},i.href.startsWith("/")?c.createElement(Ki,{to:i.href,className:"text-emerald-200 hover:text-white transition-colors duration-200"},i.name):c.createElement("a",{href:i.href,className:"text-emerald-200 hover:text-white transition-colors duration-200"},i.name))))))),c.createElement("div",{className:"border-t border-emerald-700 mt-12 pt-8"},c.createElement("div",{className:"flex flex-col md:flex-row justify-between items-center"},c.createElement("div",{className:"mb-4 md:mb-0"},c.createElement("div",{className:"flex items-center"},c.createElement("svg",{className:"h-8 w-8 text-emerald-100 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},c.createElement("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2H4a1 1 0 01-1-1V4z",clipRule:"evenodd"})),c.createElement("span",{className:"text-xl font-bold text-emerald-50"},"quickMed")),c.createElement("p",{className:"text-emerald-200 mt-2"},"Pakistan's most trusted healthcare platform")),c.createElement("div",{className:"flex space-x-4"},Tx.map((e,r)=>c.createElement("a",{key:r,href:e.href,className:"text-2xl hover:text-emerald-200 transition-colors duration-200",title:e.name},e.icon)))),c.createElement("div",{className:"text-center mt-8 pt-8 border-t border-emerald-700"},c.createElement("p",{className:"text-emerald-200 text-sm"},"© 2024 Sadeeq and Haider. All rights reserved. |",c.createElement(Ki,{to:"#",className:"hover:text-white ml-1"},"Privacy Policy")," ","|",c.createElement(Ki,{to:"#",className:"hover:text-white ml-1"},"Terms of Service")))))),X_=()=>c.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80"},c.createElement("div",{className:"flex flex-col items-center"},c.createElement($x,null),c.createElement("span",{className:"mt-4 text-lg font-semibold text-emerald-700 animate-pulse"},"Authenticating..."))),aR=()=>{const{loading:e}=rl();return e?c.createElement(X_,null):c.createElement("div",{className:"min-h-screen bg-gray-50"},c.createElement(J_,null),c.createElement("main",{className:"flex-1"},c.createElement(m_,null)),c.createElement(rR,null))},iR=()=>{const{admin:e,loading:r}=rl(),{doctor:i}=yc(),{user:o}=vc();return r?c.createElement(X_,null):e?c.createElement(nm,{to:"/admin/dashboard",replace:!0}):i?c.createElement(nm,{to:"/",replace:!0}):o?c.createElement(nm,{to:"/",replace:!0}):c.createElement(c.Fragment,null,c.createElement(J_,null),c.createElement("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50"},c.createElement(m_,null)))},Yl=({options:e=[],value:r="",onChange:i=()=>{},placeholder:o="Select",icon:g,showUrdu:N=!1,inputStyle:B="",placeholderStyle:j="",urduTextStyle:R="",englishTextStyle:d="",disabled:S=!1})=>{const[y,b]=ne.useState(!1),T=ne.useRef(null);ne.useEffect(()=>{const k=E=>{T.current&&!T.current.contains(E.target)&&b(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const f=k=>{i(k),b(!1)},h=()=>{if(N&&r.includes(" - ")){const[k,E]=r.split(" - ");return c.createElement(c.Fragment,null,k,c.createElement("span",{className:"font-JameelNoori font-bold ml-2"},E))}return r||o};return c.createElement("div",{className:"relative w-full",ref:T},c.createElement("button",{type:"button",className:`w-full flex items-center h-11 border border-gray-300 rounded-md px-3 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500 ${S?"bg-gray-100 text-gray-400 cursor-not-allowed":"text-gray-700 bg-white hover:border-gray-400"}`,onClick:()=>!S&&b(k=>!k),disabled:S},c.createElement("span",{className:`flex-1 text-left ${r?B:j}`},h()),g&&c.createElement(g,null)),y&&c.createElement("div",{className:"absolute left-0 mt-1 w-full bg-white h-36 overflow-y-auto border border-gray-200 rounded shadow z-10"},e.map(k=>{const E=N&&typeof k=="string"&&k.includes(" - "),[H,m]=E?k.split(" - "):[k];return c.createElement("div",{key:k,className:"px-4 py-2 hover:bg-emerald-100 text-gray-700 cursor-pointer font-medium flex items-center gap-2",onClick:()=>f(k)},c.createElement("span",{className:d},H),E&&c.createElement("span",{className:`font-JameelNoori font-bold text-xl ${R}`},m))})))},sR=({onCitySelect:e})=>{const[r,i]=ne.useState(""),[o,g]=ne.useState(""),[N,B]=ne.useState([]),j=ne.useRef(null);ne.useEffect(()=>{const y=b=>{j.current&&!j.current.contains(b.target)&&B([])};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const R=y=>{const b=y.target.value;i(b),B(b?Xh.filter(T=>T.toLowerCase().includes(b.toLowerCase())):[])},d=y=>{i(y),B([]);const b=zx[y]||[24.8607,67.0011];e?.(y,b)},S=y=>{if(y.key==="Enter"){const b=N[0]||Xh.includes(r)&&r;b&&d(b)}};return c.createElement("div",{className:"p-6 max-w-4xl mx-auto mb-6 mt-10"},c.createElement("div",{className:"flex flex-col md:flex-row justify-center gap-4"},c.createElement("div",{className:"relative w-full md:w-1/2",ref:j},c.createElement("input",{type:"text",value:r,placeholder:"Enter City",onChange:R,onFocus:()=>B(Xh),onKeyDown:S,autoComplete:"off",className:"w-full h-11 border bg-white px-3 pr-12 py-2 rounded-md text-gray-700 font-medium border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),c.createElement("div",{className:"absolute right-0 top-0 h-full w-10 flex items-center justify-center bg-[#f2fafe] border-l border-gray-300 rounded-e-md"},c.createElement(qx,null)),N.length>0&&c.createElement("div",{className:"absolute left-0 mt-1 w-full max-h-32 overflow-y-auto bg-white border border-gray-200 rounded shadow z-50"},N.map(y=>c.createElement("div",{key:y,onMouseDown:()=>d(y),className:"px-4 py-2 cursor-pointer hover:bg-blue-100 text-gray-700 font-medium"},y)))),c.createElement("div",{className:"relative w-full md:w-[500px]"},c.createElement(Yl,{options:Ox,value:o,onChange:g,placeholder:"Search by Doctors",showUrdu:!0,inputStyle:"text-[12px]",placeholderStyle:"text-[16px]"}),c.createElement("div",{className:"absolute right-0 top-0 h-full w-10 flex items-center justify-center bg-[#f2fafe] border-l border-gray-300 rounded-e-md pointer-events-none"},c.createElement(Zx,null)))))};function oR(e,r){const i=ne.useRef(r);ne.useEffect(function(){r!==i.current&&e.attributionControl!=null&&(i.current!=null&&e.attributionControl.removeAttribution(i.current),r!=null&&e.attributionControl.addAttribution(r)),i.current=r},[e,r])}const cR=1;function lR(e){return Object.freeze({__version:cR,map:e})}const eb=ne.createContext(null);function tb(){const e=ne.use(eb);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function uR(e){function r(i,o){const{instance:g}=e(i).current;return ne.useImperativeHandle(o,()=>g),null}return ne.forwardRef(r)}function dR(e,r){const i=ne.useRef(void 0);ne.useEffect(function(){return r!=null&&e.instance.on(r),i.current=r,function(){i.current!=null&&e.instance.off(i.current),i.current=null}},[e,r])}function nb(e,r){const i=e.pane??r.pane;return i?{...e,pane:i}:e}var Bd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var pR=Bd.exports,H0;function mR(){return H0||(H0=1,function(e,r){(function(i,o){o(r)})(pR,function(i){var o="1.9.4";function g(a){var l,O,q,ee;for(O=1,q=arguments.length;O<q;O++){ee=arguments[O];for(l in ee)a[l]=ee[l]}return a}var N=Object.create||function(){function a(){}return function(l){return a.prototype=l,new a}}();function B(a,l){var O=Array.prototype.slice;if(a.bind)return a.bind.apply(a,O.call(arguments,1));var q=O.call(arguments,2);return function(){return a.apply(l,q.length?q.concat(O.call(arguments)):arguments)}}var j=0;function R(a){return"_leaflet_id"in a||(a._leaflet_id=++j),a._leaflet_id}function d(a,l,O){var q,ee,me,je;return je=function(){q=!1,ee&&(me.apply(O,ee),ee=!1)},me=function(){q?ee=arguments:(a.apply(O,arguments),setTimeout(je,l),q=!0)},me}function S(a,l,O){var q=l[1],ee=l[0],me=q-ee;return a===q&&O?a:((a-ee)%me+me)%me+ee}function y(){return!1}function b(a,l){if(l===!1)return a;var O=Math.pow(10,l===void 0?6:l);return Math.round(a*O)/O}function T(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function f(a){return T(a).split(/\s+/)}function h(a,l){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?N(a.options):{});for(var O in l)a.options[O]=l[O];return a.options}function k(a,l,O){var q=[];for(var ee in a)q.push(encodeURIComponent(O?ee.toUpperCase():ee)+"="+encodeURIComponent(a[ee]));return(!l||l.indexOf("?")===-1?"?":"&")+q.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function H(a,l){return a.replace(E,function(O,q){var ee=l[q];if(ee===void 0)throw new Error("No value provided for variable "+O);return typeof ee=="function"&&(ee=ee(l)),ee})}var m=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function P(a,l){for(var O=0;O<a.length;O++)if(a[O]===l)return O;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var C=0;function _(a){var l=+new Date,O=Math.max(0,16-(l-C));return C=l+O,window.setTimeout(a,O)}var w=window.requestAnimationFrame||U("RequestAnimationFrame")||_,p=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function x(a,l,O){if(O&&w===_)a.call(l);else return w.call(window,B(a,l))}function A(a){a&&p.call(window,a)}var I={__proto__:null,extend:g,create:N,bind:B,get lastId(){return j},stamp:R,throttle:d,wrapNum:S,falseFn:y,formatNum:b,trim:T,splitWords:f,setOptions:h,getParamString:k,template:H,isArray:m,indexOf:P,emptyImageUrl:v,requestFn:w,cancelFn:p,requestAnimFrame:x,cancelAnimFrame:A};function M(){}M.extend=function(a){var l=function(){h(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},O=l.__super__=this.prototype,q=N(O);q.constructor=l,l.prototype=q;for(var ee in this)Object.prototype.hasOwnProperty.call(this,ee)&&ee!=="prototype"&&ee!=="__super__"&&(l[ee]=this[ee]);return a.statics&&g(l,a.statics),a.includes&&(F(a.includes),g.apply(null,[q].concat(a.includes))),g(q,a),delete q.statics,delete q.includes,q.options&&(q.options=O.options?N(O.options):{},g(q.options,a.options)),q._initHooks=[],q.callInitHooks=function(){if(!this._initHooksCalled){O.callInitHooks&&O.callInitHooks.call(this),this._initHooksCalled=!0;for(var me=0,je=q._initHooks.length;me<je;me++)q._initHooks[me].call(this)}},l},M.include=function(a){var l=this.prototype.options;return g(this.prototype,a),a.options&&(this.prototype.options=l,this.mergeOptions(a.options)),this},M.mergeOptions=function(a){return g(this.prototype.options,a),this},M.addInitHook=function(a){var l=Array.prototype.slice.call(arguments,1),O=typeof a=="function"?a:function(){this[a].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(O),this};function F(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=m(a)?a:[a];for(var l=0;l<a.length;l++)a[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var z={on:function(a,l,O){if(typeof a=="object")for(var q in a)this._on(q,a[q],l);else{a=f(a);for(var ee=0,me=a.length;ee<me;ee++)this._on(a[ee],l,O)}return this},off:function(a,l,O){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var q in a)this._off(q,a[q],l);else{a=f(a);for(var ee=arguments.length===1,me=0,je=a.length;me<je;me++)ee?this._off(a[me]):this._off(a[me],l,O)}return this},_on:function(a,l,O,q){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(a,l,O)===!1){O===this&&(O=void 0);var ee={fn:l,ctx:O};q&&(ee.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(ee)}},_off:function(a,l,O){var q,ee,me;if(this._events&&(q=this._events[a],!!q)){if(arguments.length===1){if(this._firingCount)for(ee=0,me=q.length;ee<me;ee++)q[ee].fn=y;delete this._events[a];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var je=this._listens(a,l,O);if(je!==!1){var st=q[je];this._firingCount&&(st.fn=y,this._events[a]=q=q.slice()),q.splice(je,1)}}},fire:function(a,l,O){if(!this.listens(a,O))return this;var q=g({},l,{type:a,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var ee=this._events[a];if(ee){this._firingCount=this._firingCount+1||1;for(var me=0,je=ee.length;me<je;me++){var st=ee[me],dt=st.fn;st.once&&this.off(a,dt,st.ctx),dt.call(st.ctx||this,q)}this._firingCount--}}return O&&this._propagateEvent(q),this},listens:function(a,l,O,q){typeof a!="string"&&console.warn('"string" type argument expected');var ee=l;typeof l!="function"&&(q=!!l,ee=void 0,O=void 0);var me=this._events&&this._events[a];if(me&&me.length&&this._listens(a,ee,O)!==!1)return!0;if(q){for(var je in this._eventParents)if(this._eventParents[je].listens(a,l,O,q))return!0}return!1},_listens:function(a,l,O){if(!this._events)return!1;var q=this._events[a]||[];if(!l)return!!q.length;O===this&&(O=void 0);for(var ee=0,me=q.length;ee<me;ee++)if(q[ee].fn===l&&q[ee].ctx===O)return ee;return!1},once:function(a,l,O){if(typeof a=="object")for(var q in a)this._on(q,a[q],l,!0);else{a=f(a);for(var ee=0,me=a.length;ee<me;ee++)this._on(a[ee],l,O,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[R(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[R(a)],this},_propagateEvent:function(a){for(var l in this._eventParents)this._eventParents[l].fire(a.type,g({layer:a.target,propagatedFrom:a.target},a),!0)}};z.addEventListener=z.on,z.removeEventListener=z.clearAllEventListeners=z.off,z.addOneTimeEventListener=z.once,z.fireEvent=z.fire,z.hasEventListeners=z.listens;var G=M.extend(z);function Z(a,l,O){this.x=O?Math.round(a):a,this.y=O?Math.round(l):l}var ce=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(a){return this.clone()._add(X(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(X(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Z(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Z(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(a){a=X(a);var l=a.x-this.x,O=a.y-this.y;return Math.sqrt(l*l+O*O)},equals:function(a){return a=X(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=X(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function X(a,l,O){return a instanceof Z?a:m(a)?new Z(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new Z(a.x,a.y):new Z(a,l,O)}function Ee(a,l){if(a)for(var O=l?[a,l]:a,q=0,ee=O.length;q<ee;q++)this.extend(O[q])}Ee.prototype={extend:function(a){var l,O;if(!a)return this;if(a instanceof Z||typeof a[0]=="number"||"x"in a)l=O=X(a);else if(a=Se(a),l=a.min,O=a.max,!l||!O)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=O.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(O.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(O.y,this.max.y)),this},getCenter:function(a){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var l,O;return typeof a[0]=="number"||a instanceof Z?a=X(a):a=Se(a),a instanceof Ee?(l=a.min,O=a.max):l=O=a,l.x>=this.min.x&&O.x<=this.max.x&&l.y>=this.min.y&&O.y<=this.max.y},intersects:function(a){a=Se(a);var l=this.min,O=this.max,q=a.min,ee=a.max,me=ee.x>=l.x&&q.x<=O.x,je=ee.y>=l.y&&q.y<=O.y;return me&&je},overlaps:function(a){a=Se(a);var l=this.min,O=this.max,q=a.min,ee=a.max,me=ee.x>l.x&&q.x<O.x,je=ee.y>l.y&&q.y<O.y;return me&&je},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var l=this.min,O=this.max,q=Math.abs(l.x-O.x)*a,ee=Math.abs(l.y-O.y)*a;return Se(X(l.x-q,l.y-ee),X(O.x+q,O.y+ee))},equals:function(a){return a?(a=Se(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Se(a,l){return!a||a instanceof Ee?a:new Ee(a,l)}function xe(a,l){if(a)for(var O=l?[a,l]:a,q=0,ee=O.length;q<ee;q++)this.extend(O[q])}xe.prototype={extend:function(a){var l=this._southWest,O=this._northEast,q,ee;if(a instanceof Pe)q=a,ee=a;else if(a instanceof xe){if(q=a._southWest,ee=a._northEast,!q||!ee)return this}else return a?this.extend(He(a)||_e(a)):this;return!l&&!O?(this._southWest=new Pe(q.lat,q.lng),this._northEast=new Pe(ee.lat,ee.lng)):(l.lat=Math.min(q.lat,l.lat),l.lng=Math.min(q.lng,l.lng),O.lat=Math.max(ee.lat,O.lat),O.lng=Math.max(ee.lng,O.lng)),this},pad:function(a){var l=this._southWest,O=this._northEast,q=Math.abs(l.lat-O.lat)*a,ee=Math.abs(l.lng-O.lng)*a;return new xe(new Pe(l.lat-q,l.lng-ee),new Pe(O.lat+q,O.lng+ee))},getCenter:function(){return new Pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new Pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Pe||"lat"in a?a=He(a):a=_e(a);var l=this._southWest,O=this._northEast,q,ee;return a instanceof xe?(q=a.getSouthWest(),ee=a.getNorthEast()):q=ee=a,q.lat>=l.lat&&ee.lat<=O.lat&&q.lng>=l.lng&&ee.lng<=O.lng},intersects:function(a){a=_e(a);var l=this._southWest,O=this._northEast,q=a.getSouthWest(),ee=a.getNorthEast(),me=ee.lat>=l.lat&&q.lat<=O.lat,je=ee.lng>=l.lng&&q.lng<=O.lng;return me&&je},overlaps:function(a){a=_e(a);var l=this._southWest,O=this._northEast,q=a.getSouthWest(),ee=a.getNorthEast(),me=ee.lat>l.lat&&q.lat<O.lat,je=ee.lng>l.lng&&q.lng<O.lng;return me&&je},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,l){return a?(a=_e(a),this._southWest.equals(a.getSouthWest(),l)&&this._northEast.equals(a.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function _e(a,l){return a instanceof xe?a:new xe(a,l)}function Pe(a,l,O){if(isNaN(a)||isNaN(l))throw new Error("Invalid LatLng object: ("+a+", "+l+")");this.lat=+a,this.lng=+l,O!==void 0&&(this.alt=+O)}Pe.prototype={equals:function(a,l){if(!a)return!1;a=He(a);var O=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return O<=(l===void 0?1e-9:l)},toString:function(a){return"LatLng("+b(this.lat,a)+", "+b(this.lng,a)+")"},distanceTo:function(a){return Ge.distance(this,He(a))},wrap:function(){return Ge.wrapLatLng(this)},toBounds:function(a){var l=180*a/40075017,O=l/Math.cos(Math.PI/180*this.lat);return _e([this.lat-l,this.lng-O],[this.lat+l,this.lng+O])},clone:function(){return new Pe(this.lat,this.lng,this.alt)}};function He(a,l,O){return a instanceof Pe?a:m(a)&&typeof a[0]!="object"?a.length===3?new Pe(a[0],a[1],a[2]):a.length===2?new Pe(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Pe(a.lat,"lng"in a?a.lng:a.lon,a.alt):l===void 0?null:new Pe(a,l,O)}var pe={latLngToPoint:function(a,l){var O=this.projection.project(a),q=this.scale(l);return this.transformation._transform(O,q)},pointToLatLng:function(a,l){var O=this.scale(l),q=this.transformation.untransform(a,O);return this.projection.unproject(q)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var l=this.projection.bounds,O=this.scale(a),q=this.transformation.transform(l.min,O),ee=this.transformation.transform(l.max,O);return new Ee(q,ee)},infinite:!1,wrapLatLng:function(a){var l=this.wrapLng?S(a.lng,this.wrapLng,!0):a.lng,O=this.wrapLat?S(a.lat,this.wrapLat,!0):a.lat,q=a.alt;return new Pe(O,l,q)},wrapLatLngBounds:function(a){var l=a.getCenter(),O=this.wrapLatLng(l),q=l.lat-O.lat,ee=l.lng-O.lng;if(q===0&&ee===0)return a;var me=a.getSouthWest(),je=a.getNorthEast(),st=new Pe(me.lat-q,me.lng-ee),dt=new Pe(je.lat-q,je.lng-ee);return new xe(st,dt)}},Ge=g({},pe,{wrapLng:[-180,180],R:6371e3,distance:function(a,l){var O=Math.PI/180,q=a.lat*O,ee=l.lat*O,me=Math.sin((l.lat-a.lat)*O/2),je=Math.sin((l.lng-a.lng)*O/2),st=me*me+Math.cos(q)*Math.cos(ee)*je*je,dt=2*Math.atan2(Math.sqrt(st),Math.sqrt(1-st));return this.R*dt}}),Te=6378137,Ve={R:Te,MAX_LATITUDE:85.0511287798,project:function(a){var l=Math.PI/180,O=this.MAX_LATITUDE,q=Math.max(Math.min(O,a.lat),-O),ee=Math.sin(q*l);return new Z(this.R*a.lng*l,this.R*Math.log((1+ee)/(1-ee))/2)},unproject:function(a){var l=180/Math.PI;return new Pe((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*l,a.x*l/this.R)},bounds:function(){var a=Te*Math.PI;return new Ee([-a,-a],[a,a])}()};function qe(a,l,O,q){if(m(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=l,this._c=O,this._d=q}qe.prototype={transform:function(a,l){return this._transform(a.clone(),l)},_transform:function(a,l){return l=l||1,a.x=l*(this._a*a.x+this._b),a.y=l*(this._c*a.y+this._d),a},untransform:function(a,l){return l=l||1,new Z((a.x/l-this._b)/this._a,(a.y/l-this._d)/this._c)}};function nt(a,l,O,q){return new qe(a,l,O,q)}var Bt=g({},Ge,{code:"EPSG:3857",projection:Ve,transformation:function(){var a=.5/(Math.PI*Ve.R);return nt(a,.5,-a,.5)}()}),Pr=g({},Bt,{code:"EPSG:900913"});function Ur(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Zn(a,l){var O="",q,ee,me,je,st,dt;for(q=0,me=a.length;q<me;q++){for(st=a[q],ee=0,je=st.length;ee<je;ee++)dt=st[ee],O+=(ee?"L":"M")+dt.x+" "+dt.y;O+=l?$t.svg?"z":"x":""}return O||"M0 0"}var fr=document.documentElement.style,gr="ActiveXObject"in window,Bn=gr&&!document.addEventListener,Ie="msLaunchUri"in navigator&&!("documentMode"in document),Be=or("webkit"),Ye=or("android"),Qt=or("android 2")||or("android 3"),Ft=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xt=Ye&&or("Google")&&Ft<537&&!("AudioNode"in window),pn=!!window.opera,Ln=!Ie&&or("chrome"),zt=or("gecko")&&!Be&&!pn&&!gr,sr=!Ln&&or("safari"),Hr=or("phantom"),Rr="OTransition"in fr,Vr=navigator.platform.indexOf("Win")===0,zr=gr&&"transition"in fr,Ar="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Qt,$r="MozPerspective"in fr,ga=!window.L_DISABLE_3D&&(zr||Ar||$r)&&!Rr&&!Hr,ea=typeof orientation<"u"||or("mobile"),oa=ea&&Be,Nn=ea&&Ar,Ha=!window.PointerEvent&&window.MSPointerEvent,Ca=!!(window.PointerEvent||Ha),Gr="ontouchstart"in window||!!window.TouchEvent,dr=!window.L_NO_TOUCH&&(Gr||Ca),at=ea&&pn,ut=ea&&zt,Wt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var a=!1;try{var l=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",y,l),window.removeEventListener("testPassiveEventSupport",y,l)}catch{}return a}(),tn=function(){return!!document.createElement("canvas").getContext}(),Xt=!!(document.createElementNS&&Ur("svg").createSVGRect),Xe=!!Xt&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Sn=!Xt&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var l=a.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Rn=navigator.platform.indexOf("Mac")===0,Vn=navigator.platform.indexOf("Linux")===0;function or(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var $t={ie:gr,ielt9:Bn,edge:Ie,webkit:Be,android:Ye,android23:Qt,androidStock:xt,opera:pn,chrome:Ln,gecko:zt,safari:sr,phantom:Hr,opera12:Rr,win:Vr,ie3d:zr,webkit3d:Ar,gecko3d:$r,any3d:ga,mobile:ea,mobileWebkit:oa,mobileWebkit3d:Nn,msPointer:Ha,pointer:Ca,touch:dr,touchNative:Gr,mobileOpera:at,mobileGecko:ut,retina:Wt,passiveEvents:Tt,canvas:tn,svg:Xt,vml:Sn,inlineSvg:Xe,mac:Rn,linux:Vn},bt=$t.msPointer?"MSPointerDown":"pointerdown",Pn=$t.msPointer?"MSPointerMove":"pointermove",kn=$t.msPointer?"MSPointerUp":"pointerup",bn=$t.msPointer?"MSPointerCancel":"pointercancel",Nr={touchstart:bt,touchmove:Pn,touchend:kn,touchcancel:bn},Er={touchstart:ji,touchmove:ai,touchend:ai,touchcancel:ai},Or={},Jn=!1;function Hn(a,l,O){return l==="touchstart"&&ss(),Er[l]?(O=Er[l].bind(this,O),a.addEventListener(Nr[l],O,!1),O):(console.warn("wrong event specified:",l),y)}function ha(a,l,O){if(!Nr[l]){console.warn("wrong event specified:",l);return}a.removeEventListener(Nr[l],O,!1)}function ca(a){Or[a.pointerId]=a}function Ta(a){Or[a.pointerId]&&(Or[a.pointerId]=a)}function Oa(a){delete Or[a.pointerId]}function ss(){Jn||(document.addEventListener(bt,ca,!0),document.addEventListener(Pn,Ta,!0),document.addEventListener(kn,Oa,!0),document.addEventListener(bn,Oa,!0),Jn=!0)}function ai(a,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var O in Or)l.touches.push(Or[O]);l.changedTouches=[l],a(l)}}function ji(a,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Da(l),ai(a,l)}function os(a){var l={},O,q;for(q in a)O=a[q],l[q]=O&&O.bind?O.bind(a):O;return a=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Ei=200;function Yi(a,l){a.addEventListener("dblclick",l);var O=0,q;function ee(me){if(me.detail!==1){q=me.detail;return}if(!(me.pointerType==="mouse"||me.sourceCapabilities&&!me.sourceCapabilities.firesTouchEvents)){var je=Eo(me);if(!(je.some(function(dt){return dt instanceof HTMLLabelElement&&dt.attributes.for})&&!je.some(function(dt){return dt instanceof HTMLInputElement||dt instanceof HTMLSelectElement}))){var st=Date.now();st-O<=Ei?(q++,q===2&&l(os(me))):q=1,O=st}}}return a.addEventListener("click",ee),{dblclick:l,simDblclick:ee}}function qr(a,l){a.removeEventListener("dblclick",l.dblclick),a.removeEventListener("click",l.simDblclick)}var Si=Ba(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ni=Ba(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),sn=Ni==="webkitTransition"||Ni==="OTransition"?Ni+"End":"transitionend";function qn(a){return typeof a=="string"?document.getElementById(a):a}function jn(a,l){var O=a.style[l]||a.currentStyle&&a.currentStyle[l];if((!O||O==="auto")&&document.defaultView){var q=document.defaultView.getComputedStyle(a,null);O=q?q[l]:null}return O==="auto"?null:O}function tr(a,l,O){var q=document.createElement(a);return q.className=l||"",O&&O.appendChild(q),q}function wn(a){var l=a.parentNode;l&&l.removeChild(a)}function On(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Ir(a){var l=a.parentNode;l&&l.lastChild!==a&&l.appendChild(a)}function hr(a){var l=a.parentNode;l&&l.firstChild!==a&&l.insertBefore(a,l.firstChild)}function vr(a,l){if(a.classList!==void 0)return a.classList.contains(l);var O=ua(a);return O.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(O)}function An(a,l){if(a.classList!==void 0)for(var O=f(l),q=0,ee=O.length;q<ee;q++)a.classList.add(O[q]);else if(!vr(a,l)){var me=ua(a);Ea(a,(me?me+" ":"")+l)}}function jr(a,l){a.classList!==void 0?a.classList.remove(l):Ea(a,T((" "+ua(a)+" ").replace(" "+l+" "," ")))}function Ea(a,l){a.className.baseVal===void 0?a.className=l:a.className.baseVal=l}function ua(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function ya(a,l){"opacity"in a.style?a.style.opacity=l:"filter"in a.style&&ja(a,l)}function ja(a,l){var O=!1,q="DXImageTransform.Microsoft.Alpha";try{O=a.filters.item(q)}catch{if(l===1)return}l=Math.round(l*100),O?(O.Enabled=l!==100,O.Opacity=l):a.style.filter+=" progid:"+q+"(opacity="+l+")"}function Ba(a){for(var l=document.documentElement.style,O=0;O<a.length;O++)if(a[O]in l)return a[O];return!1}function $a(a,l,O){var q=l||new Z(0,0);a.style[Si]=($t.ie3d?"translate("+q.x+"px,"+q.y+"px)":"translate3d("+q.x+"px,"+q.y+"px,0)")+(O?" scale("+O+")":"")}function Sa(a,l){a._leaflet_pos=l,$t.any3d?$a(a,l):(a.style.left=l.x+"px",a.style.top=l.y+"px")}function Qa(a){return a._leaflet_pos||new Z(0,0)}var pi,Ms,Qi;if("onselectstart"in document)pi=function(){yr(window,"selectstart",Da)},Ms=function(){ta(window,"selectstart",Da)};else{var cs=Ba(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);pi=function(){if(cs){var a=document.documentElement.style;Qi=a[cs],a[cs]="none"}},Ms=function(){cs&&(document.documentElement.style[cs]=Qi,Qi=void 0)}}function mi(){yr(window,"dragstart",Da)}function to(){ta(window,"dragstart",Da)}var Zs,bs;function Ls(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(ls(),Zs=a,bs=a.style.outlineStyle,a.style.outlineStyle="none",yr(window,"keydown",ls))}function ls(){Zs&&(Zs.style.outlineStyle=bs,Zs=void 0,bs=void 0,ta(window,"keydown",ls))}function Ji(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function us(a){var l=a.getBoundingClientRect();return{x:l.width/a.offsetWidth||1,y:l.height/a.offsetHeight||1,boundingClientRect:l}}var Io={__proto__:null,TRANSFORM:Si,TRANSITION:Ni,TRANSITION_END:sn,get:qn,getStyle:jn,create:tr,remove:wn,empty:On,toFront:Ir,toBack:hr,hasClass:vr,addClass:An,removeClass:jr,setClass:Ea,getClass:ua,setOpacity:ya,testProp:Ba,setTransform:$a,setPosition:Sa,getPosition:Qa,get disableTextSelection(){return pi},get enableTextSelection(){return Ms},disableImageDrag:mi,enableImageDrag:to,preventOutline:Ls,restoreOutline:ls,getSizedParentNode:Ji,getScale:us};function yr(a,l,O,q){if(l&&typeof l=="object")for(var ee in l)Wn(a,ee,l[ee],O);else{l=f(l);for(var me=0,je=l.length;me<je;me++)Wn(a,l[me],O,q)}return this}var xi="_leaflet_events";function ta(a,l,O,q){if(arguments.length===1)Bi(a),delete a[xi];else if(l&&typeof l=="object")for(var ee in l)Ai(a,ee,l[ee],O);else if(l=f(l),arguments.length===2)Bi(a,function(st){return P(l,st)!==-1});else for(var me=0,je=l.length;me<je;me++)Ai(a,l[me],O,q);return this}function Bi(a,l){for(var O in a[xi]){var q=O.split(/\d/)[0];(!l||l(q))&&Ai(a,q,null,null,O)}}var Is={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Wn(a,l,O,q){var ee=l+R(O)+(q?"_"+R(q):"");if(a[xi]&&a[xi][ee])return this;var me=function(st){return O.call(q||a,st||window.event)},je=me;!$t.touchNative&&$t.pointer&&l.indexOf("touch")===0?me=Hn(a,l,me):$t.touch&&l==="dblclick"?me=Yi(a,me):"addEventListener"in a?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?a.addEventListener(Is[l]||l,me,$t.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(me=function(st){st=st||window.event,Fa(a,st)&&je(st)},a.addEventListener(Is[l],me,!1)):a.addEventListener(l,je,!1):a.attachEvent("on"+l,me),a[xi]=a[xi]||{},a[xi][ee]=me}function Ai(a,l,O,q,ee){ee=ee||l+R(O)+(q?"_"+R(q):"");var me=a[xi]&&a[xi][ee];if(!me)return this;!$t.touchNative&&$t.pointer&&l.indexOf("touch")===0?ha(a,l,me):$t.touch&&l==="dblclick"?qr(a,me):"removeEventListener"in a?a.removeEventListener(Is[l]||l,me,!1):a.detachEvent("on"+l,me),a[xi][ee]=null}function zi(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Ui(a){return Wn(a,"wheel",zi),this}function lr(a){return yr(a,"mousedown touchstart dblclick contextmenu",zi),a._leaflet_disable_click=!0,this}function Da(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Oi(a){return Da(a),zi(a),this}function Eo(a){if(a.composedPath)return a.composedPath();for(var l=[],O=a.target;O;)l.push(O),O=O.parentNode;return l}function ti(a,l){if(!l)return new Z(a.clientX,a.clientY);var O=us(l),q=O.boundingClientRect;return new Z((a.clientX-q.left)/O.x-l.clientLeft,(a.clientY-q.top)/O.y-l.clientTop)}var ws=$t.linux&&$t.chrome?window.devicePixelRatio:$t.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ws(a){return $t.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/ws:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Fa(a,l){var O=l.relatedTarget;if(!O)return!0;try{for(;O&&O!==a;)O=O.parentNode}catch{return!1}return O!==a}var Xo={__proto__:null,on:yr,off:ta,stopPropagation:zi,disableScrollPropagation:Ui,disableClickPropagation:lr,preventDefault:Da,stop:Oi,getPropagationPath:Eo,getMousePosition:ti,getWheelDelta:Ws,isExternalTarget:Fa,addListener:yr,removeListener:ta},Di=G.extend({run:function(a,l,O,q){this.stop(),this._el=a,this._inProgress=!0,this._duration=O||.25,this._easeOutPower=1/Math.max(q||.5,.2),this._startPos=Qa(a),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(a){var l=+new Date-this._startTime,O=this._duration*1e3;l<O?this._runFrame(this._easeOut(l/O),a):(this._runFrame(1),this._complete())},_runFrame:function(a,l){var O=this._startPos.add(this._offset.multiplyBy(a));l&&O._round(),Sa(this._el,O),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Dr=G.extend({options:{crs:Bt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,l){l=h(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=B(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(He(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ni&&$t.any3d&&!$t.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),yr(this._proxy,sn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,l,O){if(l=l===void 0?this._zoom:this._limitZoom(l),a=this._limitCenter(He(a),l,this.options.maxBounds),O=O||{},this._stop(),this._loaded&&!O.reset&&O!==!0){O.animate!==void 0&&(O.zoom=g({animate:O.animate},O.zoom),O.pan=g({animate:O.animate,duration:O.duration},O.pan));var q=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,l,O.zoom):this._tryAnimatedPan(a,O.pan);if(q)return clearTimeout(this._sizeTimer),this}return this._resetView(a,l,O.pan&&O.pan.noMoveStart),this},setZoom:function(a,l){return this._loaded?this.setView(this.getCenter(),a,{zoom:l}):(this._zoom=a,this)},zoomIn:function(a,l){return a=a||($t.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,l)},zoomOut:function(a,l){return a=a||($t.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,l)},setZoomAround:function(a,l,O){var q=this.getZoomScale(l),ee=this.getSize().divideBy(2),me=a instanceof Z?a:this.latLngToContainerPoint(a),je=me.subtract(ee).multiplyBy(1-1/q),st=this.containerPointToLatLng(ee.add(je));return this.setView(st,l,{zoom:O})},_getBoundsCenterZoom:function(a,l){l=l||{},a=a.getBounds?a.getBounds():_e(a);var O=X(l.paddingTopLeft||l.padding||[0,0]),q=X(l.paddingBottomRight||l.padding||[0,0]),ee=this.getBoundsZoom(a,!1,O.add(q));if(ee=typeof l.maxZoom=="number"?Math.min(l.maxZoom,ee):ee,ee===1/0)return{center:a.getCenter(),zoom:ee};var me=q.subtract(O).divideBy(2),je=this.project(a.getSouthWest(),ee),st=this.project(a.getNorthEast(),ee),dt=this.unproject(je.add(st).divideBy(2).add(me),ee);return{center:dt,zoom:ee}},fitBounds:function(a,l){if(a=_e(a),!a.isValid())throw new Error("Bounds are not valid.");var O=this._getBoundsCenterZoom(a,l);return this.setView(O.center,O.zoom,l)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,l){return this.setView(a,this._zoom,{pan:l})},panBy:function(a,l){if(a=X(a).round(),l=l||{},!a.x&&!a.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Di,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){An(this._mapPane,"leaflet-pan-anim");var O=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,O,l.duration||.25,l.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,l,O){if(O=O||{},O.animate===!1||!$t.any3d)return this.setView(a,l,O);this._stop();var q=this.project(this.getCenter()),ee=this.project(a),me=this.getSize(),je=this._zoom;a=He(a),l=l===void 0?je:l;var st=Math.max(me.x,me.y),dt=st*this.getZoomScale(je,l),Gt=ee.distanceTo(q)||1,Mn=1.42,Un=Mn*Mn;function Yn(La){var ns=La?-1:1,Hs=La?dt:st,Xs=dt*dt-st*st+ns*Un*Un*Gt*Gt,qa=2*Hs*Un*Gt,qo=Xs/qa,cc=Math.sqrt(qo*qo+1)-qo,ho=cc<1e-9?-18:Math.log(cc);return ho}function Sr(La){return(Math.exp(La)-Math.exp(-La))/2}function va(La){return(Math.exp(La)+Math.exp(-La))/2}function Na(La){return Sr(La)/va(La)}var Ja=Yn(0);function yi(La){return st*(va(Ja)/va(Ja+Mn*La))}function Vo(La){return st*(va(Ja)*Na(Ja+Mn*La)-Sr(Ja))/Un}function Uc(La){return 1-Math.pow(1-La,1.5)}var mo=Date.now(),Us=(Yn(1)-Ja)/Mn,oc=O.duration?1e3*O.duration:1e3*Us*.8;function ms(){var La=(Date.now()-mo)/oc,ns=Uc(La)*Us;La<=1?(this._flyToFrame=x(ms,this),this._move(this.unproject(q.add(ee.subtract(q).multiplyBy(Vo(ns)/Gt)),je),this.getScaleZoom(st/yi(ns),je),{flyTo:!0})):this._move(a,l)._moveEnd(!0)}return this._moveStart(!0,O.noMoveStart),ms.call(this),this},flyToBounds:function(a,l){var O=this._getBoundsCenterZoom(a,l);return this.flyTo(O.center,O.zoom,l)},setMaxBounds:function(a){return a=_e(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var l=this.options.minZoom;return this.options.minZoom=a,this._loaded&&l!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var l=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&l!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,l){this._enforcingBounds=!0;var O=this.getCenter(),q=this._limitCenter(O,this._zoom,_e(a));return O.equals(q)||this.panTo(q,l),this._enforcingBounds=!1,this},panInside:function(a,l){l=l||{};var O=X(l.paddingTopLeft||l.padding||[0,0]),q=X(l.paddingBottomRight||l.padding||[0,0]),ee=this.project(this.getCenter()),me=this.project(a),je=this.getPixelBounds(),st=Se([je.min.add(O),je.max.subtract(q)]),dt=st.getSize();if(!st.contains(me)){this._enforcingBounds=!0;var Gt=me.subtract(st.getCenter()),Mn=st.extend(me).getSize().subtract(dt);ee.x+=Gt.x<0?-Mn.x:Mn.x,ee.y+=Gt.y<0?-Mn.y:Mn.y,this.panTo(this.unproject(ee),l),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=g({animate:!1,pan:!0},a===!0?{animate:!0}:a);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var O=this.getSize(),q=l.divideBy(2).round(),ee=O.divideBy(2).round(),me=q.subtract(ee);return!me.x&&!me.y?this:(a.animate&&a.pan?this.panBy(me):(a.pan&&this._rawPanBy(me),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(B(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:O}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=g({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=B(this._handleGeolocationResponse,this),O=B(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,O,a):navigator.geolocation.getCurrentPosition(l,O,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var l=a.code,O=a.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+O+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var l=a.coords.latitude,O=a.coords.longitude,q=new Pe(l,O),ee=q.toBounds(a.coords.accuracy*2),me=this._locateOptions;if(me.setView){var je=this.getBoundsZoom(ee);this.setView(q,me.maxZoom?Math.min(je,me.maxZoom):je)}var st={latlng:q,bounds:ee,timestamp:a.timestamp};for(var dt in a.coords)typeof a.coords[dt]=="number"&&(st[dt]=a.coords[dt]);this.fire("locationfound",st)}},addHandler:function(a,l){if(!l)return this;var O=this[a]=new l(this);return this._handlers.push(O),this.options[a]&&O.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)wn(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,l){var O="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),q=tr("div",O,l||this._mapPane);return a&&(this._panes[a]=q),q},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),l=this.unproject(a.getBottomLeft()),O=this.unproject(a.getTopRight());return new xe(l,O)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,l,O){a=_e(a),O=X(O||[0,0]);var q=this.getZoom()||0,ee=this.getMinZoom(),me=this.getMaxZoom(),je=a.getNorthWest(),st=a.getSouthEast(),dt=this.getSize().subtract(O),Gt=Se(this.project(st,q),this.project(je,q)).getSize(),Mn=$t.any3d?this.options.zoomSnap:1,Un=dt.x/Gt.x,Yn=dt.y/Gt.y,Sr=l?Math.max(Un,Yn):Math.min(Un,Yn);return q=this.getScaleZoom(Sr,q),Mn&&(q=Math.round(q/(Mn/100))*(Mn/100),q=l?Math.ceil(q/Mn)*Mn:Math.floor(q/Mn)*Mn),Math.max(ee,Math.min(me,q))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,l){var O=this._getTopLeftPoint(a,l);return new Ee(O,O.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,l){var O=this.options.crs;return l=l===void 0?this._zoom:l,O.scale(a)/O.scale(l)},getScaleZoom:function(a,l){var O=this.options.crs;l=l===void 0?this._zoom:l;var q=O.zoom(a*O.scale(l));return isNaN(q)?1/0:q},project:function(a,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(He(a),l)},unproject:function(a,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(X(a),l)},layerPointToLatLng:function(a){var l=X(a).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(a){var l=this.project(He(a))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(He(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(_e(a))},distance:function(a,l){return this.options.crs.distance(He(a),He(l))},containerPointToLayerPoint:function(a){return X(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return X(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var l=this.containerPointToLayerPoint(X(a));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(He(a)))},mouseEventToContainerPoint:function(a){return ti(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var l=this._container=qn(a);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");yr(l,"scroll",this._onScroll,this),this._containerId=R(l)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&$t.any3d,An(a,"leaflet-container"+($t.touch?" leaflet-touch":"")+($t.retina?" leaflet-retina":"")+($t.ielt9?" leaflet-oldie":"")+($t.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=jn(a,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Sa(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(An(a.markerPane,"leaflet-zoom-hide"),An(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,l,O){Sa(this._mapPane,new Z(0,0));var q=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var ee=this._zoom!==l;this._moveStart(ee,O)._move(a,l)._moveEnd(ee),this.fire("viewreset"),q&&this.fire("load")},_moveStart:function(a,l){return a&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(a,l,O,q){l===void 0&&(l=this._zoom);var ee=this._zoom!==l;return this._zoom=l,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),q?O&&O.pinch&&this.fire("zoom",O):((ee||O&&O.pinch)&&this.fire("zoom",O),this.fire("move",O)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Sa(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[R(this._container)]=this;var l=a?ta:yr;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),$t.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=x(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,l){for(var O=[],q,ee=l==="mouseout"||l==="mouseover",me=a.target||a.srcElement,je=!1;me;){if(q=this._targets[R(me)],q&&(l==="click"||l==="preclick")&&this._draggableMoved(q)){je=!0;break}if(q&&q.listens(l,!0)&&(ee&&!Fa(me,a)||(O.push(q),ee))||me===this._container)break;me=me.parentNode}return!O.length&&!je&&!ee&&this.listens(l,!0)&&(O=[this]),O},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var l=a.target||a.srcElement;if(!(!this._loaded||l._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(l))){var O=a.type;O==="mousedown"&&Ls(l),this._fireDOMEvent(a,O)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,l,O){if(a.type==="click"){var q=g({},a);q.type="preclick",this._fireDOMEvent(q,q.type,O)}var ee=this._findEventTargets(a,l);if(O){for(var me=[],je=0;je<O.length;je++)O[je].listens(l,!0)&&me.push(O[je]);ee=me.concat(ee)}if(ee.length){l==="contextmenu"&&Da(a);var st=ee[0],dt={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Gt=st.getLatLng&&(!st._radius||st._radius<=10);dt.containerPoint=Gt?this.latLngToContainerPoint(st.getLatLng()):this.mouseEventToContainerPoint(a),dt.layerPoint=this.containerPointToLayerPoint(dt.containerPoint),dt.latlng=Gt?st.getLatLng():this.layerPointToLatLng(dt.layerPoint)}for(je=0;je<ee.length;je++)if(ee[je].fire(l,dt,!0),dt.originalEvent._stopped||ee[je].options.bubblingMouseEvents===!1&&P(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,l=this._handlers.length;a<l;a++)this._handlers[a].disable()},whenReady:function(a,l){return this._loaded?a.call(l||this,{target:this}):this.on("load",a,l),this},_getMapPanePos:function(){return Qa(this._mapPane)||new Z(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,l){var O=a&&l!==void 0?this._getNewPixelOrigin(a,l):this.getPixelOrigin();return O.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,l){var O=this.getSize()._divideBy(2);return this.project(a,l)._subtract(O)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,l,O){var q=this._getNewPixelOrigin(O,l);return this.project(a,l)._subtract(q)},_latLngBoundsToNewLayerBounds:function(a,l,O){var q=this._getNewPixelOrigin(O,l);return Se([this.project(a.getSouthWest(),l)._subtract(q),this.project(a.getNorthWest(),l)._subtract(q),this.project(a.getSouthEast(),l)._subtract(q),this.project(a.getNorthEast(),l)._subtract(q)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,l,O){if(!O)return a;var q=this.project(a,l),ee=this.getSize().divideBy(2),me=new Ee(q.subtract(ee),q.add(ee)),je=this._getBoundsOffset(me,O,l);return Math.abs(je.x)<=1&&Math.abs(je.y)<=1?a:this.unproject(q.add(je),l)},_limitOffset:function(a,l){if(!l)return a;var O=this.getPixelBounds(),q=new Ee(O.min.add(a),O.max.add(a));return a.add(this._getBoundsOffset(q,l))},_getBoundsOffset:function(a,l,O){var q=Se(this.project(l.getNorthEast(),O),this.project(l.getSouthWest(),O)),ee=q.min.subtract(a.min),me=q.max.subtract(a.max),je=this._rebound(ee.x,-me.x),st=this._rebound(ee.y,-me.y);return new Z(je,st)},_rebound:function(a,l){return a+l>0?Math.round(a-l)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(l))},_limitZoom:function(a){var l=this.getMinZoom(),O=this.getMaxZoom(),q=$t.any3d?this.options.zoomSnap:1;return q&&(a=Math.round(a/q)*q),Math.max(l,Math.min(O,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){jr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,l){var O=this._getCenterOffset(a)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(O)?!1:(this.panBy(O,l),!0)},_createAnimProxy:function(){var a=this._proxy=tr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(l){var O=Si,q=this._proxy.style[O];$a(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),q===this._proxy.style[O]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),l=this.getZoom();$a(this._proxy,this.project(a,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,l,O){if(this._animatingZoom)return!0;if(O=O||{},!this._zoomAnimated||O.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var q=this.getZoomScale(l),ee=this._getCenterOffset(a)._divideBy(1-1/q);return O.animate!==!0&&!this.getSize().contains(ee)?!1:(x(function(){this._moveStart(!0,O.noMoveStart||!1)._animateZoom(a,l,!0)},this),!0)},_animateZoom:function(a,l,O,q){this._mapPane&&(O&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=l,An(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:l,noUpdate:q}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(B(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&jr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Hi(a,l){return new Dr(a,l)}var ni=M.extend({options:{position:"topright"},initialize:function(a){h(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var l=this._map;return l&&l.removeControl(this),this.options.position=a,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var l=this._container=this.onAdd(a),O=this.getPosition(),q=a._controlCorners[O];return An(l,"leaflet-control"),O.indexOf("bottom")!==-1?q.insertBefore(l,q.firstChild):q.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Es=function(a){return new ni(a)};Dr.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},l="leaflet-",O=this._controlContainer=tr("div",l+"control-container",this._container);function q(ee,me){var je=l+ee+" "+l+me;a[ee+me]=tr("div",je,O)}q("top","left"),q("top","right"),q("bottom","left"),q("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)wn(this._controlCorners[a]);wn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var So=ni.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,l,O,q){return O<q?-1:q<O?1:0}},initialize:function(a,l,O){h(this,O),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var q in a)this._addLayer(a[q],q);for(q in l)this._addLayer(l[q],q,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ni.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,l){return this._addLayer(a,l),this._map?this._update():this},addOverlay:function(a,l){return this._addLayer(a,l,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var l=this._getLayer(R(a));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){An(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(An(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):jr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return jr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",l=this._container=tr("div",a),O=this.options.collapsed;l.setAttribute("aria-haspopup",!0),lr(l),Ui(l);var q=this._section=tr("section",a+"-list");O&&(this._map.on("click",this.collapse,this),yr(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ee=this._layersLink=tr("a",a+"-toggle",l);ee.href="#",ee.title="Layers",ee.setAttribute("role","button"),yr(ee,{keydown:function(me){me.keyCode===13&&this._expandSafely()},click:function(me){Da(me),this._expandSafely()}},this),O||this.expand(),this._baseLayersList=tr("div",a+"-base",q),this._separator=tr("div",a+"-separator",q),this._overlaysList=tr("div",a+"-overlays",q),l.appendChild(q)},_getLayer:function(a){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&R(this._layers[l].layer)===a)return this._layers[l]},_addLayer:function(a,l,O){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:l,overlay:O}),this.options.sortLayers&&this._layers.sort(B(function(q,ee){return this.options.sortFunction(q.layer,ee.layer,q.name,ee.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;On(this._baseLayersList),On(this._overlaysList),this._layerControlInputs=[];var a,l,O,q,ee=0;for(O=0;O<this._layers.length;O++)q=this._layers[O],this._addItem(q),l=l||q.overlay,a=a||!q.overlay,ee+=q.overlay?0:1;return this.options.hideSingleBase&&(a=a&&ee>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=l&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var l=this._getLayer(R(a.target)),O=l.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;O&&this._map.fire(O,l)},_createRadioElement:function(a,l){var O='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(l?' checked="checked"':"")+"/>",q=document.createElement("div");return q.innerHTML=O,q.firstChild},_addItem:function(a){var l=document.createElement("label"),O=this._map.hasLayer(a.layer),q;a.overlay?(q=document.createElement("input"),q.type="checkbox",q.className="leaflet-control-layers-selector",q.defaultChecked=O):q=this._createRadioElement("leaflet-base-layers_"+R(this),O),this._layerControlInputs.push(q),q.layerId=R(a.layer),yr(q,"click",this._onInputClick,this);var ee=document.createElement("span");ee.innerHTML=" "+a.name;var me=document.createElement("span");l.appendChild(me),me.appendChild(q),me.appendChild(ee);var je=a.overlay?this._overlaysList:this._baseLayersList;return je.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,l,O,q=[],ee=[];this._handlingClick=!0;for(var me=a.length-1;me>=0;me--)l=a[me],O=this._getLayer(l.layerId).layer,l.checked?q.push(O):l.checked||ee.push(O);for(me=0;me<ee.length;me++)this._map.hasLayer(ee[me])&&this._map.removeLayer(ee[me]);for(me=0;me<q.length;me++)this._map.hasLayer(q[me])||this._map.addLayer(q[me]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,l,O,q=this._map.getZoom(),ee=a.length-1;ee>=0;ee--)l=a[ee],O=this._getLayer(l.layerId).layer,l.disabled=O.options.minZoom!==void 0&&q<O.options.minZoom||O.options.maxZoom!==void 0&&q>O.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,yr(a,"click",Da),this.expand();var l=this;setTimeout(function(){ta(a,"click",Da),l._preventClick=!1})}}),xo=function(a,l,O){return new So(a,l,O)},js=ni.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var l="leaflet-control-zoom",O=tr("div",l+" leaflet-bar"),q=this.options;return this._zoomInButton=this._createButton(q.zoomInText,q.zoomInTitle,l+"-in",O,this._zoomIn),this._zoomOutButton=this._createButton(q.zoomOutText,q.zoomOutTitle,l+"-out",O,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),O},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,l,O,q,ee){var me=tr("a",O,q);return me.innerHTML=a,me.href="#",me.title=l,me.setAttribute("role","button"),me.setAttribute("aria-label",l),lr(me),yr(me,"click",Oi),yr(me,"click",ee,this),yr(me,"click",this._refocusOnMap,this),me},_updateDisabled:function(){var a=this._map,l="leaflet-disabled";jr(this._zoomInButton,l),jr(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(An(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(An(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Dr.mergeOptions({zoomControl:!0}),Dr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new js,this.addControl(this.zoomControl))});var on=function(a){return new js(a)},ve=ni.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var l="leaflet-control-scale",O=tr("div",l),q=this.options;return this._addScales(q,l+"-line",O),a.on(q.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),O},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,l,O){a.metric&&(this._mScale=tr("div",l,O)),a.imperial&&(this._iScale=tr("div",l,O))},_update:function(){var a=this._map,l=a.getSize().y/2,O=a.distance(a.containerPointToLatLng([0,l]),a.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(O)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var l=this._getRoundNum(a),O=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,O,l/a)},_updateImperial:function(a){var l=a*3.2808399,O,q,ee;l>5280?(O=l/5280,q=this._getRoundNum(O),this._updateScale(this._iScale,q+" mi",q/O)):(ee=this._getRoundNum(l),this._updateScale(this._iScale,ee+" ft",ee/l))},_updateScale:function(a,l,O){a.style.width=Math.round(this.options.maxWidth*O)+"px",a.innerHTML=l},_getRoundNum:function(a){var l=Math.pow(10,(Math.floor(a)+"").length-1),O=a/l;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:1,l*O}}),Pt=function(a){return new ve(a)},$n='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',aa=ni.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+($t.inlineSvg?$n+" ":"")+"Leaflet</a>"},initialize:function(a){h(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=tr("div","leaflet-control-attribution"),lr(this._container);for(var l in a._layers)a._layers[l].getAttribution&&this.addAttribution(a._layers[l].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var l in this._attributions)this._attributions[l]&&a.push(l);var O=[];this.options.prefix&&O.push(this.options.prefix),a.length&&O.push(a.join(", ")),this._container.innerHTML=O.join(' <span aria-hidden="true">|</span> ')}}});Dr.mergeOptions({attributionControl:!0}),Dr.addInitHook(function(){this.options.attributionControl&&new aa().addTo(this)});var Va=function(a){return new aa(a)};ni.Layers=So,ni.Zoom=js,ni.Scale=ve,ni.Attribution=aa,Es.layers=xo,Es.zoom=on,Es.scale=Pt,Es.attribution=Va;var ii=M.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ii.addTo=function(a,l){return a.addHandler(l,this),this};var Dc={Events:z},Mc=$t.touch?"touchstart mousedown":"mousedown",kr=G.extend({options:{clickTolerance:3},initialize:function(a,l,O,q){h(this,q),this._element=a,this._dragStartTarget=l||a,this._preventOutline=O},enable:function(){this._enabled||(yr(this._dragStartTarget,Mc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(kr._dragging===this&&this.finishDrag(!0),ta(this._dragStartTarget,Mc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!vr(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){kr._dragging===this&&this.finishDrag();return}if(!(kr._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(kr._dragging=this,this._preventOutline&&Ls(this._element),mi(),pi(),!this._moving)){this.fire("down");var l=a.touches?a.touches[0]:a,O=Ji(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=Qa(this._element),this._parentScale=us(O);var q=a.type==="mousedown";yr(document,q?"mousemove":"touchmove",this._onMove,this),yr(document,q?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var l=a.touches&&a.touches.length===1?a.touches[0]:a,O=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!O.x&&!O.y||Math.abs(O.x)+Math.abs(O.y)<this.options.clickTolerance||(O.x/=this._parentScale.x,O.y/=this._parentScale.y,Da(a),this._moved||(this.fire("dragstart"),this._moved=!0,An(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),An(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(O),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Sa(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){jr(document.body,"leaflet-dragging"),this._lastTarget&&(jr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ta(document,"mousemove touchmove",this._onMove,this),ta(document,"mouseup touchend touchcancel",this._onUp,this),to(),Ms();var l=this._moved&&this._moving;this._moving=!1,kr._dragging=!1,l&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Lc(a,l,O){var q,ee=[1,4,2,8],me,je,st,dt,Gt,Mn,Un,Yn;for(me=0,Mn=a.length;me<Mn;me++)a[me]._code=ro(a[me],l);for(st=0;st<4;st++){for(Un=ee[st],q=[],me=0,Mn=a.length,je=Mn-1;me<Mn;je=me++)dt=a[me],Gt=a[je],dt._code&Un?Gt._code&Un||(Yn=nc(Gt,dt,Un,l,O),Yn._code=ro(Yn,l),q.push(Yn)):(Gt._code&Un&&(Yn=nc(Gt,dt,Un,l,O),Yn._code=ro(Yn,l),q.push(Yn)),q.push(dt));a=q}return a}function jo(a,l){var O,q,ee,me,je,st,dt,Gt,Mn;if(!a||a.length===0)throw new Error("latlngs not passed");Ma(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Un=He([0,0]),Yn=_e(a),Sr=Yn.getNorthWest().distanceTo(Yn.getSouthWest())*Yn.getNorthEast().distanceTo(Yn.getNorthWest());Sr<1700&&(Un=no(a));var va=a.length,Na=[];for(O=0;O<va;O++){var Ja=He(a[O]);Na.push(l.project(He([Ja.lat-Un.lat,Ja.lng-Un.lng])))}for(st=dt=Gt=0,O=0,q=va-1;O<va;q=O++)ee=Na[O],me=Na[q],je=ee.y*me.x-me.y*ee.x,dt+=(ee.x+me.x)*je,Gt+=(ee.y+me.y)*je,st+=je*3;st===0?Mn=Na[0]:Mn=[dt/st,Gt/st];var yi=l.unproject(X(Mn));return He([yi.lat+Un.lat,yi.lng+Un.lng])}function no(a){for(var l=0,O=0,q=0,ee=0;ee<a.length;ee++){var me=He(a[ee]);l+=me.lat,O+=me.lng,q++}return He([l/q,O/q])}var $s={__proto__:null,clipPolygon:Lc,polygonCenter:jo,centroid:no};function Ss(a,l){if(!l||!a.length)return a.slice();var O=l*l;return a=Ri(a,O),a=Ic(a,O),a}function Gs(a,l,O){return Math.sqrt(xa(a,l,O,!0))}function bc(a,l,O){return xa(a,l,O)}function Ic(a,l){var O=a.length,q=typeof Uint8Array<"u"?Uint8Array:Array,ee=new q(O);ee[0]=ee[O-1]=1,ec(a,ee,l,0,O-1);var me,je=[];for(me=0;me<O;me++)ee[me]&&je.push(a[me]);return je}function ec(a,l,O,q,ee){var me=0,je,st,dt;for(st=q+1;st<=ee-1;st++)dt=xa(a[st],a[q],a[ee],!0),dt>me&&(je=st,me=dt);me>O&&(l[je]=1,ec(a,l,O,q,je),ec(a,l,O,je,ee))}function Ri(a,l){for(var O=[a[0]],q=1,ee=0,me=a.length;q<me;q++)sl(a[q],a[ee])>l&&(O.push(a[q]),ee=q);return ee<me-1&&O.push(a[me-1]),O}var il;function tc(a,l,O,q,ee){var me=q?il:ro(a,O),je=ro(l,O),st,dt,Gt;for(il=je;;){if(!(me|je))return[a,l];if(me&je)return!1;st=me||je,dt=nc(a,l,st,O,ee),Gt=ro(dt,O),st===me?(a=dt,me=Gt):(l=dt,je=Gt)}}function nc(a,l,O,q,ee){var me=l.x-a.x,je=l.y-a.y,st=q.min,dt=q.max,Gt,Mn;return O&8?(Gt=a.x+me*(dt.y-a.y)/je,Mn=dt.y):O&4?(Gt=a.x+me*(st.y-a.y)/je,Mn=st.y):O&2?(Gt=dt.x,Mn=a.y+je*(dt.x-a.x)/me):O&1&&(Gt=st.x,Mn=a.y+je*(st.x-a.x)/me),new Z(Gt,Mn,ee)}function ro(a,l){var O=0;return a.x<l.min.x?O|=1:a.x>l.max.x&&(O|=2),a.y<l.min.y?O|=4:a.y>l.max.y&&(O|=8),O}function sl(a,l){var O=l.x-a.x,q=l.y-a.y;return O*O+q*q}function xa(a,l,O,q){var ee=l.x,me=l.y,je=O.x-ee,st=O.y-me,dt=je*je+st*st,Gt;return dt>0&&(Gt=((a.x-ee)*je+(a.y-me)*st)/dt,Gt>1?(ee=O.x,me=O.y):Gt>0&&(ee+=je*Gt,me+=st*Gt)),je=a.x-ee,st=a.y-me,q?je*je+st*st:new Z(ee,me)}function Ma(a){return!m(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function jc(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ma(a)}function Bc(a,l){var O,q,ee,me,je,st,dt,Gt;if(!a||a.length===0)throw new Error("latlngs not passed");Ma(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Mn=He([0,0]),Un=_e(a),Yn=Un.getNorthWest().distanceTo(Un.getSouthWest())*Un.getNorthEast().distanceTo(Un.getNorthWest());Yn<1700&&(Mn=no(a));var Sr=a.length,va=[];for(O=0;O<Sr;O++){var Na=He(a[O]);va.push(l.project(He([Na.lat-Mn.lat,Na.lng-Mn.lng])))}for(O=0,q=0;O<Sr-1;O++)q+=va[O].distanceTo(va[O+1])/2;if(q===0)Gt=va[0];else for(O=0,me=0;O<Sr-1;O++)if(je=va[O],st=va[O+1],ee=je.distanceTo(st),me+=ee,me>q){dt=(me-q)/ee,Gt=[st.x-dt*(st.x-je.x),st.y-dt*(st.y-je.y)];break}var Ja=l.unproject(X(Gt));return He([Ja.lat+Mn.lat,Ja.lng+Mn.lng])}var ft={__proto__:null,simplify:Ss,pointToSegmentDistance:Gs,closestPointOnSegment:bc,clipSegment:tc,_getEdgeIntersection:nc,_getBitCode:ro,_sqClosestPointOnSegment:xa,isFlat:Ma,_flat:jc,polylineCenter:Bc},ao={project:function(a){return new Z(a.lng,a.lat)},unproject:function(a){return new Pe(a.y,a.x)},bounds:new Ee([-180,-90],[180,90])},Xn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var l=Math.PI/180,O=this.R,q=a.lat*l,ee=this.R_MINOR/O,me=Math.sqrt(1-ee*ee),je=me*Math.sin(q),st=Math.tan(Math.PI/4-q/2)/Math.pow((1-je)/(1+je),me/2);return q=-O*Math.log(Math.max(st,1e-10)),new Z(a.lng*l*O,q)},unproject:function(a){for(var l=180/Math.PI,O=this.R,q=this.R_MINOR/O,ee=Math.sqrt(1-q*q),me=Math.exp(-a.y/O),je=Math.PI/2-2*Math.atan(me),st=0,dt=.1,Gt;st<15&&Math.abs(dt)>1e-7;st++)Gt=ee*Math.sin(je),Gt=Math.pow((1-Gt)/(1+Gt),ee/2),dt=Math.PI/2-2*Math.atan(me*Gt)-je,je+=dt;return new Pe(je*l,a.x*l/O)}},rc={__proto__:null,LonLat:ao,Mercator:Xn,SphericalMercator:Ve},io=g({},Ge,{code:"EPSG:3395",projection:Xn,transformation:function(){var a=.5/(Math.PI*Xn.R);return nt(a,.5,-a,.5)}()}),hi=g({},Ge,{code:"EPSG:4326",projection:ao,transformation:nt(1/180,1,-1/180,.5)}),fe=g({},pe,{projection:ao,transformation:nt(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,l){var O=l.lng-a.lng,q=l.lat-a.lat;return Math.sqrt(O*O+q*q)},infinite:!0});pe.Earth=Ge,pe.EPSG3395=io,pe.EPSG3857=Bt,pe.EPSG900913=Pr,pe.EPSG4326=hi,pe.Simple=fe;var Cn=G.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[R(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[R(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var l=a.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var O=this.getEvents();l.on(O,this),this.once("remove",function(){l.off(O,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Dr.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var l=R(a);return this._layers[l]?this:(this._layers[l]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var l=R(a);return this._layers[l]?(this._loaded&&a.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return R(a)in this._layers},eachLayer:function(a,l){for(var O in this._layers)a.call(l,this._layers[O]);return this},_addLayers:function(a){a=a?m(a)?a:[a]:[];for(var l=0,O=a.length;l<O;l++)this.addLayer(a[l])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[R(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var l=R(a);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,l=-1/0,O=this._getZoomSpan();for(var q in this._zoomBoundLayers){var ee=this._zoomBoundLayers[q].options;a=ee.minZoom===void 0?a:Math.min(a,ee.minZoom),l=ee.maxZoom===void 0?l:Math.max(l,ee.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=a===1/0?void 0:a,O!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Dn=Cn.extend({initialize:function(a,l){h(this,l),this._layers={};var O,q;if(a)for(O=0,q=a.length;O<q;O++)this.addLayer(a[O])},addLayer:function(a){var l=this.getLayerId(a);return this._layers[l]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var l=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(a){var l=typeof a=="number"?a:this.getLayerId(a);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var l=Array.prototype.slice.call(arguments,1),O,q;for(O in this._layers)q=this._layers[O],q[a]&&q[a].apply(q,l);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,l){for(var O in this._layers)a.call(l,this._layers[O]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return R(a)}}),Bo=function(a,l){return new Dn(a,l)},Ra=Dn.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Dn.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Dn.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new xe;for(var l in this._layers){var O=this._layers[l];a.extend(O.getBounds?O.getBounds():O.getLatLng())}return a}}),te=function(a,l){return new Ra(a,l)},$=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){h(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,l){var O=this._getIconUrl(a);if(!O){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var q=this._createImg(O,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(q,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(q.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),q},_setIconStyles:function(a,l){var O=this.options,q=O[l+"Size"];typeof q=="number"&&(q=[q,q]);var ee=X(q),me=X(l==="shadow"&&O.shadowAnchor||O.iconAnchor||ee&&ee.divideBy(2,!0));a.className="leaflet-marker-"+l+" "+(O.className||""),me&&(a.style.marginLeft=-me.x+"px",a.style.marginTop=-me.y+"px"),ee&&(a.style.width=ee.x+"px",a.style.height=ee.y+"px")},_createImg:function(a,l){return l=l||document.createElement("img"),l.src=a,l},_getIconUrl:function(a){return $t.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Y(a){return new $(a)}var oe=$.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof oe.imagePath!="string"&&(oe.imagePath=this._detectIconPath()),(this.options.imagePath||oe.imagePath)+$.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var l=function(O,q,ee){var me=q.exec(O);return me&&me[ee]};return a=l(a,/^url\((['"])?(.+)\1\)$/,2),a&&l(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=tr("div","leaflet-default-icon-path",document.body),l=jn(a,"background-image")||jn(a,"backgroundImage");if(document.body.removeChild(a),l=this._stripUrl(l),l)return l;var O=document.querySelector('link[href$="leaflet.css"]');return O?O.href.substring(0,O.href.length-11-1):""}}),De=ii.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new kr(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),An(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&jr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var l=this._marker,O=l._map,q=this._marker.options.autoPanSpeed,ee=this._marker.options.autoPanPadding,me=Qa(l._icon),je=O.getPixelBounds(),st=O.getPixelOrigin(),dt=Se(je.min._subtract(st).add(ee),je.max._subtract(st).subtract(ee));if(!dt.contains(me)){var Gt=X((Math.max(dt.max.x,me.x)-dt.max.x)/(je.max.x-dt.max.x)-(Math.min(dt.min.x,me.x)-dt.min.x)/(je.min.x-dt.min.x),(Math.max(dt.max.y,me.y)-dt.max.y)/(je.max.y-dt.max.y)-(Math.min(dt.min.y,me.y)-dt.min.y)/(je.min.y-dt.min.y)).multiplyBy(q);O.panBy(Gt,{animate:!1}),this._draggable._newPos._add(Gt),this._draggable._startPos._add(Gt),Sa(l._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=x(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,a)))},_onDrag:function(a){var l=this._marker,O=l._shadow,q=Qa(l._icon),ee=l._map.layerPointToLatLng(q);O&&Sa(O,q),l._latlng=ee,a.latlng=ee,a.oldLatLng=this._oldLatLng,l.fire("move",a).fire("drag",a)},_onDragEnd:function(a){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),rt=Cn.extend({options:{icon:new oe,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,l){h(this,l),this._latlng=He(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var l=this._latlng;return this._latlng=He(a),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),O=a.icon.createIcon(this._icon),q=!1;O!==this._icon&&(this._icon&&this._removeIcon(),q=!0,a.title&&(O.title=a.title),O.tagName==="IMG"&&(O.alt=a.alt||"")),An(O,l),a.keyboard&&(O.tabIndex="0",O.setAttribute("role","button")),this._icon=O,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yr(O,"focus",this._panOnFocus,this);var ee=a.icon.createShadow(this._shadow),me=!1;ee!==this._shadow&&(this._removeShadow(),me=!0),ee&&(An(ee,l),ee.alt=""),this._shadow=ee,a.opacity<1&&this._updateOpacity(),q&&this.getPane().appendChild(this._icon),this._initInteraction(),ee&&me&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ta(this._icon,"focus",this._panOnFocus,this),wn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wn(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Sa(this._icon,a),this._shadow&&Sa(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(An(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),De)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new De(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&ya(this._icon,a),this._shadow&&ya(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var l=this.options.icon.options,O=l.iconSize?X(l.iconSize):X(0,0),q=l.iconAnchor?X(l.iconAnchor):X(0,0);a.panInside(this._latlng,{paddingTopLeft:q,paddingBottomRight:O.subtract(q)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function St(a,l){return new rt(a,l)}var Dt=Cn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return h(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_t=Dt.extend({options:{fill:!0,radius:10},initialize:function(a,l){h(this,l),this._latlng=He(a),this._radius=this.options.radius},setLatLng:function(a){var l=this._latlng;return this._latlng=He(a),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var l=a&&a.radius||this._radius;return Dt.prototype.setStyle.call(this,a),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,l=this._radiusY||a,O=this._clickTolerance(),q=[a+O,l+O];this._pxBounds=new Ee(this._point.subtract(q),this._point.add(q))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Tn(a,l){return new _t(a,l)}var Vt=_t.extend({initialize:function(a,l,O){if(typeof l=="number"&&(l=g({},O,{radius:l})),h(this,l),this._latlng=He(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new xe(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Dt.prototype.setStyle,_project:function(){var a=this._latlng.lng,l=this._latlng.lat,O=this._map,q=O.options.crs;if(q.distance===Ge.distance){var ee=Math.PI/180,me=this._mRadius/Ge.R/ee,je=O.project([l+me,a]),st=O.project([l-me,a]),dt=je.add(st).divideBy(2),Gt=O.unproject(dt).lat,Mn=Math.acos((Math.cos(me*ee)-Math.sin(l*ee)*Math.sin(Gt*ee))/(Math.cos(l*ee)*Math.cos(Gt*ee)))/ee;(isNaN(Mn)||Mn===0)&&(Mn=me/Math.cos(Math.PI/180*l)),this._point=dt.subtract(O.getPixelOrigin()),this._radius=isNaN(Mn)?0:dt.x-O.project([Gt,a-Mn]).x,this._radiusY=dt.y-je.y}else{var Un=q.unproject(q.project(this._latlng).subtract([this._mRadius,0]));this._point=O.latLngToLayerPoint(this._latlng),this._radius=this._point.x-O.latLngToLayerPoint(Un).x}this._updateBounds()}});function zn(a,l,O){return new Vt(a,l,O)}var vn=Dt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,l){h(this,l),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var l=1/0,O=null,q=xa,ee,me,je=0,st=this._parts.length;je<st;je++)for(var dt=this._parts[je],Gt=1,Mn=dt.length;Gt<Mn;Gt++){ee=dt[Gt-1],me=dt[Gt];var Un=q(a,ee,me,!0);Un<l&&(l=Un,O=q(a,ee,me))}return O&&(O.distance=Math.sqrt(l)),O},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,l){return l=l||this._defaultShape(),a=He(a),l.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new xe,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Ma(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var l=[],O=Ma(a),q=0,ee=a.length;q<ee;q++)O?(l[q]=He(a[q]),this._bounds.extend(l[q])):l[q]=this._convertLatLngs(a[q]);return l},_project:function(){var a=new Ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),l=new Z(a,a);this._rawPxBounds&&(this._pxBounds=new Ee([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(a,l,O){var q=a[0]instanceof Pe,ee=a.length,me,je;if(q){for(je=[],me=0;me<ee;me++)je[me]=this._map.latLngToLayerPoint(a[me]),O.extend(je[me]);l.push(je)}else for(me=0;me<ee;me++)this._projectLatlngs(a[me],l,O)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,O,q,ee,me,je,st,dt;for(O=0,ee=0,me=this._rings.length;O<me;O++)for(dt=this._rings[O],q=0,je=dt.length;q<je-1;q++)st=tc(dt[q],dt[q+1],a,q,!0),st&&(l[ee]=l[ee]||[],l[ee].push(st[0]),(st[1]!==dt[q+1]||q===je-2)&&(l[ee].push(st[1]),ee++))}},_simplifyPoints:function(){for(var a=this._parts,l=this.options.smoothFactor,O=0,q=a.length;O<q;O++)a[O]=Ss(a[O],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,l){var O,q,ee,me,je,st,dt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(O=0,me=this._parts.length;O<me;O++)for(st=this._parts[O],q=0,je=st.length,ee=je-1;q<je;ee=q++)if(!(!l&&q===0)&&Gs(a,st[ee],st[q])<=dt)return!0;return!1}});function Yr(a,l){return new vn(a,l)}vn._flat=jc;var Fr=vn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var l=vn.prototype._convertLatLngs.call(this,a),O=l.length;return O>=2&&l[0]instanceof Pe&&l[0].equals(l[O-1])&&l.pop(),l},_setLatLngs:function(a){vn.prototype._setLatLngs.call(this,a),Ma(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ma(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,l=this.options.weight,O=new Z(l,l);if(a=new Ee(a.min.subtract(O),a.max.add(O)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var q=0,ee=this._rings.length,me;q<ee;q++)me=Lc(this._rings[q],a,!0),me.length&&this._parts.push(me)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var l=!1,O,q,ee,me,je,st,dt,Gt;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(me=0,dt=this._parts.length;me<dt;me++)for(O=this._parts[me],je=0,Gt=O.length,st=Gt-1;je<Gt;st=je++)q=O[je],ee=O[st],q.y>a.y!=ee.y>a.y&&a.x<(ee.x-q.x)*(a.y-q.y)/(ee.y-q.y)+q.x&&(l=!l);return l||vn.prototype._containsPoint.call(this,a,!0)}});function ia(a,l){return new Fr(a,l)}var Qr=Ra.extend({initialize:function(a,l){h(this,l),this._layers={},a&&this.addData(a)},addData:function(a){var l=m(a)?a:a.features,O,q,ee;if(l){for(O=0,q=l.length;O<q;O++)ee=l[O],(ee.geometries||ee.geometry||ee.features||ee.coordinates)&&this.addData(ee);return this}var me=this.options;if(me.filter&&!me.filter(a))return this;var je=xs(a,me);return je?(je.feature=Fi(a),je.defaultOptions=je.options,this.resetStyle(je),me.onEachFeature&&me.onEachFeature(a,je),this.addLayer(je)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=g({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(l){this._setLayerStyle(l,a)},this)},_setLayerStyle:function(a,l){a.setStyle&&(typeof l=="function"&&(l=l(a.feature)),a.setStyle(l))}});function xs(a,l){var O=a.type==="Feature"?a.geometry:a,q=O?O.coordinates:null,ee=[],me=l&&l.pointToLayer,je=l&&l.coordsToLatLng||Xi,st,dt,Gt,Mn;if(!q&&!O)return null;switch(O.type){case"Point":return st=je(q),Rs(me,a,st,l);case"MultiPoint":for(Gt=0,Mn=q.length;Gt<Mn;Gt++)st=je(q[Gt]),ee.push(Rs(me,a,st,l));return new Ra(ee);case"LineString":case"MultiLineString":return dt=Ks(q,O.type==="LineString"?0:1,je),new vn(dt,l);case"Polygon":case"MultiPolygon":return dt=Ks(q,O.type==="Polygon"?1:2,je),new Fr(dt,l);case"GeometryCollection":for(Gt=0,Mn=O.geometries.length;Gt<Mn;Gt++){var Un=xs({geometry:O.geometries[Gt],type:"Feature",properties:a.properties},l);Un&&ee.push(Un)}return new Ra(ee);case"FeatureCollection":for(Gt=0,Mn=O.features.length;Gt<Mn;Gt++){var Yn=xs(O.features[Gt],l);Yn&&ee.push(Yn)}return new Ra(ee);default:throw new Error("Invalid GeoJSON object.")}}function Rs(a,l,O,q){return a?a(l,O):new rt(O,q&&q.markersInheritOptions&&q)}function Xi(a){return new Pe(a[1],a[0],a[2])}function Ks(a,l,O){for(var q=[],ee=0,me=a.length,je;ee<me;ee++)je=l?Ks(a[ee],l-1,O):(O||Xi)(a[ee]),q.push(je);return q}function Ys(a,l){return a=He(a),a.alt!==void 0?[b(a.lng,l),b(a.lat,l),b(a.alt,l)]:[b(a.lng,l),b(a.lat,l)]}function so(a,l,O,q){for(var ee=[],me=0,je=a.length;me<je;me++)ee.push(l?so(a[me],Ma(a[me])?0:l-1,O,q):Ys(a[me],q));return!l&&O&&ee.length>0&&ee.push(ee[0].slice()),ee}function Mi(a,l){return a.feature?g({},a.feature,{geometry:l}):Fi(l)}function Fi(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var oo={toGeoJSON:function(a){return Mi(this,{type:"Point",coordinates:Ys(this.getLatLng(),a)})}};rt.include(oo),Vt.include(oo),_t.include(oo),vn.include({toGeoJSON:function(a){var l=!Ma(this._latlngs),O=so(this._latlngs,l?1:0,!1,a);return Mi(this,{type:(l?"Multi":"")+"LineString",coordinates:O})}}),Fr.include({toGeoJSON:function(a){var l=!Ma(this._latlngs),O=l&&!Ma(this._latlngs[0]),q=so(this._latlngs,O?2:l?1:0,!0,a);return l||(q=[q]),Mi(this,{type:(O?"Multi":"")+"Polygon",coordinates:q})}}),Dn.include({toMultiPoint:function(a){var l=[];return this.eachLayer(function(O){l.push(O.toGeoJSON(a).geometry.coordinates)}),Mi(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(a){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(a);var O=l==="GeometryCollection",q=[];return this.eachLayer(function(ee){if(ee.toGeoJSON){var me=ee.toGeoJSON(a);if(O)q.push(me.geometry);else{var je=Fi(me);je.type==="FeatureCollection"?q.push.apply(q,je.features):q.push(je)}}}),O?Mi(this,{geometries:q,type:"GeometryCollection"}):{type:"FeatureCollection",features:q}}});function ac(a,l){return new Qr(a,l)}var zo=ac,Vi=Cn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,l,O){this._url=a,this._bounds=_e(l),h(this,O)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(An(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Ir(this._image),this},bringToBack:function(){return this._map&&hr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=_e(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",l=this._image=a?this._url:tr("img");if(An(l,"leaflet-image-layer"),this._zoomAnimated&&An(l,"leaflet-zoom-animated"),this.options.className&&An(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onload=B(this.fire,this,"load"),l.onerror=B(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(a){var l=this._map.getZoomScale(a.zoom),O=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;$a(this._image,O,l)},_reset:function(){var a=this._image,l=new Ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),O=l.getSize();Sa(a,l.min),a.style.width=O.x+"px",a.style.height=O.y+"px"},_updateOpacity:function(){ya(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Bs=function(a,l,O){return new Vi(a,l,O)},Ro=Vi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",l=this._image=a?this._url:tr("video");if(An(l,"leaflet-image-layer"),this._zoomAnimated&&An(l,"leaflet-zoom-animated"),this.options.className&&An(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onloadeddata=B(this.fire,this,"load"),a){for(var O=l.getElementsByTagName("source"),q=[],ee=0;ee<O.length;ee++)q.push(O[ee].src);this._url=O.length>0?q:[l.src];return}m(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var me=0;me<this._url.length;me++){var je=tr("source");je.src=this._url[me],l.appendChild(je)}}});function ic(a,l,O){return new Ro(a,l,O)}var ks=Vi.extend({_initImage:function(){var a=this._image=this._url;An(a,"leaflet-image-layer"),this._zoomAnimated&&An(a,"leaflet-zoom-animated"),this.options.className&&An(a,this.options.className),a.onselectstart=y,a.onmousemove=y}});function Uo(a,l,O){return new ks(a,l,O)}var qi=Cn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,l){a&&(a instanceof Pe||m(a))?(this._latlng=He(a),h(this,l)):(h(this,a),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&ya(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&ya(this._container,1),this.bringToFront(),this.options.interactive&&(An(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(ya(this._container,0),this._removeTimeout=setTimeout(B(wn,void 0,this._container),200)):wn(this._container),this.options.interactive&&(jr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=He(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ir(this._container),this},bringToBack:function(){return this._map&&hr(this._container),this},_prepareOpen:function(a){var l=this._source;if(!l._map)return!1;if(l instanceof Ra){l=null;var O=this._source._layers;for(var q in O)if(O[q]._map){l=O[q];break}if(!l)return!1;this._source=l}if(!a)if(l.getCenter)a=l.getCenter();else if(l.getLatLng)a=l.getLatLng();else if(l.getBounds)a=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")a.innerHTML=l;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),l=X(this.options.offset),O=this._getAnchor();this._zoomAnimated?Sa(this._container,a.add(O)):l=l.add(a).add(O);var q=this._containerBottom=-l.y,ee=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=q+"px",this._container.style.left=ee+"px"}},_getAnchor:function(){return[0,0]}});Dr.include({_initOverlay:function(a,l,O,q){var ee=l;return ee instanceof a||(ee=new a(q).setContent(l)),O&&ee.setLatLng(O),ee}}),Cn.include({_initOverlay:function(a,l,O,q){var ee=O;return ee instanceof a?(h(ee,q),ee._source=this):(ee=l&&!q?l:new a(q,this),ee.setContent(O)),ee}});var Cs=qi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,qi.prototype.openOn.call(this,a)},onAdd:function(a){qi.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Dt||this._source.on("preclick",zi))},onRemove:function(a){qi.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Dt||this._source.off("preclick",zi))},getEvents:function(){var a=qi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",l=this._container=tr("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),O=this._wrapper=tr("div",a+"-content-wrapper",l);if(this._contentNode=tr("div",a+"-content",O),lr(l),Ui(this._contentNode),yr(l,"contextmenu",zi),this._tipContainer=tr("div",a+"-tip-container",l),this._tip=tr("div",a+"-tip",this._tipContainer),this.options.closeButton){var q=this._closeButton=tr("a",a+"-close-button",l);q.setAttribute("role","button"),q.setAttribute("aria-label","Close popup"),q.href="#close",q.innerHTML='<span aria-hidden="true">&#215;</span>',yr(q,"click",function(ee){Da(ee),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,l=a.style;l.width="",l.whiteSpace="nowrap";var O=a.offsetWidth;O=Math.min(O,this.options.maxWidth),O=Math.max(O,this.options.minWidth),l.width=O+1+"px",l.whiteSpace="",l.height="";var q=a.offsetHeight,ee=this.options.maxHeight,me="leaflet-popup-scrolled";ee&&q>ee?(l.height=ee+"px",An(a,me)):jr(a,me),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),O=this._getAnchor();Sa(this._container,l.add(O))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,l=parseInt(jn(this._container,"marginBottom"),10)||0,O=this._container.offsetHeight+l,q=this._containerWidth,ee=new Z(this._containerLeft,-O-this._containerBottom);ee._add(Qa(this._container));var me=a.layerPointToContainerPoint(ee),je=X(this.options.autoPanPadding),st=X(this.options.autoPanPaddingTopLeft||je),dt=X(this.options.autoPanPaddingBottomRight||je),Gt=a.getSize(),Mn=0,Un=0;me.x+q+dt.x>Gt.x&&(Mn=me.x+q-Gt.x+dt.x),me.x-Mn-st.x<0&&(Mn=me.x-st.x),me.y+O+dt.y>Gt.y&&(Un=me.y+O-Gt.y+dt.y),me.y-Un-st.y<0&&(Un=me.y-st.y),(Mn||Un)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Mn,Un]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),wc=function(a,l){return new Cs(a,l)};Dr.mergeOptions({closePopupOnClick:!0}),Dr.include({openPopup:function(a,l,O){return this._initOverlay(Cs,a,l,O).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Cn.include({bindPopup:function(a,l){return this._popup=this._initOverlay(Cs,this._popup,a,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Ra||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Oi(a);var l=a.layer||a.target;if(this._popup._source===l&&!(l instanceof Dt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=l,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var ko=qi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){qi.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){qi.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=qi.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",l=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=tr("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+R(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var l,O,q=this._map,ee=this._container,me=q.latLngToContainerPoint(q.getCenter()),je=q.layerPointToContainerPoint(a),st=this.options.direction,dt=ee.offsetWidth,Gt=ee.offsetHeight,Mn=X(this.options.offset),Un=this._getAnchor();st==="top"?(l=dt/2,O=Gt):st==="bottom"?(l=dt/2,O=0):st==="center"?(l=dt/2,O=Gt/2):st==="right"?(l=0,O=Gt/2):st==="left"?(l=dt,O=Gt/2):je.x<me.x?(st="right",l=0,O=Gt/2):(st="left",l=dt+(Mn.x+Un.x)*2,O=Gt/2),a=a.subtract(X(l,O,!0)).add(Mn).add(Un),jr(ee,"leaflet-tooltip-right"),jr(ee,"leaflet-tooltip-left"),jr(ee,"leaflet-tooltip-top"),jr(ee,"leaflet-tooltip-bottom"),An(ee,"leaflet-tooltip-"+st),Sa(ee,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&ya(this._container,a)},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(l)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ho=function(a,l){return new ko(a,l)};Dr.include({openTooltip:function(a,l,O){return this._initOverlay(ko,a,l,O).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Cn.include({bindTooltip:function(a,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ko,this._tooltip,a,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var l=a?"off":"on",O={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?O.add=this._openTooltip:(O.mouseover=this._openTooltip,O.mouseout=this.closeTooltip,O.click=this._openTooltip,this._map?this._addFocusListeners():O.add=this._addFocusListeners),this._tooltip.options.sticky&&(O.mousemove=this._moveTooltip),this[l](O),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Ra||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var l=typeof a.getElement=="function"&&a.getElement();l&&(yr(l,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),yr(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var l=typeof a.getElement=="function"&&a.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var l=a.latlng,O,q;this._tooltip.options.sticky&&a.originalEvent&&(O=this._map.mouseEventToContainerPoint(a.originalEvent),q=this._map.containerPointToLayerPoint(O),l=this._map.layerPointToLatLng(q)),this._tooltip.setLatLng(l)}});var co=$.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var l=a&&a.tagName==="DIV"?a:document.createElement("div"),O=this.options;if(O.html instanceof Element?(On(l),l.appendChild(O.html)):l.innerHTML=O.html!==!1?O.html:"",O.bgPos){var q=X(O.bgPos);l.style.backgroundPosition=-q.x+"px "+-q.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Co(a){return new co(a)}$.Default=oe;var ki=Cn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:$t.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){h(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),wn(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ir(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(hr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Z?a:new Z(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var l=this.getPane().children,O=-a(-1/0,1/0),q=0,ee=l.length,me;q<ee;q++)me=l[q].style.zIndex,l[q]!==this._container&&me&&(O=a(O,+me));isFinite(O)&&(this.options.zIndex=O+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!$t.ielt9){ya(this._container,this.options.opacity);var a=+new Date,l=!1,O=!1;for(var q in this._tiles){var ee=this._tiles[q];if(!(!ee.current||!ee.loaded)){var me=Math.min(1,(a-ee.loaded)/200);ya(ee.el,me),me<1?l=!0:(ee.active?O=!0:this._onOpaqueTile(ee),ee.active=!0)}}O&&!this._noPrune&&this._pruneTiles(),l&&(A(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=tr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,l=this.options.maxZoom;if(a!==void 0){for(var O in this._levels)O=Number(O),this._levels[O].el.children.length||O===a?(this._levels[O].el.style.zIndex=l-Math.abs(a-O),this._onUpdateLevel(O)):(wn(this._levels[O].el),this._removeTilesAtZoom(O),this._onRemoveLevel(O),delete this._levels[O]);var q=this._levels[a],ee=this._map;return q||(q=this._levels[a]={},q.el=tr("div","leaflet-tile-container leaflet-zoom-animated",this._container),q.el.style.zIndex=l,q.origin=ee.project(ee.unproject(ee.getPixelOrigin()),a).round(),q.zoom=a,this._setZoomTransform(q,ee.getCenter(),ee.getZoom()),y(q.el.offsetWidth),this._onCreateLevel(q)),this._level=q,q}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var a,l,O=this._map.getZoom();if(O>this.options.maxZoom||O<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)l=this._tiles[a],l.retain=l.current;for(a in this._tiles)if(l=this._tiles[a],l.current&&!l.active){var q=l.coords;this._retainParent(q.x,q.y,q.z,q.z-5)||this._retainChildren(q.x,q.y,q.z,q.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var l in this._tiles)this._tiles[l].coords.z===a&&this._removeTile(l)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)wn(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,l,O,q){var ee=Math.floor(a/2),me=Math.floor(l/2),je=O-1,st=new Z(+ee,+me);st.z=+je;var dt=this._tileCoordsToKey(st),Gt=this._tiles[dt];return Gt&&Gt.active?(Gt.retain=!0,!0):(Gt&&Gt.loaded&&(Gt.retain=!0),je>q?this._retainParent(ee,me,je,q):!1)},_retainChildren:function(a,l,O,q){for(var ee=2*a;ee<2*a+2;ee++)for(var me=2*l;me<2*l+2;me++){var je=new Z(ee,me);je.z=O+1;var st=this._tileCoordsToKey(je),dt=this._tiles[st];if(dt&&dt.active){dt.retain=!0;continue}else dt&&dt.loaded&&(dt.retain=!0);O+1<q&&this._retainChildren(ee,me,O+1,q)}},_resetView:function(a){var l=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var l=this.options;return l.minNativeZoom!==void 0&&a<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<a?l.maxNativeZoom:a},_setView:function(a,l,O,q){var ee=Math.round(l);this.options.maxZoom!==void 0&&ee>this.options.maxZoom||this.options.minZoom!==void 0&&ee<this.options.minZoom?ee=void 0:ee=this._clampZoom(ee);var me=this.options.updateWhenZooming&&ee!==this._tileZoom;(!q||me)&&(this._tileZoom=ee,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ee!==void 0&&this._update(a),O||this._pruneTiles(),this._noPrune=!!O),this._setZoomTransforms(a,l)},_setZoomTransforms:function(a,l){for(var O in this._levels)this._setZoomTransform(this._levels[O],a,l)},_setZoomTransform:function(a,l,O){var q=this._map.getZoomScale(O,a.zoom),ee=a.origin.multiplyBy(q).subtract(this._map._getNewPixelOrigin(l,O)).round();$t.any3d?$a(a.el,ee,q):Sa(a.el,ee)},_resetGrid:function(){var a=this._map,l=a.options.crs,O=this._tileSize=this.getTileSize(),q=this._tileZoom,ee=this._map.getPixelWorldBounds(this._tileZoom);ee&&(this._globalTileRange=this._pxBoundsToTileRange(ee)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,l.wrapLng[0]],q).x/O.x),Math.ceil(a.project([0,l.wrapLng[1]],q).x/O.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([l.wrapLat[0],0],q).y/O.x),Math.ceil(a.project([l.wrapLat[1],0],q).y/O.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var l=this._map,O=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),q=l.getZoomScale(O,this._tileZoom),ee=l.project(a,this._tileZoom).floor(),me=l.getSize().divideBy(q*2);return new Ee(ee.subtract(me),ee.add(me))},_update:function(a){var l=this._map;if(l){var O=this._clampZoom(l.getZoom());if(a===void 0&&(a=l.getCenter()),this._tileZoom!==void 0){var q=this._getTiledPixelBounds(a),ee=this._pxBoundsToTileRange(q),me=ee.getCenter(),je=[],st=this.options.keepBuffer,dt=new Ee(ee.getBottomLeft().subtract([st,-st]),ee.getTopRight().add([st,-st]));if(!(isFinite(ee.min.x)&&isFinite(ee.min.y)&&isFinite(ee.max.x)&&isFinite(ee.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Gt in this._tiles){var Mn=this._tiles[Gt].coords;(Mn.z!==this._tileZoom||!dt.contains(new Z(Mn.x,Mn.y)))&&(this._tiles[Gt].current=!1)}if(Math.abs(O-this._tileZoom)>1){this._setView(a,O);return}for(var Un=ee.min.y;Un<=ee.max.y;Un++)for(var Yn=ee.min.x;Yn<=ee.max.x;Yn++){var Sr=new Z(Yn,Un);if(Sr.z=this._tileZoom,!!this._isValidTile(Sr)){var va=this._tiles[this._tileCoordsToKey(Sr)];va?va.current=!0:je.push(Sr)}}if(je.sort(function(Ja,yi){return Ja.distanceTo(me)-yi.distanceTo(me)}),je.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Na=document.createDocumentFragment();for(Yn=0;Yn<je.length;Yn++)this._addTile(je[Yn],Na);this._level.el.appendChild(Na)}}}},_isValidTile:function(a){var l=this._map.options.crs;if(!l.infinite){var O=this._globalTileRange;if(!l.wrapLng&&(a.x<O.min.x||a.x>O.max.x)||!l.wrapLat&&(a.y<O.min.y||a.y>O.max.y))return!1}if(!this.options.bounds)return!0;var q=this._tileCoordsToBounds(a);return _e(this.options.bounds).overlaps(q)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var l=this._map,O=this.getTileSize(),q=a.scaleBy(O),ee=q.add(O),me=l.unproject(q,a.z),je=l.unproject(ee,a.z);return[me,je]},_tileCoordsToBounds:function(a){var l=this._tileCoordsToNwSe(a),O=new xe(l[0],l[1]);return this.options.noWrap||(O=this._map.wrapLatLngBounds(O)),O},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var l=a.split(":"),O=new Z(+l[0],+l[1]);return O.z=+l[2],O},_removeTile:function(a){var l=this._tiles[a];l&&(wn(l.el),delete this._tiles[a],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){An(a,"leaflet-tile");var l=this.getTileSize();a.style.width=l.x+"px",a.style.height=l.y+"px",a.onselectstart=y,a.onmousemove=y,$t.ielt9&&this.options.opacity<1&&ya(a,this.options.opacity)},_addTile:function(a,l){var O=this._getTilePos(a),q=this._tileCoordsToKey(a),ee=this.createTile(this._wrapCoords(a),B(this._tileReady,this,a));this._initTile(ee),this.createTile.length<2&&x(B(this._tileReady,this,a,null,ee)),Sa(ee,O),this._tiles[q]={el:ee,coords:a,current:!0},l.appendChild(ee),this.fire("tileloadstart",{tile:ee,coords:a})},_tileReady:function(a,l,O){l&&this.fire("tileerror",{error:l,tile:O,coords:a});var q=this._tileCoordsToKey(a);O=this._tiles[q],O&&(O.loaded=+new Date,this._map._fadeAnimated?(ya(O.el,0),A(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(O.active=!0,this._pruneTiles()),l||(An(O.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:O.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$t.ielt9||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(B(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var l=new Z(this._wrapX?S(a.x,this._wrapX):a.x,this._wrapY?S(a.y,this._wrapY):a.y);return l.z=a.z,l},_pxBoundsToTileRange:function(a){var l=this.getTileSize();return new Ee(a.min.unscaleBy(l).floor(),a.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function fi(a){return new ki(a)}var ds=ki.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,l){this._url=a,l=h(this,l),l.detectRetina&&$t.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,l){return this._url===a&&l===void 0&&(l=!0),this._url=a,l||this.redraw(),this},createTile:function(a,l){var O=document.createElement("img");return yr(O,"load",B(this._tileOnLoad,this,l,O)),yr(O,"error",B(this._tileOnError,this,l,O)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(O.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(O.referrerPolicy=this.options.referrerPolicy),O.alt="",O.src=this.getTileUrl(a),O},getTileUrl:function(a){var l={r:$t.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var O=this._globalTileRange.max.y-a.y;this.options.tms&&(l.y=O),l["-y"]=O}return H(this._url,g(l,this.options))},_tileOnLoad:function(a,l){$t.ielt9?setTimeout(B(a,this,null,l),0):a(null,l)},_tileOnError:function(a,l,O){var q=this.options.errorTileUrl;q&&l.getAttribute("src")!==q&&(l.src=q),a(O,l)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,l=this.options.maxZoom,O=this.options.zoomReverse,q=this.options.zoomOffset;return O&&(a=l-a),a+q},_getSubdomain:function(a){var l=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var a,l;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(l=this._tiles[a].el,l.onload=y,l.onerror=y,!l.complete)){l.src=v;var O=this._tiles[a].coords;wn(l),delete this._tiles[a],this.fire("tileabort",{tile:l,coords:O})}},_removeTile:function(a){var l=this._tiles[a];if(l)return l.el.setAttribute("src",v),ki.prototype._removeTile.call(this,a)},_tileReady:function(a,l,O){if(!(!this._map||O&&O.getAttribute("src")===v))return ki.prototype._tileReady.call(this,a,l,O)}});function ri(a,l){return new ds(a,l)}var gi=ds.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,l){this._url=a;var O=g({},this.defaultWmsParams);for(var q in l)q in this.options||(O[q]=l[q]);l=h(this,l);var ee=l.detectRetina&&$t.retina?2:1,me=this.getTileSize();O.width=me.x*ee,O.height=me.y*ee,this.wmsParams=O},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ds.prototype.onAdd.call(this,a)},getTileUrl:function(a){var l=this._tileCoordsToNwSe(a),O=this._crs,q=Se(O.project(l[0]),O.project(l[1])),ee=q.min,me=q.max,je=(this._wmsVersion>=1.3&&this._crs===hi?[ee.y,ee.x,me.y,me.x]:[ee.x,ee.y,me.x,me.y]).join(","),st=ds.prototype.getTileUrl.call(this,a);return st+k(this.wmsParams,st,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+je},setParams:function(a,l){return g(this.wmsParams,a),l||this.redraw(),this}});function Qs(a,l){return new gi(a,l)}ds.WMS=gi,ri.wms=Qs;var Zi=Cn.extend({options:{padding:.1},initialize:function(a){h(this,a),R(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),An(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,l){var O=this._map.getZoomScale(l,this._zoom),q=this._map.getSize().multiplyBy(.5+this.options.padding),ee=this._map.project(this._center,l),me=q.multiplyBy(-O).add(ee).subtract(this._map._getNewPixelOrigin(a,l));$t.any3d?$a(this._container,me,O):Sa(this._container,me)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,l=this._map.getSize(),O=this._map.containerPointToLayerPoint(l.multiplyBy(-a)).round();this._bounds=new Ee(O,O.add(l.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),lo=Zi.extend({options:{tolerance:0},getEvents:function(){var a=Zi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");yr(a,"mousemove",this._onMouseMove,this),yr(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),yr(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,wn(this._container),ta(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var l in this._layers)a=this._layers[l],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zi.prototype._update.call(this);var a=this._bounds,l=this._container,O=a.getSize(),q=$t.retina?2:1;Sa(l,a.min),l.width=q*O.x,l.height=q*O.y,l.style.width=O.x+"px",l.style.height=O.y+"px",$t.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Zi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[R(a)]=a;var l=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var l=a._order,O=l.next,q=l.prev;O?O.prev=q:this._drawLast=q,q?q.next=O:this._drawFirst=O,delete a._order,delete this._layers[R(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var l=a.options.dashArray.split(/[, ]+/),O=[],q,ee;for(ee=0;ee<l.length;ee++){if(q=Number(l[ee]),isNaN(q))return;O.push(q)}a.options._dashArray=O}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var l=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ee,this._redrawBounds.extend(a._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(a._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var l=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,l=this._redrawBounds;if(this._ctx.save(),l){var O=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,O.x,O.y),this._ctx.clip()}this._drawing=!0;for(var q=this._drawFirst;q;q=q.next)a=q.layer,(!l||a._pxBounds&&a._pxBounds.intersects(l))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,l){if(this._drawing){var O,q,ee,me,je=a._parts,st=je.length,dt=this._ctx;if(st){for(dt.beginPath(),O=0;O<st;O++){for(q=0,ee=je[O].length;q<ee;q++)me=je[O][q],dt[q?"lineTo":"moveTo"](me.x,me.y);l&&dt.closePath()}this._fillStroke(dt,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var l=a._point,O=this._ctx,q=Math.max(Math.round(a._radius),1),ee=(Math.max(Math.round(a._radiusY),1)||q)/q;ee!==1&&(O.save(),O.scale(1,ee)),O.beginPath(),O.arc(l.x,l.y/ee,q,0,Math.PI*2,!1),ee!==1&&O.restore(),this._fillStroke(O,a)}},_fillStroke:function(a,l){var O=l.options;O.fill&&(a.globalAlpha=O.fillOpacity,a.fillStyle=O.fillColor||O.color,a.fill(O.fillRule||"evenodd")),O.stroke&&O.weight!==0&&(a.setLineDash&&a.setLineDash(l.options&&l.options._dashArray||[]),a.globalAlpha=O.opacity,a.lineWidth=O.weight,a.strokeStyle=O.color,a.lineCap=O.lineCap,a.lineJoin=O.lineJoin,a.stroke())},_onClick:function(a){for(var l=this._map.mouseEventToLayerPoint(a),O,q,ee=this._drawFirst;ee;ee=ee.next)O=ee.layer,O.options.interactive&&O._containsPoint(l)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(O))&&(q=O);this._fireEvent(q?[q]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,l)}},_handleMouseOut:function(a){var l=this._hoveredLayer;l&&(jr(this._container,"leaflet-interactive"),this._fireEvent([l],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,l){if(!this._mouseHoverThrottled){for(var O,q,ee=this._drawFirst;ee;ee=ee.next)O=ee.layer,O.options.interactive&&O._containsPoint(l)&&(q=O);q!==this._hoveredLayer&&(this._handleMouseOut(a),q&&(An(this._container,"leaflet-interactive"),this._fireEvent([q],a,"mouseover"),this._hoveredLayer=q)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(B(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,l,O){this._map._fireDOMEvent(l,O||l.type,a)},_bringToFront:function(a){var l=a._order;if(l){var O=l.next,q=l.prev;if(O)O.prev=q;else return;q?q.next=O:O&&(this._drawFirst=O),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(a)}},_bringToBack:function(a){var l=a._order;if(l){var O=l.next,q=l.prev;if(q)q.next=O;else return;O?O.prev=q:q&&(this._drawLast=q),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(a)}}});function vi(a){return $t.canvas?new lo(a):null}var Js=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),zs={_initContainer:function(){this._container=tr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var l=a._container=Js("shape");An(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",a._path=Js("path"),l.appendChild(a._path),this._updateStyle(a),this._layers[R(a)]=a},_addPath:function(a){var l=a._container;this._container.appendChild(l),a.options.interactive&&a.addInteractiveTarget(l)},_removePath:function(a){var l=a._container;wn(l),a.removeInteractiveTarget(l),delete this._layers[R(a)]},_updateStyle:function(a){var l=a._stroke,O=a._fill,q=a.options,ee=a._container;ee.stroked=!!q.stroke,ee.filled=!!q.fill,q.stroke?(l||(l=a._stroke=Js("stroke")),ee.appendChild(l),l.weight=q.weight+"px",l.color=q.color,l.opacity=q.opacity,q.dashArray?l.dashStyle=m(q.dashArray)?q.dashArray.join(" "):q.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=q.lineCap.replace("butt","flat"),l.joinstyle=q.lineJoin):l&&(ee.removeChild(l),a._stroke=null),q.fill?(O||(O=a._fill=Js("fill")),ee.appendChild(O),O.color=q.fillColor||q.color,O.opacity=q.fillOpacity):O&&(ee.removeChild(O),a._fill=null)},_updateCircle:function(a){var l=a._point.round(),O=Math.round(a._radius),q=Math.round(a._radiusY||O);this._setPath(a,a._empty()?"M0 0":"AL "+l.x+","+l.y+" "+O+","+q+" 0,"+65535*360)},_setPath:function(a,l){a._path.v=l},_bringToFront:function(a){Ir(a._container)},_bringToBack:function(a){hr(a._container)}},To=$t.vml?Js:Ur,ps=Zi.extend({_initContainer:function(){this._container=To("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=To("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wn(this._container),ta(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zi.prototype._update.call(this);var a=this._bounds,l=a.getSize(),O=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,O.setAttribute("width",l.x),O.setAttribute("height",l.y)),Sa(O,a.min),O.setAttribute("viewBox",[a.min.x,a.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(a){var l=a._path=To("path");a.options.className&&An(l,a.options.className),a.options.interactive&&An(l,"leaflet-interactive"),this._updateStyle(a),this._layers[R(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){wn(a._path),a.removeInteractiveTarget(a._path),delete this._layers[R(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var l=a._path,O=a.options;l&&(O.stroke?(l.setAttribute("stroke",O.color),l.setAttribute("stroke-opacity",O.opacity),l.setAttribute("stroke-width",O.weight),l.setAttribute("stroke-linecap",O.lineCap),l.setAttribute("stroke-linejoin",O.lineJoin),O.dashArray?l.setAttribute("stroke-dasharray",O.dashArray):l.removeAttribute("stroke-dasharray"),O.dashOffset?l.setAttribute("stroke-dashoffset",O.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),O.fill?(l.setAttribute("fill",O.fillColor||O.color),l.setAttribute("fill-opacity",O.fillOpacity),l.setAttribute("fill-rule",O.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(a,l){this._setPath(a,Zn(a._parts,l))},_updateCircle:function(a){var l=a._point,O=Math.max(Math.round(a._radius),1),q=Math.max(Math.round(a._radiusY),1)||O,ee="a"+O+","+q+" 0 1,0 ",me=a._empty()?"M0 0":"M"+(l.x-O)+","+l.y+ee+O*2+",0 "+ee+-O*2+",0 ";this._setPath(a,me)},_setPath:function(a,l){a._path.setAttribute("d",l)},_bringToFront:function(a){Ir(a._path)},_bringToBack:function(a){hr(a._path)}});$t.vml&&ps.include(zs);function uo(a){return $t.svg||$t.vml?new ps(a):null}Dr.include({getRenderer:function(a){var l=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var l=this._paneRenderers[a];return l===void 0&&(l=this._createRenderer({pane:a}),this._paneRenderers[a]=l),l},_createRenderer:function(a){return this.options.preferCanvas&&vi(a)||uo(a)}});var zc=Fr.extend({initialize:function(a,l){Fr.prototype.initialize.call(this,this._boundsToLatLngs(a),l)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=_e(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function _a(a,l){return new zc(a,l)}ps.create=To,ps.pointsToPath=Zn,Qr.geometryToLayer=xs,Qr.coordsToLatLng=Xi,Qr.coordsToLatLngs=Ks,Qr.latLngToCoords=Ys,Qr.latLngsToCoords=so,Qr.getFeature=Mi,Qr.asFeature=Fi,Dr.mergeOptions({boxZoom:!0});var Po=ii.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){yr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ta(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),pi(),mi(),this._startPoint=this._map.mouseEventToContainerPoint(a),yr(document,{contextmenu:Oi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=tr("div","leaflet-zoom-box",this._container),An(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var l=new Ee(this._point,this._startPoint),O=l.getSize();Sa(this._box,l.min),this._box.style.width=O.x+"px",this._box.style.height=O.y+"px"},_finish:function(){this._moved&&(wn(this._box),jr(this._container,"leaflet-crosshair")),Ms(),to(),ta(document,{contextmenu:Oi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(B(this._resetState,this),0);var l=new xe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Dr.addInitHook("addHandler","boxZoom",Po),Dr.mergeOptions({doubleClickZoom:!0});var Ts=ii.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var l=this._map,O=l.getZoom(),q=l.options.zoomDelta,ee=a.originalEvent.shiftKey?O-q:O+q;l.options.doubleClickZoom==="center"?l.setZoom(ee):l.setZoomAround(a.containerPoint,ee)}});Dr.addInitHook("addHandler","doubleClickZoom",Ts),Dr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var sc=ii.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new kr(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}An(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){jr(this._map._container,"leaflet-grab"),jr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=_e(this._map.options.maxBounds);this._offsetLimit=Se(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var l=this._lastTime=+new Date,O=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(O),this._times.push(l),this._prunePositions(l)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,l){return a-(a-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;a.x<l.min.x&&(a.x=this._viscousLimit(a.x,l.min.x)),a.y<l.min.y&&(a.y=this._viscousLimit(a.y,l.min.y)),a.x>l.max.x&&(a.x=this._viscousLimit(a.x,l.max.x)),a.y>l.max.y&&(a.y=this._viscousLimit(a.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,l=Math.round(a/2),O=this._initialWorldOffset,q=this._draggable._newPos.x,ee=(q-l+O)%a+l-O,me=(q+l+O)%a-l-O,je=Math.abs(ee+O)<Math.abs(me+O)?ee:me;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=je},_onDragEnd:function(a){var l=this._map,O=l.options,q=!O.inertia||a.noInertia||this._times.length<2;if(l.fire("dragend",a),q)l.fire("moveend");else{this._prunePositions(+new Date);var ee=this._lastPos.subtract(this._positions[0]),me=(this._lastTime-this._times[0])/1e3,je=O.easeLinearity,st=ee.multiplyBy(je/me),dt=st.distanceTo([0,0]),Gt=Math.min(O.inertiaMaxSpeed,dt),Mn=st.multiplyBy(Gt/dt),Un=Gt/(O.inertiaDeceleration*je),Yn=Mn.multiplyBy(-Un/2).round();!Yn.x&&!Yn.y?l.fire("moveend"):(Yn=l._limitOffset(Yn,l.options.maxBounds),x(function(){l.panBy(Yn,{duration:Un,easeLinearity:je,noMoveStart:!0,animate:!0})}))}}});Dr.addInitHook("addHandler","dragging",sc),Dr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Fo=ii.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),yr(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ta(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,l=document.documentElement,O=a.scrollTop||l.scrollTop,q=a.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(q,O)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var l=this._panKeys={},O=this.keyCodes,q,ee;for(q=0,ee=O.left.length;q<ee;q++)l[O.left[q]]=[-1*a,0];for(q=0,ee=O.right.length;q<ee;q++)l[O.right[q]]=[a,0];for(q=0,ee=O.down.length;q<ee;q++)l[O.down[q]]=[0,a];for(q=0,ee=O.up.length;q<ee;q++)l[O.up[q]]=[0,-1*a]},_setZoomDelta:function(a){var l=this._zoomKeys={},O=this.keyCodes,q,ee;for(q=0,ee=O.zoomIn.length;q<ee;q++)l[O.zoomIn[q]]=a;for(q=0,ee=O.zoomOut.length;q<ee;q++)l[O.zoomOut[q]]=-a},_addHooks:function(){yr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ta(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var l=a.keyCode,O=this._map,q;if(l in this._panKeys){if(!O._panAnim||!O._panAnim._inProgress)if(q=this._panKeys[l],a.shiftKey&&(q=X(q).multiplyBy(3)),O.options.maxBounds&&(q=O._limitOffset(X(q),O.options.maxBounds)),O.options.worldCopyJump){var ee=O.wrapLatLng(O.unproject(O.project(O.getCenter()).add(q)));O.panTo(ee)}else O.panBy(q)}else if(l in this._zoomKeys)O.setZoom(O.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&O._popup&&O._popup.options.closeOnEscapeKey)O.closePopup();else return;Oi(a)}}});Dr.addInitHook("addHandler","keyboard",Fo),Dr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var es=ii.extend({addHooks:function(){yr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ta(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var l=Ws(a),O=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var q=Math.max(O-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(B(this._performZoom,this),q),Oi(a)},_performZoom:function(){var a=this._map,l=a.getZoom(),O=this._map.options.zoomSnap||0;a._stop();var q=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ee=4*Math.log(2/(1+Math.exp(-Math.abs(q))))/Math.LN2,me=O?Math.ceil(ee/O)*O:ee,je=a._limitZoom(l+(this._delta>0?me:-me))-l;this._delta=0,this._startTime=null,je&&(a.options.scrollWheelZoom==="center"?a.setZoom(l+je):a.setZoomAround(this._lastMousePos,l+je))}});Dr.addInitHook("addHandler","scrollWheelZoom",es);var No=600;Dr.mergeOptions({tapHold:$t.touchNative&&$t.safari&&$t.mobile,tapTolerance:15});var po=ii.extend({addHooks:function(){yr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ta(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var l=a.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(B(function(){this._cancel(),this._isTapValid()&&(yr(document,"touchend",Da),yr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),No),yr(document,"touchend touchcancel contextmenu",this._cancel,this),yr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){ta(document,"touchend",Da),ta(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),ta(document,"touchend touchcancel contextmenu",this._cancel,this),ta(document,"touchmove",this._onMove,this)},_onMove:function(a){var l=a.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,l){var O=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});O._simulated=!0,l.target.dispatchEvent(O)}});Dr.addInitHook("addHandler","tapHold",po),Dr.mergeOptions({touchZoom:$t.touch,bounceAtZoomLimits:!0});var ts=ii.extend({addHooks:function(){An(this._map._container,"leaflet-touch-zoom"),yr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){jr(this._map._container,"leaflet-touch-zoom"),ta(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var l=this._map;if(!(!a.touches||a.touches.length!==2||l._animatingZoom||this._zooming)){var O=l.mouseEventToContainerPoint(a.touches[0]),q=l.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(O.add(q)._divideBy(2))),this._startDist=O.distanceTo(q),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),yr(document,"touchmove",this._onTouchMove,this),yr(document,"touchend touchcancel",this._onTouchEnd,this),Da(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var l=this._map,O=l.mouseEventToContainerPoint(a.touches[0]),q=l.mouseEventToContainerPoint(a.touches[1]),ee=O.distanceTo(q)/this._startDist;if(this._zoom=l.getScaleZoom(ee,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&ee<1||this._zoom>l.getMaxZoom()&&ee>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,ee===1)return}else{var me=O._add(q)._divideBy(2)._subtract(this._centerPoint);if(ee===1&&me.x===0&&me.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(me),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var je=B(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=x(je,this,!0),Da(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),ta(document,"touchmove",this._onTouchMove,this),ta(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Dr.addInitHook("addHandler","touchZoom",ts),Dr.BoxZoom=Po,Dr.DoubleClickZoom=Ts,Dr.Drag=sc,Dr.Keyboard=Fo,Dr.ScrollWheelZoom=es,Dr.TapHold=po,Dr.TouchZoom=ts,i.Bounds=Ee,i.Browser=$t,i.CRS=pe,i.Canvas=lo,i.Circle=Vt,i.CircleMarker=_t,i.Class=M,i.Control=ni,i.DivIcon=co,i.DivOverlay=qi,i.DomEvent=Xo,i.DomUtil=Io,i.Draggable=kr,i.Evented=G,i.FeatureGroup=Ra,i.GeoJSON=Qr,i.GridLayer=ki,i.Handler=ii,i.Icon=$,i.ImageOverlay=Vi,i.LatLng=Pe,i.LatLngBounds=xe,i.Layer=Cn,i.LayerGroup=Dn,i.LineUtil=ft,i.Map=Dr,i.Marker=rt,i.Mixin=Dc,i.Path=Dt,i.Point=Z,i.PolyUtil=$s,i.Polygon=Fr,i.Polyline=vn,i.Popup=Cs,i.PosAnimation=Di,i.Projection=rc,i.Rectangle=zc,i.Renderer=Zi,i.SVG=ps,i.SVGOverlay=ks,i.TileLayer=ds,i.Tooltip=ko,i.Transformation=qe,i.Util=I,i.VideoOverlay=Ro,i.bind=B,i.bounds=Se,i.canvas=vi,i.circle=zn,i.circleMarker=Tn,i.control=Es,i.divIcon=Co,i.extend=g,i.featureGroup=te,i.geoJSON=ac,i.geoJson=zo,i.gridLayer=fi,i.icon=Y,i.imageOverlay=Bs,i.latLng=He,i.latLngBounds=_e,i.layerGroup=Bo,i.map=Hi,i.marker=St,i.point=X,i.polygon=ia,i.polyline=Yr,i.popup=wc,i.rectangle=_a,i.setOptions=h,i.stamp=R,i.svg=uo,i.svgOverlay=Uo,i.tileLayer=ri,i.tooltip=Ho,i.transformation=nt,i.version=o,i.videoOverlay=ic;var Ps=window.L;i.noConflict=function(){return window.L=Ps,this},window.L=i})}(Bd,Bd.exports)),Bd.exports}var rb=mR();function hR(e,r,i){return Object.freeze({instance:e,context:r,container:i})}function fR(e,r){return r==null?function(o,g){const N=ne.useRef(void 0);return N.current||(N.current=e(o,g)),N}:function(o,g){const N=ne.useRef(void 0);N.current||(N.current=e(o,g));const B=ne.useRef(o),{instance:j}=N.current;return ne.useEffect(function(){B.current!==o&&(r(j,o,B.current),B.current=o)},[j,o,r]),N}}function gR(e,r){ne.useEffect(function(){return(r.layerContainer??r.map).addLayer(e.instance),function(){r.layerContainer?.removeLayer(e.instance),r.map.removeLayer(e.instance)}},[r,e])}function vR(e){return function(i){const o=tb(),g=e(nb(i,o),o);return oR(o.map,i.attribution),dR(g.current,i.eventHandlers),gR(g.current,o),g}}function yR(e,r){const i=fR(e,r),o=vR(i);return uR(o)}function _R(e,r,i){const{opacity:o,zIndex:g}=r;o!=null&&o!==i.opacity&&e.setOpacity(o),g!=null&&g!==i.zIndex&&e.setZIndex(g)}function bR(){return tb().map}function wR({bounds:e,boundsOptions:r,center:i,children:o,className:g,id:N,placeholder:B,style:j,whenReady:R,zoom:d,...S},y){const[b]=ne.useState({className:g,id:N,style:j}),[T,f]=ne.useState(null),h=ne.useRef(void 0);ne.useImperativeHandle(y,()=>T?.map??null,[T]);const k=ne.useCallback(H=>{if(H!==null&&!h.current){const m=new rb.Map(H,S);h.current=m,i!=null&&d!=null?m.setView(i,d):e!=null&&m.fitBounds(e,r),R!=null&&m.whenReady(R),f(lR(m))}},[]);ne.useEffect(()=>()=>{T?.map.remove()},[T]);const E=T?c.createElement(eb,{value:T},o):B??null;return c.createElement("div",{...b,ref:k},E)}const ER=ne.forwardRef(wR),SR=yR(function({url:r,...i},o){const g=new rb.TileLayer(r,nb(i,o));return hR(g,o)},function(r,i,o){_R(r,i,o);const{url:g}=i;g!=null&&g!==o.url&&r.setUrl(g)});var ab={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},F0=c.createContext&&c.createContext(ab),xR=["attr","size","title"];function RR(e,r){if(e==null)return{};var i=kR(e,r),o,g;if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(e);for(g=0;g<N.length;g++)o=N[g],!(r.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function kR(e,r){if(e==null)return{};var i={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(r.indexOf(o)>=0)continue;i[o]=e[o]}return i}function hm(){return hm=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},hm.apply(this,arguments)}function V0(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),i.push.apply(i,o)}return i}function fm(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?V0(Object(i),!0).forEach(function(o){CR(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V0(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function CR(e,r,i){return r=TR(r),r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function TR(e){var r=PR(e,"string");return typeof r=="symbol"?r:r+""}function PR(e,r){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,r);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ib(e){return e&&e.map((r,i)=>c.createElement(r.tag,fm({key:i},r.attr),ib(r.child)))}function NR(e){return r=>c.createElement(AR,hm({attr:fm({},e.attr)},r),ib(e.child))}function AR(e){var r=i=>{var{attr:o,size:g,title:N}=e,B=RR(e,xR),j=g||i.size||"1em",R;return i.className&&(R=i.className),e.className&&(R=(R?R+" ":"")+e.className),c.createElement("svg",hm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},i.attr,o,B,{className:R,style:fm(fm({color:e.color||i.color},i.style),e.style),height:j,width:j,xmlns:"http://www.w3.org/2000/svg"}),N&&c.createElement("title",null,N),e.children)};return F0!==void 0?c.createElement(F0.Consumer,null,i=>r(i)):r(ab)}function OR(e){return NR({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(e)}function DR({coords:e}){const r=bR();return c.useEffect(()=>{e&&r.flyTo(e,12,{duration:1.5})},[e,r]),null}const q0=[24.8607,67.0011],MR=()=>{const[e,r]=ne.useState(""),[i,o]=ne.useState(null),[g,N]=ne.useState(!1),B=(j,R)=>{N(!0),r(j),setTimeout(()=>{o(R),N(!1)},1200)};return c.createElement(c.Fragment,null,c.createElement("div",{className:"w-full flex flex-col items-center justify-center py-4 px-4 bg-gradient-to-r from-[#014e78] via-[#009688] to-[#43cea2] text-white shadow-lg mb-2 relative overflow-hidden"},c.createElement("div",{className:"absolute left-4 top-4 opacity-20 text-7xl pointer-events-none select-none"},c.createElement(OR,null)),c.createElement("div",{className:"flex items-center gap-4 mb-2 z-10"},c.createElement("p",{className:"text-2xl bg-white text-[#014e78] w-14 h-14 flex justify-center items-center rounded-full font-extrabold shadow-lg border-4 border-[#43cea2]"},"G"),c.createElement("p",{className:"text-lg sm:text-xl font-semibold"},"Hello, Guest!")),c.createElement("h2",{className:"text-xl sm:text-3xl font-extrabold tracking-tight text-center z-10 drop-shadow-lg"},"Find the ",c.createElement("span",{className:"text-[#ffe082]"},"Best Doctor")," Near You")),c.createElement("section",{className:"relative w-full min-h-[400px] mt-0 overflow-hidden"},g&&c.createElement("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-white/80 backdrop-blur-sm"},c.createElement("div",{className:"w-12 h-12 border-4 border-t-transparent border-blue-500 rounded-full animate-spin"})),c.createElement("div",{className:"absolute inset-0 z-0"},c.createElement(ER,{center:i||q0,zoom:12,style:{height:"100%",width:"100%"},zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,attributionControl:!1},c.createElement(SR,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),c.createElement(DR,{coords:i||q0})),c.createElement("div",{className:"absolute inset-0 bg-white/70 backdrop-blur-sm z-10"})),c.createElement("div",{className:"relative h-[400px] z-20 flex flex-col items-center justify-center max-w-2xl mx-auto py-12 px-6"},c.createElement(sR,{onCitySelect:B}))),!e&&c.createElement("div",{className:"w-full flex justify-center mt-6"},c.createElement("h2",{className:"text-lg font-bold"},"How can we help you today?")))},LR=()=>c.createElement("section",{className:"py-16 bg-gray-50"},c.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"},"Common Health Conditions"),c.createElement("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto"},"Find expert doctors for the most common health conditions and symptoms")),c.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4"},Px.map((e,r)=>c.createElement(Ki,{key:r,to:e.href,className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 p-6 text-center group"},c.createElement("div",{className:"text-3xl mb-3"},e.icon),c.createElement("h3",{className:"text-sm font-medium text-gray-900 mb-2 group-hover:text-blue-600"},e.title),c.createElement("p",{className:"text-xs text-gray-500"},e.description)))))),IR=()=>c.createElement("section",{className:"py-16 bg-white"},c.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"},"Why Choose QuickMed?"),c.createElement("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto"},"Pakistan's most trusted healthcare platform with verified doctors and secure services")),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"},kx.map((e,r)=>c.createElement("div",{key:r,className:"text-center"},c.createElement("div",{className:"text-4xl mb-4"},e.icon),c.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},e.title),c.createElement("p",{className:"text-gray-600 mb-3"},e.description),c.createElement("div",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},e.stat)))))),jR=()=>c.createElement("section",{className:"py-16 bg-emerald-700 text-white"},c.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold mb-4"},"Trusted by Millions"),c.createElement("p",{className:"text-xl text-emerald-100"},"Join Pakistan's largest healthcare community")),c.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8"},Nx.map((e,r)=>c.createElement("div",{key:r,className:"bg-emerald-800 bg-opacity-80 rounded-xl shadow-md p-8 flex flex-col items-center transition-transform duration-200 hover:scale-105"},c.createElement("div",{className:"text-4xl md:text-5xl font-bold mb-2 text-emerald-200 drop-shadow"},e.number),c.createElement("h3",{className:"text-lg md:text-xl font-semibold mb-2 text-white"},e.label),c.createElement("p",{className:"text-emerald-100 text-sm md:text-base text-center"},e.description)))))),BR=()=>c.createElement("section",{className:"py-16 bg-emerald-50"},c.createElement("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-emerald-900 mb-4"},"What Our Patients Say"),c.createElement("p",{className:"text-lg text-emerald-700 max-w-2xl mx-auto"},"Read reviews from thousands of satisfied patients across Pakistan"),c.createElement("div",{className:"flex items-center justify-center mt-4"},c.createElement("div",{className:"flex items-center"},c.createElement("span",{className:"text-yellow-500 text-2xl"},"★★★★★"),c.createElement("span",{className:"ml-2 text-lg font-semibold text-emerald-900"},"4.5"),c.createElement("span",{className:"ml-1 text-emerald-700"},"out of 5")))),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8"},Ax.map((e,r)=>c.createElement("div",{key:r,className:"bg-white rounded-xl p-8 shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex flex-col justify-between"},c.createElement("div",{className:"flex items-center mb-4"},c.createElement("div",{className:"w-14 h-14 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-700 font-bold text-xl border-2 border-emerald-200 shadow-sm"},e.name.charAt(0)),c.createElement("div",{className:"ml-4"},c.createElement("h3",{className:"font-semibold text-emerald-900"},e.name),c.createElement("div",{className:"flex items-center"},c.createElement("div",{className:"flex text-yellow-500"},[...Array(5)].map((i,o)=>c.createElement("span",{key:o,className:o<e.rating?"text-yellow-500":"text-gray-300"},"★")))))),c.createElement("p",{className:"text-emerald-800 mb-4 italic text-base"},'"',e.review,'"'),c.createElement("div",{className:"flex items-center justify-between mt-auto"},c.createElement("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium shadow-sm ${e.status==="Good"?"bg-emerald-100 text-emerald-800":e.status==="Satisfied"?"bg-emerald-200 text-emerald-900":"bg-gray-100 text-gray-800"}`},e.status),c.createElement("span",{className:"text-sm text-emerald-500 font-medium"},"Verified Patient"))))))),Om=({doctor:e})=>{const r=B=>Array.isArray(B)?B.join(", "):B||"General Medicine",i=B=>B&&typeof B=="object"?B.average||0:B||0,o=B=>B&&typeof B=="object"&&B.count||0,N=((B,j)=>`${B.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}-${j}`)(e.name,e._id);return c.createElement("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl hover:scale-105 border-t-4 border-emerald-500 transition-all duration-300 p-6 flex flex-col justify-between"},c.createElement("div",{className:"text-center mb-4"},c.createElement("img",{src:e.profilePicture||"https://ui-avatars.com/api/?name="+encodeURIComponent(e.name)+"&background=random",alt:e.name,className:"w-20 h-20 rounded-full mx-auto mb-3 object-cover border-4 border-emerald-100 shadow"}),c.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-1"},e.name),c.createElement("p",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-2 py-1 rounded-full mb-1"},r(e.speciality)),c.createElement("p",{className:"text-sm text-gray-500"},e.experience||0," years experience")),c.createElement("div",{className:"space-y-2 mb-4"},c.createElement("div",{className:"flex items-center justify-between text-sm"},c.createElement("span",{className:"text-gray-600"},"Rating:"),c.createElement("div",{className:"flex items-center gap-1 text-yellow-500"},c.createElement("span",null,"★"),c.createElement("span",{className:"font-medium"},i(e.rating)),c.createElement("span",{className:"text-gray-400 ml-1"},"(",o(e.rating),")"))),c.createElement("div",{className:"flex items-center justify-between text-sm"},c.createElement("span",{className:"text-gray-600"},"Hospital:"),c.createElement("div",{className:"flex items-center gap-1 text-gray-500 text-xs"},"🏥 ",e.hospital||"Not specified")),c.createElement("div",{className:"flex items-center justify-between text-sm"},c.createElement("span",{className:"text-gray-600"},"Location:"),c.createElement("div",{className:"flex items-center gap-1 text-gray-500 text-xs"},"📍"," ",e.fullAddress?e.fullAddress.split(",").slice(-2).join(", "):"Not specified")),c.createElement("div",{className:"flex items-center justify-between text-sm"},c.createElement("span",{className:"text-gray-600"},"Fee:"),c.createElement("span",{className:"font-medium text-green-600"},"Rs. ",e.fee||"Not specified")),e.mainDegree&&c.createElement("div",{className:"flex items-center justify-between text-sm"},c.createElement("span",{className:"text-gray-600"},"Degree:"),c.createElement("span",{className:"text-gray-500"},e.mainDegree))),c.createElement("div",{className:"space-y-2"},c.createElement("div",{className:"text-xs text-center"},c.createElement("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${e.availability?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},e.availability?"Available":"Not Available")),c.createElement("div",{className:"grid grid-cols-2 gap-2"},c.createElement(Ki,{to:`/doctor/profile/${N}`,className:"px-3 py-2 text-sm border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 text-center"},"View Profile"),c.createElement(Ki,{to:`/doctor/book/${N}`,className:"px-3 py-2 text-sm bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 text-center"},"Book Now"))))},zR=()=>{const{allDoctors:e,loading:r}=yc();return r?c.createElement("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"},"Top Rated Doctors"),c.createElement("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto"},"Consult with Pakistan's best doctors from the comfort of your home")),c.createElement("div",{className:"flex justify-center"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"}))):!e||e.length===0?c.createElement("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"},"Top Rated Doctors"),c.createElement("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto"},"Consult with Pakistan's best doctors from the comfort of your home")),c.createElement("div",{className:"text-center text-gray-500"},c.createElement("p",null,"No doctors available at the moment."))):c.createElement("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pb-5"},c.createElement("div",{className:"text-center mb-12"},c.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"},"Top Rated Doctors"),c.createElement("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto"},"Consult with Pakistan's best doctors from the comfort of your home")),c.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},e.map(i=>c.createElement(Om,{key:i._id,doctor:i}))))},UR=()=>c.createElement("main",null,c.createElement(MR,null),c.createElement(LR,null),c.createElement(IR,null),c.createElement(zR,null),c.createElement(jR,null),c.createElement(BR,null)),HR=(e,r=!1)=>{const i=["Backspace","ArrowLeft","ArrowRight","Delete","Tab"],o=/^[0-9]$/.test(e.key),g=r&&e.key==="-";return o||g||i.includes(e.key)},ra=({label:e,type:r="text",name:i,error:o,className:g="",onlyNumbers:N=!1,allowDashes:B=!1,checked:j,required:R=!1,onBlur:d,...S})=>{const y=b=>{N&&!HR(b,B)&&b.preventDefault()};return c.createElement("div",null,e&&c.createElement("label",{htmlFor:i,className:"block text-emerald-700 font-medium mb-1"},e),c.createElement("input",{id:i,name:i,type:r,required:R,onKeyDown:y,className:`w-full px-3 py-2 border ${o?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500 ${g}`,inputMode:N?"numeric":void 0,pattern:N?B?"[0-9-]*":"[0-9]*":void 0,...S}),o&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},o))};var tp=e=>e.type==="checkbox",Gl=e=>e instanceof Date,eo=e=>e==null;const sb=e=>typeof e=="object";var Ii=e=>!eo(e)&&!Array.isArray(e)&&sb(e)&&!Gl(e),FR=e=>Ii(e)&&e.target?tp(e.target)?e.target.checked:e.target.value:e,VR=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,qR=(e,r)=>e.has(VR(r)),ZR=e=>{const r=e.constructor&&e.constructor.prototype;return Ii(r)&&r.hasOwnProperty("isPrototypeOf")},tg=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function _s(e){let r;const i=Array.isArray(e),o=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(!(tg&&(e instanceof Blob||o))&&(i||Ii(e)))if(r=i?[]:Object.create(Object.getPrototypeOf(e)),!i&&!ZR(e))r=e;else for(const g in e)e.hasOwnProperty(g)&&(r[g]=_s(e[g]));else return e;return r}var Dm=e=>/^\w*$/.test(e),Gi=e=>e===void 0,ng=e=>Array.isArray(e)?e.filter(Boolean):[],rg=e=>ng(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ir=(e,r,i)=>{if(!r||!Ii(e))return i;const o=(Dm(r)?[r]:rg(r)).reduce((g,N)=>eo(g)?g:g[N],e);return Gi(o)||o===e?Gi(e[r])?i:e[r]:o},Pc=e=>typeof e=="boolean",Ya=(e,r,i)=>{let o=-1;const g=Dm(r)?[r]:rg(r),N=g.length,B=N-1;for(;++o<N;){const j=g[o];let R=i;if(o!==B){const d=e[j];R=Ii(d)||Array.isArray(d)?d:isNaN(+g[o+1])?{}:[]}if(j==="__proto__"||j==="constructor"||j==="prototype")return;e[j]=R,e=e[j]}};const Z0={BLUR:"blur",FOCUS_OUT:"focusout"},pc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Jc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},WR=c.createContext(null);WR.displayName="HookFormContext";var $R=(e,r,i,o=!0)=>{const g={defaultValues:r._defaultValues};for(const N in e)Object.defineProperty(g,N,{get:()=>{const B=N;return r._proxyFormState[B]!==pc.all&&(r._proxyFormState[B]=!o||pc.all),e[B]}});return g};const GR=typeof window<"u"?c.useLayoutEffect:c.useEffect;var Ac=e=>typeof e=="string",KR=(e,r,i,o,g)=>Ac(e)?(o&&r.watch.add(e),ir(i,e,g)):Array.isArray(e)?e.map(N=>(o&&r.watch.add(N),ir(i,N))):(o&&(r.watchAll=!0),i),kf=e=>eo(e)||!sb(e);function Tl(e,r,i=new WeakSet){if(kf(e)||kf(r))return e===r;if(Gl(e)&&Gl(r))return e.getTime()===r.getTime();const o=Object.keys(e),g=Object.keys(r);if(o.length!==g.length)return!1;if(i.has(e)||i.has(r))return!0;i.add(e),i.add(r);for(const N of o){const B=e[N];if(!g.includes(N))return!1;if(N!=="ref"){const j=r[N];if(Gl(B)&&Gl(j)||Ii(B)&&Ii(j)||Array.isArray(B)&&Array.isArray(j)?!Tl(B,j,i):B!==j)return!1}}return!0}var ag=(e,r,i,o,g)=>r?{...i[e],types:{...i[e]&&i[e].types?i[e].types:{},[o]:g||!0}}:{},zd=e=>Array.isArray(e)?e:[e],W0=()=>{let e=[];return{get observers(){return e},next:g=>{for(const N of e)N.next&&N.next(g)},subscribe:g=>(e.push(g),{unsubscribe:()=>{e=e.filter(N=>N!==g)}}),unsubscribe:()=>{e=[]}}},vo=e=>Ii(e)&&!Object.keys(e).length,ig=e=>e.type==="file",mc=e=>typeof e=="function",gm=e=>{if(!tg)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},ob=e=>e.type==="select-multiple",sg=e=>e.type==="radio",YR=e=>sg(e)||tp(e),ef=e=>gm(e)&&e.isConnected;function QR(e,r){const i=r.slice(0,-1).length;let o=0;for(;o<i;)e=Gi(e)?o++:e[r[o++]];return e}function JR(e){for(const r in e)if(e.hasOwnProperty(r)&&!Gi(e[r]))return!1;return!0}function $i(e,r){const i=Array.isArray(r)?r:Dm(r)?[r]:rg(r),o=i.length===1?e:QR(e,i),g=i.length-1,N=i[g];return o&&delete o[N],g!==0&&(Ii(o)&&vo(o)||Array.isArray(o)&&JR(o))&&$i(e,i.slice(0,-1)),e}var cb=e=>{for(const r in e)if(mc(e[r]))return!0;return!1};function vm(e,r={}){const i=Array.isArray(e);if(Ii(e)||i)for(const o in e)Array.isArray(e[o])||Ii(e[o])&&!cb(e[o])?(r[o]=Array.isArray(e[o])?[]:{},vm(e[o],r[o])):eo(e[o])||(r[o]=!0);return r}function lb(e,r,i){const o=Array.isArray(e);if(Ii(e)||o)for(const g in e)Array.isArray(e[g])||Ii(e[g])&&!cb(e[g])?Gi(r)||kf(i[g])?i[g]=Array.isArray(e[g])?vm(e[g],[]):{...vm(e[g])}:lb(e[g],eo(r)?{}:r[g],i[g]):i[g]=!Tl(e[g],r[g]);return i}var Dd=(e,r)=>lb(e,r,vm(r));const $0={value:!1,isValid:!1},G0={value:!0,isValid:!0};var ub=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(i=>i&&i.checked&&!i.disabled).map(i=>i.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Gi(e[0].attributes.value)?Gi(e[0].value)||e[0].value===""?G0:{value:e[0].value,isValid:!0}:G0:$0}return $0},db=(e,{valueAsNumber:r,valueAsDate:i,setValueAs:o})=>Gi(e)?e:r?e===""?NaN:e&&+e:i&&Ac(e)?new Date(e):o?o(e):e;const K0={isValid:!1,value:null};var pb=e=>Array.isArray(e)?e.reduce((r,i)=>i&&i.checked&&!i.disabled?{isValid:!0,value:i.value}:r,K0):K0;function Y0(e){const r=e.ref;return ig(r)?r.files:sg(r)?pb(e.refs).value:ob(r)?[...r.selectedOptions].map(({value:i})=>i):tp(r)?ub(e.refs).value:db(Gi(r.value)?e.ref.value:r.value,e)}var XR=(e,r,i,o)=>{const g={};for(const N of e){const B=ir(r,N);B&&Ya(g,N,B._f)}return{criteriaMode:i,names:[...e],fields:g,shouldUseNativeValidation:o}},ym=e=>e instanceof RegExp,Md=e=>Gi(e)?e:ym(e)?e.source:Ii(e)?ym(e.value)?e.value.source:e.value:e,Q0=e=>({isOnSubmit:!e||e===pc.onSubmit,isOnBlur:e===pc.onBlur,isOnChange:e===pc.onChange,isOnAll:e===pc.all,isOnTouch:e===pc.onTouched});const J0="AsyncFunction";var ek=e=>!!e&&!!e.validate&&!!(mc(e.validate)&&e.validate.constructor.name===J0||Ii(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===J0)),tk=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),X0=(e,r,i)=>!i&&(r.watchAll||r.watch.has(e)||[...r.watch].some(o=>e.startsWith(o)&&/^\.\w+/.test(e.slice(o.length))));const Ud=(e,r,i,o)=>{for(const g of i||Object.keys(e)){const N=ir(e,g);if(N){const{_f:B,...j}=N;if(B){if(B.refs&&B.refs[0]&&r(B.refs[0],g)&&!o)return!0;if(B.ref&&r(B.ref,B.name)&&!o)return!0;if(Ud(j,r))break}else if(Ii(j)&&Ud(j,r))break}}};function ey(e,r,i){const o=ir(e,i);if(o||Dm(i))return{error:o,name:i};const g=i.split(".");for(;g.length;){const N=g.join("."),B=ir(r,N),j=ir(e,N);if(B&&!Array.isArray(B)&&i!==N)return{name:i};if(j&&j.type)return{name:N,error:j};if(j&&j.root&&j.root.type)return{name:`${N}.root`,error:j.root};g.pop()}return{name:i}}var nk=(e,r,i,o)=>{i(e);const{name:g,...N}=e;return vo(N)||Object.keys(N).length>=Object.keys(r).length||Object.keys(N).find(B=>r[B]===(!o||pc.all))},rk=(e,r,i)=>!e||!r||e===r||zd(e).some(o=>o&&(i?o===r:o.startsWith(r)||r.startsWith(o))),ak=(e,r,i,o,g)=>g.isOnAll?!1:!i&&g.isOnTouch?!(r||e):(i?o.isOnBlur:g.isOnBlur)?!e:(i?o.isOnChange:g.isOnChange)?e:!0,ik=(e,r)=>!ng(ir(e,r)).length&&$i(e,r),sk=(e,r,i)=>{const o=zd(ir(e,i));return Ya(o,"root",r[i]),Ya(e,i,o),e},cm=e=>Ac(e);function ty(e,r,i="validate"){if(cm(e)||Array.isArray(e)&&e.every(cm)||Pc(e)&&!e)return{type:i,message:cm(e)?e:"",ref:r}}var Lu=e=>Ii(e)&&!ym(e)?e:{value:e,message:""},ny=async(e,r,i,o,g,N)=>{const{ref:B,refs:j,required:R,maxLength:d,minLength:S,min:y,max:b,pattern:T,validate:f,name:h,valueAsNumber:k,mount:E}=e._f,H=ir(i,h);if(!E||r.has(h))return{};const m=j?j[0]:B,P=A=>{g&&m.reportValidity&&(m.setCustomValidity(Pc(A)?"":A||""),m.reportValidity())},v={},U=sg(B),C=tp(B),_=U||C,w=(k||ig(B))&&Gi(B.value)&&Gi(H)||gm(B)&&B.value===""||H===""||Array.isArray(H)&&!H.length,p=ag.bind(null,h,o,v),x=(A,I,M,F=Jc.maxLength,z=Jc.minLength)=>{const G=A?I:M;v[h]={type:A?F:z,message:G,ref:B,...p(A?F:z,G)}};if(N?!Array.isArray(H)||!H.length:R&&(!_&&(w||eo(H))||Pc(H)&&!H||C&&!ub(j).isValid||U&&!pb(j).isValid)){const{value:A,message:I}=cm(R)?{value:!!R,message:R}:Lu(R);if(A&&(v[h]={type:Jc.required,message:I,ref:m,...p(Jc.required,I)},!o))return P(I),v}if(!w&&(!eo(y)||!eo(b))){let A,I;const M=Lu(b),F=Lu(y);if(!eo(H)&&!isNaN(H)){const z=B.valueAsNumber||H&&+H;eo(M.value)||(A=z>M.value),eo(F.value)||(I=z<F.value)}else{const z=B.valueAsDate||new Date(H),G=X=>new Date(new Date().toDateString()+" "+X),Z=B.type=="time",ce=B.type=="week";Ac(M.value)&&H&&(A=Z?G(H)>G(M.value):ce?H>M.value:z>new Date(M.value)),Ac(F.value)&&H&&(I=Z?G(H)<G(F.value):ce?H<F.value:z<new Date(F.value))}if((A||I)&&(x(!!A,M.message,F.message,Jc.max,Jc.min),!o))return P(v[h].message),v}if((d||S)&&!w&&(Ac(H)||N&&Array.isArray(H))){const A=Lu(d),I=Lu(S),M=!eo(A.value)&&H.length>+A.value,F=!eo(I.value)&&H.length<+I.value;if((M||F)&&(x(M,A.message,I.message),!o))return P(v[h].message),v}if(T&&!w&&Ac(H)){const{value:A,message:I}=Lu(T);if(ym(A)&&!H.match(A)&&(v[h]={type:Jc.pattern,message:I,ref:B,...p(Jc.pattern,I)},!o))return P(I),v}if(f){if(mc(f)){const A=await f(H,i),I=ty(A,m);if(I&&(v[h]={...I,...p(Jc.validate,I.message)},!o))return P(I.message),v}else if(Ii(f)){let A={};for(const I in f){if(!vo(A)&&!o)break;const M=ty(await f[I](H,i),m,I);M&&(A={...M,...p(I,M.message)},P(M.message),o&&(v[h]=A))}if(!vo(A)&&(v[h]={ref:m,...A},!o))return v}}return P(!0),v};const ok={mode:pc.onSubmit,reValidateMode:pc.onChange,shouldFocusError:!0};function ck(e={}){let r={...ok,...e},i={submitCount:0,isDirty:!1,isReady:!1,isLoading:mc(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},o={},g=Ii(r.defaultValues)||Ii(r.values)?_s(r.defaultValues||r.values)||{}:{},N=r.shouldUnregister?{}:_s(g),B={action:!1,mount:!1,watch:!1},j={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},R,d=0;const S={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...S};const b={array:W0(),state:W0()},T=r.criteriaMode===pc.all,f=Ie=>Be=>{clearTimeout(d),d=setTimeout(Ie,Be)},h=async Ie=>{if(!r.disabled&&(S.isValid||y.isValid||Ie)){const Be=r.resolver?vo((await C()).errors):await w(o,!0);Be!==i.isValid&&b.state.next({isValid:Be})}},k=(Ie,Be)=>{!r.disabled&&(S.isValidating||S.validatingFields||y.isValidating||y.validatingFields)&&((Ie||Array.from(j.mount)).forEach(Ye=>{Ye&&(Be?Ya(i.validatingFields,Ye,Be):$i(i.validatingFields,Ye))}),b.state.next({validatingFields:i.validatingFields,isValidating:!vo(i.validatingFields)}))},E=(Ie,Be=[],Ye,Qt,Ft=!0,xt=!0)=>{if(Qt&&Ye&&!r.disabled){if(B.action=!0,xt&&Array.isArray(ir(o,Ie))){const pn=Ye(ir(o,Ie),Qt.argA,Qt.argB);Ft&&Ya(o,Ie,pn)}if(xt&&Array.isArray(ir(i.errors,Ie))){const pn=Ye(ir(i.errors,Ie),Qt.argA,Qt.argB);Ft&&Ya(i.errors,Ie,pn),ik(i.errors,Ie)}if((S.touchedFields||y.touchedFields)&&xt&&Array.isArray(ir(i.touchedFields,Ie))){const pn=Ye(ir(i.touchedFields,Ie),Qt.argA,Qt.argB);Ft&&Ya(i.touchedFields,Ie,pn)}(S.dirtyFields||y.dirtyFields)&&(i.dirtyFields=Dd(g,N)),b.state.next({name:Ie,isDirty:x(Ie,Be),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else Ya(N,Ie,Be)},H=(Ie,Be)=>{Ya(i.errors,Ie,Be),b.state.next({errors:i.errors})},m=Ie=>{i.errors=Ie,b.state.next({errors:i.errors,isValid:!1})},P=(Ie,Be,Ye,Qt)=>{const Ft=ir(o,Ie);if(Ft){const xt=ir(N,Ie,Gi(Ye)?ir(g,Ie):Ye);Gi(xt)||Qt&&Qt.defaultChecked||Be?Ya(N,Ie,Be?xt:Y0(Ft._f)):M(Ie,xt),B.mount&&h()}},v=(Ie,Be,Ye,Qt,Ft)=>{let xt=!1,pn=!1;const Ln={name:Ie};if(!r.disabled){if(!Ye||Qt){(S.isDirty||y.isDirty)&&(pn=i.isDirty,i.isDirty=Ln.isDirty=x(),xt=pn!==Ln.isDirty);const zt=Tl(ir(g,Ie),Be);pn=!!ir(i.dirtyFields,Ie),zt?$i(i.dirtyFields,Ie):Ya(i.dirtyFields,Ie,!0),Ln.dirtyFields=i.dirtyFields,xt=xt||(S.dirtyFields||y.dirtyFields)&&pn!==!zt}if(Ye){const zt=ir(i.touchedFields,Ie);zt||(Ya(i.touchedFields,Ie,Ye),Ln.touchedFields=i.touchedFields,xt=xt||(S.touchedFields||y.touchedFields)&&zt!==Ye)}xt&&Ft&&b.state.next(Ln)}return xt?Ln:{}},U=(Ie,Be,Ye,Qt)=>{const Ft=ir(i.errors,Ie),xt=(S.isValid||y.isValid)&&Pc(Be)&&i.isValid!==Be;if(r.delayError&&Ye?(R=f(()=>H(Ie,Ye)),R(r.delayError)):(clearTimeout(d),R=null,Ye?Ya(i.errors,Ie,Ye):$i(i.errors,Ie)),(Ye?!Tl(Ft,Ye):Ft)||!vo(Qt)||xt){const pn={...Qt,...xt&&Pc(Be)?{isValid:Be}:{},errors:i.errors,name:Ie};i={...i,...pn},b.state.next(pn)}},C=async Ie=>{k(Ie,!0);const Be=await r.resolver(N,r.context,XR(Ie||j.mount,o,r.criteriaMode,r.shouldUseNativeValidation));return k(Ie),Be},_=async Ie=>{const{errors:Be}=await C(Ie);if(Ie)for(const Ye of Ie){const Qt=ir(Be,Ye);Qt?Ya(i.errors,Ye,Qt):$i(i.errors,Ye)}else i.errors=Be;return Be},w=async(Ie,Be,Ye={valid:!0})=>{for(const Qt in Ie){const Ft=Ie[Qt];if(Ft){const{_f:xt,...pn}=Ft;if(xt){const Ln=j.array.has(xt.name),zt=Ft._f&&ek(Ft._f);zt&&S.validatingFields&&k([Qt],!0);const sr=await ny(Ft,j.disabled,N,T,r.shouldUseNativeValidation&&!Be,Ln);if(zt&&S.validatingFields&&k([Qt]),sr[xt.name]&&(Ye.valid=!1,Be))break;!Be&&(ir(sr,xt.name)?Ln?sk(i.errors,sr,xt.name):Ya(i.errors,xt.name,sr[xt.name]):$i(i.errors,xt.name))}!vo(pn)&&await w(pn,Be,Ye)}}return Ye.valid},p=()=>{for(const Ie of j.unMount){const Be=ir(o,Ie);Be&&(Be._f.refs?Be._f.refs.every(Ye=>!ef(Ye)):!ef(Be._f.ref))&&pe(Ie)}j.unMount=new Set},x=(Ie,Be)=>!r.disabled&&(Ie&&Be&&Ya(N,Ie,Be),!Tl(X(),g)),A=(Ie,Be,Ye)=>KR(Ie,j,{...B.mount?N:Gi(Be)?g:Ac(Ie)?{[Ie]:Be}:Be},Ye,Be),I=Ie=>ng(ir(B.mount?N:g,Ie,r.shouldUnregister?ir(g,Ie,[]):[])),M=(Ie,Be,Ye={})=>{const Qt=ir(o,Ie);let Ft=Be;if(Qt){const xt=Qt._f;xt&&(!xt.disabled&&Ya(N,Ie,db(Be,xt)),Ft=gm(xt.ref)&&eo(Be)?"":Be,ob(xt.ref)?[...xt.ref.options].forEach(pn=>pn.selected=Ft.includes(pn.value)):xt.refs?tp(xt.ref)?xt.refs.forEach(pn=>{(!pn.defaultChecked||!pn.disabled)&&(Array.isArray(Ft)?pn.checked=!!Ft.find(Ln=>Ln===pn.value):pn.checked=Ft===pn.value||!!Ft)}):xt.refs.forEach(pn=>pn.checked=pn.value===Ft):ig(xt.ref)?xt.ref.value="":(xt.ref.value=Ft,xt.ref.type||b.state.next({name:Ie,values:_s(N)})))}(Ye.shouldDirty||Ye.shouldTouch)&&v(Ie,Ft,Ye.shouldTouch,Ye.shouldDirty,!0),Ye.shouldValidate&&ce(Ie)},F=(Ie,Be,Ye)=>{for(const Qt in Be){if(!Be.hasOwnProperty(Qt))return;const Ft=Be[Qt],xt=Ie+"."+Qt,pn=ir(o,xt);(j.array.has(Ie)||Ii(Ft)||pn&&!pn._f)&&!Gl(Ft)?F(xt,Ft,Ye):M(xt,Ft,Ye)}},z=(Ie,Be,Ye={})=>{const Qt=ir(o,Ie),Ft=j.array.has(Ie),xt=_s(Be);Ya(N,Ie,xt),Ft?(b.array.next({name:Ie,values:_s(N)}),(S.isDirty||S.dirtyFields||y.isDirty||y.dirtyFields)&&Ye.shouldDirty&&b.state.next({name:Ie,dirtyFields:Dd(g,N),isDirty:x(Ie,xt)})):Qt&&!Qt._f&&!eo(xt)?F(Ie,xt,Ye):M(Ie,xt,Ye),X0(Ie,j)&&b.state.next({...i,name:Ie}),b.state.next({name:B.mount?Ie:void 0,values:_s(N)})},G=async Ie=>{B.mount=!0;const Be=Ie.target;let Ye=Be.name,Qt=!0;const Ft=ir(o,Ye),xt=zt=>{Qt=Number.isNaN(zt)||Gl(zt)&&isNaN(zt.getTime())||Tl(zt,ir(N,Ye,zt))},pn=Q0(r.mode),Ln=Q0(r.reValidateMode);if(Ft){let zt,sr;const Hr=Be.type?Y0(Ft._f):FR(Ie),Rr=Ie.type===Z0.BLUR||Ie.type===Z0.FOCUS_OUT,Vr=!tk(Ft._f)&&!r.resolver&&!ir(i.errors,Ye)&&!Ft._f.deps||ak(Rr,ir(i.touchedFields,Ye),i.isSubmitted,Ln,pn),zr=X0(Ye,j,Rr);Ya(N,Ye,Hr),Rr?(!Be||!Be.readOnly)&&(Ft._f.onBlur&&Ft._f.onBlur(Ie),R&&R(0)):Ft._f.onChange&&Ft._f.onChange(Ie);const Ar=v(Ye,Hr,Rr),$r=!vo(Ar)||zr;if(!Rr&&b.state.next({name:Ye,type:Ie.type,values:_s(N)}),Vr)return(S.isValid||y.isValid)&&(r.mode==="onBlur"?Rr&&h():Rr||h()),$r&&b.state.next({name:Ye,...zr?{}:Ar});if(!Rr&&zr&&b.state.next({...i}),r.resolver){const{errors:ga}=await C([Ye]);if(xt(Hr),Qt){const ea=ey(i.errors,o,Ye),oa=ey(ga,o,ea.name||Ye);zt=oa.error,Ye=oa.name,sr=vo(ga)}}else k([Ye],!0),zt=(await ny(Ft,j.disabled,N,T,r.shouldUseNativeValidation))[Ye],k([Ye]),xt(Hr),Qt&&(zt?sr=!1:(S.isValid||y.isValid)&&(sr=await w(o,!0)));Qt&&(Ft._f.deps&&ce(Ft._f.deps),U(Ye,sr,zt,Ar))}},Z=(Ie,Be)=>{if(ir(i.errors,Be)&&Ie.focus)return Ie.focus(),1},ce=async(Ie,Be={})=>{let Ye,Qt;const Ft=zd(Ie);if(r.resolver){const xt=await _(Gi(Ie)?Ie:Ft);Ye=vo(xt),Qt=Ie?!Ft.some(pn=>ir(xt,pn)):Ye}else Ie?(Qt=(await Promise.all(Ft.map(async xt=>{const pn=ir(o,xt);return await w(pn&&pn._f?{[xt]:pn}:pn)}))).every(Boolean),!(!Qt&&!i.isValid)&&h()):Qt=Ye=await w(o);return b.state.next({...!Ac(Ie)||(S.isValid||y.isValid)&&Ye!==i.isValid?{}:{name:Ie},...r.resolver||!Ie?{isValid:Ye}:{},errors:i.errors}),Be.shouldFocus&&!Qt&&Ud(o,Z,Ie?Ft:j.mount),Qt},X=Ie=>{const Be={...B.mount?N:g};return Gi(Ie)?Be:Ac(Ie)?ir(Be,Ie):Ie.map(Ye=>ir(Be,Ye))},Ee=(Ie,Be)=>({invalid:!!ir((Be||i).errors,Ie),isDirty:!!ir((Be||i).dirtyFields,Ie),error:ir((Be||i).errors,Ie),isValidating:!!ir(i.validatingFields,Ie),isTouched:!!ir((Be||i).touchedFields,Ie)}),Se=Ie=>{Ie&&zd(Ie).forEach(Be=>$i(i.errors,Be)),b.state.next({errors:Ie?i.errors:{}})},xe=(Ie,Be,Ye)=>{const Qt=(ir(o,Ie,{_f:{}})._f||{}).ref,Ft=ir(i.errors,Ie)||{},{ref:xt,message:pn,type:Ln,...zt}=Ft;Ya(i.errors,Ie,{...zt,...Be,ref:Qt}),b.state.next({name:Ie,errors:i.errors,isValid:!1}),Ye&&Ye.shouldFocus&&Qt&&Qt.focus&&Qt.focus()},_e=(Ie,Be)=>mc(Ie)?b.state.subscribe({next:Ye=>"values"in Ye&&Ie(A(void 0,Be),Ye)}):A(Ie,Be,!0),Pe=Ie=>b.state.subscribe({next:Be=>{rk(Ie.name,Be.name,Ie.exact)&&nk(Be,Ie.formState||S,fr,Ie.reRenderRoot)&&Ie.callback({values:{...N},...i,...Be,defaultValues:g})}}).unsubscribe,He=Ie=>(B.mount=!0,y={...y,...Ie.formState},Pe({...Ie,formState:y})),pe=(Ie,Be={})=>{for(const Ye of Ie?zd(Ie):j.mount)j.mount.delete(Ye),j.array.delete(Ye),Be.keepValue||($i(o,Ye),$i(N,Ye)),!Be.keepError&&$i(i.errors,Ye),!Be.keepDirty&&$i(i.dirtyFields,Ye),!Be.keepTouched&&$i(i.touchedFields,Ye),!Be.keepIsValidating&&$i(i.validatingFields,Ye),!r.shouldUnregister&&!Be.keepDefaultValue&&$i(g,Ye);b.state.next({values:_s(N)}),b.state.next({...i,...Be.keepDirty?{isDirty:x()}:{}}),!Be.keepIsValid&&h()},Ge=({disabled:Ie,name:Be})=>{(Pc(Ie)&&B.mount||Ie||j.disabled.has(Be))&&(Ie?j.disabled.add(Be):j.disabled.delete(Be))},Te=(Ie,Be={})=>{let Ye=ir(o,Ie);const Qt=Pc(Be.disabled)||Pc(r.disabled);return Ya(o,Ie,{...Ye||{},_f:{...Ye&&Ye._f?Ye._f:{ref:{name:Ie}},name:Ie,mount:!0,...Be}}),j.mount.add(Ie),Ye?Ge({disabled:Pc(Be.disabled)?Be.disabled:r.disabled,name:Ie}):P(Ie,!0,Be.value),{...Qt?{disabled:Be.disabled||r.disabled}:{},...r.progressive?{required:!!Be.required,min:Md(Be.min),max:Md(Be.max),minLength:Md(Be.minLength),maxLength:Md(Be.maxLength),pattern:Md(Be.pattern)}:{},name:Ie,onChange:G,onBlur:G,ref:Ft=>{if(Ft){Te(Ie,Be),Ye=ir(o,Ie);const xt=Gi(Ft.value)&&Ft.querySelectorAll&&Ft.querySelectorAll("input,select,textarea")[0]||Ft,pn=YR(xt),Ln=Ye._f.refs||[];if(pn?Ln.find(zt=>zt===xt):xt===Ye._f.ref)return;Ya(o,Ie,{_f:{...Ye._f,...pn?{refs:[...Ln.filter(ef),xt,...Array.isArray(ir(g,Ie))?[{}]:[]],ref:{type:xt.type,name:Ie}}:{ref:xt}}}),P(Ie,!1,void 0,xt)}else Ye=ir(o,Ie,{}),Ye._f&&(Ye._f.mount=!1),(r.shouldUnregister||Be.shouldUnregister)&&!(qR(j.array,Ie)&&B.action)&&j.unMount.add(Ie)}}},Ve=()=>r.shouldFocusError&&Ud(o,Z,j.mount),qe=Ie=>{Pc(Ie)&&(b.state.next({disabled:Ie}),Ud(o,(Be,Ye)=>{const Qt=ir(o,Ye);Qt&&(Be.disabled=Qt._f.disabled||Ie,Array.isArray(Qt._f.refs)&&Qt._f.refs.forEach(Ft=>{Ft.disabled=Qt._f.disabled||Ie}))},0,!1))},nt=(Ie,Be)=>async Ye=>{let Qt;Ye&&(Ye.preventDefault&&Ye.preventDefault(),Ye.persist&&Ye.persist());let Ft=_s(N);if(b.state.next({isSubmitting:!0}),r.resolver){const{errors:xt,values:pn}=await C();i.errors=xt,Ft=_s(pn)}else await w(o);if(j.disabled.size)for(const xt of j.disabled)$i(Ft,xt);if($i(i.errors,"root"),vo(i.errors)){b.state.next({errors:{}});try{await Ie(Ft,Ye)}catch(xt){Qt=xt}}else Be&&await Be({...i.errors},Ye),Ve(),setTimeout(Ve);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:vo(i.errors)&&!Qt,submitCount:i.submitCount+1,errors:i.errors}),Qt)throw Qt},Bt=(Ie,Be={})=>{ir(o,Ie)&&(Gi(Be.defaultValue)?z(Ie,_s(ir(g,Ie))):(z(Ie,Be.defaultValue),Ya(g,Ie,_s(Be.defaultValue))),Be.keepTouched||$i(i.touchedFields,Ie),Be.keepDirty||($i(i.dirtyFields,Ie),i.isDirty=Be.defaultValue?x(Ie,_s(ir(g,Ie))):x()),Be.keepError||($i(i.errors,Ie),S.isValid&&h()),b.state.next({...i}))},Pr=(Ie,Be={})=>{const Ye=Ie?_s(Ie):g,Qt=_s(Ye),Ft=vo(Ie),xt=Ft?g:Qt;if(Be.keepDefaultValues||(g=Ye),!Be.keepValues){if(Be.keepDirtyValues){const pn=new Set([...j.mount,...Object.keys(Dd(g,N))]);for(const Ln of Array.from(pn))ir(i.dirtyFields,Ln)?Ya(xt,Ln,ir(N,Ln)):z(Ln,ir(xt,Ln))}else{if(tg&&Gi(Ie))for(const pn of j.mount){const Ln=ir(o,pn);if(Ln&&Ln._f){const zt=Array.isArray(Ln._f.refs)?Ln._f.refs[0]:Ln._f.ref;if(gm(zt)){const sr=zt.closest("form");if(sr){sr.reset();break}}}}if(Be.keepFieldsRef)for(const pn of j.mount)z(pn,ir(xt,pn));else o={}}N=r.shouldUnregister?Be.keepDefaultValues?_s(g):{}:_s(xt),b.array.next({values:{...xt}}),b.state.next({values:{...xt}})}j={mount:Be.keepDirtyValues?j.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},B.mount=!S.isValid||!!Be.keepIsValid||!!Be.keepDirtyValues,B.watch=!!r.shouldUnregister,b.state.next({submitCount:Be.keepSubmitCount?i.submitCount:0,isDirty:Ft?!1:Be.keepDirty?i.isDirty:!!(Be.keepDefaultValues&&!Tl(Ie,g)),isSubmitted:Be.keepIsSubmitted?i.isSubmitted:!1,dirtyFields:Ft?{}:Be.keepDirtyValues?Be.keepDefaultValues&&N?Dd(g,N):i.dirtyFields:Be.keepDefaultValues&&Ie?Dd(g,Ie):Be.keepDirty?i.dirtyFields:{},touchedFields:Be.keepTouched?i.touchedFields:{},errors:Be.keepErrors?i.errors:{},isSubmitSuccessful:Be.keepIsSubmitSuccessful?i.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:g})},Ur=(Ie,Be)=>Pr(mc(Ie)?Ie(N):Ie,Be),Zn=(Ie,Be={})=>{const Ye=ir(o,Ie),Qt=Ye&&Ye._f;if(Qt){const Ft=Qt.refs?Qt.refs[0]:Qt.ref;Ft.focus&&(Ft.focus(),Be.shouldSelect&&mc(Ft.select)&&Ft.select())}},fr=Ie=>{i={...i,...Ie}},Bn={control:{register:Te,unregister:pe,getFieldState:Ee,handleSubmit:nt,setError:xe,_subscribe:Pe,_runSchema:C,_focusError:Ve,_getWatch:A,_getDirty:x,_setValid:h,_setFieldArray:E,_setDisabledField:Ge,_setErrors:m,_getFieldArray:I,_reset:Pr,_resetDefaultValues:()=>mc(r.defaultValues)&&r.defaultValues().then(Ie=>{Ur(Ie,r.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:p,_disableForm:qe,_subjects:b,_proxyFormState:S,get _fields(){return o},get _formValues(){return N},get _state(){return B},set _state(Ie){B=Ie},get _defaultValues(){return g},get _names(){return j},set _names(Ie){j=Ie},get _formState(){return i},get _options(){return r},set _options(Ie){r={...r,...Ie}}},subscribe:He,trigger:ce,register:Te,handleSubmit:nt,watch:_e,setValue:z,getValues:X,reset:Ur,resetField:Bt,clearErrors:Se,unregister:pe,setError:xe,setFocus:Zn,getFieldState:Ee};return{...Bn,formControl:Bn}}function tu(e={}){const r=c.useRef(void 0),i=c.useRef(void 0),[o,g]=c.useState({isDirty:!1,isValidating:!1,isLoading:mc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:mc(e.defaultValues)?void 0:e.defaultValues});if(!r.current)if(e.formControl)r.current={...e.formControl,formState:o},e.defaultValues&&!mc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:B,...j}=ck(e);r.current={...j,formState:o}}const N=r.current.control;return N._options=e,GR(()=>{const B=N._subscribe({formState:N._proxyFormState,callback:()=>g({...N._formState}),reRenderRoot:!0});return g(j=>({...j,isReady:!0})),N._formState.isReady=!0,B},[N]),c.useEffect(()=>N._disableForm(e.disabled),[N,e.disabled]),c.useEffect(()=>{e.mode&&(N._options.mode=e.mode),e.reValidateMode&&(N._options.reValidateMode=e.reValidateMode)},[N,e.mode,e.reValidateMode]),c.useEffect(()=>{e.errors&&(N._setErrors(e.errors),N._focusError())},[N,e.errors]),c.useEffect(()=>{e.shouldUnregister&&N._subjects.state.next({values:N._getWatch()})},[N,e.shouldUnregister]),c.useEffect(()=>{if(N._proxyFormState.isDirty){const B=N._getDirty();B!==o.isDirty&&N._subjects.state.next({isDirty:B})}},[N,o.isDirty]),c.useEffect(()=>{e.values&&!Tl(e.values,i.current)?(N._reset(e.values,{keepFieldsRef:!0,...N._options.resetOptions}),i.current=e.values,g(B=>({...B}))):N._resetDefaultValues()},[N,e.values]),c.useEffect(()=>{N._state.mount||(N._setValid(),N._state.mount=!0),N._state.watch&&(N._state.watch=!1,N._subjects.state.next({...N._formState})),N._removeUnmounted()}),r.current.formState=$R(o,N),r.current}const ry=(e,r,i)=>{if(e&&"reportValidity"in e){const o=ir(i,r);e.setCustomValidity(o&&o.message||""),e.reportValidity()}},Cf=(e,r)=>{for(const i in r.fields){const o=r.fields[i];o&&o.ref&&"reportValidity"in o.ref?ry(o.ref,i,e):o&&o.refs&&o.refs.forEach(g=>ry(g,i,e))}},ay=(e,r)=>{r.shouldUseNativeValidation&&Cf(e,r);const i={};for(const o in e){const g=ir(r.fields,o),N=Object.assign(e[o]||{},{ref:g&&g.ref});if(lk(r.names||Object.keys(e),o)){const B=Object.assign({},ir(i,o));Ya(B,"root",N),Ya(i,o,B)}else Ya(i,o,N)}return i},lk=(e,r)=>{const i=iy(r);return e.some(o=>iy(o).match(`^${i}\\.\\d+`))};function iy(e){return e.replace(/\]|\[/g,"")}function Zt(e,r,i){function o(j,R){var d;Object.defineProperty(j,"_zod",{value:j._zod??{},enumerable:!1}),(d=j._zod).traits??(d.traits=new Set),j._zod.traits.add(e),r(j,R);for(const S in B.prototype)S in j||Object.defineProperty(j,S,{value:B.prototype[S].bind(j)});j._zod.constr=B,j._zod.def=R}const g=i?.Parent??Object;class N extends g{}Object.defineProperty(N,"name",{value:e});function B(j){var R;const d=i?.Parent?new N:this;o(d,j),(R=d._zod).deferred??(R.deferred=[]);for(const S of d._zod.deferred)S();return d}return Object.defineProperty(B,"init",{value:o}),Object.defineProperty(B,Symbol.hasInstance,{value:j=>i?.Parent&&j instanceof i.Parent?!0:j?._zod?.traits?.has(e)}),Object.defineProperty(B,"name",{value:e}),B}class Zd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const mb={};function Jl(e){return mb}function uk(e){const r=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,g])=>r.indexOf(+o)===-1).map(([o,g])=>g)}function Tf(e,r){return typeof r=="bigint"?r.toString():r}function hb(e){return{get value(){{const r=e();return Object.defineProperty(this,"value",{value:r}),r}}}}function og(e){return e==null}function cg(e){const r=e.startsWith("^")?1:0,i=e.endsWith("$")?e.length-1:e.length;return e.slice(r,i)}function dk(e,r){const i=(e.toString().split(".")[1]||"").length,o=r.toString();let g=(o.split(".")[1]||"").length;if(g===0&&/\d?e-\d?/.test(o)){const R=o.match(/\d?e-(\d?)/);R?.[1]&&(g=Number.parseInt(R[1]))}const N=i>g?i:g,B=Number.parseInt(e.toFixed(N).replace(".","")),j=Number.parseInt(r.toFixed(N).replace(".",""));return B%j/10**N}const sy=Symbol("evaluating");function ei(e,r,i){let o;Object.defineProperty(e,r,{get(){if(o!==sy)return o===void 0&&(o=sy,o=i()),o},set(g){Object.defineProperty(e,r,{value:g})},configurable:!0})}function pk(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function nu(e,r,i){Object.defineProperty(e,r,{value:i,writable:!0,enumerable:!0,configurable:!0})}function Gu(...e){const r={};for(const i of e){const o=Object.getOwnPropertyDescriptors(i);Object.assign(r,o)}return Object.defineProperties({},r)}function oy(e){return JSON.stringify(e)}const fb="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Pf(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const mk=hb(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Nf(e){if(Pf(e)===!1)return!1;const r=e.constructor;if(r===void 0)return!0;const i=r.prototype;return!(Pf(i)===!1||Object.prototype.hasOwnProperty.call(i,"isPrototypeOf")===!1)}const hk=new Set(["string","number","symbol"]);function Fu(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ru(e,r,i){const o=new e._zod.constr(r??e._zod.def);return(!r||i?.parent)&&(o._zod.parent=e),o}function wr(e){const r=e;if(!r)return{};if(typeof r=="string")return{error:()=>r};if(r?.message!==void 0){if(r?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");r.error=r.message}return delete r.message,typeof r.error=="string"?{...r,error:()=>r.error}:r}function fk(e){return Object.keys(e).filter(r=>e[r]._zod.optin==="optional"&&e[r]._zod.optout==="optional")}const gk={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function vk(e,r){const i=e._zod.def,o=Gu(e._zod.def,{get shape(){const g={};for(const N in r){if(!(N in i.shape))throw new Error(`Unrecognized key: "${N}"`);r[N]&&(g[N]=i.shape[N])}return nu(this,"shape",g),g},checks:[]});return ru(e,o)}function yk(e,r){const i=e._zod.def,o=Gu(e._zod.def,{get shape(){const g={...e._zod.def.shape};for(const N in r){if(!(N in i.shape))throw new Error(`Unrecognized key: "${N}"`);r[N]&&delete g[N]}return nu(this,"shape",g),g},checks:[]});return ru(e,o)}function _k(e,r){if(!Nf(r))throw new Error("Invalid input to extend: expected a plain object");const i=Gu(e._zod.def,{get shape(){const o={...e._zod.def.shape,...r};return nu(this,"shape",o),o},checks:[]});return ru(e,i)}function bk(e,r){const i=Gu(e._zod.def,{get shape(){const o={...e._zod.def.shape,...r._zod.def.shape};return nu(this,"shape",o),o},get catchall(){return r._zod.def.catchall},checks:[]});return ru(e,i)}function wk(e,r,i){const o=Gu(r._zod.def,{get shape(){const g=r._zod.def.shape,N={...g};if(i)for(const B in i){if(!(B in g))throw new Error(`Unrecognized key: "${B}"`);i[B]&&(N[B]=e?new e({type:"optional",innerType:g[B]}):g[B])}else for(const B in g)N[B]=e?new e({type:"optional",innerType:g[B]}):g[B];return nu(this,"shape",N),N},checks:[]});return ru(r,o)}function Ek(e,r,i){const o=Gu(r._zod.def,{get shape(){const g=r._zod.def.shape,N={...g};if(i)for(const B in i){if(!(B in N))throw new Error(`Unrecognized key: "${B}"`);i[B]&&(N[B]=new e({type:"nonoptional",innerType:g[B]}))}else for(const B in g)N[B]=new e({type:"nonoptional",innerType:g[B]});return nu(this,"shape",N),N},checks:[]});return ru(r,o)}function Hd(e,r=0){for(let i=r;i<e.issues.length;i++)if(e.issues[i]?.continue!==!0)return!0;return!1}function gb(e,r){return r.map(i=>{var o;return(o=i).path??(o.path=[]),i.path.unshift(e),i})}function Vp(e){return typeof e=="string"?e:e?.message}function Xl(e,r,i){const o={...e,path:e.path??[]};if(!e.message){const g=Vp(e.inst?._zod.def?.error?.(e))??Vp(r?.error?.(e))??Vp(i.customError?.(e))??Vp(i.localeError?.(e))??"Invalid input";o.message=g}return delete o.inst,delete o.continue,r?.reportInput||delete o.input,o}function lg(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Wd(...e){const[r,i,o]=e;return typeof r=="string"?{message:r,code:"custom",input:i,inst:o}:{...r}}const vb=(e,r)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:r,enumerable:!1}),e.message=JSON.stringify(r,Tf,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},ug=Zt("$ZodError",vb),Mm=Zt("$ZodError",vb,{Parent:Error});function Sk(e,r=i=>i.message){const i={},o=[];for(const g of e.issues)g.path.length>0?(i[g.path[0]]=i[g.path[0]]||[],i[g.path[0]].push(r(g))):o.push(r(g));return{formErrors:o,fieldErrors:i}}function xk(e,r){const i=r||function(N){return N.message},o={_errors:[]},g=N=>{for(const B of N.issues)if(B.code==="invalid_union"&&B.errors.length)B.errors.map(j=>g({issues:j}));else if(B.code==="invalid_key")g({issues:B.issues});else if(B.code==="invalid_element")g({issues:B.issues});else if(B.path.length===0)o._errors.push(i(B));else{let j=o,R=0;for(;R<B.path.length;){const d=B.path[R];R===B.path.length-1?(j[d]=j[d]||{_errors:[]},j[d]._errors.push(i(B))):j[d]=j[d]||{_errors:[]},j=j[d],R++}}};return g(e),o}const yb=e=>(r,i,o,g)=>{const N=o?Object.assign(o,{async:!1}):{async:!1},B=r._zod.run({value:i,issues:[]},N);if(B instanceof Promise)throw new Zd;if(B.issues.length){const j=new(g?.Err??e)(B.issues.map(R=>Xl(R,N,Jl())));throw fb(j,g?.callee),j}return B.value},Rk=yb(Mm),_b=e=>async(r,i,o,g)=>{const N=o?Object.assign(o,{async:!0}):{async:!0};let B=r._zod.run({value:i,issues:[]},N);if(B instanceof Promise&&(B=await B),B.issues.length){const j=new(g?.Err??e)(B.issues.map(R=>Xl(R,N,Jl())));throw fb(j,g?.callee),j}return B.value},kk=_b(Mm),bb=e=>(r,i,o)=>{const g=o?{...o,async:!1}:{async:!1},N=r._zod.run({value:i,issues:[]},g);if(N instanceof Promise)throw new Zd;return N.issues.length?{success:!1,error:new(e??ug)(N.issues.map(B=>Xl(B,g,Jl())))}:{success:!0,data:N.value}},Ck=bb(Mm),wb=e=>async(r,i,o)=>{const g=o?Object.assign(o,{async:!0}):{async:!0};let N=r._zod.run({value:i,issues:[]},g);return N instanceof Promise&&(N=await N),N.issues.length?{success:!1,error:new e(N.issues.map(B=>Xl(B,g,Jl())))}:{success:!0,data:N.value}},Tk=wb(Mm),Pk=/^[cC][^\s-]{8,}$/,Nk=/^[0-9a-z]+$/,Ak=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ok=/^[0-9a-vA-V]{20}$/,Dk=/^[A-Za-z0-9]{27}$/,Mk=/^[a-zA-Z0-9_-]{21}$/,Lk=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Ik=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,cy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,jk=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Bk="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function zk(){return new RegExp(Bk,"u")}const Uk=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Hk=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Fk=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Vk=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qk=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Eb=/^[A-Za-z0-9_-]*$/,Zk=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Wk=/^\+(?:[0-9]){6,14}[0-9]$/,Sb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",$k=new RegExp(`^${Sb}$`);function xb(e){const r="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${r}`:e.precision===0?`${r}:[0-5]\\d`:`${r}:[0-5]\\d\\.\\d{${e.precision}}`:`${r}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Gk(e){return new RegExp(`^${xb(e)}$`)}function Kk(e){const r=xb({precision:e.precision}),i=["Z"];e.local&&i.push(""),e.offset&&i.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${r}(?:${i.join("|")})`;return new RegExp(`^${Sb}T(?:${o})$`)}const Yk=e=>{const r=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${r}$`)},Qk=/^\d+$/,Jk=/^-?\d+(?:\.\d+)?/i,Xk=/true|false/i,eC=/^[^A-Z]*$/,tC=/^[^a-z]*$/,wo=Zt("$ZodCheck",(e,r)=>{var i;e._zod??(e._zod={}),e._zod.def=r,(i=e._zod).onattach??(i.onattach=[])}),Rb={number:"number",bigint:"bigint",object:"date"},kb=Zt("$ZodCheckLessThan",(e,r)=>{wo.init(e,r);const i=Rb[typeof r.value];e._zod.onattach.push(o=>{const g=o._zod.bag,N=(r.inclusive?g.maximum:g.exclusiveMaximum)??Number.POSITIVE_INFINITY;r.value<N&&(r.inclusive?g.maximum=r.value:g.exclusiveMaximum=r.value)}),e._zod.check=o=>{(r.inclusive?o.value<=r.value:o.value<r.value)||o.issues.push({origin:i,code:"too_big",maximum:r.value,input:o.value,inclusive:r.inclusive,inst:e,continue:!r.abort})}}),Cb=Zt("$ZodCheckGreaterThan",(e,r)=>{wo.init(e,r);const i=Rb[typeof r.value];e._zod.onattach.push(o=>{const g=o._zod.bag,N=(r.inclusive?g.minimum:g.exclusiveMinimum)??Number.NEGATIVE_INFINITY;r.value>N&&(r.inclusive?g.minimum=r.value:g.exclusiveMinimum=r.value)}),e._zod.check=o=>{(r.inclusive?o.value>=r.value:o.value>r.value)||o.issues.push({origin:i,code:"too_small",minimum:r.value,input:o.value,inclusive:r.inclusive,inst:e,continue:!r.abort})}}),nC=Zt("$ZodCheckMultipleOf",(e,r)=>{wo.init(e,r),e._zod.onattach.push(i=>{var o;(o=i._zod.bag).multipleOf??(o.multipleOf=r.value)}),e._zod.check=i=>{if(typeof i.value!=typeof r.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof i.value=="bigint"?i.value%r.value===BigInt(0):dk(i.value,r.value)===0)||i.issues.push({origin:typeof i.value,code:"not_multiple_of",divisor:r.value,input:i.value,inst:e,continue:!r.abort})}}),rC=Zt("$ZodCheckNumberFormat",(e,r)=>{wo.init(e,r),r.format=r.format||"float64";const i=r.format?.includes("int"),o=i?"int":"number",[g,N]=gk[r.format];e._zod.onattach.push(B=>{const j=B._zod.bag;j.format=r.format,j.minimum=g,j.maximum=N,i&&(j.pattern=Qk)}),e._zod.check=B=>{const j=B.value;if(i){if(!Number.isInteger(j)){B.issues.push({expected:o,format:r.format,code:"invalid_type",continue:!1,input:j,inst:e});return}if(!Number.isSafeInteger(j)){j>0?B.issues.push({input:j,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!r.abort}):B.issues.push({input:j,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!r.abort});return}}j<g&&B.issues.push({origin:"number",input:j,code:"too_small",minimum:g,inclusive:!0,inst:e,continue:!r.abort}),j>N&&B.issues.push({origin:"number",input:j,code:"too_big",maximum:N,inst:e})}}),aC=Zt("$ZodCheckMaxLength",(e,r)=>{var i;wo.init(e,r),(i=e._zod.def).when??(i.when=o=>{const g=o.value;return!og(g)&&g.length!==void 0}),e._zod.onattach.push(o=>{const g=o._zod.bag.maximum??Number.POSITIVE_INFINITY;r.maximum<g&&(o._zod.bag.maximum=r.maximum)}),e._zod.check=o=>{const g=o.value;if(g.length<=r.maximum)return;const B=lg(g);o.issues.push({origin:B,code:"too_big",maximum:r.maximum,inclusive:!0,input:g,inst:e,continue:!r.abort})}}),iC=Zt("$ZodCheckMinLength",(e,r)=>{var i;wo.init(e,r),(i=e._zod.def).when??(i.when=o=>{const g=o.value;return!og(g)&&g.length!==void 0}),e._zod.onattach.push(o=>{const g=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;r.minimum>g&&(o._zod.bag.minimum=r.minimum)}),e._zod.check=o=>{const g=o.value;if(g.length>=r.minimum)return;const B=lg(g);o.issues.push({origin:B,code:"too_small",minimum:r.minimum,inclusive:!0,input:g,inst:e,continue:!r.abort})}}),sC=Zt("$ZodCheckLengthEquals",(e,r)=>{var i;wo.init(e,r),(i=e._zod.def).when??(i.when=o=>{const g=o.value;return!og(g)&&g.length!==void 0}),e._zod.onattach.push(o=>{const g=o._zod.bag;g.minimum=r.length,g.maximum=r.length,g.length=r.length}),e._zod.check=o=>{const g=o.value,N=g.length;if(N===r.length)return;const B=lg(g),j=N>r.length;o.issues.push({origin:B,...j?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!r.abort})}}),Lm=Zt("$ZodCheckStringFormat",(e,r)=>{var i,o;wo.init(e,r),e._zod.onattach.push(g=>{const N=g._zod.bag;N.format=r.format,r.pattern&&(N.patterns??(N.patterns=new Set),N.patterns.add(r.pattern))}),r.pattern?(i=e._zod).check??(i.check=g=>{r.pattern.lastIndex=0,!r.pattern.test(g.value)&&g.issues.push({origin:"string",code:"invalid_format",format:r.format,input:g.value,...r.pattern?{pattern:r.pattern.toString()}:{},inst:e,continue:!r.abort})}):(o=e._zod).check??(o.check=()=>{})}),oC=Zt("$ZodCheckRegex",(e,r)=>{Lm.init(e,r),e._zod.check=i=>{r.pattern.lastIndex=0,!r.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:"regex",input:i.value,pattern:r.pattern.toString(),inst:e,continue:!r.abort})}}),cC=Zt("$ZodCheckLowerCase",(e,r)=>{r.pattern??(r.pattern=eC),Lm.init(e,r)}),lC=Zt("$ZodCheckUpperCase",(e,r)=>{r.pattern??(r.pattern=tC),Lm.init(e,r)}),uC=Zt("$ZodCheckIncludes",(e,r)=>{wo.init(e,r);const i=Fu(r.includes),o=new RegExp(typeof r.position=="number"?`^.{${r.position}}${i}`:i);r.pattern=o,e._zod.onattach.push(g=>{const N=g._zod.bag;N.patterns??(N.patterns=new Set),N.patterns.add(o)}),e._zod.check=g=>{g.value.includes(r.includes,r.position)||g.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:r.includes,input:g.value,inst:e,continue:!r.abort})}}),dC=Zt("$ZodCheckStartsWith",(e,r)=>{wo.init(e,r);const i=new RegExp(`^${Fu(r.prefix)}.*`);r.pattern??(r.pattern=i),e._zod.onattach.push(o=>{const g=o._zod.bag;g.patterns??(g.patterns=new Set),g.patterns.add(i)}),e._zod.check=o=>{o.value.startsWith(r.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:r.prefix,input:o.value,inst:e,continue:!r.abort})}}),pC=Zt("$ZodCheckEndsWith",(e,r)=>{wo.init(e,r);const i=new RegExp(`.*${Fu(r.suffix)}$`);r.pattern??(r.pattern=i),e._zod.onattach.push(o=>{const g=o._zod.bag;g.patterns??(g.patterns=new Set),g.patterns.add(i)}),e._zod.check=o=>{o.value.endsWith(r.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:r.suffix,input:o.value,inst:e,continue:!r.abort})}}),mC=Zt("$ZodCheckOverwrite",(e,r)=>{wo.init(e,r),e._zod.check=i=>{i.value=r.tx(i.value)}});class hC{constructor(r=[]){this.content=[],this.indent=0,this&&(this.args=r)}indented(r){this.indent+=1,r(this),this.indent-=1}write(r){if(typeof r=="function"){r(this,{execution:"sync"}),r(this,{execution:"async"});return}const o=r.split(`
`).filter(B=>B),g=Math.min(...o.map(B=>B.length-B.trimStart().length)),N=o.map(B=>B.slice(g)).map(B=>" ".repeat(this.indent*2)+B);for(const B of N)this.content.push(B)}compile(){const r=Function,i=this?.args,g=[...(this?.content??[""]).map(N=>`  ${N}`)];return new r(...i,g.join(`
`))}}const fC={major:4,minor:0,patch:15},ui=Zt("$ZodType",(e,r)=>{var i;e??(e={}),e._zod.def=r,e._zod.bag=e._zod.bag||{},e._zod.version=fC;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const g of o)for(const N of g._zod.onattach)N(e);if(o.length===0)(i=e._zod).deferred??(i.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const g=(N,B,j)=>{let R=Hd(N),d;for(const S of B){if(S._zod.def.when){if(!S._zod.def.when(N))continue}else if(R)continue;const y=N.issues.length,b=S._zod.check(N);if(b instanceof Promise&&j?.async===!1)throw new Zd;if(d||b instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await b,N.issues.length!==y&&(R||(R=Hd(N,y)))});else{if(N.issues.length===y)continue;R||(R=Hd(N,y))}}return d?d.then(()=>N):N};e._zod.run=(N,B)=>{const j=e._zod.parse(N,B);if(j instanceof Promise){if(B.async===!1)throw new Zd;return j.then(R=>g(R,o,B))}return g(j,o,B)}}e["~standard"]={validate:g=>{try{const N=Ck(e,g);return N.success?{value:N.data}:{issues:N.error?.issues}}catch{return Tk(e,g).then(B=>B.success?{value:B.data}:{issues:B.error?.issues})}},vendor:"zod",version:1}}),dg=Zt("$ZodString",(e,r)=>{ui.init(e,r),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Yk(e._zod.bag),e._zod.parse=(i,o)=>{if(r.coerce)try{i.value=String(i.value)}catch{}return typeof i.value=="string"||i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:e}),i}}),di=Zt("$ZodStringFormat",(e,r)=>{Lm.init(e,r),dg.init(e,r)}),gC=Zt("$ZodGUID",(e,r)=>{r.pattern??(r.pattern=Ik),di.init(e,r)}),vC=Zt("$ZodUUID",(e,r)=>{if(r.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[r.version];if(o===void 0)throw new Error(`Invalid UUID version: "${r.version}"`);r.pattern??(r.pattern=cy(o))}else r.pattern??(r.pattern=cy());di.init(e,r)}),yC=Zt("$ZodEmail",(e,r)=>{r.pattern??(r.pattern=jk),di.init(e,r)}),_C=Zt("$ZodURL",(e,r)=>{di.init(e,r),e._zod.check=i=>{try{const o=i.value.trim(),g=new URL(o);r.hostname&&(r.hostname.lastIndex=0,r.hostname.test(g.hostname)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Zk.source,input:i.value,inst:e,continue:!r.abort})),r.protocol&&(r.protocol.lastIndex=0,r.protocol.test(g.protocol.endsWith(":")?g.protocol.slice(0,-1):g.protocol)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:r.protocol.source,input:i.value,inst:e,continue:!r.abort})),r.normalize?i.value=g.href:i.value=o;return}catch{i.issues.push({code:"invalid_format",format:"url",input:i.value,inst:e,continue:!r.abort})}}}),bC=Zt("$ZodEmoji",(e,r)=>{r.pattern??(r.pattern=zk()),di.init(e,r)}),wC=Zt("$ZodNanoID",(e,r)=>{r.pattern??(r.pattern=Mk),di.init(e,r)}),EC=Zt("$ZodCUID",(e,r)=>{r.pattern??(r.pattern=Pk),di.init(e,r)}),SC=Zt("$ZodCUID2",(e,r)=>{r.pattern??(r.pattern=Nk),di.init(e,r)}),xC=Zt("$ZodULID",(e,r)=>{r.pattern??(r.pattern=Ak),di.init(e,r)}),RC=Zt("$ZodXID",(e,r)=>{r.pattern??(r.pattern=Ok),di.init(e,r)}),kC=Zt("$ZodKSUID",(e,r)=>{r.pattern??(r.pattern=Dk),di.init(e,r)}),CC=Zt("$ZodISODateTime",(e,r)=>{r.pattern??(r.pattern=Kk(r)),di.init(e,r)}),TC=Zt("$ZodISODate",(e,r)=>{r.pattern??(r.pattern=$k),di.init(e,r)}),PC=Zt("$ZodISOTime",(e,r)=>{r.pattern??(r.pattern=Gk(r)),di.init(e,r)}),NC=Zt("$ZodISODuration",(e,r)=>{r.pattern??(r.pattern=Lk),di.init(e,r)}),AC=Zt("$ZodIPv4",(e,r)=>{r.pattern??(r.pattern=Uk),di.init(e,r),e._zod.onattach.push(i=>{const o=i._zod.bag;o.format="ipv4"})}),OC=Zt("$ZodIPv6",(e,r)=>{r.pattern??(r.pattern=Hk),di.init(e,r),e._zod.onattach.push(i=>{const o=i._zod.bag;o.format="ipv6"}),e._zod.check=i=>{try{new URL(`http://[${i.value}]`)}catch{i.issues.push({code:"invalid_format",format:"ipv6",input:i.value,inst:e,continue:!r.abort})}}}),DC=Zt("$ZodCIDRv4",(e,r)=>{r.pattern??(r.pattern=Fk),di.init(e,r)}),MC=Zt("$ZodCIDRv6",(e,r)=>{r.pattern??(r.pattern=Vk),di.init(e,r),e._zod.check=i=>{const[o,g]=i.value.split("/");try{if(!g)throw new Error;const N=Number(g);if(`${N}`!==g)throw new Error;if(N<0||N>128)throw new Error;new URL(`http://[${o}]`)}catch{i.issues.push({code:"invalid_format",format:"cidrv6",input:i.value,inst:e,continue:!r.abort})}}});function Tb(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const LC=Zt("$ZodBase64",(e,r)=>{r.pattern??(r.pattern=qk),di.init(e,r),e._zod.onattach.push(i=>{i._zod.bag.contentEncoding="base64"}),e._zod.check=i=>{Tb(i.value)||i.issues.push({code:"invalid_format",format:"base64",input:i.value,inst:e,continue:!r.abort})}});function IC(e){if(!Eb.test(e))return!1;const r=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),i=r.padEnd(Math.ceil(r.length/4)*4,"=");return Tb(i)}const jC=Zt("$ZodBase64URL",(e,r)=>{r.pattern??(r.pattern=Eb),di.init(e,r),e._zod.onattach.push(i=>{i._zod.bag.contentEncoding="base64url"}),e._zod.check=i=>{IC(i.value)||i.issues.push({code:"invalid_format",format:"base64url",input:i.value,inst:e,continue:!r.abort})}}),BC=Zt("$ZodE164",(e,r)=>{r.pattern??(r.pattern=Wk),di.init(e,r)});function zC(e,r=null){try{const i=e.split(".");if(i.length!==3)return!1;const[o]=i;if(!o)return!1;const g=JSON.parse(atob(o));return!("typ"in g&&g?.typ!=="JWT"||!g.alg||r&&(!("alg"in g)||g.alg!==r))}catch{return!1}}const UC=Zt("$ZodJWT",(e,r)=>{di.init(e,r),e._zod.check=i=>{zC(i.value,r.alg)||i.issues.push({code:"invalid_format",format:"jwt",input:i.value,inst:e,continue:!r.abort})}}),Pb=Zt("$ZodNumber",(e,r)=>{ui.init(e,r),e._zod.pattern=e._zod.bag.pattern??Jk,e._zod.parse=(i,o)=>{if(r.coerce)try{i.value=Number(i.value)}catch{}const g=i.value;if(typeof g=="number"&&!Number.isNaN(g)&&Number.isFinite(g))return i;const N=typeof g=="number"?Number.isNaN(g)?"NaN":Number.isFinite(g)?void 0:"Infinity":void 0;return i.issues.push({expected:"number",code:"invalid_type",input:g,inst:e,...N?{received:N}:{}}),i}}),HC=Zt("$ZodNumber",(e,r)=>{rC.init(e,r),Pb.init(e,r)}),FC=Zt("$ZodBoolean",(e,r)=>{ui.init(e,r),e._zod.pattern=Xk,e._zod.parse=(i,o)=>{if(r.coerce)try{i.value=!!i.value}catch{}const g=i.value;return typeof g=="boolean"||i.issues.push({expected:"boolean",code:"invalid_type",input:g,inst:e}),i}}),VC=Zt("$ZodAny",(e,r)=>{ui.init(e,r),e._zod.parse=i=>i}),qC=Zt("$ZodUnknown",(e,r)=>{ui.init(e,r),e._zod.parse=i=>i}),ZC=Zt("$ZodNever",(e,r)=>{ui.init(e,r),e._zod.parse=(i,o)=>(i.issues.push({expected:"never",code:"invalid_type",input:i.value,inst:e}),i)});function ly(e,r,i){e.issues.length&&r.issues.push(...gb(i,e.issues)),r.value[i]=e.value}const WC=Zt("$ZodArray",(e,r)=>{ui.init(e,r),e._zod.parse=(i,o)=>{const g=i.value;if(!Array.isArray(g))return i.issues.push({expected:"array",code:"invalid_type",input:g,inst:e}),i;i.value=Array(g.length);const N=[];for(let B=0;B<g.length;B++){const j=g[B],R=r.element._zod.run({value:j,issues:[]},o);R instanceof Promise?N.push(R.then(d=>ly(d,i,B))):ly(R,i,B)}return N.length?Promise.all(N).then(()=>i):i}});function qp(e,r,i,o){e.issues.length&&r.issues.push(...gb(i,e.issues)),e.value===void 0?i in o&&(r.value[i]=void 0):r.value[i]=e.value}const $C=Zt("$ZodObject",(e,r)=>{ui.init(e,r);const i=hb(()=>{const y=Object.keys(r.shape);for(const T of y)if(!(r.shape[T]instanceof ui))throw new Error(`Invalid element at key "${T}": expected a Zod schema`);const b=fk(r.shape);return{shape:r.shape,keys:y,keySet:new Set(y),numKeys:y.length,optionalKeys:new Set(b)}});ei(e._zod,"propValues",()=>{const y=r.shape,b={};for(const T in y){const f=y[T]._zod;if(f.values){b[T]??(b[T]=new Set);for(const h of f.values)b[T].add(h)}}return b});const o=y=>{const b=new hC(["shape","payload","ctx"]),T=i.value,f=H=>{const m=oy(H);return`shape[${m}]._zod.run({ value: input[${m}], issues: [] }, ctx)`};b.write("const input = payload.value;");const h=Object.create(null);let k=0;for(const H of T.keys)h[H]=`key_${k++}`;b.write("const newResult = {}");for(const H of T.keys){const m=h[H],P=oy(H);b.write(`const ${m} = ${f(H)};`),b.write(`
        if (${m}.issues.length) {
          payload.issues = payload.issues.concat(${m}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${P}, ...iss.path] : [${P}]
          })));
        }
        
        if (${m}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${m}.value;
        }
      `)}b.write("payload.value = newResult;"),b.write("return payload;");const E=b.compile();return(H,m)=>E(y,H,m)};let g;const N=Pf,B=!mb.jitless,R=B&&mk.value,d=r.catchall;let S;e._zod.parse=(y,b)=>{S??(S=i.value);const T=y.value;if(!N(T))return y.issues.push({expected:"object",code:"invalid_type",input:T,inst:e}),y;const f=[];if(B&&R&&b?.async===!1&&b.jitless!==!0)g||(g=o(r.shape)),y=g(y,b);else{y.value={};const m=S.shape;for(const P of S.keys){const U=m[P]._zod.run({value:T[P],issues:[]},b);U instanceof Promise?f.push(U.then(C=>qp(C,y,P,T))):qp(U,y,P,T)}}if(!d)return f.length?Promise.all(f).then(()=>y):y;const h=[],k=S.keySet,E=d._zod,H=E.def.type;for(const m of Object.keys(T)){if(k.has(m))continue;if(H==="never"){h.push(m);continue}const P=E.run({value:T[m],issues:[]},b);P instanceof Promise?f.push(P.then(v=>qp(v,y,m,T))):qp(P,y,m,T)}return h.length&&y.issues.push({code:"unrecognized_keys",keys:h,input:T,inst:e}),f.length?Promise.all(f).then(()=>y):y}});function uy(e,r,i,o){for(const N of e)if(N.issues.length===0)return r.value=N.value,r;const g=e.filter(N=>!Hd(N));return g.length===1?(r.value=g[0].value,g[0]):(r.issues.push({code:"invalid_union",input:r.value,inst:i,errors:e.map(N=>N.issues.map(B=>Xl(B,o,Jl())))}),r)}const GC=Zt("$ZodUnion",(e,r)=>{ui.init(e,r),ei(e._zod,"optin",()=>r.options.some(g=>g._zod.optin==="optional")?"optional":void 0),ei(e._zod,"optout",()=>r.options.some(g=>g._zod.optout==="optional")?"optional":void 0),ei(e._zod,"values",()=>{if(r.options.every(g=>g._zod.values))return new Set(r.options.flatMap(g=>Array.from(g._zod.values)))}),ei(e._zod,"pattern",()=>{if(r.options.every(g=>g._zod.pattern)){const g=r.options.map(N=>N._zod.pattern);return new RegExp(`^(${g.map(N=>cg(N.source)).join("|")})$`)}});const i=r.options.length===1,o=r.options[0]._zod.run;e._zod.parse=(g,N)=>{if(i)return o(g,N);let B=!1;const j=[];for(const R of r.options){const d=R._zod.run({value:g.value,issues:[]},N);if(d instanceof Promise)j.push(d),B=!0;else{if(d.issues.length===0)return d;j.push(d)}}return B?Promise.all(j).then(R=>uy(R,g,e,N)):uy(j,g,e,N)}}),KC=Zt("$ZodIntersection",(e,r)=>{ui.init(e,r),e._zod.parse=(i,o)=>{const g=i.value,N=r.left._zod.run({value:g,issues:[]},o),B=r.right._zod.run({value:g,issues:[]},o);return N instanceof Promise||B instanceof Promise?Promise.all([N,B]).then(([R,d])=>dy(i,R,d)):dy(i,N,B)}});function Af(e,r){if(e===r)return{valid:!0,data:e};if(e instanceof Date&&r instanceof Date&&+e==+r)return{valid:!0,data:e};if(Nf(e)&&Nf(r)){const i=Object.keys(r),o=Object.keys(e).filter(N=>i.indexOf(N)!==-1),g={...e,...r};for(const N of o){const B=Af(e[N],r[N]);if(!B.valid)return{valid:!1,mergeErrorPath:[N,...B.mergeErrorPath]};g[N]=B.data}return{valid:!0,data:g}}if(Array.isArray(e)&&Array.isArray(r)){if(e.length!==r.length)return{valid:!1,mergeErrorPath:[]};const i=[];for(let o=0;o<e.length;o++){const g=e[o],N=r[o],B=Af(g,N);if(!B.valid)return{valid:!1,mergeErrorPath:[o,...B.mergeErrorPath]};i.push(B.data)}return{valid:!0,data:i}}return{valid:!1,mergeErrorPath:[]}}function dy(e,r,i){if(r.issues.length&&e.issues.push(...r.issues),i.issues.length&&e.issues.push(...i.issues),Hd(e))return e;const o=Af(r.value,i.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}const YC=Zt("$ZodEnum",(e,r)=>{ui.init(e,r);const i=uk(r.entries),o=new Set(i);e._zod.values=o,e._zod.pattern=new RegExp(`^(${i.filter(g=>hk.has(typeof g)).map(g=>typeof g=="string"?Fu(g):g.toString()).join("|")})$`),e._zod.parse=(g,N)=>{const B=g.value;return o.has(B)||g.issues.push({code:"invalid_value",values:i,input:B,inst:e}),g}}),QC=Zt("$ZodLiteral",(e,r)=>{if(ui.init(e,r),r.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(r.values),e._zod.pattern=new RegExp(`^(${r.values.map(i=>typeof i=="string"?Fu(i):i?Fu(i.toString()):String(i)).join("|")})$`),e._zod.parse=(i,o)=>{const g=i.value;return e._zod.values.has(g)||i.issues.push({code:"invalid_value",values:r.values,input:g,inst:e}),i}}),JC=Zt("$ZodTransform",(e,r)=>{ui.init(e,r),e._zod.parse=(i,o)=>{const g=r.transform(i.value,i);if(o.async)return(g instanceof Promise?g:Promise.resolve(g)).then(B=>(i.value=B,i));if(g instanceof Promise)throw new Zd;return i.value=g,i}});function py(e,r){return e.issues.length&&r===void 0?{issues:[],value:void 0}:e}const XC=Zt("$ZodOptional",(e,r)=>{ui.init(e,r),e._zod.optin="optional",e._zod.optout="optional",ei(e._zod,"values",()=>r.innerType._zod.values?new Set([...r.innerType._zod.values,void 0]):void 0),ei(e._zod,"pattern",()=>{const i=r.innerType._zod.pattern;return i?new RegExp(`^(${cg(i.source)})?$`):void 0}),e._zod.parse=(i,o)=>{if(r.innerType._zod.optin==="optional"){const g=r.innerType._zod.run(i,o);return g instanceof Promise?g.then(N=>py(N,i.value)):py(g,i.value)}return i.value===void 0?i:r.innerType._zod.run(i,o)}}),eT=Zt("$ZodNullable",(e,r)=>{ui.init(e,r),ei(e._zod,"optin",()=>r.innerType._zod.optin),ei(e._zod,"optout",()=>r.innerType._zod.optout),ei(e._zod,"pattern",()=>{const i=r.innerType._zod.pattern;return i?new RegExp(`^(${cg(i.source)}|null)$`):void 0}),ei(e._zod,"values",()=>r.innerType._zod.values?new Set([...r.innerType._zod.values,null]):void 0),e._zod.parse=(i,o)=>i.value===null?i:r.innerType._zod.run(i,o)}),tT=Zt("$ZodDefault",(e,r)=>{ui.init(e,r),e._zod.optin="optional",ei(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(i,o)=>{if(i.value===void 0)return i.value=r.defaultValue,i;const g=r.innerType._zod.run(i,o);return g instanceof Promise?g.then(N=>my(N,r)):my(g,r)}});function my(e,r){return e.value===void 0&&(e.value=r.defaultValue),e}const nT=Zt("$ZodPrefault",(e,r)=>{ui.init(e,r),e._zod.optin="optional",ei(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(i,o)=>(i.value===void 0&&(i.value=r.defaultValue),r.innerType._zod.run(i,o))}),rT=Zt("$ZodNonOptional",(e,r)=>{ui.init(e,r),ei(e._zod,"values",()=>{const i=r.innerType._zod.values;return i?new Set([...i].filter(o=>o!==void 0)):void 0}),e._zod.parse=(i,o)=>{const g=r.innerType._zod.run(i,o);return g instanceof Promise?g.then(N=>hy(N,e)):hy(g,e)}});function hy(e,r){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:r}),e}const aT=Zt("$ZodCatch",(e,r)=>{ui.init(e,r),ei(e._zod,"optin",()=>r.innerType._zod.optin),ei(e._zod,"optout",()=>r.innerType._zod.optout),ei(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(i,o)=>{const g=r.innerType._zod.run(i,o);return g instanceof Promise?g.then(N=>(i.value=N.value,N.issues.length&&(i.value=r.catchValue({...i,error:{issues:N.issues.map(B=>Xl(B,o,Jl()))},input:i.value}),i.issues=[]),i)):(i.value=g.value,g.issues.length&&(i.value=r.catchValue({...i,error:{issues:g.issues.map(N=>Xl(N,o,Jl()))},input:i.value}),i.issues=[]),i)}}),iT=Zt("$ZodPipe",(e,r)=>{ui.init(e,r),ei(e._zod,"values",()=>r.in._zod.values),ei(e._zod,"optin",()=>r.in._zod.optin),ei(e._zod,"optout",()=>r.out._zod.optout),ei(e._zod,"propValues",()=>r.in._zod.propValues),e._zod.parse=(i,o)=>{const g=r.in._zod.run(i,o);return g instanceof Promise?g.then(N=>fy(N,r,o)):fy(g,r,o)}});function fy(e,r,i){return e.issues.length?e:r.out._zod.run({value:e.value,issues:e.issues},i)}const sT=Zt("$ZodReadonly",(e,r)=>{ui.init(e,r),ei(e._zod,"propValues",()=>r.innerType._zod.propValues),ei(e._zod,"values",()=>r.innerType._zod.values),ei(e._zod,"optin",()=>r.innerType._zod.optin),ei(e._zod,"optout",()=>r.innerType._zod.optout),e._zod.parse=(i,o)=>{const g=r.innerType._zod.run(i,o);return g instanceof Promise?g.then(gy):gy(g)}});function gy(e){return e.value=Object.freeze(e.value),e}const oT=Zt("$ZodCustom",(e,r)=>{wo.init(e,r),ui.init(e,r),e._zod.parse=(i,o)=>i,e._zod.check=i=>{const o=i.value,g=r.fn(o);if(g instanceof Promise)return g.then(N=>vy(N,i,o,e));vy(g,i,o,e)}});function vy(e,r,i,o){if(!e){const g={code:"custom",input:i,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(g.params=o._zod.def.params),r.issues.push(Wd(g))}}class cT{constructor(){this._map=new Map,this._idmap=new Map}add(r,...i){const o=i[0];if(this._map.set(r,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,r)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(r){const i=this._map.get(r);return i&&typeof i=="object"&&"id"in i&&this._idmap.delete(i.id),this._map.delete(r),this}get(r){const i=r._zod.parent;if(i){const o={...this.get(i)??{}};delete o.id;const g={...o,...this._map.get(r)};return Object.keys(g).length?g:void 0}return this._map.get(r)}has(r){return this._map.has(r)}}function lT(){return new cT}const Zp=lT();function uT(e,r){return new e({type:"string",...wr(r)})}function dT(e,r){return new e({type:"string",format:"email",check:"string_format",abort:!1,...wr(r)})}function yy(e,r){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...wr(r)})}function pT(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...wr(r)})}function mT(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...wr(r)})}function hT(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...wr(r)})}function fT(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...wr(r)})}function gT(e,r){return new e({type:"string",format:"url",check:"string_format",abort:!1,...wr(r)})}function vT(e,r){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...wr(r)})}function yT(e,r){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...wr(r)})}function _T(e,r){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...wr(r)})}function bT(e,r){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...wr(r)})}function wT(e,r){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...wr(r)})}function ET(e,r){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...wr(r)})}function ST(e,r){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...wr(r)})}function xT(e,r){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...wr(r)})}function RT(e,r){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...wr(r)})}function kT(e,r){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...wr(r)})}function CT(e,r){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...wr(r)})}function TT(e,r){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...wr(r)})}function PT(e,r){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...wr(r)})}function NT(e,r){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...wr(r)})}function AT(e,r){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...wr(r)})}function OT(e,r){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...wr(r)})}function DT(e,r){return new e({type:"string",format:"date",check:"string_format",...wr(r)})}function MT(e,r){return new e({type:"string",format:"time",check:"string_format",precision:null,...wr(r)})}function LT(e,r){return new e({type:"string",format:"duration",check:"string_format",...wr(r)})}function IT(e,r){return new e({type:"number",coerce:!0,checks:[],...wr(r)})}function jT(e,r){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...wr(r)})}function BT(e,r){return new e({type:"boolean",...wr(r)})}function zT(e){return new e({type:"any"})}function UT(e){return new e({type:"unknown"})}function HT(e,r){return new e({type:"never",...wr(r)})}function _y(e,r){return new kb({check:"less_than",...wr(r),value:e,inclusive:!1})}function tf(e,r){return new kb({check:"less_than",...wr(r),value:e,inclusive:!0})}function by(e,r){return new Cb({check:"greater_than",...wr(r),value:e,inclusive:!1})}function nf(e,r){return new Cb({check:"greater_than",...wr(r),value:e,inclusive:!0})}function wy(e,r){return new nC({check:"multiple_of",...wr(r),value:e})}function Nb(e,r){return new aC({check:"max_length",...wr(r),maximum:e})}function _m(e,r){return new iC({check:"min_length",...wr(r),minimum:e})}function Ab(e,r){return new sC({check:"length_equals",...wr(r),length:e})}function FT(e,r){return new oC({check:"string_format",format:"regex",...wr(r),pattern:e})}function VT(e){return new cC({check:"string_format",format:"lowercase",...wr(e)})}function qT(e){return new lC({check:"string_format",format:"uppercase",...wr(e)})}function ZT(e,r){return new uC({check:"string_format",format:"includes",...wr(r),includes:e})}function WT(e,r){return new dC({check:"string_format",format:"starts_with",...wr(r),prefix:e})}function $T(e,r){return new pC({check:"string_format",format:"ends_with",...wr(r),suffix:e})}function np(e){return new mC({check:"overwrite",tx:e})}function GT(e){return np(r=>r.normalize(e))}function KT(){return np(e=>e.trim())}function YT(){return np(e=>e.toLowerCase())}function QT(){return np(e=>e.toUpperCase())}function JT(e,r,i){return new e({type:"array",element:r,...wr(i)})}function XT(e,r,i){return new e({type:"custom",check:"custom",fn:r,...wr(i)})}function e6(e){const r=t6(i=>(i.addIssue=o=>{if(typeof o=="string")i.issues.push(Wd(o,i.value,r._zod.def));else{const g=o;g.fatal&&(g.continue=!1),g.code??(g.code="custom"),g.input??(g.input=i.value),g.inst??(g.inst=r),g.continue??(g.continue=!r._zod.def.abort),i.issues.push(Wd(g))}},e(i.value,i)));return r}function t6(e,r){const i=new wo({check:"custom",...wr(r)});return i._zod.check=e,i}function Ey(e,r){try{var i=e()}catch(o){return r(o)}return i&&i.then?i.then(void 0,r):i}function n6(e,r){for(var i={};e.length;){var o=e[0],g=o.code,N=o.message,B=o.path.join(".");if(!i[B])if("unionErrors"in o){var j=o.unionErrors[0].errors[0];i[B]={message:j.message,type:j.code}}else i[B]={message:N,type:g};if("unionErrors"in o&&o.unionErrors.forEach(function(S){return S.errors.forEach(function(y){return e.push(y)})}),r){var R=i[B].types,d=R&&R[o.code];i[B]=ag(B,r,i,g,d?[].concat(d,o.message):o.message)}e.shift()}return i}function r6(e,r){for(var i={};e.length;){var o=e[0],g=o.code,N=o.message,B=o.path.join(".");if(!i[B])if(o.code==="invalid_union"&&o.errors.length>0){var j=o.errors[0][0];i[B]={message:j.message,type:j.code}}else i[B]={message:N,type:g};if(o.code==="invalid_union"&&o.errors.forEach(function(S){return S.forEach(function(y){return e.push(y)})}),r){var R=i[B].types,d=R&&R[o.code];i[B]=ag(B,r,i,g,d?[].concat(d,o.message):o.message)}e.shift()}return i}function au(e,r,i){if(i===void 0&&(i={}),function(o){return"_def"in o&&typeof o._def=="object"&&"typeName"in o._def}(e))return function(o,g,N){try{return Promise.resolve(Ey(function(){return Promise.resolve(e[i.mode==="sync"?"parse":"parseAsync"](o,r)).then(function(B){return N.shouldUseNativeValidation&&Cf({},N),{errors:{},values:i.raw?Object.assign({},o):B}})},function(B){if(function(j){return Array.isArray(j?.issues)}(B))return{values:{},errors:ay(n6(B.errors,!N.shouldUseNativeValidation&&N.criteriaMode==="all"),N)};throw B}))}catch(B){return Promise.reject(B)}};if(function(o){return"_zod"in o&&typeof o._zod=="object"}(e))return function(o,g,N){try{return Promise.resolve(Ey(function(){return Promise.resolve((i.mode==="sync"?Rk:kk)(e,o,r)).then(function(B){return N.shouldUseNativeValidation&&Cf({},N),{errors:{},values:i.raw?Object.assign({},o):B}})},function(B){if(function(j){return j instanceof ug}(B))return{values:{},errors:ay(r6(B.issues,!N.shouldUseNativeValidation&&N.criteriaMode==="all"),N)};throw B}))}catch(B){return Promise.reject(B)}};throw new Error("Invalid input: not a Zod schema")}const a6=Zt("ZodISODateTime",(e,r)=>{CC.init(e,r),wi.init(e,r)});function i6(e){return OT(a6,e)}const s6=Zt("ZodISODate",(e,r)=>{TC.init(e,r),wi.init(e,r)});function o6(e){return DT(s6,e)}const c6=Zt("ZodISOTime",(e,r)=>{PC.init(e,r),wi.init(e,r)});function l6(e){return MT(c6,e)}const u6=Zt("ZodISODuration",(e,r)=>{NC.init(e,r),wi.init(e,r)});function d6(e){return LT(u6,e)}const p6=(e,r)=>{ug.init(e,r),e.name="ZodError",Object.defineProperties(e,{format:{value:i=>xk(e,i)},flatten:{value:i=>Sk(e,i)},addIssue:{value:i=>{e.issues.push(i),e.message=JSON.stringify(e.issues,Tf,2)}},addIssues:{value:i=>{e.issues.push(...i),e.message=JSON.stringify(e.issues,Tf,2)}},isEmpty:{get(){return e.issues.length===0}}})},Im=Zt("ZodError",p6,{Parent:Error}),m6=yb(Im),h6=_b(Im),f6=bb(Im),g6=wb(Im),Pi=Zt("ZodType",(e,r)=>(ui.init(e,r),e.def=r,Object.defineProperty(e,"_def",{value:r}),e.check=(...i)=>e.clone({...r,checks:[...r.checks??[],...i.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]}),e.clone=(i,o)=>ru(e,i,o),e.brand=()=>e,e.register=(i,o)=>(i.add(e,o),e),e.parse=(i,o)=>m6(e,i,o,{callee:e.parse}),e.safeParse=(i,o)=>f6(e,i,o),e.parseAsync=async(i,o)=>h6(e,i,o,{callee:e.parseAsync}),e.safeParseAsync=async(i,o)=>g6(e,i,o),e.spa=e.safeParseAsync,e.refine=(i,o)=>e.check(c4(i,o)),e.superRefine=i=>e.check(l4(i)),e.overwrite=i=>e.check(np(i)),e.optional=()=>Cy(e),e.nullable=()=>Ty(e),e.nullish=()=>Cy(Ty(e)),e.nonoptional=i=>t4(e,i),e.array=()=>Mb(e),e.or=i=>q6([e,i]),e.and=i=>W6(e,i),e.transform=i=>Py(e,K6(i)),e.default=i=>J6(e,i),e.prefault=i=>e4(e,i),e.catch=i=>r4(e,i),e.pipe=i=>Py(e,i),e.readonly=()=>s4(e),e.describe=i=>{const o=e.clone();return Zp.add(o,{description:i}),o},Object.defineProperty(e,"description",{get(){return Zp.get(e)?.description},configurable:!0}),e.meta=(...i)=>{if(i.length===0)return Zp.get(e);const o=e.clone();return Zp.add(o,i[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Ob=Zt("_ZodString",(e,r)=>{dg.init(e,r),Pi.init(e,r);const i=e._zod.bag;e.format=i.format??null,e.minLength=i.minimum??null,e.maxLength=i.maximum??null,e.regex=(...o)=>e.check(FT(...o)),e.includes=(...o)=>e.check(ZT(...o)),e.startsWith=(...o)=>e.check(WT(...o)),e.endsWith=(...o)=>e.check($T(...o)),e.min=(...o)=>e.check(_m(...o)),e.max=(...o)=>e.check(Nb(...o)),e.length=(...o)=>e.check(Ab(...o)),e.nonempty=(...o)=>e.check(_m(1,...o)),e.lowercase=o=>e.check(VT(o)),e.uppercase=o=>e.check(qT(o)),e.trim=()=>e.check(KT()),e.normalize=(...o)=>e.check(GT(...o)),e.toLowerCase=()=>e.check(YT()),e.toUpperCase=()=>e.check(QT())}),v6=Zt("ZodString",(e,r)=>{dg.init(e,r),Ob.init(e,r),e.email=i=>e.check(dT(y6,i)),e.url=i=>e.check(gT(_6,i)),e.jwt=i=>e.check(AT(M6,i)),e.emoji=i=>e.check(vT(b6,i)),e.guid=i=>e.check(yy(Sy,i)),e.uuid=i=>e.check(pT(Wp,i)),e.uuidv4=i=>e.check(mT(Wp,i)),e.uuidv6=i=>e.check(hT(Wp,i)),e.uuidv7=i=>e.check(fT(Wp,i)),e.nanoid=i=>e.check(yT(w6,i)),e.guid=i=>e.check(yy(Sy,i)),e.cuid=i=>e.check(_T(E6,i)),e.cuid2=i=>e.check(bT(S6,i)),e.ulid=i=>e.check(wT(x6,i)),e.base64=i=>e.check(TT(A6,i)),e.base64url=i=>e.check(PT(O6,i)),e.xid=i=>e.check(ET(R6,i)),e.ksuid=i=>e.check(ST(k6,i)),e.ipv4=i=>e.check(xT(C6,i)),e.ipv6=i=>e.check(RT(T6,i)),e.cidrv4=i=>e.check(kT(P6,i)),e.cidrv6=i=>e.check(CT(N6,i)),e.e164=i=>e.check(NT(D6,i)),e.datetime=i=>e.check(i6(i)),e.date=i=>e.check(o6(i)),e.time=i=>e.check(l6(i)),e.duration=i=>e.check(d6(i))});function ma(e){return uT(v6,e)}const wi=Zt("ZodStringFormat",(e,r)=>{di.init(e,r),Ob.init(e,r)}),y6=Zt("ZodEmail",(e,r)=>{yC.init(e,r),wi.init(e,r)}),Sy=Zt("ZodGUID",(e,r)=>{gC.init(e,r),wi.init(e,r)}),Wp=Zt("ZodUUID",(e,r)=>{vC.init(e,r),wi.init(e,r)}),_6=Zt("ZodURL",(e,r)=>{_C.init(e,r),wi.init(e,r)}),b6=Zt("ZodEmoji",(e,r)=>{bC.init(e,r),wi.init(e,r)}),w6=Zt("ZodNanoID",(e,r)=>{wC.init(e,r),wi.init(e,r)}),E6=Zt("ZodCUID",(e,r)=>{EC.init(e,r),wi.init(e,r)}),S6=Zt("ZodCUID2",(e,r)=>{SC.init(e,r),wi.init(e,r)}),x6=Zt("ZodULID",(e,r)=>{xC.init(e,r),wi.init(e,r)}),R6=Zt("ZodXID",(e,r)=>{RC.init(e,r),wi.init(e,r)}),k6=Zt("ZodKSUID",(e,r)=>{kC.init(e,r),wi.init(e,r)}),C6=Zt("ZodIPv4",(e,r)=>{AC.init(e,r),wi.init(e,r)}),T6=Zt("ZodIPv6",(e,r)=>{OC.init(e,r),wi.init(e,r)}),P6=Zt("ZodCIDRv4",(e,r)=>{DC.init(e,r),wi.init(e,r)}),N6=Zt("ZodCIDRv6",(e,r)=>{MC.init(e,r),wi.init(e,r)}),A6=Zt("ZodBase64",(e,r)=>{LC.init(e,r),wi.init(e,r)}),O6=Zt("ZodBase64URL",(e,r)=>{jC.init(e,r),wi.init(e,r)}),D6=Zt("ZodE164",(e,r)=>{BC.init(e,r),wi.init(e,r)}),M6=Zt("ZodJWT",(e,r)=>{UC.init(e,r),wi.init(e,r)}),Db=Zt("ZodNumber",(e,r)=>{Pb.init(e,r),Pi.init(e,r),e.gt=(o,g)=>e.check(by(o,g)),e.gte=(o,g)=>e.check(nf(o,g)),e.min=(o,g)=>e.check(nf(o,g)),e.lt=(o,g)=>e.check(_y(o,g)),e.lte=(o,g)=>e.check(tf(o,g)),e.max=(o,g)=>e.check(tf(o,g)),e.int=o=>e.check(xy(o)),e.safe=o=>e.check(xy(o)),e.positive=o=>e.check(by(0,o)),e.nonnegative=o=>e.check(nf(0,o)),e.negative=o=>e.check(_y(0,o)),e.nonpositive=o=>e.check(tf(0,o)),e.multipleOf=(o,g)=>e.check(wy(o,g)),e.step=(o,g)=>e.check(wy(o,g)),e.finite=()=>e;const i=e._zod.bag;e.minValue=Math.max(i.minimum??Number.NEGATIVE_INFINITY,i.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(i.maximum??Number.POSITIVE_INFINITY,i.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(i.format??"").includes("int")||Number.isSafeInteger(i.multipleOf??.5),e.isFinite=!0,e.format=i.format??null}),L6=Zt("ZodNumberFormat",(e,r)=>{HC.init(e,r),Db.init(e,r)});function xy(e){return jT(L6,e)}const I6=Zt("ZodBoolean",(e,r)=>{FC.init(e,r),Pi.init(e,r)});function Uu(e){return BT(I6,e)}const j6=Zt("ZodAny",(e,r)=>{VC.init(e,r),Pi.init(e,r)});function Ry(){return zT(j6)}const B6=Zt("ZodUnknown",(e,r)=>{qC.init(e,r),Pi.init(e,r)});function ky(){return UT(B6)}const z6=Zt("ZodNever",(e,r)=>{ZC.init(e,r),Pi.init(e,r)});function U6(e){return HT(z6,e)}const H6=Zt("ZodArray",(e,r)=>{WC.init(e,r),Pi.init(e,r),e.element=r.element,e.min=(i,o)=>e.check(_m(i,o)),e.nonempty=i=>e.check(_m(1,i)),e.max=(i,o)=>e.check(Nb(i,o)),e.length=(i,o)=>e.check(Ab(i,o)),e.unwrap=()=>e.element});function Mb(e,r){return JT(H6,e,r)}const F6=Zt("ZodObject",(e,r)=>{$C.init(e,r),Pi.init(e,r),ei(e,"shape",()=>r.shape),e.keyof=()=>bm(Object.keys(e._zod.def.shape)),e.catchall=i=>e.clone({...e._zod.def,catchall:i}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ky()}),e.loose=()=>e.clone({...e._zod.def,catchall:ky()}),e.strict=()=>e.clone({...e._zod.def,catchall:U6()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=i=>_k(e,i),e.merge=i=>bk(e,i),e.pick=i=>vk(e,i),e.omit=i=>yk(e,i),e.partial=(...i)=>wk(Ib,e,i[0]),e.required=(...i)=>Ek(jb,e,i[0])});function nl(e,r){const i={type:"object",get shape(){return nu(this,"shape",e?pk(e):{}),this.shape},...wr(r)};return new F6(i)}const V6=Zt("ZodUnion",(e,r)=>{GC.init(e,r),Pi.init(e,r),e.options=r.options});function q6(e,r){return new V6({type:"union",options:e,...wr(r)})}const Z6=Zt("ZodIntersection",(e,r)=>{KC.init(e,r),Pi.init(e,r)});function W6(e,r){return new Z6({type:"intersection",left:e,right:r})}const Of=Zt("ZodEnum",(e,r)=>{YC.init(e,r),Pi.init(e,r),e.enum=r.entries,e.options=Object.values(r.entries);const i=new Set(Object.keys(r.entries));e.extract=(o,g)=>{const N={};for(const B of o)if(i.has(B))N[B]=r.entries[B];else throw new Error(`Key ${B} not found in enum`);return new Of({...r,checks:[],...wr(g),entries:N})},e.exclude=(o,g)=>{const N={...r.entries};for(const B of o)if(i.has(B))delete N[B];else throw new Error(`Key ${B} not found in enum`);return new Of({...r,checks:[],...wr(g),entries:N})}});function bm(e,r){const i=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Of({type:"enum",entries:i,...wr(r)})}const $6=Zt("ZodLiteral",(e,r)=>{QC.init(e,r),Pi.init(e,r),e.values=new Set(r.values),Object.defineProperty(e,"value",{get(){if(r.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return r.values[0]}})});function Lb(e,r){return new $6({type:"literal",values:Array.isArray(e)?e:[e],...wr(r)})}const G6=Zt("ZodTransform",(e,r)=>{JC.init(e,r),Pi.init(e,r),e._zod.parse=(i,o)=>{i.addIssue=N=>{if(typeof N=="string")i.issues.push(Wd(N,i.value,r));else{const B=N;B.fatal&&(B.continue=!1),B.code??(B.code="custom"),B.input??(B.input=i.value),B.inst??(B.inst=e),i.issues.push(Wd(B))}};const g=r.transform(i.value,i);return g instanceof Promise?g.then(N=>(i.value=N,i)):(i.value=g,i)}});function K6(e){return new G6({type:"transform",transform:e})}const Ib=Zt("ZodOptional",(e,r)=>{XC.init(e,r),Pi.init(e,r),e.unwrap=()=>e._zod.def.innerType});function Cy(e){return new Ib({type:"optional",innerType:e})}const Y6=Zt("ZodNullable",(e,r)=>{eT.init(e,r),Pi.init(e,r),e.unwrap=()=>e._zod.def.innerType});function Ty(e){return new Y6({type:"nullable",innerType:e})}const Q6=Zt("ZodDefault",(e,r)=>{tT.init(e,r),Pi.init(e,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function J6(e,r){return new Q6({type:"default",innerType:e,get defaultValue(){return typeof r=="function"?r():r}})}const X6=Zt("ZodPrefault",(e,r)=>{nT.init(e,r),Pi.init(e,r),e.unwrap=()=>e._zod.def.innerType});function e4(e,r){return new X6({type:"prefault",innerType:e,get defaultValue(){return typeof r=="function"?r():r}})}const jb=Zt("ZodNonOptional",(e,r)=>{rT.init(e,r),Pi.init(e,r),e.unwrap=()=>e._zod.def.innerType});function t4(e,r){return new jb({type:"nonoptional",innerType:e,...wr(r)})}const n4=Zt("ZodCatch",(e,r)=>{aT.init(e,r),Pi.init(e,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function r4(e,r){return new n4({type:"catch",innerType:e,catchValue:typeof r=="function"?r:()=>r})}const a4=Zt("ZodPipe",(e,r)=>{iT.init(e,r),Pi.init(e,r),e.in=r.in,e.out=r.out});function Py(e,r){return new a4({type:"pipe",in:e,out:r})}const i4=Zt("ZodReadonly",(e,r)=>{sT.init(e,r),Pi.init(e,r),e.unwrap=()=>e._zod.def.innerType});function s4(e){return new i4({type:"readonly",innerType:e})}const o4=Zt("ZodCustom",(e,r)=>{oT.init(e,r),Pi.init(e,r)});function c4(e,r={}){return XT(o4,e,r)}function l4(e){return e6(e)}function Fd(e){return IT(Db,e)}const Bb=nl({identifier:ma().min(1,"Email or PMDC is required").trim(),password:ma().min(6,"Password must be at least 6 characters long")});function Pl(e,r,{checkForDefaultPrevented:i=!0}={}){return function(g){if(e?.(g),i===!1||!g.defaultPrevented)return r?.(g)}}function Ny(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function zb(...e){return r=>{let i=!1;const o=e.map(g=>{const N=Ny(g,r);return!i&&typeof N=="function"&&(i=!0),N});if(i)return()=>{for(let g=0;g<o.length;g++){const N=o[g];typeof N=="function"?N():Ny(e[g],null)}}}}function iu(...e){return ne.useCallback(zb(...e),e)}var rf={exports:{}},Ld={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function u4(){if(Ay)return Ld;Ay=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(o,g,N){var B=null;if(N!==void 0&&(B=""+N),g.key!==void 0&&(B=""+g.key),"key"in g){N={};for(var j in g)j!=="key"&&(N[j]=g[j])}else N=g;return g=N.ref,{$$typeof:e,type:o,key:B,ref:g!==void 0?g:null,props:N}}return Ld.Fragment=r,Ld.jsx=i,Ld.jsxs=i,Ld}var Oy;function d4(){return Oy||(Oy=1,rf.exports=u4()),rf.exports}var wa=d4();function p4(e,r){const i=ne.createContext(r),o=N=>{const{children:B,...j}=N,R=ne.useMemo(()=>j,Object.values(j));return wa.jsx(i.Provider,{value:R,children:B})};o.displayName=e+"Provider";function g(N){const B=ne.useContext(i);if(B)return B;if(r!==void 0)return r;throw new Error(`\`${N}\` must be used within \`${e}\``)}return[o,g]}function m4(e,r=[]){let i=[];function o(N,B){const j=ne.createContext(B),R=i.length;i=[...i,B];const d=y=>{const{scope:b,children:T,...f}=y,h=b?.[e]?.[R]||j,k=ne.useMemo(()=>f,Object.values(f));return wa.jsx(h.Provider,{value:k,children:T})};d.displayName=N+"Provider";function S(y,b){const T=b?.[e]?.[R]||j,f=ne.useContext(T);if(f)return f;if(B!==void 0)return B;throw new Error(`\`${y}\` must be used within \`${N}\``)}return[d,S]}const g=()=>{const N=i.map(B=>ne.createContext(B));return function(j){const R=j?.[e]||N;return ne.useMemo(()=>({[`__scope${e}`]:{...j,[e]:R}}),[j,R])}};return g.scopeName=e,[o,h4(g,...r)]}function h4(...e){const r=e[0];if(e.length===1)return r;const i=()=>{const o=e.map(g=>({useScope:g(),scopeName:g.scopeName}));return function(N){const B=o.reduce((j,{useScope:R,scopeName:d})=>{const y=R(N)[`__scope${d}`];return{...j,...y}},{});return ne.useMemo(()=>({[`__scope${r.scopeName}`]:B}),[B])}};return i.scopeName=r.scopeName,i}var $d=globalThis?.document?ne.useLayoutEffect:()=>{},f4=n_[" useId ".trim().toString()]||(()=>{}),g4=0;function af(e){const[r,i]=ne.useState(f4());return $d(()=>{i(o=>o??String(g4++))},[e]),e||(r?`radix-${r}`:"")}var v4=n_[" useInsertionEffect ".trim().toString()]||$d;function y4({prop:e,defaultProp:r,onChange:i=()=>{},caller:o}){const[g,N,B]=_4({defaultProp:r,onChange:i}),j=e!==void 0,R=j?e:g;{const S=ne.useRef(e!==void 0);ne.useEffect(()=>{const y=S.current;y!==j&&console.warn(`${o} is changing from ${y?"controlled":"uncontrolled"} to ${j?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),S.current=j},[j,o])}const d=ne.useCallback(S=>{if(j){const y=b4(S)?S(e):S;y!==e&&B.current?.(y)}else N(S)},[j,e,N,B]);return[R,d]}function _4({defaultProp:e,onChange:r}){const[i,o]=ne.useState(e),g=ne.useRef(i),N=ne.useRef(r);return v4(()=>{N.current=r},[r]),ne.useEffect(()=>{g.current!==i&&(N.current?.(i),g.current=i)},[i,g]),[i,o,N]}function b4(e){return typeof e=="function"}function Ub(e){const r=w4(e),i=ne.forwardRef((o,g)=>{const{children:N,...B}=o,j=ne.Children.toArray(N),R=j.find(S4);if(R){const d=R.props.children,S=j.map(y=>y===R?ne.Children.count(d)>1?ne.Children.only(null):ne.isValidElement(d)?d.props.children:null:y);return wa.jsx(r,{...B,ref:g,children:ne.isValidElement(d)?ne.cloneElement(d,void 0,S):null})}return wa.jsx(r,{...B,ref:g,children:N})});return i.displayName=`${e}.Slot`,i}function w4(e){const r=ne.forwardRef((i,o)=>{const{children:g,...N}=i;if(ne.isValidElement(g)){const B=R4(g),j=x4(N,g.props);return g.type!==ne.Fragment&&(j.ref=o?zb(o,B):B),ne.cloneElement(g,j)}return ne.Children.count(g)>1?ne.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var E4=Symbol("radix.slottable");function S4(e){return ne.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===E4}function x4(e,r){const i={...r};for(const o in r){const g=e[o],N=r[o];/^on[A-Z]/.test(o)?g&&N?i[o]=(...j)=>{const R=N(...j);return g(...j),R}:g&&(i[o]=g):o==="style"?i[o]={...g,...N}:o==="className"&&(i[o]=[g,N].filter(Boolean).join(" "))}return{...e,...i}}function R4(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var k4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],al=k4.reduce((e,r)=>{const i=Ub(`Primitive.${r}`),o=ne.forwardRef((g,N)=>{const{asChild:B,...j}=g,R=B?i:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),wa.jsx(R,{...j,ref:N})});return o.displayName=`Primitive.${r}`,{...e,[r]:o}},{});function C4(e,r){e&&__.flushSync(()=>e.dispatchEvent(r))}function Gd(e){const r=ne.useRef(e);return ne.useEffect(()=>{r.current=e}),ne.useMemo(()=>(...i)=>r.current?.(...i),[])}function T4(e,r=globalThis?.document){const i=Gd(e);ne.useEffect(()=>{const o=g=>{g.key==="Escape"&&i(g)};return r.addEventListener("keydown",o,{capture:!0}),()=>r.removeEventListener("keydown",o,{capture:!0})},[i,r])}var P4="DismissableLayer",Df="dismissableLayer.update",N4="dismissableLayer.pointerDownOutside",A4="dismissableLayer.focusOutside",Dy,Hb=ne.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fb=ne.forwardRef((e,r)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:o,onPointerDownOutside:g,onFocusOutside:N,onInteractOutside:B,onDismiss:j,...R}=e,d=ne.useContext(Hb),[S,y]=ne.useState(null),b=S?.ownerDocument??globalThis?.document,[,T]=ne.useState({}),f=iu(r,C=>y(C)),h=Array.from(d.layers),[k]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),E=h.indexOf(k),H=S?h.indexOf(S):-1,m=d.layersWithOutsidePointerEventsDisabled.size>0,P=H>=E,v=M4(C=>{const _=C.target,w=[...d.branches].some(p=>p.contains(_));!P||w||(g?.(C),B?.(C),C.defaultPrevented||j?.())},b),U=L4(C=>{const _=C.target;[...d.branches].some(p=>p.contains(_))||(N?.(C),B?.(C),C.defaultPrevented||j?.())},b);return T4(C=>{H===d.layers.size-1&&(o?.(C),!C.defaultPrevented&&j&&(C.preventDefault(),j()))},b),ne.useEffect(()=>{if(S)return i&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Dy=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(S)),d.layers.add(S),My(),()=>{i&&d.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Dy)}},[S,b,i,d]),ne.useEffect(()=>()=>{S&&(d.layers.delete(S),d.layersWithOutsidePointerEventsDisabled.delete(S),My())},[S,d]),ne.useEffect(()=>{const C=()=>T({});return document.addEventListener(Df,C),()=>document.removeEventListener(Df,C)},[]),wa.jsx(al.div,{...R,ref:f,style:{pointerEvents:m?P?"auto":"none":void 0,...e.style},onFocusCapture:Pl(e.onFocusCapture,U.onFocusCapture),onBlurCapture:Pl(e.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Pl(e.onPointerDownCapture,v.onPointerDownCapture)})});Fb.displayName=P4;var O4="DismissableLayerBranch",D4=ne.forwardRef((e,r)=>{const i=ne.useContext(Hb),o=ne.useRef(null),g=iu(r,o);return ne.useEffect(()=>{const N=o.current;if(N)return i.branches.add(N),()=>{i.branches.delete(N)}},[i.branches]),wa.jsx(al.div,{...e,ref:g})});D4.displayName=O4;function M4(e,r=globalThis?.document){const i=Gd(e),o=ne.useRef(!1),g=ne.useRef(()=>{});return ne.useEffect(()=>{const N=j=>{if(j.target&&!o.current){let R=function(){Vb(N4,i,d,{discrete:!0})};const d={originalEvent:j};j.pointerType==="touch"?(r.removeEventListener("click",g.current),g.current=R,r.addEventListener("click",g.current,{once:!0})):R()}else r.removeEventListener("click",g.current);o.current=!1},B=window.setTimeout(()=>{r.addEventListener("pointerdown",N)},0);return()=>{window.clearTimeout(B),r.removeEventListener("pointerdown",N),r.removeEventListener("click",g.current)}},[r,i]),{onPointerDownCapture:()=>o.current=!0}}function L4(e,r=globalThis?.document){const i=Gd(e),o=ne.useRef(!1);return ne.useEffect(()=>{const g=N=>{N.target&&!o.current&&Vb(A4,i,{originalEvent:N},{discrete:!1})};return r.addEventListener("focusin",g),()=>r.removeEventListener("focusin",g)},[r,i]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function My(){const e=new CustomEvent(Df);document.dispatchEvent(e)}function Vb(e,r,i,{discrete:o}){const g=i.originalEvent.target,N=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});r&&g.addEventListener(e,r,{once:!0}),o?C4(g,N):g.dispatchEvent(N)}var sf="focusScope.autoFocusOnMount",of="focusScope.autoFocusOnUnmount",Ly={bubbles:!1,cancelable:!0},I4="FocusScope",qb=ne.forwardRef((e,r)=>{const{loop:i=!1,trapped:o=!1,onMountAutoFocus:g,onUnmountAutoFocus:N,...B}=e,[j,R]=ne.useState(null),d=Gd(g),S=Gd(N),y=ne.useRef(null),b=iu(r,h=>R(h)),T=ne.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ne.useEffect(()=>{if(o){let h=function(m){if(T.paused||!j)return;const P=m.target;j.contains(P)?y.current=P:Cl(y.current,{select:!0})},k=function(m){if(T.paused||!j)return;const P=m.relatedTarget;P!==null&&(j.contains(P)||Cl(y.current,{select:!0}))},E=function(m){if(document.activeElement===document.body)for(const v of m)v.removedNodes.length>0&&Cl(j)};document.addEventListener("focusin",h),document.addEventListener("focusout",k);const H=new MutationObserver(E);return j&&H.observe(j,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",k),H.disconnect()}}},[o,j,T.paused]),ne.useEffect(()=>{if(j){jy.add(T);const h=document.activeElement;if(!j.contains(h)){const E=new CustomEvent(sf,Ly);j.addEventListener(sf,d),j.dispatchEvent(E),E.defaultPrevented||(j4(F4(Zb(j)),{select:!0}),document.activeElement===h&&Cl(j))}return()=>{j.removeEventListener(sf,d),setTimeout(()=>{const E=new CustomEvent(of,Ly);j.addEventListener(of,S),j.dispatchEvent(E),E.defaultPrevented||Cl(h??document.body,{select:!0}),j.removeEventListener(of,S),jy.remove(T)},0)}}},[j,d,S,T]);const f=ne.useCallback(h=>{if(!i&&!o||T.paused)return;const k=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,E=document.activeElement;if(k&&E){const H=h.currentTarget,[m,P]=B4(H);m&&P?!h.shiftKey&&E===P?(h.preventDefault(),i&&Cl(m,{select:!0})):h.shiftKey&&E===m&&(h.preventDefault(),i&&Cl(P,{select:!0})):E===H&&h.preventDefault()}},[i,o,T.paused]);return wa.jsx(al.div,{tabIndex:-1,...B,ref:b,onKeyDown:f})});qb.displayName=I4;function j4(e,{select:r=!1}={}){const i=document.activeElement;for(const o of e)if(Cl(o,{select:r}),document.activeElement!==i)return}function B4(e){const r=Zb(e),i=Iy(r,e),o=Iy(r.reverse(),e);return[i,o]}function Zb(e){const r=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const g=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||g?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)r.push(i.currentNode);return r}function Iy(e,r){for(const i of e)if(!z4(i,{upTo:r}))return i}function z4(e,{upTo:r}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(r!==void 0&&e===r)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function U4(e){return e instanceof HTMLInputElement&&"select"in e}function Cl(e,{select:r=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&U4(e)&&r&&e.select()}}var jy=H4();function H4(){let e=[];return{add(r){const i=e[0];r!==i&&i?.pause(),e=By(e,r),e.unshift(r)},remove(r){e=By(e,r),e[0]?.resume()}}}function By(e,r){const i=[...e],o=i.indexOf(r);return o!==-1&&i.splice(o,1),i}function F4(e){return e.filter(r=>r.tagName!=="A")}var V4="Portal",Wb=ne.forwardRef((e,r)=>{const{container:i,...o}=e,[g,N]=ne.useState(!1);$d(()=>N(!0),[]);const B=i||g&&globalThis?.document?.body;return B?b_.createPortal(wa.jsx(al.div,{...o,ref:r}),B):null});Wb.displayName=V4;function q4(e,r){return ne.useReducer((i,o)=>r[i][o]??i,e)}var jm=e=>{const{present:r,children:i}=e,o=Z4(r),g=typeof i=="function"?i({present:o.isPresent}):ne.Children.only(i),N=iu(o.ref,W4(g));return typeof i=="function"||o.isPresent?ne.cloneElement(g,{ref:N}):null};jm.displayName="Presence";function Z4(e){const[r,i]=ne.useState(),o=ne.useRef(null),g=ne.useRef(e),N=ne.useRef("none"),B=e?"mounted":"unmounted",[j,R]=q4(B,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ne.useEffect(()=>{const d=$p(o.current);N.current=j==="mounted"?d:"none"},[j]),$d(()=>{const d=o.current,S=g.current;if(S!==e){const b=N.current,T=$p(d);e?R("MOUNT"):T==="none"||d?.display==="none"?R("UNMOUNT"):R(S&&b!==T?"ANIMATION_OUT":"UNMOUNT"),g.current=e}},[e,R]),$d(()=>{if(r){let d;const S=r.ownerDocument.defaultView??window,y=T=>{const h=$p(o.current).includes(T.animationName);if(T.target===r&&h&&(R("ANIMATION_END"),!g.current)){const k=r.style.animationFillMode;r.style.animationFillMode="forwards",d=S.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=k)})}},b=T=>{T.target===r&&(N.current=$p(o.current))};return r.addEventListener("animationstart",b),r.addEventListener("animationcancel",y),r.addEventListener("animationend",y),()=>{S.clearTimeout(d),r.removeEventListener("animationstart",b),r.removeEventListener("animationcancel",y),r.removeEventListener("animationend",y)}}else R("ANIMATION_END")},[r,R]),{isPresent:["mounted","unmountSuspended"].includes(j),ref:ne.useCallback(d=>{o.current=d?getComputedStyle(d):null,i(d)},[])}}function $p(e){return e?.animationName||"none"}function W4(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var cf=0;function $4(){ne.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??zy()),document.body.insertAdjacentElement("beforeend",e[1]??zy()),cf++,()=>{cf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),cf--}},[])}function zy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Nc=function(){return Nc=Object.assign||function(r){for(var i,o=1,g=arguments.length;o<g;o++){i=arguments[o];for(var N in i)Object.prototype.hasOwnProperty.call(i,N)&&(r[N]=i[N])}return r},Nc.apply(this,arguments)};function $b(e,r){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,o=Object.getOwnPropertySymbols(e);g<o.length;g++)r.indexOf(o[g])<0&&Object.prototype.propertyIsEnumerable.call(e,o[g])&&(i[o[g]]=e[o[g]]);return i}function G4(e,r,i){if(i||arguments.length===2)for(var o=0,g=r.length,N;o<g;o++)(N||!(o in r))&&(N||(N=Array.prototype.slice.call(r,0,o)),N[o]=r[o]);return e.concat(N||Array.prototype.slice.call(r))}var lm="right-scroll-bar-position",um="width-before-scroll-bar",K4="with-scroll-bars-hidden",Y4="--removed-body-scroll-bar-size";function lf(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function Q4(e,r){var i=ne.useState(function(){return{value:e,callback:r,facade:{get current(){return i.value},set current(o){var g=i.value;g!==o&&(i.value=o,i.callback(o,g))}}}})[0];return i.callback=r,i.facade}var J4=typeof window<"u"?ne.useLayoutEffect:ne.useEffect,Uy=new WeakMap;function X4(e,r){var i=Q4(null,function(o){return e.forEach(function(g){return lf(g,o)})});return J4(function(){var o=Uy.get(i);if(o){var g=new Set(o),N=new Set(e),B=i.current;g.forEach(function(j){N.has(j)||lf(j,null)}),N.forEach(function(j){g.has(j)||lf(j,B)})}Uy.set(i,e)},[e]),i}function e3(e){return e}function t3(e,r){r===void 0&&(r=e3);var i=[],o=!1,g={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(N){var B=r(N,o);return i.push(B),function(){i=i.filter(function(j){return j!==B})}},assignSyncMedium:function(N){for(o=!0;i.length;){var B=i;i=[],B.forEach(N)}i={push:function(j){return N(j)},filter:function(){return i}}},assignMedium:function(N){o=!0;var B=[];if(i.length){var j=i;i=[],j.forEach(N),B=i}var R=function(){var S=B;B=[],S.forEach(N)},d=function(){return Promise.resolve().then(R)};d(),i={push:function(S){B.push(S),d()},filter:function(S){return B=B.filter(S),i}}}};return g}function n3(e){e===void 0&&(e={});var r=t3(null);return r.options=Nc({async:!0,ssr:!1},e),r}var Gb=function(e){var r=e.sideCar,i=$b(e,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=r.read();if(!o)throw new Error("Sidecar medium not found");return ne.createElement(o,Nc({},i))};Gb.isSideCarExport=!0;function r3(e,r){return e.useMedium(r),Gb}var Kb=n3(),uf=function(){},Bm=ne.forwardRef(function(e,r){var i=ne.useRef(null),o=ne.useState({onScrollCapture:uf,onWheelCapture:uf,onTouchMoveCapture:uf}),g=o[0],N=o[1],B=e.forwardProps,j=e.children,R=e.className,d=e.removeScrollBar,S=e.enabled,y=e.shards,b=e.sideCar,T=e.noRelative,f=e.noIsolation,h=e.inert,k=e.allowPinchZoom,E=e.as,H=E===void 0?"div":E,m=e.gapMode,P=$b(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=b,U=X4([i,r]),C=Nc(Nc({},P),g);return ne.createElement(ne.Fragment,null,S&&ne.createElement(v,{sideCar:Kb,removeScrollBar:d,shards:y,noRelative:T,noIsolation:f,inert:h,setCallbacks:N,allowPinchZoom:!!k,lockRef:i,gapMode:m}),B?ne.cloneElement(ne.Children.only(j),Nc(Nc({},C),{ref:U})):ne.createElement(H,Nc({},C,{className:R,ref:U}),j))});Bm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bm.classNames={fullWidth:um,zeroRight:lm};var a3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function i3(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var r=a3();return r&&e.setAttribute("nonce",r),e}function s3(e,r){e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r))}function o3(e){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(e)}var c3=function(){var e=0,r=null;return{add:function(i){e==0&&(r=i3())&&(s3(r,i),o3(r)),e++},remove:function(){e--,!e&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},l3=function(){var e=c3();return function(r,i){ne.useEffect(function(){return e.add(r),function(){e.remove()}},[r&&i])}},Yb=function(){var e=l3(),r=function(i){var o=i.styles,g=i.dynamic;return e(o,g),null};return r},u3={left:0,top:0,right:0,gap:0},df=function(e){return parseInt(e||"",10)||0},d3=function(e){var r=window.getComputedStyle(document.body),i=r[e==="padding"?"paddingLeft":"marginLeft"],o=r[e==="padding"?"paddingTop":"marginTop"],g=r[e==="padding"?"paddingRight":"marginRight"];return[df(i),df(o),df(g)]},p3=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return u3;var r=d3(e),i=document.documentElement.clientWidth,o=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,o-i+r[2]-r[0])}},m3=Yb(),Hu="data-scroll-locked",h3=function(e,r,i,o){var g=e.left,N=e.top,B=e.right,j=e.gap;return i===void 0&&(i="margin"),`
  .`.concat(K4,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(j,"px ").concat(o,`;
  }
  body[`).concat(Hu,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(o,";"),i==="margin"&&`
    padding-left: `.concat(g,`px;
    padding-top: `).concat(N,`px;
    padding-right: `).concat(B,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(j,"px ").concat(o,`;
    `),i==="padding"&&"padding-right: ".concat(j,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lm,` {
    right: `).concat(j,"px ").concat(o,`;
  }
  
  .`).concat(um,` {
    margin-right: `).concat(j,"px ").concat(o,`;
  }
  
  .`).concat(lm," .").concat(lm,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(um," .").concat(um,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(Hu,`] {
    `).concat(Y4,": ").concat(j,`px;
  }
`)},Hy=function(){var e=parseInt(document.body.getAttribute(Hu)||"0",10);return isFinite(e)?e:0},f3=function(){ne.useEffect(function(){return document.body.setAttribute(Hu,(Hy()+1).toString()),function(){var e=Hy()-1;e<=0?document.body.removeAttribute(Hu):document.body.setAttribute(Hu,e.toString())}},[])},g3=function(e){var r=e.noRelative,i=e.noImportant,o=e.gapMode,g=o===void 0?"margin":o;f3();var N=ne.useMemo(function(){return p3(g)},[g]);return ne.createElement(m3,{styles:h3(N,!r,g,i?"":"!important")})},Mf=!1;if(typeof window<"u")try{var Gp=Object.defineProperty({},"passive",{get:function(){return Mf=!0,!0}});window.addEventListener("test",Gp,Gp),window.removeEventListener("test",Gp,Gp)}catch{Mf=!1}var Iu=Mf?{passive:!1}:!1,v3=function(e){return e.tagName==="TEXTAREA"},Qb=function(e,r){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[r]!=="hidden"&&!(i.overflowY===i.overflowX&&!v3(e)&&i[r]==="visible")},y3=function(e){return Qb(e,"overflowY")},_3=function(e){return Qb(e,"overflowX")},Fy=function(e,r){var i=r.ownerDocument,o=r;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var g=Jb(e,o);if(g){var N=Xb(e,o),B=N[1],j=N[2];if(B>j)return!0}o=o.parentNode}while(o&&o!==i.body);return!1},b3=function(e){var r=e.scrollTop,i=e.scrollHeight,o=e.clientHeight;return[r,i,o]},w3=function(e){var r=e.scrollLeft,i=e.scrollWidth,o=e.clientWidth;return[r,i,o]},Jb=function(e,r){return e==="v"?y3(r):_3(r)},Xb=function(e,r){return e==="v"?b3(r):w3(r)},E3=function(e,r){return e==="h"&&r==="rtl"?-1:1},S3=function(e,r,i,o,g){var N=E3(e,window.getComputedStyle(r).direction),B=N*o,j=i.target,R=r.contains(j),d=!1,S=B>0,y=0,b=0;do{if(!j)break;var T=Xb(e,j),f=T[0],h=T[1],k=T[2],E=h-k-N*f;(f||E)&&Jb(e,j)&&(y+=E,b+=f);var H=j.parentNode;j=H&&H.nodeType===Node.DOCUMENT_FRAGMENT_NODE?H.host:H}while(!R&&j!==document.body||R&&(r.contains(j)||r===j));return(S&&Math.abs(y)<1||!S&&Math.abs(b)<1)&&(d=!0),d},Kp=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Vy=function(e){return[e.deltaX,e.deltaY]},qy=function(e){return e&&"current"in e?e.current:e},x3=function(e,r){return e[0]===r[0]&&e[1]===r[1]},R3=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},k3=0,ju=[];function C3(e){var r=ne.useRef([]),i=ne.useRef([0,0]),o=ne.useRef(),g=ne.useState(k3++)[0],N=ne.useState(Yb)[0],B=ne.useRef(e);ne.useEffect(function(){B.current=e},[e]),ne.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(g));var h=G4([e.lockRef.current],(e.shards||[]).map(qy),!0).filter(Boolean);return h.forEach(function(k){return k.classList.add("allow-interactivity-".concat(g))}),function(){document.body.classList.remove("block-interactivity-".concat(g)),h.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(g))})}}},[e.inert,e.lockRef.current,e.shards]);var j=ne.useCallback(function(h,k){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!B.current.allowPinchZoom;var E=Kp(h),H=i.current,m="deltaX"in h?h.deltaX:H[0]-E[0],P="deltaY"in h?h.deltaY:H[1]-E[1],v,U=h.target,C=Math.abs(m)>Math.abs(P)?"h":"v";if("touches"in h&&C==="h"&&U.type==="range")return!1;var _=Fy(C,U);if(!_)return!0;if(_?v=C:(v=C==="v"?"h":"v",_=Fy(C,U)),!_)return!1;if(!o.current&&"changedTouches"in h&&(m||P)&&(o.current=v),!v)return!0;var w=o.current||v;return S3(w,k,h,w==="h"?m:P)},[]),R=ne.useCallback(function(h){var k=h;if(!(!ju.length||ju[ju.length-1]!==N)){var E="deltaY"in k?Vy(k):Kp(k),H=r.current.filter(function(v){return v.name===k.type&&(v.target===k.target||k.target===v.shadowParent)&&x3(v.delta,E)})[0];if(H&&H.should){k.cancelable&&k.preventDefault();return}if(!H){var m=(B.current.shards||[]).map(qy).filter(Boolean).filter(function(v){return v.contains(k.target)}),P=m.length>0?j(k,m[0]):!B.current.noIsolation;P&&k.cancelable&&k.preventDefault()}}},[]),d=ne.useCallback(function(h,k,E,H){var m={name:h,delta:k,target:E,should:H,shadowParent:T3(E)};r.current.push(m),setTimeout(function(){r.current=r.current.filter(function(P){return P!==m})},1)},[]),S=ne.useCallback(function(h){i.current=Kp(h),o.current=void 0},[]),y=ne.useCallback(function(h){d(h.type,Vy(h),h.target,j(h,e.lockRef.current))},[]),b=ne.useCallback(function(h){d(h.type,Kp(h),h.target,j(h,e.lockRef.current))},[]);ne.useEffect(function(){return ju.push(N),e.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:b}),document.addEventListener("wheel",R,Iu),document.addEventListener("touchmove",R,Iu),document.addEventListener("touchstart",S,Iu),function(){ju=ju.filter(function(h){return h!==N}),document.removeEventListener("wheel",R,Iu),document.removeEventListener("touchmove",R,Iu),document.removeEventListener("touchstart",S,Iu)}},[]);var T=e.removeScrollBar,f=e.inert;return ne.createElement(ne.Fragment,null,f?ne.createElement(N,{styles:R3(g)}):null,T?ne.createElement(g3,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function T3(e){for(var r=null;e!==null;)e instanceof ShadowRoot&&(r=e.host,e=e.host),e=e.parentNode;return r}const P3=r3(Kb,C3);var e1=ne.forwardRef(function(e,r){return ne.createElement(Bm,Nc({},e,{ref:r,sideCar:P3}))});e1.classNames=Bm.classNames;var N3=function(e){if(typeof document>"u")return null;var r=Array.isArray(e)?e[0]:e;return r.ownerDocument.body},Bu=new WeakMap,Yp=new WeakMap,Qp={},pf=0,t1=function(e){return e&&(e.host||t1(e.parentNode))},A3=function(e,r){return r.map(function(i){if(e.contains(i))return i;var o=t1(i);return o&&e.contains(o)?o:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},O3=function(e,r,i,o){var g=A3(r,Array.isArray(e)?e:[e]);Qp[i]||(Qp[i]=new WeakMap);var N=Qp[i],B=[],j=new Set,R=new Set(g),d=function(y){!y||j.has(y)||(j.add(y),d(y.parentNode))};g.forEach(d);var S=function(y){!y||R.has(y)||Array.prototype.forEach.call(y.children,function(b){if(j.has(b))S(b);else try{var T=b.getAttribute(o),f=T!==null&&T!=="false",h=(Bu.get(b)||0)+1,k=(N.get(b)||0)+1;Bu.set(b,h),N.set(b,k),B.push(b),h===1&&f&&Yp.set(b,!0),k===1&&b.setAttribute(i,"true"),f||b.setAttribute(o,"true")}catch(E){console.error("aria-hidden: cannot operate on ",b,E)}})};return S(r),j.clear(),pf++,function(){B.forEach(function(y){var b=Bu.get(y)-1,T=N.get(y)-1;Bu.set(y,b),N.set(y,T),b||(Yp.has(y)||y.removeAttribute(o),Yp.delete(y)),T||y.removeAttribute(i)}),pf--,pf||(Bu=new WeakMap,Bu=new WeakMap,Yp=new WeakMap,Qp={})}},D3=function(e,r,i){i===void 0&&(i="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),g=N3(e);return g?(o.push.apply(o,Array.from(g.querySelectorAll("[aria-live], script"))),O3(o,g,i,"aria-hidden")):function(){return null}},zm="Dialog",[n1,RA]=m4(zm),[M3,_c]=n1(zm),r1=e=>{const{__scopeDialog:r,children:i,open:o,defaultOpen:g,onOpenChange:N,modal:B=!0}=e,j=ne.useRef(null),R=ne.useRef(null),[d,S]=y4({prop:o,defaultProp:g??!1,onChange:N,caller:zm});return wa.jsx(M3,{scope:r,triggerRef:j,contentRef:R,contentId:af(),titleId:af(),descriptionId:af(),open:d,onOpenChange:S,onOpenToggle:ne.useCallback(()=>S(y=>!y),[S]),modal:B,children:i})};r1.displayName=zm;var a1="DialogTrigger",i1=ne.forwardRef((e,r)=>{const{__scopeDialog:i,...o}=e,g=_c(a1,i),N=iu(r,g.triggerRef);return wa.jsx(al.button,{type:"button","aria-haspopup":"dialog","aria-expanded":g.open,"aria-controls":g.contentId,"data-state":hg(g.open),...o,ref:N,onClick:Pl(e.onClick,g.onOpenToggle)})});i1.displayName=a1;var pg="DialogPortal",[L3,s1]=n1(pg,{forceMount:void 0}),o1=e=>{const{__scopeDialog:r,forceMount:i,children:o,container:g}=e,N=_c(pg,r);return wa.jsx(L3,{scope:r,forceMount:i,children:ne.Children.map(o,B=>wa.jsx(jm,{present:i||N.open,children:wa.jsx(Wb,{asChild:!0,container:g,children:B})}))})};o1.displayName=pg;var wm="DialogOverlay",c1=ne.forwardRef((e,r)=>{const i=s1(wm,e.__scopeDialog),{forceMount:o=i.forceMount,...g}=e,N=_c(wm,e.__scopeDialog);return N.modal?wa.jsx(jm,{present:o||N.open,children:wa.jsx(j3,{...g,ref:r})}):null});c1.displayName=wm;var I3=Ub("DialogOverlay.RemoveScroll"),j3=ne.forwardRef((e,r)=>{const{__scopeDialog:i,...o}=e,g=_c(wm,i);return wa.jsx(e1,{as:I3,allowPinchZoom:!0,shards:[g.contentRef],children:wa.jsx(al.div,{"data-state":hg(g.open),...o,ref:r,style:{pointerEvents:"auto",...o.style}})})}),eu="DialogContent",l1=ne.forwardRef((e,r)=>{const i=s1(eu,e.__scopeDialog),{forceMount:o=i.forceMount,...g}=e,N=_c(eu,e.__scopeDialog);return wa.jsx(jm,{present:o||N.open,children:N.modal?wa.jsx(B3,{...g,ref:r}):wa.jsx(z3,{...g,ref:r})})});l1.displayName=eu;var B3=ne.forwardRef((e,r)=>{const i=_c(eu,e.__scopeDialog),o=ne.useRef(null),g=iu(r,i.contentRef,o);return ne.useEffect(()=>{const N=o.current;if(N)return D3(N)},[]),wa.jsx(u1,{...e,ref:g,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pl(e.onCloseAutoFocus,N=>{N.preventDefault(),i.triggerRef.current?.focus()}),onPointerDownOutside:Pl(e.onPointerDownOutside,N=>{const B=N.detail.originalEvent,j=B.button===0&&B.ctrlKey===!0;(B.button===2||j)&&N.preventDefault()}),onFocusOutside:Pl(e.onFocusOutside,N=>N.preventDefault())})}),z3=ne.forwardRef((e,r)=>{const i=_c(eu,e.__scopeDialog),o=ne.useRef(!1),g=ne.useRef(!1);return wa.jsx(u1,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:N=>{e.onCloseAutoFocus?.(N),N.defaultPrevented||(o.current||i.triggerRef.current?.focus(),N.preventDefault()),o.current=!1,g.current=!1},onInteractOutside:N=>{e.onInteractOutside?.(N),N.defaultPrevented||(o.current=!0,N.detail.originalEvent.type==="pointerdown"&&(g.current=!0));const B=N.target;i.triggerRef.current?.contains(B)&&N.preventDefault(),N.detail.originalEvent.type==="focusin"&&g.current&&N.preventDefault()}})}),u1=ne.forwardRef((e,r)=>{const{__scopeDialog:i,trapFocus:o,onOpenAutoFocus:g,onCloseAutoFocus:N,...B}=e,j=_c(eu,i),R=ne.useRef(null),d=iu(r,R);return $4(),wa.jsxs(wa.Fragment,{children:[wa.jsx(qb,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:g,onUnmountAutoFocus:N,children:wa.jsx(Fb,{role:"dialog",id:j.contentId,"aria-describedby":j.descriptionId,"aria-labelledby":j.titleId,"data-state":hg(j.open),...B,ref:d,onDismiss:()=>j.onOpenChange(!1)})}),wa.jsxs(wa.Fragment,{children:[wa.jsx(U3,{titleId:j.titleId}),wa.jsx(F3,{contentRef:R,descriptionId:j.descriptionId})]})]})}),mg="DialogTitle",d1=ne.forwardRef((e,r)=>{const{__scopeDialog:i,...o}=e,g=_c(mg,i);return wa.jsx(al.h2,{id:g.titleId,...o,ref:r})});d1.displayName=mg;var p1="DialogDescription",m1=ne.forwardRef((e,r)=>{const{__scopeDialog:i,...o}=e,g=_c(p1,i);return wa.jsx(al.p,{id:g.descriptionId,...o,ref:r})});m1.displayName=p1;var h1="DialogClose",f1=ne.forwardRef((e,r)=>{const{__scopeDialog:i,...o}=e,g=_c(h1,i);return wa.jsx(al.button,{type:"button",...o,ref:r,onClick:Pl(e.onClick,()=>g.onOpenChange(!1))})});f1.displayName=h1;function hg(e){return e?"open":"closed"}var g1="DialogTitleWarning",[kA,v1]=p4(g1,{contentName:eu,titleName:mg,docsSlug:"dialog"}),U3=({titleId:e})=>{const r=v1(g1),i=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return ne.useEffect(()=>{e&&(document.getElementById(e)||console.error(i))},[i,e]),null},H3="DialogDescriptionWarning",F3=({contentRef:e,descriptionId:r})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${v1(H3).contentName}}.`;return ne.useEffect(()=>{const g=e.current?.getAttribute("aria-describedby");r&&g&&(document.getElementById(r)||console.warn(o))},[o,e,r]),null},V3=r1,q3=i1,Z3=o1,W3=c1,$3=l1,G3=d1,K3=m1,Y3=f1;/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J3=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,i,o)=>o?o.toUpperCase():i.toLowerCase()),Zy=e=>{const r=J3(e);return r.charAt(0).toUpperCase()+r.slice(1)},y1=(...e)=>e.filter((r,i,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===i).join(" ").trim(),X3=e=>{for(const r in e)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=ne.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:g="",children:N,iconNode:B,...j},R)=>ne.createElement("svg",{ref:R,...eP,width:r,height:r,stroke:e,strokeWidth:o?Number(i)*24/Number(r):i,className:y1("lucide",g),...!N&&!X3(j)&&{"aria-hidden":"true"},...j},[...B.map(([d,S])=>ne.createElement(d,S)),...Array.isArray(N)?N:[N]]));/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=(e,r)=>{const i=ne.forwardRef(({className:o,...g},N)=>ne.createElement(tP,{ref:N,iconNode:r,className:y1(`lucide-${Q3(Zy(e))}`,`lucide-${e}`,o),...g}));return i.displayName=Zy(e),i};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rP=Ku("circle-check-big",nP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],iP=Ku("circle-user",aP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],_1=Ku("cloud-upload",sP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cP=Ku("file-text",oP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],uP=Ku("image",lP);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],b1=Ku("x",dP);function w1(e){var r,i,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var g=e.length;for(r=0;r<g;r++)e[r]&&(i=w1(e[r]))&&(o&&(o+=" "),o+=i)}else for(i in e)e[i]&&(o&&(o+=" "),o+=i);return o}function pP(){for(var e,r,i=0,o="",g=arguments.length;i<g;i++)(e=arguments[i])&&(r=w1(e))&&(o&&(o+=" "),o+=r);return o}const fg="-",mP=e=>{const r=fP(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:B=>{const j=B.split(fg);return j[0]===""&&j.length!==1&&j.shift(),E1(j,r)||hP(B)},getConflictingClassGroupIds:(B,j)=>{const R=i[B]||[];return j&&o[B]?[...R,...o[B]]:R}}},E1=(e,r)=>{if(e.length===0)return r.classGroupId;const i=e[0],o=r.nextPart.get(i),g=o?E1(e.slice(1),o):void 0;if(g)return g;if(r.validators.length===0)return;const N=e.join(fg);return r.validators.find(({validator:B})=>B(N))?.classGroupId},Wy=/^\[(.+)\]$/,hP=e=>{if(Wy.test(e)){const r=Wy.exec(e)[1],i=r?.substring(0,r.indexOf(":"));if(i)return"arbitrary.."+i}},fP=e=>{const{theme:r,classGroups:i}=e,o={nextPart:new Map,validators:[]};for(const g in i)Lf(i[g],o,g,r);return o},Lf=(e,r,i,o)=>{e.forEach(g=>{if(typeof g=="string"){const N=g===""?r:$y(r,g);N.classGroupId=i;return}if(typeof g=="function"){if(gP(g)){Lf(g(o),r,i,o);return}r.validators.push({validator:g,classGroupId:i});return}Object.entries(g).forEach(([N,B])=>{Lf(B,$y(r,N),i,o)})})},$y=(e,r)=>{let i=e;return r.split(fg).forEach(o=>{i.nextPart.has(o)||i.nextPart.set(o,{nextPart:new Map,validators:[]}),i=i.nextPart.get(o)}),i},gP=e=>e.isThemeGetter,vP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let r=0,i=new Map,o=new Map;const g=(N,B)=>{i.set(N,B),r++,r>e&&(r=0,o=i,i=new Map)};return{get(N){let B=i.get(N);if(B!==void 0)return B;if((B=o.get(N))!==void 0)return g(N,B),B},set(N,B){i.has(N)?i.set(N,B):g(N,B)}}},If="!",jf=":",yP=jf.length,_P=e=>{const{prefix:r,experimentalParseClassName:i}=e;let o=g=>{const N=[];let B=0,j=0,R=0,d;for(let f=0;f<g.length;f++){let h=g[f];if(B===0&&j===0){if(h===jf){N.push(g.slice(R,f)),R=f+yP;continue}if(h==="/"){d=f;continue}}h==="["?B++:h==="]"?B--:h==="("?j++:h===")"&&j--}const S=N.length===0?g:g.substring(R),y=bP(S),b=y!==S,T=d&&d>R?d-R:void 0;return{modifiers:N,hasImportantModifier:b,baseClassName:y,maybePostfixModifierPosition:T}};if(r){const g=r+jf,N=o;o=B=>B.startsWith(g)?N(B.substring(g.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:B,maybePostfixModifierPosition:void 0}}if(i){const g=o;o=N=>i({className:N,parseClassName:g})}return o},bP=e=>e.endsWith(If)?e.substring(0,e.length-1):e.startsWith(If)?e.substring(1):e,wP=e=>{const r=Object.fromEntries(e.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const g=[];let N=[];return o.forEach(B=>{B[0]==="["||r[B]?(g.push(...N.sort(),B),N=[]):N.push(B)}),g.push(...N.sort()),g}},EP=e=>({cache:vP(e.cacheSize),parseClassName:_P(e),sortModifiers:wP(e),...mP(e)}),SP=/\s+/,xP=(e,r)=>{const{parseClassName:i,getClassGroupId:o,getConflictingClassGroupIds:g,sortModifiers:N}=r,B=[],j=e.trim().split(SP);let R="";for(let d=j.length-1;d>=0;d-=1){const S=j[d],{isExternal:y,modifiers:b,hasImportantModifier:T,baseClassName:f,maybePostfixModifierPosition:h}=i(S);if(y){R=S+(R.length>0?" "+R:R);continue}let k=!!h,E=o(k?f.substring(0,h):f);if(!E){if(!k){R=S+(R.length>0?" "+R:R);continue}if(E=o(f),!E){R=S+(R.length>0?" "+R:R);continue}k=!1}const H=N(b).join(":"),m=T?H+If:H,P=m+E;if(B.includes(P))continue;B.push(P);const v=g(E,k);for(let U=0;U<v.length;++U){const C=v[U];B.push(m+C)}R=S+(R.length>0?" "+R:R)}return R};function RP(){let e=0,r,i,o="";for(;e<arguments.length;)(r=arguments[e++])&&(i=S1(r))&&(o&&(o+=" "),o+=i);return o}const S1=e=>{if(typeof e=="string")return e;let r,i="";for(let o=0;o<e.length;o++)e[o]&&(r=S1(e[o]))&&(i&&(i+=" "),i+=r);return i};function kP(e,...r){let i,o,g,N=B;function B(R){const d=r.reduce((S,y)=>y(S),e());return i=EP(d),o=i.cache.get,g=i.cache.set,N=j,j(R)}function j(R){const d=o(R);if(d)return d;const S=xP(R,i);return g(R,S),S}return function(){return N(RP.apply(null,arguments))}}const is=e=>{const r=i=>i[e]||[];return r.isThemeGetter=!0,r},x1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,R1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,CP=/^\d+\/\d+$/,TP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,PP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,NP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,AP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,OP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zu=e=>CP.test(e),sa=e=>!!e&&!Number.isNaN(Number(e)),kl=e=>!!e&&Number.isInteger(Number(e)),mf=e=>e.endsWith("%")&&sa(e.slice(0,-1)),Xc=e=>TP.test(e),DP=()=>!0,MP=e=>PP.test(e)&&!NP.test(e),k1=()=>!1,LP=e=>AP.test(e),IP=e=>OP.test(e),jP=e=>!rr(e)&&!ar(e),BP=e=>Yu(e,P1,k1),rr=e=>x1.test(e),Zl=e=>Yu(e,N1,MP),hf=e=>Yu(e,VP,sa),Gy=e=>Yu(e,C1,k1),zP=e=>Yu(e,T1,IP),Jp=e=>Yu(e,A1,LP),ar=e=>R1.test(e),Id=e=>Qu(e,N1),UP=e=>Qu(e,qP),Ky=e=>Qu(e,C1),HP=e=>Qu(e,P1),FP=e=>Qu(e,T1),Xp=e=>Qu(e,A1,!0),Yu=(e,r,i)=>{const o=x1.exec(e);return o?o[1]?r(o[1]):i(o[2]):!1},Qu=(e,r,i=!1)=>{const o=R1.exec(e);return o?o[1]?r(o[1]):i:!1},C1=e=>e==="position"||e==="percentage",T1=e=>e==="image"||e==="url",P1=e=>e==="length"||e==="size"||e==="bg-size",N1=e=>e==="length",VP=e=>e==="number",qP=e=>e==="family-name",A1=e=>e==="shadow",ZP=()=>{const e=is("color"),r=is("font"),i=is("text"),o=is("font-weight"),g=is("tracking"),N=is("leading"),B=is("breakpoint"),j=is("container"),R=is("spacing"),d=is("radius"),S=is("shadow"),y=is("inset-shadow"),b=is("text-shadow"),T=is("drop-shadow"),f=is("blur"),h=is("perspective"),k=is("aspect"),E=is("ease"),H=is("animate"),m=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...P(),ar,rr],U=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],_=()=>[ar,rr,R],w=()=>[zu,"full","auto",..._()],p=()=>[kl,"none","subgrid",ar,rr],x=()=>["auto",{span:["full",kl,ar,rr]},kl,ar,rr],A=()=>[kl,"auto",ar,rr],I=()=>["auto","min","max","fr",ar,rr],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",..._()],G=()=>[zu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],Z=()=>[e,ar,rr],ce=()=>[...P(),Ky,Gy,{position:[ar,rr]}],X=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Ee=()=>["auto","cover","contain",HP,BP,{size:[ar,rr]}],Se=()=>[mf,Id,Zl],xe=()=>["","none","full",d,ar,rr],_e=()=>["",sa,Id,Zl],Pe=()=>["solid","dashed","dotted","double"],He=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pe=()=>[sa,mf,Ky,Gy],Ge=()=>["","none",f,ar,rr],Te=()=>["none",sa,ar,rr],Ve=()=>["none",sa,ar,rr],qe=()=>[sa,ar,rr],nt=()=>[zu,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Xc],breakpoint:[Xc],color:[DP],container:[Xc],"drop-shadow":[Xc],ease:["in","out","in-out"],font:[jP],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Xc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Xc],shadow:[Xc],spacing:["px",sa],text:[Xc],"text-shadow":[Xc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zu,rr,ar,k]}],container:["container"],columns:[{columns:[sa,rr,ar,j]}],"break-after":[{"break-after":m()}],"break-before":[{"break-before":m()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[kl,"auto",ar,rr]}],basis:[{basis:[zu,"full","auto",j,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[sa,zu,"auto","initial","none",rr]}],grow:[{grow:["",sa,ar,rr]}],shrink:[{shrink:["",sa,ar,rr]}],order:[{order:[kl,"first","last","none",ar,rr]}],"grid-cols":[{"grid-cols":p()}],"col-start-end":[{col:x()}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":p()}],"row-start-end":[{row:x()}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":I()}],"auto-rows":[{"auto-rows":I()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[j,"screen",...G()]}],"min-w":[{"min-w":[j,"screen","none",...G()]}],"max-w":[{"max-w":[j,"screen","none","prose",{screen:[B]},...G()]}],h:[{h:["screen","lh",...G()]}],"min-h":[{"min-h":["screen","lh","none",...G()]}],"max-h":[{"max-h":["screen","lh",...G()]}],"font-size":[{text:["base",i,Id,Zl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,ar,hf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",mf,rr]}],"font-family":[{font:[UP,rr,r]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[g,ar,rr]}],"line-clamp":[{"line-clamp":[sa,"none",ar,hf]}],leading:[{leading:[N,..._()]}],"list-image":[{"list-image":["none",ar,rr]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ar,rr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[sa,"from-font","auto",ar,Zl]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[sa,"auto",ar,rr]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ar,rr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ar,rr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ce()}],"bg-repeat":[{bg:X()}],"bg-size":[{bg:Ee()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},kl,ar,rr],radial:["",ar,rr],conic:[kl,ar,rr]},FP,zP]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:Se()}],"gradient-via-pos":[{via:Se()}],"gradient-to-pos":[{to:Se()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:xe()}],"rounded-s":[{"rounded-s":xe()}],"rounded-e":[{"rounded-e":xe()}],"rounded-t":[{"rounded-t":xe()}],"rounded-r":[{"rounded-r":xe()}],"rounded-b":[{"rounded-b":xe()}],"rounded-l":[{"rounded-l":xe()}],"rounded-ss":[{"rounded-ss":xe()}],"rounded-se":[{"rounded-se":xe()}],"rounded-ee":[{"rounded-ee":xe()}],"rounded-es":[{"rounded-es":xe()}],"rounded-tl":[{"rounded-tl":xe()}],"rounded-tr":[{"rounded-tr":xe()}],"rounded-br":[{"rounded-br":xe()}],"rounded-bl":[{"rounded-bl":xe()}],"border-w":[{border:_e()}],"border-w-x":[{"border-x":_e()}],"border-w-y":[{"border-y":_e()}],"border-w-s":[{"border-s":_e()}],"border-w-e":[{"border-e":_e()}],"border-w-t":[{"border-t":_e()}],"border-w-r":[{"border-r":_e()}],"border-w-b":[{"border-b":_e()}],"border-w-l":[{"border-l":_e()}],"divide-x":[{"divide-x":_e()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_e()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Pe(),"hidden","none"]}],"divide-style":[{divide:[...Pe(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...Pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[sa,ar,rr]}],"outline-w":[{outline:["",sa,Id,Zl]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",S,Xp,Jp]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",y,Xp,Jp]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:_e()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[sa,Zl]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":_e()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",b,Xp,Jp]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[sa,ar,rr]}],"mix-blend":[{"mix-blend":[...He(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":He()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[sa]}],"mask-image-linear-from-pos":[{"mask-linear-from":pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":pe()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":pe()}],"mask-image-t-to-pos":[{"mask-t-to":pe()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":pe()}],"mask-image-r-to-pos":[{"mask-r-to":pe()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":pe()}],"mask-image-b-to-pos":[{"mask-b-to":pe()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":pe()}],"mask-image-l-to-pos":[{"mask-l-to":pe()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":pe()}],"mask-image-x-to-pos":[{"mask-x-to":pe()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":pe()}],"mask-image-y-to-pos":[{"mask-y-to":pe()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[ar,rr]}],"mask-image-radial-from-pos":[{"mask-radial-from":pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":pe()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[sa]}],"mask-image-conic-from-pos":[{"mask-conic-from":pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":pe()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ce()}],"mask-repeat":[{mask:X()}],"mask-size":[{mask:Ee()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ar,rr]}],filter:[{filter:["","none",ar,rr]}],blur:[{blur:Ge()}],brightness:[{brightness:[sa,ar,rr]}],contrast:[{contrast:[sa,ar,rr]}],"drop-shadow":[{"drop-shadow":["","none",T,Xp,Jp]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",sa,ar,rr]}],"hue-rotate":[{"hue-rotate":[sa,ar,rr]}],invert:[{invert:["",sa,ar,rr]}],saturate:[{saturate:[sa,ar,rr]}],sepia:[{sepia:["",sa,ar,rr]}],"backdrop-filter":[{"backdrop-filter":["","none",ar,rr]}],"backdrop-blur":[{"backdrop-blur":Ge()}],"backdrop-brightness":[{"backdrop-brightness":[sa,ar,rr]}],"backdrop-contrast":[{"backdrop-contrast":[sa,ar,rr]}],"backdrop-grayscale":[{"backdrop-grayscale":["",sa,ar,rr]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[sa,ar,rr]}],"backdrop-invert":[{"backdrop-invert":["",sa,ar,rr]}],"backdrop-opacity":[{"backdrop-opacity":[sa,ar,rr]}],"backdrop-saturate":[{"backdrop-saturate":[sa,ar,rr]}],"backdrop-sepia":[{"backdrop-sepia":["",sa,ar,rr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ar,rr]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[sa,"initial",ar,rr]}],ease:[{ease:["linear","initial",E,ar,rr]}],delay:[{delay:[sa,ar,rr]}],animate:[{animate:["none",H,ar,rr]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[h,ar,rr]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:Ve()}],"scale-x":[{"scale-x":Ve()}],"scale-y":[{"scale-y":Ve()}],"scale-z":[{"scale-z":Ve()}],"scale-3d":["scale-3d"],skew:[{skew:qe()}],"skew-x":[{"skew-x":qe()}],"skew-y":[{"skew-y":qe()}],transform:[{transform:[ar,rr,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:nt()}],"translate-x":[{"translate-x":nt()}],"translate-y":[{"translate-y":nt()}],"translate-z":[{"translate-z":nt()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ar,rr]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ar,rr]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[sa,Id,Zl,hf]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},WP=kP(ZP);function rp(...e){return WP(pP(e))}function $P({...e}){return ne.createElement(V3,{"data-slot":"dialog",...e})}function GP({...e}){return ne.createElement(q3,{"data-slot":"dialog-trigger",...e})}function KP({...e}){return ne.createElement(Z3,{"data-slot":"dialog-portal",...e})}function YP({className:e,...r}){return ne.createElement(W3,{"data-slot":"dialog-overlay",className:rp("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function QP({className:e,children:r,showCloseButton:i=!0,...o}){return ne.createElement(KP,{"data-slot":"dialog-portal"},ne.createElement(YP,null),ne.createElement($3,{"data-slot":"dialog-content",className:rp("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...o},r,i&&ne.createElement(Y3,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},ne.createElement(b1,null),ne.createElement("span",{className:"sr-only"},"Close"))))}function JP({className:e,...r}){return ne.createElement("div",{"data-slot":"dialog-header",className:rp("flex flex-col gap-2 text-center sm:text-left",e),...r})}function XP({className:e,...r}){return ne.createElement(G3,{"data-slot":"dialog-title",className:rp("text-lg leading-none font-semibold",e),...r})}function eN({className:e,...r}){return ne.createElement(K3,{"data-slot":"dialog-description",className:rp("text-muted-foreground text-sm",e),...r})}const Um=({triggerText:e="",title:r,description:i,children:o,open:g,onOpenChange:N})=>c.createElement($P,{open:g,onOpenChange:N},e&&c.createElement(GP,null,e),c.createElement(QP,null,c.createElement(JP,null,r&&c.createElement(XP,null,r),i&&c.createElement(eN,null,i)),o)),tN=()=>{const[e,r]=ne.useState("email"),{signIn:i,loading:o}=vc(),[g,N]=ne.useState(!1),[B,j]=ne.useState(""),R=Ds(),{register:d,handleSubmit:S,formState:{errors:y},reset:b}=tu({resolver:au(Bb),mode:"onChange"}),T=async f=>{const h=await i({identifier:f.identifier,password:f.password},R);h&&(console.log(h),N(!0),j(h)),b()};return c.createElement("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md"},c.createElement("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900"},"Sign In to your account"),c.createElement("div",{className:"mb-6"},c.createElement("div",{className:"flex bg-gray-100 rounded-lg p-1"},c.createElement("button",{onClick:()=>r("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="email"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`},"Email Login"),c.createElement("button",{onClick:()=>r("pmdc"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="pmdc"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`},"PMDC Login"))),c.createElement("form",{className:"space-y-6",onSubmit:S(T)},c.createElement(ra,{label:e==="email"?"Email Address":"PMDC Number",type:"text",name:"identifier",...d("identifier"),error:y.identifier?.message,placeholder:e==="email"?"Enter email":"Enter PMDC number",autoComplete:"username"}),c.createElement(ra,{label:"Password",type:"password",name:"password",...d("password"),error:y.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),c.createElement("button",{type:"submit",disabled:o,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50"},o?"Signing In...":`Sign In with ${e==="email"?"Email":"PMDC"}`)),c.createElement("div",{className:"mt-6 text-center"},c.createElement("span",{className:"text-sm text-emerald-700"},"Don't have an account?"),c.createElement(Ki,{to:"/register",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"})},"Register"))),c.createElement(Um,{open:g,onOpenChange:N,title:"Login Status",description:B},c.createElement("button",{className:"mt-4 w-full rounded-lg bg-emerald-600 px-6 py-2 text-white font-semibold shadow-md hover:bg-emerald-700 transition duration-300 ease-in-out active:scale-95",onClick:()=>R("/doctor/upload-documents")},"Upload Documents")))},Hm=e=>{let r=e.replace(/\D/g,"");return r=r.slice(0,13),r.length<=5?r:r.length<=12?r.slice(0,5)+"-"+r.slice(5):r.slice(0,5)+"-"+r.slice(5,12)+"-"+r.slice(12)},O1=e=>/^\d{5}-\d{7}-\d{1}$/.test(e),nN=nl({name:ma().min(3,"Name must be at least 3 characters"),email:ma().email("Invalid email address"),cnic:ma().refine(e=>/^\d{5}-\d{7}-\d{1}$/.test(e),{message:"CNIC must be in xxxxx-xxxxxxx-x format"}),password:ma().min(6,"Password must be at least 6 characters")});nl({email:ma().email("Invalid email address"),password:ma().min(1,"Password is required")});nl({cnic:ma().refine(e=>/^\d{5}-\d{7}-\d{1}$/.test(e),{message:"CNIC must be in xxxxx-xxxxxxx-x format"}),password:ma().min(1,"Password is required")});const rN=()=>{const e=Ds(),{signUpFun:r,loading:i}=vc(),{register:o,handleSubmit:g,setValue:N,formState:{errors:B}}=tu({resolver:au(nN),defaultValues:{name:"",email:"",cnic:"",password:""}}),j=d=>{N("cnic",Hm(d.target.value))},R=async d=>{try{await r(d,e)}catch(S){console.error("Registration error:",S)}};return c.createElement("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md"},c.createElement("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900"},"Create your account"),c.createElement("form",{className:"space-y-6",onSubmit:g(R)},c.createElement(ra,{label:"Name",type:"text",...o("name"),error:B.name?.message,required:!0}),c.createElement(ra,{label:"Email address",type:"email",...o("email"),error:B.email?.message,required:!0}),c.createElement(ra,{label:"CNIC",...o("cnic"),error:B.cnic?.message,onChange:j,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15}),c.createElement(ra,{label:"Password",type:"password",...o("password"),error:B.password?.message,required:!0}),c.createElement("div",null,c.createElement("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md bg-emerald-600 text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},i?"Creating Account...":"Register"))),c.createElement("div",{className:"mt-6 text-center"},c.createElement("span",{className:"text-sm text-emerald-700"},"Already have an account?"),c.createElement(Ki,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},to:"/login",className:"ml-1 text-emerald-600 hover:underline font-medium"},"Login"))))},aN=()=>{const[e,r]=ne.useState("email"),{DoctorLogin:i,loading:o}=yc(),[g,N]=ne.useState(!1),[B,j]=ne.useState(""),R=Ds(),{register:d,handleSubmit:S,formState:{errors:y},reset:b}=tu({resolver:au(Bb),mode:"onChange"}),T=async f=>{const h=await i({identifier:f.identifier,password:f.password},R);h&&(console.log(h),N(!0),j(h)),b()};return c.createElement("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md"},c.createElement("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900"},"Login as a Doctor"),c.createElement("div",{className:"mb-6"},c.createElement("div",{className:"flex bg-gray-100 rounded-lg p-1"},c.createElement("button",{onClick:()=>r("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="email"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`},"Email Login"),c.createElement("button",{onClick:()=>r("pmdc"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200 ${e==="pmdc"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`},"PMDC Login"))),c.createElement("form",{className:"space-y-6",onSubmit:S(T)},c.createElement(ra,{label:e==="email"?"Email Address":"PMDC Number",type:"text",name:"identifier",...d("identifier"),error:y.identifier?.message,placeholder:e==="email"?"Enter email":"Enter PMDC number",autoComplete:"username"}),c.createElement(ra,{label:"Password",type:"password",name:"password",...d("password"),error:y.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),c.createElement("button",{type:"submit",disabled:o,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50"},o?"Signing In...":`Sign In with ${e==="email"?"Email":"PMDC"}`)),c.createElement("div",{className:"mt-6 text-center"},c.createElement("span",{className:"text-sm text-emerald-700"},"Don't have an account?"),c.createElement(Ki,{to:"/register/doctor",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"})},"Register"))),c.createElement(Um,{open:g,onOpenChange:N,title:"Login Status",description:B},c.createElement("button",{className:"mt-4 w-full rounded-lg bg-emerald-600 px-6 py-2 text-white font-semibold shadow-md hover:bg-emerald-700 transition duration-300 ease-in-out active:scale-95",onClick:()=>R("/doctor/upload-documents")},"Upload Documents")))},iN=({selectedSpecialties:e=[],onSpecialtiesChange:r,placeholder:i="Select specialties...",maxSelections:o=5,className:g=""})=>{const N=j=>{e.includes(j)?r(e.filter(R=>R!==j)):e.length<o&&r([...e,j])},B=j=>{r(e.filter(R=>R!==j))};return c.createElement("div",{className:`relative ${g}`},c.createElement("label",{className:"block text-emerald-700 font-medium mb-2"},"Specialties"," ",e.length>0&&c.createElement("span",{className:"text-sm text-gray-500 font-normal"},"(",e.length,"/",o,")")),e.length>0&&c.createElement("div",{className:"flex flex-wrap gap-2 mb-3"},e.map((j,R)=>c.createElement("div",{key:R,onClick:()=>B(j),className:"group flex items-center gap-1 bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full text-sm font-medium hover:bg-emerald-200 cursor-pointer"},c.createElement("span",{className:"truncate max-w-[200px]"},j),c.createElement(Wx,null)))),c.createElement(Yl,{options:Dx,value:i,onChange:N,placeholder:i,disabled:e.length>=o}),e.length>=o&&c.createElement("div",{className:"mt-2 text-xs text-amber-600 bg-amber-50 border border-amber-200 rounded px-3 py-2"},"Maximum ",o," specialties allowed"))},sN=({options:e=[],value:r="",onChange:i=()=>{},placeholder:o="Select or add...",icon:g,disabled:N=!1,allowAddNew:B=!1,onVerificationChange:j=()=>{},registeredOptions:R=[]})=>{const[d,S]=ne.useState(!1),[y,b]=ne.useState(""),[T,f]=ne.useState([]),h=ne.useRef(null);ne.useEffect(()=>{const v=e.filter(U=>U.toLowerCase().includes(y.toLowerCase()));f(v)},[y,e]),ne.useEffect(()=>{const v=U=>{h.current&&!h.current.contains(U.target)&&(S(!1),b(""))};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const k=v=>{const U=v.target.value;if(b(U),S(!0),B){i(U);const C=R.includes(U);j(C)}},E=v=>{if(b(""),S(!1),i(v),B){const U=R.includes(v);j(U)}},H=()=>{y.trim()&&(S(!1),i(y.trim()),j(!1),b(""))},m=B&&y.trim()&&!T.some(v=>v.toLowerCase()===y.toLowerCase()),P=r||o;return c.createElement("div",{className:"relative w-full",ref:h},d?c.createElement("input",{type:"text",value:y,onChange:k,onBlur:()=>{setTimeout(()=>S(!1),150)},placeholder:o,className:"w-full px-3 py-2 border border-emerald-200 rounded focus:outline-none focus:ring-2 focus:ring-emerald-500",autoFocus:!0}):c.createElement("button",{type:"button",className:`w-full flex items-center h-11 border border-emerald-200 rounded-md px-3 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500 ${N?"bg-gray-100 text-gray-400 cursor-not-allowed":"text-gray-700 bg-white hover:border-emerald-400"}`,onClick:()=>!N&&S(!0),disabled:N},c.createElement("span",{className:`flex-1 text-left ${r?"":"text-gray-500"}`},P),g&&c.createElement(g,null)),d&&c.createElement("div",{className:"absolute left-0 mt-1 w-full bg-white max-h-60 overflow-y-auto border border-gray-200 rounded shadow z-10"},T.map(v=>c.createElement("div",{key:v,className:"px-4 py-2 hover:bg-emerald-100 text-gray-700 cursor-pointer font-medium flex items-center justify-between",onClick:()=>E(v)},c.createElement("span",null,v),B&&R.includes(v)&&c.createElement("span",{className:"text-xs text-emerald-600 bg-emerald-100 px-2 py-1 rounded"},"✓ Verified"))),m&&c.createElement("div",{onClick:H,className:"px-4 py-2 hover:bg-gray-50 cursor-pointer flex items-center justify-between border-t border-gray-100"},c.createElement("span",null,'Add "',y,'"'),c.createElement("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},"+ New")),T.length===0&&!m&&y&&c.createElement("div",{className:"px-4 py-2 text-gray-500 text-sm"},"No options found")))},D1=({values:e={},errors:r={},onInputChange:i,onDropdownChange:o,onSpecialtyChange:g,onHospitalChange:N,onHospitalVerification:B,onCnicChange:j,options:R={},include:d={}})=>{const S={degreeOptions:R.degreeOptions||Bx,genders:R.genders||jx,hospitals:R.hospitals||Ux,religions:R.religions||Ix},y={password:d.password!==!1,confirmPassword:d.confirmPassword!==!1,agreement:d.agreement!==!1,city:d.city!==!1,hospital:d.hospital!==!1};return c.createElement(c.Fragment,null,c.createElement(ra,{label:"Full Name",name:"name",value:e.name||"",onChange:i?.("name"),error:r.name?.message||r.name,required:!0}),c.createElement(ra,{label:"Email",type:"email",name:"email",value:e.email||"",onChange:i?.("email"),error:r.email?.message||r.email,required:!0,autoComplete:"email"}),c.createElement("div",{className:"md:col-span-2"},c.createElement(iN,{selectedSpecialties:e.speciality||[],onSpecialtiesChange:b=>g?.(b),placeholder:"Search and select your specialties...",maxSelections:5}),r.speciality&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.speciality?.message||r.speciality)),c.createElement(ra,{label:"Phone",type:"tel",name:"phone",value:e.phone||"",onChange:i?.("phone"),error:r.phone?.message||r.phone,required:!0,placeholder:"03XXXXXXXXX",onlyNumbers:!0}),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Religion"),c.createElement(Yl,{options:S.religions,value:e.religion||"",onChange:b=>o?.("religion",b),placeholder:"Select Religion"}),r.religion&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.religion?.message||r.religion)),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Gender"),c.createElement(Yl,{options:S.genders,value:e.gender||"",onChange:b=>o?.("gender",b),placeholder:"Select Gender"}),r.gender&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.gender?.message||r.gender)),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Main Degree"),c.createElement(Yl,{options:S.degreeOptions,value:e.mainDegree||"",onChange:b=>o?.("mainDegree",b),placeholder:"Select Main Degree"}),r.mainDegree&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.mainDegree?.message||r.mainDegree)),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Full Address"),c.createElement("textarea",{name:"fullAddress",value:e.fullAddress||"",onChange:i?.("fullAddress"),required:!0,rows:1,className:`w-full px-3 py-2 border ${r.fullAddress?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`}),r.fullAddress&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.fullAddress?.message||r.fullAddress)),y.hospital&&c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Hospital",e.hospital&&c.createElement("span",{className:"ml-2 text-xs text-emerald-600 bg-emerald-100 px-2 py-1 rounded"},"✓ Verified"),e.hospital&&!e.hospital&&c.createElement("span",{className:"ml-2 text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded"},"⚠ New Hospital")),c.createElement(sN,{options:S.hospitals,value:e.hospital||"",onChange:b=>N?.(b),onVerificationChange:b=>B?.(b),registeredOptions:S.hospitals,placeholder:"Search hospitals or add new one...",allowAddNew:!0}),r.hospital&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.hospital?.message||r.hospital)),y.city&&c.createElement(ra,{label:"City",name:"city",value:e.city||"",onChange:i?.("city"),error:r.city?.message||r.city,placeholder:"Enter City Name"}),c.createElement(ra,{label:"Experience (years)",type:"number",name:"experience",value:e.experience||"",onChange:i?.("experience"),error:r.experience?.message||r.experience,required:!0,min:0}),c.createElement(ra,{label:"CNIC",name:"cnic",value:e.cnic||"",onChange:j,error:r.cnic?.message||r.cnic,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,onlyNumbers:!0,allowDashes:!0}),c.createElement(ra,{label:"Fee",type:"number",name:"fee",value:e.fee||"",onChange:i?.("fee"),error:r.fee?.message||r.fee,required:!0,min:0,onlyNumbers:!0}),c.createElement(ra,{label:"PMDC Number",name:"pmdcNumber",value:e.pmdcNumber||"",onChange:i?.("pmdcNumber"),error:r.pmdcNumber?.message||r.pmdcNumber,required:!0,placeholder:"Enter PMDC Number"}),y.password&&c.createElement(ra,{label:"Password",type:"password",name:"password",value:e.password||"",onChange:i?.("password"),error:r.password?.message||r.password,required:!0}),y.confirmPassword&&c.createElement(ra,{label:"Confirm Password",type:"password",name:"confirmPassword",value:e.confirmPassword||"",onChange:i?.("confirmPassword"),error:r.confirmPassword?.message||r.confirmPassword,required:!0}),y.agreement&&c.createElement(c.Fragment,null,c.createElement("div",{className:"flex items-center space-x-2 mt-4 md:col-span-2"},c.createElement("input",{type:"checkbox",id:"agreement",name:"agreement",checked:e.agreement||!1,onChange:i?.("agreement"),className:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300"}),c.createElement("label",{htmlFor:"agreement",className:"text-emerald-800 font-semibold text-base"},"🔒 Please make sure all fields are filled correctly before submitting.")),r.agreement&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},r.agreement?.message||r.agreement)))},oN=ma().refine(e=>O1(e),{message:"CNIC must be in format: 12345-1234567-1"}),cN=/^[0-9+-\s()]+$/,lN=/^[A-Z0-9]+$/,uN=nl({name:ma().min(1,"Name is required").min(2,"Name must be at least 2 characters long").max(100,"Name cannot exceed 100 characters").trim(),email:ma().min(1,"Email is required").email("Please provide a valid email address").trim(),speciality:Mb(ma()).min(1,"At least one specialty is required").max(5,"Maximum 5 specialties allowed"),phone:ma().min(1,"Phone number is required").regex(cN,"Please provide a valid phone number").length(11,"Phone number must be exactly 11 digits"),religion:ma().min(1,"Religion is required").min(2,"Religion must be at least 2 characters long").max(50,"Religion cannot exceed 50 characters").trim(),gender:bm(["Male","Female"],{required_error:"Gender is required",invalid_type_error:"Gender must be either Male or Female"}),pmdcNumber:ma().min(1,"PMDC number is required").regex(lN,"PMDC number must contain only uppercase letters and numbers").min(5,"PMDC number must be at least 5 characters long").max(20,"PMDC number cannot exceed 20 characters").trim(),mainDegree:ma().min(1,"Main degree is required").min(2,"Main degree must be at least 2 characters long").max(100,"Main degree cannot exceed 100 characters").trim(),fullAddress:ma().min(1,"Full address is required").min(10,"Full address must be at least 10 characters long").max(500,"Full address cannot exceed 500 characters").trim(),city:ma().max(100,"City name cannot exceed 100 characters").optional().or(Lb("")),hospital:ma().min(1,"Hospital is required").min(2,"Hospital must be at least 2 characters long").max(200,"Hospital cannot exceed 200 characters").trim(),experience:Fd({required_error:"Experience is required",invalid_type_error:"Experience must be a number"}).int("Experience must be a whole number").min(0,"Experience cannot be negative").max(50,"Experience cannot exceed 50 years"),fee:Fd({required_error:"Fee is required",invalid_type_error:"Fee must be a number"}).min(0,"Fee cannot be negative").max(1e5,"Fee cannot exceed 100,000"),cnic:oN,password:ma().min(1,"Password is required").min(6,"Password must be at least 6 characters long"),confirmPassword:ma().min(1,"Confirm password is required"),agreement:Uu().refine(e=>e===!0,"You must confirm before submitting"),hospitalVerified:Uu().default(!1)}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),dN={name:"",email:"",speciality:[],phone:"",religion:"",gender:void 0,pmdcNumber:"",mainDegree:"",fullAddress:"",city:"",hospital:"",experience:void 0,cnic:"",password:"",confirmPassword:"",agreement:!1,hospitalVerified:!1,fee:void 0},pN=()=>{const[e,r]=ne.useState(!1),{DoctorSignUp:i,loading:o,error:g}=yc(),N=Ds(),B=tu({resolver:au(uN),defaultValues:dN,mode:"onChange",criteriaMode:"all"}),{register:j,handleSubmit:R,formState:{errors:d,isValid:S},setValue:y,getValues:b,reset:T,clearErrors:f,watch:h,control:k}=B,E=h(),H=A=>{const I=Hm(A.target.value);y("cnic",I,{shouldValidate:!0})},m=A=>{y("speciality",A,{shouldValidate:!0})},P=A=>{y("hospital",A,{shouldValidate:!0})},v=A=>{y("hospitalVerified",A)},U=(A,I)=>{y(A,I,{shouldValidate:!0}),f(A)},C=A=>I=>{const M=I.target.type==="checkbox"?I.target.checked:I.target.value;y(A,M,{shouldValidate:!0})},_=A=>{const{confirmPassword:I,agreement:M,...F}=A;return{...F,name:F.name?.trim(),email:F.email?.trim(),phone:F.phone?.trim(),religion:F.religion?.trim(),pmdcNumber:F.pmdcNumber?.trim(),mainDegree:F.mainDegree?.trim(),fullAddress:F.fullAddress?.trim(),city:F.city?.trim()||"",hospital:F.hospital?.trim(),cnic:F.cnic?.trim(),experience:Number(F.experience),fee:Number(F.fee)}},w=async A=>{try{const I=_(A);(await i(I,N))?.success&&(r(!0),T())}catch{}},p=()=>{T(),r(!1)};return{register:j,handleSubmit:R(w,A=>{const I=Object.keys(A)[0];I&&document.querySelector(`[name="${I}"]`)?.focus()}),formState:{errors:d,isValid:S},formValues:E,control:k,handleCnicChange:H,handleSpecialtyChange:m,handleHospitalChange:P,handleHospitalVerification:v,handleDropdownChange:U,handleInputChange:C,resetForm:p,prepareSubmissionData:_,showSuccess:e,setShowSuccess:r,loading:o,error:g}},mN=()=>{const{handleSubmit:e,formState:{errors:r},formValues:i,handleCnicChange:o,handleSpecialtyChange:g,handleHospitalChange:N,handleHospitalVerification:B,handleDropdownChange:j,handleInputChange:R,resetForm:d,showSuccess:S,setShowSuccess:y,loading:b}=pN();return c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-2xl w-full"},S?c.createElement("div",{className:"text-center"},c.createElement("div",{className:"text-6xl mb-4"},"🎉"),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"Application Submitted Successfully!"),c.createElement("p",{className:"text-gray-600 mb-6"},"Thank you for your interest in joining our platform. Your application has been submitted and is currently under review by our admin team."),c.createElement("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6"},c.createElement("h3",{className:"font-semibold text-emerald-800 mb-2"},"What happens next?"),c.createElement("ul",{className:"text-sm text-emerald-700 space-y-1"},c.createElement("li",null,"• Our admin team will review your application"),c.createElement("li",null,"• We'll verify your credentials and documents"),c.createElement("li",null,"• You'll receive an email notification once approved"),c.createElement("li",null,"• After approval, you can complete your profile setup"))),c.createElement("button",{onClick:()=>{y(!1),d()},className:"bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors"},"Submit Another Application")):c.createElement(c.Fragment,null,c.createElement("div",{className:"flex flex-col items-center mb-4"},c.createElement("span",{className:"text-emerald-600 text-4xl mb-2"},"🩺"),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-2 text-center"},"Join as a Doctor")),c.createElement("form",{className:"space-y-4",onSubmit:e},c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},c.createElement(D1,{values:i,errors:r,onInputChange:T=>R(T),onDropdownChange:j,onSpecialtyChange:g,onHospitalChange:N,onHospitalVerification:B,onCnicChange:o})),c.createElement("button",{type:"submit",disabled:b,className:"w-full py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 font-medium transition-colors duration-200 mt-2 disabled:opacity-50 disabled:cursor-not-allowed"},b?"Submitting...":"Submit"),c.createElement("div",{className:"w-full text-center"},c.createElement("span",{className:"text-sm font-semibold text-emerald-700"},"Already have an account?"),c.createElement(Ki,{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),to:"/doctor/login",className:"ml-1 text-emerald-600 hover:underline font-medium"},"Login"))))))},hN=ma().refine(e=>O1(e),{message:"CNIC must be in format: 12345-1234567-1"}),fN=/^03\d{9}$/,gN=nl({name:ma().min(1,"Hospital name is required").min(2,"Hospital name must be at least 2 characters long").max(100,"Hospital name cannot exceed 100 characters").trim(),email:ma().min(1,"Email is required").email("Please provide a valid email address").trim(),description:ma().min(10,"Description must be at least 10 characters long").max(500,"Description cannot exceed 500 characters").optional().or(Lb("")),hospitalType:bm(["Public","Private","Semi-Private","Military","Charity"],{required_error:"Hospital type is required",invalid_type_error:"Please select a valid hospital type"}),category:bm(["General","Specialized","Teaching","Research","Emergency"],{required_error:"Category is required",invalid_type_error:"Please select a valid category"}),licenseNumber:ma().min(1,"License number is required").min(5,"License number must be at least 5 characters long").max(50,"License number cannot exceed 50 characters").trim(),establishedYear:Fd({required_error:"Established year is required",invalid_type_error:"Established year must be a number"}).int("Established year must be a whole number").min(1900,"Established year cannot be before 1900").max(new Date().getFullYear(),"Established year cannot be in the future"),phone:ma().min(1,"Phone number is required").regex(fN,"Phone number must be in format 03XXXXXXXXX").trim(),address:ma().min(1,"Address is required").min(10,"Address must be at least 10 characters long").max(500,"Address cannot exceed 500 characters").trim(),city:ma().min(1,"City is required").min(2,"City name must be at least 2 characters long").max(50,"City name cannot exceed 50 characters").trim(),totalBeds:Fd({required_error:"Total beds is required",invalid_type_error:"Total beds must be a number"}).int("Total beds must be a whole number").min(1,"Total beds must be at least 1"),operationTheaters:Fd({required_error:"Operation theaters is required",invalid_type_error:"Operation theaters must be a number"}).int("Operation theaters must be a whole number").min(0,"Operation theaters cannot be negative"),cnic:hN,password:ma().min(1,"Password is required").min(6,"Password must be at least 6 characters long").max(50,"Password cannot exceed 50 characters"),confirmPassword:ma().min(1,"Confirm password is required"),services:nl({emergencyServices:Uu().default(!1),ambulanceServices:Uu().default(!1),icuServices:Uu().default(!1)}).default({emergencyServices:!1,ambulanceServices:!1,icuServices:!1}),image:Ry().refine(e=>e instanceof File,"Hospital image is required").refine(e=>e&&e.size<=5e6,"Image size should be less than 5MB").refine(e=>e&&["image/jpeg","image/png","image/jpg"].includes(e.type),"Only JPEG, PNG and JPG images are allowed"),image:Ry().refine(e=>e instanceof File,"Hospital documents is required").refine(e=>e&&e.size<=5e6,"Image size should be less than 5MB").refine(e=>e&&["image/jpeg","image/png","image/jpg"].includes(e.type),"Only JPEG, PNG and JPG images are allowed"),agreement:Uu().refine(e=>e===!0,"You must confirm before submitting")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),vN={name:"",email:"",description:"",hospitalType:void 0,category:void 0,licenseNumber:"",establishedYear:void 0,phone:"",address:"",city:"",totalBeds:void 0,operationTheaters:void 0,cnic:"",password:"",confirmPassword:"",image:null,documents:null},yN=()=>{const[e,r]=ne.useState(!1),[i,o]=ne.useState(null),g=Ds(),{HospitalSignUp:N,loading:B}=eg(),j=tu({resolver:au(gN),defaultValues:vN,mode:"onChange",criteriaMode:"all"}),{register:R,handleSubmit:d,formState:{errors:S,isValid:y},setValue:b,getValues:T,reset:f,clearErrors:h,watch:k,control:E}=j,H=k();return{register:R,handleSubmit:d,formState:{errors:S,isValid:y},setValue:b,getValues:T,reset:f,clearErrors:h,watch:k,control:E,formValues:H,handleCnicChange:I=>{const M=Hm(I.target.value);b("cnic",M,{shouldValidate:!0})},handleDropdownChange:(I,M)=>{b(I,M,{shouldValidate:!0}),h(I)},handleServiceChange:(I,M)=>{const F=T("services")||{};b("services",{...F,[I]:M},{shouldValidate:!0})},handleImageChange:I=>{const M=I?.target?.files?I.target.files[0]:I;M instanceof File&&(b("image",M,{shouldValidate:!0}),h("image"))},handleDocumentChange:I=>{const M=I?.target?.files?I.target.files[0]:I;M instanceof File&&(b("document",M,{shouldValidate:!0}),h("image"))},removeDocument:I=>{const F=(T("documents")||[]).filter((z,G)=>G!==I);b("documents",F,{shouldValidate:!0})},handleInputChange:I=>M=>{const F=M.target.type==="checkbox"?M.target.checked:M.target.value;b(I,F,{shouldValidate:!0})},onSubmit:async I=>{const{confirmPassword:M,documents:F,agreement:z,...G}=I;await N(G,g)},handleInvalidSubmit:I=>{const M=Object.keys(I)[0];M&&document.querySelector(`[name="${M}"]`)?.focus()},showSuccess:e,setShowSuccess:r,loading:B,error:i,setError:o,resetForm:()=>{f(),r(!1),o(null)}}},Yy=({label:e,name:r,onChange:i,error:o,accept:g="*/*",multiple:N=!1,maxSize:B=5e6,preview:j=!1,required:R=!1})=>{const[d,S]=ne.useState(!1),[y,b]=ne.useState([]),T=P=>{P.preventDefault(),P.stopPropagation(),P.type==="dragenter"||P.type==="dragover"?S(!0):P.type==="dragleave"&&S(!1)},f=P=>{P.preventDefault(),P.stopPropagation(),S(!1);const v=Array.from(P.dataTransfer.files);h(v)},h=P=>{const v=P.filter(U=>U.size>B?(alert(`File ${U.name} is too large. Maximum size is ${B/1e6}MB`),!1):!0);N?(b(U=>[...U,...v]),i(v)):(b(v),i(v[0]))},k=P=>{const v=Array.from(P.target.files);h(v)},E=P=>{if(N){const v=y.filter((U,C)=>C!==P);b(v),i(v)}else b([]),i(null)},H=P=>{if(P===0)return"0 Bytes";const v=1024,U=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(P)/Math.log(v));return parseFloat((P/Math.pow(v,C)).toFixed(2))+" "+U[C]},m=P=>P.type.startsWith("image/")?c.createElement(uP,{className:"w-4 h-4"}):c.createElement(cP,{className:"w-4 h-4"});return c.createElement("div",{className:"space-y-2"},c.createElement("label",{className:"block text-sm font-medium text-gray-700"},e,R&&c.createElement("span",{className:"text-red-500 ml-1"},"*")),c.createElement("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ${d?"border-emerald-400 bg-emerald-50":"border-gray-300 hover:border-gray-400"} ${o?"border-red-300 bg-red-50":""}`,onDragEnter:T,onDragLeave:T,onDragOver:T,onDrop:f},c.createElement("input",{type:"file",name:r,onChange:k,accept:g,multiple:N,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.createElement("div",{className:"space-y-2"},c.createElement(_1,{className:"mx-auto h-12 w-12 text-gray-400"}),c.createElement("div",{className:"text-sm text-gray-600"},c.createElement("span",{className:"font-medium text-emerald-600 hover:text-emerald-500"},"Click to upload")," ","or drag and drop"),c.createElement("p",{className:"text-xs text-gray-500"},g!=="*/*"&&`Accepted formats: ${g}`,c.createElement("br",null),"Max size: ",B/1e6,"MB"))),o&&c.createElement("p",{className:"text-sm text-red-600"},o),y.length>0&&c.createElement("div",{className:"space-y-2"},c.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Selected Files:"),c.createElement("div",{className:"space-y-2"},y.map((P,v)=>c.createElement("div",{key:v,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},c.createElement("div",{className:"flex items-center space-x-3"},m(P),c.createElement("div",null,c.createElement("p",{className:"text-sm font-medium text-gray-900"},P.name),c.createElement("p",{className:"text-xs text-gray-500"},H(P.size)))),c.createElement("button",{type:"button",onClick:()=>E(v),className:"text-red-500 hover:text-red-700"},c.createElement(b1,{className:"w-4 h-4"})))))))},_N=()=>{const{register:e,handleSubmit:r,formState:{errors:i,isValid:o},formValues:g,handleDropdownChange:N,handleImageChange:B,handleDocumentChange:j,onSubmit:R,showSuccess:d,setShowSuccess:S,loading:y,error:b,handleCnicChange:T}=yN();return c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-4xl w-full"},d?c.createElement("div",{className:"text-center"},c.createElement("div",{className:"text-6xl mb-4"},"🏥"),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"Application Submitted Successfully!"),c.createElement("p",{className:"text-gray-600 mb-6"},"Thank you for your interest in joining our platform. Your hospital application has been submitted and is currently under review by our admin team."),c.createElement("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6"},c.createElement("h3",{className:"font-semibold text-emerald-800 mb-2"},"What happens next?"),c.createElement("ul",{className:"text-sm text-emerald-700 space-y-1"},c.createElement("li",null,"• Our admin team will review your application"),c.createElement("li",null,"• We'll verify your hospital license and documents"),c.createElement("li",null,"• You'll receive an email notification once approved"),c.createElement("li",null,"• After approval, you can complete your hospital profile setup"))),c.createElement("button",{onClick:()=>S(!1),className:"bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors"},"Submit Another Application")):c.createElement(c.Fragment,null,c.createElement("div",{className:"flex flex-col items-center mb-4"},c.createElement("span",{className:"text-emerald-600 text-4xl mb-2"},"🏥"),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-2 text-center"},"Join as a Hospital")),c.createElement("form",{className:"space-y-4 grid grid-cols-1 md:grid-cols-2 gap-2",onSubmit:r(R)},c.createElement(ra,{label:"Hospital Name",name:"name",...e("name"),error:i.name?.message,required:!0,placeholder:"Enter hospital name"}),c.createElement(ra,{label:"Email",type:"email",name:"email",...e("email"),error:i.email?.message,required:!0,placeholder:"hospital@example.com",autoComplete:"email"}),c.createElement("div",{className:"md:col-span-2"},c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Description"),c.createElement("textarea",{...e("description"),rows:3,className:`w-full px-3 py-2 border ${i.description?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`,placeholder:"Brief description of your hospital..."}),i.description?.message&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},i.description.message)),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Hospital Type"),c.createElement(Yl,{options:Mx,value:g.hospitalType||"",onChange:f=>N("hospitalType",f),placeholder:"Select Hospital Type"}),i.hospitalType?.message&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},i.hospitalType.message)),c.createElement("div",null,c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Category"),c.createElement(Yl,{options:Lx,value:g.category||"",onChange:f=>N("category",f),placeholder:"Select Category"}),i.category?.message&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},i.category.message)),c.createElement(ra,{label:"Phone",type:"tel",name:"phone",...e("phone"),error:i.phone?.message,required:!0,placeholder:"03XXXXXXXXX",onlyNumbers:!0}),c.createElement(ra,{label:"License Number",name:"licenseNumber",...e("licenseNumber"),error:i.licenseNumber?.message,required:!0,placeholder:"Enter hospital license number"}),c.createElement(ra,{label:"Established Year",name:"establishedYear",type:"number",...e("establishedYear"),error:i.establishedYear?.message,required:!0,min:1900,max:new Date().getFullYear(),placeholder:"e.g., 1995"}),c.createElement(ra,{label:"Total Beds",name:"totalBeds",type:"number",...e("totalBeds"),error:i.totalBeds?.message,required:!0,min:1,placeholder:"Number of beds"}),c.createElement(ra,{label:"Operation Theaters",name:"operationTheaters",type:"number",...e("operationTheaters"),error:i.operationTheaters?.message,required:!0,min:0,placeholder:"Number of OTs"}),c.createElement(ra,{label:"CNIC",name:"cnic",value:g.cnic||"",onChange:T,error:i.cnic?.message,required:!0,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,onlyNumbers:!0,allowDashes:!0}),c.createElement("div",{className:"md:col-span-2"},c.createElement("label",{className:"block text-emerald-700 font-medium mb-1"},"Address"),c.createElement("textarea",{...e("address"),required:!0,rows:2,className:`w-full px-3 py-2 border ${i.address?"border-red-300":"border-emerald-200"} rounded focus:outline-none focus:ring-2 focus:ring-emerald-500`,placeholder:"Full hospital address..."}),i.address?.message&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},i.address.message)),c.createElement(ra,{label:"City",name:"city",...e("city"),error:i.city?.message,required:!0,placeholder:"Enter city name"}),c.createElement("div",{className:"md:col-span-2"},c.createElement("label",{className:"block text-emerald-700 font-medium mb-2"},"Available Services"),c.createElement("div",{className:"space-y-2"},c.createElement("div",{className:"flex items-center"},c.createElement("input",{type:"checkbox",id:"emergencyServices",...e("services.emergencyServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"emergencyServices",className:"ml-2 text-sm text-gray-700"},"Emergency Services Available")),c.createElement("div",{className:"flex items-center"},c.createElement("input",{type:"checkbox",id:"ambulanceServices",...e("services.ambulanceServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"ambulanceServices",className:"ml-2 text-sm text-gray-700"},"Ambulance Services Available")),c.createElement("div",{className:"flex items-center"},c.createElement("input",{type:"checkbox",id:"icuServices",...e("services.icuServices"),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"icuServices",className:"ml-2 text-sm text-gray-700"},"ICU Services Available")))),c.createElement("div",{className:"md:col-span-2"},c.createElement(Yy,{label:"Hospital Image",name:"image",onChange:B,error:i.image?.message,accept:"image/jpeg,image/png,image/jpg",maxSize:5e6,required:!0})),c.createElement("div",{className:"md:col-span-2"},c.createElement(Yy,{label:"Hospital Documents",name:"documents",onChange:j,error:i.documents?.message,accept:"image/jpeg,image/png,image/jpg",maxSize:5e6,required:!0})),c.createElement(ra,{label:"Password",type:"password",name:"password",...e("password"),error:i.password?.message,required:!0}),c.createElement(ra,{label:"Confirm Password",type:"password",name:"confirmPassword",...e("confirmPassword"),error:i.confirmPassword?.message,required:!0}),c.createElement("div",{className:"flex items-center space-x-2 mt-4 md:col-span-2"},c.createElement("input",{type:"checkbox",id:"agreement",...e("agreement"),className:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300",required:!0}),c.createElement("label",{htmlFor:"agreement",className:"text-emerald-800 font-semibold text-base"},"🔒 Please make sure all fields are filled correctly before submitting.")),i.agreement?.message&&c.createElement("p",{className:"text-red-500 text-xs mt-1"},i.agreement.message),b&&c.createElement("div",{className:"md:col-span-2 bg-red-50 border border-red-200 rounded-lg p-4"},c.createElement("p",{className:"text-red-600 text-sm"},b)),c.createElement("button",{type:"submit",disabled:!o||y,className:"w-full md:col-span-2 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 font-medium transition-colors duration-200 mt-4 disabled:opacity-50 disabled:cursor-not-allowed"},y?"Submitting...":"Submit"),c.createElement("div",{className:"w-full text-center md:col-span-2"},c.createElement("span",{className:"text-sm font-semibold text-emerald-700"},"Already have an account?"),c.createElement(Ki,{to:"/hospital/login",className:"ml-1 text-emerald-600 hover:underline font-medium"},"Login"))))))},bN=nl({email:ma().min(1,"Email is required").email("Enter a valid email").trim(),password:ma().min(6,"Password must be at least 6 characters long")}),wN=()=>{const e=Ds(),{HospitalLogin:r,loading:i}=eg(),[o,g]=ne.useState(""),{register:N,handleSubmit:B,formState:{errors:j},reset:R}=tu({resolver:au(bN),mode:"onChange"}),d=async S=>{g("");try{await r({email:S.email,password:S.password},e),R()}catch{g("Login failed. Please try again.")}};return c.createElement("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md"},c.createElement("h2",{className:"mb-6 text-center text-3xl font-extrabold text-emerald-900"},"Login as a Hospital"),c.createElement("form",{className:"space-y-6",onSubmit:B(d)},c.createElement(ra,{label:"Email Address",type:"email",name:"email",...N("email"),error:j.email?.message,placeholder:"Enter your email",autoComplete:"username"}),c.createElement(ra,{label:"Password",type:"password",name:"password",...N("password"),error:j.password?.message,placeholder:"Enter your password",autoComplete:"current-password"}),o&&c.createElement("p",{className:"text-red-500 text-sm"},o),c.createElement("button",{type:"submit",disabled:i,className:"w-full py-2 px-4 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 transition duration-200 disabled:opacity-50"},i?"Signing In...":"Sign In")),c.createElement("div",{className:"mt-6 text-center"},c.createElement("span",{className:"text-sm text-emerald-700"},"Don't have an account?"),c.createElement(Ki,{to:"/register/hospital",className:"ml-1 text-emerald-600 hover:underline font-medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"})},"Register"))))},gg={API_KEY:"dac164d6-2dd7-4232-b6b1-05cd1a0edb83",SECRET_KEY:"fc6ce9fe05e735a33e7f3f234e1afe1ec8481389c54a94482d3b6685133a3ef3",API_BASE_URL:"https://api.videosdk.live/v2",TEMP_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiJkYWMxNjRkNi0yZGQ3LTQyMzItYjZiMS0wNWNkMWEwZWRiODMiLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTc1NDk5MjEyMSwiZXhwIjoxNzU3NTg0MTIxfQ.kplefvdyD8APGCFxaIMWvMItwhqgVKiALU3f4EulMtg"},M1=async(e,r,i=["allow_join"],o="user")=>{try{return console.log("✅ Using development token for:",o,r),gg.TEMP_TOKEN}catch(g){throw console.error("Error generating auth token:",g),new Error("Failed to generate authentication token")}},Bf=async(e,r={})=>{try{const i={region:"sg001",...r},o=await bi.post(`${gg.API_BASE_URL}/rooms`,i,{headers:{Authorization:e,"Content-Type":"application/json"},timeout:15e3});return{roomId:o.data.roomId,meetingId:o.data.roomId,region:i.region,createdAt:new Date().toISOString()}}catch(i){throw console.error("Error creating meeting:",i),i.response?.status===401?new Error("Invalid authentication token"):i.response?.status===429?new Error("Rate limit exceeded. Please try again later"):new Error("Failed to create meeting room")}},Qy=async(e,r)=>{try{const i=await bi.get(`${gg.API_BASE_URL}/rooms/${r}`,{headers:{Authorization:e,"Content-Type":"application/json"},timeout:1e4});return{isValid:!0,meetingId:i.data.roomId,region:i.data.region,createdAt:i.data.createdAt}}catch(i){return i.response?.status===404?{isValid:!1,error:"Meeting not found"}:{isValid:!1,error:"Unable to validate meeting"}}},L1=({doctorId:e,doctorName:r,isDoctor:i=!1})=>{const o=Ds(),{user:g,isAuthenticated:N}=vc(),[B,j]=ne.useState(!1),[R,d]=ne.useState(!1),[S,y]=ne.useState(""),b=async()=>{if(!N){Kn.error("Please login to start consultation"),o("/login");return}if(!i){Kn.error("Only doctors can create meetings. Please ask the doctor for a meeting code.");return}try{j(!0);const f=await M1(g._id,g.name),h=await Bf(f);if(h&&h.roomId){const k=h.roomId;o(`/doctor/consultation/${k}/${g._id}`),Kn.success("Consultation started successfully!")}else throw new Error("Failed to create meeting")}catch(f){console.error("Failed to start consultation:",f),Kn.error("Failed to start consultation. Please try again.")}finally{j(!1)}},T=async()=>{if(!N){Kn.error("Please login to join consultation"),o("/login");return}if(!S.trim()){Kn.error("Please enter a consultation code");return}try{d(!0),o(i?`/doctor/consultation/${S}/patient_waiting`:`/consultation/${S}/${e}`),Kn.success("Joining consultation...")}catch(f){console.error("Failed to join consultation:",f),Kn.error("Failed to join consultation")}finally{d(!1)}};return c.createElement("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200"},c.createElement("h4",{className:"font-semibold text-blue-800 mb-2"},"Video Consultation"),c.createElement("p",{className:"text-blue-700 text-sm mb-4"},"Connect with ",r," via video call. Make sure you have a stable internet connection and allow camera/microphone access."),c.createElement("div",{className:"space-y-3"},i?c.createElement("button",{onClick:b,disabled:B,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},B?"Creating Meeting...":"Start Video Consultation"):c.createElement("div",{className:"text-center p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},c.createElement("p",{className:"text-yellow-800 text-sm mb-2"},c.createElement("strong",null,"Note:")," Only doctors can create meetings"),c.createElement("p",{className:"text-yellow-700 text-xs"},"Please ask the doctor to start the consultation and provide you with a meeting code.")),c.createElement("div",{className:"flex gap-2"},c.createElement("input",{type:"text",value:S,onChange:f=>y(f.target.value),placeholder:i?"Enter meeting code to join":"Enter meeting code from doctor",className:"flex-1 px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),c.createElement("button",{onClick:T,disabled:R||!S.trim(),className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},R?"Joining...":"Join"))),c.createElement("div",{className:"mt-4 text-xs text-blue-600"},c.createElement("p",null,"• Ensure stable internet connection"),c.createElement("p",null,"• Allow camera and microphone access"),c.createElement("p",null,"• Find a quiet, private space"),c.createElement("p",null,"• Meeting codes are generated automatically when starting a consultation")))},EN=()=>{const{slug:e}=Oc(),r=Ds(),{user:i,isAuthenticated:o}=vc(),{allDoctors:g,loading:N}=yc(),[B,j]=ne.useState(null),[R,d]=ne.useState("video");ne.useEffect(()=>{if(g&&g.length>0){const f=e.split("-").pop(),h=g.find(k=>k._id===f);h&&j(h)}},[g,e]);const S=()=>{r(`/doctor/book/${e}`)};if(N)return c.createElement("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"text-center"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),c.createElement("p",{className:"text-emerald-700"},"Loading doctor profile...")));if(!B)return c.createElement("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"text-center"},c.createElement("p",{className:"text-emerald-700 text-lg"},"Doctor not found."),c.createElement("button",{onClick:()=>r("/"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors"},"Go Home")));const y=f=>Array.isArray(f)?f.join(", "):f||"General Medicine",b=f=>f&&typeof f=="object"?f.average||0:f||0,T=f=>f&&typeof f=="object"&&f.count||0;return c.createElement("div",{className:"min-h-screen bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"max-w-6xl mx-auto"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8"},c.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},c.createElement("div",{className:"text-center lg:text-left"},c.createElement("img",{src:B.profilePicture||`https://ui-avatars.com/api/?name=${encodeURIComponent(B.name)}&background=random`,alt:B.name,className:"w-32 h-32 rounded-full object-cover border-4 border-emerald-100 shadow-lg mx-auto lg:mx-0 mb-4"}),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-2"},B.name),c.createElement("p",{className:"text-emerald-700 text-lg mb-2"},y(B.speciality)),c.createElement("p",{className:"text-gray-600 mb-2"},B.mainDegree),c.createElement("div",{className:"flex items-center justify-center lg:justify-start space-x-2"},c.createElement("span",{className:"text-yellow-500"},"★"),c.createElement("span",{className:"font-medium"},b(B.rating)),c.createElement("span",{className:"text-gray-500"},"(",T(B.rating)," reviews)"))),c.createElement("div",{className:"space-y-4"},c.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},c.createElement("h3",{className:"font-semibold text-emerald-700 mb-3"},"Professional Information"),c.createElement("div",{className:"space-y-2 text-sm"},c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"Experience:"),c.createElement("span",{className:"font-medium"},B.experience||0," years")),c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"PMDC Number:"),c.createElement("span",{className:"font-medium"},B.pmdcNumber||"Not specified")),c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"Status:"),c.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${B.status==="verified"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},B.status||"Pending")))),c.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},c.createElement("h3",{className:"font-semibold text-emerald-700 mb-3"},"Contact Information"),c.createElement("div",{className:"space-y-2 text-sm"},c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("span",{className:"text-gray-600"},"📧"),c.createElement("span",null,B.email)),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("span",{className:"text-gray-600"},"📱"),c.createElement("span",null,B.phone)),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("span",{className:"text-gray-600"},"🏥"),c.createElement("span",null,B.hospital||"Not specified"))))),c.createElement("div",{className:"space-y-4"},c.createElement("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200"},c.createElement("h3",{className:"font-semibold text-blue-800 mb-3"},"Consultation Fee"),c.createElement("p",{className:"text-2xl font-bold text-blue-600 mb-2"},"Rs. ",B.fee||"Not specified"),c.createElement("div",{className:"text-sm text-blue-700"},c.createElement("p",null,"• Video consultation available"),c.createElement("p",null,"• In-person appointments"),c.createElement("p",null,"• Professional medical advice"))),c.createElement("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200"},c.createElement("h3",{className:"font-semibold text-emerald-800 mb-3"},"Availability"),c.createElement("div",{className:"flex items-center space-x-2 mb-2"},c.createElement("span",{className:`w-3 h-3 rounded-full ${B.availability?"bg-green-500":"bg-red-500"}`}),c.createElement("span",{className:B.availability?"text-green-700":"text-red-700"},B.availability?"Available for consultations":"Currently unavailable")),B.availability&&c.createElement("button",{onClick:S,className:"w-full bg-emerald-600 text-white py-2 px-4 rounded-lg hover:bg-emerald-700 transition-colors"},"Book Appointment"))))),B.availability&&c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8"},c.createElement("h2",{className:"text-2xl font-bold text-emerald-800 mb-6 text-center"},"Start Video Consultation"),c.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700"},"Why Choose Video Consultation?"),c.createElement("ul",{className:"space-y-2 text-gray-600"},c.createElement("li",{className:"flex items-start space-x-2"},c.createElement("span",{className:"text-emerald-500 mt-1"},"✓"),c.createElement("span",null,"Consult from the comfort of your home")),c.createElement("li",{className:"flex items-start space-x-2"},c.createElement("span",{className:"text-emerald-500 mt-1"},"✓"),c.createElement("span",null,"No travel time or waiting in queues")),c.createElement("li",{className:"flex items-start space-x-2"},c.createElement("span",{className:"text-emerald-500 mt-1"},"✓"),c.createElement("span",null,"Secure and private consultation")),c.createElement("li",{className:"flex items-start space-x-2"},c.createElement("span",{className:"text-emerald-500 mt-1"},"✓"),c.createElement("span",null,"Easy follow-up appointments"))),c.createElement("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200"},c.createElement("h4",{className:"font-semibold text-yellow-800 mb-2"},"Before Your Consultation"),c.createElement("ul",{className:"text-sm text-yellow-700 space-y-1"},c.createElement("li",null,"• Ensure stable internet connection"),c.createElement("li",null,"• Find a quiet, private space"),c.createElement("li",null,"• Have your medical history ready"),c.createElement("li",null,"• Test your camera and microphone")))),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700"},"Ready to Start?"),o?c.createElement("div",{className:"space-y-3"},c.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},c.createElement("p",{className:"text-yellow-800 text-sm"},c.createElement("strong",null,"Note:")," The doctor will start the video consultation and provide you with a meeting code to join.")),c.createElement(L1,{doctorId:B._id,doctorName:B.name,isDoctor:!1})):c.createElement("div",{className:"bg-gray-50 p-6 rounded-lg text-center"},c.createElement("p",{className:"text-gray-600 mb-4"},"Please login to start a video consultation"),c.createElement("button",{onClick:()=>r("/login"),className:"bg-emerald-600 text-white py-2 px-6 rounded-lg hover:bg-emerald-700 transition-colors"},"Login Now"))))),c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8"},c.createElement("h2",{className:"text-2xl font-bold text-emerald-800 mb-6"},"Additional Information"),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 border-b border-emerald-200 pb-2"},"Personal Details"),c.createElement("div",{className:"space-y-3 text-sm"},c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"Gender:"),c.createElement("span",{className:"font-medium"},B.gender||"Not specified")),c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"Religion:"),c.createElement("span",{className:"font-medium"},B.religion||"Not specified")),c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-gray-600"},"CNIC:"),c.createElement("span",{className:"font-medium"},B.cnic||"Not specified")))),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 border-b border-emerald-200 pb-2"},"Address"),c.createElement("div",{className:"text-sm"},c.createElement("p",{className:"text-gray-600 mb-2"},"Full Address:"),c.createElement("p",{className:"text-gray-800"},B.fullAddress||"Address not specified")))),c.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 mb-4"},"Verification Status"),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("span",{className:`w-4 h-4 rounded-full ${B.pmdcVerified?"bg-green-500":"bg-red-500"}`}),c.createElement("span",{className:"text-sm"},"PMDC Verification:"," ",B.pmdcVerified?"Verified":"Not Verified")),c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("span",{className:`w-4 h-4 rounded-full ${B.hospitalVerified?"bg-green-500":"bg-red-500"}`}),c.createElement("span",{className:"text-sm"},"Hospital Verification:"," ",B.hospitalVerified?"Verified":"Not Verified")))))))},SN=()=>{const{slug:e}=Oc(),r=Xf.filter(i=>i.slug?i.slug===e:i.specialty.toLowerCase().replace(/\s+/g,"-")===e);return r.length===0?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"No Doctors Found"),c.createElement("p",{className:"text-emerald-700 text-lg"},"No doctors found for this specialty."))):c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize"},e.replace(/-/g," ")," Doctors"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},r.map((i,o)=>c.createElement(Om,{key:o,doctor:i}))))},xN=()=>c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center"},"All Doctors"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},Xf.map((e,r)=>c.createElement(Om,{key:r,doctor:e})))),I1=({hospital:e})=>c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center"},c.createElement("img",{src:e.image||"https://ui-avatars.com/api/?name=Hospital&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),c.createElement("h2",{className:"text-xl font-bold text-emerald-800 mb-1"},e.name),c.createElement("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2"},e.city),c.createElement("div",{className:"text-gray-700 text-sm mb-1"},c.createElement("span",{className:"font-semibold"},"Address:")," ",e.address),c.createElement("div",{className:"text-gray-700 text-sm mb-1"},c.createElement("span",{className:"font-semibold"},"Contact:")," ",e.contact),c.createElement("div",{className:"text-gray-700 text-sm mb-2"},c.createElement("span",{className:"font-semibold"},"Beds:")," ",e.beds),c.createElement(Ki,{to:`/hospitals/${e.slug}/book`,className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 font-medium w-full mb-2 text-center"},"Book Appointment"),c.createElement(Ki,{to:`/hospitals/${e.slug}/doctors`,className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full text-center"},"View Doctors")),RN=()=>c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center"},"All Hospitals"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},Am.map((e,r)=>c.createElement(I1,{key:r,hospital:e})))),j1=({lab:e})=>c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center"},c.createElement("img",{src:e.image||"https://ui-avatars.com/api/?name=Lab&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),c.createElement("h2",{className:"text-xl font-bold text-emerald-800 mb-1"},e.name),c.createElement("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2"},e.city),c.createElement("div",{className:"text-gray-700 text-sm mb-1"},c.createElement("span",{className:"font-semibold"},"Address:")," ",e.address),c.createElement("div",{className:"text-gray-700 text-sm mb-1"},c.createElement("span",{className:"font-semibold"},"Contact:")," ",e.contact),c.createElement("div",{className:"text-gray-700 text-sm mb-2"},c.createElement("span",{className:"font-semibold"},"Tests Available:")," ",e.tests),c.createElement("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 font-medium w-full mb-2"},"Book Test"),c.createElement("button",{className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full"},"View Reports")),kN=()=>c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center"},"All Labs"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},G_.map((e,r)=>c.createElement(j1,{key:r,lab:e})))),B1=({medicine:e})=>c.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col items-center"},c.createElement("img",{src:e.image||"https://ui-avatars.com/api/?name=Medicine&background=random",alt:e.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-emerald-200 shadow mb-4"}),c.createElement("h2",{className:"text-xl font-bold text-emerald-800 mb-1"},e.name),c.createElement("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-xs px-3 py-1 rounded-full mb-2"},e.type),c.createElement("div",{className:"text-gray-700 text-sm mb-1"},c.createElement("span",{className:"font-semibold"},"Description:")," ",e.description),c.createElement("div",{className:"text-emerald-700 font-bold mb-2"},"Price: Rs. ",e.price),c.createElement("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors duration-200 font-medium w-full mb-2"},"Add to Cart"),c.createElement("button",{className:"px-4 py-2 border border-emerald-600 text-emerald-600 rounded-md hover:bg-emerald-50 transition-colors duration-200 font-medium w-full"},"Buy Now")),CN=()=>c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center"},"All Medicines"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},$_.map((e,r)=>c.createElement(B1,{key:r,medicine:e})))),TN=()=>{const{slug:e}=Oc(),r=Am.filter(i=>i.slug?i.slug===e:i.city.toLowerCase().replace(/\s+/g,"-")===e||i.name.toLowerCase().replace(/\s+/g,"-")===e);return console.log(r,"filter hospitals "),r.length===0?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"No Hospitals Found"),c.createElement("p",{className:"text-emerald-700 text-lg"},"No hospitals found for this area."))):c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize"},e.replace(/-/g," ")," Hospitals"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},r.map((i,o)=>c.createElement(I1,{key:o,hospital:i}))))},PN=()=>{const{slug:e}=Oc(),r=Am.find(o=>o.slug===e),i=Xf.filter(o=>o.hospital===(r&&r.name));return r?c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize"},"Doctors at ",r.name),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},i.length===0?c.createElement("div",{className:"col-span-full text-center text-gray-500"},"No doctors found for this hospital."):i.map((o,g)=>c.createElement(Om,{key:g,doctor:o})))):c.createElement("div",{className:"p-8 text-center"},"Hospital not found.")},NN=()=>{const{slug:e}=Oc(),r=G_.filter(i=>i.slug?i.slug===e:i.city.toLowerCase().replace(/\s+/g,"-")===e||i.name.toLowerCase().replace(/\s+/g,"-")===e);return r.length===0?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"No Labs Found"),c.createElement("p",{className:"text-emerald-700 text-lg"},"No labs found for this area."))):c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize"},e.replace(/-/g," ")," Labs"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},r.map((i,o)=>c.createElement(j1,{key:o,lab:i}))))},AN=()=>{const{slug:e}=Oc(),r=$_.filter(i=>(i.slug?i.slug===e:i.name.toLowerCase().replace(/\s+/g,"-")===e)||i.type.toLowerCase().replace(/\s+/g,"-")===e);return r.length===0?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-lg w-full text-center"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800 mb-4"},"No Medicines Found"),c.createElement("p",{className:"text-emerald-700 text-lg"},"No medicines found for this type."))):c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4"},c.createElement("h1",{className:"text-2xl font-bold text-emerald-800 mb-8 text-center capitalize"},e.replace(/-/g," ")," Medicines"),c.createElement("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},r.map((i,o)=>c.createElement(B1,{key:o,medicine:i}))))},ON=()=>{const{slug:e}=Oc(),r=Ds(),{user:i,isAuthenticated:o}=vc(),{allDoctors:g,loading:N}=yc(),[B,j]=ne.useState({name:"",date:"",time:""}),[R,d]=ne.useState(!1),[S,y]=ne.useState("in-person"),[b,T]=ne.useState(null);ne.useEffect(()=>{if(g&&g.length>0){const k=e.split("-").pop(),E=g.find(H=>H._id===k);E&&T(E)}},[g,e]);const f=k=>{j({...B,[k.target.name]:k.target.value})},h=k=>{if(k.preventDefault(),!o){Kn.error("Please login to book an appointment"),r("/login");return}d(!0)};return N?c.createElement("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"text-center"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),c.createElement("p",{className:"text-emerald-700"},"Loading doctor information..."))):b?c.createElement("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-4xl w-full"},c.createElement("h2",{className:"text-2xl font-bold text-emerald-800 mb-6 text-center"},"Book Appointment with ",b.name),c.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},c.createElement("div",{className:"flex flex-col items-center mb-6"},c.createElement("img",{src:b.profilePicture||`https://ui-avatars.com/api/?name=${encodeURIComponent(b.name)}&background=random`,alt:b.name,className:"w-24 h-24 rounded-full object-cover border-4 border-emerald-100 shadow mb-4"}),c.createElement("h3",{className:"text-xl font-semibold text-emerald-800 mb-2"},b.name),c.createElement("p",{className:"text-emerald-700 text-sm mb-2"},Array.isArray(b.speciality)?b.speciality.join(", "):b.speciality),c.createElement("p",{className:"text-gray-600 text-sm mb-2"},b.experience||0," years experience"),c.createElement("p",{className:"text-green-600 font-semibold"},"Rs. ",b.fee||"Not specified"),b.mainDegree&&c.createElement("p",{className:"text-gray-600 text-sm"},b.mainDegree)),c.createElement("div",{className:"space-y-6"},c.createElement("div",null,c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 mb-4"},"Choose Consultation Type"),c.createElement("div",{className:"space-y-3"},c.createElement("label",{className:"flex items-center space-x-3 cursor-pointer"},c.createElement("input",{type:"radio",name:"consultationType",value:"in-person",checked:S==="in-person",onChange:k=>y(k.target.value),className:"text-emerald-600 focus:ring-emerald-500"}),c.createElement("span",{className:"text-gray-700"},"In-Person Consultation")),c.createElement("label",{className:"flex items-center space-x-3 cursor-pointer"},c.createElement("input",{type:"radio",name:"consultationType",value:"video",checked:S==="video",onChange:k=>y(k.target.value),className:"text-emerald-600 focus:ring-emerald-500"}),c.createElement("span",{className:"text-gray-700"},"Video Consultation")))),S==="video"?c.createElement("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200"},c.createElement("h4",{className:"font-semibold text-blue-800 mb-2"},"Video Consultation"),c.createElement("p",{className:"text-blue-700 text-sm mb-4"},"Connect with ",b.name," via video call. Make sure you have a stable internet connection and allow camera/microphone access."),o?c.createElement("div",{className:"space-y-3"},c.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},c.createElement("p",{className:"text-yellow-800 text-sm"},c.createElement("strong",null,"Note:")," The doctor will start the video consultation and provide you with a meeting code to join.")),c.createElement(L1,{doctorId:b._id,doctorName:b.name,isDoctor:!1})):c.createElement("button",{onClick:()=>r("/login"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors"},"Login to Join Video Consultation")):c.createElement("div",null,c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 mb-4"},"Book In-Person Appointment"),R?c.createElement("div",{className:"text-green-700 text-center font-semibold p-4 bg-green-50 rounded-lg"},"Appointment booked successfully!"):c.createElement("form",{onSubmit:h,className:"space-y-4"},c.createElement("input",{name:"name",value:B.name,onChange:f,required:!0,placeholder:"Your Name",className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),c.createElement("input",{name:"date",type:"date",value:B.date,onChange:f,required:!0,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),c.createElement("input",{name:"time",type:"time",value:B.time,onChange:f,required:!0,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),c.createElement("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-2 rounded hover:bg-emerald-700 transition-colors"},"Book Appointment"))))),c.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-700 mb-3"},"Important Information"),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600"},c.createElement("div",null,c.createElement("h4",{className:"font-medium text-emerald-700 mb-2"},"For Video Consultations:"),c.createElement("ul",{className:"space-y-1"},c.createElement("li",null,"• Ensure stable internet connection"),c.createElement("li",null,"• Find a quiet, private space"),c.createElement("li",null,"• Have your medical history ready"),c.createElement("li",null,"• Test your camera and microphone"))),c.createElement("div",null,c.createElement("h4",{className:"font-medium text-emerald-700 mb-2"},"For In-Person Appointments:"),c.createElement("ul",{className:"space-y-1"},c.createElement("li",null,"• Arrive 10 minutes early"),c.createElement("li",null,"• Bring your ID and medical records"),c.createElement("li",null,"• Wear a mask if required"),c.createElement("li",null,"• Follow clinic safety protocols"))))))):c.createElement("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"text-center"},c.createElement("p",{className:"text-emerald-700 text-lg"},"Doctor not found."),c.createElement("button",{onClick:()=>r("/"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors"},"Go Home")))},DN=()=>{const{slug:e}=Oc(),r=Am.find(R=>R.slug===e),[i,o]=ne.useState({name:"",date:"",time:""}),[g,N]=ne.useState(!1);if(!r)return c.createElement("div",{className:"p-8 text-center"},"Hospital not found.");const B=R=>{o({...i,[R.target.name]:R.target.value})},j=R=>{R.preventDefault(),N(!0)};return c.createElement("div",{className:"min-h-[60vh] flex justify-center items-center bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-md w-full"},c.createElement("h2",{className:"text-2xl font-bold text-emerald-800 mb-4 text-center"},"Book Appointment at ",r.name),c.createElement("div",{className:"flex flex-col items-center mb-4"},c.createElement("img",{src:r.image,alt:r.name,className:"w-20 h-20 rounded object-cover border-4 border-emerald-100 shadow mb-2"}),c.createElement("p",{className:"text-emerald-700 text-sm"},r.address)),g?c.createElement("div",{className:"text-green-700 text-center font-semibold"},"Appointment booked successfully!"):c.createElement("form",{onSubmit:j,className:"space-y-4"},c.createElement("input",{name:"name",value:i.name,onChange:B,required:!0,placeholder:"Your Name",className:"w-full border rounded px-3 py-2"}),c.createElement("input",{name:"date",type:"date",value:i.date,onChange:B,required:!0,className:"w-full border rounded px-3 py-2"}),c.createElement("input",{name:"time",type:"time",value:i.time,onChange:B,required:!0,className:"w-full border rounded px-3 py-2"}),c.createElement("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-2 rounded hover:bg-emerald-700 transition"},"Book Now"))))},MN=()=>{const{user:e,loading:r,signOut:i}=vc(),[o,g]=ne.useState(!1),[N,B]=ne.useState({name:e?.name||"",email:e?.email||"",cnic:e?.cnic||""}),j=y=>{const{name:b,value:T}=y.target;B(b==="cnic"?f=>({...f,[b]:Hm(T)}):f=>({...f,[b]:T}))},R=async()=>{try{Kn.success("Profile updated successfully!"),g(!1)}catch{Kn.error("Failed to update profile")}},d=()=>{B({name:e?.name||"",email:e?.email||"",cnic:e?.cnic||""}),g(!1)},S=()=>{i()};return e?c.createElement("div",{className:"min-h-screen bg-emerald-50 py-16 px-4"},c.createElement("div",{className:"max-w-4xl mx-auto"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8"},c.createElement("div",{className:"flex items-center justify-between mb-8"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800"},"User Profile"),c.createElement("div",{className:"flex space-x-3"},o?c.createElement(c.Fragment,null,c.createElement("button",{onClick:R,disabled:r,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50"},r?"Saving...":"Save Changes"),c.createElement("button",{onClick:d,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"},"Cancel")):c.createElement("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors"},"Edit Profile"),c.createElement("button",{onClick:S,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"},"Logout"))),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},c.createElement("div",{className:"space-y-6"},c.createElement("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2"},"Personal Information"),c.createElement("div",{className:"space-y-4"},c.createElement(ra,{label:"Full Name",name:"name",value:N.name,onChange:j,disabled:!o,required:!0}),c.createElement(ra,{label:"Email Address",type:"email",name:"email",value:N.email,onChange:j,disabled:!o,required:!0}),c.createElement(ra,{label:"CNIC",name:"cnic",value:N.cnic,onChange:j,disabled:!o,placeholder:"xxxxx-xxxxxxx-x",maxLength:15,required:!0}))),c.createElement("div",{className:"space-y-6"},c.createElement("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2"},"Account Information"),c.createElement("div",{className:"space-y-4"},c.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},c.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"User ID"),c.createElement("p",{className:"text-gray-900 font-mono text-sm"},e._id)),c.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},c.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Role"),c.createElement("p",{className:"text-gray-900 capitalize"},e.role)),c.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},c.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Member Since"),c.createElement("p",{className:"text-gray-900"},new Date(e.createdAt).toLocaleDateString()))))),c.createElement("div",{className:"mt-12"},c.createElement("h2",{className:"text-xl font-semibold text-emerald-700 border-b border-emerald-200 pb-2 mb-6"},"Consultation History"),c.createElement("div",{className:"bg-gray-50 p-6 rounded-lg text-center"},c.createElement("p",{className:"text-gray-600 mb-4"},"Your consultation history will appear here"),c.createElement("p",{className:"text-sm text-gray-500"},"Start your first consultation by booking an appointment with a doctor")))))):c.createElement("div",{className:"min-h-screen flex items-center justify-center bg-emerald-50"},c.createElement("div",{className:"text-center"},c.createElement("p",{className:"text-lg text-emerald-700"},"Please login to view your profile")))};var em={exports:{}},Jy;function LN(){if(Jy)return em.exports;Jy=1;var e=typeof Reflect=="object"?Reflect:null,r=e&&typeof e.apply=="function"?e.apply:function(v,U,C){return Function.prototype.apply.call(v,U,C)},i;e&&typeof e.ownKeys=="function"?i=e.ownKeys:Object.getOwnPropertySymbols?i=function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:i=function(v){return Object.getOwnPropertyNames(v)};function o(P){console&&console.warn&&console.warn(P)}var g=Number.isNaN||function(v){return v!==v};function N(){N.init.call(this)}em.exports=N,em.exports.once=E,N.EventEmitter=N,N.prototype._events=void 0,N.prototype._eventsCount=0,N.prototype._maxListeners=void 0;var B=10;function j(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(N,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(P){if(typeof P!="number"||P<0||g(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");B=P}}),N.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},N.prototype.setMaxListeners=function(v){if(typeof v!="number"||v<0||g(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this};function R(P){return P._maxListeners===void 0?N.defaultMaxListeners:P._maxListeners}N.prototype.getMaxListeners=function(){return R(this)},N.prototype.emit=function(v){for(var U=[],C=1;C<arguments.length;C++)U.push(arguments[C]);var _=v==="error",w=this._events;if(w!==void 0)_=_&&w.error===void 0;else if(!_)return!1;if(_){var p;if(U.length>0&&(p=U[0]),p instanceof Error)throw p;var x=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw x.context=p,x}var A=w[v];if(A===void 0)return!1;if(typeof A=="function")r(A,this,U);else for(var I=A.length,M=f(A,I),C=0;C<I;++C)r(M[C],this,U);return!0};function d(P,v,U,C){var _,w,p;if(j(U),w=P._events,w===void 0?(w=P._events=Object.create(null),P._eventsCount=0):(w.newListener!==void 0&&(P.emit("newListener",v,U.listener?U.listener:U),w=P._events),p=w[v]),p===void 0)p=w[v]=U,++P._eventsCount;else if(typeof p=="function"?p=w[v]=C?[U,p]:[p,U]:C?p.unshift(U):p.push(U),_=R(P),_>0&&p.length>_&&!p.warned){p.warned=!0;var x=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");x.name="MaxListenersExceededWarning",x.emitter=P,x.type=v,x.count=p.length,o(x)}return P}N.prototype.addListener=function(v,U){return d(this,v,U,!1)},N.prototype.on=N.prototype.addListener,N.prototype.prependListener=function(v,U){return d(this,v,U,!0)};function S(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(P,v,U){var C={fired:!1,wrapFn:void 0,target:P,type:v,listener:U},_=S.bind(C);return _.listener=U,C.wrapFn=_,_}N.prototype.once=function(v,U){return j(U),this.on(v,y(this,v,U)),this},N.prototype.prependOnceListener=function(v,U){return j(U),this.prependListener(v,y(this,v,U)),this},N.prototype.removeListener=function(v,U){var C,_,w,p,x;if(j(U),_=this._events,_===void 0)return this;if(C=_[v],C===void 0)return this;if(C===U||C.listener===U)--this._eventsCount===0?this._events=Object.create(null):(delete _[v],_.removeListener&&this.emit("removeListener",v,C.listener||U));else if(typeof C!="function"){for(w=-1,p=C.length-1;p>=0;p--)if(C[p]===U||C[p].listener===U){x=C[p].listener,w=p;break}if(w<0)return this;w===0?C.shift():h(C,w),C.length===1&&(_[v]=C[0]),_.removeListener!==void 0&&this.emit("removeListener",v,x||U)}return this},N.prototype.off=N.prototype.removeListener,N.prototype.removeAllListeners=function(v){var U,C,_;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[v]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[v]),this;if(arguments.length===0){var w=Object.keys(C),p;for(_=0;_<w.length;++_)p=w[_],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(U=C[v],typeof U=="function")this.removeListener(v,U);else if(U!==void 0)for(_=U.length-1;_>=0;_--)this.removeListener(v,U[_]);return this};function b(P,v,U){var C=P._events;if(C===void 0)return[];var _=C[v];return _===void 0?[]:typeof _=="function"?U?[_.listener||_]:[_]:U?k(_):f(_,_.length)}N.prototype.listeners=function(v){return b(this,v,!0)},N.prototype.rawListeners=function(v){return b(this,v,!1)},N.listenerCount=function(P,v){return typeof P.listenerCount=="function"?P.listenerCount(v):T.call(P,v)},N.prototype.listenerCount=T;function T(P){var v=this._events;if(v!==void 0){var U=v[P];if(typeof U=="function")return 1;if(U!==void 0)return U.length}return 0}N.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function f(P,v){for(var U=new Array(v),C=0;C<v;++C)U[C]=P[C];return U}function h(P,v){for(;v+1<P.length;v++)P[v]=P[v+1];P.pop()}function k(P){for(var v=new Array(P.length),U=0;U<v.length;++U)v[U]=P[U].listener||P[U];return v}function E(P,v){return new Promise(function(U,C){function _(p){P.removeListener(v,w),C(p)}function w(){typeof P.removeListener=="function"&&P.removeListener("error",_),U([].slice.call(arguments))}m(P,v,w,{once:!0}),v!=="error"&&H(P,_,{once:!0})})}function H(P,v,U){typeof P.on=="function"&&m(P,"error",v,U)}function m(P,v,U,C){if(typeof P.on=="function")C.once?P.once(v,U):P.on(v,U);else if(typeof P.addEventListener=="function")P.addEventListener(v,function _(w){C.once&&P.removeEventListener(v,_),U(w)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P)}return em.exports}var IN=LN();const jN=zf(IN);var ff={exports:{}},Xy;function BN(){return Xy||(Xy=1,function(e,r){var i={};/*! For license information please see videosdk.js.LICENSE.txt */(function(o,g){e.exports=g()})(self,()=>(()=>{var o={11:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Chrome74=void 0;const S=d(7363),y=d(2994),b=d(1765),T=d(8046),f=d(5544),h=d(5938),k=d(4256),E=d(4893),H=d(521),m=d(1305),P=d(3303),v=new y.Logger("Chrome74"),U={OS:1024,MIS:1024};class C extends H.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new C}constructor(){super()}get name(){return"Chrome74"}close(){if(v.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){v.debug("getNativeRtpCapabilities()");const w=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{w.addTransceiver("audio"),w.addTransceiver("video");const p=await w.createOffer();try{w.close()}catch{}const x=S.parse(p.sdp),A=f.extractRtpCapabilities({sdpObject:x});return k.addNackSupportForOpus(A),A}catch(p){try{w.close()}catch{}throw p}}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:U}}run({direction:w,iceParameters:p,iceCandidates:x,dtlsParameters:A,sctpParameters:I,iceServers:M,iceTransportPolicy:F,additionalSettings:z,proprietaryConstraints:G,extendedRtpCapabilities:Z}){v.debug("run()"),this._direction=w,this._remoteSdp=new m.RemoteSdp({iceParameters:p,iceCandidates:x,dtlsParameters:A,sctpParameters:I}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",Z),video:T.getSendingRtpParameters("video",Z)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",Z),video:T.getSendingRemoteRtpParameters("video",Z)},A.role&&A.role!=="auto"&&(this._forcedLocalDtlsRole=A.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:M??[],iceTransportPolicy:F??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...z},G),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ce=>{this.emit("@icecandidateerror",ce)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(v.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(w){this.assertNotClosed(),v.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=w,this._pc.setConfiguration(p)}async restartIce(w){if(this.assertNotClosed(),v.debug("restartIce()"),this._remoteSdp.updateIceParameters(w),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});v.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const x={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:w,encodings:p,codecOptions:x,codec:A}){this.assertNotClosed(),this.assertSendDirection(),v.debug("send() [kind:%s, track.id:%s]",w.kind,w.id),p&&p.length>1&&p.forEach((_e,Pe)=>{_e.rid=`r${Pe}`});const I=b.clone(this._sendingRtpParametersByKind[w.kind]);I.codecs=T.reduceCodecs(I.codecs,A);const M=b.clone(this._sendingRemoteRtpParametersByKind[w.kind]);M.codecs=T.reduceCodecs(M.codecs,A);const F=this._remoteSdp.getNextMediaSectionIdx(),z=this._pc.addTransceiver(w,{direction:"sendonly",streams:[this._sendStream],sendEncodings:p});let G,Z=await this._pc.createOffer(),ce=S.parse(Z.sdp);ce.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ce});let X=!1;const Ee=(0,P.parse)((p??[{}])[0].scalabilityMode);p&&p.length===1&&Ee.spatialLayers>1&&I.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(v.debug("send() | enabling legacy simulcast for VP9 SVC"),X=!0,ce=S.parse(Z.sdp),G=ce.media[F.idx],h.addLegacySimulcast({offerMediaObject:G,numStreams:Ee.spatialLayers}),Z={type:"offer",sdp:S.write(ce)}),v.debug("send() | calling pc.setLocalDescription() [offer:%o]",Z),await this._pc.setLocalDescription(Z);const Se=z.mid;if(I.mid=Se,ce=S.parse(this._pc.localDescription.sdp),G=ce.media[F.idx],I.rtcp.cname=f.getCname({offerMediaObject:G}),p)if(p.length===1){let _e=h.getRtpEncodings({offerMediaObject:G});Object.assign(_e[0],p[0]),X&&(_e=[_e[0]]),I.encodings=_e}else I.encodings=p;else I.encodings=h.getRtpEncodings({offerMediaObject:G});if(I.encodings.length>1&&(I.codecs[0].mimeType.toLowerCase()==="video/vp8"||I.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const _e of I.encodings)_e.scalabilityMode?_e.scalabilityMode=`L1T${Ee.temporalLayers}`:_e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:G,reuseMid:F.reuseMid,offerRtpParameters:I,answerRtpParameters:M,codecOptions:x});const xe={type:"answer",sdp:this._remoteSdp.getSdp()};return v.debug("send() | calling pc.setRemoteDescription() [answer:%o]",xe),await this._pc.setRemoteDescription(xe),this._mapMidTransceiver.set(Se,z),{localId:Se,rtpParameters:I,rtpSender:z.sender}}async stopSending(w){if(this.assertSendDirection(),v.debug("stopSending() [localId:%s]",w),this._closed)return;const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const x=await this._pc.createOffer();v.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._mapMidTransceiver.delete(w)}async pauseSending(w){this.assertNotClosed(),this.assertSendDirection(),v.debug("pauseSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(w);const x=await this._pc.createOffer();v.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async resumeSending(w){this.assertNotClosed(),this.assertSendDirection(),v.debug("resumeSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(this._remoteSdp.resumeSendingMediaSection(w),!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly";const x=await this._pc.createOffer();v.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async replaceTrack(w,p){this.assertNotClosed(),this.assertSendDirection(),p?v.debug("replaceTrack() [localId:%s, track.id:%s]",w,p.id):v.debug("replaceTrack() [localId:%s, no track]",w);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(p)}async setMaxSpatialLayer(w,p){this.assertNotClosed(),this.assertSendDirection(),v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",w,p);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");const A=x.sender.getParameters();A.encodings.forEach((F,z)=>{F.active=z<=p}),await x.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const I=await this._pc.createOffer();v.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const M={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async setRtpEncodingParameters(w,p){this.assertNotClosed(),this.assertSendDirection(),v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",w,p);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");const A=x.sender.getParameters();A.encodings.forEach((F,z)=>{A.encodings[z]={...F,...p}}),await x.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const I=await this._pc.createOffer();v.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const M={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async getSenderStats(w){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:w,maxPacketLifeTime:p,maxRetransmits:x,label:A,protocol:I}){this.assertNotClosed(),this.assertSendDirection();const M={negotiated:!0,id:this._nextSendSctpStreamId,ordered:w,maxPacketLifeTime:p,maxRetransmits:x,protocol:I};v.debug("sendDataChannel() [options:%o]",M);const F=this._pc.createDataChannel(A,M);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%U.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),G=S.parse(z.sdp),Z=G.media.find(X=>X.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G}),v.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:Z});const ce={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setRemoteDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:F,sctpStreamParameters:{streamId:M.id,ordered:M.ordered,maxPacketLifeTime:M.maxPacketLifeTime,maxRetransmits:M.maxRetransmits}}}async receive(w){this.assertNotClosed(),this.assertRecvDirection();const p=[],x=new Map;for(const F of w){const{trackId:z,kind:G,rtpParameters:Z,streamId:ce}=F;v.debug("receive() [trackId:%s, kind:%s]",z,G);const X=Z.mid??String(this._mapMidTransceiver.size);x.set(z,X),this._remoteSdp.receive({mid:X,kind:G,offerRtpParameters:Z,streamId:ce??Z.rtcp.cname,trackId:z})}const A={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",A),await this._pc.setRemoteDescription(A);let I=await this._pc.createAnswer();const M=S.parse(I.sdp);for(const F of w){const{trackId:z,rtpParameters:G}=F,Z=x.get(z),ce=M.media.find(X=>String(X.mid)===Z);f.applyCodecParameters({offerRtpParameters:G,answerMediaObject:ce})}I={type:"answer",sdp:S.write(M)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),v.debug("receive() | calling pc.setLocalDescription() [answer:%o]",I),await this._pc.setLocalDescription(I);for(const F of w){const{trackId:z}=F,G=x.get(z),Z=this._pc.getTransceivers().find(ce=>ce.mid===G);if(!Z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(G,Z),p.push({localId:G,track:Z.receiver.track,rtpReceiver:Z.receiver})}return p}async stopReceiving(w){if(this.assertRecvDirection(),this._closed)return;for(const A of w){v.debug("stopReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(I.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const A of w)this._mapMidTransceiver.delete(A)}async pauseReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){v.debug("pauseReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");I.direction="inactive",this._remoteSdp.pauseMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async resumeReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){v.debug("resumeReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");I.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async getReceiverStats(w){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:w,label:p,protocol:x}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:A,ordered:I,maxPacketLifeTime:M,maxRetransmits:F}=w,z={negotiated:!0,id:A,ordered:I,maxPacketLifeTime:M,maxRetransmits:F,protocol:x};v.debug("receiveDataChannel() [options:%o]",z);const G=this._pc.createDataChannel(p,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Z={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Z),await this._pc.setRemoteDescription(Z);const ce=await this._pc.createAnswer();if(!this._transportReady){const X=S.parse(ce.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:X})}v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setLocalDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:G}}async setupTransport({localDtlsRole:w,localSdpObject:p}){p||(p=S.parse(this._pc.localDescription.sdp));const x=f.extractDtlsParameters({sdpObject:p});x.role=w,this._remoteSdp.updateDtlsRole(w==="client"?"server":"client"),await new Promise((A,I)=>{this.safeEmit("@connect",{dtlsParameters:x},A,I)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new E.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.Chrome74=C},19:function(j,R,d){var S,y,b,T,f,h,k,E,H;j.exports=(H=d(9021),d(3009),d(1025),y=(S=H).lib,b=y.Base,T=y.WordArray,f=S.algo,h=f.SHA256,k=f.HMAC,E=f.PBKDF2=b.extend({cfg:b.extend({keySize:4,hasher:h,iterations:25e4}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,P){for(var v=this.cfg,U=k.create(v.hasher,m),C=T.create(),_=T.create([1]),w=C.words,p=_.words,x=v.keySize,A=v.iterations;w.length<x;){var I=U.update(P).finalize(_);U.reset();for(var M=I.words,F=M.length,z=I,G=1;G<A;G++){z=U.finalize(z),U.reset();for(var Z=z.words,ce=0;ce<F;ce++)M[ce]^=Z[ce]}C.concat(I),p[0]++}return C.sigBytes=4*x,C}}),S.PBKDF2=function(m,P,v){return E.create(v).compute(m,P)},H.PBKDF2)},25:function(j,R,d){var S,y,b,T;j.exports=(T=d(9021),d(7165),y=(S=T).lib.CipherParams,b=S.enc.Hex,S.format.Hex={stringify:function(f){return f.ciphertext.toString(b)},parse:function(f){var h=b.parse(f);return y.create({ciphertext:h})}},T.format.Hex)},76:(j,R,d)=>{R.s$=R.pF=void 0,d(7833).default,d(8057);var S=d(6004);Object.defineProperty(R,"pF",{enumerable:!0,get:function(){return S.Device}});var y=d(3303);Object.defineProperty(R,"s$",{enumerable:!0,get:function(){return y.parse}}),d(8046),d(2731),d(5248)},182:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.version=R.validate=R.v7=R.v6ToV1=R.v6=R.v5=R.v4=R.v3=R.v1ToV6=R.v1=R.stringify=R.parse=R.NIL=R.MAX=void 0;var S=d(2196);Object.defineProperty(R,"MAX",{enumerable:!0,get:function(){return S.default}});var y=d(3465);Object.defineProperty(R,"NIL",{enumerable:!0,get:function(){return y.default}});var b=d(1797);Object.defineProperty(R,"parse",{enumerable:!0,get:function(){return b.default}});var T=d(6011);Object.defineProperty(R,"stringify",{enumerable:!0,get:function(){return T.default}});var f=d(1425);Object.defineProperty(R,"v1",{enumerable:!0,get:function(){return f.default}});var h=d(6568);Object.defineProperty(R,"v1ToV6",{enumerable:!0,get:function(){return h.default}});var k=d(591);Object.defineProperty(R,"v3",{enumerable:!0,get:function(){return k.default}});var E=d(8286);Object.defineProperty(R,"v4",{enumerable:!0,get:function(){return E.default}});var H=d(4557);Object.defineProperty(R,"v5",{enumerable:!0,get:function(){return H.default}});var m=d(6356);Object.defineProperty(R,"v6",{enumerable:!0,get:function(){return m.default}});var P=d(268);Object.defineProperty(R,"v6ToV1",{enumerable:!0,get:function(){return P.default}});var v=d(4299);Object.defineProperty(R,"v7",{enumerable:!0,get:function(){return v.default}});var U=d(9746);Object.defineProperty(R,"validate",{enumerable:!0,get:function(){return U.default}});var C=d(2770);Object.defineProperty(R,"version",{enumerable:!0,get:function(){return C.default}})},268:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0});const S=d(1797),y=d(6011);R.default=function(b){const T=function(f){return Uint8Array.of((15&f[3])<<4|f[4]>>4&15,(15&f[4])<<4|(240&f[5])>>4,(15&f[5])<<4|15&f[6],f[7],(15&f[1])<<4|(240&f[2])>>4,(15&f[2])<<4|(240&f[3])>>4,16|(240&f[0])>>4,(15&f[0])<<4|(240&f[1])>>4,f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])}(typeof b=="string"?(0,S.default)(b):b);return typeof b=="string"?(0,y.unsafeStringify)(T):T}},296:(j,R,d)=>{d.d(R,{A:()=>y});var S=d(7800);function y(b,T){return function(f){if(Array.isArray(f))return f}(b)||function(f,h){var k=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(k!=null){var E,H,m,P,v=[],U=!0,C=!1;try{if(m=(k=k.call(f)).next,h===0){if(Object(k)!==k)return;U=!1}else for(;!(U=(E=m.call(k)).done)&&(v.push(E.value),v.length!==h);U=!0);}catch(_){C=!0,H=_}finally{try{if(!U&&k.return!=null&&(P=k.return(),Object(P)!==P))return}finally{if(C)throw H}}return v}}(b,T)||(0,S.A)(b,T)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},328:(j,R,d)=>{d(8624),j.exports=self.fetch.bind(self)},338:(j,R)=>{function d(k){return 14+(k+64>>>9<<4)+1}function S(k,E){const H=(65535&k)+(65535&E);return(k>>16)+(E>>16)+(H>>16)<<16|65535&H}function y(k,E,H,m,P,v){return S((U=S(S(E,k),S(m,v)))<<(C=P)|U>>>32-C,H);var U,C}function b(k,E,H,m,P,v,U){return y(E&H|~E&m,k,E,P,v,U)}function T(k,E,H,m,P,v,U){return y(E&m|H&~m,k,E,P,v,U)}function f(k,E,H,m,P,v,U){return y(E^H^m,k,E,P,v,U)}function h(k,E,H,m,P,v,U){return y(H^(E|~m),k,E,P,v,U)}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(k){return function(E){const H=new Uint8Array(4*E.length);for(let m=0;m<4*E.length;m++)H[m]=E[m>>2]>>>m%4*8&255;return H}(function(E,H){const m=new Uint32Array(d(H)).fill(0);m.set(E),m[H>>5]|=128<<H%32,m[m.length-1]=H,E=m;let P=1732584193,v=-271733879,U=-1732584194,C=271733878;for(let _=0;_<E.length;_+=16){const w=P,p=v,x=U,A=C;P=b(P,v,U,C,E[_],7,-680876936),C=b(C,P,v,U,E[_+1],12,-389564586),U=b(U,C,P,v,E[_+2],17,606105819),v=b(v,U,C,P,E[_+3],22,-1044525330),P=b(P,v,U,C,E[_+4],7,-176418897),C=b(C,P,v,U,E[_+5],12,1200080426),U=b(U,C,P,v,E[_+6],17,-1473231341),v=b(v,U,C,P,E[_+7],22,-45705983),P=b(P,v,U,C,E[_+8],7,1770035416),C=b(C,P,v,U,E[_+9],12,-1958414417),U=b(U,C,P,v,E[_+10],17,-42063),v=b(v,U,C,P,E[_+11],22,-1990404162),P=b(P,v,U,C,E[_+12],7,1804603682),C=b(C,P,v,U,E[_+13],12,-40341101),U=b(U,C,P,v,E[_+14],17,-1502002290),v=b(v,U,C,P,E[_+15],22,1236535329),P=T(P,v,U,C,E[_+1],5,-165796510),C=T(C,P,v,U,E[_+6],9,-1069501632),U=T(U,C,P,v,E[_+11],14,643717713),v=T(v,U,C,P,E[_],20,-373897302),P=T(P,v,U,C,E[_+5],5,-701558691),C=T(C,P,v,U,E[_+10],9,38016083),U=T(U,C,P,v,E[_+15],14,-660478335),v=T(v,U,C,P,E[_+4],20,-405537848),P=T(P,v,U,C,E[_+9],5,568446438),C=T(C,P,v,U,E[_+14],9,-1019803690),U=T(U,C,P,v,E[_+3],14,-187363961),v=T(v,U,C,P,E[_+8],20,1163531501),P=T(P,v,U,C,E[_+13],5,-1444681467),C=T(C,P,v,U,E[_+2],9,-51403784),U=T(U,C,P,v,E[_+7],14,1735328473),v=T(v,U,C,P,E[_+12],20,-1926607734),P=f(P,v,U,C,E[_+5],4,-378558),C=f(C,P,v,U,E[_+8],11,-2022574463),U=f(U,C,P,v,E[_+11],16,1839030562),v=f(v,U,C,P,E[_+14],23,-35309556),P=f(P,v,U,C,E[_+1],4,-1530992060),C=f(C,P,v,U,E[_+4],11,1272893353),U=f(U,C,P,v,E[_+7],16,-155497632),v=f(v,U,C,P,E[_+10],23,-1094730640),P=f(P,v,U,C,E[_+13],4,681279174),C=f(C,P,v,U,E[_],11,-358537222),U=f(U,C,P,v,E[_+3],16,-722521979),v=f(v,U,C,P,E[_+6],23,76029189),P=f(P,v,U,C,E[_+9],4,-640364487),C=f(C,P,v,U,E[_+12],11,-421815835),U=f(U,C,P,v,E[_+15],16,530742520),v=f(v,U,C,P,E[_+2],23,-995338651),P=h(P,v,U,C,E[_],6,-198630844),C=h(C,P,v,U,E[_+7],10,1126891415),U=h(U,C,P,v,E[_+14],15,-1416354905),v=h(v,U,C,P,E[_+5],21,-57434055),P=h(P,v,U,C,E[_+12],6,1700485571),C=h(C,P,v,U,E[_+3],10,-1894986606),U=h(U,C,P,v,E[_+10],15,-1051523),v=h(v,U,C,P,E[_+1],21,-2054922799),P=h(P,v,U,C,E[_+8],6,1873313359),C=h(C,P,v,U,E[_+15],10,-30611744),U=h(U,C,P,v,E[_+6],15,-1560198380),v=h(v,U,C,P,E[_+13],21,1309151649),P=h(P,v,U,C,E[_+4],6,-145523070),C=h(C,P,v,U,E[_+11],10,-1120210379),U=h(U,C,P,v,E[_+2],15,718787259),v=h(v,U,C,P,E[_+9],21,-343485551),P=S(P,w),v=S(v,p),U=S(U,x),C=S(C,A)}return Uint32Array.of(P,v,U,C)}(function(E){if(E.length===0)return new Uint32Array;const H=new Uint32Array(d(8*E.length)).fill(0);for(let m=0;m<E.length;m++)H[m>>2]|=(255&E[m])<<m%4*8;return H}(k),8*k.length))}},388:(j,R,d)=>{d.d(R,{A:()=>y});var S=d(2284);function y(b,T){if(T&&((0,S.A)(T)=="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(b)}},467:(j,R,d)=>{function S(b,T,f,h,k,E,H){try{var m=b[E](H),P=m.value}catch(v){return void f(v)}m.done?T(P):Promise.resolve(P).then(h,k)}function y(b){return function(){var T=this,f=arguments;return new Promise(function(h,k){var E=b.apply(T,f);function H(P){S(E,h,k,H,m,"next",P)}function m(P){S(E,h,k,H,m,"throw",P)}H(void 0)})}}d.d(R,{A:()=>y})},477:()=>{},482:function(j,R,d){var S;j.exports=(S=d(9021),d(7165),S.pad.Iso97971={pad:function(y,b){y.concat(S.lib.WordArray.create([2147483648],1)),S.pad.ZeroPadding.pad(y,b)},unpad:function(y){S.pad.ZeroPadding.unpad(y),y.sigBytes--}},S.pad.Iso97971)},521:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.HandlerInterface=void 0;const S=d(3953);class y extends S.EnhancedEventEmitter{constructor(){super()}}R.HandlerInterface=y},579:(j,R,d)=>{var S=d(3738).default;j.exports=function(y){if(y!=null){var b=y[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],T=0;if(b)return b.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length))return{next:function(){return y&&T>=y.length&&(y=void 0),{value:y&&y[T++],done:!y}}}}throw new TypeError(S(y)+" is not iterable")},j.exports.__esModule=!0,j.exports.default=j.exports},591:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.URL=R.DNS=void 0;const S=d(338),y=d(2988);var b=d(2988);function T(f,h,k,E){return(0,y.default)(48,S.default,f,h,k,E)}Object.defineProperty(R,"DNS",{enumerable:!0,get:function(){return b.DNS}}),Object.defineProperty(R,"URL",{enumerable:!0,get:function(){return b.URL}}),T.DNS=y.DNS,T.URL=y.URL,R.default=T},736:(j,R,d)=>{j.exports=function(S){function y(f){let h,k,E,H=null;function m(...P){if(!m.enabled)return;const v=m,U=Number(new Date),C=U-(h||U);v.diff=C,v.prev=h,v.curr=U,h=U,P[0]=y.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let _=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(w,p)=>{if(w==="%%")return"%";_++;const x=y.formatters[p];if(typeof x=="function"){const A=P[_];w=x.call(v,A),P.splice(_,1),_--}return w}),y.formatArgs.call(v,P),(v.log||y.log).apply(v,P)}return m.namespace=f,m.useColors=y.useColors(),m.color=y.selectColor(f),m.extend=b,m.destroy=y.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>H!==null?H:(k!==y.namespaces&&(k=y.namespaces,E=y.enabled(f)),E),set:P=>{H=P}}),typeof y.init=="function"&&y.init(m),m}function b(f,h){const k=y(this.namespace+(h===void 0?":":h)+f);return k.log=this.log,k}function T(f,h){let k=0,E=0,H=-1,m=0;for(;k<f.length;)if(E<h.length&&(h[E]===f[k]||h[E]==="*"))h[E]==="*"?(H=E,m=k,E++):(k++,E++);else{if(H===-1)return!1;E=H+1,m++,k=m}for(;E<h.length&&h[E]==="*";)E++;return E===h.length}return y.debug=y,y.default=y,y.coerce=function(f){return f instanceof Error?f.stack||f.message:f},y.disable=function(){const f=[...y.names,...y.skips.map(h=>"-"+h)].join(",");return y.enable(""),f},y.enable=function(f){y.save(f),y.namespaces=f,y.names=[],y.skips=[];const h=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const k of h)k[0]==="-"?y.skips.push(k.slice(1)):y.names.push(k)},y.enabled=function(f){for(const h of y.skips)if(T(f,h))return!1;for(const h of y.names)if(T(f,h))return!0;return!1},y.humanize=d(6585),y.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(S).forEach(f=>{y[f]=S[f]}),y.names=[],y.skips=[],y.formatters={},y.selectColor=function(f){let h=0;for(let k=0;k<f.length;k++)h=(h<<5)-h+f.charCodeAt(k),h|=0;return y.colors[Math.abs(h)%y.colors.length]},y.enable(y.load()),y}},754:function(j,R,d){var S;j.exports=(S=d(9021),function(){var y=S,b=y.lib.WordArray;function T(f,h,k){for(var E=[],H=0,m=0;m<h;m++)if(m%4){var P=k[f.charCodeAt(m-1)]<<m%4*2|k[f.charCodeAt(m)]>>>6-m%4*2;E[H>>>2]|=P<<24-H%4*8,H++}return b.create(E,H)}y.enc.Base64={stringify:function(f){var h=f.words,k=f.sigBytes,E=this._map;f.clamp();for(var H=[],m=0;m<k;m+=3)for(var P=(h[m>>>2]>>>24-m%4*8&255)<<16|(h[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|h[m+2>>>2]>>>24-(m+2)%4*8&255,v=0;v<4&&m+.75*v<k;v++)H.push(E.charAt(P>>>6*(3-v)&63));var U=E.charAt(64);if(U)for(;H.length%4;)H.push(U);return H.join("")},parse:function(f){var h=f.length,k=this._map,E=this._reverseMap;if(!E){E=this._reverseMap=[];for(var H=0;H<k.length;H++)E[k.charCodeAt(H)]=H}var m=k.charAt(64);if(m){var P=f.indexOf(m);P!==-1&&(h=P)}return T(f,h,E)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),S.enc.Base64)},816:(j,R,d)=>{d.d(R,{A:()=>y});var S=d(2284);function y(b){var T=function(f,h){if((0,S.A)(f)!="object"||!f)return f;var k=f[Symbol.toPrimitive];if(k!==void 0){var E=k.call(f,h);if((0,S.A)(E)!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(f)}(b,"string");return(0,S.A)(T)=="symbol"?T:T+""}},887:(j,R,d)=>{var S=d(6993),y=d(1791);j.exports=function(b,T,f,h,k){return new y(S().w(b,T,f,h),k||Promise)},j.exports.__esModule=!0,j.exports.default=j.exports},955:function(j,R,d){var S;j.exports=(S=d(9021),d(754),d(4636),d(9506),d(7165),function(){var y=S,b=y.lib.BlockCipher,T=y.algo,f=[],h=[],k=[],E=[],H=[],m=[],P=[],v=[],U=[],C=[];(function(){for(var p=[],x=0;x<256;x++)p[x]=x<128?x<<1:x<<1^283;var A=0,I=0;for(x=0;x<256;x++){var M=I^I<<1^I<<2^I<<3^I<<4;M=M>>>8^255&M^99,f[A]=M,h[M]=A;var F=p[A],z=p[F],G=p[z],Z=257*p[M]^16843008*M;k[A]=Z<<24|Z>>>8,E[A]=Z<<16|Z>>>16,H[A]=Z<<8|Z>>>24,m[A]=Z,Z=16843009*G^65537*z^257*F^16843008*A,P[M]=Z<<24|Z>>>8,v[M]=Z<<16|Z>>>16,U[M]=Z<<8|Z>>>24,C[M]=Z,A?(A=F^p[p[p[G^F]]],I^=p[p[I]]):A=I=1}})();var _=[0,1,2,4,8,16,32,64,128,27,54],w=T.AES=b.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var p=this._keyPriorReset=this._key,x=p.words,A=p.sigBytes/4,I=4*((this._nRounds=A+6)+1),M=this._keySchedule=[],F=0;F<I;F++)F<A?M[F]=x[F]:(Z=M[F-1],F%A?A>6&&F%A==4&&(Z=f[Z>>>24]<<24|f[Z>>>16&255]<<16|f[Z>>>8&255]<<8|f[255&Z]):(Z=f[(Z=Z<<8|Z>>>24)>>>24]<<24|f[Z>>>16&255]<<16|f[Z>>>8&255]<<8|f[255&Z],Z^=_[F/A|0]<<24),M[F]=M[F-A]^Z);for(var z=this._invKeySchedule=[],G=0;G<I;G++){if(F=I-G,G%4)var Z=M[F];else Z=M[F-4];z[G]=G<4||F<=4?Z:P[f[Z>>>24]]^v[f[Z>>>16&255]]^U[f[Z>>>8&255]]^C[f[255&Z]]}}},encryptBlock:function(p,x){this._doCryptBlock(p,x,this._keySchedule,k,E,H,m,f)},decryptBlock:function(p,x){var A=p[x+1];p[x+1]=p[x+3],p[x+3]=A,this._doCryptBlock(p,x,this._invKeySchedule,P,v,U,C,h),A=p[x+1],p[x+1]=p[x+3],p[x+3]=A},_doCryptBlock:function(p,x,A,I,M,F,z,G){for(var Z=this._nRounds,ce=p[x]^A[0],X=p[x+1]^A[1],Ee=p[x+2]^A[2],Se=p[x+3]^A[3],xe=4,_e=1;_e<Z;_e++){var Pe=I[ce>>>24]^M[X>>>16&255]^F[Ee>>>8&255]^z[255&Se]^A[xe++],He=I[X>>>24]^M[Ee>>>16&255]^F[Se>>>8&255]^z[255&ce]^A[xe++],pe=I[Ee>>>24]^M[Se>>>16&255]^F[ce>>>8&255]^z[255&X]^A[xe++],Ge=I[Se>>>24]^M[ce>>>16&255]^F[X>>>8&255]^z[255&Ee]^A[xe++];ce=Pe,X=He,Ee=pe,Se=Ge}Pe=(G[ce>>>24]<<24|G[X>>>16&255]<<16|G[Ee>>>8&255]<<8|G[255&Se])^A[xe++],He=(G[X>>>24]<<24|G[Ee>>>16&255]<<16|G[Se>>>8&255]<<8|G[255&ce])^A[xe++],pe=(G[Ee>>>24]<<24|G[Se>>>16&255]<<16|G[ce>>>8&255]<<8|G[255&X])^A[xe++],Ge=(G[Se>>>24]<<24|G[ce>>>16&255]<<16|G[X>>>8&255]<<8|G[255&Ee])^A[xe++],p[x]=Pe,p[x+1]=He,p[x+2]=pe,p[x+3]=Ge},keySize:8});y.AES=b._createHelper(w)}(),S.AES)},1025:function(j,R,d){var S,y,b,T;j.exports=(S=d(9021),b=(y=S).lib.Base,T=y.enc.Utf8,void(y.algo.HMAC=b.extend({init:function(f,h){f=this._hasher=new f.init,typeof h=="string"&&(h=T.parse(h));var k=f.blockSize,E=4*k;h.sigBytes>E&&(h=f.finalize(h)),h.clamp();for(var H=this._oKey=h.clone(),m=this._iKey=h.clone(),P=H.words,v=m.words,U=0;U<k;U++)P[U]^=1549556828,v[U]^=909522486;H.sigBytes=m.sigBytes=E,this.reset()},reset:function(){var f=this._hasher;f.reset(),f.update(this._iKey)},update:function(f){return this._hasher.update(f),this},finalize:function(f){var h=this._hasher,k=h.finalize(f);return h.reset(),h.finalize(this._oKey.clone().concat(k))}})))},1305:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.RemoteSdp=void 0;const S=d(7363),y=d(2994),b=d(3471),T=new y.Logger("RemoteSdp");R.RemoteSdp=class{_iceParameters;_iceCandidates;_dtlsParameters;_sctpParameters;_plainRtpParameters;_planB;_mediaSections=[];_midToIndex=new Map;_firstMid;_sdpObject;constructor({iceParameters:f,iceCandidates:h,dtlsParameters:k,sctpParameters:E,plainRtpParameters:H,planB:m=!1}){if(this._iceParameters=f,this._iceCandidates=h,this._dtlsParameters=k,this._sctpParameters=E,this._plainRtpParameters=H,this._planB=m,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},f?.iceLite&&(this._sdpObject.icelite="ice-lite"),k){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const P=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:k.fingerprints[P-1].algorithm,hash:k.fingerprints[P-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}H&&(this._sdpObject.origin.address=H.ip,this._sdpObject.origin.ipVer=H.ipVersion)}updateIceParameters(f){T.debug("updateIceParameters() [iceParameters:%o]",f),this._iceParameters=f,this._sdpObject.icelite=f.iceLite?"ice-lite":void 0;for(const h of this._mediaSections)h.setIceParameters(f)}updateDtlsRole(f){T.debug("updateDtlsRole() [role:%s]",f),this._dtlsParameters.role=f;for(const h of this._mediaSections)h.setDtlsRole(f)}setSessionExtmapAllowMixed(){T.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let f=0;f<this._mediaSections.length;++f){const h=this._mediaSections[f];if(h.closed)return{idx:f,reuseMid:h.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:f,reuseMid:h,offerRtpParameters:k,answerRtpParameters:E,codecOptions:H}){const m=new b.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:f,offerRtpParameters:k,answerRtpParameters:E,codecOptions:H});h?this._replaceMediaSection(m,h):this._midToIndex.has(m.mid)?this._replaceMediaSection(m):this._addMediaSection(m)}receive({mid:f,kind:h,offerRtpParameters:k,streamId:E,trackId:H}){const m=this._midToIndex.get(f);let P;if(m!==void 0&&(P=this._mediaSections[m]),this.setSessionExtmapAllowMixed(),P)P.planBReceive({offerRtpParameters:k,streamId:E,trackId:H}),this._replaceMediaSection(P);else{P=new b.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:f,kind:h,offerRtpParameters:k,streamId:E,trackId:H});const v=this._mediaSections.find(U=>U.closed);v?this._replaceMediaSection(P,v.mid):this._addMediaSection(P)}}pauseMediaSection(f){this._findMediaSection(f).pause()}resumeSendingMediaSection(f){this._findMediaSection(f).resume()}resumeReceivingMediaSection(f){this._findMediaSection(f).resume()}disableMediaSection(f){this._findMediaSection(f).disable()}closeMediaSection(f){const h=this._findMediaSection(f);return f===this._firstMid?(T.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",f),this.disableMediaSection(f),!1):(h.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(f,h){const k=this._findMediaSection(f);k.muxSimulcastStreams(h),this._replaceMediaSection(k)}planBStopReceiving({mid:f,offerRtpParameters:h}){const k=this._findMediaSection(f);k.planBStopReceiving({offerRtpParameters:h}),this._replaceMediaSection(k)}sendSctpAssociation({offerMediaObject:f}){const h=new b.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:f});this._addMediaSection(h)}receiveSctpAssociation({oldDataChannelSpec:f=!1}={}){const h=new b.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:f});this._addMediaSection(h)}getSdp(){return this._sdpObject.origin.sessionVersion++,S.write(this._sdpObject)}_addMediaSection(f){this._firstMid||(this._firstMid=f.mid),this._mediaSections.push(f),this._midToIndex.set(f.mid,this._mediaSections.length-1),this._sdpObject.media.push(f.getObject()),this._regenerateBundleMids()}_replaceMediaSection(f,h){if(typeof h=="string"){const k=this._midToIndex.get(h);if(k===void 0)throw new Error(`no media section found for reuseMid '${h}'`);const E=this._mediaSections[k];this._mediaSections[k]=f,this._midToIndex.delete(E.mid),this._midToIndex.set(f.mid,k),this._sdpObject.media[k]=f.getObject(),this._regenerateBundleMids()}else{const k=this._midToIndex.get(f.mid);if(k===void 0)throw new Error(`no media section found with mid '${f.mid}'`);this._mediaSections[k]=f,this._sdpObject.media[k]=f.getObject()}}_findMediaSection(f){const h=this._midToIndex.get(f);if(h===void 0)throw new Error(`no media section found with mid '${f}'`);return this._mediaSections[h]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(f=>!f.closed).map(f=>f.mid).join(" "))}}},1380:function(j,R,d){var S;j.exports=(S=d(9021),d(3240),function(){var y=S,b=y.lib.Hasher,T=y.x64,f=T.Word,h=T.WordArray,k=y.algo;function E(){return f.create.apply(f,arguments)}var H=[E(1116352408,3609767458),E(1899447441,602891725),E(3049323471,3964484399),E(3921009573,2173295548),E(961987163,4081628472),E(1508970993,3053834265),E(2453635748,2937671579),E(2870763221,3664609560),E(3624381080,2734883394),E(310598401,1164996542),E(607225278,1323610764),E(1426881987,3590304994),E(1925078388,4068182383),E(2162078206,991336113),E(2614888103,633803317),E(3248222580,3479774868),E(3835390401,2666613458),E(4022224774,944711139),E(264347078,2341262773),E(604807628,2007800933),E(770255983,1495990901),E(1249150122,1856431235),E(1555081692,3175218132),E(1996064986,2198950837),E(2554220882,3999719339),E(2821834349,766784016),E(2952996808,2566594879),E(3210313671,3203337956),E(3336571891,1034457026),E(3584528711,2466948901),E(113926993,3758326383),E(338241895,168717936),E(666307205,1188179964),E(773529912,1546045734),E(1294757372,1522805485),E(1396182291,2643833823),E(1695183700,2343527390),E(1986661051,1014477480),E(2177026350,1206759142),E(2456956037,344077627),E(2730485921,1290863460),E(2820302411,3158454273),E(3259730800,3505952657),E(3345764771,106217008),E(3516065817,3606008344),E(3600352804,1432725776),E(4094571909,1467031594),E(275423344,851169720),E(430227734,3100823752),E(506948616,1363258195),E(659060556,3750685593),E(883997877,3785050280),E(958139571,3318307427),E(1322822218,3812723403),E(1537002063,2003034995),E(1747873779,3602036899),E(1955562222,1575990012),E(2024104815,1125592928),E(2227730452,2716904306),E(2361852424,442776044),E(2428436474,593698344),E(2756734187,3733110249),E(3204031479,2999351573),E(3329325298,3815920427),E(3391569614,3928383900),E(3515267271,566280711),E(3940187606,3454069534),E(4118630271,4000239992),E(116418474,1914138554),E(174292421,2731055270),E(289380356,3203993006),E(460393269,320620315),E(685471733,587496836),E(852142971,1086792851),E(1017036298,365543100),E(1126000580,2618297676),E(1288033470,3409855158),E(1501505948,4234509866),E(1607167915,987167468),E(1816402316,1246189591)],m=[];(function(){for(var v=0;v<80;v++)m[v]=E()})();var P=k.SHA512=b.extend({_doReset:function(){this._hash=new h.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(v,U){for(var C=this._hash.words,_=C[0],w=C[1],p=C[2],x=C[3],A=C[4],I=C[5],M=C[6],F=C[7],z=_.high,G=_.low,Z=w.high,ce=w.low,X=p.high,Ee=p.low,Se=x.high,xe=x.low,_e=A.high,Pe=A.low,He=I.high,pe=I.low,Ge=M.high,Te=M.low,Ve=F.high,qe=F.low,nt=z,Bt=G,Pr=Z,Ur=ce,Zn=X,fr=Ee,gr=Se,Bn=xe,Ie=_e,Be=Pe,Ye=He,Qt=pe,Ft=Ge,xt=Te,pn=Ve,Ln=qe,zt=0;zt<80;zt++){var sr,Hr,Rr=m[zt];if(zt<16)Hr=Rr.high=0|v[U+2*zt],sr=Rr.low=0|v[U+2*zt+1];else{var Vr=m[zt-15],zr=Vr.high,Ar=Vr.low,$r=(zr>>>1|Ar<<31)^(zr>>>8|Ar<<24)^zr>>>7,ga=(Ar>>>1|zr<<31)^(Ar>>>8|zr<<24)^(Ar>>>7|zr<<25),ea=m[zt-2],oa=ea.high,Nn=ea.low,Ha=(oa>>>19|Nn<<13)^(oa<<3|Nn>>>29)^oa>>>6,Ca=(Nn>>>19|oa<<13)^(Nn<<3|oa>>>29)^(Nn>>>6|oa<<26),Gr=m[zt-7],dr=Gr.high,at=Gr.low,ut=m[zt-16],Wt=ut.high,Tt=ut.low;Hr=(Hr=(Hr=$r+dr+((sr=ga+at)>>>0<ga>>>0?1:0))+Ha+((sr+=Ca)>>>0<Ca>>>0?1:0))+Wt+((sr+=Tt)>>>0<Tt>>>0?1:0),Rr.high=Hr,Rr.low=sr}var tn,Xt=Ie&Ye^~Ie&Ft,Xe=Be&Qt^~Be&xt,Sn=nt&Pr^nt&Zn^Pr&Zn,Rn=Bt&Ur^Bt&fr^Ur&fr,Vn=(nt>>>28|Bt<<4)^(nt<<30|Bt>>>2)^(nt<<25|Bt>>>7),or=(Bt>>>28|nt<<4)^(Bt<<30|nt>>>2)^(Bt<<25|nt>>>7),$t=(Ie>>>14|Be<<18)^(Ie>>>18|Be<<14)^(Ie<<23|Be>>>9),bt=(Be>>>14|Ie<<18)^(Be>>>18|Ie<<14)^(Be<<23|Ie>>>9),Pn=H[zt],kn=Pn.high,bn=Pn.low,Nr=pn+$t+((tn=Ln+bt)>>>0<Ln>>>0?1:0),Er=or+Rn;pn=Ft,Ln=xt,Ft=Ye,xt=Qt,Ye=Ie,Qt=Be,Ie=gr+(Nr=(Nr=(Nr=Nr+Xt+((tn+=Xe)>>>0<Xe>>>0?1:0))+kn+((tn+=bn)>>>0<bn>>>0?1:0))+Hr+((tn+=sr)>>>0<sr>>>0?1:0))+((Be=Bn+tn|0)>>>0<Bn>>>0?1:0)|0,gr=Zn,Bn=fr,Zn=Pr,fr=Ur,Pr=nt,Ur=Bt,nt=Nr+(Vn+Sn+(Er>>>0<or>>>0?1:0))+((Bt=tn+Er|0)>>>0<tn>>>0?1:0)|0}G=_.low=G+Bt,_.high=z+nt+(G>>>0<Bt>>>0?1:0),ce=w.low=ce+Ur,w.high=Z+Pr+(ce>>>0<Ur>>>0?1:0),Ee=p.low=Ee+fr,p.high=X+Zn+(Ee>>>0<fr>>>0?1:0),xe=x.low=xe+Bn,x.high=Se+gr+(xe>>>0<Bn>>>0?1:0),Pe=A.low=Pe+Be,A.high=_e+Ie+(Pe>>>0<Be>>>0?1:0),pe=I.low=pe+Qt,I.high=He+Ye+(pe>>>0<Qt>>>0?1:0),Te=M.low=Te+xt,M.high=Ge+Ft+(Te>>>0<xt>>>0?1:0),qe=F.low=qe+Ln,F.high=Ve+pn+(qe>>>0<Ln>>>0?1:0)},_doFinalize:function(){var v=this._data,U=v.words,C=8*this._nDataBytes,_=8*v.sigBytes;return U[_>>>5]|=128<<24-_%32,U[30+(_+128>>>10<<5)]=Math.floor(C/4294967296),U[31+(_+128>>>10<<5)]=C,v.sigBytes=4*U.length,this._process(),this._hash.toX32()},clone:function(){var v=b.clone.call(this);return v._hash=this._hash.clone(),v},blockSize:32});y.SHA512=b._createHelper(P),y.HmacSHA512=b._createHmacHelper(P)}(),S.SHA512)},1396:function(j,R,d){var S;j.exports=(S=d(9021),d(3240),d(6440),d(5503),d(754),d(4725),d(4636),d(5471),d(3009),d(6308),d(1380),d(9557),d(5953),d(8056),d(1025),d(19),d(9506),d(7165),d(2169),d(6939),d(6372),d(3797),d(8454),d(2073),d(4905),d(482),d(2155),d(8124),d(25),d(955),d(7628),d(7193),d(6298),d(2696),d(3128),S)},1425:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.updateV1State=void 0;const S=d(2291),y=d(6011),b={};function T(h,k,E){return h.msecs??=-1/0,h.nsecs??=0,k===h.msecs?(h.nsecs++,h.nsecs>=1e4&&(h.node=void 0,h.nsecs=0)):k>h.msecs?h.nsecs=0:k<h.msecs&&(h.node=void 0),h.node||(h.node=E.slice(10,16),h.node[0]|=1,h.clockseq=16383&(E[8]<<8|E[9])),h.msecs=k,h}function f(h,k,E,H,m,P,v=0){if(h.length<16)throw new Error("Random bytes length must be >= 16");if(P){if(v<0||v+16>P.length)throw new RangeError(`UUID byte range ${v}:${v+15} is out of buffer bounds`)}else P=new Uint8Array(16),v=0;k??=Date.now(),E??=0,H??=16383&(h[8]<<8|h[9]),m??=h.slice(10,16);const U=(1e4*(268435455&(k+=122192928e5))+E)%4294967296;P[v++]=U>>>24&255,P[v++]=U>>>16&255,P[v++]=U>>>8&255,P[v++]=255&U;const C=k/4294967296*1e4&268435455;P[v++]=C>>>8&255,P[v++]=255&C,P[v++]=C>>>24&15|16,P[v++]=C>>>16&255,P[v++]=H>>>8|128,P[v++]=255&H;for(let _=0;_<6;++_)P[v++]=m[_];return P}R.updateV1State=T,R.default=function(h,k,E){let H;const m=h?._v6??!1;if(h){const P=Object.keys(h);P.length===1&&P[0]==="_v6"&&(h=void 0)}if(h)H=f(h.random??h.rng?.()??(0,S.default)(),h.msecs,h.nsecs,h.clockseq,h.node,k,E);else{const P=Date.now(),v=(0,S.default)();T(b,P,v),H=f(v,b.msecs,b.nsecs,m?void 0:b.clockseq,m?void 0:b.node,k,E)}return k??(0,y.unsafeStringify)(H)}},1765:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.clone=function(d){return d===void 0?void 0:Number.isNaN(d)?NaN:typeof structuredClone=="function"?structuredClone(d):JSON.parse(JSON.stringify(d))},R.generateRandomNumber=function(){return Math.round(1e7*Math.random())},R.deepFreeze=function d(S){const y=Reflect.ownKeys(S);for(const b of y){const T=S[b];(T&&typeof T=="object"||typeof T=="function")&&d(T)}return Object.freeze(S)}},1767:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Firefox60=void 0;const S=d(7363),y=d(2994),b=d(4893),T=d(1765),f=d(8046),h=d(5544),k=d(5938),E=d(521),H=d(1305),m=d(3303),P=new y.Logger("Firefox60"),v={OS:16,MIS:2048};class U extends E.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new U}constructor(){super()}get name(){return"Firefox60"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const _=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),w=document.createElement("canvas");w.getContext("2d");const p=w.captureStream().getVideoTracks()[0];try{_.addTransceiver("audio",{direction:"sendrecv"});const x=_.addTransceiver(p,{direction:"sendrecv"}),A=x.sender.getParameters(),I=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];A.encodings=I,await x.sender.setParameters(A);const M=await _.createOffer();try{w.remove()}catch{}try{p.stop()}catch{}try{_.close()}catch{}const F=S.parse(M.sdp);return h.extractRtpCapabilities({sdpObject:F})}catch(x){try{w.remove()}catch{}try{p.stop()}catch{}try{_.close()}catch{}throw x}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:_,iceParameters:w,iceCandidates:p,dtlsParameters:x,sctpParameters:A,iceServers:I,iceTransportPolicy:M,additionalSettings:F,proprietaryConstraints:z,extendedRtpCapabilities:G}){this.assertNotClosed(),P.debug("run()"),this._direction=_,this._remoteSdp=new H.RemoteSdp({iceParameters:w,iceCandidates:p,dtlsParameters:x,sctpParameters:A}),this._sendingRtpParametersByKind={audio:f.getSendingRtpParameters("audio",G),video:f.getSendingRtpParameters("video",G)},this._sendingRemoteRtpParametersByKind={audio:f.getSendingRemoteRtpParameters("audio",G),video:f.getSendingRemoteRtpParameters("video",G)},this._pc=new RTCPeerConnection({iceServers:I??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...F},z),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",Z=>{this.emit("@icecandidateerror",Z)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(_){throw this.assertNotClosed(),new b.UnsupportedError("not supported")}async restartIce(_){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(_),this._transportReady)if(this._direction==="send"){const w=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",w),await this._pc.setLocalDescription(w);const p={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}else{const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:_,encodings:w,codecOptions:p,codec:x}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",_.kind,_.id),w&&((w=T.clone(w)).forEach((Ee,Se)=>{Ee.rid=`r${Se}`}),w.reverse());const A=T.clone(this._sendingRtpParametersByKind[_.kind]);A.codecs=f.reduceCodecs(A.codecs,x);const I=T.clone(this._sendingRemoteRtpParametersByKind[_.kind]);I.codecs=f.reduceCodecs(I.codecs,x);const M=this._pc.addTransceiver(_,{direction:"sendonly",streams:[this._sendStream]});if(w){const Ee=M.sender.getParameters();Ee.encodings=w,await M.sender.setParameters(Ee)}const F=await this._pc.createOffer();let z=S.parse(F.sdp);z.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:z});const G=(0,m.parse)((w??[{}])[0].scalabilityMode);P.debug("send() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F);const Z=M.mid;A.mid=Z,z=S.parse(this._pc.localDescription.sdp);const ce=z.media[z.media.length-1];if(A.rtcp.cname=h.getCname({offerMediaObject:ce}),w)if(w.length===1){const Ee=k.getRtpEncodings({offerMediaObject:ce});Object.assign(Ee[0],w[0]),A.encodings=Ee}else A.encodings=w.reverse();else A.encodings=k.getRtpEncodings({offerMediaObject:ce});if(A.encodings.length>1&&(A.codecs[0].mimeType.toLowerCase()==="video/vp8"||A.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Ee of A.encodings)Ee.scalabilityMode?Ee.scalabilityMode=`L1T${G.temporalLayers}`:Ee.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:ce,offerRtpParameters:A,answerRtpParameters:I,codecOptions:p});const X={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",X),await this._pc.setRemoteDescription(X),this._mapMidTransceiver.set(Z,M),{localId:Z,rtpParameters:A,rtpSender:M.sender}}async stopSending(_){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",_),this._closed)return;const w=this._mapMidTransceiver.get(_);if(!w)throw new Error("associated transceiver not found");w.sender.replaceTrack(null),this._pc.removeTrack(w.sender),this._remoteSdp.disableMediaSection(w.mid);const p=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const x={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.delete(_)}async pauseSending(_){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",_);const w=this._mapMidTransceiver.get(_);if(!w)throw new Error("associated RTCRtpTransceiver not found");w.direction="inactive",this._remoteSdp.pauseMediaSection(_);const p=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const x={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async resumeSending(_){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",_);const w=this._mapMidTransceiver.get(_);if(!w)throw new Error("associated RTCRtpTransceiver not found");w.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(_);const p=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const x={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async replaceTrack(_,w){this.assertNotClosed(),this.assertSendDirection(),w?P.debug("replaceTrack() [localId:%s, track.id:%s]",_,w.id):P.debug("replaceTrack() [localId:%s, no track]",_);const p=this._mapMidTransceiver.get(_);if(!p)throw new Error("associated RTCRtpTransceiver not found");await p.sender.replaceTrack(w)}async setMaxSpatialLayer(_,w){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",_,w);const p=this._mapMidTransceiver.get(_);if(!p)throw new Error("associated transceiver not found");const x=p.sender.getParameters();w=x.encodings.length-1-w,x.encodings.forEach((M,F)=>{M.active=F>=w}),await p.sender.setParameters(x),this._remoteSdp.muxMediaSectionSimulcast(_,x.encodings);const A=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async setRtpEncodingParameters(_,w){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",_,w);const p=this._mapMidTransceiver.get(_);if(!p)throw new Error("associated RTCRtpTransceiver not found");const x=p.sender.getParameters();x.encodings.forEach((M,F)=>{x.encodings[F]={...M,...w}}),await p.sender.setParameters(x),this._remoteSdp.muxMediaSectionSimulcast(_,x.encodings);const A=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async getSenderStats(_){this.assertNotClosed(),this.assertSendDirection();const w=this._mapMidTransceiver.get(_);if(!w)throw new Error("associated RTCRtpTransceiver not found");return w.sender.getStats()}async sendDataChannel({ordered:_,maxPacketLifeTime:w,maxRetransmits:p,label:x,protocol:A}){this.assertNotClosed(),this.assertSendDirection();const I={negotiated:!0,id:this._nextSendSctpStreamId,ordered:_,maxPacketLifeTime:w,maxRetransmits:p,protocol:A};P.debug("sendDataChannel() [options:%o]",I);const M=this._pc.createDataChannel(x,I);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const F=await this._pc.createOffer(),z=S.parse(F.sdp),G=z.media.find(ce=>ce.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:z}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F),this._remoteSdp.sendSctpAssociation({offerMediaObject:G});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:I.id,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits}}}async receive(_){this.assertNotClosed(),this.assertRecvDirection();const w=[],p=new Map;for(const M of _){const{trackId:F,kind:z,rtpParameters:G,streamId:Z}=M;P.debug("receive() [trackId:%s, kind:%s]",F,z);const ce=G.mid??String(this._mapMidTransceiver.size);p.set(F,ce),this._remoteSdp.receive({mid:ce,kind:z,offerRtpParameters:G,streamId:Z??G.rtcp.cname,trackId:F})}const x={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);let A=await this._pc.createAnswer();const I=S.parse(A.sdp);for(const M of _){const{trackId:F,rtpParameters:z}=M,G=p.get(F),Z=I.media.find(ce=>String(ce.mid)===G);h.applyCodecParameters({offerRtpParameters:z,answerMediaObject:Z}),A={type:"answer",sdp:S.write(I)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:I}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",A),await this._pc.setLocalDescription(A);for(const M of _){const{trackId:F}=M,z=p.get(F),G=this._pc.getTransceivers().find(Z=>Z.mid===z);if(!G)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(z,G),w.push({localId:z,track:G.receiver.track,rtpReceiver:G.receiver})}return w}async stopReceiving(_){if(this.assertRecvDirection(),this._closed)return;for(const x of _){P.debug("stopReceiving() [localId:%s]",x);const A=this._mapMidTransceiver.get(x);if(!A)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(A.mid)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const x of _)this._mapMidTransceiver.delete(x)}async pauseReceiving(_){this.assertNotClosed(),this.assertRecvDirection();for(const x of _){P.debug("pauseReceiving() [localId:%s]",x);const A=this._mapMidTransceiver.get(x);if(!A)throw new Error("associated RTCRtpTransceiver not found");A.direction="inactive",this._remoteSdp.pauseMediaSection(x)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async resumeReceiving(_){this.assertNotClosed(),this.assertRecvDirection();for(const x of _){P.debug("resumeReceiving() [localId:%s]",x);const A=this._mapMidTransceiver.get(x);if(!A)throw new Error("associated RTCRtpTransceiver not found");A.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(x)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async getReceiverStats(_){this.assertRecvDirection();const w=this._mapMidTransceiver.get(_);if(!w)throw new Error("associated RTCRtpTransceiver not found");return w.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:_,label:w,protocol:p}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:x,ordered:A,maxPacketLifeTime:I,maxRetransmits:M}=_,F={negotiated:!0,id:x,ordered:A,maxPacketLifeTime:I,maxRetransmits:M,protocol:p};P.debug("receiveDataChannel() [options:%o]",F);const z=this._pc.createDataChannel(w,F);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const G={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",G),await this._pc.setRemoteDescription(G);const Z=await this._pc.createAnswer();if(!this._transportReady){const ce=S.parse(Z.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:ce})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:z}}async setupTransport({localDtlsRole:_,localSdpObject:w}){w||(w=S.parse(this._pc.localDescription.sdp));const p=h.extractDtlsParameters({sdpObject:w});p.role=_,this._remoteSdp.updateDtlsRole(_==="client"?"server":"client"),await new Promise((x,A)=>{this.safeEmit("@connect",{dtlsParameters:p},x,A)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new b.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.Firefox60=U},1791:(j,R,d)=>{var S=d(5172),y=d(5546);j.exports=function b(T,f){function h(E,H,m,P){try{var v=T[E](H),U=v.value;return U instanceof S?f.resolve(U.v).then(function(C){h("next",C,m,P)},function(C){h("throw",C,m,P)}):f.resolve(U).then(function(C){v.value=C,m(v)},function(C){return h("throw",C,m,P)})}catch(C){P(C)}}var k;this.next||(y(b.prototype),y(b.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),y(this,"_invoke",function(E,H,m){function P(){return new f(function(v,U){h(E,m,v,U)})}return k=k?k.then(P,P):P()},!0)},j.exports.__esModule=!0,j.exports.default=j.exports},1797:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0});const S=d(9746);R.default=function(y){if(!(0,S.default)(y))throw TypeError("Invalid UUID");let b;return Uint8Array.of((b=parseInt(y.slice(0,8),16))>>>24,b>>>16&255,b>>>8&255,255&b,(b=parseInt(y.slice(9,13),16))>>>8,255&b,(b=parseInt(y.slice(14,18),16))>>>8,255&b,(b=parseInt(y.slice(19,23),16))>>>8,255&b,(b=parseInt(y.slice(24,36),16))/1099511627776&255,b/4294967296&255,b>>>24&255,b>>>16&255,b>>>8&255,255&b)}},1803:(j,R,d)=>{d.d(R,{ed:()=>A,sg:()=>I,v7:()=>w});var S=d(4467),y=d(296),b=d(9027);function T(M,F){var z=Object.keys(M);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(M);F&&(G=G.filter(function(Z){return Object.getOwnPropertyDescriptor(M,Z).enumerable})),z.push.apply(z,G)}return z}var f={},h={},k={};for(var E in b.$.videoProfiles)b.$.videoProfiles[E].aspectRatio=="oneSixNine"&&(f[E]=b.$.videoProfiles[E],f[E].encoding={maxBitrate:f[E].bitRate,maxFramerate:f[E].frameRate}),b.$.videoProfiles[E].aspectRatio=="fourThree"&&(h[E]=b.$.videoProfiles[E],h[E].encoding={maxBitrate:h[E].bitRate,maxFramerate:h[E].frameRate});for(var E in b.$.screenShareProfiles)k[E]=b.$.screenShareProfiles[E],k[E].encoding={maxBitrate:k[E].bitRate,maxFramerate:k[E].frameRate};var H=Object.values(f),m=Object.values(h),P=Object.values(k),v=[f.h180p_w320p,f.h360p_w640p],U=[h.h180p_w240p,h.h360p_w480p],C=function(M){return[{scaleResolutionDownBy:2,fps:3}].map(function(F){var z;return{width:Math.floor(M.width/F.scaleResolutionDownBy),height:Math.floor(M.height/F.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(M.encoding.maxBitrate/(Math.pow(F.scaleResolutionDownBy,2)*(((z=M.encoding.maxFramerate)!==null&&z!==void 0?z:30)/F.fps)))),maxFramerate:F.fps}}})},_=["q","h","f"];function w(M,F,z,G,Z){var ce=G&&G.videoEncoding;M&&(ce=G&&G.screenShareEncoding);var X=G?.simulcast;if(ce||(ce=function(pe,Ge,Te){for(var Ve=function(Ur,Zn,fr){if(Ur)return P;var gr=Zn>fr?Zn/fr:fr/Zn;return Math.abs(gr-1.7777777777777777)<Math.abs(gr-1.3333333333333333)?H:m}(pe,Ge,Te),qe=Ve[0].encoding,nt=Math.max(Ge,Te),Bt=0;Bt<Ve.length;Bt+=1){var Pr=Ve[Bt];if(qe=Pr.encoding,Pr.width>=nt)break}return qe}(M,F,z)),!X)return[ce];var Ee,Se={width:F,height:z,encoding:{maxBitrate:ce.maxBitrate,maxFramerate:ce.maxFramerate}},xe=[],_e=(xe=p(M,Se))[0];if(xe.length>1){var Pe=xe;Ee=(0,y.A)(Pe,2)[1]}var He=Math.max(F,z);return x(F,z,He>=960&&Ee?[_e,Ee,Se]:He>=480?[_e,Se]:[Se],Z)}function p(M,F){M&&C(F);var z=F.width,G=F.height,Z=z>G?z/G:G/z;return Math.abs(Z-1.7777777777777777)<Math.abs(Z-1.3333333333333333)?v:U}function x(M,F,z,G){var Z=[];return z.forEach(function(ce,X){if(!(X>=_.length)){var Ee=G?null:{maxFramerate:ce.encoding.maxFramerate},Se=Math.min(M,F),xe=function(_e){for(var Pe=1;Pe<arguments.length;Pe++){var He=arguments[Pe]!=null?arguments[Pe]:{};Pe%2?T(Object(He),!0).forEach(function(pe){(0,S.A)(_e,pe,He[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(He)):T(Object(He)).forEach(function(pe){Object.defineProperty(_e,pe,Object.getOwnPropertyDescriptor(He,pe))})}return _e}({rid:_[X],scaleResolutionDownBy:Se/Math.min(ce.width,ce.height),maxBitrate:ce.encoding.maxBitrate},Ee);Z.push(xe)}}),Z}function A(M,F,z){if(!M)return{};var G=M.id,Z=M.appData,ce=Z.width,X=Z.height,Ee=Z.encodings;try{var Se=function(Ge){var Te=[];if(Ge&&Ge.length!=0){if(Ge.length===1){for(var Ve=0;Ve<3;Ve++)Te.push(Math.pow(2,3-Ve-1));return Te}var qe=!1;return Ge.forEach(function(nt){nt.scaleResolutionDownBy!==void 0?(qe=!0,Te.push(Math.max(1,nt.scaleResolutionDownBy))):Te.push(1)}),qe||Ge.forEach(function(nt,Bt){Te[Bt]=Math.pow(2,Ge.length-Bt-1)}),Te}}(Ee);if(!Se)return{};var xe=Se.map(function(Ge){return{width:ce/Ge,height:X/Ge}}).sort(function(Ge,Te){return Ge.width-Te.width}),_e=xe.findIndex(function(Ge){return Ge.width>=F&&Ge.height>=z});_e===-1&&(_e=xe.length-1);var Pe=M.temporalLayers?M.temporalLayers:2;if(_e===0&&Pe>0){var He=ce/Se[0],pe=X/Se[0];F<.5*He&&z<.5*pe&&(Pe-=1),Pe>0&&F<.25*He&&z<.25*pe&&(Pe-=1)}return{consumerId:G,newPreferredSpatialLayer:Math.max(0,_e),newPreferredTemporalLayer:Math.max(0,Pe)}}catch{return{}}}function I(M,F){var z;return function(){for(var G=this,Z=arguments.length,ce=new Array(Z),X=0;X<Z;X++)ce[X]=arguments[X];clearTimeout(z),z=setTimeout(function(){return M.apply(G,ce)},F)}}},1806:(j,R,d)=>{d.d(R,{$Q:()=>S,T4:()=>y,Ts:()=>T,ue:()=>b});var S="vk_e2ee",y={sharedKey:!1,ratchetSalt:"VideoSDKEncryptionRatchetSalt",ratchetWindowSize:0,failureTolerance:10,keyringSize:16,discardFrameWhenCryptorNotReady:!1},b=["vp8","vp9","h264","av1"],T=["opus"]},1919:(j,R,d)=>{d.r(R),d.d(R,{default:()=>Dn});var S={};d.r(S),d.d(S,{Decoder:()=>Rn,Encoder:()=>Xe,PacketType:()=>Xt,protocol:()=>tn});var y=d(296),b=d(5458),T=d(2284),f=d(467),h=d(3029),k=d(2901),E=d(4467),H=d(4756),m=d.n(H);const P=Object.create(null);P.open="0",P.close="1",P.ping="2",P.pong="3",P.message="4",P.upgrade="5",P.noop="6";const v=Object.create(null);Object.keys(P).forEach(te=>{v[P[te]]=te});const U={type:"error",data:"parser error"},C=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",_=typeof ArrayBuffer=="function",w=te=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(te):te&&te.buffer instanceof ArrayBuffer,p=({type:te,data:$},Y,oe)=>C&&$ instanceof Blob?Y?oe($):x($,oe):_&&($ instanceof ArrayBuffer||w($))?Y?oe($):x(new Blob([$]),oe):oe(P[te]+($||"")),x=(te,$)=>{const Y=new FileReader;return Y.onload=function(){const oe=Y.result.split(",")[1];$("b"+(oe||""))},Y.readAsDataURL(te)};function A(te){return te instanceof Uint8Array?te:te instanceof ArrayBuffer?new Uint8Array(te):new Uint8Array(te.buffer,te.byteOffset,te.byteLength)}let I;const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let te=0;te<64;te++)F[M.charCodeAt(te)]=te;const z=typeof ArrayBuffer=="function",G=(te,$)=>{if(typeof te!="string")return{type:"message",data:ce(te,$)};const Y=te.charAt(0);return Y==="b"?{type:"message",data:Z(te.substring(1),$)}:v[Y]?te.length>1?{type:v[Y],data:te.substring(1)}:{type:v[Y]}:U},Z=(te,$)=>{if(z){const Y=(oe=>{let De,rt,St,Dt,_t,Tn=.75*oe.length,Vt=oe.length,zn=0;oe[oe.length-1]==="="&&(Tn--,oe[oe.length-2]==="="&&Tn--);const vn=new ArrayBuffer(Tn),Yr=new Uint8Array(vn);for(De=0;De<Vt;De+=4)rt=F[oe.charCodeAt(De)],St=F[oe.charCodeAt(De+1)],Dt=F[oe.charCodeAt(De+2)],_t=F[oe.charCodeAt(De+3)],Yr[zn++]=rt<<2|St>>4,Yr[zn++]=(15&St)<<4|Dt>>2,Yr[zn++]=(3&Dt)<<6|63&_t;return vn})(te);return ce(Y,$)}return{base64:!0,data:te}},ce=(te,$)=>$==="blob"?te instanceof Blob?te:new Blob([te]):te instanceof ArrayBuffer?te:te.buffer,X="";function Ee(){return new TransformStream({transform(te,$){(function(Y,oe){C&&Y.data instanceof Blob?Y.data.arrayBuffer().then(A).then(oe):_&&(Y.data instanceof ArrayBuffer||w(Y.data))?oe(A(Y.data)):p(Y,!1,De=>{I||(I=new TextEncoder),oe(I.encode(De))})})(te,Y=>{const oe=Y.length;let De;if(oe<126)De=new Uint8Array(1),new DataView(De.buffer).setUint8(0,oe);else if(oe<65536){De=new Uint8Array(3);const rt=new DataView(De.buffer);rt.setUint8(0,126),rt.setUint16(1,oe)}else{De=new Uint8Array(9);const rt=new DataView(De.buffer);rt.setUint8(0,127),rt.setBigUint64(1,BigInt(oe))}te.data&&typeof te.data!="string"&&(De[0]|=128),$.enqueue(De),$.enqueue(Y)})}})}let Se;function xe(te){return te.reduce(($,Y)=>$+Y.length,0)}function _e(te,$){if(te[0].length===$)return te.shift();const Y=new Uint8Array($);let oe=0;for(let De=0;De<$;De++)Y[De]=te[0][oe++],oe===te[0].length&&(te.shift(),oe=0);return te.length&&oe<te[0].length&&(te[0]=te[0].slice(oe)),Y}function Pe(te){if(te)return function($){for(var Y in Pe.prototype)$[Y]=Pe.prototype[Y];return $}(te)}Pe.prototype.on=Pe.prototype.addEventListener=function(te,$){return this._callbacks=this._callbacks||{},(this._callbacks["$"+te]=this._callbacks["$"+te]||[]).push($),this},Pe.prototype.once=function(te,$){function Y(){this.off(te,Y),$.apply(this,arguments)}return Y.fn=$,this.on(te,Y),this},Pe.prototype.off=Pe.prototype.removeListener=Pe.prototype.removeAllListeners=Pe.prototype.removeEventListener=function(te,$){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var Y,oe=this._callbacks["$"+te];if(!oe)return this;if(arguments.length==1)return delete this._callbacks["$"+te],this;for(var De=0;De<oe.length;De++)if((Y=oe[De])===$||Y.fn===$){oe.splice(De,1);break}return oe.length===0&&delete this._callbacks["$"+te],this},Pe.prototype.emit=function(te){this._callbacks=this._callbacks||{};for(var $=new Array(arguments.length-1),Y=this._callbacks["$"+te],oe=1;oe<arguments.length;oe++)$[oe-1]=arguments[oe];if(Y){oe=0;for(var De=(Y=Y.slice(0)).length;oe<De;++oe)Y[oe].apply(this,$)}return this},Pe.prototype.emitReserved=Pe.prototype.emit,Pe.prototype.listeners=function(te){return this._callbacks=this._callbacks||{},this._callbacks["$"+te]||[]},Pe.prototype.hasListeners=function(te){return!!this.listeners(te).length};const He=typeof Promise=="function"&&typeof Promise.resolve=="function"?te=>Promise.resolve().then(te):(te,$)=>$(te,0),pe=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Ge(te,...$){return $.reduce((Y,oe)=>(te.hasOwnProperty(oe)&&(Y[oe]=te[oe]),Y),{})}const Te=pe.setTimeout,Ve=pe.clearTimeout;function qe(te,$){$.useNativeTimers?(te.setTimeoutFn=Te.bind(pe),te.clearTimeoutFn=Ve.bind(pe)):(te.setTimeoutFn=pe.setTimeout.bind(pe),te.clearTimeoutFn=pe.clearTimeout.bind(pe))}function nt(te){return typeof te=="string"?function($){let Y=0,oe=0;for(let De=0,rt=$.length;De<rt;De++)Y=$.charCodeAt(De),Y<128?oe+=1:Y<2048?oe+=2:Y<55296||Y>=57344?oe+=3:(De++,oe+=4);return oe}(te):Math.ceil(1.33*(te.byteLength||te.size))}function Bt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Pr extends Error{constructor($,Y,oe){super($),this.description=Y,this.context=oe,this.type="TransportError"}}class Ur extends Pe{constructor($){super(),this.writable=!1,qe(this,$),this.opts=$,this.query=$.query,this.socket=$.socket,this.supportsBinary=!$.forceBase64}onError($,Y,oe){return super.emitReserved("error",new Pr($,Y,oe)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this}send($){this.readyState==="open"&&this.write($)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData($){const Y=G($,this.socket.binaryType);this.onPacket(Y)}onPacket($){super.emitReserved("packet",$)}onClose($){this.readyState="closed",super.emitReserved("close",$)}pause($){}createUri($,Y={}){return $+"://"+this._hostname()+this._port()+this.opts.path+this._query(Y)}_hostname(){const $=this.opts.hostname;return $.indexOf(":")===-1?$:"["+$+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query($){const Y=function(oe){let De="";for(let rt in oe)oe.hasOwnProperty(rt)&&(De.length&&(De+="&"),De+=encodeURIComponent(rt)+"="+encodeURIComponent(oe[rt]));return De}($);return Y.length?"?"+Y:""}}class Zn extends Ur{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause($){this.readyState="pausing";const Y=()=>{this.readyState="paused",$()};if(this._polling||!this.writable){let oe=0;this._polling&&(oe++,this.once("pollComplete",function(){--oe||Y()})),this.writable||(oe++,this.once("drain",function(){--oe||Y()}))}else Y()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData($){((Y,oe)=>{const De=Y.split(X),rt=[];for(let St=0;St<De.length;St++){const Dt=G(De[St],oe);if(rt.push(Dt),Dt.type==="error")break}return rt})($,this.socket.binaryType).forEach(Y=>{if(this.readyState==="opening"&&Y.type==="open"&&this.onOpen(),Y.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(Y)}),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const $=()=>{this.write([{type:"close"}])};this.readyState==="open"?$():this.once("open",$)}write($){this.writable=!1,((Y,oe)=>{const De=Y.length,rt=new Array(De);let St=0;Y.forEach((Dt,_t)=>{p(Dt,!1,Tn=>{rt[_t]=Tn,++St===De&&oe(rt.join(X))})})})($,Y=>{this.doWrite(Y,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const $=this.opts.secure?"https":"http",Y=this.query||{};return this.opts.timestampRequests!==!1&&(Y[this.opts.timestampParam]=Bt()),this.supportsBinary||Y.sid||(Y.b64=1),this.createUri($,Y)}}let fr=!1;try{fr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const gr=fr;function Bn(){}class Ie extends Zn{constructor($){if(super($),typeof location<"u"){const Y=location.protocol==="https:";let oe=location.port;oe||(oe=Y?"443":"80"),this.xd=typeof location<"u"&&$.hostname!==location.hostname||oe!==$.port}}doWrite($,Y){const oe=this.request({method:"POST",data:$});oe.on("success",Y),oe.on("error",(De,rt)=>{this.onError("xhr post error",De,rt)})}doPoll(){const $=this.request();$.on("data",this.onData.bind(this)),$.on("error",(Y,oe)=>{this.onError("xhr poll error",Y,oe)}),this.pollXhr=$}}class Be extends Pe{constructor($,Y,oe){super(),this.createRequest=$,qe(this,oe),this._opts=oe,this._method=oe.method||"GET",this._uri=Y,this._data=oe.data!==void 0?oe.data:null,this._create()}_create(){var $;const Y=Ge(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");Y.xdomain=!!this._opts.xd;const oe=this._xhr=this.createRequest(Y);try{oe.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){oe.setDisableHeaderCheck&&oe.setDisableHeaderCheck(!0);for(let De in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(De)&&oe.setRequestHeader(De,this._opts.extraHeaders[De])}}catch{}if(this._method==="POST")try{oe.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{oe.setRequestHeader("Accept","*/*")}catch{}($=this._opts.cookieJar)===null||$===void 0||$.addCookies(oe),"withCredentials"in oe&&(oe.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(oe.timeout=this._opts.requestTimeout),oe.onreadystatechange=()=>{var De;oe.readyState===3&&((De=this._opts.cookieJar)===null||De===void 0||De.parseCookies(oe.getResponseHeader("set-cookie"))),oe.readyState===4&&(oe.status===200||oe.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof oe.status=="number"?oe.status:0)},0))},oe.send(this._data)}catch(De){return void this.setTimeoutFn(()=>{this._onError(De)},0)}typeof document<"u"&&(this._index=Be.requestsCount++,Be.requests[this._index]=this)}_onError($){this.emitReserved("error",$,this._xhr),this._cleanup(!0)}_cleanup($){if(this._xhr!==void 0&&this._xhr!==null){if(this._xhr.onreadystatechange=Bn,$)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Be.requests[this._index],this._xhr=null}}_onLoad(){const $=this._xhr.responseText;$!==null&&(this.emitReserved("data",$),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Be.requestsCount=0,Be.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",Ye):typeof addEventListener=="function"&&addEventListener("onpagehide"in pe?"pagehide":"unload",Ye,!1));function Ye(){for(let te in Be.requests)Be.requests.hasOwnProperty(te)&&Be.requests[te].abort()}const Qt=function(){const te=Ft({xdomain:!1});return te&&te.responseType!==null}();function Ft(te){const $=te.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!$||gr))return new XMLHttpRequest}catch{}if(!$)try{return new pe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const xt=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pn extends Ur{get name(){return"websocket"}doOpen(){const $=this.uri(),Y=this.opts.protocols,oe=xt?{}:Ge(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(oe.headers=this.opts.extraHeaders);try{this.ws=this.createSocket($,Y,oe)}catch(De){return this.emitReserved("error",De)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=$=>this.onClose({description:"websocket connection closed",context:$}),this.ws.onmessage=$=>this.onData($.data),this.ws.onerror=$=>this.onError("websocket error",$)}write($){this.writable=!1;for(let Y=0;Y<$.length;Y++){const oe=$[Y],De=Y===$.length-1;p(oe,this.supportsBinary,rt=>{try{this.doWrite(oe,rt)}catch{}De&&He(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const $=this.opts.secure?"wss":"ws",Y=this.query||{};return this.opts.timestampRequests&&(Y[this.opts.timestampParam]=Bt()),this.supportsBinary||(Y.b64=1),this.createUri($,Y)}}const Ln=pe.WebSocket||pe.MozWebSocket,zt={websocket:class extends pn{createSocket(te,$,Y){return xt?new Ln(te,$,Y):$?new Ln(te,$):new Ln(te)}doWrite(te,$){this.ws.send($)}},webtransport:class extends Ur{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(te){return this.emitReserved("error",te)}this._transport.closed.then(()=>{this.onClose()}).catch(te=>{this.onError("webtransport error",te)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(te=>{const $=function(St,Dt){Se||(Se=new TextDecoder);const _t=[];let Tn=0,Vt=-1,zn=!1;return new TransformStream({transform(vn,Yr){for(_t.push(vn);;){if(Tn===0){if(xe(_t)<1)break;const Fr=_e(_t,1);zn=!(128&~Fr[0]),Vt=127&Fr[0],Tn=Vt<126?3:Vt===126?1:2}else if(Tn===1){if(xe(_t)<2)break;const Fr=_e(_t,2);Vt=new DataView(Fr.buffer,Fr.byteOffset,Fr.length).getUint16(0),Tn=3}else if(Tn===2){if(xe(_t)<8)break;const Fr=_e(_t,8),ia=new DataView(Fr.buffer,Fr.byteOffset,Fr.length),Qr=ia.getUint32(0);if(Qr>Math.pow(2,21)-1){Yr.enqueue(U);break}Vt=Qr*Math.pow(2,32)+ia.getUint32(4),Tn=3}else{if(xe(_t)<Vt)break;const Fr=_e(_t,Vt);Yr.enqueue(G(zn?Fr:Se.decode(Fr),Dt)),Tn=0}if(Vt===0||Vt>St){Yr.enqueue(U);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),Y=te.readable.pipeThrough($).getReader(),oe=Ee();oe.readable.pipeTo(te.writable),this._writer=oe.writable.getWriter();const De=()=>{Y.read().then(({done:St,value:Dt})=>{St||(this.onPacket(Dt),De())}).catch(St=>{})};De();const rt={type:"open"};this.query.sid&&(rt.data=`{"sid":"${this.query.sid}"}`),this._writer.write(rt).then(()=>this.onOpen())})})}write(te){this.writable=!1;for(let $=0;$<te.length;$++){const Y=te[$],oe=$===te.length-1;this._writer.write(Y).then(()=>{oe&&He(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var te;(te=this._transport)===null||te===void 0||te.close()}},polling:class extends Ie{constructor(te){super(te);const $=te&&te.forceBase64;this.supportsBinary=Qt&&!$}request(te={}){return Object.assign(te,{xd:this.xd},this.opts),new Be(Ft,this.uri(),te)}}},sr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Hr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Rr(te){if(te.length>8e3)throw"URI too long";const $=te,Y=te.indexOf("["),oe=te.indexOf("]");Y!=-1&&oe!=-1&&(te=te.substring(0,Y)+te.substring(Y,oe).replace(/:/g,";")+te.substring(oe,te.length));let De=sr.exec(te||""),rt={},St=14;for(;St--;)rt[Hr[St]]=De[St]||"";return Y!=-1&&oe!=-1&&(rt.source=$,rt.host=rt.host.substring(1,rt.host.length-1).replace(/;/g,":"),rt.authority=rt.authority.replace("[","").replace("]","").replace(/;/g,":"),rt.ipv6uri=!0),rt.pathNames=function(Dt,_t){const Tn=/\/{2,9}/g,Vt=_t.replace(Tn,"/").split("/");return _t.slice(0,1)!="/"&&_t.length!==0||Vt.splice(0,1),_t.slice(-1)=="/"&&Vt.splice(Vt.length-1,1),Vt}(0,rt.path),rt.queryKey=function(Dt,_t){const Tn={};return _t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(Vt,zn,vn){zn&&(Tn[zn]=vn)}),Tn}(0,rt.query),rt}const Vr=typeof addEventListener=="function"&&typeof removeEventListener=="function",zr=[];Vr&&addEventListener("offline",()=>{zr.forEach(te=>te())},!1);class Ar extends Pe{constructor($,Y){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,$&&typeof $=="object"&&(Y=$,$=null),$){const oe=Rr($);Y.hostname=oe.host,Y.secure=oe.protocol==="https"||oe.protocol==="wss",Y.port=oe.port,oe.query&&(Y.query=oe.query)}else Y.host&&(Y.hostname=Rr(Y.host).host);qe(this,Y),this.secure=Y.secure!=null?Y.secure:typeof location<"u"&&location.protocol==="https:",Y.hostname&&!Y.port&&(Y.port=this.secure?"443":"80"),this.hostname=Y.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=Y.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},Y.transports.forEach(oe=>{const De=oe.prototype.name;this.transports.push(De),this._transportsByName[De]=oe}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},Y),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=function(oe){let De={},rt=oe.split("&");for(let St=0,Dt=rt.length;St<Dt;St++){let _t=rt[St].split("=");De[decodeURIComponent(_t[0])]=decodeURIComponent(_t[1])}return De}(this.opts.query)),Vr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},zr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport($){const Y=Object.assign({},this.opts.query);Y.EIO=4,Y.transport=$,this.id&&(Y.sid=this.id);const oe=Object.assign({},this.opts,{query:Y,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[$]);return new this._transportsByName[$](oe)}_open(){if(this.transports.length===0)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const $=this.opts.rememberUpgrade&&Ar.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const Y=this.createTransport($);Y.open(),this.setTransport(Y)}setTransport($){this.transport&&this.transport.removeAllListeners(),this.transport=$,$.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",Y=>this._onClose("transport close",Y))}onOpen(){this.readyState="open",Ar.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket($){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",$),this.emitReserved("heartbeat"),$.type){case"open":this.onHandshake(JSON.parse($.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const Y=new Error("server error");Y.code=$.data,this._onError(Y);break;case"message":this.emitReserved("data",$.data),this.emitReserved("message",$.data)}}onHandshake($){this.emitReserved("handshake",$),this.id=$.sid,this.transport.query.sid=$.sid,this._pingInterval=$.pingInterval,this._pingTimeout=$.pingTimeout,this._maxPayload=$.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const $=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+$,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},$),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const $=this._getWritablePackets();this.transport.send($),this._prevBufferLen=$.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let $=1;for(let Y=0;Y<this.writeBuffer.length;Y++){const oe=this.writeBuffer[Y].data;if(oe&&($+=nt(oe)),Y>0&&$>this._maxPayload)return this.writeBuffer.slice(0,Y);$+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const $=Date.now()>this._pingTimeoutTime;return $&&(this._pingTimeoutTime=0,He(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),$}write($,Y,oe){return this._sendPacket("message",$,Y,oe),this}send($,Y,oe){return this._sendPacket("message",$,Y,oe),this}_sendPacket($,Y,oe,De){if(typeof Y=="function"&&(De=Y,Y=void 0),typeof oe=="function"&&(De=oe,oe=null),this.readyState==="closing"||this.readyState==="closed")return;(oe=oe||{}).compress=oe.compress!==!1;const rt={type:$,data:Y,options:oe};this.emitReserved("packetCreate",rt),this.writeBuffer.push(rt),De&&this.once("flush",De),this.flush()}close(){const $=()=>{this._onClose("forced close"),this.transport.close()},Y=()=>{this.off("upgrade",Y),this.off("upgradeError",Y),$()},oe=()=>{this.once("upgrade",Y),this.once("upgradeError",Y)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?oe():$()}):this.upgrading?oe():$()),this}_onError($){if(Ar.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",$),this._onClose("transport error",$)}_onClose($,Y){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Vr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const oe=zr.indexOf(this._offlineEventListener);oe!==-1&&zr.splice(oe,1)}this.readyState="closed",this.id=null,this.emitReserved("close",$,Y),this.writeBuffer=[],this._prevBufferLen=0}}}Ar.protocol=4;class $r extends Ar{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let $=0;$<this._upgrades.length;$++)this._probe(this._upgrades[$])}_probe($){let Y=this.createTransport($),oe=!1;Ar.priorWebsocketSuccess=!1;const De=()=>{oe||(Y.send([{type:"ping",data:"probe"}]),Y.once("packet",zn=>{if(!oe)if(zn.type==="pong"&&zn.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",Y),!Y)return;Ar.priorWebsocketSuccess=Y.name==="websocket",this.transport.pause(()=>{oe||this.readyState!=="closed"&&(Vt(),this.setTransport(Y),Y.send([{type:"upgrade"}]),this.emitReserved("upgrade",Y),Y=null,this.upgrading=!1,this.flush())})}else{const vn=new Error("probe error");vn.transport=Y.name,this.emitReserved("upgradeError",vn)}}))};function rt(){oe||(oe=!0,Vt(),Y.close(),Y=null)}const St=zn=>{const vn=new Error("probe error: "+zn);vn.transport=Y.name,rt(),this.emitReserved("upgradeError",vn)};function Dt(){St("transport closed")}function _t(){St("socket closed")}function Tn(zn){Y&&zn.name!==Y.name&&rt()}const Vt=()=>{Y.removeListener("open",De),Y.removeListener("error",St),Y.removeListener("close",Dt),this.off("close",_t),this.off("upgrading",Tn)};Y.once("open",De),Y.once("error",St),Y.once("close",Dt),this.once("close",_t),this.once("upgrading",Tn),this._upgrades.indexOf("webtransport")!==-1&&$!=="webtransport"?this.setTimeoutFn(()=>{oe||Y.open()},200):Y.open()}onHandshake($){this._upgrades=this._filterUpgrades($.upgrades),super.onHandshake($)}_filterUpgrades($){const Y=[];for(let oe=0;oe<$.length;oe++)~this.transports.indexOf($[oe])&&Y.push($[oe]);return Y}}class ga extends $r{constructor($,Y={}){const oe=typeof $=="object"?$:Y;(!oe.transports||oe.transports&&typeof oe.transports[0]=="string")&&(oe.transports=(oe.transports||["polling","websocket","webtransport"]).map(De=>zt[De]).filter(De=>!!De)),super($,oe)}}const ea=typeof ArrayBuffer=="function",oa=Object.prototype.toString,Nn=typeof Blob=="function"||typeof Blob<"u"&&oa.call(Blob)==="[object BlobConstructor]",Ha=typeof File=="function"||typeof File<"u"&&oa.call(File)==="[object FileConstructor]";function Ca(te){return ea&&(te instanceof ArrayBuffer||($=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView($):$.buffer instanceof ArrayBuffer)(te))||Nn&&te instanceof Blob||Ha&&te instanceof File}function Gr(te,$){if(!te||typeof te!="object")return!1;if(Array.isArray(te)){for(let Y=0,oe=te.length;Y<oe;Y++)if(Gr(te[Y]))return!0;return!1}if(Ca(te))return!0;if(te.toJSON&&typeof te.toJSON=="function"&&arguments.length===1)return Gr(te.toJSON(),!0);for(const Y in te)if(Object.prototype.hasOwnProperty.call(te,Y)&&Gr(te[Y]))return!0;return!1}function dr(te){const $=[],Y=te.data,oe=te;return oe.data=at(Y,$),oe.attachments=$.length,{packet:oe,buffers:$}}function at(te,$){if(!te)return te;if(Ca(te)){const Y={_placeholder:!0,num:$.length};return $.push(te),Y}if(Array.isArray(te)){const Y=new Array(te.length);for(let oe=0;oe<te.length;oe++)Y[oe]=at(te[oe],$);return Y}if(typeof te=="object"&&!(te instanceof Date)){const Y={};for(const oe in te)Object.prototype.hasOwnProperty.call(te,oe)&&(Y[oe]=at(te[oe],$));return Y}return te}function ut(te,$){return te.data=Wt(te.data,$),delete te.attachments,te}function Wt(te,$){if(!te)return te;if(te&&te._placeholder===!0){if(typeof te.num=="number"&&te.num>=0&&te.num<$.length)return $[te.num];throw new Error("illegal attachments")}if(Array.isArray(te))for(let Y=0;Y<te.length;Y++)te[Y]=Wt(te[Y],$);else if(typeof te=="object")for(const Y in te)Object.prototype.hasOwnProperty.call(te,Y)&&(te[Y]=Wt(te[Y],$));return te}const Tt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],tn=5;var Xt;(function(te){te[te.CONNECT=0]="CONNECT",te[te.DISCONNECT=1]="DISCONNECT",te[te.EVENT=2]="EVENT",te[te.ACK=3]="ACK",te[te.CONNECT_ERROR=4]="CONNECT_ERROR",te[te.BINARY_EVENT=5]="BINARY_EVENT",te[te.BINARY_ACK=6]="BINARY_ACK"})(Xt||(Xt={}));class Xe{constructor($){this.replacer=$}encode($){return $.type!==Xt.EVENT&&$.type!==Xt.ACK||!Gr($)?[this.encodeAsString($)]:this.encodeAsBinary({type:$.type===Xt.EVENT?Xt.BINARY_EVENT:Xt.BINARY_ACK,nsp:$.nsp,data:$.data,id:$.id})}encodeAsString($){let Y=""+$.type;return $.type!==Xt.BINARY_EVENT&&$.type!==Xt.BINARY_ACK||(Y+=$.attachments+"-"),$.nsp&&$.nsp!=="/"&&(Y+=$.nsp+","),$.id!=null&&(Y+=$.id),$.data!=null&&(Y+=JSON.stringify($.data,this.replacer)),Y}encodeAsBinary($){const Y=dr($),oe=this.encodeAsString(Y.packet),De=Y.buffers;return De.unshift(oe),De}}function Sn(te){return Object.prototype.toString.call(te)==="[object Object]"}class Rn extends Pe{constructor($){super(),this.reviver=$}add($){let Y;if(typeof $=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");Y=this.decodeString($);const oe=Y.type===Xt.BINARY_EVENT;oe||Y.type===Xt.BINARY_ACK?(Y.type=oe?Xt.EVENT:Xt.ACK,this.reconstructor=new Vn(Y),Y.attachments===0&&super.emitReserved("decoded",Y)):super.emitReserved("decoded",Y)}else{if(!Ca($)&&!$.base64)throw new Error("Unknown type: "+$);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");Y=this.reconstructor.takeBinaryData($),Y&&(this.reconstructor=null,super.emitReserved("decoded",Y))}}decodeString($){let Y=0;const oe={type:Number($.charAt(0))};if(Xt[oe.type]===void 0)throw new Error("unknown packet type "+oe.type);if(oe.type===Xt.BINARY_EVENT||oe.type===Xt.BINARY_ACK){const rt=Y+1;for(;$.charAt(++Y)!=="-"&&Y!=$.length;);const St=$.substring(rt,Y);if(St!=Number(St)||$.charAt(Y)!=="-")throw new Error("Illegal attachments");oe.attachments=Number(St)}if($.charAt(Y+1)==="/"){const rt=Y+1;for(;++Y&&!($.charAt(Y)===","||Y===$.length););oe.nsp=$.substring(rt,Y)}else oe.nsp="/";const De=$.charAt(Y+1);if(De!==""&&Number(De)==De){const rt=Y+1;for(;++Y;){const St=$.charAt(Y);if(St==null||Number(St)!=St){--Y;break}if(Y===$.length)break}oe.id=Number($.substring(rt,Y+1))}if($.charAt(++Y)){const rt=this.tryParse($.substr(Y));if(!Rn.isPayloadValid(oe.type,rt))throw new Error("invalid payload");oe.data=rt}return oe}tryParse($){try{return JSON.parse($,this.reviver)}catch{return!1}}static isPayloadValid($,Y){switch($){case Xt.CONNECT:return Sn(Y);case Xt.DISCONNECT:return Y===void 0;case Xt.CONNECT_ERROR:return typeof Y=="string"||Sn(Y);case Xt.EVENT:case Xt.BINARY_EVENT:return Array.isArray(Y)&&(typeof Y[0]=="number"||typeof Y[0]=="string"&&Tt.indexOf(Y[0])===-1);case Xt.ACK:case Xt.BINARY_ACK:return Array.isArray(Y)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Vn{constructor($){this.packet=$,this.buffers=[],this.reconPack=$}takeBinaryData($){if(this.buffers.push($),this.buffers.length===this.reconPack.attachments){const Y=ut(this.reconPack,this.buffers);return this.finishedReconstruction(),Y}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function or(te,$,Y){return te.on($,Y),function(){te.off($,Y)}}const $t=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class bt extends Pe{constructor($,Y,oe){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=$,this.nsp=Y,oe&&oe.auth&&(this.auth=oe.auth),this._opts=Object.assign({},oe),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const $=this.io;this.subs=[or($,"open",this.onopen.bind(this)),or($,"packet",this.onpacket.bind(this)),or($,"error",this.onerror.bind(this)),or($,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this}open(){return this.connect()}send(...$){return $.unshift("message"),this.emit.apply(this,$),this}emit($,...Y){var oe,De,rt;if($t.hasOwnProperty($))throw new Error('"'+$.toString()+'" is a reserved event name');if(Y.unshift($),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(Y),this;const St={type:Xt.EVENT,data:Y,options:{}};if(St.options.compress=this.flags.compress!==!1,typeof Y[Y.length-1]=="function"){const Tn=this.ids++,Vt=Y.pop();this._registerAckCallback(Tn,Vt),St.id=Tn}const Dt=(De=(oe=this.io.engine)===null||oe===void 0?void 0:oe.transport)===null||De===void 0?void 0:De.writable,_t=this.connected&&!(!((rt=this.io.engine)===null||rt===void 0)&&rt._hasPingExpired());return this.flags.volatile&&!Dt||(_t?(this.notifyOutgoingListeners(St),this.packet(St)):this.sendBuffer.push(St)),this.flags={},this}_registerAckCallback($,Y){var oe;const De=(oe=this.flags.timeout)!==null&&oe!==void 0?oe:this._opts.ackTimeout;if(De===void 0)return void(this.acks[$]=Y);const rt=this.io.setTimeoutFn(()=>{delete this.acks[$];for(let Dt=0;Dt<this.sendBuffer.length;Dt++)this.sendBuffer[Dt].id===$&&this.sendBuffer.splice(Dt,1);Y.call(this,new Error("operation has timed out"))},De),St=(...Dt)=>{this.io.clearTimeoutFn(rt),Y.apply(this,Dt)};St.withError=!0,this.acks[$]=St}emitWithAck($,...Y){return new Promise((oe,De)=>{const rt=(St,Dt)=>St?De(St):oe(Dt);rt.withError=!0,Y.push(rt),this.emit($,...Y)})}_addToQueue($){let Y;typeof $[$.length-1]=="function"&&(Y=$.pop());const oe={id:this._queueSeq++,tryCount:0,pending:!1,args:$,flags:Object.assign({fromQueue:!0},this.flags)};$.push((De,...rt)=>{if(oe===this._queue[0])return De!==null?oe.tryCount>this._opts.retries&&(this._queue.shift(),Y&&Y(De)):(this._queue.shift(),Y&&Y(null,...rt)),oe.pending=!1,this._drainQueue()}),this._queue.push(oe),this._drainQueue()}_drainQueue($=!1){if(!this.connected||this._queue.length===0)return;const Y=this._queue[0];Y.pending&&!$||(Y.pending=!0,Y.tryCount++,this.flags=Y.flags,this.emit.apply(this,Y.args))}packet($){$.nsp=this.nsp,this.io._packet($)}onopen(){typeof this.auth=="function"?this.auth($=>{this._sendConnectPacket($)}):this._sendConnectPacket(this.auth)}_sendConnectPacket($){this.packet({type:Xt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},$):$})}onerror($){this.connected||this.emitReserved("connect_error",$)}onclose($,Y){this.connected=!1,delete this.id,this.emitReserved("disconnect",$,Y),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach($=>{if(!this.sendBuffer.some(Y=>String(Y.id)===$)){const Y=this.acks[$];delete this.acks[$],Y.withError&&Y.call(this,new Error("socket has been disconnected"))}})}onpacket($){if($.nsp===this.nsp)switch($.type){case Xt.CONNECT:$.data&&$.data.sid?this.onconnect($.data.sid,$.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Xt.EVENT:case Xt.BINARY_EVENT:this.onevent($);break;case Xt.ACK:case Xt.BINARY_ACK:this.onack($);break;case Xt.DISCONNECT:this.ondisconnect();break;case Xt.CONNECT_ERROR:this.destroy();const Y=new Error($.data.message);Y.data=$.data.data,this.emitReserved("connect_error",Y)}}onevent($){const Y=$.data||[];$.id!=null&&Y.push(this.ack($.id)),this.connected?this.emitEvent(Y):this.receiveBuffer.push(Object.freeze(Y))}emitEvent($){if(this._anyListeners&&this._anyListeners.length){const Y=this._anyListeners.slice();for(const oe of Y)oe.apply(this,$)}super.emit.apply(this,$),this._pid&&$.length&&typeof $[$.length-1]=="string"&&(this._lastOffset=$[$.length-1])}ack($){const Y=this;let oe=!1;return function(...De){oe||(oe=!0,Y.packet({type:Xt.ACK,id:$,data:De}))}}onack($){const Y=this.acks[$.id];typeof Y=="function"&&(delete this.acks[$.id],Y.withError&&$.data.unshift(null),Y.apply(this,$.data))}onconnect($,Y){this.id=$,this.recovered=Y&&this._pid===Y,this._pid=Y,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach($=>this.emitEvent($)),this.receiveBuffer=[],this.sendBuffer.forEach($=>{this.notifyOutgoingListeners($),this.packet($)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach($=>$()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Xt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress($){return this.flags.compress=$,this}get volatile(){return this.flags.volatile=!0,this}timeout($){return this.flags.timeout=$,this}onAny($){return this._anyListeners=this._anyListeners||[],this._anyListeners.push($),this}prependAny($){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift($),this}offAny($){if(!this._anyListeners)return this;if($){const Y=this._anyListeners;for(let oe=0;oe<Y.length;oe++)if($===Y[oe])return Y.splice(oe,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing($){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push($),this}prependAnyOutgoing($){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift($),this}offAnyOutgoing($){if(!this._anyOutgoingListeners)return this;if($){const Y=this._anyOutgoingListeners;for(let oe=0;oe<Y.length;oe++)if($===Y[oe])return Y.splice(oe,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners($){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const Y=this._anyOutgoingListeners.slice();for(const oe of Y)oe.apply(this,$.data)}}}function Pn(te){te=te||{},this.ms=te.min||100,this.max=te.max||1e4,this.factor=te.factor||2,this.jitter=te.jitter>0&&te.jitter<=1?te.jitter:0,this.attempts=0}Pn.prototype.duration=function(){var te=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var $=Math.random(),Y=Math.floor($*this.jitter*te);te=1&Math.floor(10*$)?te+Y:te-Y}return 0|Math.min(te,this.max)},Pn.prototype.reset=function(){this.attempts=0},Pn.prototype.setMin=function(te){this.ms=te},Pn.prototype.setMax=function(te){this.max=te},Pn.prototype.setJitter=function(te){this.jitter=te};class kn extends Pe{constructor($,Y){var oe;super(),this.nsps={},this.subs=[],$&&typeof $=="object"&&(Y=$,$=void 0),(Y=Y||{}).path=Y.path||"/socket.io",this.opts=Y,qe(this,Y),this.reconnection(Y.reconnection!==!1),this.reconnectionAttempts(Y.reconnectionAttempts||1/0),this.reconnectionDelay(Y.reconnectionDelay||1e3),this.reconnectionDelayMax(Y.reconnectionDelayMax||5e3),this.randomizationFactor((oe=Y.randomizationFactor)!==null&&oe!==void 0?oe:.5),this.backoff=new Pn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(Y.timeout==null?2e4:Y.timeout),this._readyState="closed",this.uri=$;const De=Y.parser||S;this.encoder=new De.Encoder,this.decoder=new De.Decoder,this._autoConnect=Y.autoConnect!==!1,this._autoConnect&&this.open()}reconnection($){return arguments.length?(this._reconnection=!!$,$||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts($){return $===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=$,this)}reconnectionDelay($){var Y;return $===void 0?this._reconnectionDelay:(this._reconnectionDelay=$,(Y=this.backoff)===null||Y===void 0||Y.setMin($),this)}randomizationFactor($){var Y;return $===void 0?this._randomizationFactor:(this._randomizationFactor=$,(Y=this.backoff)===null||Y===void 0||Y.setJitter($),this)}reconnectionDelayMax($){var Y;return $===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=$,(Y=this.backoff)===null||Y===void 0||Y.setMax($),this)}timeout($){return arguments.length?(this._timeout=$,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open($){if(~this._readyState.indexOf("open"))return this;this.engine=new ga(this.uri,this.opts);const Y=this.engine,oe=this;this._readyState="opening",this.skipReconnect=!1;const De=or(Y,"open",function(){oe.onopen(),$&&$()}),rt=Dt=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",Dt),$?$(Dt):this.maybeReconnectOnOpen()},St=or(Y,"error",rt);if(this._timeout!==!1){const Dt=this._timeout,_t=this.setTimeoutFn(()=>{De(),rt(new Error("timeout")),Y.close()},Dt);this.opts.autoUnref&&_t.unref(),this.subs.push(()=>{this.clearTimeoutFn(_t)})}return this.subs.push(De),this.subs.push(St),this}connect($){return this.open($)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const $=this.engine;this.subs.push(or($,"ping",this.onping.bind(this)),or($,"data",this.ondata.bind(this)),or($,"error",this.onerror.bind(this)),or($,"close",this.onclose.bind(this)),or(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata($){try{this.decoder.add($)}catch(Y){this.onclose("parse error",Y)}}ondecoded($){He(()=>{this.emitReserved("packet",$)},this.setTimeoutFn)}onerror($){this.emitReserved("error",$)}socket($,Y){let oe=this.nsps[$];return oe?this._autoConnect&&!oe.active&&oe.connect():(oe=new bt(this,$,Y),this.nsps[$]=oe),oe}_destroy($){const Y=Object.keys(this.nsps);for(const oe of Y)if(this.nsps[oe].active)return;this._close()}_packet($){const Y=this.encoder.encode($);for(let oe=0;oe<Y.length;oe++)this.engine.write(Y[oe],$.options)}cleanup(){this.subs.forEach($=>$()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose($,Y){var oe;this.cleanup(),(oe=this.engine)===null||oe===void 0||oe.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",$,Y),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const $=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const Y=this.backoff.duration();this._reconnecting=!0;const oe=this.setTimeoutFn(()=>{$.skipReconnect||(this.emitReserved("reconnect_attempt",$.backoff.attempts),$.skipReconnect||$.open(De=>{De?($._reconnecting=!1,$.reconnect(),this.emitReserved("reconnect_error",De)):$.onreconnect()}))},Y);this.opts.autoUnref&&oe.unref(),this.subs.push(()=>{this.clearTimeoutFn(oe)})}}onreconnect(){const $=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",$)}}const bn={};function Nr(te,$){typeof te=="object"&&($=te,te=void 0);const Y=function(_t,Tn="",Vt){let zn=_t;Vt=Vt||typeof location<"u"&&location,_t==null&&(_t=Vt.protocol+"//"+Vt.host),typeof _t=="string"&&(_t.charAt(0)==="/"&&(_t=_t.charAt(1)==="/"?Vt.protocol+_t:Vt.host+_t),/^(https?|wss?):\/\//.test(_t)||(_t=Vt!==void 0?Vt.protocol+"//"+_t:"https://"+_t),zn=Rr(_t)),zn.port||(/^(http|ws)$/.test(zn.protocol)?zn.port="80":/^(http|ws)s$/.test(zn.protocol)&&(zn.port="443")),zn.path=zn.path||"/";const vn=zn.host.indexOf(":")!==-1?"["+zn.host+"]":zn.host;return zn.id=zn.protocol+"://"+vn+":"+zn.port+Tn,zn.href=zn.protocol+"://"+vn+(Vt&&Vt.port===zn.port?"":":"+zn.port),zn}(te,($=$||{}).path||"/socket.io"),oe=Y.source,De=Y.id,rt=Y.path,St=bn[De]&&rt in bn[De].nsps;let Dt;return $.forceNew||$["force new connection"]||$.multiplex===!1||St?Dt=new kn(oe,$):(bn[De]||(bn[De]=new kn(oe,$)),Dt=bn[De]),Y.query&&!$.query&&($.query=Y.queryKey),Dt.socket(Y.path,$)}Object.assign(Nr,{Manager:kn,Socket:bt,io:Nr,connect:Nr});var Er=d(76),Or=d(7833),Jn=d.n(Or),Hn="mediasoup-demo",ha=function(){return(0,k.A)(function te($){(0,h.A)(this,te),$?(this._debug=Jn()("".concat(Hn,":").concat($)),this._warn=Jn()("".concat(Hn,":WARN:").concat($)),this._error=Jn()("".concat(Hn,":ERROR:").concat($))):(this._debug=Jn()(Hn),this._warn=Jn()("".concat(Hn,":WARN")),this._error=Jn()("".concat(Hn,":ERROR"))),Jn().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)},[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])}();function ca(te,$){var Y=Object.keys(te);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(te);$&&(oe=oe.filter(function(De){return Object.getOwnPropertyDescriptor(te,De).enumerable})),Y.push.apply(Y,oe)}return Y}function Ta(te){for(var $=1;$<arguments.length;$++){var Y=arguments[$]!=null?arguments[$]:{};$%2?ca(Object(Y),!0).forEach(function(oe){(0,E.A)(te,oe,Y[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(Y)):ca(Object(Y)).forEach(function(oe){Object.defineProperty(te,oe,Object.getOwnPropertyDescriptor(Y,oe))})}return te}var Oa=d(1396),ss=Oa.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),ai=Oa.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function ji(te){return os.apply(this,arguments)}function os(){return os=(0,f.A)(m().mark(function te($){var Y,oe,De,rt,St,Dt,_t,Tn,Vt,zn,vn,Yr,Fr,ia,Qr,xs,Rs;return m().wrap(function(Xi){for(;;)switch(Xi.prev=Xi.next){case 0:return Y=$.roomId,oe=$.secret,De=$.signalingBaseUrl,rt="call-api.videosdk.live",St=[],Dt=null,_t={},Tn={},Vt={},zn=null,vn=null,Yr=null,Xi.next=1,fetch("https://".concat(De,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:oe,"Content-Type":"application/json"},body:JSON.stringify({roomId:Y})}).then(function(){var Ks=(0,f.A)(m().mark(function Ys(so){var Mi;return m().wrap(function(Fi){for(;;)switch(Fi.prev=Fi.next){case 0:return Fi.next=1,so.json();case 1:return Mi=Fi.sent,Fi.abrupt("return",Ta({success:so.status==200},Mi));case 2:case"end":return Fi.stop()}},Ys)}));return function(Ys){return Ks.apply(this,arguments)}}()).catch(function(Ks){return{success:!1}});case 1:if(Fr=Xi.sent,ia=Fr.data,Qr=Fr.success,xs=Fr.error,Qr){Xi.next=2;break}throw Error(xs??"Error getting server configurations");case 2:return ia&&(rt=ia.baseUrl,Rs=ia.observability,St=Ei(ia.iceServers),Dt=Rs.jwt,_t=Rs.traces,Tn=Rs.logs,Vt=Rs.metaData,zn=ia.signalingUrl,Yr=ia.socketPath,vn=ia.socketUrl),Xi.abrupt("return",{baseUrl:rt,iceServers:St,observabilityJwt:Dt,traces:_t,logs:Tn,metaData:Vt,signalingUrl:zn,socketPath:Yr,socketUrl:vn});case 3:case"end":return Xi.stop()}},te)})),os.apply(this,arguments)}function Ei(te){try{var $=Oa.AES.decrypt(te,ss,{iv:ai,mode:Oa.mode.CBC,padding:Oa.pad.ZeroPadding}).toString(Oa.enc.Utf8);return JSON.parse($)}catch{return[]}}var Yi=d(2215),qr=d.n(Yi),Si="mediasoup-demo.user",Ni="mediasoup-demo.devices";function sn(te){var $=te.displayName;qr().set(Si,{displayName:$})}function qn(){return qr().getJSON(Ni)}var jn=d(2211),tr=d.n(jn),wn=function(te){return{type:"SET_ROOM_STATE",payload:{state:te}}},On=function(te){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:te}}},Ir=function(te){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:te}}},hr=function(te){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:te.canSendMic,canSendWebcam:te.canSendWebcam}}},vr=function(te){return{type:"SET_CAN_CHANGE_WEBCAM",payload:te}},An=function(te){return{type:"SET_DISPLAY_NAME",payload:{displayName:te}}},jr=function(te){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:te}}},Ea=function(te){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:te}}},ua=function(te){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:te}}},ya=function(te){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:te}}},ja=function(te){return{type:"ADD_PRODUCER",payload:{producer:te}}},Ba=function(te){return{type:"REMOVE_PRODUCER",payload:{producerId:te}}},$a=function(te){return{type:"SET_PRODUCER_PAUSED",payload:{producerId:te}}},Sa=function(te){return{type:"SET_PRODUCER_RESUMED",payload:{producerId:te}}},Qa=function(te,$){return{type:"SET_PRODUCER_TRACK",payload:{producerId:te,track:$}}},pi=function(te,$){return{type:"SET_PRODUCER_SCORE",payload:{producerId:te,score:$}}},Ms=function(te){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:te}}},Qi=function(te){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:te}}},cs=function(te){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:te}}},mi=function(te){return{type:"ADD_PEER",payload:{peer:te}}},to=function(te){return{type:"REMOVE_PEER",payload:{peerId:te}}},Zs=function(te,$){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:te,peerId:$}}},bs=function(te,$){return{type:"ADD_CONSUMER",payload:{consumer:te,peerId:$}}},Ls=function(te,$){return{type:"REMOVE_CONSUMER",payload:{consumerId:te,peerId:$}}},ls=function(te,$){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:te,originator:$}}},Ji=function(te,$){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:te,originator:$}}},us=function(te,$,Y){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:te,spatialLayer:$,temporalLayer:Y}}},Io=function(te,$,Y){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:te,spatialLayer:$,temporalLayer:Y}}},yr=function(te,$){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:te,priority:$}}},xi=function(te,$){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:te,score:$}}},ta=function(te,$){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:te,peerId:$}}},Bi=function(te,$){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:te,peerId:$}}},Is=function(){return{type:"REMOVE_ALL_NOTIFICATIONS"}},Wn=function(te){var $=te.type,Y=$===void 0?"info":$,oe=te.text,De=te.title,rt=te.timeout;if(!rt)switch(Y){case"info":rt=3e3;break;case"error":rt=5e3}var St={id:tr()({length:6}).toLowerCase(),type:Y,title:De,text:oe,timeout:rt};return function(Dt){Dt(function(_t){return{type:"ADD_NOTIFICATION",payload:{notification:_t}}}(St)),setTimeout(function(){Dt({type:"REMOVE_NOTIFICATION",payload:{notificationId:St.id}})},rt)}},Ai=d(7007),zi=d(1803),Ui=d(9027),lr=d(7080),Da="CONNECTING",Oi="CONNECTED",Eo="RECONNECTING",ti="FAILED",ws="DISCONNECTED",Ws=d(5414),Fa=d(2107),Xo=d(5071),Di=Array(32);function Dr(){for(var te=0;te<16;te++)Di[te]=Math.floor(16*Math.random())+48,Di[te]>=58&&(Di[te]+=39);return String.fromCharCode.apply(null,Di.slice(0,16))}function Hi(){var te=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(te)}function ni(te,$){var Y=Object.keys(te);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(te);$&&(oe=oe.filter(function(De){return Object.getOwnPropertyDescriptor(te,De).enumerable})),Y.push.apply(Y,oe)}return Y}function Es(te){for(var $=1;$<arguments.length;$++){var Y=arguments[$]!=null?arguments[$]:{};$%2?ni(Object(Y),!0).forEach(function(oe){(0,E.A)(te,oe,Y[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(Y)):ni(Object(Y)).forEach(function(oe){Object.defineProperty(te,oe,Object.getOwnPropertyDescriptor(Y,oe))})}return te}var So=function(){return(0,k.A)(function te($){var Y=this,oe=$.roomId,De=$.peerId,rt=$.sdkName,St=$.observabilityJwt,Dt=$.metaData,_t=$.traces;(0,h.A)(this,te),this._traceId=function(){for(var Vt=0;Vt<32;Vt++)Di[Vt]=Math.floor(16*Math.random())+48,Di[Vt]>=58&&(Di[Vt]+=39);return String.fromCharCode.apply(null,Di.slice(0,32))}(),this._rootSpanId=Dr(),this._observabilityJwt=St,this._tracesEnabled=_t.enabled,this._tracesEndpoint=_t.endPoint;var Tn=function(Vt){for(var zn="0123456789abcdefghijklmnopqrstuvwxyz",vn="",Yr=Vt;Yr>0;Yr--)vn+=zn[Math.floor(36*Math.random())];return vn}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.2.14"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:Tn},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(oe,De,rt,Dt),setInterval(function(){Y.processQueue()},4e3))},[{key:"addRootSpan",value:function(te,$,Y,oe){var De={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(te,"_peer_").concat($,"_sdk_").concat(Y),kind:1,startTimeUnixNano:Hi(),endTimeUnixNano:Hi(),attributes:[{key:"roomId",value:{stringValue:te}},{key:"peerId",value:{stringValue:$}},{key:"sdkName",value:{stringValue:Y}},{key:"userId",value:{stringValue:oe.userId}},{key:"email",value:{stringValue:oe.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(De)}},{key:"addSpanToTrace",value:function(te){this._spans.push(te)}},{key:"trace",value:function(te){var $=te.spanName,Y=te.attributes,oe=Y===void 0?{}:Y,De=te.span,rt=De===void 0?void 0:De;if(this._tracesEnabled){var St=Dr(),Dt=Hi(),_t={traceId:this._traceId,spanId:St,parentSpanId:rt||this._rootSpanId,name:$,kind:1,startTimeUnixNano:Dt,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(oe).length>0&&(_t.attributes=Object.entries(oe).map(function(Tn){var Vt=(0,y.A)(Tn,2);return{key:Vt[0],value:{stringValue:Vt[1]}}})),this.addSpanToTrace(_t),St}}},{key:"traceAutoComplete",value:function(te){var $=te.spanName,Y=te.attributes,oe=Y===void 0?{}:Y,De=te.status,rt=De===void 0?1:De,St=te.span,Dt=St===void 0?void 0:St,_t=te.message,Tn=_t===void 0?"SUCCESS":_t;if(this._tracesEnabled){var Vt=Dr(),zn=Hi(),vn=Hi(),Yr={traceId:this._traceId,spanId:Vt,parentSpanId:Dt||this._rootSpanId,name:$,kind:1,startTimeUnixNano:zn,endTimeUnixNano:vn,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:rt,message:Tn}};Object.keys(oe).length>0&&(Yr.attributes=Object.entries(oe).map(function(Fr){var ia=(0,y.A)(Fr,2);return{key:ia[0],value:{stringValue:ia[1]}}})),this.addSpanToTrace(Yr)}}},{key:"completeSpan",value:function(te){var $=te.span,Y=te.status,oe=te.message,De=te.attributes,rt=De===void 0?{}:De;if(this._tracesEnabled){var St=Hi();this._spans=this._spans.map(function(Dt){if(Dt.spanId!==$)return Dt;var _t=Object.entries(rt).map(function(Tn){var Vt=(0,y.A)(Tn,2);return{key:Vt[0],value:{stringValue:Vt[1]}}});return Dt.attributes=Dt.attributes?[].concat((0,b.A)(Dt.attributes),(0,b.A)(_t)):_t,Es(Es({},Dt),{},{status:{code:Y,message:oe},endTimeUnixNano:St})})}}},{key:"processQueue",value:function(){var te=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var $={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,$).then(function(){var Y=(0,f.A)(m().mark(function oe(De){return m().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return te._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],rt.next=1,De.text();case 1:return rt.abrupt("return",rt.sent);case 2:case"end":return rt.stop()}},oe)}));return function(oe){return Y.apply(this,arguments)}}()).then(function(Y){}).catch(function(Y){te._spans=te._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",Y)})}}}])}();function xo(te,$){var Y=Object.keys(te);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(te);$&&(oe=oe.filter(function(De){return Object.getOwnPropertyDescriptor(te,De).enumerable})),Y.push.apply(Y,oe)}return Y}function js(te){for(var $=1;$<arguments.length;$++){var Y=arguments[$]!=null?arguments[$]:{};$%2?xo(Object(Y),!0).forEach(function(oe){(0,E.A)(te,oe,Y[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(Y)):xo(Object(Y)).forEach(function(oe){Object.defineProperty(te,oe,Object.getOwnPropertyDescriptor(Y,oe))})}return te}var on=function(){return(0,k.A)(function $(Y){var oe=Y.roomId,De=Y.peerId,rt=Y.logs,St=Y.observabilityJwt,Dt=Y.deviceInfo,_t=Y.sessionId,Tn=Y.debugMode;(0,h.A)(this,$);var Vt=Dt.browserUserAgent,zn=Dt.deviceUserAgent,vn=Dt.platform;this._peerId=De,this._roomId=oe,this._logs=rt,this._observabilityJwt=St,this._deviceInfo=Dt,this._sessionId=_t,this._debugMode=Tn,this.browserOrDeviceInfo=Vt?{browserName:Vt.browser.name,browserVersion:Vt.browser.version,osName:Vt.os.name,osVersion:Vt.os.version,platform:vn}:zn?js({platform:vn},zn):null},[{key:"pushLogs",value:(te=(0,f.A)(m().mark(function $(Y){var oe,De,rt,St,Dt,_t,Tn,Vt;return m().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:if(oe=Y.logType,De=Y.logText,rt=Y.attributes,St=Y.dashboardLog,Dt=St!==void 0&&St,_t=this._logs,Tn=_t.enabled,Vt=_t.endPoint,!Tn){zn.next=2;break}return zn.next=1,fetch(Vt,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:oe,logText:De,attributes:js(js({},rt),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),debugMode:this._debugMode,dashboardLog:Dt})}).then(function(vn){return vn.json()}).catch(function(vn){return console.log("error",vn),{}});case 1:return zn.abrupt("return",zn.sent);case 2:return zn.abrupt("return",null);case 3:case"end":return zn.stop()}},$,this)})),function($){return te.apply(this,arguments)})}]);var te}(),ve=d(4973),Pt=d(388),$n=d(3954),aa=d(5501),Va=d(3662);function ii(){try{var te=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ii=function(){return!!te})()}function Dc(te){var $=typeof Map=="function"?new Map:void 0;return Dc=function(Y){if(Y===null||!function(De){try{return Function.toString.call(De).indexOf("[native code]")!==-1}catch{return typeof De=="function"}}(Y))return Y;if(typeof Y!="function")throw new TypeError("Super expression must either be null or a function");if($!==void 0){if($.has(Y))return $.get(Y);$.set(Y,oe)}function oe(){return function(De,rt,St){if(ii())return Reflect.construct.apply(null,arguments);var Dt=[null];Dt.push.apply(Dt,rt);var _t=new(De.bind.apply(De,Dt));return St&&(0,Va.A)(_t,St.prototype),_t}(Y,arguments,(0,$n.A)(this).constructor)}return oe.prototype=Object.create(Y.prototype,{constructor:{value:oe,enumerable:!1,writable:!0,configurable:!0}}),(0,Va.A)(oe,Y)},Dc(te)}function Mc(te,$,Y){return $=(0,$n.A)($),(0,Pt.A)(te,kr()?Reflect.construct($,Y||[],(0,$n.A)(te).constructor):$.apply(te,Y))}function kr(){try{var te=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kr=function(){return!!te})()}var Lc,jo=function(te){function $(Y,oe){var De;return(0,h.A)(this,$),De=Mc(this,$,[oe||"an error has occured"]),(0,E.A)(De,"code",void 0),De.name="VideoSdkError",De.code=Y,De}return(0,aa.A)($,te),(0,k.A)($)}(Dc(Error));(function(te){te[te.InvalidKey=0]="InvalidKey",te[te.MissingKey=1]="MissingKey",te[te.InternalError=2]="InternalError"})(Lc||(Lc={}));var no=function(te){function $(Y){var oe;return(0,h.A)(this,$),(oe=Mc(this,$,[21,Y??"device is unsupported"])).name="DeviceUnsupportedError",oe}return(0,aa.A)($,te),(0,k.A)($)}(jo),$s=d(1806),Ss=d(6746),Gs=d(8278);function bc(te,$){return te?$=="audio"?"shareAudio":"share":$}function Ic(te,$){var Y=typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(!Y){if(Array.isArray(te)||(Y=function(_t,Tn){if(_t){if(typeof _t=="string")return ec(_t,Tn);var Vt={}.toString.call(_t).slice(8,-1);return Vt==="Object"&&_t.constructor&&(Vt=_t.constructor.name),Vt==="Map"||Vt==="Set"?Array.from(_t):Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt)?ec(_t,Tn):void 0}}(te))||$){Y&&(te=Y);var oe=0,De=function(){};return{s:De,n:function(){return oe>=te.length?{done:!0}:{done:!1,value:te[oe++]}},e:function(_t){throw _t},f:De}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rt,St=!0,Dt=!1;return{s:function(){Y=Y.call(te)},n:function(){var _t=Y.next();return St=_t.done,_t},e:function(_t){Dt=!0,rt=_t},f:function(){try{St||Y.return==null||Y.return()}finally{if(Dt)throw rt}}}}function ec(te,$){($==null||$>te.length)&&($=te.length);for(var Y=0,oe=Array($);Y<$;Y++)oe[Y]=te[Y];return oe}function Ri(){try{var te=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ri=function(){return!!te})()}var il=function(te){function $(oe){var De,rt,St,Dt;return(0,h.A)(this,$),rt=this,St=$,St=(0,$n.A)(St),(De=(0,Pt.A)(rt,Ri()?Reflect.construct(St,[],(0,$n.A)(rt).constructor):St.apply(rt,Dt))).onWorkerMessage=function(_t){var Tn,Vt=_t.data,zn=Vt.kind,vn=Vt.data;switch(zn){case"error":console.error(vn.error.message),De.emit(Ss.KS.EncryptionError,vn.error);break;case"initAck":vn.enabled&&De.keyProvider.getKeys().forEach(function(Fr){De.postKey(Fr)});break;case"enable":if(vn.enabled&&De.keyProvider.getKeys().forEach(function(Fr){De.postKey(Fr)}),De.encryptionEnabled!==vn.enabled&&vn.participantIdentity===De.room._peerId)De.emit(Ss.KS.ParticipantEncryptionStatusChanged,vn.enabled,De.room.localParticipant),De.encryptionEnabled=vn.enabled;else if(vn.participantIdentity){var Yr=(Tn=De.room)===null||Tn===void 0?void 0:Tn.getParticipantByIdentity(vn.participantIdentity);if(!Yr)throw TypeError("couldn't set encryption status, participant not found".concat(vn.participantIdentity));De.emit(Ss.KS.ParticipantEncryptionStatusChanged,vn.enabled,Yr)}break;case"ratchetKey":De.keyProvider.emit(Ss.fo.KeyRatcheted,vn.material,vn.keyIndex);break;case"e2eeStateChange":De.emit(Ss.KS.E2EEStateChange,vn);break;default:console.log("unknown message kind",_t)}},De.onWorkerError=function(_t){var Tn;console.error("Worker encountered an error:",_t),console.error("Error message:",_t.message),console.error("Error filename:",_t.filename),console.error("Error line number:",_t.lineno),console.error("Error stack:",(Tn=_t.error)===null||Tn===void 0?void 0:Tn.stack)},De.keyProvider=oe.keyProvider,De.worker=oe.worker,De.encryptionEnabled=!1,De}return(0,aa.A)($,te),(0,k.A)($,[{key:"setup",value:function(oe){if(!(0,Gs.Ag)())throw new no("tried to setup end-to-end encryption on an unsupported browser");if(console.info("setting up e2ee"),oe!==this.room){this.room=oe,this.setupEventListeners(oe,this.keyProvider),this.handleE2EEManagerEvents();var De={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};console.log("msg",De),this.worker&&(console.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(De))}}},{key:"setParticipantCryptorEnabled",value:function(oe,De){console.debug("set e2ee to ".concat(oe," for participant ").concat(De)),this.postEnable(oe,De)}},{key:"setSifTrailer",value:function(oe){oe&&oe.length!==0?this.postSifTrailer(oe):console.warn("ignoring server sent trailer as it's empty")}},{key:"setupEventListeners",value:function(oe,De){var rt=this;De.on(Ss.fo.SetKey,function(St){console.log("### keyInfo",St),rt.postKey(St)}).on(Ss.fo.RatchetRequest,function(St,Dt){return rt.postRatchetRequest(St,Dt)})}},{key:"postRatchetRequest",value:function(oe,De){if(!this.worker)throw Error("could not ratchet key, worker is missing");var rt={kind:"ratchetRequest",data:{participantIdentity:oe,keyIndex:De}};this.worker.postMessage(rt)}},{key:"postKey",value:function(oe){var De=oe.key,rt=oe.participantIdentity,St=oe.keyIndex;if(!this.worker)throw Error("could not set key, worker is missing");var Dt={kind:"setKey",data:{participantIdentity:rt,isPublisher:rt===this.room._peerId,key:De,keyIndex:St}};this.worker.postMessage(Dt)}},{key:"postEnable",value:function(oe,De){if(!this.worker)throw new ReferenceError("failed to enable e2ee, worker is not ready");var rt={kind:"enable",data:{enabled:oe,participantIdentity:De}};this.worker.postMessage(rt)}},{key:"postRTPMap",value:function(oe){var De;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((De=this.room)===null||De===void 0)&&De._peerId))throw TypeError("could not post rtp map, local participant identity is missing");var rt={kind:"setRTPMap",data:{map:oe,participantIdentity:this.room._peerId}};this.worker.postMessage(rt)}},{key:"postSifTrailer",value:function(oe){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");var De={kind:"setSifTrailer",data:{trailer:oe}};this.worker.postMessage(De)}},{key:"setupE2EEReceiver",value:function(oe,De){var rt;this.handleReceiver(oe,oe.rtpReceiver,oe.track.id,De,this.extractCodec(oe.rtpParameters.codecs),bc((rt=oe.appData)===null||rt===void 0?void 0:rt.share,oe.kind))}},{key:"setupE2EESender",value:function(oe){var De;oe?this.handleSender(oe.rtpSender,oe.track.id,this.extractCodec(oe.rtpParameters.codecs),bc((De=oe.appData)===null||De===void 0?void 0:De.share,oe.kind),this.room._peerId):console.error("Producer is required to setup E2EE sender")}},{key:"handleReceiver",value:(Y=(0,f.A)(m().mark(function oe(De,rt,St,Dt,_t,Tn){var Vt,zn,vn,Yr,Fr,ia;return m().wrap(function(Qr){for(;;)switch(Qr.prev=Qr.next){case 0:if(this.worker){Qr.next=1;break}return Qr.abrupt("return");case 1:if(!(0,Gs.Wm)()){Qr.next=2;break}Vt={kind:"decode",participantIdentity:Dt,trackId:De.track.id,codec:_t},rt.transform=new RTCRtpScriptTransform(this.worker,Vt),Qr.next=5;break;case 2:if(!($s.$Q in rt)||!_t){Qr.next=3;break}return vn={kind:"updateCodec",data:{trackId:St,codec:_t,participantIdentity:Dt}},this.worker.postMessage(vn),Qr.abrupt("return");case 3:if(Yr=rt.writableStream,Fr=rt.readableStream,Yr&&Fr){Qr.next=4;break}return console.error("no writable or readable stream"),Qr.abrupt("return");case 4:ia={kind:"decode",data:{readableStream:Fr,writableStream:Yr,trackId:St,codec:_t,participantIdentity:Dt,mediaKind:Tn,peerId:(zn=De.appData)===null||zn===void 0?void 0:zn.peerId}},this.worker.postMessage(ia,[Fr,Yr]);case 5:rt[$s.$Q]=!0;case 6:case"end":return Qr.stop()}},oe,this)})),function(oe,De,rt,St,Dt,_t){return Y.apply(this,arguments)})},{key:"handleSender",value:function(oe,De,rt,St,Dt){var _t;if(!($s.$Q in oe)&&this.worker){if(!(!((_t=this.room)===null||_t===void 0)&&_t._peerId)||this.room._peerId==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if((0,Gs.Wm)()){console.info("### initialize script transform");var Tn={kind:"encode",participantIdentity:this.room._peerId,trackId:De,codec:rt,mediaKind:St,peerId:Dt};oe.transform=new RTCRtpScriptTransform(this.worker,Tn)}else try{var Vt=oe.senderStreams;if(Vt){var zn={kind:"encode",data:{readableStream:Vt.readable,writableStream:Vt.writable,codec:rt,trackId:De,participantIdentity:this.room._peerId,mediaKind:St,peerId:Dt}};this.worker.postMessage(zn,[Vt.readable,Vt.writable])}else console.error("Error no sender streams found")}catch(vn){console.log("Error in handle sender ",vn)}oe[$s.$Q]=!0}else console.error("### sender already set up")}},{key:"handleE2EEManagerEvents",value:function(){var oe=this;this.on("NEW_CONSUMER",function(De){var rt=De.consumer,St=De.peerId;console.log("NEW_CONSUMER",rt),oe.setupE2EEReceiver(rt,St)}),this.on("NEW_PRODUCER",function(De){oe.setupE2EESender(De)})}},{key:"extractCodec",value:function(oe){var De,rt=Ic(oe);try{for(rt.s();!(De=rt.n()).done;){var St=De.value,Dt=St.mimeType.split("/")[1].toLowerCase();if(this.kind==="audio"){if($s.Ts.includes(Dt)){St=Dt;break}}else if($s.ue.includes(Dt)){St=Dt;break}}}catch(_t){rt.e(_t)}finally{rt.f()}return""}}]);var Y}(Ai.EventEmitter);function tc(){return nc.apply(this,arguments)}function nc(){return(nc=(0,f.A)(m().mark(function te(){var $,Y,oe,De;return m().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return rt.next=1,fetch("https://cdn.videosdk.live/e2ee/0.0.1/bundle.js");case 1:if(($=rt.sent).ok){rt.next=2;break}throw new Error("Failed to load worker script: ".concat($.statusText));case 2:return rt.next=3,$.text();case 3:return Y=rt.sent,oe=new Blob([Y],{type:"application/javascript"}),De=URL.createObjectURL(oe),rt.abrupt("return",new Worker(De));case 4:case"end":return rt.stop()}},te)}))).apply(this,arguments)}var ro=d(9633);function sl(te,$){var Y=Object.keys(te);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(te);$&&(oe=oe.filter(function(De){return Object.getOwnPropertyDescriptor(te,De).enumerable})),Y.push.apply(Y,oe)}return Y}function xa(te){for(var $=1;$<arguments.length;$++){var Y=arguments[$]!=null?arguments[$]:{};$%2?sl(Object(Y),!0).forEach(function(oe){(0,E.A)(te,oe,Y[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(Y)):sl(Object(Y)).forEach(function(oe){Object.defineProperty(te,oe,Object.getOwnPropertyDescriptor(Y,oe))})}return te}function Ma(te,$){var Y=typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(!Y){if(Array.isArray(te)||(Y=function(_t,Tn){if(_t){if(typeof _t=="string")return jc(_t,Tn);var Vt={}.toString.call(_t).slice(8,-1);return Vt==="Object"&&_t.constructor&&(Vt=_t.constructor.name),Vt==="Map"||Vt==="Set"?Array.from(_t):Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt)?jc(_t,Tn):void 0}}(te))||$){Y&&(te=Y);var oe=0,De=function(){};return{s:De,n:function(){return oe>=te.length?{done:!0}:{done:!1,value:te[oe++]}},e:function(_t){throw _t},f:De}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rt,St=!0,Dt=!1;return{s:function(){Y=Y.call(te)},n:function(){var _t=Y.next();return St=_t.done,_t},e:function(_t){Dt=!0,rt=_t},f:function(){try{St||Y.return==null||Y.return()}finally{if(Dt)throw rt}}}}function jc(te,$){($==null||$>te.length)&&($=te.length);for(var Y=0,oe=Array($);Y<$;Y++)oe[Y]=te[Y];return oe}function Bc(te,$){(function(Y,oe){if(oe.has(Y))throw new TypeError("Cannot initialize the same private elements twice on an object")})(te,$),$.add(te)}var ft,ao={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},Xn={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},rc={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},io=[{scalabilityMode:"S3T3_KEY"}],hi=[{dtx:!0,maxFramerate:30}],fe=new ha("RoomClient"),Cn=new WeakSet,Dn=function(){return(0,k.A)(function ge(J){var re,ae,ie=J.roomId,le=J.peerId,Ne=J.secret,Me=J.displayName,ze=J.device,Et=J.handlerName,kt=J.useSimulcast,Ut=J.forceTcp,mn=J.mode,jt=J.forceH264,an=J.forceVP9,hn=J.svc,Ce=J.datachannel,mt=J.externalVideo,Nt=J.micEnabled,ht=J.webcamEnabled,At=J.maxResolution,Ke=J.useSpartialLayerAnalytics,Mt=J._deviceInfo,rn=J.customCameraVideoTrack,qt=J.customMicrophoneAudioTrack,ln=J.autoConsume,en=J.preferredProtocol,yn=J.signalingBaseUrl,cn=J.metaData,Kt=J.defaultCameraIndex,cr=J.debugMode,er=J.keyProvider;switch((0,h.A)(this,ge),Bc(this,Cn),(0,E.A)(this,"e2eeManager",null),fe.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',ie,le,Me,ze.flag),this.useSpartialLayerAnalytics=Ke||!1,this._deviceInfo=Mt,this._eventEmitter=new Ai.EventEmitter,this._closed=!1,this._displayName=Me,this._device=ze,this._forceTcp=Ut,this._preferredProtocol=en,mn){case Fa.nI.CONFERENCE:case Fa.nI.SEND_AND_RECV:re=!0,ae=!0;break;case Fa.nI.RECV_ONLY:re=!1,ae=!0;break;default:re=!1,ae=!1}if(this._mode=mn,this._produce=re,this._consume=ae,this._useDataChannel=Ce,this._forceH264=!!jt,this._forceVP9=!!an,this._micEnabled=!!Nt,this._webcamEnabled=!!ht,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,mt&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=mt,this._externalVideo.play().catch(function(Ct){return fe.warn("externalVideo.play() failed:%o",Ct)})),this._handlerName=Et,this._useSimulcast=kt,this._socketUrl="",this._secret=Ne,this._peerId=le,this._roomId=ie,this._baseUrl="",this._webSocket=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:At||"hd"},this._pinnedParticipants=new Map,hn&&(io[0].scalabilityMode="".concat(hn,"_KEY")),this.customCameraVideoTrack=rn,this.customMicrophoneAudioTrack=qt,this._autoConsume=ln,this._iceServers=[],this._metrics=new Ws.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=yn||"api.videosdk.live",this._metaData=cn,this._defaultCameraIndex=Kt,this._debugMode=!!cr,this._meetingConnectionState=null,this._sendTransportInternal=null,er){if(!(er instanceof ro.l))throw new Error("keyProvider should be an instance of ExternalE2EEKeyProvider");(function(Ct,En,_r){if(typeof Ct=="function"?Ct===En:Ct.has(En))return arguments.length<3?En:_r;throw new TypeError("Private element is not present on this object")})(Cn,this,Bo).call(this,er)}},[{key:"on",value:function(ge,J){this._eventEmitter.on(ge,J)}},{key:"softClose",value:function(){var ge,J=(ge=this._openTelemetry)===null||ge===void 0?void 0:ge.trace({name:"softClose() Start "});try{var re,ae,ie;this._eventEmitter.emit("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING");var le,Ne=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"Consumer Cleanup",parentSpan:J,attributes:{"videosdk.consumers.count":this._consumers.size||0}}),Me=Ma(this._consumers.values());try{for(Me.s();!(le=Me.n()).done;)le.value.close()}catch(Et){Me.e(Et)}finally{Me.f()}(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:Ne,status:1,message:"Closed ".concat(this._consumers.size," consumers successfully")}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:J,status:1,message:"Soft close completed successfully"})}catch(Et){var ze;(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:J,status:2,message:"Soft close failed: ".concat(Et.message)}),console.error(Et)}}},{key:"close",value:function(ge){var J,re,ae,ie,le,Ne,Me,ze=ge.sendLeft,Et=ze===void 0||ze;if(Et&&((Ne=this._openTelemetry)===null||Ne===void 0||Ne.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1}),(Me=this._videosdkLogs)===null||Me===void 0||Me.pushLogs({logText:"Meeting is in CLOSING State",logType:"INFO"})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._sendTransportInternal&&clearInterval(this._sendTransportInternal),this._sendTransportInternal=null,this._webSocket.close(),this._metrics.running&&this._metrics.stopAllProbes(),fe.debug("close()");var kt=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:kt,status:1,message:"Closed Trasnport"}),ft.dispatch(wn("closed")),Et&&this.emitMeetingStateChange(ws),(ae=this._openTelemetry)===null||ae===void 0||ae.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Meeting is in CLOSED State",logType:"INFO"}),Et&&this._eventEmitter.emit("MEETING_LEFT"),(le=this._openTelemetry)===null||le===void 0||le.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(Vc=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce=this;return m().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.prev=0,mt.next=1,ji({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 1:ie=mt.sent,le=ie.baseUrl,Ne=ie.iceServers,Me=ie.logs,ze=ie.observabilityJwt,Et=ie.traces,kt=ie.metaData,Ut=ie.signalingUrl,mn=ie.socketPath,jt=ie.socketUrl,this._baseUrl=le,this._socketUrl="wss://".concat(jt||this._baseUrl,"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode,"&lib=socket"),this._iceServers=Ne,this._tracesEnabled=Et.enabled,this._openTelemetry=new So((0,E.A)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:Et,logs:Me,observabilityJwt:ze,metaData:kt},"traces",Et)),this._joinSpan=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:Ut||"signalingUrl not specify"}}),this._webSocket=Nr(this._socketUrl,{transports:["websocket"],reconnectionAttempts:10,reconnectionDelay:5e3,reconnection:!0,path:"".concat(mn??"","/socket.io")}),this.emitMeetingStateChange(Da),ft.dispatch(wn("connecting")),(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Meeting is in CONNECTING State",logType:"INFO"}),this._webSocket.on("connect",function(){}),this._webSocket.on("connectionSuccess",function(){var Nt,ht;Ce._isWebsocketAlive=!0,Ce._closed=!1,Ce._mode===(Fa.nI.RECV_ONLY||Fa.nI.SIGNALLING_ONLY)&&Ce.emitMeetingStateChange(Oi),(Nt=Ce._openTelemetry)===null||Nt===void 0||Nt.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:Ce._joinSpan,status:1}),(ht=Ce._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Meeting is in CONNECTED State",logType:"INFO"}),Ce.requestEntry()}),this._webSocket.on("disconnect",function(Nt){var ht,At,Ke,Mt,rn;(ht=Ce._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Meeting is in Websocket Disconnect State",logType:"INFO",attributes:{reason:Nt},dashboardLog:!0}),(Nt==="transport close"||Nt==="transport error")&&(Ce.customMicrophoneAudioTrack&&((At=Ce.customMicrophoneAudioTrack)===null||At===void 0||At.getTracks().forEach(function(qt){qt.stop()}),Ce.customMicrophoneAudioTrack=null),Ce.customCameraVideoTrack&&((Ke=Ce.customCameraVideoTrack)===null||Ke===void 0||Ke.getTracks().forEach(function(qt){qt.stop()}),Ce.customCameraVideoTrack=null),Ce._sendTransport&&((Mt=Ce._sendTransport)===null||Mt===void 0||Mt.close(),Ce._sendTransport=null),Ce._recvTransport&&((rn=Ce._recvTransport)===null||rn===void 0||rn.close(),Ce._recvTransport=null))}),this._webSocket.io.on("reconnect_failed",function(){Ce._closed||Ce.close({sendLeft:!0})}),this._webSocket.on("connect_error",function(Nt){var ht,At,Ke,Mt,rn,qt;Ce._webSocket.active&&Ce._webSocket.io._reconnecting?((ht=Ce._openTelemetry)===null||ht===void 0||ht.traceAutoComplete({spanName:"Meeting is in RECONNECTING State",span:Ce._joinSpan,status:1}),(At=Ce._videosdkLogs)===null||At===void 0||At.pushLogs({logText:"Meeting is in RECONNECTING State",logType:"INFO",attributes:{error:Nt.message}}),ft.dispatch(Wn({type:"error",text:"WebSocket Reconnecting"})),Ce.emitMeetingStateChange(Eo),Ce._sendTransport&&((rn=Ce._sendTransport)===null||rn===void 0||rn.close(),Ce._sendTransport=null),Ce._recvTransport&&((qt=Ce._recvTransport)===null||qt===void 0||qt.close(),Ce._recvTransport=null),(Ke=Ce.customMicrophoneAudioTrack)===null||Ke===void 0||Ke.getTracks().forEach(function(ln){ln.stop()}),Ce.customMicrophoneAudioTrack=null,(Mt=Ce.customCameraVideoTrack)===null||Mt===void 0||Mt.getTracks().forEach(function(ln){ln.stop()}),Ce.customCameraVideoTrack=null):console.log("Error while trying to reconnect",Nt.message)}),this._webSocket.on("close",function(){console.log("MEETING close"),Ce._closed||Ce.close({sendLeft:!0})}),this._webSocket.on("newConsumer",function(){var Nt=(0,f.A)(m().mark(function ht(At,Ke){var Mt,rn,qt,ln,en,yn,cn,Kt,cr,er,Ct,En,_r,Zr,Jr,ka,Aa,Br,W,K,Q,de,Re,be,we,We,ke;return m().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(qt=(Mt=Ce._openTelemetry)===null||Mt===void 0?void 0:Mt.trace({spanName:"Websocket REQ: newConsumer",attributes:{request:JSON.stringify(At)}}),Ce._consume){Oe.next=1;break}return Ke({errorCode:403,message:"I do not want to consume",method:"newConsumer"}),(ln=Ce._openTelemetry)===null||ln===void 0||ln.completeSpan({span:qt,status:2,message:"I do not want to consume"}),Oe.abrupt("return");case 1:return en=At.peerId,yn=At.producerId,cn=At.id,Kt=At.kind,cr=At.rtpParameters,er=At.type,Ct=At.appData,En=At.producerPaused,_r=(rn=Ce._openTelemetry)===null||rn===void 0?void 0:rn.trace({spanName:"Creating Consumer",span:qt}),Oe.prev=2,Oe.next=3,Ce._recvTransport.consume({id:cn,producerId:yn,kind:Kt,rtpParameters:cr,appData:xa(xa({},Ct),{},{peerId:en}),onRtpReceiver:function(Qe){if(Ce.e2eeManager){var $e=Qe.writableStream,Ae=Qe.readableStream;if(!$e||!Ae){var et=Qe.createEncodedStreams();Qe.writableStream=et.writable,$e=et.writable,Qe.readableStream=et.readable,Ae=et.readable}}}});case 3:Br=Oe.sent,W=Er.s$(Br.rtpParameters.encodings[0].scalabilityMode),K=W.spatialLayers,Q=W.temporalLayers,Br.spatialLayers=K,Br.temporalLayers=Q,Br.currentSpatialLayers=K-1,Br.currentTemporalLayers=Q-1,Ce._consumers.set(Br.id,Br),Br.on("transportclose",function(){Ce._consumers.delete(Br.id);var Qe=Ls(Br.id,en);ft.dispatch(Qe),Ce._eventEmitter.emit(Qe.type,Qe.payload)}),(Zr=Ce._openTelemetry)===null||Zr===void 0||Zr.completeSpan({span:_r,status:1,message:"Consumer Created"}),_r=(Jr=Ce._openTelemetry)===null||Jr===void 0?void 0:Jr.trace({spanName:"Sending Stream Enabled Event",span:qt}),de=bs({id:Br.id,type:er,locallyPaused:!1,remotelyPaused:En,rtpParameters:Br.rtpParameters,spatialLayers:K,temporalLayers:Q,currentSpatialLayer:K-1,currentTemporalLayer:Q-1,preferredSpatialLayer:K-1,preferredTemporalLayer:Q-1,priority:1,codec:Br.rtpParameters.codecs[0].mimeType.split("/")[1],track:Br.track,appData:Ct,instance:Br},en),ft.dispatch(de),Ce._eventEmitter.emit(de.type,de.payload),Ke(),Br.kind==="video"&&ft.getState().me.audioOnly&&Ce._pauseConsumer(Br),(ka=Ce._openTelemetry)===null||ka===void 0||ka.completeSpan({span:_r,status:1,message:"Event Send Successfully"}),(Aa=Ce._openTelemetry)===null||Aa===void 0||Aa.completeSpan({span:qt,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":Br.id}}),Br.kind=="video"&&Br.appData.share&&((Re=Ce._openTelemetry)===null||Re===void 0||Re.traceAutoComplete({spanName:"Presenter Changed",span:qt,attributes:{"peer.id":en}})),Ce.e2eeManager&&Ce.e2eeManager.emit("NEW_CONSUMER",{consumer:Br,peerId:Ce._peerId}),Oe.next=5;break;case 4:throw Oe.prev=4,ke=Oe.catch(2),(be=Ce._openTelemetry)===null||be===void 0||be.completeSpan({span:_r,status:2,message:"Error creating a Consumer: ".concat(ke)}),(we=Ce._openTelemetry)===null||we===void 0||we.completeSpan({span:qt,status:2,message:"Error creating a Consumer: ".concat(ke)}),ft.dispatch(Wn({type:"error",text:"Error creating a Consumer: ".concat(ke)})),(We=Ce._videosdkLogs)===null||We===void 0||We.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:ke.message}}),ke;case 5:case"end":return Oe.stop()}},ht,null,[[2,4]])}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("newDataConsumer",function(){var Nt=(0,f.A)(m().mark(function ht(At,Ke){var Mt,rn,qt,ln,en,yn,cn,Kt,cr;return m().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:if(Ce._consume){er.next=1;break}return Ke({errorCode:403,message:"I do not want to data consume",method:"newConsumer"}),er.abrupt("return");case 1:if(Ce._useDataChannel){er.next=2;break}return Ke({errorCode:403,message:"I do not want DataChannels",method:"newConsumer"}),er.abrupt("return");case 2:return Mt=At.peerId,rn=At.dataProducerId,qt=At.id,ln=At.sctpStreamParameters,en=At.label,yn=At.protocol,cn=At.appData,er.prev=3,er.next=4,Ce._recvTransport.consumeData({id:qt,dataProducerId:rn,sctpStreamParameters:ln,label:en,protocol:yn,appData:xa(xa({},cn),{},{peerId:Mt})});case 4:Kt=er.sent,Ce._dataConsumers.set(Kt.id,Kt),Kt.on("transportclose",function(){Ce._dataConsumers.delete(Kt.id)}),Kt.on("open",function(){fe.debug('DataConsumer "open" event')}),Kt.on("close",function(){fe.warn('DataConsumer "close" event'),Ce._dataConsumers.delete(Kt.id),ft.dispatch(Wn({type:"error",text:"DataConsumer closed"}))}),Kt.on("error",function(Ct){fe.error('DataConsumer "error" event:%o',Ct),ft.dispatch(Wn({type:"error",text:"DataConsumer error: ".concat(Ct)}))}),Kt.on("message",function(Ct){if(fe.debug('DataConsumer "message" event [streamId:%d]',Kt.sctpStreamParameters.streamId),Ct instanceof ArrayBuffer){var En=new DataView(Ct).getUint32();return En==Math.pow(2,32)-1?(fe.warn("dataChannelTest finished!"),void(Ce._nextDataChannelTestNumber=0)):(En>Ce._nextDataChannelTestNumber&&fe.warn("dataChannelTest: %s packets missing",En-Ce._nextDataChannelTestNumber),void(Ce._nextDataChannelTestNumber=En+1))}if(typeof Ct=="string")switch(Kt.label){case"chat":var _r=ft.getState().peers,Zr=Object.keys(_r).map(function(Jr){return _r[Jr]}).find(function(Jr){return Jr.dataConsumers.includes(Kt.id)});if(!Zr){fe.warn('DataConsumer "message" from unknown peer');break}ft.dispatch(Wn({title:"".concat(Zr.displayName," says:"),text:Ct,timeout:5e3})),Ce._eventEmitter.emit("CHAT_MESSAGE",{text:Ct,senderId:Zr.id,timestamp:new Date().getTime()});break;case"bot":ft.dispatch(Wn({title:"Message from Bot:",text:Ct,timeout:5e3}))}else fe.warn('ignoring DataConsumer "message" (not a string)')}),ft.dispatch(ta({id:Kt.id,sctpStreamParameters:Kt.sctpStreamParameters,label:Kt.label,protocol:Kt.protocol},Mt)),Ke(),er.next=6;break;case 5:er.prev=5,cr=er.catch(3),fe.error('"newDataConsumer" request failed:%o',cr),ft.dispatch(Wn({type:"error",text:"Error creating a DataConsumer: ".concat(cr)}));case 6:case"end":return er.stop()}},ht,null,[[3,5]])}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("enableMic",function(){var Nt=(0,f.A)(m().mark(function ht(At,Ke){var Mt,rn,qt;return m().wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:try{rn=At.peerId,(Mt=Ce._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Websocket REQ: enableMic for ".concat(rn),status:1}),Ce._eventEmitter.emit("MIC_REQUESTED",{peerId:rn}),Ke()}catch(en){fe.error('"enableMic" request failed:%o',en),(qt=Ce._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:en.message}}),Ce._emitError({code:3027,message:en.message})}case 1:case"end":return ln.stop()}},ht)}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("disableMic",function(){var Nt=(0,f.A)(m().mark(function ht(At,Ke){var Mt,rn,qt,ln,en,yn;return m().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return cn.prev=0,Mt=(rn=Ce._openTelemetry)===null||rn===void 0?void 0:rn.trace({spanName:"Websocket REQ: disableMic"}),cn.next=1,Ce.disableMic(!1,Mt);case 1:(qt=Ce._openTelemetry)===null||qt===void 0||qt.completeSpan({span:Mt,status:1,message:"Request Completed"}),Ke(),cn.next=3;break;case 2:cn.prev=2,yn=cn.catch(0),(ln=Ce._openTelemetry)===null||ln===void 0||ln.completeSpan({span:Mt,status:2,message:"disableMic request failed ".concat(yn)}),(en=Ce._videosdkLogs)===null||en===void 0||en.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:yn.message}}),Ce._emitError({code:3028,message:yn.message});case 3:case"end":return cn.stop()}},ht,null,[[0,2]])}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("enableWebcam",function(){var Nt=(0,f.A)(m().mark(function ht(At,Ke){var Mt,rn,qt;return m().wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:try{rn=At.peerId,(Mt=Ce._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Websocket REQ: enableWebcam for ".concat(rn),status:1}),Ce._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:rn}),Ke()}catch(en){fe.error('"enableWebcam" request failed:%o',en),(qt=Ce._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:en.message}}),Ce._emitError({code:3029,message:en.message})}case 1:case"end":return ln.stop()}},ht)}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("disableWebcam",function(){var Nt=(0,f.A)(m().mark(function ht(At,Ke){var Mt,rn,qt,ln,en,yn;return m().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return cn.prev=0,Mt=(rn=Ce._openTelemetry)===null||rn===void 0?void 0:rn.trace({spanName:"Websocket REQ: disableWebcam"}),cn.next=1,Ce.disableWebcam(Mt);case 1:(qt=Ce._openTelemetry)===null||qt===void 0||qt.completeSpan({span:Mt,status:1,message:"Request Completed"}),Ke(),cn.next=3;break;case 2:cn.prev=2,yn=cn.catch(0),(ln=Ce._openTelemetry)===null||ln===void 0||ln.completeSpan({span:Mt,status:2,message:"disableWebcam request failed ".concat(yn)}),(en=Ce._videosdkLogs)===null||en===void 0||en.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:yn.message}}),Ce._emitError({code:3030,message:yn.message});case 3:case"end":return cn.stop()}},ht,null,[[0,2]])}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("pinStateChanged",function(){var Nt=(0,f.A)(m().mark(function ht(At,Ke){var Mt,rn,qt,ln,en,yn,cn,Kt,cr,er;return m().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:Ct.prev=0,ln=At.peerId,en=At.state,yn=At.pinnedBy,Mt=(rn=Ce._openTelemetry)===null||rn===void 0?void 0:rn.trace({spanName:"Websocket REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:ln,state:en,pinnedBy:yn})}}),Ce._pinnedParticipants.has(ln)||Ce._pinnedParticipants.set(ln,{cam:!1,share:!1}),cn=Ce._pinnedParticipants.get(ln),en.cam!=null&&(cn.cam=en.cam),en.share!=null&&(cn.share=en.share),Ce._pinnedParticipants.set(ln,cn),Ce._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:ln,state:en,pinnedBy:yn}),cn.share==0&&cn.cam==0&&Ce._pinnedParticipants.delete(ln),(qt=Ce._openTelemetry)===null||qt===void 0||qt.completeSpan({span:Mt,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(Ce._pinnedParticipants)}}),Ke(),Ct.next=2;break;case 1:throw Ct.prev=1,er=Ct.catch(0),(Kt=Ce._openTelemetry)===null||Kt===void 0||Kt.completeSpan({span:Mt,status:2,message:"pinStateChanged request failed"}),(cr=Ce._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:er.message}}),er;case 2:case"end":return Ct.stop()}},ht,null,[[0,1]])}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("switchRoom",function(){var Nt=(0,f.A)(m().mark(function ht(At,Ke){return m().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:Ce._eventEmitter.emit("SWITCH_ROOM",At),Ke();case 1:case"end":return Mt.stop()}},ht)}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("statsData",function(){var Nt=(0,f.A)(m().mark(function ht(At,Ke){return m().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:Ke({peerId:Ce._peerId,statsData:Ce._stats}),Ce._stats={};case 1:case"end":return Mt.stop()}},ht)}));return function(ht,At){return Nt.apply(this,arguments)}}()),this._webSocket.on("notification",function(){var Nt=(0,f.A)(m().mark(function ht(At){var Ke,Mt,rn,qt,ln,en,yn,cn,Kt,cr,er,Ct,En,_r,Zr,Jr,ka,Aa,Br,W,K,Q,de,Re,be,we,We,ke,Oe,Qe,$e,Ae,et,ue,he,Le,Ze,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn,nn,un,Qn,xr,_n,dn,br,ur,Gn,In,gn,Mr,fa,Ci,fs,ol,ou,Il,qc,cu,lu,Ju,uu,Xu,ed,jl,td,du,Bl,pu,mu,ap,hu,nd,rd,fu,ad,id,ip,sp,sd,cl,gu,pr;return m().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:Ke=At,fe.debug('proto "notification" event [method:%s, data:%o]',At.method,Ke),pr=At.method,Fn.next=pr==="error"?1:pr==="participantMediaStateChanged"?2:pr==="producerScore"?3:pr==="entryRequested"?4:pr==="entryResponded"?5:pr==="newPeer"?8:pr==="peerClosed"?9:pr==="peerDisplayNameChanged"?10:pr==="consumerClosed"?11:pr==="consumerPaused"?13:pr==="consumerResumed"?15:pr==="consumerLayersChanged"?17:pr==="consumerScore"?19:pr==="dataConsumerClosed"?20:pr==="activeSpeaker"?22:pr==="consumerResumedSubManager"?23:pr==="consumerPausedSubManager"?24:pr==="transcriptionStateChanged"?25:pr==="transcriptionText"?26:pr==="recordingStateChanged"?27:pr==="recordingStarted"?28:pr==="recordingStopped"?29:pr==="livestreamStateChanged"?30:pr==="livestreamStarted"?31:pr==="livestreamStopped"?32:pr==="hlsStateChanged"?33:pr==="hlsPlayableStateChanged"?34:pr==="hlsStarted"?35:pr==="hlsStopped"?36:pr==="whiteboardStarted"?37:pr==="whiteboardStopped"?38:pr==="addCharacter"?39:pr==="removeCharacter"?40:pr==="characterStateChanged"?41:pr==="characterMessage"?42:pr==="userMessage"?43:pr==="characterData"?44:pr==="characterError"?45:pr==="videoStatusChanged"?46:pr==="videoSeeked"?47:pr==="connectionOpen"?48:pr==="connectionClose"?49:pr==="connectionChatMessage"?50:pr==="connectionParticipantJoined"?51:pr==="connectionParticipantLeft"?52:pr==="pubsubMessage"?53:pr==="peerModeChanged"?54:pr==="restartIce"?55:pr==="mediaRelayStarted"?56:pr==="mediaRelayStopped"?57:pr==="mediaRelayError"?58:pr==="mediaRelayRequestResponse"?59:pr==="mediaRelayRequestReceived"?60:61;break;case 1:return qt=Ke,Ce._eventEmitter.emit("ERROR",qt),(Mt=Ce._videosdkLogs)===null||Mt===void 0||Mt.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:qt.message}}),(rn=Ce._openTelemetry)===null||rn===void 0||rn.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:qt.message},status:2}),Fn.abrupt("continue",62);case 2:try{ln=Ke.peerId,en=Ke.kind,yn=Ke.newState,Ce._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:ln,kind:en,newState:yn}),en=="video"&&((cn=Ce._openTelemetry)===null||cn===void 0||cn.traceAutoComplete({spanName:"".concat(ln," has ").concat(yn?"enable":"disable"," ").concat(en),status:1}))}catch(ll){fe.error('"newProducer" request failed:%o',ll),(Kt=Ce._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:ll.message}})}case 3:return cr=Ke.producerId,er=Ke.score,ft.dispatch(pi(cr,er)),Fn.abrupt("continue",62);case 4:return En=Ke.id,_r=Ke.name,Zr=(Ct=Ce._openTelemetry)===null||Ct===void 0?void 0:Ct.trace({spanName:"Websocket Noti: entryRequested",span:Ce._joinSpan,attributes:{data:JSON.stringify({id:En,name:_r})}}),En!==Ce._peerId?(Ce._eventEmitter.emit("ENTRY_REQUESTED",{id:En,name:_r}),(Jr=Ce._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:Zr,status:1,message:"EntryResponded Recieved"})):(ka=Ce._openTelemetry)===null||ka===void 0||ka.completeSpan({span:Zr,status:2,message:"Entry Request Failed"}),Fn.abrupt("continue",62);case 5:if(W=Ke.id,K=Ke.decision,Q=Ke.sessionId,de=Ke.switchingRoomId,Re=(Aa=Ce._openTelemetry)===null||Aa===void 0?void 0:Aa.trace({name:"Entry Response Handling",attributes:{"peer.id":W,"entry.decision":K,switching_room:!!de}}),W===Ce._peerId&&K==="allowed"){Fn.next=6;break}return(be=Ce._openTelemetry)===null||be===void 0||be.completeSpan({span:Ce._joinSpan,status:2,message:"Join Request Denied"}),(we=Ce._openTelemetry)===null||we===void 0||we.completeSpan({span:Re,status:2,message:"Entry denied for peer"}),Fn.abrupt("continue",62);case 6:if(Ce._eventEmitter.emit("ENTRY_RESPONDED",{id:W,decision:K}),!de){Fn.next=7;break}return(We=Ce._openTelemetry)===null||We===void 0||We.completeSpan({span:Re,status:1,message:"Switching room initiated"}),Ce.softClose(),Ce.switchingRoom(de),Fn.abrupt("continue",62);case 7:return Ce._videosdkLogs=new on({roomId:Ce._roomId,peerId:Ce._peerId,logs:Me,observabilityJwt:ze,deviceInfo:Ce._deviceInfo,sessionId:Q,debugMode:Ce._debugMode}),Ce.joinRoom(),(Br=Ce._openTelemetry)===null||Br===void 0||Br.completeSpan({span:Re,status:1,message:"Entry response handled successfully"}),Fn.abrupt("continue",62);case 8:Oe=mi(xa(xa({},ke=Ke),{},{consumers:[],dataConsumers:[]})),ft.dispatch(Oe),Ce._eventEmitter.emit(Oe.type,Oe.payload),ft.dispatch(Wn({text:"".concat(ke.displayName," has joined the room")}));try{(Qe=Ce._openTelemetry)===null||Qe===void 0||Qe.traceAutoComplete({spanName:"Websocket Noti: newPeer ".concat(ke.displayName),attributes:{peerData:JSON.stringify(ke)}})}catch(ll){($e=Ce._videosdkLogs)===null||$e===void 0||$e.pushLogs({logText:"Error Websocket Noti: newPeer",logType:"ERROR",attributes:{error:ll.message}}),console.error(ll)}return Fn.abrupt("continue",62);case 9:return et=Ke.peerId,ue=to(et),ft.dispatch(ue),Ce._eventEmitter.emit(ue.type,ue.payload),(Ae=Ce._openTelemetry)===null||Ae===void 0||Ae.traceAutoComplete({spanName:"Websocket Noti: peerClosed for ".concat(et)}),Fn.abrupt("continue",62);case 10:return he=Ke.peerId,Le=Ke.displayName,Ze=Ke.oldDisplayName,ft.dispatch(Zs(Le,he)),ft.dispatch(Wn({text:"".concat(Ze," is now ").concat(Le)})),Fn.abrupt("continue",62);case 11:if(Jt=Ke.consumerId,vt=Ce._consumers.get(Jt)){Fn.next=12;break}return Fn.abrupt("continue",62);case 12:return vt.close(),Ce._consumers.delete(Jt),Rt=vt.appData.peerId,xn=Ls(Jt,Rt),Ce._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"ended",peerId:Rt,streamId:vt._track.id}),ft.dispatch(xn),Ce._eventEmitter.emit(xn.type,xn.payload),(tt=Ce._openTelemetry)===null||tt===void 0||tt.traceAutoComplete({spanName:"Websocket Noti: consumerClosed for id ".concat(Jt),attributes:{consumerData:JSON.stringify(vt)}}),Fn.abrupt("continue",62);case 13:if(ct=Ke.consumerId,Ue=Ce._consumers.get(ct)){Fn.next=14;break}return Fn.abrupt("continue",62);case 14:return Ue.pause(),ft.dispatch(ls(ct,"remote")),Ce._eventEmitter.emit("CONSUMER_PAUSED",{consumerId:ct,peerId:Ue.appData.peerId}),Fn.abrupt("continue",62);case 15:if(yt=Ke.consumerId,fn=Ce._consumers.get(yt),Ce._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"active",peerId:fn.appData.peerId,streamId:fn._track.id}),fn){Fn.next=16;break}return Fn.abrupt("continue",62);case 16:return fn.resume(),ft.dispatch(Ji(yt,"remote")),Ce._eventEmitter.emit("CONSUMER_RESUMED",{consumerId:yt,peerId:fn.appData.peerId}),Fn.abrupt("continue",62);case 17:if(un=Ke.consumerId,Qn=Ke.spatialLayer,xr=Ke.temporalLayer,(_n=Ce._consumers.get(un)).currentSpatialLayer=Qn,_n.currentTemporalLayer=xr,_n){Fn.next=18;break}return Fn.abrupt("continue",62);case 18:return((nn=_n.appData)===null||nn===void 0||(nn=nn.encodings)===null||nn===void 0?void 0:nn.length)>1&&Ce._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:_n.appData.peerId,prevQuality:_n.spatialLayers-1-_n.currentSpatialLayer==0?"HIGH":_n.spatialLayers-1-_n.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:_n.spatialLayers-1-Qn==0?"HIGH":_n.spatialLayers-1-Qn==1?"MEDIUM":"LOW"}),_n.currentSpatialLayer=Qn,_n.currentTemporalLayer=xr,ft.dispatch(us(un,Qn,xr)),Fn.abrupt("continue",62);case 19:return dn=Ke.consumerId,br=Ke.score,ft.dispatch(xi(dn,br)),Fn.abrupt("continue",62);case 20:if(ur=Ke.dataConsumerId,Gn=Ce._dataConsumers.get(ur)){Fn.next=21;break}return Fn.abrupt("continue",62);case 21:return Gn.close(),Ce._dataConsumers.delete(ur),In=Gn.appData.peerId,ft.dispatch(Bi(ur,In)),Fn.abrupt("continue",62);case 22:return gn=Ke.peerId,Mr=On(gn),ft.dispatch(Mr),Ce._eventEmitter.emit(Mr.type,Mr.payload),Fn.abrupt("continue",62);case 23:return Ce._eventEmitter.emit("SUB_MANAGER_RESUMED",Ke),Fn.abrupt("continue",62);case 24:return Ce._eventEmitter.emit("SUB_MANAGER_PAUSED",Ke),Fn.abrupt("continue",62);case 25:return Ce._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",Ke),(fa=Ce._openTelemetry)===null||fa===void 0||fa.traceAutoComplete({spanName:"Emitted TRANSCRIPTION_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Fn.abrupt("continue",62);case 26:return Ce._eventEmitter.emit("TRANSCRIPTION_TEXT",Ke),Fn.abrupt("continue",62);case 27:return Ce._eventEmitter.emit("RECORDING_STATE_CHANGED",Ke),(Ci=Ce._openTelemetry)===null||Ci===void 0||Ci.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Fn.abrupt("continue",62);case 28:return Ce._eventEmitter.emit("RECORDING_STARTED",{}),Fn.abrupt("continue",62);case 29:return Ce._eventEmitter.emit("RECORDING_STOPPED",{}),Fn.abrupt("continue",62);case 30:return Ce._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",Ke),(fs=Ce._openTelemetry)===null||fs===void 0||fs.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Fn.abrupt("continue",62);case 31:return Ce._eventEmitter.emit("LIVESTREAM_STARTED",{}),Fn.abrupt("continue",62);case 32:return Ce._eventEmitter.emit("LIVESTREAM_STOPPED",{}),Fn.abrupt("continue",62);case 33:return Ce._eventEmitter.emit("HLS_STATE_CHANGED",Ke),(ol=Ce._openTelemetry)===null||ol===void 0||ol.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Fn.abrupt("continue",62);case 34:return Ke.isPlayable&&(Ce._eventEmitter.emit("HLS_STATE_CHANGED",xa(xa({},Ke),{},{status:Xo.V.HLS_PLAYABLE})),(ou=Ce._openTelemetry)===null||ou===void 0||ou.traceAutoComplete({spanName:"Websocket Noti: hlsPlayableStateChanged",status:1})),Fn.abrupt("continue",62);case 35:return Il=Ke.downstreamUrl,Ce._eventEmitter.emit("HLS_STARTED",Il),Fn.abrupt("continue",62);case 36:return Ce._eventEmitter.emit("HLS_STOPPED",{}),Fn.abrupt("continue",62);case 37:return qc=Ke.state,cu=Ke.url,qc?Ce._eventEmitter.emit("WHITEBOARD_STARTED",{state:qc}):cu&&Ce._eventEmitter.emit("WHITEBOARD_STARTED",{url:cu}),Fn.abrupt("continue",62);case 38:return Ce._eventEmitter.emit("WHITEBOARD_STOPPED",{}),Fn.abrupt("continue",62);case 39:return Ju=mi(xa(xa({},Ke),{},{consumers:[],dataConsumers:[]})),ft.dispatch(Ju),Ce._eventEmitter.emit("ADD_CHARACTER",Ke),(lu=Ce._openTelemetry)===null||lu===void 0||lu.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(Ke),attributes:{data:JSON.stringify(Ke)},status:1}),Fn.abrupt("continue",62);case 40:return Xu=Ke.id,ed=to(Xu),ft.dispatch(ed),Ce._eventEmitter.emit("REMOVE_CHARACTER",Ke),(uu=Ce._openTelemetry)===null||uu===void 0||uu.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(Ke),attributes:{data:JSON.stringify(Ke)},status:1}),Fn.abrupt("continue",62);case 41:return Ce._eventEmitter.emit("CHARACTER_STATE_CHANGED",Ke),(jl=Ce._openTelemetry)===null||jl===void 0||jl.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(Ke.status),attributes:{data:JSON.stringify(Ke)},status:1}),Fn.abrupt("continue",62);case 42:return Ce._eventEmitter.emit("CHARACTER_MESSAGE",Ke),Fn.abrupt("continue",62);case 43:return Ce._eventEmitter.emit("USER_MESSAGE",Ke),Fn.abrupt("continue",62);case 44:return Ce._eventEmitter.emit("CHARACTER_DATA",Ke),Fn.abrupt("continue",62);case 45:return Ce._eventEmitter.emit("CHARACTER_ERROR",Ke),Fn.abrupt("continue",62);case 46:return Ce._eventEmitter.emit("VIDEO_STATE_CHANGED",Ke),Fn.abrupt("continue",62);case 47:return td=Ke.currentTime,Ce._eventEmitter.emit("VIDEO_SEEKED",{currentTime:td}),Fn.abrupt("continue",62);case 48:return Ce._eventEmitter.emit("CONNECTION_OPEN",Ke),Fn.abrupt("continue",62);case 49:return Ce._eventEmitter.emit("CONNECTION_CLOSE",Ke),Fn.abrupt("continue",62);case 50:return Ce._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",Ke),Fn.abrupt("continue",62);case 51:return Ce._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",Ke),Fn.abrupt("continue",62);case 52:return Ce._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",Ke),Fn.abrupt("continue",62);case 53:return Ce._eventEmitter.emit("PUBSUB_MESSAGE",Ke),Fn.abrupt("continue",62);case 54:return Ce._eventEmitter.emit("PEER_MODE_CHANGED",Ke),(du=Ce._openTelemetry)===null||du===void 0||du.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(Ke)},status:1}),Fn.abrupt("continue",62);case 55:return pu=Ke.transportId,mu=Ke.iceParameters,ap=(Bl=Ce._openTelemetry)===null||Bl===void 0?void 0:Bl.trace({spanName:"Websocket Noti: restartIce for transportId :".concat(pu),attributes:{iceParameters:JSON.stringify(mu)}}),Ce.handleRemoteRestartIce({transportId:pu,iceParameters:mu,internalSpan:ap}),Fn.abrupt("continue",62);case 56:return hu=At.meetingId,Ce._eventEmitter.emit("MEDIA_RELAY_STARTED",{meetingId:hu}),Fn.abrupt("continue",62);case 57:return nd=At.meetingId,rd=At.reason,Ce._eventEmitter.emit("MEDIA_RELAY_STOPPED",{meetingId:nd,reason:rd}),Fn.abrupt("continue",62);case 58:return fu=At.meetingId,ad=At.reason,Ce._eventEmitter.emit("MEDIA_RELAY_ERROR",{meetingId:fu,reason:ad}),Fn.abrupt("continue",62);case 59:return id=At.decision,ip=At.decidedBy,sp=At.meetingId,Ce._eventEmitter.emit("MEDIA_RELAY_REQUEST_RESPONSE",{decision:id,decidedBy:ip,meetingId:sp}),Fn.abrupt("continue",62);case 60:return sd=At.peerId,cl=At.meetingId,gu=At.displayName,Ce._eventEmitter.emit("MEDIA_RELAY_REQUEST_RECEIVED",{peerId:sd,meetingId:cl,displayName:gu}),Fn.abrupt("continue",62);case 61:fe.error('unknown Websocket notification.method "%s"',At.method);case 62:case"end":return Fn.stop()}},ht)}));return function(ht){return Nt.apply(this,arguments)}}()),mt.next=3;break;case 2:mt.prev=2,hn=mt.catch(0),(an=this._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error initializing the meeting :: ".concat(hn),logType:"ERROR",attributes:{error:hn}}),this.emitMeetingStateChange(ti);case 3:case"end":return mt.stop()}},ge,this,[[0,2]])})),function(){return Vc.apply(this,arguments)})},{key:"requestEntry",value:(su=(0,f.A)(m().mark(function ge(){var J,re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ae=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"Requesting Entry",span:this._joinSpan}),ie.next=1,this._socketRequest("requestEntry",{name:this._displayName});case 1:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"Entry Requested Successfully"});case 2:case"end":return ie.stop()}},ge,this)})),function(){return su.apply(this,arguments)})},{key:"respondEntry",value:(Ll=(0,f.A)(m().mark(function ge(J,re){var ae,ie,le;return m().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return le=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"Responding Entry",attributes:{peerId:J,decision:re},span:this._joinSpan}),Ne.next=1,this._socketRequest("respondEntry",{id:J,decision:re});case 1:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({message:"Entry Responded Successfully",span:le,status:1});case 2:case"end":return Ne.stop()}},ge,this)})),function(ge,J){return Ll.apply(this,arguments)})},{key:"startTranscription",value:(Ml=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me;return m().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return fe.debug("startTranscription()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"startTranscription() Start",attributes:{config:J?JSON.stringify(J):"config Not Specify"}}),ze.prev=1,ze.next=2,this._socketRequest("startTranscription",{config:J});case 2:ze.next=4;break;case 3:ze.prev=3,Me=ze.catch(1),fe.error("startTranscription() | failed:%o",Me),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"startTranscription() failed"}),(Ne=this._videosdkLogs)===null||Ne===void 0||Ne.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:Me.message}}),this._emitError({code:4031,message:Me.message});case 4:(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"startTranscription() End"});case 5:case"end":return ze.stop()}},ge,this,[[1,3]])})),function(ge){return Ml.apply(this,arguments)})},{key:"stopTranscription",value:(lc=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne;return m().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return fe.debug("stopTranscription()"),ae=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"stopTranscription() Start"}),Me.prev=1,Me.next=2,this._socketRequest("stopTranscription",{});case 2:Me.next=4;break;case 3:Me.prev=3,Ne=Me.catch(1),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"stopTranscription() failed"}),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:Ne.message}}),this._emitError({code:4032,message:Ne.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopTranscription() End"});case 5:case"end":return Me.stop()}},ge,this,[[1,3]])})),function(){return lc.apply(this,arguments)})},{key:"pauseAllConsumers",value:(Go=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn;return m().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"pauseAllConsumers() Start",attributes:{kind:J||"Kind not specified"}}),jt.prev=1,jt.next=2,this._socketRequest("pauseAllConsumers",{kind:J===void 0?"all":J});case 2:if(Ne=jt.sent,Me=!1,!((Ne==null||(le=Ne.consumersWithIssues)===null||le===void 0?void 0:le.length)>0)){jt.next=4;break}return jt.next=3,this._socketRequest("pauseAllConsumers",{kind:J===void 0?"all":J});case 3:((Et=jt.sent)==null||(ze=Et.consumersWithIssues)===null||ze===void 0?void 0:ze.length)===0&&(Me=!0),jt.next=5;break;case 4:Me=!0;case 5:Me&&this._eventEmitter.emit("ALL_CONSUMERS_PAUSED",{kind:J}),jt.next=7;break;case 6:jt.prev=6,mn=jt.catch(1),fe.error("pauseAllConsumers() | failed:%o",mn),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:ie,status:2,message:"pauseAllConsumers() failed"}),(Ut=this._videosdkLogs)===null||Ut===void 0||Ut.pushLogs({logText:"Error pauseAllConsumers() failed",logType:"ERROR",attributes:{error:mn.message}});case 7:(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"pauseAllConsumers() End"});case 8:case"end":return jt.stop()}},ge,this,[[1,6]])})),function(ge){return Go.apply(this,arguments)})},{key:"resumeAllConsumers",value:(Ga=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn;return m().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"resumeAllConsumers() Start",attributes:{kind:J||"Kind not specified"}}),jt.prev=1,jt.next=2,this._socketRequest("resumeAllConsumers",{kind:J===void 0?"all":J});case 2:if(Ne=jt.sent,Me=!1,!((Ne==null||(le=Ne.consumersWithIssues)===null||le===void 0?void 0:le.length)>0)){jt.next=4;break}return jt.next=3,this._socketRequest("resumeAllConsumers",{kind:J===void 0?"all":J});case 3:((Et=jt.sent)==null||(ze=Et.consumersWithIssues)===null||ze===void 0?void 0:ze.length)===0&&(Me=!0),jt.next=5;break;case 4:Me=!0;case 5:Me&&this._eventEmitter.emit("ALL_CONSUMERS_RESUMED",{kind:J}),jt.next=7;break;case 6:jt.prev=6,mn=jt.catch(1),fe.error("resumeAllConsumers() | failed:%o",mn),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:ie,status:2,message:"resumeAllConsumers() failed"}),(Ut=this._videosdkLogs)===null||Ut===void 0||Ut.pushLogs({logText:"Error resumeAllConsumers() failed",logType:"ERROR",attributes:{error:mn.message}});case 7:(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"resumeAllConsumers() End"});case 8:case"end":return jt.stop()}},ge,this,[[1,6]])})),function(ge){return Ga.apply(this,arguments)})},{key:"startRecording",value:($o=(0,f.A)(m().mark(function ge(J,re,ae,ie){var le,Ne,Me,ze,Et,kt;return m().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return fe.debug("startRecording()"),Me=(le=this._openTelemetry)===null||le===void 0?void 0:le.trace({spanName:"startRecording() Start",attributes:{webhookUrl:J||"webhookUrl Not Specify",awsDirPath:re||"awsDirPath Not Specify",config:ae?JSON.stringify(ae):"config Not Specify",transcription:ie?JSON.stringify(ie):"transcription Not Specify"}}),Ut.prev=1,Ut.next=2,this._socketRequest("startRecording",{webhookUrl:J,awsDirPath:re,config:ae,transcription:ie});case 2:Ut.next=4;break;case 3:Ut.prev=3,kt=Ut.catch(1),fe.error("startRecording() | failed:%o",kt),(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:Me,status:2,message:"startRecording() failed"}),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:kt.message}}),this._emitError({code:4011,message:kt.message});case 4:(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:Me,status:1,message:"startRecording() End"});case 5:case"end":return Ut.stop()}},ge,this,[[1,3]])})),function(ge,J,re,ae){return $o.apply(this,arguments)})},{key:"stopRecording",value:(Wo=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne;return m().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(!this._closed){Me.next=1;break}return Me.abrupt("return");case 1:return fe.debug("stopRecording()"),ae=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"stopRecording() Start"}),Me.prev=2,Me.next=3,this._socketRequest("stopRecording",{});case 3:Me.next=5;break;case 4:Me.prev=4,Ne=Me.catch(2),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"stopRecording() failed"}),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:Ne.message}}),this._emitError({code:4012,message:Ne.message});case 5:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopRecording() End"});case 6:case"end":return Me.stop()}},ge,this,[[2,4]])})),function(){return Wo.apply(this,arguments)})},{key:"startLivestream",value:(Zo=(0,f.A)(m().mark(function ge(J,re){var ae,ie,le,Ne,Me,ze;return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return fe.debug("startLivestream()"),le=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"startLivestream() Start",attributes:{outputs:J?JSON.stringify(J):"outputs Not Specify",config:re?JSON.stringify(re):"config Not Specify"}}),Et.prev=1,Et.next=2,this._socketRequest("startLivestream",{outputs:J,config:re});case 2:Et.next=4;break;case 3:Et.prev=3,ze=Et.catch(1),(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:le,status:1,message:"startLivestream() End"}),(Me=this._videosdkLogs)===null||Me===void 0||Me.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:ze.message}}),this._emitError({code:4013,message:ze.message});case 4:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:le,status:1,message:"startLivestream() End"});case 5:case"end":return Et.stop()}},ge,this,[[1,3]])})),function(ge,J){return Zo.apply(this,arguments)})},{key:"stopLivestream",value:(oi=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne;return m().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return fe.debug("stopLivestream()"),ae=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"stopLivestream() Start"}),Me.prev=1,Me.next=2,this._socketRequest("stopLivestream",{});case 2:Me.next=4;break;case 3:Me.prev=3,Ne=Me.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:Ne.message}}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:4014,message:Ne.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopLivestream() End"});case 5:case"end":return Me.stop()}},ge,this,[[1,3]])})),function(){return oi.apply(this,arguments)})},{key:"startHls",value:(Fc=(0,f.A)(m().mark(function ge(J,re){var ae,ie,le,Ne,Me,ze;return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return J=J||{},re=re||{},fe.debug("startHls()"),le=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"startHls() Start",attributes:{config:J?JSON.stringify(J):"config Not Specify",transcription:re?JSON.stringify(re):"transcription Not Specify"}}),Et.prev=1,Et.next=2,this._socketRequest("startHls",{config:J,transcription:re});case 2:Et.next=4;break;case 3:Et.prev=3,ze=Et.catch(1),(Ne=this._videosdkLogs)===null||Ne===void 0||Ne.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:ze.message}}),(Me=this._openTelemetry)===null||Me===void 0||Me.completeSpan({span:le,status:2,message:"Error startHls() failed"}),this._emitError({code:4016,message:ze.message}),fe.error("startHls() | failed:%o",ze);case 4:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:le,status:1,message:"startHlsSpan() End"});case 5:case"end":return Et.stop()}},ge,this,[[1,3]])})),function(ge,J){return Fc.apply(this,arguments)})},{key:"stopHls",value:(Dl=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne;return m().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return fe.debug("stopHls()"),ae=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"stopHls() Start"}),Me.prev=1,Me.next=2,this._socketRequest("stopHls",{});case 2:Me.next=4;break;case 3:Me.prev=3,Ne=Me.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:Ne.message}}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"Error stopHls() failed"}),this._emitError({code:4017,message:Ne.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopHls() End"});case 5:case"end":return Me.stop()}},ge,this,[[1,3]])})),function(){return Dl.apply(this,arguments)})},{key:"startWhiteboard",value:(Ol=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le;return m().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return fe.debug("startWhiteboard()"),ae=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"startWhiteboard() Start"}),Ne.prev=1,Ne.next=2,this._socketRequest("startWhiteboard",{version:"v2"});case 2:Ne.next=4;break;case 3:Ne.prev=3,le=Ne.catch(1),fe.error("startWhiteboard() | failed:%o",le),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"Error startWhiteboard() failed"}),this._emitError({code:3021,message:le.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"startWhiteboard() End"});case 5:case"end":return Ne.stop()}},ge,this,[[1,3]])})),function(){return Ol.apply(this,arguments)})},{key:"stopWhiteboard",value:(Al=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le;return m().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return fe.debug("stopWhiteboard()"),ae=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"stopWhiteboard() Start"}),Ne.prev=1,Ne.next=2,this._socketRequest("stopWhiteboard",{});case 2:Ne.next=4;break;case 3:Ne.prev=3,le=Ne.catch(1),fe.error("stopWhiteboard() | failed:%o",le),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"Error stopWhiteboard() failed"}),this._emitError({code:3022,message:le.message});case 4:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"stopWhiteboard() End"});case 5:case"end":return Ne.stop()}},ge,this,[[1,3]])})),function(){return Al.apply(this,arguments)})},{key:"joinCharacter",value:(Hc=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me;return m().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return fe.debug("joinCharacter()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"joinCharacter() Start",attributes:{config:J?JSON.stringify(J):"config Not Specify"}}),ze.prev=1,ze.next=2,this._socketRequest("joinCharacter",{config:J});case 2:return ze.abrupt("return",ze.sent);case 3:return ze.prev=3,Me=ze.catch(1),fe.error("joinCharacter() | failed:%o",Me),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"joinCharacter() failed"}),(Ne=this._videosdkLogs)===null||Ne===void 0||Ne.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:Me.message}}),this._emitError({code:4033,message:Me.message}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"joinCharacter() End"}),ze.abrupt("return",!1);case 4:case"end":return ze.stop()}},ge,this,[[1,3]])})),function(ge){return Hc.apply(this,arguments)})},{key:"switchTo",value:(si=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me,ze,Et,kt;return m().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return ae=J.meetingId,ie=J.participantId,le=J.token,Ne=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"switchTo() Start",attributes:{"peer.id":ie,meetingId:ae}}),Ut.prev=1,Ut.next=2,this._socketRequest("switchToMeeting",{meetingId:ae,participantId:ie,secret:le||this._secret});case 2:(Me=this._openTelemetry)===null||Me===void 0||Me.completeSpan({span:Ne,status:1,message:"switchTo() Success"}),Ut.next=4;break;case 3:Ut.prev=3,kt=Ut.catch(1),(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:Ne,status:2,message:"switchTo() failed"}),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error switchTo() failed",logType:"ERROR",attributes:{error:kt.message}});case 4:case"end":return Ut.stop()}},ge,this,[[1,3]])})),function(ge){return si.apply(this,arguments)})},{key:"removeCharacter",value:(hs=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me;return m().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return fe.debug("removeCharacter()"),ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"removeCharacter() Start"}),ze.prev=1,ze.next=2,this._socketRequest("leaveCharacter",{config:J});case 2:ze.next=4;break;case 3:return ze.prev=3,Me=ze.catch(1),fe.error("removeCharacter() | failed:%o",Me),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"removeCharacter() failed"}),(Ne=this._videosdkLogs)===null||Ne===void 0||Ne.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:Me.message}}),this._emitError({code:4034,message:Me.message}),ze.abrupt("return",!1);case 4:return(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"removeCharacter() End"}),ze.abrupt("return",!0);case 5:case"end":return ze.stop()}},ge,this,[[1,3]])})),function(ge){return hs.apply(this,arguments)})},{key:"sendCharacterMessage",value:(Ec=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return re=J.interactionId,ae=J.text,fe.debug("sendCharacterMessage()"),le.prev=1,le.next=2,this._socketRequest("sendCharacterMessage",{interactionId:re,text:ae});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),fe.error("sendCharacterMessage() | failed:%o",ie),this._emitError({code:4035,message:ie.message});case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return Ec.apply(this,arguments)})},{key:"interruptCharacter",value:(ho=(0,f.A)(m().mark(function ge(J){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=J.interactionId,fe.debug("interruptCharacter()"),ie.prev=1,ie.next=2,this._socketRequest("interruptCharacter",{interactionId:re});case 2:ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("interruptCharacter() | failed:%o",ae),this._emitError({code:4036,message:ae.message});case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return ho.apply(this,arguments)})},{key:"pinStateChange",value:(cc=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne;return m().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return ae=J.peerId,ie=J.state,(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Pin state Change for ".concat(ae),attributes:{state:ie?JSON.stringify(ie):null},status:1}),Me.prev=1,Me.next=2,this._socketRequest("pinStateChanged",{peerId:ae,state:ie});case 2:Me.next=4;break;case 3:Me.prev=3,Ne=Me.catch(1),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:Ne.message}}),fe.error("pinStateChange() | failed");case 4:case"end":return Me.stop()}},ge,this,[[1,3]])})),function(ge){return cc.apply(this,arguments)})},{key:"startVideo",value:(qo=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le;return m().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return ae=J.link,fe.debug("startVideo()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),Ne.prev=1,Ne.next=2,this._socketRequest("startVideo",{link:ae});case 2:Ne.next=4;break;case 3:Ne.prev=3,le=Ne.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:le.message}}),fe.error("startVideo() | failed:%o",le),this._emitError({code:3023,message:le.message});case 4:case"end":return Ne.stop()}},ge,this,[[1,3]])})),function(ge){return qo.apply(this,arguments)})},{key:"stopVideo",value:(qa=(0,f.A)(m().mark(function ge(){var J,re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return fe.debug("stopVideo()"),(J=this._videosdkLogs)===null||J===void 0||J.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),ie.prev=1,ie.next=2,this._socketRequest("stopVideo",{});case 2:ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:ae.message}}),fe.error("stopVideo() | failed:%o",ae),this._emitError({code:3024,message:ae.message});case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return qa.apply(this,arguments)})},{key:"pauseVideo",value:(Xs=(0,f.A)(m().mark(function ge(J){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return fe.debug("pauseVideo()"),ae.prev=1,ae.next=2,this._socketRequest("pauseVideo",{currentTime:J});case 2:ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),fe.error("pauseVideo() | failed:%o",re),this._emitError({code:3025,message:re.message});case 4:case"end":return ae.stop()}},ge,this,[[1,3]])})),function(ge){return Xs.apply(this,arguments)})},{key:"resumeVideo",value:(Hs=(0,f.A)(m().mark(function ge(){var J;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return fe.debug("resumeVideo()"),re.prev=1,re.next=2,this._socketRequest("resumeVideo",{});case 2:re.next=4;break;case 3:re.prev=3,J=re.catch(1),fe.error("resumeVideo() | failed:%o",J),this._emitError({code:3026,message:J.message});case 4:case"end":return re.stop()}},ge,this,[[1,3]])})),function(){return Hs.apply(this,arguments)})},{key:"seekVideo",value:(ns=(0,f.A)(m().mark(function ge(J){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return fe.debug("seekVideo()"),ae.prev=1,ae.next=2,this._socketRequest("seekVideo",{currentTime:J});case 2:ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),fe.error("seekVideo() | failed:%o",re),this._emitError({code:3031,message:re.message});case 4:case"end":return ae.stop()}},ge,this,[[1,3]])})),function(ge){return ns.apply(this,arguments)})},{key:"enablePeerMic",value:(La=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Enabling peer ".concat(J," Mic"),status:1}),fe.debug("enablePeerMic()"),le.prev=1,le.next=2,this._socketRequest("enablePeerMic",{peerId:J});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("enablePeerMic() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return La.apply(this,arguments)})},{key:"requestMediaRelay",value:(ms=(0,f.A)(m().mark(function ge(J,re,ae){var ie,le;return m().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.prev=0,Ne.next=1,this._socketRequest("mediaRelayRequestSent",{meetingId:J,secret:re??this._secret,kinds:ae??["audio","video","share","share_audio"]});case 1:Ne.next=3;break;case 2:Ne.prev=2,le=Ne.catch(0),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error relayRequest() failed",logType:"ERROR",attributes:{error:le.message}});case 3:case"end":return Ne.stop()}},ge,this,[[0,2]])})),function(ge,J,re){return ms.apply(this,arguments)})},{key:"handleRelayRequestResponse",value:(oc=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne;return m().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return re=J.decision,ae=J.peerId,ie=J.meetingId,Me.prev=1,Me.next=2,this._socketRequest("respondToMediaRelayRequest",{decision:re,decidedBy:this._peerId,peerId:ae,meetingId:ie});case 2:Me.next=4;break;case 3:Me.prev=3,Ne=Me.catch(1),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error respondToMediaRelayRequest() failed",logType:"ERROR",attributes:{error:Ne.message}});case 4:case"end":return Me.stop()}},ge,this,[[1,3]])})),function(ge){return oc.apply(this,arguments)})},{key:"stopMediaRelay",value:(Us=(0,f.A)(m().mark(function ge(J){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=1,this._socketRequest("mediaRelayRequestStop",{meetingId:J});case 1:ie.next=3;break;case 2:ie.prev=2,ae=ie.catch(0),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopMediaRelay() failed",logType:"ERROR",attributes:{error:ae.message}});case 3:case"end":return ie.stop()}},ge,this,[[0,2]])})),function(ge){return Us.apply(this,arguments)})},{key:"enableRelayMedia",value:(mo=(0,f.A)(m().mark(function ge(J,re){var ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.prev=0,le.next=1,this._socketRequest("enableRelayMedia",{meetingId:J,kind:re});case 1:le.next=3;break;case 2:le.prev=2,ie=le.catch(0),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error enableRelayMedia() failed",logType:"ERROR",attributes:{error:ie.message}});case 3:case"end":return le.stop()}},ge,this,[[0,2]])})),function(ge,J){return mo.apply(this,arguments)})},{key:"disableRelayMedia",value:(Uc=(0,f.A)(m().mark(function ge(J,re){var ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.prev=0,le.next=1,this._socketRequest("disableRelayMedia",{meetingId:J,kind:re});case 1:le.next=3;break;case 2:le.prev=2,ie=le.catch(0),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error disableRelayMedia() failed",logType:"ERROR",attributes:{error:ie.message}});case 3:case"end":return le.stop()}},ge,this,[[0,2]])})),function(ge,J){return Uc.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(Vo=(0,f.A)(m().mark(function ge(){var J,re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.prev=0,ae.next=1,this._socketRequest("enableAdaptiveSubscription");case 1:ae.next=3;break;case 2:ae.prev=2,re=ae.catch(0),(J=this._videosdkLogs)===null||J===void 0||J.pushLogs({logText:"Error enableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:re.message}});case 3:case"end":return ae.stop()}},ge,this,[[0,2]])})),function(){return Vo.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(yi=(0,f.A)(m().mark(function ge(){var J,re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.prev=0,ae.next=1,this._socketRequest("disableAdaptiveSubscription");case 1:ae.next=3;break;case 2:ae.prev=2,re=ae.catch(0),(J=this._videosdkLogs)===null||J===void 0||J.pushLogs({logText:"Error disableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:re.message}});case 3:case"end":return ae.stop()}},ge,this,[[0,2]])})),function(){return yi.apply(this,arguments)})},{key:"disablePeerMic",value:(Ja=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Disabling peer ".concat(J," Mic"),status:1}),fe.debug("disablePeerMic()"),le.prev=1,le.next=2,this._socketRequest("disablePeerMic",{peerId:J});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("disablePeerMic() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return Ja.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(Na=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return fe.debug("consumeWebcamStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:J}}),le.prev=2,le.next=3,this._socketRequest("consumeVideoStreams",{peerId:J});case 3:le.next=5;break;case 4:le.prev=4,ie=le.catch(2),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("consumeWebcamStreams() | failed:%o",ie);case 5:case"end":return le.stop()}},ge,this,[[2,4]])})),function(ge){return Na.apply(this,arguments)})},{key:"consumeMicStreams",value:(va=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return fe.debug("consumeMicStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:J}}),le.prev=1,le.next=2,this._socketRequest("consumeAudioStreams",{peerId:J});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("consumeMicStreams() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return va.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(Sr=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return fe.debug("stopConsumingAudioStreams()"),le.prev=2,le.next=3,this._socketRequest("stopConsumingAudioStreams",{peerId:J});case 3:(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:J}}),le.next=5;break;case 4:le.prev=4,ie=le.catch(2),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("stopConsumingMicStreams() | failed:%o",ie);case 5:case"end":return le.stop()}},ge,this,[[2,4]])})),function(ge){return Sr.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(Yn=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return fe.debug("stopConsumingWebcamStreams()"),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:J}}),le.prev=1,le.next=2,this._socketRequest("stopConsumingVideoStreams",{peerId:J});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("stopConsumingWebcamStreams() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return Yn.apply(this,arguments)})},{key:"changeMode",value:(Un=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt,Nt,ht,At=this;return m().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeMode() Calling with mode: ".concat(J)}),ie=this._mode,Ke.prev=1,ie!==J){Ke.next=2;break}throw(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"changeMode() Ending"}),(Ne=this._videosdkLogs)===null||Ne===void 0||Ne.pushLogs({logText:"You are already in ".concat(J," mode"),logType:"INFO"}),new Error("You are already in ".concat(J," mode"));case 2:if(Me=function(){var Mt=(0,f.A)(m().mark(function rn(qt,ln){return m().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:return en.next=1,At._socketRequest("createWebRtcTransport",{preferredProtocol:At._preferredProtocol,producing:qt,consuming:ln,sctpCapabilities:At._useDataChannel?At._mediasoupDevice.sctpCapabilities:void 0});case 1:return en.abrupt("return",en.sent);case 2:case"end":return en.stop()}},rn)}));return function(rn,qt){return Mt.apply(this,arguments)}}(),!(0,Fa.kR)(J)){Ke.next=10;break}return this._consume=!0,this._produce=!0,this._mode=J,this._mediasoupDevice=new Er.pF({handlerName:this._handlerName}),Ke.next=3,this._socketRequest("getRouterRtpCapabilities");case 3:return Et=Ke.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(Et.headerExtensions=(kt=Et.headerExtensions)===null||kt===void 0?void 0:kt.filter(function(Mt){return Mt.uri!="urn:3gpp:video-orientation"})),Ke.next=4,this._mediasoupDevice.load({routerRtpCapabilities:Et});case 4:if(!this._produce){Ke.next=6;break}return Ke.next=5,Me(!0,!1);case 5:Ut=Ke.sent,this.createProducerTransport(Ut,ae);case 6:if(ie===Fa.nI.RECV_ONLY||!this._consume){Ke.next=8;break}return Ke.next=7,Me(!1,!0);case 7:mn=Ke.sent,this.createConsumerTransport(mn,ae);case 8:return(ze=this._openTelemetry)===null||ze===void 0||ze.traceAutoComplete({spanName:"Sending changeMode request to server",span:ae,status:1}),Ke.next=9,this._socketRequest("changeMode",{mode:J});case 9:this._produce&&(ft.dispatch(hr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),this._webcamEnabled&&this.enableWebcam(this.customCameraVideoTrack,ae)),window.SHOW_INFO&&(jt=ft.getState(),an=jt.me,ft.dispatch(Ir(an.id))),Ke.next=17;break;case 10:if(!(0,Fa.kR)(ie)||J!==Fa.nI.RECV_ONLY){Ke.next=12;break}return this._produce=!1,this._mode=J,this._closeProducersAndTransport(),Ke.next=11,this._socketRequest("changeMode",{mode:J});case 11:Ke.next=17;break;case 12:if(!(0,Fa.wZ)(ie)||J!==Fa.nI.RECV_ONLY){Ke.next=15;break}return this._consume=!0,this._mode=J,Ke.next=13,this._setupWebrtcTransport(ae);case 13:return Ke.next=14,this._socketRequest("changeMode",{mode:J});case 14:window.SHOW_INFO&&(hn=ft.getState(),Ce=hn.me,ft.dispatch(Ir(Ce.id))),Ke.next=17;break;case 15:if(!(0,Fa.wZ)(J)){Ke.next=17;break}return Ke.next=16,this._socketRequest("changeMode",{mode:J});case 16:this._consume=!1,this._produce=!1,this._mode=J,this._dataConsumers.clear(),this._closeTransports();case 17:Ke.next=19;break;case 18:Ke.prev=18,ht=Ke.catch(1),(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:"Error changeMode(".concat(J,") | failed"),logType:"ERROR",attributes:{error:ht.message}}),(Nt=this._openTelemetry)===null||Nt===void 0||Nt.completeSpan({span:ae,status:2,message:"changeMode(".concat(J,") | failed")});case 19:case"end":return Ke.stop()}},ge,this,[[1,18]])})),function(ge){return Un.apply(this,arguments)})},{key:"_closeProducersAndTransport",value:function(){var ge;this._webcamProducer&&(this._webcamProducer.close(),this._webcamProducer=null),this._micProducer&&(this._micProducer.close(),this._micProducer=null),this._shareProducer&&(this._shareProducer.close(),this._shareProducer=null),this._shareAudioProducer&&(this._shareAudioProducer.close(),this._shareAudioProducer=null),(ge=this._sendTransport)===null||ge===void 0||ge.close(),this._sendTransport=null}},{key:"_closeTransports",value:function(){var ge,J;this._sendTransport&&((ge=this._sendTransport)===null||ge===void 0||ge.close(),this._sendTransport=null),this._recvTransport&&((J=this._recvTransport)===null||J===void 0||J.close(),this._recvTransport=null)}},{key:"_setupWebrtcTransport",value:(Mn=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return this._mediasoupDevice=new Er.pF({handlerName:this._handlerName}),le.next=1,this._socketRequest("getRouterRtpCapabilities");case 1:return re=le.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(re.headerExtensions=(ae=re.headerExtensions)===null||ae===void 0?void 0:ae.filter(function(Ne){return Ne.uri!="urn:3gpp:video-orientation"})),le.next=2,this._mediasoupDevice.load({routerRtpCapabilities:re});case 2:return le.next=3,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 3:ie=le.sent,this.createConsumerTransport(ie,J);case 4:case"end":return le.stop()}},ge,this)})),function(ge){return Mn.apply(this,arguments)})},{key:"enablePeerWebcam",value:(Gt=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Enabling peer ".concat(J," Webcam"),status:1}),fe.debug("enablePeerWebcam()"),le.prev=1,le.next=2,this._socketRequest("enablePeerWebcam",{peerId:J});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("enablePeerWebcam() | failed:%o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return Gt.apply(this,arguments)})},{key:"disablePeerWebcam",value:(dt=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Disabling peer ".concat(J," Webcam"),status:1}),fe.debug("disablePeerWebcam()"),le.prev=1,le.next=2,this._socketRequest("disablePeerWebcam",{peerId:J});case 2:le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:ie.message}});case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return dt.apply(this,arguments)})},{key:"getMicStats",value:function(ge){var J=this;if(this._micProducer){var re=0;ge.onStatsCollected=function(ae){var ie;J._stats.producerStats||(J._stats.producerStats={}),J._stats.producerStats.audio||(J._stats.producerStats.audio=[]),J._micProducer&&(J._latestStats[(ie=J._micProducer)===null||ie===void 0?void 0:ie.id]=[]),ae.audio.forEach(function(le){var Ne;J._micProducer&&J._latestStats[(Ne=J._micProducer)===null||Ne===void 0?void 0:Ne.id].push(le)}),re%5==0&&J._micProducer!=null&&J._stats.producerStats.audio.push(xa({timestamp:new Date},J._latestStats[J._micProducer.id]?J._latestStats[J._micProducer.id][0]:{})),re++}}}},{key:"enableMic",value:(st=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt,Nt,ht,At,Ke,Mt,rn,qt,ln,en,yn,cn,Kt,cr,er,Ct,En,_r,Zr,Jr,ka,Aa,Br,W,K,Q,de,Re,be,we,We,ke,Oe,Qe,$e,Ae,et,ue,he,Le,Ze,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn,nn,un,Qn,xr,_n,dn,br,ur,Gn=this,In=arguments;return m().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:if(Ne=In.length>0&&In[0]!==void 0?In[0]:void 0,Me=In.length>1&&In[1]!==void 0?In[1]:void 0,ze=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"enableMic() Calling ".concat(Ne?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:Ne?JSON.stringify(Ne):"Not Specify Custom Track"},span:Me||null}),fe.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){gn.next=4;break}if(Ut=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Mic Producer found",span:ze}),Ne&&((mn=this._openTelemetry)===null||mn===void 0||mn.traceAutoComplete({spanName:"Stopping customAudioTrack",span:ze,status:1}),Ne.getTracks().forEach(function(Mr){Mr.stop()})),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:Ut,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),jt=this._micProducer,!this._sendTransport){gn.next=2;break}return gn.next=1,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions,appData:{isEncrypted:this.isE2EEEnabled},onRtpSender:function(Mr){Gn.e2eeManager&&(Mr.senderStreams=Mr.createEncodedStreams())}});case 1:this._micProducer=gn.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),this._micProducer?(hn=ja({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:jt._appData.encodings,codecOptions:jt._appData.codecOptions,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),ft.dispatch(hn),this._eventEmitter.emit(hn.type,hn.payload),(an=this._openTelemetry)===null||an===void 0||an.completeSpan({span:ze,status:1,message:"Enable Mic Successful"})):(Ce=this._openTelemetry)===null||Ce===void 0||Ce.completeSpan({span:ze,status:2,message:"Error in enableMic() :: micProducer null"}),gn.next=3;break;case 2:return(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),gn.abrupt("return");case 3:return Nt=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this._micProducer.observer.on("pause",function(){Nt?.stop(),Gn._latestStats[Gn._micProducer.id]=[],Gn._metrics.removeExistingProbe(Nt)}),this._micProducer.observer.on("close",function(){Nt?.stop(),Gn._latestStats[Gn._micProducer.id]=[],Gn._metrics.removeExistingProbe(Nt)}),this.getMicStats(Nt),Nt.start(),gn.abrupt("return");case 4:if(!this._mediasoupDevice){gn.next=6;break}if(this._mediasoupDevice.canProduce("audio")){gn.next=5;break}return Ke=this._deviceInfo.sdkType=="react-native"?lr.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:lr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:Ke,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),fe.error("enableMic() | cannot produce audio"),(At=this._openTelemetry)===null||At===void 0||At.completeSpan({span:ze,status:2,message:"Error in enableMic() :: ".concat(Ke)}),gn.abrupt("return");case 5:gn.next=7;break;case 6:return(Mt=this._videosdkLogs)===null||Mt===void 0||Mt.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:ze,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),gn.abrupt("return");case 7:if(gn.prev=7,this._externalVideo){gn.next=24;break}return fe.debug("enableMic() | calling getUserMedia()"),gn.next=8,this._updateMics(ze);case 8:if(this._mic.device){gn.next=9;break}throw new Error("Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).");case 9:try{Ne&&(qt=Ne.getAudioTracks()[0]).readyState=="ended"&&(qt=null,Ct=lr.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(er=this._videosdkLogs)===null||er===void 0||er.pushLogs({logText:Ct.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Ct))}catch(Mr){_r=lr.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(En=this._videosdkLogs)===null||En===void 0||En.pushLogs({logText:_r.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(_r),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(Mr))}if(qt){gn.next=23;break}return ka=(Zr=this._openTelemetry)===null||Zr===void 0?void 0:Zr.trace({spanName:"Creating Track",span:ze}),gn.prev=10,gn.next=11,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 11:Aa=gn.sent,gn.next=22;break;case 12:if(gn.prev=12,dn=gn.catch(10),(Br=this._openTelemetry)===null||Br===void 0||Br.completeSpan({message:"Error in enableMic() :: ".concat(dn.message),span:ka,status:2}),dn.name!=="SecurityError"){gn.next=13;break}Q=lr.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,de=Q.message,this._emitError(Q),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:de,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(de),span:ze,status:2}),gn.next=21;break;case 13:if(dn.name!=="DOMException"){gn.next=14;break}we=lr.q.ERROR_RN_MIC_NOT_FOUND,We=we.message,this._emitError(we),(Re=this._videosdkLogs)===null||Re===void 0||Re.pushLogs({logText:We,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(be=this._openTelemetry)===null||be===void 0||be.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(We),span:ze,status:2}),gn.next=21;break;case 14:if(!(dn instanceof DOMException)){gn.next=20;break}br=dn.name,gn.next=br==="NotAllowedError"?15:br==="NotReadableError"?16:br==="NotFoundError"?17:18;break;case 15:return ke=this.handleNotAllowedError(dn,this._openTelemetry,this._videosdkLogs,ze,"audio"),this._emitError(ke),gn.abrupt("continue",19);case 16:return Oe=this.handleNotReadableError(dn,this._openTelemetry,this._videosdkLogs,ze,"audio"),this._emitError(Oe),gn.abrupt("continue",19);case 17:return Qe=lr.q.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Qe=lr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),$e=Qe.message,this._emitError(Qe),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:$e,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat($e),span:ze,status:2}),gn.abrupt("continue",19);case 18:return Ae="An error occurred in creating audio track, ".concat(dn.message),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:dn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ae)},dashboardLog:!0}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Error in enableMic() :: ".concat(Ae),span:ze,status:2}),gn.abrupt("continue",19);case 19:gn.next=21;break;case 20:he="An error occurred in creating audio track, ".concat(dn.message),(et=this._videosdkLogs)===null||et===void 0||et.pushLogs({logText:dn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(he)},dashboardLog:!0}),(ue=this._openTelemetry)===null||ue===void 0||ue.completeSpan({message:"Error in enableMic() :: ".concat(he),span:ze,status:2});case 21:return gn.abrupt("return");case 22:qt=Aa.getAudioTracks()[0],(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({message:"Audio Track Generated",span:ka,status:1});case 23:gn.next=26;break;case 24:return gn.next=25,this._getExternalVideoStream();case 25:Le=gn.sent,qt=Le.getAudioTracks()[0].clone();case 26:if(ln=(en=this._openTelemetry)===null||en===void 0?void 0:en.trace({spanName:"Generating Producer Configuration",span:ze}),Ze={opusStereo:1,opusDtx:1},Ne&&(tt=Ne.encoderConfig?Ui.$.audioProfiles[Ne.encoderConfig]:Ui.$.audioProfiles.speech_standard,Ze={opusStereo:tt.stereo?1:0,opusFec:tt.fec?1:0,opusDtx:tt.dtx?1:0,opusMaxPlaybackRate:tt.maxPlaybackRate,opusPtime:tt.packetTime}),vt={encodings:Jt=[{networkPriority:"high"}],codecOptions:Ze},(yn=this._openTelemetry)===null||yn===void 0||yn.traceAutoComplete({spanName:"Generated AppData",span:ln,attributes:{appData:JSON.stringify(vt)},status:1}),(cn=this._openTelemetry)===null||cn===void 0||cn.completeSpan({span:ln,status:1,message:"Producer Configuration Generated"}),ln=(Kt=this._openTelemetry)===null||Kt===void 0?void 0:Kt.trace({spanName:"Creating Mic Producer",span:ze}),(cr=qt)===null||cr===void 0||cr.addEventListener("ended",function(){console.log("Track Ended Error");try{var Mr,fa,Ci=Gn._deviceInfo.sdkType=="react-native"?lr.q.ERROR_RN_MIC_TRACK_ENDED:lr.q.ERROR_MICROPHONE_TRACK_ENDED;(Mr=Gn._videosdkLogs)===null||Mr===void 0||Mr.pushLogs({logText:Ci.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(Ci.message)},dashboardLog:!0}),(fa=Gn._openTelemetry)===null||fa===void 0||fa.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:ze,message:Ci.message,status:2}),ft.dispatch(Wn({type:"error",text:"Microphone disconnected!"})),Gn.disableMic(!0,ze).catch(function(){})}catch(fs){console.error(fs)}}),!this._sendTransport){gn.next=28;break}return gn.next=27,this._sendTransport.produce({track:qt,encodings:Jt,codecOptions:Ze,appData:xa(xa({},vt),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(Mr){Gn.e2eeManager&&(Mr.senderStreams=Mr.createEncodedStreams())}});case 27:this._micProducer=gn.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),gn.next=29;break;case 28:return(Rt=this._videosdkLogs)===null||Rt===void 0||Rt.pushLogs({logText:lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),gn.abrupt("return");case 29:this._micProducer?(qt.getConstraints().deviceId&&(this._mic.device=this._mics.get(qt.getConstraints().deviceId)),Ue=ja({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Jt,codecOptions:Ze,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),ft.dispatch(Ue),this._eventEmitter.emit(Ue.type,Ue.payload),(yt=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"})).start(),this.getMicStats(yt),this._micProducer.on("transportclose",function(){var Mr,fa=Ba(Gn._micProducer.id);ft.dispatch(fa),Gn._eventEmitter.emit(fa.type,fa.payload),(Mr=Gn._micProducer)===null||Mr===void 0||Mr.close(),Gn._micProducer=null}),this._micProducer.observer.on("pause",function(){yt?.stop(),Gn._latestStats[Gn._micProducer.id]=[],Gn._metrics.removeExistingProbe(yt)}),this._micProducer.observer.on("close",function(){yt?.stop(),Gn._latestStats[Gn._micProducer.id]=[],Gn._metrics.removeExistingProbe(yt)}),this._micProducer.on("trackended",function(){var Mr,fa,Ci=Gn._deviceInfo.sdkType=="react-native"?lr.q.ERROR_RN_MIC_TRACK_ENDED:lr.q.ERROR_MICROPHONE_TRACK_ENDED;(Mr=Gn._videosdkLogs)===null||Mr===void 0||Mr.pushLogs({logText:Ci.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ci.message)},dashboardLog:!0}),(fa=Gn._openTelemetry)===null||fa===void 0||fa.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:ze,message:Ci.message,status:2}),ft.dispatch(Wn({type:"error",text:"Microphone disconnected!"})),Gn.disableMic(!0,ze).catch(function(){})}),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:ln,status:1,message:"Mic Producer Created"}),(ct=this._openTelemetry)===null||ct===void 0||ct.completeSpan({span:ze,status:1,message:"Enable Mic Successful"})):((fn=this._videosdkLogs)===null||fn===void 0||fn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:ln,status:2,message:"Error in enableMic() :: micProducer null"}),(un=this._openTelemetry)===null||un===void 0||un.completeSpan({span:ze,status:2,message:"Error in enableMic() :: micProducer null"})),gn.next=32;break;case 30:return gn.prev=30,ur=gn.catch(7),(Qn=this._openTelemetry)===null||Qn===void 0||Qn.completeSpan({span:ln,status:2,message:"Error in enableMic() :: occurred in creating mic producer, ".concat(ur.message)}),(xr=this._openTelemetry)===null||xr===void 0||xr.completeSpan({span:ze,status:2,message:"Error in enableMic :: ".concat(ur.message)}),(_n=this._videosdkLogs)===null||_n===void 0||_n.pushLogs({logText:ur.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(ur.message)},dashboardLog:!0}),fe.error("enableMic() | failed:%o",ur),ft.dispatch(Wn({type:"error",text:"Error enabling microphone: ".concat(ur)})),gn.next=31,this._socketRequest("produceError",{mediaType:"audio",message:ur.message});case 31:qt&&qt.stop();case 32:case"end":return gn.stop()}},ge,this,[[7,30],[10,12]])})),function(){return st.apply(this,arguments)})},{key:"disableMic",value:(je=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt,Nt,ht,At,Ke,Mt,rn,qt,ln,en,yn,cn=arguments;return m().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:if(ae=cn.length>0&&cn[0]!==void 0&&cn[0],ie=cn.length>1&&cn[1]!==void 0?cn[1]:void 0,fe.debug("disableMic()"),le=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"disableMic() Calling",status:1,span:ie||null}),this._micProducer){Kt.next=1;break}return(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:le,status:2,message:"Error in disableMic() :: Mic Producer Not found"}),(Me=this._videosdkLogs)===null||Me===void 0||Me.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),Kt.abrupt("return");case 1:if(ze=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Mic Producer",span:le,status:1}),this._micEnabled=!1,!this._micProducer||ae){Kt.next=6;break}return mn=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Pausing Mic Producer",span:ze,status:1}),this._micProducer.pause(),jt=Ba(this._micProducer.id),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:mn,status:1,message:"Pause Mic Successfully"}),ft.dispatch(jt),this._eventEmitter.emit(jt.type,jt.payload),Kt.prev=2,Kt.next=3,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 3:(an=this._openTelemetry)===null||an===void 0||an.completeSpan({span:ze,status:1,message:"Requested Server to Close Producer"}),Kt.next=5;break;case 4:Kt.prev=4,en=Kt.catch(2),ft.dispatch(Wn({type:"error",text:"Error closing server-side mic Producer: ".concat(en)})),Nt="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(ae),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ze,status:2,message:"Error in disableMic() :: ".concat(en.message)}),(Ce=this._openTelemetry)===null||Ce===void 0||Ce.completeSpan({span:le,status:2,message:Nt}),(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:Nt,logType:"ERROR",attributes:{error:en.message},dashboardLog:!0});case 5:return(Ut=this._openTelemetry)===null||Ut===void 0||Ut.completeSpan({span:le,status:1,message:"Mic Disabled Successfully"}),Kt.abrupt("return");case 6:return this._micProducer.close(),ht=Ba(this._micProducer.id),ft.dispatch(ht),this._eventEmitter.emit(ht.type,ht.payload),Kt.prev=7,Kt.next=8,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 8:(At=this._openTelemetry)===null||At===void 0||At.completeSpan({span:ze,status:1,message:"Requested Server to Close Producer"}),(Ke=this._openTelemetry)===null||Ke===void 0||Ke.completeSpan({span:le,status:1,message:"Mic Disabled Successfully"}),Kt.next=10;break;case 9:Kt.prev=9,yn=Kt.catch(7),ft.dispatch(Wn({type:"error",text:"Error closing server-side mic Producer: ".concat(yn)})),ln="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(ae),(Mt=this._openTelemetry)===null||Mt===void 0||Mt.completeSpan({span:ze,status:2,message:"Error in disableMic() :: ".concat(yn.message)}),(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:le,status:2,message:ln}),(qt=this._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:ln,logType:"ERROR",attributes:{error:yn.message},dashboardLog:!0});case 10:this._micProducer=null;case 11:case"end":return Kt.stop()}},ge,this,[[2,4],[7,9]])})),function(){return je.apply(this,arguments)})},{key:"muteMic",value:(me=(0,f.A)(m().mark(function ge(){var J,re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return fe.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),ae.prev=1,ae.next=2,this._socketRequest("pauseProducer",{producerId:this._micProducer.id});case 2:ft.dispatch($a(this._micProducer.id)),ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),fe.error("muteMic() | failed: %o",re),(J=this._videosdkLogs)===null||J===void 0||J.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:re.message}}),ft.dispatch(Wn({type:"error",text:"Error pausing server-side mic Producer: ".concat(re)}));case 4:case"end":return ae.stop()}},ge,this,[[1,3]])})),function(){return me.apply(this,arguments)})},{key:"unmuteMic",value:(ee=(0,f.A)(m().mark(function ge(){var J,re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return fe.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),ae.prev=1,ae.next=2,this._socketRequest("resumeProducer",{producerId:this._micProducer.id});case 2:ft.dispatch(Sa(this._micProducer.id)),ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),fe.error("unmuteMic() | failed: %o",re),(J=this._videosdkLogs)===null||J===void 0||J.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:re.message}}),ft.dispatch(Wn({type:"error",text:"Error resuming server-side mic Producer: ".concat(re)}));case 4:case"end":return ae.stop()}},ge,this,[[1,3]])})),function(){return ee.apply(this,arguments)})},{key:"enableWebcam",value:(q=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt,Nt,ht,At,Ke,Mt,rn,qt,ln,en,yn,cn,Kt,cr,er,Ct,En,_r,Zr,Jr,ka,Aa,Br,W,K,Q,de,Re,be,we,We,ke,Oe,Qe,$e,Ae,et,ue,he,Le,Ze,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn,nn,un,Qn,xr,_n,dn,br,ur=this,Gn=arguments;return m().wrap(function(In){for(;;)switch(In.prev=In.next){case 0:if(Ne=Gn.length>0&&Gn[0]!==void 0?Gn[0]:void 0,Me=Gn.length>1&&Gn[1]!==void 0?Gn[1]:void 0,ze=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"enableWebcam() Calling ".concat(Ne?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:Ne?JSON.stringify(Ne):"Not Specify Custom Track"},span:Me||null}),fe.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){In.next=1;break}return(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:ze,status:2,message:"Error in enableWebcam() :: Webcam Producer found"}),(kt=this._videosdkLogs)===null||kt===void 0||kt.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),In.abrupt("return");case 1:if(!this._mediasoupDevice){In.next=3;break}if(this._mediasoupDevice.canProduce("video")){In.next=2;break}return jt=this._deviceInfo.sdkType=="react-native"?lr.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:lr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(Ut=this._openTelemetry)===null||Ut===void 0||Ut.completeSpan({span:ze,status:2,message:"Error in enableWebcam() :: ".concat(jt)}),(mn=this._videosdkLogs)===null||mn===void 0||mn.pushLogs({logText:jt,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),fe.error("enableWebcam() | cannot produce video"),In.abrupt("return");case 2:In.next=4;break;case 3:return(an=this._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ze,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),In.abrupt("return");case 4:if(ft.dispatch(Qi(!0)),Nt=this._webcam.resolution,In.prev=5,this._externalVideo){In.next=24;break}return In.next=6,this._updateWebcams(ze);case 6:if(mt=this._webcam.device){In.next=7;break}throw new Error("Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).");case 7:fe.debug("enableWebcam() | calling getUserMedia()");try{Ne&&(Ce=Ne.getVideoTracks()[0]).readyState=="ended"&&(Ce=null,qt=lr.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(rn=this._videosdkLogs)===null||rn===void 0||rn.pushLogs({logText:qt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(qt))}catch(gn){en=lr.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(ln=this._videosdkLogs)===null||ln===void 0||ln.pushLogs({logText:en.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._emitError(en),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(gn))}if(Ce){In.next=23;break}if(cn=(yn=this._openTelemetry)===null||yn===void 0?void 0:yn.trace({spanName:"Creating Track",span:ze}),Kt=null,In.prev=8,this._webcam.resolution!="hd"){In.next=10;break}return In.next=9,this.createCameraVideoTrack({cameraId:mt.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:mt.facing});case 9:Ne=In.sent,Kt=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),In.next=12;break;case 10:return In.next=11,this.createCameraVideoTrack({cameraId:mt.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:mt.facing});case 11:Ne=In.sent,Kt=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 12:Ce=Ne.getVideoTracks()[0],(cr=this._openTelemetry)===null||cr===void 0||cr.completeSpan({message:"Video Track Generated",span:cn,attributes:{customVideoTrackConfig:Kt},status:1}),In.next=23;break;case 13:if(In.prev=13,_n=In.catch(8),(er=this._openTelemetry)===null||er===void 0||er.completeSpan({message:"Error in enableWebcam() :: ".concat(_n.message),span:cn,status:2}),_n.name!=="SecurityError"){In.next=14;break}_r=lr.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,Zr=_r.message,this._emitError(_r),(Ct=this._videosdkLogs)===null||Ct===void 0||Ct.pushLogs({logText:Zr,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(En=this._openTelemetry)===null||En===void 0||En.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Zr),span:enableMicSpan,status:2}),In.next=22;break;case 14:if(_n.name!=="DOMException"){In.next=15;break}Aa=lr.q.ERROR_RN_CAMERA_NOT_FOUND,Br=Aa.message,this._emitError(Aa),(Jr=this._videosdkLogs)===null||Jr===void 0||Jr.pushLogs({logText:Br,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(ka=this._openTelemetry)===null||ka===void 0||ka.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Br),span:enableMicSpan,status:2}),In.next=22;break;case 15:if(!(_n instanceof DOMException)){In.next=21;break}dn=_n.name,In.next=dn==="NotAllowedError"?16:dn==="NotReadableError"?17:dn==="NotFoundError"?18:19;break;case 16:return W=this.handleNotAllowedError(_n,this._openTelemetry,this._videosdkLogs,ze,"video"),this._emitError(W),In.abrupt("continue",20);case 17:return K=this.handleNotReadableError(_n,this._openTelemetry,this._videosdkLogs,ze,"video"),this._emitError(K),In.abrupt("continue",20);case 18:return Q=lr.q.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Q=lr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),de=Q.message,this._emitError(Q),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:de,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(de),span:ze,status:2}),In.abrupt("continue",20);case 19:return Re="An error occurred in creating video track, ".concat(_n.message),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:_n.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Re)},dashboardLog:!0}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Error in enableWebcam() :: ".concat(Re),span:ze,status:2}),In.abrupt("continue",20);case 20:In.next=22;break;case 21:We="An error occurred in creating video track, ".concat(_n.message),(be=this._videosdkLogs)===null||be===void 0||be.pushLogs({logText:_n.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(We)},dashboardLog:!0}),(we=this._openTelemetry)===null||we===void 0||we.completeSpan({message:"Error in enableWebcam() :: ".concat(We),span:ze,status:2});case 22:return In.abrupt("return");case 23:In.next=26;break;case 24:return mt={label:"external video"},In.next=25,this._getExternalVideoStream();case 25:ke=In.sent,Ce=ke.getVideoTracks()[0].clone();case 26:if(Oe=(ht=this._openTelemetry)===null||ht===void 0?void 0:ht.trace({spanName:"Generating Producer Configuration",span:ze}),Ae={videoGoogleStartBitrate:1e3},!this._forceH264){In.next=28;break}if($e=this._mediasoupDevice.rtpCapabilities.codecs.find(function(gn){return gn.mimeType.toLowerCase()==="video/h264"})){In.next=27;break}throw new Error("The desired H.264 codec and configuration are not supported");case 27:In.next=29;break;case 28:if(!this._forceVP9){In.next=29;break}if($e=this._mediasoupDevice.rtpCapabilities.codecs.find(function(gn){return gn.mimeType.toLowerCase()==="video/vp9"})){In.next=29;break}throw new Error("The desired VP9 codec and configuration are not supported");case 29:Ce?(et=Ce.getConstraints(),ue=this._deviceInfo.sdkType=="react-native"&&this._deviceInfo.platform=="ios",Qe=(0,zi.v7)(!1,et.width,et.height,{simulcast:Ne.multiStream},ue)):this._useSimulcast&&(he=this._mediasoupDevice.rtpCapabilities.codecs.find(function(gn){return gn.kind==="video"}),Qe=this._forceVP9&&$e||he.mimeType.toLowerCase()==="video/vp9"?io:rc[this._webcam.resolution]),Le={};try{Le={encodings:Qe,width:Ne?(Ze=Ce)===null||Ze===void 0?void 0:Ze.getConstraints().width:Xn[Nt].width.ideal,height:Ne?(tt=Ce)===null||tt===void 0?void 0:tt.getConstraints().height:Xn[Nt].height.ideal}}catch(gn){(Jt=this._videosdkLogs)===null||Jt===void 0||Jt.pushLogs({logText:gn.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(gn.message)},dashboardLog:!0}),console.log(gn)}if((At=this._openTelemetry)===null||At===void 0||At.traceAutoComplete({spanName:"Track Generated with height ".concat(Le.height," and width ").concat(Le.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(Le)},span:ze,status:1}),(Ke=this._openTelemetry)===null||Ke===void 0||Ke.completeSpan({span:Oe,status:1,message:"Producer Configuration Generated"}),Oe=(Mt=this._openTelemetry)===null||Mt===void 0?void 0:Mt.trace({spanName:"Creating Webcam Producer",span:ze}),!this._sendTransport){In.next=31;break}return In.next=30,this._sendTransport.produce({track:Ce,encodings:Qe,codecOptions:Ae,codec:$e,appData:xa(xa({},Le),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(gn){ur.e2eeManager&&(gn.senderStreams=gn.createEncodedStreams())}});case 30:this._webcamProducer=In.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._webcamProducer),In.next=32;break;case 31:return(vt=this._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),In.abrupt("return");case 32:Ce.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(Ce.getConstraints().deviceId)),this._webcamProducer?(ct=ja({id:this._webcamProducer.id,deviceLabel:mt.label,type:this._getWebcamType(mt),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer,rtpSender:this._webcamProducer.rtpSender}),ft.dispatch(ct),this._eventEmitter.emit(ct.type,ct.payload),Ue=0,(yt=this._metrics.addNewProbe(this._webcamProducer,"producer")).onStatsCollected=function(gn){try{var Mr;ur._stats.producerStats||(ur._stats.producerStats={}),ur._stats.producerStats.video||(ur._stats.producerStats.video=[]),ur._webcamProducer&&(ur._latestStats[(Mr=ur._webcamProducer)===null||Mr===void 0?void 0:Mr.id]=[]),gn.video.forEach(function(Ci){var fs;ur._latestStats[(fs=ur._webcamProducer)===null||fs===void 0?void 0:fs.id].push(Ci)}),Ue%5==0&&ur._webcamProducer!=null&&ur._stats.producerStats.video.push({timestamp:new Date,stats:ur._latestStats[ur._webcamProducer.id]}),Ue++}catch(Ci){var fa;(fa=ur._videosdkLogs)===null||fa===void 0||fa.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ci.message}}),console.log("PRODUCER ERROR",Ci)}},yt.start(),this._webcamProducer.observer.on("close",function(){yt.stop(),ur._metrics.removeExistingProbe(yt)}),this._webcamProducer.on("transportclose",function(){var gn,Mr=Ba(ur._webcamProducer.id);ft.dispatch(Mr),ur._eventEmitter.emit(Mr.type,Mr.payload),(gn=ur._webcamProducer)===null||gn===void 0||gn.close(),ur._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var gn,Mr,fa=ur._deviceInfo.sdkType=="react-native"?lr.q.ERROR_RN_CAMERA_TRACK_ENDED:lr.q.ERROR_WEBCAM_TRACK_ENDED;(gn=ur._videosdkLogs)===null||gn===void 0||gn.pushLogs({logText:fa.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(fa.message)},dashboardLog:!0}),(Mr=ur._openTelemetry)===null||Mr===void 0||Mr.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:ze,message:fa.message,status:2}),ft.dispatch(Wn({type:"error",text:"Webcam disconnected!"})),ur.disableWebcam(ze).catch(function(){})}),(Rt=this._openTelemetry)===null||Rt===void 0||Rt.completeSpan({span:Oe,status:1,message:"Webcam Producer Created"}),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:ze,status:1,message:"Enable Webcam Successful"})):((fn=this._videosdkLogs)===null||fn===void 0||fn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:Oe,status:2,message:"Error in enableWebcam() :: webcamProducer null"}),(un=this._openTelemetry)===null||un===void 0||un.completeSpan({span:ze,status:2,message:"Error in enableWebcam() :: webcamProducer null"})),In.next=35;break;case 33:return In.prev=33,br=In.catch(5),(Qn=this._videosdkLogs)===null||Qn===void 0||Qn.pushLogs({logText:br.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(br.message)},dashboardLog:!0}),(xr=this._openTelemetry)===null||xr===void 0||xr.completeSpan({span:ze,status:2,message:"Error in enableWebcam() :: ".concat(br.message)}),ft.dispatch(Wn({type:"error",text:"Error enabling webcam: ".concat(br)})),In.next=34,this._socketRequest("produceError",{mediaType:"video",message:br.message});case 34:Ce&&Ce.stop();case 35:ft.dispatch(Qi(!1));case 36:case"end":return In.stop()}},ge,this,[[5,33],[8,13]])})),function(){return q.apply(this,arguments)})},{key:"handleNotAllowedError",value:function(ge,J,re,ae,ie){var le={};return le=ge.message==="Permission denied"||ge.message==="Permission dismissed"?ie==="video"?lr.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:lr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:ge.message.includes("The request is not allowed by the user agent")?ie==="video"?lr.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:lr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:ge.message==="Permission denied by system"?ie==="video"?lr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:lr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:ie==="video"?lr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:lr.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,re.pushLogs({logText:le.message,logType:"ERROR",attributes:{error:"Error in ".concat(ie==="video"?"enableWebcam()":"enableMic()"," :: ").concat(ge.message)},dashboardLog:!0}),J.completeSpan({message:ie==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(le.message):"Error in enableMic() :: occurred in creating audio track, ".concat(le.message),span:ae,status:2}),le}},{key:"handleNotReadableError",value:function(ge,J,re,ae,ie){var le={};return le=ge.message==="Device in use"?ie==="video"?lr.q.ERROR_CAMERA_IN_USE:lr.q.ERROR_MICROPHONE_IN_USE:ie==="video"?lr.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:lr.q.ERROR_MICROPHONE_IN_USE,re.pushLogs({logText:le.message,logType:"ERROR",attributes:{error:"Error in ".concat(ie==="video"?"enableWebcam()":"enableMic()"," :: ").concat(ge.message)},dashboardLog:!0}),J.completeSpan({message:ie==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(le.message):"Error in enableMic() :: occurred in creating audio track, ".concat(le.message),span:ae,status:2}),le}},{key:"createCameraVideoTrack",value:(O=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an;return m().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return re=J.cameraId,ae=re===void 0?void 0:re,ie=J.encoderConfig,le=ie===void 0?void 0:ie,Ne=J.facingMode,Me=Ne===void 0?void 0:Ne,ze=J.optimizationMode,Et=ze===void 0?void 0:ze,kt=J.multiStream,Ut=kt===void 0||kt,mn=le?Ui.$.videoProfiles[le]:Ui.$.videoProfiles.h360p_w640p,jt={video:{deviceId:ae||void 0,facingMode:Me||void 0,width:mn.width,height:mn.height,frameRate:mn.frameRate}},hn.next=1,(0,ve.lp)(jt);case 1:return an=hn.sent,Et&&(an.contentHint=Et),an.encoderConfig=le||"h360p_w640p",an.contentHint=Et||"",an.multiStream=Ut,an.cameraId=ae,hn.abrupt("return",an);case 2:case"end":return hn.stop()}},ge)})),function(ge){return O.apply(this,arguments)})},{key:"disableWebcam",value:(l=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn=arguments;return m().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(ae=hn.length>0&&hn[0]!==void 0?hn[0]:void 0,ie=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"disableWebcam() Calling",status:1,span:ae||null}),fe.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){Ce.next=1;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"Error in disableWebcam() :: Webcam Producer Not found"}),(Ne=this._videosdkLogs)===null||Ne===void 0||Ne.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),Ce.abrupt("return");case 1:return Me=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Webcam Producer",span:ie,status:1}),this._webcamProducer.close(),ze=Ba(this._webcamProducer.id),ft.dispatch(ze),this._eventEmitter.emit(ze.type,ze.payload),Ce.prev=2,Ce.next=3,this._socketRequest("closeProducer",{producerId:this._webcamProducer.id});case 3:(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:Me,status:1,message:"Requested Server to Close Producer"}),this._webcamProducer=null,(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:ie,status:1,message:"Webcam Disabled Successfully"}),Ce.next=5;break;case 4:Ce.prev=4,an=Ce.catch(2),(Ut=this._videosdkLogs)===null||Ut===void 0||Ut.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:an.message},dashboardLog:!0}),(mn=this._openTelemetry)===null||mn===void 0||mn.completeSpan({span:Me,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(an)}),(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({span:ie,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(an)}),ft.dispatch(Wn({type:"error",text:"Error closing server-side webcam Producer: ".concat(an)}));case 5:case"end":return Ce.stop()}},ge,this,[[2,4]])})),function(){return l.apply(this,arguments)})},{key:"getMics",value:(a=(0,f.A)(m().mark(function ge(){var J,re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return J=[],ie.prev=1,ie.next=2,this._updateMics();case 2:this._mics.forEach(function(le,Ne){J.push({deviceId:Ne,label:le.label})}),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("getMics() | Error",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:ae.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0});case 4:return ie.abrupt("return",J);case 5:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return a.apply(this,arguments)})},{key:"changeMic",value:(Ps=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce;return m().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeMic() Calling"}),mt.prev=1,(0,T.A)(J)!="object"){mt.next=4;break}return mt.next=2,this.disableMic(!0,ae);case 2:return mt.next=3,this.enableMic(J,ae);case 3:mt.next=9;break;case 4:return Me=J,mt.next=5,this._updateMics();case 5:if(ze=Array.from(this._mics.keys()),Et=ze.length,kt=this._mic.device?this._mic.device.deviceId:void 0,Me!=null&&Me!=null?Ut=ze.indexOf(Me):(Ut=ze.indexOf(kt))<Et-1?Ut++:Ut=0,this._mic.device=this._mics.get(ze[Ut]),mn=(ie=this._openTelemetry)===null||ie===void 0?void 0:ie.trace({spanName:"Getting Selected Mic",span:ae,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){mt.next=6;break}throw(jt=this._videosdkLogs)===null||jt===void 0||jt.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 6:return mt.next=7,this.disableMic(!0,ae);case 7:return mt.next=8,this.enableMic(void 0,ae);case 8:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:mn,status:1,message:"Done"}),(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:ae,status:1,message:"changeMic() Ending"});case 9:mt.next=11;break;case 10:mt.prev=10,Ce=mt.catch(1),(an=this._openTelemetry)===null||an===void 0||an.completeSpan({span:ae,status:2,message:"changeMic() | Error ".concat(Ce)}),(hn=this._videosdkLogs)===null||hn===void 0||hn.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:Ce.message}});case 11:case"end":return mt.stop()}},ge,this,[[1,10]])})),function(ge){return Ps.apply(this,arguments)})},{key:"getWebcams",value:(ts=(0,f.A)(m().mark(function ge(){var J,re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return J=[],ie.prev=1,ie.next=2,this._updateWebcams();case 2:this._webcams.forEach(function(le,Ne){J.push({deviceId:Ne,label:le.label,facingMode:le.facing||"environment"})}),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("getWebcams() | failed %o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:ae.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0});case 4:return ie.abrupt("return",J);case 5:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return ts.apply(this,arguments)})},{key:"replaceWebcamStream",value:(po=(0,f.A)(m().mark(function ge(J){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!this._webcamProducer){ae.next=2;break}return re=J.getVideoTracks()[0],ae.next=1,this._webcamProducer.replaceTrack({track:re});case 1:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),ae.next=4;break;case 2:return ae.next=3,this.disableWebcam();case 3:return ae.next=4,this.enableWebcam(J);case 4:case"end":return ae.stop()}},ge,this)})),function(ge){return po.apply(this,arguments)})},{key:"changeWebcam",value:(No=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt;return m().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"changeWebcam() Calling"}),ft.dispatch(Qi(!0)),(0,T.A)(J)!=="object"){Nt.next=6;break}return Nt.prev=1,Nt.next=2,this.disableWebcam(ae);case 2:return Nt.next=3,this.enableWebcam(J,ae);case 3:Nt.next=5;break;case 4:Nt.prev=4,Ce=Nt.catch(1),fe.error("changeWebcam() | failed: %o",Ce),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(J),error:Ce.message}}),ft.dispatch(Wn({type:"error",text:"Could not change webcam: ".concat(Ce)}));case 5:Nt.next=12;break;case 6:return Nt.prev=6,Nt.next=7,this._updateWebcams(ae);case 7:if(ze=Array.from(this._webcams.keys()),Et=ze.length,kt=this._webcam.device?this._webcam.device.deviceId:void 0,J!=null&&J!=null?Ut=ze.indexOf(J):(Ut=ze.indexOf(kt))<Et-1?Ut++:Ut=0,this._webcam.device=this._webcams.get(ze[Ut]),fe.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",mn=(le=this._openTelemetry)===null||le===void 0?void 0:le.trace({spanName:"Getting Selected Webcam",span:ae,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){Nt.next=8;break}throw(jt=this._videosdkLogs)===null||jt===void 0||jt.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 8:return Nt.next=9,this.disableWebcam(ae);case 9:return Nt.next=10,this.enableWebcam(void 0,ae);case 10:return(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:mn,status:1,message:"Done"}),(Me=this._openTelemetry)===null||Me===void 0||Me.completeSpan({span:ae,status:1,message:"changeWebcam() Ending"}),Nt.abrupt("return");case 11:Nt.prev=11,mt=Nt.catch(6),fe.error("changeWebcam() | failed: %o",mt),(an=this._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(J),error:mt.message}}),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ae,status:2,message:"Could not change webcam ".concat(mt)}),ft.dispatch(Wn({type:"error",text:"Could not change webcam: ".concat(mt)}));case 12:ft.dispatch(Qi(!1));case 13:case"end":return Nt.stop()}},ge,this,[[1,4],[6,11]])})),function(ge){return No.apply(this,arguments)})},{key:"changeWebcamResolution",value:(es=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me;return m().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:fe.debug("changeWebcamResolution()"),ft.dispatch(Qi(!0)),ze.prev=1,le=this._webcam.resolution,ze.next=le==="qvga"?2:le==="vga"?3:le==="hd"?4:5;break;case 2:return this._webcam.resolution="vga",ze.abrupt("continue",6);case 3:return this._webcam.resolution="hd",ze.abrupt("continue",6);case 4:return this._webcam.resolution="qvga",ze.abrupt("continue",6);case 5:this._webcam.resolution="hd";case 6:return fe.debug("changeWebcamResolution() | calling getUserMedia()"),ze.prev=7,ze.next=8,navigator.mediaDevices.getUserMedia({video:xa({deviceId:{exact:this._webcam.device.deviceId}},Xn[this._webcam.resolution])});case 8:J=ze.sent,ze.next=10;break;case 9:return ze.prev=9,Ne=ze.catch(7),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(Ne)}}),Ne.message==="Permission denied"||Ne.name==="NotAllowedError"?this._emitError(lr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(lr.q.ERROR_GET_VIDEO_MEDIA),ze.abrupt("return");case 10:return ae=J.getVideoTracks()[0],ze.next=11,this._webcamProducer.replaceTrack({track:ae});case 11:ft.dispatch(Qa(this._webcamProducer.id,ae)),ze.next=13;break;case 12:ze.prev=12,Me=ze.catch(1),fe.error("changeWebcamResolution() | failed: %o",Me),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:Me.message}}),ft.dispatch(Wn({type:"error",text:"Could not change webcam resolution: ".concat(Me)}));case 13:ft.dispatch(Qi(!1));case 14:case"end":return ze.stop()}},ge,this,[[1,12],[7,9]])})),function(){return es.apply(this,arguments)})},{key:"enableShare",value:(Fo=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt,Nt,ht,At,Ke,Mt,rn,qt,ln,en,yn,cn,Kt,cr,er,Ct,En,_r,Zr,Jr,ka,Aa,Br,W,K,Q,de,Re,be,we=this,We=arguments;return m().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(re=We.length>0&&We[0]!==void 0?We[0]:void 0,ae=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"enableShare() Calling ".concat(re?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:re?JSON.stringify(re):"Not Specify Custom Track"}}),fe.debug("enableShare()"),!this._shareProducer){ke.next=1;break}return(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ae,status:2,message:"Screen Share Producer found"}),ke.abrupt("return");case 1:if(this._mediasoupDevice.canProduce("video")){ke.next=2;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:2,message:"enableShare() | cannot produce video"}),fe.error("enableShare() | cannot produce video"),ke.abrupt("return");case 2:if(ze=[],ft.dispatch(cs(!0)),ke.prev=3,fe.debug("enableShare() | calling getUserMedia()"),hn=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Creating Track",span:ae}),!re||!re.active){ke.next=4;break}Ne=re.getVideoTracks()[0],Me=re.getAudioTracks()[0],re.multiStream?(Ce=Ne.getConstraints(),mt=Ce.height,Nt=Ce.frameRate,ht=Ui.$.screenShareProfiles["h".concat(mt,"p_").concat(Nt,"fps")],At=[{maxBitrate:ht.bitrates.high,maxFramerate:Nt,scalabilityMode:"S3T3",dtx:!0},{maxBitrate:ht.bitrates.medium,maxFramerate:Nt,scalabilityMode:"S2T3",dtx:!0},{maxBitrate:ht.bitrates.low,maxFramerate:Nt,scalabilityMode:"S1T3",dtx:!0}],ze=At):ze=hi,ke.next=9;break;case 4:return ke.prev=4,ke.next=5,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 5:Mt=ke.sent,ke.next=7;break;case 6:return ke.prev=6,de=ke.catch(4),(rn=this._videosdkLogs)===null||rn===void 0||rn.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(de)}}),(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:ae,status:2,message:"Error in getDisplayMedia for screen share ".concat(de)}),de.message==="Permission denied"||de.name==="NotAllowedError"?this._emitError(lr.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(lr.q.ERROR_GET_DISPLAY_MEDIA),ke.abrupt("return");case 7:if(Mt){ke.next=8;break}return ft.dispatch(cs(!0)),(ln=this._openTelemetry)===null||ln===void 0||ln.completeSpan({span:ae,status:2,message:"Stream not found"}),ke.abrupt("return");case 8:Ne=Mt.getVideoTracks()[0],Me=Mt.getAudioTracks()[0],ze=hi,(Ke=this._openTelemetry)===null||Ke===void 0||Ke.completeSpan({message:"Track Generated with height ".concat(Ne.getSettings().height," and width ").concat(Ne.getSettings().width),span:hn,status:1});case 9:if(en=(kt=this._openTelemetry)===null||kt===void 0?void 0:kt.trace({spanName:"Generating Producer Configuration",span:ae}),cn={videoGoogleStartBitrate:1e3},!this._forceH264){ke.next=11;break}if(yn=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Oe){return Oe.mimeType.toLowerCase()==="video/h264"})){ke.next=10;break}throw(Kt=this._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 10:ke.next=12;break;case 11:if(!this._forceVP9){ke.next=12;break}if(yn=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Oe){return Oe.mimeType.toLowerCase()==="video/vp9"})){ke.next=12;break}throw(cr=this._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 12:return(Ut=this._openTelemetry)===null||Ut===void 0||Ut.completeSpan({span:en,status:1,message:"Producer Configuration Generated"}),en=(mn=this._openTelemetry)===null||mn===void 0?void 0:mn.trace({spanName:"Creating Share Producer",span:ae}),ke.next=13,this._sendTransport.produce({track:Ne,encodings:ze.length>0?ze:hi,codecOptions:cn,codec:yn,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(Oe){we.e2eeManager&&(Oe.senderStreams=Oe.createEncodedStreams())}});case 13:if(this._shareProducer=ke.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareProducer),er=ja({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareProducer,rtpSender:this._shareProducer.rtpSender}),ft.dispatch(er),this._eventEmitter.emit(er.type,er.payload),this._shareProducer.on("transportclose",function(){var Oe,Qe=Ba(we._shareProducer.id);ft.dispatch(Qe),we._eventEmitter.emit(Qe.type,Qe.payload),(Oe=we._shareProducer)===null||Oe===void 0||Oe.close(),we._shareProducer=null}),this._shareProducer.on("trackended",function(){var Oe;(Oe=we._openTelemetry)===null||Oe===void 0||Oe.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:ae,status:2}),ft.dispatch(Wn({type:"error",text:"Share disconnected!"})),we.disableShare().catch(function(){})}),(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({span:en,status:1,message:"Share Producer Created"}),!Me){ke.next=18;break}return ke.prev=14,_r={opusStereo:1,opusDtx:1},en=(Ct=this._openTelemetry)===null||Ct===void 0?void 0:Ct.trace({spanName:"Creating Share Audio Producer",span:ae}),ke.next=15,this._sendTransport.produce({track:Me,codecOptions:_r,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(Oe){we.e2eeManager&&(Oe.senderStreams=Oe.createEncodedStreams())}});case 15:this._shareAudioProducer=ke.sent,Zr=ja({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareAudioProducer,rtpSender:this._shareAudioProducer.rtpSender}),ft.dispatch(Zr),this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareAudioProducer),this._eventEmitter.emit(Zr.type,Zr.payload),this._shareAudioProducer.on("transportclose",function(){var Oe,Qe=Ba(we._shareAudioProducer.id);ft.dispatch(Qe),we._eventEmitter.emit(Qe.type,Qe.payload),(Oe=we._shareAudioProducer)===null||Oe===void 0||Oe.close(),we._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var Oe;(Oe=we._openTelemetry)===null||Oe===void 0||Oe.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:ae,status:2}),ft.dispatch(Wn({type:"error",text:"Share disconnected!"}))}),(En=this._openTelemetry)===null||En===void 0||En.completeSpan({span:en,status:1,message:"Share Audio Producer Created"}),ke.next=18;break;case 16:return ke.prev=16,Re=ke.catch(14),ke.next=17,this._socketRequest("produceError",{mediaType:"shareAudio",message:Re.message});case 17:(Jr=this._videosdkLogs)===null||Jr===void 0||Jr.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:Re.message}});case 18:(an=this._openTelemetry)===null||an===void 0||an.completeSpan({span:ae,status:1,message:"Enable Share Successful"}),ke.next=21;break;case 19:return ke.prev=19,be=ke.catch(3),fe.error("enableShare() | failed:%o",be),(ka=this._openTelemetry)===null||ka===void 0||ka.completeSpan({span:ae,status:2,attributes:{error:be.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",be.message),(Aa=this._videosdkLogs)===null||Aa===void 0||Aa.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:be.message}}),be.name!=="NotAllowedError"&&ft.dispatch(Wn({type:"error",text:"Error sharing: ".concat(be)})),ke.next=20,this._socketRequest("produceError",{mediaType:"share",message:be.message});case 20:Ne&&Ne.stop(),Me&&Me.stop();case 21:ft.dispatch(cs(!1)),this._shareProducer&&(Br=0,(W=this._metrics.addNewProbe(this._shareProducer,"share_producer")).onStatsCollected=function(Oe){try{var Qe;we._stats.producerStats||(we._stats.producerStats={}),we._stats.producerStats.share||(we._stats.producerStats.share=[]),we._shareProducer&&(we._latestStats[(Qe=we._shareProducer)===null||Qe===void 0?void 0:Qe.id]=[]),Oe.video.forEach(function(Ae){var et;we._shareProducer&&we._latestStats[(et=we._shareProducer)===null||et===void 0?void 0:et.id].push(Ae)}),Br%5==0&&we._shareProducer!=null&&we._stats.producerStats.share.push({timestamp:new Date,stats:we._latestStats[we._shareProducer.id]}),Br++}catch(Ae){var $e;($e=we._videosdkLogs)===null||$e===void 0||$e.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ae.message}}),console.log("PRODUCER ERROR",Ae)}},W.start(),this._shareProducer.observer.on("close",function(){W.stop(),we._metrics.removeExistingProbe(W)})),this._shareAudioProducer&&(K=0,(Q=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer")).onStatsCollected=function(Oe){try{var Qe;we._stats.producerStats||(we._stats.producerStats={}),we._stats.producerStats.shareAudio||(we._stats.producerStats.shareAudio=[]),we._shareAudioProducer&&(we._latestStats[(Qe=we._shareAudioProducer)===null||Qe===void 0?void 0:Qe.id]=[]),Oe.audio.forEach(function(Ae){var et;we._shareAudioProducer&&we._latestStats[(et=we._shareAudioProducer)===null||et===void 0?void 0:et.id].push(Ae)}),K%5==0&&we._shareAudioProducer!=null&&we._stats.producerStats.shareAudio.push(xa({timestamp:new Date},we._latestStats[we._shareAudioProducer.id]?we._latestStats[we._shareAudioProducer.id][0]:{})),K++}catch(Ae){var $e;($e=we._videosdkLogs)===null||$e===void 0||$e.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ae.message}}),console.log("PRODUCER ERROR",Ae)}},Q.start(),this._shareAudioProducer.observer.on("close",function(){Q.stop(),we._metrics.removeExistingProbe(Q)}));case 22:case"end":return ke.stop()}},ge,this,[[3,19],[4,6],[14,16]])})),function(){return Fo.apply(this,arguments)})},{key:"disableShare",value:(sc=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an;return m().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:if(fe.debug("disableShare()"),ie=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){hn.next=1;break}return(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ie,status:2,message:"Share Producer Not found"}),hn.abrupt("return");case 1:return Ne=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Closing Share Producer",span:ie,status:1}),this._shareProducer.close(),Me=Ba(this._shareProducer.id),ft.dispatch(Me),this._eventEmitter.emit(Me.type,Me.payload),this._shareAudioProducer&&(kt=(ze=this._openTelemetry)===null||ze===void 0?void 0:ze.trace({spanName:"Closing Share Audio Producer",span:ie,status:1}),this._shareAudioProducer.close(),Me=Ba(this._shareAudioProducer.id),ft.dispatch(Me),this._eventEmitter.emit(Me.type,Me.payload),(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:kt,status:1,message:"Closed Share Audio Producer"})),hn.prev=2,hn.next=3,this._socketRequest("closeProducer",{producerId:this._shareProducer.id});case 3:if(!this._shareAudioProducer){hn.next=4;break}return hn.next=4,this._socketRequest("closeProducer",{producerId:this._shareAudioProducer.id});case 4:(Ut=this._openTelemetry)===null||Ut===void 0||Ut.completeSpan({span:Ne,status:1,message:"Requested Server to Close Producer"}),hn.next=6;break;case 5:hn.prev=5,an=hn.catch(2),ft.dispatch(Wn({type:"error",text:"Error closing server-side share Producer: ".concat(an)})),(mn=this._openTelemetry)===null||mn===void 0||mn.completeSpan({span:ie,status:2,message:"Error closing server-side share Producer ".concat(an)}),(jt=this._videosdkLogs)===null||jt===void 0||jt.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:an.message}});case 6:this._shareProducer=null,this._shareAudioProducer=null,(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ie,status:1,message:"Screen Share Disabled Successfully"});case 7:case"end":return hn.stop()}},ge,this,[[2,5]])})),function(){return sc.apply(this,arguments)})},{key:"enableAudioOnly",value:(Ts=(0,f.A)(m().mark(function ge(){var J,re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:fe.debug("enableAudioOnly()"),ft.dispatch(Ea(!0)),this.disableWebcam(),J=Ma(this._consumers.values()),le.prev=1,J.s();case 2:if((re=J.n()).done){le.next=5;break}if((ae=re.value).kind==="video"){le.next=3;break}return le.abrupt("continue",4);case 3:this._pauseConsumer(ae);case 4:le.next=2;break;case 5:le.next=7;break;case 6:le.prev=6,ie=le.catch(1),J.e(ie);case 7:return le.prev=7,J.f(),le.finish(7);case 8:ft.dispatch(jr(!0)),ft.dispatch(Ea(!1));case 9:case"end":return le.stop()}},ge,this,[[1,6,7,8]])})),function(){return Ts.apply(this,arguments)})},{key:"disableAudioOnly",value:(Po=(0,f.A)(m().mark(function ge(){var J,re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:fe.debug("disableAudioOnly()"),ft.dispatch(Ea(!0)),!this._webcamProducer&&this._produce&&(qn()||{}).webcamEnabled&&this.enableWebcam(),J=Ma(this._consumers.values()),le.prev=1,J.s();case 2:if((re=J.n()).done){le.next=5;break}if((ae=re.value).kind==="video"){le.next=3;break}return le.abrupt("continue",4);case 3:this._resumeConsumer(ae);case 4:le.next=2;break;case 5:le.next=7;break;case 6:le.prev=6,ie=le.catch(1),J.e(ie);case 7:return le.prev=7,J.f(),le.finish(7);case 8:ft.dispatch(jr(!1)),ft.dispatch(Ea(!1));case 9:case"end":return le.stop()}},ge,this,[[1,6,7,8]])})),function(){return Po.apply(this,arguments)})},{key:"muteAudio",value:(_a=(0,f.A)(m().mark(function ge(){return m().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:fe.debug("muteAudio()"),ft.dispatch(ua(!0));case 1:case"end":return J.stop()}},ge)})),function(){return _a.apply(this,arguments)})},{key:"unmuteAudio",value:(zc=(0,f.A)(m().mark(function ge(){return m().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:fe.debug("unmuteAudio()"),ft.dispatch(ua(!1));case 1:case"end":return J.stop()}},ge)})),function(){return zc.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(uo=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me,ze,Et,kt;return m().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return ie=J.iceParameters,le=J.transportId,Ne=J.internalSpan,le===((re=this._sendTransport)===null||re===void 0?void 0:re.id)&&this._sendTransport.restartIce({iceParameters:ie}),le===((ae=this._recvTransport)===null||ae===void 0?void 0:ae.id)&&this._recvTransport.restartIce({iceParameters:ie}),Ut.prev=1,Ut.next=2,this._socketRequest("iceRestarted",{transportId:le});case 2:(Me=this._openTelemetry)===null||Me===void 0||Me.completeSpan({span:Ne,status:1,message:"iceRestarted"}),Ut.next=4;break;case 3:Ut.prev=3,kt=Ut.catch(1),(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:Ne,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(kt)}),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:kt.message}}),ft.dispatch(Wn({type:"error",text:"ICE restart failed: ".concat(kt)}));case 4:case"end":return Ut.stop()}},ge,this,[[1,3]])})),function(ge){return uo.apply(this,arguments)})},{key:"restartIce",value:(ps=(0,f.A)(m().mark(function ge(){var J,re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(fe.debug("restartIce()"),ft.dispatch(ya(!0)),le.prev=1,!this._sendTransport){le.next=3;break}return le.next=2,this._socketRequest("restartIce",{transportId:this._sendTransport.id});case 2:return J=le.sent,le.next=3,this._sendTransport.restartIce({iceParameters:J});case 3:if(!this._recvTransport){le.next=5;break}return le.next=4,this._socketRequest("restartIce",{transportId:this._recvTransport.id});case 4:return re=le.sent,le.next=5,this._recvTransport.restartIce({iceParameters:re});case 5:ft.dispatch(Wn({text:"ICE restarted"})),le.next=7;break;case 6:le.prev=6,ie=le.catch(1),fe.error("restartIce() | failed:%o",ie),ft.dispatch(Wn({type:"error",text:"ICE restart failed: ".concat(ie)})),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:ie.message}});case 7:ft.dispatch(ya(!1));case 8:case"end":return le.stop()}},ge,this,[[1,6]])})),function(){return ps.apply(this,arguments)})},{key:"_socketRequest",value:(To=(0,f.A)(m().mark(function ge(J){var re,ae=this,ie=arguments;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return re=ie.length>1&&ie[1]!==void 0?ie[1]:{},le.abrupt("return",new Promise(function(Ne,Me){ae._webSocket.emit("request",{method:J,request:!0,data:re},function(ze){ze!=null&&ze.error?Me(new Error(ze.error)):Ne(ze.data)})}));case 1:case"end":return le.stop()}},ge)})),function(ge){return To.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(zs=(0,f.A)(m().mark(function ge(J){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",J),ie.prev=1,!this._webcamProducer){ie.next=3;break}return ie.next=2,this._webcamProducer.setMaxSpatialLayer(J);case 2:ie.next=4;break;case 3:if(!this._shareProducer){ie.next=4;break}return ie.next=4,this._shareProducer.setMaxSpatialLayer(J);case 4:ie.next=6;break;case 5:ie.prev=5,ae=ie.catch(1),fe.error("setMaxSendingSpatialLayer() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:ae.message}}),ft.dispatch(Wn({type:"error",text:"Error setting max sending video spatial layer: ".concat(ae)}));case 6:case"end":return ie.stop()}},ge,this,[[1,5]])})),function(ge){return zs.apply(this,arguments)})},{key:"setWebcamQuality",value:(Js=(0,f.A)(m().mark(function ge(J){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(this._webcamProducer){ie.next=1;break}return ie.abrupt("return");case 1:if(re=this._webcam.resolution,ae=ao[re][J].s,this._webcamProducer.maxSpatialLayer!=ae){ie.next=2;break}return ie.abrupt("return");case 2:return ie.next=3,this._webcamProducer.setMaxSpatialLayer(ae);case 3:case"end":return ie.stop()}},ge,this)})),function(ge){return Js.apply(this,arguments)})},{key:"setConsumerScreenShareQuality",value:(vi=(0,f.A)(m().mark(function ge(J,re){var ae,ie,le,Ne,Me,ze;return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Ne=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:'Setting "'.concat(re,'" Quality for Screen Share')}),ze=(Me={high:{spatialLayer:2,temporalLayer:2},med:{spatialLayer:1,temporalLayer:2},low:{spatialLayer:0,temporalLayer:2}})[re]||Me.high,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Ne,attributes:{selectedQuality:ze},status:1}),Et.next=1,this.setConsumerPreferredLayers(J,ze.spatialLayer,ze.temporalLayer);case 1:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Done",span:Ne,status:1});case 2:case"end":return Et.stop()}},ge,this)})),function(ge,J){return vi.apply(this,arguments)})},{key:"setConsumerQuality",value:(lo=(0,f.A)(m().mark(function ge(J,re){var ae,ie,le,Ne,Me,ze,Et;return m().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return Ne=this._webcam.resolution,Me=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:'Setting "'.concat(re,'" Quality')}),ze=ao[Ne][re].s,Et=ao[Ne][re].t,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Me,attributes:{spatialLayers:JSON.parse(ze),temporalLayers:JSON.parse(Et)},status:1}),kt.next=1,this.setConsumerPreferredLayers(J,ze,Et);case 1:(le=this._openTelemetry)===null||le===void 0||le.completeSpan({message:"Done",span:Me,status:1});case 2:case"end":return kt.stop()}},ge,this)})),function(ge,J){return lo.apply(this,arguments)})},{key:"setViewPort",value:(Zi=(0,f.A)(m().mark(function ge(J,re,ae){var ie,le,Ne,Me;return m().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(this._consumers.get(J.id)){ze.next=1;break}return ze.abrupt("return");case 1:if(ie=(0,zi.ed)(this._consumers.get(J.id),re,ae),le=ie.consumerId,Ne=ie.newPreferredSpatialLayer,Me=ie.newPreferredTemporalLayer,Ne!==J.preferredSpatialLayer||Me!==J.preferredTemporalLayer){ze.next=2;break}return ze.abrupt("return");case 2:if(!le){ze.next=3;break}return ze.next=3,this.setConsumerPreferredLayers(le,Ne,Me);case 3:case"end":return ze.stop()}},ge,this)})),function(ge,J,re){return Zi.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(Qs=(0,f.A)(m().mark(function ge(J,re,ae){var ie,le,Ne;return m().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return fe.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",J,re,ae),Me.prev=1,(ie=this._consumers.get(J)).spatialLayers>1&&(ie.preferredSpatialLayer=re,ie.preferredTemporalLayer=ae),Me.next=2,this._socketRequest("setConsumerPreferredLayers",{consumerId:J,spatialLayer:re,temporalLayer:ae});case 2:ft.dispatch(Io(J,re,ae)),Me.next=4;break;case 3:Me.prev=3,Ne=Me.catch(1),fe.error("setConsumerPreferredLayers() | failed:%o",Ne),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:Ne.message}}),ft.dispatch(Wn({type:"error",text:"Error setting Consumer preferred layers: ".concat(Ne)}));case 4:case"end":return Me.stop()}},ge,this,[[1,3]])})),function(ge,J,re){return Qs.apply(this,arguments)})},{key:"setConsumerPriority",value:(gi=(0,f.A)(m().mark(function ge(J,re){var ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return fe.debug("setConsumerPriority() [consumerId:%s, priority:%d]",J,re),le.prev=1,le.next=2,this._socketRequest("setConsumerPriority",{consumerId:J,priority:re});case 2:ft.dispatch(yr(J,re)),le.next=4;break;case 3:le.prev=3,ie=le.catch(1),fe.error("setConsumerPriority() | failed:%o",ie),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:ie.message}}),ft.dispatch(Wn({type:"error",text:"Error setting Consumer priority: ".concat(ie)}));case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge,J){return gi.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(ri=(0,f.A)(m().mark(function ge(J){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return fe.debug("requestConsumerKeyFrame() [consumerId:%s]",J),ie.prev=1,ie.next=2,this._socketRequest("requestConsumerKeyFrame",{consumerId:J});case 2:ft.dispatch(Wn({text:"Keyframe requested for video consumer"})),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("requestConsumerKeyFrame() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:ae.message}}),ft.dispatch(Wn({type:"error",text:"Error requesting key frame for Consumer: ".concat(ae)}));case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return ri.apply(this,arguments)})},{key:"enableChatDataProducer",value:(ds=(0,f.A)(m().mark(function ge(){var J,re,ae=this;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("enableChatDataProducer()"),this._useDataChannel){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 2:this._chatDataProducer=ie.sent,ft.dispatch(Ms({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){ae._chatDataProducer=null}),this._chatDataProducer.on("open",function(){fe.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){fe.error('chat DataProducer "close" event'),ae._chatDataProducer=null,ft.dispatch(Wn({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(le){fe.error('chat DataProducer "error" event:%o',le),ft.dispatch(Wn({type:"error",text:"Chat DataProducer error: ".concat(le)}))}),this._chatDataProducer.on("bufferedamountlow",function(){fe.debug('chat DataProducer "bufferedamountlow" event')}),ie.next=4;break;case 3:throw ie.prev=3,re=ie.catch(1),fe.error("enableChatDataProducer() | failed:%o",re),(J=this._videosdkLogs)===null||J===void 0||J.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:re.message}}),ft.dispatch(Wn({type:"error",text:"Error enabling chat DataProducer: ".concat(re)})),re;case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return ds.apply(this,arguments)})},{key:"enableBotDataProducer",value:(fi=(0,f.A)(m().mark(function ge(){var J,re,ae=this;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("enableBotDataProducer()"),this._useDataChannel){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 2:this._botDataProducer=ie.sent,ft.dispatch(Ms({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){ae._botDataProducer=null}),this._botDataProducer.on("open",function(){fe.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){fe.error('bot DataProducer "close" event'),ae._botDataProducer=null,ft.dispatch(Wn({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(le){fe.error('bot DataProducer "error" event:%o',le),ft.dispatch(Wn({type:"error",text:"Bot DataProducer error: ".concat(le)}))}),this._botDataProducer.on("bufferedamountlow",function(){fe.debug('bot DataProducer "bufferedamountlow" event')}),ie.next=4;break;case 3:throw ie.prev=3,re=ie.catch(1),fe.error("enableBotDataProducer() | failed:%o",re),(J=this._videosdkLogs)===null||J===void 0||J.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:re.message}}),ft.dispatch(Wn({type:"error",text:"Error enabling bot DataProducer: ".concat(re)})),re;case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(){return fi.apply(this,arguments)})},{key:"sendChatMessage",value:(ki=(0,f.A)(m().mark(function ge(J){return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug('sendChatMessage() [text:"%s]',J),this._chatDataProducer){re.next=1;break}return ft.dispatch(Wn({type:"error",text:"No chat DataProducer"})),re.abrupt("return");case 1:try{this._chatDataProducer.send(J)}catch(ae){fe.error("chat DataProducer.send() failed:%o",ae),ft.dispatch(Wn({type:"error",text:"chat DataProducer.send() failed: ".concat(ae)}))}case 2:case"end":return re.stop()}},ge,this)})),function(ge){return ki.apply(this,arguments)})},{key:"sendBotMessage",value:(Co=(0,f.A)(m().mark(function ge(J){return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug('sendBotMessage() [text:"%s]',J),this._botDataProducer){re.next=1;break}return ft.dispatch(Wn({type:"error",text:"No bot DataProducer"})),re.abrupt("return");case 1:try{this._botDataProducer.send(J)}catch(ae){fe.error("bot DataProducer.send() failed:%o",ae),ft.dispatch(Wn({type:"error",text:"bot DataProducer.send() failed: ".concat(ae)}))}case 2:case"end":return re.stop()}},ge,this)})),function(ge){return Co.apply(this,arguments)})},{key:"changeDisplayName",value:(co=(0,f.A)(m().mark(function ge(J){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return fe.debug('changeDisplayName() [displayName:"%s"]',J),sn({displayName:J}),ae.prev=1,ae.next=2,this._socketRequest("changeDisplayName",{displayName:J});case 2:this._displayName=J,ft.dispatch(An(J)),ft.dispatch(Wn({text:"Display name changed"})),ae.next=4;break;case 3:ae.prev=3,re=ae.catch(1),fe.error("changeDisplayName() | failed: %o",re),ft.dispatch(Wn({type:"error",text:"Could not change display name: ".concat(re)})),ft.dispatch(An());case 4:case"end":return ae.stop()}},ge,this,[[1,3]])})),function(ge){return co.apply(this,arguments)})},{key:"openConnection",value:(Ho=(0,f.A)(m().mark(function ge(J){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=J.roomId,ae=J.payload,ie.next=1,this._socketRequest("openConnection",{roomId:re,payload:ae}).catch(function(le){throw new Error(le)});case 1:case"end":return ie.stop()}},ge,this)})),function(ge){return Ho.apply(this,arguments)})},{key:"closeConnection",value:(ko=(0,f.A)(m().mark(function ge(J){return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=1,this._socketRequest("closeConnection",{roomId:J});case 1:case"end":return re.stop()}},ge,this)})),function(ge){return ko.apply(this,arguments)})},{key:"switchPeerRoom",value:(wc=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le;return m().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return re=J.peerId,ae=J.roomId,ie=J.payload,le=J.token,Ne.next=1,this._socketRequest("switchPeerRoom",{roomId:ae,peerId:re,payload:ie,token:le});case 1:case"end":return Ne.stop()}},ge,this)})),function(ge){return wc.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(Cs=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne;return m().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return re=J.roomId,ae=J.connectionRoomId,ie=J.peerId,le=J.payload,Ne=J.token,Me.next=1,this._socketRequest("connectionSwitchPeerRoom",{roomId:re,connectionRoomId:ae,peerId:ie,payload:le,token:Ne});case 1:case"end":return Me.stop()}},ge,this)})),function(ge){return Cs.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(qi=(0,f.A)(m().mark(function ge(J){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=J.roomId,ae=J.message,ie.next=1,this._socketRequest("connectionSendChatMessage",{roomId:re,message:ae});case 1:case"end":return ie.stop()}},ge,this)})),function(ge){return qi.apply(this,arguments)})},{key:"connectionEndMeeting",value:(Uo=(0,f.A)(m().mark(function ge(J){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return re=J.roomId,ae.next=1,this._socketRequest("connectionCloseRoom",{roomId:re});case 1:case"end":return ae.stop()}},ge,this)})),function(ge){return Uo.apply(this,arguments)})},{key:"pubsubPublish",value:(ks=(0,f.A)(m().mark(function ge(J,re,ae,ie){var le,Ne,Me,ze,Et,kt,Ut;return m().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:if(mn.prev=0,ae!=null&&ae.sendOnly){if(le=ae.sendOnly,Ne=[],le){Me=Ma(le);try{for(Me.s();!(ze=Me.n()).done;)(Et=ze.value)&&Ne.push(Et.toString())}catch(jt){Me.e(jt)}finally{Me.f()}}ae.sendOnly=Ne}return mn.next=1,this._socketRequest("pubsubPublish",{topic:J,message:re,options:ae,payload:ie});case 1:mn.next=3;break;case 2:mn.prev=2,Ut=mn.catch(0),(kt=this._videosdkLogs)===null||kt===void 0||kt.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:Ut.message}}),fe.error("pubsubPublish() | failed: %o",Ut);case 3:case"end":return mn.stop()}},ge,this,[[0,2]])})),function(ge,J,re,ae){return ks.apply(this,arguments)})},{key:"pubsubSubscribe",value:(ic=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return le.prev=1,le.next=2,this._socketRequest("pubsubSubscribe",{topic:J});case 2:return re=le.sent,le.abrupt("return",re);case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("pubsubSubscribe() | failed: %o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return ic.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(Ro=(0,f.A)(m().mark(function ge(J){var re,ae,ie;return m().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this._closed){le.next=1;break}return le.abrupt("return");case 1:return le.prev=1,le.next=2,this._socketRequest("pubsubUnsubscribe",{topic:J});case 2:(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat(J),logType:"INFO"}),le.next=4;break;case 3:le.prev=3,ie=le.catch(1),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:ie.message}}),fe.error("pubsubUnsubscribe() | failed: %o",ie);case 4:case"end":return le.stop()}},ge,this,[[1,3]])})),function(ge){return Ro.apply(this,arguments)})},{key:"closeRoom",value:(Bs=(0,f.A)(m().mark(function ge(){return m().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=1,this._socketRequest("closeRoom",{});case 1:case"end":return J.stop()}},ge,this)})),function(){return Bs.apply(this,arguments)})},{key:"removePeer",value:(Vi=(0,f.A)(m().mark(function ge(J){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if((re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Removing peer ".concat(J),status:1}),J!=null){ae.next=1;break}return ae.abrupt("return");case 1:return ae.next=2,this._socketRequest("removePeer",{peerId:J});case 2:case"end":return ae.stop()}},ge,this)})),function(ge){return Vi.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(zo=(0,f.A)(m().mark(function ge(){return m().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(fe.debug("getSendTransportRemoteStats()"),this._sendTransport){J.next=1;break}return J.abrupt("return");case 1:return J.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._sendTransport.id}));case 2:case"end":return J.stop()}},ge,this)})),function(){return zo.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(ac=(0,f.A)(m().mark(function ge(){return m().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(fe.debug("getRecvTransportRemoteStats()"),this._recvTransport){J.next=1;break}return J.abrupt("return");case 1:return J.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._recvTransport.id}));case 2:case"end":return J.stop()}},ge,this)})),function(){return ac.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(oo=(0,f.A)(m().mark(function ge(){var J;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getAudioRemoteStats()"),J=this._micProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[J.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return oo.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(Fi=(0,f.A)(m().mark(function ge(){var J;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getVideoRemoteStats()"),J=this._webcamProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[J.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return Fi.apply(this,arguments)})},{key:"getShareRemoteStats",value:(Mi=(0,f.A)(m().mark(function ge(){var J;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getVideoRemoteStats()"),J=this._shareProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[J.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return Mi.apply(this,arguments)})},{key:"getShareAudioRemoteStats",value:(so=(0,f.A)(m().mark(function ge(){var J;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(J=this._shareAudioProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._latestStats[J.id]);case 2:case"end":return re.stop()}},ge,this)})),function(){return so.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(Ys=(0,f.A)(m().mark(function ge(J){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(fe.debug("getConsumerRemoteStats()"),re=this._consumers.get(J)){ie.next=1;break}return ie.abrupt("return");case 1:return this._latestStats[J]&&(this._latestStats[J][0].currentSpatialLayer=re.currentSpatialLayer,this._latestStats[J][0].currentTemporalLayer=re.currentTemporalLayer,this._latestStats[J][0].preferredSpatialLayer=re.preferredSpatialLayer,this._latestStats[J][0].preferredTemporalLayer=re.preferredTemporalLayer),ae=re.track.id.replace(/[{}]/g,""),ie.abrupt("return",this._latestStats[ae]);case 2:case"end":return ie.stop()}},ge,this)})),function(ge){return Ys.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(Ks=(0,f.A)(m().mark(function ge(){var J;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getChatDataProducerRemoteStats()"),J=this._chatDataProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:J.id}));case 2:case"end":return re.stop()}},ge,this)})),function(){return Ks.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(Xi=(0,f.A)(m().mark(function ge(){var J;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getBotDataProducerRemoteStats()"),J=this._botDataProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:J.id}));case 2:case"end":return re.stop()}},ge,this)})),function(){return Xi.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(Rs=(0,f.A)(m().mark(function ge(J){return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(J)){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",this._socketRequest("getDataConsumerStats",{dataConsumerId:J}));case 2:case"end":return re.stop()}},ge,this)})),function(ge){return Rs.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(xs=(0,f.A)(m().mark(function ge(){return m().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(fe.debug("getSendTransportLocalStats()"),this._sendTransport){J.next=1;break}return J.abrupt("return");case 1:return J.abrupt("return",this._sendTransport.getStats());case 2:case"end":return J.stop()}},ge,this)})),function(){return xs.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(Qr=(0,f.A)(m().mark(function ge(){return m().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(fe.debug("getRecvTransportLocalStats()"),this._recvTransport){J.next=1;break}return J.abrupt("return");case 1:return J.abrupt("return",this._recvTransport.getStats());case 2:case"end":return J.stop()}},ge,this)})),function(){return Qr.apply(this,arguments)})},{key:"getAudioLocalStats",value:(ia=(0,f.A)(m().mark(function ge(){return m().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(fe.debug("getAudioLocalStats()"),this._micProducer){J.next=1;break}return J.abrupt("return");case 1:return J.abrupt("return",this._micProducer.getStats());case 2:case"end":return J.stop()}},ge,this)})),function(){return ia.apply(this,arguments)})},{key:"getVideoLocalStats",value:(Fr=(0,f.A)(m().mark(function ge(){var J;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(fe.debug("getVideoLocalStats()"),J=this._webcamProducer||this._shareProducer){re.next=1;break}return re.abrupt("return");case 1:return re.abrupt("return",J.getStats());case 2:case"end":return re.stop()}},ge,this)})),function(){return Fr.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(Yr=(0,f.A)(m().mark(function ge(J){var re;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(re=this._consumers.get(J)){ae.next=1;break}return ae.abrupt("return");case 1:return ae.abrupt("return",re.getStats());case 2:case"end":return ae.stop()}},ge,this)})),function(ge){return Yr.apply(this,arguments)})},{key:"getTransportRemoteStats",value:(vn=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne;return m().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(ie=J.participantId){Me.next=1;break}return Me.abrupt("return");case 1:return Me.next=2,this._socketRequest("getTransportStats",{peerId:ie});case 2:return le=Me.sent,Ne={availableBitrate:le==null||(re=le.recv)===null||re===void 0?void 0:re.availableBitrate,targetBitrate:le==null||(ae=le.recv)===null||ae===void 0?void 0:ae.targetBitrate},Me.abrupt("return",Ne);case 3:case"end":return Me.stop()}},ge,this)})),function(ge){return vn.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(zn=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne;return m().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return re=J.uplink,ae=J.downlink,ie=J.rtt,le=J.secret,fe.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",re,ae,ie),Me.prev=1,Me.next=2,this._socketRequest("applyNetworkThrottle",{uplink:re,downlink:ae,rtt:ie,secret:le});case 2:Me.next=4;break;case 3:Me.prev=3,Ne=Me.catch(1),fe.error("applyNetworkThrottle() | failed:%o",Ne),ft.dispatch(Wn({type:"error",text:"Error applying network throttle: ".concat(Ne)}));case 4:case"end":return Me.stop()}},ge,this,[[1,3]])})),function(ge){return zn.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(Vt=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le;return m().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return re=J.silent,ae=re!==void 0&&re,ie=J.secret,fe.debug("resetNetworkThrottle()"),Ne.prev=1,Ne.next=2,this._socketRequest("resetNetworkThrottle",{secret:ie});case 2:Ne.next=4;break;case 3:Ne.prev=3,le=Ne.catch(1),ae||(fe.error("resetNetworkThrottle() | failed:%o",le),ft.dispatch(Wn({type:"error",text:"Error resetting network throttle: ".concat(le)})));case 4:case"end":return Ne.stop()}},ge,this,[[1,3]])})),function(ge){return Vt.apply(this,arguments)})},{key:"createProducerTransport",value:(Tn=(0,f.A)(m().mark(function ge(J,re){var ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt=this;return m().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:le=J.id,Ne=J.iceParameters,Me=J.iceCandidates,ze=J.dtlsParameters,Et=J.sctpParameters,kt=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"Creating Send Transport",span:re||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:le,iceParameters:Ne,iceCandidates:Me,dtlsParameters:ze,sctpParameters:Et,iceServers:this._iceServers}),Ut=new Map,mn=new Map,an=!1,hn=!1,Ce=!1,this._sendTransportInternal=setInterval((0,f.A)(m().mark(function ht(){var At,Ke,Mt,rn,qt,ln,en,yn,cn,Kt,cr,er;return m().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return At=[],Ct.prev=1,Ct.next=2,mt._sendTransport.getStats();case 2:Ke=Ct.sent,Ct.next=4;break;case 3:return Ct.prev=3,er=Ct.catch(1),console.error("Error fetching stats:",er),Ct.abrupt("return");case 4:try{Ke.forEach(function(En){try{if(En.type==="outbound-rtp"){var _r={qualityLimitationReason:En.qualityLimitationReason};Ut.set(En.id,_r)}if(En.type==="remote-inbound-rtp"&&En.totalRoundTripTime&&En.roundTripTimeMeasurements){var Zr=mn.get(En.id);Zr||(Zr={totalRoundTripTime:0,roundTripTimeMeasurements:0},mn.set(En.id,Zr));var Jr=En.roundTripTimeMeasurements-Zr.roundTripTimeMeasurements,ka=En.totalRoundTripTime-Zr.totalRoundTripTime;if(Jr>0&&ka>0){var Aa=ka/Jr;Zr.totalRoundTripTime=En.totalRoundTripTime,Zr.roundTripTimeMeasurements=En.roundTripTimeMeasurements,At.push(1e3*Aa)}}}catch{}});try{Mt=At.reduce(function(En,_r){return En+_r},0)/At.length,Number.isNaN(Mt)||(jt||(jt=Mt),rn=(0,b.A)(Ut.values()).some(function(En){return En.qualityLimitationReason==="bandwidth"}),qt=(0,b.A)(Ut.values()).some(function(En){return En.qualityLimitationReason==="cpu"}),!an&&rn&&Mt-jt>50?((ln=mt._videosdkLogs)===null||ln===void 0||ln.pushLogs({logType:"WARN",attributes:{avgRoundTripTimeInMs:Mt,ewmaRttInMs:jt},logText:"Send Transport Congestion detected, the network is bandwidth limited and the round trip time is increasing (ewmaRtt: ".concat(jt,", avgRoundTripTime: ").concat(Mt,")")}),an=!0,mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"congestion",state:"detected",timestamp:new Date().getTime()})):an&&Mt-jt<30&&((en=mt._videosdkLogs)===null||en===void 0||en.pushLogs({logType:"INFO",attributes:{avgRoundTripTimeInMs:Mt,ewmaRttInMs:jt},logText:"Send Transport  Congestion resolved, the round trip time is back to normal (ewmaRtt: ".concat(jt,", avgRoundTripTime: ").concat(Mt,")")}),an=!1,mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"congestion",state:"resolved",timestamp:new Date().getTime()})),rn&&!Ce?((yn=mt._videosdkLogs)===null||yn===void 0||yn.pushLogs({logType:"WARN",logText:"Bandwidth Limitation detected"}),mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"bandwidth",state:"detected",timestamp:new Date().getTime()}),Ce=!0):!rn&&Ce&&((cn=mt._videosdkLogs)===null||cn===void 0||cn.pushLogs({logType:"INFO",logText:"Bandwidth Limitation resolved"}),mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"bandwidth",state:"resolved",timestamp:new Date().getTime()}),Ce=!1),jt=.9*jt+.1*Mt,!hn&&qt?(mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"cpu",state:"detected",timestamp:new Date().getTime()}),(Kt=mt._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logType:"WARN",logText:"CPU Limitation detected"}),hn=!0):hn&&!qt&&(mt._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"cpu",state:"resolved",timestamp:new Date().getTime()}),(cr=mt._videosdkLogs)===null||cr===void 0||cr.pushLogs({logType:"INFO",logText:"CPU Limitation resolved"}),hn=!1))}catch{}}catch{}case 5:case"end":return Ct.stop()}},ht,null,[[1,3]])})),1e3),this._sendTransport.on("connect",function(ht,At,Ke){var Mt,rn=ht.dtlsParameters;(Mt=mt._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:kt,status:1}),mt._socketRequest("connectWebRtcTransport",{transportId:mt._sendTransport.id,dtlsParameters:rn}).then(function(){At()}).catch(function(qt){Ke(qt)})}),this._sendTransport.on("produce",function(){var ht=(0,f.A)(m().mark(function At(Ke,Mt,rn){var qt,ln,en,yn,cn,Kt,cr,er;return m().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return qt=Ke.kind,ln=Ke.rtpParameters,en=Ke.appData,Ct.prev=1,(yn=mt._openTelemetry)===null||yn===void 0||yn.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:kt,status:1}),Ct.next=2,mt._socketRequest("produce",{transportId:mt._sendTransport.id,kind:qt,rtpParameters:ln,appData:en});case 2:cn=Ct.sent,Kt=cn.id,Mt({id:Kt}),Ct.next=4;break;case 3:Ct.prev=3,er=Ct.catch(1),(cr=mt._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:er.message}}),rn(er);case 4:case"end":return Ct.stop()}},At,null,[[1,3]])}));return function(At,Ke,Mt){return ht.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var ht=(0,f.A)(m().mark(function At(Ke,Mt,rn){var qt,ln,en,yn,cn,Kt,cr,er;return m().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return qt=Ke.sctpStreamParameters,ln=Ke.label,en=Ke.protocol,yn=Ke.appData,Ct.prev=1,Ct.next=2,mt._socketRequest("produceData",{transportId:mt._sendTransport.id,sctpStreamParameters:qt,label:ln,protocol:en,appData:yn});case 2:cn=Ct.sent,Kt=cn.id,Mt({id:Kt}),Ct.next=4;break;case 3:Ct.prev=3,er=Ct.catch(1),(cr=mt._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:er.message}}),rn(er);case 4:case"end":return Ct.stop()}},At,null,[[1,3]])}));return function(At,Ke,Mt){return ht.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(){var ht=(0,f.A)(m().mark(function At(Ke){var Mt,rn,qt,ln,en,yn;return m().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return en=Array,cn.next=1,mt._sendTransport.getStats();case 1:yn=cn.sent,(rn=en.from.call(en,yn).filter(function(Kt){var cr=(0,y.A)(Kt,2)[1];return cr.type==="local-candidate"||cr.type==="remote-candidate"}).map(function(Kt){return(0,y.A)(Kt,2)[1]})).length>0&&((qt=mt._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:'Send Trasnport State Change "'.concat(Ke,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(rn)}})),Ke==="connected"&&mt.emitMeetingStateChange(Oi),(Mt=mt._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(Ke),span:kt,status:1}),Ke==="failed"&&((ln=mt._videosdkLogs)===null||ln===void 0||ln.pushLogs({logText:"ERROR_MEETING_MEDIA_CONNECTION_FAILED",logType:"ERROR",attributes:{error:"Unable to connect to the meeting or media. Please check your network connection, ensure your firewall or security settings are not blocking the application, or try connecting using a different network."},dashboardLog:!0}),mt.restartIce()),mt._transportState=Ke;case 2:case"end":return cn.stop()}},At)}));return function(At){return ht.apply(this,arguments)}}()),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:kt,status:1,message:"Send Transport Created Successfully"});case 1:case"end":return Nt.stop()}},ge,this)})),function(ge,J){return Tn.apply(this,arguments)})},{key:"createConsumerTransport",value:(_t=(0,f.A)(m().mark(function ge(J,re){var ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt=this;return m().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:le=J.id,Ne=J.iceParameters,Me=J.iceCandidates,ze=J.dtlsParameters,Et=J.sctpParameters,kt=(ae=this._openTelemetry)===null||ae===void 0?void 0:ae.trace({spanName:"Creating Recieve Transport",span:re||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:le,iceParameters:Ne,iceCandidates:Me,dtlsParameters:ze,sctpParameters:Et,iceServers:this._iceServers}),this._recvTransport.on("connect",function(ht,At,Ke){var Mt,rn=ht.dtlsParameters;(Mt=mt._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:kt,status:1}),mt._socketRequest("connectWebRtcTransport",{transportId:mt._recvTransport.id,dtlsParameters:rn}).then(function(){At()}).catch(function(qt){Ke(qt)})}),this._recvTransport.on("connectionstatechange",function(){var ht=(0,f.A)(m().mark(function At(Ke){var Mt,rn,qt,ln,en;return m().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:return ln=Array,yn.next=1,mt._recvTransport.getStats();case 1:en=yn.sent,(rn=ln.from.call(ln,en).filter(function(cn){var Kt=(0,y.A)(cn,2)[1];return Kt.type==="local-candidate"||Kt.type==="remote-candidate"}).map(function(cn){return(0,y.A)(cn,2)[1]})).length>0&&((qt=mt._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:'Recv Trasnport State Change "'.concat(Ke,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(rn)}})),(Mt=mt._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(Ke),span:kt,status:1}),Ke==="failed"&&mt.restartIce(),mt._transportState=Ke;case 2:case"end":return yn.stop()}},At)}));return function(At){return ht.apply(this,arguments)}}()),Ut=0,mn=this._metrics.addNewProbe(this._recvTransport,"transport"),jt=new Map,an=new Map,hn=new Map,Ce=new Set,mn.onStatsCollected=function(ht){try{var At=function(rn,qt,ln){mt._stats.consumerStats||(mt._stats.consumerStats={});var en=qt.appData.peerId;mt._stats.consumerStats[en]||(mt._stats.consumerStats[en]={}),mt._stats.consumerStats[en][ln]||(mt._stats.consumerStats[en][ln]=[]),mt._latestStats[qt.track.id.replace(/[{}]/g,"")]=[rn],Ut%5==0&&mt._stats.consumerStats[en][ln].push(rn)},Ke=function(rn){ht[rn].forEach(function(qt){var ln,en=Ma(mt._consumers);try{for(en.s();!(ln=en.n()).done;){var yn=(0,y.A)(ln.value,2),cn=(yn[0],yn[1]),Kt=cn.track.id.replace(/[{}]/g,"");if(Kt===qt.trackId){var cr=cn.appData.share?cn.kind==="audio"?"shareAudio":"share":cn.kind;if(At(qt,cn,cr),cr==="audio"||cr==="shareAudio")return;if(qt.bitrate>0)jt.has(Kt)&&jt.delete(Kt);else{var er=jt.get(Kt);er?er.detected+5e3<Date.now()&&mt._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"stuck",peerId:cn.appData.peerId,streamId:Kt}):jt.set(Kt,{detected:Date.now()})}var Ct=qt.trackId,En=qt.freezeCount;if(!Ct||En===void 0)return;var _r=an.get(Ct);if(_r===void 0)return void an.set(Ct,En);if(En>_r)mt._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"freeze-detected",peerId:cn.appData.peerId,streamId:Kt}),hn.set(Ct,Date.now()),Ce.delete(Ct);else{var Zr=hn.get(Ct);Zr&&!Ce.has(Ct)&&Date.now()-Zr>5e3&&(mt._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"freeze-resolved",peerId:cn.appData.peerId,streamId:Kt}),Ce.add(Ct))}an.set(Ct,En)}}}catch(Jr){en.e(Jr)}finally{en.f()}})};Ke("audio"),Ke("video"),Ut++}catch(rn){var Mt;(Mt=mt._videosdkLogs)===null||Mt===void 0||Mt.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:rn.message}}),console.log("CONSUMER CATCH",rn)}},mn.start(),this._recvTransport.observer.on("close",function(){mn.stop(),mt._metrics.removeExistingProbe(mn)}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:kt,status:1,message:"Recieve Transport Created Successfully"});case 1:case"end":return Nt.stop()}},ge,this)})),function(ge,J){return _t.apply(this,arguments)})},{key:"emitMeetingStateChange",value:function(ge){this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:ge}),this._meetingConnectionState=ge}},{key:"joinRoom",value:(Dt=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt,Nt,ht,At,Ke,Mt,rn,qt,ln,en,yn,cn;return m().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return fe.debug("joinRoom()"),Kt.prev=1,Me=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new Er.pF({handlerName:this._handlerName}),Kt.next=2,this._socketRequest("getRouterRtpCapabilities");case 2:return ze=Kt.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(ze.headerExtensions=(Et=ze.headerExtensions)===null||Et===void 0?void 0:Et.filter(function(cr){return cr.uri!="urn:3gpp:video-orientation"})):ze.headerExtensions=(kt=ze.headerExtensions)===null||kt===void 0?void 0:kt.filter(function(cr){return cr.uri!="urn:3gpp:video-orientation"}),Kt.next=3,this._mediasoupDevice.load({routerRtpCapabilities:ze});case 3:if((re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:Me,status:1,attributes:{routerRtpCapabilities:JSON.stringify(ze).toString()},message:"Router Capabilities Loaded"}),!this._produce){Kt.next=5;break}return Kt.next=4,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 4:Ut=Kt.sent,this.createProducerTransport(Ut,this._joinSpan);case 5:if(!this._consume){Kt.next=7;break}return Kt.next=6,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 6:mn=Kt.sent,this.createConsumerTransport(mn,this._joinSpan);case 7:return Kt.next=8,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(ae=this._mediasoupDevice)===null||ae===void 0?void 0:ae.rtpCapabilities,sctpCapabilities:(ie=this._mediasoupDevice)===null||ie===void 0?void 0:ie.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData});case 8:jt=Kt.sent,an=jt.peers,hn=jt.poll,Ce=jt.messages,ft.dispatch(wn("connected")),(le=this._openTelemetry)===null||le===void 0||le.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:an,poll:hn,messages:Ce,baseUrl:this._baseUrl}),ft.dispatch(Is()),ft.dispatch(Wn({text:"You are in the room!",timeout:3e3})),mt=Ma(an);try{for(mt.s();!(Nt=mt.n()).done;)ht=Nt.value,At=mi(xa(xa({},ht),{},{consumers:[],dataConsumers:[]})),ft.dispatch(At),this._eventEmitter.emit(At.type,At.payload)}catch(cr){mt.e(cr)}finally{mt.f()}this._produce&&(ft.dispatch(hr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((Ke=this._openTelemetry)===null||Ke===void 0||Ke.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(cr){cr.stop()})),Mt=qn(),this._webcamEnabled&&(!Mt||Mt.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((rn=this._openTelemetry)===null||rn===void 0||rn.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(cr){cr.stop()}))),window.SHOW_INFO&&(qt=ft.getState(),ln=qt.me,ft.dispatch(Ir(ln.id))),(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),Kt.next=10;break;case 9:Kt.prev=9,cn=Kt.catch(1),fe.error("joinRoom() failed:%o",cn),(en=this._videosdkLogs)===null||en===void 0||en.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:cn.message}}),(yn=this._openTelemetry)===null||yn===void 0||yn.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(cn)}),ft.dispatch(Wn({type:"error",text:"Could not join the room: ".concat(cn)})),this.close({sendLeft:!0});case 10:case"end":return Kt.stop()}},ge,this,[[1,9]])})),function(){return Dt.apply(this,arguments)})},{key:"switchingRoom",value:(St=(0,f.A)(m().mark(function ge(J){var re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt,Nt,ht,At;return m().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"switchingRoom() start",attributes:{"room.id":J,"peer.id":this._peerId,display_name:this._displayName}}),Ke.prev=1,Et=(ie=this._openTelemetry)===null||ie===void 0?void 0:ie.trace({name:"switch room join request",parentSpan:ae}),Ke.next=2,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(le=this._mediasoupDevice)===null||le===void 0?void 0:le.rtpCapabilities,sctpCapabilities:(Ne=this._mediasoupDevice)===null||Ne===void 0?void 0:Ne.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData,switchingRoom:!0});case 2:kt=Ke.sent,Ut=kt.peers,mn=kt.poll,jt=kt.messages,(Me=this._openTelemetry)===null||Me===void 0||Me.completeSpan({span:Et,status:1,message:"Join request successful in switched room"}),ft.dispatch(wn("connected")),this._eventEmitter.emit("MEETING_JOINED",{switchRoomId:J,peers:Ut,poll:mn,messages:jt,baseUrl:this._baseUrl}),ft.dispatch(Is()),ft.dispatch(Wn({text:"You are in the room!",timeout:3e3})),an=Ma(Ut);try{for(an.s();!(hn=an.n()).done;)Ce=hn.value,mt=mi(xa(xa({},Ce),{},{consumers:[],dataConsumers:[]})),ft.dispatch(mt),this._eventEmitter.emit(mt.type,mt.payload)}catch(Mt){an.e(Mt)}finally{an.f()}(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:ae,status:1,message:"Room switch completed successfully"}),Ke.next=4;break;case 3:Ke.prev=3,At=Ke.catch(1),fe.error("joinRoom() failed:%o",At),(Nt=this._videosdkLogs)===null||Nt===void 0||Nt.pushLogs({logText:"Error Could not join the switched room",logType:"ERROR",attributes:{error:At.message}}),(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:ae,status:2,message:"Room switch failed: ".concat(At.message)}),ft.dispatch(Wn({type:"error",text:"Could not join the switched room: ".concat(At)})),this.close({sendLeft:!0});case 4:case"end":return Ke.stop()}},ge,this,[[1,3]])})),function(ge){return St.apply(this,arguments)})},{key:"_updateMics",value:(rt=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt=arguments;return m().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return re=mt.length>0&&mt[0]!==void 0?mt[0]:void 0,this._mics=new Map,fe.debug("_updateMics() |"),ae=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"_updateMics() Calling for Getting System Mic list",span:re||null}),Nt.prev=1,Nt.next=2,navigator.mediaDevices.enumerateDevices();case 2:Ne=Nt.sent,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting System Mic list",span:ae,status:1,attributes:{systemDevice:Ne?JSON.stringify(Ne):"Device not found"}}),Me=Ma(Ne);try{for(Me.s();!(ze=Me.n()).done;)(Et=ze.value).kind=="audioinput"&&this._mics.set(Et.deviceId,Et)}catch(ht){Me.e(ht)}finally{Me.f()}kt=Array.from(this._mics.values()),Ut=kt.length,mn=this._mic.device?this._mic.device.deviceId:void 0,Ut===0?this._mic.device=null:this._mics.has(mn)||(this._mic.device=kt[0]),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:1,message:"Update Mic"}),Nt.next=5;break;case 3:if(Nt.prev=3,!((Ce=Nt.catch(1))instanceof TypeError)){Nt.next=5;break}if(Ce.name!=="TypeError"){Nt.next=4;break}throw an=lr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(an),(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({span:ae,status:2,message:"Error in updateMics() :: ".concat(an.message)}),new Error(an.message);case 4:throw(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ae,status:2,message:"Error in updateMics() :: ".concat(Ce.message)}),new Error(Ce.message);case 5:case"end":return Nt.stop()}},ge,this,[[1,3]])})),function(){return rt.apply(this,arguments)})},{key:"_updateWebcams",value:(De=(0,f.A)(m().mark(function ge(){var J,re,ae,ie,le,Ne,Me,ze,Et,kt,Ut,mn,jt,an,hn,Ce,mt,Nt=arguments;return m().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return re=Nt.length>0&&Nt[0]!==void 0?Nt[0]:void 0,fe.debug("_updateWebcams()"),this._webcams=new Map,fe.debug("_updateWebcams() | calling enumerateDevices()"),ae=(J=this._openTelemetry)===null||J===void 0?void 0:J.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",span:re||null}),ht.prev=1,ht.next=2,navigator.mediaDevices.enumerateDevices();case 2:Ne=ht.sent,(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Getting System Webcam list",span:ae,status:1,attributes:{systemDevice:Ne?JSON.stringify(Ne):"Device not found"}}),Me=Ma(Ne),ht.prev=3,Me.s();case 4:if((ze=Me.n()).done){ht.next=7;break}if((Et=ze.value).kind==="videoinput"){ht.next=5;break}return ht.abrupt("continue",6);case 5:this._webcams.set(Et.deviceId,Et);case 6:ht.next=4;break;case 7:ht.next=9;break;case 8:ht.prev=8,Ce=ht.catch(3),Me.e(Ce);case 9:return ht.prev=9,Me.f(),ht.finish(9);case 10:kt=Array.from(this._webcams.values()),Ut=kt.length,(mn=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=mn),fe.debug("_updateWebcams() [webcams:%o]",kt),Ut===0?this._webcam.device=null:this._webcams.has(mn)||(this._webcam.device=kt[0]),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:ae,status:1,message:"Update Webcam"}),ft.dispatch(vr(this._webcams.size>1)),ht.next=13;break;case 11:if(ht.prev=11,!((mt=ht.catch(1))instanceof TypeError)){ht.next=13;break}if(mt.name!=="TypeError"){ht.next=12;break}throw an=lr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(an),(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({span:ae,status:2,message:"Error in updateWebcams() :: ".concat(an.message)}),new Error(an.message);case 12:throw(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:ae,status:2,message:"Error in updateWebcams() :: ".concat(mt.message)}),new Error(mt.message);case 13:case"end":return ht.stop()}},ge,this,[[1,11],[3,8,9,10]])})),function(){return De.apply(this,arguments)})},{key:"_getWebcamType",value:function(ge){return/(back|rear)/i.test(ge.label)?(fe.debug("_getWebcamType() | it seems to be a back camera"),"back"):(fe.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(oe=(0,f.A)(m().mark(function ge(J){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!J.paused){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._socketRequest("pauseConsumer",{consumerId:J.id});case 2:J.pause(),ft.dispatch(ls(J.id,"local")),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("_pauseConsumer() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:ae.message}}),ft.dispatch(Wn({type:"error",text:"Error pausing Consumer: ".concat(ae)}));case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return oe.apply(this,arguments)})},{key:"_resumeConsumer",value:(Y=(0,f.A)(m().mark(function ge(J){var re,ae;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(J.paused){ie.next=1;break}return ie.abrupt("return");case 1:return ie.prev=1,ie.next=2,this._socketRequest("resumeConsumer",{consumerId:J.id});case 2:J.resume(),ft.dispatch(Ji(J.id,"local")),ie.next=4;break;case 3:ie.prev=3,ae=ie.catch(1),fe.error("_resumeConsumer() | failed:%o",ae),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:ae.message}}),ft.dispatch(Wn({type:"error",text:"Error resuming Consumer: ".concat(ae)}));case 4:case"end":return ie.stop()}},ge,this,[[1,3]])})),function(ge){return Y.apply(this,arguments)})},{key:"_getExternalVideoStream",value:($=(0,f.A)(m().mark(function ge(){var J=this;return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!this._externalVideoStream){re.next=1;break}return re.abrupt("return",this._externalVideoStream);case 1:if(!(this._externalVideo.readyState<3)){re.next=2;break}return re.next=2,new Promise(function(ae){return J._externalVideo.addEventListener("canplay",ae)});case 2:if(!this._externalVideo.captureStream){re.next=3;break}this._externalVideoStream=this._externalVideo.captureStream(),re.next=5;break;case 3:if(!this._externalVideo.mozCaptureStream){re.next=4;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),re.next=5;break;case 4:throw new Error("video.captureStream() not supported");case 5:return re.abrupt("return",this._externalVideoStream);case 6:case"end":return re.stop()}},ge,this)})),function(){return $.apply(this,arguments)})},{key:"toggleE2EEEnabled",value:(te=(0,f.A)(m().mark(function ge(J){return m().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!this.e2eeManager){re.next=1;break}this._peerId&&this.e2eeManager.setParticipantCryptorEnabled(J,this._peerId),this.isE2EEEnabled=J,re.next=2;break;case 1:throw Error("e2ee not configured, please set e2ee settings within the room options");case 2:case"end":return re.stop()}},ge,this)})),function(ge){return te.apply(this,arguments)})},{key:"_emitError",value:function(ge){this._eventEmitter.emit("ERROR",ge)}}],[{key:"init",value:function(ge){ft=ge.store}}]);var te,$,Y,oe,De,rt,St,Dt,_t,Tn,Vt,zn,vn,Yr,Fr,ia,Qr,xs,Rs,Xi,Ks,Ys,so,Mi,Fi,oo,ac,zo,Vi,Bs,Ro,ic,ks,Uo,qi,Cs,wc,ko,Ho,co,Co,ki,fi,ds,ri,gi,Qs,Zi,lo,vi,Js,zs,To,ps,uo,zc,_a,Po,Ts,sc,Fo,es,No,po,ts,Ps,a,l,O,q,ee,me,je,st,dt,Gt,Mn,Un,Yn,Sr,va,Na,Ja,yi,Vo,Uc,mo,Us,oc,ms,La,ns,Hs,Xs,qa,qo,cc,ho,Ec,hs,si,Hc,Al,Ol,Dl,Fc,oi,Zo,Wo,$o,Ga,Go,lc,Ml,Ll,su,Vc}();function Bo(te){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,f.A)(m().mark(function te($){var Y,oe,De,rt,St,Dt,_t=this;return m().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:if(Tn.prev=0,this.e2eeManager){Tn.next=2;break}return oe=il,De=$,Tn.next=1,tc();case 1:rt=Tn.sent,St={keyProvider:De,worker:rt},this.e2eeManager=new oe(St),this.e2eeManager.on(Ss.KS.ParticipantEncryptionStatusChanged,function(Vt){_t.isE2EEEnabled=Vt}),this.e2eeManager.on(Ss.KS.E2EEStateChange,function(Vt){_t._eventEmitter.emit("E2EE_STATE_CHANGE",Vt)}),(Y=this.e2eeManager)===null||Y===void 0||Y.setup(this),this.toggleE2EEEnabled(!0);case 2:Tn.next=4;break;case 3:throw Tn.prev=3,Dt=Tn.catch(0),console.error("Error setting up E2EE: ",Dt),new Error("Error setting up E2EE: "+Dt.message);case 4:case"end":return Tn.stop()}},te,this,[[0,3]])}))).apply(this,arguments)}},2073:function(j,R,d){var S;j.exports=(S=d(9021),d(7165),S.pad.AnsiX923={pad:function(y,b){var T=y.sigBytes,f=4*b,h=f-T%f,k=T+h-1;y.clamp(),y.words[k>>>2]|=h<<24-k%4*8,y.sigBytes+=h},unpad:function(y){var b=255&y.words[y.sigBytes-1>>>2];y.sigBytes-=b}},S.pad.Ansix923)},2107:(j,R,d)=>{d.d(R,{kR:()=>y,nI:()=>S,wZ:()=>b});var S={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER",SEND_AND_RECV:"SEND_AND_RECV",SIGNALLING_ONLY:"SIGNALLING_ONLY",RECV_ONLY:"RECV_ONLY"};function y(T){return T===S.CONFERENCE||T===S.SEND_AND_RECV}function b(T){return T===S.VIEWER||T===S.SIGNALLING_ONLY}},2109:function(j,R,d){var S;(function(y,b){var T,f="user-agent",h="",k="function",E="undefined",H="object",m="string",P="browser",v="cpu",U="device",C="engine",_="os",w="result",p="name",x="type",A="vendor",I="version",M="architecture",F="major",z="model",G="console",Z="mobile",ce="tablet",X="smarttv",Ee="wearable",Se="xr",xe="embedded",_e="inapp",Pe="brands",He="formFactors",pe="fullVersionList",Ge="platform",Te="platformVersion",Ve="bitness",qe="sec-ch-ua",nt=qe+"-full-version-list",Bt=qe+"-arch",Pr=qe+"-"+Ve,Ur=qe+"-form-factors",Zn=qe+"-"+Z,fr=qe+"-"+z,gr=qe+"-"+Ge,Bn=gr+"-version",Ie=[Pe,pe,Z,z,Ge,Te,M,He,Ve],Be="Amazon",Ye="Apple",Qt="ASUS",Ft="BlackBerry",xt="Google",pn="Huawei",Ln="Lenovo",zt="Honor",sr="LG",Hr="Microsoft",Rr="Motorola",Vr="Nvidia",zr="OnePlus",Ar="OPPO",$r="Samsung",ga="Sharp",ea="Sony",oa="Xiaomi",Nn="Zebra",Ha="Chrome",Ca="Chromium",Gr="Chromecast",dr="Edge",at="Firefox",ut="Opera",Wt="Facebook",Tt="Sogou",tn="Mobile ",Xt=" Browser",Xe="Windows",Sn=typeof y!==E,Rn=Sn&&y.navigator?y.navigator:b,Vn=Rn&&Rn.userAgentData?Rn.userAgentData:b,or=function(sn){for(var qn={},jn=0;jn<sn.length;jn++)qn[sn[jn].toUpperCase()]=sn[jn];return qn},$t=function(sn,qn){if(typeof sn===H&&sn.length>0){for(var jn in sn)if(bn(qn)==bn(sn[jn]))return!0;return!1}return!!Pn(sn)&&bn(qn)==bn(sn)},bt=function(sn,qn){for(var jn in sn)return/^(browser|cpu|device|engine|os)$/.test(jn)||!!qn&&bt(sn[jn])},Pn=function(sn){return typeof sn===m},kn=function(sn){if(!sn)return b;for(var qn=[],jn=Or(/\\?\"/g,sn).split(","),tr=0;tr<jn.length;tr++)if(jn[tr].indexOf(";")>-1){var wn=Hn(jn[tr]).split(";v=");qn[tr]={brand:wn[0],version:wn[1]}}else qn[tr]=Hn(jn[tr]);return qn},bn=function(sn){return Pn(sn)?sn.toLowerCase():sn},Nr=function(sn){return Pn(sn)?Or(/[^\d\.]/g,sn).split(".")[0]:b},Er=function(sn){for(var qn in sn){var jn=sn[qn];typeof jn==H&&jn.length==2?this[jn[0]]=jn[1]:this[jn]=b}return this},Or=function(sn,qn){return Pn(qn)?qn.replace(sn,h):qn},Jn=function(sn){return Or(/\\?\"/g,sn)},Hn=function(sn,qn){if(Pn(sn))return sn=Or(/^\s\s*/,sn),typeof qn===E?sn:sn.substring(0,500)},ha=function(sn,qn){if(sn&&qn)for(var jn,tr,wn,On,Ir,hr,vr=0;vr<qn.length&&!Ir;){var An=qn[vr],jr=qn[vr+1];for(jn=tr=0;jn<An.length&&!Ir&&An[jn];)if(Ir=An[jn++].exec(sn))for(wn=0;wn<jr.length;wn++)hr=Ir[++tr],typeof(On=jr[wn])===H&&On.length>0?On.length===2?typeof On[1]==k?this[On[0]]=On[1].call(this,hr):this[On[0]]=On[1]:On.length>=3&&(typeof On[1]!==k||On[1].exec&&On[1].test?On.length==3?this[On[0]]=hr?hr.replace(On[1],On[2]):b:On.length==4?this[On[0]]=hr?On[3].call(this,hr.replace(On[1],On[2])):b:On.length>4&&(this[On[0]]=hr?On[3].apply(this,[hr.replace(On[1],On[2])].concat(On.slice(4))):b):On.length>3?this[On[0]]=hr?On[1].apply(this,On.slice(2)):b:this[On[0]]=hr?On[1].call(this,hr,On[2]):b):this[On]=hr||b;vr+=2}},ca=function(sn,qn){for(var jn in qn)if(typeof qn[jn]===H&&qn[jn].length>0){for(var tr=0;tr<qn[jn].length;tr++)if($t(qn[jn][tr],sn))return jn==="?"?b:jn}else if($t(qn[jn],sn))return jn==="?"?b:jn;return qn.hasOwnProperty("*")?qn["*"]:sn},Ta={ME:"4.90","NT 3.51":"3.51","NT 4.0":"4.0",2e3:["5.0","5.01"],XP:["5.1","5.2"],Vista:"6.0",7:"6.1",8:"6.2",8.1:"6.3",10:["6.4","10.0"],NT:""},Oa={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":b},ss={Chrome:"Google Chrome",Edge:"Microsoft Edge","Edge WebView2":"Microsoft Edge WebView2","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"},ai={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[I,[p,tn+"Chrome"]],[/webview.+edge\/([\w\.]+)/i],[I,[p,dr+" WebView"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[I,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,I],[/opios[\/ ]+([\w\.]+)/i],[I,[p,ut+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[I,[p,ut+" GX"]],[/\bopr\/([\w\.]+)/i],[I,[p,ut]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[I,[p,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[I,[p,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[p,I],[/quark(?:pc)?\/([-\w\.]+)/i],[I,[p,"Quark"]],[/\bddg\/([\w\.]+)/i],[I,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[I,[p,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[I,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[I,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[I,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[I,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[I,[p,"Smart "+Ln+Xt]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure"+Xt],I],[/\bfocus\/([\w\.]+)/i],[I,[p,at+" Focus"]],[/\bopt\/([\w\.]+)/i],[I,[p,ut+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[I,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[I,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[I,[p,ut+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[I,[p,"MIUI"+Xt]],[/fxios\/([\w\.-]+)/i],[I,[p,tn+at]],[/\bqihoobrowser\/?([\w\.]*)/i],[I,[p,"360"]],[/\b(qq)\/([\w\.]+)/i],[[p,/(.+)/,"$1Browser"],I],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+Xt],I],[/samsungbrowser\/([\w\.]+)/i],[I,[p,$r+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[I,[p,Tt+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,Tt+" Mobile"],I],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[p,I],[/(lbbrowser|rekonq)/i],[p],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[I,p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,Wt],I,[x,_e]],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat|klarna)[\/ ]([-\w\.]+)/i],[p,I,[x,_e]],[/\bgsa\/([\w\.]+) .*safari\//i],[I,[p,"GSA"],[x,_e]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[I,[p,"TikTok"],[x,_e]],[/\[(linkedin)app\]/i],[p,[x,_e]],[/(chromium)[\/ ]([-\w\.]+)/i],[p,I],[/headlesschrome(?:\/([\w\.]+)| )/i],[I,[p,Ha+" Headless"]],[/wv\).+chrome\/([\w\.]+).+edgw\//i],[I,[p,dr+" WebView2"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,Ha+" WebView"],I],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[I,[p,"Android"+Xt]],[/chrome\/([\w\.]+) mobile/i],[I,[p,tn+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,I],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[I,[p,tn+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[p,tn+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[I,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[I,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[p,I],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[p,tn+at],I],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],I],[/(wolvic|librewolf)\/([\w\.]+)/i],[p,I],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[I,[p,at+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[p,[I,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[p,[I,/[^\d\.]+./,h]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[M,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[M,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[M,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[M,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[M,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[M,/ower/,h,bn]],[/ sun4\w[;\)]/i],[[M,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[M,bn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[z,[A,$r],[x,ce]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr]|browser)[-\w]+)/i,/sec-(sgh\w+)/i],[z,[A,$r],[x,Z]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[z,[A,Ye],[x,Z]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[z,[A,Ye],[x,ce]],[/(macintosh);/i],[z,[A,Ye]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[z,[A,ga],[x,Z]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[z,[A,zt],[x,ce]],[/honor([-\w ]+)[;\)]/i],[z,[A,zt],[x,Z]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[z,[A,pn],[x,ce]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[z,[A,pn],[x,Z]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[z,/_/g," "],[A,oa],[x,ce]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[z,/_/g," "],[A,oa],[x,Z]],[/droid.+; (cph2[3-6]\d[13579]|((gm|hd)19|(ac|be|in|kb)20|(d[en]|eb|le|mt)21|ne22)[0-2]\d|p[g-k]\w[1m]10)\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[z,[A,zr],[x,Z]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[z,[A,Ar],[x,Z]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[z,[A,ca,{OnePlus:["203","304","403","404","413","415"],"*":Ar}],[x,ce]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[z,[A,"BLU"],[x,Z]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[z,[A,"Vivo"],[x,Z]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[z,[A,"Realme"],[x,Z]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[z,[A,Ln],[x,ce]],[/lenovo[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i],[z,[A,Ln],[x,Z]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ]([\w\s]+)(\)| bui)/i,/((?:moto(?! 360)[-\w\(\) ]+|xt\d{3,4}[cgkosw\+]?[-\d]*|nexus 6)(?= bui|\)))/i],[z,[A,Rr],[x,Z]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[z,[A,Rr],[x,ce]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[z,[A,sr],[x,ce]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch|webos))(\w+)/i,/\blg-?([\d\w]+) bui/i],[z,[A,sr],[x,Z]],[/(nokia) (t[12][01])/i],[A,z,[x,ce]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[z,/_/g," "],[x,Z],[A,"Nokia"]],[/(pixel (c|tablet))\b/i],[z,[A,xt],[x,ce]],[/droid.+;(?: google)? (g(01[13]a|020[aem]|025[jn]|1b60|1f8f|2ybb|4s1m|576d|5nz6|8hhn|8vou|a02099|c15s|d1yq|e2ae|ec77|gh2x|kv4x|p4bc|pj41|r83y|tt9q|ur25|wvk6)|pixel[\d ]*a?( pro)?( xl)?( fold)?( \(5g\))?)( bui|\))/i],[z,[A,xt],[x,Z]],[/(google) (pixelbook( go)?)/i],[A,z],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-\w\w\d\d)(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[z,[A,ea],[x,Z]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[z,"Xperia Tablet"],[A,ea],[x,ce]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[z,[A,Be],[x,ce]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[z,/(.+)/g,"Fire Phone $1"],[A,Be],[x,Z]],[/(playbook);[-\w\),; ]+(rim)/i],[z,A,[x,ce]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[z,[A,Ft],[x,Z]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[z,[A,Qt],[x,ce]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[z,[A,Qt],[x,Z]],[/(nexus 9)/i],[z,[A,"HTC"],[x,ce]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[A,[z,/_/g," "],[x,Z]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[z,[A,"TCL"],[x,ce]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[z,[A,"TCL"],[x,Z]],[/(itel) ((\w+))/i],[[A,bn],z,[x,ca,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[z,[A,"Acer"],[x,ce]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[z,[A,"Meizu"],[x,Z]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[z,[A,"Ulefone"],[x,Z]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[z,[A,"Energizer"],[x,Z]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[z,[A,"Cat"],[x,Z]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[z,[A,"Smartfren"],[x,Z]],[/droid.+; (a(in)?(0(15|59|6[35])|142)p?)/i],[z,[A,"Nothing"],[x,Z]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[z,[A,"Archos"],[x,ce]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[z,[A,"Archos"],[x,Z]],[/; (n159v)/i],[z,[A,"HMD"],[x,Z]],[/(imo) (tab \w+)/i,/(infinix|tecno) (x1101b?|p904|dp(7c|8d|10a)( pro)?|p70[1-3]a?|p904|t1101)/i],[A,z,[x,ce]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|infinix|lava|oneplus|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(oppo) ?([\w ]+) bui/i],[A,z,[x,Z]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[A,z,[x,ce]],[/(surface duo)/i],[z,[A,Hr],[x,ce]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[z,[A,"Fairphone"],[x,Z]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[z,[A,Vr],[x,ce]],[/(sprint) (\w+)/i],[A,z,[x,Z]],[/(kin\.[onetw]{3})/i],[[z,/\./g," "],[A,Hr],[x,Z]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[z,[A,Nn],[x,ce]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[z,[A,Nn],[x,Z]],[/smart-tv.+(samsung)/i],[A,[x,X]],[/hbbtv.+maple;(\d+)/i],[[z,/^/,"SmartTV"],[A,$r],[x,X]],[/(vizio)(?: |.+model\/)(\w+-\w+)/i,/tcast.+(lg)e?. ([-\w]+)/i],[A,z,[x,X]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[A,sr],[x,X]],[/(apple) ?tv/i],[A,[z,Ye+" TV"],[x,X]],[/crkey.*devicetype\/chromecast/i],[[z,Gr+" Third Generation"],[A,xt],[x,X]],[/crkey.*devicetype\/([^/]*)/i],[[z,/^/,"Chromecast "],[A,xt],[x,X]],[/fuchsia.*crkey/i],[[z,Gr+" Nest Hub"],[A,xt],[x,X]],[/crkey/i],[[z,Gr],[A,xt],[x,X]],[/(portaltv)/i],[z,[A,Wt],[x,X]],[/droid.+aft(\w+)( bui|\))/i],[z,[A,Be],[x,X]],[/(shield \w+ tv)/i],[z,[A,Vr],[x,X]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[z,[A,ga],[x,X]],[/(bravia[\w ]+)( bui|\))/i],[z,[A,ea],[x,X]],[/(mi(tv|box)-?\w+) bui/i],[z,[A,oa],[x,X]],[/Hbbtv.*(technisat) (.*);/i],[A,z,[x,X]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[A,/.+\/(\w+)/,"$1",ca,{LG:"lge"}],[z,Hn],[x,X]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[z,[x,X]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:|large screen[\w ]+safari)\b/i],[[x,X]],[/(playstation \w+)/i],[z,[A,ea],[x,G]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[z,[A,Hr],[x,G]],[/(ouya)/i,/(nintendo) (\w+)/i,/(retroid) (pocket ([^\)]+))/i],[A,z,[x,G]],[/droid.+; (shield)( bui|\))/i],[z,[A,Vr],[x,G]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[z,[A,$r],[x,Ee]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[A,z,[x,Ee]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[z,[A,Ar],[x,Ee]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[z,[A,Ye],[x,Ee]],[/(opwwe\d{3})/i],[z,[A,zr],[x,Ee]],[/(moto 360)/i],[z,[A,Rr],[x,Ee]],[/(smartwatch 3)/i],[z,[A,ea],[x,Ee]],[/(g watch r)/i],[z,[A,sr],[x,Ee]],[/droid.+; (wt63?0{2,3})\)/i],[z,[A,Nn],[x,Ee]],[/droid.+; (glass) \d/i],[z,[A,xt],[x,Se]],[/(pico) (4|neo3(?: link|pro)?)/i],[A,z,[x,Se]],[/(quest( \d| pro)?s?).+vr/i],[z,[A,Wt],[x,Se]],[/mobile vr; rv.+firefox/i],[[x,Se]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[A,[x,xe]],[/(aeobc)\b/i],[z,[A,Be],[x,xe]],[/(homepod).+mac os/i],[z,[A,Ye],[x,xe]],[/windows iot/i],[[x,xe]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[z,[x,ca,{mobile:"Mobile",xr:"VR","*":ce}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[x,ce]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[x,Z]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[z,[A,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[I,[p,dr+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[p,I],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[I,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,I],[/ladybird\//i],[[p,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[I,p]],os:[[/(windows nt) (6\.[23]); arm/i],[[p,/N/,"R"],[I,ca,Ta]],[/(windows (?:phone|mobile|iot))(?: os)?[\/ ]?([\d\.]*( se)?)/i,/(windows)[\/ ](1[01]|2000|3\.1|7|8(\.1)?|9[58]|me|server 20\d\d( r2)?|vista|xp)/i],[p,I],[/windows nt ?([\d\.\)]*)(?!.+xbox)/i,/\bwin(?=3| ?9|n)(?:nt| 9x )?([\d\.;]*)/i],[[I,/(;|\))/g,"",ca,Ta],[p,Xe]],[/(windows ce)\/?([\d\.]*)/i],[p,I],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[I,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+(haiku|morphos))/i],[[p,"macOS"],[I,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[I,[p,Gr+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[I,[p,Gr+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[I,[p,Gr+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[I,[p,Gr+" Linux"]],[/crkey\/([\d\.]+)/i],[I,[p,Gr]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[I,p],[/(ubuntu) ([\w\.]+) like android/i],[[p,/(.+)/,"$1 Touch"],I],[/(harmonyos)[\/ ]?([\d\.]*)/i,/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen)\w*[-\/\.; ]?([\d\.]*)/i],[p,I],[/\(bb(10);/i],[I,[p,Ft]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[I,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[I,[p,at+" OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i,/webos(?:[ \/]?|\.tv-20(?=2[2-9]))(\d[\d\.]*)/i],[I,[p,"webOS"]],[/web0s;.+?(?:chr[o0]me|safari)\/(\d+)/i],[[I,ca,{25:"120",24:"108",23:"94",22:"87",6:"79",5:"68",4:"53",3:"38",2:"538",1:"537","*":"TV"}],[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[I,[p,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,"Chrome OS"],I],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/linux.+(mint)[\/\(\) ]?([\w\.]*)/i,/(mageia|vectorlinux|fuchsia|arcaos|arch(?= ?linux))[;l ]([\d\.]*)/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire|knoppix)(?: gnu[\/ ]linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/\b(aix)[; ]([1-9\.]{0,4})/i,/(hurd|linux|morphos)(?: (?:arm|x86|ppc)\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) ?(r\d)?/i],[p,I],[/(sunos) ?([\d\.]*)/i],[[p,"Solaris"],I],[/\b(beos|os\/2|amigaos|openvms|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,I]]},ji=(Er.call((T={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[P,[p,I,F,x]],[v,[M]],[U,[x,z,A]],[C,[p,I]],[_,[p,I]]]),Er.call(T.isIgnore,[[P,[I,F]],[C,[I]],[_,[I]]]),Er.call(T.isIgnoreRgx,[[P,/ ?browser$/i],[_,/ ?os$/i]]),Er.call(T.toString,[[P,[p,I]],[v,[M]],[U,[A,z]],[C,[p,I]],[_,[p,I]]]),T),os=function(sn,qn){var jn=ji.init[qn],tr=ji.isIgnore[qn]||0,wn=ji.isIgnoreRgx[qn]||0,On=ji.toString[qn]||0;function Ir(){Er.call(this,jn)}return Ir.prototype.getItem=function(){return sn},Ir.prototype.withClientHints=function(){return Vn?Vn.getHighEntropyValues(Ie).then(function(hr){return sn.setCH(new Ei(hr,!1)).parseCH().get()}):sn.parseCH().get()},Ir.prototype.withFeatureCheck=function(){return sn.detectFeature().get()},qn!=w&&(Ir.prototype.is=function(hr){var vr=!1;for(var An in this)if(this.hasOwnProperty(An)&&!$t(tr,An)&&bn(wn?Or(wn,this[An]):this[An])==bn(wn?Or(wn,hr):hr)){if(vr=!0,hr!=E)break}else if(hr==E&&vr){vr=!vr;break}return vr},Ir.prototype.toString=function(){var hr=h;for(var vr in On)typeof this[On[vr]]!==E&&(hr+=(hr?" ":h)+this[On[vr]]);return hr||E}),Vn||(Ir.prototype.then=function(hr){var vr=this,An=function(){for(var Ea in vr)vr.hasOwnProperty(Ea)&&(this[Ea]=vr[Ea])};An.prototype={is:Ir.prototype.is,toString:Ir.prototype.toString};var jr=new An;return hr(jr),jr}),new Ir};function Ei(sn,qn){if(sn=sn||{},Er.call(this,Ie),qn)Er.call(this,[[Pe,kn(sn[qe])],[pe,kn(sn[nt])],[Z,/\?1/.test(sn[Zn])],[z,Jn(sn[fr])],[Ge,Jn(sn[gr])],[Te,Jn(sn[Bn])],[M,Jn(sn[Bt])],[He,kn(sn[Ur])],[Ve,Jn(sn[Pr])]]);else for(var jn in sn)this.hasOwnProperty(jn)&&typeof sn[jn]!==E&&(this[jn]=sn[jn])}function Yi(sn,qn,jn,tr){return this.get=function(wn){return wn?this.data.hasOwnProperty(wn)?this.data[wn]:b:this.data},this.set=function(wn,On){return this.data[wn]=On,this},this.setCH=function(wn){return this.uaCH=wn,this},this.detectFeature=function(){if(Rn&&Rn.userAgent==this.ua)switch(this.itemType){case P:Rn.brave&&typeof Rn.brave.isBrave==k&&this.set(p,"Brave");break;case U:!this.get(x)&&Vn&&Vn[Z]&&this.set(x,Z),this.get(z)=="Macintosh"&&Rn&&typeof Rn.standalone!==E&&Rn.maxTouchPoints&&Rn.maxTouchPoints>2&&this.set(z,"iPad").set(x,ce);break;case _:!this.get(p)&&Vn&&Vn[Ge]&&this.set(p,Vn[Ge]);break;case w:var wn=this.data,On=function(Ir){return wn[Ir].getItem().detectFeature().get()};this.set(P,On(P)).set(v,On(v)).set(U,On(U)).set(C,On(C)).set(_,On(_))}return this},this.parseUA=function(){return this.itemType!=w&&ha.call(this.data,this.ua,this.rgxMap),this.itemType==P&&this.set(F,Nr(this.get(I))),this},this.parseCH=function(){var wn=this.uaCH,On=this.rgxMap;switch(this.itemType){case P:case C:var Ir,hr=wn[pe]||wn[Pe];if(hr)for(var vr in hr){var An=hr[vr].brand||hr[vr],jr=hr[vr].version;this.itemType==P&&!/not.a.brand/i.test(An)&&(!Ir||/Chrom/.test(Ir)&&An!=Ca||Ir==dr&&/WebView2/.test(An))&&(An=ca(An,ss),(Ir=this.get(p))&&!/Chrom/.test(Ir)&&/Chrom/.test(An)||this.set(p,An).set(I,jr).set(F,Nr(jr)),Ir=An),this.itemType==C&&An==Ca&&this.set(I,jr)}break;case v:var Ea=wn[M];Ea&&(Ea&&wn[Ve]=="64"&&(Ea+="64"),ha.call(this.data,Ea+";",On));break;case U:if(wn[Z]&&this.set(x,Z),wn[z]&&(this.set(z,wn[z]),!this.get(x)||!this.get(A))){var ua={};ha.call(ua,"droid 9; "+wn[z]+")",On),!this.get(x)&&ua.type&&this.set(x,ua.type),!this.get(A)&&ua.vendor&&this.set(A,ua.vendor)}if(wn[He]){var ya;if(typeof wn[He]!="string")for(var ja=0;!ya&&ja<wn[He].length;)ya=ca(wn[He][ja++],Oa);else ya=ca(wn[He],Oa);this.set(x,ya)}break;case _:var Ba=wn[Ge];if(Ba){var $a=wn[Te];Ba==Xe&&($a=parseInt(Nr($a),10)>=13?"11":"10"),this.set(p,Ba).set(I,$a)}this.get(p)==Xe&&wn[z]=="Xbox"&&this.set(p,"Xbox").set(I,b);break;case w:var Sa=this.data,Qa=function(pi){return Sa[pi].getItem().setCH(wn).parseCH().get()};this.set(P,Qa(P)).set(v,Qa(v)).set(U,Qa(U)).set(C,Qa(C)).set(_,Qa(_))}return this},Er.call(this,[["itemType",sn],["ua",qn],["uaCH",tr],["rgxMap",jn],["data",os(this,sn)]]),this}function qr(sn,qn,jn){if(typeof sn===H?(bt(sn,!0)?(typeof qn===H&&(jn=qn),qn=sn):(jn=sn,qn=b),sn=b):typeof sn!==m||bt(qn,!0)||(jn=qn,qn=b),jn&&typeof jn.append===k){var tr={};jn.forEach(function(vr,An){tr[An]=vr}),jn=tr}if(!(this instanceof qr))return new qr(sn,qn,jn).getResult();var wn=typeof sn===m?sn:jn&&jn[f]?jn[f]:Rn&&Rn.userAgent?Rn.userAgent:h,On=new Ei(jn,!0),Ir=qn?function(vr,An){var jr={},Ea=An;if(!bt(An))for(var ua in Ea={},An)for(var ya in An[ua])Ea[ya]=An[ua][ya].concat(Ea[ya]?Ea[ya]:[]);for(var ja in vr)jr[ja]=Ea[ja]&&Ea[ja].length%2==0?Ea[ja].concat(vr[ja]):vr[ja];return jr}(ai,qn):ai,hr=function(vr){return vr==w?function(){return new Yi(vr,wn,Ir,On).set("ua",wn).set(P,this.getBrowser()).set(v,this.getCPU()).set(U,this.getDevice()).set(C,this.getEngine()).set(_,this.getOS()).get()}:function(){return new Yi(vr,wn,Ir[vr],On).parseUA().get()}};return Er.call(this,[["getBrowser",hr(P)],["getCPU",hr(v)],["getDevice",hr(U)],["getEngine",hr(C)],["getOS",hr(_)],["getResult",hr(w)],["getUA",function(){return wn}],["setUA",function(vr){return Pn(vr)&&(wn=vr.length>500?Hn(vr,500):vr),this}]]).setUA(wn),this}qr.VERSION="2.0.4",qr.BROWSER=or([p,I,F,x]),qr.CPU=or([M]),qr.DEVICE=or([z,A,x,G,Z,X,ce,Ee,xe]),qr.ENGINE=qr.OS=or([p,I]),typeof R!==E?(j.exports&&(R=j.exports=qr),R.UAParser=qr):d.amdO?(S=(function(){return qr}).call(R,d,R,j))===b||(j.exports=S):Sn&&(y.UAParser=qr);var Si=Sn&&(y.jQuery||y.Zepto);if(Si&&!Si.ua){var Ni=new qr;Si.ua=Ni.getResult(),Si.ua.get=function(){return Ni.getUA()},Si.ua.set=function(sn){Ni.setUA(sn);var qn=Ni.getResult();for(var jn in qn)Si.ua[jn]=qn[jn]}}})(typeof window=="object"?window:this)},2155:function(j,R,d){var S;j.exports=(S=d(9021),d(7165),S.pad.ZeroPadding={pad:function(y,b){var T=4*b;y.clamp(),y.sigBytes+=T-(y.sigBytes%T||T)},unpad:function(y){var b=y.words,T=y.sigBytes-1;for(T=y.sigBytes-1;T>=0;T--)if(b[T>>>2]>>>24-T%4*8&255){y.sigBytes=T+1;break}}},S.pad.ZeroPadding)},2169:function(j,R,d){var S;j.exports=(S=d(9021),d(7165),S.mode.CFB=function(){var y=S.lib.BlockCipherMode.extend();function b(T,f,h,k){var E,H=this._iv;H?(E=H.slice(0),this._iv=void 0):E=this._prevBlock,k.encryptBlock(E,0);for(var m=0;m<h;m++)T[f+m]^=E[m]}return y.Encryptor=y.extend({processBlock:function(T,f){var h=this._cipher,k=h.blockSize;b.call(this,T,f,k,h),this._prevBlock=T.slice(f,f+k)}}),y.Decryptor=y.extend({processBlock:function(T,f){var h=this._cipher,k=h.blockSize,E=T.slice(f,f+k);b.call(this,T,f,k,h),this._prevBlock=E}}),y}(),S.mode.CFB)},2183:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Chrome111=void 0;const S=d(7363),y=d(2994),b=d(1765),T=d(8046),f=d(5544),h=d(5938),k=d(4256),E=d(4893),H=d(521),m=d(1305),P=d(3303),v=new y.Logger("Chrome111"),U={OS:1024,MIS:1024};class C extends H.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new C}constructor(){super()}get name(){return"Chrome111"}close(){if(v.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){v.debug("getNativeRtpCapabilities()");const w=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{w.addTransceiver("audio"),w.addTransceiver("video");const p=await w.createOffer();try{w.close()}catch{}const x=S.parse(p.sdp),A=f.extractRtpCapabilities({sdpObject:x});return k.addNackSupportForOpus(A),A}catch(p){try{w.close()}catch{}throw p}}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:U}}run({direction:w,iceParameters:p,iceCandidates:x,dtlsParameters:A,sctpParameters:I,iceServers:M,iceTransportPolicy:F,additionalSettings:z,proprietaryConstraints:G,extendedRtpCapabilities:Z}){this.assertNotClosed(),v.debug("run()"),this._direction=w,this._remoteSdp=new m.RemoteSdp({iceParameters:p,iceCandidates:x,dtlsParameters:A,sctpParameters:I}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",Z),video:T.getSendingRtpParameters("video",Z)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",Z),video:T.getSendingRemoteRtpParameters("video",Z)},A.role&&A.role!=="auto"&&(this._forcedLocalDtlsRole=A.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:M??[],iceTransportPolicy:F??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...z},G),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ce=>{this.emit("@icecandidateerror",ce)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(v.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(w){this.assertNotClosed(),v.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=w,this._pc.setConfiguration(p)}async restartIce(w){if(this.assertNotClosed(),v.debug("restartIce()"),this._remoteSdp.updateIceParameters(w),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});v.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const x={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:w,encodings:p,codecOptions:x,codec:A,onRtpSender:I}){if(this.assertNotClosed(),this.assertSendDirection(),v.debug("send() [kind:%s, track.id:%s]",w.kind,w.id),p&&p.length>1){let xe=1;for(const _e of p){const Pe=_e.scalabilityMode?(0,P.parse)(_e.scalabilityMode).temporalLayers:3;Pe>xe&&(xe=Pe)}p.forEach((_e,Pe)=>{_e.rid=`r${Pe}`,_e.scalabilityMode=`L1T${xe}`})}const M=b.clone(this._sendingRtpParametersByKind[w.kind]);M.codecs=T.reduceCodecs(M.codecs,A);const F=b.clone(this._sendingRemoteRtpParametersByKind[w.kind]);F.codecs=T.reduceCodecs(F.codecs,A);const z=this._remoteSdp.getNextMediaSectionIdx(),G=this._pc.addTransceiver(w,{direction:"sendonly",streams:[this._sendStream],sendEncodings:p});I&&I(G.sender);const Z=await this._pc.createOffer();let ce=S.parse(Z.sdp);ce.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ce}),v.debug("send() | calling pc.setLocalDescription() [offer:%o]",Z),await this._pc.setLocalDescription(Z);const X=G.mid;M.mid=X,ce=S.parse(this._pc.localDescription.sdp);const Ee=ce.media[z.idx];if(M.rtcp.cname=f.getCname({offerMediaObject:Ee}),p)if(p.length===1){const xe=h.getRtpEncodings({offerMediaObject:Ee});Object.assign(xe[0],p[0]),M.encodings=xe}else M.encodings=p;else M.encodings=h.getRtpEncodings({offerMediaObject:Ee});this._remoteSdp.send({offerMediaObject:Ee,reuseMid:z.reuseMid,offerRtpParameters:M,answerRtpParameters:F,codecOptions:x});const Se={type:"answer",sdp:this._remoteSdp.getSdp()};return v.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Se),await this._pc.setRemoteDescription(Se),this._mapMidTransceiver.set(X,G),{localId:X,rtpParameters:M,rtpSender:G.sender}}async stopSending(w){if(this.assertSendDirection(),v.debug("stopSending() [localId:%s]",w),this._closed)return;const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const x=await this._pc.createOffer();v.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._mapMidTransceiver.delete(w)}async pauseSending(w){this.assertNotClosed(),this.assertSendDirection(),v.debug("pauseSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(w);const x=await this._pc.createOffer();v.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async resumeSending(w){this.assertNotClosed(),this.assertSendDirection(),v.debug("resumeSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(this._remoteSdp.resumeSendingMediaSection(w),!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly";const x=await this._pc.createOffer();v.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async replaceTrack(w,p){this.assertNotClosed(),this.assertSendDirection(),p?v.debug("replaceTrack() [localId:%s, track.id:%s]",w,p.id):v.debug("replaceTrack() [localId:%s, no track]",w);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(p)}async setMaxSpatialLayer(w,p){this.assertNotClosed(),this.assertSendDirection(),v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",w,p);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");const A=x.sender.getParameters();A.encodings.forEach((F,z)=>{F.active=z<=p}),await x.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const I=await this._pc.createOffer();v.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const M={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async setRtpEncodingParameters(w,p){this.assertNotClosed(),this.assertSendDirection(),v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",w,p);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");const A=x.sender.getParameters();A.encodings.forEach((F,z)=>{A.encodings[z]={...F,...p}}),await x.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const I=await this._pc.createOffer();v.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const M={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async getSenderStats(w){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:w,maxPacketLifeTime:p,maxRetransmits:x,label:A,protocol:I}){this.assertNotClosed(),this.assertSendDirection();const M={negotiated:!0,id:this._nextSendSctpStreamId,ordered:w,maxPacketLifeTime:p,maxRetransmits:x,protocol:I};v.debug("sendDataChannel() [options:%o]",M);const F=this._pc.createDataChannel(A,M);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%U.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),G=S.parse(z.sdp),Z=G.media.find(X=>X.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G}),v.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:Z});const ce={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setRemoteDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:F,sctpStreamParameters:{streamId:M.id,ordered:M.ordered,maxPacketLifeTime:M.maxPacketLifeTime,maxRetransmits:M.maxRetransmits}}}async receive(w){this.assertNotClosed(),this.assertRecvDirection();const p=[],x=new Map;for(const F of w){const{trackId:z,kind:G,rtpParameters:Z,streamId:ce}=F;v.debug("receive() [trackId:%s, kind:%s]",z,G);const X=Z.mid??String(this._mapMidTransceiver.size);x.set(z,X),this._remoteSdp.receive({mid:X,kind:G,offerRtpParameters:Z,streamId:ce??Z.rtcp.cname,trackId:z})}const A={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",A),await this._pc.setRemoteDescription(A);for(const F of w){const{trackId:z,onRtpReceiver:G}=F;if(G){const Z=x.get(z),ce=this._pc.getTransceivers().find(X=>X.mid===Z);if(!ce)throw new Error("transceiver not found");G(ce.receiver)}}let I=await this._pc.createAnswer();const M=S.parse(I.sdp);for(const F of w){const{trackId:z,rtpParameters:G}=F,Z=x.get(z),ce=M.media.find(X=>String(X.mid)===Z);f.applyCodecParameters({offerRtpParameters:G,answerMediaObject:ce})}I={type:"answer",sdp:S.write(M)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),v.debug("receive() | calling pc.setLocalDescription() [answer:%o]",I),await this._pc.setLocalDescription(I);for(const F of w){const{trackId:z}=F,G=x.get(z),Z=this._pc.getTransceivers().find(ce=>ce.mid===G);if(!Z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(G,Z),p.push({localId:G,track:Z.receiver.track,rtpReceiver:Z.receiver})}return p}async stopReceiving(w){if(this.assertRecvDirection(),this._closed)return;for(const A of w){v.debug("stopReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(I.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const A of w)this._mapMidTransceiver.delete(A)}async pauseReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){v.debug("pauseReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");I.direction="inactive",this._remoteSdp.pauseMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async resumeReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){v.debug("resumeReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");I.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async getReceiverStats(w){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:w,label:p,protocol:x}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:A,ordered:I,maxPacketLifeTime:M,maxRetransmits:F}=w,z={negotiated:!0,id:A,ordered:I,maxPacketLifeTime:M,maxRetransmits:F,protocol:x};v.debug("receiveDataChannel() [options:%o]",z);const G=this._pc.createDataChannel(p,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Z={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Z),await this._pc.setRemoteDescription(Z);const ce=await this._pc.createAnswer();if(!this._transportReady){const X=S.parse(ce.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:X})}v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setLocalDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:G}}async setupTransport({localDtlsRole:w,localSdpObject:p}){p||(p=S.parse(this._pc.localDescription.sdp));const x=f.extractDtlsParameters({sdpObject:p});x.role=w,this._remoteSdp.updateDtlsRole(w==="client"?"server":"client"),await new Promise((A,I)=>{this.safeEmit("@connect",{dtlsParameters:x},A,I)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new E.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.Chrome111=C},2196:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},2211:j=>{j.exports=function(R){var d,S,y="",b=(R=function(f){return f||(f={}),{length:f.length||8,numeric:typeof f.numeric!="boolean"||f.numeric,letters:typeof f.letters!="boolean"||f.letters,special:typeof f.special=="boolean"&&f.special,exclude:Array.isArray(f.exclude)?f.exclude:[]}}(R)).length,T=(R.exclude,function(f){var h="";f.numeric&&(h+="0123456789"),f.letters&&(h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),f.special&&(h+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var k=0;k<=f.exclude.length;k++)h=h.replace(f.exclude[k],"");return h}(R));for(d=1;d<=b;d++)y+=T.substring(S=Math.floor(Math.random()*T.length),S+1);return y}},2215:(j,R,d)=>{var S,y;(function(b){(y=typeof(S=b)=="function"?S.call(R,d,R,j):S)===void 0||(j.exports=y),j.exports=b()})(function(){function b(){for(var f=0,h={};f<arguments.length;f++){var k=arguments[f];for(var E in k)h[E]=k[E]}return h}function T(f){return f.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function f(h){function k(){}function E(m,P,v){if(typeof document<"u"){typeof(v=b({path:"/"},k.defaults,v)).expires=="number"&&(v.expires=new Date(1*new Date+864e5*v.expires)),v.expires=v.expires?v.expires.toUTCString():"";try{var U=JSON.stringify(P);/^[\{\[]/.test(U)&&(P=U)}catch{}P=h.write?h.write(P,m):encodeURIComponent(String(P)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),m=encodeURIComponent(String(m)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var C="";for(var _ in v)v[_]&&(C+="; "+_,v[_]!==!0&&(C+="="+v[_].split(";")[0]));return document.cookie=m+"="+P+C}}function H(m,P){if(typeof document<"u"){for(var v={},U=document.cookie?document.cookie.split("; "):[],C=0;C<U.length;C++){var _=U[C].split("="),w=_.slice(1).join("=");P||w.charAt(0)!=='"'||(w=w.slice(1,-1));try{var p=T(_[0]);if(w=(h.read||h)(w,p)||T(w),P)try{w=JSON.parse(w)}catch{}if(v[p]=w,m===p)break}catch{}}return m?v[m]:v}}return k.set=E,k.get=function(m){return H(m,!1)},k.getJSON=function(m){return H(m,!0)},k.remove=function(m,P){E(m,"",b(P,{expires:-1}))},k.defaults={},k.withConverter=f,k}(function(){})})},2284:(j,R,d)=>{function S(y){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},S(y)}d.d(R,{A:()=>S})},2291:(j,R)=>{let d;Object.defineProperty(R,"__esModule",{value:!0});const S=new Uint8Array(16);R.default=function(){if(!d){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");d=crypto.getRandomValues.bind(crypto)}return d(S)}},2292:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Firefox120=void 0;const S=d(7363),y=d(2994),b=d(4893),T=d(1765),f=d(8046),h=d(5544),k=d(5938),E=d(521),H=d(1305),m=d(3303),P=new y.Logger("Firefox120"),v={OS:16,MIS:2048};class U extends E.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new U}constructor(){super()}get name(){return"Firefox120"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const _=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),w=document.createElement("canvas");w.getContext("2d");const p=w.captureStream().getVideoTracks()[0];try{_.addTransceiver("audio",{direction:"sendrecv"}),_.addTransceiver(p,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const x=await _.createOffer();try{w.remove()}catch{}try{p.stop()}catch{}try{_.close()}catch{}const A=S.parse(x.sdp);return h.extractRtpCapabilities({sdpObject:A})}catch(x){try{w.remove()}catch{}try{p.stop()}catch{}try{_.close()}catch{}throw x}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:_,iceParameters:w,iceCandidates:p,dtlsParameters:x,sctpParameters:A,iceServers:I,iceTransportPolicy:M,additionalSettings:F,proprietaryConstraints:z,extendedRtpCapabilities:G}){this.assertNotClosed(),P.debug("run()"),this._direction=_,this._remoteSdp=new H.RemoteSdp({iceParameters:w,iceCandidates:p,dtlsParameters:x,sctpParameters:A}),this._sendingRtpParametersByKind={audio:f.getSendingRtpParameters("audio",G),video:f.getSendingRtpParameters("video",G)},this._sendingRemoteRtpParametersByKind={audio:f.getSendingRemoteRtpParameters("audio",G),video:f.getSendingRemoteRtpParameters("video",G)},this._pc=new RTCPeerConnection({iceServers:I??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...F},z),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",Z=>{this.emit("@icecandidateerror",Z)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(_){throw this.assertNotClosed(),new b.UnsupportedError("not supported")}async restartIce(_){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(_),this._transportReady)if(this._direction==="send"){const w=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",w),await this._pc.setLocalDescription(w);const p={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}else{const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:_,encodings:w,codecOptions:p,codec:x,onRtpSender:A}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",_.kind,_.id),w&&w.length>1&&w.forEach((Se,xe)=>{Se.rid=`r${xe}`});const I=T.clone(this._sendingRtpParametersByKind[_.kind]);I.codecs=f.reduceCodecs(I.codecs,x);const M=T.clone(this._sendingRemoteRtpParametersByKind[_.kind]);M.codecs=f.reduceCodecs(M.codecs,x);const F=this._pc.addTransceiver(_,{direction:"sendonly",streams:[this._sendStream],sendEncodings:w});A&&A(F.sender);const z=await this._pc.createOffer();let G=S.parse(z.sdp);G.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:G});const Z=(0,m.parse)((w??[{}])[0].scalabilityMode);P.debug("send() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z);const ce=F.mid;I.mid=ce,G=S.parse(this._pc.localDescription.sdp);const X=G.media[G.media.length-1];if(I.rtcp.cname=h.getCname({offerMediaObject:X}),w)if(w.length===1){const Se=k.getRtpEncodings({offerMediaObject:X});Object.assign(Se[0],w[0]),I.encodings=Se}else I.encodings=w;else I.encodings=k.getRtpEncodings({offerMediaObject:X});if(I.encodings.length>1&&(I.codecs[0].mimeType.toLowerCase()==="video/vp8"||I.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Se of I.encodings)Se.scalabilityMode?Se.scalabilityMode=`L1T${Z.temporalLayers}`:Se.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:X,offerRtpParameters:I,answerRtpParameters:M,codecOptions:p});const Ee={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Ee),await this._pc.setRemoteDescription(Ee),this._mapMidTransceiver.set(ce,F),{localId:ce,rtpParameters:I,rtpSender:F.sender}}async stopSending(_){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",_),this._closed)return;const w=this._mapMidTransceiver.get(_);if(!w)throw new Error("associated transceiver not found");w.sender.replaceTrack(null),this._pc.removeTrack(w.sender),this._remoteSdp.disableMediaSection(w.mid);const p=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const x={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.delete(_)}async pauseSending(_){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",_);const w=this._mapMidTransceiver.get(_);if(!w)throw new Error("associated RTCRtpTransceiver not found");w.direction="inactive",this._remoteSdp.pauseMediaSection(_);const p=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const x={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async resumeSending(_){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",_);const w=this._mapMidTransceiver.get(_);if(!w)throw new Error("associated RTCRtpTransceiver not found");w.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(_);const p=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const x={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async replaceTrack(_,w){this.assertNotClosed(),this.assertSendDirection(),w?P.debug("replaceTrack() [localId:%s, track.id:%s]",_,w.id):P.debug("replaceTrack() [localId:%s, no track]",_);const p=this._mapMidTransceiver.get(_);if(!p)throw new Error("associated RTCRtpTransceiver not found");await p.sender.replaceTrack(w)}async setMaxSpatialLayer(_,w){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",_,w);const p=this._mapMidTransceiver.get(_);if(!p)throw new Error("associated transceiver not found");const x=p.sender.getParameters();x.encodings.forEach((M,F)=>{M.active=F<=w}),await p.sender.setParameters(x),this._remoteSdp.muxMediaSectionSimulcast(_,x.encodings);const A=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async setRtpEncodingParameters(_,w){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",_,w);const p=this._mapMidTransceiver.get(_);if(!p)throw new Error("associated RTCRtpTransceiver not found");const x=p.sender.getParameters();x.encodings.forEach((M,F)=>{x.encodings[F]={...M,...w}}),await p.sender.setParameters(x),this._remoteSdp.muxMediaSectionSimulcast(_,x.encodings);const A=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A);const I={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I)}async getSenderStats(_){this.assertNotClosed(),this.assertSendDirection();const w=this._mapMidTransceiver.get(_);if(!w)throw new Error("associated RTCRtpTransceiver not found");return w.sender.getStats()}async sendDataChannel({ordered:_,maxPacketLifeTime:w,maxRetransmits:p,label:x,protocol:A}){this.assertNotClosed(),this.assertSendDirection();const I={negotiated:!0,id:this._nextSendSctpStreamId,ordered:_,maxPacketLifeTime:w,maxRetransmits:p,protocol:A};P.debug("sendDataChannel() [options:%o]",I);const M=this._pc.createDataChannel(x,I);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const F=await this._pc.createOffer(),z=S.parse(F.sdp),G=z.media.find(ce=>ce.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:z}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F),this._remoteSdp.sendSctpAssociation({offerMediaObject:G});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:I.id,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits}}}async receive(_){this.assertNotClosed(),this.assertRecvDirection();const w=[],p=new Map;for(const M of _){const{trackId:F,kind:z,rtpParameters:G,streamId:Z}=M;P.debug("receive() [trackId:%s, kind:%s]",F,z);const ce=G.mid??String(this._mapMidTransceiver.size);p.set(F,ce),this._remoteSdp.receive({mid:ce,kind:z,offerRtpParameters:G,streamId:Z??G.rtcp.cname,trackId:F})}const x={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);for(const M of _){const{trackId:F,onRtpReceiver:z}=M;if(z){const G=p.get(F),Z=this._pc.getTransceivers().find(ce=>ce.mid===G);if(!Z)throw new Error("transceiver not found");z(Z.receiver)}}let A=await this._pc.createAnswer();const I=S.parse(A.sdp);for(const M of _){const{trackId:F,rtpParameters:z}=M,G=p.get(F),Z=I.media.find(ce=>String(ce.mid)===G);h.applyCodecParameters({offerRtpParameters:z,answerMediaObject:Z}),A={type:"answer",sdp:S.write(I)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:I}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",A),await this._pc.setLocalDescription(A);for(const M of _){const{trackId:F}=M,z=p.get(F),G=this._pc.getTransceivers().find(Z=>Z.mid===z);if(!G)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(z,G),w.push({localId:z,track:G.receiver.track,rtpReceiver:G.receiver})}return w}async stopReceiving(_){if(this.assertRecvDirection(),this._closed)return;for(const x of _){P.debug("stopReceiving() [localId:%s]",x);const A=this._mapMidTransceiver.get(x);if(!A)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(A.mid)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const x of _)this._mapMidTransceiver.delete(x)}async pauseReceiving(_){this.assertNotClosed(),this.assertRecvDirection();for(const x of _){P.debug("pauseReceiving() [localId:%s]",x);const A=this._mapMidTransceiver.get(x);if(!A)throw new Error("associated RTCRtpTransceiver not found");A.direction="inactive",this._remoteSdp.pauseMediaSection(x)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async resumeReceiving(_){this.assertNotClosed(),this.assertRecvDirection();for(const x of _){P.debug("resumeReceiving() [localId:%s]",x);const A=this._mapMidTransceiver.get(x);if(!A)throw new Error("associated RTCRtpTransceiver not found");A.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(x)}const w={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);const p=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async getReceiverStats(_){this.assertRecvDirection();const w=this._mapMidTransceiver.get(_);if(!w)throw new Error("associated RTCRtpTransceiver not found");return w.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:_,label:w,protocol:p}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:x,ordered:A,maxPacketLifeTime:I,maxRetransmits:M}=_,F={negotiated:!0,id:x,ordered:A,maxPacketLifeTime:I,maxRetransmits:M,protocol:p};P.debug("receiveDataChannel() [options:%o]",F);const z=this._pc.createDataChannel(w,F);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const G={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",G),await this._pc.setRemoteDescription(G);const Z=await this._pc.createAnswer();if(!this._transportReady){const ce=S.parse(Z.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:ce})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:z}}async setupTransport({localDtlsRole:_,localSdpObject:w}){w||(w=S.parse(this._pc.localDescription.sdp));const p=h.extractDtlsParameters({sdpObject:w});p.role=_,this._remoteSdp.updateDtlsRole(_==="client"?"server":"client"),await new Promise((x,A)=>{this.safeEmit("@connect",{dtlsParameters:p},x,A)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new b.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.Firefox120=U},2696:function(j,R,d){var S;j.exports=(S=d(9021),d(754),d(4636),d(9506),d(7165),function(){var y=S,b=y.lib.StreamCipher,T=y.algo,f=[],h=[],k=[],E=T.RabbitLegacy=b.extend({_doReset:function(){var m=this._key.words,P=this.cfg.iv,v=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],U=this._C=[m[2]<<16|m[2]>>>16,4294901760&m[0]|65535&m[1],m[3]<<16|m[3]>>>16,4294901760&m[1]|65535&m[2],m[0]<<16|m[0]>>>16,4294901760&m[2]|65535&m[3],m[1]<<16|m[1]>>>16,4294901760&m[3]|65535&m[0]];this._b=0;for(var C=0;C<4;C++)H.call(this);for(C=0;C<8;C++)U[C]^=v[C+4&7];if(P){var _=P.words,w=_[0],p=_[1],x=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8),A=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),I=x>>>16|4294901760&A,M=A<<16|65535&x;for(U[0]^=x,U[1]^=I,U[2]^=A,U[3]^=M,U[4]^=x,U[5]^=I,U[6]^=A,U[7]^=M,C=0;C<4;C++)H.call(this)}},_doProcessBlock:function(m,P){var v=this._X;H.call(this),f[0]=v[0]^v[5]>>>16^v[3]<<16,f[1]=v[2]^v[7]>>>16^v[5]<<16,f[2]=v[4]^v[1]>>>16^v[7]<<16,f[3]=v[6]^v[3]>>>16^v[1]<<16;for(var U=0;U<4;U++)f[U]=16711935&(f[U]<<8|f[U]>>>24)|4278255360&(f[U]<<24|f[U]>>>8),m[P+U]^=f[U]},blockSize:4,ivSize:2});function H(){for(var m=this._X,P=this._C,v=0;v<8;v++)h[v]=P[v];for(P[0]=P[0]+1295307597+this._b|0,P[1]=P[1]+3545052371+(P[0]>>>0<h[0]>>>0?1:0)|0,P[2]=P[2]+886263092+(P[1]>>>0<h[1]>>>0?1:0)|0,P[3]=P[3]+1295307597+(P[2]>>>0<h[2]>>>0?1:0)|0,P[4]=P[4]+3545052371+(P[3]>>>0<h[3]>>>0?1:0)|0,P[5]=P[5]+886263092+(P[4]>>>0<h[4]>>>0?1:0)|0,P[6]=P[6]+1295307597+(P[5]>>>0<h[5]>>>0?1:0)|0,P[7]=P[7]+3545052371+(P[6]>>>0<h[6]>>>0?1:0)|0,this._b=P[7]>>>0<h[7]>>>0?1:0,v=0;v<8;v++){var U=m[v]+P[v],C=65535&U,_=U>>>16,w=((C*C>>>17)+C*_>>>15)+_*_,p=((4294901760&U)*U|0)+((65535&U)*U|0);k[v]=w^p}m[0]=k[0]+(k[7]<<16|k[7]>>>16)+(k[6]<<16|k[6]>>>16)|0,m[1]=k[1]+(k[0]<<8|k[0]>>>24)+k[7]|0,m[2]=k[2]+(k[1]<<16|k[1]>>>16)+(k[0]<<16|k[0]>>>16)|0,m[3]=k[3]+(k[2]<<8|k[2]>>>24)+k[1]|0,m[4]=k[4]+(k[3]<<16|k[3]>>>16)+(k[2]<<16|k[2]>>>16)|0,m[5]=k[5]+(k[4]<<8|k[4]>>>24)+k[3]|0,m[6]=k[6]+(k[5]<<16|k[5]>>>16)+(k[4]<<16|k[4]>>>16)|0,m[7]=k[7]+(k[6]<<8|k[6]>>>24)+k[5]|0}y.RabbitLegacy=b._createHelper(E)}(),S.RabbitLegacy)},2731:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.FakeHandler=void 0;const S=d(5328),y=d(3953),b=d(2994),T=d(1765),f=d(8046),h=d(4893),k=d(521),E=new b.Logger("FakeHandler");class H extends y.EnhancedEventEmitter{id;ordered;maxPacketLifeTime;maxRetransmits;label;protocol;constructor({id:v,ordered:U,maxPacketLifeTime:C,maxRetransmits:_,label:w,protocol:p}){super(),this.id=v,this.ordered=U,this.maxPacketLifeTime=C,this.maxRetransmits=_,this.label=w,this.protocol=p}close(){this.safeEmit("close"),this.emit("@close")}send(v){this.safeEmit("message",v)}addEventListener(v,U){this.on(v,U)}}class m extends k.HandlerInterface{_closed=!1;fakeParameters;_rtpParametersByKind;_cname=`CNAME-${T.generateRandomNumber()}`;_transportReady=!1;_nextLocalId=1;_tracks=new Map;_nextSctpStreamId=0;static createFactory(v){return()=>new m(v)}constructor(v){super(),this.fakeParameters=v}get name(){return"FakeHandler"}close(){E.debug("close()"),this._closed||(this._closed=!0)}setIceGatheringState(v){this.emit("@icegatheringstatechange",v)}setConnectionState(v){this.emit("@connectionstatechange",v)}async getNativeRtpCapabilities(){return E.debug("getNativeRtpCapabilities()"),this.fakeParameters.generateNativeRtpCapabilities()}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),this.fakeParameters.generateNativeSctpCapabilities()}run({direction:v,iceParameters:U,iceCandidates:C,dtlsParameters:_,sctpParameters:w,iceServers:p,iceTransportPolicy:x,proprietaryConstraints:A,extendedRtpCapabilities:I}){this.assertNotClosed(),E.debug("run()"),this._rtpParametersByKind={audio:f.getSendingRtpParameters("audio",I),video:f.getSendingRtpParameters("video",I)}}async updateIceServers(v){this.assertNotClosed(),E.debug("updateIceServers()")}async restartIce(v){this.assertNotClosed(),E.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:v,encodings:U,codecOptions:C,codec:_}){this.assertNotClosed(),E.debug("send() [kind:%s, track.id:%s]",v.kind,v.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const w=T.clone(this._rtpParametersByKind[v.kind]),p=w.codecs.some(A=>/.+\/rtx$/i.test(A.mimeType));w.mid=`mid-${T.generateRandomNumber()}`,U||(U=[{}]);for(const A of U)A.ssrc=T.generateRandomNumber(),p&&(A.rtx={ssrc:T.generateRandomNumber()});w.encodings=U,w.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const x=this._nextLocalId++;return this._tracks.set(x,v),{localId:String(x),rtpParameters:w}}async stopSending(v){if(E.debug("stopSending() [localId:%s]",v),!this._closed){if(!this._tracks.has(Number(v)))throw new Error("local track not found");this._tracks.delete(Number(v))}}async pauseSending(v){this.assertNotClosed()}async resumeSending(v){this.assertNotClosed()}async replaceTrack(v,U){this.assertNotClosed(),U?E.debug("replaceTrack() [localId:%s, track.id:%s]",v,U.id):E.debug("replaceTrack() [localId:%s, no track]",v),this._tracks.delete(Number(v)),this._tracks.set(Number(v),U)}async setMaxSpatialLayer(v,U){this.assertNotClosed(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",v,U)}async setRtpEncodingParameters(v,U){this.assertNotClosed(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",v,U)}async getSenderStats(v){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:v,maxPacketLifeTime:U,maxRetransmits:C,label:_,protocol:w}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),E.debug("sendDataChannel()"),{dataChannel:new H({id:this._nextSctpStreamId++,ordered:v,maxPacketLifeTime:U,maxRetransmits:C,label:_,protocol:w}),sctpStreamParameters:{streamId:this._nextSctpStreamId,ordered:v,maxPacketLifeTime:U,maxRetransmits:C}}}async receive(v){this.assertNotClosed();const U=[];for(const C of v){const{trackId:_,kind:w}=C;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),E.debug("receive() [trackId:%s, kind:%s]",_,w);const p=this._nextLocalId++,x=new S.FakeMediaStreamTrack({kind:w});this._tracks.set(p,x),U.push({localId:String(p),track:x})}return U}async stopReceiving(v){if(!this._closed)for(const U of v)E.debug("stopReceiving() [localId:%s]",U),this._tracks.delete(Number(U))}async pauseReceiving(v){this.assertNotClosed()}async resumeReceiving(v){this.assertNotClosed()}async getReceiverStats(v){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:v,label:U,protocol:C}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),E.debug("receiveDataChannel()"),{dataChannel:new H({id:v.streamId,ordered:v.ordered,maxPacketLifeTime:v.maxPacketLifeTime,maxRetransmits:v.maxRetransmits,label:U,protocol:C})}}async setupTransport({localDtlsRole:v,localSdpObject:U}){const C=T.clone(this.fakeParameters.generateLocalDtlsParameters());v&&(C.role=v),this.emit("@connectionstatechange","connecting"),await new Promise((_,w)=>this.emit("@connect",{dtlsParameters:C},_,w)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new h.InvalidStateError("method called in a closed handler")}}R.FakeHandler=m},2770:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0});const S=d(9746);R.default=function(y){if(!(0,S.default)(y))throw TypeError("Invalid UUID");return parseInt(y.slice(14,15),16)}},2829:(j,R)=>{function d(y,b,T,f){switch(y){case 0:return b&T^~b&f;case 1:case 3:return b^T^f;case 2:return b&T^b&f^T&f}}function S(y,b){return y<<b|y>>>32-b}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(y){const b=[1518500249,1859775393,2400959708,3395469782],T=[1732584193,4023233417,2562383102,271733878,3285377520],f=new Uint8Array(y.length+1);f.set(y),f[y.length]=128;const h=(y=f).length/4+2,k=Math.ceil(h/16),E=new Array(k);for(let H=0;H<k;++H){const m=new Uint32Array(16);for(let P=0;P<16;++P)m[P]=y[64*H+4*P]<<24|y[64*H+4*P+1]<<16|y[64*H+4*P+2]<<8|y[64*H+4*P+3];E[H]=m}E[k-1][14]=8*(y.length-1)/Math.pow(2,32),E[k-1][14]=Math.floor(E[k-1][14]),E[k-1][15]=8*(y.length-1)&4294967295;for(let H=0;H<k;++H){const m=new Uint32Array(80);for(let w=0;w<16;++w)m[w]=E[H][w];for(let w=16;w<80;++w)m[w]=S(m[w-3]^m[w-8]^m[w-14]^m[w-16],1);let P=T[0],v=T[1],U=T[2],C=T[3],_=T[4];for(let w=0;w<80;++w){const p=Math.floor(w/20),x=S(P,5)+d(p,v,U,C)+_+b[p]+m[w]>>>0;_=C,C=U,U=S(v,30)>>>0,v=P,P=x}T[0]=T[0]+P>>>0,T[1]=T[1]+v>>>0,T[2]=T[2]+U>>>0,T[3]=T[3]+C>>>0,T[4]=T[4]+_>>>0}return Uint8Array.of(T[0]>>24,T[0]>>16,T[0]>>8,T[0],T[1]>>24,T[1]>>16,T[1]>>8,T[1],T[2]>>24,T[2]>>16,T[2]>>8,T[2],T[3]>>24,T[3]>>16,T[3]>>8,T[3],T[4]>>24,T[4]>>16,T[4]>>8,T[4])}},2901:(j,R,d)=>{d.d(R,{A:()=>b});var S=d(816);function y(T,f){for(var h=0;h<f.length;h++){var k=f[h];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(T,(0,S.A)(k.key),k)}}function b(T,f,h){return f&&y(T.prototype,f),h&&y(T,h),Object.defineProperty(T,"prototype",{writable:!1}),T}},2988:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.URL=R.DNS=R.stringToBytes=void 0;const S=d(1797),y=d(6011);function b(T){T=unescape(encodeURIComponent(T));const f=new Uint8Array(T.length);for(let h=0;h<T.length;++h)f[h]=T.charCodeAt(h);return f}R.stringToBytes=b,R.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",R.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",R.default=function(T,f,h,k,E,H){const m=typeof h=="string"?b(h):h,P=typeof k=="string"?(0,S.default)(k):k;if(typeof k=="string"&&(k=(0,S.default)(k)),k?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let v=new Uint8Array(16+m.length);if(v.set(P),v.set(m,P.length),v=f(v),v[6]=15&v[6]|T,v[8]=63&v[8]|128,E){H=H||0;for(let U=0;U<16;++U)E[H+U]=v[U];return E}return(0,y.unsafeStringify)(v)}},2994:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Logger=void 0;const S=d(7833),y="mediasoup-client";R.Logger=class{_debug;_warn;_error;constructor(b){b?(this._debug=(0,S.default)(`${y}:${b}`),this._warn=(0,S.default)(`${y}:WARN:${b}`),this._error=(0,S.default)(`${y}:ERROR:${b}`)):(this._debug=(0,S.default)(y),this._warn=(0,S.default)(`${y}:WARN`),this._error=(0,S.default)(`${y}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3009:function(j,R,d){var S;j.exports=(S=d(9021),function(y){var b=S,T=b.lib,f=T.WordArray,h=T.Hasher,k=b.algo,E=[],H=[];(function(){function v(w){for(var p=y.sqrt(w),x=2;x<=p;x++)if(!(w%x))return!1;return!0}function U(w){return 4294967296*(w-(0|w))|0}for(var C=2,_=0;_<64;)v(C)&&(_<8&&(E[_]=U(y.pow(C,.5))),H[_]=U(y.pow(C,.3333333333333333)),_++),C++})();var m=[],P=k.SHA256=h.extend({_doReset:function(){this._hash=new f.init(E.slice(0))},_doProcessBlock:function(v,U){for(var C=this._hash.words,_=C[0],w=C[1],p=C[2],x=C[3],A=C[4],I=C[5],M=C[6],F=C[7],z=0;z<64;z++){if(z<16)m[z]=0|v[U+z];else{var G=m[z-15],Z=(G<<25|G>>>7)^(G<<14|G>>>18)^G>>>3,ce=m[z-2],X=(ce<<15|ce>>>17)^(ce<<13|ce>>>19)^ce>>>10;m[z]=Z+m[z-7]+X+m[z-16]}var Ee=_&w^_&p^w&p,Se=(_<<30|_>>>2)^(_<<19|_>>>13)^(_<<10|_>>>22),xe=F+((A<<26|A>>>6)^(A<<21|A>>>11)^(A<<7|A>>>25))+(A&I^~A&M)+H[z]+m[z];F=M,M=I,I=A,A=x+xe|0,x=p,p=w,w=_,_=xe+(Se+Ee)|0}C[0]=C[0]+_|0,C[1]=C[1]+w|0,C[2]=C[2]+p|0,C[3]=C[3]+x|0,C[4]=C[4]+A|0,C[5]=C[5]+I|0,C[6]=C[6]+M|0,C[7]=C[7]+F|0},_doFinalize:function(){var v=this._data,U=v.words,C=8*this._nDataBytes,_=8*v.sigBytes;return U[_>>>5]|=128<<24-_%32,U[14+(_+64>>>9<<4)]=y.floor(C/4294967296),U[15+(_+64>>>9<<4)]=C,v.sigBytes=4*U.length,this._process(),this._hash},clone:function(){var v=h.clone.call(this);return v._hash=this._hash.clone(),v}});b.SHA256=h._createHelper(P),b.HmacSHA256=h._createHmacHelper(P)}(Math),S.SHA256)},3029:(j,R,d)=>{function S(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}d.d(R,{A:()=>S})},3128:function(j,R,d){var S;j.exports=(S=d(9021),d(754),d(4636),d(9506),d(7165),function(){var y=S,b=y.lib.BlockCipher,T=y.algo;const f=16,h=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],k=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var E={pbox:[],sbox:[]};function H(C,_){let w=_>>24&255,p=_>>16&255,x=_>>8&255,A=255&_,I=C.sbox[0][w]+C.sbox[1][p];return I^=C.sbox[2][x],I+=C.sbox[3][A],I}function m(C,_,w){let p,x=_,A=w;for(let I=0;I<f;++I)x^=C.pbox[I],A=H(C,x)^A,p=x,x=A,A=p;return p=x,x=A,A=p,A^=C.pbox[f],x^=C.pbox[f+1],{left:x,right:A}}function P(C,_,w){let p,x=_,A=w;for(let I=f+1;I>1;--I)x^=C.pbox[I],A=H(C,x)^A,p=x,x=A,A=p;return p=x,x=A,A=p,A^=C.pbox[1],x^=C.pbox[0],{left:x,right:A}}function v(C,_,w){for(let M=0;M<4;M++){C.sbox[M]=[];for(let F=0;F<256;F++)C.sbox[M][F]=k[M][F]}let p=0;for(let M=0;M<f+2;M++)C.pbox[M]=h[M]^_[p],p++,p>=w&&(p=0);let x=0,A=0,I=0;for(let M=0;M<f+2;M+=2)I=m(C,x,A),x=I.left,A=I.right,C.pbox[M]=x,C.pbox[M+1]=A;for(let M=0;M<4;M++)for(let F=0;F<256;F+=2)I=m(C,x,A),x=I.left,A=I.right,C.sbox[M][F]=x,C.sbox[M][F+1]=A;return!0}var U=T.Blowfish=b.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var C=this._keyPriorReset=this._key,_=C.words,w=C.sigBytes/4;v(E,_,w)}},encryptBlock:function(C,_){var w=m(E,C[_],C[_+1]);C[_]=w.left,C[_+1]=w.right},decryptBlock:function(C,_){var w=P(E,C[_],C[_+1]);C[_]=w.left,C[_+1]=w.right},blockSize:2,keySize:4,ivSize:2});y.Blowfish=b._createHelper(U)}(),S.Blowfish)},3145:(j,R,d)=>{function S(y,b){(b==null||b>y.length)&&(b=y.length);for(var T=0,f=Array(b);T<b;T++)f[T]=y[T];return f}d.d(R,{A:()=>S})},3200:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.ProfileLevelId=R.Level=R.Profile=void 0,R.parseProfileLevelId=m,R.profileLevelIdToString=P,R.profileToString=function(_){switch(_){case y.ConstrainedBaseline:return"ConstrainedBaseline";case y.Baseline:return"Baseline";case y.Main:return"Main";case y.ConstrainedHigh:return"ConstrainedHigh";case y.High:return"High";case y.PredictiveHigh444:return"PredictiveHigh444";default:return void S.warn(`profileToString() | unrecognized profile ${_}`)}},R.levelToString=function(_){switch(_){case b.L1_b:return"1b";case b.L1:return"1";case b.L1_1:return"1.1";case b.L1_2:return"1.2";case b.L1_3:return"1.3";case b.L2:return"2";case b.L2_1:return"2.1";case b.L2_2:return"2.2";case b.L3:return"3";case b.L3_1:return"3.1";case b.L3_2:return"3.2";case b.L4:return"4";case b.L4_1:return"4.1";case b.L4_2:return"4.2";case b.L5:return"5";case b.L5_1:return"5.1";case b.L5_2:return"5.2";default:return void S.warn(`levelToString() | unrecognized level ${_}`)}},R.parseSdpProfileLevelId=v,R.isSameProfile=function(_={},w={}){const p=v(_),x=v(w);return!!(p&&x&&p.profile===x.profile)},R.isSameProfileAndLevel=function(_={},w={}){const p=v(_),x=v(w);return!!(p&&x&&p.profile===x.profile&&p.level==x.level)},R.generateProfileLevelIdStringForAnswer=function(_={},w={}){if(!_["profile-level-id"]&&!w["profile-level-id"])return void S.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const p=v(_),x=v(w);if(!p)throw new TypeError("invalid local_profile_level_id");if(!x)throw new TypeError("invalid remote_profile_level_id");if(p.profile!==x.profile)throw new TypeError("H264 Profile mismatch");const A=C(_)&&C(w),I=p.level,M=x.level,F=(G=I,Z=M,function(ce,X){return ce===b.L1_b?X!==b.L1&&X!==b.L1_b:X===b.L1_b?ce!==b.L1:ce<X}(G,Z)?G:Z),z=A?I:F;var G,Z;return S.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${p.profile}, level:${z}]`),P(new T(p.profile,z))},R.supportedLevel=function(_,w){for(let p=H.length-1;p>=0;--p){const x=H[p];if(256*x.max_macroblock_frame_size<=_&&x.max_macroblocks_per_second<=w*x.max_macroblock_frame_size)return S.debug(`supportedLevel() | result [max_frame_pixel_count:${_}, max_fps:${w}, level:${x.level}]`),x.level}return void S.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${_}, max_fps:${w}]`)};const S=new(d(3582)).Logger;var y,b;(function(_){_[_.ConstrainedBaseline=1]="ConstrainedBaseline",_[_.Baseline=2]="Baseline",_[_.Main=3]="Main",_[_.ConstrainedHigh=4]="ConstrainedHigh",_[_.High=5]="High",_[_.PredictiveHigh444=6]="PredictiveHigh444"})(y||(R.Profile=y={})),function(_){_[_.L1_b=0]="L1_b",_[_.L1=10]="L1",_[_.L1_1=11]="L1_1",_[_.L1_2=12]="L1_2",_[_.L1_3=13]="L1_3",_[_.L2=20]="L2",_[_.L2_1=21]="L2_1",_[_.L2_2=22]="L2_2",_[_.L3=30]="L3",_[_.L3_1=31]="L3_1",_[_.L3_2=32]="L3_2",_[_.L4=40]="L4",_[_.L4_1=41]="L4_1",_[_.L4_2=42]="L4_2",_[_.L5=50]="L5",_[_.L5_1=51]="L5_1",_[_.L5_2=52]="L5_2"}(b||(R.Level=b={}));class T{constructor(w,p){this.profile=w,this.level=p}}R.ProfileLevelId=T;const f=new T(y.ConstrainedBaseline,b.L3_1);class h{constructor(w){this.mask=~U("x",w),this.masked_value=U("1",w)}isMatch(w){return this.masked_value===(w&this.mask)}}class k{constructor(w,p,x){this.profile_idc=w,this.profile_iop=p,this.profile=x}}const E=[new k(66,new h("x1xx0000"),y.ConstrainedBaseline),new k(77,new h("1xxx0000"),y.ConstrainedBaseline),new k(88,new h("11xx0000"),y.ConstrainedBaseline),new k(66,new h("x0xx0000"),y.Baseline),new k(88,new h("10xx0000"),y.Baseline),new k(77,new h("0x0x0000"),y.Main),new k(100,new h("00000000"),y.High),new k(100,new h("00001100"),y.ConstrainedHigh),new k(244,new h("00000000"),y.PredictiveHigh444)],H=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:b.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:b.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:b.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:b.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:b.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:b.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:b.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:b.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:b.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:b.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:b.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:b.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:b.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:b.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:b.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:b.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:b.L5_2}];function m(_){if(typeof _!="string"||_.length!==6)return;const w=parseInt(_,16);if(w===0)return;const p=255&w,x=w>>8&255,A=w>>16&255;let I;switch(p){case b.L1_1:I=16&x?b.L1_b:b.L1_1;break;case b.L1:case b.L1_2:case b.L1_3:case b.L2:case b.L2_1:case b.L2_2:case b.L3:case b.L3_1:case b.L3_2:case b.L4:case b.L4_1:case b.L4_2:case b.L5:case b.L5_1:case b.L5_2:I=p;break;default:return void S.warn(`parseProfileLevelId() | unrecognized level_idc [str:${_}, level_idc:${p}]`)}for(const M of E)if(A===M.profile_idc&&M.profile_iop.isMatch(x))return S.debug(`parseProfileLevelId() | result [str:${_}, profile:${M.profile}, level:${I}]`),new T(M.profile,I);S.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${_}, profile_idc:${A}, profile_iop:${x}]`)}function P(_){if(_.level==b.L1_b)switch(_.profile){case y.ConstrainedBaseline:return"42f00b";case y.Baseline:return"42100b";case y.Main:return"4d100b";default:return void S.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${_.profile}`)}let w;switch(_.profile){case y.ConstrainedBaseline:w="42e0";break;case y.Baseline:w="4200";break;case y.Main:w="4d00";break;case y.ConstrainedHigh:w="640c";break;case y.High:w="6400";break;case y.PredictiveHigh444:w="f400";break;default:return void S.warn(`profileLevelIdToString() | unrecognized profile ${_.profile}`)}let p=_.level.toString(16);return p.length===1&&(p=`0${p}`),`${w}${p}`}function v(_={}){const w=_["profile-level-id"];return w?m(w):f}function U(_,w){return+(w[0]===_)<<7|+(w[1]===_)<<6|+(w[2]===_)<<5|+(w[3]===_)<<4|+(w[4]===_)<<3|+(w[5]===_)<<2|+(w[6]===_)<<1|+(w[7]===_)}function C(_={}){const w=_["level-asymmetry-allowed"];return w===!0||w===1||w==="1"}},3240:function(j,R,d){var S;j.exports=(S=d(9021),function(y){var b=S,T=b.lib,f=T.Base,h=T.WordArray,k=b.x64={};k.Word=f.extend({init:function(E,H){this.high=E,this.low=H}}),k.WordArray=f.extend({init:function(E,H){E=this.words=E||[],this.sigBytes=H!=y?H:8*E.length},toX32:function(){for(var E=this.words,H=E.length,m=[],P=0;P<H;P++){var v=E[P];m.push(v.high),m.push(v.low)}return h.create(m,this.sigBytes)},clone:function(){for(var E=f.clone.call(this),H=E.words=this.words.slice(0),m=H.length,P=0;P<m;P++)H[P]=H[P].clone();return E}})}(),S)},3303:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.parse=function(S){const y=d.exec(S??"");return y?{spatialLayers:Number(y[1]),temporalLayers:Number(y[2])}:{spatialLayers:1,temporalLayers:1}};const d=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})")},3465:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.default="00000000-0000-0000-0000-000000000000"},3471:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.OfferMediaSection=R.AnswerMediaSection=R.MediaSection=void 0;const S=d(7363),y=d(1765);class b{_mediaObject;_planB;constructor({iceParameters:h,iceCandidates:k,dtlsParameters:E,planB:H=!1}){if(this._mediaObject={},this._planB=H,h&&this.setIceParameters(h),k){this._mediaObject.candidates=[];for(const m of k){const P={component:1};P.foundation=m.foundation,P.ip=m.address??m.ip,P.port=m.port,P.priority=m.priority,P.transport=m.protocol,P.type=m.type,m.tcpType&&(P.tcptype=m.tcpType),this._mediaObject.candidates.push(P)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}E&&this.setDtlsRole(E.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(h){this._mediaObject.iceUfrag=h.usernameFragment,this._mediaObject.icePwd=h.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}R.MediaSection=b,R.AnswerMediaSection=class extends b{constructor({iceParameters:f,iceCandidates:h,dtlsParameters:k,sctpParameters:E,plainRtpParameters:H,planB:m=!1,offerMediaObject:P,offerRtpParameters:v,answerRtpParameters:U,codecOptions:C}){switch(super({iceParameters:f,iceCandidates:h,dtlsParameters:k,planB:m}),this._mediaObject.mid=String(P.mid),this._mediaObject.type=P.type,this._mediaObject.protocol=P.protocol,H?(this._mediaObject.connection={ip:H.ip,version:H.ipVersion},this._mediaObject.port=H.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),P.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const _ of U.codecs){const w={payload:_.payloadType,codec:T(_),rate:_.clockRate};_.channels>1&&(w.encoding=_.channels),this._mediaObject.rtp.push(w);const p=y.clone(_.parameters)??{};let x=y.clone(_.rtcpFeedback)??[];if(C){const{opusStereo:I,opusFec:M,opusDtx:F,opusMaxPlaybackRate:z,opusMaxAverageBitrate:G,opusPtime:Z,opusNack:ce,videoGoogleStartBitrate:X,videoGoogleMaxBitrate:Ee,videoGoogleMinBitrate:Se}=C,xe=v.codecs.find(_e=>_e.payloadType===_.payloadType);switch(_.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":I!==void 0&&(xe.parameters["sprop-stereo"]=I?1:0,p.stereo=I?1:0),M!==void 0&&(xe.parameters.useinbandfec=M?1:0,p.useinbandfec=M?1:0),F!==void 0&&(xe.parameters.usedtx=F?1:0,p.usedtx=F?1:0),z!==void 0&&(p.maxplaybackrate=z),G!==void 0&&(p.maxaveragebitrate=G),Z!==void 0&&(xe.parameters.ptime=Z,p.ptime=Z),ce||(xe.rtcpFeedback=xe.rtcpFeedback.filter(_e=>_e.type!=="nack"||_e.parameter),x=x.filter(_e=>_e.type!=="nack"||_e.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":X!==void 0&&(p["x-google-start-bitrate"]=X),Ee!==void 0&&(p["x-google-max-bitrate"]=Ee),Se!==void 0&&(p["x-google-min-bitrate"]=Se)}}const A={payload:_.payloadType,config:""};for(const I of Object.keys(p))A.config&&(A.config+=";"),A.config+=`${I}=${p[I]}`;A.config&&this._mediaObject.fmtp.push(A);for(const I of x)this._mediaObject.rtcpFb.push({payload:_.payloadType,type:I.type,subtype:I.parameter})}this._mediaObject.payloads=U.codecs.map(_=>_.payloadType).join(" "),this._mediaObject.ext=[];for(const _ of U.headerExtensions)(P.ext??[]).some(w=>w.uri===_.uri)&&this._mediaObject.ext.push({uri:_.uri,value:_.id});if(P.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),P.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:P.simulcast.list1},this._mediaObject.rids=[];for(const _ of P.rids??[])_.direction==="send"&&this._mediaObject.rids.push({id:_.id,direction:"recv"})}else if(P.simulcast_03){this._mediaObject.simulcast_03={value:P.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const _ of P.rids??[])_.direction==="send"&&this._mediaObject.rids.push({id:_.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof P.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=E.port,this._mediaObject.maxMessageSize=E.maxMessageSize):P.sctpmap&&(this._mediaObject.payloads=E.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:E.port,maxMessageSize:E.maxMessageSize})}}setDtlsRole(f){switch(f){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(f){if(!this._mediaObject.simulcast?.list1)return;const h={};for(const H of f)H.rid&&(h[H.rid]=H);const k=this._mediaObject.simulcast.list1,E=S.parseSimulcastStreamList(k);for(const H of E)for(const m of H)m.paused=!h[m.scid]?.active;this._mediaObject.simulcast.list1=E.map(H=>H.map(m=>`${m.paused?"~":""}${m.scid}`).join(",")).join(";")}};function T(f){const h=new RegExp("^(audio|video)/(.+)","i").exec(f.mimeType);if(!h)throw new TypeError("invalid codec.mimeType");return h[2]}R.OfferMediaSection=class extends b{constructor({iceParameters:f,iceCandidates:h,dtlsParameters:k,sctpParameters:E,plainRtpParameters:H,planB:m=!1,mid:P,kind:v,offerRtpParameters:U,streamId:C,trackId:_,oldDataChannelSpec:w=!1}){switch(super({iceParameters:f,iceCandidates:h,dtlsParameters:k,planB:m}),this._mediaObject.mid=String(P),this._mediaObject.type=v,H?(this._mediaObject.connection={ip:H.ip,version:H.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=H.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=E?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",v){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${C??"-"} ${_}`);for(const I of U.codecs){const M={payload:I.payloadType,codec:T(I),rate:I.clockRate};I.channels>1&&(M.encoding=I.channels),this._mediaObject.rtp.push(M);const F={payload:I.payloadType,config:""};for(const z of Object.keys(I.parameters))F.config&&(F.config+=";"),F.config+=`${z}=${I.parameters[z]}`;F.config&&this._mediaObject.fmtp.push(F);for(const z of I.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:I.payloadType,type:z.type,subtype:z.parameter})}this._mediaObject.payloads=U.codecs.map(I=>I.payloadType).join(" "),this._mediaObject.ext=[];for(const I of U.headerExtensions)this._mediaObject.ext.push({uri:I.uri,value:I.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const p=U.encodings[0],x=p.ssrc,A=p.rtx?.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],U.rtcp.cname&&this._mediaObject.ssrcs.push({id:x,attribute:"cname",value:U.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:x,attribute:"msid",value:`${C??"-"} ${_}`}),A&&(U.rtcp.cname&&this._mediaObject.ssrcs.push({id:A,attribute:"cname",value:U.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:A,attribute:"msid",value:`${C??"-"} ${_}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${x} ${A}`}));break}case"application":w?(this._mediaObject.payloads=E.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:E.port,maxMessageSize:E.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=E.port,this._mediaObject.maxMessageSize=E.maxMessageSize)}}setDtlsRole(f){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:f,streamId:h,trackId:k}){const E=f.encodings[0],H=E.ssrc,m=E.rtx?.ssrc,P=this._mediaObject.payloads.split(" ");for(const v of f.codecs){if(P.includes(String(v.payloadType)))continue;const U={payload:v.payloadType,codec:T(v),rate:v.clockRate};v.channels>1&&(U.encoding=v.channels),this._mediaObject.rtp.push(U);const C={payload:v.payloadType,config:""};for(const _ of Object.keys(v.parameters))C.config&&(C.config+=";"),C.config+=`${_}=${v.parameters[_]}`;C.config&&this._mediaObject.fmtp.push(C);for(const _ of v.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:v.payloadType,type:_.type,subtype:_.parameter})}this._mediaObject.payloads+=` ${f.codecs.filter(v=>!this._mediaObject.payloads.includes(v.payloadType)).map(v=>v.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),f.rtcp.cname&&this._mediaObject.ssrcs.push({id:H,attribute:"cname",value:f.rtcp.cname}),this._mediaObject.ssrcs.push({id:H,attribute:"msid",value:`${h??"-"} ${k}`}),m&&(f.rtcp.cname&&this._mediaObject.ssrcs.push({id:m,attribute:"cname",value:f.rtcp.cname}),this._mediaObject.ssrcs.push({id:m,attribute:"msid",value:`${h??"-"} ${k}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${H} ${m}`}))}planBStopReceiving({offerRtpParameters:f}){const h=f.encodings[0],k=h.ssrc,E=h.rtx?.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(H=>H.id!==k&&H.id!==E),E&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(H=>H.ssrcs!==`${k} ${E}`))}}},3518:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Consumer=void 0;const S=d(2994),y=d(3953),b=d(4893),T=new S.Logger("Consumer");class f extends y.EnhancedEventEmitter{_id;_localId;_producerId;_closed=!1;_rtpReceiver;_track;_rtpParameters;_paused;_appData;_observer=new y.EnhancedEventEmitter;constructor({id:k,localId:E,producerId:H,rtpReceiver:m,track:P,rtpParameters:v,appData:U}){super(),T.debug("constructor()"),this._id=k,this._localId=E,this._producerId=H,this._rtpReceiver=m,this._track=P,this._rtpParameters=v,this._paused=!P.enabled,this._appData=U??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(k){this._appData=k}get observer(){return this._observer}close(){this._closed||(T.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(T.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new b.InvalidStateError("closed");return new Promise((k,E)=>{this.safeEmit("@getstats",k,E)})}pause(){T.debug("pause()"),this._closed?T.error("pause() | Consumer closed"):this._paused?T.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){T.debug("resume()"),this._closed?T.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):T.debug("resume() | Consumer is already resumed")}onTrackEnded(){T.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}R.Consumer=f},3582:function(j,R,d){var S=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(R,"__esModule",{value:!0}),R.Logger=void 0;const y=S(d(7833)),b="h264-profile-level-id";R.Logger=class{constructor(T){T?(this._debug=(0,y.default)(`${b}:${T}`),this._warn=(0,y.default)(`${b}:WARN:${T}`),this._error=(0,y.default)(`${b}:ERROR:${T}`)):(this._debug=(0,y.default)(b),this._warn=(0,y.default)(`${b}:WARN`),this._error=(0,y.default)(`${b}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3662:(j,R,d)=>{function S(y,b){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,f){return T.__proto__=f,T},S(y,b)}d.d(R,{A:()=>S})},3738:j=>{function R(d){return j.exports=R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},j.exports.__esModule=!0,j.exports.default=j.exports,R(d)}j.exports=R,j.exports.__esModule=!0,j.exports.default=j.exports},3779:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0});const d=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);R.default={randomUUID:d}},3785:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.clone=function(d){return d===void 0?void 0:Number.isNaN(d)?NaN:typeof structuredClone=="function"?structuredClone(d):JSON.parse(JSON.stringify(d))}},3797:function(j,R,d){var S,y,b;j.exports=(b=d(9021),d(7165),b.mode.OFB=(S=b.lib.BlockCipherMode.extend(),y=S.Encryptor=S.extend({processBlock:function(T,f){var h=this._cipher,k=h.blockSize,E=this._iv,H=this._keystream;E&&(H=this._keystream=E.slice(0),this._iv=void 0),h.encryptBlock(H,0);for(var m=0;m<k;m++)T[f+m]^=H[m]}}),S.Decryptor=y,S),b.mode.OFB)},3804:(j,R,d)=>{var S=d(5602),y=/%[sdv%]/g,b=function(k){var E=1,H=arguments,m=H.length;return k.replace(y,function(P){if(E>=m)return P;var v=H[E];switch(E+=1,P){case"%%":return"%";case"%s":return String(v);case"%d":return Number(v);case"%v":return""}})},T=function(k,E,H){var m=[k+"="+(E.format instanceof Function?E.format(E.push?H:H[E.name]):E.format)];if(E.names)for(var P=0;P<E.names.length;P+=1){var v=E.names[P];E.name?m.push(H[E.name][v]):m.push(H[E.names[P]])}else m.push(H[E.name]);return b.apply(null,m)},f=["v","o","s","i","u","e","p","c","b","t","r","z","a"],h=["i","c","b","a"];j.exports=function(k,E){E=E||{},k.version==null&&(k.version=0),k.name==null&&(k.name=" "),k.media.forEach(function(v){v.payloads==null&&(v.payloads="")});var H=E.outerOrder||f,m=E.innerOrder||h,P=[];return H.forEach(function(v){S[v].forEach(function(U){U.name in k&&k[U.name]!=null?P.push(T(v,U,k)):U.push in k&&k[U.push]!=null&&k[U.push].forEach(function(C){P.push(T(v,U,C))})})}),k.media.forEach(function(v){P.push(T("m",S.m[0],v)),m.forEach(function(U){S[U].forEach(function(C){C.name in v&&v[C.name]!=null?P.push(T(U,C,v)):C.push in v&&v[C.push]!=null&&v[C.push].forEach(function(_){P.push(T(U,C,_))})})})}),P.join(`\r
`)+`\r
`}},3953:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.EnhancedEventEmitter=void 0;const S=d(9596),y=new(d(2994)).Logger("EnhancedEventEmitter");class b extends S.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(f,...h){return super.emit(f,...h)}safeEmit(f,...h){try{return super.emit(f,...h)}catch(k){y.error("safeEmit() | event listener threw an error [eventName:%s]:%o",f,k);try{super.emit("listenererror",f,k)}catch{}return!!super.listenerCount(f)}}on(f,h){return super.on(f,h),this}off(f,h){return super.off(f,h),this}addListener(f,h){return super.on(f,h),this}prependListener(f,h){return super.prependListener(f,h),this}once(f,h){return super.once(f,h),this}prependOnceListener(f,h){return super.prependOnceListener(f,h),this}removeListener(f,h){return super.off(f,h),this}removeAllListeners(f){return super.removeAllListeners(f),this}listenerCount(f){return super.listenerCount(f)}listeners(f){return super.listeners(f)}rawListeners(f){return super.rawListeners(f)}}R.EnhancedEventEmitter=b},3954:(j,R,d)=>{function S(y){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},S(y)}d.d(R,{A:()=>S})},4039:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.ReactNativeUnifiedPlan=void 0;const S=d(7363),y=d(2994),b=d(1765),T=d(8046),f=d(5544),h=d(5938),k=d(4256),E=d(4893),H=d(521),m=d(1305),P=d(3303),v=new y.Logger("ReactNativeUnifiedPlan"),U={OS:1024,MIS:1024};class C extends H.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new C}constructor(){super()}get name(){return"ReactNativeUnifiedPlan"}close(){if(v.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){v.debug("getNativeRtpCapabilities()");const w=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{w.addTransceiver("audio"),w.addTransceiver("video");const p=await w.createOffer();try{w.close()}catch{}const x=S.parse(p.sdp),A=f.extractRtpCapabilities({sdpObject:x});return k.addNackSupportForOpus(A),A}catch(p){try{w.close()}catch{}throw p}}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:U}}run({direction:w,iceParameters:p,iceCandidates:x,dtlsParameters:A,sctpParameters:I,iceServers:M,iceTransportPolicy:F,additionalSettings:z,proprietaryConstraints:G,extendedRtpCapabilities:Z}){this.assertNotClosed(),v.debug("run()"),this._direction=w,this._remoteSdp=new m.RemoteSdp({iceParameters:p,iceCandidates:x,dtlsParameters:A,sctpParameters:I}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",Z),video:T.getSendingRtpParameters("video",Z)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",Z),video:T.getSendingRemoteRtpParameters("video",Z)},A.role&&A.role!=="auto"&&(this._forcedLocalDtlsRole=A.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:M??[],iceTransportPolicy:F??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...z},G),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ce=>{this.emit("@icecandidateerror",ce)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(v.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(w){this.assertNotClosed(),v.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=w,this._pc.setConfiguration(p)}async restartIce(w){if(this.assertNotClosed(),v.debug("restartIce()"),this._remoteSdp.updateIceParameters(w),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});v.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const x={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:w,encodings:p,codecOptions:x,codec:A,onRtpSender:I}){this.assertNotClosed(),this.assertSendDirection(),v.debug("send() [kind:%s, track.id:%s]",w.kind,w.id),p&&p.length>1&&p.forEach((Pe,He)=>{Pe.rid=`r${He}`});const M=b.clone(this._sendingRtpParametersByKind[w.kind]);M.codecs=T.reduceCodecs(M.codecs,A);const F=b.clone(this._sendingRemoteRtpParametersByKind[w.kind]);F.codecs=T.reduceCodecs(F.codecs,A);const z=this._remoteSdp.getNextMediaSectionIdx(),G=this._pc.addTransceiver(w,{direction:"sendonly",streams:[this._sendStream],sendEncodings:p});I&&I(G.sender);let Z,ce=await this._pc.createOffer(),X=S.parse(ce.sdp);X.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:X});let Ee=!1;const Se=(0,P.parse)((p??[{}])[0].scalabilityMode);p&&p.length===1&&Se.spatialLayers>1&&M.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(v.debug("send() | enabling legacy simulcast for VP9 SVC"),Ee=!0,X=S.parse(ce.sdp),Z=X.media[z.idx],h.addLegacySimulcast({offerMediaObject:Z,numStreams:Se.spatialLayers}),ce={type:"offer",sdp:S.write(X)}),v.debug("send() | calling pc.setLocalDescription() [offer:%o]",ce),await this._pc.setLocalDescription(ce);let xe=G.mid??void 0;if(xe||v.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),M.mid=xe,X=S.parse(this._pc.localDescription.sdp),Z=X.media[z.idx],M.rtcp.cname=f.getCname({offerMediaObject:Z}),p)if(p.length===1){let Pe=h.getRtpEncodings({offerMediaObject:Z});Object.assign(Pe[0],p[0]),Ee&&(Pe=[Pe[0]]),M.encodings=Pe}else M.encodings=p;else M.encodings=h.getRtpEncodings({offerMediaObject:Z});if(M.encodings.length>1&&(M.codecs[0].mimeType.toLowerCase()==="video/vp8"||M.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Pe of M.encodings)Pe.scalabilityMode?Pe.scalabilityMode=`L1T${Se.temporalLayers}`:Pe.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Z,reuseMid:z.reuseMid,offerRtpParameters:M,answerRtpParameters:F,codecOptions:x});const _e={type:"answer",sdp:this._remoteSdp.getSdp()};return v.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_e),await this._pc.setRemoteDescription(_e),xe||(xe=G.mid,M.mid=xe),this._mapMidTransceiver.set(xe,G),{localId:xe,rtpParameters:M,rtpSender:G.sender}}async stopSending(w){if(this.assertSendDirection(),this._closed)return;v.debug("stopSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const x=await this._pc.createOffer();v.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._mapMidTransceiver.delete(w)}async pauseSending(w){this.assertNotClosed(),this.assertSendDirection(),v.debug("pauseSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(w);const x=await this._pc.createOffer();v.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async resumeSending(w){this.assertNotClosed(),this.assertSendDirection(),v.debug("resumeSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(this._remoteSdp.resumeSendingMediaSection(w),!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly";const x=await this._pc.createOffer();v.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async replaceTrack(w,p){this.assertNotClosed(),this.assertSendDirection(),p?v.debug("replaceTrack() [localId:%s, track.id:%s]",w,p.id):v.debug("replaceTrack() [localId:%s, no track]",w);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(p)}async setMaxSpatialLayer(w,p){this.assertNotClosed(),this.assertSendDirection(),v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",w,p);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");const A=x.sender.getParameters();A.encodings.forEach((F,z)=>{F.active=z<=p}),await x.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const I=await this._pc.createOffer();v.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const M={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async setRtpEncodingParameters(w,p){this.assertNotClosed(),this.assertSendDirection(),v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",w,p);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");const A=x.sender.getParameters();A.encodings.forEach((F,z)=>{A.encodings[z]={...F,...p}}),await x.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const I=await this._pc.createOffer();v.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const M={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async getSenderStats(w){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:w,maxPacketLifeTime:p,maxRetransmits:x,label:A,protocol:I}){this.assertNotClosed(),this.assertSendDirection();const M={negotiated:!0,id:this._nextSendSctpStreamId,ordered:w,maxPacketLifeTime:p,maxRetransmits:x,protocol:I};v.debug("sendDataChannel() [options:%o]",M);const F=this._pc.createDataChannel(A,M);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%U.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),G=S.parse(z.sdp),Z=G.media.find(X=>X.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G}),v.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:Z});const ce={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setRemoteDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:F,sctpStreamParameters:{streamId:M.id,ordered:M.ordered,maxPacketLifeTime:M.maxPacketLifeTime,maxRetransmits:M.maxRetransmits}}}async receive(w){this.assertNotClosed(),this.assertRecvDirection();const p=[],x=new Map;for(const F of w){const{trackId:z,kind:G,rtpParameters:Z,streamId:ce}=F;v.debug("receive() [trackId:%s, kind:%s]",z,G);const X=Z.mid??String(this._mapMidTransceiver.size);x.set(z,X),this._remoteSdp.receive({mid:X,kind:G,offerRtpParameters:Z,streamId:ce??Z.rtcp.cname,trackId:z})}const A={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",A),await this._pc.setRemoteDescription(A);for(const F of w){const{trackId:z,onRtpReceiver:G}=F;if(G){const Z=x.get(z),ce=this._pc.getTransceivers().find(X=>X.mid===Z);if(!ce)throw new Error("transceiver not found");G(ce.receiver)}}let I=await this._pc.createAnswer();const M=S.parse(I.sdp);for(const F of w){const{trackId:z,rtpParameters:G}=F,Z=x.get(z),ce=M.media.find(X=>String(X.mid)===Z);f.applyCodecParameters({offerRtpParameters:G,answerMediaObject:ce})}I={type:"answer",sdp:S.write(M)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),v.debug("receive() | calling pc.setLocalDescription() [answer:%o]",I),await this._pc.setLocalDescription(I);for(const F of w){const{trackId:z}=F,G=x.get(z),Z=this._pc.getTransceivers().find(ce=>ce.mid===G);if(!Z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(G,Z),p.push({localId:G,track:Z.receiver.track,rtpReceiver:Z.receiver})}return p}async stopReceiving(w){if(this.assertRecvDirection(),this._closed)return;for(const A of w){v.debug("stopReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(I.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const A of w)this._mapMidTransceiver.delete(A)}async pauseReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){v.debug("pauseReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");I.direction="inactive",this._remoteSdp.pauseMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async resumeReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){v.debug("resumeReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");I.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async getReceiverStats(w){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:w,label:p,protocol:x}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:A,ordered:I,maxPacketLifeTime:M,maxRetransmits:F}=w,z={negotiated:!0,id:A,ordered:I,maxPacketLifeTime:M,maxRetransmits:F,protocol:x};v.debug("receiveDataChannel() [options:%o]",z);const G=this._pc.createDataChannel(p,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Z={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Z),await this._pc.setRemoteDescription(Z);const ce=await this._pc.createAnswer();if(!this._transportReady){const X=S.parse(ce.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:X})}v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setLocalDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:G}}async setupTransport({localDtlsRole:w,localSdpObject:p}){p||(p=S.parse(this._pc.localDescription.sdp));const x=f.extractDtlsParameters({sdpObject:p});x.role=w,this._remoteSdp.updateDtlsRole(w==="client"?"server":"client"),await new Promise((A,I)=>{this.safeEmit("@connect",{dtlsParameters:x},A,I)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new E.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.ReactNativeUnifiedPlan=C},4160:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0})},4253:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.AwaitQueueRemovedTaskError=R.AwaitQueueStoppedError=void 0;class d extends Error{constructor(b){super(b??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,d)}}R.AwaitQueueStoppedError=d;class S extends Error{constructor(b){super(b??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,S)}}R.AwaitQueueRemovedTaskError=S},4256:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.addNackSupportForOpus=function(d){for(const S of d.codecs??[])S.mimeType.toLowerCase()!=="audio/opus"&&S.mimeType.toLowerCase()!=="audio/multiopus"||S.rtcpFeedback?.some(y=>y.type==="nack"&&!y.parameter)||(S.rtcpFeedback||(S.rtcpFeedback=[]),S.rtcpFeedback.push({type:"nack"}))}},4299:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.updateV7State=void 0;const S=d(2291),y=d(6011),b={};function T(h,k,E){return h.msecs??=-1/0,h.seq??=0,k>h.msecs?(h.seq=E[6]<<23|E[7]<<16|E[8]<<8|E[9],h.msecs=k):(h.seq=h.seq+1|0,h.seq===0&&h.msecs++),h}function f(h,k,E,H,m=0){if(h.length<16)throw new Error("Random bytes length must be >= 16");if(H){if(m<0||m+16>H.length)throw new RangeError(`UUID byte range ${m}:${m+15} is out of buffer bounds`)}else H=new Uint8Array(16),m=0;return k??=Date.now(),E??=127*h[6]<<24|h[7]<<16|h[8]<<8|h[9],H[m++]=k/1099511627776&255,H[m++]=k/4294967296&255,H[m++]=k/16777216&255,H[m++]=k/65536&255,H[m++]=k/256&255,H[m++]=255&k,H[m++]=112|E>>>28&15,H[m++]=E>>>20&255,H[m++]=128|E>>>14&63,H[m++]=E>>>6&255,H[m++]=E<<2&255|3&h[10],H[m++]=h[11],H[m++]=h[12],H[m++]=h[13],H[m++]=h[14],H[m++]=h[15],H}R.updateV7State=T,R.default=function(h,k,E){let H;if(h)H=f(h.random??h.rng?.()??(0,S.default)(),h.msecs,h.seq,k,E);else{const m=Date.now(),P=(0,S.default)();T(b,m,P),H=f(P,b.msecs,b.seq,k,E)}return k??(0,y.unsafeStringify)(H)}},4373:j=>{j.exports=function(R){var d=Object(R),S=[];for(var y in d)S.unshift(y);return function b(){for(;S.length;)if((y=S.pop())in d)return b.value=y,b.done=!1,b;return b.done=!0,b}},j.exports.__esModule=!0,j.exports.default=j.exports},4467:(j,R,d)=>{d.d(R,{A:()=>y});var S=d(816);function y(b,T,f){return(T=(0,S.A)(T))in b?Object.defineProperty(b,T,{value:f,enumerable:!0,configurable:!0,writable:!0}):b[T]=f,b}},4496:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.getRtpEncodings=function({offerMediaObject:d,track:S}){const y=new Set;for(const f of d.ssrcs??[])if(f.attribute==="msid"&&f.value.split(" ")[1]===S.id){const h=f.id;y.add(h)}if(y.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${S.id}]`);const b=new Map;for(const f of d.ssrcGroups??[]){if(f.semantics!=="FID")continue;let[h,k]=f.ssrcs.split(/\s+/);h=Number(h),k=Number(k),y.has(h)&&(y.delete(h),y.delete(k),b.set(h,k))}for(const f of y)b.set(f,null);const T=[];for(const[f,h]of b){const k={ssrc:f};h&&(k.rtx={ssrc:h}),T.push(k)}return T},R.addLegacySimulcast=function({offerMediaObject:d,track:S,numStreams:y}){if(y<=1)throw new TypeError("numStreams must be greater than 1");let b,T,f;if(!(d.ssrcs??[]).find(m=>m.attribute!=="msid"?!1:m.value.split(" ")[1]===S.id&&(b=m.id,f=m.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${S.id}]`);(d.ssrcGroups??[]).some(m=>{if(m.semantics!=="FID")return!1;const P=m.ssrcs.split(/\s+/);return Number(P[0])===b&&(T=Number(P[1]),!0)});const h=d.ssrcs.find(m=>m.attribute==="cname"&&m.id===b);if(!h)throw new Error(`a=ssrc line with cname information not found [track.id:${S.id}]`);const k=h.value,E=[],H=[];for(let m=0;m<y;++m)E.push(b+m),T&&H.push(T+m);d.ssrcGroups=d.ssrcGroups??[],d.ssrcs=d.ssrcs??[],d.ssrcGroups.push({semantics:"SIM",ssrcs:E.join(" ")});for(const m of E)d.ssrcs.push({id:m,attribute:"cname",value:k}),d.ssrcs.push({id:m,attribute:"msid",value:`${f} ${S.id}`});for(let m=0;m<H.length;++m){const P=E[m],v=H[m];d.ssrcs.push({id:v,attribute:"cname",value:k}),d.ssrcs.push({id:v,attribute:"msid",value:`${f} ${S.id}`}),d.ssrcGroups.push({semantics:"FID",ssrcs:`${P} ${v}`})}}},4557:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.URL=R.DNS=void 0;const S=d(2829),y=d(2988);var b=d(2988);function T(f,h,k,E){return(0,y.default)(80,S.default,f,h,k,E)}Object.defineProperty(R,"DNS",{enumerable:!0,get:function(){return b.DNS}}),Object.defineProperty(R,"URL",{enumerable:!0,get:function(){return b.URL}}),T.DNS=y.DNS,T.URL=y.URL,R.default=T},4633:(j,R,d)=>{var S=d(5172),y=d(6993),b=d(5869),T=d(887),f=d(1791),h=d(4373),k=d(579);function E(){var H=y(),m=H.m(E),P=(Object.getPrototypeOf?Object.getPrototypeOf(m):m.__proto__).constructor;function v(_){var w=typeof _=="function"&&_.constructor;return!!w&&(w===P||(w.displayName||w.name)==="GeneratorFunction")}var U={throw:1,return:2,break:3,continue:3};function C(_){var w,p;return function(x){w||(w={stop:function(){return p(x.a,2)},catch:function(){return x.v},abrupt:function(A,I){return p(x.a,U[A],I)},delegateYield:function(A,I,M){return w.resultName=I,p(x.d,k(A),M)},finish:function(A){return p(x.f,A)}},p=function(A,I,M){x.p=w.prev,x.n=w.next;try{return A(I,M)}finally{w.next=x.n}}),w.resultName&&(w[w.resultName]=x.v,w.resultName=void 0),w.sent=x.v,w.next=x.n;try{return _.call(this,w)}finally{x.p=w.prev,x.n=w.next}}}return(j.exports=E=function(){return{wrap:function(_,w,p,x){return H.w(C(_),w,p,x&&x.reverse())},isGeneratorFunction:v,mark:H.m,awrap:function(_,w){return new S(_,w)},AsyncIterator:f,async:function(_,w,p,x,A){return(v(w)?T:b)(C(_),w,p,x,A)},keys:h,values:k}},j.exports.__esModule=!0,j.exports.default=j.exports)()}j.exports=E,j.exports.__esModule=!0,j.exports.default=j.exports},4636:function(j,R,d){var S;j.exports=(S=d(9021),function(y){var b=S,T=b.lib,f=T.WordArray,h=T.Hasher,k=b.algo,E=[];(function(){for(var C=0;C<64;C++)E[C]=4294967296*y.abs(y.sin(C+1))|0})();var H=k.MD5=h.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(C,_){for(var w=0;w<16;w++){var p=_+w,x=C[p];C[p]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8)}var A=this._hash.words,I=C[_+0],M=C[_+1],F=C[_+2],z=C[_+3],G=C[_+4],Z=C[_+5],ce=C[_+6],X=C[_+7],Ee=C[_+8],Se=C[_+9],xe=C[_+10],_e=C[_+11],Pe=C[_+12],He=C[_+13],pe=C[_+14],Ge=C[_+15],Te=A[0],Ve=A[1],qe=A[2],nt=A[3];Te=m(Te,Ve,qe,nt,I,7,E[0]),nt=m(nt,Te,Ve,qe,M,12,E[1]),qe=m(qe,nt,Te,Ve,F,17,E[2]),Ve=m(Ve,qe,nt,Te,z,22,E[3]),Te=m(Te,Ve,qe,nt,G,7,E[4]),nt=m(nt,Te,Ve,qe,Z,12,E[5]),qe=m(qe,nt,Te,Ve,ce,17,E[6]),Ve=m(Ve,qe,nt,Te,X,22,E[7]),Te=m(Te,Ve,qe,nt,Ee,7,E[8]),nt=m(nt,Te,Ve,qe,Se,12,E[9]),qe=m(qe,nt,Te,Ve,xe,17,E[10]),Ve=m(Ve,qe,nt,Te,_e,22,E[11]),Te=m(Te,Ve,qe,nt,Pe,7,E[12]),nt=m(nt,Te,Ve,qe,He,12,E[13]),qe=m(qe,nt,Te,Ve,pe,17,E[14]),Te=P(Te,Ve=m(Ve,qe,nt,Te,Ge,22,E[15]),qe,nt,M,5,E[16]),nt=P(nt,Te,Ve,qe,ce,9,E[17]),qe=P(qe,nt,Te,Ve,_e,14,E[18]),Ve=P(Ve,qe,nt,Te,I,20,E[19]),Te=P(Te,Ve,qe,nt,Z,5,E[20]),nt=P(nt,Te,Ve,qe,xe,9,E[21]),qe=P(qe,nt,Te,Ve,Ge,14,E[22]),Ve=P(Ve,qe,nt,Te,G,20,E[23]),Te=P(Te,Ve,qe,nt,Se,5,E[24]),nt=P(nt,Te,Ve,qe,pe,9,E[25]),qe=P(qe,nt,Te,Ve,z,14,E[26]),Ve=P(Ve,qe,nt,Te,Ee,20,E[27]),Te=P(Te,Ve,qe,nt,He,5,E[28]),nt=P(nt,Te,Ve,qe,F,9,E[29]),qe=P(qe,nt,Te,Ve,X,14,E[30]),Te=v(Te,Ve=P(Ve,qe,nt,Te,Pe,20,E[31]),qe,nt,Z,4,E[32]),nt=v(nt,Te,Ve,qe,Ee,11,E[33]),qe=v(qe,nt,Te,Ve,_e,16,E[34]),Ve=v(Ve,qe,nt,Te,pe,23,E[35]),Te=v(Te,Ve,qe,nt,M,4,E[36]),nt=v(nt,Te,Ve,qe,G,11,E[37]),qe=v(qe,nt,Te,Ve,X,16,E[38]),Ve=v(Ve,qe,nt,Te,xe,23,E[39]),Te=v(Te,Ve,qe,nt,He,4,E[40]),nt=v(nt,Te,Ve,qe,I,11,E[41]),qe=v(qe,nt,Te,Ve,z,16,E[42]),Ve=v(Ve,qe,nt,Te,ce,23,E[43]),Te=v(Te,Ve,qe,nt,Se,4,E[44]),nt=v(nt,Te,Ve,qe,Pe,11,E[45]),qe=v(qe,nt,Te,Ve,Ge,16,E[46]),Te=U(Te,Ve=v(Ve,qe,nt,Te,F,23,E[47]),qe,nt,I,6,E[48]),nt=U(nt,Te,Ve,qe,X,10,E[49]),qe=U(qe,nt,Te,Ve,pe,15,E[50]),Ve=U(Ve,qe,nt,Te,Z,21,E[51]),Te=U(Te,Ve,qe,nt,Pe,6,E[52]),nt=U(nt,Te,Ve,qe,z,10,E[53]),qe=U(qe,nt,Te,Ve,xe,15,E[54]),Ve=U(Ve,qe,nt,Te,M,21,E[55]),Te=U(Te,Ve,qe,nt,Ee,6,E[56]),nt=U(nt,Te,Ve,qe,Ge,10,E[57]),qe=U(qe,nt,Te,Ve,ce,15,E[58]),Ve=U(Ve,qe,nt,Te,He,21,E[59]),Te=U(Te,Ve,qe,nt,G,6,E[60]),nt=U(nt,Te,Ve,qe,_e,10,E[61]),qe=U(qe,nt,Te,Ve,F,15,E[62]),Ve=U(Ve,qe,nt,Te,Se,21,E[63]),A[0]=A[0]+Te|0,A[1]=A[1]+Ve|0,A[2]=A[2]+qe|0,A[3]=A[3]+nt|0},_doFinalize:function(){var C=this._data,_=C.words,w=8*this._nDataBytes,p=8*C.sigBytes;_[p>>>5]|=128<<24-p%32;var x=y.floor(w/4294967296),A=w;_[15+(p+64>>>9<<4)]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),_[14+(p+64>>>9<<4)]=16711935&(A<<8|A>>>24)|4278255360&(A<<24|A>>>8),C.sigBytes=4*(_.length+1),this._process();for(var I=this._hash,M=I.words,F=0;F<4;F++){var z=M[F];M[F]=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8)}return I},clone:function(){var C=h.clone.call(this);return C._hash=this._hash.clone(),C}});function m(C,_,w,p,x,A,I){var M=C+(_&w|~_&p)+x+I;return(M<<A|M>>>32-A)+_}function P(C,_,w,p,x,A,I){var M=C+(_&p|w&~p)+x+I;return(M<<A|M>>>32-A)+_}function v(C,_,w,p,x,A,I){var M=C+(_^w^p)+x+I;return(M<<A|M>>>32-A)+_}function U(C,_,w,p,x,A,I){var M=C+(w^(_|~p))+x+I;return(M<<A|M>>>32-A)+_}b.MD5=h._createHelper(H),b.HmacMD5=h._createHmacHelper(H)}(Math),S.MD5)},4725:function(j,R,d){var S;j.exports=(S=d(9021),function(){var y=S,b=y.lib.WordArray;function T(f,h,k){for(var E=[],H=0,m=0;m<h;m++)if(m%4){var P=k[f.charCodeAt(m-1)]<<m%4*2|k[f.charCodeAt(m)]>>>6-m%4*2;E[H>>>2]|=P<<24-H%4*8,H++}return b.create(E,H)}y.enc.Base64url={stringify:function(f,h){h===void 0&&(h=!0);var k=f.words,E=f.sigBytes,H=h?this._safe_map:this._map;f.clamp();for(var m=[],P=0;P<E;P+=3)for(var v=(k[P>>>2]>>>24-P%4*8&255)<<16|(k[P+1>>>2]>>>24-(P+1)%4*8&255)<<8|k[P+2>>>2]>>>24-(P+2)%4*8&255,U=0;U<4&&P+.75*U<E;U++)m.push(H.charAt(v>>>6*(3-U)&63));var C=H.charAt(64);if(C)for(;m.length%4;)m.push(C);return m.join("")},parse:function(f,h){h===void 0&&(h=!0);var k=f.length,E=h?this._safe_map:this._map,H=this._reverseMap;if(!H){H=this._reverseMap=[];for(var m=0;m<E.length;m++)H[E.charCodeAt(m)]=m}var P=E.charAt(64);if(P){var v=f.indexOf(P);v!==-1&&(k=v)}return T(f,k,H)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),S.enc.Base64url)},4756:(j,R,d)=>{var S=d(4633)();j.exports=S;try{regeneratorRuntime=S}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=S:Function("r","regeneratorRuntime = r")(S)}},4893:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.InvalidStateError=R.UnsupportedError=void 0;class d extends Error{constructor(b){super(b),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,d):this.stack=new Error(b).stack}}R.UnsupportedError=d;class S extends Error{constructor(b){super(b),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,S):this.stack=new Error(b).stack}}R.InvalidStateError=S},4905:function(j,R,d){var S;j.exports=(S=d(9021),d(7165),S.pad.Iso10126={pad:function(y,b){var T=4*b,f=T-y.sigBytes%T;y.concat(S.lib.WordArray.random(f-1)).concat(S.lib.WordArray.create([f<<24],1))},unpad:function(y){var b=255&y.words[y.sigBytes-1>>>2];y.sigBytes-=b}},S.pad.Iso10126)},4973:(j,R,d)=>{d.d(R,{Zu:()=>f,lp:()=>T});var S=d(467),y=d(4756),b=d.n(y),T=(d(9027),function(){var h=(0,S.A)(b().mark(function k(E){return b().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(m){var P=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return P?new Promise(function(v,U){P.call(navigator,m,v,U)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),H.next=1,navigator.mediaDevices.getUserMedia(E);case 1:return H.abrupt("return",H.sent);case 2:case"end":return H.stop()}},k)}));return function(k){return h.apply(this,arguments)}}()),f=function(){var h=(0,S.A)(b().mark(function k(E){return b().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(m){var P=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return P?new Promise(function(v,U){P.call(navigator,m,v,U)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),H.next=1,navigator.mediaDevices.getDisplayMedia(E);case 1:return H.abrupt("return",H.sent);case 2:case"end":return H.stop()}},k)}));return function(k){return h.apply(this,arguments)}}()},5020:(j,R,d)=>{var S=function(h){return String(Number(h))===h?Number(h):h},y=function(h,k,E){var H=h.name&&h.names;h.push&&!k[h.push]?k[h.push]=[]:H&&!k[h.name]&&(k[h.name]={});var m=h.push?{}:H?k[h.name]:k;(function(P,v,U,C){if(C&&!U)v[C]=S(P[1]);else for(var _=0;_<U.length;_+=1)P[_+1]!=null&&(v[U[_]]=S(P[_+1]))})(E.match(h.reg),m,h.names,h.name),h.push&&k[h.push].push(m)},b=d(5602),T=RegExp.prototype.test.bind(/^([a-z])=(.*)/);R.parse=function(h){var k={},E=[],H=k;return h.split(/(\r\n|\r|\n)/).filter(T).forEach(function(m){var P=m[0],v=m.slice(2);P==="m"&&(E.push({rtp:[],fmtp:[]}),H=E[E.length-1]);for(var U=0;U<(b[P]||[]).length;U+=1){var C=b[P][U];if(C.reg.test(v))return y(C,H,v)}}),k.media=E,k};var f=function(h,k){var E=k.split(/=(.+)/,2);return E.length===2?h[E[0]]=S(E[1]):E.length===1&&k.length>1&&(h[E[0]]=void 0),h};R.parseParams=function(h){return h.split(/;\s?/).reduce(f,{})},R.parseFmtpConfig=R.parseParams,R.parsePayloads=function(h){return h.toString().split(" ").map(Number)},R.parseRemoteCandidates=function(h){for(var k=[],E=h.split(" ").map(S),H=0;H<E.length;H+=3)k.push({component:E[H],ip:E[H+1],port:E[H+2]});return k},R.parseImageAttributes=function(h){return h.split(" ").map(function(k){return k.substring(1,k.length-1).split(",").reduce(f,{})})},R.parseSimulcastStreamList=function(h){return h.split(";").map(function(k){return k.split(",").map(function(E){var H,m=!1;return E[0]!=="~"?H=S(E):(H=S(E.substring(1,E.length)),m=!0),{scid:H,paused:m}})})}},5071:(j,R,d)=>{d.d(R,{V:()=>S});var S={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},5172:j=>{j.exports=function(R,d){this.v=R,this.k=d},j.exports.__esModule=!0,j.exports.default=j.exports},5248:(j,R,d)=>{d(1765)},5328:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.FakeMediaStreamTrack=void 0;const S=d(182),y=d(5862),b=d(3785);class T extends y.FakeEventTarget{#f;#d;#p;#e;#n;#t;#r;#m;#a;#h;#i;#s=null;#o=null;#c=null;#l=null;#u=null;constructor({kind:h,id:k,label:E,contentHint:H,enabled:m,muted:P,readyState:v,capabilities:U,constraints:C,settings:_,data:w}){super(),this.#f=k??(0,S.v4)(),this.#d=h,this.#p=E??"",this.#r=H??"",this.#n=m??!0,this.#t=P??!1,this.#e=v??"live",this.#m=U??{},this.#a=C??{},this.#h=_??{},this.#i=w??{}}get id(){return this.#f}get kind(){return this.#d}get label(){return this.#p}get contentHint(){return this.#r}set contentHint(h){this.#r=h}get enabled(){return this.#n}set enabled(h){const k=this.#n!==h;this.#n=h,k&&this.dispatchEvent(new Event("enabledchange"))}get muted(){return this.#t}get readyState(){return this.#e}get data(){return this.#i}set data(h){this.#i=h}get onmute(){return this.#s}set onmute(h){this.#s&&this.removeEventListener("mute",this.#s),this.#s=h,h&&this.addEventListener("mute",h)}get onunmute(){return this.#o}set onunmute(h){this.#o&&this.removeEventListener("unmute",this.#o),this.#o=h,h&&this.addEventListener("unmute",h)}get onended(){return this.#c}set onended(h){this.#c&&this.removeEventListener("ended",this.#c),this.#c=h,h&&this.addEventListener("ended",h)}get onenabledchange(){return this.#l}set onenabledchange(h){this.#l&&this.removeEventListener("enabledchange",this.#l),this.#l=h,h&&this.addEventListener("enabledchange",h)}get onstopped(){return this.#u}set onstopped(h){this.#u&&this.removeEventListener("stopped",this.#u),this.#u=h,h&&this.addEventListener("stopped",h)}addEventListener(h,k,E){super.addEventListener(h,k,E)}removeEventListener(h,k){super.removeEventListener(h,k)}stop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new Event("stopped")))}clone({id:h,data:k}={}){return new T({id:h??(0,S.v4)(),kind:this.#d,label:this.#p,contentHint:this.#r,enabled:this.#n,muted:this.#t,readyState:this.#e,capabilities:(0,b.clone)(this.#m),constraints:(0,b.clone)(this.#a),settings:(0,b.clone)(this.#h),data:k??(0,b.clone)(this.#i)})}getCapabilities(){return this.#m}getConstraints(){return this.#a}async applyConstraints(h={}){return this.#a=h,Promise.resolve()}getSettings(){return this.#h}remoteStop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new Event("stopped")),this.dispatchEvent(new Event("ended")))}remoteMute(){this.#t||(this.#t=!0,this.dispatchEvent(new Event("mute")))}remoteUnmute(){this.#t&&(this.#t=!1,this.dispatchEvent(new Event("unmute")))}}R.FakeMediaStreamTrack=T},5370:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0})},5414:j=>{j.exports=(()=>{var R={43:function(b,T,f){var h,k;(function(){h=function(){var E=function(){},H="undefined",m=typeof window!==H&&typeof window.navigator!==H&&/Trident\/|MSIE /.test(window.navigator.userAgent),P=["trace","debug","info","warn","error"];function v(M,F){var z=M[F];if(typeof z.bind=="function")return z.bind(M);try{return Function.prototype.bind.call(z,M)}catch{return function(){return Function.prototype.apply.apply(z,[M,arguments])}}}function U(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function C(M,F){for(var z=0;z<P.length;z++){var G=P[z];this[G]=z<M?E:this.methodFactory(G,M,F)}this.log=this.debug}function _(M,F,z){return function(){typeof console!==H&&(C.call(this,F,z),this[M].apply(this,arguments))}}function w(M,F,z){return function(G){return G==="debug"&&(G="log"),typeof console!==H&&(G==="trace"&&m?U:console[G]!==void 0?v(console,G):console.log!==void 0?v(console,"log"):E)}(M)||_.apply(this,arguments)}function p(M,F,z){var G,Z=this,ce="loglevel";function X(){var Se;if(typeof window!==H&&ce){try{Se=window.localStorage[ce]}catch{}if(typeof Se===H)try{var xe=window.document.cookie,_e=xe.indexOf(encodeURIComponent(ce)+"=");_e!==-1&&(Se=/^([^;]+)/.exec(xe.slice(_e))[1])}catch{}return Z.levels[Se]===void 0&&(Se=void 0),Se}}typeof M=="string"?ce+=":"+M:typeof M=="symbol"&&(ce=void 0),Z.name=M,Z.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Z.methodFactory=z||w,Z.getLevel=function(){return G},Z.setLevel=function(Se,xe){if(typeof Se=="string"&&Z.levels[Se.toUpperCase()]!==void 0&&(Se=Z.levels[Se.toUpperCase()]),!(typeof Se=="number"&&Se>=0&&Se<=Z.levels.SILENT))throw"log.setLevel() called with invalid level: "+Se;if(G=Se,xe!==!1&&function(_e){var Pe=(P[_e]||"silent").toUpperCase();if(typeof window!==H&&ce){try{return void(window.localStorage[ce]=Pe)}catch{}try{window.document.cookie=encodeURIComponent(ce)+"="+Pe+";"}catch{}}}(Se),C.call(Z,Se,M),typeof console===H&&Se<Z.levels.SILENT)return"No console available for logging"},Z.setDefaultLevel=function(Se){X()||Z.setLevel(Se,!1)},Z.enableAll=function(Se){Z.setLevel(Z.levels.TRACE,Se)},Z.disableAll=function(Se){Z.setLevel(Z.levels.SILENT,Se)};var Ee=X();Ee==null&&(Ee=F??"WARN"),Z.setLevel(Ee,!1)}var x=new p,A={};x.getLogger=function(M){if(typeof M!="symbol"&&typeof M!="string"||M==="")throw new TypeError("You must supply a name when creating a logger.");var F=A[M];return F||(F=A[M]=new p(M,x.getLevel(),x.methodFactory)),F};var I=typeof window!==H?window.log:void 0;return x.noConflict=function(){return typeof window!==H&&window.log===x&&(window.log=I),x},x.getLoggers=function(){return A},x.default=x,x},(k=h.call(T,f,T,b))===void 0||(b.exports=k)})()}},d={};function S(b){var T=d[b];if(T!==void 0)return T.exports;var f=d[b]={exports:{}};return R[b].call(f.exports,f,f.exports,S),f.exports}S.d=(b,T)=>{for(var f in T)S.o(T,f)&&!S.o(b,f)&&Object.defineProperty(b,f,{enumerable:!0,get:T[f]})},S.o=(b,T)=>Object.prototype.hasOwnProperty.call(b,T),S.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var y={};return(()=>{S.r(y),S.d(y,{VideoSDKMetrics:()=>dr});const b="inbound",T="outbound",f={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:b},h={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:T},k={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:b},E={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:T},H="inbound-rtp",m="bytesReceived",P="bytesSent",v="clockRate",U="codecId",C="currentRoundTripTime",_="roundTripTime",w="fractionLost",p="frameHeight",x="frameWidth",A="qualityLimitationReason",I="qualityLimitationDurations",M="qualityLimitationResolutionChanges",F="id",z="jitter",G="kind",Z="mimeType",ce="packetsLost",X="packetsReceived",Ee="packetsSent",Se="responsesReceived",xe="ssrc",_e="selected",Pe="timestamp",He="totalRoundTripTime",pe="roundTripTimeMeasurements",Ge="type",Te="framesDecoded",Ve="framesEncoded",qe="totalDecodeTime",nt="totalEncodeTime",Bt="pliCount",Pr="nackCount",Ur="trackId",Zn="trackIdentifier",fr="mediaSourceId",gr="audio",Bn="video",Ie={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},Be="audio",Ye="video",Qt="network",Ft="data";var xt=S(43);const pn=()=>`${new Date().toISOString()} | metrics`,Ln=(at,ut,Wt)=>`${at} | ${ut} | ${Wt}`;xt.setDefaultLevel(xt.levels.TRACE);const zt=(at,ut,Wt)=>{Wt?xt.debug(Ln(pn(),at,ut),Wt):xt.debug(Ln(pn(),at,ut))},sr=(at,ut)=>{xt.warn(Ln(pn(),at,ut))},Hr=(at,ut)=>{xt.error(Ln(pn(),at,ut))},Rr="extractor   ",Vr=(at,ut,Wt)=>{if(!ut)return null;const Tt={};let tn=ut[gr][at];tn||(tn=Wt===b?{...f}:{...h}),Tt[gr]=tn;let Xt=ut[Bn][at];return Xt||(Xt=Wt===b?{...k}:{...E}),Tt[Bn]=Xt,Tt},zr=(at,ut,Wt,Tt)=>{let tn=!1;const Xt=Tt[ut].total_rtt_ms_out,Xe=Tt[ut].total_rtt_measure_out,Sn=Wt?Wt[ut].total_rtt_ms_out:0,Rn=Wt?Wt[ut].total_rtt_measure_out:0,Vn={rtt:null,totalRTT:Xt,totalRTTMeasurements:Xe};if(at[Pe]===Tt[ut].timestamp_out||!Object.prototype.hasOwnProperty.call(at,_)||Object.prototype.hasOwnProperty.call(at,pe)&&(tn=!0,Number(at[pe])===0||Number(at[pe])-Rn===Xe))return Vn;const or=1e3*Number(at[_]);let $t=Xt+or,bt=Xe+1;return tn&&($t=1e3*Number(at[He])-Sn,bt=Number(at[pe])-Rn),{rtt:or,totalRTT:$t,totalRTTMeasurements:bt}},Ar=(at,ut,Wt)=>at[Pe]===Wt[ut].timestamp_out?null:Object.prototype.hasOwnProperty.call(at,z)?1e3*(Number(at[z])||0):null,$r=(at,ut,Wt,Tt)=>{if(!Object.prototype.hasOwnProperty.call(at,Ee)||!Object.prototype.hasOwnProperty.call(at,P))return{packetsSent:Wt[ut].total_packets_out,packetsLost:Wt[ut].total_packets_lost_out,bytesSent:Wt[ut].total_KBytes_out};const tn=Number(at[Ee])||0-(Tt?Tt[ut].total_packets_out:0),Xt=tn-Wt[ut].total_packets_out,Xe=Number(at[P])/1024-(Tt?Tt[ut].total_KBytes_out:0),Sn=Xe-Wt[ut].total_KBytes_out,Rn=at[Pe]||Date.now(),Vn=Tt?Tt.timestamp:null;let or=Wt.timestamp;!or&&Vn&&(or=Vn);const $t=or?Rn-or:0;return{packetsSent:tn,deltaPacketsSent:Xt,KBytesSent:Xe,deltaKBytesSent:Sn,kbsSent:$t>0?.008*Sn*1024/$t*1e3:0}},ga=(at,ut,Wt,Tt)=>{let tn=Wt[ut].total_packets_lost_out,Xt=0,Xe=0;return Object.prototype.hasOwnProperty.call(at,ce)&&(tn=Number(at[ce])||0-(Tt?Tt[ut].total_packets_lost_out:0),Xt=tn-Wt[ut].total_packets_lost_out),Object.prototype.hasOwnProperty.call(at,w)&&(Xe=Number(100*at[w])),{packetsLost:tn,deltaPacketsLost:Xt,fractionLost:Xe}},ea=(at,ut,Wt,Tt)=>{if(!Object.prototype.hasOwnProperty.call(at,X)||!Object.prototype.hasOwnProperty.call(at,ce)||!Object.prototype.hasOwnProperty.call(at,m))return{percent_packets_lost:Wt[ut].percent_packets_lost_in,packetsReceived:Wt[ut].total_packets_in,packetsLost:Wt[ut].total_packets_lost_in,bytesReceived:Wt[ut].total_KBytes_in};const tn=(Number(at[X])||0)-(Tt?Tt[ut].total_packets_in:0),Xt=(Number(at[ce])||0)-(Tt?Tt[ut].total_packets_lost_in:0),Xe=Xt-Wt[ut].total_packets_lost_in,Sn=tn-Wt[ut].total_packets_in,Rn=tn!==Wt[ut].total_packets_in?100*Xe/(Xe+Sn):0,Vn=Number(at[m])/1024-(Tt?Tt[ut].total_KBytes_in:0),or=Vn-Wt[ut].total_KBytes_in,$t=at[Pe]||Date.now(),bt=Tt?Tt.timestamp:null;let Pn=Wt.timestamp;!Pn&&bt&&(Pn=bt);const kn=Pn?$t-Pn:0;return{percentPacketsLost:Rn,packetsReceived:tn,deltaPacketsReceived:Sn,packetsLost:Xt,deltaPacketsLost:Xe,KBytesReceived:Vn,deltaKBytesReceived:or,kbsReceived:kn>0?.008*or*1024/kn*1e3:0}},oa=at=>at.candidateType!=="relay"?"":at.relayProtocol||"",Nn=at=>Object.prototype.hasOwnProperty.call(at,p)&&Object.prototype.hasOwnProperty.call(at,x)?{width:at[x]||null,height:at[p]||null,framerate:at.framesPerSecond}:{width:null,height:null,framerate:null};class Ha{constructor(ut,Wt){this._callbacks={onStatsCollected:null},this._id=`collector-${Wt}`,this._moduleName=this._id,this._probeId=Wt,this._config=ut,this._state="idle",this._statsReports=[]}registerCallback(ut,Wt,Tt){ut in this._callbacks?(this._callbacks[ut]={callback:Wt,context:Tt},zt(this._moduleName,`registered callback '${ut}'`)):Hr(this._moduleName,`can't register callback for '${ut}' - not found`)}unregisterCallback(ut){ut in this._callbacks?(this._callbacks[ut]=null,delete this._callbacks[ut],zt(this._moduleName,`unregistered callback '${ut}'`)):Hr(this._moduleName,`can't unregister callback for '${ut}' - not found`)}analyze(ut,Wt){const Tt=(Xt=>{const Xe={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(Xt){const Sn={...Xt,audio:{},video:{},data:{...Xt.data},network:{...Xt.network}};return Object.keys(Xt.audio).forEach(Rn=>{Sn.audio[Rn]={...Xt.audio[Rn]}}),Object.keys(Xt.video).forEach(Rn=>{Sn.video[Rn]={...Xt.video[Rn]}}),Sn}return{...Xe,audio:{},video:{},data:{...Xe.data},network:{...Xe.network}}})(Wt);Tt.name=this._config.name,Tt.meetingId=this._config.meetingId,Tt.peerId=this._config.peerId,Tt.count=Wt?Wt.count+1:1;let tn=null;return ut.forEach(Xt=>{!tn&&Xt.timestamp&&(tn=Xt.timestamp),((Xe,Sn,Rn,Vn)=>{if(!Xe)return[];switch(Xe[Ge]){case"candidate-pair":let or=!1;if(Xe.nominated&&Xe.state==="succeeded"&&(or=!0,zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe),_e in Xe&&!Xe[_e]&&(or=!1)),or){Xe.localCandidateId,Xe.remoteCandidateId;const bt=((kn,bn,Nr)=>{const Er=(kn[m]||0)/1024-0,Or=(kn[P]||0)/1024-0,Jn=kn[Pe]||Date.now(),Hn=Er-bn.data.total_KBytes_in,ha=Or-bn.data.total_KBytes_out;let ca=bn.timestamp;const Ta=ca?Jn-ca:0;return{total_KBytes_received:Er,total_KBytes_sent:Or,delta_KBytes_received:Hn,delta_KBytes_sent:ha,kbs_speed_received:Ta>0?.008*Hn*1024/Ta*1e3:0,kbs_speed_sent:Ta>0?.008*ha*1024/Ta*1e3:0}})(Xe,Sn),Pn=((kn=>{kn.availableIncomingBitrate,kn.availableOutgoingBitrate})(Xe),((kn,bn,Nr,Er)=>{if(!Object.prototype.hasOwnProperty.call(kn,C))return{rtt:null,totalRTT:Er[bn].total_rtt_connectivity_ms,totalRTTMeasurements:Er[bn].total_rtt_connectivity_measure};const Or=1e3*Number(kn[C]);let Jn=Er[bn].total_rtt_connectivity_ms+Or,Hn=Er[bn].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(kn,He)&&(Jn=1e3*Number(kn[He])-0),Object.prototype.hasOwnProperty.call(kn,Se)&&(Hn=Number(kn[Se])-0),{rtt:Or,totalRTT:Jn,totalRTTMeasurements:Hn}})(Xe,"data",Vn,Sn));return[{type:Ft,value:{total_KBytes_in:bt.total_KBytes_received}},{type:Ft,value:{total_KBytes_out:bt.total_KBytes_sent}},{type:Ft,value:{delta_KBytes_in:bt.delta_KBytes_received}},{type:Ft,value:{delta_KBytes_out:bt.delta_KBytes_sent}},{type:Ft,value:{delta_kbs_in:bt.kbs_speed_received}},{type:Ft,value:{delta_kbs_out:bt.kbs_speed_sent}},{type:Ft,value:{delta_rtt_connectivity_ms:Pn.rtt}}]}break;case"local-candidate":if(Xe[F]===Sn.network.local_candidate_id)return[{type:Qt,value:{infrastructure:Xe.networkType}},{type:Qt,value:{local_candidate_protocol:Xe.protocol||""}},{type:Qt,value:{local_candidate_relay_protocol:oa(Xe)}}];break;case H:{zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe);const bt=Xe[xe],Pn=Vr(bt,Sn,b);Pn&&(Pn.timestamp=Sn.timestamp);const kn=Vr(bt,Vn,b);if(kn&&(kn.timestamp=Vn.timestamp),Xe[G]===gr){const bn=ea(Xe,gr,Pn,kn),Nr=Ar(Xe,gr,Pn),Er=Xe[U]||"",Or=((Jn,Hn,ha)=>{const ca=Number(Jn.concealmentEvents)||0,Ta=ca-(ha[Hn].total_concealment_events||0),Oa=Number(Jn.insertedSamplesForDeceleration)||0,ss=Oa-(ha[Hn].total_inserted_samples_for_decelaration||0),ai=Number(Jn.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:ca,deltaConcealmentEvents:Ta,totalInsertedSamplesForDecelaration:Oa,deltaInsertedSamplesForDecelaration:ss,totalRemovedSamplesForAccelaration:ai,deltaRemovedSampleForAccelaration:ai-(ha[Hn].total_removed_samples_for_accelaration||0)}})(Xe,gr,Pn);return[{ssrc:bt,type:Be,value:{codec_id_in:Er}},{ssrc:bt,type:Be,value:{total_packets_in:bn.packetsReceived}},{ssrc:bt,type:Be,value:{delta_packets_in:bn.deltaPacketsReceived}},{ssrc:bt,type:Be,value:{total_packets_lost_in:bn.packetsLost}},{ssrc:bt,type:Be,value:{delta_packets_lost_in:bn.deltaPacketsLost}},{ssrc:bt,type:Be,value:{percent_packets_lost_in:bn.percentPacketsLost}},{ssrc:bt,type:Be,value:{total_KBytes_in:bn.KBytesReceived}},{ssrc:bt,type:Be,value:{delta_KBytes_in:bn.deltaKBytesReceived}},{ssrc:bt,type:Be,value:{delta_kbs_in:bn.kbsReceived}},{ssrc:bt,type:Be,value:{delta_jitter_ms_in:Nr}},{ssrc:bt,type:Be,value:{total_concealment_events:Or.totalConcealmentEvents}},{ssrc:bt,type:Be,value:{delta_concealment_events:Or.deltaConcealmentEvents}},{ssrc:bt,type:Be,value:{total_inserted_samples_for_decelaration:Or.totalInsertedSamplesForDecelaration}},{ssrc:bt,type:Be,value:{delta_inserted_samples_for_decelaration:Or.deltaInsertedSamplesForDecelaration}},{ssrc:bt,type:Be,value:{total_removed_samples_for_accelaration:Or.totalRemovedSamplesForAccelaration}},{ssrc:bt,type:Be,value:{delta_removed_samples_for_accelaration:Or.deltaRemovedSampleForAccelaration}},{ssrc:bt,type:Be,value:{track_in:Xe[Ur]}},{ssrc:bt,type:Be,value:{track_id_in:Xe[Zn]}},{ssrc:bt,type:Be,value:{media_source_id:Xe[fr]}}]}if(Xe[G]===Bn){((Jn,Hn)=>{if(!Object.prototype.hasOwnProperty.call(Jn,Te)||!Object.prototype.hasOwnProperty.call(Jn,qe))return{delta_ms_decode_frame:Hn[Bn].delta_ms_decode_frame_in,frames_decoded:Hn[Bn].total_frames_decoded_in,total_decode_time:Hn[Bn].total_time_decoded_in};Jn[Te],Jn[qe],Hn[Bn].total_time_decoded_in,Hn[Bn].total_frames_decoded_in})(Xe,Pn);const bn=ea(Xe,Bn,Pn,kn),Nr=Ar(Xe,Bn,Pn),Er=(Xe.decoderImplementation,Xe[U]||null),Or=Nn(Xe);return((Jn,Hn,ha)=>{if(!Object.prototype.hasOwnProperty.call(Jn,Bt)||!Object.prototype.hasOwnProperty.call(Jn,Pr))return{pliCount:Hn.total_pli_sent_in,nackCount:Hn.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};Jn[Bt],ha&&ha[Bn].total_pli_sent_in,Jn[Pr],ha&&ha[Bn].total_nack_sent_in,Hn[Bn].total_pli_sent_in,Hn[Bn].total_nack_sent_in})(Xe,Pn,kn),[{ssrc:bt,type:Ye,value:{codec_id_in:Er}},{ssrc:bt,type:Ye,value:{total_packets_in:bn.packetsReceived}},{ssrc:bt,type:Ye,value:{delta_packets_in:bn.deltaPacketsReceived}},{ssrc:bt,type:Ye,value:{total_packets_lost_in:bn.packetsLost}},{ssrc:bt,type:Ye,value:{delta_packets_lost_in:bn.deltaPacketsLost}},{ssrc:bt,type:Ye,value:{percent_packets_lost_in:bn.percentPacketsLost}},{ssrc:bt,type:Ye,value:{total_KBytes_in:bn.KBytesReceived}},{ssrc:bt,type:Ye,value:{delta_KBytes_in:bn.deltaKBytesReceived}},{ssrc:bt,type:Ye,value:{delta_kbs_in:bn.kbsReceived}},{ssrc:bt,type:Ye,value:{delta_jitter_ms_in:Nr}},{ssrc:bt,type:Ye,value:{size_in:Or}},{ssrc:bt,type:Ye,value:{track_in:Xe[Ur]}},{ssrc:bt,type:Ye,value:{track_id_in:Xe[Zn]}},{ssrc:bt,type:Ye,value:{media_source_id:Xe[fr]}},{ssrc:bt,type:Ye,value:{pause_count:Xe.pauseCount}},{ssrc:bt,type:Ye,value:{total_pauses_duration:Xe.totalPausesDuration}},{ssrc:bt,type:Ye,value:{freeze_count:Xe.freezeCount}},{ssrc:bt,type:Ye,value:{total_freezes_duration:Xe.totalFreezesDuration}}]}break}case"outbound-rtp":{zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe);const bt=Xe[xe],Pn=Vr(bt,Sn,T);Pn&&(Pn.timestamp=Sn.timestamp);const kn=Vr(bt,Vn,T);if(kn&&(kn.timestamp=Vn.timestamp),Xe[G]===gr){const bn=Xe[U]||null,Nr=$r(Xe,gr,Pn,kn);return[{ssrc:bt,type:Be,value:{codec_id_out:bn}},{ssrc:bt,type:Be,value:{total_packets_out:Nr.packetsSent}},{ssrc:bt,type:Be,value:{delta_packets_out:Nr.deltaPacketsSent}},{ssrc:bt,type:Be,value:{total_KBytes_out:Nr.KBytesSent}},{type:Be,value:{delta_KBytes_out:Nr.deltaKBytesSent}},{ssrc:bt,type:Be,value:{delta_kbs_out:Nr.kbsSent}},{ssrc:bt,type:Be,value:{track_out:Xe[Ur]}},{ssrc:bt,type:Be,value:{track_id_out:Xe[Zn]}},{ssrc:bt,type:Be,value:{media_source_id:Xe[fr]}}]}if(Xe[G]===Bn){Xe.encoderImplementation;const bn=Xe[U]||null,Nr=(((Jn,Hn)=>{if(!Object.prototype.hasOwnProperty.call(Jn,Ve)||!Object.prototype.hasOwnProperty.call(Jn,nt))return{delta_ms_encode_frame:Hn[Bn].delta_ms_encode_frame_out,frames_encoded:Hn[Bn].total_frames_encoded_out,total_encode_time:Hn[Bn].total_time_encoded_out};Jn[Ve],Jn[nt],Hn[Bn].total_time_encoded_out,Hn[Bn].total_frames_encoded_out})(Xe,Pn),Nn(Xe)),Er=(Jn=>{const Hn=Object.prototype.hasOwnProperty.call(Jn,A)?Jn[A]:null,ha=Object.prototype.hasOwnProperty.call(Jn,M)?Jn[M]:null,ca=Object.prototype.hasOwnProperty.call(Jn,I)?Jn[I]:null;return ca&&Object.keys(ca).forEach(Ta=>{ca[Ta]>1e3&&(ca[Ta]=Number(ca[Ta]/1e3))}),{reason:Hn,durations:ca,resolutionChanges:ha}})(Xe),Or=(((Jn,Hn,ha)=>{if(!Object.prototype.hasOwnProperty.call(Jn,Bt)||!Object.prototype.hasOwnProperty.call(Jn,Pr))return{pliCount:Hn.total_pli_received_out,nackCount:Hn.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};Jn[Bt],ha&&ha[Bn].total_pli_received_out,Jn[Pr],ha&&ha[Bn].total_nack_received_out,Hn[Bn].total_pli_received_out,Hn[Bn].total_nack_received_out})(Xe,Pn,kn),$r(Xe,Bn,Pn,kn));return[{ssrc:bt,type:Ye,value:{codec_id_out:bn}},{ssrc:bt,type:Ye,value:{total_packets_out:Or.packetsSent}},{ssrc:bt,type:Ye,value:{delta_packets_out:Or.deltaPacketsSent}},{ssrc:bt,type:Ye,value:{total_KBytes_out:Or.KBytesSent}},{ssrc:bt,type:Ye,value:{delta_KBytes_out:Or.deltaKBytesSent}},{ssrc:bt,type:Ye,value:{delta_kbs_out:Or.kbsSent}},{ssrc:bt,type:Ye,value:{size_out:Nr}},{ssrc:bt,type:Ye,value:{limitation_out:Er}},{ssrc:bt,type:Ye,value:{track_out:Xe[Ur]}},{ssrc:bt,type:Ye,value:{track_id_out:Xe[Zn]}},{ssrc:bt,type:Ye,value:{media_source_id:Xe[fr]}}]}break}case"media-source":{zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe);const bt=[];return Object.keys(Sn[gr]).forEach(Pn=>{const kn=Sn[gr][Pn];if(kn.media_source_id===Xe[F]){var bn=Xe[Zn];bt.push({ssrc:kn.ssrc,type:Be,value:{track_id_out:bn}})}}),Object.keys(Sn[Bn]).forEach(Pn=>{const kn=Sn[Bn][Pn];if(kn.media_source_id===Xe[F]){var bn=Xe[Zn];bt.push({ssrc:kn.ssrc,type:Ye,value:{track_id_out:bn}})}}),bt}case"track":{zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe);const bt=[];return Object.keys(Sn[gr]).forEach(Pn=>{const kn=Sn[gr][Pn];if(kn.track_in===Xe[F]||kn.track_out===Xe[F]){zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe);var bn=Xe[Zn];Xe[F]===kn.track_in?bt.push({ssrc:kn.ssrc,type:Be,value:{track_id_in:bn}}):bt.push({ssrc:kn.ssrc,type:Be,value:{track_id_out:bn}})}}),Object.keys(Sn[Bn]).forEach(Pn=>{const kn=Sn[Bn][Pn];if(kn.track_in===Xe[F]||kn.track_out===Xe[F]){zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe);var bn=Xe[Zn];Xe[F]===kn.track_in?bt.push({ssrc:kn.ssrc,type:Ye,value:{track_id_in:bn}}):bt.push({ssrc:kn.ssrc,type:Ye,value:{track_id_out:bn}})}}),bt}case"codec":const $t=[];return Object.keys(Sn[gr]).forEach(bt=>{const Pn=Sn[gr][bt];if(Pn.codec_id_in===Xe[F]||Pn.codec_id_out===Xe[F]){zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe);const kn=(bn=>({channels:bn.channels||null,clock_rate:bn[v]||null,mime_type:bn[Z]||null,sdp_fmtp_line:bn.sdpFmtpLine||null}))(Xe);Xe[F]===Pn.codec_id_in?$t.push({ssrc:Pn.ssrc,type:Be,value:{codec_in:kn}}):$t.push({ssrc:Pn.ssrc,type:Be,value:{codec_out:kn}})}}),Object.keys(Sn[Bn]).forEach(bt=>{const Pn=Sn[Bn][bt];if(Pn.codec_id_in===Xe[F]||Pn.codec_id_out===Xe[F]){zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe);const kn=(bn=>({clock_rate:bn[v]||null,mime_type:bn[Z]||null}))(Xe);Xe[F]===Pn.codec_id_in?$t.push({ssrc:Pn.ssrc,type:Ye,value:{codec_in:kn}}):$t.push({ssrc:Pn.ssrc,type:Ye,value:{codec_out:kn}})}}),$t;case"remote-inbound-rtp":{zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe);const bt=Xe[xe],Pn=Vr(bt,Sn,T),kn=Vr(bt,Vn,T);if(Xe[G]===gr){const bn=zr(Xe,gr,kn,Pn),Nr=Ar(Xe,gr,Pn),Er=ga(Xe,gr,Pn,kn);return[{ssrc:bt,type:Be,value:{delta_rtt_ms_out:bn.rtt}},{ssrc:bt,type:Be,value:{delta_jitter_ms_out:Nr}},{ssrc:bt,type:Be,value:{timestamp_out:Xe[Pe]}},{ssrc:bt,type:Be,value:{total_packets_lost_out:Er.packetsLost}},{ssrc:bt,type:Be,value:{delta_packets_lost_out:Er.deltaPacketsLost}},{ssrc:bt,type:Be,value:{percent_packets_lost_out:Er.fractionLost}}]}if(Xe[G]===Bn){const bn=zr(Xe,Bn,kn,Pn),Nr=Ar(Xe,Bn,Pn),Er=ga(Xe,Bn,Pn,kn);return[{ssrc:bt,type:Ye,value:{delta_rtt_ms_out:bn.rtt}},{ssrc:bt,type:Ye,value:{delta_jitter_ms_out:Nr}},{ssrc:bt,type:Ye,value:{timestamp_out:Xe[Pe]}},{ssrc:bt,type:Ye,value:{total_packets_lost_out:Er.packetsLost}},{ssrc:bt,type:Ye,value:{delta_packets_lost_out:Er.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{zt(Rr,`analyze() - got stats ${Xe[Ge]} for ${Rn}`,Xe);const bt=Xe[xe],Pn=Vr(bt,Sn,T),kn=Vr(bt,Vn,T);if(Xe[G]===gr){const bn=zr(Xe,gr,kn,Pn);return[{ssrc:bt,type:Be,value:{delta_rtt_ms_in:bn.rtt}},{ssrc:bt,type:Be,value:{timestamp_in:Xe[Pe]}}]}break}}return[]})(Xt,Tt,Tt.name,null).forEach(Xe=>{if(Xe.value&&Xe.type)if(Xe.ssrc){let Vn=Tt[Xe.type][Xe.ssrc];Vn||(Sn=Xe.type,Rn=Xt.type,Vn=Sn===gr?Rn===H?{...f}:{...h}:Rn===H?{...k}:{...E},Vn.ssrc=Xe.ssrc,Tt[Xe.type][Xe.ssrc]=Vn),Object.keys(Xe.value).forEach(or=>{Xe.value[or]!==void 0&&(Vn[or]=Xe.value[or])})}else Object.keys(Xe.value).forEach(Vn=>{Xe.value[Vn]!==void 0&&(Tt[Xe.type][Vn]=Xe.value[Vn])});var Sn,Rn})}),Tt.timestamp=tn,Tt}async collectStats(){try{const ut=await this._config.monitoringObject.getStats(),Wt=this.analyze(ut,this._statsReports.slice().pop()||null);return this._statsReports.push(Wt),this.fireOnStatsCollected(Wt),ut}catch(ut){return Hr(this._moduleName,`got error ${ut}`),null}}fireOnStatsCollected(ut){if(this._callbacks.onStatsCollected){const Wt={};Wt.meetingId=ut.meetingId,Wt.peerId=ut.peerId,Wt.name=ut.name,Wt.audio=[],Wt.video=[],Object.values(ut.audio).forEach(Tt=>{const tn={};if(tn.network=Ie[ut.network.infrastructure],tn.timestamp=ut.timestamp,Tt.direction==b){tn.codec=Tt.codec_in.mime_type,tn.jitter=Tt.delta_jitter_ms_in,tn.bitrate=Tt.delta_kbs_in,tn.packetsLost=Tt.delta_packets_lost_in,tn.rtt=ut.data.delta_rtt_connectivity_ms||0,tn.totalPackets=Tt.delta_packets_in,tn.concealmentEvents=Tt.delta_concealment_events,tn.removedSampleForAccelaration=Tt.delta_removed_samples_for_accelaration,tn.insertedSamplesForDecelaration=Tt.delta_inserted_samples_for_decelaration;const Xt=JSON.stringify(Tt.track_id_in).replace(/[{}"]/g,"");tn.trackId=Xt}else Tt.direction==T&&(tn.codec=Tt.codec_out.mime_type,tn.jitter=Tt.delta_jitter_ms_out,tn.bitrate=Tt.delta_kbs_out,tn.packetsLost=Tt.delta_packets_lost_out,tn.rtt=ut.data.delta_rtt_connectivity_ms||0,tn.totalPackets=Tt.delta_packets_out,tn.trackId=Tt.track_id_out);Wt.audio.push(tn)}),Object.values(ut.video).forEach(Tt=>{const tn={};if(tn.network=Ie[ut.network.infrastructure],tn.timestamp=ut.timestamp,Tt.direction==b){tn.codec=Tt.codec_in.mime_type,tn.jitter=Tt.delta_jitter_ms_in,tn.bitrate=Tt.delta_kbs_in,tn.packetsLost=Tt.delta_packets_lost_in,tn.rtt=ut.data.delta_rtt_connectivity_ms||0,tn.totalPackets=Tt.delta_packets_in,tn.size=Tt.size_in,tn.pauseCount=Tt.pause_count,tn.totalPausesDuration=Tt.total_pauses_duration,tn.freezeCount=Tt.freeze_count,tn.totalFreezesDuration=Tt.total_freezes_duration;const Xt=JSON.stringify(Tt.track_id_in).replace(/[{}"]/g,"");tn.trackId=Xt}else Tt.direction==T&&(tn.codec=Tt.codec_out.mime_type,tn.jitter=Tt.delta_jitter_ms_out,tn.bitrate=Tt.delta_kbs_out,tn.packetsLost=Tt.delta_packets_lost_out,tn.rtt=ut.data.delta_rtt_connectivity_ms||0,tn.totalPackets=Tt.delta_packets_out,tn.limitation=Tt.limitation_out,tn.size=Tt.size_out,tn.trackId=Tt.track_id_out);Wt.video.push(tn)}),this._callbacks.onStatsCollected.callback(Wt)}}}class Ca{constructor(ut){this._id=ut.name&&ut.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=ut,this._collector=new Ha(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?sr("Probe already started."):(zt(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{zt(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),zt(this._moduleName,"Probe Stopped")):sr("Probe not running, Please start first.")}set onStatsCollected(ut){ut?this._collector.registerCallback("onStatsCollected",ut):this._collector.unregisterCallback("onStatsCollected")}}const Gr={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class dr{constructor(ut){var Wt;this._config={defaultConfig:Gr,...ut},this._probes=[],Wt=this._config.verbose||!1,xt.setLevel(Wt?xt.levels.TRACE:xt.levels.INFO),zt("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(ut,Wt){if(!ut)throw new Error("undefined monitoring object");const Tt={monitoringObject:ut,...Wt,...this._config},tn=new Ca(Tt);return this._probes.push(tn),tn}removeExistingProbe(ut){if(!ut)throw new Error("undefined probe");ut.stop(),this._probes=this._probes.filter(Wt=>ut.id!==Wt.id)}getProbe(ut){for(let Wt of this.probes)if(Wt.id==ut)return Wt}startAllProbes(){this._probes.forEach((ut,Wt)=>{ut.start()})}stopAllProbes(){this._probes.forEach(ut=>ut.stop())}}})(),y})()},5458:(j,R,d)=>{d.d(R,{A:()=>b});var S=d(3145),y=d(7800);function b(T){return function(f){if(Array.isArray(f))return(0,S.A)(f)}(T)||function(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}(T)||(0,y.A)(T)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},5471:function(j,R,d){var S,y,b,T,f,h,k,E;j.exports=(E=d(9021),y=(S=E).lib,b=y.WordArray,T=y.Hasher,f=S.algo,h=[],k=f.SHA1=T.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(H,m){for(var P=this._hash.words,v=P[0],U=P[1],C=P[2],_=P[3],w=P[4],p=0;p<80;p++){if(p<16)h[p]=0|H[m+p];else{var x=h[p-3]^h[p-8]^h[p-14]^h[p-16];h[p]=x<<1|x>>>31}var A=(v<<5|v>>>27)+w+h[p];A+=p<20?1518500249+(U&C|~U&_):p<40?1859775393+(U^C^_):p<60?(U&C|U&_|C&_)-1894007588:(U^C^_)-899497514,w=_,_=C,C=U<<30|U>>>2,U=v,v=A}P[0]=P[0]+v|0,P[1]=P[1]+U|0,P[2]=P[2]+C|0,P[3]=P[3]+_|0,P[4]=P[4]+w|0},_doFinalize:function(){var H=this._data,m=H.words,P=8*this._nDataBytes,v=8*H.sigBytes;return m[v>>>5]|=128<<24-v%32,m[14+(v+64>>>9<<4)]=Math.floor(P/4294967296),m[15+(v+64>>>9<<4)]=P,H.sigBytes=4*m.length,this._process(),this._hash},clone:function(){var H=T.clone.call(this);return H._hash=this._hash.clone(),H}}),S.SHA1=T._createHelper(k),S.HmacSHA1=T._createHmacHelper(k),E.SHA1)},5501:(j,R,d)=>{d.d(R,{A:()=>y});var S=d(3662);function y(b,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(T&&T.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),T&&(0,S.A)(b,T)}},5503:function(j,R,d){var S;j.exports=(S=d(9021),function(){var y=S,b=y.lib.WordArray,T=y.enc;function f(h){return h<<8&4278255360|h>>>8&16711935}T.Utf16=T.Utf16BE={stringify:function(h){for(var k=h.words,E=h.sigBytes,H=[],m=0;m<E;m+=2){var P=k[m>>>2]>>>16-m%4*8&65535;H.push(String.fromCharCode(P))}return H.join("")},parse:function(h){for(var k=h.length,E=[],H=0;H<k;H++)E[H>>>1]|=h.charCodeAt(H)<<16-H%2*16;return b.create(E,2*k)}},T.Utf16LE={stringify:function(h){for(var k=h.words,E=h.sigBytes,H=[],m=0;m<E;m+=2){var P=f(k[m>>>2]>>>16-m%4*8&65535);H.push(String.fromCharCode(P))}return H.join("")},parse:function(h){for(var k=h.length,E=[],H=0;H<k;H++)E[H>>>1]|=f(h.charCodeAt(H)<<16-H%2*16);return b.create(E,2*k)}}}(),S.enc.Utf16)},5535:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Chrome70=void 0;const S=d(7363),y=d(2994),b=d(1765),T=d(8046),f=d(5544),h=d(5938),k=d(521),E=d(1305),H=d(3303),m=new y.Logger("Chrome70"),P={OS:1024,MIS:1024};class v extends k.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new v}constructor(){super()}get name(){return"Chrome70"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{C.addTransceiver("audio"),C.addTransceiver("video");const _=await C.createOffer();try{C.close()}catch{}const w=S.parse(_.sdp);return f.extractRtpCapabilities({sdpObject:w})}catch(_){try{C.close()}catch{}throw _}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:C,iceParameters:_,iceCandidates:w,dtlsParameters:p,sctpParameters:x,iceServers:A,iceTransportPolicy:I,additionalSettings:M,proprietaryConstraints:F,extendedRtpCapabilities:z}){m.debug("run()"),this._direction=C,this._remoteSdp=new E.RemoteSdp({iceParameters:_,iceCandidates:w,dtlsParameters:p,sctpParameters:x}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",z),video:T.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",z),video:T.getSendingRemoteRtpParameters("video",z)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:A??[],iceTransportPolicy:I??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...M},F),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){m.debug("updateIceServers()");const _=this._pc.getConfiguration();_.iceServers=C,this._pc.setConfiguration(_)}async restartIce(C){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const _=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const w={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w)}else{const _={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);const w=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:_,codecOptions:w,codec:p}){this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",C.kind,C.id);const x=b.clone(this._sendingRtpParametersByKind[C.kind]);x.codecs=T.reduceCodecs(x.codecs,p);const A=b.clone(this._sendingRemoteRtpParametersByKind[C.kind]);A.codecs=T.reduceCodecs(A.codecs,p);const I=this._remoteSdp.getNextMediaSectionIdx(),M=this._pc.addTransceiver(C,{direction:"sendonly",streams:[this._sendStream]});let F,z=await this._pc.createOffer(),G=S.parse(z.sdp);G.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G}),_&&_.length>1&&(m.debug("send() | enabling legacy simulcast"),G=S.parse(z.sdp),F=G.media[I.idx],h.addLegacySimulcast({offerMediaObject:F,numStreams:_.length}),z={type:"offer",sdp:S.write(G)});let Z=!1;const ce=(0,H.parse)((_??[{}])[0].scalabilityMode);if(_&&_.length===1&&ce.spatialLayers>1&&x.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(m.debug("send() | enabling legacy simulcast for VP9 SVC"),Z=!0,G=S.parse(z.sdp),F=G.media[I.idx],h.addLegacySimulcast({offerMediaObject:F,numStreams:ce.spatialLayers}),z={type:"offer",sdp:S.write(G)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),_){m.debug("send() | applying given encodings");const Se=M.sender.getParameters();for(let xe=0;xe<(Se.encodings??[]).length;++xe){const _e=Se.encodings[xe],Pe=_[xe];if(!Pe)break;Se.encodings[xe]=Object.assign(_e,Pe)}await M.sender.setParameters(Se)}const X=M.mid;if(x.mid=X,G=S.parse(this._pc.localDescription.sdp),F=G.media[I.idx],x.rtcp.cname=f.getCname({offerMediaObject:F}),x.encodings=h.getRtpEncodings({offerMediaObject:F}),_)for(let Se=0;Se<x.encodings.length;++Se)_[Se]&&Object.assign(x.encodings[Se],_[Se]);if(Z&&(x.encodings=[x.encodings[0]]),x.encodings.length>1&&(x.codecs[0].mimeType.toLowerCase()==="video/vp8"||x.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Se of x.encodings)Se.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:F,reuseMid:I.reuseMid,offerRtpParameters:x,answerRtpParameters:A,codecOptions:w});const Ee={type:"answer",sdp:this._remoteSdp.getSdp()};return m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Ee),await this._pc.setRemoteDescription(Ee),this._mapMidTransceiver.set(X,M),{localId:X,rtpParameters:x,rtpSender:M.sender}}async stopSending(C){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",C);const _=this._mapMidTransceiver.get(C);if(!_)throw new Error("associated RTCRtpTransceiver not found");if(_.sender.replaceTrack(null),this._pc.removeTrack(_.sender),this._remoteSdp.closeMediaSection(_.mid))try{_.stop()}catch{}const w=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",w),await this._pc.setLocalDescription(w);const p={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._mapMidTransceiver.delete(C)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,_){this.assertSendDirection(),_?m.debug("replaceTrack() [localId:%s, track.id:%s]",C,_.id):m.debug("replaceTrack() [localId:%s, no track]",C);const w=this._mapMidTransceiver.get(C);if(!w)throw new Error("associated RTCRtpTransceiver not found");await w.sender.replaceTrack(_)}async setMaxSpatialLayer(C,_){this.assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",C,_);const w=this._mapMidTransceiver.get(C);if(!w)throw new Error("associated RTCRtpTransceiver not found");const p=w.sender.getParameters();p.encodings.forEach((I,M)=>{I.active=M<=_}),await w.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(C,p.encodings);const x=await this._pc.createOffer();m.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async setRtpEncodingParameters(C,_){this.assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",C,_);const w=this._mapMidTransceiver.get(C);if(!w)throw new Error("associated RTCRtpTransceiver not found");const p=w.sender.getParameters();p.encodings.forEach((I,M)=>{p.encodings[M]={...I,..._}}),await w.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(C,p.encodings);const x=await this._pc.createOffer();m.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async getSenderStats(C){this.assertSendDirection();const _=this._mapMidTransceiver.get(C);if(!_)throw new Error("associated RTCRtpTransceiver not found");return _.sender.getStats()}async sendDataChannel({ordered:C,maxPacketLifeTime:_,maxRetransmits:w,label:p,protocol:x}){this.assertSendDirection();const A={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:_,maxRetransmitTime:_,maxRetransmits:w,protocol:x};m.debug("sendDataChannel() [options:%o]",A);const I=this._pc.createDataChannel(p,A);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),F=S.parse(M.sdp),z=F.media.find(Z=>Z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:F}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const G={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:I,sctpStreamParameters:{streamId:A.id,ordered:A.ordered,maxPacketLifeTime:A.maxPacketLifeTime,maxRetransmits:A.maxRetransmits}}}async receive(C){this.assertRecvDirection();const _=[],w=new Map;for(const I of C){const{trackId:M,kind:F,rtpParameters:z,streamId:G}=I;m.debug("receive() [trackId:%s, kind:%s]",M,F);const Z=z.mid??String(this._mapMidTransceiver.size);w.set(M,Z),this._remoteSdp.receive({mid:Z,kind:F,offerRtpParameters:z,streamId:G??z.rtcp.cname,trackId:M})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let x=await this._pc.createAnswer();const A=S.parse(x.sdp);for(const I of C){const{trackId:M,rtpParameters:F}=I,z=w.get(M),G=A.media.find(Z=>String(Z.mid)===z);f.applyCodecParameters({offerRtpParameters:F,answerMediaObject:G})}x={type:"answer",sdp:S.write(A)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const I of C){const{trackId:M}=I,F=w.get(M),z=this._pc.getTransceivers().find(G=>G.mid===F);if(!z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(F,z),_.push({localId:F,track:z.receiver.track,rtpReceiver:z.receiver})}return _}async stopReceiving(C){this.assertRecvDirection();for(const p of C){m.debug("stopReceiving() [localId:%s]",p);const x=this._mapMidTransceiver.get(p);if(!x)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(x.mid)}const _={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);const w=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w);for(const p of C)this._mapMidTransceiver.delete(p)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){this.assertRecvDirection();const _=this._mapMidTransceiver.get(C);if(!_)throw new Error("associated RTCRtpTransceiver not found");return _.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:C,label:_,protocol:w}){this.assertRecvDirection();const{streamId:p,ordered:x,maxPacketLifeTime:A,maxRetransmits:I}=C,M={negotiated:!0,id:p,ordered:x,maxPacketLifeTime:A,maxRetransmitTime:A,maxRetransmits:I,protocol:w};m.debug("receiveDataChannel() [options:%o]",M);const F=this._pc.createDataChannel(_,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const z={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const G=await this._pc.createAnswer();if(!this._transportReady){const Z=S.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:F}}async setupTransport({localDtlsRole:C,localSdpObject:_}){_||(_=S.parse(this._pc.localDescription.sdp));const w=f.extractDtlsParameters({sdpObject:_});w.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((p,x)=>{this.safeEmit("@connect",{dtlsParameters:w},p,x)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.Chrome70=v},5544:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.extractRtpCapabilities=function({sdpObject:y}){const b=new Map,T=[];let f=!1,h=!1;for(const k of y.media){const E=k.type;switch(E){case"audio":if(f)continue;f=!0;break;case"video":if(h)continue;h=!0;break;default:continue}for(const H of k.rtp){const m={kind:E,mimeType:`${E}/${H.codec}`,preferredPayloadType:H.payload,clockRate:H.rate,channels:H.encoding,parameters:{},rtcpFeedback:[]};b.set(m.preferredPayloadType,m)}for(const H of k.fmtp??[]){const m=S.parseParams(H.config),P=b.get(H.payload);P&&(m?.hasOwnProperty("profile-level-id")&&(m["profile-level-id"]=String(m["profile-level-id"])),P.parameters=m)}for(const H of k.rtcpFb??[]){const m={type:H.type,parameter:H.subtype};if(m.parameter||delete m.parameter,H.payload!=="*"){const P=b.get(H.payload);if(!P)continue;P.rtcpFeedback.push(m)}else for(const P of b.values())P.kind!==E||/.+\/rtx$/i.test(P.mimeType)||P.rtcpFeedback.push(m)}for(const H of k.ext??[]){if(H["encrypt-uri"])continue;const m={kind:E,uri:H.uri,preferredId:H.value};T.push(m)}}return{codecs:Array.from(b.values()),headerExtensions:T}},R.extractDtlsParameters=function({sdpObject:y}){let b,T=y.setup,f=y.fingerprint;if(!T||!f){const h=(y.media??[]).find(k=>k.port!==0);h&&(T??=h.setup,f??=h.fingerprint)}if(!T)throw new Error("no a=setup found at SDP session or media level");if(!f)throw new Error("no a=fingerprint found at SDP session or media level");switch(T){case"active":b="client";break;case"passive":b="server";break;case"actpass":b="auto"}return{role:b,fingerprints:[{algorithm:f.type,value:f.hash}]}},R.getCname=function({offerMediaObject:y}){const b=(y.ssrcs??[]).find(T=>T.attribute==="cname");return b?b.value:""},R.applyCodecParameters=function({offerRtpParameters:y,answerMediaObject:b}){for(const T of y.codecs){const f=T.mimeType.toLowerCase();if(f!=="audio/opus"||!(b.rtp??[]).find(E=>E.payload===T.payloadType))continue;b.fmtp=b.fmtp??[];let h=b.fmtp.find(E=>E.payload===T.payloadType);h||(h={payload:T.payloadType,config:""},b.fmtp.push(h));const k=S.parseParams(h.config);switch(f){case"audio/opus":{const E=T.parameters["sprop-stereo"];E!==void 0&&(k.stereo=Number(E)?1:0);break}}h.config="";for(const E of Object.keys(k))h.config&&(h.config+=";"),h.config+=`${E}=${k[E]}`}};const S=d(7363)},5546:j=>{function R(d,S,y,b){var T=Object.defineProperty;try{T({},"",{})}catch{T=0}j.exports=R=function(f,h,k,E){if(h)T?T(f,h,{value:k,enumerable:!E,configurable:!E,writable:!E}):f[h]=k;else{var H=function(m,P){R(f,m,function(v){return this._invoke(m,P,v)})};H("next",0),H("throw",1),H("return",2)}},j.exports.__esModule=!0,j.exports.default=j.exports,R(d,S,y,b)}j.exports=R,j.exports.__esModule=!0,j.exports.default=j.exports},5601:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Transport=void 0;const S=d(8876),y=d(2994),b=d(3953),T=d(4893),f=d(1765),h=d(8046),k=d(9792),E=d(3518),H=d(7504),m=d(9166),P=new y.Logger("Transport");class v{consumerOptions;promise;resolve;reject;constructor(_){this.consumerOptions=_,this.promise=new Promise((w,p)=>{this.resolve=w,this.reject=p})}}class U extends b.EnhancedEventEmitter{_id;_closed=!1;_direction;_extendedRtpCapabilities;_canProduceByKind;_maxSctpMessageSize;_handler;_iceGatheringState="new";_connectionState="new";_appData;_producers=new Map;_consumers=new Map;_dataProducers=new Map;_dataConsumers=new Map;_probatorConsumerCreated=!1;_awaitQueue=new S.AwaitQueue;_pendingConsumerTasks=[];_consumerCreationInProgress=!1;_pendingPauseConsumers=new Map;_consumerPauseInProgress=!1;_pendingResumeConsumers=new Map;_consumerResumeInProgress=!1;_pendingCloseConsumers=new Map;_consumerCloseInProgress=!1;_observer=new b.EnhancedEventEmitter;constructor({direction:_,id:w,iceParameters:p,iceCandidates:x,dtlsParameters:A,sctpParameters:I,iceServers:M,iceTransportPolicy:F,additionalSettings:z,proprietaryConstraints:G,appData:Z,handlerFactory:ce,extendedRtpCapabilities:X,canProduceByKind:Ee}){super(),P.debug("constructor() [id:%s, direction:%s]",w,_),this._id=w,this._direction=_,this._extendedRtpCapabilities=X,this._canProduceByKind=Ee,this._maxSctpMessageSize=I?I.maxMessageSize:null;const Se=f.clone(z)??{};delete Se.iceServers,delete Se.iceTransportPolicy,delete Se.bundlePolicy,delete Se.rtcpMuxPolicy,delete Se.sdpSemantics,this._handler=ce(),this._handler.run({direction:_,iceParameters:p,iceCandidates:x,dtlsParameters:A,sctpParameters:I,iceServers:M,iceTransportPolicy:F,additionalSettings:Se,proprietaryConstraints:G,extendedRtpCapabilities:X}),this._appData=Z??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(_){this._appData=_}get observer(){return this._observer}close(){if(!this._closed){P.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const _ of this._producers.values())_.transportClosed();this._producers.clear();for(const _ of this._consumers.values())_.transportClosed();this._consumers.clear();for(const _ of this._dataProducers.values())_.transportClosed();this._dataProducers.clear();for(const _ of this._dataConsumers.values())_.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new T.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:_}){if(P.debug("restartIce()"),this._closed)throw new T.InvalidStateError("closed");if(!_)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(_),"transport.restartIce()")}async updateIceServers({iceServers:_}={}){if(P.debug("updateIceServers()"),this._closed)throw new T.InvalidStateError("closed");if(!Array.isArray(_))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(_),"transport.updateIceServers()")}async produce({track:_,encodings:w,codecOptions:p,codec:x,stopTracks:A=!0,disableTrackOnPause:I=!0,zeroRtpOnPause:M=!1,onRtpSender:F,appData:z={}}={}){if(P.debug("produce() [track:%o]",_),this._closed)throw new T.InvalidStateError("closed");if(!_)throw new TypeError("missing track");if(this._direction!=="send")throw new T.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[_.kind])throw new T.UnsupportedError(`cannot produce ${_.kind}`);if(_.readyState==="ended")throw new T.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(z&&typeof z!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let G;if(w&&!Array.isArray(w))throw TypeError("encodings must be an array");w&&w.length===0?G=void 0:w&&(G=w.map(Ee=>{const Se={active:!0};return Ee.active===!1&&(Se.active=!1),typeof Ee.dtx=="boolean"&&(Se.dtx=Ee.dtx),typeof Ee.scalabilityMode=="string"&&(Se.scalabilityMode=Ee.scalabilityMode),typeof Ee.scaleResolutionDownBy=="number"&&(Se.scaleResolutionDownBy=Ee.scaleResolutionDownBy),typeof Ee.maxBitrate=="number"&&(Se.maxBitrate=Ee.maxBitrate),typeof Ee.maxFramerate=="number"&&(Se.maxFramerate=Ee.maxFramerate),typeof Ee.adaptivePtime=="boolean"&&(Se.adaptivePtime=Ee.adaptivePtime),typeof Ee.priority=="string"&&(Se.priority=Ee.priority),typeof Ee.networkPriority=="string"&&(Se.networkPriority=Ee.networkPriority),Se}));const{localId:Z,rtpParameters:ce,rtpSender:X}=await this._handler.send({track:_,encodings:G,codecOptions:p,codec:x,onRtpSender:F});try{h.validateRtpParameters(ce);const{id:Ee}=await new Promise((xe,_e)=>{this.safeEmit("produce",{kind:_.kind,rtpParameters:ce,appData:z},xe,_e)}),Se=new k.Producer({id:Ee,localId:Z,rtpSender:X,track:_,rtpParameters:ce,stopTracks:A,disableTrackOnPause:I,zeroRtpOnPause:M,appData:z});return this._producers.set(Se.id,Se),this.handleProducer(Se),this._observer.safeEmit("newproducer",Se),Se}catch(Ee){throw this._handler.stopSending(Z).catch(()=>{}),Ee}},"transport.produce()").catch(G=>{if(A)try{_.stop()}catch{}throw G})}async consume({id:_,producerId:w,kind:p,rtpParameters:x,streamId:A,onRtpReceiver:I,appData:M={}}){if(P.debug("consume()"),this._closed)throw new T.InvalidStateError("closed");if(this._direction!=="recv")throw new T.UnsupportedError("not a receiving Transport");if(typeof _!="string")throw new TypeError("missing id");if(typeof w!="string")throw new TypeError("missing producerId");if(p!=="audio"&&p!=="video")throw new TypeError(`invalid kind '${p}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(M&&typeof M!="object")throw new TypeError("if given, appData must be an object");const F=f.clone(x);if(!h.canReceive(F,this._extendedRtpCapabilities))throw new T.UnsupportedError("cannot consume this Producer");const z=new v({id:_,producerId:w,kind:p,rtpParameters:F,streamId:A,onRtpReceiver:I,appData:M});return this._pendingConsumerTasks.push(z),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),z.promise}async produceData({ordered:_=!0,maxPacketLifeTime:w,maxRetransmits:p,label:x="",protocol:A="",appData:I={}}={}){if(P.debug("produceData()"),this._closed)throw new T.InvalidStateError("closed");if(this._direction!=="send")throw new T.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new T.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(I&&typeof I!="object")throw new TypeError("if given, appData must be an object");return(w||p)&&(_=!1),this._awaitQueue.push(async()=>{const{dataChannel:M,sctpStreamParameters:F}=await this._handler.sendDataChannel({ordered:_,maxPacketLifeTime:w,maxRetransmits:p,label:x,protocol:A});h.validateSctpStreamParameters(F);const{id:z}=await new Promise((Z,ce)=>{this.safeEmit("producedata",{sctpStreamParameters:F,label:x,protocol:A,appData:I},Z,ce)}),G=new H.DataProducer({id:z,dataChannel:M,sctpStreamParameters:F,appData:I});return this._dataProducers.set(G.id,G),this.handleDataProducer(G),this._observer.safeEmit("newdataproducer",G),G},"transport.produceData()")}async consumeData({id:_,dataProducerId:w,sctpStreamParameters:p,label:x="",protocol:A="",appData:I={}}){if(P.debug("consumeData()"),this._closed)throw new T.InvalidStateError("closed");if(this._direction!=="recv")throw new T.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new T.UnsupportedError("SCTP not enabled by remote Transport");if(typeof _!="string")throw new TypeError("missing id");if(typeof w!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(I&&typeof I!="object")throw new TypeError("if given, appData must be an object");const M=f.clone(p);return h.validateSctpStreamParameters(M),this._awaitQueue.push(async()=>{const{dataChannel:F}=await this._handler.receiveDataChannel({sctpStreamParameters:M,label:x,protocol:A}),z=new m.DataConsumer({id:_,dataProducerId:w,dataChannel:F,sctpStreamParameters:M,appData:I});return this._dataConsumers.set(z.id,z),this.handleDataConsumer(z),this._observer.safeEmit("newdataconsumer",z),z},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void P.debug("createPendingConsumers() | there is no Consumer to be created");const _=[...this._pendingConsumerTasks];let w;this._pendingConsumerTasks=[];const p=[];for(const x of _){const{id:A,kind:I,rtpParameters:M,streamId:F,onRtpReceiver:z}=x.consumerOptions;p.push({trackId:A,kind:I,rtpParameters:M,streamId:F,onRtpReceiver:z})}try{const x=await this._handler.receive(p);for(let A=0;A<x.length;++A){const I=_[A],M=x[A],{id:F,producerId:z,kind:G,rtpParameters:Z,appData:ce}=I.consumerOptions,{localId:X,rtpReceiver:Ee,track:Se}=M,xe=new E.Consumer({id:F,localId:X,producerId:z,rtpReceiver:Ee,track:Se,rtpParameters:Z,appData:ce});this._consumers.set(xe.id,xe),this.handleConsumer(xe),this._probatorConsumerCreated||w||G!=="video"||(w=xe),this._observer.safeEmit("newconsumer",xe),I.resolve(xe)}}catch(x){for(const A of _)A.reject(x)}if(w)try{const x=h.generateProbatorRtpParameters(w.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:x}]),P.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(x){P.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",x)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void P.debug("pausePendingConsumers() | there is no Consumer to be paused");const _=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const w=_.map(p=>p.localId);await this._handler.pauseReceiving(w)}catch(w){P.error("pausePendingConsumers() | failed to pause Consumers:",w)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void P.debug("resumePendingConsumers() | there is no Consumer to be resumed");const _=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const w=_.map(p=>p.localId);await this._handler.resumeReceiving(w)}catch(w){P.error("resumePendingConsumers() | failed to resume Consumers:",w)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void P.debug("closePendingConsumers() | there is no Consumer to be closed");const _=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(_.map(w=>w.localId))}catch(w){P.error("closePendingConsumers() | failed to close Consumers:",w)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const _=this._handler;_.on("@connect",({dtlsParameters:w},p,x)=>{this._closed?x(new T.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:w},p,x)}),_.on("@icegatheringstatechange",w=>{w!==this._iceGatheringState&&(P.debug("ICE gathering state changed to %s",w),this._iceGatheringState=w,this._closed||this.safeEmit("icegatheringstatechange",w))}),_.on("@icecandidateerror",w=>{P.warn(`ICE candidate error [url:${w.url}, localAddress:${w.address}, localPort:${w.port}]: ${w.errorCode} "${w.errorText}"`),this.safeEmit("icecandidateerror",w)}),_.on("@connectionstatechange",w=>{w!==this._connectionState&&(P.debug("connection state changed to %s",w),this._connectionState=w,this._closed||this.safeEmit("connectionstatechange",w))})}handleProducer(_){_.on("@close",()=>{this._producers.delete(_.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(_.localId),"producer @close event").catch(w=>P.warn("producer.close() failed:%o",w))}),_.on("@pause",(w,p)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(_.localId),"producer @pause event").then(w).catch(p)}),_.on("@resume",(w,p)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(_.localId),"producer @resume event").then(w).catch(p)}),_.on("@replacetrack",(w,p,x)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(_.localId,w),"producer @replacetrack event").then(p).catch(x)}),_.on("@setmaxspatiallayer",(w,p,x)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(_.localId,w),"producer @setmaxspatiallayer event").then(p).catch(x)}),_.on("@setrtpencodingparameters",(w,p,x)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(_.localId,w),"producer @setrtpencodingparameters event").then(p).catch(x)}),_.on("@getstats",(w,p)=>{if(this._closed)return p(new T.InvalidStateError("closed"));this._handler.getSenderStats(_.localId).then(w).catch(p)})}handleConsumer(_){_.on("@close",()=>{this._consumers.delete(_.id),this._pendingPauseConsumers.delete(_.id),this._pendingResumeConsumers.delete(_.id),this._closed||(this._pendingCloseConsumers.set(_.id,_),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),_.on("@pause",()=>{this._pendingResumeConsumers.has(_.id)&&this._pendingResumeConsumers.delete(_.id),this._pendingPauseConsumers.set(_.id,_),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),_.on("@resume",()=>{this._pendingPauseConsumers.has(_.id)&&this._pendingPauseConsumers.delete(_.id),this._pendingResumeConsumers.set(_.id,_),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),_.on("@getstats",(w,p)=>{if(this._closed)return p(new T.InvalidStateError("closed"));this._handler.getReceiverStats(_.localId).then(w).catch(p)})}handleDataProducer(_){_.on("@close",()=>{this._dataProducers.delete(_.id)})}handleDataConsumer(_){_.on("@close",()=>{this._dataConsumers.delete(_.id)})}}R.Transport=U},5602:j=>{var R=j.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(d){return d.encoding?"rtpmap:%d %s/%s/%s":d.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(d){return d.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(d){return d.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(d){return"extmap:%d"+(d.direction?"/%s":"%v")+(d["encrypt-uri"]?" %s":"%v")+" %s"+(d.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(d){return d.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(d){var S="candidate:%s %d %s %d %s %d typ %s";return S+=d.raddr!=null?" raddr %s rport %d":"%v%v",S+=d.tcptype!=null?" tcptype %s":"%v",d.generation!=null&&(S+=" generation %d"),S+=d["network-id"]!=null?" network-id %d":"%v",S+=d["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(d){var S="ssrc:%d";return d.attribute!=null&&(S+=" %s",d.value!=null&&(S+=":%s")),S}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(d){return d.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(d){return d.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(d){return"imageattr:%s %s %s"+(d.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(d){return"simulcast:%s %s"+(d.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(d){return"ts-refclk:%s"+(d.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(d){var S="mediaclk:";return S+=d.id!=null?"id=%s %s":"%v%s",S+=d.mediaClockValue!=null?"=%s":"",S+=d.rateNumerator!=null?" rate=%s":"",S+=d.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(R).forEach(function(d){R[d].forEach(function(S){S.reg||(S.reg=/(.*)/),S.format||(S.format="%s")})})},5765:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Safari12=void 0;const S=d(7363),y=d(2994),b=d(1765),T=d(8046),f=d(5544),h=d(5938),k=d(4256),E=d(4893),H=d(521),m=d(1305),P=d(3303),v=new y.Logger("Safari12"),U={OS:1024,MIS:1024};class C extends H.HandlerInterface{_closed=!1;_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new C}constructor(){super()}get name(){return"Safari12"}close(){if(v.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){v.debug("getNativeRtpCapabilities()");const w=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{w.addTransceiver("audio"),w.addTransceiver("video");const p=await w.createOffer();try{w.close()}catch{}const x=S.parse(p.sdp),A=f.extractRtpCapabilities({sdpObject:x});return k.addNackSupportForOpus(A),A}catch(p){try{w.close()}catch{}throw p}}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:U}}run({direction:w,iceParameters:p,iceCandidates:x,dtlsParameters:A,sctpParameters:I,iceServers:M,iceTransportPolicy:F,additionalSettings:z,proprietaryConstraints:G,extendedRtpCapabilities:Z}){this.assertNotClosed(),v.debug("run()"),this._direction=w,this._remoteSdp=new m.RemoteSdp({iceParameters:p,iceCandidates:x,dtlsParameters:A,sctpParameters:I}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",Z),video:T.getSendingRtpParameters("video",Z)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",Z),video:T.getSendingRemoteRtpParameters("video",Z)},A.role&&A.role!=="auto"&&(this._forcedLocalDtlsRole=A.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:M??[],iceTransportPolicy:F??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...z},G),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",ce=>{this.emit("@icecandidateerror",ce)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(v.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(w){this.assertNotClosed(),v.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=w,this._pc.setConfiguration(p)}async restartIce(w){if(this.assertNotClosed(),v.debug("restartIce()"),this._remoteSdp.updateIceParameters(w),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});v.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const x={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:w,encodings:p,codecOptions:x,codec:A,onRtpSender:I}){this.assertNotClosed(),this.assertSendDirection(),v.debug("send() [kind:%s, track.id:%s]",w.kind,w.id);const M=b.clone(this._sendingRtpParametersByKind[w.kind]);M.codecs=T.reduceCodecs(M.codecs,A);const F=b.clone(this._sendingRemoteRtpParametersByKind[w.kind]);F.codecs=T.reduceCodecs(F.codecs,A);const z=this._remoteSdp.getNextMediaSectionIdx(),G=this._pc.addTransceiver(w,{direction:"sendonly",streams:[this._sendStream]});I&&I(G.sender);let Z,ce=await this._pc.createOffer(),X=S.parse(ce.sdp);X.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:X});const Ee=(0,P.parse)((p??[{}])[0].scalabilityMode);p&&p.length>1&&(v.debug("send() | enabling legacy simulcast"),X=S.parse(ce.sdp),Z=X.media[z.idx],h.addLegacySimulcast({offerMediaObject:Z,numStreams:p.length}),ce={type:"offer",sdp:S.write(X)}),v.debug("send() | calling pc.setLocalDescription() [offer:%o]",ce),await this._pc.setLocalDescription(ce);const Se=G.mid;if(M.mid=Se,X=S.parse(this._pc.localDescription.sdp),Z=X.media[z.idx],M.rtcp.cname=f.getCname({offerMediaObject:Z}),M.encodings=h.getRtpEncodings({offerMediaObject:Z}),p)for(let _e=0;_e<M.encodings.length;++_e)p[_e]&&Object.assign(M.encodings[_e],p[_e]);if(M.encodings.length>1&&(M.codecs[0].mimeType.toLowerCase()==="video/vp8"||M.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const _e of M.encodings)_e.scalabilityMode?_e.scalabilityMode=`L1T${Ee.temporalLayers}`:_e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Z,reuseMid:z.reuseMid,offerRtpParameters:M,answerRtpParameters:F,codecOptions:x});const xe={type:"answer",sdp:this._remoteSdp.getSdp()};return v.debug("send() | calling pc.setRemoteDescription() [answer:%o]",xe),await this._pc.setRemoteDescription(xe),this._mapMidTransceiver.set(Se,G),{localId:Se,rtpParameters:M,rtpSender:G.sender}}async stopSending(w){if(this.assertSendDirection(),this._closed)return;v.debug("stopSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const x=await this._pc.createOffer();v.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._mapMidTransceiver.delete(w)}async pauseSending(w){this.assertNotClosed(),this.assertSendDirection(),v.debug("pauseSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(w);const x=await this._pc.createOffer();v.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async resumeSending(w){this.assertNotClosed(),this.assertSendDirection(),v.debug("resumeSending() [localId:%s]",w);const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(w);const x=await this._pc.createOffer();v.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const A={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A)}async replaceTrack(w,p){this.assertNotClosed(),this.assertSendDirection(),p?v.debug("replaceTrack() [localId:%s, track.id:%s]",w,p.id):v.debug("replaceTrack() [localId:%s, no track]",w);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(p)}async setMaxSpatialLayer(w,p){this.assertNotClosed(),this.assertSendDirection(),v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",w,p);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");const A=x.sender.getParameters();A.encodings.forEach((F,z)=>{F.active=z<=p}),await x.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const I=await this._pc.createOffer();v.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const M={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async setRtpEncodingParameters(w,p){this.assertNotClosed(),this.assertSendDirection(),v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",w,p);const x=this._mapMidTransceiver.get(w);if(!x)throw new Error("associated RTCRtpTransceiver not found");const A=x.sender.getParameters();A.encodings.forEach((F,z)=>{A.encodings[z]={...F,...p}}),await x.sender.setParameters(A),this._remoteSdp.muxMediaSectionSimulcast(w,A.encodings);const I=await this._pc.createOffer();v.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const M={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M)}async getSenderStats(w){this.assertNotClosed(),this.assertSendDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:w,maxPacketLifeTime:p,maxRetransmits:x,label:A,protocol:I}){this.assertNotClosed(),this.assertSendDirection();const M={negotiated:!0,id:this._nextSendSctpStreamId,ordered:w,maxPacketLifeTime:p,maxRetransmits:x,protocol:I};v.debug("sendDataChannel() [options:%o]",M);const F=this._pc.createDataChannel(A,M);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%U.MIS,!this._hasDataChannelMediaSection){const z=await this._pc.createOffer(),G=S.parse(z.sdp),Z=G.media.find(X=>X.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G}),v.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z),this._remoteSdp.sendSctpAssociation({offerMediaObject:Z});const ce={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setRemoteDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:F,sctpStreamParameters:{streamId:M.id,ordered:M.ordered,maxPacketLifeTime:M.maxPacketLifeTime,maxRetransmits:M.maxRetransmits}}}async receive(w){this.assertNotClosed(),this.assertRecvDirection();const p=[],x=new Map;for(const F of w){const{trackId:z,kind:G,rtpParameters:Z,streamId:ce}=F;v.debug("receive() [trackId:%s, kind:%s]",z,G);const X=Z.mid??String(this._mapMidTransceiver.size);x.set(z,X),this._remoteSdp.receive({mid:X,kind:G,offerRtpParameters:Z,streamId:ce??Z.rtcp.cname,trackId:z})}const A={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",A),await this._pc.setRemoteDescription(A);for(const F of w){const{trackId:z,onRtpReceiver:G}=F;if(G){const Z=x.get(z),ce=this._pc.getTransceivers().find(X=>X.mid===Z);if(!ce)throw new Error("transceiver not found");G(ce.receiver)}}let I=await this._pc.createAnswer();const M=S.parse(I.sdp);for(const F of w){const{trackId:z,rtpParameters:G}=F,Z=x.get(z),ce=M.media.find(X=>String(X.mid)===Z);f.applyCodecParameters({offerRtpParameters:G,answerMediaObject:ce})}I={type:"answer",sdp:S.write(M)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),v.debug("receive() | calling pc.setLocalDescription() [answer:%o]",I),await this._pc.setLocalDescription(I);for(const F of w){const{trackId:z}=F,G=x.get(z),Z=this._pc.getTransceivers().find(ce=>ce.mid===G);if(!Z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(G,Z),p.push({localId:G,track:Z.receiver.track,rtpReceiver:Z.receiver})}return p}async stopReceiving(w){if(this.assertRecvDirection(),this._closed)return;for(const A of w){v.debug("stopReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(I.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const A of w)this._mapMidTransceiver.delete(A)}async pauseReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){v.debug("pauseReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");I.direction="inactive",this._remoteSdp.pauseMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async resumeReceiving(w){this.assertNotClosed(),this.assertRecvDirection();for(const A of w){v.debug("resumeReceiving() [localId:%s]",A);const I=this._mapMidTransceiver.get(A);if(!I)throw new Error("associated RTCRtpTransceiver not found");I.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(A)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const x=await this._pc.createAnswer();v.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async getReceiverStats(w){this.assertNotClosed(),this.assertRecvDirection();const p=this._mapMidTransceiver.get(w);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:w,label:p,protocol:x}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:A,ordered:I,maxPacketLifeTime:M,maxRetransmits:F}=w,z={negotiated:!0,id:A,ordered:I,maxPacketLifeTime:M,maxRetransmits:F,protocol:x};v.debug("receiveDataChannel() [options:%o]",z);const G=this._pc.createDataChannel(p,z);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Z={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Z),await this._pc.setRemoteDescription(Z);const ce=await this._pc.createAnswer();if(!this._transportReady){const X=S.parse(ce.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:X})}v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",ce),await this._pc.setLocalDescription(ce),this._hasDataChannelMediaSection=!0}return{dataChannel:G}}async setupTransport({localDtlsRole:w,localSdpObject:p}){p||(p=S.parse(this._pc.localDescription.sdp));const x=f.extractDtlsParameters({sdpObject:p});x.role=w,this._remoteSdp.updateDtlsRole(w==="client"?"server":"client"),await new Promise((A,I)=>{this.safeEmit("@connect",{dtlsParameters:x},A,I)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new E.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.Safari12=C},5862:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.FakeEventTarget=void 0,R.FakeEventTarget=class{listeners={};addEventListener(d,S,y={}){S&&(this.listeners[d]??=[],this.listeners[d].push({callback:S,once:y.once===!0}))}removeEventListener(d,S){this.listeners[d]&&(this.listeners[d]=this.listeners[d].filter(y=>y.callback!==S))}dispatchEvent(d){if(!d||typeof d.type!="string")throw new Error("invalid event object");const S=this.listeners[d.type];if(!S)return!0;for(const y of[...S]){try{y.callback.call(this,d)}catch(b){setTimeout(()=>{throw b},0)}y.once&&this.removeEventListener(d.type,y.callback)}return!d.defaultPrevented}}},5869:(j,R,d)=>{var S=d(887);j.exports=function(y,b,T,f,h){var k=S(y,b,T,f,h);return k.next().then(function(E){return E.done?E.value:k.next()})},j.exports.__esModule=!0,j.exports.default=j.exports},5938:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.getRtpEncodings=function({offerMediaObject:d}){const S=new Set;for(const T of d.ssrcs??[]){const f=T.id;S.add(f)}if(S.size===0)throw new Error("no a=ssrc lines found");const y=new Map;for(const T of d.ssrcGroups??[]){if(T.semantics!=="FID")continue;let[f,h]=T.ssrcs.split(/\s+/);f=Number(f),h=Number(h),S.has(f)&&(S.delete(f),S.delete(h),y.set(f,h))}for(const T of S)y.set(T,null);const b=[];for(const[T,f]of y){const h={ssrc:T};f&&(h.rtx={ssrc:f}),b.push(h)}return b},R.addLegacySimulcast=function({offerMediaObject:d,numStreams:S}){if(S<=1)throw new TypeError("numStreams must be greater than 1");const y=(d.ssrcs??[]).find(P=>P.attribute==="msid");if(!y)throw new Error("a=ssrc line with msid information not found");const[b,T]=y.value.split(" "),f=Number(y.id);let h;(d.ssrcGroups??[]).some(P=>{if(P.semantics!=="FID")return!1;const v=P.ssrcs.split(/\s+/);return Number(v[0])===f&&(h=Number(v[1]),!0)});const k=d.ssrcs.find(P=>P.attribute==="cname");if(!k)throw new Error("a=ssrc line with cname information not found");const E=k.value,H=[],m=[];for(let P=0;P<S;++P)H.push(f+P),h&&m.push(h+P);d.ssrcGroups=[],d.ssrcs=[],d.ssrcGroups.push({semantics:"SIM",ssrcs:H.join(" ")});for(const P of H)d.ssrcs.push({id:P,attribute:"cname",value:E}),d.ssrcs.push({id:P,attribute:"msid",value:`${b} ${T}`});for(let P=0;P<m.length;++P){const v=H[P],U=m[P];d.ssrcs.push({id:U,attribute:"cname",value:E}),d.ssrcs.push({id:U,attribute:"msid",value:`${b} ${T}`}),d.ssrcGroups.push({semantics:"FID",ssrcs:`${v} ${U}`})}}},5953:function(j,R,d){var S;j.exports=(S=d(9021),d(3240),function(y){var b=S,T=b.lib,f=T.WordArray,h=T.Hasher,k=b.x64.Word,E=b.algo,H=[],m=[],P=[];(function(){for(var C=1,_=0,w=0;w<24;w++){H[C+5*_]=(w+1)*(w+2)/2%64;var p=(2*C+3*_)%5;C=_%5,_=p}for(C=0;C<5;C++)for(_=0;_<5;_++)m[C+5*_]=_+(2*C+3*_)%5*5;for(var x=1,A=0;A<24;A++){for(var I=0,M=0,F=0;F<7;F++){if(1&x){var z=(1<<F)-1;z<32?M^=1<<z:I^=1<<z-32}128&x?x=x<<1^113:x<<=1}P[A]=k.create(I,M)}})();var v=[];(function(){for(var C=0;C<25;C++)v[C]=k.create()})();var U=E.SHA3=h.extend({cfg:h.cfg.extend({outputLength:512}),_doReset:function(){for(var C=this._state=[],_=0;_<25;_++)C[_]=new k.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(C,_){for(var w=this._state,p=this.blockSize/2,x=0;x<p;x++){var A=C[_+2*x],I=C[_+2*x+1];A=16711935&(A<<8|A>>>24)|4278255360&(A<<24|A>>>8),I=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),(qe=w[x]).high^=I,qe.low^=A}for(var M=0;M<24;M++){for(var F=0;F<5;F++){for(var z=0,G=0,Z=0;Z<5;Z++)z^=(qe=w[F+5*Z]).high,G^=qe.low;var ce=v[F];ce.high=z,ce.low=G}for(F=0;F<5;F++){var X=v[(F+4)%5],Ee=v[(F+1)%5],Se=Ee.high,xe=Ee.low;for(z=X.high^(Se<<1|xe>>>31),G=X.low^(xe<<1|Se>>>31),Z=0;Z<5;Z++)(qe=w[F+5*Z]).high^=z,qe.low^=G}for(var _e=1;_e<25;_e++){var Pe=(qe=w[_e]).high,He=qe.low,pe=H[_e];pe<32?(z=Pe<<pe|He>>>32-pe,G=He<<pe|Pe>>>32-pe):(z=He<<pe-32|Pe>>>64-pe,G=Pe<<pe-32|He>>>64-pe);var Ge=v[m[_e]];Ge.high=z,Ge.low=G}var Te=v[0],Ve=w[0];for(Te.high=Ve.high,Te.low=Ve.low,F=0;F<5;F++)for(Z=0;Z<5;Z++){var qe=w[_e=F+5*Z],nt=v[_e],Bt=v[(F+1)%5+5*Z],Pr=v[(F+2)%5+5*Z];qe.high=nt.high^~Bt.high&Pr.high,qe.low=nt.low^~Bt.low&Pr.low}qe=w[0];var Ur=P[M];qe.high^=Ur.high,qe.low^=Ur.low}},_doFinalize:function(){var C=this._data,_=C.words,w=(this._nDataBytes,8*C.sigBytes),p=32*this.blockSize;_[w>>>5]|=1<<24-w%32,_[(y.ceil((w+1)/p)*p>>>5)-1]|=128,C.sigBytes=4*_.length,this._process();for(var x=this._state,A=this.cfg.outputLength/8,I=A/8,M=[],F=0;F<I;F++){var z=x[F],G=z.high,Z=z.low;G=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8),Z=16711935&(Z<<8|Z>>>24)|4278255360&(Z<<24|Z>>>8),M.push(Z),M.push(G)}return new f.init(M,A)},clone:function(){for(var C=h.clone.call(this),_=C._state=this._state.slice(0),w=0;w<25;w++)_[w]=_[w].clone();return C}});b.SHA3=h._createHelper(U),b.HmacSHA3=h._createHmacHelper(U)}(Math),S.SHA3)},6004:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Device=void 0,R.detectDevice=M;const S=d(2109),y=d(2994),b=d(3953),T=d(4893),f=d(1765),h=d(8046),k=d(5601),E=d(2183),H=d(11),m=d(5535),P=d(8155),v=d(7402),U=d(2292),C=d(1767),_=d(5765),w=d(9676),p=d(8633),x=d(4039),A=d(9352),I=new y.Logger("Device");function M(F){if(!F&&typeof navigator=="object"&&navigator.product==="ReactNative")return I.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void I.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?(I.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(I.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(F||typeof navigator=="object"&&typeof navigator.userAgent=="string"){F??=navigator.userAgent;const z=new S.UAParser(F);I.debug("detectDevice() | browser detected [userAgent:%s, parsed:%o]",F,z.getResult());const G=z.getBrowser(),Z=G.name?.toLowerCase(),ce=parseInt(G.major??"0"),X=z.getEngine(),Ee=X.name?.toLowerCase(),Se=z.getOS(),xe=Se.name?.toLowerCase(),_e=parseFloat(Se.version??"0"),Pe=z.getDevice(),He=Pe.model?.toLowerCase(),pe=xe==="ios"||He==="ipad",Ge=Z&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(Z),Te=Z&&["firefox","mobile firefox","mobile focus"].includes(Z),Ve=Z&&["safari","mobile safari"].includes(Z),qe=Z&&["edge"].includes(Z);if((Ge||qe)&&!pe&&ce>=111)return"Chrome111";if(Ge&&!pe&&ce>=74||qe&&!pe&&ce>=88)return"Chrome74";if(Ge&&!pe&&ce>=70)return"Chrome70";if(Ge&&!pe&&ce>=67)return"Chrome67";if(Ge&&!pe&&ce>=55)return"Chrome55";if(Te&&!pe&&ce>=120)return"Firefox120";if(Te&&!pe&&ce>=60)return"Firefox60";if(Te&&pe&&_e>=14.3||Ve&&ce>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Ve&&ce>=11)return"Safari11";if(qe&&!pe&&ce>=11&&ce<=18)return"Edge11";if(Ee==="webkit"&&pe&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Ee==="blink"){const nt=F.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(nt){const Bt=Number(nt[1]);return Bt>=111?"Chrome111":Bt>=74?"Chrome74":Bt>=70?"Chrome70":Bt>=67?"Chrome67":"Chrome55"}return"Chrome111"}return void I.warn("detectDevice() | browser not supported [name:%s, version:%s]",Z,ce)}I.warn("detectDevice() | unknown device")}R.Device=class{_handlerFactory;_handlerName;_loaded=!1;_extendedRtpCapabilities;_recvRtpCapabilities;_canProduceByKind;_sctpCapabilities;_observer=new b.EnhancedEventEmitter;constructor({handlerName:F,handlerFactory:z}={}){if(I.debug("constructor()"),F&&z)throw new TypeError("just one of handlerName or handlerInterface can be given");if(z)this._handlerFactory=z;else{if(F)I.debug("constructor() | handler given: %s",F);else{if(!(F=M()))throw new T.UnsupportedError("device not supported");I.debug("constructor() | detected handler: %s",F)}switch(F){case"Chrome111":this._handlerFactory=E.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=H.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=m.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=P.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=v.Chrome55.createFactory();break;case"Firefox120":this._handlerFactory=U.Firefox120.createFactory();break;case"Firefox60":this._handlerFactory=C.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=_.Safari12.createFactory();break;case"Safari11":this._handlerFactory=w.Safari11.createFactory();break;case"Edge11":this._handlerFactory=p.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=x.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=A.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${F}"`)}}const G=this._handlerFactory();this._handlerName=G.name,G.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new T.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new T.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:F}){let z;I.debug("load() [routerRtpCapabilities:%o]",F);try{if(this._loaded)throw new T.InvalidStateError("already loaded");const G=f.clone(F);h.validateRtpCapabilities(G),z=this._handlerFactory();const Z=await z.getNativeRtpCapabilities();I.debug("load() | got native RTP capabilities:%o",Z);const ce=f.clone(Z);h.validateRtpCapabilities(ce),this._extendedRtpCapabilities=h.getExtendedRtpCapabilities(ce,G),I.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=h.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=h.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=h.getRecvRtpCapabilities(this._extendedRtpCapabilities),h.validateRtpCapabilities(this._recvRtpCapabilities),I.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await z.getNativeSctpCapabilities(),I.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),h.validateSctpCapabilities(this._sctpCapabilities),I.debug("load() succeeded"),this._loaded=!0,z.close()}catch(G){throw z&&z.close(),G}}canProduce(F){if(!this._loaded)throw new T.InvalidStateError("not loaded");if(F!=="audio"&&F!=="video")throw new TypeError(`invalid kind "${F}"`);return this._canProduceByKind[F]}createSendTransport({id:F,iceParameters:z,iceCandidates:G,dtlsParameters:Z,sctpParameters:ce,iceServers:X,iceTransportPolicy:Ee,additionalSettings:Se,proprietaryConstraints:xe,appData:_e}){return I.debug("createSendTransport()"),this.createTransport({direction:"send",id:F,iceParameters:z,iceCandidates:G,dtlsParameters:Z,sctpParameters:ce,iceServers:X,iceTransportPolicy:Ee,additionalSettings:Se,proprietaryConstraints:xe,appData:_e})}createRecvTransport({id:F,iceParameters:z,iceCandidates:G,dtlsParameters:Z,sctpParameters:ce,iceServers:X,iceTransportPolicy:Ee,additionalSettings:Se,proprietaryConstraints:xe,appData:_e}){return I.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:F,iceParameters:z,iceCandidates:G,dtlsParameters:Z,sctpParameters:ce,iceServers:X,iceTransportPolicy:Ee,additionalSettings:Se,proprietaryConstraints:xe,appData:_e})}createTransport({direction:F,id:z,iceParameters:G,iceCandidates:Z,dtlsParameters:ce,sctpParameters:X,iceServers:Ee,iceTransportPolicy:Se,additionalSettings:xe,proprietaryConstraints:_e,appData:Pe}){if(!this._loaded)throw new T.InvalidStateError("not loaded");if(typeof z!="string")throw new TypeError("missing id");if(typeof G!="object")throw new TypeError("missing iceParameters");if(!Array.isArray(Z))throw new TypeError("missing iceCandidates");if(typeof ce!="object")throw new TypeError("missing dtlsParameters");if(X&&typeof X!="object")throw new TypeError("wrong sctpParameters");if(Pe&&typeof Pe!="object")throw new TypeError("if given, appData must be an object");const He=new k.Transport({direction:F,id:z,iceParameters:G,iceCandidates:Z,dtlsParameters:ce,sctpParameters:X,iceServers:Ee,iceTransportPolicy:Se,additionalSettings:xe,proprietaryConstraints:_e,appData:Pe,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",He),He}}},6011:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.unsafeStringify=void 0;const S=d(9746),y=[];for(let T=0;T<256;++T)y.push((T+256).toString(16).slice(1));function b(T,f=0){return(y[T[f+0]]+y[T[f+1]]+y[T[f+2]]+y[T[f+3]]+"-"+y[T[f+4]]+y[T[f+5]]+"-"+y[T[f+6]]+y[T[f+7]]+"-"+y[T[f+8]]+y[T[f+9]]+"-"+y[T[f+10]]+y[T[f+11]]+y[T[f+12]]+y[T[f+13]]+y[T[f+14]]+y[T[f+15]]).toLowerCase()}R.unsafeStringify=b,R.default=function(T,f=0){const h=b(T,f);if(!(0,S.default)(h))throw TypeError("Stringified UUID is invalid");return h}},6298:function(j,R,d){var S;j.exports=(S=d(9021),d(754),d(4636),d(9506),d(7165),function(){var y=S,b=y.lib.StreamCipher,T=y.algo,f=[],h=[],k=[],E=T.Rabbit=b.extend({_doReset:function(){for(var m=this._key.words,P=this.cfg.iv,v=0;v<4;v++)m[v]=16711935&(m[v]<<8|m[v]>>>24)|4278255360&(m[v]<<24|m[v]>>>8);var U=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],C=this._C=[m[2]<<16|m[2]>>>16,4294901760&m[0]|65535&m[1],m[3]<<16|m[3]>>>16,4294901760&m[1]|65535&m[2],m[0]<<16|m[0]>>>16,4294901760&m[2]|65535&m[3],m[1]<<16|m[1]>>>16,4294901760&m[3]|65535&m[0]];for(this._b=0,v=0;v<4;v++)H.call(this);for(v=0;v<8;v++)C[v]^=U[v+4&7];if(P){var _=P.words,w=_[0],p=_[1],x=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8),A=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),I=x>>>16|4294901760&A,M=A<<16|65535&x;for(C[0]^=x,C[1]^=I,C[2]^=A,C[3]^=M,C[4]^=x,C[5]^=I,C[6]^=A,C[7]^=M,v=0;v<4;v++)H.call(this)}},_doProcessBlock:function(m,P){var v=this._X;H.call(this),f[0]=v[0]^v[5]>>>16^v[3]<<16,f[1]=v[2]^v[7]>>>16^v[5]<<16,f[2]=v[4]^v[1]>>>16^v[7]<<16,f[3]=v[6]^v[3]>>>16^v[1]<<16;for(var U=0;U<4;U++)f[U]=16711935&(f[U]<<8|f[U]>>>24)|4278255360&(f[U]<<24|f[U]>>>8),m[P+U]^=f[U]},blockSize:4,ivSize:2});function H(){for(var m=this._X,P=this._C,v=0;v<8;v++)h[v]=P[v];for(P[0]=P[0]+1295307597+this._b|0,P[1]=P[1]+3545052371+(P[0]>>>0<h[0]>>>0?1:0)|0,P[2]=P[2]+886263092+(P[1]>>>0<h[1]>>>0?1:0)|0,P[3]=P[3]+1295307597+(P[2]>>>0<h[2]>>>0?1:0)|0,P[4]=P[4]+3545052371+(P[3]>>>0<h[3]>>>0?1:0)|0,P[5]=P[5]+886263092+(P[4]>>>0<h[4]>>>0?1:0)|0,P[6]=P[6]+1295307597+(P[5]>>>0<h[5]>>>0?1:0)|0,P[7]=P[7]+3545052371+(P[6]>>>0<h[6]>>>0?1:0)|0,this._b=P[7]>>>0<h[7]>>>0?1:0,v=0;v<8;v++){var U=m[v]+P[v],C=65535&U,_=U>>>16,w=((C*C>>>17)+C*_>>>15)+_*_,p=((4294901760&U)*U|0)+((65535&U)*U|0);k[v]=w^p}m[0]=k[0]+(k[7]<<16|k[7]>>>16)+(k[6]<<16|k[6]>>>16)|0,m[1]=k[1]+(k[0]<<8|k[0]>>>24)+k[7]|0,m[2]=k[2]+(k[1]<<16|k[1]>>>16)+(k[0]<<16|k[0]>>>16)|0,m[3]=k[3]+(k[2]<<8|k[2]>>>24)+k[1]|0,m[4]=k[4]+(k[3]<<16|k[3]>>>16)+(k[2]<<16|k[2]>>>16)|0,m[5]=k[5]+(k[4]<<8|k[4]>>>24)+k[3]|0,m[6]=k[6]+(k[5]<<16|k[5]>>>16)+(k[4]<<16|k[4]>>>16)|0,m[7]=k[7]+(k[6]<<8|k[6]>>>24)+k[5]|0}y.Rabbit=b._createHelper(E)}(),S.Rabbit)},6308:function(j,R,d){var S,y,b,T,f,h;j.exports=(h=d(9021),d(3009),y=(S=h).lib.WordArray,b=S.algo,T=b.SHA256,f=b.SHA224=T.extend({_doReset:function(){this._hash=new y.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var k=T._doFinalize.call(this);return k.sigBytes-=4,k}}),S.SHA224=T._createHelper(f),S.HmacSHA224=T._createHmacHelper(f),h.SHA224)},6356:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0});const S=d(6011),y=d(1425),b=d(6568);R.default=function(T,f,h){T??={},h??=0;let k=(0,y.default)({...T,_v6:!0},new Uint8Array(16));if(k=(0,b.default)(k),f){for(let E=0;E<16;E++)f[h+E]=k[E];return f}return(0,S.unsafeStringify)(k)}},6372:function(j,R,d){var S;j.exports=(S=d(9021),d(7165),S.mode.CTRGladman=function(){var y=S.lib.BlockCipherMode.extend();function b(h){if(255&~(h>>24))h+=16777216;else{var k=h>>16&255,E=h>>8&255,H=255&h;k===255?(k=0,E===255?(E=0,H===255?H=0:++H):++E):++k,h=0,h+=k<<16,h+=E<<8,h+=H}return h}function T(h){return(h[0]=b(h[0]))===0&&(h[1]=b(h[1])),h}var f=y.Encryptor=y.extend({processBlock:function(h,k){var E=this._cipher,H=E.blockSize,m=this._iv,P=this._counter;m&&(P=this._counter=m.slice(0),this._iv=void 0),T(P);var v=P.slice(0);E.encryptBlock(v,0);for(var U=0;U<H;U++)h[k+U]^=v[U]}});return y.Decryptor=f,y}(),S.mode.CTRGladman)},6440:function(j,R,d){var S;j.exports=(S=d(9021),function(){if(typeof ArrayBuffer=="function"){var y=S.lib.WordArray,b=y.init,T=y.init=function(f){if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),(f instanceof Int8Array||typeof Uint8ClampedArray<"u"&&f instanceof Uint8ClampedArray||f instanceof Int16Array||f instanceof Uint16Array||f instanceof Int32Array||f instanceof Uint32Array||f instanceof Float32Array||f instanceof Float64Array)&&(f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength)),f instanceof Uint8Array){for(var h=f.byteLength,k=[],E=0;E<h;E++)k[E>>>2]|=f[E]<<24-E%4*8;b.call(this,k,h)}else b.apply(this,arguments)};T.prototype=y}}(),S.lib.WordArray)},6568:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0});const S=d(1797),y=d(6011);R.default=function(b){const T=function(f){return Uint8Array.of((15&f[6])<<4|f[7]>>4&15,(15&f[7])<<4|(240&f[4])>>4,(15&f[4])<<4|(240&f[5])>>4,(15&f[5])<<4|(240&f[0])>>4,(15&f[0])<<4|(240&f[1])>>4,(15&f[1])<<4|(240&f[2])>>4,96|15&f[2],f[3],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])}(typeof b=="string"?(0,S.default)(b):b);return typeof b=="string"?(0,y.unsafeStringify)(T):T}},6585:j=>{var R=1e3,d=60*R,S=60*d,y=24*S,b=7*y,T=365.25*y;function f(h,k,E,H){var m=k>=1.5*E;return Math.round(h/E)+" "+H+(m?"s":"")}j.exports=function(h,k){k=k||{};var E=typeof h;if(E==="string"&&h.length>0)return function(H){if(!((H=String(H)).length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(H);if(m){var P=parseFloat(m[1]);switch((m[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return P*T;case"weeks":case"week":case"w":return P*b;case"days":case"day":case"d":return P*y;case"hours":case"hour":case"hrs":case"hr":case"h":return P*S;case"minutes":case"minute":case"mins":case"min":case"m":return P*d;case"seconds":case"second":case"secs":case"sec":case"s":return P*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return P;default:return}}}}(h);if(E==="number"&&isFinite(h))return k.long?function(H){var m=Math.abs(H);return m>=y?f(H,m,y,"day"):m>=S?f(H,m,S,"hour"):m>=d?f(H,m,d,"minute"):m>=R?f(H,m,R,"second"):H+" ms"}(h):function(H){var m=Math.abs(H);return m>=y?Math.round(H/y)+"d":m>=S?Math.round(H/S)+"h":m>=d?Math.round(H/d)+"m":m>=R?Math.round(H/R)+"s":H+"ms"}(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))}},6697:(j,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},6746:(j,R,d)=>{d.d(R,{KS:()=>y,fo:()=>S});var S=Object.freeze({SetKey:"setKey",RatchetRequest:"ratchetRequest",KeyRatcheted:"keyRatcheted"}),y=Object.freeze({ParticipantEncryptionStatusChanged:"participantEncryptionStatusChanged",EncryptionError:"encryptionError",E2EEStateChange:"e2eeStateChange"})},6880:function(j){j.exports=function(R){var d={};function S(y){if(d[y])return d[y].exports;var b=d[y]={i:y,l:!1,exports:{}};return R[y].call(b.exports,b,b.exports,S),b.l=!0,b.exports}return S.m=R,S.c=d,S.d=function(y,b,T){S.o(y,b)||Object.defineProperty(y,b,{enumerable:!0,get:T})},S.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},S.t=function(y,b){if(1&b&&(y=S(y)),8&b||4&b&&typeof y=="object"&&y&&y.__esModule)return y;var T=Object.create(null);if(S.r(T),Object.defineProperty(T,"default",{enumerable:!0,value:y}),2&b&&typeof y!="string")for(var f in y)S.d(T,f,(function(h){return y[h]}).bind(null,f));return T},S.n=function(y){var b=y&&y.__esModule?function(){return y.default}:function(){return y};return S.d(b,"a",b),b},S.o=function(y,b){return Object.prototype.hasOwnProperty.call(y,b)},S.p="",S(S.s=90)}({17:function(R,d,S){d.__esModule=!0,d.default=void 0;var y=S(18),b=function(){function T(){}return T.getFirstMatch=function(f,h){var k=h.match(f);return k&&k.length>0&&k[1]||""},T.getSecondMatch=function(f,h){var k=h.match(f);return k&&k.length>1&&k[2]||""},T.matchAndReturnConst=function(f,h,k){if(f.test(h))return k},T.getWindowsVersionName=function(f){switch(f){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},T.getMacOSVersionName=function(f){var h=f.split(".").splice(0,2).map(function(k){return parseInt(k,10)||0});if(h.push(0),h[0]===10)switch(h[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},T.getAndroidVersionName=function(f){var h=f.split(".").splice(0,2).map(function(k){return parseInt(k,10)||0});if(h.push(0),!(h[0]===1&&h[1]<5))return h[0]===1&&h[1]<6?"Cupcake":h[0]===1&&h[1]>=6?"Donut":h[0]===2&&h[1]<2?"Eclair":h[0]===2&&h[1]===2?"Froyo":h[0]===2&&h[1]>2?"Gingerbread":h[0]===3?"Honeycomb":h[0]===4&&h[1]<1?"Ice Cream Sandwich":h[0]===4&&h[1]<4?"Jelly Bean":h[0]===4&&h[1]>=4?"KitKat":h[0]===5?"Lollipop":h[0]===6?"Marshmallow":h[0]===7?"Nougat":h[0]===8?"Oreo":h[0]===9?"Pie":void 0},T.getVersionPrecision=function(f){return f.split(".").length},T.compareVersions=function(f,h,k){k===void 0&&(k=!1);var E=T.getVersionPrecision(f),H=T.getVersionPrecision(h),m=Math.max(E,H),P=0,v=T.map([f,h],function(U){var C=m-T.getVersionPrecision(U),_=U+new Array(C+1).join(".0");return T.map(_.split("."),function(w){return new Array(20-w.length).join("0")+w}).reverse()});for(k&&(P=m-Math.min(E,H)),m-=1;m>=P;){if(v[0][m]>v[1][m])return 1;if(v[0][m]===v[1][m]){if(m===P)return 0;m-=1}else if(v[0][m]<v[1][m])return-1}},T.map=function(f,h){var k,E=[];if(Array.prototype.map)return Array.prototype.map.call(f,h);for(k=0;k<f.length;k+=1)E.push(h(f[k]));return E},T.find=function(f,h){var k,E;if(Array.prototype.find)return Array.prototype.find.call(f,h);for(k=0,E=f.length;k<E;k+=1){var H=f[k];if(h(H,k))return H}},T.assign=function(f){for(var h,k,E=f,H=arguments.length,m=new Array(H>1?H-1:0),P=1;P<H;P++)m[P-1]=arguments[P];if(Object.assign)return Object.assign.apply(Object,[f].concat(m));var v=function(){var U=m[h];typeof U=="object"&&U!==null&&Object.keys(U).forEach(function(C){E[C]=U[C]})};for(h=0,k=m.length;h<k;h+=1)v();return f},T.getBrowserAlias=function(f){return y.BROWSER_ALIASES_MAP[f]},T.getBrowserTypeByAlias=function(f){return y.BROWSER_MAP[f]||""},T}();d.default=b,R.exports=d.default},18:function(R,d,S){d.__esModule=!0,d.ENGINE_MAP=d.OS_MAP=d.PLATFORMS_MAP=d.BROWSER_MAP=d.BROWSER_ALIASES_MAP=void 0,d.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},d.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},d.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},d.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},d.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(R,d,S){d.__esModule=!0,d.default=void 0;var y,b=(y=S(91))&&y.__esModule?y:{default:y},T=S(18);function f(k,E){for(var H=0;H<E.length;H++){var m=E[H];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(k,m.key,m)}}var h=function(){function k(){}var E,H,m;return k.getParser=function(P,v){if(v===void 0&&(v=!1),typeof P!="string")throw new Error("UserAgent should be a string");return new b.default(P,v)},k.parse=function(P){return new b.default(P).getResult()},E=k,m=[{key:"BROWSER_MAP",get:function(){return T.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return T.ENGINE_MAP}},{key:"OS_MAP",get:function(){return T.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return T.PLATFORMS_MAP}}],(H=null)&&f(E.prototype,H),m&&f(E,m),k}();d.default=h,R.exports=d.default},91:function(R,d,S){d.__esModule=!0,d.default=void 0;var y=k(S(92)),b=k(S(93)),T=k(S(94)),f=k(S(95)),h=k(S(17));function k(H){return H&&H.__esModule?H:{default:H}}var E=function(){function H(P,v){if(v===void 0&&(v=!1),P==null||P==="")throw new Error("UserAgent parameter can't be empty");this._ua=P,this.parsedResult={},v!==!0&&this.parse()}var m=H.prototype;return m.getUA=function(){return this._ua},m.test=function(P){return P.test(this._ua)},m.parseBrowser=function(){var P=this;this.parsedResult.browser={};var v=h.default.find(y.default,function(U){if(typeof U.test=="function")return U.test(P);if(U.test instanceof Array)return U.test.some(function(C){return P.test(C)});throw new Error("Browser's test function is not valid")});return v&&(this.parsedResult.browser=v.describe(this.getUA())),this.parsedResult.browser},m.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},m.getBrowserName=function(P){return P?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},m.getBrowserVersion=function(){return this.getBrowser().version},m.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},m.parseOS=function(){var P=this;this.parsedResult.os={};var v=h.default.find(b.default,function(U){if(typeof U.test=="function")return U.test(P);if(U.test instanceof Array)return U.test.some(function(C){return P.test(C)});throw new Error("Browser's test function is not valid")});return v&&(this.parsedResult.os=v.describe(this.getUA())),this.parsedResult.os},m.getOSName=function(P){var v=this.getOS().name;return P?String(v).toLowerCase()||"":v||""},m.getOSVersion=function(){return this.getOS().version},m.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},m.getPlatformType=function(P){P===void 0&&(P=!1);var v=this.getPlatform().type;return P?String(v).toLowerCase()||"":v||""},m.parsePlatform=function(){var P=this;this.parsedResult.platform={};var v=h.default.find(T.default,function(U){if(typeof U.test=="function")return U.test(P);if(U.test instanceof Array)return U.test.some(function(C){return P.test(C)});throw new Error("Browser's test function is not valid")});return v&&(this.parsedResult.platform=v.describe(this.getUA())),this.parsedResult.platform},m.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},m.getEngineName=function(P){return P?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},m.parseEngine=function(){var P=this;this.parsedResult.engine={};var v=h.default.find(f.default,function(U){if(typeof U.test=="function")return U.test(P);if(U.test instanceof Array)return U.test.some(function(C){return P.test(C)});throw new Error("Browser's test function is not valid")});return v&&(this.parsedResult.engine=v.describe(this.getUA())),this.parsedResult.engine},m.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},m.getResult=function(){return h.default.assign({},this.parsedResult)},m.satisfies=function(P){var v=this,U={},C=0,_={},w=0;if(Object.keys(P).forEach(function(G){var Z=P[G];typeof Z=="string"?(_[G]=Z,w+=1):typeof Z=="object"&&(U[G]=Z,C+=1)}),C>0){var p=Object.keys(U),x=h.default.find(p,function(G){return v.isOS(G)});if(x){var A=this.satisfies(U[x]);if(A!==void 0)return A}var I=h.default.find(p,function(G){return v.isPlatform(G)});if(I){var M=this.satisfies(U[I]);if(M!==void 0)return M}}if(w>0){var F=Object.keys(_),z=h.default.find(F,function(G){return v.isBrowser(G,!0)});if(z!==void 0)return this.compareVersion(_[z])}},m.isBrowser=function(P,v){v===void 0&&(v=!1);var U=this.getBrowserName().toLowerCase(),C=P.toLowerCase(),_=h.default.getBrowserTypeByAlias(C);return v&&_&&(C=_.toLowerCase()),C===U},m.compareVersion=function(P){var v=[0],U=P,C=!1,_=this.getBrowserVersion();if(typeof _=="string")return P[0]===">"||P[0]==="<"?(U=P.substr(1),P[1]==="="?(C=!0,U=P.substr(2)):v=[],P[0]===">"?v.push(1):v.push(-1)):P[0]==="="?U=P.substr(1):P[0]==="~"&&(C=!0,U=P.substr(1)),v.indexOf(h.default.compareVersions(_,U,C))>-1},m.isOS=function(P){return this.getOSName(!0)===String(P).toLowerCase()},m.isPlatform=function(P){return this.getPlatformType(!0)===String(P).toLowerCase()},m.isEngine=function(P){return this.getEngineName(!0)===String(P).toLowerCase()},m.is=function(P,v){return v===void 0&&(v=!1),this.isBrowser(P,v)||this.isOS(P)||this.isPlatform(P)},m.some=function(P){var v=this;return P===void 0&&(P=[]),P.some(function(U){return v.is(U)})},H}();d.default=E,R.exports=d.default},92:function(R,d,S){d.__esModule=!0,d.default=void 0;var y,b=(y=S(17))&&y.__esModule?y:{default:y},T=/version\/(\d+(\.?_?\d+)+)/i,f=[{test:[/googlebot/i],describe:function(h){var k={name:"Googlebot"},E=b.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/opera/i],describe:function(h){var k={name:"Opera"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/opr\/|opios/i],describe:function(h){var k={name:"Opera"},E=b.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/SamsungBrowser/i],describe:function(h){var k={name:"Samsung Internet for Android"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/Whale/i],describe:function(h){var k={name:"NAVER Whale Browser"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/MZBrowser/i],describe:function(h){var k={name:"MZ Browser"},E=b.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/focus/i],describe:function(h){var k={name:"Focus"},E=b.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/swing/i],describe:function(h){var k={name:"Swing"},E=b.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/coast/i],describe:function(h){var k={name:"Opera Coast"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(h){var k={name:"Opera Touch"},E=b.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/yabrowser/i],describe:function(h){var k={name:"Yandex Browser"},E=b.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/ucbrowser/i],describe:function(h){var k={name:"UC Browser"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/Maxthon|mxios/i],describe:function(h){var k={name:"Maxthon"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/epiphany/i],describe:function(h){var k={name:"Epiphany"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/puffin/i],describe:function(h){var k={name:"Puffin"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/sleipnir/i],describe:function(h){var k={name:"Sleipnir"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/k-meleon/i],describe:function(h){var k={name:"K-Meleon"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/micromessenger/i],describe:function(h){var k={name:"WeChat"},E=b.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/qqbrowser/i],describe:function(h){var k={name:/qqbrowserlite/i.test(h)?"QQ Browser Lite":"QQ Browser"},E=b.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/msie|trident/i],describe:function(h){var k={name:"Internet Explorer"},E=b.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/\sedg\//i],describe:function(h){var k={name:"Microsoft Edge"},E=b.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/edg([ea]|ios)/i],describe:function(h){var k={name:"Microsoft Edge"},E=b.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/vivaldi/i],describe:function(h){var k={name:"Vivaldi"},E=b.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/seamonkey/i],describe:function(h){var k={name:"SeaMonkey"},E=b.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/sailfish/i],describe:function(h){var k={name:"Sailfish"},E=b.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,h);return E&&(k.version=E),k}},{test:[/silk/i],describe:function(h){var k={name:"Amazon Silk"},E=b.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/phantom/i],describe:function(h){var k={name:"PhantomJS"},E=b.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/slimerjs/i],describe:function(h){var k={name:"SlimerJS"},E=b.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(h){var k={name:"BlackBerry"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/(web|hpw)[o0]s/i],describe:function(h){var k={name:"WebOS Browser"},E=b.default.getFirstMatch(T,h)||b.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/bada/i],describe:function(h){var k={name:"Bada"},E=b.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/tizen/i],describe:function(h){var k={name:"Tizen"},E=b.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/qupzilla/i],describe:function(h){var k={name:"QupZilla"},E=b.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/firefox|iceweasel|fxios/i],describe:function(h){var k={name:"Firefox"},E=b.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/electron/i],describe:function(h){var k={name:"Electron"},E=b.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/MiuiBrowser/i],describe:function(h){var k={name:"Miui"},E=b.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/chromium/i],describe:function(h){var k={name:"Chromium"},E=b.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,h)||b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/chrome|crios|crmo/i],describe:function(h){var k={name:"Chrome"},E=b.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/GSA/i],describe:function(h){var k={name:"Google Search"},E=b.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:function(h){var k=!h.test(/like android/i),E=h.test(/android/i);return k&&E},describe:function(h){var k={name:"Android Browser"},E=b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/playstation 4/i],describe:function(h){var k={name:"PlayStation 4"},E=b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/safari|applewebkit/i],describe:function(h){var k={name:"Safari"},E=b.default.getFirstMatch(T,h);return E&&(k.version=E),k}},{test:[/.*/i],describe:function(h){var k=h.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:b.default.getFirstMatch(k,h),version:b.default.getSecondMatch(k,h)}}}];d.default=f,R.exports=d.default},93:function(R,d,S){d.__esModule=!0,d.default=void 0;var y,b=(y=S(17))&&y.__esModule?y:{default:y},T=S(18),f=[{test:[/Roku\/DVP/],describe:function(h){var k=b.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,h);return{name:T.OS_MAP.Roku,version:k}}},{test:[/windows phone/i],describe:function(h){var k=b.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,h);return{name:T.OS_MAP.WindowsPhone,version:k}}},{test:[/windows /i],describe:function(h){var k=b.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,h),E=b.default.getWindowsVersionName(k);return{name:T.OS_MAP.Windows,version:k,versionName:E}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(h){var k={name:T.OS_MAP.iOS},E=b.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,h);return E&&(k.version=E),k}},{test:[/macintosh/i],describe:function(h){var k=b.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,h).replace(/[_\s]/g,"."),E=b.default.getMacOSVersionName(k),H={name:T.OS_MAP.MacOS,version:k};return E&&(H.versionName=E),H}},{test:[/(ipod|iphone|ipad)/i],describe:function(h){var k=b.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,h).replace(/[_\s]/g,".");return{name:T.OS_MAP.iOS,version:k}}},{test:function(h){var k=!h.test(/like android/i),E=h.test(/android/i);return k&&E},describe:function(h){var k=b.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,h),E=b.default.getAndroidVersionName(k),H={name:T.OS_MAP.Android,version:k};return E&&(H.versionName=E),H}},{test:[/(web|hpw)[o0]s/i],describe:function(h){var k=b.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,h),E={name:T.OS_MAP.WebOS};return k&&k.length&&(E.version=k),E}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(h){var k=b.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,h)||b.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,h)||b.default.getFirstMatch(/\bbb(\d+)/i,h);return{name:T.OS_MAP.BlackBerry,version:k}}},{test:[/bada/i],describe:function(h){var k=b.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,h);return{name:T.OS_MAP.Bada,version:k}}},{test:[/tizen/i],describe:function(h){var k=b.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,h);return{name:T.OS_MAP.Tizen,version:k}}},{test:[/linux/i],describe:function(){return{name:T.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:T.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(h){var k=b.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,h);return{name:T.OS_MAP.PlayStation4,version:k}}}];d.default=f,R.exports=d.default},94:function(R,d,S){d.__esModule=!0,d.default=void 0;var y,b=(y=S(17))&&y.__esModule?y:{default:y},T=S(18),f=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(h){var k=b.default.getFirstMatch(/(can-l01)/i,h)&&"Nova",E={type:T.PLATFORMS_MAP.mobile,vendor:"Huawei"};return k&&(E.model=k),E}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:T.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:T.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:T.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:T.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:T.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:T.PLATFORMS_MAP.tablet}}},{test:function(h){var k=h.test(/ipod|iphone/i),E=h.test(/like (ipod|iphone)/i);return k&&!E},describe:function(h){var k=b.default.getFirstMatch(/(ipod|iphone)/i,h);return{type:T.PLATFORMS_MAP.mobile,vendor:"Apple",model:k}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:T.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:T.PLATFORMS_MAP.mobile}}},{test:function(h){return h.getBrowserName(!0)==="blackberry"},describe:function(){return{type:T.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(h){return h.getBrowserName(!0)==="bada"},describe:function(){return{type:T.PLATFORMS_MAP.mobile}}},{test:function(h){return h.getBrowserName()==="windows phone"},describe:function(){return{type:T.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(h){var k=Number(String(h.getOSVersion()).split(".")[0]);return h.getOSName(!0)==="android"&&k>=3},describe:function(){return{type:T.PLATFORMS_MAP.tablet}}},{test:function(h){return h.getOSName(!0)==="android"},describe:function(){return{type:T.PLATFORMS_MAP.mobile}}},{test:function(h){return h.getOSName(!0)==="macos"},describe:function(){return{type:T.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(h){return h.getOSName(!0)==="windows"},describe:function(){return{type:T.PLATFORMS_MAP.desktop}}},{test:function(h){return h.getOSName(!0)==="linux"},describe:function(){return{type:T.PLATFORMS_MAP.desktop}}},{test:function(h){return h.getOSName(!0)==="playstation 4"},describe:function(){return{type:T.PLATFORMS_MAP.tv}}},{test:function(h){return h.getOSName(!0)==="roku"},describe:function(){return{type:T.PLATFORMS_MAP.tv}}}];d.default=f,R.exports=d.default},95:function(R,d,S){d.__esModule=!0,d.default=void 0;var y,b=(y=S(17))&&y.__esModule?y:{default:y},T=S(18),f=[{test:function(h){return h.getBrowserName(!0)==="microsoft edge"},describe:function(h){if(/\sedg\//i.test(h))return{name:T.ENGINE_MAP.Blink};var k=b.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,h);return{name:T.ENGINE_MAP.EdgeHTML,version:k}}},{test:[/trident/i],describe:function(h){var k={name:T.ENGINE_MAP.Trident},E=b.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:function(h){return h.test(/presto/i)},describe:function(h){var k={name:T.ENGINE_MAP.Presto},E=b.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:function(h){var k=h.test(/gecko/i),E=h.test(/like gecko/i);return k&&!E},describe:function(h){var k={name:T.ENGINE_MAP.Gecko},E=b.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:T.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(h){var k={name:T.ENGINE_MAP.WebKit},E=b.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,h);return E&&(k.version=E),k}}];d.default=f,R.exports=d.default}})},6939:function(j,R,d){var S,y,b;j.exports=(b=d(9021),d(7165),b.mode.CTR=(S=b.lib.BlockCipherMode.extend(),y=S.Encryptor=S.extend({processBlock:function(T,f){var h=this._cipher,k=h.blockSize,E=this._iv,H=this._counter;E&&(H=this._counter=E.slice(0),this._iv=void 0);var m=H.slice(0);h.encryptBlock(m,0),H[k-1]=H[k-1]+1|0;for(var P=0;P<k;P++)T[f+P]^=m[P]}}),S.Decryptor=y,S),b.mode.CTR)},6993:(j,R,d)=>{var S=d(5546);function y(){var b,T,f=typeof Symbol=="function"?Symbol:{},h=f.iterator||"@@iterator",k=f.toStringTag||"@@toStringTag";function E(w,p,x,A){var I=p&&p.prototype instanceof m?p:m,M=Object.create(I.prototype);return S(M,"_invoke",function(F,z,G){var Z,ce,X,Ee=0,Se=G||[],xe=!1,_e={p:0,n:0,v:b,a:Pe,f:Pe.bind(b,4),d:function(He,pe){return Z=He,ce=0,X=b,_e.n=pe,H}};function Pe(He,pe){for(ce=He,X=pe,T=0;!xe&&Ee&&!Ge&&T<Se.length;T++){var Ge,Te=Se[T],Ve=_e.p,qe=Te[2];He>3?(Ge=qe===pe)&&(X=Te[(ce=Te[4])?5:(ce=3,3)],Te[4]=Te[5]=b):Te[0]<=Ve&&((Ge=He<2&&Ve<Te[1])?(ce=0,_e.v=pe,_e.n=Te[1]):Ve<qe&&(Ge=He<3||Te[0]>pe||pe>qe)&&(Te[4]=He,Te[5]=pe,_e.n=qe,ce=0))}if(Ge||He>1)return H;throw xe=!0,pe}return function(He,pe,Ge){if(Ee>1)throw TypeError("Generator is already running");for(xe&&pe===1&&Pe(pe,Ge),ce=pe,X=Ge;(T=ce<2?b:X)||!xe;){Z||(ce?ce<3?(ce>1&&(_e.n=-1),Pe(ce,X)):_e.n=X:_e.v=X);try{if(Ee=2,Z){if(ce||(He="next"),T=Z[He]){if(!(T=T.call(Z,X)))throw TypeError("iterator result is not an object");if(!T.done)return T;X=T.value,ce<2&&(ce=0)}else ce===1&&(T=Z.return)&&T.call(Z),ce<2&&(X=TypeError("The iterator does not provide a '"+He+"' method"),ce=1);Z=b}else if((T=(xe=_e.n<0)?X:F.call(z,_e))!==H)break}catch(Te){Z=b,ce=1,X=Te}finally{Ee=1}}return{value:T,done:xe}}}(w,x,A),!0),M}var H={};function m(){}function P(){}function v(){}T=Object.getPrototypeOf;var U=[][h]?T(T([][h]())):(S(T={},h,function(){return this}),T),C=v.prototype=m.prototype=Object.create(U);function _(w){return Object.setPrototypeOf?Object.setPrototypeOf(w,v):(w.__proto__=v,S(w,k,"GeneratorFunction")),w.prototype=Object.create(C),w}return P.prototype=v,S(C,"constructor",v),S(v,"constructor",P),P.displayName="GeneratorFunction",S(v,k,"GeneratorFunction"),S(C),S(C,k,"Generator"),S(C,h,function(){return this}),S(C,"toString",function(){return"[object Generator]"}),(j.exports=y=function(){return{w:E,m:_}},j.exports.__esModule=!0,j.exports.default=j.exports)()}j.exports=y,j.exports.__esModule=!0,j.exports.default=j.exports},7007:j=>{var R,d=typeof Reflect=="object"?Reflect:null,S=d&&typeof d.apply=="function"?d.apply:function(C,_,w){return Function.prototype.apply.call(C,_,w)};R=d&&typeof d.ownKeys=="function"?d.ownKeys:Object.getOwnPropertySymbols?function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:function(C){return Object.getOwnPropertyNames(C)};var y=Number.isNaN||function(C){return C!=C};function b(){b.init.call(this)}j.exports=b,j.exports.once=function(C,_){return new Promise(function(w,p){function x(I){C.removeListener(_,A),p(I)}function A(){typeof C.removeListener=="function"&&C.removeListener("error",x),w([].slice.call(arguments))}U(C,_,A,{once:!0}),_!=="error"&&function(I,M,F){typeof I.on=="function"&&U(I,"error",M,F)}(C,x,{once:!0})})},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var T=10;function f(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}function h(C){return C._maxListeners===void 0?b.defaultMaxListeners:C._maxListeners}function k(C,_,w,p){var x,A,I,M;if(f(w),(A=C._events)===void 0?(A=C._events=Object.create(null),C._eventsCount=0):(A.newListener!==void 0&&(C.emit("newListener",_,w.listener?w.listener:w),A=C._events),I=A[_]),I===void 0)I=A[_]=w,++C._eventsCount;else if(typeof I=="function"?I=A[_]=p?[w,I]:[I,w]:p?I.unshift(w):I.push(w),(x=h(C))>0&&I.length>x&&!I.warned){I.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=C,F.type=_,F.count=I.length,M=F,console&&console.warn&&console.warn(M)}return C}function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function H(C,_,w){var p={fired:!1,wrapFn:void 0,target:C,type:_,listener:w},x=E.bind(p);return x.listener=w,p.wrapFn=x,x}function m(C,_,w){var p=C._events;if(p===void 0)return[];var x=p[_];return x===void 0?[]:typeof x=="function"?w?[x.listener||x]:[x]:w?function(A){for(var I=new Array(A.length),M=0;M<I.length;++M)I[M]=A[M].listener||A[M];return I}(x):v(x,x.length)}function P(C){var _=this._events;if(_!==void 0){var w=_[C];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0}function v(C,_){for(var w=new Array(_),p=0;p<_;++p)w[p]=C[p];return w}function U(C,_,w,p){if(typeof C.on=="function")p.once?C.once(_,w):C.on(_,w);else{if(typeof C.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C);C.addEventListener(_,function x(A){p.once&&C.removeEventListener(_,x),w(A)})}}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(C){if(typeof C!="number"||C<0||y(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");T=C}}),b.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||y(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this},b.prototype.getMaxListeners=function(){return h(this)},b.prototype.emit=function(C){for(var _=[],w=1;w<arguments.length;w++)_.push(arguments[w]);var p=C==="error",x=this._events;if(x!==void 0)p=p&&x.error===void 0;else if(!p)return!1;if(p){var A;if(_.length>0&&(A=_[0]),A instanceof Error)throw A;var I=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw I.context=A,I}var M=x[C];if(M===void 0)return!1;if(typeof M=="function")S(M,this,_);else{var F=M.length,z=v(M,F);for(w=0;w<F;++w)S(z[w],this,_)}return!0},b.prototype.addListener=function(C,_){return k(this,C,_,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(C,_){return k(this,C,_,!0)},b.prototype.once=function(C,_){return f(_),this.on(C,H(this,C,_)),this},b.prototype.prependOnceListener=function(C,_){return f(_),this.prependListener(C,H(this,C,_)),this},b.prototype.removeListener=function(C,_){var w,p,x,A,I;if(f(_),(p=this._events)===void 0)return this;if((w=p[C])===void 0)return this;if(w===_||w.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete p[C],p.removeListener&&this.emit("removeListener",C,w.listener||_));else if(typeof w!="function"){for(x=-1,A=w.length-1;A>=0;A--)if(w[A]===_||w[A].listener===_){I=w[A].listener,x=A;break}if(x<0)return this;x===0?w.shift():function(M,F){for(;F+1<M.length;F++)M[F]=M[F+1];M.pop()}(w,x),w.length===1&&(p[C]=w[0]),p.removeListener!==void 0&&this.emit("removeListener",C,I||_)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(C){var _,w,p;if((w=this._events)===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[C]),this;if(arguments.length===0){var x,A=Object.keys(w);for(p=0;p<A.length;++p)(x=A[p])!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(_=w[C])=="function")this.removeListener(C,_);else if(_!==void 0)for(p=_.length-1;p>=0;p--)this.removeListener(C,_[p]);return this},b.prototype.listeners=function(C){return m(this,C,!0)},b.prototype.rawListeners=function(C){return m(this,C,!1)},b.listenerCount=function(C,_){return typeof C.listenerCount=="function"?C.listenerCount(_):P.call(C,_)},b.prototype.listenerCount=P,b.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]}},7080:(j,R,d)=>{d.d(R,{q:()=>y,s:()=>S});var S={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},y={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}},7165:function(j,R,d){var S;j.exports=(S=d(9021),d(9506),void(S.lib.Cipher||function(y){var b=S,T=b.lib,f=T.Base,h=T.WordArray,k=T.BufferedBlockAlgorithm,E=b.enc,H=(E.Utf8,E.Base64),m=b.algo.EvpKDF,P=T.Cipher=k.extend({cfg:f.extend(),createEncryptor:function(M,F){return this.create(this._ENC_XFORM_MODE,M,F)},createDecryptor:function(M,F){return this.create(this._DEC_XFORM_MODE,M,F)},init:function(M,F,z){this.cfg=this.cfg.extend(z),this._xformMode=M,this._key=F,this.reset()},reset:function(){k.reset.call(this),this._doReset()},process:function(M){return this._append(M),this._process()},finalize:function(M){return M&&this._append(M),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function M(F){return typeof F=="string"?I:x}return function(F){return{encrypt:function(z,G,Z){return M(G).encrypt(F,z,G,Z)},decrypt:function(z,G,Z){return M(G).decrypt(F,z,G,Z)}}}}()}),v=(T.StreamCipher=P.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),b.mode={}),U=T.BlockCipherMode=f.extend({createEncryptor:function(M,F){return this.Encryptor.create(M,F)},createDecryptor:function(M,F){return this.Decryptor.create(M,F)},init:function(M,F){this._cipher=M,this._iv=F}}),C=v.CBC=function(){var M=U.extend();function F(z,G,Z){var ce,X=this._iv;X?(ce=X,this._iv=y):ce=this._prevBlock;for(var Ee=0;Ee<Z;Ee++)z[G+Ee]^=ce[Ee]}return M.Encryptor=M.extend({processBlock:function(z,G){var Z=this._cipher,ce=Z.blockSize;F.call(this,z,G,ce),Z.encryptBlock(z,G),this._prevBlock=z.slice(G,G+ce)}}),M.Decryptor=M.extend({processBlock:function(z,G){var Z=this._cipher,ce=Z.blockSize,X=z.slice(G,G+ce);Z.decryptBlock(z,G),F.call(this,z,G,ce),this._prevBlock=X}}),M}(),_=(b.pad={}).Pkcs7={pad:function(M,F){for(var z=4*F,G=z-M.sigBytes%z,Z=G<<24|G<<16|G<<8|G,ce=[],X=0;X<G;X+=4)ce.push(Z);var Ee=h.create(ce,G);M.concat(Ee)},unpad:function(M){var F=255&M.words[M.sigBytes-1>>>2];M.sigBytes-=F}},w=(T.BlockCipher=P.extend({cfg:P.cfg.extend({mode:C,padding:_}),reset:function(){var M;P.reset.call(this);var F=this.cfg,z=F.iv,G=F.mode;this._xformMode==this._ENC_XFORM_MODE?M=G.createEncryptor:(M=G.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==M?this._mode.init(this,z&&z.words):(this._mode=M.call(G,this,z&&z.words),this._mode.__creator=M)},_doProcessBlock:function(M,F){this._mode.processBlock(M,F)},_doFinalize:function(){var M,F=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(F.pad(this._data,this.blockSize),M=this._process(!0)):(M=this._process(!0),F.unpad(M)),M},blockSize:4}),T.CipherParams=f.extend({init:function(M){this.mixIn(M)},toString:function(M){return(M||this.formatter).stringify(this)}})),p=(b.format={}).OpenSSL={stringify:function(M){var F=M.ciphertext,z=M.salt;return(z?h.create([1398893684,1701076831]).concat(z).concat(F):F).toString(H)},parse:function(M){var F,z=H.parse(M),G=z.words;return G[0]==1398893684&&G[1]==1701076831&&(F=h.create(G.slice(2,4)),G.splice(0,4),z.sigBytes-=16),w.create({ciphertext:z,salt:F})}},x=T.SerializableCipher=f.extend({cfg:f.extend({format:p}),encrypt:function(M,F,z,G){G=this.cfg.extend(G);var Z=M.createEncryptor(z,G),ce=Z.finalize(F),X=Z.cfg;return w.create({ciphertext:ce,key:z,iv:X.iv,algorithm:M,mode:X.mode,padding:X.padding,blockSize:M.blockSize,formatter:G.format})},decrypt:function(M,F,z,G){return G=this.cfg.extend(G),F=this._parse(F,G.format),M.createDecryptor(z,G).finalize(F.ciphertext)},_parse:function(M,F){return typeof M=="string"?F.parse(M,this):M}}),A=(b.kdf={}).OpenSSL={execute:function(M,F,z,G,Z){if(G||(G=h.random(8)),Z)ce=m.create({keySize:F+z,hasher:Z}).compute(M,G);else var ce=m.create({keySize:F+z}).compute(M,G);var X=h.create(ce.words.slice(F),4*z);return ce.sigBytes=4*F,w.create({key:ce,iv:X,salt:G})}},I=T.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:A}),encrypt:function(M,F,z,G){var Z=(G=this.cfg.extend(G)).kdf.execute(z,M.keySize,M.ivSize,G.salt,G.hasher);G.iv=Z.iv;var ce=x.encrypt.call(this,M,F,Z.key,G);return ce.mixIn(Z),ce},decrypt:function(M,F,z,G){G=this.cfg.extend(G),F=this._parse(F,G.format);var Z=G.kdf.execute(z,M.keySize,M.ivSize,F.salt,G.hasher);return G.iv=Z.iv,x.decrypt.call(this,M,F,Z.key,G)}})}()))},7193:function(j,R,d){var S;j.exports=(S=d(9021),d(754),d(4636),d(9506),d(7165),function(){var y=S,b=y.lib.StreamCipher,T=y.algo,f=T.RC4=b.extend({_doReset:function(){for(var E=this._key,H=E.words,m=E.sigBytes,P=this._S=[],v=0;v<256;v++)P[v]=v;v=0;for(var U=0;v<256;v++){var C=v%m,_=H[C>>>2]>>>24-C%4*8&255;U=(U+P[v]+_)%256;var w=P[v];P[v]=P[U],P[U]=w}this._i=this._j=0},_doProcessBlock:function(E,H){E[H]^=h.call(this)},keySize:8,ivSize:0});function h(){for(var E=this._S,H=this._i,m=this._j,P=0,v=0;v<4;v++){m=(m+E[H=(H+1)%256])%256;var U=E[H];E[H]=E[m],E[m]=U,P|=E[(E[H]+E[m])%256]<<24-8*v}return this._i=H,this._j=m,P}y.RC4=b._createHelper(f);var k=T.RC4Drop=f.extend({cfg:f.cfg.extend({drop:192}),_doReset:function(){f._doReset.call(this);for(var E=this.cfg.drop;E>0;E--)h.call(this)}});y.RC4Drop=b._createHelper(k)}(),S.RC4)},7363:(j,R,d)=>{var S=d(5020),y=d(3804),b=d(5602);R.grammar=b,R.write=y,R.parse=S.parse,R.parseParams=S.parseParams,R.parseFmtpConfig=S.parseFmtpConfig,R.parsePayloads=S.parsePayloads,R.parseRemoteCandidates=S.parseRemoteCandidates,R.parseImageAttributes=S.parseImageAttributes,R.parseSimulcastStreamList=S.parseSimulcastStreamList},7402:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Chrome55=void 0;const S=d(7363),y=d(2994),b=d(4893),T=d(1765),f=d(8046),h=d(5544),k=d(4496),E=d(521),H=d(1305),m=new y.Logger("Chrome55"),P={OS:1024,MIS:1024};class v extends E.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdTrack=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new v}constructor(){super()}get name(){return"Chrome55"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const _=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{C.close()}catch{}const w=S.parse(_.sdp);return h.extractRtpCapabilities({sdpObject:w})}catch(_){try{C.close()}catch{}throw _}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:C,iceParameters:_,iceCandidates:w,dtlsParameters:p,sctpParameters:x,iceServers:A,iceTransportPolicy:I,additionalSettings:M,proprietaryConstraints:F,extendedRtpCapabilities:z}){m.debug("run()"),this._direction=C,this._remoteSdp=new H.RemoteSdp({iceParameters:_,iceCandidates:w,dtlsParameters:p,sctpParameters:x,planB:!0}),this._sendingRtpParametersByKind={audio:f.getSendingRtpParameters("audio",z),video:f.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:f.getSendingRemoteRtpParameters("audio",z),video:f.getSendingRemoteRtpParameters("video",z)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:A??[],iceTransportPolicy:I??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...M},F),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){m.debug("updateIceServers()");const _=this._pc.getConfiguration();_.iceServers=C,this._pc.setConfiguration(_)}async restartIce(C){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const _=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const w={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w)}else{const _={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);const w=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:_,codecOptions:w,codec:p}){this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),p&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addStream(this._sendStream);let x,A=await this._pc.createOffer(),I=S.parse(A.sdp);I.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const M=T.clone(this._sendingRtpParametersByKind[C.kind]);M.codecs=f.reduceCodecs(M.codecs);const F=T.clone(this._sendingRemoteRtpParametersByKind[C.kind]);if(F.codecs=f.reduceCodecs(F.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),C.kind==="video"&&_&&_.length>1&&(m.debug("send() | enabling simulcast"),I=S.parse(A.sdp),x=I.media.find(Z=>Z.type==="video"),k.addLegacySimulcast({offerMediaObject:x,track:C,numStreams:_.length}),A={type:"offer",sdp:S.write(I)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A),I=S.parse(this._pc.localDescription.sdp),x=I.media.find(Z=>Z.type===C.kind),M.rtcp.cname=h.getCname({offerMediaObject:x}),M.encodings=k.getRtpEncodings({offerMediaObject:x,track:C}),_)for(let Z=0;Z<M.encodings.length;++Z)_[Z]&&Object.assign(M.encodings[Z],_[Z]);if(M.encodings.length>1&&M.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Z of M.encodings)Z.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:x,offerRtpParameters:M,answerRtpParameters:F,codecOptions:w});const z={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z);const G=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(G,C),{localId:G,rtpParameters:M}}async stopSending(C){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",C);const _=this._mapSendLocalIdTrack.get(C);if(!_)throw new Error("track not found");this._mapSendLocalIdTrack.delete(C),this._sendStream.removeTrack(_),this._pc.addStream(this._sendStream);const w=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",w);try{await this._pc.setLocalDescription(w)}catch(x){if(this._sendStream.getTracks().length===0)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",x.toString());throw x}if(this._pc.signalingState==="stable")return;const p={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,_){throw new b.UnsupportedError("not implemented")}async setMaxSpatialLayer(C,_){throw new b.UnsupportedError(" not implemented")}async setRtpEncodingParameters(C,_){throw new b.UnsupportedError("not supported")}async getSenderStats(C){throw new b.UnsupportedError("not implemented")}async sendDataChannel({ordered:C,maxPacketLifeTime:_,maxRetransmits:w,label:p,protocol:x}){this.assertSendDirection();const A={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:_,maxRetransmitTime:_,maxRetransmits:w,protocol:x};m.debug("sendDataChannel() [options:%o]",A);const I=this._pc.createDataChannel(p,A);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),F=S.parse(M.sdp),z=F.media.find(Z=>Z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:F}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const G={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:I,sctpStreamParameters:{streamId:A.id,ordered:A.ordered,maxPacketLifeTime:A.maxPacketLifeTime,maxRetransmits:A.maxRetransmits}}}async receive(C){this.assertRecvDirection();const _=[];for(const A of C){const{trackId:I,kind:M,rtpParameters:F,streamId:z}=A;m.debug("receive() [trackId:%s, kind:%s]",I,M);const G=M;this._remoteSdp.receive({mid:G,kind:M,offerRtpParameters:F,streamId:z??F.rtcp.cname,trackId:I})}const w={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",w),await this._pc.setRemoteDescription(w);let p=await this._pc.createAnswer();const x=S.parse(p.sdp);for(const A of C){const{kind:I,rtpParameters:M}=A,F=I,z=x.media.find(G=>String(G.mid)===F);h.applyCodecParameters({offerRtpParameters:M,answerMediaObject:z})}p={type:"answer",sdp:S.write(x)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:x}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const A of C){const{kind:I,trackId:M,rtpParameters:F}=A,z=I,G=M,Z=A.streamId??F.rtcp.cname,ce=this._pc.getRemoteStreams().find(X=>X.id===Z).getTrackById(G);if(!ce)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(G,{mid:z,rtpParameters:F}),_.push({localId:G,track:ce})}return _}async stopReceiving(C){this.assertRecvDirection();for(const p of C){m.debug("stopReceiving() [localId:%s]",p);const{mid:x,rtpParameters:A}=this._mapRecvLocalIdInfo.get(p)??{};this._mapRecvLocalIdInfo.delete(p),this._remoteSdp.planBStopReceiving({mid:x,offerRtpParameters:A})}const _={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);const w=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){throw new b.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:C,label:_,protocol:w}){this.assertRecvDirection();const{streamId:p,ordered:x,maxPacketLifeTime:A,maxRetransmits:I}=C,M={negotiated:!0,id:p,ordered:x,maxPacketLifeTime:A,maxRetransmitTime:A,maxRetransmits:I,protocol:w};m.debug("receiveDataChannel() [options:%o]",M);const F=this._pc.createDataChannel(_,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const z={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const G=await this._pc.createAnswer();if(!this._transportReady){const Z=S.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:F}}async setupTransport({localDtlsRole:C,localSdpObject:_}){_||(_=S.parse(this._pc.localDescription.sdp));const w=h.extractDtlsParameters({sdpObject:_});w.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((p,x)=>{this.safeEmit("@connect",{dtlsParameters:w},p,x)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.Chrome55=v},7504:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.DataProducer=void 0;const S=d(2994),y=d(3953),b=d(4893),T=new S.Logger("DataProducer");class f extends y.EnhancedEventEmitter{_id;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new y.EnhancedEventEmitter;constructor({id:k,dataChannel:E,sctpStreamParameters:H,appData:m}){super(),T.debug("constructor()"),this._id=k,this._dataChannel=E,this._sctpStreamParameters=H,this._appData=m??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(k){this._dataChannel.bufferedAmountLowThreshold=k}get appData(){return this._appData}set appData(k){this._appData=k}get observer(){return this._observer}close(){this._closed||(T.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(T.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(k){if(T.debug("send()"),this._closed)throw new b.InvalidStateError("closed");this._dataChannel.send(k)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(T.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",k=>{if(this._closed)return;let{error:E}=k;E||(E=new Error("unknown DataChannel error")),E.errorDetail==="sctp-failure"?T.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",E.sctpCauseCode,E.message):T.error('DataChannel "error" event: %o',E),this.safeEmit("error",E)}),this._dataChannel.addEventListener("close",()=>{this._closed||(T.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||T.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}R.DataProducer=f},7628:function(j,R,d){var S;j.exports=(S=d(9021),d(754),d(4636),d(9506),d(7165),function(){var y=S,b=y.lib,T=b.WordArray,f=b.BlockCipher,h=y.algo,k=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],E=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],H=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],m=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],P=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],v=h.DES=f.extend({_doReset:function(){for(var w=this._key.words,p=[],x=0;x<56;x++){var A=k[x]-1;p[x]=w[A>>>5]>>>31-A%32&1}for(var I=this._subKeys=[],M=0;M<16;M++){var F=I[M]=[],z=H[M];for(x=0;x<24;x++)F[x/6|0]|=p[(E[x]-1+z)%28]<<31-x%6,F[4+(x/6|0)]|=p[28+(E[x+24]-1+z)%28]<<31-x%6;for(F[0]=F[0]<<1|F[0]>>>31,x=1;x<7;x++)F[x]=F[x]>>>4*(x-1)+3;F[7]=F[7]<<5|F[7]>>>27}var G=this._invSubKeys=[];for(x=0;x<16;x++)G[x]=I[15-x]},encryptBlock:function(w,p){this._doCryptBlock(w,p,this._subKeys)},decryptBlock:function(w,p){this._doCryptBlock(w,p,this._invSubKeys)},_doCryptBlock:function(w,p,x){this._lBlock=w[p],this._rBlock=w[p+1],U.call(this,4,252645135),U.call(this,16,65535),C.call(this,2,858993459),C.call(this,8,16711935),U.call(this,1,1431655765);for(var A=0;A<16;A++){for(var I=x[A],M=this._lBlock,F=this._rBlock,z=0,G=0;G<8;G++)z|=m[G][((F^I[G])&P[G])>>>0];this._lBlock=F,this._rBlock=M^z}var Z=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Z,U.call(this,1,1431655765),C.call(this,8,16711935),C.call(this,2,858993459),U.call(this,16,65535),U.call(this,4,252645135),w[p]=this._lBlock,w[p+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function U(w,p){var x=(this._lBlock>>>w^this._rBlock)&p;this._rBlock^=x,this._lBlock^=x<<w}function C(w,p){var x=(this._rBlock>>>w^this._lBlock)&p;this._lBlock^=x,this._rBlock^=x<<w}y.DES=f._createHelper(v);var _=h.TripleDES=f.extend({_doReset:function(){var w=this._key.words;if(w.length!==2&&w.length!==4&&w.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var p=w.slice(0,2),x=w.length<4?w.slice(0,2):w.slice(2,4),A=w.length<6?w.slice(0,2):w.slice(4,6);this._des1=v.createEncryptor(T.create(p)),this._des2=v.createEncryptor(T.create(x)),this._des3=v.createEncryptor(T.create(A))},encryptBlock:function(w,p){this._des1.encryptBlock(w,p),this._des2.decryptBlock(w,p),this._des3.encryptBlock(w,p)},decryptBlock:function(w,p){this._des3.decryptBlock(w,p),this._des2.encryptBlock(w,p),this._des1.decryptBlock(w,p)},keySize:6,ivSize:2,blockSize:2});y.TripleDES=f._createHelper(_)}(),S.TripleDES)},7654:(j,R,d)=>{var S="__lodash_hash_undefined__",y="[object Function]",b="[object GeneratorFunction]",T=/^\[object .+?Constructor\]$/,f=typeof d.g=="object"&&d.g&&d.g.Object===Object&&d.g,h=typeof self=="object"&&self&&self.Object===Object&&self,k=f||h||Function("return this")(),E,H=Array.prototype,m=Function.prototype,P=Object.prototype,v=k["__core-js_shared__"],U=(E=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",C=m.toString,_=P.hasOwnProperty,w=P.toString,p=RegExp("^"+C.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=H.splice,A=X(k,"Map"),I=X(Object,"create");function M(_e){var Pe=-1,He=_e?_e.length:0;for(this.clear();++Pe<He;){var pe=_e[Pe];this.set(pe[0],pe[1])}}function F(_e){var Pe=-1,He=_e?_e.length:0;for(this.clear();++Pe<He;){var pe=_e[Pe];this.set(pe[0],pe[1])}}function z(_e){var Pe=-1,He=_e?_e.length:0;for(this.clear();++Pe<He;){var pe=_e[Pe];this.set(pe[0],pe[1])}}function G(_e,Pe){for(var He=_e.length;He--;)if(Se(_e[He][0],Pe))return He;return-1}function Z(_e){if(!xe(_e)||(Pe=_e,U&&U in Pe))return!1;var Pe,He=function(pe){var Ge=xe(pe)?w.call(pe):"";return Ge==y||Ge==b}(_e)||function(pe){var Ge=!1;if(pe!=null&&typeof pe.toString!="function")try{Ge=!!(pe+"")}catch{}return Ge}(_e)?p:T;return He.test(function(pe){if(pe!=null){try{return C.call(pe)}catch{}try{return pe+""}catch{}}return""}(_e))}function ce(_e,Pe){var He,pe,Ge=_e.__data__;return((pe=typeof(He=Pe))=="string"||pe=="number"||pe=="symbol"||pe=="boolean"?He!=="__proto__":He===null)?Ge[typeof Pe=="string"?"string":"hash"]:Ge.map}function X(_e,Pe){var He=function(pe,Ge){return pe?.[Ge]}(_e,Pe);return Z(He)?He:void 0}function Ee(_e,Pe){if(typeof _e!="function"||Pe&&typeof Pe!="function")throw new TypeError("Expected a function");var He=function(){var pe=arguments,Ge=Pe?Pe.apply(this,pe):pe[0],Te=He.cache;if(Te.has(Ge))return Te.get(Ge);var Ve=_e.apply(this,pe);return He.cache=Te.set(Ge,Ve),Ve};return He.cache=new(Ee.Cache||z),He}function Se(_e,Pe){return _e===Pe||_e!=_e&&Pe!=Pe}function xe(_e){var Pe=typeof _e;return!!_e&&(Pe=="object"||Pe=="function")}M.prototype.clear=function(){this.__data__=I?I(null):{}},M.prototype.delete=function(_e){return this.has(_e)&&delete this.__data__[_e]},M.prototype.get=function(_e){var Pe=this.__data__;if(I){var He=Pe[_e];return He===S?void 0:He}return _.call(Pe,_e)?Pe[_e]:void 0},M.prototype.has=function(_e){var Pe=this.__data__;return I?Pe[_e]!==void 0:_.call(Pe,_e)},M.prototype.set=function(_e,Pe){return this.__data__[_e]=I&&Pe===void 0?S:Pe,this},F.prototype.clear=function(){this.__data__=[]},F.prototype.delete=function(_e){var Pe=this.__data__,He=G(Pe,_e);return!(He<0)&&(He==Pe.length-1?Pe.pop():x.call(Pe,He,1),!0)},F.prototype.get=function(_e){var Pe=this.__data__,He=G(Pe,_e);return He<0?void 0:Pe[He][1]},F.prototype.has=function(_e){return G(this.__data__,_e)>-1},F.prototype.set=function(_e,Pe){var He=this.__data__,pe=G(He,_e);return pe<0?He.push([_e,Pe]):He[pe][1]=Pe,this},z.prototype.clear=function(){this.__data__={hash:new M,map:new(A||F),string:new M}},z.prototype.delete=function(_e){return ce(this,_e).delete(_e)},z.prototype.get=function(_e){return ce(this,_e).get(_e)},z.prototype.has=function(_e){return ce(this,_e).has(_e)},z.prototype.set=function(_e,Pe){return ce(this,_e).set(_e,Pe),this},Ee.Cache=z,j.exports=Ee},7800:(j,R,d)=>{d.d(R,{A:()=>y});var S=d(3145);function y(b,T){if(b){if(typeof b=="string")return(0,S.A)(b,T);var f={}.toString.call(b).slice(8,-1);return f==="Object"&&b.constructor&&(f=b.constructor.name),f==="Map"||f==="Set"?Array.from(b):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?(0,S.A)(b,T):void 0}}},7833:(j,R,d)=>{R.formatArgs=function(y){if(y[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+y[0]+(this.useColors?"%c ":" ")+"+"+j.exports.humanize(this.diff),!this.useColors)return;const b="color: "+this.color;y.splice(1,0,b,"color: inherit");let T=0,f=0;y[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(T++,h==="%c"&&(f=T))}),y.splice(f,0,b)},R.save=function(y){try{y?R.storage.setItem("debug",y):R.storage.removeItem("debug")}catch{}},R.load=function(){let y;try{y=R.storage.getItem("debug")||R.storage.getItem("DEBUG")}catch{}return!y&&typeof process<"u"&&"env"in process&&(y=i.DEBUG),y},R.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let y;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(y=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(y[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},R.storage=function(){try{return localStorage}catch{}}(),R.destroy=(()=>{let y=!1;return()=>{y||(y=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),R.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],R.log=console.debug||console.log||(()=>{}),j.exports=d(736)(R);const{formatters:S}=j.exports;S.j=function(y){try{return JSON.stringify(y)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}}},8046:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.validateRtpCapabilities=function(p){if(typeof p!="object")throw new TypeError("caps is not an object");if(p.codecs&&!Array.isArray(p.codecs))throw new TypeError("caps.codecs is not an array");p.codecs||(p.codecs=[]);for(const x of p.codecs)k(x);if(p.headerExtensions&&!Array.isArray(p.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");p.headerExtensions||(p.headerExtensions=[]);for(const x of p.headerExtensions)H(x)},R.validateRtpParameters=h,R.validateSctpStreamParameters=function(p){if(typeof p!="object")throw new TypeError("params is not an object");if(typeof p.streamId!="number")throw new TypeError("missing params.streamId");let x=!1;if(typeof p.ordered=="boolean"?x=!0:p.ordered=!0,p.maxPacketLifeTime&&typeof p.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(p.maxRetransmits&&typeof p.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(p.maxPacketLifeTime&&p.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(x&&p.ordered&&(p.maxPacketLifeTime||p.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(x||!p.maxPacketLifeTime&&!p.maxRetransmits||(p.ordered=!1),p.label&&typeof p.label!="string")throw new TypeError("invalid params.label");if(p.protocol&&typeof p.protocol!="string")throw new TypeError("invalid params.protocol")},R.validateSctpCapabilities=function(p){if(typeof p!="object")throw new TypeError("caps is not an object");if(!p.numStreams||typeof p.numStreams!="object")throw new TypeError("missing caps.numStreams");(function(x){if(typeof x!="object")throw new TypeError("numStreams is not an object");if(typeof x.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof x.MIS!="number")throw new TypeError("missing numStreams.MIS")})(p.numStreams)},R.getExtendedRtpCapabilities=function(p,x){const A={codecs:[],headerExtensions:[]};for(const I of x.codecs??[]){if(U(I))continue;const M=(p.codecs??[]).find(z=>C(z,I,{strict:!0,modify:!0}));if(!M)continue;const F={mimeType:M.mimeType,kind:M.kind,clockRate:M.clockRate,channels:M.channels,localPayloadType:M.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:I.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:M.parameters,remoteParameters:I.parameters,rtcpFeedback:w(M,I)};A.codecs.push(F)}for(const I of A.codecs){const M=p.codecs.find(z=>U(z)&&z.parameters.apt===I.localPayloadType),F=x.codecs.find(z=>U(z)&&z.parameters.apt===I.remotePayloadType);M&&F&&(I.localRtxPayloadType=M.preferredPayloadType,I.remoteRtxPayloadType=F.preferredPayloadType)}for(const I of x.headerExtensions){const M=p.headerExtensions.find(z=>_(z,I));if(!M)continue;const F={kind:I.kind,uri:I.uri,sendId:M.preferredId,recvId:I.preferredId,encrypt:M.preferredEncrypt,direction:"sendrecv"};switch(I.direction){case"sendrecv":F.direction="sendrecv";break;case"recvonly":F.direction="sendonly";break;case"sendonly":F.direction="recvonly";break;case"inactive":F.direction="inactive"}A.headerExtensions.push(F)}return A},R.getRecvRtpCapabilities=function(p){const x={codecs:[],headerExtensions:[]};for(const A of p.codecs){const I={mimeType:A.mimeType,kind:A.kind,preferredPayloadType:A.remotePayloadType,clockRate:A.clockRate,channels:A.channels,parameters:A.localParameters,rtcpFeedback:A.rtcpFeedback};if(x.codecs.push(I),!A.remoteRtxPayloadType)continue;const M={mimeType:`${A.kind}/rtx`,kind:A.kind,preferredPayloadType:A.remoteRtxPayloadType,clockRate:A.clockRate,parameters:{apt:A.remotePayloadType},rtcpFeedback:[]};x.codecs.push(M)}for(const A of p.headerExtensions){if(A.direction!=="sendrecv"&&A.direction!=="recvonly")continue;const I={kind:A.kind,uri:A.uri,preferredId:A.recvId,preferredEncrypt:A.encrypt,direction:A.direction};x.headerExtensions.push(I)}return x},R.getSendingRtpParameters=function(p,x){const A={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const I of x.codecs){if(I.kind!==p)continue;const M={mimeType:I.mimeType,payloadType:I.localPayloadType,clockRate:I.clockRate,channels:I.channels,parameters:I.localParameters,rtcpFeedback:I.rtcpFeedback};if(A.codecs.push(M),I.localRtxPayloadType){const F={mimeType:`${I.kind}/rtx`,payloadType:I.localRtxPayloadType,clockRate:I.clockRate,parameters:{apt:I.localPayloadType},rtcpFeedback:[]};A.codecs.push(F)}}for(const I of x.headerExtensions){if(I.kind&&I.kind!==p||I.direction!=="sendrecv"&&I.direction!=="sendonly")continue;const M={uri:I.uri,id:I.sendId,encrypt:I.encrypt,parameters:{}};A.headerExtensions.push(M)}return A},R.getSendingRemoteRtpParameters=function(p,x){const A={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const I of x.codecs){if(I.kind!==p)continue;const M={mimeType:I.mimeType,payloadType:I.localPayloadType,clockRate:I.clockRate,channels:I.channels,parameters:I.remoteParameters,rtcpFeedback:I.rtcpFeedback};if(A.codecs.push(M),I.localRtxPayloadType){const F={mimeType:`${I.kind}/rtx`,payloadType:I.localRtxPayloadType,clockRate:I.clockRate,parameters:{apt:I.localPayloadType},rtcpFeedback:[]};A.codecs.push(F)}}for(const I of x.headerExtensions){if(I.kind&&I.kind!==p||I.direction!=="sendrecv"&&I.direction!=="sendonly")continue;const M={uri:I.uri,id:I.sendId,encrypt:I.encrypt,parameters:{}};A.headerExtensions.push(M)}if(A.headerExtensions.some(I=>I.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const I of A.codecs)I.rtcpFeedback=(I.rtcpFeedback??[]).filter(M=>M.type!=="goog-remb");else if(A.headerExtensions.some(I=>I.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const I of A.codecs)I.rtcpFeedback=(I.rtcpFeedback??[]).filter(M=>M.type!=="transport-cc");else for(const I of A.codecs)I.rtcpFeedback=(I.rtcpFeedback??[]).filter(M=>M.type!=="transport-cc"&&M.type!=="goog-remb");return A},R.reduceCodecs=function(p,x){const A=[];if(x){for(let I=0;I<p.length;++I)if(C(p[I],x,{strict:!0})){A.push(p[I]),U(p[I+1])&&A.push(p[I+1]);break}if(A.length===0)throw new TypeError("no matching codec found")}else A.push(p[0]),U(p[1])&&A.push(p[1]);return A},R.generateProbatorRtpParameters=function(p){h(p=y.clone(p));const x={mid:b,codecs:[],headerExtensions:[],encodings:[{ssrc:T}],rtcp:{cname:"probator"}};return x.codecs.push(p.codecs[0]),x.codecs[0].payloadType=f,x.headerExtensions=p.headerExtensions,x},R.canSend=function(p,x){return x.codecs.some(A=>A.kind===p)},R.canReceive=function(p,x){if(h(p),p.codecs.length===0)return!1;const A=p.codecs[0];return x.codecs.some(I=>I.remotePayloadType===A.payloadType)};const S=d(3200),y=d(1765),b="probator",T=1234,f=127;function h(p){if(typeof p!="object")throw new TypeError("params is not an object");if(p.mid&&typeof p.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(p.codecs))throw new TypeError("missing params.codecs");for(const x of p.codecs)m(x);if(p.headerExtensions&&!Array.isArray(p.headerExtensions))throw new TypeError("params.headerExtensions is not an array");p.headerExtensions||(p.headerExtensions=[]);for(const x of p.headerExtensions)P(x);if(p.encodings&&!Array.isArray(p.encodings))throw new TypeError("params.encodings is not an array");p.encodings||(p.encodings=[]);for(const x of p.encodings)v(x);if(p.rtcp&&typeof p.rtcp!="object")throw new TypeError("params.rtcp is not an object");p.rtcp||(p.rtcp={}),function(x){if(typeof x!="object")throw new TypeError("rtcp is not an object");if(x.cname&&typeof x.cname!="string")throw new TypeError("invalid rtcp.cname");x.reducedSize&&typeof x.reducedSize=="boolean"||(x.reducedSize=!0)}(p.rtcp)}function k(p){const x=new RegExp("^(audio|video)/(.+)","i");if(typeof p!="object")throw new TypeError("codec is not an object");if(!p.mimeType||typeof p.mimeType!="string")throw new TypeError("missing codec.mimeType");const A=x.exec(p.mimeType);if(!A)throw new TypeError("invalid codec.mimeType");if(p.kind=A[1].toLowerCase(),p.preferredPayloadType&&typeof p.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof p.clockRate!="number")throw new TypeError("missing codec.clockRate");p.kind==="audio"?typeof p.channels!="number"&&(p.channels=1):delete p.channels,p.parameters&&typeof p.parameters=="object"||(p.parameters={});for(const I of Object.keys(p.parameters)){let M=p.parameters[I];if(M===void 0&&(p.parameters[I]="",M=""),typeof M!="string"&&typeof M!="number")throw new TypeError(`invalid codec parameter [key:${I}s, value:${M}]`);if(I==="apt"&&typeof M!="number")throw new TypeError("invalid codec apt parameter")}p.rtcpFeedback&&Array.isArray(p.rtcpFeedback)||(p.rtcpFeedback=[]);for(const I of p.rtcpFeedback)E(I)}function E(p){if(typeof p!="object")throw new TypeError("fb is not an object");if(!p.type||typeof p.type!="string")throw new TypeError("missing fb.type");p.parameter&&typeof p.parameter=="string"||(p.parameter="")}function H(p){if(typeof p!="object")throw new TypeError("ext is not an object");if(p.kind!=="audio"&&p.kind!=="video")throw new TypeError("invalid ext.kind");if(!p.uri||typeof p.uri!="string")throw new TypeError("missing ext.uri");if(typeof p.preferredId!="number")throw new TypeError("missing ext.preferredId");if(p.preferredEncrypt&&typeof p.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(p.preferredEncrypt||(p.preferredEncrypt=!1),p.direction&&typeof p.direction!="string")throw new TypeError("invalid ext.direction");p.direction||(p.direction="sendrecv")}function m(p){const x=new RegExp("^(audio|video)/(.+)","i");if(typeof p!="object")throw new TypeError("codec is not an object");if(!p.mimeType||typeof p.mimeType!="string")throw new TypeError("missing codec.mimeType");const A=x.exec(p.mimeType);if(!A)throw new TypeError("invalid codec.mimeType");if(typeof p.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof p.clockRate!="number")throw new TypeError("missing codec.clockRate");A[1].toLowerCase()==="audio"?typeof p.channels!="number"&&(p.channels=1):delete p.channels,p.parameters&&typeof p.parameters=="object"||(p.parameters={});for(const I of Object.keys(p.parameters)){let M=p.parameters[I];if(M===void 0&&(p.parameters[I]="",M=""),typeof M!="string"&&typeof M!="number")throw new TypeError(`invalid codec parameter [key:${I}s, value:${M}]`);if(I==="apt"&&typeof M!="number")throw new TypeError("invalid codec apt parameter")}p.rtcpFeedback&&Array.isArray(p.rtcpFeedback)||(p.rtcpFeedback=[]);for(const I of p.rtcpFeedback)E(I)}function P(p){if(typeof p!="object")throw new TypeError("ext is not an object");if(!p.uri||typeof p.uri!="string")throw new TypeError("missing ext.uri");if(typeof p.id!="number")throw new TypeError("missing ext.id");if(p.encrypt&&typeof p.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");p.encrypt||(p.encrypt=!1),p.parameters&&typeof p.parameters=="object"||(p.parameters={});for(const x of Object.keys(p.parameters)){let A=p.parameters[x];if(A===void 0&&(p.parameters[x]="",A=""),typeof A!="string"&&typeof A!="number")throw new TypeError("invalid header extension parameter")}}function v(p){if(typeof p!="object")throw new TypeError("encoding is not an object");if(p.ssrc&&typeof p.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(p.rid&&typeof p.rid!="string")throw new TypeError("invalid encoding.rid");if(p.rtx&&typeof p.rtx!="object")throw new TypeError("invalid encoding.rtx");if(p.rtx&&typeof p.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(p.dtx&&typeof p.dtx=="boolean"||(p.dtx=!1),p.scalabilityMode&&typeof p.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function U(p){return!!p&&/.+\/rtx$/i.test(p.mimeType)}function C(p,x,{strict:A=!1,modify:I=!1}={}){const M=p.mimeType.toLowerCase();if(M!==x.mimeType.toLowerCase()||p.clockRate!==x.clockRate||p.channels!==x.channels)return!1;switch(M){case"video/h264":if(A){if((p.parameters["packetization-mode"]??0)!==(x.parameters["packetization-mode"]??0)||!S.isSameProfile(p.parameters,x.parameters))return!1;let F;try{F=S.generateProfileLevelIdStringForAnswer(p.parameters,x.parameters)}catch{return!1}I&&(F?(p.parameters["profile-level-id"]=F,x.parameters["profile-level-id"]=F):(delete p.parameters["profile-level-id"],delete x.parameters["profile-level-id"]))}break;case"video/vp9":if(A&&(p.parameters["profile-id"]??0)!==(x.parameters["profile-id"]??0))return!1}return!0}function _(p,x){return(!p.kind||!x.kind||p.kind===x.kind)&&p.uri===x.uri}function w(p,x){const A=[];for(const I of p.rtcpFeedback??[]){const M=(x.rtcpFeedback??[]).find(F=>F.type===I.type&&(F.parameter===I.parameter||!F.parameter&&!I.parameter));M&&A.push(M)}return A}},8056:function(j,R,d){var S;j.exports=(S=d(9021),function(){var y=S,b=y.lib,T=b.WordArray,f=b.Hasher,h=y.algo,k=T.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),E=T.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),H=T.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=T.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),P=T.create([0,1518500249,1859775393,2400959708,2840853838]),v=T.create([1352829926,1548603684,1836072691,2053994217,0]),U=h.RIPEMD160=f.extend({_doReset:function(){this._hash=T.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(I,M){for(var F=0;F<16;F++){var z=M+F,G=I[z];I[z]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8)}var Z,ce,X,Ee,Se,xe,_e,Pe,He,pe,Ge,Te=this._hash.words,Ve=P.words,qe=v.words,nt=k.words,Bt=E.words,Pr=H.words,Ur=m.words;for(xe=Z=Te[0],_e=ce=Te[1],Pe=X=Te[2],He=Ee=Te[3],pe=Se=Te[4],F=0;F<80;F+=1)Ge=Z+I[M+nt[F]]|0,Ge+=F<16?C(ce,X,Ee)+Ve[0]:F<32?_(ce,X,Ee)+Ve[1]:F<48?w(ce,X,Ee)+Ve[2]:F<64?p(ce,X,Ee)+Ve[3]:x(ce,X,Ee)+Ve[4],Ge=(Ge=A(Ge|=0,Pr[F]))+Se|0,Z=Se,Se=Ee,Ee=A(X,10),X=ce,ce=Ge,Ge=xe+I[M+Bt[F]]|0,Ge+=F<16?x(_e,Pe,He)+qe[0]:F<32?p(_e,Pe,He)+qe[1]:F<48?w(_e,Pe,He)+qe[2]:F<64?_(_e,Pe,He)+qe[3]:C(_e,Pe,He)+qe[4],Ge=(Ge=A(Ge|=0,Ur[F]))+pe|0,xe=pe,pe=He,He=A(Pe,10),Pe=_e,_e=Ge;Ge=Te[1]+X+He|0,Te[1]=Te[2]+Ee+pe|0,Te[2]=Te[3]+Se+xe|0,Te[3]=Te[4]+Z+_e|0,Te[4]=Te[0]+ce+Pe|0,Te[0]=Ge},_doFinalize:function(){var I=this._data,M=I.words,F=8*this._nDataBytes,z=8*I.sigBytes;M[z>>>5]|=128<<24-z%32,M[14+(z+64>>>9<<4)]=16711935&(F<<8|F>>>24)|4278255360&(F<<24|F>>>8),I.sigBytes=4*(M.length+1),this._process();for(var G=this._hash,Z=G.words,ce=0;ce<5;ce++){var X=Z[ce];Z[ce]=16711935&(X<<8|X>>>24)|4278255360&(X<<24|X>>>8)}return G},clone:function(){var I=f.clone.call(this);return I._hash=this._hash.clone(),I}});function C(I,M,F){return I^M^F}function _(I,M,F){return I&M|~I&F}function w(I,M,F){return(I|~M)^F}function p(I,M,F){return I&F|M&~F}function x(I,M,F){return I^(M|~F)}function A(I,M){return I<<M|I>>>32-M}y.RIPEMD160=f._createHelper(U),y.HmacRIPEMD160=f._createHmacHelper(U)}(),S.RIPEMD160)},8057:function(j,R,d){var S=this&&this.__createBinding||(Object.create?function(b,T,f,h){h===void 0&&(h=f);var k=Object.getOwnPropertyDescriptor(T,f);k&&!("get"in k?!T.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return T[f]}}),Object.defineProperty(b,h,k)}:function(b,T,f,h){h===void 0&&(h=f),b[h]=T[f]}),y=this&&this.__exportStar||function(b,T){for(var f in b)f==="default"||Object.prototype.hasOwnProperty.call(T,f)||S(T,b,f)};Object.defineProperty(R,"__esModule",{value:!0}),y(d(6004),R),y(d(5601),R),y(d(9792),R),y(d(3518),R),y(d(7504),R),y(d(9166),R),y(d(5370),R),y(d(4160),R),y(d(521),R),y(d(4893),R)},8124:function(j,R,d){var S;j.exports=(S=d(9021),d(7165),S.pad.NoPadding={pad:function(){},unpad:function(){}},S.pad.NoPadding)},8155:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Chrome67=void 0;const S=d(7363),y=d(2994),b=d(1765),T=d(8046),f=d(5544),h=d(4496),k=d(521),E=d(1305),H=new y.Logger("Chrome67"),m={OS:1024,MIS:1024};class P extends k.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdRtpSender=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new P}constructor(){super()}get name(){return"Chrome67"}close(){if(H.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){H.debug("getNativeRtpCapabilities()");const U=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const C=await U.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{U.close()}catch{}const _=S.parse(C.sdp);return f.extractRtpCapabilities({sdpObject:_})}catch(C){try{U.close()}catch{}throw C}}async getNativeSctpCapabilities(){return H.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:U,iceParameters:C,iceCandidates:_,dtlsParameters:w,sctpParameters:p,iceServers:x,iceTransportPolicy:A,additionalSettings:I,proprietaryConstraints:M,extendedRtpCapabilities:F}){H.debug("run()"),this._direction=U,this._remoteSdp=new E.RemoteSdp({iceParameters:C,iceCandidates:_,dtlsParameters:w,sctpParameters:p,planB:!0}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",F),video:T.getSendingRtpParameters("video",F)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",F),video:T.getSendingRemoteRtpParameters("video",F)},w.role&&w.role!=="auto"&&(this._forcedLocalDtlsRole=w.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:x??[],iceTransportPolicy:A??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...I},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",z=>{this.emit("@icecandidateerror",z)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(H.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(U){H.debug("updateIceServers()");const C=this._pc.getConfiguration();C.iceServers=U,this._pc.setConfiguration(C)}async restartIce(U){if(H.debug("restartIce()"),this._remoteSdp.updateIceParameters(U),this._transportReady)if(this._direction==="send"){const C=await this._pc.createOffer({iceRestart:!0});H.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const _={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}else{const C={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const _=await this._pc.createAnswer();H.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",_),await this._pc.setLocalDescription(_)}}async getTransportStats(){return this._pc.getStats()}async send({track:U,encodings:C,codecOptions:_,codec:w}){this.assertSendDirection(),H.debug("send() [kind:%s, track.id:%s]",U.kind,U.id),w&&H.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(U),this._pc.addTrack(U,this._sendStream);let p,x=await this._pc.createOffer(),A=S.parse(x.sdp);A.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const I=b.clone(this._sendingRtpParametersByKind[U.kind]);I.codecs=T.reduceCodecs(I.codecs);const M=b.clone(this._sendingRemoteRtpParametersByKind[U.kind]);if(M.codecs=T.reduceCodecs(M.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),U.kind==="video"&&C&&C.length>1&&(H.debug("send() | enabling simulcast"),A=S.parse(x.sdp),p=A.media.find(Z=>Z.type==="video"),h.addLegacySimulcast({offerMediaObject:p,track:U,numStreams:C.length}),x={type:"offer",sdp:S.write(A)}),H.debug("send() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x),A=S.parse(this._pc.localDescription.sdp),p=A.media.find(Z=>Z.type===U.kind),I.rtcp.cname=f.getCname({offerMediaObject:p}),I.encodings=h.getRtpEncodings({offerMediaObject:p,track:U}),C)for(let Z=0;Z<I.encodings.length;++Z)C[Z]&&Object.assign(I.encodings[Z],C[Z]);if(I.encodings.length>1&&I.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Z of I.encodings)Z.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:I,answerRtpParameters:M,codecOptions:_});const F={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("send() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F);const z=String(this._nextSendLocalId);this._nextSendLocalId++;const G=this._pc.getSenders().find(Z=>Z.track===U);return this._mapSendLocalIdRtpSender.set(z,G),{localId:z,rtpParameters:I,rtpSender:G}}async stopSending(U){this.assertSendDirection(),H.debug("stopSending() [localId:%s]",U);const C=this._mapSendLocalIdRtpSender.get(U);if(!C)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(C),C.track&&this._sendStream.removeTrack(C.track),this._mapSendLocalIdRtpSender.delete(U);const _=await this._pc.createOffer();H.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",_);try{await this._pc.setLocalDescription(_)}catch(p){if(this._sendStream.getTracks().length===0)return void H.warn("stopSending() | ignoring expected error due no sending tracks: %s",p.toString());throw p}if(this._pc.signalingState==="stable")return;const w={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w)}async pauseSending(U){}async resumeSending(U){}async replaceTrack(U,C){this.assertSendDirection(),C?H.debug("replaceTrack() [localId:%s, track.id:%s]",U,C.id):H.debug("replaceTrack() [localId:%s, no track]",U);const _=this._mapSendLocalIdRtpSender.get(U);if(!_)throw new Error("associated RTCRtpSender not found");const w=_.track;await _.replaceTrack(C),w&&this._sendStream.removeTrack(w),C&&this._sendStream.addTrack(C)}async setMaxSpatialLayer(U,C){this.assertSendDirection(),H.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",U,C);const _=this._mapSendLocalIdRtpSender.get(U);if(!_)throw new Error("associated RTCRtpSender not found");const w=_.getParameters();w.encodings.forEach((p,x)=>{p.active=x<=C}),await _.setParameters(w)}async setRtpEncodingParameters(U,C){this.assertSendDirection(),H.debug("setRtpEncodingParameters() [localId:%s, params:%o]",U,C);const _=this._mapSendLocalIdRtpSender.get(U);if(!_)throw new Error("associated RTCRtpSender not found");const w=_.getParameters();w.encodings.forEach((p,x)=>{w.encodings[x]={...p,...C}}),await _.setParameters(w)}async getSenderStats(U){this.assertSendDirection();const C=this._mapSendLocalIdRtpSender.get(U);if(!C)throw new Error("associated RTCRtpSender not found");return C.getStats()}async sendDataChannel({ordered:U,maxPacketLifeTime:C,maxRetransmits:_,label:w,protocol:p}){this.assertSendDirection();const x={negotiated:!0,id:this._nextSendSctpStreamId,ordered:U,maxPacketLifeTime:C,maxRetransmitTime:C,maxRetransmits:_,protocol:p};H.debug("sendDataChannel() [options:%o]",x);const A=this._pc.createDataChannel(w,x);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){const I=await this._pc.createOffer(),M=S.parse(I.sdp),F=M.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),H.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I),this._remoteSdp.sendSctpAssociation({offerMediaObject:F});const z={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:A,sctpStreamParameters:{streamId:x.id,ordered:x.ordered,maxPacketLifeTime:x.maxPacketLifeTime,maxRetransmits:x.maxRetransmits}}}async receive(U){this.assertRecvDirection();const C=[];for(const x of U){const{trackId:A,kind:I,rtpParameters:M,streamId:F}=x;H.debug("receive() [trackId:%s, kind:%s]",A,I);const z=I;this._remoteSdp.receive({mid:z,kind:I,offerRtpParameters:M,streamId:F??M.rtcp.cname,trackId:A})}const _={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);let w=await this._pc.createAnswer();const p=S.parse(w.sdp);for(const x of U){const{kind:A,rtpParameters:I}=x,M=A,F=p.media.find(z=>String(z.mid)===M);f.applyCodecParameters({offerRtpParameters:I,answerMediaObject:F})}w={type:"answer",sdp:S.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),H.debug("receive() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w);for(const x of U){const{kind:A,trackId:I,rtpParameters:M}=x,F=I,z=A,G=this._pc.getReceivers().find(Z=>Z.track&&Z.track.id===F);if(!G)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(F,{mid:z,rtpParameters:M,rtpReceiver:G}),C.push({localId:F,track:G.track,rtpReceiver:G})}return C}async stopReceiving(U){this.assertRecvDirection();for(const w of U){H.debug("stopReceiving() [localId:%s]",w);const{mid:p,rtpParameters:x}=this._mapRecvLocalIdInfo.get(w)??{};this._mapRecvLocalIdInfo.delete(w),this._remoteSdp.planBStopReceiving({mid:p,offerRtpParameters:x})}const C={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const _=await this._pc.createAnswer();H.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",_),await this._pc.setLocalDescription(_)}async pauseReceiving(U){}async resumeReceiving(U){}async getReceiverStats(U){this.assertRecvDirection();const{rtpReceiver:C}=this._mapRecvLocalIdInfo.get(U)??{};if(!C)throw new Error("associated RTCRtpReceiver not found");return C.getStats()}async receiveDataChannel({sctpStreamParameters:U,label:C,protocol:_}){this.assertRecvDirection();const{streamId:w,ordered:p,maxPacketLifeTime:x,maxRetransmits:A}=U,I={negotiated:!0,id:w,ordered:p,maxPacketLifeTime:x,maxRetransmitTime:x,maxRetransmits:A,protocol:_};H.debug("receiveDataChannel() [options:%o]",I);const M=this._pc.createDataChannel(C,I);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const F={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",F),await this._pc.setRemoteDescription(F);const z=await this._pc.createAnswer();if(!this._transportReady){const G=S.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G})}H.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:U,localSdpObject:C}){C||(C=S.parse(this._pc.localDescription.sdp));const _=f.extractDtlsParameters({sdpObject:C});_.role=U,this._remoteSdp.updateDtlsRole(U==="client"?"server":"client"),await new Promise((w,p)=>{this.safeEmit("@connect",{dtlsParameters:_},w,p)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.Chrome67=P},8274:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Logger=void 0;const S=d(7833),y="awaitqueue";R.Logger=class{_debug;_warn;_error;constructor(b){b?(this._debug=S(`${y}:${b}`),this._warn=S(`${y}:WARN:${b}`),this._error=S(`${y}:ERROR:${b}`)):(this._debug=S(y),this._warn=S(`${y}:WARN`),this._error=S(`${y}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},8278:(j,R,d)=>{d.d(R,{Ag:()=>T,Wm:()=>f,sn:()=>h,tr:()=>E});var S=d(467),y=d(4756),b=d.n(y);d(1806);function T(){return window.RTCRtpSender!==void 0&&window.RTCRtpSender.prototype.createEncodedStreams!==void 0||f()}function f(){return window.RTCRtpScriptTransform!==void 0}function h(m){return k.apply(this,arguments)}function k(){return(k=(0,S.A)(b().mark(function m(P){var v,U;return b().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return v=new TextEncoder,C.next=1,crypto.subtle.importKey("raw",v.encode(P),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 1:return U=C.sent,C.abrupt("return",U);case 2:case"end":return C.stop()}},m)}))).apply(this,arguments)}function E(m){return H.apply(this,arguments)}function H(){return(H=(0,S.A)(b().mark(function m(P){var v;return b().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=1,crypto.subtle.importKey("raw",P,"HKDF",!1,["deriveBits","deriveKey"]);case 1:return v=U.sent,U.abrupt("return",v);case 2:case"end":return U.stop()}},m)}))).apply(this,arguments)}},8286:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0});const S=d(3779),y=d(2291),b=d(6011);R.default=function(T,f,h){if(S.default.randomUUID&&!f&&!T)return S.default.randomUUID();const k=(T=T||{}).random??T.rng?.()??(0,y.default)();if(k.length<16)throw new Error("Random bytes length must be >= 16");if(k[6]=15&k[6]|64,k[8]=63&k[8]|128,f){if((h=h||0)<0||h+16>f.length)throw new RangeError(`UUID byte range ${h}:${h+15} is out of buffer bounds`);for(let E=0;E<16;++E)f[h+E]=k[E];return f}return(0,b.unsafeStringify)(k)}},8454:function(j,R,d){var S,y;j.exports=(y=d(9021),d(7165),y.mode.ECB=((S=y.lib.BlockCipherMode.extend()).Encryptor=S.extend({processBlock:function(b,T){this._cipher.encryptBlock(b,T)}}),S.Decryptor=S.extend({processBlock:function(b,T){this._cipher.decryptBlock(b,T)}}),S),y.mode.ECB)},8624:(j,R,d)=>{d.r(R),d.d(R,{DOMException:()=>A,Headers:()=>E,Request:()=>_,Response:()=>p,fetch:()=>I});var S=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||d.g!==void 0&&d.g||{},y={searchParams:"URLSearchParams"in S,iterable:"Symbol"in S&&"iterator"in Symbol,blob:"FileReader"in S&&"Blob"in S&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in S,arrayBuffer:"ArrayBuffer"in S};if(y.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],T=ArrayBuffer.isView||function(M){return M&&b.indexOf(Object.prototype.toString.call(M))>-1};function f(M){if(typeof M!="string"&&(M=String(M)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(M)||M==="")throw new TypeError('Invalid character in header field name: "'+M+'"');return M.toLowerCase()}function h(M){return typeof M!="string"&&(M=String(M)),M}function k(M){var F={next:function(){var z=M.shift();return{done:z===void 0,value:z}}};return y.iterable&&(F[Symbol.iterator]=function(){return F}),F}function E(M){this.map={},M instanceof E?M.forEach(function(F,z){this.append(z,F)},this):Array.isArray(M)?M.forEach(function(F){if(F.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+F.length);this.append(F[0],F[1])},this):M&&Object.getOwnPropertyNames(M).forEach(function(F){this.append(F,M[F])},this)}function H(M){if(!M._noBody)return M.bodyUsed?Promise.reject(new TypeError("Already read")):void(M.bodyUsed=!0)}function m(M){return new Promise(function(F,z){M.onload=function(){F(M.result)},M.onerror=function(){z(M.error)}})}function P(M){var F=new FileReader,z=m(F);return F.readAsArrayBuffer(M),z}function v(M){if(M.slice)return M.slice(0);var F=new Uint8Array(M.byteLength);return F.set(new Uint8Array(M)),F.buffer}function U(){return this.bodyUsed=!1,this._initBody=function(M){var F;this.bodyUsed=this.bodyUsed,this._bodyInit=M,M?typeof M=="string"?this._bodyText=M:y.blob&&Blob.prototype.isPrototypeOf(M)?this._bodyBlob=M:y.formData&&FormData.prototype.isPrototypeOf(M)?this._bodyFormData=M:y.searchParams&&URLSearchParams.prototype.isPrototypeOf(M)?this._bodyText=M.toString():y.arrayBuffer&&y.blob&&(F=M)&&DataView.prototype.isPrototypeOf(F)?(this._bodyArrayBuffer=v(M.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(M)||T(M))?this._bodyArrayBuffer=v(M):this._bodyText=M=Object.prototype.toString.call(M):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof M=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(M)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var M=H(this);if(M)return M;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var M=H(this);return M||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(y.blob)return this.blob().then(P);throw new Error("could not read as ArrayBuffer")},this.text=function(){var M,F,z,G,Z,ce=H(this);if(ce)return ce;if(this._bodyBlob)return M=this._bodyBlob,F=new FileReader,z=m(F),G=/charset=([A-Za-z0-9_-]+)/.exec(M.type),Z=G?G[1]:"utf-8",F.readAsText(M,Z),z;if(this._bodyArrayBuffer)return Promise.resolve(function(X){for(var Ee=new Uint8Array(X),Se=new Array(Ee.length),xe=0;xe<Ee.length;xe++)Se[xe]=String.fromCharCode(Ee[xe]);return Se.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}E.prototype.append=function(M,F){M=f(M),F=h(F);var z=this.map[M];this.map[M]=z?z+", "+F:F},E.prototype.delete=function(M){delete this.map[f(M)]},E.prototype.get=function(M){return M=f(M),this.has(M)?this.map[M]:null},E.prototype.has=function(M){return this.map.hasOwnProperty(f(M))},E.prototype.set=function(M,F){this.map[f(M)]=h(F)},E.prototype.forEach=function(M,F){for(var z in this.map)this.map.hasOwnProperty(z)&&M.call(F,this.map[z],z,this)},E.prototype.keys=function(){var M=[];return this.forEach(function(F,z){M.push(z)}),k(M)},E.prototype.values=function(){var M=[];return this.forEach(function(F){M.push(F)}),k(M)},E.prototype.entries=function(){var M=[];return this.forEach(function(F,z){M.push([z,F])}),k(M)},y.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);var C=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function _(M,F){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var z,G,Z=(F=F||{}).body;if(M instanceof _){if(M.bodyUsed)throw new TypeError("Already read");this.url=M.url,this.credentials=M.credentials,F.headers||(this.headers=new E(M.headers)),this.method=M.method,this.mode=M.mode,this.signal=M.signal,Z||M._bodyInit==null||(Z=M._bodyInit,M.bodyUsed=!0)}else this.url=String(M);if(this.credentials=F.credentials||this.credentials||"same-origin",!F.headers&&this.headers||(this.headers=new E(F.headers)),this.method=(z=F.method||this.method||"GET",G=z.toUpperCase(),C.indexOf(G)>-1?G:z),this.mode=F.mode||this.mode||null,this.signal=F.signal||this.signal||function(){if("AbortController"in S)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Z)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Z),!(this.method!=="GET"&&this.method!=="HEAD"||F.cache!=="no-store"&&F.cache!=="no-cache")){var ce=/([?&])_=[^&]*/;ce.test(this.url)?this.url=this.url.replace(ce,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function w(M){var F=new FormData;return M.trim().split("&").forEach(function(z){if(z){var G=z.split("="),Z=G.shift().replace(/\+/g," "),ce=G.join("=").replace(/\+/g," ");F.append(decodeURIComponent(Z),decodeURIComponent(ce))}}),F}function p(M,F){if(!(this instanceof p))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(F||(F={}),this.type="default",this.status=F.status===void 0?200:F.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=F.statusText===void 0?"":""+F.statusText,this.headers=new E(F.headers),this.url=F.url||"",this._initBody(M)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},U.call(_.prototype),U.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},p.error=function(){var M=new p(null,{status:200,statusText:""});return M.ok=!1,M.status=0,M.type="error",M};var x=[301,302,303,307,308];p.redirect=function(M,F){if(x.indexOf(F)===-1)throw new RangeError("Invalid status code");return new p(null,{status:F,headers:{location:M}})};var A=S.DOMException;try{new A}catch{(A=function(F,z){this.message=F,this.name=z;var G=Error(F);this.stack=G.stack}).prototype=Object.create(Error.prototype),A.prototype.constructor=A}function I(M,F){return new Promise(function(z,G){var Z=new _(M,F);if(Z.signal&&Z.signal.aborted)return G(new A("Aborted","AbortError"));var ce=new XMLHttpRequest;function X(){ce.abort()}if(ce.onload=function(){var Se,xe,_e={statusText:ce.statusText,headers:(Se=ce.getAllResponseHeaders()||"",xe=new E,Se.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(He){return He.indexOf(`
`)===0?He.substr(1,He.length):He}).forEach(function(He){var pe=He.split(":"),Ge=pe.shift().trim();if(Ge){var Te=pe.join(":").trim();try{xe.append(Ge,Te)}catch(Ve){console.warn("Response "+Ve.message)}}}),xe)};Z.url.indexOf("file://")===0&&(ce.status<200||ce.status>599)?_e.status=200:_e.status=ce.status,_e.url="responseURL"in ce?ce.responseURL:_e.headers.get("X-Request-URL");var Pe="response"in ce?ce.response:ce.responseText;setTimeout(function(){z(new p(Pe,_e))},0)},ce.onerror=function(){setTimeout(function(){G(new TypeError("Network request failed"))},0)},ce.ontimeout=function(){setTimeout(function(){G(new TypeError("Network request timed out"))},0)},ce.onabort=function(){setTimeout(function(){G(new A("Aborted","AbortError"))},0)},ce.open(Z.method,function(Se){try{return Se===""&&S.location.href?S.location.href:Se}catch{return Se}}(Z.url),!0),Z.credentials==="include"?ce.withCredentials=!0:Z.credentials==="omit"&&(ce.withCredentials=!1),"responseType"in ce&&(y.blob?ce.responseType="blob":y.arrayBuffer&&(ce.responseType="arraybuffer")),F&&typeof F.headers=="object"&&!(F.headers instanceof E||S.Headers&&F.headers instanceof S.Headers)){var Ee=[];Object.getOwnPropertyNames(F.headers).forEach(function(Se){Ee.push(f(Se)),ce.setRequestHeader(Se,h(F.headers[Se]))}),Z.headers.forEach(function(Se,xe){Ee.indexOf(xe)===-1&&ce.setRequestHeader(xe,Se)})}else Z.headers.forEach(function(Se,xe){ce.setRequestHeader(xe,Se)});Z.signal&&(Z.signal.addEventListener("abort",X),ce.onreadystatechange=function(){ce.readyState===4&&Z.signal.removeEventListener("abort",X)}),ce.send(Z._bodyInit===void 0?null:Z._bodyInit)})}I.polyfill=!0,S.fetch||(S.fetch=I,S.Headers=E,S.Request=_,S.Response=p)},8633:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Edge11=void 0;const S=d(2994),y=d(4893),b=d(1765),T=d(8046),f=d(8751),h=d(521),k=new S.Logger("Edge11");class E extends h.HandlerInterface{_sendingRtpParametersByKind;_remoteIceParameters;_remoteIceCandidates;_remoteDtlsParameters;_iceGatherer;_iceTransport;_dtlsTransport;_rtpSenders=new Map;_rtpReceivers=new Map;_nextSendLocalId=0;_cname;_transportReady=!1;static createFactory(){return()=>new E}constructor(){super()}get name(){return"Edge11"}close(){k.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const m of this._rtpSenders.values())try{m.stop()}catch{}for(const m of this._rtpReceivers.values())try{m.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return k.debug("getNativeRtpCapabilities()"),f.getCapabilities()}async getNativeSctpCapabilities(){return k.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:m,iceParameters:P,iceCandidates:v,dtlsParameters:U,sctpParameters:C,iceServers:_,iceTransportPolicy:w,additionalSettings:p,proprietaryConstraints:x,extendedRtpCapabilities:A}){k.debug("run()"),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",A),video:T.getSendingRtpParameters("video",A)},this._remoteIceParameters=P,this._remoteIceCandidates=v,this._remoteDtlsParameters=U,this._cname=`CNAME-${b.generateRandomNumber()}`,this.setIceGatherer({iceServers:_,iceTransportPolicy:w}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(m){throw new y.UnsupportedError("not supported")}async restartIce(m){if(k.debug("restartIce()"),this._remoteIceParameters=m,this._transportReady){k.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,m,"controlling");for(const P of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(P);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:m,encodings:P,codecOptions:v,codec:U}){k.debug("send() [kind:%s, track.id:%s]",m.kind,m.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),k.debug("send() | calling new RTCRtpSender()");const C=new RTCRtpSender(m,this._dtlsTransport),_=b.clone(this._sendingRtpParametersByKind[m.kind]);_.codecs=T.reduceCodecs(_.codecs,U);const w=_.codecs.some(A=>/.+\/rtx$/i.test(A.mimeType));P||(P=[{}]);for(const A of P)A.ssrc=b.generateRandomNumber(),w&&(A.rtx={ssrc:b.generateRandomNumber()});_.encodings=P,_.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const p=f.mangleRtpParameters(_);k.debug("send() | calling rtpSender.send() [params:%o]",p),await C.send(p);const x=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(x,C),{localId:x,rtpParameters:_,rtpSender:C}}async stopSending(m){k.debug("stopSending() [localId:%s]",m);const P=this._rtpSenders.get(m);if(!P)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(m);try{k.debug("stopSending() | calling rtpSender.stop()"),P.stop()}catch(v){throw k.warn("stopSending() | rtpSender.stop() failed:%o",v),v}}async pauseSending(m){}async resumeSending(m){}async replaceTrack(m,P){P?k.debug("replaceTrack() [localId:%s, track.id:%s]",m,P.id):k.debug("replaceTrack() [localId:%s, no track]",m);const v=this._rtpSenders.get(m);if(!v)throw new Error("RTCRtpSender not found");v.setTrack(P)}async setMaxSpatialLayer(m,P){k.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",m,P);const v=this._rtpSenders.get(m);if(!v)throw new Error("RTCRtpSender not found");const U=v.getParameters();U.encodings.forEach((C,_)=>{C.active=_<=P}),await v.setParameters(U)}async setRtpEncodingParameters(m,P){k.debug("setRtpEncodingParameters() [localId:%s, params:%o]",m,P);const v=this._rtpSenders.get(m);if(!v)throw new Error("RTCRtpSender not found");const U=v.getParameters();U.encodings.forEach((C,_)=>{U.encodings[_]={...C,...P}}),await v.setParameters(U)}async getSenderStats(m){const P=this._rtpSenders.get(m);if(!P)throw new Error("RTCRtpSender not found");return P.getStats()}async sendDataChannel(m){throw new y.UnsupportedError("not implemented")}async receive(m){const P=[];for(const v of m){const{trackId:U,kind:C}=v;k.debug("receive() [trackId:%s, kind:%s]",U,C)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const v of m){const{trackId:U,kind:C,rtpParameters:_}=v;k.debug("receive() | calling new RTCRtpReceiver()");const w=new RTCRtpReceiver(this._dtlsTransport,C);w.addEventListener("error",A=>{k.error('rtpReceiver "error" event [event:%o]',A)});const p=f.mangleRtpParameters(_);k.debug("receive() | calling rtpReceiver.receive() [params:%o]",p),await w.receive(p);const x=U;this._rtpReceivers.set(x,w),P.push({localId:x,track:w.track,rtpReceiver:w})}return P}async stopReceiving(m){for(const P of m){k.debug("stopReceiving() [localId:%s]",P);const v=this._rtpReceivers.get(P);if(!v)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(P);try{k.debug("stopReceiving() | calling rtpReceiver.stop()"),v.stop()}catch(U){k.warn("stopReceiving() | rtpReceiver.stop() failed:%o",U)}}}async pauseReceiving(m){}async resumeReceiving(m){}async getReceiverStats(m){const P=this._rtpReceivers.get(m);if(!P)throw new Error("RTCRtpReceiver not found");return P.getStats()}async receiveDataChannel(m){throw new y.UnsupportedError("not implemented")}setIceGatherer({iceServers:m,iceTransportPolicy:P}){const v=new RTCIceGatherer({iceServers:m??[],gatherPolicy:P??"all"});v.addEventListener("error",U=>{k.error('iceGatherer "error" event [event:%o]',U)});try{v.gather()}catch(U){k.debug("setIceGatherer() | iceGatherer.gather() failed: %s",U.toString())}this._iceGatherer=v}setIceTransport(){const m=new RTCIceTransport(this._iceGatherer);m.addEventListener("statechange",()=>{switch(m.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),m.addEventListener("icestatechange",()=>{switch(m.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),m.addEventListener("candidatepairchange",P=>{k.debug('iceTransport "candidatepairchange" event [pair:%o]',P.pair)}),this._iceTransport=m}setDtlsTransport(){const m=new RTCDtlsTransport(this._iceTransport);m.addEventListener("statechange",()=>{k.debug('dtlsTransport "statechange" event [state:%s]',m.state)}),m.addEventListener("dtlsstatechange",()=>{k.debug('dtlsTransport "dtlsstatechange" event [state:%s]',m.state),m.state==="closed"&&this.emit("@connectionstatechange","closed")}),m.addEventListener("error",P=>{k.error('dtlsTransport "error" event [event:%o]',P)}),this._dtlsTransport=m}async setupTransport({localDtlsRole:m}){k.debug("setupTransport()");const P=this._dtlsTransport.getLocalParameters();P.role=m,await new Promise((v,U)=>{this.safeEmit("@connect",{dtlsParameters:P},v,U)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const v of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(v);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(v=>v.algorithm==="sha-256"||v.algorithm==="sha-384"||v.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}R.Edge11=E},8751:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.getCapabilities=function(){const y=RTCRtpReceiver.getCapabilities(),b=S.clone(y);for(const T of b.codecs??[]){if(T.channels=T.numChannels,delete T.numChannels,T.mimeType=T.mimeType??`${T.kind}/${T.name}`,T.parameters){const f=T.parameters;f.apt&&(f.apt=Number(f.apt)),f["packetization-mode"]&&(f["packetization-mode"]=Number(f["packetization-mode"]))}for(const f of T.rtcpFeedback??[])f.parameter||(f.parameter="")}return b},R.mangleRtpParameters=function(y){const b=S.clone(y);b.mid&&(b.muxId=b.mid,delete b.mid);for(const T of b.codecs)T.channels&&(T.numChannels=T.channels,delete T.channels),T.mimeType&&!T.name&&(T.name=T.mimeType.split("/")[1]),delete T.mimeType;return b};const S=d(1765)},8876:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.AwaitQueueRemovedTaskError=R.AwaitQueueStoppedError=R.AwaitQueue=void 0;var S=d(9275);Object.defineProperty(R,"AwaitQueue",{enumerable:!0,get:function(){return S.AwaitQueue}});var y=d(4253);Object.defineProperty(R,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return y.AwaitQueueStoppedError}}),Object.defineProperty(R,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return y.AwaitQueueRemovedTaskError}})},9021:function(j,R,d){var S;j.exports=(S=S||function(y,b){var T;if(typeof window<"u"&&window.crypto&&(T=window.crypto),typeof self<"u"&&self.crypto&&(T=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(T=globalThis.crypto),!T&&typeof window<"u"&&window.msCrypto&&(T=window.msCrypto),!T&&d.g!==void 0&&d.g.crypto&&(T=d.g.crypto),!T)try{T=d(477)}catch{}var f=function(){if(T){if(typeof T.getRandomValues=="function")try{return T.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof T.randomBytes=="function")try{return T.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function p(){}return function(x){var A;return p.prototype=x,A=new p,p.prototype=null,A}}(),k={},E=k.lib={},H=E.Base={extend:function(p){var x=h(this);return p&&x.mixIn(p),x.hasOwnProperty("init")&&this.init!==x.init||(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var p=this.extend();return p.init.apply(p,arguments),p},init:function(){},mixIn:function(p){for(var x in p)p.hasOwnProperty(x)&&(this[x]=p[x]);p.hasOwnProperty("toString")&&(this.toString=p.toString)},clone:function(){return this.init.prototype.extend(this)}},m=E.WordArray=H.extend({init:function(p,x){p=this.words=p||[],this.sigBytes=x!=b?x:4*p.length},toString:function(p){return(p||v).stringify(this)},concat:function(p){var x=this.words,A=p.words,I=this.sigBytes,M=p.sigBytes;if(this.clamp(),I%4)for(var F=0;F<M;F++){var z=A[F>>>2]>>>24-F%4*8&255;x[I+F>>>2]|=z<<24-(I+F)%4*8}else for(var G=0;G<M;G+=4)x[I+G>>>2]=A[G>>>2];return this.sigBytes+=M,this},clamp:function(){var p=this.words,x=this.sigBytes;p[x>>>2]&=4294967295<<32-x%4*8,p.length=y.ceil(x/4)},clone:function(){var p=H.clone.call(this);return p.words=this.words.slice(0),p},random:function(p){for(var x=[],A=0;A<p;A+=4)x.push(f());return new m.init(x,p)}}),P=k.enc={},v=P.Hex={stringify:function(p){for(var x=p.words,A=p.sigBytes,I=[],M=0;M<A;M++){var F=x[M>>>2]>>>24-M%4*8&255;I.push((F>>>4).toString(16)),I.push((15&F).toString(16))}return I.join("")},parse:function(p){for(var x=p.length,A=[],I=0;I<x;I+=2)A[I>>>3]|=parseInt(p.substr(I,2),16)<<24-I%8*4;return new m.init(A,x/2)}},U=P.Latin1={stringify:function(p){for(var x=p.words,A=p.sigBytes,I=[],M=0;M<A;M++){var F=x[M>>>2]>>>24-M%4*8&255;I.push(String.fromCharCode(F))}return I.join("")},parse:function(p){for(var x=p.length,A=[],I=0;I<x;I++)A[I>>>2]|=(255&p.charCodeAt(I))<<24-I%4*8;return new m.init(A,x)}},C=P.Utf8={stringify:function(p){try{return decodeURIComponent(escape(U.stringify(p)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(p){return U.parse(unescape(encodeURIComponent(p)))}},_=E.BufferedBlockAlgorithm=H.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(p){typeof p=="string"&&(p=C.parse(p)),this._data.concat(p),this._nDataBytes+=p.sigBytes},_process:function(p){var x,A=this._data,I=A.words,M=A.sigBytes,F=this.blockSize,z=M/(4*F),G=(z=p?y.ceil(z):y.max((0|z)-this._minBufferSize,0))*F,Z=y.min(4*G,M);if(G){for(var ce=0;ce<G;ce+=F)this._doProcessBlock(I,ce);x=I.splice(0,G),A.sigBytes-=Z}return new m.init(x,Z)},clone:function(){var p=H.clone.call(this);return p._data=this._data.clone(),p},_minBufferSize:0}),w=(E.Hasher=_.extend({cfg:H.extend(),init:function(p){this.cfg=this.cfg.extend(p),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(p){return this._append(p),this._process(),this},finalize:function(p){return p&&this._append(p),this._doFinalize()},blockSize:16,_createHelper:function(p){return function(x,A){return new p.init(A).finalize(x)}},_createHmacHelper:function(p){return function(x,A){return new w.HMAC.init(p,A).finalize(x)}}}),k.algo={});return k}(Math),S)},9027:(j,R,d)=>{d.d(R,{$:()=>S});var S={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"osneSixNine"},h360p_w640p_150kbps:{width:640,height:360,bitRate:15e4,frameRate:15,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{resolution:{width:640,height:360},frameRate:30,bitrates:{high:4e5,medium:2e5,low:1e5}},h480p_15fps:{resolution:{width:854,height:480},frameRate:15,bitrates:{high:3e5,medium:15e4,low:75e3}},h480p_30fps:{resolution:{width:854,height:480},frameRate:30,bitrates:{high:5e5,medium:25e4,low:125e3}},h720p_5fps:{resolution:{width:1280,height:720},frameRate:5,bitrates:{high:4e5,medium:2e5,low:1e5}},h720p_15fps:{resolution:{width:1280,height:720},frameRate:15,bitrates:{high:1e6,medium:5e5,low:25e4}},h720p_30fps:{resolution:{width:1280,height:720},frameRate:30,bitrates:{high:15e5,medium:75e4,low:375e3}},h1080p_15fps:{resolution:{width:1920,height:1080},frameRate:15,bitrates:{high:15e5,medium:75e4,low:3e5}},h1080p_30fps:{resolution:{width:1920,height:1080},frameRate:30,bitrates:{high:2e6,medium:1e6,low:5e5}}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},9166:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.DataConsumer=void 0;const S=d(2994),y=d(3953),b=new S.Logger("DataConsumer");class T extends y.EnhancedEventEmitter{_id;_dataProducerId;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new y.EnhancedEventEmitter;constructor({id:h,dataProducerId:k,dataChannel:E,sctpStreamParameters:H,appData:m}){super(),b.debug("constructor()"),this._id=h,this._dataProducerId=k,this._dataChannel=E,this._sctpStreamParameters=H,this._appData=m??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(h){this._dataChannel.binaryType=h}get appData(){return this._appData}set appData(h){this._appData=h}get observer(){return this._observer}close(){this._closed||(b.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(b.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(b.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",h=>{if(this._closed)return;let{error:k}=h;k||(k=new Error("unknown DataChannel error")),k.errorDetail==="sctp-failure"?b.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",k.sctpCauseCode,k.message):b.error('DataChannel "error" event: %o',k),this.safeEmit("error",k)}),this._dataChannel.addEventListener("close",()=>{this._closed||(b.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",h=>{this._closed||this.safeEmit("message",h.data)})}}R.DataConsumer=T},9275:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.AwaitQueue=void 0;const S=d(8274),y=d(4253),b=new S.Logger("AwaitQueue");R.AwaitQueue=class{pendingTasks=new Map;nextTaskId=0;stopping=!1;constructor(){b.debug("constructor()")}get size(){return this.pendingTasks.size}async push(T,f){if(f=f??T.name,b.debug(`push() [name:${f}]`),typeof T!="function")throw new TypeError("given task is not a function");if(f)try{Object.defineProperty(T,"name",{value:f})}catch{}return new Promise((h,k)=>{const E={id:this.nextTaskId++,task:T,name:f,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:H=>{if(E.completed)return;E.completed=!0,this.pendingTasks.delete(E.id),b.debug(`resolving task [name:${E.name}]`),h(H);const[m]=this.pendingTasks.values();m&&!m.executedAt&&this.execute(m)},reject:H=>{if(!E.completed&&(E.completed=!0,this.pendingTasks.delete(E.id),b.debug(`rejecting task [name:${E.name}]: %s`,String(H)),k(H),!this.stopping)){const[m]=this.pendingTasks.values();m&&!m.executedAt&&this.execute(m)}}};this.pendingTasks.set(E.id,E),this.pendingTasks.size===1&&this.execute(E)})}stop(){b.debug("stop()"),this.stopping=!0;for(const T of this.pendingTasks.values())b.debug(`stop() | stopping task [name:${T.name}]`),T.reject(new y.AwaitQueueStoppedError);this.stopping=!1}remove(T){b.debug(`remove() [taskIdx:${T}]`);const f=Array.from(this.pendingTasks.values())[T];f?f.reject(new y.AwaitQueueRemovedTaskError):b.debug(`stop() | no task with given idx [taskIdx:${T}]`)}dump(){const T=Date.now();let f=0;return Array.from(this.pendingTasks.values()).map(h=>({idx:f++,task:h.task,name:h.name,enqueuedTime:h.executedAt?h.executedAt-h.enqueuedAt:T-h.enqueuedAt,executionTime:h.executedAt?T-h.executedAt:0}))}async execute(T){if(b.debug(`execute() [name:${T.name}]`),T.executedAt)throw new Error("task already being executed");T.executedAt=Date.now();try{const f=await T.task();T.resolve(f)}catch(f){T.reject(f)}}}},9352:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.ReactNative=void 0;const S=d(7363),y=d(2994),b=d(4893),T=d(1765),f=d(8046),h=d(5544),k=d(4496),E=d(521),H=d(1305),m=new y.Logger("ReactNative"),P={OS:1024,MIS:1024};class v extends E.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdTrack=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new v}constructor(){super()}get name(){return"ReactNative"}close(){if(m.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const _=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{C.close()}catch{}const w=S.parse(_.sdp);return h.extractRtpCapabilities({sdpObject:w})}catch(_){try{C.close()}catch{}throw _}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:C,iceParameters:_,iceCandidates:w,dtlsParameters:p,sctpParameters:x,iceServers:A,iceTransportPolicy:I,additionalSettings:M,proprietaryConstraints:F,extendedRtpCapabilities:z}){m.debug("run()"),this._direction=C,this._remoteSdp=new H.RemoteSdp({iceParameters:_,iceCandidates:w,dtlsParameters:p,sctpParameters:x,planB:!0}),this._sendingRtpParametersByKind={audio:f.getSendingRtpParameters("audio",z),video:f.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:f.getSendingRemoteRtpParameters("audio",z),video:f.getSendingRemoteRtpParameters("video",z)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:A??[],iceTransportPolicy:I??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...M},F),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){m.debug("updateIceServers()");const _=this._pc.getConfiguration();_.iceServers=C,this._pc.setConfiguration(_)}async restartIce(C){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const _=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const w={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w)}else{const _={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);const w=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:_,codecOptions:w,codec:p}){this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),p&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addStream(this._sendStream);let x,A=await this._pc.createOffer(),I=S.parse(A.sdp);I.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const M=T.clone(this._sendingRtpParametersByKind[C.kind]);M.codecs=f.reduceCodecs(M.codecs);const F=T.clone(this._sendingRemoteRtpParametersByKind[C.kind]);if(F.codecs=f.reduceCodecs(F.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I}),C.kind==="video"&&_&&_.length>1&&(m.debug("send() | enabling simulcast"),I=S.parse(A.sdp),x=I.media.find(Z=>Z.type==="video"),k.addLegacySimulcast({offerMediaObject:x,track:C,numStreams:_.length}),A={type:"offer",sdp:S.write(I)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",A),await this._pc.setLocalDescription(A),I=S.parse(this._pc.localDescription.sdp),x=I.media.find(Z=>Z.type===C.kind),M.rtcp.cname=h.getCname({offerMediaObject:x}),M.encodings=k.getRtpEncodings({offerMediaObject:x,track:C}),_)for(let Z=0;Z<M.encodings.length;++Z)_[Z]&&Object.assign(M.encodings[Z],_[Z]);if(M.encodings.length>1&&(M.codecs[0].mimeType.toLowerCase()==="video/vp8"||M.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Z of M.encodings)Z.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:x,offerRtpParameters:M,answerRtpParameters:F,codecOptions:w});const z={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z);const G=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(G,C),{localId:G,rtpParameters:M}}async stopSending(C){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",C);const _=this._mapSendLocalIdTrack.get(C);if(!_)throw new Error("track not found");this._mapSendLocalIdTrack.delete(C),this._sendStream.removeTrack(_),this._pc.addStream(this._sendStream);const w=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",w);try{await this._pc.setLocalDescription(w)}catch(x){if(this._sendStream.getTracks().length===0)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",x.toString());throw x}if(this._pc.signalingState==="stable")return;const p={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,_){throw new b.UnsupportedError("not implemented")}async setMaxSpatialLayer(C,_){throw new b.UnsupportedError("not implemented")}async setRtpEncodingParameters(C,_){throw new b.UnsupportedError("not implemented")}async getSenderStats(C){throw new b.UnsupportedError("not implemented")}async sendDataChannel({ordered:C,maxPacketLifeTime:_,maxRetransmits:w,label:p,protocol:x}){this.assertSendDirection();const A={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:_,maxRetransmitTime:_,maxRetransmits:w,protocol:x};m.debug("sendDataChannel() [options:%o]",A);const I=this._pc.createDataChannel(p,A);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),F=S.parse(M.sdp),z=F.media.find(Z=>Z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:F}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const G={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:I,sctpStreamParameters:{streamId:A.id,ordered:A.ordered,maxPacketLifeTime:A.maxPacketLifeTime,maxRetransmits:A.maxRetransmits}}}async receive(C){this.assertRecvDirection();const _=[],w=new Map;for(const I of C){const{trackId:M,kind:F,rtpParameters:z}=I;m.debug("receive() [trackId:%s, kind:%s]",M,F);const G=F;let Z=I.streamId??z.rtcp.cname;m.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),Z+=`-hack-${T.generateRandomNumber()}`,w.set(M,Z),this._remoteSdp.receive({mid:G,kind:F,offerRtpParameters:z,streamId:Z,trackId:M})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let x=await this._pc.createAnswer();const A=S.parse(x.sdp);for(const I of C){const{kind:M,rtpParameters:F}=I,z=M,G=A.media.find(Z=>String(Z.mid)===z);h.applyCodecParameters({offerRtpParameters:F,answerMediaObject:G})}x={type:"answer",sdp:S.write(A)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const I of C){const{kind:M,trackId:F,rtpParameters:z}=I,G=F,Z=M,ce=w.get(F),X=this._pc.getRemoteStreams().find(Ee=>Ee.id===ce).getTrackById(G);if(!X)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(G,{mid:Z,rtpParameters:z}),_.push({localId:G,track:X})}return _}async stopReceiving(C){this.assertRecvDirection();for(const p of C){m.debug("stopReceiving() [localId:%s]",p);const{mid:x,rtpParameters:A}=this._mapRecvLocalIdInfo.get(p)??{};this._mapRecvLocalIdInfo.delete(p),this._remoteSdp.planBStopReceiving({mid:x,offerRtpParameters:A})}const _={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);const w=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){throw new b.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:C,label:_,protocol:w}){this.assertRecvDirection();const{streamId:p,ordered:x,maxPacketLifeTime:A,maxRetransmits:I}=C,M={negotiated:!0,id:p,ordered:x,maxPacketLifeTime:A,maxRetransmitTime:A,maxRetransmits:I,protocol:w};m.debug("receiveDataChannel() [options:%o]",M);const F=this._pc.createDataChannel(_,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const z={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const G=await this._pc.createAnswer();if(!this._transportReady){const Z=S.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:F}}async setupTransport({localDtlsRole:C,localSdpObject:_}){_||(_=S.parse(this._pc.localDescription.sdp));const w=h.extractDtlsParameters({sdpObject:_});w.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((p,x)=>{this.safeEmit("@connect",{dtlsParameters:w},p,x)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.ReactNative=v},9506:function(j,R,d){var S,y,b,T,f,h,k,E;j.exports=(E=d(9021),d(5471),d(1025),y=(S=E).lib,b=y.Base,T=y.WordArray,f=S.algo,h=f.MD5,k=f.EvpKDF=b.extend({cfg:b.extend({keySize:4,hasher:h,iterations:1}),init:function(H){this.cfg=this.cfg.extend(H)},compute:function(H,m){for(var P,v=this.cfg,U=v.hasher.create(),C=T.create(),_=C.words,w=v.keySize,p=v.iterations;_.length<w;){P&&U.update(P),P=U.update(H).finalize(m),U.reset();for(var x=1;x<p;x++)P=U.finalize(P),U.reset();C.concat(P)}return C.sigBytes=4*w,C}}),S.EvpKDF=function(H,m,P){return k.create(P).compute(H,m)},E.EvpKDF)},9557:function(j,R,d){var S,y,b,T,f,h,k,E;j.exports=(E=d(9021),d(3240),d(1380),y=(S=E).x64,b=y.Word,T=y.WordArray,f=S.algo,h=f.SHA512,k=f.SHA384=h.extend({_doReset:function(){this._hash=new T.init([new b.init(3418070365,3238371032),new b.init(1654270250,914150663),new b.init(2438529370,812702999),new b.init(355462360,4144912697),new b.init(1731405415,4290775857),new b.init(2394180231,1750603025),new b.init(3675008525,1694076839),new b.init(1203062813,3204075428)])},_doFinalize:function(){var H=h._doFinalize.call(this);return H.sigBytes-=16,H}}),S.SHA384=h._createHelper(k),S.HmacSHA384=h._createHmacHelper(k),E.SHA384)},9596:j=>{var R,d=typeof Reflect=="object"?Reflect:null,S=d&&typeof d.apply=="function"?d.apply:function(C,_,w){return Function.prototype.apply.call(C,_,w)};R=d&&typeof d.ownKeys=="function"?d.ownKeys:Object.getOwnPropertySymbols?function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:function(C){return Object.getOwnPropertyNames(C)};var y=Number.isNaN||function(C){return C!=C};function b(){b.init.call(this)}j.exports=b,j.exports.once=function(C,_){return new Promise(function(w,p){function x(I){C.removeListener(_,A),p(I)}function A(){typeof C.removeListener=="function"&&C.removeListener("error",x),w([].slice.call(arguments))}U(C,_,A,{once:!0}),_!=="error"&&function(I,M,F){typeof I.on=="function"&&U(I,"error",M,F)}(C,x,{once:!0})})},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var T=10;function f(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}function h(C){return C._maxListeners===void 0?b.defaultMaxListeners:C._maxListeners}function k(C,_,w,p){var x,A,I,M;if(f(w),(A=C._events)===void 0?(A=C._events=Object.create(null),C._eventsCount=0):(A.newListener!==void 0&&(C.emit("newListener",_,w.listener?w.listener:w),A=C._events),I=A[_]),I===void 0)I=A[_]=w,++C._eventsCount;else if(typeof I=="function"?I=A[_]=p?[w,I]:[I,w]:p?I.unshift(w):I.push(w),(x=h(C))>0&&I.length>x&&!I.warned){I.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=C,F.type=_,F.count=I.length,M=F,console&&console.warn&&console.warn(M)}return C}function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function H(C,_,w){var p={fired:!1,wrapFn:void 0,target:C,type:_,listener:w},x=E.bind(p);return x.listener=w,p.wrapFn=x,x}function m(C,_,w){var p=C._events;if(p===void 0)return[];var x=p[_];return x===void 0?[]:typeof x=="function"?w?[x.listener||x]:[x]:w?function(A){for(var I=new Array(A.length),M=0;M<I.length;++M)I[M]=A[M].listener||A[M];return I}(x):v(x,x.length)}function P(C){var _=this._events;if(_!==void 0){var w=_[C];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0}function v(C,_){for(var w=new Array(_),p=0;p<_;++p)w[p]=C[p];return w}function U(C,_,w,p){if(typeof C.on=="function")p.once?C.once(_,w):C.on(_,w);else{if(typeof C.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C);C.addEventListener(_,function x(A){p.once&&C.removeEventListener(_,x),w(A)})}}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(C){if(typeof C!="number"||C<0||y(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");T=C}}),b.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||y(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this},b.prototype.getMaxListeners=function(){return h(this)},b.prototype.emit=function(C){for(var _=[],w=1;w<arguments.length;w++)_.push(arguments[w]);var p=C==="error",x=this._events;if(x!==void 0)p=p&&x.error===void 0;else if(!p)return!1;if(p){var A;if(_.length>0&&(A=_[0]),A instanceof Error)throw A;var I=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw I.context=A,I}var M=x[C];if(M===void 0)return!1;if(typeof M=="function")S(M,this,_);else{var F=M.length,z=v(M,F);for(w=0;w<F;++w)S(z[w],this,_)}return!0},b.prototype.addListener=function(C,_){return k(this,C,_,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(C,_){return k(this,C,_,!0)},b.prototype.once=function(C,_){return f(_),this.on(C,H(this,C,_)),this},b.prototype.prependOnceListener=function(C,_){return f(_),this.prependListener(C,H(this,C,_)),this},b.prototype.removeListener=function(C,_){var w,p,x,A,I;if(f(_),(p=this._events)===void 0)return this;if((w=p[C])===void 0)return this;if(w===_||w.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete p[C],p.removeListener&&this.emit("removeListener",C,w.listener||_));else if(typeof w!="function"){for(x=-1,A=w.length-1;A>=0;A--)if(w[A]===_||w[A].listener===_){I=w[A].listener,x=A;break}if(x<0)return this;x===0?w.shift():function(M,F){for(;F+1<M.length;F++)M[F]=M[F+1];M.pop()}(w,x),w.length===1&&(p[C]=w[0]),p.removeListener!==void 0&&this.emit("removeListener",C,I||_)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(C){var _,w,p;if((w=this._events)===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[C]),this;if(arguments.length===0){var x,A=Object.keys(w);for(p=0;p<A.length;++p)(x=A[p])!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(_=w[C])=="function")this.removeListener(C,_);else if(_!==void 0)for(p=_.length-1;p>=0;p--)this.removeListener(C,_[p]);return this},b.prototype.listeners=function(C){return m(this,C,!0)},b.prototype.rawListeners=function(C){return m(this,C,!1)},b.listenerCount=function(C,_){return typeof C.listenerCount=="function"?C.listenerCount(_):P.call(C,_)},b.prototype.listenerCount=P,b.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]}},9633:(j,R,d)=>{d.d(R,{l:()=>_});var S=d(467),y=d(3029),b=d(2901),T=d(388),f=d(3954),h=d(5501),k=d(4756),E=d.n(k),H=d(7007),m=d(1806),P=d(6746),v=d(8278);function U(w,p,x){return p=(0,f.A)(p),(0,T.A)(w,C()?Reflect.construct(p,x||[],(0,f.A)(w).constructor):p.apply(w,x))}function C(){try{var w=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C=function(){return!!w})()}var _=function(w){function p(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,y.A)(this,p),U(this,p,[Object.assign(Object.assign({},A),{sharedKey:!0,ratchetWindowSize:0,failureTolerance:-1})])}return(0,h.A)(p,w),(0,b.A)(p,[{key:"setSharedKey",value:(x=(0,S.A)(E().mark(function A(I){var M,F;return E().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(typeof I!="string"){z.next=2;break}return z.next=1,(0,v.sn)(I);case 1:F=z.sent,z.next=4;break;case 2:return z.next=3,(0,v.tr)(I);case 3:F=z.sent;case 4:M=F,this.onSetEncryptionKey(M);case 5:case"end":return z.stop()}},A,this)})),function(A){return x.apply(this,arguments)})}]);var x}(function(w){function p(){var x,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,y.A)(this,p),(x=U(this,p)).onKeyRatcheted=function(I,M){console.debug("key ratcheted event received",{material:I,keyIndex:M})},x.keyInfoMap=new Map,x.options=Object.assign(Object.assign({},m.T4),A),x.on(P.fo.KeyRatcheted,x.onKeyRatcheted),x}return(0,h.A)(p,w),(0,b.A)(p,[{key:"onSetEncryptionKey",value:function(x,A,I){var M={key:x,participantIdentity:A,keyIndex:I};if(!this.options.sharedKey&&!A)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(A??"shared","-").concat(I??0),M),this.emit(P.fo.SetKey,M)}},{key:"getKeys",value:function(){return Array.from(this.keyInfoMap.values())}},{key:"getOptions",value:function(){return this.options}},{key:"ratchetKey",value:function(x,A){this.emit(P.fo.RatchetRequest,x,A)}}])}(H.EventEmitter))},9676:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Safari11=void 0;const S=d(7363),y=d(2994),b=d(1765),T=d(8046),f=d(5544),h=d(4496),k=d(521),E=d(1305),H=new y.Logger("Safari11"),m={OS:1024,MIS:1024};class P extends k.HandlerInterface{_direction;_remoteSdp;_sendingRtpParametersByKind;_sendingRemoteRtpParametersByKind;_forcedLocalDtlsRole;_pc;_sendStream=new MediaStream;_mapSendLocalIdRtpSender=new Map;_nextSendLocalId=0;_mapRecvLocalIdInfo=new Map;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return()=>new P}constructor(){super()}get name(){return"Safari11"}close(){if(H.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){H.debug("getNativeRtpCapabilities()");const U=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const C=await U.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{U.close()}catch{}const _=S.parse(C.sdp);return f.extractRtpCapabilities({sdpObject:_})}catch(C){try{U.close()}catch{}throw C}}async getNativeSctpCapabilities(){return H.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:U,iceParameters:C,iceCandidates:_,dtlsParameters:w,sctpParameters:p,iceServers:x,iceTransportPolicy:A,additionalSettings:I,proprietaryConstraints:M,extendedRtpCapabilities:F}){H.debug("run()"),this._direction=U,this._remoteSdp=new E.RemoteSdp({iceParameters:C,iceCandidates:_,dtlsParameters:w,sctpParameters:p,planB:!0}),this._sendingRtpParametersByKind={audio:T.getSendingRtpParameters("audio",F),video:T.getSendingRtpParameters("video",F)},this._sendingRemoteRtpParametersByKind={audio:T.getSendingRemoteRtpParameters("audio",F),video:T.getSendingRemoteRtpParameters("video",F)},w.role&&w.role!=="auto"&&(this._forcedLocalDtlsRole=w.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:x??[],iceTransportPolicy:A??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...I},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",z=>{this.emit("@icecandidateerror",z)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(H.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(U){H.debug("updateIceServers()");const C=this._pc.getConfiguration();C.iceServers=U,this._pc.setConfiguration(C)}async restartIce(U){if(H.debug("restartIce()"),this._remoteSdp.updateIceParameters(U),this._transportReady)if(this._direction==="send"){const C=await this._pc.createOffer({iceRestart:!0});H.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const _={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}else{const C={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const _=await this._pc.createAnswer();H.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",_),await this._pc.setLocalDescription(_)}}async getTransportStats(){return this._pc.getStats()}async send({track:U,encodings:C,codecOptions:_,codec:w}){this.assertSendDirection(),H.debug("send() [kind:%s, track.id:%s]",U.kind,U.id),w&&H.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(U),this._pc.addTrack(U,this._sendStream);let p,x=await this._pc.createOffer(),A=S.parse(x.sdp);A.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const I=b.clone(this._sendingRtpParametersByKind[U.kind]);I.codecs=T.reduceCodecs(I.codecs);const M=b.clone(this._sendingRemoteRtpParametersByKind[U.kind]);if(M.codecs=T.reduceCodecs(M.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),U.kind==="video"&&C&&C.length>1&&(H.debug("send() | enabling simulcast"),A=S.parse(x.sdp),p=A.media.find(Z=>Z.type==="video"),h.addLegacySimulcast({offerMediaObject:p,track:U,numStreams:C.length}),x={type:"offer",sdp:S.write(A)}),H.debug("send() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x),A=S.parse(this._pc.localDescription.sdp),p=A.media.find(Z=>Z.type===U.kind),I.rtcp.cname=f.getCname({offerMediaObject:p}),I.encodings=h.getRtpEncodings({offerMediaObject:p,track:U}),C)for(let Z=0;Z<I.encodings.length;++Z)C[Z]&&Object.assign(I.encodings[Z],C[Z]);if(I.encodings.length>1&&I.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Z of I.encodings)Z.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:I,answerRtpParameters:M,codecOptions:_});const F={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("send() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F);const z=String(this._nextSendLocalId);this._nextSendLocalId++;const G=this._pc.getSenders().find(Z=>Z.track===U);return this._mapSendLocalIdRtpSender.set(z,G),{localId:z,rtpParameters:I,rtpSender:G}}async stopSending(U){this.assertSendDirection();const C=this._mapSendLocalIdRtpSender.get(U);if(!C)throw new Error("associated RTCRtpSender not found");C.track&&this._sendStream.removeTrack(C.track),this._mapSendLocalIdRtpSender.delete(U);const _=await this._pc.createOffer();H.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",_);try{await this._pc.setLocalDescription(_)}catch(p){if(this._sendStream.getTracks().length===0)return void H.warn("stopSending() | ignoring expected error due no sending tracks: %s",p.toString());throw p}if(this._pc.signalingState==="stable")return;const w={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w)}async pauseSending(U){}async resumeSending(U){}async replaceTrack(U,C){this.assertSendDirection(),C?H.debug("replaceTrack() [localId:%s, track.id:%s]",U,C.id):H.debug("replaceTrack() [localId:%s, no track]",U);const _=this._mapSendLocalIdRtpSender.get(U);if(!_)throw new Error("associated RTCRtpSender not found");const w=_.track;await _.replaceTrack(C),w&&this._sendStream.removeTrack(w),C&&this._sendStream.addTrack(C)}async setMaxSpatialLayer(U,C){this.assertSendDirection(),H.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",U,C);const _=this._mapSendLocalIdRtpSender.get(U);if(!_)throw new Error("associated RTCRtpSender not found");const w=_.getParameters();w.encodings.forEach((p,x)=>{p.active=x<=C}),await _.setParameters(w)}async setRtpEncodingParameters(U,C){this.assertSendDirection(),H.debug("setRtpEncodingParameters() [localId:%s, params:%o]",U,C);const _=this._mapSendLocalIdRtpSender.get(U);if(!_)throw new Error("associated RTCRtpSender not found");const w=_.getParameters();w.encodings.forEach((p,x)=>{w.encodings[x]={...p,...C}}),await _.setParameters(w)}async getSenderStats(U){this.assertSendDirection();const C=this._mapSendLocalIdRtpSender.get(U);if(!C)throw new Error("associated RTCRtpSender not found");return C.getStats()}async sendDataChannel({ordered:U,maxPacketLifeTime:C,maxRetransmits:_,label:w,protocol:p}){this.assertSendDirection();const x={negotiated:!0,id:this._nextSendSctpStreamId,ordered:U,maxPacketLifeTime:C,maxRetransmits:_,protocol:p};H.debug("sendDataChannel() [options:%o]",x);const A=this._pc.createDataChannel(w,x);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){const I=await this._pc.createOffer(),M=S.parse(I.sdp),F=M.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),H.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I),this._remoteSdp.sendSctpAssociation({offerMediaObject:F});const z={type:"answer",sdp:this._remoteSdp.getSdp()};H.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:A,sctpStreamParameters:{streamId:x.id,ordered:x.ordered,maxPacketLifeTime:x.maxPacketLifeTime,maxRetransmits:x.maxRetransmits}}}async receive(U){this.assertRecvDirection();const C=[];for(const x of U){const{trackId:A,kind:I,rtpParameters:M,streamId:F}=x;H.debug("receive() [trackId:%s, kind:%s]",A,I);const z=I;this._remoteSdp.receive({mid:z,kind:I,offerRtpParameters:M,streamId:F??M.rtcp.cname,trackId:A})}const _={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);let w=await this._pc.createAnswer();const p=S.parse(w.sdp);for(const x of U){const{kind:A,rtpParameters:I}=x,M=A,F=p.media.find(z=>String(z.mid)===M);f.applyCodecParameters({offerRtpParameters:I,answerMediaObject:F})}w={type:"answer",sdp:S.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),H.debug("receive() | calling pc.setLocalDescription() [answer:%o]",w),await this._pc.setLocalDescription(w);for(const x of U){const{kind:A,trackId:I,rtpParameters:M}=x,F=A,z=I,G=this._pc.getReceivers().find(Z=>Z.track&&Z.track.id===z);if(!G)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(z,{mid:F,rtpParameters:M,rtpReceiver:G}),C.push({localId:z,track:G.track,rtpReceiver:G})}return C}async stopReceiving(U){this.assertRecvDirection();for(const w of U){H.debug("stopReceiving() [localId:%s]",w);const{mid:p,rtpParameters:x}=this._mapRecvLocalIdInfo.get(w)??{};this._mapRecvLocalIdInfo.delete(w),this._remoteSdp.planBStopReceiving({mid:p,offerRtpParameters:x})}const C={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const _=await this._pc.createAnswer();H.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",_),await this._pc.setLocalDescription(_)}async getReceiverStats(U){this.assertRecvDirection();const{rtpReceiver:C}=this._mapRecvLocalIdInfo.get(U)??{};if(!C)throw new Error("associated RTCRtpReceiver not found");return C.getStats()}async pauseReceiving(U){}async resumeReceiving(U){}async receiveDataChannel({sctpStreamParameters:U,label:C,protocol:_}){this.assertRecvDirection();const{streamId:w,ordered:p,maxPacketLifeTime:x,maxRetransmits:A}=U,I={negotiated:!0,id:w,ordered:p,maxPacketLifeTime:x,maxRetransmits:A,protocol:_};H.debug("receiveDataChannel() [options:%o]",I);const M=this._pc.createDataChannel(C,I);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const F={type:"offer",sdp:this._remoteSdp.getSdp()};H.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",F),await this._pc.setRemoteDescription(F);const z=await this._pc.createAnswer();if(!this._transportReady){const G=S.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G})}H.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:U,localSdpObject:C}){C||(C=S.parse(this._pc.localDescription.sdp));const _=f.extractDtlsParameters({sdpObject:C});_.role=U,this._remoteSdp.updateDtlsRole(U==="client"?"server":"client"),await new Promise((w,p)=>{this.safeEmit("@connect",{dtlsParameters:_},w,p)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}R.Safari11=P},9746:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0});const S=d(6697);R.default=function(y){return typeof y=="string"&&S.default.test(y)}},9792:(j,R,d)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.Producer=void 0;const S=d(2994),y=d(3953),b=d(4893),T=new S.Logger("Producer");class f extends y.EnhancedEventEmitter{_id;_localId;_closed=!1;_rtpSender;_track;_kind;_rtpParameters;_paused;_maxSpatialLayer;_stopTracks;_disableTrackOnPause;_zeroRtpOnPause;_appData;_observer=new y.EnhancedEventEmitter;constructor({id:k,localId:E,rtpSender:H,track:m,rtpParameters:P,stopTracks:v,disableTrackOnPause:U,zeroRtpOnPause:C,appData:_}){super(),T.debug("constructor()"),this._id=k,this._localId=E,this._rtpSender=H,this._track=m,this._kind=m.kind,this._rtpParameters=P,this._paused=!!U&&!m.enabled,this._maxSpatialLayer=void 0,this._stopTracks=v,this._disableTrackOnPause=U,this._zeroRtpOnPause=C,this._appData=_??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(k){this._appData=k}get observer(){return this._observer}close(){this._closed||(T.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(T.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new b.InvalidStateError("closed");return new Promise((k,E)=>{this.safeEmit("@getstats",k,E)})}pause(){T.debug("pause()"),this._closed?T.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((k,E)=>{this.safeEmit("@pause",k,E)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){T.debug("resume()"),this._closed?T.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((k,E)=>{this.safeEmit("@resume",k,E)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:k}){if(T.debug("replaceTrack() [track:%o]",k),this._closed){if(k&&this._stopTracks)try{k.stop()}catch{}throw new b.InvalidStateError("closed")}if(k&&k.readyState==="ended")throw new b.InvalidStateError("track ended");k!==this._track?(await new Promise((E,H)=>{this.safeEmit("@replacetrack",k,E,H)}),this.destroyTrack(),this._track=k,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):T.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(k){if(this._closed)throw new b.InvalidStateError("closed");if(this._kind!=="video")throw new b.UnsupportedError("not a video Producer");if(typeof k!="number")throw new TypeError("invalid spatialLayer");k!==this._maxSpatialLayer&&(await new Promise((E,H)=>{this.safeEmit("@setmaxspatiallayer",k,E,H)}).catch(()=>{}),this._maxSpatialLayer=k)}async setRtpEncodingParameters(k){if(this._closed)throw new b.InvalidStateError("closed");if(typeof k!="object")throw new TypeError("invalid params");await new Promise((E,H)=>{this.safeEmit("@setrtpencodingparameters",k,E,H)})}onTrackEnded(){T.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}R.Producer=f}},g={};function N(j){var R=g[j];if(R!==void 0)return R.exports;var d=g[j]={exports:{}};return o[j].call(d.exports,d,d.exports,N),d.exports}N.amdO={},N.n=j=>{var R=j&&j.__esModule?()=>j.default:()=>j;return N.d(R,{a:R}),R},N.d=(j,R)=>{for(var d in R)N.o(R,d)&&!N.o(j,d)&&Object.defineProperty(j,d,{enumerable:!0,get:R[d]})},N.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),N.o=(j,R)=>Object.prototype.hasOwnProperty.call(j,R),N.r=j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})};var B={};return(()=>{N.r(B),N.d(B,{CameraDeviceInfo:()=>bc,DeviceInfo:()=>Gs,ExternalE2EEKeyProvider:()=>er.l,MicrophoneDeviceInfo:()=>Ic,VideoSDK:()=>Jr,ZujoSDK:()=>Br});var j=N(2284),R=N(467),d=N(3029),S=N(2901),y=N(4467),b=N(4756),T=N.n(b),f=N(6880),h=N.n(f);function k(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function E(W){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?k(Object(Q),!0).forEach(function(de){(0,y.A)(W,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Q)):k(Object(Q)).forEach(function(de){Object.defineProperty(W,de,Object.getOwnPropertyDescriptor(Q,de))})}return W}function H(W){return"Minified Redux error #"+W+"; visit https://redux.js.org/Errors?code="+W+" for the full message or use the non-minified dev environment for full errors. "}var m=typeof Symbol=="function"&&Symbol.observable||"@@observable",P=function(){return Math.random().toString(36).substring(7).split("").join(".")},v={INIT:"@@redux/INIT"+P(),REPLACE:"@@redux/REPLACE"+P(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+P()}};function U(W){if(typeof W!="object"||W===null)return!1;for(var K=W;Object.getPrototypeOf(K)!==null;)K=Object.getPrototypeOf(K);return Object.getPrototypeOf(W)===K}function C(W,K,Q){var de;if(typeof K=="function"&&typeof Q=="function"||typeof Q=="function"&&typeof arguments[3]=="function")throw new Error(H(0));if(typeof K=="function"&&Q===void 0&&(Q=K,K=void 0),Q!==void 0){if(typeof Q!="function")throw new Error(H(1));return Q(C)(W,K)}if(typeof W!="function")throw new Error(H(2));var Re=W,be=K,we=[],We=we,ke=!1;function Oe(){We===we&&(We=we.slice())}function Qe(){if(ke)throw new Error(H(3));return be}function $e(et){if(typeof et!="function")throw new Error(H(4));if(ke)throw new Error(H(5));var ue=!0;return Oe(),We.push(et),function(){if(ue){if(ke)throw new Error(H(6));ue=!1,Oe();var he=We.indexOf(et);We.splice(he,1),we=null}}}function Ae(et){if(!U(et))throw new Error(H(7));if(et.type===void 0)throw new Error(H(8));if(ke)throw new Error(H(9));try{ke=!0,be=Re(be,et)}finally{ke=!1}for(var ue=we=We,he=0;he<ue.length;he++)(0,ue[he])();return et}return Ae({type:v.INIT}),(de={dispatch:Ae,subscribe:$e,getState:Qe,replaceReducer:function(et){if(typeof et!="function")throw new Error(H(10));Re=et,Ae({type:v.REPLACE})}})[m]=function(){var et,ue=$e;return(et={subscribe:function(he){if(typeof he!="object"||he===null)throw new Error(H(11));function Le(){he.next&&he.next(Qe())}return Le(),{unsubscribe:ue(Le)}}})[m]=function(){return this},et},de}function _(){for(var W=arguments.length,K=new Array(W),Q=0;Q<W;Q++)K[Q]=arguments[Q];return K.length===0?function(de){return de}:K.length===1?K[0]:K.reduce(function(de,Re){return function(){return de(Re.apply(void 0,arguments))}})}function w(){for(var W=arguments.length,K=new Array(W),Q=0;Q<W;Q++)K[Q]=arguments[Q];return function(de){return function(){var Re=de.apply(void 0,arguments),be=function(){throw new Error(H(15))},we={getState:Re.getState,dispatch:function(){return be.apply(void 0,arguments)}},We=K.map(function(ke){return ke(we)});return be=_.apply(void 0,We)(Re.dispatch),E(E({},Re),{},{dispatch:be})}}}function p(W){return function(K){var Q=K.dispatch,de=K.getState;return function(Re){return function(be){return typeof be=="function"?be(Q,de,W):Re(be)}}}}var x=p();x.withExtraArgument=p;const A=x;var I=N(2211),M=N.n(I);function F(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function z(W){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?F(Object(Q),!0).forEach(function(de){(0,y.A)(W,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Q)):F(Object(Q)).forEach(function(de){Object.defineProperty(W,de,Object.getOwnPropertyDescriptor(Q,de))})}return W}var G={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const Z=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_URL":var Q=K.payload.url;return z(z({},W),{},{url:Q});case"SET_ROOM_STATE":var de=K.payload.state;return z(z({},W),{},de==="connected"?{state:de}:{state:de,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var Re=K.payload.peerId;return z(z({},W),{},{activeSpeakerId:Re});case"SET_ROOM_STATS_PEER_ID":var be=K.payload.peerId;return W.statsPeerId===be?z(z({},W),{},{statsPeerId:null}):z(z({},W),{},{statsPeerId:be});case"SET_FACE_DETECTION":var we=K.payload;return z(z({},W),{},{faceDetection:we});case"REMOVE_PEER":var We=K.payload.peerId,ke=z({},W);return We&&We===W.activeSpeakerId&&(ke.activeSpeakerId=null),We&&We===W.statsPeerId&&(ke.statsPeerId=null),ke;default:return W}};function ce(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function X(W){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?ce(Object(Q),!0).forEach(function(de){(0,y.A)(W,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Q)):ce(Object(Q)).forEach(function(de){Object.defineProperty(W,de,Object.getOwnPropertyDescriptor(Q,de))})}return W}var Ee={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const Se=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ee,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?X(X({},W),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):W;case"SET_ME":var Q=K.payload,de=Q.peerId,Re=Q.displayName,be=Q.displayNameSet,we=Q.device;return X(X({},W),{},{id:de,displayName:Re,displayNameSet:be,device:we});case"SET_MEDIA_CAPABILITIES":var We=K.payload,ke=We.canSendMic,Oe=We.canSendWebcam;return X(X({},W),{},{canSendMic:ke,canSendWebcam:Oe});case"SET_CAN_CHANGE_WEBCAM":var Qe=K.payload;return X(X({},W),{},{canChangeWebcam:Qe});case"SET_WEBCAM_IN_PROGRESS":var $e=K.payload.flag;return X(X({},W),{},{webcamInProgress:$e});case"SET_SHARE_IN_PROGRESS":var Ae=K.payload.flag;return X(X({},W),{},{shareInProgress:Ae});case"SET_DISPLAY_NAME":var et=K.payload.displayName;return et||(et=W.displayName),X(X({},W),{},{displayName:et,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var ue=K.payload.enabled;return X(X({},W),{},{audioOnly:ue});case"SET_AUDIO_ONLY_IN_PROGRESS":var he=K.payload.flag;return X(X({},W),{},{audioOnlyInProgress:he});case"SET_AUDIO_MUTED_STATE":var Le=K.payload.enabled;return X(X({},W),{},{audioMuted:Le});case"SET_RESTART_ICE_IN_PROGRESS":var Ze=K.payload.flag;return X(X({},W),{},{restartIceInProgress:Ze});default:return W}};function xe(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function _e(W){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?xe(Object(Q),!0).forEach(function(de){(0,y.A)(W,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Q)):xe(Object(Q)).forEach(function(de){Object.defineProperty(W,de,Object.getOwnPropertyDescriptor(Q,de))})}return W}var Pe={};const He=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pe,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:W;case"ADD_PRODUCER":var Q=K.payload.producer;return _e(_e({},W),{},(0,y.A)({},Q.id,Q));case"REMOVE_PRODUCER":var de=K.payload.producerId,Re=_e({},W);return delete Re[de],Re;case"SET_PRODUCER_PAUSED":var be=K.payload.producerId,we=_e(_e({},W[be]),{},{paused:!0});return _e(_e({},W),{},(0,y.A)({},be,we));case"SET_PRODUCER_RESUMED":var We=K.payload.producerId,ke=_e(_e({},W[We]),{},{paused:!1});return _e(_e({},W),{},(0,y.A)({},We,ke));case"SET_PRODUCER_TRACK":var Oe=K.payload,Qe=Oe.producerId,$e=Oe.track,Ae=_e(_e({},W[Qe]),{},{track:$e});return _e(_e({},W),{},(0,y.A)({},Qe,Ae));case"SET_PRODUCER_SCORE":var et=K.payload,ue=et.producerId,he=et.score,Le=W[ue];if(!Le)return W;var Ze=_e(_e({},Le),{},{score:he});return _e(_e({},W),{},(0,y.A)({},ue,Ze));default:return W}};function pe(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function Ge(W){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?pe(Object(Q),!0).forEach(function(de){(0,y.A)(W,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Q)):pe(Object(Q)).forEach(function(de){Object.defineProperty(W,de,Object.getOwnPropertyDescriptor(Q,de))})}return W}var Te={};const Ve=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:W;case"ADD_DATA_PRODUCER":var Q=K.payload.dataProducer;return Ge(Ge({},W),{},(0,y.A)({},Q.id,Q));case"REMOVE_DATA_PRODUCER":var de=K.payload.dataProducerId,Re=Ge({},W);return delete Re[de],Re;default:return W}};var qe=N(5458);function nt(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function Bt(W){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?nt(Object(Q),!0).forEach(function(de){(0,y.A)(W,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Q)):nt(Object(Q)).forEach(function(de){Object.defineProperty(W,de,Object.getOwnPropertyDescriptor(Q,de))})}return W}var Pr={};function Ur(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function Zn(W){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?Ur(Object(Q),!0).forEach(function(de){(0,y.A)(W,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Q)):Ur(Object(Q)).forEach(function(de){Object.defineProperty(W,de,Object.getOwnPropertyDescriptor(Q,de))})}return W}var fr={};function gr(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function Bn(W){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?gr(Object(Q),!0).forEach(function(de){(0,y.A)(W,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Q)):gr(Object(Q)).forEach(function(de){Object.defineProperty(W,de,Object.getOwnPropertyDescriptor(Q,de))})}return W}var Ie={},Be=[];const Ye=function(W){for(var K=Object.keys(W),Q={},de=0;de<K.length;de++){var Re=K[de];typeof W[Re]=="function"&&(Q[Re]=W[Re])}var be,we=Object.keys(Q);try{(function(We){Object.keys(We).forEach(function(ke){var Oe=We[ke];if(Oe(void 0,{type:v.INIT})===void 0)throw new Error(H(12));if(Oe(void 0,{type:v.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(H(13))})})(Q)}catch(We){be=We}return function(We,ke){if(We===void 0&&(We={}),be)throw be;for(var Oe=!1,Qe={},$e=0;$e<we.length;$e++){var Ae=we[$e],et=Q[Ae],ue=We[Ae],he=et(ue,ke);if(he===void 0)throw ke&&ke.type,new Error(H(14));Qe[Ae]=he,Oe=Oe||he!==ue}return(Oe=Oe||we.length!==Object.keys(We).length)?Qe:We}}({room:Z,me:Se,producers:He,dataProducers:Ve,peers:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pr,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:W;case"ADD_PEER":var Q=K.payload.peer;return Bt(Bt({},W),{},(0,y.A)({},Q.id,Q));case"REMOVE_PEER":var de=K.payload.peerId,Re=Bt({},W);return delete Re[de],Re;case"SET_PEER_DISPLAY_NAME":var be=K.payload,we=be.displayName,We=W[be.peerId];if(!We)throw new Error("no Peer found");var ke=Bt(Bt({},We),{},{displayName:we});return Bt(Bt({},W),{},(0,y.A)({},ke.id,ke));case"ADD_CONSUMER":var Oe=K.payload,Qe=Oe.consumer,$e=W[Oe.peerId];if(!$e)return Bt({},W);var Ae=[].concat((0,qe.A)($e.consumers),[Qe.id]),et=Bt(Bt({},$e),{},{consumers:Ae});return Bt(Bt({},W),{},(0,y.A)({},et.id,et));case"REMOVE_CONSUMER":var ue=K.payload,he=ue.consumerId,Le=W[ue.peerId];if(!Le)return W;var Ze=Le.consumers.indexOf(he);if(Ze===-1)return Bt({},W);var tt=Le.consumers.slice();tt.splice(Ze,1);var Jt=Bt(Bt({},Le),{},{consumers:tt});return Bt(Bt({},W),{},(0,y.A)({},Jt.id,Jt));case"ADD_DATA_CONSUMER":var vt=K.payload,Rt=vt.dataConsumer,xn=vt.peerId;if(!xn)return W;var ct=W[xn];if(!ct)return Bt({},W);var Ue=[].concat((0,qe.A)(ct.dataConsumers),[Rt.id]),yt=Bt(Bt({},ct),{},{dataConsumers:Ue});return Bt(Bt({},W),{},(0,y.A)({},yt.id,yt));case"REMOVE_DATA_CONSUMER":var fn=K.payload,nn=fn.dataConsumerId,un=fn.peerId;if(!un)return W;var Qn=W[un];if(!Qn)return W;var xr=Qn.dataConsumers.indexOf(nn);if(xr===-1)return Bt({},W);var _n=Qn.dataConsumers.slice();_n.splice(xr,1);var dn=Bt(Bt({},Qn),{},{dataConsumers:_n});return Bt(Bt({},W),{},(0,y.A)({},dn.id,dn));default:return W}},consumers:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fr,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:W;case"ADD_CONSUMER":var Q=K.payload.consumer;return Zn(Zn({},W),{},(0,y.A)({},Q.id,Q));case"REMOVE_CONSUMER":var de=K.payload.consumerId,Re=Zn({},W);return delete Re[de],Re;case"SET_CONSUMER_PAUSED":var be,we=K.payload,We=we.consumerId,ke=we.originator,Oe=W[We];return be=Zn(Zn({},Oe),{},ke==="local"?{locallyPaused:!0,paused:!0}:{remotelyPaused:!0,paused:!0}),Zn(Zn({},W),{},(0,y.A)({},We,be));case"SET_CONSUMER_RESUMED":var Qe,$e=K.payload,Ae=$e.consumerId,et=$e.originator,ue=W[Ae];return Qe=Zn(Zn({},ue),{},et==="local"?{locallyPaused:!1,paused:!1}:{remotelyPaused:!1,paused:!1}),Zn(Zn({},W),{},(0,y.A)({},Ae,Qe));case"SET_CONSUMER_CURRENT_LAYERS":var he=K.payload,Le=he.consumerId,Ze=he.spatialLayer,tt=he.temporalLayer,Jt=Zn(Zn({},W[Le]),{},{currentSpatialLayer:Ze,currentTemporalLayer:tt});return Zn(Zn({},W),{},(0,y.A)({},Le,Jt));case"SET_CONSUMER_PREFERRED_LAYERS":var vt=K.payload,Rt=vt.consumerId,xn=vt.spatialLayer,ct=vt.temporalLayer,Ue=Zn(Zn({},W[Rt]),{},{preferredSpatialLayer:xn,preferredTemporalLayer:ct});return Zn(Zn({},W),{},(0,y.A)({},Rt,Ue));case"SET_CONSUMER_PRIORITY":var yt=K.payload,fn=yt.consumerId,nn=yt.priority,un=Zn(Zn({},W[fn]),{},{priority:nn});return Zn(Zn({},W),{},(0,y.A)({},fn,un));case"SET_CONSUMER_TRACK":var Qn=K.payload,xr=Qn.consumerId,_n=Qn.track,dn=Zn(Zn({},W[xr]),{},{track:_n});return Zn(Zn({},W),{},(0,y.A)({},xr,dn));case"SET_CONSUMER_SCORE":var br=K.payload,ur=br.consumerId,Gn=br.score,In=W[ur];if(!In)return W;var gn=Zn(Zn({},In),{},{score:Gn});return Zn(Zn({},W),{},(0,y.A)({},ur,gn));default:return W}},dataConsumers:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ie,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"SET_ROOM_STATE":return K.payload.state==="closed"?{}:W;case"ADD_DATA_CONSUMER":var Q=K.payload.dataConsumer;return Bn(Bn({},W),{},(0,y.A)({},Q.id,Q));case"REMOVE_DATA_CONSUMER":var de=K.payload.dataConsumerId,Re=Bn({},W);return delete Re[de],Re;default:return W}},notifications:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Be,K=arguments.length>1?arguments[1]:void 0;switch(K.type){case"ADD_NOTIFICATION":var Q=K.payload.notification;return[].concat((0,qe.A)(W),[Q]);case"REMOVE_NOTIFICATION":var de=K.payload.notificationId;return W.filter(function(Re){return Re.id!==de});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return W}}});var Qt=N(1919),Ft=N(7007),xt=N(296),pn=(N(1919).default,(0,S.A)(function W(){(0,d.A)(this,W),this.roomClient=null})),Ln=new(function(){function W(){(0,d.A)(this,W),W.instance||(W.instance=new pn)}return(0,S.A)(W,[{key:"getInstance",value:function(){return W.instance}}])}());Object.freeze(Ln);var zt=Ln.getInstance(),sr="state",Hr=function(){return(0,S.A)(function W(K){(0,d.A)(this,W),(0,y.A)(this,"pausedBy",void 0),this.id=K.id,this.kind=K.track.kind,this.codec=K.codec,this.track=K.track,this.producerOrConsumer=K.instance,K.appData&&K.appData.share===!0&&K.track.kind==="video"&&(this.kind="share"),K.appData&&K.appData.share===!0&&K.track.kind==="audio"&&(this.kind="shareAudio"),this.rtpSender=K.rtpSender,this.rtpReceiver=K.rtpReceiver,this.eventEmitter=new Ft},[{key:"pause",value:function(){zt.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){zt.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"handleStateChanged",value:function(W){var K=W.state;W.streamId,this.eventEmitter.emit(sr,{state:K,timestamp:new Date().getTime()})}},{key:"paused",get:function(){return this.producerOrConsumer.paused}},{key:"on",value:function(W,K){if(W!==sr)throw new Error("Invalid event type from STREAM onn");this.eventEmitter.on(W,K)}},{key:"off",value:function(W,K){if(W!==sr)throw new Error("Invalid event type from STREAM off");this.eventEmitter.off(W,K)}}])}(),Rr=N(1803);function Vr(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function zr(W,K){var Q=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!Q){if(Array.isArray(W)||(Q=function(ke,Oe){if(ke){if(typeof ke=="string")return Ar(ke,Oe);var Qe={}.toString.call(ke).slice(8,-1);return Qe==="Object"&&ke.constructor&&(Qe=ke.constructor.name),Qe==="Map"||Qe==="Set"?Array.from(ke):Qe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qe)?Ar(ke,Oe):void 0}}(W))||K){Q&&(W=Q);var de=0,Re=function(){};return{s:Re,n:function(){return de>=W.length?{done:!0}:{done:!1,value:W[de++]}},e:function(ke){throw ke},f:Re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var be,we=!0,We=!1;return{s:function(){Q=Q.call(W)},n:function(){var ke=Q.next();return we=ke.done,ke},e:function(ke){We=!0,be=ke},f:function(){try{we||Q.return==null||Q.return()}finally{if(We)throw be}}}}function Ar(W,K){(K==null||K>W.length)&&(K=W.length);for(var Q=0,de=Array(K);Q<K;Q++)de[Q]=W[Q];return de}var $r="stream-enabled",ga="stream-disabled",ea="media-status-changed",oa="video-quality-changed",Nn="stream-paused",Ha="stream-resumed",Ca="producer-added",Gr="producer-removed",dr="consumer-added",at="consumer-removed",ut="e2ee-state-change",Wt=function(){return(0,S.A)(function be(we){var We=this;(0,d.A)(this,be),(0,y.A)(this,"captureImage",(0,R.A)(T().mark(function ke(){var Oe,Qe,$e,Ae,et,ue,he,Le,Ze,tt,Jt=arguments;return T().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:Qe=(Oe=Jt.length>0&&Jt[0]!==void 0?Jt[0]:{}).height,$e=Oe.width,vt.prev=1,Ae=(0,qe.A)(We.streams.values()),et=zr(Ae),vt.prev=2,he=T().mark(function Rt(){var xn,ct,Ue,yt,fn,nn;return T().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:if((xn=ue.value).kind!="video"){un.next=4;break}return un.prev=1,(ct=new MediaStream).addTrack(xn.track),(Ue=document.createElement("video")).srcObject=ct,Ue.playsInline=!0,(yt=document.createElement("canvas")).id="canvasId",un.next=2,new Promise(function(Qn,xr){Ue.addEventListener("loadeddata",(0,R.A)(T().mark(function _n(){var dn,br,ur,Gn,In,gn,Mr;return T().wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:return dn=Ue.videoWidth,br=Ue.videoHeight,ur=16/9,Qe==null&&$e==null&&(Qe=br,$e=dn),Qe==null&&Qe==null||(Qe<=0||Qe>br)&&(Qe=br),$e==null&&$e==null||($e<=0||$e>dn)&&($e=dn),Qe==null&&(Qe=$e/ur),$e==null&&($e=Qe*ur),yt.width=$e,yt.height=Qe,fa.prev=1,fa.next=2,Ue.play();case 2:document.body.appendChild(Ue),Gn=(yt.width-dn*ur)/2,In=(yt.height-br*ur)/2,yt.getContext("2d").clearRect(0,0,Gn/2,In/2),yt.getContext("2d").drawImage(Ue,0,0),gn=yt.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(yt),document.body.removeChild(yt),document.body.removeChild(Ue),Qn(gn),fa.next=4;break;case 3:fa.prev=3,Mr=fa.catch(1),xr(Mr),console.log("error in video",Mr);case 4:case"end":return fa.stop()}},_n,null,[[1,3]])})))});case 2:return fn=un.sent,un.abrupt("return",{v:fn});case 3:un.prev=3,nn=un.catch(1),console.error("err on image capture",nn);case 4:case"end":return un.stop()}},Rt,null,[[1,3]])}),et.s();case 3:if((ue=et.n()).done){vt.next=6;break}return vt.delegateYield(he(),"t0",4);case 4:if(!(Le=vt.t0)){vt.next=5;break}return vt.abrupt("return",Le.v);case 5:vt.next=3;break;case 6:vt.next=8;break;case 7:vt.prev=7,Ze=vt.catch(2),et.e(Ze);case 8:return vt.prev=8,et.f(),vt.finish(8);case 9:throw new Error("Camera must be on to capture an image");case 10:vt.prev=10,tt=vt.catch(1),console.error("Error in captureImage::",tt),zt.roomClient._videosdkLogs&&zt.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:tt.message}});case 11:case"end":return vt.stop()}},ke,null,[[1,10],[2,7,8,9]])}))),this.id=we.id,this.displayName=we.displayName,this.streams=new Map,this.quality="low",this.screenShareQuality="high",this.local=we.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=we.mode,this.metaData=we.metaData,this.eventEmitter=new Ft.EventEmitter,this.participantVideoElements=new Map,this.participantAudioElements=new Map,this.videoVisible=!1,this.height=null,this.width=null,this.resizeObserver=null},[{key:"_setPinState",value:function(be){be.cam!=null&&(this.pinState.cam=be.cam),be.share!=null&&(this.pinState.share=be.share)}},{key:"remove",value:function(){zt.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){zt.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){zt.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){zt.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){zt.roomClient.disablePeerWebcam(this.id)}},{key:"getTransportStats",value:function(){return zt.roomClient.getTransportRemoteStats({participantId:this.id})}},{key:"handleStreamStateChanged",value:function(be){var we=be.state,We=(be.peerId,be.streamId),ke=this.streams.get(We);ke!=null&&(ke.kind!=="video"&&ke.kind!=="share"||ke.handleStateChanged({state:we,streamId:We}))}},{key:"addStream",value:function(be){if(be){this.streams.set(be.id,be),be.kind!=="video"||this.local||zt.roomClient.setConsumerQuality(be.id,this.quality);var we=new MediaStream;we.addTrack(be.track);try{if(["video","share"].includes(be.kind)){var We=this.participantVideoElements.get(be.kind);if(We){var ke={display:"block",objectFit:be.kind==="share"?"contain":"cover",width:"100%"};Object.assign(We.style,ke),We.srcObject=we,We.play().catch(function(Qe){console.error("Failed to play ".concat(be.kind," stream:"),Qe)}),(be.kind==="share"||be.kind==="video"&&this.videoVisible)&&be.resume()}}if((be.kind==="audio"||be.kind==="shareAudio")&&!this.local){var Oe=this.participantAudioElements.get(be.kind);Oe&&(Oe.srcObject=we,Oe.play().catch(function(Qe){console.error("Failed to play ".concat(be.kind," audio:"),Qe)}))}this.eventEmitter.emit($r,be),be.kind==="video"&&!this.local&&this.height&&this.width&&this.setViewPort(this.width,this.height)}catch(Qe){console.error("Error in addStream:",Qe)}}else console.warn("Attempted to add null/undefined stream")}},{key:"updateStream",value:function(be){this.streams.set(be.id,be),this.eventEmitter.emit($r,be)}},{key:"deleteStream",value:function(be){var we=this.streams.get(be);if(we!=null){this.streams.delete(be);var We={video:{collection:this.participantVideoElements,type:"video"},share:{collection:this.participantVideoElements,type:"share"},audio:{collection:this.participantAudioElements,type:"audio"},shareAudio:{collection:this.participantAudioElements,type:"shareAudio"}}[we.kind];if(We){var ke=We.collection.get(We.type);ke&&(ke.style.display="none")}return this.eventEmitter.emit(ga,we),we}}},{key:"streamResumed",value:function(be){this.streams.get(be)}},{key:"streamPaused",value:function(be){this.streams.get(be)}},{key:"updateParticipantMediaState",value:function(be,we){be=="audio"?this.micOn=we:be=="video"&&(this.webcamOn=we),this.eventEmitter.emit(ea,{peerId:this.id,kind:be,newStatus:we})}},{key:"handleParticipantPause",value:function(be){if(be!=null&&be.consumerId){var we=this.streams.get(be.consumerId);we?we.pausedBy="SUB_MANAGER":console.warn("Stream with consumerId ".concat(be.consumerId," not found."))}this.eventEmitter.emit(Nn,{kind:be?.kind,reason:be?.reason})}},{key:"handleParticipantResume",value:function(be){if(be!=null&&be.consumerId){var we=this.streams.get(be.consumerId);we?we.pausedBy=void 0:console.warn("Stream with consumerId ".concat(be.consumerId," not found."))}this.eventEmitter.emit(Ha,{kind:be?.kind,reason:be?.reason})}},{key:"handleE2EEStateChange",value:function(be){be==null||delete be.peerId,this.eventEmitter.emit(ut,be)}},{key:"videoQualityChanged",value:function(be,we){this.eventEmitter.emit(oa,{peerId:this.id,prevQuality:be,currentQuality:we})}},{key:"setQuality",value:function(be){if(!this.local){if(typeof document<"u"&&this.resizeObserver){var we=document.querySelector("#f-".concat(this.id));we&&this.resizeObserver.unobserve(we)}this.quality=be,(0,qe.A)(this.streams.entries()).forEach(function(We){var ke=We[1];ke.kind==="video"&&zt.roomClient.setConsumerQuality(ke.id,be)})}}},{key:"setScreenShareQuality",value:function(be){this.local||(this.screenShareQuality=be,this.streams.forEach(function(we){we.kind==="share"&&zt.roomClient.setConsumerScreenShareQuality(we.id,be)}))}},{key:"setViewPort",value:function(be,we){(0,qe.A)(this.streams.entries()).forEach(function(We){var ke=We[1];ke.kind==="video"&&zt.roomClient.setViewPort(ke.producerOrConsumer,be,we)})}},{key:"pin",value:function(be){switch(be){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}zt.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(be){switch(be){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}zt.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(Re=(0,R.A)(T().mark(function be(we){var We,ke,Oe;return T().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return We=we.meetingId,ke=we.payload,Oe=we.token,Qe.next=1,zt.roomClient.switchPeerRoom({peerId:this.id,roomId:We,payload:ke,token:Oe});case 1:case"end":return Qe.stop()}},be,this)})),function(be){return Re.apply(this,arguments)})},{key:"getVideoStats",value:(de=(0,R.A)(T().mark(function be(){var we,We,ke,Oe,Qe,$e;return T().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(!this.local){Ae.next=2;break}return Ae.next=1,zt.roomClient.getVideoRemoteStats();case 1:return Ae.abrupt("return",Ae.sent);case 2:we=(0,qe.A)(this.streams.entries()),We=zr(we),Ae.prev=3,We.s();case 4:if((ke=We.n()).done){Ae.next=7;break}if(Oe=(0,xt.A)(ke.value,2),Qe=Oe[0],Oe[1].kind!="video"){Ae.next=6;break}return Ae.next=5,zt.roomClient.getConsumerRemoteStats(Qe);case 5:return Ae.abrupt("return",Ae.sent);case 6:Ae.next=4;break;case 7:Ae.next=9;break;case 8:Ae.prev=8,$e=Ae.catch(3),We.e($e);case 9:return Ae.prev=9,We.f(),Ae.finish(9);case 10:case"end":return Ae.stop()}},be,this,[[3,8,9,10]])})),function(){return de.apply(this,arguments)})},{key:"getShareStats",value:(Q=(0,R.A)(T().mark(function be(){var we,We,ke,Oe,Qe,$e;return T().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(!this.local){Ae.next=2;break}return Ae.next=1,zt.roomClient.getShareRemoteStats();case 1:return Ae.abrupt("return",Ae.sent);case 2:we=(0,qe.A)(this.streams.entries()),We=zr(we),Ae.prev=3,We.s();case 4:if((ke=We.n()).done){Ae.next=7;break}if(Oe=(0,xt.A)(ke.value,2),Qe=Oe[0],Oe[1].kind!="share"){Ae.next=6;break}return Ae.next=5,zt.roomClient.getConsumerRemoteStats(Qe);case 5:return Ae.abrupt("return",Ae.sent);case 6:Ae.next=4;break;case 7:Ae.next=9;break;case 8:Ae.prev=8,$e=Ae.catch(3),We.e($e);case 9:return Ae.prev=9,We.f(),Ae.finish(9);case 10:case"end":return Ae.stop()}},be,this,[[3,8,9,10]])})),function(){return Q.apply(this,arguments)})},{key:"getShareAudioStats",value:(K=(0,R.A)(T().mark(function be(){var we,We,ke,Oe,Qe,$e;return T().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(!this.local){Ae.next=2;break}return Ae.next=1,zt.roomClient.getShareAudioRemoteStats();case 1:return Ae.abrupt("return",Ae.sent);case 2:we=(0,qe.A)(this.streams.entries()),We=zr(we),Ae.prev=3,We.s();case 4:if((ke=We.n()).done){Ae.next=7;break}if(Oe=(0,xt.A)(ke.value,2),Qe=Oe[0],Oe[1].kind!="shareAudio"){Ae.next=6;break}return Ae.next=5,zt.roomClient.getConsumerRemoteStats(Qe);case 5:return Ae.abrupt("return",Ae.sent);case 6:Ae.next=4;break;case 7:Ae.next=9;break;case 8:Ae.prev=8,$e=Ae.catch(3),We.e($e);case 9:return Ae.prev=9,We.f(),Ae.finish(9);case 10:case"end":return Ae.stop()}},be,this,[[3,8,9,10]])})),function(){return K.apply(this,arguments)})},{key:"getAudioStats",value:(W=(0,R.A)(T().mark(function be(){var we,We,ke,Oe,Qe,$e;return T().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(this.micOn){Ae.next=1;break}return Ae.abrupt("return",[]);case 1:if(!this.local){Ae.next=3;break}return Ae.next=2,zt.roomClient.getAudioRemoteStats();case 2:return Ae.abrupt("return",Ae.sent);case 3:we=(0,qe.A)(this.streams.entries()),We=zr(we),Ae.prev=4,We.s();case 5:if((ke=We.n()).done){Ae.next=8;break}if(Oe=(0,xt.A)(ke.value,2),Qe=Oe[0],Oe[1].kind!="audio"){Ae.next=7;break}return Ae.next=6,zt.roomClient.getConsumerRemoteStats(Qe);case 6:return Ae.abrupt("return",Ae.sent);case 7:Ae.next=5;break;case 8:Ae.next=10;break;case 9:Ae.prev=9,$e=Ae.catch(4),We.e($e);case 10:return Ae.prev=10,We.f(),Ae.finish(10);case 11:case"end":return Ae.stop()}},be,this,[[4,9,10,11]])})),function(){return W.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){zt.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){zt.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){zt.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){zt.roomClient.stopConsumingMicStreams(this.id)}},{key:"renderVideo",value:function(be){for(var we,We=this,ke=be.type,Oe=ke===void 0?"video":ke,Qe=be.maxQuality,$e=Qe===void 0?"auto":Qe,Ae=be.videostyle,et=Ae===void 0?{}:Ae,ue=be.containerStyle,he=ue===void 0?{}:ue,Le=0,Ze=(0,qe.A)(this.streams.values());Le<Ze.length;Le++){var tt=Ze[Le];tt.kind==Oe&&(we=new MediaStream).addTrack(tt.track)}if(this.participantVideoElements.get(Oe)){if(we){var Jt=this.participantVideoElements.get(Oe);Jt&&(Jt.srcObject=we,Jt.play().catch(function(yt){return console.error("videoElem.play() failed",yt)}))}return this.participantVideoElements.get(Oe)}try{var vt=document.createElement("div");vt.classList.add("video-container","participant-video-".concat(this.id)),vt.setAttribute("id","f-".concat(this.id).concat(Oe==="share"?"-share":"")),vt.style.setProperty("position","relative"),Object.assign(vt.style,he);var Rt=document.createElement("video");if(Rt.setAttribute("id","v-".concat(this.id).concat(Oe==="share"?"-share":"")),Rt.setAttribute("playsinline",""),Rt.setAttribute("webkit-playsinline",""),Rt.setAttribute("x5-playsinline",""),Rt.playsinline=!0,Rt.muted=!0,Rt.autoplay=!0,Rt.onerror=function(yt){console.log(yt,"participant video error")},Object.assign(Rt.style,function(yt){for(var fn=1;fn<arguments.length;fn++){var nn=arguments[fn]!=null?arguments[fn]:{};fn%2?Vr(Object(nn),!0).forEach(function(un){(0,y.A)(yt,un,nn[un])}):Object.getOwnPropertyDescriptors?Object.defineProperties(yt,Object.getOwnPropertyDescriptors(nn)):Vr(Object(nn)).forEach(function(un){Object.defineProperty(yt,un,Object.getOwnPropertyDescriptor(nn,un))})}return yt}({width:"100%",height:"100%",objectFit:Oe==="share"?"contain":"cover"},et)),we&&(Rt.srcObject=we,Rt.play().then(function(yt){console.log("videoElem.play() success",yt)}).catch(function(yt){return console.error("videoElem.play() failed",yt)})),vt.appendChild(Rt),this.participantVideoElements.set(Oe,Rt),this.videoVisible=!1,!this.local&&Oe==="video"){var xn=(0,Rr.sg)(function(yt){if(yt.length!=0)if(yt[yt.length-1].intersectionRatio>0){We.videoVisible=!0;for(var fn=0,nn=(0,qe.A)(We.streams.values());fn<nn.length;fn++){var un=nn[fn];un.kind=="video"&&un.pausedBy!=="SUB_MANAGER"&&un.paused&&un.resume()}}else{We.videoVisible=!1;for(var Qn=0,xr=(0,qe.A)(We.streams.values());Qn<xr.length;Qn++){var _n=xr[Qn];_n.kind=="video"&&_n.pause()}}},500);if(new IntersectionObserver(xn,{root:null,rootMargin:"0px",threshold:0}).observe(vt),$e=="auto"&&Oe==="video"){var ct=(0,Rr.sg)(function(yt){var fn=yt[0].contentRect,nn=fn.width,un=fn.height;nn>0&&un>0&&(We.height=un,We.width=nn,We.setViewPort(nn,un))},500),Ue=new ResizeObserver(ct);Ue.observe(vt),this.resizeObserver=Ue}}return Oe!=="video"||$e==="auto"||this.local||this.setQuality($e),vt}catch(yt){console.log("Render video Exception",yt)}}},{key:"renderAudio",value:function(be){var we=be.type,We=we===void 0?"audio":we;if(this.local)return null;try{if(this.participantAudioElements.get(We)){var ke=this.participantAudioElements.get(We),Oe=this.getAudioStream(We);return Oe&&ke&&(ke.srcObject=Oe,ke.play().catch(function(Ae){return console.error("Failed to play existing audio:",Ae)})),ke}var Qe=document.createElement("audio");Qe.setAttribute("id","a-".concat(this.id,"-").concat(We)),Qe.autoplay=!1,Qe.playsInline=!0,Qe.controls=!1,Qe.style.display="none",Qe.onerror=function(Ae){return console.log("Audio element error:",Ae)};var $e=this.getAudioStream(We);return $e&&(Qe.srcObject=$e,Qe.play().catch(function(Ae){return console.error("Failed to play new audio:",Ae)})),this.participantAudioElements.set(We,Qe),Qe}catch(Ae){return console.error("Render audio exception:",Ae),null}}},{key:"getAudioStream",value:function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"audio",we=(0,qe.A)(this.streams.values()).find(function(ke){return ke.kind===be});if(we){var We=new MediaStream;return We.addTrack(we.track),we.resume(),We}return null}},{key:"addProducer",value:function(be){this.eventEmitter.emit(Ca,be)}},{key:"removeProducer",value:function(be){this.eventEmitter.emit(Gr,be)}},{key:"addConsumer",value:function(be){this.eventEmitter.emit(dr,be)}},{key:"removeConsumer",value:function(be){this.eventEmitter.emit(at,be)}},{key:"on",value:function(be,we){switch(be){case $r:case ga:case ea:case oa:case Nn:case Ha:case Ca:case Gr:case dr:case at:case ut:this.eventEmitter.on(be,we);break;default:throw new Error("Invalid event type from participant onn")}}},{key:"off",value:function(be,we){switch(be){case $r:case ga:case ea:case oa:case Nn:case Ha:case Ca:case Gr:case dr:case at:case ut:this.eventEmitter.off(be,we);break;default:throw new Error("Invalid event type from participant off")}}}]);var W,K,Q,de,Re}(),Tt=N(388),tn=N(3954),Xt=N(5501),Xe={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"},Sn=N(2107);function Rn(){try{var W=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rn=function(){return!!W})()}function Vn(W,K,Q){or(W,K),K.set(W,Q)}function or(W,K){if(K.has(W))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $t(W,K){return W.get(Pn(W,K))}function bt(W,K,Q){return W.set(Pn(W,K),Q),Q}function Pn(W,K,Q){if(typeof W=="function"?W===K:W.has(K))return arguments.length<3?K:Q;throw new TypeError("Private element is not present on this object")}var kn="stream-enabled",bn="stream-disabled",Nr="character-joined",Er="character-left",Or="media-status-changed",Jn="video-quality-changed",Hn="character-state-changed",ha="character-message",ca="user-message",Ta="data",Oa="error",ss=new WeakMap,ai=new WeakMap,ji=new WeakMap,os=new WeakMap,Ei=new WeakMap,Yi=new WeakMap,qr=new WeakMap,Si=new WeakSet,Ni=function(W){function K(ke){var Oe,Qe,$e,Ae;return(0,d.A)(this,K),Qe=this,$e=K,Ae=[{id:ke.id,displayName:ke.displayName,mode:Sn.nI.SEND_AND_RECV,metaData:ke.metaData}],$e=(0,tn.A)($e),function(et,ue){or(et,ue),ue.add(et)}(Oe=(0,Tt.A)(Qe,Rn()?Reflect.construct($e,Ae||[],(0,tn.A)(Qe).constructor):$e.apply(Qe,Ae)),Si),Vn(Oe,ss,void 0),Vn(Oe,ai,void 0),Vn(Oe,ji,void 0),Vn(Oe,os,void 0),Vn(Oe,Ei,void 0),Vn(Oe,Yi,void 0),Vn(Oe,qr,void 0),(0,y.A)(Oe,"captureImage",(0,R.A)(T().mark(function et(){var ue,he=arguments;return T().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:throw(ue=he.length>0&&he[0]!==void 0?he[0]:{}).height,ue.width,new Error("captureImage method is not supported on character");case 1:case"end":return Le.stop()}},et)}))),bt(Ei,Oe,ke.interactionId||null),Oe.id=ke.id||null,bt(ss,Oe,ke.characterRole),bt(ai,Oe,ke.characterMode),bt(ji,Oe,ke.knowledgeBases||[]),Oe.displayName=ke.displayName,bt(os,Oe,ke.language),bt(Yi,Oe,ke.state||Xe.CHARACTER_LISTENING),bt(qr,Oe,ke.roomClient),Oe}return(0,Xt.A)(K,W),(0,S.A)(K,[{key:"join",value:(We=(0,R.A)(T().mark(function ke(){var Oe;return T().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return Qe.next=1,$t(qr,this).joinCharacter({interactionId:$t(Ei,this),characterId:this.id,characterRole:$t(ss,this),displayName:this.displayName,characterMode:$t(ai,this),knowledgeBases:$t(ji,this),language:$t(os,this),metaData:this.metaData});case 1:(Oe=Qe.sent)&&(this.id=Oe.characterId,this.displayName=Oe.displayName,bt(ai,this,Oe.characterMode),bt(ss,this,Oe.characterRole),bt(Ei,this,Oe.interactionId),bt(ji,this,Oe.knowledgeBases),bt(os,this,Oe.language),$t(qr,this)._eventEmitter.emit("INIT_CHARACTER",this));case 2:case"end":return Qe.stop()}},ke,this)})),function(){return We.apply(this,arguments)})},{key:"leave",value:(we=(0,R.A)(T().mark(function ke(){return T().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=1,$t(qr,this).removeCharacter();case 1:case"end":return Oe.stop()}},ke,this)})),function(){return we.apply(this,arguments)})},{key:"remove",value:(be=(0,R.A)(T().mark(function ke(){return T().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return Oe.stop()}},ke)})),function(){return be.apply(this,arguments)})},{key:"sendMessage",value:(Re=(0,R.A)(T().mark(function ke(Oe){return T().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return Qe.next=1,$t(qr,this).sendCharacterMessage({interactionId:$t(Ei,this),text:Oe});case 1:case"end":return Qe.stop()}},ke,this)})),function(ke){return Re.apply(this,arguments)})},{key:"handleCharacterStateChanged",value:function(ke){Object.keys(Xe).includes(ke.status)&&(Pn(Si,this,sn).call(this,ke.status),this.eventEmitter.emit(Hn,ke))}},{key:"handleCharacterMessage",value:function(ke){this.eventEmitter.emit(ha,ke)}},{key:"interrupt",value:(de=(0,R.A)(T().mark(function ke(){return T().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=1,$t(qr,this).interruptCharacter({interactionId:$t(Ei,this)});case 1:case"end":return Oe.stop()}},ke,this)})),function(){return de.apply(this,arguments)})},{key:"handleUserMessage",value:function(ke){this.eventEmitter.emit(ca,ke)}},{key:"handleCharacterData",value:function(ke){var Oe=ke.topic,Qe=ke.data;this.eventEmitter.emit(Ta,Oe,Qe)}},{key:"handleCharacterError",value:function(ke){var Oe=ke.data;this.eventEmitter.listenerCount(Oa)>0&&this.eventEmitter.emit(Oa,Oe)}},{key:"enableMic",value:function(){$t(qr,this).enablePeerMic(this.id)}},{key:"disableMic",value:function(){$t(qr,this).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){$t(qr,this).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){$t(qr,this).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(ke){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(Q=(0,R.A)(T().mark(function ke(Oe){return T().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:throw Oe.meetingId,Oe.payload,Oe.token,new Error("switchTo method is not supported on character");case 1:case"end":return Qe.stop()}},ke)})),function(ke){return Q.apply(this,arguments)})},{key:"pin",value:function(ke){throw new Error("pin method is not supported on character")}},{key:"on",value:function(ke,Oe){switch(ke){case kn:case bn:case Nr:case Er:case Or:case Jn:case Hn:case ha:case ca:case Ta:case Oa:this.eventEmitter.on(ke,Oe);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(ke,Oe){switch(ke){case kn:case bn:case Nr:case Er:case Or:case Jn:case Hn:case ha:case ca:case Ta:case Oa:this.eventEmitter.off(ke,Oe);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return $t(Yi,this)}},{key:"knowledgeBases",get:function(){return $t(ji,this)}},{key:"characterMode",get:function(){return $t(ai,this)}},{key:"characterRole",get:function(){return $t(ss,this)}},{key:"interactionId",get:function(){return $t(Ei,this)}},{key:"language",get:function(){return $t(os,this)}}]);var Q,de,Re,be,we,We}(Wt);function sn(W){bt(Yi,this,W)}function qn(W,K,Q){(function(de,Re){if(Re.has(de))throw new TypeError("Cannot initialize the same private elements twice on an object")})(W,K),K.set(W,Q)}function jn(W,K){return W.get(tr(W,K))}function tr(W,K,Q){if(typeof W=="function"?W===K:W.has(K))return arguments.length<3?K:Q;throw new TypeError("Private element is not present on this object")}var wn=new WeakMap,On=function(){return(0,S.A)(function K(Q,de){var Re,be,we,We=Q.id,ke=Q.displayName;(0,d.A)(this,K),qn(this,wn,void 0),this.id=We,this.displayName=ke,be=this,we=de,(Re=wn).set(tr(Re,be),we)},[{key:"switchTo",value:(W=(0,R.A)(T().mark(function K(Q){var de,Re,be;return T().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return de=Q.meetingId,Re=Q.payload,be=Q.token,we.next=1,zt.roomClient.connectionSwitchPeerRoom({roomId:de,connectionRoomId:jn(wn,this),payload:Re,peerId:this.id,token:be});case 1:case"end":return we.stop()}},K,this)})),function(K){return W.apply(this,arguments)})}]);var W}(),Ir="participant-joined",hr="participant-left",vr="chat-message",An=function(){return(0,S.A)(function K(Q,de){var Re=this;(0,d.A)(this,K),this.eventEmitter=new Ft.EventEmitter,this.id=Q,this.participants=new Map,de.forEach(function(be){Re.participants.set(be.id,new On(be,Re.id))})},[{key:"participantJoin",value:function(K){var Q=new On(K,this.id);this.participants.set(K.id,Q),this.eventEmitter.emit(Ir,Q)}},{key:"participantLeft",value:function(K){this.participants.delete(K),this.eventEmitter.emit(hr,K)}},{key:"sendChatMessage",value:function(K){zt.roomClient.connectionSendChatMessage({roomId:this.id,message:K})}},{key:"sendChatMessageEvent",value:function(K){var Q=K.participantId,de=K.message;this.eventEmitter.emit(vr,{participantId:Q,message:de})}},{key:"end",value:(W=(0,R.A)(T().mark(function K(){return T().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=1,zt.roomClient.connectionEndMeeting({roomId:this.id});case 1:case"end":return Q.stop()}},K,this)})),function(){return W.apply(this,arguments)})},{key:"on",value:function(K,Q){switch(K){case Ir:case hr:case vr:this.eventEmitter.on(K,Q);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(K,Q){switch(K){case Ir:case hr:case vr:this.eventEmitter.off(K,Q);break;default:throw new Error("Invalid event type")}}}]);var W}(),jr=function(){return(0,S.A)(function W(K){var Q=K.roomId,de=K.peers,Re=K.payload;(0,d.A)(this,W),this.id=Q,this.payload=Re,this.meeting=new An(Q,de)},[{key:"close",value:function(){zt.roomClient.closeConnection(this.id)}}])}();function Ea(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function ua(W){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?Ea(Object(Q),!0).forEach(function(de){(0,y.A)(W,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Q)):Ea(Object(Q)).forEach(function(de){Object.defineProperty(W,de,Object.getOwnPropertyDescriptor(Q,de))})}return W}function ya(W,K){if(K.has(W))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ja(W,K){return W.get(Ba(W,K))}function Ba(W,K,Q){if(typeof W=="function"?W===K:W.has(K))return arguments.length<3?K:Q;throw new TypeError("Private element is not present on this object")}var $a="error",Sa="meeting-joined",Qa="meeting-left",pi="participant-mode-changed",Ms="participant-joined",Qi="participant-left",cs="speaker-changed",mi="presenter-changed",to="main-participant-changed",Zs="chat-message",bs="entry-requested",Ls="entry-responded",ls="recording-state-changed",Ji="recording-started",us="recording-stopped",Io="livestream-state-changed",yr="livestream-started",xi="livestream-stopped",ta="hls-state-changed",Bi="hls-started",Is="hls-stopped",Wn="whiteboard-started",Ai="whiteboard-stopped",zi="video-state-changed",Ui="video-seeked",lr="mic-requested",Da="webcam-requested",Oi="stream-enabled",Eo="stream-disabled",ti="pin-state-changed",ws="connection-open",Ws="connection-close",Fa="switch-meeting",Xo="meeting-state-changed",Di="quality-limitation",Dr="paused-all-streams",Hi="resumed-all-streams",ni="transcription-state-changed",Es="transcription-text",So="character-joined",xo="character-left",js="media-relay-started",on="media-relay-stopped",ve="media-relay-error",Pt="media-relay-request-response",$n="media-relay-request-received",aa=new WeakMap,Va=new WeakSet,ii=function(){return(0,S.A)(function ue(he,Le,Ze){var tt,Jt,vt,Rt,xn,ct=this;(0,d.A)(this,ue),ya(tt=this,Jt=Va),Jt.add(tt),function(Ue,yt,fn){ya(Ue,yt),yt.set(Ue,fn)}(this,aa,void 0),(0,y.A)(this,"pubSub",{publish:(xn=(0,R.A)(T().mark(function Ue(yt,fn,nn,un){return T().wrap(function(Qn){for(;;)switch(Qn.prev=Qn.next){case 0:if(un==null){Qn.next=1;break}if((0,j.A)(un)=="object"){Qn.next=1;break}throw new Error('"payload" can only be object.');case 1:return Qn.next=2,ct.roomClient.pubsubPublish(yt,fn,nn,un);case 2:case"end":return Qn.stop()}},Ue)})),function(Ue,yt,fn,nn){return xn.apply(this,arguments)}),subscribe:(Rt=(0,R.A)(T().mark(function Ue(yt,fn){var nn;return T().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:if(!ja(aa,ct).listeners(yt).includes(fn)){un.next=1;break}return un.abrupt("return");case 1:return un.next=2,ct.roomClient.pubsubSubscribe(yt);case 2:return nn=un.sent,ja(aa,ct).on(yt,fn),un.abrupt("return",nn);case 3:case"end":return un.stop()}},Ue)})),function(Ue,yt){return Rt.apply(this,arguments)}),unsubscribe:(vt=(0,R.A)(T().mark(function Ue(yt,fn){return T().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(ja(aa,ct).off(yt,fn),ja(aa,ct).listeners(yt).length!=0){nn.next=1;break}return nn.next=1,ct.roomClient.pubsubUnsubscribe(yt);case 1:case"end":return nn.stop()}},Ue)})),function(Ue,yt){return vt.apply(this,arguments)})}),(0,y.A)(this,"uploadBase64File",function(){var Ue=(0,R.A)(T().mark(function yt(fn){var nn,un,Qn,xr,_n,dn,br,ur;return T().wrap(function(Gn){for(;;)switch(Gn.prev=Gn.next){case 0:if(nn=fn.base64Data,un=fn.token,Qn=fn.fileName,Gn.prev=1,nn&&un&&Qn){Gn.next=2;break}throw new Error("please provide base64Data, token and fileName");case 2:return xr="https://".concat(ct.baseUrl,"/base64-upload?roomId=").concat(ct.id),_n={fileName:Qn,base64Data:nn},Gn.next=3,fetch(xr,{method:"POST",body:JSON.stringify(_n),headers:{"Content-Type":"application/json",Authorization:un}});case 3:return dn=Gn.sent,Gn.next=4,dn.json();case 4:return br=Gn.sent,Gn.abrupt("return",br.url);case 5:Gn.prev=5,ur=Gn.catch(1),console.error("Error while Uploading Base64 File::",ur),ct.roomClient._videosdkLogs&&ct.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:ur.message}});case 6:case"end":return Gn.stop()}},yt,null,[[1,5]])}));return function(yt){return Ue.apply(this,arguments)}}()),(0,y.A)(this,"fetchBase64File",function(){var Ue=(0,R.A)(T().mark(function yt(fn){var nn,un,Qn,xr,_n,dn;return T().wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(nn=fn.url,un=fn.token,br.prev=1,nn&&un){br.next=2;break}throw new Error("please provide url and token");case 2:return br.next=3,fetch(nn,{headers:{Authorization:un}});case 3:return Qn=br.sent,br.next=4,Qn.arrayBuffer();case 4:return xr=br.sent,_n=window.btoa(new Uint8Array(xr).reduce(function(ur,Gn){return ur+String.fromCharCode(Gn)},"")),br.abrupt("return",_n);case 5:br.prev=5,dn=br.catch(1),console.error("Error while fetching Base64 File::",dn),ct.roomClient._videosdkLogs&&ct.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:dn.message}});case 6:case"end":return br.stop()}},yt,null,[[1,5]])}));return function(yt){return Ue.apply(this,arguments)}}()),this.id=he,this.roomClient=Ze,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=Le,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new Ft.EventEmitter,function(Ue,yt,fn){Ue.set(Ba(Ue,yt),fn)}(aa,this,new Ft.EventEmitter),this.eventEmitter.setMaxListeners(9999),ja(aa,this).setMaxListeners(9999),this.roomClient.on("ERROR",function(Ue){return ct.handleError(Ue)}),this.roomClient.on("ADD_PEER",function(Ue){return ct.handlePeerAdd(Ue)}),this.roomClient.on("REMOVE_PEER",function(Ue){return ct.handlePeerRemove(Ue)}),this.roomClient.on("STREAM_STATE_CHANGED",function(Ue){return ct.handleStreamState(Ue)}),this.roomClient.on("ADD_PRODUCER",function(Ue){return ct.handleProducerAdd(Ue)}),this.roomClient.on("UPDATE_PRODUCER",function(Ue){return ct.handleUpdateProducer(Ue)}),this.roomClient.on("REMOVE_PRODUCER",function(Ue){return ct.handleProducerRemove(Ue)}),this.roomClient.on("ADD_CONSUMER",function(Ue){return ct.handleConsumerAdd(Ue)}),this.roomClient.on("REMOVE_CONSUMER",function(Ue){return ct.handleConsumerRemove(Ue)}),this.roomClient.on("CONSUMER_RESUMED",function(Ue){return ct.handleConsumerResume(Ue)}),this.roomClient.on("CONSUMER_PAUSED",function(Ue){return ct.handleConsumerPause(Ue)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(Ue){return ct.handleParticipantMediaStateChanged(Ue)}),this.roomClient.on("CHAT_MESSAGE",function(Ue){return ct.handleNewChatMessage(Ue)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(Ue){return ct.handleSpeakerChange(Ue)}),this.roomClient.on("ENTRY_REQUESTED",function(Ue){return ct.handleEntryRequested(Ue)}),this.roomClient.on("ENTRY_RESPONDED",function(Ue){return ct.handleEntryResponded(Ue)}),this.roomClient.on("MEETING_JOINED",function(Ue){return ct.handleMeetingJoined(Ue)}),this.roomClient.on("MEETING_LEFT",function(Ue){return ct.handleMeetingLeft(Ue)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(Ue){ct.handleRecordingStateChanged(Ue)}),this.roomClient.on("RECORDING_STARTED",function(Ue){return ct.handleRecordingStarted(Ue)}),this.roomClient.on("RECORDING_STOPPED",function(Ue){return ct.handleRecordingStopped(Ue)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(Ue){ct.handleLivestreamStateChanged(Ue)}),this.roomClient.on("LIVESTREAM_STARTED",function(Ue){return ct.handleLivestreamStarted(Ue)}),this.roomClient.on("LIVESTREAM_STOPPED",function(Ue){return ct.handleLivestreamStopped(Ue)}),this.roomClient.on("HLS_STATE_CHANGED",function(Ue){ct.handleHlsStateChanged(Ue)}),this.roomClient.on("HLS_STARTED",function(Ue){ct.handleHlsStarted(Ue)}),this.roomClient.on("HLS_STOPPED",function(Ue){ct.handleHlsStopped(Ue)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(Ue){ct.handleTranscriptionStateChanged(Ue)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(Ue){ct.handleTranscriptionText(Ue)}),this.roomClient.on("SUB_MANAGER_RESUMED",function(Ue){ct.handleParticipantResumeBySubManager(Ue)}),this.roomClient.on("SUB_MANAGER_PAUSED",function(Ue){ct.handleParticipantPausedBySubManager(Ue)}),this.roomClient.on("WHITEBOARD_STARTED",function(Ue){return ct.handleWhiteboardStarted(Ue)}),this.roomClient.on("WHITEBOARD_STOPPED",function(Ue){return ct.handleWhiteboardStopped(Ue)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(Ue){return ct.handleVideoStateChanged(Ue)}),this.roomClient.on("VIDEO_SEEKED",function(Ue){return ct.handleVideoSeeked(Ue)}),this.roomClient.on("PIN_STATE_CHANGED",function(Ue){ct.handlePinStateChanged(Ue)}),this.roomClient.on("MIC_REQUESTED",function(Ue){return ct.handleMicRequested(Ue)}),this.roomClient.on("WEBCAM_REQUESTED",function(Ue){return ct.handleWebcamRequested(Ue)}),this.roomClient.on("CONNECTION_OPEN",function(Ue){return ct.handleConnectionOpen(Ue)}),this.roomClient.on("CONNECTION_CLOSE",function(Ue){return ct.handleConnectionClose(Ue)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(Ue){return ct.handleConnectionParticipantJoin(Ue)}),this.roomClient.on("SWITCH_ROOM",function(Ue){return ct.handleSwitchMeeting(Ue)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(Ue){return ct.handleConnectionChatMessage(Ue)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(Ue){ct.handleConnectionParticipantLeft(Ue)}),this.roomClient.on("PUBSUB_MESSAGE",function(Ue){return Ba(Va,ct,Dc).call(ct,Ue)}),this.roomClient.on("PEER_MODE_CHANGED",function(Ue){return Ba(Va,ct,Mc).call(ct,Ue)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(Ue){return ct.handleMeetingStateChanged(Ue)}),this.roomClient.on("QUALITY_LIMITATION_INTERNAL",function(Ue){return ct.handleQualityChanged(Ue)}),this.roomClient.on("ALL_CONSUMERS_PAUSED",function(Ue){return ct.handleConsumersPaused(Ue)}),this.roomClient.on("ALL_CONSUMERS_RESUMED",function(Ue){return ct.handleConsumersResumed(Ue)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(Ue){return ct.handleVideoQualityChanged(Ue)}),this.roomClient.on("ADD_CHARACTER",function(Ue){return ct.handleAddCharacter(Ue)}),this.roomClient.on("INIT_CHARACTER",function(Ue){return ct.handleInitCharacter(Ue)}),this.roomClient.on("REMOVE_CHARACTER",function(Ue){return ct.handleRemoveCharacter(Ue)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(Ue){return ct.handleCharacterStateChanged(Ue)}),this.roomClient.on("CHARACTER_MESSAGE",function(Ue){return ct.handleCharacterMessage(Ue)}),this.roomClient.on("USER_MESSAGE",function(Ue){return ct.handleUserMessage(Ue)}),this.roomClient.on("CHARACTER_DATA",function(Ue){return ct.handleOnCharacterData(Ue)}),this.roomClient.on("CHARACTER_ERROR",function(Ue){return ct.handleOnCharacterError(Ue)}),this.roomClient.on("E2EE_STATE_CHANGE",function(Ue){return ct.handleE2EEStateChange(Ue)}),this.roomClient.on("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING",function(){return ct.handleOnRemoveCurrentMeetingParticipant()}),this.roomClient.on("MEDIA_RELAY_STARTED",function(Ue){return ct.handleMediaRelayStart(Ue)}),this.roomClient.on("MEDIA_RELAY_STOPPED",function(Ue){return ct.handleMediaRelayStop(Ue)}),this.roomClient.on("MEDIA_RELAY_ERROR",function(Ue){return ct.handleMediaRelayError(Ue)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RESPONSE",function(Ue){return ct.handleMediaRelayRequestResponse(Ue)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RECEIVED",function(Ue){return ct.handleMediaRelayRequest(Ue)})},[{key:"isE2EEEnabled",get:function(){return this.roomClient.isE2EEEnabled}},{key:"handleError",value:function(ue){this.eventEmitter.listenerCount($a)>0&&this.eventEmitter.emit($a,ue)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(ue){this.roomClient.changeMode(ue)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(ue,he){this.roomClient.respondEntry(ue,he)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(ue)}},{key:"publishAudio",value:(et=(0,R.A)(T().mark(function ue(){var he,Le=arguments;return T().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return he=Le.length>0&&Le[0]!==void 0?Le[0]:void 0,Ze.next=1,this.roomClient.enableMic(he);case 1:return Ze.abrupt("return");case 2:case"end":return Ze.stop()}},ue,this)})),function(){return et.apply(this,arguments)})},{key:"unpublishAudio",value:(Ae=(0,R.A)(T().mark(function ue(){return T().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=1,this.roomClient.disableMic();case 1:return he.abrupt("return");case 2:case"end":return he.stop()}},ue,this)})),function(){return Ae.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(ue)}},{key:"publishVideo",value:($e=(0,R.A)(T().mark(function ue(){var he,Le=arguments;return T().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return he=Le.length>0&&Le[0]!==void 0?Le[0]:void 0,this.roomClient.enableWebcam(he),Ze.abrupt("return");case 1:case"end":return Ze.stop()}},ue,this)})),function(){return $e.apply(this,arguments)})},{key:"unpublishVideo",value:(Qe=(0,R.A)(T().mark(function ue(){return T().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return this.roomClient.disableWebcam(),he.abrupt("return");case 1:case"end":return he.stop()}},ue,this)})),function(){return Qe.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(ue)}},{key:"pubblishScreenShare",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(ue)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(ue){this.roomClient.sendChatMessage(ue);var he={text:ue,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(he)}},{key:"pauseAllStreams",value:function(ue){this.roomClient.pauseAllConsumers(ue)}},{key:"resumeAllStreams",value:function(ue){this.roomClient.resumeAllConsumers(ue)}},{key:"startRecording",value:function(ue,he,Le,Ze){this.roomClient.startRecording(ue,he,Le,Ze)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(ue){this.roomClient.startTranscription(ue)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startLivestream",value:function(ue,he){this.roomClient.startLivestream(ue,he)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(Oe=(0,R.A)(T().mark(function ue(he,Le){return T().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Ze.next=1,this.roomClient.startHls(he,Le);case 1:case"end":return Ze.stop()}},ue,this)})),function(ue,he){return Oe.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(ue){if(!ue.interactionId&&!ue.id)throw new Error("InteractionId or id is required");return new Ni(ua(ua({},ue),{},{roomClient:this.roomClient}))}},{key:"getMics",value:(ke=(0,R.A)(T().mark(function ue(){return T().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=1,this.roomClient.getMics();case 1:return he.abrupt("return",he.sent);case 2:case"end":return he.stop()}},ue,this)})),function(){return ke.apply(this,arguments)})},{key:"getWebcams",value:(We=(0,R.A)(T().mark(function ue(){return T().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=1,this.roomClient.getWebcams();case 1:return he.abrupt("return",he.sent);case 2:case"end":return he.stop()}},ue,this)})),function(){return We.apply(this,arguments)})},{key:"changeMic",value:function(ue){this.roomClient.changeMic(ue)}},{key:"changeWebcam",value:function(ue){this.roomClient.changeWebcam(ue)}},{key:"replaceWebcamStream",value:function(ue){this.roomClient.replaceWebcamStream(ue)}},{key:"setWebcamQuality",value:function(ue){this.roomClient.setWebcamQuality(ue)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(ue){var he=ue.link;this.roomClient.startVideo({link:he})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(ue){var he=ue.currentTime;this.roomClient.pauseVideo(he)}},{key:"seekVideo",value:function(ue){var he=ue.currentTime;this.roomClient.seekVideo(he)}},{key:"handlePeerAdd",value:function(ue){var he=ue.peer,Le=new Wt(he);this.participants.set(Le.id,Le),this.eventEmitter.emit(Ms,Le),this.participants.size===1&&this.updateMainParticipant(Le.id)}},{key:"handleStreamState",value:function(ue){var he=ue.state,Le=ue.peerId,Ze=ue.streamId,tt=this.participants.get(Le);tt?.handleStreamStateChanged({state:he,peerId:Le,streamId:Ze})}},{key:"handlePeerRemove",value:function(ue){var he=ue.peerId,Le=this.participants.get(he);Le!=null&&(this.participants.delete(he),this.eventEmitter.emit(Qi,Le),this.activePresenterId===Le.id&&(this.activePresenterId=null,this.eventEmitter.emit(mi,this.activePresenterId)),this.mainParticipantId===Le.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(ue){var he=ue.producer,Le={id:he.id,rtpSender:he.rtpSender};this.localParticipant.addProducer(Le);var Ze=new Hr(he);this.localParticipant.addStream(Ze),Ze.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(mi,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(ue){var he=ue.producer,Le=new Hr(he);this.localParticipant.updateStream(Le)}},{key:"handleProducerRemove",value:function(ue){var he=ue.producerId;this.localParticipant.removeProducer(he);var Le=this.localParticipant.deleteStream(he);if(Le&&Le.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(mi,this.activePresenterId);var Ze=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Ze||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(ue){var he=ue.consumer,Le=ue.peerId,Ze=this.participants.get(Le)||this.characters.get(Le);if(Ze){var tt={id:he.id,rtpReceiver:he.rtpReceiver};Ze.addConsumer(tt);var Jt=new Hr(he);Ze.addStream(Jt),this.eventEmitter.emit(Oi,Jt),Jt.kind==="share"&&(this.activePresenterId=Ze.id,this.eventEmitter.emit(mi,this.activePresenterId),this.updateMainParticipant(Ze.id))}}},{key:"handleConsumerResume",value:function(ue){var he=ue.consumerId,Le=ue.peerId,Ze=this.participants.get(Le);Ze&&Ze.streamResumed(he)}},{key:"handleConsumerPause",value:function(ue){var he=ue.consumerId,Le=ue.peerId,Ze=this.participants.get(Le);Ze&&Ze.streamPaused(he)}},{key:"handleConsumerRemove",value:function(ue){var he=ue.consumerId,Le=ue.peerId,Ze=this.participants.get(Le)||this.characters.get(Le);if(Ze!=null&&Ze){Ze.removeConsumer(he);var tt=Ze.deleteStream(he);if(this.eventEmitter.emit(Eo,tt),tt&&tt.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(mi,this.activePresenterId);var Jt=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Jt||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(ue){var he=ue.peerId,Le=ue.kind,Ze=ue.newState,tt=this.participants.get(he)||this.characters.get(he);this.localParticipant.id==he&&(tt=this.localParticipant),tt&&tt&&(Le=="audio"?tt.micOn=Ze:Le=="video"&&(tt.webcamOn=Ze),tt.updateParticipantMediaState(Le,Ze))}},{key:"handleParticipantPausedBySubManager",value:function(ue){var he=this.participants.get(ue.peerId);he&&he&&he.handleParticipantPause(ue)}},{key:"handleParticipantResumeBySubManager",value:function(ue){var he=this.participants.get(ue.peerId);he&&he&&he.handleParticipantResume(ue)}},{key:"handleSpeakerChange",value:function(ue){var he=ue.peerId;this.activeSpeakerId!==he&&(this.activeSpeakerId=he,this.eventEmitter.emit(cs,he),he&&he!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&he!==this.mainParticipantId&&this.updateMainParticipant(he))}},{key:"handleNewChatMessage",value:function(ue){var he=ue.senderId,Le={senderId:he,text:ue.text,timestamp:ue.timestamp};if(this.localParticipant.id===he)Le.senderName=this.localParticipant.displayName;else{var Ze=this.participants.get(he);Ze&&(Le.senderName=Ze.displayName)}this.messages.push(Le),this.eventEmitter.emit(Zs,Le)}},{key:"updateMainParticipant",value:function(ue){this.mainParticipantId=ue;var he=null;he=ue===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(to,he)}},{key:"handleEntryRequested",value:function(ue){var he=this,Le=ue.id,Ze=ue.name;this.eventEmitter.emit(bs,{participantId:Le,name:Ze,allow:function(){he.roomClient.respondEntry(Le,"allowed")},deny:function(){he.roomClient.respondEntry(Le,"denied")}})}},{key:"handleEntryResponded",value:function(ue){var he=ue.id,Le=ue.decision;this.eventEmitter.emit(Ls,he,Le)}},{key:"handleMeetingJoined",value:function(ue){var he=ue.peers,Le=ue.poll,Ze=ue.messages,tt=ue.baseUrl,Jt=ue.switchRoomId;typeof Jt=="string"&&(this.id=Jt),this.baseUrl=tt,Ze.length>0&&(this.messages=Ze),this.eventEmitter.emit(Sa,{switchRoomId:Jt||null,peers:he,poll:Le,messages:Ze})}},{key:"handleMeetingLeft",value:function(ue){this.eventEmitter.emit(Qa,ue)}},{key:"handleRecordingStateChanged",value:function(ue){this.recordingState=ue.status,this.eventEmitter.emit(ls,ue)}},{key:"handleLivestreamStateChanged",value:function(ue){this.livestreamState=ue.status,this.eventEmitter.emit(Io,ue)}},{key:"handleHlsStateChanged",value:function(ue){this.hlsState=ue.status,ue.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:ue.downstreamUrl,playbackHlsUrl:ue.playbackHlsUrl,livestreamUrl:ue.livestreamUrl}:ue.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(ta,ue)}},{key:"handleTranscriptionStateChanged",value:function(ue){this.transcriptionState=ue.status,this.eventEmitter.emit(ni,ue)}},{key:"handleTranscriptionText",value:function(ue){this.eventEmitter.emit(Es,ue)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(Ji)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(us)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(yr)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(xi)}},{key:"handleHlsStarted",value:function(ue){this.eventEmitter.emit(Bi,ue)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(Is)}},{key:"handleWhiteboardStarted",value:function(ue){this.eventEmitter.emit(Wn,ue)}},{key:"handleWhiteboardStopped",value:function(ue){(function(he){if(he==null)throw new TypeError("Cannot destructure "+he)})(ue),this.eventEmitter.emit(Ai)}},{key:"handleAddCharacter",value:function(ue){var he,Le=ue.id,Ze=(he=this.characters.get(Le))!==null&&he!==void 0?he:new Ni(ua(ua({},ue),{},{state:Xe.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(Le,Ze),this.eventEmitter.emit(So,Ze),Ze.eventEmitter.emit(So)}},{key:"handleInitCharacter",value:function(ue){this.characters.set(ue.id,ue)}},{key:"handleRemoveCharacter",value:function(ue){var he=ue.id;if(this.characters.has(he)){var Le=this.characters.get(he);this.eventEmitter.emit(xo,Le),Le.eventEmitter.emit(xo),this.characters.delete(he)}}},{key:"handleCharacterStateChanged",value:function(ue){var he=ue.id;this.characters.has(he)&&this.characters.get(he).handleCharacterStateChanged(ue)}},{key:"handleCharacterMessage",value:function(ue){var he=ue.id;this.characters.has(he)&&this.characters.get(he).handleCharacterMessage(ue)}},{key:"handleUserMessage",value:function(ue){var he=ue.id;this.characters.has(he)&&this.characters.get(he).handleUserMessage(ue)}},{key:"handleOnCharacterData",value:function(ue){var he=ue.id;this.characters.has(he)&&this.characters.get(he).handleCharacterData(ue)}},{key:"handleOnCharacterError",value:function(ue){var he=ue.id;this.characters.has(he)&&this.characters.get(he).handleCharacterError(ue)}},{key:"handleOnRemoveCurrentMeetingParticipant",value:function(){var ue=this;(0,qe.A)(this.participants.keys()).forEach(function(he){he!==ue.localParticipant.id&&ue.handlePeerRemove({peerId:he})})}},{key:"handleVideoStateChanged",value:function(ue){this.eventEmitter.emit(zi,ue)}},{key:"handleVideoSeeked",value:function(ue){var he=ue.currentTime;this.eventEmitter.emit(Ui,{currentTime:he})}},{key:"handlePinStateChanged",value:function(ue){var he=ue.peerId,Le=ue.state,Ze=ue.pinnedBy;this.eventEmitter.emit(ti,{participantId:he,state:Le,pinnedBy:Ze})}},{key:"handleMeetingStateChanged",value:function(ue){var he=ue.state;this.eventEmitter.emit(Xo,{state:he})}},{key:"handleQualityChanged",value:function(ue){var he=ue.type,Le=ue.state,Ze=ue.timestamp;this.eventEmitter.emit(Di,{type:he,state:Le,timestamp:Ze})}},{key:"handleConsumersPaused",value:function(ue){var he=ue.kind;this.eventEmitter.emit(Dr,{kind:he})}},{key:"handleConsumersResumed",value:function(ue){var he=ue.kind;this.eventEmitter.emit(Hi,{kind:he})}},{key:"handleVideoQualityChanged",value:function(ue){var he=ue.peerId,Le=ue.prevQuality,Ze=ue.currentQuality,tt=this.participants.get(he)||this.characters.get(he);tt&&tt&&tt.videoQualityChanged(Le,Ze)}},{key:"handleMicRequested",value:function(ue){var he=this,Le=ue.peerId;this.eventEmitter.emit(lr,{participantId:Le,accept:function(){return he.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(ue){var he=this,Le=ue.peerId;this.eventEmitter.emit(Da,{participantId:Le,accept:function(){return he.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(ue){var he=ue.roomId,Le=ue.peer,Ze=this.connections.get(he);Ze?.meeting.participantJoin(Le)}},{key:"handleConnectionParticipantLeft",value:function(ue){var he=ue.roomId,Le=ue.peerId,Ze=this.connections.get(he);Ze?.meeting.participantLeft(Le)}},{key:"handleConnectionOpen",value:function(ue){var he=ue.peers,Le=ue.roomId,Ze=ue.payload,tt=new jr({roomId:Le,peers:he,payload:Ze});this.connections.set(tt.id,tt),this.eventEmitter.emit(ws,tt)}},{key:"handleConnectionClose",value:function(ue){var he=ue.roomId;this.connections.get(he)!=null&&(this.connections.delete(he),this.eventEmitter.emit(Ws,he))}},{key:"handleMediaRelayError",value:function(ue){var he=ue.meetingId,Le=ue.error;this.eventEmitter.emit(ve,{meetingId:he,error:Le})}},{key:"handleMediaRelayRequest",value:function(ue){var he=this,Le=ue.peerId,Ze=ue.meetingId,tt=ue.displayName;this.eventEmitter.emit($n,{participantId:Le,meetingId:Ze,displayName:tt,accept:function(){return he.roomClient.handleRelayRequestResponse({decision:"allowed",meetingId:Ze,peerId:Le})},reject:function(){return he.roomClient.handleRelayRequestResponse({decision:"denied",meetingId:Ze,peerId:Le})}})}},{key:"handleMediaRelayRequestResponse",value:function(ue){var he=ue.decision,Le=ue.decidedBy,Ze=ue.meetingId;this.eventEmitter.emit(Pt,{decision:he,decidedBy:Le,meetingId:Ze})}},{key:"handleMediaRelayStart",value:function(ue){var he=ue.meetingId;this.eventEmitter.emit(js,{meetingId:he})}},{key:"handleMediaRelayStop",value:function(ue){var he=ue.meetingId,Le=ue.reason;this.eventEmitter.emit(on,{meetingId:he,reason:Le})}},{key:"requestMediaRelay",value:(we=(0,R.A)(T().mark(function ue(he){var Le,Ze,tt;return T().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:if(Le=he.destinationMeetingId,Ze=he.token,tt=he.kinds,Le){Jt.next=1;break}throw new Error("Parameter destinationMeetingId is required when calling requestMediaRelay.");case 1:return Jt.next=2,this.roomClient.requestMediaRelay(Le,Ze,tt);case 2:case"end":return Jt.stop()}},ue,this)})),function(ue){return we.apply(this,arguments)})},{key:"stopMediaRelay",value:(be=(0,R.A)(T().mark(function ue(he){return T().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(he){Le.next=1;break}throw new Error("Parameter destinationMeetingId is required when calling stopMediaRelay.");case 1:return Le.next=2,this.roomClient.stopMediaRelay(he);case 2:case"end":return Le.stop()}},ue,this)})),function(ue){return be.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(Re=(0,R.A)(T().mark(function ue(){return T().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=1,this.roomClient.enableAdaptiveSubscription();case 1:case"end":return he.stop()}},ue,this)})),function(){return Re.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(de=(0,R.A)(T().mark(function ue(){return T().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=1,this.roomClient.disableAdaptiveSubscription();case 1:case"end":return he.stop()}},ue,this)})),function(){return de.apply(this,arguments)})},{key:"enableE2EE",value:(Q=(0,R.A)(T().mark(function ue(){return T().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=1,this.roomClient.toggleE2EEEnabled(!0);case 1:case"end":return he.stop()}},ue,this)})),function(){return Q.apply(this,arguments)})},{key:"disableE2EE",value:(K=(0,R.A)(T().mark(function ue(){return T().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=1,this.roomClient.toggleE2EEEnabled(!1);case 1:case"end":return he.stop()}},ue,this)})),function(){return K.apply(this,arguments)})},{key:"handleSwitchMeeting",value:function(ue){var he=ue.roomId,Le=ue.token,Ze=ue.payload,tt=ue.peerId,Jt=ue.connectionPeerId,vt=ue.connectionRoomId,Rt=tt?{meetingId:he,payload:Ze,token:Le,participantId:tt}:{meetingId:he,payload:Ze,token:Le,connectionParticipantId:Jt,connectionMeetingId:vt};this.eventEmitter.emit(Fa,Rt)}},{key:"handleConnectionChatMessage",value:function(ue){var he=ue.roomId,Le=ue.peerId,Ze=ue.message,tt=this.connections.get(he);tt?.meeting.sendChatMessageEvent({participantId:Le,message:Ze})}},{key:"handleE2EEStateChange",value:function(ue){var he=ue.peerId,Le=this.localParticipant.id==he?this.localParticipant:this.participants.get(he)||this.characters.get(he);Le&&Le&&Le.handleE2EEStateChange(ue)}},{key:"connectTo",value:(W=(0,R.A)(T().mark(function ue(he){var Le,Ze;return T().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return Le=he.meetingId,Ze=he.payload,tt.next=1,this.roomClient.openConnection({roomId:Le,payload:Ze});case 1:case"end":return tt.stop()}},ue,this)})),function(ue){return W.apply(this,arguments)})},{key:"switchTo",value:function(ue){var he=ue.meetingId,Le=ue.token;if(!he||typeof he!="string"||he.trim()==="")throw new Error("Invalid meetingId: must be a non-empty string");this.roomClient.switchTo({meetingId:he,token:Le,participantId:this.localParticipant.id})}},{key:"selectedCameraDevice",get:function(){var ue;return(ue=this.roomClient._webcam)===null||ue===void 0?void 0:ue.device}},{key:"selectedMicrophoneDevice",get:function(){var ue;return(ue=this.roomClient._mic)===null||ue===void 0?void 0:ue.device}},{key:"on",value:function(ue,he){switch(ue){case Ms:case Qi:case cs:case mi:case to:case Zs:case bs:case Ls:case ls:case Ji:case us:case Io:case yr:case xi:case Bi:case Is:case ta:case ni:case Es:case Oi:case Eo:case Wn:case Ai:case So:case xo:case Sa:case Qa:case zi:case Ui:case lr:case Da:case ti:case ws:case Ws:case Fa:case Xo:case pi:case Dr:case Hi:case js:case on:case ve:case $n:case Pt:case $a:case Di:this.eventEmitter.on(ue,he);break;default:throw new Error("Invalid event type "+ue)}}},{key:"off",value:function(ue,he){switch(ue){case Ms:case Qi:case cs:case mi:case to:case Zs:case bs:case Ls:case ls:case Ji:case us:case Io:case yr:case xi:case ta:case Bi:case Is:case ni:case Es:case Oi:case Eo:case Wn:case Ai:case So:case xo:case Sa:case Qa:case zi:case Ui:case lr:case Da:case ti:case ws:case Ws:case Fa:case Xo:case $a:case js:case on:case ve:case $n:case Pt:case pi:case Dr:case Hi:case Di:this.eventEmitter.off(ue,he);break;default:throw new Error("Invalid event type.")}}}]);var W,K,Q,de,Re,be,we,We,ke,Oe,Qe,$e,Ae,et}();function Dc(W){var K=W.topic,Q=W.message,de=W.senderId,Re=W.timestamp,be=W.senderName,we=W.id,We=W.payload;K&&Q&&ja(aa,this).emit(K,{message:Q,senderId:de,timestamp:Re,topic:K,senderName:be,id:we,payload:We})}function Mc(W){var K=W.peerId,Q=W.mode;K===this.localParticipant.id?this.localParticipant.mode=Q:this.participants.get(K).mode=Q,this.activePresenterId!==this.localParticipant.id||(0,Sn.kR)(Q)||(this.activePresenterId=null,this.eventEmitter.emit(mi,this.activePresenterId)),this.eventEmitter.emit(pi,{participantId:K,mode:Q})}var kr=N(7080),Lc=N(5071),jo=N(4973),no=N(9027);function $s(W,K,Q){return K=(0,tn.A)(K),(0,Tt.A)(W,Ss()?Reflect.construct(K,Q||[],(0,tn.A)(W).constructor):K.apply(W,Q))}function Ss(){try{var W=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ss=function(){return!!W})()}var Gs=function(W){function K(Q,de,Re,be){return(0,d.A)(this,K),$s(this,K,[Q,de,Re,be])}return(0,Xt.A)(K,W),(0,S.A)(K)}((0,S.A)(function W(K,Q,de,Re){(0,d.A)(this,W),this.deviceId=K,this.groupId=Q,this.kind=de,this.label=Re})),bc=function(W){function K(Q,de,Re,be){return(0,d.A)(this,K),$s(this,K,[Q,de,Re,be])}return(0,Xt.A)(K,W),(0,S.A)(K)}(Gs),Ic=function(W){function K(Q,de,Re,be){return(0,d.A)(this,K),$s(this,K,[Q,de,Re,be])}return(0,Xt.A)(K,W),(0,S.A)(K)}(Gs),ec=function(W){function K(Q,de,Re,be){return(0,d.A)(this,K),$s(this,K,[Q,de,Re,be])}return(0,Xt.A)(K,W),(0,S.A)(K)}(Gs),Ri={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},il=(N(328),N(7654));function tc(W,K){return W==null||K==null?NaN:W<K?-1:W>K?1:W>=K?0:NaN}function nc(W,K){return W==null||K==null?NaN:K<W?-1:K>W?1:K>=W?0:NaN}function ro(W){let K,Q,de;function Re(be,we,We=0,ke=be.length){if(We<ke){if(K(we,we)!==0)return ke;do{const Oe=We+ke>>>1;Q(be[Oe],we)<0?We=Oe+1:ke=Oe}while(We<ke)}return We}return W.length!==2?(K=tc,Q=(be,we)=>tc(W(be),we),de=(be,we)=>W(be)-we):(K=W===tc||W===nc?W:sl,Q=W,de=W),{left:Re,center:function(be,we,We=0,ke=be.length){const Oe=Re(be,we,We,ke-1);return Oe>We&&de(be[Oe-1],we)>-de(be[Oe],we)?Oe-1:Oe},right:function(be,we,We=0,ke=be.length){if(We<ke){if(K(we,we)!==0)return ke;do{const Oe=We+ke>>>1;Q(be[Oe],we)<=0?We=Oe+1:ke=Oe}while(We<ke)}return We}}}function sl(){return 0}const xa=ro(tc),Ma=xa.right,jc=(ro(function(W){return W===null?NaN:+W}).center,Ma);function Bc(W,K){switch(arguments.length){case 0:break;case 1:this.range(W);break;default:this.range(K).domain(W)}return this}function ft(){var W,K=[.5],Q=[0,1],de=1;function Re(be){return be!=null&&be<=be?Q[jc(K,be,0,de)]:W}return Re.domain=function(be){return arguments.length?(K=Array.from(be),de=Math.min(K.length,Q.length-1),Re):K.slice()},Re.range=function(be){return arguments.length?(Q=Array.from(be),de=Math.min(K.length,Q.length-1),Re):Q.slice()},Re.invertExtent=function(be){var we=Q.indexOf(be);return[K[we-1],K[we]]},Re.unknown=function(be){return arguments.length?(W=be,Re):W},Re.copy=function(){return ft().domain(K).range(Q).unknown(W)},Bc.apply(Re,arguments)}function ao(W,K){(K==null||K>W.length)&&(K=W.length);for(var Q=0,de=Array(K);Q<K;Q++)de[Q]=W[Q];return de}function Xn(W,K,Q){if(typeof W=="function"?W===K:W.has(K))return arguments.length<3?K:Q;throw new TypeError("Private element is not present on this object")}function rc(W,K,Q){return K=Y(K),function(de,Re){if(Re&&(typeof Re=="object"||typeof Re=="function"))return Re;if(Re!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(be){if(be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be}(de)}(W,De()?Reflect.construct(K,Q||[],Y(W).constructor):K.apply(W,Q))}function io(W,K){if(K.has(W))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hi(W,K){if(!(W instanceof K))throw new TypeError("Cannot call a class as a function")}function fe(W,K){return W.get(Xn(W,K))}function Cn(W,K,Q){io(W,K),K.set(W,Q)}function Dn(W,K,Q){return W.set(Xn(W,K),Q),Q}function Bo(W,K){io(W,K),K.add(W)}function Ra(W,K,Q){return K&&function(de,Re){for(var be=0;be<Re.length;be++){var we=Re[be];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(de,Fr(we.key),we)}}(W.prototype,K),Object.defineProperty(W,"prototype",{writable:!1}),W}function te(W,K,Q){return(K=Fr(K))in W?Object.defineProperty(W,K,{value:Q,enumerable:!0,configurable:!0,writable:!0}):W[K]=Q,W}function $(){return $=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(W,K,Q){var de=zn(W,K);if(de){var Re=Object.getOwnPropertyDescriptor(de,K);return Re.get?Re.get.call(arguments.length<3?W:Q):Re.value}},$.apply(null,arguments)}function Y(W){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(K){return K.__proto__||Object.getPrototypeOf(K)},Y(W)}function oe(W,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(K&&K.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),Object.defineProperty(W,"prototype",{writable:!1}),K&&Tn(W,K)}function De(){try{var W=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(De=function(){return!!W})()}function rt(W,K){var Q=Object.keys(W);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(W);K&&(de=de.filter(function(Re){return Object.getOwnPropertyDescriptor(W,Re).enumerable})),Q.push.apply(Q,de)}return Q}function St(W){for(var K=1;K<arguments.length;K++){var Q=arguments[K]!=null?arguments[K]:{};K%2?rt(Object(Q),!0).forEach(function(de){te(W,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Q)):rt(Object(Q)).forEach(function(de){Object.defineProperty(W,de,Object.getOwnPropertyDescriptor(Q,de))})}return W}function Dt(W,K){if(W==null)return{};var Q,de,Re=function(we,We){if(we==null)return{};var ke={};for(var Oe in we)if({}.hasOwnProperty.call(we,Oe)){if(We.indexOf(Oe)!==-1)continue;ke[Oe]=we[Oe]}return ke}(W,K);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(W);for(de=0;de<be.length;de++)Q=be[de],K.indexOf(Q)===-1&&{}.propertyIsEnumerable.call(W,Q)&&(Re[Q]=W[Q])}return Re}function _t(W,K,Q,de){return _t=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(Re,be,we,We){var ke,Oe=zn(Re,be);if(Oe){if((ke=Object.getOwnPropertyDescriptor(Oe,be)).set)return ke.set.call(We,we),!0;if(!ke.writable)return!1}if(ke=Object.getOwnPropertyDescriptor(We,be)){if(!ke.writable)return!1;ke.value=we,Object.defineProperty(We,be,ke)}else te(We,be,we);return!0},_t(W,K,Q,de)}function Tn(W,K){return Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Q,de){return Q.__proto__=de,Q},Tn(W,K)}function Vt(W,K){return function(Q){if(Array.isArray(Q))return Q}(W)||function(Q,de){var Re=Q==null?null:typeof Symbol<"u"&&Q[Symbol.iterator]||Q["@@iterator"];if(Re!=null){var be,we,We,ke,Oe=[],Qe=!0,$e=!1;try{if(We=(Re=Re.call(Q)).next,de===0){if(Object(Re)!==Re)return;Qe=!1}else for(;!(Qe=(be=We.call(Re)).done)&&(Oe.push(be.value),Oe.length!==de);Qe=!0);}catch(Ae){$e=!0,we=Ae}finally{try{if(!Qe&&Re.return!=null&&(ke=Re.return(),Object(ke)!==ke))return}finally{if($e)throw we}}return Oe}}(W,K)||ia(W,K)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zn(W,K){for(;!{}.hasOwnProperty.call(W,K)&&(W=Y(W))!==null;);return W}function vn(W,K,Q,de,Re,be){return function(we,We,ke,Oe,Qe){if(!_t(we,We,ke,Oe||we)&&Qe)throw new TypeError("failed to set property");return ke}(Y(W.prototype),K,Q,de,Re)}function Yr(W){return function(K){if(Array.isArray(K))return ao(K)}(W)||function(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}(W)||ia(W)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fr(W){var K=function(Q,de){if(typeof Q!="object"||!Q)return Q;var Re=Q[Symbol.toPrimitive];if(Re!==void 0){var be=Re.call(Q,de);if(typeof be!="object")return be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Q)}(W,"string");return typeof K=="symbol"?K:K+""}function ia(W,K){if(W){if(typeof W=="string")return ao(W,K);var Q={}.toString.call(W).slice(8,-1);return Q==="Object"&&W.constructor&&(Q=W.constructor.name),Q==="Map"||Q==="Set"?Array.from(W):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?ao(W,K):void 0}}var Qr="https://speed.cloudflare.com",xs={autoStart:!0,downloadApiUrl:"".concat(Qr,"/__down"),uploadApiUrl:"".concat(Qr,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(Qr,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(Qr,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},Rs={aimMeasurementScoring:{packetLoss:ft([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:ft([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:ft([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:ft([10,20,100,500],[10,5,0,-10,-20]),download:ft([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:ft([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},Xi=function(W){var K=W.headers.get("server-timing");if(K){var Q=K.match(/dur=([0-9.]+)/);if(Q)return+Q[1]}},Ks=function(W){return W.responseStart-W.requestStart},Ys=function(W){return W.responseEnd-W.responseStart},so=function(W){return W.ping+W.payloadDownloadTime},Mi=function(W){return W.ttfb},Fi=function(W,K){var Q=W.duration,de=W.transferSize,Re=Q/1e3;return Re?8*(de||1.005*+K)/Re:void 0},oo=function(W,K){var Q=W.duration/1e3;return Q?8*K*1.005/Q:void 0},ac=il(function(W){return"0".repeat(W)}),zo=new WeakMap,Vi=new WeakMap,Bs=new WeakMap,Ro=new WeakMap,ic=new WeakMap,ks=new WeakMap,Uo=new WeakMap,qi=new WeakMap,Cs=new WeakMap,wc=new WeakMap,ko=new WeakMap,Ho=new WeakMap,co=new WeakMap,Co=new WeakMap,ki=new WeakMap,fi=new WeakMap,ds=new WeakMap,ri=new WeakMap,gi=new WeakMap,Qs=new WeakMap,Zi=new WeakMap,lo=new WeakMap,vi=new WeakSet,Js=function(){return Ra(function W(K){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=Q.downloadApiUrl,Re=Q.uploadApiUrl,be=Q.throttleMs,we=be===void 0?0:be,We=Q.estimatedServerTime,ke=We===void 0?0:We;if(hi(this,W),Bo(this,vi),Cn(this,zo,{}),Cn(this,Vi,{}),te(this,"finishRequestDuration",1e3),te(this,"getServerTime",Xi),Cn(this,Bs,function(Oe){return Oe}),Cn(this,Ro,function(){}),Cn(this,ic,function(){}),Cn(this,ks,function(){}),Cn(this,Uo,function(){}),Cn(this,qi,function(){}),Cn(this,Cs,void 0),Cn(this,wc,void 0),Cn(this,ko,void 0),Cn(this,Ho,!1),Cn(this,co,{down:!1,up:!1}),Cn(this,Co,{down:{},up:{}}),Cn(this,ki,0),Cn(this,fi,0),Cn(this,ds,0),Cn(this,ri,-1/0),Cn(this,gi,0),Cn(this,Qs,0),Cn(this,Zi,void 0),Cn(this,lo,void 0),!K)throw new Error("Missing measurements argument");if(!de)throw new Error("Missing downloadApiUrl argument");if(!Re)throw new Error("Missing uploadApiUrl argument");Dn(Cs,this,K),Dn(wc,this,de),Dn(ko,this,Re),Dn(gi,this,we),Dn(Qs,this,Math.max(0,ke))},[{key:"results",get:function(){return fe(Co,this)}},{key:"qsParams",get:function(){return fe(zo,this)},set:function(W){Dn(zo,this,W)}},{key:"fetchOptions",get:function(){return fe(Vi,this)},set:function(W){Dn(Vi,this,W)}},{key:"responseHook",set:function(W){Dn(Bs,this,W)}},{key:"onRunningChange",set:function(W){Dn(Ro,this,W)}},{key:"onNewMeasurementStarted",set:function(W){Dn(ic,this,W)}},{key:"onMeasurementResult",set:function(W){Dn(ks,this,W)}},{key:"onFinished",set:function(W){Dn(Uo,this,W)}},{key:"onConnectionError",set:function(W){Dn(qi,this,W)}},{key:"pause",value:function(){clearTimeout(fe(lo,this)),Xn(vi,this,uo).call(this),Xn(vi,this,zs).call(this,!1)}},{key:"play",value:function(){fe(Ho,this)||(Xn(vi,this,zs).call(this,!0),Xn(vi,this,ps).call(this))}}])}();function zs(W){var K=this;W!==fe(Ho,this)&&(Dn(Ho,this,W),setTimeout(function(){return fe(Ro,K).call(K,fe(Ho,K))}))}function To(W,K){var Q=this,de=fe(Cs,this)[W],Re=de.bytes,be=de.dir,we=fe(Co,this),We=we[be].hasOwnProperty(Re)?we[be][Re]:{timings:[],numMeasurements:fe(Cs,this).filter(function(ke){var Oe=ke.bytes,Qe=ke.dir;return Re===Oe&&be===Qe}).map(function(ke){return ke.count}).reduce(function(ke,Oe){return ke+Oe},0)};K&&We.timings.push(K),We.timings=We.timings.slice(-We.numMeasurements),we[be][Re]=We,K?setTimeout(function(){fe(ks,Q).call(Q,St({type:be,bytes:Re},K),we)}):fe(ic,this).call(this,fe(Cs,this)[W],we)}function ps(){var W=this,K=fe(Cs,this),Q=K[fe(ki,this)];if(fe(fi,this)>=Q.count){var de=fe(co,this);if(fe(ri,this)>this.finishRequestDuration&&!Q.bypassMinDuration){var Re=Q.dir;fe(co,this)[Re]=!0,Object.values(fe(co,this)).every(function(he){return he})&&fe(Uo,this).call(this,fe(Co,this))}Dn(fi,this,0),Dn(ri,this,-1/0),performance.clearResourceTimings();do Dn(ki,this,fe(ki,this)+1);while(fe(ki,this)<K.length&&de[K[fe(ki,this)].dir]);if(fe(ki,this)>=K.length)return Dn(co,this,{down:!0,up:!0}),Xn(vi,this,zs).call(this,!1),void fe(Uo,this).call(this,fe(Co,this));Q=K[fe(ki,this)]}var be=fe(ki,this);fe(fi,this)===0&&Xn(vi,this,To).call(this,be);var we=Q,We=we.bytes,ke=we.dir==="down",Oe=fe(ke?wc:ko,this),Qe=Object.assign({},fe(zo,this));ke&&(Qe.bytes="".concat(We));var $e,Ae="".concat(Oe.startsWith("http")||Oe.startsWith("//")?"":window.location.origin).concat(Oe,"?").concat(Object.entries(Qe).map(function(he){var Le=Vt(he,2),Ze=Le[0],tt=Le[1];return"".concat(Ze,"=").concat(tt)}).join("&")),et=Object.assign({},ke?{}:{method:"POST",body:ac(We)},fe(Vi,this)),ue=Dn(Zi,this,fetch(Ae,et).then(function(he){if(he.ok)return he;throw Error(he.statusText)}).then(function(he){return W.getServerTime&&($e=W.getServerTime(he)),he}).then(function(he){return he.text().then(function(Le){return fe(Bs,W)&&fe(Bs,W).call(W,{url:Ae,headers:he.headers,body:Le}),Le})}).then(function(he,Le){if(ue._cancel)Le("cancelled");else{var Ze=performance.getEntriesByName(Ae).slice(-1)[0],tt={transferSize:Ze.transferSize,ttfb:Ks(Ze),payloadDownloadTime:Ys(Ze),serverTime:$e||-1,measTime:new Date};if(tt.ping=Math.max(.01,tt.ttfb-($e||fe(Qs,W))),tt.duration=(ke?so:Mi)(tt),tt.bps=(ke?Fi:oo)(tt,We),ke&&We){var Jt=+We;tt.transferSize&&(tt.transferSize<Jt||tt.transferSize/Jt>1.05)&&console.warn("Requested ".concat(Jt,"B but received ").concat(tt.transferSize,"B (").concat(Math.round(tt.transferSize/Jt*1e4)/100,"%)."))}Xn(vi,W,To).call(W,be,tt);var vt=tt.duration;Dn(ri,W,fe(ri,W)<0?vt:Math.min(fe(ri,W),vt)),Dn(fi,W,fe(fi,W)+1),Dn(ds,W,0),fe(gi,W)?Dn(lo,W,setTimeout(function(){return Xn(vi,W,ps).call(W)},fe(gi,W))):Xn(vi,W,ps).call(W)}}).catch(function(he){var Le,Ze;ue._cancel||(console.warn("Error fetching ".concat(Ae,": ").concat(he)),Dn(ds,W,(Le=fe(ds,W),Ze=Le++,Le)),Ze<20?Xn(vi,W,ps).call(W):(Dn(ds,W,0),Xn(vi,W,zs).call(W,!1),fe(qi,W).call(W,"Connection failed to ".concat(Ae,". Gave up after ").concat(20," retries."))))}))}function uo(){var W=fe(Zi,this);W&&(W._cancel=!0)}var zc=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],_a=new WeakMap,Po=new WeakSet,Ts=function(W){function K(Q){var de,Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=Re.measureParallelLatency,we=be!==void 0&&be,We=Re.parallelLatencyThrottleMs,ke=We===void 0?100:We,Oe=Re.downloadApiUrl,Qe=Re.uploadApiUrl,$e=Re.estimatedServerTime,Ae=$e===void 0?0:$e,et=Dt(Re,zc);return hi(this,K),Bo(de=rc(this,K,[Q,St({downloadApiUrl:Oe,uploadApiUrl:Qe,estimatedServerTime:Ae},et)]),Po),Cn(de,_a,void 0),we&&(Dn(_a,de,new Js([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:Oe,uploadApiUrl:Qe,estimatedServerTime:Ae,throttleMs:ke})),fe(_a,de).qsParams={during:"".concat(Q[0].dir,"load")},vn(K,"onRunningChange",Xn(Po,de,sc),de,1),vn(K,"onConnectionError",function(){return fe(_a,de).pause()},de,1)),de}return oe(K,W),Ra(K,[{key:"latencyResults",get:function(){return fe(_a,this)&&fe(_a,this).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(Q){fe(_a,this)&&(fe(_a,this).onMeasurementResult=function(de){return Q(de)})}},{key:"fetchOptions",get:function(){return Q="fetchOptions",de=this,Re=1,be=$(Y(K.prototype),Q,de),2&Re&&typeof be=="function"?function(we){return be.apply(de,we)}:be;var Q,de,Re,be},set:function(Q){vn(K,"fetchOptions",Q,this,1),fe(_a,this)&&(fe(_a,this).fetchOptions=Q)}},{key:"onRunningChange",set:function(Q){var de=this;vn(K,"onRunningChange",function(Re){Xn(Po,de,sc).call(de,Re),Q(Re)},this,1)}},{key:"onConnectionError",set:function(Q){var de=this;vn(K,"onConnectionError",function(){fe(_a,de)&&fe(_a,de).pause(),Q.apply(void 0,arguments)},this,1)}}])}(Js);function sc(W){var K=this;fe(_a,this)&&(W?setTimeout(function(){return fe(_a,K).play()},20):fe(_a,this).pause())}var Fo=["measurementId","logApiUrl"],es=new WeakMap,No=new WeakMap,po=new WeakMap,ts=new WeakMap,Ps=new WeakSet,a=function(W){function K(Q){var de,Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=Re.measurementId,we=Re.logApiUrl,We=Dt(Re,Fo);return hi(this,K),Bo(de=rc(this,K,[Q,We]),Ps),Cn(de,es,void 0),Cn(de,No,void 0),Cn(de,po,void 0),Cn(de,ts,void 0),Dn(es,de,be),Dn(ts,de,we),vn(K,"qsParams",we?{measId:fe(es,de)}:{},de,1),vn(K,"responseHook",function(ke){return Xn(Ps,de,l).call(de,ke)},de,1),vn(K,"onMeasurementResult",function(ke){return Xn(Ps,de,O).call(de,ke)},de,1),de}return oe(K,W),Ra(K,[{key:"qsParams",set:function(Q){vn(K,"qsParams",fe(ts,this)?St({measId:fe(es,this)},Q):Q,this,1)}},{key:"responseHook",set:function(Q){var de=this;vn(K,"responseHook",function(Re){Q(Re),Xn(Ps,de,l).call(de,Re)},this,1)}},{key:"onMeasurementResult",set:function(Q){var de=this;vn(K,"onMeasurementResult",function(Re){for(var be=arguments.length,we=new Array(be>1?be-1:0),We=1;We<be;We++)we[We-1]=arguments[We];Q.apply(void 0,[Re].concat(we)),Xn(Ps,de,O).call(de,Re)},this,1)}}])}(Ts);function l(W){fe(ts,this)&&(Dn(po,this,+W.headers.get("cf-meta-request-time")),Dn(No,this,W.body.slice(-300).split("___").pop()))}function O(W){if(fe(ts,this)){var K={type:W.type,bytes:W.bytes,ping:Math.round(W.ping),ttfb:Math.round(W.ttfb),payloadDownloadTime:Math.round(W.payloadDownloadTime),duration:Math.round(W.duration),transferSize:Math.round(W.transferSize),serverTime:Math.round(W.serverTime),token:fe(No,this),requestTime:fe(po,this),measId:fe(es,this)};Dn(No,this,null),Dn(po,this,null),fetch(fe(ts,this),St({method:"POST",body:JSON.stringify(K)},this.fetchOptions))}}var q=new WeakMap,ee=new WeakMap,me=new WeakMap,je=new WeakSet,st=function(){return Ra(function W(K){if(hi(this,W),Bo(this,je),Cn(this,q,!1),Cn(this,ee,void 0),Cn(this,me,void 0),!K)throw new Error("Missing operation to perform");Dn(me,this,K),this.play()},[{key:"pause",value:function(){Xn(je,this,Mn).call(this),Xn(je,this,dt).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){fe(q,this)||(Xn(je,this,dt).call(this,!0),Xn(je,this,Gt).call(this))}}])}();function dt(W){W!==fe(q,this)&&Dn(q,this,W)}function Gt(){var W=this,K=Dn(ee,this,fe(me,this).call(this).then(function(){!K._cancel&&Xn(je,W,Gt).call(W)}))}function Mn(){var W=fe(ee,this);W&&(W._cancel=!0)}var Un=new WeakMap,Yn=function(){return Ra(function W(){var K=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=Q.download,Re=Q.upload;if(hi(this,W),te(this,"qsParams",{}),te(this,"fetchOptions",{}),Cn(this,Un,[]),!de&&!Re)throw new Error("Missing at least one of download/upload config");[[de,"download"],[Re,"upload"]].filter(function(we){return Vt(we,1)[0]}).forEach(function(we){var We=Vt(we,2),ke=We[0],Oe=We[1],Qe=ke.apiUrl,$e=ke.chunkSize;if(!Qe)throw new Error("Missing ".concat(Oe," apiUrl argument"));if(!$e)throw new Error("Missing ".concat(Oe," chunkSize argument"))});var be=function(we){var We=we.apiUrl,ke=we.qsParams,Oe=ke===void 0?{}:ke,Qe=we.fetchOptions,$e=Qe===void 0?{}:Qe;return new st(function(){var Ae=Object.assign({},Oe,K.qsParams),et="".concat(We.startsWith("http")||We.startsWith("//")?"":window.location.origin).concat(We,"?").concat(Object.entries(Ae).map(function(he){var Le=Vt(he,2),Ze=Le[0],tt=Le[1];return"".concat(Ze,"=").concat(tt)}).join("&")),ue=Object.assign({},$e,K.fetchOptions);return fetch(et,ue).then(function(he){if(he.ok)return he;throw Error(he.statusText)}).then(function(he){return he.text()})})};de&&fe(Un,this).push(be({apiUrl:de.apiUrl,qsParams:{bytes:"".concat(de.chunkSize)}})),Re&&fe(Un,this).push(be({apiUrl:Re.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(Re.chunkSize)}}))},[{key:"pause",value:function(){fe(Un,this).forEach(function(W){return W.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){fe(Un,this).forEach(function(W){return W.play()})}}])}(),Sr=["iceServers","acceptIceCandidate","dataChannelCfg"],va=new WeakMap,Na=new WeakMap,Ja=new WeakMap,yi=new WeakMap,Vo=new WeakMap,Uc=function(){return Ra(function W(){var K=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=Q.iceServers,Re=de===void 0?[]:de,be=Q.acceptIceCandidate,we=be===void 0?function(et){var ue=et.protocol||"";if(!ue&&et.candidate){var he=et.candidate.split(" ");he.length>=3&&(ue=he[2])}return ue.toLowerCase()==="udp"}:be,We=Q.dataChannelCfg,ke=We===void 0?{ordered:!1,maxRetransmits:0}:We,Oe=Dt(Q,Sr);hi(this,W),te(this,"onOpen",function(){}),te(this,"onClose",function(){}),te(this,"onMessageReceived",function(){}),Cn(this,va,!1),Cn(this,Na,void 0),Cn(this,Ja,void 0),Cn(this,yi,void 0),Cn(this,Vo,void 0);var Qe=new RTCPeerConnection(St({iceServers:Re},Oe)),$e=new RTCPeerConnection(St({iceServers:Re},Oe)),Ae=Qe.createDataChannel("channel",ke);Ae.onopen=function(){Dn(va,K,!0),K.onOpen()},Ae.onclose=function(){return K.close()},$e.ondatachannel=function(et){var ue=et.channel;ue.onclose=function(){return K.close()},ue.onmessage=function(he){return K.onMessageReceived(he.data)},Dn(Vo,K,ue)},Qe.onicecandidate=function(et){et.candidate&&we(et.candidate)&&$e.addIceCandidate(et.candidate)},$e.onicecandidate=function(et){et.candidate&&we(et.candidate)&&Qe.addIceCandidate(et.candidate)},Qe.createOffer().then(function(et){return Qe.setLocalDescription(et)}).then(function(){return $e.setRemoteDescription(Qe.localDescription)}).then(function(){return $e.createAnswer()}).then(function(et){return $e.setLocalDescription(et)}).then(function(){return Qe.setRemoteDescription($e.localDescription)}),Dn(Na,this,Qe),Dn(Ja,this,$e),Dn(yi,this,Ae),Dn(va,this,!1)},[{key:"send",value:function(W){return fe(yi,this).send(W)}},{key:"close",value:function(){return fe(Na,this)&&fe(Na,this).close(),fe(Ja,this)&&fe(Ja,this).close(),fe(yi,this)&&fe(yi,this).close(),fe(Vo,this)&&fe(Vo,this).close(),fe(va,this)&&this.onClose(),Dn(va,this,!1),this}}])}(),mo=new WeakMap,Us=new WeakMap,oc=new WeakMap,ms=new WeakMap,La=new WeakMap,ns=new WeakMap,Hs=function(){return Ra(function W(){var K=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=Q.turnServerUri,Re=Q.turnServerCredsApi,be=Q.turnServerCredsApiParser,we=be===void 0?function(Rt){return{turnServerUser:Rt.username,turnServerPass:Rt.credential,turnServerUri:Rt.server}}:be,We=Q.turnServerCredsApiIncludeCredentials,ke=We!==void 0&&We,Oe=Q.turnServerUser,Qe=Q.turnServerPass,$e=Q.numMsgs,Ae=$e===void 0?100:$e,et=Q.batchSize,ue=et===void 0?10:et,he=Q.batchWaitTime,Le=he===void 0?10:he,Ze=Q.responsesWaitTime,tt=Ze===void 0?5e3:Ze,Jt=Q.connectionTimeout,vt=Jt===void 0?5e3:Jt;if(hi(this,W),Cn(this,mo,function(){}),Cn(this,Us,function(){}),Cn(this,oc,function(){}),te(this,"onMsgSent",function(){}),te(this,"onAllMsgsSent",function(){}),te(this,"onMsgReceived",function(){}),Cn(this,ms,{}),Cn(this,La,void 0),Cn(this,ns,void 0),!de&&!Re)throw new Error("Missing turnServerCredsApi or turnServerUri argument");if(!(Oe&&Qe||Re))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");Dn(ns,this,Ae),(Oe&&Qe?Promise.resolve({turnServerUser:Oe,turnServerPass:Qe}):fetch(Re,{credentials:ke?"include":void 0}).then(function(Rt){return Rt.json()}).then(function(Rt){if(Rt.error)throw Rt.error;return Rt}).then(we)).catch(function(Rt){return fe(mo,K).call(K,Rt)}).then(function(Rt){var xn=Rt.turnServerUser,ct=Rt.turnServerPass,Ue=Rt.turnServerUri,yt=Dn(La,K,new Uc({iceServers:[{urls:"turn:".concat(Ue||de,"?transport=udp"),username:xn,credential:ct}],iceTransportPolicy:"relay"})),fn=!1;setTimeout(function(){fn||(yt.close(),fe(Us,K).call(K,"ICE connection timeout!"))},vt);var nn=fe(ms,K);yt.onOpen=function(){fn=!0;var un=K;(function Qn(xr){if(xr<=Ae){for(var _n=xr;_n<=Math.min(Ae,xr+ue-1);)nn[_n]=!1,yt.send(_n),un.onMsgSent(_n),_n++;setTimeout(function(){return Qn(_n)},Le)}else{un.onAllMsgsSent(Object.keys(nn).length);var dn=function(){yt.close(),fe(oc,un).call(un,un.results)},br=setTimeout(dn,tt),ur=Object.values(fe(ms,un)).filter(function(Gn){return!Gn}).length;yt.onMessageReceived=function(Gn){clearTimeout(br),nn[Gn]=!0,un.onMsgReceived(Gn),--ur<=0&&Object.values(fe(ms,un)).every(function(In){return In})?dn():br=setTimeout(dn,tt)}}})(1)},yt.onMessageReceived=function(un){nn[un]=!0,K.onMsgReceived(un)}}).catch(function(Rt){return fe(Us,K).call(K,Rt.toString())})},[{key:"onCredentialsFailure",set:function(W){Dn(mo,this,W)}},{key:"onConnectionError",set:function(W){Dn(Us,this,W)}},{key:"onFinished",set:function(W){Dn(oc,this,W)}},{key:"results",get:function(){var W=fe(ns,this),K=Object.keys(fe(ms,this)).length,Q=Object.entries(fe(ms,this)).filter(function(de){return!Vt(de,2)[1]}).map(function(de){return+Vt(de,1)[0]});return{totalMessages:W,numMessagesSent:K,packetLoss:Q.length/K,lostMessages:Q}}}])}(),Xs=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],qa=new WeakMap,qo=function(W){function K(){var Q,de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Re=de.downloadChunkSize,be=de.uploadChunkSize,we=de.downloadApiUrl,We=de.uploadApiUrl,ke=Dt(de,Xs);return hi(this,K),Cn(Q=rc(this,K,[ke]),qa,void 0),(Re||be)&&(Dn(qa,Q,new Yn({download:Re?{apiUrl:we,chunkSize:Re}:null,upload:be?{apiUrl:We,chunkSize:be}:null})),vn(K,"onCredentialsFailure",vn(K,"onConnectionError",vn(K,"onFinished",function(){return fe(qa,Q).stop()},Q,1),Q,1),Q,1)),Q}return oe(K,W),Ra(K,[{key:"qsParams",set:function(Q){fe(qa,this)&&(fe(qa,this).qsParams=Q)}},{key:"fetchOptions",set:function(Q){fe(qa,this)&&(fe(qa,this).fetchOptions=Q)}},{key:"onCredentialsFailure",set:function(Q){var de=this;vn(K,"onCredentialsFailure",function(){Q.apply(void 0,arguments),fe(qa,de)&&fe(qa,de).stop()},this,1)}},{key:"onConnectionError",set:function(Q){var de=this;vn(K,"onConnectionError",function(){Q.apply(void 0,arguments),fe(qa,de)&&fe(qa,de).stop()},this,1)}},{key:"onFinished",set:function(Q){var de=this;vn(K,"onFinished",function(){Q.apply(void 0,arguments),fe(qa,de)&&fe(qa,de).stop()},this,1)}}])}(Hs),cc=["reachable"],ho=Ra(function W(K){var Q=this,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=de.timeout,be=Re===void 0?-1:Re,we=de.fetchOptions,We=we===void 0?{}:we;hi(this,W),te(this,"onFinished",function(){});var ke=!1,Oe=function(Qe){var $e=Qe.reachable,Ae=Dt(Qe,cc);ke||(ke=!0,Q.onFinished(St({targetUrl:K,reachable:$e},Ae)))};fetch(K,We).then(function(Qe){Oe({reachable:!0,response:Qe})}).catch(function(Qe){Oe({reachable:!1,error:Qe})}),be>0&&setTimeout(function(){return Oe({reachable:!1,error:"Request timeout"})},be)}),Ec=function(W){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!W.length)return 0;var Q=W.slice().sort(function(we,We){return we-We}),de=(W.length-1)*K,Re=de%1;if(Re===0)return Q[Math.round(de)];var be=[Math.floor,Math.ceil].map(function(we){return Q[we(de)]});return be[0]+(be[1]-be[0])*Re},hs=new WeakMap,si=new WeakMap,Hc=function(){return Ra(function W(K){var Q=this;hi(this,W),te(this,"getLatencyPoints",function(de){return de.timings.map(function(Re){return Re.ping})}),te(this,"getLatency",function(de){return Ec(Q.getLatencyPoints(de),fe(hs,Q).latencyPercentile)}),te(this,"getBandwidthPoints",function(de){return Object.entries(de).map(function(Re){var be=Vt(Re,2),we=be[0];return be[1].timings.map(function(We){var ke=We.bps,Oe=We.duration,Qe=We.ping,$e=We.measTime,Ae=We.serverTime,et=We.transferSize;return{bytes:+we,bps:ke,duration:Oe,ping:Qe,measTime:$e,serverTime:Ae,transferSize:et}})}).flat()}),te(this,"getBandwidth",function(de){return Ec(Q.getBandwidthPoints(de).filter(function(Re){return Re.duration>=fe(hs,Q).bandwidthMinRequestDuration}).map(function(Re){return Re.bps}).filter(function(Re){return Re}),fe(hs,Q).bandwidthPercentile)}),te(this,"getLoadedLatency",function(de){return Q.getLatency({timings:fe(si,Q).call(Q,de)})}),te(this,"getLoadedJitter",function(de){return Q.getJitter({timings:fe(si,Q).call(Q,de)})}),te(this,"getLoadedLatencyPoints",function(de){return Q.getLatencyPoints({timings:fe(si,Q).call(Q,de)})}),te(this,"getPacketLoss",function(de){return de.packetLoss}),te(this,"getPacketLossDetails",function(de){return de}),te(this,"getReachability",function(de){return!!de.reachable}),te(this,"getReachabilityDetails",function(de){return{host:de.host,reachable:de.reachable}}),Cn(this,hs,void 0),Cn(this,si,function(de){return Object.values(de).filter(function(Re){return Re.timings.length&&Math.min.apply(Math,Yr(Re.timings.map(function(be){return be.duration})))>=fe(hs,Q).loadedRequestMinDuration}).map(function(Re){return Re.sideLatency||[]}).flat().slice(-fe(hs,Q).loadedLatencyMaxPoints)}),Dn(hs,this,K)},[{key:"getJitter",value:function(W){var K=this.getLatencyPoints(W);return K.length<2?null:K.reduce(function(Q,de){var Re=Q.sumDeltas,be=Re===void 0?0:Re,we=Q.prevLatency;return{sumDeltas:be+(we!==void 0?Math.abs(we-de):0),prevLatency:de}},{}).sumDeltas/(K.length-1)}}])}(),Al=["bad","poor","average","good","great"],Ol={loadedLatencyIncrease:function(W){return W.latency&&(W.downLoadedLatency||W.upLoadedLatency)?Math.max(W.downLoadedLatency,W.upLoadedLatency)-W.latency:void 0}},Dl={packetLoss:0},Fc=new WeakMap,oi=function(){return Ra(function W(K){hi(this,W),Cn(this,Fc,void 0),Dn(Fc,this,K)},[{key:"getScores",value:function(W){var K=Object.assign.apply(Object,Yr(Object.entries(fe(Fc,this).aimMeasurementScoring).map(function(Q){var de=Vt(Q,2),Re=de[0],be=de[1],we=Ol.hasOwnProperty(Re)?Ol[Re](W):W[Re];return we===void 0?Dl.hasOwnProperty(Re)?te({},Re,Dl[Re]):{}:te({},Re,we===void 0?0:+be(we))})));return Object.assign.apply(Object,[{}].concat(Yr(Object.entries(fe(Fc,this).aimExperiencesDefs).filter(function(Q){return Vt(Q,2)[1].input.every(function(de){return K.hasOwnProperty(de)})}).map(function(Q){var de,Re=Vt(Q,2),be=Re[0],we=Re[1],We=we.input,ke=we.pointThresholds,Oe=Math.max(0,(de=We.map(function($e){return K[$e]}),de.reduce(function($e,Ae){return $e+Ae},0))),Qe=ft(ke,[0,1,2,3,4])(Oe);return te({},be,{points:Oe,classificationIdx:Qe,classificationName:Al[Qe]})}))))}}])}(),Zo=new WeakMap,Wo=new WeakMap,$o=new WeakMap,Ga=new WeakMap,Go=new WeakMap,lc=new WeakMap,Ml=new WeakMap,Ll=new WeakMap,su=function(){return Ra(function W(K){var Q=this;hi(this,W),te(this,"raw",void 0),te(this,"getUnloadedLatency",function(){return fe(Ga,Q).call(Q,"getLatency","latency")}),te(this,"getUnloadedJitter",function(){return fe(Ga,Q).call(Q,"getJitter","latency")}),te(this,"getUnloadedLatencyPoints",function(){return fe(Ga,Q).call(Q,"getLatencyPoints","latency",[])}),te(this,"getDownLoadedLatency",function(){return fe(Ga,Q).call(Q,"getLoadedLatency","download")}),te(this,"getDownLoadedJitter",function(){return fe(Ga,Q).call(Q,"getLoadedJitter","download")}),te(this,"getDownLoadedLatencyPoints",function(){return fe(Ga,Q).call(Q,"getLoadedLatencyPoints","download",[])}),te(this,"getUpLoadedLatency",function(){return fe(Ga,Q).call(Q,"getLoadedLatency","upload")}),te(this,"getUpLoadedJitter",function(){return fe(Ga,Q).call(Q,"getLoadedJitter","upload")}),te(this,"getUpLoadedLatencyPoints",function(){return fe(Ga,Q).call(Q,"getLoadedLatencyPoints","upload",[])}),te(this,"getDownloadBandwidth",function(){return fe(Ga,Q).call(Q,"getBandwidth","download")}),te(this,"getDownloadBandwidthPoints",function(){return fe(Ga,Q).call(Q,"getBandwidthPoints","download",[])}),te(this,"getUploadBandwidth",function(){return fe(Ga,Q).call(Q,"getBandwidth","upload")}),te(this,"getUploadBandwidthPoints",function(){return fe(Ga,Q).call(Q,"getBandwidthPoints","upload",[])}),te(this,"getPacketLoss",function(){return fe(Ga,Q).call(Q,"getPacketLoss","packetLoss")}),te(this,"getPacketLossDetails",function(){return fe(Ga,Q).call(Q,"getPacketLossDetails","packetLoss",void 0,!0)}),te(this,"getScores",function(){return fe($o,Q).getScores(Q.getSummary())}),Cn(this,Zo,void 0),Cn(this,Wo,void 0),Cn(this,$o,void 0),Cn(this,Ga,function(de,Re){var be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,we=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return Q.raw.hasOwnProperty(Re)&&Q.raw[Re].started?we&&Q.raw[Re].error?{error:Q.raw[Re].error}:fe(Wo,Q)[de](Q.raw[Re].results):be}),Cn(this,Go,function(){return fe(Ga,Q).call(Q,"getReachability","v4Reachability")}),Cn(this,lc,function(){return fe(Ga,Q).call(Q,"getReachabilityDetails","v4Reachability")}),Cn(this,Ml,function(){return fe(Ga,Q).call(Q,"getReachability","v6Reachability")}),Cn(this,Ll,function(){return fe(Ga,Q).call(Q,"getReachabilityDetails","v6Reachability")}),Dn(Zo,this,K),this.clear(),Dn(Wo,this,new Hc(fe(Zo,this))),Dn($o,this,new oi(fe(Zo,this)))},[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(W){return W.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(Yr(Yr(new Set(fe(Zo,this).measurements.map(function(W){return W.type}))).map(function(W){return te({},W,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var W={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:fe(Go,this),v6Reachability:fe(Ml,this)};return Object.assign.apply(Object,Yr(Object.entries(W).map(function(K){var Q=Vt(K,2),de=Q[0],Re=(0,Q[1])();return Re===void 0?{}:te({},de,Re)})))}}])}(),Vc=function(W){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return W&&Math.round(W*Math.pow(10,K))/Math.pow(10,K)},ge=function(W){return W.map(function(K){return Vc(K,2)})},J=function(W){return W.map(function(K){return{bytes:+K.bytes,bps:Vc(K.bps)}})},re={latencyMs:["getUnloadedLatencyPoints",ge],download:["getDownloadBandwidthPoints",J],upload:["getUploadBandwidthPoints",J],downLoadedLatencyMs:["getDownLoadedLatencyPoints",ge],upLoadedLatencyMs:["getUpLoadedLatencyPoints",ge],packetLoss:["getPacketLossDetails",function(W){return W.error?void 0:{numMessages:W.numMessagesSent,lossRatio:Vc(W.packetLoss,4)}}]},ae=["type"],ie=["numPackets"],le=["bytes"],Ne=["latency","latencyUnderLoad","download","upload"],Me=function(){return"".concat(Math.round(1e16*Math.random()))},ze=new WeakMap,Et=new WeakMap,kt=new WeakMap,Ut=new WeakMap,mn=new WeakMap,jt=new WeakMap,an=new WeakMap,hn=new WeakMap,Ce=new WeakMap,mt=new WeakMap,Nt=new WeakMap,ht=new WeakSet,At=function(){return Ra(function W(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};hi(this,W),Bo(this,ht),te(this,"onRunningChange",function(){}),te(this,"onResultsChange",function(){}),Cn(this,ze,function(){}),Cn(this,Et,function(){}),Cn(this,kt,void 0),Cn(this,Ut,void 0),Cn(this,mn,Me()),Cn(this,jt,-1),Cn(this,an,void 0),Cn(this,hn,1e6),Cn(this,Ce,1e6),Cn(this,mt,!1),Cn(this,Nt,!1),Dn(kt,this,Object.assign({},xs,K,Rs)),Dn(Ut,this,new su(fe(kt,this))),fe(kt,this).autoStart&&this.play()},[{key:"results",get:function(){return fe(Ut,this)}},{key:"isRunning",get:function(){return fe(mt,this)}},{key:"isFinished",get:function(){return fe(Nt,this)}},{key:"onFinish",set:function(W){Dn(ze,this,W)}},{key:"onError",set:function(W){Dn(Et,this,W)}},{key:"pause",value:function(){Ne.includes(Xn(ht,this,rn).call(this))&&fe(an,this).pause(),Xn(ht,this,Ke).call(this,!1)}},{key:"play",value:function(){fe(mt,this)||(Xn(ht,this,Ke).call(this,!0),Xn(ht,this,yn).call(this))}},{key:"restart",value:function(){Xn(ht,this,ln).call(this),this.play()}}])}();function Ke(W){W!==fe(mt,this)&&(Dn(mt,this,W),this.onRunningChange(fe(mt,this)))}function Mt(W){var K=this;W!==fe(Nt,this)&&(Dn(Nt,this,W),W&&setTimeout(function(){return fe(ze,K).call(K,K.results)}))}function rn(){return fe(jt,this)<0||fe(jt,this)>=fe(kt,this).measurements.length?null:fe(kt,this).measurements[fe(jt,this)].type}function qt(){return fe(Ut,this).raw[Xn(ht,this,rn).call(this)]||void 0}function ln(){Xn(ht,this,en).call(this),Dn(mn,this,Me()),Dn(jt,this,-1),Dn(an,this,void 0),Xn(ht,this,Ke).call(this,!1),Xn(ht,this,Mt).call(this,!1),fe(Ut,this).clear()}function en(){var W=fe(an,this);W&&(W.onFinished=W.onConnectionError=W.onFail=W.onMsgReceived=W.onCredentialsFailure=W.onMeasurementResult=function(){},Ne.includes(Xn(ht,this,rn).call(this))&&W.pause())}function yn(){var W,K=this;if(!(Ne.includes(Xn(ht,this,rn).call(this))&&Xn(ht,this,qt).call(this)&&Xn(ht,this,qt).call(this).started)||Xn(ht,this,qt).call(this).finished||Xn(ht,this,qt).call(this).finishedCurrentRound||Xn(ht,this,qt).call(this).error){if(Dn(jt,this,(W=fe(jt,this),++W)),fe(jt,this)>=fe(kt,this).measurements.length)return Xn(ht,this,Ke).call(this,!1),void Xn(ht,this,Mt).call(this,!0);var Q,de=fe(kt,this).measurements[fe(jt,this)],Re=de.type,be=Dt(de,ae),we=Xn(ht,this,qt).call(this),We=fe(kt,this),ke=We.downloadApiUrl,Oe=We.uploadApiUrl,Qe=We.estimatedServerTime;switch(Re){case"v4Reachability":case"v6Reachability":(Q=new ho("https://".concat(be.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(vt){we.finished=!0,we.results=St({host:be.host},vt),K.onResultsChange({type:Re}),Xn(ht,K,yn).call(K)};break;case"rpki":(Q=new ho("https://".concat(fe(kt,this).rpkiInvalidHost),{timeout:5e3})).onFinished=function(vt){(vt.response?vt.response.json():Promise.resolve()).then(function(Rt){we.finished=!0,we.results=St({host:fe(kt,K).rpkiInvalidHost,filteringInvalids:!vt.reachable},Rt?{asn:Rt.asn,name:Rt.name}:{}),K.onResultsChange({type:Re}),Xn(ht,K,yn).call(K)})};break;case"nxdomain":(Q=new ho("https://".concat(be.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(vt){we.finished=!0,we.results={host:be.nxhost,reachable:vt.reachable},K.onResultsChange({type:Re}),Xn(ht,K,yn).call(K)};break;case"packetLoss":case"packetLossUnderLoad":we.finished=!1;var $e=be.numPackets,Ae=Dt(be,ie),et=fe(kt,this),ue=et.turnServerUri,he=et.turnServerCredsApiUrl,Le=et.turnServerUser,Ze=et.turnServerPass,tt=et.includeCredentials;(Q=new qo(St({turnServerUri:ue,turnServerCredsApi:he,turnServerCredsApiIncludeCredentials:tt,turnServerUser:Le,turnServerPass:Ze,numMsgs:$e,downloadChunkSize:be.loadDown?fe(hn,this):void 0,uploadChunkSize:be.loadUp?fe(Ce,this):void 0,downloadApiUrl:ke,uploadApiUrl:Oe},Ae))).onMsgReceived=function(){we.results=Object.assign({},Q.results),K.onResultsChange({type:Re})},Q.onFinished=function(){we.finished=!0,K.onResultsChange({type:Re}),Xn(ht,K,yn).call(K)},Q.onConnectionError=function(vt){we.error=vt,K.onResultsChange({type:Re}),fe(Et,K).call(K,"Connection error while measuring packet loss: ".concat(vt)),Xn(ht,K,yn).call(K)},Q.onCredentialsFailure=function(){we.error="unable to get turn server credentials",K.onResultsChange({type:Re}),fe(Et,K).call(K,"Error while measuring packet loss: unable to get turn server credentials."),Xn(ht,K,yn).call(K)};break;case"latency":case"latencyUnderLoad":we.finished=!1,(Q=new a([{dir:"down",bytes:0,count:be.numPackets,bypassMinDuration:!0}],{downloadApiUrl:ke,uploadApiUrl:Oe,estimatedServerTime:Qe,logApiUrl:fe(kt,this).logMeasurementApiUrl,measurementId:fe(mn,this),downloadChunkSize:be.loadDown?fe(hn,this):void 0,uploadChunkSize:be.loadUp?fe(Ce,this):void 0})).fetchOptions={credentials:fe(kt,this).includeCredentials?"include":void 0},Q.onMeasurementResult=Q.onNewMeasurementStarted=function(vt,Rt){we.results=Object.assign({},Rt.down[0]),K.onResultsChange({type:Re})},Q.onFinished=function(){we.finished=!0,K.onResultsChange({type:Re}),fe(mt,K)&&Xn(ht,K,yn).call(K)},Q.onConnectionError=function(vt){we.error=vt,K.onResultsChange({type:Re}),fe(Et,K).call(K,"Connection error while measuring latency: ".concat(vt)),Xn(ht,K,yn).call(K)},Q.play();break;case"download":case"upload":if(we.finished||we.error)Xn(ht,this,yn).call(this);else{delete we.finishedCurrentRound;var Jt=fe(kt,this)["measure".concat(Re==="download"?"Down":"Up","loadLoadedLatency")];(Q=new a([St({dir:Re==="download"?"down":"up"},be)],{downloadApiUrl:ke,uploadApiUrl:Oe,estimatedServerTime:Qe,logApiUrl:fe(kt,this).logMeasurementApiUrl,measurementId:fe(mn,this),measureParallelLatency:Jt,parallelLatencyThrottleMs:fe(kt,this).loadedLatencyThrottle})).fetchOptions={credentials:fe(kt,this).includeCredentials?"include":void 0},Q.finishRequestDuration=fe(kt,this).bandwidthFinishRequestDuration,Q.onNewMeasurementStarted=function(vt){var Rt=vt.count,xn=vt.bytes,ct=we.results=Object.assign({},we.results);!ct.hasOwnProperty(xn)&&(ct[xn]={timings:[],numMeasurements:0,sideLatency:Jt?[]:void 0}),ct[xn].numMeasurements-ct[xn].timings.length!==Rt&&(ct[xn].numMeasurements+=Rt,K.onResultsChange({type:Re}))},Q.onMeasurementResult=function(vt){var Rt=vt.bytes,xn=Dt(vt,le);we.results[Rt].timings.push(xn),we.results=Object.assign({},we.results),K.onResultsChange({type:Re})},Q.onParallelLatencyResult=function(vt){we.results[be.bytes].sideLatency.push(vt),we.results=Object.assign({},we.results),K.onResultsChange({type:Re})},Q.onFinished=function(vt){var Rt=!fe(kt,K).measurements.slice(fe(jt,K)+1).map(function(Ue){return Ue.type}).includes(Re),xn=Math.min.apply(Math,Yr(Object.values(Re==="download"?vt.down:vt.up).slice(-1)[0].timings.map(function(Ue){return Ue.duration})));if(Rt||!be.bypassMinDuration&&xn>fe(kt,K).bandwidthFinishRequestDuration){we.finished=!0,K.onResultsChange({type:Re});var ct=.5*Object.keys(we.results).map(function(Ue){return+Ue}).sort(function(Ue,yt){return yt-Ue})[0];Re==="download"&&Dn(hn,K,ct),Re==="upload"&&Dn(Ce,K,ct)}else we.finishedCurrentRound=!0;fe(mt,K)&&Xn(ht,K,yn).call(K)},Q.onConnectionError=function(vt){we.error=vt,K.onResultsChange({type:Re}),fe(Et,K).call(K,"Connection error while measuring ".concat(Re,": ").concat(vt)),Xn(ht,K,yn).call(K)},Q.play()}}Dn(an,this,Q),we.started=!0,this.onResultsChange({type:Re})}else fe(an,this).play()}var cn=new WeakMap,Kt=new WeakMap,cr=function(W){function K(Q){var de;hi(this,K);for(var Re=arguments.length,be=new Array(Re>1?Re-1:0),we=1;we<Re;we++)be[we-1]=arguments[we];return Cn(de=rc(this,K,[Q].concat(be)),cn,void 0),Cn(de,Kt,function(We){fe(cn,de)&&function(ke,Oe){var Qe=Oe.apiUrl,$e={};Object.entries(re).forEach(function(et){var ue=Vt(et,2),he=ue[0],Le=Vt(ue[1],2),Ze=Le[0],tt=Le[1],Jt=tt===void 0?function(Rt){return Rt}:tt,vt=ke[Ze]();vt&&($e[he]=Jt(vt))});var Ae=ke.getScores();Ae&&($e.scores=Object.assign.apply(Object,[{}].concat(Yr(Object.entries(Ae).map(function(et){var ue,he=Vt(et,2);return te({},he[0],{points:(ue=he[1]).points,classification:ue.classificationName})}))))),fetch(Qe,{method:"POST",body:JSON.stringify($e)})}(We,{apiUrl:fe(cn,de)})}),vn(K,"onFinish",fe(Kt,de),de,1),Dn(cn,de,Object.assign({},xs,Q,Rs).logAimApiUrl),de}return oe(K,W),Ra(K,[{key:"onFinish",set:function(Q){var de=this;vn(K,"onFinish",function(Re){Q(Re),fe(Kt,de).call(de,Re)},this,1)}}])}(At),er=N(9633);function Ct(W,K){var Q=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!Q){if(Array.isArray(W)||(Q=function(ke,Oe){if(ke){if(typeof ke=="string")return En(ke,Oe);var Qe={}.toString.call(ke).slice(8,-1);return Qe==="Object"&&ke.constructor&&(Qe=ke.constructor.name),Qe==="Map"||Qe==="Set"?Array.from(ke):Qe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qe)?En(ke,Oe):void 0}}(W))||K){Q&&(W=Q);var de=0,Re=function(){};return{s:Re,n:function(){return de>=W.length?{done:!0}:{done:!1,value:W[de++]}},e:function(ke){throw ke},f:Re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var be,we=!0,We=!1;return{s:function(){Q=Q.call(W)},n:function(){var ke=Q.next();return we=ke.done,ke},e:function(ke){We=!0,be=ke},f:function(){try{we||Q.return==null||Q.return()}finally{if(We)throw be}}}}function En(W,K){(K==null||K>W.length)&&(K=W.length);for(var Q=0,de=Array(K);Q<K;Q++)de[Q]=W[Q];return de}var _r=[A],Zr=!1,Jr=function(){return(0,S.A)(function $e(){(0,d.A)(this,$e),(0,y.A)(this,"keyProvider",null)},null,[{key:"setKeyProvider",value:function($e){this.keyProvider=$e}},{key:"getKeyProvider",value:function(){return this.keyProvider}},{key:"config",value:function($e){if(!$e)throw new Error("'token' is empty, please provide it in config");this.apiKey=$e;var Ae=C(Ye,void 0,w.apply(void 0,_r));window.STORE=Ae,Qt.default.init({store:Ae})}},{key:"getCameras",value:(Qe=(0,R.A)(T().mark(function $e(){var Ae,et,ue,he,Le;return T().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(Ze.prev=0,Ae=navigator.userAgent.includes("Firefox"),et=[],!Ae){Ze.next=2;break}return Ze.next=1,new Promise(function(tt,Jt){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(){var vt=(0,R.A)(T().mark(function Rt(xn){var ct;return T().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Ue.sent,et=ct.filter(function(yt){return yt.kind==="videoinput"}).map(function(yt){return new bc(yt.deviceId,yt.groupId,yt.kind,yt.label)}),tt(et),xn.getTracks().forEach(function(yt){return yt.stop()});case 2:case"end":return Ue.stop()}},Rt)}));return function(Rt){return vt.apply(this,arguments)}}()).catch(function(vt){console.error("Error in getCameras()",vt),Jt(vt)})});case 1:Ze.next=4;break;case 2:return Ze.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=Ze.sent,et=ue.filter(function(tt){return tt.kind==="videoinput"}).map(function(tt){return new bc(tt.deviceId,tt.groupId,tt.kind,tt.label)});case 4:return Ze.abrupt("return",et);case 5:Ze.prev=5,Le=Ze.catch(0),he=Le.message,Le instanceof TypeError&&Le.name==="TypeError"&&(he=kr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(he));case 6:case"end":return Ze.stop()}},$e,null,[[0,5]])})),function(){return Qe.apply(this,arguments)})},{key:"getMicrophones",value:(Oe=(0,R.A)(T().mark(function $e(){var Ae,et,ue,he,Le;return T().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(Ze.prev=0,Ae=navigator.userAgent.includes("Firefox"),et=[],!Ae){Ze.next=2;break}return Ze.next=1,new Promise(function(tt,Jt){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var vt=(0,R.A)(T().mark(function Rt(xn){var ct;return T().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Ue.sent,et=ct.filter(function(yt){return yt.kind==="audioinput"}).map(function(yt){return new Ic(yt.deviceId,yt.groupId,yt.kind,yt.label)}),tt(et),xn.getTracks().forEach(function(yt){return yt.stop()});case 2:case"end":return Ue.stop()}},Rt)}));return function(Rt){return vt.apply(this,arguments)}}()).catch(function(vt){console.error("Error in getMicrophones()",vt),Jt(vt)})});case 1:Ze.next=4;break;case 2:return Ze.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=Ze.sent,et=ue.filter(function(tt){return tt.kind==="audioinput"}).map(function(tt){return new Ic(tt.deviceId,tt.groupId,tt.kind,tt.label)});case 4:return Ze.abrupt("return",et);case 5:Ze.prev=5,Le=Ze.catch(0),he=Le.message,Le instanceof TypeError&&Le.name==="TypeError"&&(he=kr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(he));case 6:case"end":return Ze.stop()}},$e,null,[[0,5]])})),function(){return Oe.apply(this,arguments)})},{key:"getPlaybackDevices",value:(ke=(0,R.A)(T().mark(function $e(){var Ae,et,ue,he,Le;return T().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(Ze.prev=0,Ae=navigator.userAgent.includes("Firefox"),et=[],!Ae){Ze.next=2;break}return Ze.next=1,new Promise(function(tt,Jt){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var vt=(0,R.A)(T().mark(function Rt(xn){var ct;return T().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=1,navigator.mediaDevices.enumerateDevices();case 1:ct=Ue.sent,et=ct.filter(function(yt){return yt.kind==="audiooutput"}).map(function(yt){return new ec(yt.deviceId,yt.groupId,yt.kind,yt.label)}),tt(et),xn.getTracks().forEach(function(yt){return yt.stop()});case 2:case"end":return Ue.stop()}},Rt)}));return function(Rt){return vt.apply(this,arguments)}}()).catch(function(vt){console.error("Error in getPlaybackDevices()",vt),Jt(vt)})});case 1:Ze.next=4;break;case 2:return Ze.next=3,navigator.mediaDevices.enumerateDevices();case 3:ue=Ze.sent,et=ue.filter(function(tt){return tt.kind==="audiooutput"}).map(function(tt){return new ec(tt.deviceId,tt.groupId,tt.kind,tt.label)});case 4:return Ze.abrupt("return",et);case 5:Ze.prev=5,Le=Ze.catch(0),he=Le.message,Le instanceof TypeError&&Le.name==="TypeError"&&(he="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(he));case 6:case"end":return Ze.stop()}},$e,null,[[0,5]])})),function(){return ke.apply(this,arguments)})},{key:"getDevices",value:(We=(0,R.A)(T().mark(function $e(){var Ae,et,ue,he,Le,Ze,tt;return T().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return Jt.prev=0,Jt.next=1,navigator.mediaDevices.enumerateDevices();case 1:Ae=Jt.sent,et=[],ue=Ct(Ae);try{for(ue.s();!(he=ue.n()).done;)Le=he.value,et.push(new Gs(Le.deviceId,Le.groupId,Le.kind,Le.label))}catch(vt){ue.e(vt)}finally{ue.f()}return Jt.abrupt("return",et);case 2:Jt.prev=2,tt=Jt.catch(0),Ze=tt.message,tt instanceof TypeError&&(Ze=tt.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":tt.message),console.error("An error occurred in getDevices(), ".concat(Ze));case 3:case"end":return Jt.stop()}},$e,null,[[0,2]])})),function(){return We.apply(this,arguments)})},{key:"on",value:function($e,Ae){if($e!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on($e,Ae)}},{key:"addDeviceChangeEvent",value:function(){var $e=this;if(!Zr){this.getDevices().then(function(et){$e.devices=et});try{navigator.mediaDevices.addEventListener("devicechange",function(){var et=(0,R.A)(T().mark(function ue(he){var Le,Ze,tt,Jt,vt,Rt;return T().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return Le=$e.devices,xn.next=1,$e.getDevices();case 1:$e.devices=xn.sent,Ze=new Array,tt=Ct($e.devices),xn.prev=2,vt=T().mark(function ct(){var Ue;return T().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:Ue=Jt.value,Le.filter(function(fn){return fn.deviceId==Ue.deviceId&&fn.kind==Ue.kind}).length==0?Ze.push(Ue):Le=Le.filter(function(fn){return!(fn.deviceId==Ue.deviceId&&fn.kind==Ue.kind)});case 1:case"end":return yt.stop()}},ct)}),tt.s();case 3:if((Jt=tt.n()).done){xn.next=5;break}return xn.delegateYield(vt(),"t0",4);case 4:xn.next=3;break;case 5:xn.next=7;break;case 6:xn.prev=6,Rt=xn.catch(2),tt.e(Rt);case 7:return xn.prev=7,tt.f(),xn.finish(7);case 8:Ze.length!=0&&$e.eventEmitter.emit("device-changed",{devices:$e.devices}),Le.length!=0&&$e.eventEmitter.emit("device-changed",{devices:$e.devices});case 9:case"end":return xn.stop()}},ue,null,[[2,6,7,8]])}));return function(ue){return et.apply(this,arguments)}}()),Zr=!0}catch(et){var Ae=et.message;et instanceof TypeError&&(Ae=et.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":et.message),console.error("An error occurred in device-change event, ".concat(Ae))}}}},{key:"off",value:function($e,Ae){if($e!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off($e,Ae)}},{key:"checkPermissions",value:(we=(0,R.A)(T().mark(function $e(Ae){var et,ue,he,Le,Ze;return T().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(Ae||(Ae=Ri.AUDIO_AND_VIDEO),et=new Map,!Ae.includes(Ri.AUDIO)&&!Ae.includes(Ri.AUDIO_AND_VIDEO)){tt.next=5;break}return ue=!0,tt.prev=1,tt.next=2,navigator.permissions.query({name:"microphone"});case 2:(he=tt.sent).state!="prompt"&&he.state!="denied"||(ue=!1),tt.next=4;break;case 3:throw tt.prev=3,tt.catch(1),Error("Browser does not support microphone permission check");case 4:et.set(Ri.AUDIO,ue);case 5:if(!Ae.includes(Ri.VIDEO)&&!Ae.includes(Ri.AUDIO_AND_VIDEO)){tt.next=10;break}return Le=!0,tt.prev=6,tt.next=7,navigator.permissions.query({name:"camera"});case 7:(Ze=tt.sent).state!="prompt"&&Ze.state!="denied"||(Le=!1),tt.next=9;break;case 8:throw tt.prev=8,tt.catch(6),Error("Browser does not support camera permission check");case 9:et.set(Ri.VIDEO,Le);case 10:return tt.abrupt("return",et);case 11:case"end":return tt.stop()}},$e,null,[[1,3],[6,8]])})),function($e){return we.apply(this,arguments)})},{key:"requestPermission",value:(be=(0,R.A)(T().mark(function $e(Ae){var et,ue,he,Le,Ze,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn,nn,un,Qn,xr,_n;return T().wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:if(Ae||(Ae=Ri.AUDIO_AND_VIDEO),et=new Map,!Ae.includes(Ri.AUDIO_AND_VIDEO)){dn.next=12;break}return he={audio:!0,video:!0},Le=!0,dn.prev=1,dn.next=2,navigator.mediaDevices.getUserMedia(he);case 2:ue=dn.sent,dn.next=11;break;case 3:if(dn.prev=3,!((fn=dn.catch(1))instanceof DOMException)){dn.next=9;break}nn=fn.name,dn.next=nn==="NotAllowedError"?4:nn==="NotReadableError"?5:nn==="NotFoundError"?6:7;break;case 4:return fn.message==="Permission denied by system"&&(Ze=kr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",8);case 5:return Ze=Aa(fn,"video"),dn.abrupt("continue",8);case 6:return Ze=kr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Ze=kr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",8);case 7:Ze=fn.message;case 8:dn.next=10;break;case 9:Ze=fn instanceof TypeError&&fn.name==="TypeError"?kr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:fn.message;case 10:Le=!1,Ze&&console.error("An error occurred in request permission, ".concat(Ze));case 11:ue&&setTimeout(function(){ue.getTracks().forEach(function(br){br.stop()})},100),et.set(Ri.AUDIO_AND_VIDEO,Le);case 12:if(!Ae.includes(Ri.VIDEO)){dn.next=24;break}return Jt={audio:!1,video:!0},vt=!0,dn.prev=13,dn.next=14,navigator.mediaDevices.getUserMedia(Jt);case 14:tt=dn.sent,dn.next=23;break;case 15:if(dn.prev=15,!((un=dn.catch(13))instanceof DOMException)){dn.next=21;break}Qn=un.name,dn.next=Qn==="NotAllowedError"?16:Qn==="NotReadableError"?17:Qn==="NotFoundError"?18:19;break;case 16:return un.message==="Permission denied by system"&&(Rt=kr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",20);case 17:return Rt=Aa(un,"video"),dn.abrupt("continue",20);case 18:return Rt=kr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Rt=kr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",20);case 19:Rt=un.message;case 20:dn.next=22;break;case 21:Rt=un instanceof TypeError&&un.name==="TypeError"?kr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:un.message;case 22:vt=!1,Rt&&console.error("An error occurred in request permission, ".concat(Rt));case 23:tt&&tt.getTracks().forEach(function(br){br.stop()}),et.set(Ri.VIDEO,vt);case 24:if(!Ae.includes(Ri.AUDIO)){dn.next=36;break}return ct={audio:!0,video:!1},Ue=!0,dn.prev=25,dn.next=26,navigator.mediaDevices.getUserMedia(ct);case 26:xn=dn.sent,dn.next=35;break;case 27:if(dn.prev=27,!((xr=dn.catch(25))instanceof DOMException)){dn.next=33;break}_n=xr.name,dn.next=_n==="NotAllowedError"?28:_n==="NotReadableError"?29:_n==="NotFoundError"?30:31;break;case 28:return xr.message==="Permission denied by system"&&(yt=kr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",32);case 29:return yt=Aa(xr,"audio"),dn.abrupt("continue",32);case 30:return yt=kr.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(yt=kr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),dn.abrupt("continue",32);case 31:yt=xr.message;case 32:dn.next=34;break;case 33:yt=xr instanceof TypeError&&xr.name==="TypeError"?kr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:xr.message;case 34:Ue=!1,yt&&console.error("An error occurred in request permission, ".concat(yt));case 35:xn&&xn.getTracks().forEach(function(br){br.stop()}),et.set(Ri.AUDIO,Ue);case 36:return dn.abrupt("return",et);case 37:case"end":return dn.stop()}},$e,null,[[1,3],[13,15],[25,27]])})),function($e){return be.apply(this,arguments)})},{key:"isInt",value:function($e){return typeof $e=="number"&&$e%1==0}},{key:"getNetworkStats",value:(Re=(0,R.A)(T().mark(function $e(){var Ae,et,ue,he,Le,Ze,tt=arguments;return T().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return et=(Ae=tt.length>0&&tt[0]!==void 0?tt[0]:{}).timeoutDuration,ue=Ae.baseUrl,he=ue===void 0?"api.videosdk.live":ue,et&&this.isInt(et)||(et=6e4),Le=new Promise(function(vt,Rt){setTimeout(function(){Rt("Not able to get NetworkStats due to timeout")},et)}),Ze=new Promise(function(vt,Rt){if(navigator.onLine){var xn=new cr({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}],uploadApiUrl:"https://".concat(he,"/test-upload-speed"),downloadApiUrl:"https://".concat(he,"/test-download-speed")});xn.isRunning?(xn.onFinish=function(ct){vt({downloadSpeed:parseFloat(Number(ct.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(ct.getUploadBandwidth()/1048576).toFixed(2))})},xn.onError=function(ct){Rt("Not able to get NetworkStats")}):Rt("Not able to get NetworkStats")}else Rt("Not able to get NetworkStats due to no Network")}),Jt.abrupt("return",Promise.race([Ze,Le]));case 1:case"end":return Jt.stop()}},$e,this)})),function(){return Re.apply(this,arguments)})},{key:"checkConnection",value:(de=(0,R.A)(T().mark(function $e(){var Ae,et,ue,he,Le,Ze,tt=arguments;return T().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return et=(Ae=tt.length>0&&tt[0]!==void 0?tt[0]:{}).timeoutDuration,ue=Ae.baseUrl,he=ue===void 0?"api.videosdk.live":ue,et&&this.isInt(et)||(et=6e4),Le=new Promise(function(vt,Rt){setTimeout(function(){Rt("TimeoutError: NetworkStats timeout")},et)}),Ze=new Promise(function(vt,Rt){navigator.onLine?fetch("https://".concat(he,"/ping")).then(function(xn){xn.text().then(function(ct){ct=="pong"?vt("Connection established"):Rt("ConnectionError: Server unreachable")})}).catch(function(xn){Rt("ConnectionError: Server unreachable")}):Rt("NetworkError: Offline")}),Jt.abrupt("return",Promise.race([Ze,Le]));case 1:case"end":return Jt.stop()}},$e,this)})),function(){return de.apply(this,arguments)})},{key:"analytics",value:function($e){var Ae,et,ue;!$e&&navigator&&navigator.userAgent&&(et=navigator.userAgent,delete(ue=h().parse(et)).engine);try{var he;(he=$e)!==null&&he!==void 0&&he.browserUserAgent||(et=navigator.userAgent,delete(ue=h().parse(et)).engine)}catch{}$e&&$e.rawUserAgent&&(et=$e.rawUserAgent,delete(ue=h().parse(et)).engine),$e||($e={});var Le={};Le.sdkType=$e.sdkType||"javascript",Le.sdkVersion=$e.sdkVersion||"0.2.14",Le.platform=$e.platform||((Ae=ue)===null||Ae===void 0||(Ae=Ae.platform)===null||Ae===void 0?void 0:Ae.type)||"",$e.browserUserAgent=="null"?Le.browserUserAgent=void 0:Le.browserUserAgent=ue,$e.deviceUserAgent&&(Le.deviceUserAgent=$e.deviceUserAgent),this._deviceInfo=Le}},{key:"initMeeting",value:function($e){var Ae,et=$e.meetingId,ue=$e.customCameraVideoTrack,he=ue===void 0?void 0:ue,Le=$e.customMicrophoneAudioTrack,Ze=Le===void 0?void 0:Le,tt=$e.autoConsume,Jt=tt===void 0||tt,vt=$e.preferredProtocol,Rt=$e.mode,xn=$e.multiStream,ct=xn===void 0||xn,Ue=$e.participantId,yt=$e.name,fn=$e.micEnabled,nn=$e.webcamEnabled,un=$e.maxResolution,Qn=$e.metaData,xr=$e.chatEnabled,_n=$e.useSpartialLayerAnalytics,dn=$e.signalingBaseUrl,br=$e.defaultCamera,ur=$e.debugMode,Gn=ur===void 0||ur;if(!et)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var In=Ue?Ue.toString():M()({length:8}).toLowerCase(),gn=yt||M()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof vt!="string"&&(vt="UDP_OVER_TCP"),(Ae=vt)===null||Ae===void 0?void 0:Ae.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":vt=vt.toUpperCase();break;default:vt="UDP_OVER_TCP"}if(Rt||(Rt=Sn.nI.SEND_AND_RECV),Rt!==Sn.nI.SEND_AND_RECV&&Rt!==Sn.nI.SIGNALLING_ONLY&&Rt!==Sn.nI.RECV_ONLY&&Rt!==Sn.nI.VIEWER&&Rt!==Sn.nI.CONFERENCE)throw new Error('"mode" can only be either '.concat(Sn.nI.SEND_AND_RECV," or ").concat(Sn.nI.SIGNALLING_ONLY," or ").concat(Sn.nI.RECV_ONLY," "));if(Qn!=null&&(0,j.A)(Qn)!="object")throw new Error('"metaData" can only be object.');var Mr=this._deviceInfo.sdkType==="react-native",fa=Mr?br?br==="front"?1:0:he?he.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:Mr?1:0:0,Ci=new Qt.default({roomId:et,peerId:In,secret:this.apiKey,device:"unknown",displayName:gn,mode:Rt,useSimulcast:ct,produce:!0,consume:!0,datachannel:xr!==!1,micEnabled:fn!==!1,webcamEnabled:nn!==!1,maxResolution:un||"hd",useSpartialLayerAnalytics:_n,_deviceInfo:this._deviceInfo,customCameraVideoTrack:he,customMicrophoneAudioTrack:Ze,autoConsume:Jt,preferredProtocol:vt,signalingBaseUrl:dn,metaData:Qn,defaultCameraIndex:fa,debugMode:Gn,keyProvider:this.keyProvider});zt.roomClient=Ci;var fs=new Wt({id:In,displayName:gn,local:!0,mode:Rt,metaData:Qn});return new ii(et,fs,Ci)}},{key:"createCameraVideoTrack",value:(Q=(0,R.A)(T().mark(function $e(Ae){var et,ue,he,Le,Ze,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn,nn,un,Qn,xr;return T().wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:if(et=Ae.cameraId,ue=et===void 0?void 0:et,he=Ae.encoderConfig,Le=he===void 0?void 0:he,Ze=Ae.facingMode,tt=Ze===void 0?void 0:Ze,Jt=Ae.optimizationMode,vt=Jt===void 0?void 0:Jt,Rt=Ae.multiStream,xn=Rt===void 0||Rt,!ue){_n.next=2;break}return _n.next=1,this.getCameras();case 1:(ct=_n.sent)&&ct.some(function(dn){return dn.deviceId})&&(ct.some(function(dn){return dn.deviceId===ue})||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."));case 2:return _n.prev=2,Ue=Le?no.$.videoProfiles[Le]:no.$.videoProfiles.h360p_w640p,console.log("VIDEO PROFILE",{videoProfile:Ue,encoderConfig:Le}),yt={video:{deviceId:ue||void 0,facingMode:tt||void 0,width:Ue.width,height:Ue.height,frameRate:Ue.frameRate}},_n.next=3,(0,jo.lp)(yt);case 3:return fn=_n.sent,vt&&(fn.contentHint=vt),fn.encoderConfig=Le||"h360p_w640p",fn.contentHint=vt||"",fn.multiStream=xn,fn.cameraId=ue,_n.abrupt("return",fn);case 4:if(_n.prev=4,(Qn=_n.catch(2)).name!=="SecurityError"){_n.next=5;break}nn=kr.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,_n.next=13;break;case 5:if(Qn.name!=="DOMException"){_n.next=6;break}nn=kr.q.ERROR_RN_CAMERA_NOT_FOUND.message,_n.next=13;break;case 6:if(!(Qn instanceof DOMException)){_n.next=12;break}xr=Qn.name,_n.next=xr==="NotAllowedError"?7:xr==="NotReadableError"?8:xr==="NotFoundError"?9:10;break;case 7:return nn=ka(Qn,"video"),_n.abrupt("continue",11);case 8:return nn=Aa(Qn,"video"),_n.abrupt("continue",11);case 9:return nn=kr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(nn=kr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),_n.abrupt("continue",11);case 10:return nn=Qn.message,_n.abrupt("continue",11);case 11:_n.next=13;break;case 12:Qn.message=="getUserMedia is not implemented in this browser"?(un=kr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,nn=un.message):nn=Qn.message;case 13:console.error("An error occurred in creating video track, ".concat(nn));case 14:case"end":return _n.stop()}},$e,this,[[2,4]])})),function($e){return Q.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(K=(0,R.A)(T().mark(function $e(Ae){var et,ue,he,Le,Ze,tt,Jt,vt,Rt,xn,ct;return T().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return et=Ae.encoderConfig,ue=et===void 0?void 0:et,he=Ae.optimizationMode,Le=he===void 0?void 0:he,Ze=Ae.withAudio,tt=Ze===void 0?"enable":Ze,Jt=Ae.multiStream,vt=Jt!==void 0&&Jt,Rt=ue?no.$.screenShareProfiles[ue]:no.$.screenShareProfiles.h720p_15fps,xn={audio:tt==="enable",video:{width:Rt.resolution.width,height:Rt.resolution.height,frameRate:Rt.frameRate}},Ue.next=1,(0,jo.Zu)(xn);case 1:return ct=Ue.sent,Le&&(ct.contentHint=Le),ct.multiStream=vt,Ue.abrupt("return",ct);case 2:case"end":return Ue.stop()}},$e)})),function($e){return K.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(W=(0,R.A)(T().mark(function $e(Ae){var et,ue,he,Le,Ze,tt,Jt,vt,Rt,xn,ct,Ue,yt,fn;return T().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(et=Ae.noiseConfig,ue=et===void 0?void 0:et,he=Ae.encoderConfig,Le=he===void 0?void 0:he,Ze=Ae.microphoneId,!(tt=Ze===void 0?void 0:Ze)){nn.next=2;break}return nn.next=1,this.getMicrophones();case 1:(Jt=nn.sent)&&Jt.some(function(un){return un.deviceId})&&(Jt.some(function(un){return un.deviceId===tt})||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 2:return nn.prev=2,vt=Le?no.$.audioProfiles[Le]:no.$.audioProfiles.speech_standard,Rt={audio:{deviceId:tt,sampleRate:vt.sampleRate,echoCancellation:ue?ue&&ue.acousticEchoCancellation:vt.echoCancellation,autoGainControl:ue?ue&&ue.autoGainControl:vt.autoGainControl,noiseSuppression:ue?ue&&ue.noiseSuppression:vt.noiseSuppression,channelCount:vt.channelCount}},nn.next=3,(0,jo.lp)(Rt);case 3:return(xn=nn.sent).encoderConfig=Le||"speech_standard",xn.microphoneId=tt,nn.abrupt("return",xn);case 4:if(nn.prev=4,(yt=nn.catch(2)).name!=="SecurityError"){nn.next=5;break}ct=kr.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,nn.next=13;break;case 5:if(yt.name!=="DOMException"){nn.next=6;break}ct=kr.q.ERROR_RN_MIC_NOT_FOUND.message,nn.next=13;break;case 6:if(!(yt instanceof DOMException)){nn.next=12;break}fn=yt.name,nn.next=fn==="NotAllowedError"?7:fn==="NotReadableError"?8:fn==="NotFoundError"?9:10;break;case 7:return ct=ka(yt,"audio"),nn.abrupt("continue",11);case 8:return ct=Aa(yt,"audio"),nn.abrupt("continue",11);case 9:return ct=kr.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(ct=kr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),nn.abrupt("continue",11);case 10:return ct=yt.message,nn.abrupt("continue",11);case 11:nn.next=13;break;case 12:yt.message=="getUserMedia is not implemented in this browser"?(Ue=kr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,ct=Ue.message):ct=yt.message;case 13:console.error("An error occurred in creating audio track, ".concat(ct));case 14:case"end":return nn.stop()}},$e,this,[[2,4]])})),function($e){return W.apply(this,arguments)})}]);var W,K,Q,de,Re,be,we,We,ke,Oe,Qe}();function ka(W,K){return(W.message==="Permission denied"||W.message==="Permission dismissed"?K==="video"?kr.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:kr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:W.message.includes("The request is not allowed by the user agent")?K==="video"?kr.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:kr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:W.message==="Permission denied by system"?K==="video"?kr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:kr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:K==="video"?kr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:kr.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED).message}function Aa(W,K){return(W.message==="Device in use"?K==="video"?kr.q.ERROR_CAMERA_IN_USE:kr.q.ERROR_MICROPHONE_IN_USE:K==="video"?kr.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:kr.q.ERROR_MICROPHONE_IN_USE).message}(0,y.A)(Jr,"devices",[]),(0,y.A)(Jr,"eventEmitter",new Ft),(0,y.A)(Jr,"Constants",{errors:kr.s,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},characterState:Xe,characterMode:{TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},hlsEvents:Lc.V,transcriptionEvents:{TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},modes:Sn.nI,permission:Ri});var Br=Jr})(),B})())}(ff)),ff.exports}var Wl=BN();function Em(){return Em=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Em.apply(null,arguments)}var Wr="videosdk-live-react-sdk",Lt={"participant-joined":Wr+"-participant-joined","participant-left":Wr+"-participant-left","speaker-changed":Wr+"-speaker-changed","presenter-changed":Wr+"-presenter-changed","main-participant-changed":Wr+"-main-participant-changed","entry-requested":Wr+"-entry-requested","entry-responded":Wr+"-entry-responded","recording-started":Wr+"-recording-started","recording-stopped":Wr+"-recording-stopped","chat-message":Wr+"-chat-message","meeting-joined":Wr+"-meeting-joined","meeting-left":Wr+"-meeting-left","live-stream-started":Wr+"-live-stream-started","live-stream-stopped":Wr+"-live-stream-stopped","video-state-changed":Wr+"-video-state-changed","video-seeked":Wr+"-video-seeked","webcam-requested":Wr+"-webcam-requested","mic-requested":Wr+"-mic-requested","pin-state-changed":Wr+"-pin-state-changed","connection-open":Wr+"-connection-open","connection-close":Wr+"-connection-close","switch-meeting":Wr+"-switch-meeting",error:Wr+"-error","hls-started":Wr+"-hls-started","hls-stopped":Wr+"-hls-stopped","hls-state-changed":Wr+"-hls-state-changed","recording-state-changed":Wr+"-recording-state-changed","livestream-state-changed":Wr+"-livestream-state-changed","meeting-state-changed":Wr+"-meeting-state-changed","participant-mode-changed":Wr+"-participant-mode-changed","transcription-state-changed":Wr+"-transcription-state-changed","transcription-text":Wr+"-transcription-text","character-joined":Wr+"-character-joined","character-left":Wr+"-character-left","whiteboard-started":Wr+"-whiteboard-started","whiteboard-stopped":Wr+"-whiteboard-stopped","paused-all-streams":Wr+"-paused-all-streams","resumed-all-streams":Wr+"-resumed-all-streams","media-relay-started":Wr+"-media-relay-started","media-relay-stopped":Wr+"-media-relay-stopped","media-relay-error":Wr+"-media-relay-error","media-relay-request-response":Wr+"-media-relay-request-response","media-relay-request-received":Wr+"-media-relay-request-received"},Ot=new jN;Ot.setMaxListeners(9999);var z1=ne.createContext(),Fm=function(r){var i=r===void 0?{}:r,o=i.onParticipantJoined,g=o===void 0?function(){}:o,N=i.onParticipantLeft,B=N===void 0?function(){}:N,j=i.onSpeakerChanged,R=j===void 0?function(){}:j,d=i.onPresenterChanged,S=d===void 0?function(){}:d,y=i.onMainParticipantChanged,b=y===void 0?function(){}:y,T=i.onEntryRequested,f=T===void 0?function(){}:T,h=i.onEntryResponded,k=h===void 0?function(){}:h,E=i.onPausedAllStreams,H=E===void 0?function(){}:E,m=i.onResumedAllStreams,P=m===void 0?function(){}:m,v=i.onRecordingStarted,U=v===void 0?function(){}:v,C=i.onRecordingStopped,_=C===void 0?function(){}:C,w=i.onChatMessage,p=w===void 0?function(){}:w,x=i.onMeetingJoined,A=x===void 0?function(){}:x,I=i.onMeetingLeft,M=I===void 0?function(){}:I,F=i.onLiveStreamStarted,z=F===void 0?function(){}:F,G=i.onLiveStreamStopped,Z=G===void 0?function(){}:G,ce=i.onVideoStateChanged,X=ce===void 0?function(){}:ce,Ee=i.onVideoSeeked,Se=Ee===void 0?function(){}:Ee,xe=i.onWebcamRequested,_e=xe===void 0?function(){}:xe,Pe=i.onMicRequested,He=Pe===void 0?function(){}:Pe,pe=i.onPinStateChanged,Ge=pe===void 0?function(){}:pe,Te=i.onConnectionOpen,Ve=Te===void 0?function(){}:Te,qe=i.onConnetionClose,nt=qe===void 0?function(){}:qe,Bt=i.onSwitchMeeting,Pr=Bt===void 0?function(){}:Bt,Ur=i.onError,Zn=Ur===void 0?function(){}:Ur,fr=i.onHlsStarted,gr=fr===void 0?function(){}:fr,Bn=i.onHlsStopped,Ie=Bn===void 0?function(){}:Bn,Be=i.onHlsStateChanged,Ye=Be===void 0?function(){}:Be,Qt=i.onRecordingStateChanged,Ft=Qt===void 0?function(){}:Qt,xt=i.onLivestreamStateChanged,pn=xt===void 0?function(){}:xt,Ln=i.onMeetingStateChanged,zt=Ln===void 0?function(){}:Ln,sr=i.onParticipantModeChanged,Hr=sr===void 0?function(){}:sr,Rr=i.onCharacterJoined,Vr=Rr===void 0?function(){}:Rr,zr=i.onCharacterLeft,Ar=zr===void 0?function(){}:zr,$r=i.onMediaRelayStarted,ga=$r===void 0?function(){}:$r,ea=i.onMediaRelayStopped,oa=ea===void 0?function(){}:ea,Nn=i.onMediaRelayError,Ha=Nn===void 0?function(){}:Nn,Ca=i.onMediaRelayRequestResponse,Gr=Ca===void 0?function(){}:Ca,dr=i.onMediaRelayRequestReceived,at=dr===void 0?function(){}:dr;return ne.useEffect(function(){return Ot.on(Lt["participant-joined"],g),Ot.on(Lt["participant-left"],B),Ot.on(Lt["speaker-changed"],R),Ot.on(Lt["presenter-changed"],S),Ot.on(Lt["main-participant-changed"],b),Ot.on(Lt["entry-requested"],f),Ot.on(Lt["entry-responded"],k),Ot.on(Lt["paused-all-streams"],H),Ot.on(Lt["resumed-all-streams"],P),Ot.on(Lt["recording-started"],U),Ot.on(Lt["recording-stopped"],_),Ot.on(Lt["chat-message"],p),Ot.on(Lt["meeting-joined"],A),Ot.on(Lt["meeting-left"],M),Ot.on(Lt["live-stream-started"],z),Ot.on(Lt["live-stream-stopped"],Z),Ot.on(Lt["video-state-changed"],X),Ot.on(Lt["video-seeked"],Se),Ot.on(Lt["webcam-requested"],_e),Ot.on(Lt["mic-requested"],He),Ot.on(Lt["pin-state-changed"],Ge),Ot.on(Lt["connection-open"],Ve),Ot.on(Lt["connection-close"],nt),Ot.on(Lt["switch-meeting"],Pr),Ot.on(Lt.error,Zn),Ot.on(Lt["hls-started"],gr),Ot.on(Lt["hls-stopped"],Ie),Ot.on(Lt["hls-state-changed"],Ye),Ot.on(Lt["recording-state-changed"],Ft),Ot.on(Lt["livestream-state-changed"],pn),Ot.on(Lt["meeting-state-changed"],zt),Ot.on(Lt["participant-mode-changed"],Hr),Ot.on(Lt["character-joined"],Vr),Ot.on(Lt["character-left"],Ar),Ot.on(Lt["media-relay-started"],ga),Ot.on(Lt["media-relay-stopped"],oa),Ot.on(Lt["media-relay-error"],Ha),Ot.on(Lt["media-relay-request-response"],Gr),Ot.on(Lt["media-relay-request-received"],at),function(){Ot.off(Lt["meeting-state-changed"],zt),Ot.off(Lt["participant-joined"],g),Ot.off(Lt["participant-left"],B),Ot.off(Lt["speaker-changed"],R),Ot.off(Lt["presenter-changed"],S),Ot.off(Lt["main-participant-changed"],b),Ot.off(Lt["entry-requested"],f),Ot.off(Lt["entry-responded"],k),Ot.off(Lt["paused-all-streams"],H),Ot.off(Lt["resumed-all-streams"],P),Ot.off(Lt["recording-started"],U),Ot.off(Lt["recording-stopped"],_),Ot.off(Lt["chat-message"],p),Ot.off(Lt["meeting-joined"],A),Ot.off(Lt["meeting-left"],M),Ot.off(Lt["live-stream-started"],z),Ot.off(Lt["live-stream-stopped"],Z),Ot.off(Lt["video-state-changed"],X),Ot.off(Lt["video-seeked"],Se),Ot.off(Lt["webcam-requested"],_e),Ot.off(Lt["mic-requested"],He),Ot.off(Lt["pin-state-changed"],Ge),Ot.off(Lt["connection-open"],Ve),Ot.off(Lt["connection-close"],nt),Ot.off(Lt["switch-meeting"],Pr),Ot.off(Lt.error,Zn),Ot.off(Lt["hls-started"],gr),Ot.off(Lt["hls-stopped"],Ie),Ot.off(Lt["hls-state-changed"],Ye),Ot.off(Lt["recording-state-changed"],Ft),Ot.off(Lt["livestream-state-changed"],pn),Ot.off(Lt["participant-mode-changed"],Hr),Ot.off(Lt["character-joined"],Vr),Ot.off(Lt["character-left"],Ar),Ot.off(Lt["media-relay-started"],ga),Ot.off(Lt["media-relay-stopped"],oa),Ot.off(Lt["media-relay-error"],Ha),Ot.off(Lt["media-relay-request-response"],Gr),Ot.off(Lt["media-relay-request-received"],at)}},[]),ne.useContext(z1)},zN="0.3.14",UN=function(r){var i=r.children,o=r.config,g=r.token,N=r.joinWithoutUserInteraction,B=r.reinitialiseMeetingOnConfigChange,j=r.deviceInfo,R=r.keyProvider,d=ne.useState(null),S=d[0],y=d[1],b=ne.useState(null),T=b[0],f=b[1],h=ne.useState(null),k=h[0],E=h[1],H=ne.useState(null),m=H[0],P=H[1],v=ne.useState(null),U=v[0],C=v[1],_=ne.useState(!1),w=_[0],p=_[1],x=ne.useState(!1),A=x[0],I=x[1],M=ne.useState(!1),F=M[0],z=M[1],G=ne.useState(!1),Z=G[0],ce=G[1],X=ne.useState([]),Ee=X[0],Se=X[1],xe=ne.useState(new Map),_e=xe[0],Pe=xe[1],He=ne.useState(new Map),pe=He[0],Ge=He[1],Te=ne.useState(new Map),Ve=Te[0],qe=Te[1],nt=ne.useState(!1),Bt=nt[0],Pr=nt[1],Ur=ne.useState(new Map),Zn=Ur[0],fr=Ur[1],gr=ne.useState(!1),Bn=gr[0],Ie=gr[1],Be=ne.useState(!1),Ye=Be[0],Qt=Be[1],Ft=ne.useState("RECORDING_STOPPED"),xt=Ft[0],pn=Ft[1],Ln=ne.useState("LIVESTREAM_STOPPED"),zt=Ln[0],sr=Ln[1],Hr=ne.useState("HLS_STOPPED"),Rr=Hr[0],Vr=Hr[1],zr=ne.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Ar=zr[0],$r=zr[1],ga=ne.useState("TRANSCRIPTION_STOPPED"),ea=ga[0],oa=ga[1],Nn=ne.useRef(),Ha=ne.useRef(),Ca=ne.useRef(),Gr=ne.useRef(),dr=ne.useRef(),at=ne.useRef(R),ut=ne.useRef(o),Wt=ne.useRef(g),Tt=ne.useRef(!1),tn=ne.useRef(),Xt=ne.useMemo(function(){return B},[]);ne.useEffect(function(){Nn.current=S},[S]),ne.useEffect(function(){Ha.current=w},[w]),ne.useEffect(function(){Ca.current=A},[A]),ne.useEffect(function(){Gr.current=F},[F]),ne.useEffect(function(){dr.current=Z},[Z]),ne.useEffect(function(){ut.current=o},[o]),ne.useEffect(function(){Wt.current=g},[g]),ne.useEffect(function(){tn.current=Ye},[Ye]);var Xe=function(){y(null),f(null),E(null),P(null),C(null),p(!1),I(!1),z(!1),ce(!1),Se([]),Pr(!1),Pe(new Map),Ge(new Map),qe(new Map),fr(new Map),Ie(!1),Qt(!1),pn("RECORDING_STOPPED"),sr("LIVESTREAM_STOPPED"),Vr("HLS_STOPPED"),oa("TRANSCRIPTION_STOPPED"),$r({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},Sn=function(ve){Pe(function(Pt){Pt.set(ve.id,ve);var $n=new Map(Pt);return $n}),Ot.emit(Lt["participant-joined"],ve)},Rn=function(ve){Pe(function(Pt){Pt.delete(ve.id);var $n=new Map(Pt);return $n}),Ot.emit(Lt["participant-left"],ve)},Vn=function(ve){var Pt,$n;C(ve),z(ve===(Nn==null||(Pt=Nn.current)===null||Pt===void 0||($n=Pt.localParticipant)===null||$n===void 0?void 0:$n.id)),Ot.emit(Lt["presenter-changed"],ve)},or=function(ve){E(ve),Ot.emit(Lt["main-participant-changed"],ve)},$t=function(ve){P(ve),Ot.emit(Lt["speaker-changed"],ve)},bt=function(ve){Se(function(Pt){return[].concat(Pt,[ve])}),Ot.emit(Lt["chat-message"],ve)},Pn=function(ve){Ot.emit(Lt["entry-requested"],ve)},kn=function(ve,Pt){Ot.emit(Lt["entry-responded"],ve,Pt)},bn=function(){ce(!0),Ot.emit(Lt["recording-started"])},Nr=function(){ce(!1),Ot.emit(Lt["recording-stopped"])},Er=function(ve){ve.track.readyState==="live"&&(ve.kind==="video"?I(!0):ve.kind==="audio"&&p(!0))},Or=function(ve){ve.kind==="video"?I(!1):ve.kind==="audio"&&p(!1)},Jn=function(ve){Pr(!0),Ot.emit(Lt["live-stream-started"],ve)},Hn=function(){Pr(!1),Ot.emit(Lt["live-stream-stopped"])},ha=function(ve){Qt(!0),Ot.emit(Lt["hls-started"],ve)},ca=function(){Qt(!1),Ot.emit(Lt["hls-stopped"])},Ta=function(ve){Ot.emit(Lt["video-state-changed"],ve)},Oa=function(ve){Ot.emit(Lt["video-seeked"],ve)},ss=function(ve){Ot.emit(Lt["webcam-requested"],ve)},ai=function(ve){Ot.emit(Lt["mic-requested"],ve)},ji=function(ve){ve.switchRoomId?(Se(function(Pt){return[].concat(Pt,ve.messages)}),Ot.emit(Lt["meeting-joined"],ve)):(Tt.current=!0,Se(function(Pt){return[].concat(Pt,ve.messages)}),Ot.emit(Lt["meeting-joined"],ve),Ie(!0))},os=function(){Ot.emit(Lt["meeting-left"]);var ve=Nn.current;if(ve){var Pt;typeof ve?.off=="function"&&(ve.off("meeting-state-changed",On),ve.off("participant-joined",Sn),ve.off("participant-left",Rn),ve.off("presenter-changed",Vn),ve.off("main-participant-changed",or),ve.off("speaker-changed",$t),ve.off("entry-requested",Pn),ve.off("entry-responded",kn),ve.off("chat-message",bt),ve.off("recording-started",bn),ve.off("recording-stopped",Nr),ve.off("meeting-joined",ji),ve.off("meeting-left",os),ve.off("livestream-started",Jn),ve.off("livestream-stopped",Hn),ve.off("video-state-changed",Ta),ve.off("video-seeked",Oa),ve.off("webcam-requested",ss),ve.off("mic-requested",ai),ve.off("pin-state-changed",Ei),ve.off("paused-all-streams",Yi),ve.off("resumed-all-streams",qr),ve.off("connection-open",Si),ve.off("connection-close",Ni),ve.off("switch-meeting",sn),ve.off("error",qn),ve.off("hls-started",ha),ve.off("hls-stopped",ca),ve.off("recording-state-changed",jn),ve.off("livestream-state-changed",tr),ve.off("hls-state-changed",wn),ve.off("participant-mode-changed",ua),ve.off("whiteboard-stopped",An),ve.off("whiteboard-started",vr),ve.off("transcription-state-changed",Ir),ve.off("character-joined",jr),ve.off("character-left",Ea)),typeof(ve==null||(Pt=ve.localParticipant)===null||Pt===void 0?void 0:Pt.off)=="function"&&(ve.localParticipant.off("stream-enabled",Er),ve.localParticipant.off("stream-disabled",Or)),Xe()}},Ei=function(ve){var Pt=ve.participantId,$n=ve.state,aa=ve.pinnedBy;qe(function(Va){!$n.cam&&!$n.share?Va.delete(Pt):Va.set(Pt,$n);var ii=new Map(Va);return ii}),Ot.emit(Lt["pin-state-changed"],{participantId:Pt,state:$n,pinnedBy:aa})},Yi=function(ve){var Pt=ve.kind;Ot.emit(Lt["paused-all-streams"],{kind:Pt})},qr=function(ve){var Pt=ve.kind;Ot.emit(Lt["resumed-all-streams"],{kind:Pt})},Si=function(ve){fr(function(Pt){Pt.set(ve.id,ve);var $n=new Map(Pt);return $n}),Ot.emit(Lt["connection-open"],ve)},Ni=function(ve){fr(function(Pt){Pt.delete(ve);var $n=new Map(Pt);return $n}),Ot.emit(Lt["connection-close"],ve)},sn=function(ve){Ot.emit(Lt["switch-meeting"],ve)},qn=function(ve){Ot.emit(Lt.error,ve)},jn=function(ve){pn(ve?.status),Ot.emit(Lt["recording-state-changed"],ve)},tr=function(ve){sr(ve?.status),Ot.emit(Lt["livestream-state-changed"],ve)},wn=function(ve){Vr(ve?.status),ve?.status=="HLS_PLAYABLE"?$r({downstreamUrl:ve?.downstreamUrl,playbackHlsUrl:ve?.playbackHlsUrl,livestreamUrl:ve?.livestreamUrl}):ve?.status=="HLS_STOPPED"&&$r({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Ot.emit(Lt["hls-state-changed"],ve)},On=function(ve){Ot.emit(Lt["meeting-state-changed"],ve)},Ir=function(ve){oa(ve?.status),Ot.emit(Lt["transcription-state-changed"],ve)},hr=function(ve){Ot.emit(Lt["transcription-text"],ve)},vr=function(ve){Ot.emit(Lt["whiteboard-started"],ve)},An=function(ve){Ot.emit(Lt["whiteboard-stopped"],ve)},jr=function(ve){Ge(function(Pt){Pt.set(ve.id,ve);var $n=new Map(Pt);return $n}),Ot.emit(Lt["character-joined"],ve)},Ea=function(ve){Ge(function(Pt){Pt.delete(ve.id);var $n=new Map(Pt);return $n}),Ot.emit(Lt["character-left"],ve)},ua=function(ve){var Pt,$n;Pe(function(aa){var Va=aa.get(ve.participantId);Va.mode=ve.mode,aa.set(Va.id,Va);var ii=new Map(aa);return ii}),ve.participantId===(Nn==null||(Pt=Nn.current)===null||Pt===void 0||($n=Pt.localParticipant)===null||$n===void 0?void 0:$n.id)&&f(function(aa){return aa.mode=ve.mode,aa}),Ot.emit(Lt["participant-mode-changed"],ve)},ya=function(ve){Ot.emit(Lt["media-relay-started"],ve)},ja=function(ve){Ot.emit(Lt["media-relay-stopped"],ve)},Ba=function(ve){Ot.emit(Lt["media-relay-error"],ve)},$a=function(ve){Ot.emit(Lt["media-relay-request-response"],ve)},Sa=function(ve){Ot.emit(Lt["media-relay-request-received"],ve)},Qa=function(){var ve=Wl.VideoSDK&&Wl.VideoSDK.initMeeting(ut.current);y(ve);var Pt=ve.localParticipant,$n=ve.participants,aa=ve.characters;$n.set(Pt.id,Pt),Pe($n),Ge(aa),f(Pt),ve.on("meeting-state-changed",On),ve.on("participant-joined",Sn),ve.on("participant-left",Rn),ve.on("presenter-changed",Vn),ve.on("main-participant-changed",or),ve.on("speaker-changed",$t),ve.on("entry-requested",Pn),ve.on("entry-responded",kn),ve.on("chat-message",bt),ve.on("recording-started",bn),ve.on("recording-stopped",Nr),ve.on("meeting-joined",ji),ve.on("meeting-left",os),ve.on("livestream-started",Jn),ve.on("livestream-stopped",Hn),ve.on("video-state-changed",Ta),ve.on("video-seeked",Oa),ve.on("webcam-requested",ss),ve.on("mic-requested",ai),ve.on("pin-state-changed",Ei),ve.on("paused-all-streams",Yi),ve.on("resumed-all-streams",qr),ve.on("connection-open",Si),ve.on("connection-close",Ni),ve.on("switch-meeting",sn),ve.on("error",qn),ve.on("hls-started",ha),ve.on("hls-stopped",ca),ve.on("recording-state-changed",jn),ve.on("livestream-state-changed",tr),ve.on("hls-state-changed",wn),ve.on("participant-mode-changed",ua),ve.on("transcription-state-changed",Ir),ve.on("transcription-text",hr),ve.on("whiteboard-started",vr),ve.on("whiteboard-stopped",An),ve.on("character-joined",jr),ve.on("character-left",Ea),ve.on("media-relay-started",ya),ve.on("media-relay-stopped",ja),ve.on("media-relay-error",Ba),ve.on("media-relay-request-response",$a),ve.on("media-relay-request-received",Sa),ve.localParticipant.on("stream-enabled",Er),ve.localParticipant.on("stream-disabled",Or),ve.join()},pi=function(){var ve=Nn.current;ve&&ve.leave()},Ms=function(){var ve=Nn.current;ve&&ve.end()},Qi=function(ve){var Pt=Nn.current;Pt&&Pt.pauseAllStreams(ve)},cs=function(ve){var Pt=Nn.current;Pt&&Pt.resumeAllStreams(ve)},mi=function(ve,Pt,$n,aa){var Va=Nn.current;Va&&Va.startRecording(ve,Pt,$n,aa)},to=function(){var ve=Nn.current;if(ve){var Pt=dr.current;Pt&&ve.stopRecording()}},Zs=function(ve){ve===void 0&&(ve=void 0);var Pt=Nn.current;Pt&&Pt.unmuteMic(ve)},bs=function(){var ve=Nn.current;ve&&ve.muteMic()},Ls=function(ve){ve===void 0&&(ve=void 0);var Pt=Ha.current;Pt?bs():Zs(ve)},ls=function(){var ve=Nn.current;ve&&ve.disableWebcam()},Ji=function(ve){ve===void 0&&(ve=void 0);var Pt=Nn.current;Pt&&Pt.enableWebcam(ve)},us=function(ve){ve===void 0&&(ve=void 0);var Pt=Ca.current;Pt?ls():Ji(ve)},Io=function(ve){var Pt=ve.meetingId,$n=ve.token,aa=Nn.current;aa&&aa.switchTo({meetingId:Pt,token:$n})},yr=function(){var ve=Nn.current;ve&&ve.disableScreenShare()},xi=function(ve){ve===void 0&&(ve=void 0);var Pt=Nn.current;Pt&&Pt.enableScreenShare(ve)},ta=function(ve){ve===void 0&&(ve=void 0);var Pt=Gr.current;Pt?yr():xi(ve)},Bi=function(ve){var Pt=Nn.current;Pt&&Pt.changeMode(ve)},Is=function(ve){var Pt=Nn.current;Pt&&Pt.sendChatMessage(ve)},Wn=function(ve,Pt){var $n=Nn.current;$n&&$n.respondEntry(ve,Pt)},Ai=function(){try{var ve=Nn.current;return Promise.resolve(function(){if(ve)return Promise.resolve(ve.getMics())}())}catch(Pt){return Promise.reject(Pt)}},zi=function(){try{var ve=Nn.current;return Promise.resolve(function(){if(ve)return Promise.resolve(ve.getWebcams())}())}catch(Pt){return Promise.reject(Pt)}},Ui=function(ve){var Pt=Nn.current;Pt&&Pt.changeWebcam(ve)},lr=function(ve){var Pt=Nn.current;Pt&&Pt.replaceWebcamStream(ve)},Da=function(ve){var Pt=Nn.current;Pt&&Pt.changeMic(ve)},Oi=function(ve){var Pt=ve.link,$n=Nn.current;$n&&$n.startVideo({link:Pt})},Eo=function(){var ve=Nn.current;ve&&ve.stopVideo()},ti=function(){var ve=Nn.current;ve&&ve.resumeVideo()},ws=function(ve){var Pt=ve.currentTime,$n=Nn.current;$n&&$n.pauseVideo({currentTime:Pt})},Ws=function(){var ve=Nn.current;ve&&ve.enableAdaptiveSubscription()},Fa=function(){var ve=Nn.current;ve&&ve.disableAdaptiveSubscription()},Xo=function(ve){var Pt=ve.destinationMeetingId,$n=ve.token,aa=ve.kinds,Va=Nn.current;Va&&Va.requestMediaRelay({destinationMeetingId:Pt,token:$n,kinds:aa})},Di=function(ve){var Pt=Nn.current;Pt&&Pt.stopMediaRelay(ve)},Dr=function(ve){var Pt=ve.currentTime,$n=Nn.current;$n&&$n.seekVideo({currentTime:Pt})},Hi=function(ve,Pt){var $n=Nn.current;$n&&$n.startLivestream(ve,Pt)},ni=function(){var ve=Nn.current;ve&&ve.stopLivestream()},Es=function(ve){var Pt=ve.meetingId,$n=ve.payload;try{var aa=Nn.current,Va=function(){if(aa)return Promise.resolve(aa.connectTo({meetingId:Pt,payload:$n})).then(function(){})}();return Promise.resolve(Va&&Va.then?Va.then(function(){}):void 0)}catch(ii){return Promise.reject(ii)}},So=function(ve,Pt){var $n=Nn.current;$n&&$n.startHls(ve,Pt)},xo=function(){var ve=Nn.current;ve&&ve.stopHls()},js=function(){Wl.VideoSDK.config(Wt.current),at.current&&Wl.VideoSDK.setKeyProvider(at.current),j?Wl.VideoSDK.analytics(j):Wl.VideoSDK.analytics({sdkType:"react-web",sdkVersion:zN}),N&&Qa()};return ne.useEffect(function(){js()},[]),ne.useEffect(function(){Xt&&Tt.current&&(pi(),js(),!N&&Qa())},[o.meetingId,g,Xt]),c.createElement(z1.Provider,{value:{meetingId:S?.id,meeting:S,baseUrl:S?.baseUrl,localParticipant:T,mainParticipant:k,activeSpeakerId:m,participants:_e,characters:pe,presenterId:U,localMicOn:w,localWebcamOn:A,localScreenShareOn:F,messages:Ee,isRecording:Z,isLiveStreaming:Bt,pinnedParticipants:Ve,connections:Zn,isHls:Ye,recordingState:xt,livestreamState:zt,hlsState:Rr,hlsUrls:Ar,transcriptionState:ea,isMeetingJoined:Bn,selectedCameraDevice:S?.selectedCameraDevice,selectedMicrophoneDevice:S?.selectedMicrophoneDevice,join:Qa,leave:pi,end:Ms,pauseAllStreams:Qi,resumeAllStreams:cs,startRecording:mi,stopRecording:to,sendChatMessage:Is,respondEntry:Wn,muteMic:bs,unmuteMic:Zs,toggleMic:Ls,disableWebcam:ls,enableWebcam:Ji,toggleWebcam:us,disableScreenShare:yr,enableScreenShare:xi,toggleScreenShare:ta,switchTo:Io,getMics:Ai,getWebcams:zi,changeWebcam:Ui,replaceWebcamStream:lr,changeMic:Da,changeMode:Bi,startVideo:Oi,stopVideo:Eo,resumeVideo:ti,pauseVideo:ws,seekVideo:Dr,startLivestream:Hi,stopLivestream:ni,connectTo:Es,startHls:So,stopHls:xo,enableAdaptiveSubscription:Ws,disableAdaptiveSubscription:Fa,requestMediaRelay:Xo,stopMediaRelay:Di}},i)},U1=function(r,i){var o={},g=o.onStreamEnabled,N=g===void 0?function(){}:g,B=o.onStreamDisabled,j=B===void 0?function(){}:B,R=o.onMediaStatusChanged,d=R===void 0?function(){}:R,S=o.onVideoQualityChanged,y=S===void 0?function(){}:S,b=o.onStreamPaused,T=b===void 0?function(){}:b,f=o.onStreamResumed,h=f===void 0?function(){}:f,k=o.onProducerAdded,E=k===void 0?function(){}:k,H=o.onProducerRemoved,m=H===void 0?function(){}:H,P=o.onConsumerAdded,v=P===void 0?function(){}:P,U=o.onConsumerRemoved,C=U===void 0?function(){}:U,_=ne.useState(null),w=_[0],p=_[1],x=ne.useState(null),A=x[0],I=x[1],M=ne.useState(null),F=M[0],z=M[1],G=ne.useState(null),Z=G[0],ce=G[1],X=Fm(),Ee=ne.useMemo(function(){var dr,at=X?.participants,ut=X?.localParticipant,Wt=X?.activeSpeakerId,Tt=X?.mainParticipant,tn=(X==null||(dr=X.pinnedParticipants)===null||dr===void 0?void 0:dr.get(r))||{cam:!1,share:!1};return{participants:at,localParticipant:ut,activeSpeakerId:Wt,mainParticipant:Tt,pinState:tn}},[X]),Se=Ee.participants,xe=Ee.localParticipant,_e=Ee.activeSpeakerId,Pe=Ee.mainParticipant,He=Ee.pinState,pe=Se?.get(r),Ge=ne.useState(pe?.webcamOn),Te=Ge[0],Ve=Ge[1],qe=ne.useState(pe?.micOn),nt=qe[0],Bt=qe[1],Pr=ne.useState(pe?.mode),Ur=Pr[0],Zn=Pr[1],fr=function(at){if(at.track.readyState==="live")switch(at.kind){case"video":w!=null&&p(null),p(at);break;case"audio":A!=null&&I(null),I(at);break;case"share":F!=null&&z(null),z(at);break;case"shareAudio":Z!=null&&ce(null),ce(at);break}},gr=function(at){switch(at.kind){case"video":p(null);break;case"audio":I(null);break;case"share":z(null);break;case"shareAudio":ce(null);break}},Bn=function(at){fr(at),N(at)},Ie=function(at){r===at.participantId&&Zn(at.mode)},Be=function(at){gr(at),j(at)},Ye=function(at){var ut=at.peerId,Wt=at.prevQuality,Tt=at.currentQuality;y({peerId:ut,prevQuality:Wt,currentQuality:Tt})},Qt=function(at){var ut=at.kind,Wt=at.peerId,Tt=at.newStatus;ut=="audio"?Bt(Tt):ut=="video"&&Ve(Tt),d({kind:ut,peerId:Wt,newStatus:Tt})},Ft=function(at){pe?.setQuality(at)},xt=function(at,ut){pe?.setViewPort(at,ut)},pn=function(at){pe?.setScreenShareQuality(at)},Ln=function(){pe?.enableMic()},zt=function(){pe?.disableMic()},sr=function(){pe?.enableWebcam()},Hr=function(){pe?.disableWebcam()},Rr=function(at){pe?.pin(at)},Vr=function(at){pe?.unpin(at)},zr=function(){pe?.remove()},Ar=function(at){var ut=at===void 0?{}:at,Wt=ut.height,Tt=ut.width;return Promise.resolve(pe?.captureImage({height:Wt,width:Tt}))},$r=function(){return Promise.resolve(pe?.getAudioStats())},ga=function(){return Promise.resolve(pe?.getVideoStats())},ea=function(){return Promise.resolve(pe?.getShareStats())},oa=function(){return Promise.resolve(pe?.getShareAudioStats())},Nn=function(){pe?.consumeWebcamStreams()},Ha=function(){pe?.consumeMicStreams()},Ca=function(){pe?.stopConsumingWebcamStreams()},Gr=function(){pe?.stopConsumingMicStreams()};return ne.useEffect(function(){var dr=pe?.streams;return dr&&dr.forEach(function(at){fr(at)}),pe!=null&&pe.micOn&&Bt(nt),pe!=null&&pe.webcamOn&&Ve(Te),pe?.on("stream-enabled",Bn),pe?.on("stream-disabled",Be),pe?.on("stream-paused",function(at){T(at)}),pe?.on("stream-resumed",function(at){h(at)}),pe?.on("media-status-changed",Qt),pe?.on("video-quality-changed",Ye),pe?.on("producer-added",function(at){E(at)}),pe?.on("producer-removed",function(at){m(at)}),pe?.on("consumer-added",function(at){v(at)}),pe?.on("consumer-removed",function(at){C(at)}),Ot.on(Lt["participant-mode-changed"],Ie),function(){pe?.off("stream-enabled",Bn),pe?.off("stream-disabled",Be),pe?.off("media-status-changed",Qt),pe?.off("video-quality-changed",Ye),Ot.off(Lt["participant-mode-changed"],Ie)}},[pe]),{displayName:pe?.displayName,participant:pe,webcamStream:w,micStream:A,screenShareStream:F,screenShareAudioStream:Z,webcamOn:Te||!!w,micOn:nt||!!A,mode:Ur,metaData:pe?.metaData,screenShareOn:!!F,isLocal:xe?.id===r,isActiveSpeaker:_e===r,isMainParticipant:Pe?.id===r,pinState:He,consumeMicStreams:Ha,consumeWebcamStreams:Nn,stopConsumingMicStreams:Gr,stopConsumingWebcamStreams:Ca,setQuality:Ft,setScreenShareQuality:pn,setViewPort:xt,enableMic:Ln,disableMic:zt,enableWebcam:sr,disableWebcam:Hr,captureImage:Ar,pin:Rr,unpin:Vr,remove:zr,getAudioStats:$r,getVideoStats:ga,getShareStats:ea,getShareAudioStats:oa}},HN=function(r,i){var o=i===void 0?{}:i,g=o.onMessageReceived,N=g===void 0?function(){}:g,B=o.onOldMessagesReceived,j=B===void 0?function(){}:B,R=Fm(),d=R.meeting,S=R.isMeetingJoined,y=ne.useState([]),b=y[0],T=y[1],f=ne.useRef(!1),h=function(m,P,v){d&&d.pubSub.publish(r,m,P,v)},k=function(m){T(function(P){return[].concat(P,[m])}),N(m)},E=function(m){try{var P;return Promise.resolve(m==null||(P=m.pubSub)===null||P===void 0?void 0:P.subscribe(r,k)).then(function(v){v&&(j(v.messages),T(v.messages))})}catch(v){return Promise.reject(v)}};return ne.useEffect(function(){if(d&&!f.current&&S)return f.current=!0,E(d),function(){var H;d==null||(H=d.pubSub)===null||H===void 0||H.unsubscribe(r,k)}},[d,S]),{publish:h,messages:b}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));Wl.VideoSDK.Constants;ne.forwardRef(function(e,r){var i=e.participantId,o=e.type,g=o===void 0?"video":o,N=e.containerStyle,B=N===void 0?{}:N,j=e.className,R=j===void 0?"":j,d=e.classNameVideo,S=d===void 0?"":d,y=e.videoStyle,b=y===void 0?{}:y,T=U1(i),f=T.webcamOn,h=T.webcamStream,k=T.isLocal,E=T.screenShareStream,H=T.screenShareOn,m=ne.useRef(null);return ne.useEffect(function(){var P=g==="share"?E:h,v=g==="share"?H:f;if(m.current)if(v&&P){var U=new MediaStream;U.addTrack(P.track),m.current.srcObject=U,m.current.setAttribute("playsinline",""),m.current.setAttribute("x5-playsinline",""),m.current.setAttribute("webkit-playsinline",""),m.current.play().catch(function(C){return console.error("videoRef.current.play() failed",C)})}else m.current.srcObject=null},[g].concat(g==="share"?[H,E]:g==="video"?[f,h]:[])),c.createElement("div",{ref:r,className:"video-container participant-video-"+i+" "+(R||""),style:Em({objectFit:g==="share"?"contain":"none",height:"100%"},B)},c.createElement("video",{width:"100%",height:"100%",ref:m,autoPlay:!0,className:S,style:k&&g!=="share"?Em({transform:"scaleX(-1)",WebkitTransform:"scaleX(-1)"},b):b}))});function e_({participantId:e}){const r=ne.useRef(null),i=ne.useRef(null),{webcamStream:o,micStream:g,webcamOn:N,micOn:B,isLocal:j,displayName:R}=U1(e);return console.log("ParticipantView for:",e,{webcamOn:N,micOn:B,isLocal:j,displayName:R,hasWebcamStream:!!o,hasMicStream:!!g}),ne.useEffect(()=>{if(i.current&&N&&o){console.log("Setting video stream for:",R,o);const d=new MediaStream;d.addTrack(o.track),i.current.srcObject=d,i.current.play().catch(S=>{console.error("Video play failed:",S)})}else i.current&&(console.log("Clearing video stream for:",R),i.current.srcObject=null)},[o,N,R]),ne.useEffect(()=>{if(r.current)if(B&&g){const d=new MediaStream;d.addTrack(g.track),r.current.srcObject=d,r.current.play().catch(S=>console.error("audio play failed",S))}else r.current.srcObject=null},[g,B]),c.createElement("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden"},c.createElement("audio",{ref:r,autoPlay:!0,playsInline:!0,muted:j}),N&&o?c.createElement("video",{ref:i,autoPlay:!0,playsInline:!0,muted:j,className:"w-full h-full object-cover",onLoadedMetadata:()=>console.log("Video metadata loaded for:",R),onError:d=>console.error("Video error for:",R,d)}):c.createElement("div",{className:"w-full h-full flex items-center justify-center bg-gray-700"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-2"},c.createElement("span",{className:"text-2xl font-medium"},(R||"U").charAt(0).toUpperCase())),c.createElement("p",{className:"text-sm"},R||"User"),c.createElement("p",{className:"text-xs text-gray-400"},"Camera off"))),c.createElement("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 px-2 py-1 rounded"},c.createElement("span",{className:"text-white text-xs"},R||"User"," ",j?"(You)":"")),c.createElement("div",{className:"absolute top-2 right-2 flex space-x-1"},!B&&c.createElement("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center"},c.createElement(Kx,null)),!N&&c.createElement("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center"},c.createElement(Qx,null))))}function FN({onLeave:e,setShowChat:r,showChat:i,setShowParticipants:o,showParticipants:g}){const{leave:N,toggleMic:B,toggleWebcam:j}=Fm(),R=()=>{N(),e&&e()};return c.createElement("div",{className:"bg-gray-800 p-4"},c.createElement("div",{className:"flex items-center justify-center space-x-4"},c.createElement("button",{onClick:B,className:"p-3 rounded-full bg-gray-700 hover:bg-gray-600 text-white transition-colors",title:"Toggle Microphone"},c.createElement(Gx,null)),c.createElement("button",{onClick:j,className:"p-3 rounded-full bg-gray-700 hover:bg-gray-600 text-white transition-colors",title:"Toggle Camera"},c.createElement(Yx,null)),c.createElement("button",{onClick:()=>r(!i),className:"p-3 rounded-full bg-gray-700 hover:bg-gray-600 text-white transition-colors",title:"Toggle Chat"},c.createElement(Jx,null)),c.createElement("button",{onClick:()=>o(!g),className:"p-3 rounded-full bg-gray-700 hover:bg-gray-600 text-white transition-colors",title:"Participants"},c.createElement(Xx,null)),c.createElement("button",{onClick:R,className:"p-3 rounded-full bg-red-600 hover:bg-red-700 text-white transition-colors",title:"Leave Meeting"},c.createElement(Vx,null))))}function VN({onLeave:e,meetingId:r,participantName:i,isDoctor:o}){const[g,N]=ne.useState(null),[B,j]=ne.useState(!0),[R,d]=ne.useState(!1),[S,y]=ne.useState(""),b=ne.useRef(null),{join:T,participants:f,localParticipant:h}=Fm({onMeetingJoined:()=>{N("JOINED"),console.log("✅ Meeting joined successfully!"),console.log("Local participant:",h),console.log("Participants:",f),Kn.success("Joined meeting successfully!")},onMeetingLeft:()=>{console.log("❌ Meeting left"),e()},onParticipantJoined:v=>{console.log("👤 Participant joined:",v)},onParticipantLeft:v=>{console.log("👤 Participant left:",v)}}),{publish:k,messages:E}=HN("CHAT",{onMessageReceived:v=>{console.log("📨 Chat message received:",v),Kn.info(`${v.senderName} sent a message`)}});ne.useEffect(()=>{b.current&&(b.current.scrollTop=b.current.scrollHeight)},[E]);const H=()=>{N("JOINING"),T()},m=()=>{if(S.trim()&&k){console.log("📤 Sending chat message:",S);try{k(S,{persist:!0}),y(""),Kn.success("Message sent!")}catch(v){console.error("Failed to send message:",v),Kn.error("Failed to send message. Please try again.")}}else S.trim()&&Kn.error("Chat not available. Please try again.")},P=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),m())};return g==="JOINING"?c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),c.createElement("p",null,"Joining the meeting..."))):g==="JOINED"?c.createElement("div",{className:"flex h-screen bg-gray-900"},c.createElement("div",{className:"flex-1 flex flex-col"},o&&r&&c.createElement("div",{className:"bg-blue-600 text-white p-3 text-center"},c.createElement("p",{className:"text-sm font-medium"},"Share this meeting code with patient:"),c.createElement("div",{className:"flex items-center justify-center gap-2 mt-1"},c.createElement("code",{className:"bg-blue-700 px-3 py-1 rounded font-mono text-lg"},r),c.createElement("button",{onClick:()=>{navigator.clipboard.writeText(r),Kn.success("Meeting code copied to clipboard!")},className:"bg-blue-800 hover:bg-blue-900 px-3 py-1 rounded text-sm transition-colors",title:"Copy meeting code"},"📋 Copy"))),c.createElement("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4"},console.log("Rendering participants:",{localParticipant:h?.id,allParticipants:[...f.keys()],remoteParticipants:[...f.keys()].filter(v=>v!==h?.id)}),h&&c.createElement(e_,{participantId:h.id}),[...f.keys()].filter(v=>v!==h?.id).map(v=>c.createElement(e_,{participantId:v,key:v})),[...f.keys()].filter(v=>v!==h?.id).length===0&&c.createElement("div",{className:"bg-gray-800 rounded-lg flex items-center justify-center"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-2"},c.createElement("span",{className:"text-2xl font-medium"},"👤")),c.createElement("p",{className:"text-sm"},o?"Waiting for patient...":"Waiting for doctor..."),c.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Share the meeting code to invite others")))),c.createElement(FN,{onLeave:e,setShowChat:j,showChat:B,setShowParticipants:d,showParticipants:R})),c.createElement("div",{className:"w-80 bg-gray-800 border-l border-gray-700"},B&&c.createElement("div",{className:"h-full flex flex-col"},c.createElement("div",{className:"p-4 border-b border-gray-700"},c.createElement("h3",{className:"text-white font-semibold"},"Chat"),c.createElement("p",{className:"text-gray-400 text-xs"},"Meeting: ",r)),c.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",ref:b},E.map(v=>c.createElement("div",{key:v.id,className:`p-3 rounded-lg ${v.senderId===h?.id?"bg-blue-600 ml-8":"bg-gray-700 mr-8"}`},c.createElement("div",{className:"flex justify-between items-start mb-1"},c.createElement("span",{className:`font-medium text-sm ${v.senderId===h?.id?"text-blue-100":"text-blue-400"}`},v.senderName||"Unknown"),c.createElement("span",{className:"text-gray-400 text-xs"},new Date(v.timestamp).toLocaleTimeString())),c.createElement("p",{className:"text-sm text-white"},v.message))),E.length===0&&c.createElement("div",{className:"text-center text-gray-400 text-sm py-8"},c.createElement("p",null,"No messages yet"),c.createElement("p",{className:"text-xs mt-1"},"Start the conversation!"))),c.createElement("div",{className:"p-4 border-t border-gray-700"},c.createElement("div",{className:"flex space-x-2"},c.createElement("div",{className:"flex-1 relative"},c.createElement("input",{type:"text",value:S,onChange:v=>y(v.target.value),onKeyPress:P,placeholder:"Type a message...",className:"w-full px-3 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:500,disabled:g!=="JOINED"||!k}),c.createElement("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-400"},S.length,"/500")),c.createElement("button",{onClick:m,disabled:!S.trim()||g!=="JOINED"||!k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},"Send")))),R&&c.createElement("div",{className:"h-full flex flex-col"},c.createElement("div",{className:"p-4 border-b border-gray-700"},c.createElement("h3",{className:"text-white font-semibold"},"Participants"),c.createElement("p",{className:"text-gray-400 text-xs"},f.size+1," online")),c.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-2"},c.createElement("div",{className:"flex items-center space-x-3 p-2 bg-gray-700 rounded-lg"},c.createElement("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},c.createElement("span",{className:"text-white text-sm font-medium"},i?.charAt(0)||"U")),c.createElement("span",{className:"text-white text-sm"},i),c.createElement("span",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded-full"},o?"Doctor":"Patient")),c.createElement("div",{className:"text-center text-gray-400 text-sm py-4"},c.createElement("p",null,"Other participants will appear here"),c.createElement("p",{className:"text-xs mt-1"},"Share the meeting code to invite others")))))):c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("h3",{className:"text-xl mb-4"},"Meeting ID: ",r),c.createElement("button",{onClick:H,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors"},"Join Meeting")))}const H1=({meetingId:e,doctorId:r,userId:i,userName:o,isPatient:g=!0,onLeave:N})=>{const{user:B}=vc(),{doctor:j}=yc(),[R,d]=ne.useState(null),[S,y]=ne.useState(e),[b,T]=ne.useState(!0),f=!g,h=f?j:B,k=h?.name||o||"User";return ne.useEffect(()=>{(async()=>{try{T(!0);const H=await M1(h?._id||i,k,f?["allow_join","allow_mod"]:["allow_join"],f?"doctor":"user");if(d(H),f)if(e==="new"||!e){const m=await Bf(H);y(m.roomId),Kn.success(`New meeting created: ${m.roomId}`)}else try{if((await Qy(H,e)).isValid)y(e);else throw new Error("Invalid meeting")}catch{const P=await Bf(H);y(P.roomId),Kn.success(`New meeting created: ${P.roomId}`)}else{if(!e||e==="new")throw new Error("Meeting ID is required for patients");if(!(await Qy(H,e)).isValid)throw new Error("Invalid meeting ID");y(e)}}catch(H){console.error("Failed to initialize meeting:",H),Kn.error(H.message||"Failed to initialize meeting"),N&&N()}finally{T(!1)}})()},[e,f,h,i,k,N]),b?c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),c.createElement("p",null,"Initializing meeting..."))):!R||!S?c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("p",null,"Failed to initialize meeting"),c.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Retry"))):c.createElement(UN,{config:{meetingId:S,name:k,micEnabled:!0,webcamEnabled:!0,participantId:h?._id||i},token:R,joinWithoutUserInteraction:!1},c.createElement(VN,{onLeave:N,meetingId:S,participantName:k,isDoctor:f}))},qN=()=>{const{meetingId:e,doctorId:r}=Oc(),i=Ds(),{user:o,isAuthenticated:g}=vc(),[N,B]=ne.useState(!1),[j,R]=ne.useState(null),[d,S]=ne.useState(!0);ne.useEffect(()=>{if(!g){Kn.error("Please login to join consultation"),i("/login");return}if(!e){Kn.error("Invalid consultation link"),i("/");return}y()},[e,g]);const y=async()=>{try{S(!0),R({meetingId:e,doctorId:r,patientId:o?._id,patientName:o?.name,startTime:new Date().toISOString()}),B(!0)}catch(T){console.error("Failed to initialize consultation:",T),Kn.error("Failed to start consultation"),i("/")}finally{S(!1)}},b=()=>{B(!1),Kn.info("Consultation ended"),i("/")};return d?c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),c.createElement("p",null,"Initializing consultation..."))):j?c.createElement("div",{className:"h-screen"},N&&c.createElement(H1,{meetingId:j.meetingId,doctorId:j.doctorId,userId:j.patientId,userName:j.patientName,isPatient:!0,onLeave:b})):c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("p",null,"Failed to load consultation"),c.createElement("button",{onClick:()=>i("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Go Home")))},t_=()=>{const{meetingId:e,patientId:r}=Oc(),i=Ds(),{user:o,isAuthenticated:g}=vc(),[N,B]=ne.useState(!1),[j,R]=ne.useState(null),[d,S]=ne.useState(!0),{doctor:y}=yc();ne.useEffect(()=>{if(!y){Kn.error("Please login to host consultation"),i("/doctor/login");return}(!e||e==="new")&&console.log("Doctor creating new consultation"),b()},[e,g]);const b=async()=>{try{S(!0),R({meetingId:e,doctorId:o?._id,doctorName:o?.name,patientId:r,startTime:new Date().toISOString()}),B(!0)}catch(f){console.error("Failed to initialize consultation:",f),Kn.error("Failed to start consultation"),i("/")}finally{S(!1)}},T=()=>{B(!1),Kn.info("Consultation ended"),i("/doctor/dashboard")};return d?c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),c.createElement("p",null,"Initializing consultation..."))):j?c.createElement("div",{className:"h-screen"},N&&c.createElement(H1,{meetingId:j.meetingId,doctorId:j.doctorId,userId:j.doctorId,userName:j.doctorName,isPatient:!1,onLeave:T})):c.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-900"},c.createElement("div",{className:"text-center text-white"},c.createElement("p",null,"Failed to load consultation"),c.createElement("button",{onClick:()=>i("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Go Home")))},ZN=nl({email:ma().email("Invalid email"),password:ma().min(6,"Password must be at least 6 characters")}),WN=()=>{const{login:e,loading:r,error:i}=rl(),o=Ds(),{register:g,handleSubmit:N,formState:{errors:B}}=tu({resolver:au(ZN)}),j=async R=>{await e(R,o)};return c.createElement("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"md:min-w-md w-full bg-white p-8 rounded-xl shadow-md"},c.createElement("div",{className:"text-center mb-6"},c.createElement("div",{className:"text-4xl mb-2"},"👨‍💼"),c.createElement("h1",{className:"text-3xl font-bold text-emerald-800"},"Admin Login"),c.createElement("p",{className:"text-emerald-600"},"Access the admin dashboard")),c.createElement("form",{onSubmit:N(j),className:"space-y-4"},c.createElement(ra,{label:"Email",name:"email",type:"email",...g("email"),error:B.email?.message,autoComplete:"email",required:!0}),c.createElement(ra,{label:"Password",name:"password",type:"password",...g("password"),error:B.password?.message,autoComplete:"current-password",required:!0}),i&&c.createElement("div",{className:"bg-red-100 text-red-600 p-2 rounded text-sm"},i),c.createElement("button",{type:"submit",className:"w-full py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition disabled:opacity-50",disabled:r},r?"Signing in...":"Sign In"))))},$N=({statistics:e})=>{const{hospitalStatistics:r}=rl(),i=[{title:"Total Doctors",count:e?.total,icon:"👨‍⚕️",bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Pending Doctors Reviews",count:e?.pending,icon:"⏳",bgColor:"bg-yellow-100",textColor:"text-yellow-600"},{title:"Approved Doctors",count:e?.verified,icon:"✅",bgColor:"bg-green-100",textColor:"text-green-600"},{title:"Rejected Doctors",count:e?.rejected,icon:"❌",bgColor:"bg-red-100",textColor:"text-red-600"},{title:"Total Hospitals",count:r?.total,icon:"👨‍⚕️",bgColor:"bg-blue-100",textColor:"text-blue-600"},{title:"Pending Hospitals Reviews",count:r?.pending,icon:"⏳",bgColor:"bg-yellow-100",textColor:"text-yellow-600"},{title:"Approved Hospitals",count:r?.verified,icon:"✅",bgColor:"bg-green-100",textColor:"text-green-600"},{title:"Rejected Hospitals",count:r?.rejected,icon:"❌",bgColor:"bg-red-100",textColor:"text-red-600"}];return c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},i.map((o,g)=>c.createElement("div",{key:g,className:"bg-white rounded-lg shadow p-4"},c.createElement("div",{className:"flex items-center"},c.createElement("div",{className:`w-10 h-10 flex items-center justify-center rounded-full ${o.bgColor} ${o.textColor}`},c.createElement("span",{className:"text-lg md:text-xl"},o.icon)),c.createElement("div",{className:"ml-3"},c.createElement("p",{className:"text-xs font-medium text-gray-600"},o.title),c.createElement("p",{className:"text-xl font-semibold text-gray-900"},o.count||0))))))},GN=({label:e,value:r})=>c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},e,":"),c.createElement("span",{className:"text-sm text-gray-900"},r||"Not provided")),jd=({condition:e,trueLabel:r,falseLabel:i})=>c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},e?r:i),KN=({status:e})=>{const r={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${r[e]||"bg-gray-100 text-gray-800"}`},e?.charAt(0).toUpperCase()+e?.slice(1)||"Unknown")},YN=({isRejected:e,isOpen:r,doctor:i,onClose:o,onApprove:g,onReject:N,handleDoctorReject:B,onToggleActive:j,onProfileImageUpload:R})=>{const[d,S]=ne.useState(null),[y,b]=ne.useState(!1),[T,f]=ne.useState(""),[h,k]=ne.useState(i.documents||[]),{DoctorDocumentUpload:E,loading:H,doctorProfilePicture:m,updateDoctorDetails:P,doctorAction:v}=rl(),U=c.useRef(),C=c.useRef(),[_,w]=ne.useState(null),[p,x]=ne.useState(!1),[A,I]=ne.useState({}),[M,F]=ne.useState(!1);c.useEffect(()=>{k(i.documents||[]),I({name:i.name||"",speciality:Array.isArray(i.speciality)?i.speciality:[i.speciality||""],phone:i.phone||"",mainDegree:i.mainDegree||"",fullAddress:i.fullAddress||"",hospital:i.hospital||"",experience:i.experience||"",fee:i.fee||"",availability:i.availability||!1,pmdcNumber:i.pmdcNumber||"",cnic:i.cnic||"",email:i.email||"",gender:i.gender||""})},[i.documents,i]);const z=(Ve,qe)=>{I(nt=>({...nt,[Ve]:qe}))},G=async()=>{F(!0);try{const Ve=A.speciality.filter(nt=>nt.trim()!==""),qe={...A,speciality:Ve,experience:parseInt(A.experience)||0,fee:parseInt(A.fee)||0};P(i._id,qe),x(!1)}catch(Ve){console.log(Ve)}finally{F(!1)}},Z=()=>{x(!1),I({name:i.name||"",speciality:Array.isArray(i.speciality)?i.speciality:[i.speciality||""],phone:i.phone||"",mainDegree:i.mainDegree||"",fullAddress:i.fullAddress||"",hospital:i.hospital||"",hospitalVerified:!!i.hospitalVerified,experience:i.experience||"",fee:i.fee||"",availability:i.availability||!1,pmdcNumber:i.pmdcNumber||"",cnic:i.cnic||"",email:i.email||"",gender:i.gender||""})},ce=async Ve=>{Ve.preventDefault();const qe=Ve.target.files[0];if(qe){URL.createObjectURL(qe);const nt=new FormData;nt.append("documents",qe),await E(nt,i._id)}},X=async()=>{i.isActive?(console.log(i.isActive),await v(i._id,{action:!1})):await v(i._id,{action:!0})},Ee=async Ve=>{const qe=Ve.target.files[0];if(qe){const nt=URL.createObjectURL(qe);w(nt);const Bt=new FormData;Bt.append("image",qe),await m(i._id,Bt)}};if(!r||!i)return null;const Se=Ve=>{if(!Ve)return"Not available";try{return new Date(Ve).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},xe=Ve=>{if(console.log("openImageViewer called with:",Ve),!Ve){console.error("No image URL provided");return}S(Ve),b(!0),console.log("Image viewer state set:",{selectedImage:Ve,isOpen:!0})},_e=()=>{b(!1),S(null)};c.useEffect(()=>{const Ve=qe=>{qe.key==="Escape"&&y&&_e()};return y&&document.addEventListener("keydown",Ve),()=>{document.removeEventListener("keydown",Ve)}},[y]);const Pe=[{key:"name",label:"Name",value:i.name},{key:"email",label:"Email",value:i.email},{key:"phone",label:"Phone",value:i.phone},{key:"cnic",label:"CNIC",value:i.cnic},{key:"gender",label:"Gender",value:i.gender},{key:"religion",label:"Religion",value:i.religion},{key:"address",label:"Address",value:i.fullAddress}],He=[{key:"degree",label:"Main Degree",value:i.mainDegree},{key:"speciality",label:"Speciality",value:Array.isArray(i.speciality)?i.speciality.join(", "):i.speciality},{key:"experience",label:"Experience",value:i.experience?`${i.experience} years`:"Not specified"},{key:"fee",label:"Fee",value:i.fee?`Rs. ${i.fee}`:"Not set"},{key:"hospital",label:"Hospital",value:i.hospital},{key:"pmdc",label:"PMDC Number",value:i.pmdcNumber}],pe=(Ve,qe)=>c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},Ve),c.createElement("div",{className:"space-y-3"},qe.map(({key:nt,label:Bt,value:Pr})=>c.createElement(GN,{key:nt,label:Bt,value:Pr})))),Ge=[{key:"created",label:"Created",value:Se(i.createdAt)},{key:"updated",label:"Updated",value:Se(i.updatedAt)},...i.PaymentCompleted?[{key:"payment",label:"Payment Completed",value:Se(i.PaymentCompleted)}]:[]],Te=[{key:"avg",label:"Average Rating",value:i.rating?.average?`${i.rating.average}/5`:"No ratings"},{key:"reviews",label:"Total Reviews",value:i.rating?.count||0}];return c.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},c.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},c.createElement("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("div",{className:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center relative overflow-hidden"},_||i.profilePicture||i.profileImageUrl?c.createElement("img",{src:_||i.profilePicture||i.profileImageUrl,alt:"Profile",className:"h-12 w-12 object-cover rounded-full",onError:Ve=>{Ve.currentTarget.src=""}}):c.createElement("span",{className:"text-emerald-600 font-medium text-lg"},i.name?.split(" ")?.map(Ve=>Ve[0])?.join("")||"DR"),c.createElement("button",{type:"button",className:"absolute bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 shadow hover:bg-gray-100",title:"Edit Profile Image",onClick:()=>C.current&&C.current.click()},c.createElement("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2H7a2 2 0 01-2-2v-1.586a1 1 0 01.293-.707l9.414-9.414a1 1 0 011.414 0l1.586 1.586a1 1 0 010 1.414l-9.414 9.414A1 1 0 017 19v-1.586z"}))),c.createElement("input",{type:"file",accept:"image/*",ref:C,className:"hidden",onChange:Ee})),c.createElement("div",null,c.createElement("h2",{className:"text-xl font-semibold text-gray-900"},i.name||"Unknown Doctor"),c.createElement("p",{className:"text-sm text-gray-500"},i.email||"No email"))),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("button",{onClick:()=>x(!p),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${p?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-600 text-white hover:bg-gray-700"}`},p?"View Mode":"Edit Mode"),c.createElement("button",{onClick:o,className:"text-gray-400 hover:text-gray-600"},c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),c.createElement("div",{className:"px-6 py-4 grid grid-cols-1 lg:grid-cols-2 gap-6"},p?c.createElement("div",{className:"lg:col-span-2"},c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},c.createElement(D1,{values:A,errors:{},include:{password:!1,confirmPassword:!1,agreement:!1,city:!1,hospital:!1,hospitalVerified:!1},onInputChange:Ve=>qe=>{const nt=qe?.target?.type==="checkbox"?qe.target.checked:qe?.target?.value;z(Ve,nt)},onDropdownChange:(Ve,qe)=>z(Ve,qe),onSpecialtyChange:Ve=>z("speciality",Ve),onCnicChange:Ve=>{const qe=Ve?.target?.value||"";z("cnic",qe)}}),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("input",{type:"checkbox",id:"availability",checked:A.availability||!1,onChange:Ve=>z("availability",Ve.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"availability",className:"text-sm text-gray-700"},"Available for appointments")))):c.createElement(c.Fragment,null,pe("Personal Information",Pe),pe("Professional Information",He)),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Verification Status"),c.createElement("div",{className:"space-y-3"},c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Status:"),c.createElement(KN,{status:i.status})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"PMDC Verified:"),c.createElement(jd,{condition:i.pmdcVerified,trueLabel:"Verified",falseLabel:"Not Verified"})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Hospital Verified:"),c.createElement(jd,{condition:i.hospitalVerified,trueLabel:"Verified",falseLabel:"Not Verified"})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Availability:"),c.createElement(jd,{condition:i.availability,trueLabel:"Available",falseLabel:"Not Available"})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Active:"),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement(jd,{condition:i.isActive,trueLabel:"Active",falseLabel:"Inactive"}),c.createElement("button",{type:"button",className:"ml-2 px-2 py-1 text-xs font-medium text-blue-600 bg-blue-100 rounded hover:bg-blue-200",onClick:X,title:"Toggle Active Status"},"Edit"))),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Blocked:"),c.createElement(jd,{condition:!i.isBlocked,trueLabel:"Not Blocked",falseLabel:"Blocked"})))),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Documents (",h?.length||0,")"),h?.length?h.map((Ve,qe)=>c.createElement("div",{key:qe,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("div",{className:"h-8 w-8 bg-emerald-100 rounded flex items-center justify-center"},c.createElement("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))),c.createElement("span",{className:"text-sm font-medium text-gray-900"},"Document ",qe+1)),c.createElement("button",{onClick:()=>{xe(Ve.documentUrl)},className:"text-emerald-600 hover:text-emerald-800 text-sm font-medium"},"View"))):c.createElement("p",{className:"text-sm text-gray-500"},"No documents uploaded"),c.createElement("input",{id:"documents",type:"file",name:"documents",accept:"image/*",onChange:ce,className:"hidden",ref:U}),c.createElement("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",onClick:()=>U.current&&U.current.click(),disabled:H},H?"Uploading...":"Add Documents"),T&&c.createElement("p",{className:"text-sm text-red-600"},T)),pe("Timestamps",Ge),pe("Rating",Te)),i.verificationNotes&&c.createElement("div",{className:"px-6 pb-6"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Verification Notes"),c.createElement("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg"},i.verificationNotes)),c.createElement("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3"},p&&c.createElement(c.Fragment,null,c.createElement("button",{onClick:Z,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Cancel"),c.createElement("button",{onClick:G,className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",disabled:M},M?"Saving...":"Save Changes")),c.createElement("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Close"),!e&&c.createElement("button",{onClick:()=>B(i._id),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700"},"Reject"),c.createElement("button",{onClick:()=>g(i._id),className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700"},"Approve"))),console.log("Modal render state:",{isImageViewerOpen:y,selectedImage:d}),y&&d&&c.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60]",onClick:_e},c.createElement("div",{className:"relative max-w-4xl max-h-[90vh] mx-4",onClick:Ve=>Ve.stopPropagation()},c.createElement("button",{onClick:_e,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2"},c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))),c.createElement("button",{onClick:()=>{const Ve=document.createElement("a");Ve.href=d,Ve.download=`document_${Date.now()}.jpg`,Ve.click()},className:"absolute top-4 right-16 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2"},c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))),c.createElement("img",{src:d,alt:"Document",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onError:Ve=>{Ve.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCAxMDBDNTAgNzIuODM4IDcyLjgzOCA1MCAxMDAgNTBDMTI3LjE2MiA1MCAxNTAgNzIuODM4IDE1MCAxMDBDMTUwIDEyNy4xNjIgMTI3LjE2MiAxNTAgMTAwIDE1MEM3Mi44MzggMTUwIDUwIDEyNy4xNjIgNTAgMTAwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDEyNUMxMTMuODA3IDEyNSAxMjUgMTEzLjgwNyAxMjUgMTAwQzEyNSA4Ni4xOTMgMTEzLjgwNyA3NSAxMDAgNzVDODYuMTkzIDc1IDc1IDg2LjE5MyA3NSAxMEM3NSAxMTMuODA3IDg2LjE5MyAxMjUgMTAwIDEyNVoiIGZpbGw9IiM2QjcyNzkiLz4KPHN2Zz4K",Ve.target.alt="Image not available"}}),c.createElement("div",{className:"absolute bottom-4 left-4 text-white text-sm bg-black bg-opacity-50 px-3 py-2 rounded-lg"},"Click outside or press ESC to close"))))},QN=({label:e,value:r})=>c.createElement("div",{className:"flex justify-between"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},e,":"),c.createElement("span",{className:"text-sm text-gray-900"},r||"Not provided")),gf=({condition:e,trueLabel:r,falseLabel:i})=>c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},e?r:i),JN=({status:e})=>{const r={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${r[e]||"bg-gray-100 text-gray-800"}`},e?.charAt(0).toUpperCase()+e?.slice(1)||"Unknown")},XN=({isRejected:e,isOpen:r,hospital:i,onClose:o,onApprove:g,onReject:N,handleHospitalReject:B})=>{const[j,R]=ne.useState(null),[d,S]=ne.useState(!1),[y,b]=ne.useState(""),[T,f]=ne.useState(i.documents||[]),{loading:h,hospitalProfilePicture:k}=rl(),E=c.useRef(),H=c.useRef(),[m,P]=ne.useState(null),[v,U]=ne.useState(!1),[C,_]=ne.useState({}),[w,p]=ne.useState(!1);c.useEffect(()=>{f(i.documents||[]),_({name:i.name||"",email:i.email||"",description:i.description||"",hospitalType:i.hospitalType||"",category:i.category||"",licenseNumber:i.licenseNumber||"",establishedYear:i.establishedYear||"",phone:i.phone||"",address:i.address||"",city:i.city||"",totalBeds:i.totalBeds||"",operationTheaters:i.operationTheaters||"",cnic:i.cnic||"",services:i.services||{emergencyServices:i.emergencyServices||!1,ambulanceServices:i.ambulanceServices||!1,icuServices:i.icuServices||!1}})},[i.documents,i]);const x=(Te,Ve)=>{_(qe=>({...qe,[Te]:Ve}))},A=(Te,Ve)=>{_(qe=>({...qe,services:{...qe.services,[Te]:Ve}}))},I=async()=>{p(!0);try{const Te={...C,establishedYear:parseInt(C.establishedYear)||0,totalBeds:parseInt(C.totalBeds)||0,operationTheaters:parseInt(C.operationTheaters)||0};U(!1),Kn.success("Hospital details updated successfully")}catch(Te){console.log(Te),Kn.error("Failed to update hospital details")}finally{p(!1)}},M=()=>{U(!1),_({name:i.name||"",email:i.email||"",description:i.description||"",hospitalType:i.hospitalType||"",category:i.category||"",licenseNumber:i.licenseNumber||"",establishedYear:i.establishedYear||"",phone:i.phone||"",address:i.address||"",city:i.city||"",totalBeds:i.totalBeds||"",operationTheaters:i.operationTheaters||"",cnic:i.cnic||"",services:i.services||{emergencyServices:i.emergencyServices||!1,ambulanceServices:i.ambulanceServices||!1,icuServices:i.icuServices||!1}})},F=async Te=>{Te.preventDefault();const Ve=Te.target.files[0];Ve&&(URL.createObjectURL(Ve),new FormData().append("documents",Ve),Kn.info("Document upload functionality will be available soon"))},z=async Te=>{const Ve=Te.target.files[0];if(Ve){const qe=URL.createObjectURL(Ve);P(qe);const nt=new FormData;nt.append("image",Ve),await k(i._id,nt)}};if(!r||!i)return null;const G=Te=>{if(!Te)return"Not available";try{return new Date(Te).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},Z=Te=>{if(!Te){console.error("No image URL provided");return}R(Te),S(!0)},ce=()=>{S(!1),R(null)};c.useEffect(()=>{const Te=Ve=>{Ve.key==="Escape"&&d&&ce()};return d&&document.addEventListener("keydown",Te),()=>{document.removeEventListener("keydown",Te)}},[d]);const X=[{key:"name",label:"Hospital Name",value:i.name},{key:"email",label:"Email",value:i.email},{key:"phone",label:"Phone",value:i.phone},{key:"cnic",label:"CNIC",value:i.cnic},{key:"address",label:"Address",value:i.address},{key:"city",label:"City",value:i.city}],Ee=[{key:"type",label:"Hospital Type",value:i.hospitalType},{key:"category",label:"Category",value:i.category},{key:"license",label:"License Number",value:i.licenseNumber},{key:"established",label:"Established Year",value:i.establishedYear?`${i.establishedYear}`:"Not specified"},{key:"beds",label:"Total Beds",value:i.totalBeds},{key:"ot",label:"Operation Theaters",value:i.operationTheaters}],Se=(Te,Ve,qe="text",nt=null)=>c.createElement("div",{className:"space-y-2"},c.createElement("label",{className:"text-sm font-medium text-gray-700"},Ve),qe==="select"?c.createElement("select",{value:C[Te]||"",onChange:Bt=>x(Te,Bt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"},nt?.map(Bt=>c.createElement("option",{key:Bt.value,value:Bt.value},Bt.label))):qe==="textarea"?c.createElement("textarea",{value:C[Te]||"",onChange:Bt=>x(Te,Bt.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"}):qe==="checkbox"?c.createElement("input",{type:"checkbox",checked:C[Te]||!1,onChange:Bt=>x(Te,Bt.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}):c.createElement("input",{type:qe,value:C[Te]||"",onChange:Bt=>x(Te,Bt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"})),xe=(Te,Ve)=>c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},Te),c.createElement("div",{className:"space-y-3"},Ve.map(({key:qe,label:nt,value:Bt})=>c.createElement(QN,{key:qe,label:nt,value:Bt})))),_e=()=>c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Basic Information"),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},Se("name","Hospital Name"),Se("email","Email","email"),Se("phone","Phone","tel"),Se("cnic","CNIC"),Se("address","Address","textarea"),Se("city","City"),c.createElement("div",{className:"md:col-span-2"},Se("description","Description","textarea")))),Pe=()=>c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Hospital Information"),c.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},Se("hospitalType","Hospital Type","select",[{value:"Public",label:"Public"},{value:"Private",label:"Private"},{value:"Semi-Private",label:"Semi-Private"},{value:"Military",label:"Military"},{value:"Charity",label:"Charity"}]),Se("category","Category","select",[{value:"General",label:"General"},{value:"Specialized",label:"Specialized"},{value:"Teaching",label:"Teaching"},{value:"Research",label:"Research"},{value:"Emergency",label:"Emergency"}]),Se("licenseNumber","License Number"),Se("establishedYear","Established Year","number"),Se("totalBeds","Total Beds","number"),Se("operationTheaters","Operation Theaters","number"))),He=()=>c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Services"),c.createElement("div",{className:"space-y-3"},c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("input",{type:"checkbox",id:"emergencyServices",checked:C.services?.emergencyServices||C.emergencyServices||!1,onChange:Te=>A("emergencyServices",Te.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"emergencyServices",className:"text-sm text-gray-700"},"Emergency Services")),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("input",{type:"checkbox",id:"ambulanceServices",checked:C.services?.ambulanceServices||C.ambulanceServices||!1,onChange:Te=>A("ambulanceServices",Te.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"ambulanceServices",className:"text-sm text-gray-700"},"Ambulance Services")),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("input",{type:"checkbox",id:"icuServices",checked:C.services?.icuServices||C.icuServices||!1,onChange:Te=>A("icuServices",Te.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),c.createElement("label",{htmlFor:"icuServices",className:"text-sm text-gray-700"},"ICU Services")))),pe=[{key:"created",label:"Created",value:G(i.createdAt)},{key:"updated",label:"Updated",value:G(i.updatedAt)}],Ge=[{key:"avg",label:"Average Rating",value:i.rating?.average?`${i.rating.average}/5`:"No ratings"},{key:"reviews",label:"Total Reviews",value:i.rating?.count||0}];return c.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},c.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},c.createElement("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("div",{className:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center relative overflow-hidden"},m||i.profilePicture||i.profileImageUrl||i.image?c.createElement("img",{src:m||i.profilePicture||i.profileImageUrl||i.image,alt:"Hospital",className:"h-12 w-12 object-cover rounded-full",onError:Te=>{Te.currentTarget.src=""}}):c.createElement("span",{className:"text-emerald-600 font-medium text-lg"},"🏥"),c.createElement("button",{type:"button",className:"absolute bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 shadow hover:bg-gray-100",title:"Edit Hospital Image",onClick:()=>H.current&&H.current.click()},c.createElement("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2H7a2 2 0 01-2-2v-1.586a1 1 0 01.293-.707l9.414-9.414a1 1 0 011.414 0l1.586 1.586a1 1 0 010 1.414l-9.414 9.414A1 1 0 017 19v-1.586z"}))),c.createElement("input",{type:"file",accept:"image/*",ref:H,className:"hidden",onChange:z})),c.createElement("div",null,c.createElement("h2",{className:"text-xl font-semibold text-gray-900"},i.name||"Unknown Hospital"),c.createElement("p",{className:"text-sm text-gray-500"},i.email||"No email"))),c.createElement("div",{className:"flex items-center space-x-2"},c.createElement("button",{onClick:()=>U(!v),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${v?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-600 text-white hover:bg-gray-700"}`},v?"View Mode":"Edit Mode"),c.createElement("button",{onClick:o,className:"text-gray-400 hover:text-gray-600"},c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),c.createElement("div",{className:"px-6 py-4 grid grid-cols-1 lg:grid-cols-2 gap-6"},v?c.createElement("div",{className:"lg:col-span-2"},_e(),Pe(),He()):c.createElement(c.Fragment,null,xe("Basic Information",X),xe("Hospital Information",Ee),xe("Services",[{key:"emergency",label:"Emergency Services",value:i.services?.emergencyServices||i.emergencyServices?"Available":"Not Available"},{key:"ambulance",label:"Ambulance Services",value:i.services?.ambulanceServices||i.ambulanceServices?"Available":"Not Available"},{key:"icu",label:"ICU Services",value:i.services?.icuServices||i.icuServices?"Available":"Not Available"}])),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Verification Status"),c.createElement("div",{className:"space-y-3"},c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Status:"),c.createElement(JN,{status:i.status})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"License Verified:"),c.createElement(gf,{condition:i.licenseVerified,trueLabel:"Verified",falseLabel:"Not Verified"})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Active:"),c.createElement(gf,{condition:i.isActive,trueLabel:"Active",falseLabel:"Inactive"})),c.createElement("div",{className:"flex justify-between items-center"},c.createElement("span",{className:"text-sm font-medium text-gray-500"},"Blocked:"),c.createElement(gf,{condition:!i.isBlocked,trueLabel:"Not Blocked",falseLabel:"Blocked"})))),c.createElement("div",{className:"space-y-4"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Documents (",T?.length||0,")"),T?.length?T.map((Te,Ve)=>c.createElement("div",{key:Ve,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},c.createElement("div",{className:"flex items-center space-x-3"},c.createElement("div",{className:"h-8 w-8 bg-emerald-100 rounded flex items-center justify-center"},c.createElement("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))),c.createElement("span",{className:"text-sm font-medium text-gray-900"},"Document ",Ve+1)),c.createElement("button",{onClick:()=>{Z(Te.documentUrl)},className:"text-emerald-600 hover:text-emerald-800 text-sm font-medium"},"View"))):c.createElement("p",{className:"text-sm text-gray-500"},"No documents uploaded"),c.createElement("input",{id:"documents",type:"file",name:"documents",accept:"image/*",onChange:F,className:"hidden",ref:E}),c.createElement("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",onClick:()=>E.current&&E.current.click(),disabled:h},h?"Uploading...":"Add Documents"),y&&c.createElement("p",{className:"text-sm text-red-600"},y)),xe("Timestamps",pe),xe("Rating",Ge)),i.verificationNotes&&c.createElement("div",{className:"px-6 pb-6"},c.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Verification Notes"),c.createElement("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg"},i.verificationNotes)),c.createElement("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3"},v&&c.createElement(c.Fragment,null,c.createElement("button",{onClick:M,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Cancel"),c.createElement("button",{onClick:I,className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700",disabled:w},w?"Saving...":"Save Changes")),c.createElement("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Close"),!e&&c.createElement("button",{onClick:()=>B(i._id),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700"},"Reject"),c.createElement("button",{onClick:()=>g(i._id),className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700"},"Approve"))),d&&j&&c.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60]",onClick:ce},c.createElement("div",{className:"relative max-w-4xl max-h-[90vh] mx-4",onClick:Te=>Te.stopPropagation()},c.createElement("button",{onClick:ce,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2"},c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))),c.createElement("button",{onClick:()=>{const Te=document.createElement("a");Te.href=j,Te.download=`document_${Date.now()}.jpg`,Te.click()},className:"absolute top-4 right-16 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2"},c.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))),c.createElement("img",{src:j,alt:"Document",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onError:Te=>{Te.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCAxMDBDNTAgNzIuODM4IDcyLjgzOCA1MCAxMDAgNTBDMTI3LjE2MiA1MCAxNTAgNzIuODM4IDE1MCAxMDBDMTUwIDEyNy4xNjIgMTI3LjE2MiAxNTAgMTAwIDE1MEM3Mi44MzggMTUwIDUwIDEyNy4xNjIgNTAgMTAwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDEyNUMxMTMuODA3IDEyNSAxMjUgMTEzLjgwNyAxMjUgMTAwQzEyNSA4Ni4xOTMgMTEzLjgwNyA3NSAxMDAgNzVDODYuMTkzIDc1IDc1IDg2LjE5MyA3NSAxMEM3NSAxMTMuODA3IDg2LjE5MyAxMjUgMTAwIDEyNVoiIGZpbGw9IiM2QjcyNzkiLz4KPHN2Zz4K",Te.target.alt="Image not available"}}),c.createElement("div",{className:"absolute bottom-4 left-4 text-white text-sm bg-black bg-opacity-50 px-3 py-2 rounded-lg"},"Click outside or press ESC to close"))))},tm=({pendingItems:e,type:r,onApprove:i,onReject:o,isRejected:g,onOpenRejectModal:N,onActivatePayment:B})=>{const[j,R]=ne.useState(null),[d,S]=ne.useState(!1),[y,b]=ne.useState(null),[T,f]=ne.useState(!1);if(e.length===0)return c.createElement("div",{className:"p-8 text-center"},c.createElement("span",{className:"text-4xl mb-4 block"},r==="doctor"?"👨‍⚕️":"🏥"),c.createElement("p",{className:"text-gray-600"},"No pending ",r," applications to review!"));const h=v=>{r==="doctor"?(R(v),S(!0)):r==="hospital"&&(b(v),f(!0))},k=()=>{S(!1),R(null),f(!1),b(null)},E=v=>{i(v),k()},H=v=>{const U=v.split(" ").map(_=>_[0]).join(""),C=U.length<=2?"text-base":U.length===3?"text-sm":"text-xs";return c.createElement("span",{className:`text-emerald-600 font-medium ${C}`},U)},P=r==="doctor"?[{key:"name",label:"Doctor",render:v=>c.createElement("div",{className:"flex items-center"},c.createElement("div",{className:"flex-shrink-0 h-10 w-10"},c.createElement("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center overflow-hidden"},v.profilePicture||v.profileImageUrl?c.createElement("img",{src:v.profilePicture||v.profileImageUrl,alt:"Profile",className:"h-10 w-10 object-cover rounded-full",onError:U=>{U.currentTarget.style.display="none",U.currentTarget.nextElementSibling.style.display="flex"}}):null,c.createElement("div",{className:`h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center ${v.profilePicture||v.profileImageUrl?"hidden":""}`},H(v.name)))),c.createElement("div",{className:"ml-4"},c.createElement("div",{className:"text-sm font-medium text-gray-900"},v.name),c.createElement("div",{className:"text-sm text-gray-500"},v.email)))},{key:"speciality",label:"Speciality",render:v=>c.createElement("div",null,c.createElement("div",{className:"text-sm text-gray-900"},v.speciality),c.createElement("div",{className:"text-sm text-gray-500"},v.mainDegree))},{key:"contact",label:"Contact",render:v=>c.createElement("div",null,c.createElement("div",{className:"text-sm text-gray-900"},v.phone),c.createElement("div",{className:"text-sm text-gray-500"},v.hospital))},{key:"pmdc",label:"PMDC Status",render:v=>c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.pmdcVerified?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},v.pmdcVerified?"Verified":"Not Verified")},{key:"paymentStatus",label:"Payment Status",render:v=>c.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},v.isActive?"Active":"Inactive")}]:[{key:"name",label:"Hospital",render:v=>c.createElement("div",{className:"flex items-center"},c.createElement("div",{className:"flex-shrink-0 h-10 w-10"},c.createElement("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center overflow-hidden"},v.profilePicture||v.profileImageUrl||v.image?c.createElement("img",{src:v.profilePicture||v.profileImageUrl||v.image,alt:"Profile",className:"h-10 w-10 object-cover rounded-full",onError:U=>{U.currentTarget.style.display="none",U.currentTarget.nextElementSibling.style.display="flex"}}):null,c.createElement("div",{className:`h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center ${v.profilePicture||v.profileImageUrl||v.image?"hidden":""}`},H(v.name)))),c.createElement("div",{className:"ml-4"},c.createElement("div",{className:"text-sm font-medium text-gray-900"},v.name),c.createElement("div",{className:"text-sm text-gray-500"},v.email)))},{key:"type",label:"Type & Category",render:v=>c.createElement("div",null,c.createElement("div",{className:"text-sm text-gray-900"},v.hospitalType),c.createElement("div",{className:"text-sm text-gray-500"},v.category))},{key:"contact",label:"Contact",render:v=>c.createElement("div",null,c.createElement("div",{className:"text-sm text-gray-900"},v.phone),c.createElement("div",{className:"text-sm text-gray-500"},v.city))},{key:"services",label:"Services",render:v=>c.createElement("div",{className:"flex flex-wrap gap-1"},v.emergencyServices&&c.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},"Emergency"),v.ambulanceServices&&c.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800"},"Ambulance"),v.icuServices&&c.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},"ICU"))}];return c.createElement("div",{className:"overflow-x-auto"},c.createElement("table",{className:"min-w-full divide-y divide-gray-200"},c.createElement("thead",{className:"bg-gray-50"},c.createElement("tr",null,P.map(v=>c.createElement("th",{key:v.key,className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},v.label)),c.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions"))),c.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},e.map(v=>c.createElement("tr",{key:v._id,className:"hover:bg-gray-50"},P.map(U=>c.createElement("td",{key:U.key,className:"px-6 py-4 whitespace-nowrap"},U.render(v))),c.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},c.createElement("div",{className:"flex space-x-2"},c.createElement("button",{onClick:()=>i(v._id),className:"bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700 transition-colors"},"Approve"),!g&&c.createElement("button",{onClick:()=>o(v._id),className:"bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors"},"Reject"),c.createElement("button",{onClick:()=>h(v),className:"bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors"},"View Details"))))))),d&&j&&c.createElement(YN,{isOpen:d,onClose:k,onApprove:E,doctor:j,handleDoctorReject:o,isRejected:g}),T&&y&&c.createElement(XN,{isOpen:T,onClose:k,onApprove:E,hospital:y,handleHospitalReject:o,isRejected:g}))},eA=({logout:e,navigate:r})=>{const i=()=>{e(),r("/admin/login")};return c.createElement("div",{className:"bg-white shadow-sm border-b"},c.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},c.createElement("div",{className:"flex justify-between items-center py-4"},c.createElement("div",{className:"flex items-center"},c.createElement("span",{className:"text-emerald-600 text-2xl mr-3"},"👨‍💼"),c.createElement("h1",{className:"text-2xl font-bold text-emerald-800"},"Admin Dashboard")),c.createElement("div",{className:"flex items-center space-x-4"},c.createElement("button",{onClick:i,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors"},"Logout")))))},tA=()=>{const{admin:e,pendingDoctors:r,approvedDoctors:i,rejectedDoctors:o,pendingHospitals:g,approvedHospitals:N,rejectedHospitals:B,approveDoctor:j,rejectDoctor:R,approveHospital:d,rejectHospital:S,logout:y,fetchPendingDoctors:b,fetchApprovedDoctors:T,fetchRejectedDoctors:f,fetchPendingHospitals:h,fetchRejectedHospitals:k,statistics:E}=rl(),H=Ds(),[m,P]=ne.useState(null),[v,U]=ne.useState(!1),[C,_]=ne.useState("");ne.useEffect(()=>{b(),T(),f(),h(),k()},[]);const w=async(M,F)=>{await j(M)},p=async M=>{await d(M)},x=async M=>{await R(M)},A=async M=>{S(M)},I=(M,F)=>{P(M),_(F),U(!0)};return c.createElement("div",{className:"min-h-screen bg-emerald-50"},c.createElement(eA,{logout:y,navigate:H}),c.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},c.createElement($N,{statistics:E}),c.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},c.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},c.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Pending Doctor Applications"),c.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Review and approve or reject doctor applications")),c.createElement(tm,{pendingItems:r,type:"doctor",onApprove:M=>w(M),onReject:M=>x(M),onOpenRejectModal:M=>I(M,"doctor")})),c.createElement("div",{className:"bg-white rounded-lg shadow"},c.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},c.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Pending Hospital Applications"),c.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Review and approve or reject hospital applications")),c.createElement(tm,{pendingItems:g,type:"hospital",onApprove:M=>p(M),onReject:M=>A(M),onOpenRejectModal:M=>I(M,"hospital")})),c.createElement("div",{className:"bg-white rounded-lg shadow my-8"},c.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},c.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Rejected Doctor Applications"),c.createElement("p",{className:"text-sm text-gray-600 mt-1"},"List of rejected doctor applications")),c.createElement(tm,{pendingItems:o,type:"doctor",isRejected:!0})),c.createElement("div",{className:"bg-white rounded-lg shadow"},c.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},c.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Rejected Hospital Applications"),c.createElement("p",{className:"text-sm text-gray-600 mt-1"},"List of rejected hospital applications")),c.createElement(tm,{pendingItems:B,type:"hospital",isRejected:!0}))))},nA=()=>{const[e,r]=ne.useState(null),[i,o]=ne.useState(null),[g,N]=ne.useState(null),[B,j]=ne.useState(""),[R,d]=ne.useState(!1),S=Ds(),{UpdateProfilePic:y,DoctorDocumentUpload:b,loading:T,doctor:f}=yc();ne.useEffect(()=>()=>{g&&URL.revokeObjectURL(g)},[g]),ne.useEffect(()=>{B&&d(!0)},[B]);const h=H=>{const m=H.target.files;m.length>0?r(m):r(null)},k=H=>{const m=H.target.files[0];if(o(m),m){const P=URL.createObjectURL(m);N(P);const v=new FormData;v.append("image",m),y(v)}},E=H=>{if(H.preventDefault(),!e){j("Please upload at least one image document.");return}const m=new FormData;Array.from(e).forEach(P=>{m.append("documents",P)}),b(m,S),j("Login successful but account is still in pending verification. We are reviewing your profile and will contact you via email.")};return f?.hasDocuments?c.createElement("div",{className:"min-h-screen flex items-center justify-center px-4 py-12"},c.createElement("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-lg p-8 text-center"},c.createElement("div",{className:"flex justify-center mb-6"},c.createElement(rP,{className:"w-20 h-20 text-emerald-500"})),c.createElement("h2",{className:"text-3xl font-bold text-emerald-800 mb-4"},"Documents Already Uploaded"),c.createElement("p",{className:"text-gray-600 mb-6"},"Your documents have been successfully uploaded and are currently under review. You cannot upload additional documents at this time."),c.createElement("button",{onClick:()=>S("/"),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-3 px-6 rounded-md shadow transition"},"Go to Home"))):c.createElement("div",{className:"min-h-screen  flex items-center justify-center px-4 py-12"},c.createElement("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-lg p-8"},c.createElement("h2",{className:"text-3xl font-bold text-center text-emerald-800 mb-6"},"Upload Your Documents"),c.createElement("form",{onSubmit:E,className:"space-y-6"},c.createElement("div",{className:"flex flex-col items-center gap-2"},c.createElement("label",{htmlFor:"profileImage",className:"cursor-pointer group"},c.createElement("div",{className:"w-28 h-28 mx-auto rounded-full border-4 border-dashed border-emerald-400 flex items-center justify-center bg-gray-50 overflow-hidden transition hover:border-emerald-600"},g?c.createElement("img",{src:g,alt:"Profile",className:"w-full h-full object-cover"}):c.createElement(iP,{className:"w-16 h-16 text-gray-300 group-hover:text-emerald-400"})),c.createElement("input",{id:"profileImage",type:"file",name:"profileImage",accept:"image/*",onChange:k,className:"hidden"}),c.createElement("p",{className:"text-sm text-gray-500 mt-2 group-hover:text-emerald-700 transition"},"Click to upload profile image (optional)"))),c.createElement("div",{className:"w-full"},c.createElement("label",{className:"block text-sm font-medium text-emerald-700 mb-1"},"Upload Supporting Documents"," ",c.createElement("span",{className:"text-red-500"},"*")),c.createElement("div",{className:"flex items-center justify-center w-full"},c.createElement("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-emerald-300 rounded-lg cursor-pointer bg-emerald-50 hover:bg-emerald-100 transition"},c.createElement("div",{className:"flex flex-col items-center justify-center pt-5 pb-6"},c.createElement(_1,{className:"w-8 h-8 mb-2 text-emerald-500"}),c.createElement("p",{className:"text-sm text-gray-500"},c.createElement("span",{className:"font-semibold"},"Click to upload")," or drag & drop image(s)"),c.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Only image formats are allowed (JPG, PNG, etc.)")),c.createElement("input",{type:"file",name:"documents",accept:"image/*",onChange:h,className:"hidden",multiple:!0,required:!0}))),e&&c.createElement("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside space-y-1"},Array.from(e).map((H,m)=>c.createElement("li",{key:m},H.name)))),c.createElement("button",{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-2 px-4 rounded-md shadow transition"},T?"Submitting...":"Submit Documents"))),R&&c.createElement(Um,{open:R,onOpenChange:d,title:"Verification Pending",description:"Login successful but account is still in pending verification. We are reviewing your profile and will contact you via email."},c.createElement("button",{className:"w-fit mx-auto px-5 py-2 rounded-lg bg-emerald-600 text-white font-semibold shadow-md hover:bg-emerald-700 transition-all duration-300",onClick:()=>S("/")},"Home")))},rA=()=>{const{doctor:e,logout:r,DoctorProfileUpdate:i,UpdateProfilePic:o}=yc(),[g,N]=ne.useState(!1),[B,j]=ne.useState(""),[R,d]=ne.useState(!1),[S,y]=ne.useState(""),[b,T]=ne.useState([]),[f,h]=ne.useState({phone:e?.phone||"",availability:Array.isArray(e?.availability)?e.availability:e?.availability?[e.availability]:[],fee:e?.fee||"",fullAddress:e?.fullAddress||"",experience:e?.experience||""}),k=Ds();ne.useEffect(()=>{const v=()=>{T([{patientName:"John Doe",date:new Date,meetingId:"meeting_1754952068034_88yzffp2o",patientId:"patient_001",symptoms:"Fever and headache"}])};v();const U=setInterval(v,3e4);return()=>clearInterval(U)},[]);const E=()=>{if(!S.trim()){Kn.error("Please enter a consultation code");return}k(`/doctor/consultation/${S}/patient_waiting`)},H=async v=>{v.preventDefault(),i(f)},m=v=>{const U=v.target.files[0];if(U){const C=URL.createObjectURL(U);j(C);const _=new FormData;_.append("image",U),o(_)}},P=()=>{r(k)};return e?e.status==="pending"?c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50 p-4"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-2xl w-full text-center"},c.createElement("div",{className:"mb-6"},c.createElement("div",{className:"w-20 h-20 mx-auto bg-yellow-100 rounded-full flex items-center justify-center mb-4"},c.createElement("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),c.createElement("h2",{className:"text-3xl font-bold text-yellow-700 mb-4"},"Application Pending"),c.createElement("p",{className:"text-lg text-gray-600 mb-6"},"Your account is pending verification. We will notify you via email once verified."),c.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},c.createElement("p",{className:"text-sm text-yellow-800"},c.createElement("strong",null,"Current Status:")," Pending Verification"),c.createElement("p",{className:"text-sm text-yellow-800 mt-1"},c.createElement("strong",null,"Name:")," ",e.name),c.createElement("p",{className:"text-sm text-yellow-800 mt-1"},c.createElement("strong",null,"Speciality:")," ",e.speciality?.join(", ")||"Not specified"))))):c.createElement("div",{className:"min-h-[60vh] bg-emerald-50 py-16 px-4 flex justify-center"},c.createElement("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-2xl w-full"},c.createElement("div",{className:"flex justify-between items-center mb-6"},c.createElement("h1",{className:"text-3xl font-bold text-emerald-800"},"Doctor Profile"),c.createElement("div",{className:"flex gap-3 items-center"},b.length>0&&c.createElement("div",{className:"relative"},c.createElement("button",{onClick:()=>{document.querySelector("[data-consultation-section]")?.scrollIntoView({behavior:"smooth"})},className:"bg-red-100 text-red-700 px-3 py-2 rounded-lg hover:bg-red-200 transition-colors relative"},c.createElement("span",{className:"font-medium"},"Pending Consultations"),c.createElement("span",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center"},b.length))),c.createElement("button",{onClick:()=>N(!g),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700"},g?"Cancel":"Edit"),c.createElement("button",{onClick:P,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"},"Logout"))),g?c.createElement("form",{onSubmit:H,className:"space-y-6"},c.createElement("div",{className:"flex flex-col items-center mb-6"},c.createElement("div",{className:"relative"},c.createElement("img",{src:B||e.profilePicture,alt:e.name,className:"w-28 h-28 rounded-full object-cover mb-4 border-4 border-emerald-100"}),c.createElement("label",{className:"absolute bottom-4 right-0 bg-emerald-600 text-white p-2 rounded-full cursor-pointer hover:bg-emerald-700"},c.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})),c.createElement("input",{type:"file",accept:"image/*",onChange:m,className:"hidden"}))),c.createElement("h2",{className:"text-xl font-bold text-emerald-800"},e.name),c.createElement("p",{className:"text-sm text-emerald-700"},e.speciality?.join(", ")||e.specialty)),c.createElement(ra,{label:"Phone Number",name:"phone",type:"tel",value:f.phone,onChange:v=>h(U=>({...U,phone:v.target.value})),placeholder:"Enter phone number"}),c.createElement(ra,{label:"Consultation Fee (Rs.)",name:"fee",type:"text",value:f.fee,onChange:v=>h(U=>({...U,fee:v.target.value})),placeholder:"Enter consultation fee"}),c.createElement(ra,{label:"Experience",name:"experience",type:"text",value:f.experience,onChange:v=>h(U=>({...U,experience:v.target.value})),placeholder:"Enter years of experience"}),c.createElement(ra,{label:"Full Address",name:"fullAddress",type:"text",value:f.fullAddress,onChange:v=>h(U=>({...U,fullAddress:v.target.value})),placeholder:"Enter full address"}),c.createElement("div",null,c.createElement("label",{className:"font-medium text-emerald-700 mb-1 block"},"Availability"),c.createElement("div",{className:"grid grid-cols-2 gap-2"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(v=>c.createElement("label",{key:v,className:"flex items-center"},c.createElement("input",{type:"checkbox",checked:f.availability.includes(v),onChange:U=>h(C=>({...C,availability:U.target.checked?[...C.availability,v]:C.availability.filter(_=>_!==v)})),className:"mr-2"}),v)))),c.createElement("div",{className:"flex justify-between"},c.createElement("button",{type:"button",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700",onClick:()=>d(!0)},"Update More Details"),c.createElement("button",{type:"submit",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700"},"Save Changes"))):c.createElement("div",null,c.createElement("div",{className:"flex flex-col items-center mb-6"},c.createElement("img",{src:e.profilePicture,alt:e.name,className:"w-28 h-28 rounded-full object-cover mb-2 border-4 border-emerald-100"}),c.createElement("h2",{className:"text-xl font-bold text-emerald-800"},e.name),c.createElement("p",{className:"text-sm text-emerald-700"},e.speciality?.join(", ")||e.specialty)),c.createElement("div",{className:"space-y-3"},c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Experience:")," ",e.experience," years"),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Hospital:")," ",e.hospital),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Location:")," ",e.fullAddress),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Rating:")," ⭐ ",e?.rating?.average||0," (",e?.rating?.count||0," reviews)"),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Fee:")," Rs. ",e.fee||"Not set"),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Availability:")," ",Array.isArray(e.availability)?e.availability.join(", "):e.availability||"Not specified"),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"PMDC Number:")," ",e.pmdcNumber),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Main Degree:")," ",e.mainDegree),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Status:")," ",c.createElement("span",{className:`px-2 py-1 rounded text-xs ${e.status==="verified"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},e.status)),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Documents Uploaded:")," ",c.createElement("span",{className:`px-2 py-1 rounded text-xs ${e.hasDocuments?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},e.hasDocuments?"Yes":"No")),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Hospital Verified:")," ",c.createElement("span",{className:`px-2 py-1 rounded text-xs ${e.hospitalVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},e.hospitalVerified?"Yes":"No")),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"PMDC Verified:")," ",c.createElement("span",{className:`px-2 py-1 rounded text-xs ${e.pmdcVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},e.pmdcVerified?"Yes":"No")),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Member of Registered Hospital:")," ",c.createElement("span",{className:`px-2 py-1 rounded text-xs ${e.memberofRegisterdHospital?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},e.memberofRegisterdHospital?"Yes":"No")),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"CNIC:")," ",e.cnic),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Phone:")," ",e.phone),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Email:")," ",e.email),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Gender:")," ",e.gender),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Religion:")," ",e.religion),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Payment Completed:")," ",new Date(e.PaymentCompleted).toLocaleDateString()),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Created:")," ",new Date(e.createdAt).toLocaleDateString()),c.createElement("p",{className:"text-gray-700 mb-1"},c.createElement("b",null,"Last Updated:")," ",new Date(e.updatedAt).toLocaleDateString())),c.createElement("div",{className:"mt-8 border-t pt-6","data-consultation-section":!0},c.createElement("h3",{className:"text-lg font-semibold text-emerald-800 mb-4"},"Video Consultation Management"),c.createElement("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4"},c.createElement("h4",{className:"font-semibold text-green-800 mb-3"},"🚀 Start New Consultation"),c.createElement("p",{className:"text-green-700 text-sm mb-3"},"Create a new video consultation room for patients to join."),c.createElement("button",{onClick:()=>{k("/doctor/consultation/new/new_patient")},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium"},"Start New Consultation")),c.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4"},c.createElement("h4",{className:"font-semibold text-blue-800 mb-3"},"Join Existing Consultation"),c.createElement("p",{className:"text-blue-700 text-sm mb-3"},"A patient has started a video consultation and is waiting for you to join. Enter the consultation code below to join the session."),b.length>0&&c.createElement("div",{className:"mb-4 p-3 bg-blue-100 border border-blue-300 rounded-lg"},c.createElement("p",{className:"text-blue-800 text-sm font-medium mb-2"},"💡 Example Consultation Code:"),c.createElement("div",{className:"flex items-center gap-2"},c.createElement("code",{className:"bg-blue-200 px-2 py-1 rounded text-sm font-mono"},b[0].meetingId),c.createElement("button",{onClick:()=>y(b[0].meetingId),className:"text-blue-600 hover:text-blue-800 text-sm underline"},"Use this code"))),c.createElement("div",{className:"flex gap-3"},c.createElement("input",{type:"text",value:S,onChange:v=>y(v.target.value),placeholder:"Enter consultation code (e.g., lssf-npyx-3zzd)",className:"flex-1 px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),c.createElement("button",{onClick:E,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium"},"Join Now")),c.createElement("div",{className:"mt-3 text-xs text-blue-600"},c.createElement("p",null,"• Make sure you have a stable internet connection"),c.createElement("p",null,"• Allow camera and microphone access when prompted"),c.createElement("p",null,"• Find a quiet, private space for the consultation"),c.createElement("p",null,"• Enter the meeting code provided by the patient or from your dashboard")))),c.createElement("div",{className:"mt-6"},c.createElement("h3",{className:"text-lg font-semibold text-emerald-800 mb-3"},"Consultation Status"),c.createElement("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4"},c.createElement("p",{className:"text-gray-600 text-sm"},b&&b.length>0?c.createElement(c.Fragment,null,c.createElement("span",{className:"font-medium text-yellow-700"},"You have ",b.length," pending consultation(s)."),c.createElement("ul",{className:"list-disc list-inside text-sm text-gray-700 mt-2"},b.map((v,U)=>c.createElement("li",{key:U,className:"flex items-center justify-between mb-2 p-2 bg-white rounded border"},c.createElement("div",{className:"flex-1"},c.createElement("span",{className:"font-medium"},"Patient: ",v.patientName),c.createElement("br",null),c.createElement("span",{className:"text-sm text-gray-600"},"Date:"," ",new Date(v.date).toLocaleDateString()),c.createElement("br",null),c.createElement("span",{className:"text-sm text-gray-600"},"Meeting ID: ",v.meetingId),v.symptoms&&c.createElement(c.Fragment,null,c.createElement("br",null),c.createElement("span",{className:"text-sm text-gray-600"},"Symptoms: ",v.symptoms))),c.createElement("button",{onClick:()=>{y(v.meetingId),document.querySelector("[data-consultation-section]")?.scrollIntoView({behavior:"smooth"})},className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors ml-3"},"Quick Join"))))):c.createElement("span",{className:"text-green-600"},"No pending consultations at the moment.")))))),c.createElement(Um,{open:R,onOpenChange:d,title:"Need to Update More Details?",description:"We're here to help! For additional profile updates, please reach out to our support team. You can contact us directly at +92 348 8597922 or connect with our admin team for personalized assistance."})):c.createElement("div",{className:"min-h-[60vh] flex items-center justify-center bg-emerald-50"},c.createElement("h2",{className:"text-2xl text-emerald-700 font-semibold"},"No doctor found."))},aA=({children:e})=>{const{admin:r}=rl();return r?e:c.createElement(nm,{to:"/admin/login",replace:!0})},iA=()=>c.createElement(VE,null,c.createElement(Ia,{element:c.createElement(aR,null)},c.createElement(Ia,{path:"/",element:c.createElement(UR,null)}),c.createElement(Ia,{path:"/doctors",element:c.createElement(xN,null)}),c.createElement(Ia,{path:"/hospitals",element:c.createElement(RN,null)}),c.createElement(Ia,{path:"/labs",element:c.createElement(kN,null)}),c.createElement(Ia,{path:"/medicines",element:c.createElement(CN,null)}),c.createElement(Ia,{path:"/hospitals/:slug",element:c.createElement(TN,null)}),c.createElement(Ia,{path:"/medicine/:slug",element:c.createElement(AN,null)}),c.createElement(Ia,{path:"/lab/:slug",element:c.createElement(NN,null)}),c.createElement(Ia,{path:"/register/doctor",element:c.createElement(mN,null)}),c.createElement(Ia,{path:"/register/hospital",element:c.createElement(_N,null)}),c.createElement(Ia,{path:"/doctor/profile/",element:c.createElement(rA,null)}),c.createElement(Ia,{path:"/doctor/profile/:slug",element:c.createElement(EN,null)}),c.createElement(Ia,{path:"/doctor/book/:slug",element:c.createElement(ON,null)}),c.createElement(Ia,{path:"/doctor/:slug",element:c.createElement(SN,null)}),c.createElement(Ia,{path:"/hospitals/:slug/doctors",element:c.createElement(PN,null)}),c.createElement(Ia,{path:"/hospitals/:slug/book",element:c.createElement(DN,null)}),c.createElement(Ia,{path:"/profile",element:c.createElement(MN,null)}),c.createElement(Ia,{path:"/admin/dashboard",element:c.createElement(aA,null,c.createElement(tA,null))})),c.createElement(Ia,{path:"/consultation/:meetingId/:doctorId",element:c.createElement(qN,null)}),c.createElement(Ia,{path:"/doctor/consultation/:meetingId/:patientId",element:c.createElement(t_,null)}),c.createElement(Ia,{path:"/doctor/consultation/new/:patientId",element:c.createElement(t_,null)}),c.createElement(Ia,{element:c.createElement(iR,null)},c.createElement(Ia,{path:"/login",element:c.createElement(tN,null)}),c.createElement(Ia,{path:"/hospital/login",element:c.createElement(wN,null)}),c.createElement(Ia,{path:"/doctor/login",element:c.createElement(aN,null)}),c.createElement(Ia,{path:"/doctor/upload-documents",element:c.createElement(nA,null)}),c.createElement(Ia,{path:"/admin/login",element:c.createElement(WN,null)}),c.createElement(Ia,{path:"/register",element:c.createElement(rN,null)})));function sA(){return c.createElement(eR,null,c.createElement(nR,null,c.createElement(tR,null,c.createElement(Rx,null,c.createElement(pS,{basename:"/quickMed"},c.createElement(iA,null))))))}Qw.createRoot(document.getElementById("root")).render(c.createElement(ne.StrictMode,null,c.createElement(sA,null),c.createElement(xx,null)));
